!function o(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";L.LabelTextCollision=L.Canvas.extend({options:{collisionFlg:!0,fontName:"FangSong",fontSize:"16",fontWeight:"normal",fontStyle:"normal",textColor:"blue",borderColor:"white",borderWidth:"4.0",position:"mid",markerPadding:2,markerWidth:0,markerHeight:0},initialize:function(e){e=L.Util.setOptions(this,e),this._layers=this._layers||{},this.options=e},_handleMouseHover:function(e,t){var n,r;for(n in this._drawnLayers)(r=this._drawnLayers[n]).options.interactive&&r._containsPoint(t)&&(L.DomUtil.addClass(this._containerText,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e)},_handleMouseOut:function(e,t){var n=this._hoveredLayer;!n||"mouseout"!==e.type&&n._containsPoint(t)||(L.DomUtil.removeClass(this._containerText,"leaflet-interactive"),this._fireEvent([n],e,"mouseout"),this._hoveredLayer=null)},_updateTransform:function(e,t){L.Canvas.prototype._updateTransform.call(this,e,t);var n=this._map.getZoomScale(t,this._zoom),r=L.DomUtil.getPosition(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),a=this._map.project(e,t).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);L.Browser.any3d?L.DomUtil.setTransform(this._containerText,s,n):L.DomUtil.setPosition(this._containerText,s)},_initContainer:function(e){L.Canvas.prototype._initContainer.call(this),this._containerText=document.createElement("canvas"),L.DomEvent.on(this._containerText,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(this._containerText,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(this._containerText,"mouseout",this._handleMouseOut,this),this._ctxLabel=this._containerText.getContext("2d"),L.DomUtil.addClass(this._containerText,"leaflet-zoom-animated"),this.getPane().appendChild(this._containerText)},_update:function(){this._textList=[],L.Renderer.prototype._update.call(this);var e=this._bounds,t=this._containerText,n=e.getSize(),r=L.Browser.retina?2:1;L.DomUtil.setPosition(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",t.style.zIndex="4",this._container.style.zIndex="3",t.style.zIndex="10000",this._container.style.zIndex="9999",L.Browser.retina&&this._ctxLabel.scale(2,2),this._ctxLabel.translate(-e.min.x,-e.min.y),L.Canvas.prototype._update.call(this)},_updatePoly:function(e,t){L.Canvas.prototype._updatePoly.call(this,e,t),this._text(this._ctxLabel,e)},_updateCircle:function(e){L.Canvas.prototype._updateCircle.call(this,e),this._text(this._ctxLabel,e)},_text:function(e,t){if(null!=t.options.text){e.globalAlpha=1;var n=t._point;if(null==n){if(0==t._parts.length||0==t._parts[0].length)return;n=this._getCenter(t._parts[0])}e.lineWidth=this.options.borderWidth,e.font=this.options.fontStyle+" "+this.options.fontWeight.toString()+" "+this.options.fontSize.toString()+"px "+this.options.fontName;var r=e.measureText(t.options.text).width,i=e.measureText("田").width,o=this._getLabelBound(n,r,i),a=o.getBottomLeft();if(this.options.collisionFlg)for(var s=0;s<this._textList.length;s++){if(this._textList[s].intersects(o))return}this._textList.push(o),e.strokeStyle=this.options.borderColor,e.strokeText(t.options.text,a.x,a.y),null==this.options.textColor?e.fillStyle="blue":e.fillStyle=this.options.textColor,e.fillText(t.options.text,a.x,a.y)}},_getCenter:function(e){var t,n,r,i,o,a,s,l=e.length;if(!l)return null;for(n=t=0;t<l-1;t++)n+=e[t].distanceTo(e[t+1])/2;if(0===n)return e[0];for(i=t=0;t<l-1;t++)if(o=e[t],a=e[t+1],n<(i+=r=o.distanceTo(a))){s=(i-n)/r;var u=[a.x-s*(a.x-o.x),a.y-s*(a.y-o.y)];return L.point(u[0],u[1])}},_setOptions:function(e){this.options=L.extend({},this.options,e)},_getLabelBound:function(e,t,n){var r=[0,0],i=Number(this.options.markerWidth),o=Number(this.options.markerHeight),a=Number(this.options.markerPadding);"mid"===this.options.position?r=[0,0]:"up"===this.options.position?r=[0,-(o+n)/2-a]:"down"===this.options.position?r=[0,(o+n)/2+a]:"left"===this.options.position?r=[-(i+t)/2-a,-2]:"right"===this.options.position&&(r=[(i+t)/2+a,-2]);var s=L.point(e.x+r[0],e.y+r[1]);return L.bounds(L.point(s.x-t/2,s.y-n/2),L.point(s.x+t/2,s.y+n/2))},getString:function(){return JSON.stringify(this.options)},removeTextCanvas:function(){this._containerText&&this._map&&this.getPane().removeChild(this._containerText)}})},{}],2:[function(e,t,n){"use strict";L.Polyline.include({_snakingTimestamp:0,_snakingRings:0,_snakingVertices:0,_snakingDistance:0,_snaking:!1,snakeIn:function(){if(!this._snaking&&"performance"in window&&"now"in window.performance&&this._map)return this._snaking=!0,this._snakingTime=performance.now(),this._snakingVertices=this._snakingRings=this._snakingDistance=0,this._snakeLatLngs||(this._snakeLatLngs=L.LineUtil.isFlat(this._latlngs)?[this._latlngs]:this._latlngs),this._latlngs=[[this._snakeLatLngs[0][0],this._snakeLatLngs[0][0]]],this._update(),this._snake(),this.fire("snakestart"),this},_snake:function(){var e=performance.now(),t=(e-this._snakingTime)*this.options.snakingSpeed/1e3;return this._snakingTime=e,this._latlngs[this._snakingRings].pop(),this._snakeForward(t)},_snakeForward:function(e){if(this._map){var t=this._map.latLngToContainerPoint(this._snakeLatLngs[this._snakingRings][this._snakingVertices]),n=this._map.latLngToContainerPoint(this._snakeLatLngs[this._snakingRings][this._snakingVertices+1]),r=t.distanceTo(n);if(this._snakingDistance+e>r||0===r){if(this._snakingVertices++,this._latlngs[this._snakingRings].push(this._snakeLatLngs[this._snakingRings][this._snakingVertices]),this._snakingVertices>=this._snakeLatLngs[this._snakingRings].length-1){if(this._snakingRings>=this._snakeLatLngs.length-1)return this._snakeEnd();this._snakingVertices=0,this._snakingRings++,this._latlngs[this._snakingRings]=[this._snakeLatLngs[this._snakingRings][this._snakingVertices]]}return this._snakingDistance-=r,this._snakeForward(e)}this._snakingDistance+=e;var i=this._snakingDistance/r,o=n.multiplyBy(i).add(t.multiplyBy(1-i)),a=this._map.containerPointToLatLng(o);this._latlngs[this._snakingRings].push(a),this.setLatLngs(this._latlngs),this.fire("snake"),L.Util.requestAnimFrame(this._snake,this)}},_snakeEnd:function(){this.setLatLngs(this._snakeLatLngs),this._snaking=!1,this.fire("snakeend")}}),L.Polyline.mergeOptions({snakingSpeed:200}),L.LayerGroup.include({_snakingLayers:[],_snakingLayersDone:0,snakeIn:function(){if("performance"in window&&"now"in window.performance&&this._map&&!this._snaking){this._snaking=!0,this._snakingLayers=[],this._snakingLayersDone=0;var e=Object.keys(this._layers);for(var t in e){var n=e[t];this._snakingLayers.push(this._layers[n])}return this.clearLayers(),this.fire("snakestart"),this._snakeNext()}},_snakeNext:function(){if(this._snakingLayersDone>=this._snakingLayers.length)return this.fire("snakeend"),void(this._snaking=!1);var e=this._snakingLayers[this._snakingLayersDone];return this._snakingLayersDone++,this.addLayer(e),"snakeIn"in e?(e.once("snakeend",function(){setTimeout(this._snakeNext.bind(this),this.options.snakingPause)},this),e.snakeIn()):setTimeout(this._snakeNext.bind(this),this.options.snakingPause),this.fire("snake"),this}}),L.LayerGroup.mergeOptions({snakingPause:200})},{}],3:[function(e,t,n){"use strict";L.Realtime=L.GeoJSON.extend({options:{start:!0,interval:6e4,getFeatureId:function(e){return e.properties.id},updateFeature:function(e,t,n){if(t&&"Point"===e.geometry.type){var r=e.geometry.coordinates;return t.setLatLng([r[1],r[0]]),t}},logErrors:!0,cache:!1},initialize:function(i,e){L.GeoJSON.prototype.initialize.call(this,void 0,e),this._src="function"==typeof i?i:L.bind(function(e,t){var n="string"==typeof i||i instanceof String,r=n?i:i.url;void 0!==this._url&&(i.url=this._url);r=this.options.cache?r:this._bustCache(r);fetch(r).then(function(e){return e.json()}).then(e).catch(t)},this),this._features={},this._featureLayers={},this._requestCount=0,this.options.start&&this.start()},start:function(){return this._timer||(this._timer=setInterval(L.bind(this.update,this),this.options.interval),this.update()),this},stop:function(){return this._timer&&(clearTimeout(this._timer),delete this._timer),this},isRunning:function(){return this._timer},setUrl:function(e){this._url=e,this.update()},update:function(e){var t,n,r=++this._requestCount,i=L.bind(function(e){return L.bind(function(){if(r===this._requestCount)return e.apply(this,arguments)},this)},this);return e?this._onNewData(!1,e):(t=L.bind(function(e){this._onNewData(!0,e)},this),n=L.bind(this._onError,this),this._src(i(t),i(n))),this},remove:function(e){var t,n,r,i=L.Util.isArray(e)?e:e.features?e.features:[e],o={};for(t=0,n=i.length;t<n;t++)r=this.options.getFeatureId(i[t]),this.removeLayer(this._featureLayers[r]),o[r]=this._features[r],delete this._features[r],delete this._featureLayers[r];return this.fire("update",{features:this._features,enter:{},update:{},exit:o}),this},getLayer:function(e){return this._featureLayers[e]},getFeature:function(e){return this._features[e]},_onNewData:function(e,t){var s,l,u,c=[],h={},f={},n={},d={},p=L.bind(function(e){var t=L.Util.isArray(e)?e:e.features;if(t)for(s=0,l=t.length;s<l;s++)((u=t[s]).geometries||u.geometry||u.features||u.coordinates)&&p(u);else{var n=this.options;if(!n.filter||n.filter(e)){var r=L.GeoJSON.asFeature(e),i=n.getFeatureId(r),o=this._featureLayers[i],a=L.bind(this.options.updateFeature,this)(r,o,this._marker);if(!a){if(!(a=L.GeoJSON.geometryToLayer(e,n)))return;a.defaultOptions=a.options,a.feature=r,n.onEachFeature&&n.onEachFeature(e,a)}a.feature=r,this.resetStyle(a),o?(f[i]=e,o!=a&&(c.push(o),this.addLayer(a))):(h[i]=e,this.addLayer(a)),this._featureLayers[i]=a,this._features[i]=d[i]=r}}},this);for(p(t),e&&(n=this._removeUnknown(d)),s=0;s<c.length;s++)this.removeLayer(c[s]);this.fire("update",{features:this._features,enter:h,update:f,exit:n})},_onError:function(e,t){this.options.logErrors&&console.warn(e,t),this.fire("error",{error:e,message:t})},_removeUnknown:function(e){var t,n={};for(t in this._featureLayers)e[t]||(this.removeLayer(this._featureLayers[t]),n[t]=this._features[t],delete this._featureLayers[t],delete this._features[t]);return n},_bustCache:function(e){return e+L.Util.getParamString({_:(new Date).getTime()},e)}}),L.realtime=function(e,t){return new L.Realtime(e,t)},t.exports=L.Realtime},{}],4:[function(e,t,n){"use strict";L.Marker.include({_slideToUntil:void 0,_slideToDuration:void 0,_slideToLatLng:void 0,_slideFromLatLng:void 0,_slideKeepAtCenter:void 0,_slideDraggingWasAllowed:void 0,slideTo:function(e,t){if(this._map){var n=t&&t.duration?t.duration:500,r=!(!t||!t.keepAtCenter)&&t.keepAtCenter;return this._slideToDuration=n,this._slideToUntil=performance.now()+n,this._slideFromLatLng=this.getLatLng(),this._slideToLatLng=e,this._slideKeepAtCenter=!!r,this._slideDraggingWasAllowed=void 0!==this._slideDraggingWasAllowed?this._slideDraggingWasAllowed:this._map.dragging.enabled(),this._slideKeepAtCenter&&(this._map.dragging.disable(),this._map.doubleClickZoom.disable(),this._map.options.touchZoom="center",this._map.options.scrollWheelZoom="center"),this.fire("movestart"),this._slideTo(),this}},slideCancel:function(){L.Util.cancelAnimFrame(this._slideFrame)},_slideTo:function(){if(this._map){var e=this._slideToUntil-performance.now();if(e<0)return this.setLatLng(this._slideToLatLng),this.fire("moveend"),this._slideDraggingWasAllowed&&(this._map.dragging.enable(),this._map.doubleClickZoom.enable(),this._map.options.touchZoom=!0,this._map.options.scrollWheelZoom=!0),this._slideDraggingWasAllowed=void 0,this;var t=this._map.latLngToContainerPoint(this._slideFromLatLng);if(t.x!==Number.NaN&&t.y!==Number.NaN){var n=this._map.latLngToContainerPoint(this._slideToLatLng),r=(this._slideToDuration-e)/this._slideToDuration,i=n.multiplyBy(r).add(t.multiplyBy(1-r)),o=this._map.containerPointToLatLng(i);this.setLatLng(o),this._slideKeepAtCenter&&this._map.panTo(o,{animate:!1}),this._slideFrame=L.Util.requestAnimFrame(this._slideTo,this)}}}}),L.Marker.addInitHook(function(){this.on("move",this.slideCancel,this)}),L.CircleMarker.include({slideTo:L.Marker.prototype.slideTo,slideCancel:L.Marker.prototype.slideCancel,_slideTo:L.Marker.prototype._slideTo}),L.CircleMarker.addInitHook(function(){this.on("move",this.slideCancel,this)})},{}],5:[function(r,i,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,n;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],e);else if("object"===(void 0===i?"undefined":o(i))&&"object"===o(i.exports))t=r("leaflet"),n=r("./proj4-src"),i.exports=e(t,n);else{if(void 0===window.L||void 0===window.proj4)throw"Leaflet and proj4 must be loaded first";e(window.L,window.proj4)}}(function(l,r){return r.__esModule&&r.default&&(r=r.default),l.Proj={},l.Proj._isProj4Obj=function(e){return void 0!==e.inverse&&void 0!==e.forward},l.Proj.Projection=l.Class.extend({initialize:function(e,t,n){var r=l.Proj._isProj4Obj(e);this._proj=r?e:this._projFromCodeDef(e,t),this.bounds=r?t:n},project:function(e){var t=this._proj.forward([e.lng,e.lat]);return new l.Point(t[0],t[1])},unproject:function(e,t){var n=this._proj.inverse([e.x,e.y]);return new l.LatLng(n[1],n[0],t)},_projFromCodeDef:function(e,t){if(t)r.defs(e,t);else if(void 0===r.defs[e]){var n=e.split(":");if(3<n.length&&(e=n[n.length-3]+":"+n[n.length-1]),void 0===r.defs[e])throw"No projection definition for code "+e}return r(e)}}),l.Proj.CRS=l.Class.extend({includes:l.CRS,options:{transformation:new l.Transformation(1,0,-1,0)},initialize:function(e,t,n){var r,i,o,a;if(l.Proj._isProj4Obj(e)?(r=(i=e).srsCode,a=t||{},this.projection=new l.Proj.Projection(i,a.bounds)):(r=e,o=t,a=n||{},this.projection=new l.Proj.Projection(r,o,a.bounds)),l.Util.setOptions(this,a),this.code=r,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new l.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var s=this.options.resolutions.length-1;0<=s;s--)this.options.resolutions[s]&&(this._scales[s]=1/this.options.resolutions[s])}this.infinite=!this.options.bounds},scale:function(e){var t,n=Math.floor(e);return e===n?this._scales[e]:(t=this._scales[n])+(this._scales[n+1]-t)*(e-n)},zoom:function(e){var t,n,r=this._closestElement(this._scales,e),i=this._scales.indexOf(r);return e===r?i:void 0===r?-1/0:(n=i+1,void 0===(t=this._scales[n])?1/0:(e-r)/(t-r)+i)},distance:l.CRS.Earth.distance,R:l.CRS.Earth.R,_closestElement:function(e,t){for(var n,r=e.length;r--;)e[r]<=t&&(void 0===n||n<e[r])&&(n=e[r]);return n}}),l.Proj.GeoJSON=l.GeoJSON.extend({initialize:function(e,t){this._callLevel=0,l.GeoJSON.prototype.initialize.call(this,e,t)},addData:function(e){var n;e&&(e.crs&&"name"===e.crs.type?n=new l.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(n=new l.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==n&&(this.options.coordsToLatLng=function(e){var t=l.point(e[0],e[1]);return n.projection.unproject(t)})),this._callLevel++;try{l.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),l.Proj.geoJson=function(e,t){return new l.Proj.GeoJSON(e,t)},l.Proj.ImageOverlay=l.ImageOverlay.extend({initialize:function(e,t,n){l.ImageOverlay.prototype.initialize.call(this,e,null,n),this._projectedBounds=t},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=l.point(this._projectedBounds.min.x,this._projectedBounds.max.y),r=this._projectedToNewLayerPoint(n,e.zoom,e.center);l.DomUtil.setTransform(this._image,r,t)},_reset:function(){var e=this._map.getZoom(),t=this._map.getPixelOrigin(),n=l.bounds(this._transform(this._projectedBounds.min,e)._subtract(t),this._transform(this._projectedBounds.max,e)._subtract(t)),r=n.getSize();l.DomUtil.setPosition(this._image,n.min),this._image.style.width=r.x+"px",this._image.style.height=r.y+"px"},_projectedToNewLayerPoint:function(e,t,n){var r=this._map.getSize()._divideBy(2),i=this._map.project(n,t)._subtract(r)._round().add(this._map._getMapPanePos());return this._transform(e,t)._subtract(i)},_transform:function(e,t){var n=this._map.options.crs,r=n.transformation,i=n.scale(t);return r.transform(e,i)}}),l.Proj.imageOverlay=function(e,t,n){return new l.Proj.ImageOverlay(e,t,n)},l.Proj})},{"./proj4-src":52,leaflet:473}],6:[function(e,Pe,Ee){"use strict";(function(){var P,i,s,E,l,a,d,m,u,c,h,f,ie,T,p,r,e,n,t,oe,g,o,I,y,_,v,b,ae,w,x,k,L,C,S,M,O,D,N,A,j,R,B,F,z,q,U,G,se,$,V,le,H,W,Q,ue,K,Z,J,X,Y,ee,te,ne,re,ce,he,fe,de,pe,ge,ye,_e,ve,be,we,xe,ke,Le,Ce,Se,Me=[].slice;xe=function(){var n,e,t,r,i;for(n={},r=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<e;r++)t=i[r],n["[object "+t+"]"]=t.toLowerCase();return function(e){var t;return t=Object.prototype.toString.call(e),n[t]||"object"}}(),G=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),n<e&&(e=n),e},ke=function(e){return 3<=e.length?[].slice.call(e):e[0]},g=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||255<e[t])&&(e._clipped=!0),e[t]<0&&(e[t]=0),255<e[t]&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),1<e[t]&&(e[t]=1));return e._clipped||delete e._unclipped,e},E=Math.PI,ye=Math.round,I=Math.cos,ae=Math.floor,ue=Math.pow,se=Math.log,ve=Math.sin,be=Math.sqrt,T=Math.atan2,le=Math.max,ie=Math.abs,d=2*E,l=E/3,i=E/180,a=180/E,(oe=function(){return arguments[0]instanceof P?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,arguments,function(){})}).default=oe,f=[],null!=Pe&&null!=Pe.exports&&(Pe.exports=oe),"function"==typeof define&&define.amd?define([],function(){return oe}):(null!=Ee?Ee:this).chroma=oe,oe.version="1.3.4",h={},c=!(u=[]),P=function(){function e(){var e,t,n,r,i,o,a,s,l;for(o=this,t=[],s=0,r=arguments.length;s<r;s++)null!=(e=arguments[s])&&t.push(e);if(1<t.length&&(a=t[t.length-1]),null!=h[a])o._rgb=g(h[a](ke(t.slice(0,-1))));else{for(c||(u=u.sort(function(e,t){return t.p-e.p}),c=!0),l=0,i=u.length;l<i&&!(a=(n=u[l]).test.apply(n,t));l++);a&&(o._rgb=g(h[a].apply(h,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return oe(me._rgb)},e}(),oe._input=h,oe.brewer=n={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],n)t.push(n[e.toLowerCase()]=n[e])}(),oe.colors=Le={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},B=function(){var e,t,n,r,i,o,a;return r=(t=ke(arguments))[0],e=t[1],n=t[2],o=(r+16)/116,i=isNaN(e)?o:o+e/500,a=isNaN(n)?o:o-n/200,o=s.Yn*F(o),i=s.Xn*F(i),a=s.Zn*F(a),[Se(3.2404542*i-1.5371385*o-.4985314*a),Se(-.969266*i+1.8760108*o+.041556*a),n=Se(.0556434*i-.2040259*o+1.0572252*a),3<t.length?t[3]:1]},Se=function(e){return 255*(e<=.00304?12.92*e:1.055*ue(e,1/2.4)-.055)},F=function(e){return e>s.t1?e*e*e:s.t2*(e-s.t0)},s={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ne=function(){var e,t,n,r,i,o,a;return n=(r=ke(arguments))[0],t=r[1],e=r[2],o=(i=de(n,t,e))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},pe=function(e){return(e/=255)<=.04045?e/12.92:ue((e+.055)/1.055,2.4)},Ce=function(e){return e>s.t3?ue(e,1/3):e/s.t2+s.t0},de=function(){var e,t,n,r;return n=(r=ke(arguments))[0],t=r[1],e=r[2],n=pe(n),t=pe(t),e=pe(e),[Ce((.4124564*n+.3575761*t+.1804375*e)/s.Xn),Ce((.2126729*n+.7151522*t+.072175*e)/s.Yn),Ce((.0193339*n+.119192*t+.9503041*e)/s.Zn)]},oe.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["lab"]),function(){})},h.lab=B,P.prototype.lab=function(){return ne(this._rgb)},p=function(r){var e,t,n,i,o,a,s,l,u,c,h;return 2===(r=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(oe(i));return n}()).length?(u=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.lab());return n}(),o=u[0],a=u[1],e=function(n){var r,e;return e=function(){var e,t;for(t=[],r=e=0;e<=2;r=++e)t.push(o[r]+n*(a[r]-o[r]));return t}(),oe.lab.apply(oe,e)}):3===r.length?(c=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(n){var r,e;return e=function(){var e,t;for(t=[],r=e=0;e<=2;r=++e)t.push((1-n)*(1-n)*o[r]+2*(1-n)*n*a[r]+n*n*s[r]);return t}(),oe.lab.apply(oe,e)}):4===r.length?(h=function(){var e,t,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.lab());return n}(),o=h[0],a=h[1],s=h[2],l=h[3],e=function(n){var r,e;return e=function(){var e,t;for(t=[],r=e=0;e<=2;r=++e)t.push((1-n)*(1-n)*(1-n)*o[r]+3*(1-n)*(1-n)*n*a[r]+3*(1-n)*n*n*s[r]+n*n*n*l[r]);return t}(),oe.lab.apply(oe,e)}):5===r.length&&(t=p(r.slice(0,3)),n=p(r.slice(2,5)),e=function(e){return e<.5?t(2*e):n(2*(e-.5))}),e},oe.bezier=function(e){var t;return(t=p(e)).scale=function(){return oe.scale(t)},t},oe.cubehelix=function(a,s,l,u,c){var h,f,t;return null==a&&(a=300),null==s&&(s=-1.5),null==l&&(l=1),null==u&&(u=1),null==c&&(c=[0,1]),h=0,"array"===xe(c)?f=c[1]-c[0]:(f=0,c=[c,c]),(t=function(e){var t,n,r,i,o;return t=d*((a+120)/360+s*e),i=ue(c[0]+f*e,u),n=(0!==h?l[0]+e*h:l)*i*(1-i)/2,r=I(t),o=ve(t),oe(g([255*(i+n*(-.14861*r+1.78277*o)),255*(i+n*(-.29227*r-.90649*o)),255*(i+n*(1.97294*r))]))}).start=function(e){return null==e?a:(a=e,t)},t.rotations=function(e){return null==e?s:(s=e,t)},t.gamma=function(e){return null==e?u:(u=e,t)},t.hue=function(e){return null==e?l:("array"===xe(l=e)?0==(h=l[1]-l[0])&&(l=l[1]):h=0,t)},t.lightness=function(e){return null==e?c:(f="array"===xe(e)?(c=e)[1]-e[0]:(c=[e,e],0),t)},t.scale=function(){return oe.scale(t)},t.hue(l),t},oe.random=function(){var e,t;for("0123456789abcdef",e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(ae(16*Math.random()));return new P(e)},f=[],M=function(e,t,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==xe(e)&&(e=oe(e)),"object"!==xe(t)&&(t=oe(t)),a=0,o=f.length;a<o;a++)if(r===(i=f[a])[0]){s=i[1](e,t,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},oe.interpolate=M,P.prototype.interpolate=function(e,t,n){return M(this,e,t,n)},oe.mix=M,P.prototype.mix=P.prototype.interpolate,h.rgb=function(){var e,t,n,r;for(e in n=[],t=ke(arguments))r=t[e],n.push(r);return n},oe.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["rgb"]),function(){})},P.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},P.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(e){var t;return t=ke(arguments),"array"===xe(t)&&3===t.length?"rgb":4===t.length&&"number"===xe(t[3])&&0<=t[3]&&t[3]<=1?"rgb":void 0}}),h.lrgb=h.rgb,N=function(e,t,n,r){var i,o;return i=e._rgb,o=t._rgb,new P(be(ue(i[0],2)*(1-n)+ue(o[0],2)*n),be(ue(i[1],2)*(1-n)+ue(o[1],2)*n),be(ue(i[2],2)*(1-n)+ue(o[2],2)*n),r)},m=function(e){var t,n,r,i,o;for(t=1/e.length,o=[0,0,0,0],r=0,n=e.length;r<n;r++)i=e[r]._rgb,o[0]+=ue(i[0],2)*t,o[1]+=ue(i[1],2)*t,o[2]+=ue(i[2],2)*t,o[3]+=i[3]*t;return o[0]=be(o[0]),o[1]=be(o[1]),o[2]=be(o[2]),new P(o)},f.push(["lrgb",N]),oe.average=function(e,t){var n,r,i,o,a,s,l,u,c,h,f,d,p;if(null==t&&(t="rgb"),c=e.length,l=(e=e.map(function(e){return oe(e)})).splice(0,1)[0],"lrgb"===t)return m(e);for(u in o=[],s=a=0,d=l.get(t))d[u]=d[u]||0,o.push(isNaN(d[u])?0:1),"h"!==t.charAt(u)||isNaN(d[u])||(n=d[u]/180*E,a+=I(n),s+=ve(n));for(r=l.alpha(),f=0,h=e.length;f<h;f++)for(u in p=(i=e[f]).get(t),r+=i.alpha(),d)isNaN(p[u])||(d[u]+=p[u],o[u]+=1,"h"===t.charAt(u)&&(n=d[u]/180*E,a+=I(n),s+=ve(n)));for(u in d)if(d[u]=d[u]/o[u],"h"===t.charAt(u)){for(n=T(s/o[u],a/o[u])/E*180;n<0;)n+=360;for(;360<=n;)n-=360;d[u]=n}return oe(d,t).alpha(r/c)},x=function(e){var t,n;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(n=parseInt(e,16))>>16,n>>8&255,255&n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(n=parseInt(e,16))>>24&255,n>>16&255,n>>8&255,ye((255&n)/255*100)/100];if(null!=h.css&&(t=h.css(e)))return t;throw"unknown color: "+e},X=function(e,t){var n,r,i,o,a,s;return null==t&&(t="rgb"),a=e[0],i=e[1],r=e[2],n=e[3],a=Math.round(a),i=Math.round(i),r=Math.round(r),s=(s="000000"+(a<<16|i<<8|r).toString(16)).substr(s.length-6),o=(o="0"+ye(255*n).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},h.hex=function(e){return x(e)},oe.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["hex"]),function(){})},P.prototype.hex=function(e){return null==e&&(e="rgb"),X(this._rgb,e)},u.push({p:4,test:function(e){if(1===arguments.length&&"string"===xe(e))return"hex"}}),C=function(){var e,t,n,r,i,o,a,s,l,u,c,h,f,d;if(i=(e=ke(arguments))[0],c=e[1],a=e[2],0===c)l=r=t=255*a;else{for(n=[0,0,0],h=2*a-(f=a<.5?a*(1+c):a+c-a*c),(d=[0,0,0])[0]=(i/=360)+1/3,d[1]=i,d[2]=i-1/3,o=s=0;s<=2;o=++s)d[o]<0&&(d[o]+=1),1<d[o]&&(d[o]-=1),6*d[o]<1?n[o]=h+6*(f-h)*d[o]:2*d[o]<1?n[o]=f:3*d[o]<2?n[o]=h+(f-h)*(2/3-d[o])*6:n[o]=h;l=(u=[ye(255*n[0]),ye(255*n[1]),ye(255*n[2])])[0],r=u[1],t=u[2]}return 3<e.length?[l,r,t,e[3]]:[l,r,t]},ee=function(e,t,n){var r,i,o,a,s;return void 0!==e&&3<=e.length&&(e=(a=e)[0],t=a[1],n=a[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),i=((le=Math.max(e,t,n))+o)/2,le===o?(s=0,r=Number.NaN):s=i<.5?(le-o)/(le+o):(le-o)/(2-le-o),e===le?r=(t-n)/(le-o):t===le?r=2+(n-e)/(le-o):n===le&&(r=4+(e-t)/(le-o)),(r*=60)<0&&(r+=360),[r,s,i]},oe.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["hsl"]),function(){})},h.hsl=C,P.prototype.hsl=function(){return ee(this._rgb)},S=function(){var e,t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y;if(i=(e=ke(arguments))[0],m=e[1],y=e[2],y*=255,0===m)l=r=t=y;else switch(360===i&&(i=0),360<i&&(i-=360),i<0&&(i+=360),i/=60,o=ae(i),n=i-o,a=y*(1-m),s=y*(1-m*n),g=y*(1-m*(1-n)),o){case 0:l=(u=[y,g,a])[0],r=u[1],t=u[2];break;case 1:l=(c=[s,y,a])[0],r=c[1],t=c[2];break;case 2:l=(h=[a,y,g])[0],r=h[1],t=h[2];break;case 3:l=(f=[a,s,y])[0],r=f[1],t=f[2];break;case 4:l=(d=[g,a,y])[0],r=d[1],t=d[2];break;case 5:l=(p=[y,a,s])[0],r=p[1],t=p[2]}return[l,r,t,3<e.length?e[3]:1]},te=function(){var e,t,n,r,i,o,a,s,l;return o=(a=ke(arguments))[0],n=a[1],e=a[2],i=Math.min(o,n,e),t=(le=Math.max(o,n,e))-i,l=le/255,0===le?(r=Number.NaN,s=0):(s=t/le,o===le&&(r=(n-e)/t),n===le&&(r=2+(e-o)/t),e===le&&(r=4+(o-n)/t),(r*=60)<0&&(r+=360)),[r,s,l]},oe.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["hsv"]),function(){})},h.hsv=S,P.prototype.hsv=function(){return te(this._rgb)},W=function(e){return"number"===xe(e)&&0<=e&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},he=function(){var e;return((e=ke(arguments))[0]<<16)+(e[1]<<8)+e[2]},oe.num=function(e){return new P(e,"num")},P.prototype.num=function(e){return null==e&&(e="rgb"),he(this._rgb,e)},h.num=W,u.push({p:1,test:function(e){if(1===arguments.length&&"number"===xe(e)&&0<=e&&e<=16777215)return"num"}}),w=function(){var e,t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v;if(s=(n=ke(arguments))[0],i=n[1],t=n[2],a=a/100*255,e=255*(i/=100),0===i)h=a=r=t;else switch(360===s&&(s=0),360<s&&(s-=360),s<0&&(s+=360),s/=60,l=ae(s),o=s-l,u=t*(1-i),c=u+e*(1-o),_=u+e*o,v=u+e,l){case 0:h=(f=[v,_,u])[0],a=f[1],r=f[2];break;case 1:h=(d=[c,v,u])[0],a=d[1],r=d[2];break;case 2:h=(p=[u,v,_])[0],a=p[1],r=p[2];break;case 3:h=(m=[u,c,v])[0],a=m[1],r=m[2];break;case 4:h=(g=[_,u,v])[0],a=g[1],r=g[2];break;case 5:h=(y=[v,u,c])[0],a=y[1],r=y[2]}return[h,a,r,3<n.length?n[3]:1]},J=function(){var e,t,n,r,i,o,a,s,l;return s=(l=ke(arguments))[0],i=l[1],t=l[2],a=Math.min(s,i,t),n=100*(r=(le=Math.max(s,i,t))-a)/255,e=a/(255-r)*100,0===r?o=Number.NaN:(s===le&&(o=(i-t)/r),i===le&&(o=2+(t-s)/r),t===le&&(o=4+(s-i)/r),(o*=60)<0&&(o+=360)),[o,n,e]},oe.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["hcg"]),function(){})},h.hcg=w,P.prototype.hcg=function(){return J(this._rgb)},y=function(e){var t,n,r,i,o,a,s,l;if(e=e.toLowerCase(),null!=oe.colors&&oe.colors[e])return x(oe.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=t=0;t<=2;i=++t)s[i]=ye(2.55*s[i]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=ye(2.55*s[i]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=C(r))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=C(r))[3]=+o[4]);return s},Z=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(ye).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ye).join(",")+","+e[3]+")":void 0},ge=function(e){return ye(100*e)/100},L=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=ge(e[0]||0),e[1]=ge(100*e[1])+"%",e[2]=ge(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},h.css=function(e){return y(e)},oe.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["css"]),function(){})},P.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?Z(this._rgb):"hsl"===e.slice(0,3)?L(this.hsl(),this.alpha()):void 0},h.named=function(e){return x(Le[e])},u.push({p:5,test:function(e){if(1===arguments.length&&null!=Le[e])return"named"}}),P.prototype.name=function(e){var t,n;for(n in arguments.length&&(Le[e]&&(this._rgb=x(Le[e])),this._rgb[3]=1),t=this.hex(),Le)if(t===Le[n])return n;return t},z=function(){var e,t,n,r;return n=(r=ke(arguments))[0],e=r[1],t=r[2],[n,I(t*=i)*e,ve(t)*e]},q=function(){var e,t,n,r,i,o,a,s,l;return a=(n=ke(arguments))[0],i=n[1],o=n[2],e=(s=z(a,i,o))[0],t=s[1],r=s[2],[(l=B(e,t,r))[0],l[1],r=l[2],3<n.length?n[3]:1]},R=function(){var e,t,n,r,i,o;return i=(o=ke(arguments))[0],e=o[1],t=o[2],n=be(e*e+t*t),r=(T(t,e)*a+360)%360,0===ye(1e4*n)&&(r=Number.NaN),[i,n,r]},re=function(){var e,t,n,r,i,o,a;return i=(o=ke(arguments))[0],n=o[1],t=o[2],r=(a=ne(i,n,t))[0],e=a[1],t=a[2],R(r,e,t)},oe.lch=function(){var e;return e=ke(arguments),new P(e,"lch")},oe.hcl=function(){var e;return e=ke(arguments),new P(e,"hcl")},h.lch=q,h.hcl=function(){var e,t,n,r;return t=(r=ke(arguments))[0],e=r[1],n=r[2],q([n,e,t])},P.prototype.lch=function(){return re(this._rgb)},P.prototype.hcl=function(){return re(this._rgb).reverse()},K=function(e){var t,n,r,i,o,a;return null==e&&(e="rgb"),o=(a=ke(arguments))[0],r=a[1],t=a[2],r/=255,t/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(r,t))))*(n=i<1?1/(1-i):0),(1-r-i)*n,(1-t-i)*n,i]},o=function(){var e,t,n,r,i,o;return n=(t=ke(arguments))[0],i=t[1],o=t[2],r=t[3],e=4<t.length?t[4]:1,1===r?[0,0,0,e]:[1<=n?0:255*(1-n)*(1-r),1<=i?0:255*(1-i)*(1-r),1<=o?0:255*(1-o)*(1-r),e]},h.cmyk=function(){return o(ke(arguments))},oe.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["cmyk"]),function(){})},P.prototype.cmyk=function(){return K(this._rgb)},h.gl=function(){var e,n,t,r,i;for(r=function(){var e,t;for(n in t=[],e=ke(arguments))i=e[n],t.push(i);return t}.apply(this,arguments),e=t=0;t<=2;e=++t)r[e]*=255;return r},oe.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["gl"]),function(){})},P.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},ce=function(e,t,n){var r;return e=(r=ke(arguments))[0],t=r[1],n=r[2],.2126*(e=$(e))+.7152*(t=$(t))+.0722*(n=$(n))},$=function(e){return(e/=255)<=.03928?e/12.92:ue((e+.055)/1.055,2.4)},j=function(e,t,n,r){var i,o;return i=e._rgb,o=t._rgb,new P(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),r)},f.push(["rgb",j]),P.prototype.luminance=function(i,o){var e,a,s;return null==o&&(o="rgb"),arguments.length?(0===i?this._rgb=[0,0,0,this._rgb[3]]:1===i?this._rgb=[255,255,255,this._rgb[3]]:(1e-7,a=20,s=function(e,t){var n,r;return n=(r=e.interpolate(t,.5,o)).luminance(),Math.abs(i-n)<1e-7||!a--?r:i<n?s(e,r):s(r,t)},e=ce(this._rgb),this._rgb=(i<e?s(oe("black"),this):s(this,oe("white"))).rgba()),this):ce(this._rgb)},we=function(e){var t,n,r,i;return t=(i=e/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*se(n),i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*se(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*se(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*se(n),255),[r,n,t]},fe=function(){var e,t,n,r,i,o,a;for(r=(i=ke(arguments))[0],i[1],e=i[2],n=1e3,t=4e4,.4;.4<t-n;)(o=we(a=.5*(t+n)))[2]/o[0]>=e/r?t=a:n=a;return ye(a)},oe.temperature=oe.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["temperature"]),function(){})},h.temperature=h.kelvin=h.K=we,P.prototype.temperature=function(){return fe(this._rgb)},P.prototype.kelvin=P.prototype.temperature,oe.contrast=function(e,t){var n,r,i,o;return"string"!==(i=xe(e))&&"number"!==i||(e=new P(e)),"string"!==(o=xe(t))&&"number"!==o||(t=new P(t)),n=e.luminance(),(r=t.luminance())<n?(n+.05)/(r+.05):(r+.05)/(n+.05)},oe.distance=function(e,t,n){var r,i,o,a,s,l,u;for(i in null==n&&(n="lab"),"string"!==(s=xe(e))&&"number"!==s||(e=new P(e)),"string"!==(l=xe(t))&&"number"!==l||(t=new P(t)),o=e.get(n),a=t.get(n),u=0,o)u+=(r=(o[i]||0)-(a[i]||0))*r;return Math.sqrt(u)},oe.deltaE=function(e,t,n,r){var i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S,M;for(null==n&&(n=1),null==r&&(r=1),"string"!==(_=xe(e))&&"number"!==_||(e=new P(e)),"string"!==(v=xe(t))&&"number"!==v||(t=new P(t)),i=(b=e.lab())[0],a=b[1],l=b[2],o=(w=t.lab())[0],s=w[1],u=w[2],c=be(a*a+l*l),h=be(s*s+u*u),k=i<16?.511:.040975*i/(1+.01765*i),x=.0638*c/(1+.0131*c)+.638,y=c<1e-6?0:180*T(l,a)/E;y<0;)y+=360;for(;360<=y;)y-=360;return L=164<=y&&y<=345?.56+ie(.2*I(E*(y+168)/180)):.36+ie(.4*I(E*(y+35)/180)),g=be((f=c*c*c*c)/(f+1900)),be((C=(i-o)/(n*k))*C+(S=(m=c-h)/(r*x))*S+((d=a-s)*d+(p=l-u)*p-m*m)/((M=x*(g*L+1-g))*M))},P.prototype.get=function(e){var t,n,r,i,o;return this,r=(i=e.split("."))[0],t=i[1],o=this[r](),t?-1<(n=r.indexOf(t))?o[n]:console.warn("unknown channel "+t+" in mode "+r):o},P.prototype.set=function(e,t){var n,r,i,o,a;if(this,i=(o=e.split("."))[0],n=o[1])if(a=this[i](),-1<(r=i.indexOf(n)))if("string"===xe(t))switch(t.charAt(0)){case"+":case"-":a[r]+=+t;break;case"*":a[r]*=+t.substr(1);break;case"/":a[r]/=+t.substr(1);break;default:a[r]=+t}else a[r]=t;else console.warn("unknown channel "+n+" in mode "+i);else a=t;return oe(a,i).alpha(this.alpha())},P.prototype.clipped=function(){return this._rgb._clipped||!1},P.prototype.alpha=function(e){return arguments.length?oe.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},P.prototype.darken=function(e){var t;return null==e&&(e=1),(t=this.lab())[0]-=s.Kn*e,oe.lab(t).alpha(this.alpha())},P.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},P.prototype.darker=P.prototype.darken,P.prototype.brighter=P.prototype.brighten,P.prototype.saturate=function(e){var t;return null==e&&(e=1),(t=this.lch())[1]+=e*s.Kn,t[1]<0&&(t[1]=0),oe.lch(t).alpha(this.alpha())},P.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},P.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),oe(t[0]*e,t[1]*e,t[2]*e,e)},H=function(e,t){return e*t/255},_=function(e,t){return t<e?t:e},U=function(e,t){return t<e?e:t},_e=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},Q=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},t=function(e,t){return 255*(1-(1-t/255)/(e/255))},v=function(e,t){return 255===e?255:255<(e=t/255*255/(1-e/255))?255:e},(r=function(e,t,n){if(!r[n])throw"unknown blend mode "+n;return r[n](e,t)}).normal=(e=function(i){return function(e,t){var n,r;return n=oe(t).rgb(),r=oe(e).rgb(),oe(i(n,r),"rgb")}})((b=function(o){return function(e,t){var n,r,i;for(i=[],n=r=0;r<=3;n=++r)i[n]=o(e[n],t[n]);return i}})(function(e,t){return e})),r.multiply=e(b(H)),r.screen=e(b(_e)),r.overlay=e(b(Q)),r.darken=e(b(_)),r.lighten=e(b(U)),r.dodge=e(b(v)),r.burn=e(b(t)),oe.blend=r,oe.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(i=e[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return oe.limits(r,e,t)},r},oe.scale=function(c,e){var h,u,f,t,d,p,m,g,y,n,_,v,r,b,w,x,k,s,i,L;return g="rgb",y=oe("#ccc"),d=[r=0,1],v=[],h=!(_=[0,0]),n=!(f=[]),m=0,u={},b=!(t=!(p=1)),i=function(e){var t,n,r,i,o,a;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===xe(e)&&null!=oe.brewer&&(e=oe.brewer[e]||oe.brewer[e.toLowerCase()]||e),"array"===xe(e)){for(t=r=0,i=(e=e.slice(0)).length-1;0<=i?r<=i:i<=r;t=0<=i?++r:--r)n=e[t],"string"===xe(n)&&(e[t]=oe(n));for(t=a=v.length=0,o=e.length-1;0<=o?a<=o:o<=a;t=0<=o?++a:--a)v.push(t/(e.length-1))}return s(),f=e},x=function(e){var t,n;if(null==h)return 0;for(n=h.length-1,t=0;t<n&&e>=h[t];)t++;return t-1},L=function(e){return e},k=function(e,t){var n,r,i,o,a,s,l;if(null==t&&(t=!1),isNaN(e))return y;if(l=t?e:h&&2<h.length?(l=x(e)/(h.length-2),_[0]+l*(1-_[0]-_[1])):p!==m?(l=(e-m)/(p-m),l=_[0]+l*(1-_[0]-_[1]),Math.min(1,Math.max(0,l))):1,t||(l=L(l)),i=Math.floor(1e4*l),b&&u[i])n=u[i];else{if("array"===xe(f))for(r=o=0,s=v.length-1;0<=s?o<=s:s<=o;r=0<=s?++o:--o){if(a=v[r],l<=a){n=f[r];break}if(a<=l&&r===v.length-1){n=f[r];break}if(a<l&&l<v[r+1]){l=(l-a)/(v[r+1]-a),n=oe.interpolate(f[r],f[r+1],l,g);break}}else"function"===xe(f)&&(n=f(l));b&&(u[i]=n)}return n},s=function(){return u={}},i(c),(w=function(e){var t;return t=oe(k(e)),n&&t[n]?t[n]():t}).classes=function(e){var t;return null!=e?("array"===xe(e)?d=[(h=e)[0],e[e.length-1]]:(t=oe.analyze(d),h=0===e?[t.min,t.max]:oe.limits(t,"e",e)),w):h},w.domain=function(e){var t,n,r,i,o,a,s;if(!arguments.length)return d;if(m=e[0],p=e[e.length-1],v=[],r=f.length,e.length===r&&m!==p)for(o=0,i=e.length;o<i;o++)n=e[o],v.push((n-m)/(p-m));else for(t=s=0,a=r-1;0<=a?s<=a:a<=s;t=0<=a?++s:--s)v.push(t/(r-1));return d=[m,p],w},w.mode=function(e){return arguments.length?(g=e,s(),w):g},w.range=function(e,t){return i(e),w},w.out=function(e){return n=e,w},w.spread=function(e){return arguments.length?(r=e,w):r},w.correctLightness=function(e){return null==e&&(e=!0),t=e,s(),L=t?function(e){var t,n,r,i,o,a,s,l,u;for(t=k(0,!0).lab()[0],n=k(1,!0).lab()[0],s=n<t,r=k(e,!0).lab()[0],i=r-(o=t+(n-t)*e),l=0,u=1,a=20;.01<Math.abs(i)&&0<a--;)s&&(i*=-1),e+=i<0?.5*(u-(l=e)):.5*(l-(u=e)),r=k(e,!0).lab()[0],i=r-o;return e}:function(e){return e},w},w.padding=function(e){return null!=e?("number"===xe(e)&&(e=[e,e]),_=e,w):_},w.colors=function(t,n){var r,i,e,o,a,s,l,u;if(arguments.length<2&&(n="hex"),a=[],0===arguments.length)a=f.slice(0);else if(1===t)a=[w(.5)];else if(1<t)i=d[0],r=d[1]-i,a=function(){s=[];for(var e=0;0<=t?e<t:t<e;0<=t?e++:e--)s.push(e);return s}.apply(this).map(function(e){return w(i+e/(t-1)*r)});else{if(c=[],l=[],h&&2<h.length)for(e=u=1,o=h.length;1<=o?u<o:o<u;e=1<=o?++u:--u)l.push(.5*(h[e-1]+h[e]));else l=d;a=l.map(function(e){return w(e)})}return oe[n]&&(a=a.map(function(e){return e[n]()})),a},w.cache=function(e){return null!=e?b=e:b},w},null==oe.scales&&(oe.scales={}),oe.scales.cool=function(){return oe.scale([oe.hsl(180,1,.9),oe.hsl(250,.7,.4)])},oe.scales.hot=function(){return oe.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},oe.analyze=function(e,n,r){var i,t,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),i=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},l=function(e,t){if(r(e,t))return i(null!=n&&"function"===xe(n)?n(e):null!=n&&"string"===xe(n)||"number"===xe(n)?e[n]:e)},"array"===xe(e))for(a=0,o=e.length;a<o;a++)l(e[a]);else for(t in e)l(e[t],t);return s.domain=[s.min,s.max],s.limits=function(e,t){return oe.limits(s,e,t)},s},oe.limits=function(e,t,n){var r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S,M,P,E,T,I,O,D,N,A,j,R,B,F,z,q,U,G,$,V,H,W,Q,K,Z,J,X,Y,ee,te,ne,re;if(null==t&&(t="equal"),null==n&&(n=7),"array"===xe(e)&&(e=oe.analyze(e)),M=e.min,le=e.max,e.sum,ne=e.values.sort(function(e,t){return e-t}),1===n)return[M,le];if(C=[],"c"===t.substr(0,1)&&(C.push(M),C.push(le)),"e"===t.substr(0,1)){for(C.push(M),x=D=1,R=n-1;1<=R?D<=R:R<=D;x=1<=R?++D:--D)C.push(M+x/n*(le-M));C.push(le)}else if("l"===t.substr(0,1)){if(M<=0)throw"Logarithmic scales are only possible for values > 0";for(P=Math.LOG10E*se(M),S=Math.LOG10E*se(le),C.push(M),x=re=1,B=n-1;1<=B?re<=B:B<=re;x=1<=B?++re:--re)C.push(ue(10,P+x/n*(S-P)));C.push(le)}else if("q"===t.substr(0,1)){for(C.push(M),x=r=1,$=n-1;1<=$?r<=$:$<=r;x=1<=$?++r:--r)N=(ne.length-1)*x/n,(A=ae(N))===N?C.push(ne[A]):(j=N-A,C.push(ne[A]*(1-j)+ne[A+1]*j));C.push(le)}else if("k"===t.substr(0,1)){for(T=ne.length,g=new Array(T),b=new Array(n),X=!0,I=0,_=null,(_=[]).push(M),x=i=1,V=n-1;1<=V?i<=V:V<=i;x=1<=V?++i:--i)_.push(M+x/n*(le-M));for(_.push(le);X;){for(k=o=0,H=n-1;0<=H?o<=H:H<=o;k=0<=H?++o:--o)b[k]=0;for(x=a=0,W=T-1;0<=W?a<=W:W<=a;x=0<=W?++a:--a){for(te=ne[x],E=Number.MAX_VALUE,k=s=0,Q=n-1;0<=Q?s<=Q:Q<=s;k=0<=Q?++s:--s)(w=ie(_[k]-te))<E&&(E=w,y=k);b[y]++,g[x]=y}for(O=new Array(n),k=l=0,K=n-1;0<=K?l<=K:K<=l;k=0<=K?++l:--l)O[k]=null;for(x=u=0,Z=T-1;0<=Z?u<=Z:Z<=u;x=0<=Z?++u:--u)null===O[v=g[x]]?O[v]=ne[x]:O[v]+=ne[x];for(k=c=0,J=n-1;0<=J?c<=J:J<=c;k=0<=J?++c:--c)O[k]*=1/b[k];for(X=!1,k=h=0,F=n-1;0<=F?h<=F:F<=h;k=0<=F?++h:--h)if(O[k]!==_[x]){X=!0;break}_=O,200<++I&&(X=!1)}for(L={},k=f=0,z=n-1;0<=z?f<=z:z<=f;k=0<=z?++f:--f)L[k]=[];for(x=d=0,q=T-1;0<=q?d<=q:q<=d;x=0<=q?++d:--d)L[v=g[x]].push(ne[x]);for(Y=[],k=p=0,U=n-1;0<=U?p<=U:U<=p;k=0<=U?++p:--p)Y.push(L[k][0]),Y.push(L[k][L[k].length-1]);for(Y=Y.sort(function(e,t){return e-t}),C.push(Y[0]),x=m=1,G=Y.length-1;m<=G;x=m+=2)ee=Y[x],isNaN(ee)||-1!==C.indexOf(ee)||C.push(ee)}return C},k=function(e,t,n){var r,i,o,a;return e=(r=ke(arguments))[0],t=r[1],n=r[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((i=(1-t)/3)+(a=(1+t*I(d*e)/I(l-d*e))/3)):e<2/3?i=1-((a=(1-t)/3)+(o=(1+t*I(d*(e-=1/3))/I(l-d*e))/3)):a=1-((o=(1-t)/3)+(i=(1+t*I(d*(e-=2/3))/I(l-d*e))/3)),[255*(a=G(n*a*3)),255*(o=G(n*o*3)),255*(i=G(n*i*3)),3<r.length?r[3]:1]},Y=function(){var e,t,n,r,i,o,a;return i=(o=ke(arguments))[0],t=o[1],e=o[2],d=2*Math.PI,i/=255,t/=255,e/=255,0===(a=1-Math.min(i,t,e)/(r=(i+t+e)/3))?n=0:(n=(i-t+(i-e))/2,n/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),n=Math.acos(n),t<e&&(n=d-n),n/=d),[360*n,a,r]},oe.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(P,Me.call(arguments).concat(["hsi"]),function(){})},h.hsi=k,P.prototype.hsi=function(){return Y(this._rgb)},O=function(e,t,n,r){var i,o,a,s,l,u,c,h,f,d;return"hsl"===r?(f=e.hsl(),d=t.hsl()):"hsv"===r?(f=e.hsv(),d=t.hsv()):"hcg"===r?(f=e.hcg(),d=t.hcg()):"hsi"===r?(f=e.hsi(),d=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",f=e.hcl(),d=t.hcl()),"h"===r.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=d[0],h=d[1],l=d[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===r||(u=h)):(i=o,1!==l&&0!==l||"hsv"===r||(u=c)):i=o+n*(o<a&&180<a-o?a-(o+360):a<o&&180<o-a?a+360-o:a-o),null==u&&(u=c+n*(h-c)),oe[r](i,u,s+n*(l-s))},A=function(e,t,n,r){var i,o;return i=e.num(),o=t.num(),oe.num(i+(o-i)*n,"num")},(f=f.concat(function(){var e,t,n,r;for(r=[],t=0,e=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)V=n[t],r.push([V,O]);return r}())).push(["num",A]),D=function(e,t,n,r){var i,o;return i=e.lab(),o=t.lab(),new P(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),r)},f.push(["lab",D])}).call(void 0)},{}],7:[function(e,t,n){"use strict";L.AreaSelect=L.Class.extend({includes:L.Mixin.Events,options:{width:200,height:300,keepAspectRatio:!1,isCanResize:!0},initialize:function(e){L.Util.setOptions(this,e),this._width=this.options.width,this._height=this.options.height},addTo:function(e){return this.map=e,this._createElements(),this._render(),this},getBounds:function(){var e=this.map.getSize(),t=new L.Point,n=new L.Point;n.x=Math.round((e.x-this._width)/2),t.y=Math.round((e.y-this._height)/2),t.x=e.x-n.x,n.y=e.y-t.y;var r=this.map.containerPointToLatLng(n),i=this.map.containerPointToLatLng(t);return new L.LatLngBounds(r,i)},remove:function(){this.map.off("moveend",this._onMapChange),this.map.off("zoomend",this._onMapChange),this.map.off("resize",this._onMapResize),this._container.parentNode.removeChild(this._container)},setDimensions:function(e){e&&(this._height=parseInt(e.height)||this._height,this._width=parseInt(e.width)||this._width,this._render(),this.fire("change"))},_createElements:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-areaselect-container",this.map._controlContainer),this._topShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._bottomShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._leftShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._rightShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._nwHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._swHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._neHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._seHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this.options.isCanResize&&(this._setUpHandlerEvents(this._nwHandle),this._setUpHandlerEvents(this._neHandle,-1,1),this._setUpHandlerEvents(this._swHandle,1,-1),this._setUpHandlerEvents(this._seHandle,-1,-1)),this.map.on("moveend",this._onMapChange,this),this.map.on("zoomend",this._onMapChange,this),this.map.on("resize",this._onMapResize,this),this.fire("change"))},_setUpHandlerEvents:function(s,l,u){l=l||1,u=u||1;var c=this;function h(e){e.stopPropagation(),c.map.dragging.disable(),L.DomEvent.removeListener(this,"mousedown",h);var n=e.pageX,r=e.pageY,i=c._width/c._height,o=c.map.getSize();function a(e){if(c.options.keepAspectRatio){var t=(c._height>=c._width?o.y:o.y*(1/i))-30;c._height+=2*(r-e.originalEvent.pageY)*u,c._height=Math.max(30,c._height),c._height=Math.min(t,c._height),c._width=c._height*i}else c._width+=2*(n-e.originalEvent.pageX)*l,c._height+=2*(r-e.originalEvent.pageY)*u,c._width=Math.max(30,c._width),c._height=Math.max(30,c._height),c._width=Math.min(o.x-30,c._width),c._height=Math.min(o.y-30,c._height);n=e.originalEvent.pageX,r=e.originalEvent.pageY,c._render()}L.DomEvent.addListener(c.map,"mousemove",a),L.DomEvent.addListener(c.map,"mouseup",function e(t){c.map.dragging.enable(),L.DomEvent.removeListener(c.map,"mouseup",e),L.DomEvent.removeListener(c.map,"mousemove",a),L.DomEvent.addListener(s,"mousedown",h),c.fire("change")})}L.DomEvent.addListener(s,"mousedown",h)},_onMapResize:function(){this._render()},_onMapChange:function(){this.fire("change")},_render:function(){var e=this.map.getSize(),t=Math.round(this._nwHandle.offsetWidth/2),n=Math.round((e.y-this._height)/2),r=Math.round((e.x-this._width)/2);function i(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.bottom=t.bottom+"px",e.style.right=t.right+"px"}i(this._topShade,{width:e.x,height:n,top:0,left:0}),i(this._bottomShade,{width:e.x,height:n,bottom:0,left:0}),i(this._leftShade,{width:r,height:e.y-2*n,top:n,left:0}),i(this._rightShade,{width:r,height:e.y-2*n,top:n,right:0}),i(this._nwHandle,{left:r-t,top:n-7}),i(this._neHandle,{right:r-t,top:n-7}),i(this._swHandle,{left:r-t,bottom:n-7}),i(this._seHandle,{right:r-t,bottom:n-7})}}),L.areaSelect=function(e){return new L.AreaSelect(e)}},{}],8:[function(e,t,n){"use strict";L.Control.CondensedAttribution=L.Control.Attribution.extend({options:{emblem:"?"},onAdd:function(e){var t=parseInt(L.version.split(".")[0]);for(var n in 1<=t&&(e.attributionControl=this),this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container),e._layers)e._layers[n].getAttribution&&this.addAttribution(e._layers[n].getAttribution());return t<1&&e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),L.DomUtil.addClass(this._container,"leaflet-condensed-attribution"),this._container},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML='<div class="attributes-body">'+n.join(" | ")+'</div><div class="attributes-emblem">'+this.options.emblem+"</div>"}}}),L.Map.mergeOptions({attributionControl:!1,condensedAttributionControl:!1}),L.Map.addInitHook(function(){this.options.condensedAttributionControl&&(new L.Control.CondensedAttribution).addTo(this)}),L.control.condensedAttribution=function(e){return new L.Control.CondensedAttribution(e)}},{}],9:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};L.Control.Window=L.Control.extend({includes:L.Mixin.Events,options:{element:"map",className:"control-window",visible:!1,title:void 0,closeButton:!0,content:void 0,prompt:void 0,maxWidth:600,modal:!1,position:"center"},initialize:function(e,t){e.hasOwnProperty("options")&&(e=e.getContainer()),t.element=e,L.setOptions(this,t);var n="nonmodal";this.options.modal&&(n="modal"),this._wrapper=L.DomUtil.create("div",n+" leaflet-control-window-wrapper",L.DomUtil.get(this.options.element)),this._container=L.DomUtil.create("div","leaflet-control leaflet-control-window "+this.options.className,this._wrapper),this._container.setAttribute("style","max-width:"+this.options.maxWidth+"px"),this._containerTitleBar=L.DomUtil.create("div","window-titlebar",this._container),this.titleContent=L.DomUtil.create("h2","window-title",this._containerTitleBar),this._containerContent=L.DomUtil.create("div","window-content",this._container),this._containerPromptButtons=L.DomUtil.create("div","promptButtons",this._container),this.options.closeButton&&(this._closeButton=L.DomUtil.create("a","close",this._containerTitleBar),this._closeButton.innerHTML="&times;");var r=L.DomEvent.stopPropagation;if(L.DomEvent.on(this._wrapper,"contextmenu",r).on(this._wrapper,"click",r).on(this._wrapper,"mousedown",r).on(this._wrapper,"touchstart",r).on(this._wrapper,"dblclick",r).on(this._wrapper,"mousewheel",r).on(this._wrapper,"MozMousePixelScroll",r),this.options.closeButton){var i=this._closeButton;L.DomEvent.on(i,"click",this.closeButtonClicked_hide,this)}this.options.title&&this.title(this.options.title),this.options.content&&this.content(this.options.content),"object"==o(this.options.prompt)&&this.prompt(this.options.prompt),this.options.visible&&this.show()},disableBtn:function(){this._btnOK.disabled=!0,this._btnOK.className="disabled"},enableBtn:function(){this._btnOK.disabled=!1,this._btnOK.className=""},title:function(e){if(null==e)return this.options.title;var t=(this.options.title=e)||"";return this.titleContent.innerHTML=t,this},remove:function(){L.DomUtil.get(this.options.element).removeChild(this._wrapper);var e=L.DomEvent.stopPropagation;if(L.DomEvent.off(this._wrapper,"contextmenu",e).off(this._wrapper,"click",e).off(this._wrapper,"mousedown",e).off(this._wrapper,"touchstart",e).off(this._wrapper,"dblclick",e).off(this._wrapper,"mousewheel",e).off(this._wrapper,"MozMousePixelScroll",e),this._closeButton&&this._close){var t=this._closeButton;L.DomEvent.off(t,"click",this.close,this)}return this},mapResized:function(){},show:function(e){e&&(this.options.position=e),L.DomUtil.addClass(this._wrapper,"visible"),this.setContentMaxHeight();var t=this._container.offsetWidth,n=this._container.offsetHeight,r=L.DomUtil.get(this.options.element).getBoundingClientRect(),i=r.right-r.left||Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=r.bottom-r.top||Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=r.top,s=r.left;return"topLeft"==this.options.position?this.showOn([s,a+0]):"left"==this.options.position?this.showOn([s,a+o/2-n/2-8+0]):"bottomLeft"==this.options.position?this.showOn([s,a+o-n-16-0]):"top"==this.options.position?this.showOn([s+i/2-t/2-8,a+0]):"topRight"==this.options.position?this.showOn([s+i-t-16,a+0]):"right"==this.options.position?this.showOn([s+i-t-16,a+o/2-n/2-8+0]):"bottomRight"==this.options.position?this.showOn([s+i-t-16,a+o-n-16-0]):"bottom"==this.options.position?this.showOn([s+i/2-t/2-8,a+o-n-16-0]):this.showOn([s+i/2-t/2-8,a+o/2-n/2-8+0]),this},showOn:function(e){return this.setContentMaxHeight(),L.DomUtil.setPosition(this._container,L.point(Math.round(e[0]),Math.round(e[1]),!0)),new L.Draggable(this._container,this._containerTitleBar).enable(),L.DomUtil.addClass(this._wrapper,"visible"),this.fire("show"),this},hide:function(e){return L.DomUtil.removeClass(this._wrapper,"visible"),this.fire("hide"),this},getContainer:function(){return this._containerContent},content:function(e){return null==e?this.options.content:(this.options.content=e,this.getContainer().innerHTML=e,this)},prompt:function(e){if(null==e)return this.options.prompt;this.options.prompt=e,this.setPromptCallback(e.callback),this.setActionCallback(e.action);var t=this.options.prompt.buttonCancel||"CANCEL",n=this.options.prompt.buttonOK||"OK",r=this.options.prompt.buttonAction||void 0;if(null!=r){var i=L.DomUtil.create("button","",this._containerPromptButtons);L.DomEvent.on(i,"click",this.action,this),i.innerHTML=r}var o=L.DomUtil.create("button","",this._containerPromptButtons);L.DomEvent.on(o,"click",this.promptCallback,this),o.innerHTML=n,this._btnOK=o;var a=L.DomUtil.create("button","",this._containerPromptButtons);return L.DomEvent.on(a,"click",this.close,this),a.innerHTML=t,this},container:function(e){return null==e?this._container.innerHTML:(this._container.innerHTML=e,this.options.closeButton&&(this._closeButton=L.DomUtil.create("a","close",this._container),this._closeButton.innerHTML="&times;",L.DomEvent.on(this._closeButton,"click",this.closeButtonClicked_close,this)),this)},setPromptCallback:function(e){var t=this;"function"!=typeof e&&(e=function(){console.warn("No callback function specified!")});return this.promptCallback=function(){t.close(),e()},this},setActionCallback:function(e){var t=this;"function"!=typeof e&&(e=function(){console.warn("No callback function specified!")});return this.action=function(){t.hide(),e()},this},setContentMaxHeight:function(){var e=68;this.options.title&&(e+=this._containerTitleBar.offsetHeight-36),"object"==o(this.options.prompt)&&(e+=this._containerPromptButtons.offsetHeight-20);var t=L.DomUtil.get(this.options.element).getBoundingClientRect(),n=t.bottom-t.top-e;this._containerContent.setAttribute("style","max-height:"+n+"px")},close:function(){this.hide(),this.remove(),this.fire("close")},closeButtonClicked_hide:function(){this.fire("closeButtonClicked"),this.hide()},closeButtonClicked_close:function(){this.fire("closeButtonClicked"),this.close()}}),L.control.window=function(e,t){return new L.Control.Window(e,t)}},{}],10:[function(e,t,n){"use strict";L.Control.Coordinates=L.Control.extend({options:{position:"bottomright",decimals:4,decimalSeperator:".",labelTemplateLat:"Lat: {y}",labelTemplateLng:"Lng: {x}",labelFormatterLat:void 0,labelFormatterLng:void 0,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1,centerUserCoordinates:!1,markerType:L.marker,markerProps:{}},onAdd:function(e){this._map=e;var t,n,r=this._container=L.DomUtil.create("div","leaflet-control-coordinates"),i=this.options;return this._labelcontainer=L.DomUtil.create("div","uiElement label",r),this._label=L.DomUtil.create("span","labelFirst",this._labelcontainer),this._inputcontainer=L.DomUtil.create("div","uiElement input uiHidden",r),i.useLatLngOrder?(n=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer),t=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer)):(t=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer),n=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer)),t.innerHTML=i.labelTemplateLng.replace("{x}",""),n.innerHTML=i.labelTemplateLat.replace("{y}",""),L.DomEvent.on(this._inputX,"keyup",this._handleKeypress,this),L.DomEvent.on(this._inputY,"keyup",this._handleKeypress,this),e.on("mousemove",this._update,this),e.on("dragstart",this.collapse,this),e.whenReady(this._update,this),this._showsCoordinates=!0,i.enableUserInput&&L.DomEvent.addListener(this._container,"click",this._switchUI,this),r},_createInput:function(e,t){var n=L.DomUtil.create("input",e,t);return n.type="text",L.DomEvent.disableClickPropagation(n),n},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(e){switch(e.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit(),this.collapse();break;default:this._handleSubmit()}},_handleSubmit:function(){var e=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),t=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(void 0!==e&&void 0!==t){var n=this._marker;n||(n=this._marker=this._createNewMarker()).on("click",this._clearMarker,this);var r=new L.LatLng(t,e);n.setLatLng(r),n.addTo(this._map),this.options.centerUserCoordinates&&this._map.setView(r,this._map.getZoom())}},expand:function(){this._showsCoordinates=!1,this._map.off("mousemove",this._update,this),L.DomEvent.addListener(this._container,"mousemove",L.DomEvent.stop),L.DomEvent.removeListener(this._container,"click",this._switchUI,this),L.DomUtil.addClass(this._labelcontainer,"uiHidden"),L.DomUtil.removeClass(this._inputcontainer,"uiHidden")},_createCoordinateLabel:function(e){var t,n,r=this.options;return r.customLabelFcn?r.customLabelFcn(e,r):(t=r.labelLng?r.labelFormatterLng(e.lng):L.Util.template(r.labelTemplateLng,{x:this._getNumber(e.lng,r)}),n=r.labelFormatterLat?r.labelFormatterLat(e.lat):L.Util.template(r.labelTemplateLat,{y:this._getNumber(e.lat,r)}),r.useLatLngOrder?n+" "+t:t+" "+n)},_getNumber:function(e,t){return t.useDMS?L.NumberFormatter.toDMS(e):L.NumberFormatter.round(e,t.decimals,t.decimalSeperator)},collapse:function(){if(!this._showsCoordinates){this._map.on("mousemove",this._update,this),this._showsCoordinates=!0;this.options;if(L.DomEvent.addListener(this._container,"click",this._switchUI,this),L.DomEvent.removeListener(this._container,"mousemove",L.DomEvent.stop),L.DomUtil.addClass(this._inputcontainer,"uiHidden"),L.DomUtil.removeClass(this._labelcontainer,"uiHidden"),this._marker){var e=this._createNewMarker(),t=this._marker.getLatLng();e.setLatLng(t);var n=L.DomUtil.create("div","");L.DomUtil.create("div","",n).innerHTML=this._ordinateLabel(t);var r=L.DomUtil.create("a","",n);r.innerHTML="Remove",r.href="#";var i=L.DomEvent.stopPropagation;L.DomEvent.on(r,"click",i).on(r,"mousedown",i).on(r,"dblclick",i).on(r,"click",L.DomEvent.preventDefault).on(r,"click",function(){this._map.removeLayer(e)},this),e.bindPopup(n),e.addTo(this._map),this._map.removeLayer(this._marker),this._marker=null}}},_switchUI:function(e){L.DomEvent.stop(e),L.DomEvent.stopPropagation(e),L.DomEvent.preventDefault(e),this._showsCoordinates?this.expand():this.collapse()},onRemove:function(e){e.off("mousemove",this._update,this)},_update:function(e){var t=e.latlng,n=this.options;t&&(t=t.wrap(),this._currentPos=t,this._inputY.value=L.NumberFormatter.round(t.lat,n.decimals,n.decimalSeperator),this._inputX.value=L.NumberFormatter.round(t.lng,n.decimals,n.decimalSeperator),this._label.innerHTML=this._createCoordinateLabel(t))},_createNewMarker:function(){return this.options.markerType(null,this.options.markerProps)}}),L.control.coordinates=function(e){return new L.Control.Coordinates(e)},L.Map.mergeOptions({coordinateControl:!1}),L.Map.addInitHook(function(){this.options.coordinateControl&&(this.coordinateControl=new L.Control.Coordinates,this.addControl(this.coordinateControl))}),L.NumberFormatter={round:function(e,t,n){var r=L.Util.formatNum(e,t)+"",i=r.split(".");if(i[1]){for(var o=t-i[1].length;0<o;o--)i[1]+="0";r=i.join(n||".")}return r},toDMS:function(e){var t=Math.floor(Math.abs(e)),n=60*(Math.abs(e)-t),r=Math.floor(n),i=60*(n-r),o=Math.round(i);60==o&&(r++,o="00"),60==r&&(t++,r="00"),o<10&&(o="0"+o),r<10&&(r="0"+r);var a="";return e<0&&(a="-"),""+a+t+"&deg; "+r+"' "+o+"''"},createValidNumber:function(e,t){if(e&&0<e.length){var n=e.split(t||".");try{var r=Number(n.join("."));if(isNaN(r))return;return r}catch(e){return}}}}},{}],11:[function(e,t,n){"use strict";e("leaflet").GeometryUtil.readableArea=function(e,t){return t?1e4<=e?(1e-6*e).toFixed(2)+" km&sup2":e.toFixed(2)+" m&sup2;":3097600<=(e/=.836127)?(e/3097600).toFixed(2)+" mi&sup2;":4840<=e?(e/4840).toFixed(2)+" acres":Math.ceil(e)+" yd&sup2;"}},{leaflet:473}],12:[function(e,t,n){(function(t){"use strict";var o,n,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=window,n=document,L.drawVersion="0.4.14+6f33f7e",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(e,t){this._map=e,this._container=e._container,this._overlayPane=e._panes.overlayPane,this._popupPane=e._panes.popupPane,t&&t.shapeOptions&&(t.shapeOptions=L.Util.extend({},this.options.shapeOptions,t.shapeOptions)),L.setOptions(this,t);var n=L.version.split(".");1===parseInt(n[0],10)&&2<=parseInt(n[1],10)?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var e=this._map;e&&(L.DomUtil.disableTextSelection(),e.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(e){L.setOptions(this,e)},_fireCreatedEvent:function(e){this._map.fire(L.Draw.Event.CREATED,{layer:e,layerType:this.type})},_cancelDrawing:function(e){27===e.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(e,t){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,t&&t.drawError&&(t.drawError=L.Util.extend({},this.options.drawError,t.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,e,t)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var e=this._markers.pop(),t=this._poly,n=t.getLatLngs(),r=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(e),t.getLatLngs().length<2&&this._map.removeLayer(t),this._vertexChanged(r,!1)}},addVertex:function(e){2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(e)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(e)),this._poly.addLatLng(e),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(e,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var e=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),t=this._poly.newLatLngIntersects(e[e.length-1]);!this.options.allowIntersection&&t||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(e){var t=this._map.mouseEventToLayerPoint(e.originalEvent),n=this._map.layerPointToLatLng(t);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(t),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(e.originalEvent)},_vertexChanged:function(e,t){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(e,t),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(e){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(e),this._clickHandled=!0,this._disableNewMarkers();var t=e.originalEvent,n=t.clientX,r=t.clientY;this._startPoint.call(this,n,r)}},_startPoint:function(e,t){this._mouseDownOrigin=L.point(e,t)},_onMouseUp:function(e){var t=e.originalEvent,n=t.clientX,r=t.clientY;this._endPoint.call(this,n,r,e),this._clickHandled=null},_endPoint:function(e,t,n){if(this._mouseDownOrigin){var r=L.point(e,t).distanceTo(this._mouseDownOrigin),i=this._calculateFinishDistance(n.latlng);1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(n.latlng),this._finishShape()):i<10?this._finishShape():Math.abs(r)<9*(o.devicePixelRatio||1)&&this.addVertex(n.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(e){var t,n,r=e.originalEvent;!r.touches||!r.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(t=r.touches[0].clientX,n=r.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,t,n),this._endPoint.call(this,t,n,e),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(e){var t;if(0<this._markers.length){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var r=this._map.latLngToContainerPoint(n.getLatLng()),i=new L.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(i.getLatLng());t=r.distanceTo(o)}else t=1/0;return t},_updateFinishHandler:function(){var e="click";L.Browser.mobile&&(e="touchstart");var t=this._markers.length;1<t&&this._markers[t-1].on(e,this._finishShape,this),2<t&&this._markers[t-2].off(e,this._finishShape,this)},_createMarker:function(e){var t=new L.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(t),t},_updateGuide:function(e){var t=this._markers?this._markers.length:0;0<t&&(e=e||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[t-1].getLatLng()),e))},_updateTooltip:function(e){var t=this._getTooltipText();e&&this._tooltip.updatePosition(e),this._errorShown||this._tooltip.updateContent(t)},_drawGuide:function(e,t){var n,r,i,o=Math.floor(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))),a=this.options.guidelineDistance,s=this.options.maxGuideLineLength,l=s<o?o-s:a;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<o;l+=this.options.guidelineDistance)n=l/o,r={x:Math.floor(e.x*(1-n)+n*t.x),y:Math.floor(e.y*(1-n)+n*t.y)},(i=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(i,r)},_updateGuideColor:function(e){if(this._guidesContainer)for(var t=0,n=this._guidesContainer.childNodes.length;t<n;t++)this._guidesContainer.childNodes[t].style.backgroundColor=e},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var e,t=this.options.showLength;return 0===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=t?this._getMeasurementString():"",1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e})},_updateRunningMeasure:function(e,t){var n,r,i=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=i-(t?2:1),r=L.GeometryUtil.isVersion07x()?e.distanceTo(this._markers[n].getLatLng())*(this.options.factor||1):this._map.distance(e,this._markers[n].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=r*(t?1:-1))},_getMeasurementString:function(){var e,t=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return e=L.GeometryUtil.isVersion07x()?n&&t&&t.distanceTo?this._measurementRunningTotal+t.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&t?this._measurementRunningTotal+this._map.distance(t,n)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(e,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var e=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,e)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(e,t){L.Draw.Polyline.prototype.initialize.call(this,e,t),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var e=this._markers.length;1===e&&this._markers[0].on("click",this._finishShape,this),2<e&&(this._markers[e-1].on("dblclick",this._finishShape,this),3<e&&this._markers[e-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var e,t;return 0===this._markers.length?e=L.drawLocal.draw.handlers.polygon.tooltip.start:(e=this._markers.length<3?L.drawLocal.draw.handlers.polygon.tooltip.cont:L.drawLocal.draw.handlers.polygon.tooltip.end,t=this._getMeasurementString()),{text:e,subtext:t}},_getMeasurementString:function(){var e=this._area,t="";return e||this.options.showLength?(this.options.showLength&&(t=L.Draw.Polyline.prototype._getMeasurementString.call(this)),e&&(t+=L.GeometryUtil.readableArea(e,this.options.metric,this.options.precision)),t):null},_shapeIsValid:function(){return 3<=this._markers.length},_vertexChanged:function(e,t){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,e,t)},_cleanUpShape:function(){var e=this._markers.length;0<e&&(this._markers[0].off("click",this._finishShape,this),2<e&&this._markers[e-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(e,t){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,e,t)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(e){this._isDrawing=!0,this._startLatLng=e.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(e.originalEvent)},_onMouseMove:function(e){var t=e.latlng;this._tooltip.updatePosition(t),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(t))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(e,t){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,e,t)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(e){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}(e.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(e){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,e)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,e),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var e=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,e)},_getTooltipText:function(){var e,t,n,r=L.Draw.SimpleShape.prototype._getTooltipText.call(this),i=this._shape,o=this.options.showArea;return i&&(e=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),t=L.GeometryUtil.geodesicArea(e),n=o?L.GeometryUtil.readableArea(t,this.options.metric):""),{text:r.text,subtext:n}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(e,t){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,e,t)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(e){var t=e.latlng;this._tooltip.updatePosition(t),this._mouseMarker.setLatLng(t),this._marker?(t=this._mouseMarker.getLatLng(),this._marker.setLatLng(t)):(this._marker=this._createMarker(t),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(e){return new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(e){this._onMouseMove(e),this._onClick()},_fireCreatedEvent:function(){var e=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,e)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(e,t){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,e,t)},_fireCreatedEvent:function(){var e=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,e)},_createMarker:function(e){return new L.CircleMarker(e,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(e,t){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,e,t)},_drawShape:function(e){var t,n=this._map.options.crs,r=n.project(this._startLatLng),i=n.project(e),o=r.distanceTo(i);t=L.GeometryUtil.isVersion07x()?this._startLatLng.distanceTo(e):this._map.distance(this._startLatLng,e),this._shape?this._shape.setRadius(o):(this._shape=new L.Circle(this._startLatLng,o,this.options.shapeOptions),this._map.addLayer(this._shape)),this._shape._radiusMeter=t},_fireCreatedEvent:function(){var e=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,e)},_onMouseMove:function(e){var t,n=e.latlng,r=this.options.showRadius,i=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),t=this._shape._radiusMeter?Number(this._shape._radiusMeter).toFixed(1):this._shape.getRadius().toFixed(1);var o="";r&&(o=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(t,i,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:o})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(e,t){this._marker=e,L.setOptions(this,t)},addHooks:function(){var e=this._marker;e.dragging.enable(),e.on("dragend",this._onDragEnd,e),this._toggleMarkerHighlight()},removeHooks:function(){var e=this._marker;e.dragging.disable(),e.off("dragend",this._onDragEnd,e),this._toggleMarkerHighlight()},_onDragEnd:function(e){var t=e.target;t.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:t})},_toggleMarkerHighlight:function(){var e=this._marker._icon;e&&(e.style.display="none",L.DomUtil.hasClass(e,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,-4)):(L.DomUtil.addClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,4)),e.style.display="")},_offsetMarker:function(e,t){var n=parseInt(e.style.marginTop,10)-t,r=parseInt(e.style.marginLeft,10)-t;e.style.marginTop=n+"px",e.style.marginLeft=r+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(e){this.latlngs=[e._latlngs],e._holes&&(this.latlngs=this.latlngs.concat(e._holes)),this._poly=e,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(e){for(var t=0;t<this._verticesHandlers.length;t++)e(this._verticesHandlers[t])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(e){e.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(e){e.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(e){e.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var e=0;e<this.latlngs.length;e++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[e],this._poly.options.poly))},_updateLatLngs:function(e){this.latlngs=[e.layer._latlngs],e.layer._holes&&(this.latlngs=this.latlngs.concat(e.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(e,t,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=e,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=t,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var e=this._poly,t=e._path;e instanceof L.Polygon||(e.options.fill=!1,e.options.editing&&(e.options.editing.fill=!1)),t&&e.options.editing.className&&(e.options.original.className&&e.options.original.className.split(" ").forEach(function(e){L.DomUtil.removeClass(t,e)}),e.options.editing.className.split(" ").forEach(function(e){L.DomUtil.addClass(t,e)})),e.setStyle(e.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var e=this._poly,t=e._path;t&&e.options.editing.className&&(e.options.editing.className.split(" ").forEach(function(e){L.DomUtil.removeClass(t,e)}),e.options.original.className&&e.options.original.className.split(" ").forEach(function(e){L.DomUtil.addClass(t,e)})),e.setStyle(e.options.original),e._map&&(e._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var e,t,n,r,i,o,a=this._defaultShape(),s=0;for(e=0,n=a.length;e<n;e++)if(a[e]instanceof Array)for(var l=0;l<a[e].length;l++)(r=this._createMarker(a[e][l],s++)).on("click",this._onMarkerClick,this),r.on("contextmenu",this._onContextMenu,this),this._markers.push(r);else(r=this._createMarker(a[e],s++)).on("click",this._onMarkerClick,this),r.on("contextmenu",this._onContextMenu,this),this._markers.push(r);for(e=0,t=n-1;e<n;t=e++)(0!==e||L.Polygon&&this._poly instanceof L.Polygon)&&(i=this._markers[t],o=this._markers[e],this._createMiddleMarker(i,o),this._updatePrevNext(i,o))},_createMarker:function(e,t){var n=new L.Marker.Touch(e,{draggable:!0,icon:this.options.icon});return n._origLatLng=e,n._index=t,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var e=this._defaultShape(),t=[].splice.apply(e,arguments);return this._poly._convertLatLngs(e,!0),this._poly.redraw(),t},_removeMarker:function(e){var t=e._index;this._markerGroup.removeLayer(e),this._markers.splice(t,1),this._spliceLatLngs(t,1),this._updateIndexes(t,-1),e.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(e){var t=e.target,n=this._poly;if(L.extend(t._origLatLng,t._latlng),t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t)),t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next)),n.options.poly){var r=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var i=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&t.dragging._draggable._onUp(e),this._onMarkerClick(e),r&&r.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:i}),r&&r.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var o=this._poly.getLatLngs();this._poly._convertLatLngs(o,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(e){var t=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=e.target;this._defaultShape().length<t||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(e){var t=e.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:t,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(e){var t=this._map.mouseEventToLayerPoint(e.originalEvent.touches[0]),n=this._map.layerPointToLatLng(t),r=e.target;L.extend(r._origLatLng,n),r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,n){this._markerGroup.eachLayer(function(e){e._index>t&&(e._index+=n)})},_createMiddleMarker:function(t,n){var r,i,e,o=this._getMiddleLatLng(t,n),a=this._createMarker(o);a.setOpacity(.6),t._middleRight=n._middleLeft=a,i=function(){a.off("touchmove",i,this);var e=n._index;a._index=e,a.off("click",r,this).on("click",this._onMarkerClick,this),o.lat=a.getLatLng().lat,o.lng=a.getLatLng().lng,this._spliceLatLngs(e,0,o),this._markers.splice(e,0,a),a.setOpacity(1),this._updateIndexes(e,1),n._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,n),this._poly.fire("editstart")},e=function(){a.off("dragstart",i,this),a.off("dragend",e,this),a.off("touchmove",i,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,n)},r=function(){i.call(this),e.call(this),this._fireEdit()},a.on("click",r,this).on("dragstart",i,this).on("dragend",e,this).on("touchmove",i,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(e,t){e&&(e._next=t),t&&(t._prev=e)},_getMiddleLatLng:function(e,t){var n=this._poly._map,r=n.project(e.getLatLng()),i=n.project(t.getLatLng());return n.unproject(r._add(i)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(e,t){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=e,L.Util.setOptions(this,t)},addHooks:function(){var e=this._shape;this._shape._map&&(this._map=this._shape._map,e.setStyle(e.options.editing),e._map&&(this._map=e._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var e=this._shape;if(e.setStyle(e.options.original),e._map){this._unbindMarker(this._moveMarker);for(var t=0,n=this._resizeMarkers.length;t<n;t++)this._unbindMarker(this._resizeMarkers[t]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(e,t){var n=new L.Marker.Touch(e,{draggable:!0,icon:t,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(e){e.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(e){e.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(e){e.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(e){var t=e.target,n=t.getLatLng();t===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(e){e.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(e){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,e),"function"==typeof this._getCorners){var t=this._getCorners(),n=e.target,r=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=t[(r+2)%4],this._toggleCornerMarkers(0,r)}this._shape.fire("editstart")},_onTouchMove:function(e){var t=this._map.mouseEventToLayerPoint(e.originalEvent.touches[0]),n=this._map.layerPointToLatLng(t);return e.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(e){e.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var e=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var e=this._getCorners();this._resizeMarkers=[];for(var t=0,n=e.length;t<n;t++)this._resizeMarkers.push(this._createMarker(e[t],this.options.resizeIcon)),this._resizeMarkers[t]._cornerIndex=t},_onMarkerDragStart:function(e){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,e);var t=this._getCorners(),n=e.target._cornerIndex;this._oppositeCorner=t[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(e){var t,n=e.target;n===this._moveMarker&&(t=this._shape.getBounds().getCenter(),n.setLatLng(t)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,e)},_move:function(e){for(var t,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=this._shape.getBounds().getCenter(),i=[],o=0,a=n.length;o<a;o++)t=[n[o].lat-r.lat,n[o].lng-r.lng],i.push([e.lat+t[0],e.lng+t[1]]);this._shape.setLatLngs(i),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(e){var t;this._shape.setBounds(L.latLngBounds(e,this._oppositeCorner)),t=this._shape.getBounds(),this._moveMarker.setLatLng(t.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var e=this._shape.getBounds();return[e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]},_toggleCornerMarkers:function(e){for(var t=0,n=this._resizeMarkers.length;t<n;t++)this._resizeMarkers[t].setOpacity(e)},_repositionCornerMarkers:function(){for(var e=this._getCorners(),t=0,n=this._resizeMarkers.length;t<n;t++)this._resizeMarkers[t].setLatLng(e[t])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var e=this._shape.getLatLng();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(e){if(this._resizeMarkers.length){var t=this._getResizeMarkerPoint(e);this._resizeMarkers[0].setLatLng(t)}this._shape.setLatLng(e),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var e=this._shape.getLatLng(),t=this._getResizeMarkerPoint(e);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(t,this.options.resizeIcon))},_getResizeMarkerPoint:function(e){var t=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(e);return this._map.unproject([n.x+t,n.y-t])},_resize:function(e){var t=this._moveMarker.getLatLng(),n=this._map.options.crs,r=n.project(t),i=n.project(e),o=r.distanceTo(i);o=L.GeometryUtil.isVersion07x()?t.distanceTo(e):this._map.distance(t,e),this._shape._radiusMeter=o,this._shape.setRadius(o),this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(o,!0,this.options.feet,this.options.nautic)}),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(e,t){var n={};if(void 0!==e.touches){if(!e.touches.length)return;n=e.touches[0]}else{if("touch"!==e.pointerType)return;if(n=e,!this._filterClick(e))return}var r=this._map.mouseEventToContainerPoint(n),i=this._map.mouseEventToLayerPoint(n),o=this._map.layerPointToLatLng(i);this._map.fire(t,{latlng:o,layerPoint:i,containerPoint:r,pageX:n.pageX,pageY:n.pageY,originalEvent:e})},_filterClick:function(e){var t=e.timeStamp||e.originalEvent.timeStamp,n=L.DomEvent._lastClick&&t-L.DomEvent._lastClick;return n&&100<n&&n<500||e.target._simulatedClick&&!e._simulated?(L.DomEvent.stop(e),!1):(L.DomEvent._lastClick=t,!0)},_onTouchStart:function(e){this._map._loaded&&this._touchEvent(e,"touchstart")},_onTouchEnd:function(e){this._map._loaded&&this._touchEvent(e,"touchend")},_onTouchCancel:function(e){if(this._map._loaded){var t="touchcancel";this._detectIE()&&(t="pointercancel"),this._touchEvent(e,t)}},_onTouchLeave:function(e){this._map._loaded&&this._touchEvent(e,"touchleave")},_onTouchMove:function(e){this._map._loaded&&this._touchEvent(e,"touchmove")},_detectIE:function(){var e=o.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return 0<r&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?t.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):t.concat(["touchcancel"]),L.DomUtil.addClass(e,"leaflet-clickable"),L.DomEvent.on(e,"click",this._onMouseClick,this),L.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var n=0;n<t.length;n++)L.DomEvent.on(e,t[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=o.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return 0<r&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(e){for(var t=[],n=0,r=e.length;n<r;n++)Array.isArray(e[n])?t.push(L.LatLngUtil.cloneLatLngs(e[n])):t.push(this.cloneLatLng(e[n]));return t},cloneLatLng:function(e){return L.latLng(e.lat,e.lng)}},a={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(e){var t,n,r=e.length,i=0,o=Math.PI/180;if(2<r){for(var a=0;a<r;a++)t=e[a],i+=((n=e[(a+1)%r]).lng-t.lng)*o*(2+Math.sin(t.lat*o)+Math.sin(n.lat*o));i=6378137*i*6378137/2}return Math.abs(i)},formattedNumber:function(e,t){var n=parseFloat(e).toFixed(t),r=L.drawLocal.format&&L.drawLocal.format.numeric,i=r&&r.delimiters,o=i&&i.thousands,a=i&&i.decimal;if(o||a){var s=n.split(".");n=o?s[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):s[0],a=a||".",1<s.length&&(n=n+a+s[1])}return n},readableArea:function(e,t,n){var r;return n=L.Util.extend({},a,n),t?(r=["ha","m"],type=void 0===t?"undefined":i(t),"string"===type?r=[t]:"boolean"!==type&&(r=t),1e6<=e&&-1!==r.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*e,n.km)+" km²":1e4<=e&&-1!==r.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*e,n.ha)+" ha":L.GeometryUtil.formattedNumber(e,n.m)+" m²"):3097600<=(e/=.836127)?L.GeometryUtil.formattedNumber(e/3097600,n.mi)+" mi²":4840<=e?L.GeometryUtil.formattedNumber(e/4840,n.ac)+" acres":L.GeometryUtil.formattedNumber(e,n.yd)+" yd²"},readableDistance:function(e,t,n,r,i){var o;switch(i=L.Util.extend({},a,i),t?"string"==typeof t?t:"metric":n?"feet":r?"nauticalMile":"yards"){case"metric":o=1e3<e?L.GeometryUtil.formattedNumber(e/1e3,i.km)+" km":L.GeometryUtil.formattedNumber(e,i.m)+" m";break;case"feet":e*=3.28083,o=L.GeometryUtil.formattedNumber(e,i.ft)+" ft";break;case"nauticalMile":e*=.53996,o=L.GeometryUtil.formattedNumber(e/1e3,i.nm)+" nm";break;case"yards":default:o=1760<(e*=1.09361)?L.GeometryUtil.formattedNumber(e/1760,i.mi)+" miles":L.GeometryUtil.formattedNumber(e,i.yd)+" yd"}return o},isVersion07x:function(){var e=L.version.split(".");return 0===parseInt(e[0],10)&&7===parseInt(e[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(e,t,n,r){return this._checkCounterclockwise(e,n,r)!==this._checkCounterclockwise(t,n,r)&&this._checkCounterclockwise(e,t,n)!==this._checkCounterclockwise(e,t,r)},_checkCounterclockwise:function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}}),L.Polyline.include({intersects:function(){var e,t,n,r=this._getProjectedPoints(),i=r?r.length:0;if(this._tooFewPointsForIntersection())return!1;for(e=i-1;3<=e;e--)if(t=r[e-1],n=r[e],this._lineSegmentsIntersectsRange(t,n,e-2))return!0;return!1},newLatLngIntersects:function(e,t){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(e),t)},newPointIntersects:function(e,t){var n=this._getProjectedPoints(),r=n?n.length:0,i=n?n[r-1]:null,o=r-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(i,e,o,t?1:0)},_tooFewPointsForIntersection:function(e){var t=this._getProjectedPoints(),n=t?t.length:0;return!t||(n+=e||0)<=3},_lineSegmentsIntersectsRange:function(e,t,n,r){var i,o,a=this._getProjectedPoints();r=r||0;for(var s=n;r<s;s--)if(i=a[s-1],o=a[s],L.LineUtil.segmentsIntersect(e,t,i,o))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var e=[],t=this._defaultShape(),n=0;n<t.length;n++)e.push(this._map.latLngToLayerPoint(t[n]));return e}}),L.Polygon.include({intersects:function(){var e,t,n,r,i=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(e=i.length,t=i[0],n=i[e-1],r=e-2,this._lineSegmentsIntersectsRange(n,t,r,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(e){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var t;L.Control.prototype.initialize.call(this,e),this._toolbars={},L.DrawToolbar&&this.options.draw&&(t=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=t,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(t=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=t,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(e){var t,n=L.DomUtil.create("div","leaflet-draw"),r=!1,i="leaflet-draw-toolbar-top";for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&(t=this._toolbars[o].addToolbar(e))&&(r||(L.DomUtil.hasClass(t,i)||L.DomUtil.addClass(t.childNodes[0],i),r=!0),n.appendChild(t));return n},onRemove:function(){for(var e in this._toolbars)this._toolbars.hasOwnProperty(e)&&this._toolbars[e].removeToolbar()},setDrawingOptions:function(e){for(var t in this._toolbars)this._toolbars[t]instanceof L.DrawToolbar&&this._toolbars[t].setOptions(e)},_toolbarEnabled:function(e){var t=e.target;for(var n in this._toolbars)this._toolbars[n]!==t&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(e){L.setOptions(this,e),this._modes={},this._actionButtons=[],this._activeMode=null;var t=L.version.split(".");1===parseInt(t[0],10)&&2<=parseInt(t[1],10)?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(e){var t,n=L.DomUtil.create("div","leaflet-draw-section"),r=0,i=this._toolbarClass||"",o=this.getModeHandlers(e);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=e,t=0;t<o.length;t++)o[t].enabled&&this._initModeHandler(o[t].handler,this._toolbarContainer,r++,i,o[t].title);if(r)return this._lastButtonIndex=--r,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var e in this._modes)this._modes.hasOwnProperty(e)&&(this._disposeButton(this._modes[e].button,this._modes[e].handler.enable,this._modes[e].handler),this._modes[e].handler.disable(),this._modes[e].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var t=0,n=this._actionButtons.length;t<n;t++)this._disposeButton(this._actionButtons[t].button,this._actionButtons[t].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(e,t,n,r,i){var o=e.type;this._modes[o]={},this._modes[o].handler=e,this._modes[o].button=this._createButton({type:o,title:i,className:r+"-"+o,container:t,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=n,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!o.MSStream},_createButton:function(e){var t=L.DomUtil.create("a",e.className||"",e.container),n=L.DomUtil.create("span","sr-only",e.container);t.href="#",t.appendChild(n),e.title&&(t.title=e.title,n.innerHTML=e.title),e.text&&(t.innerHTML=e.text,n.innerHTML=e.text);var r=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(t,"click",L.DomEvent.stopPropagation).on(t,"mousedown",L.DomEvent.stopPropagation).on(t,"dblclick",L.DomEvent.stopPropagation).on(t,"touchstart",L.DomEvent.stopPropagation).on(t,"click",L.DomEvent.preventDefault).on(t,r,e.callback,e.context),t},_disposeButton:function(e,t){var n=this._detectIOS()?"touchstart":"click";L.DomEvent.off(e,"click",L.DomEvent.stopPropagation).off(e,"mousedown",L.DomEvent.stopPropagation).off(e,"dblclick",L.DomEvent.stopPropagation).off(e,"touchstart",L.DomEvent.stopPropagation).off(e,"click",L.DomEvent.preventDefault).off(e,n,t)},_handlerActivated:function(e){this.disable(),this._activeMode=this._modes[e.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(e){var t,n,r,i,o=this._actionsContainer,a=this.getActions(e),s=a.length;for(n=0,r=this._actionButtons.length;n<r;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];o.firstChild;)o.removeChild(o.firstChild);for(var l=0;l<s;l++)"enabled"in a[l]&&!a[l].enabled||(t=L.DomUtil.create("li","",o),i=this._createButton({title:a[l].title,text:a[l].text,container:t,callback:a[l].callback,context:a[l].context}),this._actionButtons.push({button:i,callback:a[l].callback}))},_showActionsToolbar:function(){var e=this._activeMode.buttonIndex,t=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),e===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(e){this._map=e,this._popupPane=e._panes.popupPane,this._visible=!1,this._container=e.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(e){return this._container&&(e.subtext=e.subtext||"",0!==e.subtext.length||this._singleLineLabel?0<e.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<e.subtext.length?'<span class="leaflet-draw-tooltip-subtext">'+e.subtext+"</span><br />":"")+"<span>"+e.text+"</span>",e.text||e.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden")),this},updatePosition:function(e){var t=this._map.latLngToLayerPoint(e),n=this._container;return this._container&&(this._visible&&(n.style.visibility="inherit"),L.DomUtil.setPosition(n,t)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(e){for(var t in this.options)this.options.hasOwnProperty(t)&&e[t]&&(e[t]=L.extend({},this.options[t],e[t]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,e)},getModeHandlers:function(e){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(e,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(e,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(e,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(e,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(e,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(e,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(e){return[{enabled:e.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:e.completeShape,context:e},{enabled:e.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:e.deleteLastVertex,context:e},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(e){for(var t in L.setOptions(this,e),this._modes)this._modes.hasOwnProperty(t)&&e.hasOwnProperty(t)&&this._modes[t].handler.setOptions(e[t])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(e){e.edit&&(void 0===e.edit.selectedPathOptions&&(e.edit.selectedPathOptions=this.options.edit.selectedPathOptions),e.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,e.edit.selectedPathOptions)),e.remove&&(e.remove=L.extend({},this.options.remove,e.remove)),e.poly&&(e.poly=L.extend({},this.options.poly,e.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,e),this._selectedFeatureCount=0},getModeHandlers:function(e){var t=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(e,{featureGroup:t,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(e,{featureGroup:t}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(e){var t=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return e.removeAllLayers&&t.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),t},addToolbar:function(e){var t=L.Toolbar.prototype.addToolbar.call(this,e);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),t},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var e,t=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(e=this._modes[L.EditToolbar.Edit.TYPE].button,t?L.DomUtil.removeClass(e,"leaflet-disabled"):L.DomUtil.addClass(e,"leaflet-disabled"),e.setAttribute("title",t?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(e=this._modes[L.EditToolbar.Delete.TYPE].button,t?L.DomUtil.removeClass(e,"leaflet-disabled"):L.DomUtil.addClass(e,"leaflet-disabled"),e.setAttribute("title",t?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(e,t){if(L.Handler.prototype.initialize.call(this,e),L.setOptions(this,t),this._featureGroup=t.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&2<=parseInt(n[1],10)?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){if(!this._enabled&&this._hasAvailableLayers()){var r=0;this._map.eachLayer(function(e){e.eachLayer&&e.eachLayer(function(e){if(e.getLatLng&&r++,e.getLatLngs){var t=e.getLatLngs();if(t.length&&t[0]instanceof Array)for(var n=0;n<t.length;n++)r+=t[n].length;else r+=t.length}})}),console.log("all point count:"+r);var e=t.maxEditPointCount?t.maxEditPointCount:1e3;e<r?this._map.fire("draw:error",{allPointCount:r,msg:"too much point to edit (max:"+e+")"}):(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))}},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var e=this._map;e&&(e.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),e._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(e){this._revertLayer(e)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(e){var t=L.Util.stamp(e);this._uneditedLayerProps[t]||(e instanceof L.Polyline||e instanceof L.Polygon||e instanceof L.Rectangle?this._uneditedLayerProps[t]={latlngs:L.LatLngUtil.cloneLatLngs(e.getLatLngs())}:e instanceof L.Circle?this._uneditedLayerProps[t]={latlng:L.LatLngUtil.cloneLatLng(e.getLatLng()),radius:e.getRadius()}:(e instanceof L.Marker||e instanceof L.CircleMarker)&&(this._uneditedLayerProps[t]={latlng:L.LatLngUtil.cloneLatLng(e.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(e){var t=L.Util.stamp(e);e.edited=!1,this._uneditedLayerProps.hasOwnProperty(t)&&(e instanceof L.Polyline||e instanceof L.Polygon||e instanceof L.Rectangle?e.setLatLngs(this._uneditedLayerProps[t].latlngs):e instanceof L.Circle?(e.setLatLng(this._uneditedLayerProps[t].latlng),e.setRadius(this._uneditedLayerProps[t].radius)):(e instanceof L.Marker||e instanceof L.CircleMarker)&&e.setLatLng(this._uneditedLayerProps[t].latlng),e.fire("revert-edited",{layer:e}))},_enableLayerEdit:function(e){var t,n,r=e.layer||e.target||e;this._backupLayer(r),this.options.poly&&(n=L.Util.extend({},this.options.poly),r.options.poly=n),this.options.selectedPathOptions&&((t=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(t.color=r.options.color,t.fillColor=r.options.fillColor),r.options.original=L.extend({},r.options),r.options.editing=t),r instanceof L.Marker?(r.editing&&r.editing.enable(),r.dragging.enable(),r.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.enable()},_disableLayerEdit:function(e){var t=e.layer||e.target||e;t.edited=!1,t.editing&&t.editing.disable(),delete t.options.editing,delete t.options.original,this._selectedPathOptions&&(t instanceof L.Marker?this._toggleMarkerHighlight(t):(t.setStyle(t.options.previousOptions),delete t.options.previousOptions)),t instanceof L.Marker?(t.dragging.disable(),t.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):t.editing.disable()},_onMouseMove:function(e){this._tooltip.updatePosition(e.latlng)},_onMarkerDragEnd:function(e){var t=e.target;t.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:t})},_onTouchMove:function(e){var t=e.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(t),r=this._map.layerPointToLatLng(n);e.target.setLatLng(r)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(e,t){if(L.Handler.prototype.initialize.call(this,e),L.Util.setOptions(this,t),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&2<=parseInt(n[1],10)?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var e=this._map;e&&(e.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(e){this._deletableLayers.addLayer(e),e.fire("revert-deleted",{layer:e})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(e){this._removeLayer({layer:e})},this),this.save()},_enableLayerDelete:function(e){(e.layer||e.target||e).on("click",this._removeLayer,this)},_disableLayerDelete:function(e){var t=e.layer||e.target||e;t.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(t)},_removeLayer:function(e){var t=e.layer||e.target||e;this._deletableLayers.removeLayer(t),this._deletedLayers.addLayer(t),t.fire("deleted")},_onMouseMove:function(e){this._tooltip.updatePosition(e.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length},_findParentDeletableLayer:function(e){var t=this._deletableLayers.getLayers();if(t)for(var n=0;n<t.length;n++)if(e){if(e._leaflet_id===t[n]._leaflet_id)return t[n];for(var r=t[n].getLayers(),i=0;i<r.length;i++)if(e._leaflet_id===r[i]._leaflet_id)return t[n]}return e}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){"use strict";var r,i=e("../../../src/kq");var o=((r=i)&&r.__esModule?r:{default:r}).default.Local.Control.draw;L.drawLocal={draw:{toolbar:{actions:{title:o.draw.toolbar.actions.title(),text:o.draw.toolbar.actions.text()},finish:{title:o.draw.toolbar.finish.title(),text:o.draw.toolbar.finish.text()},undo:{title:o.draw.toolbar.undo.title(),text:o.draw.toolbar.undo.text()},buttons:{polyline:o.draw.toolbar.buttons.polyline(),polygon:o.draw.toolbar.buttons.polygon(),rectangle:o.draw.toolbar.buttons.rectangle(),circle:o.draw.toolbar.buttons.circle(),marker:o.draw.toolbar.buttons.marker(),circlemarker:o.draw.toolbar.buttons.circlemarker()}},handlers:{circle:{tooltip:{start:o.draw.handlers.circle.tooltip.start()},radius:o.draw.handlers.circle.radius()},circlemarker:{tooltip:{start:o.draw.handlers.circlemarker.tooltip.start()}},marker:{tooltip:{start:o.draw.handlers.marker.tooltip.start()}},polygon:{tooltip:{start:o.draw.handlers.polygon.tooltip.start(),cont:o.draw.handlers.polygon.tooltip.cont(),end:o.draw.handlers.polygon.tooltip.end()}},polyline:{error:o.draw.handlers.polyline.error(),tooltip:{start:o.draw.handlers.polyline.tooltip.start(),cont:o.draw.handlers.polyline.tooltip.cont(),end:o.draw.handlers.polyline.tooltip.end()}},rectangle:{tooltip:{start:o.draw.handlers.rectangle.tooltip.start()}},simpleshape:{tooltip:{end:o.draw.handlers.simpleshape.tooltip.end()}}}},edit:{toolbar:{actions:{save:{title:o.edit.toolbar.actions.save.title(),text:o.edit.toolbar.actions.save.text()},cancel:{title:o.edit.toolbar.actions.cancel.title(),text:o.edit.toolbar.actions.cancel.text()},clearAll:{title:o.edit.toolbar.actions.clearAll.title(),text:o.edit.toolbar.actions.clearAll.text()}},buttons:{edit:o.edit.toolbar.buttons.edit(),editDisabled:o.edit.toolbar.buttons.editDisabled(),remove:o.edit.toolbar.buttons.remove(),removeDisabled:o.edit.toolbar.buttons.removeDisabled()}},handlers:{edit:{tooltip:{text:o.edit.handlers.edit.tooltip.text(),subtext:o.edit.handlers.edit.tooltip.subtext()}},remove:{tooltip:{text:o.edit.handlers.remove.tooltip.text()}}}},io:{useGeoJSON:o.io.usingGeoJSON(),useShapefile:o.io.usingShapefile(),export:o.io.export(),import:o.io.import()}}},{"../../../src/kq":729}],14:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function o(e,t){this.title=e.title,this.stateName=e.stateName?e.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,"")),this.icon.innerHTML=function(e){var t;t=e.match(/[&;=<>"']/)?e:(e=e.replace(/(^\s*|\s*$)/g,""),t=L.DomUtil.create("span",""),0===e.indexOf("fa-")?L.DomUtil.addClass(t,"fa "+e):0===e.indexOf("glyphicon-")?L.DomUtil.addClass(t,"glyphicon "+e):L.DomUtil.addClass(t,e),t.outerHTML);return t}(e.icon),this.onClick=L.Util.bind(e.onClick?e.onClick:function(){},t)}L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(e,t){t&&L.Util.setOptions(this,t),this._buildContainer(),this._buttons=[];for(var n=0;n<e.length;n++)e[n]._bar=this,e[n]._container=e[n].button,this._buttons.push(e[n]),this.container.appendChild(e[n].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div","");var e="leaflet-bar easy-button-container leaflet-control";L.Browser.touch&&(e+=" leaflet-touch"),this.options.leafletClasses&&L.DomUtil.addClass(this.container,e),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(e){this._map=e;for(var t=0;t<this._buttons.length;t++)this._buttons[t]._map=e;var n=this._container=this.onAdd(e),r=this.getPosition(),i=e._controlCorners[r];return L.DomUtil.addClass(n,"leaflet-control"),-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}}),L.easyBar=function(){for(var e=[L.Control.EasyBar],t=0;t<arguments.length;t++)e.push(arguments[t]);return new(Function.prototype.bind.apply(L.Control.EasyBar,e))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0,tagName:"button"},initialize:function(e,t,n,r){this.options.states=[],this.options.id=null!=r?r:void 0,this.storage={},"object"===a(arguments[arguments.length-1])&&L.Util.setOptions(this,arguments[arguments.length-1]),0===this.options.states.length&&"string"==typeof e&&"function"==typeof t&&this.options.states.push({icon:e,onClick:t,title:"string"==typeof n?n:""}),this._states=[];for(var i=0;i<this.options.states.length;i++)this._states.push(new o(this.options.states[i],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create(this.options.tagName,""),"button"===this.options.tagName&&this.button.setAttribute("type","button"),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part leaflet-interactive"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop),L.DomEvent.on(this.button,"touchstart",L.DomEvent.stopPropagation),L.DomEvent.addListener(this.button,"click",function(e){L.DomEvent.stop(e),this._currentState.onClick(this,this._map?this._map:null),this._map&&this._map.getContainer().focus()},this),"replace"==this.options.type)this.button.appendChild(this._currentState.icon);else for(var e=0;e<this._states.length;e++)this.button.appendChild(this._states[e].icon)},_currentState:{stateName:"unnamed",icon:document.createElement("span")},_states:null,state:function(e){return"string"==typeof e?this._activateStateNamed(e):"number"==typeof e&&this._activateState(this._states[e]),this},_activateStateNamed:function(e){for(var t=0;t<this._states.length;t++)this._states[t].stateName==e&&this._activateState(this._states[t])},_activateState:function(e){if(e!==this._currentState){"replace"==this.options.type&&(this.button.appendChild(e.icon),this.button.removeChild(this._currentState.icon)),e.title?this.button.title=e.title:this.button.removeAttribute("title");for(var t=0;t<this._states.length;t++)L.DomUtil.removeClass(this._states[t].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[t].icon,e.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,e.stateName+"-active"),this._currentState=e}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},onAdd:function(e){var t=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._anonymousBar=t,this._container=t.container,this._anonymousBar.container}}),L.easyButton=function(){var e=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,e))}}()},{}],15:[function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(e){var t=L.ExtraMarkers={};t.version=L.ExtraMarkers.version="1.0.8",t.Icon=L.ExtraMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"",prefix:"",extraClasses:"",shape:"circle",icon:"",innerHTML:"",markerColor:"red",svgBorderColor:"#fff",svgOpacity:1,iconColor:"#fff",number:"",svg:!1},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=document.createElement("div"),t=this.options;return t.icon&&(e.innerHTML=this._createInner()),t.innerHTML&&(e.innerHTML=t.innerHTML),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),t.svg?this._setIconStyles(e,"svg"):this._setIconStyles(e,t.shape+"-"+t.markerColor),e},_createInner:function(){var e="",t="",n=this.options;if(n.iconColor&&(e="style='color: "+n.iconColor+"' "),n.number&&(t="number='"+n.number+"' "),n.svg){var r='<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 69.529271 95.44922" style="fill:'+n.markerColor+";stroke:"+n.svgBorderColor+";fill-opacity:"+n.svgOpacity+';" height="100%" width="100%" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><g transform="translate(-139.52 -173.21)"><path d="m174.28 173.21c-19.199 0.00035-34.764 15.355-34.764 34.297 0.007 6.7035 1.5591 12.813 5.7461 18.854l0.0234 0.0371 28.979 42.262 28.754-42.107c3.1982-5.8558 5.9163-11.544 6.0275-19.045-0.0001-18.942-15.565-34.298-34.766-34.297z"/></g></svg>';return"square"===n.shape&&(r='<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 69.457038 96.523441" style="fill:'+n.markerColor+";stroke:"+n.svgBorderColor+";fill-opacity:"+n.svgOpacity+';" height="100%" width="100%" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><g transform="translate(-545.27 -658.39)"><path d="m545.27 658.39v65.301h22.248l12.48 31.223 12.676-31.223h22.053v-65.301h-69.457z"/></g></svg>'),"star"===n.shape&&(r='<svg style="top:0; fill:'+n.markerColor+";stroke:"+n.svgBorderColor+";fill-opacity:"+n.svgOpacity+';" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="100%" width="100%" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 77.690999 101.4702"><g transform="translate(-101.15 -162.97)"><g transform="matrix(1 0 0 1.0165 -65.712 -150.28)"><path d="m205.97 308.16-11.561 11.561h-16.346v16.346l-11.197 11.197 11.197 11.197v15.83h15.744l11.615 33.693 11.467-33.568 0.125-0.125h16.346v-16.346l11.197-11.197-11.197-11.197v-15.83h-15.83l-11.561-11.561z"/></g></g></svg>'),"penta"===n.shape&&(r='<svg style="fill:'+n.markerColor+";stroke:"+n.svgBorderColor+";fill-opacity:"+n.svgOpacity+';"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71.550368 96.362438" height="100%" width="100%" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><g transform="translate(-367.08 -289.9)"><path d="m367.08 322.5 17.236-32.604h36.151l18.164 32.25-35.665 64.112z"/></g></svg>'),r+"<i "+t+e+"class='"+n.extraClasses+" "+n.prefix+" "+n.icon+"'></i>"}return"<i "+t+e+"class='"+n.extraClasses+" "+n.prefix+" "+n.icon+"'></i>"},_setIconStyles:function(e,t){var n,r,i=this.options,o=L.point(i["shadow"===t?"shadowSize":"iconSize"]);r="shadow"===t?(n=L.point(i.shadowAnchor||i.iconAnchor),"shadow"):(n=L.point(i.iconAnchor),"icon"),!n&&o&&(n=o.divideBy(2,!0)),e.className="leaflet-marker-"+r+" extra-marker extra-marker-"+t+" "+i.className,n&&(e.style.marginLeft=-n.x+"px",e.style.marginTop=-n.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},createShadow:function(){var e=document.createElement("div");return this._setIconStyles(e,"shadow"),e}}),t.icon=L.ExtraMarkers.icon=function(e){return new L.ExtraMarkers.Icon(e)},e.ExtraMarkers=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":o(n))&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r.leaflet=r.leaflet||{},r.leaflet["extra-markers"]={}))},{}],16:[function(e,t,n){"use strict";!function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1,mapContainerID:"map"},onAdd:function(e){var t,n="";return t=e.zoomControl&&!this.options.forceSeparateButton?e.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this.options.content&&(n=this.options.content),this._createButton(this.options.title,"icon iconfont icon-fullscreen",n,t,this.toggleFullScreen,this),this._map.on("enterFullscreen exitFullscreen",this._toggleTitle,this),t},_createButton:function(e,t,n,r,i,o){return this.link=L.DomUtil.create("a",t,r),this.link.href="#",this.link.title=e,this.link.innerHTML=n,this.link.id="kq-fullscreen",L.DomEvent.addListener(this.link,"click touchstart",L.DomEvent.stopPropagation).addListener(this.link,"click",L.DomEvent.preventDefault).addListener(this.link,"click",i,o),L.DomEvent.addListener(this.link,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.link,"mousedown",L.DomEvent.stop),L.DomEvent.addListener(r,a.fullScreenEventName,L.DomEvent.stopPropagation).addListener(r,a.fullScreenEventName,L.DomEvent.preventDefault).addListener(r,a.fullScreenEventName,this._handleEscKey,o),L.DomEvent.addListener(document,a.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,a.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,a.fullScreenEventName,this._handleEscKey,o),this.link},toggleFullScreen:function(){var e=this._map;e._exitFired=!1;var t=document.getElementsByTagName("body");e._isFullscreen?(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.cancelFullScreen(t[0]):L.DomUtil.removeClass(e._container,"leaflet-pseudo-fullscreen"),e.invalidateSize(),e.fire("exitFullscreen"),e._exitFired=!0,e._isFullscreen=!1):(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.requestFullScreen(t[0]):L.DomUtil.addClass(e._container,"leaflet-pseudo-fullscreen"),e.invalidateSize(),e.fire("enterFullscreen"),e._isFullscreen=!0)},_toggleTitle:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel},_handleEscKey:function(){var e=this._map;a.isFullScreen(e)||e._exitFired||(e.fire("exitFullscreen"),e._exitFired=!0,e._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))});var a={supportsFullScreen:!(L.control.fullscreen=function(e){return new L.Control.FullScreen(e)}),isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},e="webkit moz o ms khtml".split(" ");if(void 0!==document.exitFullscreen)a.supportsFullScreen=!0;else{for(var t=0,n=e.length;t<n;t++)if(a.prefix=e[t],void 0!==document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}void 0!==document.msExitFullscreen&&(a.prefix="ms",a.supportsFullScreen=!0)}a.supportsFullScreen&&("ms"===a.prefix?a.fullScreenEventName="MSFullscreenChange":a.fullScreenEventName=a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;case"ms":return document.msFullscreenElement;default:return document[this.prefix+"FullScreen"]}},a.requestFullScreen=function(e){switch(this.prefix){case"":return e.requestFullscreen();case"ms":return e.msRequestFullscreen();default:return e[this.prefix+"RequestFullScreen"]()}},a.cancelFullScreen=function(){switch(this.prefix){case"":return document.exitFullscreen();case"ms":return document.msExitFullscreen();default:return document[this.prefix+"CancelFullScreen"]()}}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var e=jQuery(this);a.supportsFullScreen&&a.requestFullScreen(e)})}),window.fullScreenApi=a}()},{}],17:[function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(l){var e=l.Control.extend({options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:20,collapsedHeight:20,collapsedWidth_min:20,collapsedHeight_min:20,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(e,t){l.Util.setOptions(this,t),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=e},onAdd:function(e){this._mainMap=e,this._container=l.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",l.DomEvent.disableClickPropagation(this._container),l.DomEvent.on(this._container,"mousewheel",l.DomEvent.stopPropagation);var t={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:e.options.crs};return t=l.Util.extend(this.options.mapOptions,t),this._miniMap=new l.Map(this._container,t),this._miniMap.createPane("basemapPane"),this._miniMap.getPane("basemapPane").style.zIndex=200,this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(l.Util.bind(function(){this._aimingRect=l.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=l.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(e){l.Control.prototype.addTo.call(this,e);var t=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(t,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(e){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(e){this._miniMap.removeLayer(this._layer),this._layer=e,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(e,t,n,r,i,o){var a=l.DomUtil.create("a",n,r);a.innerHTML=e,a.href="#",a.title=t;var s=l.DomEvent.stopPropagation;return l.DomEvent.on(a,"click",s).on(a,"mousedown",s).on(a,"dblclick",s).on(a,"click",l.DomEvent.preventDefault).on(a,"click",i,o),a},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(e){e!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth_min+"px",this._container.style.height=this.options.collapsedHeight_min+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1},_onMainMapMoved:function(e){if(this._miniMapMoving)this._miniMapMoving=!1;else{var t=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(t,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(e){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(e){if(!this.options.centerFixed){var t=this._aimingRect.getBounds(),n=this._miniMap.latLngToContainerPoint(t.getSouthWest()),r=this._miniMap.latLngToContainerPoint(t.getNorthEast());this._lastAimingRectPosition={sw:n,ne:r}}},_onMiniMapMoving:function(e){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new l.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:.3,fillOpacity:.1}))},_onMiniMapMoved:function(e){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var e=this.options.zoomLevelFixed;return this._isDefined(e)&&this._isInteger(e)},_decideZoom:function(e){if(this._isZoomLevelFixed())return e?this.options.zoomLevelFixed:this._mainMap.getZoom();if(e)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var t,n=this._miniMap.getZoom()-this._mainMap.getZoom(),r=this._miniMap.getZoom()-this.options.zoomLevelOffset;return n>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(t=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):t=this._mainMap.getZoom():t=r,this._lastMiniMapZoom=this._miniMap.getZoom(),t},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(e){return"number"==typeof e},_isDefined:function(e){return void 0!==e}});return l.Map.mergeOptions({miniMapControl:!1}),l.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new e).addTo(this))}),e},i=window,"function"==typeof define&&define.amd?define(["leaflet"],r):"object"===(void 0===n?"undefined":o(n))&&(t.exports=r(e("leaflet"))),void 0!==i&&i.L&&(i.L.Control.MiniMap=r(L),i.L.control.minimap=function(e,t){return new i.L.Control.MiniMap(e,t)})},{leaflet:473}],18:[function(n,r,e){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t;if("function"==typeof define&&define.amd)define(["leaflet"],e);else if("object"===(void 0===r?"undefined":i(r))&&"object"===i(r.exports))t=n("leaflet"),r.exports=e(t);else{if(void 0===window.L)throw"Leaflet must be loaded first";e(window.L)}}(function(a){return a.Playback=a.Playback||{},a.Playback.Util=a.Class.extend({statics:{DateStr:function(e){return new Date(e).toLocaleDateString()},TimeStr:function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),o=e/1e3,a="AM";return 11<n&&(n%=12,a="PM"),0===n&&(n=12),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i+(o-Math.floor(o)).toFixed(2).slice(1)+" "+a},ParseGPX:function(e){for(var t={type:"FeatureCollection",features:[]},n=$.parseXML(e),r=$(n).find("trk"),i=0,o=r.length;i<o;i++){var a=r[i],s={type:"Feature",geometry:{type:"MultiPoint",coordinates:[]},properties:{trk:{},time:[],speed:[],altitude:[],bbox:[]}};s.properties.trk.name=$(a).find("name").text(),s.properties.trk.desc=$(a).find("desc").text(),s.properties.trk.type=$(a).find("type").text(),s.properties.trk.src=$(a).find("src").text();for(var l=$(a).find("trkpt"),u=0,c=l.length;u<c;u++){var h=l[u],f=parseFloat(h.getAttribute("lat")),d=parseFloat(h.getAttribute("lon")),p=$(h).find("time").text(),m=$(h).find("ele").text(),g=new Date(p).getTime(),y=parseFloat(m),_=s.geometry.coordinates,v=s.properties.time,b=s.properties.altitude;_.push([d,f]),v.push(g),b.push(y)}t.features.push(s)}return t}}}),a.Playback=a.Playback||{},a.Playback.MoveableMarker=a.Marker.extend({initialize:function(e,t,n){var r=t.marker||{};this.label_latlng=t.label_latlng,this.label_latlng_precision=t.label_latlng_precision,jQuery.isFunction(r)&&(r=r(n)),a.Marker.prototype.initialize.call(this,e,r),this.popupContent="",this.feature=n,this.is_init_popup=r.is_init_popup,r.getPopup&&(this.popupContent=r.getPopup(n)),t.popups&&this.bindPopup(this.getPopupContent()+e.toString(),{autoClose:t.popups_autoClose,closeOnClick:t.popups_autoClose,autoPan:!1,className:"playback-popup"}),t.tooltips&&this.bindTooltip(this.getPopupContent(),{offset:t.tooltipOffset}),this.on("add",function(){console.log("marker added!"),r.is_init_popup&&this.togglePopup()},this)},getPopupContent:function(){return""!==this.popupContent?"<b>"+this.popupContent+"</b><br/>":""},move:function(e,t){if(a.DomUtil.TRANSITION&&(this._icon&&(this._icon.style[a.DomUtil.TRANSITION]="all "+t+"ms linear",this._popup&&this._popup._wrapper&&(this._popup._wrapper.style[a.DomUtil.TRANSITION]="all "+t+"ms linear")),this._shadow&&(this._shadow.style[a.DomUtil.TRANSITION]="all "+t+"ms linear")),this.setLatLng(e),this._popup){var n=this._latlng.lng.toFixed(this.label_latlng_precision),r=this._latlng.lat.toFixed(this.label_latlng_precision);this._popup.setContent(this.getPopupContent()+this.label_latlng+": "+n+", "+r)}},_old__setPos:a.Marker.prototype._setPos,_updateImg:function(e,t,n){var r="";r+=" translate("+-(t=a.point(n).divideBy(2)._subtract(a.point(t))).x+"px, "+-t.y+"px)",r+=" rotate("+this.options.iconAngle+"deg)",r+=" translate("+t.x+"px, "+t.y+"px)",e.style[a.DomUtil.TRANSFORM]+=r},setIconAngle:function(e){this.options.iconAngle=e,this._map&&this.update()},_setPos:function(e){if(this._icon&&(this._icon.style[a.DomUtil.TRANSFORM]=""),this._shadow&&(this._shadow.style[a.DomUtil.TRANSFORM]=""),this._old__setPos.apply(this,[e]),this.options.iconAngle){var t,n=this.options.icon.options.iconAnchor,r=this.options.icon.options.iconSize;this._icon&&(t=this._icon,this._updateImg(t,n,r)),this._shadow&&(r=this.options.icon.options.shadowSize,t=this._shadow,this._updateImg(t,n,r))}}}),a.Playback=a.Playback||{},a.Playback.Track=a.Class.extend({initialize:function(e,t){var n=(t=t||{}).tickLen||250;this._staleTime=t.staleTime||36e5,this._fadeMarkersWhenStale=t.fadeMarkersWhenStale||!1,this._geoJSON=e,this._tickLen=n,this._ticks=[],this._marker=null,this._orientations=[];var r,i=e.properties.time;this._orientIcon=t.orientIcons;var o,a,s=e.geometry.coordinates,l=s[0],u=s[1],c=i[0],h=c,f=i[1],d=h%n;if(1===i.length)return 0!==d&&(h+=n-d),this._ticks[h]=s[0],this._orientations[h]=0,this._startTime=h,void(this._endTime=h);for(r=(0!==d?(a=(o=n-d)/(f-c),h+=o,this._ticks[h]=this._interpolatePoint(l,u,a)):this._ticks[h]=l,this._orientations[h]=this._directionOfPoint(l,u),this._orientations[h]),this._startTime=h,h+=n;h<f;)a=(h-c)/(f-c),this._ticks[h]=this._interpolatePoint(l,u,a),this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h],h+=n;for(var p=1,m=s.length;p<m;p++)for(l=s[p],u=s[p+1],h=c=i[p],f=i[p+1],0!==(d=h%n)&&f?(a=(o=n-d)/(f-c),h+=o,this._ticks[h]=this._interpolatePoint(l,u,a)):this._ticks[h]=l,u?(this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h]):this._orientations[h]=r,h+=n;h<f;)a=(h-c)/(f-c),f-c>t.maxInterpolationTime?this._ticks[h]=l:this._ticks[h]=this._interpolatePoint(l,u,a),u?(this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h]):this._orientations[h]=r,h+=n;this._endTime=h-n,this._lastTick=this._ticks[this._endTime]},_interpolatePoint:function(t,n,r){try{var e=[n[0]-t[0],n[1]-t[1]],i=[e[0]*r,e[1]*r];return[t[0]+i[0],t[1]+i[1]]}catch(e){console.log("err: cant interpolate a point"),console.log(["start",t]),console.log(["end",n]),console.log(["ratio",r])}},_directionOfPoint:function(e,t){return this._getBearing(e[1],e[0],t[1],t[0])},_getBearing:function(e,t,n,r){e=this._radians(e),t=this._radians(t),n=this._radians(n);var i=(r=this._radians(r))-t,o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(e/2+Math.PI/4));return Math.abs(i)>Math.PI&&(i=0<i?-(2*Math.PI-i):2*Math.PI+i),(this._degrees(Math.atan2(i,o))+360)%360},_radians:function(e){return e*(Math.PI/180)},_degrees:function(e){return e*(180/Math.PI)},getFirstTick:function(){return this._ticks[this._startTime]},getLastTick:function(){return this._ticks[this._endTime]},getStartTime:function(){return this._startTime},getEndTime:function(){return this._endTime},getTickMultiPoint:function(){for(var e=this.getStartTime(),t=this.getEndTime(),n=[],r=[];e<=t;)r.push(e),n.push(this.tick(e)),e+=this._tickLen;return{type:"Feature",geometry:{type:"MultiPoint",coordinates:n},properties:{time:r}}},trackPresentAtTick:function(e){return e>=this._startTime},trackStaleAtTick:function(e){return this._endTime+this._staleTime<=e},tick:function(e){return e>this._endTime&&(e=this._endTime),e<this._startTime&&(e=this._startTime),this._ticks[e]},courseAtTime:function(e){return e>this._endTime&&(e=this._endTime),e<this._startTime&&(e=this._startTime),this._orientations[e]},setMarker:function(e,t){var n=null;if(n=e?this.tick(e):this.getFirstTick()){var r=new a.LatLng(n[1],n[0]);this._marker=new a.Playback.MoveableMarker(r,t,this._geoJSON),t.mouseOverCallback&&this._marker.on("mouseover",t.mouseOverCallback),t.clickCallback&&this._marker.on("click",t.clickCallback),this._fadeMarkersWhenStale&&!this.trackPresentAtTick(e)&&this._marker.setOpacity(0)}return this._marker},moveMarker:function(e,t,n){this._marker&&(this._fadeMarkersWhenStale&&(this.trackPresentAtTick(n)?this._marker.setOpacity(1):this._marker.setOpacity(0),this.trackStaleAtTick(n)&&this._marker.setOpacity(.25)),this._orientIcon&&this._marker.setIconAngle(this.courseAtTime(n)),this._marker.move(e,t))},getMarker:function(){return this._marker}}),a.Playback=a.Playback||{},a.Playback.TrackController=a.Class.extend({initialize:function(e,t,n){this.options=n||{},this._map=e,this._tracks=[],this.setTracks(t)},clearTracks:function(){for(;0<this._tracks.length;){var e=this._tracks.pop().getMarker();e&&this._map.removeLayer(e)}},setTracks:function(e){this.clearTracks(),this.addTracks(e)},addTracks:function(e){if(e)if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)this.addTrack(e[t]);else this.addTrack(e)},addTrack:function(e,t){if(e){var n=e.setMarker(t,this.options);n&&(n.addTo(this._map),this._tracks.push(e))}},tock:function(e,t){for(var n=0,r=this._tracks.length;n<r;n++){var i=this._tracks[n].tick(e),o=new a.LatLng(i[1],i[0]);this._tracks[n].moveMarker(o,t,e)}},getStartTime:function(){var e=0;if(0<this._tracks.length){e=this._tracks[0].getStartTime();for(var t=1,n=this._tracks.length;t<n;t++){var r=this._tracks[t].getStartTime();r<e&&(e=r)}}return e},getEndTime:function(){var e=0;if(0<this._tracks.length){e=this._tracks[0].getEndTime();for(var t=1,n=this._tracks.length;t<n;t++){var r=this._tracks[t].getEndTime();e<r&&(e=r)}}return e},getTracks:function(){return this._tracks}}),a.Playback=a.Playback||{},a.Playback.Clock=a.Class.extend({initialize:function(e,t,n){this._trackController=e,this._callbacksArry=[],t&&this.addCallback(t),a.setOptions(this,n),this._speed=this.options.speed,this._tickLen=this.options.tickLen,this._cursor=e.getStartTime(),this._transitionTime=this._tickLen/this._speed},_tick:function(e){e._cursor>e._trackController.getEndTime()?clearInterval(e._intervalID):(e._trackController.tock(e._cursor,e._transitionTime),e._callbacks(e._cursor),e._cursor+=e._tickLen)},_callbacks:function(e){for(var t=this._callbacksArry,n=0,r=t.length;n<r;n++)t[n](e)},addCallback:function(e){this._callbacksArry.push(e)},start:function(){this._intervalID||(this._intervalID=window.setInterval(this._tick,this._transitionTime,this))},stop:function(){this._intervalID&&(clearInterval(this._intervalID),this._intervalID=null)},getSpeed:function(){return this._speed},isPlaying:function(){return!!this._intervalID},setSpeed:function(e){this._speed=e,this._transitionTime=this._tickLen/e,this._intervalID&&(this.stop(),this.start())},setCursor:function(e){var t=parseInt(e);if(t){var n=t%this._tickLen;0!==n&&(t+=this._tickLen-n),this._cursor=t,this._trackController.tock(this._cursor,0),this._callbacks(this._cursor)}},getTime:function(){return this._cursor},getStartTime:function(){return this._trackController.getStartTime()},getEndTime:function(){return this._trackController.getEndTime()},getTickLen:function(){return this._tickLen}}),a.Playback=a.Playback||{},a.Playback.TracksLayer=a.Class.extend({initialize:function(e,t){var n=t.layer||{};jQuery.isFunction(n)&&(n=n(feature)),n.pointToLayer||(n.pointToLayer=function(e,t){return new a.CircleMarker(t,{radius:5})}),this.layer=new a.GeoJSON(null,n);this.control=a.control.layers(null,{},{collapsed:!1,position:t.tracksLayerPosition}),this.control.addOverlay(this.layer,t.label_gpsTrack),this.control.addTo(e),a.DomUtil.addClass(this.control._container,"leaflet-playback-tracklayer")},clearLayer:function(){for(var e in this.layer._layers)this.layer.removeLayer(this.layer._layers[e])},addLayer:function(e){this.layer.addData(e)},toggle:function(){this.control&&$(this.control._container).toggle(500)}}),a.Playback=a.Playback||{},a.Playback.DateControl=a.Control.extend({options:{position:"bottomleft",dateFormatFn:a.Playback.Util.DateStr,timeFormatFn:a.Playback.Util.TimeStr},initialize:function(e,t){a.setOptions(this,t),this.playback=e},onAdd:function(e){this._container=a.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded"),a.DomUtil.addClass(this._container,"leaflet-playback-datecontrol"),a.DomEvent.disableClickPropagation(this._container);var t=this,n=this.playback,r=n.getTime(),i=a.DomUtil.create("div","datetimeControl",this._container);return this._date=a.DomUtil.create("p","",i),this._time=a.DomUtil.create("p","",i),this._date.innerHTML=this.options.dateFormatFn(r),this._time.innerHTML=this.options.timeFormatFn(r),n.addCallback(function(e){t._date.innerHTML=t.options.dateFormatFn(e),t._time.innerHTML=t.options.timeFormatFn(e)}),this._container}}),a.Playback.PlayControl=a.Control.extend({options:{position:"bottomright"},initialize:function(e){this.playback=e},onAdd:function(e){this._container=a.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded"),a.DomUtil.addClass(this._container,"leaflet-playback-playcontrol"),a.DomEvent.disableClickPropagation(this._container);var t=this,n=this.playback;n.setSpeed(this.playback._speed);var r=a.DomUtil.create("div","playControl",this._container);this._button=a.DomUtil.create("button","",r),this._button.innerHTML=t.options.label_play;var i=a.DomEvent.stopPropagation;return a.DomEvent.on(this._button,"click",i).on(this._button,"mousedown",i).on(this._button,"dblclick",i).on(this._button,"click",a.DomEvent.preventDefault).on(this._button,"click",function(){n.isPlaying()?(n.stop(),t._button.innerHTML=t.options.label_play):(n.start(),t._button.innerHTML=t.options.label_stop)},this),this._container}}),a.Playback.SliderControl=a.Control.extend({options:{position:"bottomleft"},initialize:function(e){this.playback=e},onAdd:function(e){this._container=a.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded"),a.DomUtil.addClass(this._container,"leaflet-playback-slidercontrol"),a.DomEvent.disableClickPropagation(this._container);var t=this,n=this.playback;this._slider=a.DomUtil.create("input","slider",this._container),this._slider.type="range",this._slider.min=n.getStartTime(),this._slider.max=n.getEndTime(),this._slider.value=n.getTime();var r=a.DomEvent.stopPropagation;function i(e){var t=Number(e.target.value);n.setCursor(t)}return a.DomEvent.on(this._slider,"click",r).on(this._slider,"mousedown",r).on(this._slider,"dblclick",r).on(this._slider,"click",a.DomEvent.preventDefault).on(this._slider,"change",i,this).on(this._slider,"mousemove",i,this),n.addCallback(function(e){t._slider.value=e}),e.on("playback:add_tracks",function(){t._slider.min=n.getStartTime(),t._slider.max=n.getEndTime(),t._slider.value=n.getTime()}),this._container}}),a.Playback=a.Playback.Clock.extend({statics:{MoveableMarker:a.Playback.MoveableMarker,Track:a.Playback.Track,TrackController:a.Playback.TrackController,Clock:a.Playback.Clock,Util:a.Playback.Util,TracksLayer:a.Playback.TracksLayer,PlayControl:a.Playback.PlayControl,DateControl:a.Playback.DateControl,SliderControl:a.Playback.SliderControl},options:{tickLen:250,speed:1,maxInterpolationTime:3e5,tracksLayer:!0,playControl:!1,dateControl:!1,sliderControl:!1,popups:!0,popups_autoClose:!1,tooltips:!1,tracksLayerPosition:"bottomleft",playControlPosition:"bottomleft",dateControlPosition:"bottomleft",sliderControlPosition:"bottomleft",label_play:"Run Track",label_stop:"Stop Track",label_gpsTrack:"GPS Track",label_latlng:"LngLat",label_latlng_precision:4,tooltipOffset:[0,-24],layer:{},marker:{}},initialize:function(e,t,n,r){a.setOptions(this,r),this._map=e,this._trackController=new a.Playback.TrackController(e,null,this.options),a.Playback.Clock.prototype.initialize.call(this,this._trackController,n,this.options),this.options.tracksLayer&&(r.tracksLayerPosition=this.options.tracksLayerPosition,r.label_gpsTrack=this.options.label_gpsTrack,this._tracksLayer=new a.Playback.TracksLayer(e,r)),this.setData(t),this.options.playControl&&(this.playControl=new a.Playback.PlayControl(this),this.playControl.options.position=this.options.playControlPosition,this.playControl.options.label_play=this.options.label_play,this.playControl.options.label_stop=this.options.label_stop,this.playControl.addTo(e)),this.options.sliderControl&&(this.sliderControl=new a.Playback.SliderControl(this),this.sliderControl.options.position=this.options.sliderControlPosition,this.sliderControl.addTo(e)),this.options.dateControl&&(this.dateControl=new a.Playback.DateControl(this,r),this.dateControl.options.position=this.options.dateControlPosition,this.dateControl.addTo(e))},clearData:function(){this._trackController.clearTracks(),this._tracksLayer&&this._tracksLayer.clearLayer()},setData:function(e){this.clearData(),this._checkGeoJSON(e),this.addData(e,this.getTime()),this.setCursor(this.getStartTime())},addData:function(e,t){if(e){if(e instanceof Array)for(var n=0,r=e.length;n<r;n++)this._trackController.addTrack(new a.Playback.Track(e[n],this.options),t);else if("FeatureCollection"==e.type)for(n=0,r=e.features.length;n<r;n++)this._trackController.addTrack(new a.Playback.Track(e.features[n],this.options),t);else this._trackController.addTrack(new a.Playback.Track(e,this.options),t);this._map.fire("playback:set:data"),this.options.tracksLayer&&this._tracksLayer.addLayer(e)}},destroy:function(){this.clearData(),this.playControl&&this._map.removeControl(this.playControl),this.sliderControl&&this._map.removeControl(this.sliderControl),this.dateControl&&this._map.removeControl(this.dateControl)},toggle:function(){this._tracksLayer&&this._tracksLayer.toggle(),this.playControl&&$(this.playControl._container).toggle(500),this.sliderControl&&$(this.sliderControl._container).toggle(500),this.dateControl&&$(this.dateControl._container).toggle(500)},_checkGeoJSON:function(e){if(e instanceof Array){for(var t=0,n=e.length;t<n;t++)if(!this._checkGeoJSON(e[t]))return!1;return!0}return e.geometry&&e.geometry.coordinates?e.properties&&e.properties.time?e.geometry.coordinates.length===e.properties.time.length||(console.error("playback geojson: the count of geometry.coordinates must be same with the count of properties.time!"),!1):(console.error("playback geojson must have properties.time!"),!1):(console.error("playback geojson must have geometry.coordinates!"),!1)}}),a.Map.addInitHook(function(){this.options.playback&&(this.playback=new a.Playback(this))}),a.playback=function(e,t,n,r){return new a.Playback(e,t,n,r)},a.Playback})},{leaflet:473}],19:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(f){function d(t){var n=f("");try{n=f(t).clone()}catch(e){n=f("<span />").html(t)}return n}function p(t,e,n){var r=f.Deferred();try{var i=(t=t.contentWindow||t.contentDocument||t).document||t.contentDocument||t;n.doctype&&i.write(n.doctype),i.write(e),i.close();var o=!1,a=function(){if(!o){t.focus();try{t.document.execCommand("print",!1,null)||t.print(),f("body").focus()}catch(e){t.print()}t.close(),o=!0,r.resolve()}};f(t).on("load",a),setTimeout(a,n.timeout)}catch(e){r.reject(e)}return r}function m(e,t){return p(window.open(),e,t).always(function(){try{t.deferred.resolve()}catch(e){console.warn("Error notifying deferred",e)}})}function g(e){return!!("object"===("undefined"==typeof Node?"undefined":r(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":r(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}f.print=f.fn.print=function(){var t,e,n=this;n instanceof f&&(n=n.get(0)),g(n)?(e=f(n),0<arguments.length&&(t=arguments[0])):0<arguments.length?g((e=f(arguments[0]))[0])?1<arguments.length&&(t=arguments[1]):(t=arguments[0],e=f("html")):e=f("html");var r={globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:f.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"};t=f.extend({},r,t||{});var i=f("");t.globalStyles?i=f("style, link, meta, base, title"):t.mediaPrint&&(i=f("link[media=print]")),t.stylesheet&&(i=f.merge(i,f('<link rel="stylesheet" href="'+t.stylesheet+'">')));var o=e.clone();if((o=f("<span/>").append(o)).find(t.noPrintSelector).remove(),o.append(i.clone()),t.title){var a=f("title",o);0===a.length&&(a=f("<title />"),o.append(a)),a.text(t.title)}o.append(d(t.append)),o.prepend(d(t.prepend)),t.manuallyCopyFormValues&&(o.find("input").each(function(){var e=f(this);e.is("[type='radio']")||e.is("[type='checkbox']")?e.prop("checked")&&e.attr("checked","checked"):e.attr("value",e.val())}),o.find("select").each(function(){f(this).find(":selected").attr("selected","selected")}),o.find("textarea").each(function(){var e=f(this);e.text(e.val())}));var s,l,u,c,h=o.html();try{t.deferred.notify("generated_markup",h,o)}catch(e){console.warn("Error notifying deferred",e)}if(o.remove(),t.iframe)try{s=h,u=f((l=t).iframe+""),0===(c=u.length)&&(u=f('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})),p(u.get(0),s,l).done(function(){setTimeout(function(){0===c&&u.remove()},1e3)}).fail(function(e){console.error("Failed to print from iframe",e),m(s,l)}).always(function(){try{l.deferred.resolve()}catch(e){console.warn("Error notifying deferred",e)}})}catch(e){console.error("Failed to print from iframe",e.stack,e.message),m(h,t)}else m(h,t);return this}}(jQuery)},{}],20:[function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(o){Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};var e,a="rangeslider",s=0,l=((e=document.createElement("input")).setAttribute("type","range"),"text"!==e.type),u={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},c={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function n(e,t){var n=function(e){for(var t,n=[],r=e.parentNode;(t=r)&&(0===t.offsetWidth||0===t.offsetHeight||!1===t.open);)n.push(r),r=r.parentNode;return n}(e),r=n.length,i=[],o=e[t];function a(e){void 0!==e.open&&(e.open=!e.open)}if(r){for(var s=0;s<r;s++)i[s]=n[s].style.cssText,n[s].style.setProperty?n[s].style.setProperty("display","block","important"):n[s].style.cssText+=";display: block !important",n[s].style.height="0",n[s].style.overflow="hidden",n[s].style.visibility="hidden",a(n[s]);o=e[t];for(var l=0;l<r;l++)n[l].style.cssText=i[l],a(n[l])}return o}function r(e,t){var n=parseFloat(e);return Number.isNaN(n)?t:n}function i(e){return e.charAt(0).toUpperCase()+e.substr(1)}function h(e,t){if(this.$window=o(window),this.$document=o(document),this.$element=o(e),this.options=o.extend({},u,t),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=c.orientation[this.orientation].dimension,this.DIRECTION=c.orientation[this.orientation].direction,this.DIRECTION_STYLE=c.orientation[this.orientation].directionStyle,this.COORDINATE=c.orientation[this.orientation].coordinate,this.polyfill&&l)return!1;this.identifier="js-"+a+"-"+s++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=o('<div class="'+this.options.fillClass+'" />'),this.$handle=o('<div class="'+this.options.handleClass+'" />'),this.$range=o('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=o.proxy(this.handleDown,this),this.handleMove=o.proxy(this.handleMove,this),this.handleEnd=o.proxy(this.handleEnd,this),this.init();var n,r,i=this;this.$window.on("resize."+this.identifier,(n=function(){!function(e,t){var n=Array.prototype.slice.call(arguments,2);setTimeout(function(){return e.apply(null,n)},t)}(function(){i.update(!1,!1)},300)},r=(r=20)||100,function(){if(!n.debouncing){var e=Array.prototype.slice.apply(arguments);n.lastReturnVal=n.apply(window,e),n.debouncing=!0}return clearTimeout(n.debounceTimeout),n.debounceTimeout=setTimeout(function(){n.debouncing=!1},r),n.lastReturnVal})),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){if(!t||t.origin!==i.identifier){var n=e.target.value,r=i.getPositionFromValue(n);i.setPosition(r)}})}return h.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},h.prototype.update=function(e,t){(e=e||!1)&&(this.min=r(this.$element[0].getAttribute("min"),0),this.max=r(this.$element[0].getAttribute("max"),100),this.value=r(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=r(this.$element[0].getAttribute("step"),1)),this.handleDimension=n(this.$handle[0],"offset"+i(this.DIMENSION)),this.rangeDimension=n(this.$range[0],"offset"+i(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,t)},h.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),!(-1<(" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))){var t=this.getRelativePosition(e),n=this.$range[0].getBoundingClientRect()[this.DIRECTION],r=this.getPositionFromNode(this.$handle[0])-n,i="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;this.setPosition(i),r<=t&&t<r+this.handleDimension&&(this.grabPos=t-r)}},h.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(e),n="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;this.setPosition(n)},h.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(e,t,n){return e<t?t:n<e?n:e},h.prototype.setPosition=function(e,t){var n,r;void 0===t&&(t=!0),n=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos)),r=this.getPositionFromValue(n),this.$fill[0].style[this.DIMENSION]=r+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=r+"px",this.setValue(n),this.position=r,this.value=n,t&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(r,n)},h.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},h.prototype.getRelativePosition=function(e){var t=i(this.COORDINATE),n=this.$range[0].getBoundingClientRect()[this.DIRECTION],r=0;return void 0!==e.originalEvent["client"+t]?r=e.originalEvent["client"+t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0]["client"+t]?r=e.originalEvent.touches[0]["client"+t]:e.currentPoint&&void 0!==e.currentPoint[this.COORDINATE]&&(r=e.currentPoint[this.COORDINATE]),r-n},h.prototype.getPositionFromValue=function(e){var t;return t=(e-this.min)/(this.max-this.min),Number.isNaN(t)?0:t*this.maxHandlePos},h.prototype.getValueFromPosition=function(e){var t,n;return t=e/(this.maxHandlePos||1),n=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(n.toFixed(this.toFixed))},h.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},h.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+a),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},o.fn[a]=function(n){var r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o(this),t=e.data("plugin_"+a);t||e.data("plugin_"+a,t=new h(this,n)),"string"==typeof n&&t[n].apply(t,r)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"},"function"==typeof define&&define.amd?define(["jquery"],r):"object"===(void 0===n?"undefined":i(n))?t.exports=r(e("jquery")):r(jQuery)},{jquery:432}],21:[function(e,t,n){"use strict";L.Control.GraphicScale=L.Control.extend({options:{position:"bottomleft",updateWhenIdle:!1,minUnitWidth:30,maxUnitsWidth:240,fill:!1,showSubunits:!1,doubleLine:!1,labelPlacement:"auto"},onAdd:function(e){return this._map=e,this._possibleUnitsNum=[3,5,2,4],this._possibleUnitsNumLen=this._possibleUnitsNum.length,this._possibleDivisions=[1,.5,.25,.2],this._possibleDivisionsLen=this._possibleDivisions.length,this._possibleDivisionsSub={1:{num:2,division:.5},.5:{num:5,division:.1},.25:{num:5,division:.05},.2:{num:2,division:.1}},this._scaleInner=this._buildScale(),this._scale=this._addScale(this._scaleInner),this._setStyle(this.options),e.on(this.options.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),this._scale},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScale:function(e){var t=L.DomUtil.create("div");return t.className="leaflet-control-graphicscale",t.appendChild(e),t},_setStyle:function(e){var t=["leaflet-control-graphicscale-inner"];e.fill&&"nofill"!==e.fill&&(t.push("filled"),t.push("filled-"+e.fill)),e.showSubunits&&t.push("showsubunits"),e.doubleLine&&t.push("double"),t.push("labelPlacement-"+e.labelPlacement),this._scaleInner.className=t.join(" ")},_buildScale:function(){var e=document.createElement("div");e.className="leaflet-control-graphicscale-inner";var t=L.DomUtil.create("div","subunits",e),n=L.DomUtil.create("div","units",e);this._units=[],this._unitsLbls=[],this._subunits=[];for(var r=0;r<5;r++){var i=this._buildDivision(r%2==0);n.appendChild(i),this._units.push(i);var o=this._buildDivisionLbl();i.appendChild(o),this._unitsLbls.push(o);var a=this._buildDivision(r%2==1);t.appendChild(a),this._subunits.unshift(a)}return this._zeroLbl=L.DomUtil.create("div","label zeroLabel"),this._zeroLbl.innerHTML="0",this._units[0].appendChild(this._zeroLbl),this._subunitsLbl=L.DomUtil.create("div","label subunitsLabel"),this._subunitsLbl.innerHTML="?",this._subunits[4].appendChild(this._subunitsLbl),e},_buildDivision:function(e){var t=L.DomUtil.create("div","division"),n=L.DomUtil.create("div","line");t.appendChild(n);var r=L.DomUtil.create("div","line2");return t.appendChild(r),e&&n.appendChild(L.DomUtil.create("div","fill")),e||r.appendChild(L.DomUtil.create("div","fill")),t},_buildDivisionLbl:function(){return L.DomUtil.create("div","label divisionLabel")},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180)*Math.abs(e.getNorthEast().lng-e.getSouthWest().lng)/180;0<this._map.getSize().x&&0<n&&this._updateScale(n,this.options)},_updateScale:function(e,t){var n=this._getBestScale(e,t.minUnitWidth,t.maxUnitsWidth);this._render(n)},_getBestScale:function(e,t,n){var r=this._getPossibleUnits(e,t,this._map.getSize().x),i=this._getPossibleScales(r,n);i.sort(function(e,t){return t.score-e.score});var o=i[0];return o.subunits=this._getSubunits(o),o},_getSubunits:function(e){var t=this._possibleDivisionsSub[e.unit.unitDivision],n={};return n.subunitDivision=t.division,n.subunitMeters=t.division*(e.unit.unitMeters/e.unit.unitDivision),n.subunitPx=t.division*(e.unit.unitPx/e.unit.unitDivision),{subunit:n,numSubunits:t.num,total:t.num*n.subunitMeters}},_getPossibleScales:function(e,t){for(var n,r=[],i=Number.POSITIVE_INFINITY,o=0;o<this._possibleUnitsNumLen;o++)for(var a=this._possibleUnitsNum[o],s=.5*(this._possibleUnitsNumLen-o),l=0;l<e.length;l++){var u=e[l],c=u.unitPx*a,h={unit:u,totalWidthPx:c,numUnits:a,score:0},f=1-(t-c)/t;f*=3;var d=u.unitScore+s+f;(.25===u.unitDivision&&3===a||.5===u.unitDivision&&3===a||.25===u.unitDivision&&5===a)&&(d-=2),h.score=d,c<t&&r.push(h),c<i&&(i=c,n=h)}return r.length||r.push(n),r},_getPossibleUnits:function(e,t,n){for(var r,i=[],o=(Math.floor(e)+"").length;0<o;o--){r=Math.pow(10,o);for(var a=0;a<this._possibleDivisionsLen;a++){var s=r*this._possibleDivisions[a],l=n*(s/e);if(l<t)return i;i.push({unitMeters:s,unitPx:l,unitDivision:this._possibleDivisions[a],unitScore:this._possibleDivisionsLen-a})}}return i},_render:function(e){this._renderPart(e.unit.unitPx,e.unit.unitMeters,e.numUnits,this._units,this._unitsLbls),this._renderPart(e.subunits.subunit.subunitPx,e.subunits.subunit.subunitMeters,e.subunits.numSubunits,this._subunits);var t=this._getDisplayUnit(e.subunits.total);this._subunitsLbl.innerHTML=""+t.amount+t.unit},_renderPart:function(e,t,n,r,i){for(var o=this._getDisplayUnit(t),a=0;a<this._units.length;a++){var s=r[a];if(a<n?(s.style.width=e+"px",s.className="division"):(s.style.width=0,s.className="division hidden"),i){var l=i[a],u=["label","divisionLabel"];if(a<n){var c=(a+1)*o.amount;a===n-1?(c+=o.unit,u.push("labelLast")):u.push("labelSub"),l.innerHTML=c}l.className=u.join(" ")}}},_getDisplayUnit:function(e){var t=e<1e3?"m":"km";return{unit:t,amount:"km"===t?e/1e3:e}}}),L.Map.mergeOptions({graphicScaleControl:!1}),L.Map.addInitHook(function(){this.options.graphicScaleControl&&(this.graphicScaleControl=new L.Control.GraphicScale,this.addControl(this.graphicScaleControl))}),L.control.graphicScale=function(e){return new L.Control.GraphicScale(e)}},{}],22:[function(e,t,n){"use strict";L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{position:"left"},initialize:function(e,t){var n,r;for(L.setOptions(this,t),this._sidebar=L.DomUtil.get(e),L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),n=this._sidebar.children.length-1;0<=n;n--)"DIV"==(r=this._sidebar.children[n]).tagName&&L.DomUtil.hasClass(r,"sidebar-content")&&(this._container=r);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),n=this._tabitems.length-1;0<=n;n--)this._tabitems[n]._sidebar=this;for(this._panes=[],this._closeButtons=[],n=this._container.children.length-1;0<=n;n--)if("DIV"==(r=this._container.children[n]).tagName&&L.DomUtil.hasClass(r,"sidebar-pane")){this._panes.push(r);for(var i=r.querySelectorAll(".sidebar-close"),o=0,a=i.length;o<a;o++)this._closeButtons.push(i[o])}},addTo:function(e){var t,n;for(this._map=e,t=this._tabitems.length-1;0<=t;t--){var r=(n=this._tabitems[t]).querySelector("a");r.hasAttribute("href")&&"#"==r.getAttribute("href").slice(0,1)&&L.DomEvent.on(r,"click",L.DomEvent.preventDefault).on(r,"click",this._onClick,n)}for(t=this._closeButtons.length-1;0<=t;t--)n=this._closeButtons[t],L.DomEvent.on(n,"click",this._onCloseClick,this);return this},removeFrom:function(e){console.log("removeFrom() has been deprecated, please use remove() instead as support for this function will be ending soon."),this.remove(e)},remove:function(e){var t,n;for(this._map=null,t=this._tabitems.length-1;0<=t;t--)n=this._tabitems[t],L.DomEvent.off(n.querySelector("a"),"click",this._onClick);for(t=this._closeButtons.length-1;0<=t;t--)n=this._closeButtons[t],L.DomEvent.off(n,"click",this._onCloseClick,this);return this},open:function(e){var t,n;for(t=this._panes.length-1;0<=t;t--)(n=this._panes[t]).id==e?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");for(t=this._tabitems.length-1;0<=t;t--)(n=this._tabitems[t]).querySelector("a").hash=="#"+e?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");return this.fire("content",{id:e}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),this._hidePanes(!0,!0),this._hidePanes(!1),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var e=this._tabitems.length-1;0<=e;e--){var t=this._tabitems[e];L.DomUtil.hasClass(t,"active")&&L.DomUtil.removeClass(t,"active")}if(!L.DomUtil.hasClass(this._sidebar,"collapsed")){this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed"),this._hidePanes(!0);var n=this;setTimeout(function(){n._hidePanes(!1)},500)}return this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()},_hidePanes:function(e,t){var n;for(n=this._panes.length-1;0<=n;n--){var r=this._panes[n];e?t?L.DomUtil.addClass(r,"hide-sidebar-pane-immediately"):L.DomUtil.addClass(r,"hide-sidebar-pane"):(L.DomUtil.hasClass(r,"hide-sidebar-pane")&&L.DomUtil.removeClass(r,"hide-sidebar-pane"),L.DomUtil.hasClass(r,"hide-sidebar-pane-immediately")&&L.DomUtil.removeClass(r,"hide-sidebar-pane-immediately"))}}}),L.control.sidebar=function(e,t){return new L.Control.Sidebar(e,t)}},{}],23:[function(e,t,n){"use strict";L.Control.Sidebar_v0=L.Control.extend({includes:L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0,type:"s"},initialize:function(e,t){L.setOptions(this,t);var n=this._contentContainer=L.DomUtil.get(e);n.parentNode.removeChild(n);var r="leaflet-",i=this._container=L.DomUtil.create("div",r+"sidebar-"+this.options.type+" sidebar-"+this.options.position);(L.DomUtil.addClass(n,r+"control"),i.appendChild(n),this.options.closeButton)&&((this._closeButton=L.DomUtil.create("a","close",i)).innerHTML="&times;")},addTo:function(e){var t=this._container,n=this._contentContainer;if(this.options.closeButton){var r=this._closeButton;L.DomEvent.on(r,"click",this.hide,this)}L.DomEvent.on(t,"transitionend",this._handleTransitionEvent,this).on(t,"webkitTransitionEnd",this._handleTransitionEvent,this);var i=e._controlContainer;i.insertBefore(t,i.firstChild),this._map=e;var o=L.DomEvent.stopPropagation,a=L.DomEvent._fakeStop||o;return L.DomEvent.on(n,"contextmenu",o).on(n,"click",a).on(n,"mousedown",o).on(n,"touchstart",o).on(n,"dblclick",a).on(n,"mousewheel",o).on(n,"MozMousePixelScroll",o),this},removeFrom:function(e){this.hide();var t=this._container,n=this._contentContainer;e._controlContainer.removeChild(t),this._map=null;var r=L.DomEvent.stopPropagation,i=L.DomEvent._fakeStop||r;if(L.DomEvent.off(n,"contextmenu",r).off(n,"click",i).off(n,"mousedown",r).off(n,"touchstart",r).off(n,"dblclick",i).off(n,"mousewheel",r).off(n,"MozMousePixelScroll",r),L.DomEvent.off(t,"transitionend",this._handleTransitionEvent,this).off(t,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var o=this._closeButton;L.DomEvent.off(o,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(e){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),e&&L.DomEvent.stopPropagation(e)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(e){var t=this.getContainer();if("string"==typeof e)t.innerHTML=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e)}return this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(e){"left"!=e.propertyName&&"right"!=e.propertyName||this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar_v0=function(e,t){return new L.Control.Sidebar_v0(e,t)}},{}],24:[function(e,t,n){var r=".leaflet-sbs-range{position:absolute;top:50%;width:100%;z-index:999}.leaflet-sbs-divider{position:absolute;top:0;bottom:0;left:50%;margin-left:-2px;width:4px;background-color:#fff;pointer-events:none;z-index:999}.leaflet-sbs-divider-vertical{position:absolute;bottom:0;left:0;top:50%;margin-top:-2px;height:4px;background-color:#fff;pointer-events:none;z-index:999}";e("browserify-css").createStyle(r,{href:"libs\\controls\\sidebyside\\layout.css"},{insertAt:"bottom"}),t.exports=r},{"browserify-css":91}],25:[function(e,t,n){"use strict";var i=e("leaflet");e("./layout.css"),e("./range.css");var r,o;function a(t,e,n,r){e.split(" ").forEach(function(e){i.DomEvent.on(t,e,n,r)})}function s(t,e,n,r){e.split(" ").forEach(function(e){i.DomEvent.off(t,e,n,r)})}function l(e){return"oninput"in e?"input":"change"}function u(){r=this._map.dragging.enabled(),o=this._map.tap&&this._map.tap.enabled(),this._map.dragging.disable(),this._map.tap&&this._map.tap.disable()}function c(e){this._refocusOnMap(e),r&&this._map.dragging.enable(),o&&this._map.tap.enable()}function h(e){return"undefined"===e?[]:Array.isArray(e)?e:[e]}i.Control.SideBySide=i.Control.extend({options:{thumbSize:40,padding:0,orientation:"horizontal"},initialize:function(e,t,n){this.setLeftLayers(e),this.setRightLayers(t),i.setOptions(this,n)},getPosition:function(){if("vertical"===this.options.orientation){var e=this._range.value/1e3,t=(.5-e)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().y*e+t}var n=this._range.value/1e3,r=(.5-n)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().x*n+r},setPosition:function(){},includes:i.Mixin.Events,addTo:function(n){this.remove(),this._map=n;var e=this._container=i.DomUtil.create("div","leaflet-sbs",n._container);e.style.position="relative",e.style.height="100%","vertical"===this.options.orientation?this._divider=i.DomUtil.create("div","leaflet-sbs-divider-vertical",e):this._divider=i.DomUtil.create("div","leaflet-sbs-divider",e);var t=this._range=i.DomUtil.create("input","",e);t.type="range",t.min=1,t.max=1e3,t.step=1,t.value=this.options.init_value?this.options.init_value:500,t.style.paddingLeft=t.style.paddingRight=this.options.padding+"px","vertical"===this.options.orientation&&t.setAttribute("data-orientation","vertical"),t.setAttribute("id","sidebyside-range"),t.setAttribute("data-rangeslider","");var r=this;return $("#sidebyside-range").rangeslider({polyfill:!1,onInit:function(){},onSlide:function(e,t){r._updateClip(),n.dragging.disable(),n.tap&&n.tap.disable()},onSlideEnd:function(e,t){n.dragging.enable(),n.tap&&n.tap.enable()}}),this._addEvents(),this._updateLayers(),this},remove:function(){if(!this._map)return this;if(this._leftLayers)for(var e=this._leftLayers,t=0;t<e.length;t++)e[t].getContainer().style.clip="";if(this._rightLayers)for(var n=this._rightLayers,r=0;r<n.length;r++)n[r].getContainer().style.clip="";return this._removeEvents(),i.DomUtil.remove(this._container),this._map=null,this},setLeftLayers:function(e){return this._leftLayers=h(e),this._updateLayers(),this},setRightLayers:function(e){return this._rightLayers=h(e),this._updateLayers(),this},_updateClip:function(){var e=this._map;if(!(this._leftLayers&&this._rightLayers&&0<this._leftLayers.length&&0<this._rightLayers.length))return console.log("_leftLayers.length:"+this._leftLayers.length+" _rightLayers.length:"+this._rightLayers.length),void this.fire("needbind",this);if("vertical"===this.options.orientation){var t=e.containerPointToLayerPoint([0,0]),n=e.containerPointToLayerPoint(e.getSize()),r=n.y-this.getPosition(),i=n.y-this.getPosition();this._divider.style.top=i+"px",this.fire("dividermove",{y:i});var o="rect("+[t.y,n.x,r,t.x].join("px,")+"px)",a="rect("+[r,n.x,n.y,t.x].join("px,")+"px)";if(this._leftLayers)for(var s=this._leftLayers,l=0;l<s.length;l++)s[l].getContainer().style.clip=o;if(this._rightLayers)for(var u=this._rightLayers,c=0;c<u.length;c++)u[c].getContainer().style.clip=a}else{var h=e.containerPointToLayerPoint([0,0]),f=e.containerPointToLayerPoint(e.getSize()),d=h.x+this.getPosition(),p=this.getPosition();this._divider.style.left=p+"px",this.fire("dividermove",{x:p});var m="rect("+[h.y,d,f.y,h.x].join("px,")+"px)",g="rect("+[h.y,f.x,f.y,d].join("px,")+"px)";if(this._leftLayers)for(var y=this._leftLayers,_=0;_<y.length;_++)y[_].getContainer().style.clip=m;if(this._rightLayers)for(var v=this._rightLayers,b=0;b<v.length;b++)v[b].getContainer().style.clip=g}},_updateLayers:function(){if(!this._map)return this;this._updateClip()},_addEvents:function(){var e=this._range,t=this._map;t&&e&&(t.on("move",this._updateClip,this),a(e,l(e),this._updateClip,this),a(e,i.Browser.touch?"touchstart":"mousedown",u,this),a(e,i.Browser.touch?"touchend":"mouseup",c,this))},_removeEvents:function(){var e=this._range,t=this._map;e&&(s(e,l(e),this._updateClip,this),s(e,i.Browser.touch?"touchstart":"mousedown",u,this),s(e,i.Browser.touch?"touchend":"mouseup",c,this)),t&&t.off("move",this._updateClip,this)}}),i.control.sideBySide=function(e,t,n){return new i.Control.SideBySide(e,t,n)},t.exports=i.Control.SideBySide},{"./layout.css":24,"./range.css":26,leaflet:473}],26:[function(e,t,n){var r=".leaflet-sbs-range{-webkit-appearance:none;display:inline-block!important;vertical-align:middle;height:0;padding:0;margin:0;border:0;background:rgba(0,0,0,.25);min-width:100px;cursor:pointer;pointer-events:none;z-index:999}.leaflet-sbs-range::-ms-fill-upper{background:0 0}.leaflet-sbs-range::-ms-fill-lower{background:rgba(255,255,255,.25)}.leaflet-sbs-range::-moz-range-track{opacity:0}.leaflet-sbs-range::-ms-track{opacity:0}.leaflet-sbs-range::-ms-tooltip{display:none}.leaflet-sbs-range::-webkit-slider-thumb{-webkit-appearance:none;margin:0;padding:0;background:#fff;height:40px;width:40px;border-radius:20px;cursor:ew-resize;pointer-events:auto;border:1px solid #ddd;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC);background-position:50% 50%;background-repeat:no-repeat;background-size:40px 40px}.leaflet-sbs-range::-ms-thumb{margin:0;padding:0;background:#fff;height:40px;width:40px;border-radius:20px;cursor:ew-resize;pointer-events:auto;border:1px solid #ddd;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC);background-position:50% 50%;background-repeat:no-repeat;background-size:40px 40px}.leaflet-sbs-range::-moz-range-thumb{padding:0;right:0;background:#fff;height:40px;width:40px;border-radius:20px;cursor:ew-resize;pointer-events:auto;border:1px solid #ddd;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC);background-position:50% 50%;background-repeat:no-repeat;background-size:40px 40px}.leaflet-sbs-range:disabled::-moz-range-thumb{cursor:default}.leaflet-sbs-range:disabled::-ms-thumb{cursor:default}.leaflet-sbs-range:disabled::-webkit-slider-thumb{cursor:default}.leaflet-sbs-range:disabled{cursor:default}.leaflet-sbs-range:focus{outline:0!important}.leaflet-sbs-range::-moz-focus-outer{border:0}";e("browserify-css").createStyle(r,{href:"libs\\controls\\sidebyside\\range.css"},{insertAt:"bottom"}),t.exports=r},{"browserify-css":91}],27:[function(e,t,n){"use strict";var r,i=e("../../../src/kq"),o=(r=i)&&r.__esModule?r:{default:r};var a=e("leaflet"),s=o.default.Local.Control.styleEditor;a.styleEditorLocal={buttonTitle:s.buttonTitle(),icon:s.icon(),size:s.size(),color:s.color(),lineStroke:s.lineStroke(),opacity:s.opacity(),fillColor:s.fillColor(),fillOpacity:s.fillOpacity(),tooltip:s.tooltip(),tooltipNext:s.tooltipNext(),buffer:{type:s.buffer.type(),length:s.buffer.length(),unit:s.buffer.unit(),buffer:s.buffer.buffer(),outer:s.buffer.outer(),inner:s.buffer.inner(),left:s.buffer.left(),right:s.buffer.right(),both:s.buffer.both(),msgLengthTooLong:s.buffer.msgLengthTooLong()}}},{"../../../src/kq":729,leaflet:473}],28:[function(n,r,e){"use strict";!function(e){var t;if("function"==typeof define&&define.amd)define(["leaflet"],e);else if(void 0!==r)t=n("leaflet"),r.exports=e(t);else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");e(window.L)}}(function(o){var t;o.Control.Zoomslider=(t=o.Draggable.extend({initialize:function(e,t,n){o.Draggable.prototype.initialize.call(this,e,e),this._element=e,this._stepHeight=t,this._knobHeight=n,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(e){var t=Math.round(this._toValue(e));return t=Math.max(0,Math.min(this._maxValue,t)),this._toY(t)},_toY:function(e){return this._k*e+this._m},_toValue:function(e){return(e-this._m)/this._k},setSteps:function(e){var t=e*this._stepHeight;this._maxValue=e-1,this._k=-this._stepHeight,this._m=t-(this._stepHeight+this._knobHeight)/2},setPosition:function(e){o.DomUtil.setPosition(this._element,o.point(0,this._adjust(e)))},setValue:function(e){this.setPosition(this._toY(e))},getValue:function(){return this._toValue(o.DomUtil.getPosition(this._element).y)}}),o.Control.extend({options:{position:"topleft",stepHeight:8,knobHeight:6,styleNS:"leaflet-control-zoomslider",zoomInTitle:"Zoom in",zoomOutTitle:"Zoom out"},onAdd:function(e){return this._map=e,this._ui=this._createUI(),this._knob=new t(this._ui.knob,this.options.stepHeight,this.options.knobHeight),e.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this).whenReady(this._updateDisabled,this),this._ui.bar},onRemove:function(e){e.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this).off("zoomend zoomlevelschange",this._updateDisabled,this)},_createUI:function(){var e={},t=this.options.styleNS;return e.bar=o.DomUtil.create("div",t+" leaflet-bar"),e.zoomIn=this._createZoomBtn("in","top",e.bar),e.wrap=o.DomUtil.create("div",t+"-wrap leaflet-bar-part",e.bar),e.zoomOut=this._createZoomBtn("out","bottom",e.bar),e.body=o.DomUtil.create("div",t+"-body",e.wrap),e.knob=o.DomUtil.create("div",t+"-knob"),o.DomEvent.disableClickPropagation(e.bar),o.DomEvent.disableClickPropagation(e.knob),e},_createZoomBtn:function(e,t,n){var r=this.options.styleNS+"-"+e+" leaflet-bar-part leaflet-bar-part-"+t,i=o.DomUtil.create("a",r,n);return i.href="#",i.title="in"===e?this.options.zoomInTitle:this.options.zoomOutTitle,o.DomEvent.on(i,"click",o.DomEvent.preventDefault),i},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this).on("zoomend zoomlevelschange",this._updateDisabled,this),o.DomEvent.on(this._ui.body,"click",this._onSliderClick,this),o.DomEvent.on(this._ui.zoomIn,"click",this._zoomIn,this),o.DomEvent.on(this._ui.zoomOut,"click",this._zoomOut,this),this._knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(e){var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=o.DomEvent.getMousePosition(t,this._ui.body).y;this._knob.setPosition(n),this._updateMapZoom()},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_zoomLevels:function(){var e=this._map.getMaxZoom()-this._map.getMinZoom()+1;return e<1/0?e:0},_toZoomLevel:function(e){return e+this._map.getMinZoom()},_toValue:function(e){return e-this._map.getMinZoom()},_updateSize:function(){var e=this._zoomLevels();this._ui.body.style.height=this.options.stepHeight*e+"px",this._knob.setSteps(e)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var e=this._map.getZoom(),t=this.options.styleNS+"-disabled";o.DomUtil.removeClass(this._ui.zoomIn,t),o.DomUtil.removeClass(this._ui.zoomOut,t),e===this._map.getMinZoom()&&o.DomUtil.addClass(this._ui.zoomOut,t),e===this._map.getMaxZoom()&&o.DomUtil.addClass(this._ui.zoomIn,t)}})),o.Map.addInitHook(function(){this.options.zoomsliderControl&&(this.zoomsliderControl=new o.Control.Zoomslider,this.addControl(this.zoomsliderControl))}),o.control.zoomslider=function(e){return new o.Control.Zoomslider(e)}})},{leaflet:473}],29:[function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"===(void 0===t?"undefined":i(t))&&r?r=t.exports:"undefined"!=typeof window&&(r=window.eviltransform={});var g=6378137;function s(e,t){return t<72.004||137.8347<t||(e<.8293||55.8271<e)}function o(e,t){var n,r,i,o,a,s,l,u,c,h=.006693421622965943,f=(i=(n=t-105)*(r=e-35),o=Math.sqrt(Math.abs(n)),a=n*Math.PI,s=r*Math.PI,l=20*Math.sin(6*a)+20*Math.sin(2*a),c=u=l,u+=20*Math.sin(s)+40*Math.sin(s/3),c+=20*Math.sin(a)+40*Math.sin(a/3),u+=160*Math.sin(s/12)+320*Math.sin(s/30),c+=150*Math.sin(a/12)+300*Math.sin(a/30),u*=2/3,c*=2/3,{lat:u+=2*n-100+3*r+.2*r*r+.1*i+.2*o,lng:c+=300+n+2*r+.1*n*n+.1*i+.1*o}),d=e/180*Math.PI,p=Math.sin(d);p=1-h*p*p;var m=Math.sqrt(p);return f.lat=180*f.lat/(g*(1-h)/(p*m)*Math.PI),f.lng=180*f.lng/(g/m*Math.cos(d)*Math.PI),f}function l(e,t){if(s(e,t))return{lat:e,lng:t};var n=o(e,t);return{lat:e+n.lat,lng:t+n.lng}}function a(e,t){if(s(e,t))return{lat:e,lng:t};var n=o(e,t);return{lat:e-n.lat,lng:t-n.lng}}function u(e,t){if(s(e,t))return{lat:e,lng:t};var n=t,r=e,i=Math.sqrt(n*n+r*r)+2e-5*Math.sin(r*Math.PI),o=Math.atan2(r,n)+3e-6*Math.cos(n*Math.PI),a=i*Math.cos(o)+.0065;return{lat:i*Math.sin(o)+.006,lng:a}}function c(e,t){if(s(e,t))return{lat:e,lng:t};var n=t-.0065,r=e-.006,i=Math.sqrt(n*n+r*r)-2e-5*Math.sin(r*Math.PI),o=Math.atan2(r,n)-3e-6*Math.cos(n*Math.PI),a=i*Math.cos(o);return{lat:i*Math.sin(o),lng:a}}r.wgs2gcj=l,r.gcj2wgs=a,r.gcj2wgs_exact=function(e,t){for(var n=e,r=t,i=n,o=r,a=0;a<30;a++){var s=l(i=n,o=r);if(n-=e-s.lat,r-=t-s.lng,Math.max(Math.abs(i-n),Math.abs(o-r))<1e-6)break}return{lat:n,lng:r}},r.distance=function(e,t,n,r){var i=Math.PI/180,o=e*i,a=n*i,s=Math.cos(o)*Math.cos(a)*Math.cos((t-r)*i)+Math.sin(o)*Math.sin(a);return 1<s&&(s=1),s<-1&&(s=-1),Math.acos(s)*g},r.gcj2bd=u,r.bd2gcj=c,r.wgs2bd=function(e,t){var n=l(e,t);return u(n.lat,n.lng)},r.bd2wgs=function(e,t){var n=c(e,t);return a(n.lat,n.lng)}},{}],30:[function(e,t,n){"use strict";var r,i;i=function(){var e,h,t,l={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},u=(e=function(e){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=e.xField||e.defaultXField,this._yField=e.yField||e.defaultYField,this._valueField=e.valueField||e.defaultValueField,e.radius&&(this._cfgRadius=e.radius)},h=l.defaultRadius,e.prototype={_organiseData:function(e,t){var n=e[this._xField],r=e[this._yField],i=this._radi,o=this._data,a=this._max,s=this._min,l=e[this._valueField]||1,u=e.radius||this._cfgRadius||h;o[n]||(o[n]=[],i[n]=[]),o[n][r]?o[n][r]+=l:(o[n][r]=l,i[n][r]=u);var c=o[n][r];return a<c?(t?this.setDataMax(c):this._max=c,!1):c<s?(t?this.setDataMin(c):this._min=c,!1):{x:n,y:r,value:l,radius:u,min:s,max:a}},_unOrganizeData:function(){var e=[],t=this._data,n=this._radi;for(var r in t)for(var i in t[r])e.push({x:r,y:i,radius:n[r][i],value:t[r][i]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var e=arguments[0],t=e.length;t--;)this.addData.call(this,e[t]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(e){var t=e.data,n=t.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(t[r],!1);return this._max=e.max,this._min=e.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(e){return this._max=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(e){return this._min=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(e){this._coordinator=e},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e),n=function(){var o=function(e){var t=e.gradient||e.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in t)i.addColorStop(o,t[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},m=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e,o=e;if(n.width=n.height=2*e,1==t)r.beginPath(),r.arc(i,o,e,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var a=r.createRadialGradient(i,o,e*t,i,o,e);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=a,r.fillRect(0,0,2*e,2*e)}return n};function e(e){var t=e.container,n=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=e.canvas||document.createElement("canvas"),i=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});r.className="heatmap-canvas",this._width=r.width=n.width=e.width||+i.width.replace(/px/,""),this._height=r.height=n.height=e.height||+i.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",t.style.position="relative",t.appendChild(r),this._palette=o(e),this._templates={},this._setStyles(e)}return e.prototype={renderPartial:function(e){0<e.data.length&&(this._drawAlpha(e),this._colorize())},renderAll:function(e){this._clear(),0<e.data.length&&(this._drawAlpha(function(e){for(var t=[],n=e.min,r=e.max,i=e.radi,o=(e=e.data,Object.keys(e)),a=o.length;a--;)for(var s=o[a],l=Object.keys(e[s]),u=l.length;u--;){var c=l[u],h=e[s][c],f=i[s][c];t.push({x:s,y:c,value:h,radius:f})}return{min:n,max:r,data:t}}(e)),this._colorize())},_updateGradient:function(e){this._palette=o(e)},updateConfig:function(e){e.gradient&&this._updateGradient(e),this._setStyles(e)},setDimensions:function(e,t){this._width=e,this._height=t,this.canvas.width=this.shadowCanvas.width=e,this.canvas.height=this.shadowCanvas.height=t},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(e){this._blur=0==e.blur?0:e.blur||e.defaultBlur,e.backgroundColor&&(this.canvas.style.backgroundColor=e.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=e.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=e.height||this._height,this._opacity=255*(e.opacity||0),this._maxOpacity=255*(e.maxOpacity||e.defaultMaxOpacity),this._minOpacity=255*(e.minOpacity||e.defaultMinOpacity),this._useGradientOpacity=!!e.useGradientOpacity},_drawAlpha:function(e){for(var t=this._min=e.min,n=this._max=e.max,r=(e=e.data||[]).length,i=1-this._blur;r--;){var o,a=e[r],s=a.x,l=a.y,u=a.radius,c=Math.min(a.value,n),h=s-u,f=l-u,d=this.shadowCtx;this._templates[u]?o=this._templates[u]:this._templates[u]=o=m(u,i);var p=(c-t)/(n-t);d.globalAlpha=p<.01?.01:p,d.drawImage(o,h,f),h<this._renderBoundaries[0]&&(this._renderBoundaries[0]=h),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),h+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=h+2*u),f+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*u)}},_colorize:function(){var e=this._renderBoundaries[0],t=this._renderBoundaries[1],n=this._renderBoundaries[2]-e,r=this._renderBoundaries[3]-t,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;e<0&&(e=0),t<0&&(t=0),i<e+n&&(n=i-e),o<t+r&&(r=o-t);for(var c=this.shadowCtx.getImageData(e,t,n,r),h=c.data,f=h.length,d=this._palette,p=3;p<f;p+=4){var m,g=h[p],y=4*g;if(y)m=0<a?a:g<s?g<l?l:g:s,h[p-3]=d[y],h[p-2]=d[y+1],h[p-1]=d[y+2],h[p]=u?d[y+3]:m}c.data=h,this.ctx.putImageData(c,e,t),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(e){var t=this.shadowCtx.getImageData(e.x,e.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(t/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},e}(),c=(t=!1,"canvas2d"===l.defaultRenderer&&(t=n),t),f=function(){for(var e={},t=arguments.length,n=0;n<t;n++){var r=arguments[n];for(var i in r)e[i]=r[i]}return e},r=function(){var s=function(){function e(){this.cStore={}}return e.prototype={on:function(e,t,n){var r=this.cStore;r[e]||(r[e]=[]),r[e].push(function(e){return t.call(n,e)})},emit:function(e,t){var n=this.cStore;if(n[e])for(var r=n[e].length,i=0;i<r;i++){(0,n[e][i])(t)}}},e}();function e(){var t,e,n,r,i=this._config=f(l,arguments[0]||{});if(this._coordinator=new s,i.plugin){var o=i.plugin;if(!l.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var a=l.plugins[o];this._renderer=new a.renderer(i),this._store=new a.store(i)}else this._renderer=new c(i),this._store=new u(i);e=(t=this)._renderer,n=t._coordinator,r=t._store,n.on("renderpartial",e.renderPartial,e),n.on("renderall",e.renderAll,e),n.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),r.setCoordinator(n)}return e.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(e){return this._config=f(this._config,e),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(e){return this._store.getValueAt?this._store.getValueAt(e):this._renderer.getValueAt?this._renderer.getValueAt(e):null}},e}();return{create:function(e){return new r(e)},register:function(e,t){l.plugins[e]=t}}},(r=void 0)!==t&&t.exports?t.exports=i():"function"==typeof define&&define.amd?define(i):r.h337=i()},{}],31:[function(r,i,e){"use strict";!function(e,t,n){if(void 0!==i&&i.exports)i.exports=n(r("heatmap.js"),r("leaflet"));else if("function"==typeof define&&define.amd)define(["heatmap.js","leaflet"],n);else{if(void 0===window.h337)throw new Error("heatmap.js must be loaded before the leaflet heatmap plugin");if(void 0===window.L)throw new Error("Leaflet must be loaded before the leaflet heatmap plugin");t.HeatmapOverlay=n(window.h337,window.L)}}(0,void 0,function(n,l){void 0===l.Layer&&(l.Layer=l.Class);var t=l.Layer.extend({initialize:function(e){this.cfg=e,this._el=l.DomUtil.create("div","leaflet-zoom-hide"),this._data=[],this._max=1,this._min=0,this.cfg.container=this._el},onAdd:function(e){var t=e.getSize();this._map=e,this._width=t.x,this._height=t.y,this._el.style.width=t.x+"px",this._el.style.height=t.y+"px",this._el.style.position="absolute",this._origin=this._map.layerPointToLatLng(new l.Point(0,0)),e.getPanes().overlayPane.appendChild(this._el),this._heatmap||(this._heatmap=n.create(this.cfg)),e.on("moveend",this._reset,this),this._draw()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._el),e.off("moveend",this._reset,this)},_draw:function(){if(this._map){var e=this._map.getPanes().mapPane._leaflet_pos;this._el.style[t.CSS_TRANSFORM]="translate("+-Math.round(e.x)+"px,"+-Math.round(e.y)+"px)",this._update()}},_update:function(){var e,t,n={max:this._max,min:this._min,data:[]};if(this._map.getBounds(),e=this._map.getZoom(),t=Math.pow(2,e),0!=this._data.length){for(var r=[],i=this.cfg.scaleRadius?t:1,o=0,a=0,s=this.cfg.valueField,l=this._data.length;l--;){var u=this._data[l],c=u[s],h=u.latlng;o=Math.max(c,o),a=Math.min(c,a);var f,d=this._map.latLngToContainerPoint(h),p={x:Math.round(d.x),y:Math.round(d.y)};p[s]=c,f=u.radius?u.radius*i:(this.cfg.radius||2)*i,p.radius=f,r.push(p)}this.cfg.useLocalExtrema&&(n.max=o,n.min=a),n.data=r,this._heatmap.setData(n)}else this._heatmap&&this._heatmap.setData(n)},setData:function(e){this._max=e.max||this._max,this._min=e.min||this._min;for(var t=this.cfg.latField||"lat",n=this.cfg.lngField||"lng",r=this.cfg.valueField||"value",i=(e=e.data).length,o=[];i--;){var a=e[i],s={latlng:new l.LatLng(a[t],a[n])};s[r]=a[r],a.radius&&(s.radius=a.radius),o.push(s)}this._data=o,this._draw()},addData:function(e){if(0<e.length)for(var t=e.length;t--;)this.addData(e[t]);else{var n=this.cfg.latField||"lat",r=this.cfg.lngField||"lng",i=this.cfg.valueField||"value",o=e,a={latlng:new l.LatLng(o[n],o[r])};a[i]=o[i],this._max=Math.max(this._max,a[i]),this._min=Math.min(this._min,a[i]),o.radius&&(a.radius=o.radius),this._data.push(a),this._draw()}},_reset:function(){this._origin=this._map.layerPointToLatLng(new l.Point(0,0));var e=this._map.getSize();this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._el.style.width=this._width+"px",this._el.style.height=this._height+"px",this._heatmap._renderer.setDimensions(this._width,this._height)),this._draw()}});return t.CSS_TRANSFORM=function(){for(var e=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++){var r=t[n];if(void 0!==e.style[r])return r}return t[0]}(),t})},{"heatmap.js":426,leaflet:473}],32:[function(h,n,r){(function(t){"use strict";var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"===(void 0===r?"undefined":N(r))&&void 0!==n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).html2canvas=e()}}(function(){return function o(a,s,l){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof h&&h;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return u(t||e)},i,i.exports,o,a,s,l)}return s[n].exports}for(var c="function"==typeof h&&h,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,O,D){(function(I){!function(e){var t="object"==(void 0===D?"undefined":N(D))&&D&&!D.nodeType&&D,n="object"==(void 0===O?"undefined":N(O))&&O&&!O.nodeType&&O,r="object"==(void 0===I?"undefined":N(I))&&I;r.global!==r&&r.window!==r&&r.self!==r||(e=r);var i,o,y=2147483647,_=36,v=1,b=26,a=38,s=700,w=72,x=128,k="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=_-v,L=Math.floor,C=String.fromCharCode;function S(e){throw new RangeError(h[e])}function d(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function p(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+d((e=e.replace(c,".")).split("."),t).join(".")}function M(e){for(var t,n,r=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function P(e){return d(e,function(e){var t="";return 65535<e&&(t+=C((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=C(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function T(e,t,n){var r=0;for(e=n?L(e/s):e>>1,e+=L(e/t);f*b>>1<e;r+=_)e=L(e/f);return L(r+(f+1)*e/(e+a))}function m(e){var t,n,r,i,o,a,s,l,u,c,h,f=[],d=e.length,p=0,m=x,g=w;for((n=e.lastIndexOf(k))<0&&(n=0),r=0;r<n;++r)128<=e.charCodeAt(r)&&S("not-basic"),f.push(e.charCodeAt(r));for(i=0<n?n+1:0;i<d;){for(o=p,a=1,s=_;d<=i&&S("invalid-input"),h=e.charCodeAt(i++),(_<=(l=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:_)||l>L((y-p)/a))&&S("overflow"),p+=l*a,!(l<(u=s<=g?v:g+b<=s?b:s-g));s+=_)a>L(y/(c=_-u))&&S("overflow"),a*=c;g=T(p-o,t=f.length+1,0==o),L(p/t)>y-m&&S("overflow"),m+=L(p/t),p%=t,f.splice(p++,0,m)}return P(f)}function g(e){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g=[];for(f=(e=M(e)).length,t=x,o=w,a=n=0;a<f;++a)(h=e[a])<128&&g.push(C(h));for(r=i=g.length,i&&g.push(k);r<f;){for(s=y,a=0;a<f;++a)t<=(h=e[a])&&h<s&&(s=h);for(s-t>L((y-n)/(d=r+1))&&S("overflow"),n+=(s-t)*d,t=s,a=0;a<f;++a)if((h=e[a])<t&&++n>y&&S("overflow"),h==t){for(l=n,u=_;!(l<(c=u<=o?v:o+b<=u?b:u-o));u+=_)m=l-c,p=_-c,g.push(C(E(c+m%p,0))),l=L(m/p);g.push(C(E(l,0))),o=T(n,d,r==i),n=0,++r}++n,++t}return g.join("")}if(i={version:"1.4.1",ucs2:{decode:M,encode:P},decode:m,encode:g,toASCII:function(e){return p(e,function(e){return u.test(e)?"xn--"+g(e):e})},toUnicode:function(e){return p(e,function(e){return l.test(e)?m(e.slice(4).toLowerCase()):e})}},t&&n)if(O.exports==t)n.exports=i;else for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);else e.punycode=i}(this)}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var i=e("./log");function h(e,t){for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;)!0!==t&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(h(r,t)),r=r.nextSibling;return 1===e.nodeType&&(n._scrollTop=e.scrollTop,n._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){i("Unable to copy canvas content from",t,e)}}(e,n):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value)),n}t.exports=function(o,e,t,n,a,s,l){var u=h(o.documentElement,a.javascriptEnabled),c=e.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=t,c.height=n,c.scrolling="no",e.body.appendChild(c),new Promise(function(t){var e,n,r,i=c.contentWindow.document;c.contentWindow.onload=c.onload=function(){var e=setInterval(function(){0<i.body.childNodes.length&&(!function e(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var n=t.firstChild;n;)e(n),n=n.nextSibling}}(i.documentElement),clearInterval(e),"view"===a.type&&(c.contentWindow.scrollTo(s,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||c.contentWindow.scrollY===l&&c.contentWindow.scrollX===s||(i.documentElement.style.top=-l+"px",i.documentElement.style.left=-s+"px",i.documentElement.style.position="absolute")),t(c))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),n=s,r=l,!(e=o).defaultView||n===e.defaultView.pageXOffset&&r===e.defaultView.pageYOffset||e.defaultView.scrollTo(n,r),i.replaceChild(i.adoptNode(u),i.documentElement),i.close()})}},{"./log":13}],3:[function(e,t,n){function r(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}r.prototype.darken=function(e){var t=1-e;return new r([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),3<e.length&&(this.a=e[3])),Array.isArray(e)};var i=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(e){var t;return null!==(t=e.match(i))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var o=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(e){var t;return null!==(t=e.match(a))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(e){var t;return null!==(t=e.match(s))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(e){e=e.toLowerCase();var t=l[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},r.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=r},{}],4:[function(e,t,n){var f=e("./support"),d=e("./renderers/canvas"),p=e("./imageloader"),m=e("./nodeparser"),r=e("./nodecontainer"),g=e("./log"),i=e("./utils"),y=e("./clone"),_=e("./proxy").loadUrlDocument,v=i.getBounds,b="data-html2canvas-node",w=0;function o(e,t){var n,r,i=w++;if((t=t||{}).logging&&(g.options.logging=!0,g.options.start=Date.now()),t.async=void 0===t.async||t.async,t.allowTaint=void 0!==t.allowTaint&&t.allowTaint,t.removeContainer=void 0===t.removeContainer||t.removeContainer,t.javascriptEnabled=void 0!==t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout=void 0===t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:d,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=t.width?t.width:window.innerWidth,a=null!=t.height?t.height:window.innerHeight;return _((n=e,r=document.createElement("a"),r.href=n,r.href=r.href,r),t.proxy,document,o,a,t).then(function(e){return x(e.contentWindow.document.documentElement,e,t,o,a)})}var s,l,u,c,h,f=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return f.setAttribute(b+i,i),(s=f.ownerDocument,l=t,u=f.ownerDocument.defaultView.innerWidth,c=f.ownerDocument.defaultView.innerHeight,h=i,y(s,s,u,c,l,s.defaultView.pageXOffset,s.defaultView.pageYOffset).then(function(e){g("Document cloned");var t=b+h,n="["+t+"='"+h+"']";s.querySelector(n).removeAttribute(t);var r=e.contentWindow,i=r.document.querySelector(n),o="function"==typeof l.onclone?Promise.resolve(l.onclone(r.document)):Promise.resolve(!0);return o.then(function(){return x(i,e,l,u,c)})})).then(function(e){return"function"==typeof t.onrendered&&(g("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}o.CanvasRenderer=d,o.NodeContainer=r,o.log=g,o.utils=i;var a="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:o;function x(n,r,i,e,t){var o=r.contentWindow,a=new f(o.document),s=new p(i,a),l=v(n),u="view"===i.type?e:l.right+1,c="view"===i.type?t:l.bottom+1,h=new i.renderer(u,c,s,i,document);return new m(n,h,a,s,i).ready.then(function(){var e,t;return g("Finished rendering"),e="view"===i.type?k(h.canvas,{width:h.canvas.width,height:h.canvas.height,top:0,left:0,x:0,y:0}):n===o.document.body||n===o.document.documentElement||null!=i.canvas?h.canvas:k(h.canvas,{width:null!=i.width?i.width:l.width,height:null!=i.height?i.height:l.height,top:l.top,left:l.left,x:0,y:0}),t=r,i.removeContainer&&(t.parentNode.removeChild(t),g("Cleaned up container")),e})}function k(e,t){var n=document.createElement("canvas"),r=Math.min(e.width-1,Math.max(0,t.left)),i=Math.min(e.width,Math.max(1,t.left+t.width)),o=Math.min(e.height-1,Math.max(0,t.top)),a=Math.min(e.height,Math.max(1,t.top+t.height));n.width=t.width,n.height=t.height;var s=i-r,l=a-o;return g("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",s,"height:",l),g("Resulting crop with width",t.width,"and height",t.height,"with x",r,"and y",o),n.getContext("2d").drawImage(e,r,o,s,l,t.x,t.y,s,l),n}t.exports=a},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,t,n){var r=e("./log"),i=e("./utils").smallImage;t.exports=function e(t){if(this.src=t,r("DummyImageContainer for",t),!this.promise||!this.image){r("Initiating DummyImageContainer"),e.prototype.image=new Image;var n=this.image;e.prototype.promise=new Promise(function(e,t){n.onload=e,n.onerror=t,n.src=i(),!0===n.complete&&e(n)})}}},{"./log":13,"./utils":26}],6:[function(e,t,n){var l=e("./utils").smallImage;t.exports=function(e,t){var n,r,i=document.createElement("div"),o=document.createElement("img"),a=document.createElement("span"),s="Hidden Text";i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),o.src=l(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin=0,a.style.padding=0,a.appendChild(document.createTextNode(s)),i.appendChild(a),i.appendChild(o),n=o.offsetTop-a.offsetTop+1,i.removeChild(a),i.appendChild(document.createTextNode(s)),i.style.lineHeight="normal",o.style.verticalAlign="super",r=o.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=n,this.lineWidth=1,this.middle=r}},{"./utils":26}],7:[function(e,t,n){var r=e("./font");function i(){this.data={}}i.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new r(e,t)),this.data[e+"-"+t]},t.exports=i},{"./font":6}],8:[function(o,e,t){var a=o("./utils").getBounds,i=o("./proxy").loadUrlDocument;function n(t,e,n){this.image=null,this.src=t;var r=this,i=a(t);this.promise=(e?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(n.proxy,i,n)).then(function(e){return o("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(e){return r.image=e})}n.prototype.proxyLoad=function(e,t,n){var r=this.src;return i(r.src,e,r.ownerDocument,t.width,t.height,n)},e.exports=n},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,t,n){function r(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,t.exports=r},{}],10:[function(e,t,n){t.exports=function(n,r){this.src=n,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(e,t){i.image.onload=e,i.image.onerror=t,r&&(i.image.crossOrigin="anonymous"),i.image.src=n,!0===i.image.complete&&e(i.image)})}},{}],11:[function(e,t,n){var o=e("./log"),r=e("./imagecontainer"),i=e("./dummyimagecontainer"),a=e("./proxyimagecontainer"),s=e("./framecontainer"),l=e("./svgcontainer"),u=e("./svgnodecontainer"),c=e("./lineargradientcontainer"),h=e("./webkitgradientcontainer"),f=e("./utils").bind;function d(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}d.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},d.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},d.prototype.addImage=function(n,r){return function(t){t.args.forEach(function(e){this.imageExists(n,e)||(n.splice(0,0,r.call(this,t)),o("Added image #"+n.length,"string"==typeof e?e.substring(0,100):e))},this)}},d.prototype.hasImageBackground=function(e){return"none"!==e.method},d.prototype.loadImage=function(e){if("url"!==e.method)return"linear-gradient"===e.method?new c(e):"gradient"===e.method?new h(e):"svg"===e.method?new u(e.args[0],this.support.svg):"IFRAME"===e.method?new s(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new i(e);var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new r(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new r(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(t,!0):this.options.proxy?new a(t,this.options.proxy):new i(t):new l(t)},d.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||l.prototype.isInline(e)},d.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},d.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},d.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},d.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout).catch(function(){return new i(t.src).promise.then(function(e){t.image=e})})},d.prototype.get=function(t){var n=null;return this.images.some(function(e){return(n=e).src===t})?n:null},d.prototype.fetch=function(e){return this.images=e.reduce(f(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(t,n){t.promise.then(function(){o("Succesfully loaded image #"+(n+1),t)},function(e){o("Failed loading image #"+(n+1),t,e)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},d.prototype.timeout=function(n,r){var i,e=Promise.race([n.promise,new Promise(function(e,t){i=setTimeout(function(){o("Timed out loading image",n),t(n)},r)})]).then(function(e){return clearTimeout(i),e});return e.catch(function(){clearTimeout(i)}),e},t.exports=d},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,t,n){var i=e("./gradientcontainer"),o=e("./color");function r(e){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var t=r.REGEXP_DIRECTION.test(e.args[0])||!i.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=n;break;case"center":break;default:var i=.01*parseFloat(e,10);if(isNaN(i))break;0===t?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(i.REGEXP_COLORSTOP),n=+t[2],r=0===n?"%":t[3];return{color:new o(t[1]),stop:"%"===r?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(n,r){null===n.stop&&this.colorStops.slice(r).some(function(e,t){return null!==e.stop&&(n.stop=(e.stop-this.colorStops[r-1].stop)/(t+1)+this.colorStops[r-1].stop,!0)},this)},this)}r.prototype=Object.create(i.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,t.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(e,t,n){var r=function e(){e.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-e.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},t.exports=r},{}],14:[function(e,t,n){var o=e("./color"),r=e("./utils"),i=r.getBounds,a=r.parseBackgrounds,s=r.offsetBounds;function l(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function u(e){return-1!==e.toString().indexOf("%")}function c(e){return e.replace("px","")}function h(e){return parseFloat(e)}l.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},l.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},l.prototype.assignStack=function(e){(this.stack=e).children.push(this)},l.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},l.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},l.prototype.prefixedCss=function(t){var n=this.css(t);return void 0===n&&["webkit","moz","ms","o"].some(function(e){return void 0!==(n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)))},this),void 0===n?null:n},l.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},l.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},l.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new o(this.css(e)))},l.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},l.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},l.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},l.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=a(this.css("backgroundImage")))},l.prototype.cssList=function(e,t){var n=(this.css(e)||"").split(",");return 1===(n=(n=n[t||0]||n[0]||"auto").trim().split(" ")).length&&(n=[n[0],u(n[0])?"auto":n[0]]),n},l.prototype.parseBackgroundSize=function(e,t,n){var r,i,o=this.cssList("backgroundSize",n);if(u(o[0]))r=e.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var a=e.width/e.height,s=t.width/t.height;return a<s^"contain"===o[0]?{width:e.height*s,height:e.height}:{width:e.width,height:e.width/s}}r=parseInt(o[0],10)}return i="auto"===o[0]&&"auto"===o[1]?t.height:"auto"===o[1]?r/t.width*t.height:u(o[1])?e.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(r=i/t.height*t.width),{width:r,height:i}},l.prototype.parseBackgroundPosition=function(e,t,n,r){var i,o,a=this.cssList("backgroundPosition",n);return i=u(a[0])?(e.width-(r||t).width)*(parseFloat(a[0])/100):parseInt(a[0],10),o="auto"===a[1]?i/t.width*t.height:u(a[1])?(e.height-(r||t).height)*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(i=o/t.height*t.width),{left:i,top:o}},l.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},l.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var n=e.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);t.push({color:new o(i[0]),offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return t},l.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(c).map(h);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},l.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?function(e){{if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}}(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t||[1,0,0,1,0,0]}return this.transformMatrix},l.prototype.inverseTransform=function(){var e,t,n,r,i,o,a,s,l=this.parseTransform();return{origin:l.origin,matrix:(e=l.matrix,t=e[0],n=e[2],r=e[4],i=e[1],o=e[3],a=e[5],s=t*o-n*i,[o,-i,-n,t,n*a-r*o,r*i-t*a].map(function(e){return e/s}))}},l.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?s(this.node):i(this.node))},l.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},l.prototype.getValue=function(){var e,t,n=this.node.value||"";return"SELECT"===this.node.tagName?(e=this.node,n=(t=e.options[e.selectedIndex||0])&&t.text||""):"password"===this.node.type&&(n=Array(n.length+1).join("•")),0===n.length?this.node.placeholder||"":n},l.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,l.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,l.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,l.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=l},{"./color":3,"./utils":26}],15:[function(e,t,n){var s=e("./log"),l=e("punycode"),u=e("./nodecontainer"),f=e("./textcontainer"),d=e("./pseudoelementcontainer"),c=e("./fontmetrics"),h=e("./color"),p=e("./stackingcontext"),r=e("./utils"),m=r.bind,a=r.getBounds,g=r.parseBackgrounds,y=r.offsetBounds;function i(e,t,n,r,i){s("Starting NodeParser"),this.renderer=t,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new p(!0,1,e.ownerDocument,null);var o=new u(e,null);if(i.background&&t.rectangle(0,0,t.width,t.height,new h(i.background)),e===e.ownerDocument.documentElement){var a=new u(o.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,a.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=U([o].concat(this.getChildren(o)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new c,s("Fetched nodes, total:",this.nodes.length),s("Calculate overflow clips"),this.calculateOverflowClips(),s("Start fetching images"),this.images=r.fetch(this.nodes.filter(j)),this.ready=this.images.ready.then(m(function(){return s("Images loaded, starting parsing"),s("Creating stacking contexts"),this.createStackingContexts(),s("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),s("Render queue created with "+this.renderQueue.length+" items"),new Promise(m(function(e){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,e):0<this.renderQueue.length?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function o(e){return e.parent&&e.parent.clip.length}function _(){}i.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(j(e)){R(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],n=e.parseClip();n&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&t.push([["rect",e.bounds.left+n.left,e.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),e.clip=o(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,R(e)&&e.cleanDOM()}else B(e)&&(e.clip=o(e)?e.parent.clip:[]);R(e)||(e.bounds=null)},this)},i.prototype.asyncRenderer=function(e,t,n){n=n||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():n+20>Date.now()?this.asyncRenderer(e,t,n):setTimeout(m(function(){this.asyncRenderer(e,t)},this),0)},i.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},i.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},i.prototype.createStyles=function(e,t){var n=e.createElement("style");n.innerHTML=t,e.body.appendChild(n)},i.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(e,":before"),r=this.getPseudoElement(e,":after");n&&t.push(n),r&&t.push(r)}return U(t)},i.prototype.getPseudoElement=function(e,t){var n=e.computedStyle(t);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r,i,o=(r=n.content,(i=r.substr(0,1))===r.substr(r.length-1)&&i.match(/'|"/)?r.substr(1,r.length-2):r),a="url"===o.substr(0,3),s=document.createElement(a?"img":"html2canvaspseudoelement"),l=new d(s,e,t),u=n.length-1;0<=u;u--){var c=n.item(u).replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")});s.style[c]=n[c]}if(s.className=d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,a)return s.src=g(o)[0].args[0],[l];var h=document.createTextNode(o);return s.appendChild(h),[l,new f(h,l)]},i.prototype.getChildren=function(n){return U([].filter.call(n.node.childNodes,O).map(function(e){var t=[e.nodeType===Node.TEXT_NODE?new f(e,n):new u(e,n)].filter(q);return e.nodeType===Node.ELEMENT_NODE&&t.length&&"TEXTAREA"!==e.tagName?t[0].isElementVisible()?t.concat(this.getChildren(t[0])):[]:t},this))},i.prototype.newStackingContext=function(e,t){var n=new p(t,e.getOpacity(),e.node,e.parent);e.cloneTo(n),(t?n.getParentStack(this):n.parent.stack).contexts.push(n),e.stack=n},i.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){var t,n;j(e)&&(this.isRootElement(e)||e.getOpacity()<1||(n=(t=e).css("position"),"auto"!==(-1!==["absolute","relative","fixed"].indexOf(n)?t.css("zIndex"):"auto"))||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):j(e)&&(D(e)&&P(e)||-1!==["inline-block","inline-table"].indexOf(e.css("display"))||N(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},i.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},i.prototype.isRootElement=function(e){return null===e.parent},i.prototype.sortStackingContexts=function(e){var n;e.contexts.sort((n=e.contexts.slice(0),function(e,t){return e.cssInt("zIndex")+n.indexOf(e)/n.length-(t.cssInt("zIndex")+n.indexOf(t)/n.length)})),e.contexts.forEach(this.sortStackingContexts,this)},i.prototype.parseTextBounds=function(a){return function(e,t,n){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var r=n.slice(0,t).join("").length;return this.getRangeBounds(a.node,r,e.length)}if(a.node&&"string"==typeof a.node.data){var i=a.node.splitText(e.length),o=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=i,o}}else this.support.rangeBounds&&!a.parent.hasTransform()||(a.node=a.node.splitText(e.length));return{}}},i.prototype.getWrapperBounds=function(e,t){var n=e.ownerDocument.createElement("html2canvaswrapper"),r=e.parentNode,i=e.cloneNode(!0);n.appendChild(e.cloneNode(!0)),r.replaceChild(n,e);var o=t?y(n):a(n);return r.replaceChild(i,n),o},i.prototype.getRangeBounds=function(e,t,n){var r=this.range||(this.range=e.ownerDocument.createRange());return r.setStart(e,t),r.setEnd(e,t+n),r.getBoundingClientRect()},i.prototype.parse=function(e){var t=e.contexts.filter(S),n=e.children.filter(j),r=n.filter(A(N)),i=r.filter(A(D)).filter(A(E)),o=n.filter(A(D)).filter(N),a=r.filter(A(D)).filter(E),s=e.contexts.concat(r.filter(D)).filter(P),l=e.children.filter(B).filter(I),u=e.contexts.filter(M);t.concat(i).concat(o).concat(a).concat(s).concat(l).concat(u).forEach(function(e){this.renderQueue.push(e),T(e)&&(this.parse(e),this.renderQueue.push(new _))},this)},i.prototype.paint=function(e){try{e instanceof _?this.renderer.ctx.restore():B(e)?(R(e.parent)&&e.parent.appendToDOM(),this.paintText(e),R(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(s(e),this.options.strict)throw e}},i.prototype.paintNode=function(e){T(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},i.prototype.paintElement=function(n){var r=n.parseBounds();this.renderer.clip(n.backgroundClip,function(){this.renderer.renderBackground(n,r,n.borders.borders.map(z))},this,n),this.renderer.mask(n.backgroundClip,function(){this.renderer.renderShadows(n,n.borders.clip)},this,n),this.renderer.clip(n.clip,function(){this.renderer.renderBorders(n.borders.borders)},this,n),this.renderer.clip(n.backgroundClip,function(){switch(n.node.nodeName){case"svg":case"IFRAME":var e=this.images.get(n.node);e?this.renderer.renderImage(n,r,n.borders,e):s("Error loading <"+n.node.nodeName+">",n.node);break;case"IMG":var t=this.images.get(n.node.src);t?this.renderer.renderImage(n,r,n.borders,t):s("Error loading <img>",n.node.src);break;case"CANVAS":this.renderer.renderImage(n,r,n.borders,{image:n.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(n)}},this,n)},i.prototype.paintCheckbox=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height),r={width:n-1,height:n-1,top:t.top,left:t.left},i=[3,3],o=[i,i,i,i],a=[1,1,1,1].map(function(e){return{color:new h("#A5A5A5"),width:e}}),s=x(r,o,a);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new h("#DEDEDE")),this.renderer.renderBorders(b(a,r,s,o)),e.node.checked&&(this.renderer.font(new h("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",r.left+n/6,r.top+n-1))},this,e)},i.prototype.paintRadio=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,n,new h("#DEDEDE"),1,new h("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+n/4)+1,Math.ceil(t.top+n/4)+1,Math.floor(n/2),new h("#424242"))},this,e)},i.prototype.paintFormValue=function(t){var e=t.getValue();if(0<e.length){var n=t.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{r.style[e]=t.css(e)}catch(e){s("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var i=t.parseBounds();r.style.position="fixed",r.style.left=i.left+"px",r.style.top=i.top+"px",r.textContent=e,n.body.appendChild(r),this.paintText(new f(r.firstChild,t)),n.body.removeChild(r)}},i.prototype.paintText=function(n){n.applyTextTransform();var e,t=l.ucs2.decode(n.node.data),r=this.options.letterRendering&&!/^(normal|none|0px)$/.test(n.parent.css("letterSpacing"))||(e=n.node.data,/[^\u0000-\u00ff]/.test(e))?t.map(function(e){return l.ucs2.encode([e])}):function(e){var t,n=[],r=0,i=!1;for(;e.length;)o=e[r],-1!==[32,13,10,9,45].indexOf(o)===i?((t=e.splice(0,r)).length&&n.push(l.ucs2.encode(t)),i=!i,r=0):r++,r>=e.length&&(t=e.splice(0,r)).length&&n.push(l.ucs2.encode(t));var o;return n}(t),i=n.parent.fontWeight(),o=n.parent.css("fontSize"),a=n.parent.css("fontFamily"),s=n.parent.parseTextShadows();this.renderer.font(n.parent.color("color"),n.parent.css("fontStyle"),n.parent.css("fontVariant"),i,o,a),s.length?this.renderer.fontShadow(s[0].color,s[0].offsetX,s[0].offsetY,s[0].blur):this.renderer.clearShadow(),this.renderer.clip(n.parent.clip,function(){r.map(this.parseTextBounds(n),this).forEach(function(e,t){e&&(this.renderer.text(r[t],e.left,e.bottom),this.renderTextDecoration(n.parent,e,this.fontMetrics.getMetrics(a,o)))},this)},this,n.parent)},i.prototype.renderTextDecoration=function(e,t,n){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+n.baseline+n.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+n.middle+n.lineWidth),t.width,1,e.color("color"))}};var v={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};function b(a,s,l,u){return a.map(function(e,t){if(0<e.width){var n=s.left,r=s.top,i=s.width,o=s.height-a[2].width;switch(t){case 0:o=a[0].width,e.args=L({c1:[n,r],c2:[n+i,r],c3:[n+i-a[1].width,r+o],c4:[n+a[3].width,r+o]},u[0],u[1],l.topLeftOuter,l.topLeftInner,l.topRightOuter,l.topRightInner);break;case 1:n=s.left+s.width-a[1].width,i=a[1].width,e.args=L({c1:[n+i,r],c2:[n+i,r+o+a[2].width],c3:[n,r+o],c4:[n,r+a[0].width]},u[1],u[2],l.topRightOuter,l.topRightInner,l.bottomRightOuter,l.bottomRightInner);break;case 2:r=r+s.height-a[2].width,o=a[2].width,e.args=L({c1:[n+i,r+o],c2:[n,r+o],c3:[n+a[3].width,r],c4:[n+i-a[3].width,r]},u[2],u[3],l.bottomRightOuter,l.bottomRightInner,l.bottomLeftOuter,l.bottomLeftInner);break;case 3:i=a[3].width,e.args=L({c1:[n,r+o+a[2].width],c2:[n,r],c3:[n+i,r+a[0].width],c4:[n+i,r+o]},u[3],u[0],l.bottomLeftOuter,l.bottomLeftInner,l.topLeftOuter,l.topLeftInner)}}return e})}function w(e,t,n,r){var i=(Math.sqrt(2)-1)/3*4,o=n*i,a=r*i,s=e+n,l=t+r;return{topLeft:k({x:e,y:l},{x:e,y:l-a},{x:s-o,y:t},{x:s,y:t}),topRight:k({x:e,y:t},{x:e+o,y:t},{x:s,y:l-a},{x:s,y:l}),bottomRight:k({x:s,y:t},{x:s,y:t+a},{x:e+o,y:l},{x:e,y:l}),bottomLeft:k({x:s,y:l},{x:s-o,y:l},{x:e,y:t+a},{x:e,y:t})}}function x(e,t,n){var r=e.left,i=e.top,o=e.width,a=e.height,s=t[0][0]<o/2?t[0][0]:o/2,l=t[0][1]<a/2?t[0][1]:a/2,u=t[1][0]<o/2?t[1][0]:o/2,c=t[1][1]<a/2?t[1][1]:a/2,h=t[2][0]<o/2?t[2][0]:o/2,f=t[2][1]<a/2?t[2][1]:a/2,d=t[3][0]<o/2?t[3][0]:o/2,p=t[3][1]<a/2?t[3][1]:a/2,m=o-u,g=a-f,y=o-h,_=a-p;return{topLeftOuter:w(r,i,s,l).topLeft.subdivide(.5),topLeftInner:w(r+n[3].width,i+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:w(r+m,i,u,c).topRight.subdivide(.5),topRightInner:w(r+Math.min(m,o+n[3].width),i+n[0].width,m>o+n[3].width?0:u-n[3].width,c-n[0].width).topRight.subdivide(.5),bottomRightOuter:w(r+y,i+g,h,f).bottomRight.subdivide(.5),bottomRightInner:w(r+Math.min(y,o-n[3].width),i+Math.min(g,a+n[0].width),Math.max(0,h-n[1].width),f-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:w(r,i+_,d,p).bottomLeft.subdivide(.5),bottomLeftInner:w(r+n[3].width,i+_,Math.max(0,d-n[3].width),p-n[2].width).bottomLeft.subdivide(.5)}}function k(s,l,u,c){var h=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:s,startControl:l,endControl:u,end:c,subdivide:function(e){var t=h(s,l,e),n=h(l,u,e),r=h(u,c,e),i=h(t,n,e),o=h(n,r,e),a=h(i,o,e);return[k(s,t,i,a),k(a,o,r,c)]},curveTo:function(e){e.push(["bezierCurve",l.x,l.y,u.x,u.y,c.x,c.y])},curveToReversed:function(e){e.push(["bezierCurve",u.x,u.y,l.x,l.y,s.x,s.y])}}}function L(e,t,n,r,i,o,a){var s=[];return 0<t[0]||0<t[1]?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),0<n[0]||0<n[1]?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),0<t[0]||0<t[1]?(s.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function C(e,t,n,r,i,o,a){0<t[0]||0<t[1]?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",o,a]),(0<n[0]||0<n[1])&&e.push(["line",i[0].start.x,i[0].start.y])}function S(e){return e.cssInt("zIndex")<0}function M(e){return 0<e.cssInt("zIndex")}function P(e){return 0===e.cssInt("zIndex")}function E(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function T(e){return e instanceof p}function I(e){return 0<e.node.data.trim().length}function O(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function D(e){return"static"!==e.css("position")}function N(e){return"none"!==e.css("float")}function A(e){var t=this;return function(){return!e.apply(t,arguments)}}function j(e){return e.node.nodeType===Node.ELEMENT_NODE}function R(e){return!0===e.isPseudoElement}function B(e){return e.node.nodeType===Node.TEXT_NODE}function F(e){return parseInt(e,10)}function z(e){return e.width}function q(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function U(e){return[].concat.apply([],e)}i.prototype.parseBorders=function(o){var r,e=o.parseBounds(),t=(r=o,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var t=r.css("border"+e+"Radius"),n=t.split(" ");return n.length<=1&&(n[1]=n[0]),n.map(F)})),n=["Top","Right","Bottom","Left"].map(function(e,t){var n=o.css("border"+e+"Style"),r=o.color("border"+e+"Color");"inset"===n&&r.isBlack()&&(r=new h([255,255,255,r.a]));var i=v[n]?v[n][t]:null;return{width:o.cssInt("border"+e+"Width"),color:i?r[i[0]](i[1]):r,args:null}}),i=x(e,t,n);return{clip:this.parseBackgroundClip(o,i,n,t,e),borders:b(n,e,i,t)}},i.prototype.parseBackgroundClip=function(e,t,n,r,i){var o=[];switch(e.css("backgroundClip")){case"content-box":case"padding-box":C(o,r[0],r[1],t.topLeftInner,t.topRightInner,i.left+n[3].width,i.top+n[0].width),C(o,r[1],r[2],t.topRightInner,t.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),C(o,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),C(o,r[3],r[0],t.bottomLeftInner,t.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:C(o,r[0],r[1],t.topLeftOuter,t.topRightOuter,i.left,i.top),C(o,r[1],r[2],t.topRightOuter,t.bottomRightOuter,i.left+i.width,i.top),C(o,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,i.left+i.width,i.top+i.height),C(o,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,i.left,i.top+i.height)}return o},t.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,t,n){var a=e("./xhr"),r=e("./utils"),s=e("./log"),l=e("./clone"),u=r.decode64;function c(e,t,n){var r="withCredentials"in new XMLHttpRequest;if(!t)return Promise.reject("No proxy configured");var i=f(r),o=d(t,e,i);return r?a(o):h(n,o,i).then(function(e){return u(e.content)})}var i=0;function h(i,o,a){return new Promise(function(t,n){var e=i.createElement("script"),r=function(){delete window.html2canvas.proxy[a],i.body.removeChild(e)};window.html2canvas.proxy[a]=function(e){r(),t(e)},e.src=o,e.onerror=function(e){r(),n(e)},i.body.appendChild(e)})}function f(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++i+"_"+Math.round(1e5*Math.random())}function d(e,t,n){return e+"?url="+encodeURIComponent(t)+(n.length?"&callback=html2canvas.proxy."+n:"")}n.Proxy=c,n.ProxyURL=function(e,t,n){var r="crossOrigin"in new Image,i=f(r),o=d(t,e,i);return r?Promise.resolve(o):h(n,o,i).then(function(e){return"data:"+e.type+";base64,"+e.content})},n.loadUrlDocument=function(e,t,n,r,i,o){return new c(e,t,window.document).then((a=e,function(t){var n,e=new DOMParser;try{n=e.parseFromString(t,"text/html")}catch(e){s("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(t),n.close()}catch(e){s("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=t}}var r=n.querySelector("base");if(!r||!r.href.host){var i=n.createElement("base");i.href=a,n.head.insertBefore(i,n.head.firstChild)}return n})).then(function(e){return l(e,n,r,i,o,0,0)});var a}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,t,n){var o=e("./proxy").ProxyURL;t.exports=function(n,r){var e=document.createElement("a");e.href=n,n=e.href,this.src=n,this.image=new Image;var i=this;this.promise=new Promise(function(e,t){i.image.crossOrigin="Anonymous",i.image.onload=e,i.image.onerror=t,new o(n,r,document).then(function(e){i.image.src=e}).catch(t)})}},{"./proxy":16}],18:[function(e,t,n){var r=e("./nodecontainer");function i(e,t,n){r.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===n}i.prototype.cloneTo=function(e){i.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},(i.prototype=Object.create(r.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=i},{"./nodecontainer":14}],19:[function(e,t,n){var l=e("./log");function r(e,t,n,r,i){this.width=e,this.height=t,this.images=n,this.options=r,this.document=i}r.prototype.renderImage=function(e,t,n,r){var i=e.cssInt("paddingLeft"),o=e.cssInt("paddingTop"),a=e.cssInt("paddingRight"),s=e.cssInt("paddingBottom"),l=n.borders,u=t.width-(l[1].width+l[3].width+i+a),c=t.height-(l[0].width+l[2].width+o+s);this.drawImage(r,0,0,r.image.width||u,r.image.height||c,t.left+i+l[3].width,t.top+o+l[0].width,u,c)},r.prototype.renderBackground=function(e,t,n){0<t.height&&0<t.width&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,n))},r.prototype.renderBackgroundColor=function(e,t){var n=e.color("backgroundColor");n.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,n)},r.prototype.renderShadows=function(e,t){var n=e.css("boxShadow");if("none"!==n){var r=n.split(/,(?![^(]*\))/);this.shadow(t,r)}},r.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},r.prototype.renderBackgroundImage=function(o,a,s){o.parseBackgroundImages().reverse().forEach(function(e,t,n){switch(e.method){case"url":var r=this.images.get(e.args[0]);r?this.renderBackgroundRepeating(o,a,r,n.length-(t+1),s):l("Error loading background-image",e.args[0]);break;case"linear-gradient":case"gradient":var i=this.images.get(e.value);i?this.renderBackgroundGradient(i,a,s):l("Error loading background-image",e.args[0]);break;case"none":break;default:l("Unknown background-image type",e.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(e,t,n,r,i){var o=e.parseBackgroundSize(t,n.image,r),a=e.parseBackgroundPosition(t,n.image,r,o);switch(e.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,o,t,t.left+i[3],t.top+a.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,o,t,t.left+a.left+i[3],t.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,a,o,t,t.left+a.left+i[3],t.top+a.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,a,o,{top:t.top,left:t.left},i[3],i[0])}},t.exports=r},{"./log":13}],20:[function(e,t,n){var r=e("../renderer"),i=e("../lineargradientcontainer"),o=e("../log");function a(e,t){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},o("Initialized CanvasRenderer with size",e,"x",t)}function s(e){return 0<e.length}(a.prototype=Object.create(r.prototype)).setFillStyle=function(e){return this.ctx.fillStyle="object"===(void 0===e?"undefined":N(e))&&e.isColor?e.toString():e,this.ctx},a.prototype.rectangle=function(e,t,n,r,i){this.setFillStyle(i).fillRect(e,t,n,r)},a.prototype.circle=function(e,t,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(e+n/2,t+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},a.prototype.circleStroke=function(e,t,n,r,i,o){this.circle(e,t,n,r),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},a.prototype.shadow=function(e,t){var n=this.setFillStyle("white");n.save(),this.shape(e),t.forEach(function(e){var t=function(e){var t={color:/^(#|rgb|hsl|(?!(inset|initial|inherit))\D+)/i,inset:/^inset/i,px:/px$/i},n=["x","y","blur","spread"],r=e.split(/ (?![^(]*\))/),i={};for(var o in t)i[o]=r.filter(t[o].test.bind(t[o])),i[o]=0===i[o].length?null:1===i[o].length?i[o][0]:i[o];for(var a=0;a<i.px.length;a++)i[n[a]]=parseInt(i.px[a]);return i}(e);t.inset||(n.shadowOffsetX=t.x,n.shadowOffsetY=t.y,n.shadowColor=t.color,n.shadowBlur=t.blur,n.fill())},this),n.restore()},a.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},a.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},a.prototype.drawImage=function(e,t,n,r,i,o,a,s,l){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,n,r,i,o,a,s,l)},a.prototype.clip=function(e,t,n,r){this.ctx.save(),r&&r.hasTransform()?(this.setTransform(r.inverseTransform()),e.filter(s).forEach(function(e){this.shape(e).clip()},this),this.setTransform(r.parseTransform())):e.filter(s).forEach(function(e){this.shape(e).clip()},this),t.call(n),this.ctx.restore()},a.prototype.mask=function(e,t,n,r){var i=e[e.length-1];if(i&&i.length){var o=[["rect",this.canvas.width,0,-this.canvas.width,this.canvas.height]].concat(i).concat([i[0]]);e=e.slice(0,-1).concat([o])}this.clip(e,t,n,r)},a.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},a.prototype.font=function(e,t,n,r,i,o){this.setFillStyle(e).font=[t,n,r,i,o].join(" ").split(",")[0]},a.prototype.fontShadow=function(e,t,n,r){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},a.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},a.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},a.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},a.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},a.prototype.text=function(e,t,n){this.ctx.fillText(e,t,n)},a.prototype.backgroundRepeatShape=function(e,t,n,r,i,o,a,s,l){var u=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+a),Math.round(o)],["line",Math.round(i+a),Math.round(s+o)],["line",Math.round(i),Math.round(s+o)]];this.clip([u],function(){this.renderBackgroundRepeat(e,t,n,r,l[3],l[0])},this)},a.prototype.renderBackgroundRepeat=function(e,t,n,r,i,o){var a=Math.round(r.left+t.left+i),s=Math.round(r.top+t.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},a.prototype.renderBackgroundGradient=function(e,t){if(e instanceof i){var n=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){n.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,n)}},a.prototype.resizeImage=function(e,t){var n=e.image;if(n.width===t.width&&n.height===t.height)return n;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),r},t.exports=a},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,t,n){var i=e("./nodecontainer");function r(e,t,n,r){i.call(this,n,r),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}(r.prototype=Object.create(i.prototype)).getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=r},{"./nodecontainer":14}],22:[function(e,t,n){function r(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(e){var t,n,r=!1;return e.createRange&&(t=e.createRange()).getBoundingClientRect&&((n=e.createElement("boundtest")).style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),123===t.getBoundingClientRect().height&&(r=!0),e.body.removeChild(n)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),n=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},t.exports=r},{}],23:[function(e,t,n){var r=e("./xhr"),i=e("./utils").decode64;function o(e){this.src=e,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(e)?Promise.resolve(n.inlineFormatting(e)):r(e)}).then(function(t){return new Promise(function(e){window.html2canvas.svg.fabric.loadSVGFromString(t,n.createCanvas.call(n,e))})})}o.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},o.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},o.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},o.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},o.prototype.createCanvas=function(r){var i=this;return function(e,t){var n=new window.html2canvas.svg.fabric.StaticCanvas("c");i.image=n.lowerCanvasEl,n.setWidth(t.width).setHeight(t.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(e,t)).renderAll(),r(n.lowerCanvasEl)}},o.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):i(e)},t.exports=o},{"./utils":26,"./xhr":28}],24:[function(e,t,n){var r=e("./svgcontainer");function i(n,e){this.src=n,this.image=null;var r=this;this.promise=e?new Promise(function(e,t){r.image=new Image,r.image.onload=e,r.image.onerror=t,r.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(n),!0===r.image.complete&&e(r.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(n,r.createCanvas.call(r,e))})})}i.prototype=Object.create(r.prototype),t.exports=i},{"./svgcontainer":23}],25:[function(e,t,n){var r=e("./nodecontainer");function i(e,t){r.call(this,e,t)}function o(e,t,n){if(0<e.length)return t+n.toUpperCase()}(i.prototype=Object.create(r.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},i.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return t.toUpperCase();default:return t}},t.exports=i},{"./nodecontainer":14}],26:[function(e,t,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(e,t){return function(){return e.apply(t,arguments)}},n.decode64=function(e){var t,n,r,i,o,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=e.length,c="";for(t=0;t<u;t+=4)o=l.indexOf(e[t])<<2|(n=l.indexOf(e[t+1]))>>4,a=(15&n)<<4|(r=l.indexOf(e[t+2]))>>2,s=(3&r)<<6|(i=l.indexOf(e[t+3])),c+=64===r?String.fromCharCode(o):64===i||-1===i?String.fromCharCode(o,a):String.fromCharCode(o,a,s);return c},n.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+n,left:t.left,width:n,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},n.offsetBounds=function(e){var t=e.offsetParent?n.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},n.parseBackgrounds=function(e){var t,n,r,i,o,a,s,l=[],u=0,c=0,h=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===t.substr(0,1)&&0<(i=t.indexOf("-",1)+1)&&(r=t.substr(0,i),t=t.substr(i)),l.push({prefix:r,method:t.toLowerCase(),value:o,args:s,image:null})),s=[],t=r=n=o=""};return s=[],t=r=n=o="",e.split("").forEach(function(e){if(!(0===u&&-1<" \r\n\t".indexOf(e))){switch(e){case'"':a?a===e&&(a=null):a=e;break;case"(":if(a)break;if(0===u)return u=1,void(o+=e);c++;break;case")":if(a)break;if(1===u){if(0===c)return u=0,o+=e,void h();c--}break;case",":if(a)break;if(0===u)return void h();if(1===u&&0===c&&!t.match(/^url$/i))return s.push(n),n="",void(o+=e)}o+=e,0===u?t+=e:n+=e}}),h(),l}},{}],27:[function(e,t,n){var r=e("./gradientcontainer");function i(e){r.apply(this,arguments),this.type="linear"===e.args[0]?r.TYPES.LINEAR:r.TYPES.RADIAL}i.prototype=Object.create(r.prototype),t.exports=i},{"./gradientcontainer":9}],28:[function(e,t,n){t.exports=function(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r),n.onload=function(){200===n.status?e(n.responseText):t(new Error(n.statusText))},n.onerror=function(){t(new Error("Network Error"))},n.send()})}},{}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){"use strict";var r;r=function(u){var r="onselectstart"in document.createElement("div"),e=u.ui.menu.version.match(/^(\d)\.(\d+)/),t=parseInt(e[1],10),n=parseInt(e[2],10),i=t<2&&n<=10,o=t<2&&n<=11;u.widget("moogle.contextmenu",{version:"1.17.0",options:{addClass:"ui-contextmenu",closeOnWindowBlur:!0,autoFocus:!1,autoTrigger:!0,delegate:null,hide:{effect:"fadeOut",duration:"fast"},ignoreParentSelect:!0,menu:null,position:null,preventContextMenuForPopup:!1,preventSelect:!1,show:{effect:"slideDown",duration:"fast"},taphold:!1,uiMenuOptions:{},beforeOpen:u.noop,blur:u.noop,close:u.noop,create:u.noop,createMenu:u.noop,focus:u.noop,open:u.noop,select:u.noop},_create:function(){var t,e,n=this.options;if(this.$headStyle=null,this.$menu=null,this.menuIsTemp=!1,this.currentTarget=null,this.extraData={},(this.previousFocus=null)==n.delegate&&u.error("ui-contextmenu: Missing required option `delegate`."),n.preventSelect){t="#"+(u(this.element).is(document)?u("body"):this.element).uniqueId().attr("id")+" "+n.delegate+" { -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }",this.$headStyle=u("<style class='moogle-contextmenu-style' />").prop("type","text/css").appendTo("head");try{this.$headStyle.html(t)}catch(e){this.$headStyle[0].styleSheet.cssText=t}r&&this.element.on("selectstart"+this.eventNamespace,n.delegate,function(e){e.preventDefault()})}this._createUiMenu(n.menu),e="contextmenu"+this.eventNamespace,n.taphold&&(e+=" taphold"+this.eventNamespace),this.element.on(e,n.delegate,u.proxy(this._openMenu,this))},_destroy:function(){this.element.off(this.eventNamespace),this._createUiMenu(null),this.$headStyle&&(this.$headStyle.remove(),this.$headStyle=null)},_createUiMenu:function(e){var t,n,o=this.options;this.isOpen()&&(t=this.currentTarget,n=this.extraData,this._closeMenu(!0),this.currentTarget=t,this.extraData=n),this.menuIsTemp?this.$menu.remove():this.$menu&&this.$menu.menu("destroy").removeClass(this.options.addClass).hide(),this.$menu=null,this.menuIsTemp=!1,e&&(u.isArray(e)?(this.$menu=u.moogle.contextmenu.createMenuMarkup(e),this.menuIsTemp=!0):this.$menu="string"==typeof e?u(e):e,this.$menu.hide().addClass(o.addClass).menu(u.extend(!0,{},o.uiMenuOptions,{items:"> :not(.ui-widget-header)",blur:u.proxy(o.blur,this),create:u.proxy(o.createMenu,this),focus:u.proxy(o.focus,this),select:u.proxy(function(e,t){var n,r=u.moogle.contextmenu.isMenu(t.item),i=t.item.data("actionHandler");t.cmd=t.item.attr("data-command"),t.target=u(this.currentTarget),t.extraData=this.extraData,r&&o.ignoreParentSelect||(n=this._trigger.call(this,"select",e,t),i&&(n=i.call(this,e,t)),!1!==n&&this._closeMenu.call(this),e.preventDefault())},this)})))},_openMenu:function(t,e){var n,r,i,o=this.options,a=o.position,s=this,l=!!t.isTrigger;if(o.autoTrigger||l){if(t.preventDefault(),this.currentTarget=t.target,this.extraData=t._extraData||{},i={menu:this.$menu,target:u(this.currentTarget),extraData:this.extraData,originalEvent:t,result:null},!e){if(n=this._trigger("beforeOpen",t,i),r=i.result&&u.isFunction(i.result.promise)?i.result:null,i.result=null,!1===n)return this.currentTarget=null,!1;if(r)return r.done(function(){s._openMenu(t,!0)}),this.currentTarget=null,!1;i.menu=this.$menu}u(document).on("keydown"+this.eventNamespace,function(e){e.which===u.ui.keyCode.ESCAPE&&s._closeMenu()}).on("mousedown"+this.eventNamespace+" touchstart"+this.eventNamespace,function(e){u(e.target).closest(".ui-menu-item").length||s._closeMenu()}),u(window).on("blur"+this.eventNamespace,function(e){o.closeOnWindowBlur&&s._closeMenu()}),u.isFunction(a)&&(a=a(t,i)),a=u.extend({my:"left top",at:"left bottom",of:void 0===t.pageX?t.target:t,collision:"fit"},a),this._updateEntries(this.$menu),this.$menu.show().css({position:"absolute",left:0,top:0}).position(a).hide(),o.preventContextMenuForPopup&&this.$menu.on("contextmenu"+this.eventNamespace,function(e){e.preventDefault()}),this._show(this.$menu,o.show,function(){var e;o.autoFocus&&(s.previousFocus=u(t.target),e=s.$menu.children("li.ui-menu-item").not(".ui-state-disabled").first(),s.$menu.menu("focus",null,e).focus()),s._trigger.call(s,"open",t,i)})}},_closeMenu:function(e){var t=this,n=!e&&this.options.hide,r={menu:this.$menu,target:u(this.currentTarget),extraData:this.extraData};u(document).off("mousedown"+this.eventNamespace).off("touchstart"+this.eventNamespace).off("keydown"+this.eventNamespace),u(window).off("blur"+this.eventNamespace),t.currentTarget=null,t.extraData={},this.$menu?(this.$menu.off("contextmenu"+this.eventNamespace),this._hide(this.$menu,n,function(){t.previousFocus&&(t.previousFocus.focus(),t.previousFocus=null),t._trigger("close",null,r)})):t._trigger("close",null,r)},_setOption:function(e,t){switch(e){case"menu":this.replaceMenu(t)}u.Widget.prototype._setOption.apply(this,arguments)},_getMenuEntry:function(e){return this.$menu.find("li[data-command="+e+"]")},close:function(){this.isOpen()&&this._closeMenu()},_updateEntries:function(){var o=this,a={menu:this.$menu,target:u(this.currentTarget),extraData:this.extraData};u.each(this.$menu.find(".ui-menu-item"),function(e,t){var n=u(t),r=n.data("disabledHandler"),i=r?r({type:"disabled"},a):null;a.item=n,a.cmd=n.attr("data-command"),null!=i&&(o.enableEntry(a.cmd,!i),o.showEntry(a.cmd,"hide"!==i)),null!=(i=(r=n.data("titleHandler"))?r({type:"title"},a):null)&&o.setEntry(a.cmd,""+i),null!=(i=(r=n.data("tooltipHandler"))?r({type:"tooltip"},a):null)&&n.attr("title",""+i)})},enableEntry:function(e,t){this._getMenuEntry(e).toggleClass("ui-state-disabled",!1===t)},getMenu:function(){return this.$menu},isOpen:function(){return!!this.$menu&&!!this.currentTarget},open:function(e,t){t=t||{};var n=e&&e.type&&e.target,r=n?e:{},i=n?e.target:e,o=jQuery.Event("contextmenu",{target:u(i).get(0),pageX:r.pageX,pageY:r.pageY,originalEvent:n?e:void 0,_extraData:t});return this.element.trigger(o)},replaceMenu:function(e){this._createUiMenu(e)},setEntry:function(e,t){var n,r=this._getMenuEntry(e);"string"==typeof t?u.moogle.contextmenu.updateTitle(r,t):(r.empty(),t.cmd=t.cmd||e,u.moogle.contextmenu.createEntryMarkup(t,r),u.isArray(t.children)&&(n=u("<ul/>").appendTo(r),u.moogle.contextmenu.createMenuMarkup(t.children,n)),r.removeClass("ui-menu-item"),this.getMenu().menu("refresh"))},showEntry:function(e,t){this._getMenuEntry(e).toggle(!1!==t)}}),u.extend(u.moogle.contextmenu,{createEntryMarkup:function(n,r){var e=null;r.attr("data-command",n.cmd),/[^\-\u2014\u2013\s]/.test(n.title)?(i?(e=u("<a/>",{html:""+n.title,href:"#"}).appendTo(r),n.uiIcon&&e.append(u("<span class='ui-icon' />").addClass(n.uiIcon))):o?(r.html(""+n.title),n.uiIcon&&r.append(u("<span class='ui-icon' />").addClass(n.uiIcon))):(e=u("<div/>",{html:""+n.title}).appendTo(r),n.uiIcon&&e.append(u("<span class='ui-icon' />").addClass(n.uiIcon))),u.each(["action","disabled","title","tooltip"],function(e,t){u.isFunction(n[t])&&r.data(t+"Handler",n[t])}),!0===n.disabled&&r.addClass("ui-state-disabled"),n.isHeader&&r.addClass("ui-widget-header"),n.addClass&&r.addClass(n.addClass),u.isPlainObject(n.data)&&r.data(n.data),"string"==typeof n.tooltip&&r.attr("title",n.tooltip)):r.text(n.title)},createMenuMarkup:function(e,t){var n,r,i,o;for(null==t&&(t=u("<ul class='ui-helper-hidden' />").appendTo("body")),n=0;n<e.length;n++)r=e[n],o=u("<li/>").appendTo(t),u.moogle.contextmenu.createEntryMarkup(r,o),u.isArray(r.children)&&(i=u("<ul/>").appendTo(o),u.moogle.contextmenu.createMenuMarkup(r.children,i));return t},isMenu:function(e){return i?0<e.has(">a[aria-haspopup='true']").length:o?e.is("[aria-haspopup='true']"):0<e.has(">div[aria-haspopup='true']").length},replaceFirstTextNodeChild:function(e,t){var n=e.find(">span.ui-icon,>ul.ui-menu").detach();e.empty().html(t).append(n)},updateTitle:function(e,t){i?u.moogle.contextmenu.replaceFirstTextNodeChild(u("a",e),t):o?u.moogle.contextmenu.replaceFirstTextNodeChild(e,t):u.moogle.contextmenu.replaceFirstTextNodeChild(u("div",e),t)}})},"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widgets/menu"],r):r(jQuery)},{}],34:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$(function(){$.extend($.support,{touch:"object"==("undefined"==typeof Touch?"undefined":r(Touch))}),$.support.touch&&(document.addEventListener("touchstart",a,!1),document.addEventListener("touchmove",a,!1),document.addEventListener("touchend",a,!1),document.addEventListener("touchcancel",a,!1))});var l=null,u=!1,c=null;var i=!1,o=null,h=!1;function f(){i&&(window.clearTimeout(o),i=!1,null)}function d(e){i||(i=!0,e.changedTouches[0],o=window.setTimeout("doRightClick();",800))}function a(e){var t="";if(!(1<e.touches.length)){switch(e.type){case"touchstart":if($(e.changedTouches[0].target).is("select"))return;return r=(n=e).changedTouches[0],i="mouseover",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o),i="mousedown",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o),u?(window.clearTimeout(c),r.target==l?(l=null,u=!1,i="click",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o),i="dblclick",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o)):(l=r.target,u=!0,c=window.setTimeout("cancelTap();",600),d(n))):(l=r.target,u=!0,c=window.setTimeout("cancelTap();",600),d(n)),e.preventDefault(),!1;case"touchmove":f(),t="mousemove",e.preventDefault();break;case"touchend":if(h)return h=!1,e.preventDefault(),!1;f(),t="mouseup";break;default:return}var n,r,i,o,a=e.changedTouches[0],s=document.createEvent("MouseEvent");s.initMouseEvent(t,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(s),"mouseup"==t&&u&&a.target==l&&((s=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(s))}}},{}],35:[function(e,t,n){"use strict";var r;r=function(){kendo.cultures["zh-CN"]={name:"zh-CN",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n%","n%"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"Chinese Yuan",abbr:"CNY",pattern:["$-n","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],namesAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",F:"yyyy'年'M'月'd'日' H:mm:ss",g:"yyyy/M/d H:mm",G:"yyyy/M/d H:mm:ss",m:"M月d日",M:"M月d日",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"H:mm",T:"H:mm:ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"yyyy'年'M'月'",Y:"yyyy'年'M'月'"},"/":"/",":":":",firstDay:1}}}},"function"==typeof define&&define.amd?define(["kendo.core.min"],r):r()},{}],36:[function(e,t,n){"use strict";var r;r=function(){var e;e=window.kendo.jQuery,kendo.ui.FlatColorPicker&&(kendo.ui.FlatColorPicker.prototype.options.messages=e.extend(!0,kendo.ui.FlatColorPicker.prototype.options.messages,{apply:"确定",cancel:"取消",noColor:"无颜色",clearColor:"清除颜色",previewInput:"颜色十六进制代码"})),kendo.ui.ColorPicker&&(kendo.ui.ColorPicker.prototype.options.messages=e.extend(!0,kendo.ui.ColorPicker.prototype.options.messages,{apply:"确定",cancel:"取消",noColor:"无颜色",clearColor:"清除颜色",previewInput:"颜色十六进制代码"})),kendo.ui.ColumnMenu&&(kendo.ui.ColumnMenu.prototype.options.messages=e.extend(!0,kendo.ui.ColumnMenu.prototype.options.messages,{sortAscending:"升序排列",sortDescending:"降序排列",filter:"筛选",columns:"字段列",done:"完成",settings:"列设置",lock:"锁定",unlock:"解锁"})),kendo.ui.Editor&&(kendo.ui.Editor.prototype.options.messages=e.extend(!0,kendo.ui.Editor.prototype.options.messages,{bold:"粗体",italic:"斜体",underline:"下划线",strikethrough:"删除线",superscript:"上标",subscript:"下标",justifyCenter:"水平居中",justifyLeft:"左对齐",justifyRight:"右对齐",justifyFull:"两端对齐",insertUnorderedList:"插入无序列表",insertOrderedList:"插入有序列表",indent:"增加缩进",outdent:"减少缩进",createLink:"插入链接",unlink:"删除链接",insertImage:"插入图片",insertFile:"插入文件",insertHtml:"插入HTML",viewHtml:"源代码编辑",fontName:"请选择字体",fontNameInherit:"（默认字体）",fontSize:"请选择字号",fontSizeInherit:"（默认字号）",formatBlock:"格式",formatting:"格式",foreColor:"文字颜色",backColor:"文字背景色",style:"样式",emptyFolder:"文件夹为空",editAreaTitle:"在可编辑区域可按 F10 跳转工具栏。",uploadFile:"上传文件",overflowAnchor:"更多功能",orderBy:"排序方式：",orderBySize:"按大小排序",orderByName:"按名称排序",invalidFileType:"你上传的文件格式 {0} 是无效的，支持的文件类型为：{1}",deleteFile:"你确定要删除【{0}】这个文件吗？",overwriteFile:"当前文件夹已存在文件名为【{0}】的文件，是否覆盖？",directoryNotFound:"文件夹未找到",imageWebAddress:"图片链接地址",imageAltText:"图片占位符",imageWidth:"图片宽度（单位px）",imageHeight:"图片高度（单位px）",fileWebAddress:"文件链接地址",fileTitle:"文件标题",linkWebAddress:"链接地址",linkText:"链接文字",linkToolTip:"链接提示",linkOpenInNewWindow:"在新窗口中打开链接",dialogUpdate:"更新",dialogInsert:"插入",dialogButtonSeparator:"或",dialogOk:"确定",dialogCancel:"取消",cleanFormatting:"清除格式",createTable:"创建表格",createTableHint:"创建一个 {0} 行 {1} 列的表格",addColumnLeft:"在左侧插入列",addColumnRight:"在右侧插入列",addRowAbove:"在上方插入行",addRowBelow:"在下方插入行",deleteRow:"删除行",deleteColumn:"删除列",tableWizard:"表格向导",tableTab:"表格",cellTab:"单元格",accessibilityTab:"可访问性",caption:"标题",summary:"摘要",width:"宽",height:"高",units:"单位",cellSpacing:"单元格间距",cellPadding:"单元格内边距",cellMargin:"单元格外边距",alignment:"对齐",background:"背景色",cssClass:"样式表",id:"ID",border:"边框",borderStyle:"边框样式",collapseBorders:"合并边框",wrapText:"文字换行",associateCellsWithHeaders:"关联表头与单元格",alignLeft:"左对齐",alignCenter:"居中对齐",alignRight:"右对齐",alignLeftTop:"左上对齐",alignCenterTop:"中上对齐",alignRightTop:"右上对齐",alignLeftMiddle:"左中对齐",alignCenterMiddle:"居中对齐",alignRightMiddle:"右中对齐",alignLeftBottom:"左下对齐",alignCenterBottom:"中下对齐",alignRightBottom:"右下对齐",alignRemove:"移除对齐",columns:"列",rows:"行",selectAllCells:"选择所有单元格",exportAs:"导出",import:"导入"})),kendo.ui.FileBrowser&&(kendo.ui.FileBrowser.prototype.options.messages=e.extend(!0,kendo.ui.FileBrowser.prototype.options.messages,{uploadFile:"上传文件",orderBy:"排序方式",orderByName:"按名称排序",orderBySize:"按大小排序",directoryNotFound:"文件夹未找到",emptyFolder:"文件夹为空",deleteFile:"你确定要删除【{0}】这个文件吗？",invalidFileType:"你上传的文件格式 {0} 是无效的，支持的文件类型为：{1}",overwriteFile:"当前文件夹已存在文件名为【{0}】的文件，是否覆盖？",dropFilesHere:"将文件拖拽到此处上传",search:"搜索"})),kendo.ui.FilterCell&&(kendo.ui.FilterCell.prototype.options.messages=e.extend(!0,kendo.ui.FilterCell.prototype.options.messages,{isTrue:"是",isFalse:"否",filter:"筛选",clear:"清空",operator:"运算符"})),kendo.ui.FilterCell&&(kendo.ui.FilterCell.prototype.options.operators=e.extend(!0,kendo.ui.FilterCell.prototype.options.operators,{string:{eq:"等于",neq:"不等于",startswith:"开头是",contains:"包含",doesnotcontain:"不含",endswith:"结尾是",isnull:"为空",isnotnull:"非空",isempty:"空字符串",isnotempty:"非空字符串",isnullorempty:"无值",isnotnullorempty:"有值"},number:{eq:"等于",neq:"不等于",gte:"大于等于",gt:"大于",lte:"小于等于",lt:"小于",isnull:"为空",isnotnull:"非空"},date:{eq:"等于",neq:"不等于",gte:"晚于等于",gt:"晚于",lte:"早于等于",lt:"早于",isnull:"为空",isnotnull:"非空"},enums:{eq:"等于",neq:"不等于",isnull:"为空",isnotnull:"非空"}})),kendo.ui.FilterMenu&&(kendo.ui.FilterMenu.prototype.options.messages=e.extend(!0,kendo.ui.FilterMenu.prototype.options.messages,{info:"筛选条件：",title:"筛选条件：",isTrue:"是",isFalse:"否",filter:"筛选",clear:"清空",and:"并且",or:"或者",selectValue:"-= 请选择 =-",operator:"运算符",value:"值",additionalValue:"附加值",additionalOperator:"附加运算",logic:"筛选逻辑",cancel:"取消"})),kendo.ui.FilterMenu&&(kendo.ui.FilterMenu.prototype.options.operators=e.extend(!0,kendo.ui.FilterMenu.prototype.options.operators,{string:{eq:"等于",neq:"不等于",startswith:"开头是",contains:"包含",doesnotcontain:"不含",endswith:"结尾是",isnull:"为空",isnotnull:"非空",isempty:"空字符串",isnotempty:"非空字符串",isnullorempty:"无值",isnotnullorempty:"有值"},number:{eq:"等于",neq:"不等于",gte:"大于等于",gt:"大于",lte:"小于等于",lt:"小于",isnull:"为空",isnotnull:"非空"},date:{eq:"等于",neq:"不等于",gte:"晚于等于",gt:"晚于",lte:"早于等于",lt:"早于",isnull:"为空",isnotnull:"非空"},enums:{eq:"等于",neq:"不等于",isnull:"为空",isnotnull:"非空"}})),kendo.ui.FilterMultiCheck&&(kendo.ui.FilterMultiCheck.prototype.options.messages=e.extend(!0,kendo.ui.FilterMultiCheck.prototype.options.messages,{checkAll:"全选",clear:"清空",filter:"筛选",search:"搜索",cancel:"取消",selectedItemsFormat:"已选择 {0} 条数据"})),kendo.ui.Gantt&&(kendo.ui.Gantt.prototype.options.messages=e.extend(!0,kendo.ui.Gantt.prototype.options.messages,{actions:{addChild:"新增子任务",append:"新增任务",insertAfter:"插入到后面",insertBefore:"插入到前面",pdf:"导出 PDF"},cancel:"取消",deleteDependencyWindowTitle:"删除从属任务",deleteDependencyConfirmation:"你确定要删除这项从属任务吗？",deleteTaskWindowTitle:"删除任务",deleteTaskConfirmation:"你确定要删除这项任务吗？",destroy:"删除",editor:{assingButton:"资源分配",editorTitle:"编辑任务",end:"结束时间",percentComplete:"完成进度",resources:"资源",resourcesEditorTitle:"资源编辑",resourcesHeader:"资源名称",start:"开始时间",title:"任务标题",unitsHeader:"百分比"},save:"保存",views:{day:"日视图",end:"任务结束",month:"月视图",start:"任务开始",week:"周视图",year:"年视图"}})),kendo.ui.GanttTimeline&&(kendo.ui.GanttTimeline.prototype.options.messages=e.extend(!0,kendo.ui.GanttTimeline.prototype.options.messages,{views:{day:"日视图",week:"周视图",month:"月视图",year:"年视图",start:"任务开始",end:"任务结束"}})),kendo.ui.Grid&&(kendo.ui.Grid.prototype.options.messages=e.extend(!0,kendo.ui.Grid.prototype.options.messages,{commands:{cancel:"取消",canceledit:"取消",create:"新增",destroy:"删除",edit:"编辑",excel:"导出 Excel",pdf:"导出 PDF",save:"保存",select:"选择",update:"更新"},editable:{cancelDelete:"取消删除",confirmation:"你确定要删除这条数据吗？",confirmDelete:"确定删除"},noRecords:"无相关数据",expandCollapseColumnHeader:""})),kendo.ui.Groupable&&(kendo.ui.Groupable.prototype.options.messages=e.extend(!0,kendo.ui.Groupable.prototype.options.messages,{empty:"将字段列名称拖拽到此处可进行该列的分组显示"})),kendo.ui.NumericTextBox&&(kendo.ui.NumericTextBox.prototype.options=e.extend(!0,kendo.ui.NumericTextBox.prototype.options,{upArrowText:"增加",downArrowText:"减少"})),kendo.ui.MediaPlayer&&(kendo.ui.MediaPlayer.prototype.options.messages=e.extend(!0,kendo.ui.MediaPlayer.prototype.options.messages,{pause:"暂停",play:"播放",mute:"静音",unmute:"取消静音",quality:"画质",fullscreen:"全屏"})),kendo.ui.Pager&&(kendo.ui.Pager.prototype.options.messages=e.extend(!0,kendo.ui.Pager.prototype.options.messages,{allPages:"全部",display:"{0} - {1} 条　共 {2} 条数据",empty:"无相关数据",page:"转到第",of:"页　共 {0} 页",itemsPerPage:"条每页",first:"首页",previous:"上一页",next:"下一页",last:"末页",refresh:"刷新",morePages:"更多..."})),kendo.ui.TreeListPager&&(kendo.ui.TreeListPager.prototype.options.messages=e.extend(!0,kendo.ui.TreeListPager.prototype.options.messages,{allPages:"全部",display:"{0} - {1} 条　共 {2} 条数据",empty:"无相关数据",page:"转到第",of:"页　共 {0} 页",itemsPerPage:"条每页",first:"首页",previous:"上一页",next:"下一页",last:"末页",refresh:"刷新",morePages:"更多..."})),kendo.ui.PivotGrid&&(kendo.ui.PivotGrid.prototype.options.messages=e.extend(!0,kendo.ui.PivotGrid.prototype.options.messages,{measureFields:"拖拽数据字段到此处",columnFields:"拖拽列字段到此处",rowFields:"拖拽行字段到此处"})),kendo.ui.PivotFieldMenu&&(kendo.ui.PivotFieldMenu.prototype.options.messages=e.extend(!0,kendo.ui.PivotFieldMenu.prototype.options.messages,{info:"筛选条件：",sortAscending:"升序排列",sortDescending:"降序排列",filterFields:"字段筛选",filter:"筛选",include:"包含字段...",title:"包含的字段",clear:"清空",ok:"确定",cancel:"取消",operators:{contains:"包含",doesnotcontain:"不含",startswith:"开头是",endswith:"结尾是",eq:"等于",neq:"不等于"}})),kendo.ui.PivotSettingTarget&&(kendo.ui.PivotSettingTarget.prototype.options.messages=e.extend(!0,kendo.ui.PivotSettingTarget.prototype.options.messages,{empty:"拖拽字段到此处"})),kendo.ui.PivotConfigurator&&(kendo.ui.PivotConfigurator.prototype.options.messages=e.extend(!0,kendo.ui.PivotConfigurator.prototype.options.messages,{measures:"拖拽数据字段到此处",columns:"拖拽列字段到此处",rows:"拖拽行字段到此处",measuresLabel:"量",columnsLabel:"列",rowsLabel:"行",fieldsLabel:"字段"})),kendo.ui.RecurrenceEditor&&(kendo.ui.RecurrenceEditor.prototype.options.messages=e.extend(!0,kendo.ui.RecurrenceEditor.prototype.options.messages,{recurrenceEditorTitle:"周期类型事件编辑",frequencies:{never:"从不",hourly:"每小时",daily:"每天",weekly:"每周",monthly:"每月",yearly:"每年"},hourly:{repeatEvery:"周期",interval:" 小时"},daily:{repeatEvery:"周期",interval:" 天"},weekly:{repeatEvery:"周期",repeatOn:"重复于",interval:" 周"},monthly:{repeatEvery:"周期",repeatOn:"重复于",interval:" 月",day:"几号 "},yearly:{repeatEvery:"周期",repeatOn:"重复于",interval:" 年",of:" 在 "},end:{label:"截止",mobileLabel:"截止",never:"从不",after:"重复 ",occurrence:" 次后",on:"止于 "},offsetPositions:{first:"第一",second:"第二",third:"第三",fourth:"第四",last:"最后一"},weekdays:{day:"天",weekday:"工作日",weekend:"周末"}})),kendo.ui.MobileRecurrenceEditor&&(kendo.ui.MobileRecurrenceEditor.prototype.options.messages=e.extend(!0,kendo.ui.MobileRecurrenceEditor.prototype.options.messages,{cancel:"取消",update:"保存",endTitle:"周期截止",repeatTitle:"周期模式",headerTitle:"周期事件",end:{patterns:{never:"从不",after:"重复...",on:"止于..."},never:"从不",after:"周期后截止",on:"周期时截止"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"重复到：",dayOfMonth:"几号",dayOfWeek:"周几",repeatEvery:"全部重复",every:"每",day:"天"},yearly:{interval:"",repeatBy:"重复到：",dayOfMonth:"几号",dayOfWeek:"周几",repeatEvery:"全部重复",every:"每",month:"月",day:"天"}})),kendo.ui.Scheduler&&(kendo.ui.Scheduler.prototype.options.messages=e.extend(!0,kendo.ui.Scheduler.prototype.options.messages,{allDay:"全天",date:"日期",event:"事件",time:"时间",showFullDay:"显示全天",showWorkDay:"显示工作时间",today:"今天",pdf:"导出 PDF",save:"保存",cancel:"取消",destroy:"删除",deleteWindowTitle:"删除事件",next:"往后",previous:"往前",ariaSlotLabel:"从 {0:t} 到 {1:t} 的选择",ariaEventLabel:"在 {1:D} {2:t} 的 {0}",editable:{confirmation:"你确定要删除这个事件吗？"},views:{day:"日视图",week:"周视图",workWeek:"工作日视图",agenda:"列表视图",month:"月视图",timeline:"时间线",timelineWeek:"时间线周视图",timelineWorkWeek:"时间线工作日视图",timelineMonth:"时间线月视图"},recurrenceMessages:{deleteWindowTitle:"删除周期类型事件",deleteWindowOccurrence:"删除当前事件",deleteWindowSeries:"删除整个周期事件",editWindowTitle:"编辑周期类型事件",editWindowOccurrence:"编辑当前事件",editWindowSeries:"编辑整个周期事件",deleteRecurring:"你想仅删除当前事件还是整个周期事件？",editRecurring:"你想仅编辑当前事件还是整个周期事件？"},editor:{title:"事件标题",start:"开始时间",end:"结束时间",allDayEvent:"全天事件",description:"描述",repeat:"重复",timezone:"时区",startTimezone:"开始时区",endTimezone:"结束时区",separateTimezones:"使用独立的开始和结束时区",timezoneEditorTitle:"时区设置",timezoneEditorButton:"时区选择",timezoneTitle:"选择时区",noTimezone:"无时区",editorTitle:"事件"}})),kendo.spreadsheet&&kendo.spreadsheet.messages.borderPalette&&(kendo.spreadsheet.messages.borderPalette=e.extend(!0,kendo.spreadsheet.messages.borderPalette,{allBorders:"内外框线",insideBorders:"内框线",insideHorizontalBorders:"横向内框线",insideVerticalBorders:"纵向内框线",outsideBorders:"外框线",leftBorder:"左框线",topBorder:"上框线",rightBorder:"右框线",bottomBorder:"下框线",noBorders:"无框线",reset:"无填充颜色",customColor:"其他颜色...",apply:"确定",cancel:"取消"})),kendo.spreadsheet&&kendo.spreadsheet.messages.dialogs&&(kendo.spreadsheet.messages.dialogs=e.extend(!0,kendo.spreadsheet.messages.dialogs,{apply:"确定",save:"保存",cancel:"取消",remove:"移除",retry:"重试",revert:"复原",okText:"确定",formatCellsDialog:{title:"单元格格式",categories:{number:"数字",currency:"货币",date:"日期"}},fontFamilyDialog:{title:"字体"},fontSizeDialog:{title:"字号"},bordersDialog:{title:"边框"},alignmentDialog:{title:"对齐",buttons:{justtifyLeft:"左对齐",justifyCenter:"水平居中",justifyRight:"右对齐",justifyFull:"两端对齐",alignTop:"顶端对齐",alignMiddle:"垂直居中",alignBottom:"底端对齐"}},mergeDialog:{title:"合并单元格",buttons:{mergeCells:"全部合并",mergeHorizontally:"水平合并",mergeVertically:"垂直合并",unmerge:"取消合并"}},freezeDialog:{title:"冻结窗格",buttons:{freezePanes:"冻结上行左列",freezeRows:"冻结上部行",freezeColumns:"冻结左侧列",unfreeze:"取消冻结"}},confirmationDialog:{text:"你确定要删除这张工作表吗？",title:"删除工作表"},validationDialog:{title:"数据验证",hintMessage:"请输入一个{1}的{0}值",hintTitle:"验证{0}",criteria:{any:"任何值",number:"数字",text:"文本",date:"日期",custom:"自定义公式",list:"序列"},comparers:{greaterThan:"大于",lessThan:"小于",between:"介于",notBetween:"不介于",equalTo:"等于",notEqualTo:"不等于",greaterThanOrEqualTo:"大于等于",lessThanOrEqualTo:"小于等于"},comparerMessages:{greaterThan:"大于{0}",lessThan:"小于{0}",between:"介于{0}和{1}之间",notBetween:"不介于{0}和{1}之间",equalTo:"等于{0}",notEqualTo:"不等于{0}",greaterThanOrEqualTo:"大于等于{0}",lessThanOrEqualTo:"小于等于{0}",custom:"满足公式{0}"},labels:{criteria:"允许",comparer:"比较",min:"最小值",max:"最大值",value:"值",start:"开始",end:"结束",onInvalidData:"对无效的数据",rejectInput:"拒绝输入",showWarning:"显示警告",showHint:"选定单元格时显示",hintTitle:"选定时的标题",hintMessage:"选定时的信息",ignoreBlank:"忽略空值",showListButton:"显示序列按钮",showCalendarButton:"显示日历按钮"},placeholders:{typeTitle:"请输入标题",typeMessage:"请输入信息"}},exportAsDialog:{title:"导出...",labels:{scale:"缩放",fit:"调整为一页",fileName:"文件名",saveAsType:"保存类型",exportArea:"导出范围",paperSize:"纸张大小",margins:"页边距",orientation:"纸张方向",print:"打印",guidelines:"网格线",center:"居中方式",horizontally:"水平",vertically:"垂直"}},modifyMergedDialog:{errorMessage:"不能更改已合并单元格的局部。"},rangeDisabledDialog:{errorMessage:"指定范围包含禁用单元格。"},incompatibleRangesDialog:{errorMessage:"范围不匹配"},noFillDirectionDialog:{errorMessage:"无法判断填充方向"},duplicateSheetNameDialog:{errorMessage:"工作表名称重复"},overflowDialog:{errorMessage:"不能粘贴，因为复制区域和粘贴区域的大小和形状不一样。"},useKeyboardDialog:{title:"复制和粘贴",errorMessage:"不能通过菜单调用这些操作，请使用键盘快捷键代替：",labels:{forCopy:"为复制",forCut:"为剪切",forPaste:"为粘贴"}},unsupportedSelectionDialog:{errorMessage:"不能在多选的情况下执行该操作。"},linkDialog:{title:"链接",labels:{text:"链接文字",url:"链接地址",removeLink:"移除链接"}}})),kendo.spreadsheet&&kendo.spreadsheet.messages.filterMenu&&(kendo.spreadsheet.messages.filterMenu=e.extend(!0,kendo.spreadsheet.messages.filterMenu,{sortAscending:"按A到Z升序排列",sortDescending:"按Z到A降序排列",filterByValue:"内容筛选",filterByCondition:"条件筛选",apply:"确定",search:"搜索",addToCurrent:"添加到当前选择",clear:"清空",blanks:"（无）",operatorNone:"无",and:"并且",or:"或者",operators:{string:{contains:"文本包含",doesnotcontain:"文本不包含",startswith:"文本开头是",endswith:"文本结尾是",matches:"文本等于",doesnotmatch:"文本不等于"},date:{eq:"日期等于",neq:"日期不等于",lt:"日期早于",gt:"日期晚于"},number:{eq:"数字等于",neq:"数字不等于",gte:"数字大于等于",gt:"数字大于",lte:"数字小于等于",lt:"数字小于"}}})),kendo.spreadsheet&&kendo.spreadsheet.messages.colorPicker&&(kendo.spreadsheet.messages.colorPicker=e.extend(!0,kendo.spreadsheet.messages.colorPicker,{reset:"无填充颜色",customColor:"其他颜色...",apply:"确定",cancel:"取消"})),kendo.spreadsheet&&kendo.spreadsheet.messages.toolbar&&(kendo.spreadsheet.messages.toolbar=e.extend(!0,kendo.spreadsheet.messages.toolbar,{addColumnLeft:"在左侧插入列",addColumnRight:"在右侧插入列",addRowAbove:"在上面插入行",addRowBelow:"在下面插入行",alignment:"对齐",alignmentButtons:{justtifyLeft:"左对齐",justifyCenter:"水平居中",justifyRight:"右对齐",justifyFull:"两端对齐",alignTop:"顶端对齐",alignMiddle:"垂直居中",alignBottom:"底端对齐"},backgroundColor:"背景颜色",bold:"粗体",borders:"边框",colorPicker:{reset:"无填充颜色",customColor:"其他颜色..."},copy:"复制",cut:"剪切",deleteColumn:"删除整列",deleteRow:"删除整行",excelImport:"从 Excel 导入...",exportAs:"导出为...",filter:"筛选",fontFamily:"字体",fontSize:"字号",format:"定制格式...",formatTypes:{automatic:"自动",text:"文本",number:"数字",percent:"百分比",financial:"财务",currency:"货币",date:"日期",time:"时间",dateTime:"日期时间",duration:"时分秒",moreFormats:"更多格式..."},formatDecreaseDecimal:"减少小数位数",formatIncreaseDecimal:"增加小数位数",freeze:"冻结窗格",freezeButtons:{freezePanes:"冻结上行左列",freezeRows:"冻结上部行",freezeColumns:"冻结左侧列",unfreeze:"取消冻结"},italic:"斜体",merge:"合并单元格",mergeButtons:{mergeCells:"全部合并",mergeHorizontally:"水平合并",mergeVertically:"垂直合并",unmerge:"取消合并"},open:"打开...",paste:"粘贴",quickAccess:{redo:"重做",undo:"撤消"},toggleGridlines:"切换网格线",saveAs:"另存为...",sort:"排序",sortAsc:"升序排列",sortDesc:"降序排列",sortButtons:{sortSheetAsc:"表格按A到Z升序排列",sortSheetDesc:"表格按Z到A降序排列",sortRangeAsc:"选定范围按A到Z升序排列",sortRangeDesc:"选定范围按Z到A降序排列"},textColor:"文字颜色",textWrap:"文字换行",underline:"下划线",validation:"数据验证...",hyperlink:"链接"})),kendo.spreadsheet&&kendo.spreadsheet.messages.view&&(kendo.spreadsheet.messages.view=e.extend(!0,kendo.spreadsheet.messages.view,{errors:{openUnsupported:"不支持的格式，请选择一个后缀名为 .xlsx 的文件。",shiftingNonblankCells:"由于数据可能丢失无法插入单元格，请选择另一处插入或者从工作表的尾部删除数据。",insertColumnWhenRowIsSelected:"在选择所有列时不能插入列。",insertRowWhenColumnIsSelected:"在选择所有行时不能插入行。",filterRangeContainingMerges:"无法在包含合并单元格的情况下进行筛选",sortRangeContainingMerges:"无法在包含合并单元格的情况下排序",cantSortMultipleSelection:"无法在多选的情况下排序",cantSortNullRef:"无法在没有选择的情况下排序",cantSortMixedCells:"无法在包含有混合形状单元格的情况下排序",validationError:"你输入的值不符合当前单元格的验证规则。",cannotModifyDisabled:"不能修改被禁用的单元格。"},tabs:{home:"开始",insert:"插入",data:"数据"}})),kendo.ui.Slider&&(kendo.ui.Slider.prototype.options=e.extend(!0,kendo.ui.Slider.prototype.options,{increaseButtonTitle:"增加",decreaseButtonTitle:"减少",dragHandleTitle:"拖"})),kendo.ui.ListBox&&(kendo.ui.ListBox.prototype.options.messages=e.extend(!0,kendo.ui.ListBox.prototype.options.messages,{tools:{remove:"删除",moveUp:"上移",moveDown:"下移",transferTo:"转移过去",transferFrom:"转移回来",transferAllTo:"全部转移过去",transferAllFrom:"全部转移回来"}})),kendo.ui.TreeList&&(kendo.ui.TreeList.prototype.options.messages=e.extend(!0,kendo.ui.TreeList.prototype.options.messages,{noRows:"无相关数据",loading:"载入中...",requestFailed:"请求失败！",retry:"重试",commands:{edit:"编辑",update:"更新",canceledit:"取消",create:"新增",createchild:"新增子项",destroy:"删除",excel:"导出 Excel",pdf:"导出 PDF"}})),kendo.ui.TreeView&&(kendo.ui.TreeView.prototype.options.messages=e.extend(!0,kendo.ui.TreeView.prototype.options.messages,{loading:"载入中...",requestFailed:"请求失败！",retry:"重试"})),kendo.ui.PanelBar&&(kendo.ui.PanelBar.prototype.options.messages=e.extend(!0,kendo.ui.PanelBar.prototype.options.messages,{loading:"载入中...",requestFailed:"请求失败！",retry:"重试"})),kendo.ui.Upload&&(kendo.ui.Upload.prototype.options.localization=e.extend(!0,kendo.ui.Upload.prototype.options.localization,{select:"选择文件",cancel:"取消",retry:"重试",remove:"移除",pause:"暂停",resume:"恢复",clearSelectedFiles:"清空",uploadSelectedFiles:"上传",dropFilesHere:"将文件拖拽到此处上传",invalidFiles:"文件不符合要求！",statusUploading:"上传中...",statusUploaded:"上传成功！",statusWarning:"上传警告！",statusFailed:"上传失败！",headerStatusUploading:"上传中...",headerStatusPaused:"上传暂停",headerStatusUploaded:"上传完成！",invalidMaxFileSize:"文件太大！",invalidMinFileSize:"文件太小！",invalidFileExtension:"不支持的文件格式！"})),kendo.ui.Validator&&(kendo.ui.Validator.prototype.options.messages=e.extend(!0,kendo.ui.Validator.prototype.options.messages,{required:"{0} 是必填项！",pattern:"{0} 的格式不正确！",min:"{0} 必须大于或等于 {1} ！",max:"{0} 必须小于或等于 {1} ！",step:"{0} 不是正确的步进值！",email:"{0} 不是正确的电子邮件格式！",url:"{0} 不是正确的网址格式！",date:"{0} 不是正确的日期格式！",dateCompare:"结束日期必须晚于或等于开始日期！"})),kendo.ui.progress&&(kendo.ui.progress.messages=e.extend(!0,kendo.ui.progress.messages,{loading:"载入中..."})),kendo.ui.Dialog&&(kendo.ui.Dialog.prototype.options.messages=e.extend(!0,kendo.ui.Dialog.prototype.options.localization,{close:"关闭"})),kendo.ui.Calendar&&(kendo.ui.Calendar.prototype.options.messages=e.extend(!0,kendo.ui.Calendar.prototype.options.messages,{weekColumnHeader:""})),kendo.ui.Alert&&(kendo.ui.Alert.prototype.options.messages=e.extend(!0,kendo.ui.Alert.prototype.options.localization,{okText:"确定"})),kendo.ui.Confirm&&(kendo.ui.Confirm.prototype.options.messages=e.extend(!0,kendo.ui.Confirm.prototype.options.localization,{okText:"确定",cancel:"取消"})),kendo.ui.Prompt&&(kendo.ui.Prompt.prototype.options.messages=e.extend(!0,kendo.ui.Prompt.prototype.options.localization,{okText:"确定",cancel:"取消"})),kendo.ui.DateInput&&(kendo.ui.DateInput.prototype.options.messages=e.extend(!0,kendo.ui.DateInput.prototype.options.messages,{year:"年",month:"月",day:"日",weekday:"周",hour:"时",minute:"分",second:"秒",dayperiod:"上午/下午"})),kendo.ui.DropDownTree&&(kendo.ui.DropDownTree.prototype.options.messages=e.extend(!0,kendo.ui.DropDownTree.prototype.options.messages,{clear:"清空",deleteTag:"删除",singleTag:"项已选择"})),kendo.ui.Chat&&(kendo.ui.Chat.prototype.options.messages=e.extend(!0,kendo.ui.Chat.prototype.options.messages,{placeholder:"请输入..."})),kendo.mobile.ui.Scroller&&(kendo.mobile.ui.Scroller.prototype.options.messages=e.extend(!0,kendo.mobile.ui.Scroller.prototype.options.messages,{pullTemplate:"下拉刷新",releaseTemplate:"释放刷新",refreshTemplate:"刷新中..."})),kendo.mobile.ui.ListView&&(kendo.mobile.ui.ListView.prototype.options.messages=e.extend(!0,kendo.mobile.ui.ListView.prototype.options.messages,{loadMoreText:"点击载入更多",pullTemplate:"下拉刷新",releaseTemplate:"释放刷新",refreshTemplate:"刷新中..."}))},"function"==typeof define&&define.amd?define(["kendo.core.min"],r):r()},{}],37:[function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(a){a=a&&a.hasOwnProperty("default")?a.default:a;var t=void 0,s=null,n=a.Class.extend({initialize:function(e){t=e},enable:function(){!0===t.events.click&&a.DomEvent.on(t.map,"click",this._handleClick,this),!0===t.events.mousemove&&a.DomEvent.on(t.map,"mousemove",this._throttle(this._handleMouseMove,t.throttleMs,t.throttleOptions),this)},disable:function(){a.DomEvent.off(t.map,"click",this._handleClick,this),a.DomEvent.off(t.map,"mousemove",this._throttle(this._handleMouseMove,t.throttleMs,t.throttleOptions),this)},_handleMouseMove:function(e){if(!e.originalEvent._stopped){var t,n=e.originalEvent.target;t={node:n,pointerEvents:n.style.pointerEvents},n.style.pointerEvents="none";var r=document.elementFromPoint(e.originalEvent.clientX,e.originalEvent.clientY),i="canvas"===r.nodeName.toLowerCase();if(s&&s!=r&&s.dispatchEvent(new MouseEvent("mouseout",e.originalEvent)),(s=r)&&"body"!==r.nodeName.toLowerCase()&&-1===r.classList.value.indexOf("leaflet-container")){var o=new MouseEvent(i?"mousemove":"mouseover",e.originalEvent);(!r.dispatchEvent(o)||o._stopped)&&a.DomEvent.stop(e)}t.node.style.pointerEvents=t.pointerEvents}},_handleClick:function(e){if(!e.originalEvent._stopped){var t,n=e.originalEvent.target;t={node:n,pointerEvents:n.style.pointerEvents},n.style.pointerEvents="none";var r=document.elementFromPoint(e.originalEvent.clientX,e.originalEvent.clientY);if(r&&"body"!==r.nodeName.toLowerCase()&&-1===r.classList.value.indexOf("leaflet-container")){var i=new MouseEvent(e.originalEvent.type,e.originalEvent);(!r.dispatchEvent(i)||i._stopped)&&a.DomEvent.stop(e)}t.node.style.pointerEvents=t.pointerEvents}},_throttle:function(n,r,i){var o,a,s,l=null,u=0;i||(i={});var c=function(){u=!1===i.leading?0:Date.now(),l=null,s=n.apply(o,a),l||(o=a=null)};return function(){var e=Date.now();u||!1!==i.leading||(u=e);var t=r-(e-u);return o=this,a=arguments,t<=0||r<t?(l&&(clearTimeout(l),l=null),u=e,s=n.apply(o,a),l||(o=a=null)):l||!1===i.trailing||(l=setTimeout(c,t)),s}}});return a.eventForwarder=function(e){return new n(e)},a.eventForwarder},"object"===((r=void 0)===n?"undefined":o(n))&&void 0!==t?t.exports=i(e("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],i):r["leaflet-event-forwarder"]=i(r.L)},{leaflet:473}],38:[function(e,t,n){"use strict";var r,i=e("../src/kq"),s=(r=i)&&r.__esModule?r:{default:r};L.TileLayer.WMTS=L.TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixSet:"",format:"png"},initialize:function(e,t){this._url=e;var n=L.extend({},this.defaultWmtsParams),r=t.tileSize||this.options.tileSize;for(var i in t.detectRetina&&L.Browser.retina?n.width=n.height=2*r:n.width=n.height=r,t)this.options.hasOwnProperty(i)||"matrixIds"==i||(n[i]=t[i]);this.wmtsParams=n,L.setOptions(this,t)},onAdd:function(e){L.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e,t){var n=e.x,r=e.y,i=Number(e.z);this.wmtsParams.scale_offset&&(i+=this.wmtsParams.scale_offset);var o=L.Util.template(this._url,{s:this._getSubdomain(e)});o=o+L.Util.getParamString(this.wmtsParams,o)+"&tilematrix="+i+"&tilerow="+r+"&tilecol="+n;var a=s.default.Map.MapView.getMapToken();return o+L.Util.getParamString(a,o)},setParams:function(e,t){return L.extend(this.wmtsParams,e),t||this.redraw(),this}}),L.tileLayer.wmts=function(e,t){return new L.TileLayer.WMTS(e,t)}},{"../src/kq":729}],39:[function(e,t,n){"use strict";L.TileLayer.ChinaProvider=L.TileLayer.extend({initialize:function(e,t){t||(t={});var n=L.TileLayer.ChinaProvider.providers,r=e.split("."),i=r[0],o=r[1],a=r[2],s=n[i][o][a];(t.subdomains=n[i].Subdomains,t.key=t.key||n[i].key,"BaiDu"===i&&(t.tms=!0),"Realtime"===o)&&(s+=(new Date).getTime());L.TileLayer.prototype.initialize.call(this,s,t)}}),L.TileLayer.ChinaProvider.providers={TianDiTu:{Normal:{Map:"http://t{s}.tianditu.com/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk={key}"},Satellite:{Map:"http://t{s}.tianditu.com/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk={key}"},Terrain:{Map:"http://t{s}.tianditu.com/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk={key}"},Subdomains:["0","1","2","3","4","5","6","7"],key:"4e24b7fcda0189ad1cda9167dcac5126"},GaoDe:{Normal:{Map:"http://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"},Satellite:{Map:"http://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",Annotion:"http://webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}"},Subdomains:["1","2","3","4"]},Google:{Normal:{Map:"http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}"},Satellite:{Map:"http://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}"},Terrain:{Map:"http://www.google.cn/maps/vt?lyrs=t@189&gl=cn&x={x}&y={y}&z={z}"},Subdomains:[]},Geoq:{Normal:{Map:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",PurplishBlue:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",Gray:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}",Warm:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetWarm/MapServer/tile/{z}/{y}/{x}"},Theme:{Hydro:"http://thematic.geoq.cn/arcgis/rest/services/ThematicMaps/WorldHydroMap/MapServer/tile/{z}/{y}/{x}"},Subdomains:[]},OSM:{Normal:{Map:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"},Subdomains:["a","b","c"]},BaiDu:{Normal:{Map:"http://online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1",Dark:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=dark",Midnight:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=midnight",Grayscale:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=grayscale",Hardedge:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=hardedge",Light:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=light",Redalert:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=redalert",Googlelite:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=googlelite",Grassgreen:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=grassgreen",Pink:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=pink",Darkgreen:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=darkgreen",Bluish:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=bluish"},Satellite:{Map:"http://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46",Annotion:"http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020"},Realtime:{Map:"http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&v=017&time="},Subdomains:["0","1","2"]},GoogleEn:{Normal:{Map:"http://mt.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"},Satellite:{Map:"http://mt.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"},Terrain:{Map:"http://mt.google.com/vt/lyrs=t&x={x}&y={y}&z={z}"},Subdomains:[]}},L.tileLayer.chinaProvider=function(e,t){return new L.TileLayer.ChinaProvider(e,t)}},{}],40:[function(e,t,n){"use strict";t.exports=function(u){var t=(u.Layer?u.Layer:u.Class).extend({initialize:function(e){u.setOptions(this,e),this._onClickListeners=[],this._onHoverListeners=[]},setOptions:function(e){return u.setOptions(this,e),this.redraw()},redraw:function(){this._redraw(!0)},addMarkers:function(e){var i=this,o=[],a=[];e.forEach(function(e){if("markerPane"==e.options.pane&&e.options.icon){var t=e.getLatLng(),n=i._map.getBounds().contains(t),r=i._addMarker(e,t,n);!0===n&&o.push(r[0]),a.push(r[1])}else console.error("Layer isn't a marker")}),i._markers||(i._markers=new rbush),i._latlngMarkers||(i._latlngMarkers=new rbush,i._latlngMarkers.dirty=0,i._latlngMarkers.total=0),i._markers.load(o),i._latlngMarkers.load(a)},addMarker:function(e){var t=e.getLatLng(),n=this._map.getBounds().contains(t),r=this._addMarker(e,t,n);!0===n&&this._markers.insert(r[0]),this._latlngMarkers.insert(r[1])},addLayer:function(e){"markerPane"==e.options.pane&&e.options.icon?this.addMarker(e):console.error("Layer isn't a marker")},addLayers:function(e){this.addMarkers(e)},removeLayer:function(e){this.removeMarker(e,!0)},removeMarker:function(e,t){e.minX&&(e=e.data);var n=e.getLatLng(),r=this._map.getBounds().contains(n),i={minX:n.lng,minY:n.lat,maxX:n.lng,maxY:n.lat,data:e};this._latlngMarkers.remove(i,function(e,t){return e.data._leaflet_id===t.data._leaflet_id}),this._latlngMarkers.total--,this._latlngMarkers.dirty++,!0===r&&!0===t&&this._redraw(!0)},onAdd:function(e){this._map=e,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):e._panes.overlayPane.appendChild(this._canvas),e.on("moveend",this._reset,this),e.on("resize",this._reset,this),e.on("click",this._executeListeners,this),e.on("mousemove",this._executeListeners,this),e.on("contextmenu",this._executeListeners,this),e._zoomAnimated&&(e.on("zoomstart",this._startZoom,this),e.on("zoomend",this._endZoom,this))},onRemove:function(e){this.options.pane?this.getPane().removeChild(this._canvas):e.getPanes().overlayPane.removeChild(this._canvas),e.off("click",this._executeListeners,this),e.off("mousemove",this._executeListeners,this),e.off("contextmenu",this._executeListeners,this),e.off("moveend",this._reset,this),e.off("resize",this._reset,this),e._zoomAnimated&&(e.off("zoomanim",this._animateZoom,this),e.off("zoomstart",this._startZoom,this),e.off("zoomend",this._endZoom,this))},addTo:function(e){return e.addLayer(this),this},_animateZoom:function(e){},_startZoom:function(e){this._canvas.style.visibility="hidden"},_endZoom:function(e){this._canvas.style.visibility="visible"},clearLayers:function(){this._latlngMarkers=null,this._markers=null,this._redraw(!0)},_addMarker:function(e,t,n){var r=this;e._map=r._map,r._markers||(r._markers=new rbush),r._latlngMarkers||(r._latlngMarkers=new rbush,r._latlngMarkers.dirty=0,r._latlngMarkers.total=0),u.Util.stamp(e);var i=r._map.latLngToContainerPoint(t),o=r._getMarkerIconSize(e),a=o[0]/2,s=o[1]/2,l=[{minX:i.x-a,minY:i.y-s,maxX:i.x+a,maxY:i.y+s,data:e},{minX:t.lng,minY:t.lat,maxX:t.lng,maxY:t.lat,data:e}];return r._latlngMarkers.dirty++,r._latlngMarkers.total++,!0===n&&r._drawMarker(e,i),l},_drawMarker:function(e,t){var n=this;if(this._imageLookup||(this._imageLookup={}),t||(t=n._map.latLngToContainerPoint(e.getLatLng())),e.options.extraIcon){var r=n._context,i=e.options.extraIcon;i.trueFontSize=2*Number(i.fontSize.replace("px","")),r.font="normal "+i.trueFontSize+"px "+i.className,r.lineWidth=i.strokeWidth,r.strokeStyle=n._hexToRGB(i.strokeColor,i.strokeOpacity),r.fillStyle=n._hexToRGB(i.fillColor,i.fillOpacity);var o=i.unicode.replace("&#x",""),a=String.fromCharCode(parseInt(o,16)),s=i.trueFontSize,l=s,u=t.x-s/2,c=t.y+l/2;i.strokeWidth&&r.strokeText(a,u,c),r.fillText(a,u,c)}else{var h=e.options.icon.options.iconUrl;if(e.canvas_img)n._drawImage(e,t);else if(n._imageLookup[h])e.canvas_img=n._imageLookup[h][0],!1===n._imageLookup[h][1]?n._imageLookup[h][2].push([e,t]):n._drawImage(e,t);else{var f=new Image;f.src=h,e.canvas_img=f,n._imageLookup[h]=[f,!1,[[e,t]]],f.onload=function(){n._imageLookup[h][1]=!0,n._imageLookup[h][2].forEach(function(e){n._drawImage(e[0],e[1])})}}}},_drawImage:function(e,t){var n=e.options.icon.options;this._context.drawImage(e.canvas_img,t.x-n.iconSize[0]/2,t.y-n.iconSize[1]/3,n.iconSize[0],n.iconSize[1])},_reset:function(){var e=this._map.containerPointToLayerPoint([0,0]);u.DomUtil.setPosition(this._canvas,e);var t=this._map.getSize();this._canvas.width=t.x,this._canvas.height=t.y,this._redraw()},_redraw:function(e){var a=this;if(e&&this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._map&&this._latlngMarkers){var s=[];.1<=a._latlngMarkers.dirty/a._latlngMarkers.total&&(a._latlngMarkers.all().forEach(function(e){s.push(e)}),a._latlngMarkers.clear(),a._latlngMarkers.load(s),a._latlngMarkers.dirty=0,s=[]);var t=a._getLogicBound(a._map),n={minX:t.getWest(),minY:t.getSouth(),maxX:t.getEast(),maxY:t.getNorth()};a._latlngMarkers.search(n).forEach(function(e){var t=a._map.latLngToContainerPoint(e.data.getLatLng()),n=e.data.options.icon.options.iconSize,r=n[0]/2,i=n[1]/2,o={minX:t.x-r,minY:t.y-i,maxX:t.x+r,maxY:t.y+i,data:e.data};s.push(o),a._drawMarker(e.data,t)}),this._markers.clear(),this._markers.load(s)}},_initCanvas:function(){this._canvas=u.DomUtil.create("canvas","leaflet-canvas-icon-layer leaflet-layer");var e=this._map.getSize();this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d");var t=this._map.options.zoomAnimation&&u.Browser.any3d;u.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(t?"animated":"hide"))},addOnClickListener:function(e){this._onClickListeners.push(e)},addOnHoverListener:function(e){this._onHoverListeners.push(e)},_executeListeners:function(t){if(this._markers){var e=t.containerPoint.x,n=t.containerPoint.y;this._openToolTip&&(this._openToolTip.closeTooltip(),delete this._openToolTip);var r=this._markers.search({minX:e,minY:n,maxX:e,maxY:n});r&&0<r.length?(this._map._container.style.cursor="pointer","contextmenu"===t.type&&0<r[0].data.options.contextmenuItems.length&&r[0].data._showContextMenu(t),"click"===t.type&&(r[0].data.getPopup()&&r[0].data.openPopup(),this._onClickListeners.forEach(function(e){e(t,r)})),"mousemove"===t.type&&(r[0].data.getTooltip()&&(this._openToolTip=r[0].data,r[0].data.openTooltip()),this._onHoverListeners.forEach(function(e){e(t,r)}))):this._map._container.style.cursor=""}},_getMarkerIconSize:function(e){var t=e.options.icon.options.iconSize;if(e.options.extraIcon){var n=e.options.extraIcon,r=n.trueFontSize?n.trueFontSize:n.fontSize.replace("px","");t=[r,r]}return t},_hexToRGB:function(e,t){var n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return void 0!==t||null!==t?"rgba("+n+", "+r+", "+i+", "+t+")":"rgb("+n+", "+r+", "+i+")"},_getLogicBound:function(e){var t=e.getSize(),n=e.getCenter(),r=e.project(n,e.getZoom()),i=e.getPixelWorldBounds(e.getZoom()),o=new u.Point(r.x-t.x/2,r.y-t.y/2),a=new u.Point(r.x+t.x/2,r.y+t.y/2);o.x<0&&(o.x=0),a.x>i.max.x&&(a.x=i.max.x);var s=e.unproject(o,e.zoom),l=e.unproject(a,e.zoom);return u.latLngBounds(s,l)},_getAllMarkers:function(){return this._latlngMarkers.all()}});u.canvasIconLayer=function(e){return new t(e)}}},{}],41:[function(e,t,n){"use strict";window,document,L.Control.Custom=L.Control.extend({version:"1.0.1",options:{position:"topright",id:"",title:"",classes:"",content:"",style:{},datas:{},events:{}},container:null,onAdd:function(e){for(var t in this.container=L.DomUtil.create("div"),this.container.id=this.options.id,this.container.title=this.options.title,this.container.className=this.options.classes,this.container.innerHTML=this.options.content,this.options.style)this.container.style[t]=this.options.style[t];for(var n in this.options.datas)this.container.dataset[n]=this.options.datas[n];for(var r in L.DomEvent.disableClickPropagation(this.container),L.DomEvent.on(this.container,"contextmenu",function(e){L.DomEvent.stopPropagation(e)}),L.DomEvent.disableScrollPropagation(this.container),this.options.events)L.DomEvent.on(this.container,r,this.options.events[r],this.container);return this.container},onRemove:function(e){for(var t in this.options.events)L.DomEvent.off(this.container,t,this.options.events[t],this.container)}}),L.control.custom=function(e){return new L.Control.Custom(e)}},{}],42:[function(e,t,n){"use strict";var r;r={animate:!1,reset:!0},L.Map=L.Map.extend({sync:function(e,t){return this._initSync(),t=L.extend({noInitialSync:!1,syncCursor:!1,syncCursorMarkerOptions:{radius:20,stroke:!1,opacity:.5,fill:!0,fillOpacity:.3,fillColor:"#dc2027"}},t),-1===this._syncMaps.indexOf(e)&&(this._syncMaps.push(e),t.noInitialSync||e.setView(this.getCenter(),this.getZoom(),r),t.syncCursor&&(e.cursor=L.circleMarker([0,0],t.syncCursorMarkerOptions).addTo(e),this._cursors.push(e.cursor),this.on("mousemove",this._cursorSyncMove,this),this.on("mouseout",this._cursorSyncOut,this))),this},_cursorSyncMove:function(t){this._cursors.forEach(function(e){e.setLatLng(t.latlng)})},_cursorSyncOut:function(e){this._cursors.forEach(function(e){e.setLatLng([0,0])})},unsync:function(n){var r=this;return r._syncMaps&&r._syncMaps.forEach(function(e,t){n===e&&(r._syncMaps.splice(t,1),n.cursor&&(r._cursors.forEach(function(e,t){n===e._map&&r._cursors.splice(t,1)}),n.cursor.removeFrom(n)))}),0===r._syncMaps.length&&(this.off("mousemove",this._cursorSyncMove,this),this.off("mouseout",this._cursorSyncOut,this)),this},unsyncSelf:function(){return this._cursors.forEach(function(e){e.remove()}),this._cursors=[],this._syncMaps=[],this.off("mousemove",this._cursorSyncMove,this),this.off("mouseout",this._cursorSyncOut,this),this},isSynced:function(){return this.hasOwnProperty("_syncMaps")&&0<Object.keys(this._syncMaps).length},_initSync:function(){if(!this._syncMaps){var i=this;this._syncMaps=[],this._cursors=[],L.extend(i,{setView:function(t,n,r,e){return e||i._syncMaps.forEach(function(e){e.setView(t,n,r,!0)}),L.Map.prototype.setView.call(this,t,n,r)},panBy:function(t,n,e){return e||i._syncMaps.forEach(function(e){e.panBy(t,n,!0)}),L.Map.prototype.panBy.call(this,t,n)},_onResize:function(t,e){return e||i._syncMaps.forEach(function(e){e._onResize(t,!0)}),L.Map.prototype._onResize.call(this,t)},_stop:function(e){return e||i._syncMaps.forEach(function(e){e._stop(!0)}),L.Map.prototype._stop.call(this)}}),i.on("zoomend",function(){i._syncMaps.forEach(function(e){e.setView(i.getCenter(),i.getZoom(),r)})},this),i.dragging._draggable._updatePosition=function(){L.Draggable.prototype._updatePosition.call(this);var t=this;i._syncMaps.forEach(function(e){L.DomUtil.setPosition(e.dragging._draggable._element,t._newPos),e.eachLayer(function(e){void 0!==e._google&&e._google.setCenter(i.getCenter())}),e.fire("moveend")})}}}})},{}],43:[function(n,r,e){"use strict";var t,i=n("../src/kq"),b=(t=i)&&t.__esModule?t:{default:t};!function(e){if("function"==typeof define&&define.amd)define(["leaflet"],e);else if(void 0!==r){var t=n("leaflet");t.WMS=t.wms=e(n("leaflet")),r.exports=t.wms}else{if(void 0===this.L)throw"Leaflet must be loaded first!";this.L.WMS=this.L.wms=e(this.L)}}(function(v){var r={};r.Source=v.Layer.extend({options:{untiled:!0,identify:!1},initialize:function(e,t){v.setOptions(this,t),this.options.tiled&&(this.options.untiled=!1),this._url=e,this._subLayers={},this._overlay=this.createOverlay(this.options.untiled),this._status="waiting"},createOverlay:function(e){var t={};for(var n in this.options)"untiled"!=n&&"identify"!=n&&(t[n]=this.options[n]);return e?r.overlay(this._url,t):r.tileLayer(this._url,t)},onAdd:function(){this.refreshOverlay()},getEvents:function(){return this.options.identify?{click:this.identify}:{}},setOpacity:function(e){this.options.opacity=e,this._overlay&&this._overlay.setOpacity(e)},getOpacity:function(){return this.options.opacity},bringToBack:function(){this.options.isBack=!0,this._overlay&&this._overlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._overlay&&this._overlay.bringToFront()},getLayer:function(e){return r.layer(this,e)},addSubLayer:function(e){this._subLayers[e]=!0,this.refreshOverlay()},removeSubLayer:function(e){delete this._subLayers[e],this.refreshOverlay()},refreshOverlay:function(){for(var e=[],t=this.options.layers,n=0;n<t.length;++n)this._subLayers.hasOwnProperty(t[n]._id)&&e.push(t[n]._id);e.reverse(),e=e.join(","),this._map&&(e?(this._overlay.setParams({layers:e}),0<t.length&&(t[0]._cql_Filter&&this._overlay.setParams({cql_Filter:t[0]._cql_Filter}),t[0]._useindex&&this._overlay.setParams({useindex:"1"===t[0]._useindex}),t[0]._srs&&this._overlay.setParams({srs:t[0]._srs})),this._overlay.addTo(this._map)):this._overlay.remove())},identify:function(e){var t=this.getIdentifyLayers();t.length&&this.getFeatureInfo(e.containerPoint,e.latlng,t,this.showFeatureInfo)},getFeatureInfo:function(e,n,t,r){var i=this.getFeatureInfoParams(e,t),o=this._url+v.Util.getParamString(i,this._url);this.showWaiting(),this.ajax(o,function(e){this.hideWaiting();var t=this.parseFeatureInfo(e,o);r.call(this,n,t)})},ajax:function(e,t){(function(e,t){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t.call(n,r.responseText):t.call(n,"error"))},r.open("GET",e),r.send()}).call(this,e,t)},getIdentifyLayers:function(){return this.options.identifyLayers?this.options.identifyLayers:Object.keys(this._subLayers)},getFeatureInfoParams:function(e,t){var n,r;this.options.untiled?n=this._overlay.wmsParams:((r=this.createOverlay(!0)).updateWmsParams(this._map),(n=r.wmsParams).layers=t.join(","));var i={request:"GetFeatureInfo",query_layers:t.join(","),X:Math.round(e.x),Y:Math.round(e.y)};return v.extend({},n,i)},parseFeatureInfo:function(e,t){return"error"==e&&(e="<iframe src='"+t+"' style='border:none'>"),e},showFeatureInfo:function(e,t){this._map&&this._map.openPopup(t,e)},showWaiting:function(){this._map&&(this._map._container.style.cursor="progress")},hideWaiting:function(){this._map&&(this._map._container.style.cursor="default")}}),r.source=function(e,t){return new r.Source(e,t)},r.Layer=v.Layer.extend({initialize:function(e,t,n){v.setOptions(this,n),e.addSubLayer||(e=r.getSourceForUrl(e,n)),this._source=e,this._name=t},onAdd:function(){this._source._map||this._source.addTo(this._map),this._source.addSubLayer(this._name)},onRemove:function(){this._source.removeSubLayer(this._name)},setOpacity:function(e){this._source.setOpacity(e)},getOpacity:function(){return this._source.getOpacity()},bringToBack:function(){this._source.bringToBack()},bringToFront:function(){this._source.bringToFront()}}),r.layer=function(e,t){return new r.Layer(e,t)};var n={};r.getSourceForUrl=function(e,t){return n[e]||(n[e]=r.source(e,t)),n[e]},r.TileLayer=v.TileLayer.WMS,r.tileLayer=v.tileLayer.wms;var i=void 0;return r.Overlay=v.Layer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},defaultKQMappingParams:{layers:"",format:"image/jpeg",level:"",x:"",y:"",size:""},options:{crs:null,uppercase:!1,attribution:"",opacity:1,isBack:!1,minZoom:0,maxZoom:18,serviceType:"wms"},initialize:function(e,t){this._url=e,this._timer=null,this._mode=null,t.mask?(i||(i=b.default.Common.CommonValues.maskPane_zIndex),this._zIndex=i--):this._zIndex=b.default.Common.PaneZIndexManager.getInstance().getNextZIndex();var n={};for(var r in t)r in this.options||(n[r]=t[r],delete t[r]);v.setOptions(this,t),this.wmsParams=v.extend({},this.defaultWmsParams,n)},setParams:function(e){v.extend(this.wmsParams,e),this.updateProxy()},getAttribution:function(){return this.options.attribution},onAdd:function(){this.updateProxy()},onRemove:function(e){if(this._currentOverlay)if(v.Util.isArray(this._currentOverlay))for(var t=0;t<this._currentOverlay.length;++t)e.removeLayer(this._currentOverlay[t]),delete this._currentOverlay[t];else e.removeLayer(this._currentOverlay),delete this._currentOverlay;this._currentUrl&&delete this._currentUrl},getEvents:function(){return{moveend:this.updateProxy}},updateProxy:function(){var e=this;e._timer||(e._timer=setTimeout(function(){b.default.Common.TaskManager.getInstance().addTask(e,e),clearTimeout(e._timer),e._timer=null},500))},update:function(){if(this._map){var r;null!=this._mode&&this._mode!=this._needCutImage()&&this.onRemove(this._map),this._mode=this._needCutImage(),this.updateWmsParams(),r="kqmapping"===this.options.serviceType?this.getKQMappingImageUrl():this.getImageUrl();var i,e=this.options.uppercase||!1,t=b.default.Map.MapView.getMapToken();if(v.Util.isArray(r))for(var n=0;n<r.length;++n)r[n]+=v.Util.getParamString(t,r[n],e);else r+=v.Util.getParamString(t,r,e);if(this._currentUrl!=r)if(this._currentUrl=r,i="kqmapping"===this.options.serviceType?this._getProjectedLogisBound():this.getProjectedLogisBound(),this._needCutImage())for(var o=0;o<i.length;++o)!function(e,t){var n=new b.default.Struct.ImageOverlay(r[t],i[t],{opacity:0});n._currentBounds=i[t],e.setPane(n),n.addTo(e._map),n.once("load",function(){l(e,n,t)},e),n.once("error",function(){u(e,n,t)},e)}(this,o);else{var a=new b.default.Struct.ImageOverlay(r,i,{opacity:0}),s=this;a._currentBounds=i,this.setPane(a),a.addTo(s._map),a.once("load",function(){l(this,a)},s),a.once("error",function(){u(s,a)},s)}else this.setStatusDone()}function l(e,t,n){var r=e;if(r.setStatusDone(),r._map){if(void 0===n){if(t._url!=r._currentUrl)return void r._map.removeLayer(t);r._currentOverlay&&r._map.removeLayer(r._currentOverlay),r._currentOverlay=t}else{if(t._url!=r._currentUrl[n])return void r._map.removeLayer(t);r._currentOverlay||(r._currentOverlay=[]),r._currentOverlay[n]&&r._map.removeLayer(r._currentOverlay[n]),r._currentOverlay[n]=t}var i=parseFloat(r.options.opacity);isNaN(i)?t.setOpacity(1):t.setOpacity(i)}else t&&t.remove()}function u(e,t,n){e.setStatusDone(),void 0===n?(e._currentOverlay?e._map.removeLayer(e._currentOverlay):e._map.removeLayer(t),e._currentOverlay=t):(e._currentOverlay[n]?e._map.removeLayer(e._currentOverlay[n]):e._map.removeLayer(t),e._currentOverlay[n]=t)}},getZoom:function(){return b.default.Map.MapConfig.getInstance().scaleIndexToID(this._map.getZoom())},setPane:function(e){var t=this._zIndex,n="pane"+t;this._map.getPane(n)||(this._map.createPane(n),this._map.getPane(n).style.zIndex=t,this._map.getPane(n).style.pointerEvents="none"),e.options.pane=n,e.desc="imageoverlay"},setOpacity:function(e){if(console.log("wms setOpacity"),this.options.opacity=e,this._currentOverlay)if(v.Util.isArray(this._currentOverlay))for(var t=0;t<this._currentOverlay.length;++t)this._currentOverlay[t].setOpacity(e);else this._currentOverlay.setOpacity(e)},bringToBack:function(){if(console.log("wms bringToBack"),this.options.isBack=!0,this._currentOverlay)if(v.Util.isArray(this._currentOverlay))for(var e=0;e<this._currentOverlay.length;++e)this._currentOverlay[e].bringToBack();else this._currentOverlay.bringToBack()},bringToFront:function(){if(console.log("wms bringToFront"),this.options.isBack=!1,this._currentOverlay)if(v.Util.isArray(this._currentOverlay))for(var e=0;e<this._currentOverlay.length;++e)this._currentOverlay[e].bringToFront();else this._currentOverlay.bringToFront()},_needCutImage:function(){var e=this._map.getSize();return"kqmapping"===this.options.serviceType&&(2048<e.x||2048<e.y)},updateWmsParams:function(e){e||(e=this._map);var t,n=e.getBounds(),r=e.getSize(),i=parseFloat(this.wmsParams.version),o=this.options.crs||e.options.crs,a=1.3<=i?"crs":"srs",s=o.project(n.getNorthWest()),l=o.project(n.getSouthEast()),u={width:r.x,height:r.y};(t=o&&o.options&&o.options.prj?o.options.prj:b.default.Map.MapConfig.getInstance().getPrj(!1))&&""!==t&&(this.wmsParams.srs||(u[a]=t)),u.bbox=(1.3<=i&&(o===v.CRS.EPSG4326||"EPSG:4490"===t)?[l.y,s.x,s.y,l.x]:[s.x,l.y,l.x,s.y]).join(","),v.extend(this.wmsParams,u)},getImageUrl:function(){var e=this.options.uppercase||!1,t=v.Util.getParamString(this.wmsParams,this._url,e);return this._url+t},getKQMappingImageUrl:function(){for(var e in this.wmsParams)e in this.defaultKQMappingParams&&(this.defaultKQMappingParams[e]=this.wmsParams[e]);var t=this._map,n=b.default.Common.CommonTools.getMapIntegerZoom(t,!0);this.defaultKQMappingParams.level=n+this.wmsParams.scale_offset,this.defaultKQMappingParams.where=this.wmsParams.where,this.wmsParams.mask?this.defaultKQMappingParams.mask=1:delete this.defaultKQMappingParams.mask;var r=this.options.uppercase||!1,i=this.options.crs||t.options.crs,o=t.getSize();if(this._needCutImage()){var a=[],s=[{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}];this.defaultKQMappingParams.size=Math.floor(o.x/2)+","+Math.floor(o.y/2);for(var l=0;l<s.length;++l){var u=t.getCenter(),c=this._map.project(u,this._map.zoom);c.x+=o.x/4*s[l].x,c.y+=o.y/4*s[l].y,u=this._map.unproject(c,this._map.zoom),u=i.project(u),this.defaultKQMappingParams.x=u.x,this.defaultKQMappingParams.y=u.y;var h=v.Util.getParamString(this.defaultKQMappingParams,this._url,r);a.push(this._url+"/MapServer/export"+h)}return a}var f=i.project(t.getCenter());this.defaultKQMappingParams.size=o.x+","+o.y,this.defaultKQMappingParams.x=f.x,this.defaultKQMappingParams.y=f.y;h=v.Util.getParamString(this.defaultKQMappingParams,this._url,r);return this._url+"/MapServer/export"+h},setStatusDone:function(){this._status="done",this.fire("done")},setStatusWaiting:function(){this._status="waiting"},setStatusWorking:function(){this._status="working"},isStatusDone:function(){return"done"===this._status},isWaiting:function(){return"waiting"===this._status},_pixelBoundsToProjectBounds:function(e){var t=this.options.crs||this._map.options.crs,n=this._map.getPixelWorldBounds().getSize(),r=t.getProjectedBounds(this._map.zoom).getSize(),i=r.x/n.x,o=r.y/n.y,a=e.min,s=e.max,l=t.options.origin,u=v.point(a.x*i+l[0],l[1]-a.y*o),c=v.point(s.x*i+l[0],l[1]-s.y*o);return v.bounds(u,c)},getProjectedLogisBound:function(){var e=this._map.getSize(),t=this._map.getCenter(),n=(this.options.crs||this._map.options.crs,this._map.project(t,this._map.getZoom()));if(this._needCutImage()){for(var r=[],i=[{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}],o=0;o<i.length;++o){var a={};a.x=n.x+e.x/4*i[o].x,a.y=n.y+e.y/4*i[o].y;var s=new v.Point(a.x-e.x/4,a.y-e.y/4),l=new v.Point(a.x+e.x/4,a.y+e.y/4);r.push(this._pixelBoundsToProjectBounds(v.bounds(s,l)))}return r}var u=new v.Point(n.x-e.x/2,n.y-e.y/2),c=new v.Point(n.x+e.x/2,n.y+e.y/2);return this._pixelBoundsToProjectBounds(v.bounds(u,c))},_getProjectedLogisBound:function(){for(var e=this._map.getPixelBounds().getSize(),t=b.default.Common.CommonTools.getMapIntegerZoom(this._map),n=this._map.getPixelWorldBounds(t).getSize(),r=this._map.options.crs.projection.bounds.getSize(),i=r.x/n.x,o=r.y/n.y,a=null,s=null,l=null,u=decodeURIComponent(this._currentUrl).split("&"),c=0;c<u.length;c++){var h=u[c].split("x=");1<h.length&&(a=h[1]);var f=u[c].split("y=");1<f.length&&(s=f[1])}if(!a||!s){for(var d=0;d<u.length;d++){var p=u[d].split("bbox=");1<p.length&&(l=p[1])}var m=l.split(",");a=(Number(m[0])+Number(m[2]))/2,s=(Number(m[1])+Number(m[3]))/2}var g=this._map.getCenter(),y=(g.lng,g.lat,[Number(a)-e.x/2*i,Number(s)-e.y/2*o]),_=[Number(a)+e.x/2*i,Number(s)+e.y/2*o];return new v.Bounds(y,_)}}),r.overlay=function(e,t){return new r.Overlay(e,t)},r})},{"../src/kq":729,leaflet:473}],44:[function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=void 0,i=function(l){l.MapboxGL=l.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1},initialize:function(e){if(l.setOptions(this,e),!e.accessToken)throw new Error("You should provide a Mapbox GL access token as a token option.");window.mapboxgl.accessToken=e.accessToken,this._throttledUpdate=l.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var t=e.getPanes().tilePane.children.length+1;this._container.style.zIndex=t,e.getPanes().tilePane.appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&l.DomEvent.on(e._proxy,l.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&l.DomEvent.off(this._map._proxy,l.DomUtil.TRANSITION_END,this._transitionEnd,this),e.getPanes().tilePane.removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMapboxMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),t=this._map.latLngToContainerPoint(this._map.getCenter());return l.latLngBounds(this._map.containerPointToLatLng(t.subtract(e)),this._map.containerPointToLatLng(t.add(e)))},getContainer:function(){return this._container},_initContainer:function(){var e=this._container=l.DomUtil.create("div","leaflet-gl-layer"),t=this.getSize(),n=this._map.getSize().multiplyBy(this.options.padding);e.style.width=t.x+"px",e.style.height=t.y+"px";var r=this._map.containerPointToLayerPoint([0,0]).subtract(n);l.DomUtil.setPosition(e,r)},_initGL:function(){var e=this._map.getCenter(),t=l.extend({},this.options,{container:this._container,center:[e.lng,e.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new window.mapboxgl.Map(t),this._glMap.transform.latRange=null,this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var n=this._glMap._actualCanvas;l.DomUtil.addClass(n,"leaflet-image-layer"),l.DomUtil.addClass(n,"leaflet-zoom-animated"),this.options.interactive&&l.DomUtil.addClass(n,"leaflet-interactive"),this.options.className&&l.DomUtil.addClass(n,this.options.className)},_update:function(e){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var t=this.getSize(),n=this._container,r=this._glMap,i=this._map.getSize().multiplyBy(this.options.padding),o=this._map.containerPointToLayerPoint([0,0]).subtract(i);l.DomUtil.setPosition(n,o);var a=this._map.getCenter(),s=r.transform;s.center=window.mapboxgl.LngLat.convert([a.lng,a.lat]),s.zoom=this._map.getZoom()-1,r.transform.width!==t.x||r.transform.height!==t.y?(n.style.width=t.x+"px",n.style.height=t.y+"px",null!==r._resize&&void 0!==r._resize?r._resize():r.resize()):null!==r._update&&void 0!==r._update?r._update():r.update()}},_pinchZoom:function(e){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map.getSize().multiplyBy(this.options.padding*t),r=this.getSize()._divideBy(2),i=this._map.project(e.center,e.zoom)._subtract(r)._add(this._map._getMapPanePos().add(n))._round(),o=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(i);l.DomUtil.setTransform(this._glMap._actualCanvas,o.subtract(this._offset),t)},_zoomStart:function(e){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom()),t=this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),this._map.getZoom(),this._map.getCenter());l.DomUtil.setTransform(this._glMap._actualCanvas,t.subtract(this._offset),e),this._zooming=!1,this._update()},_transitionEnd:function(e){l.Util.requestAnimFrame(function(){var e=this._map.getZoom(),t=this._map.getCenter(),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());l.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",l.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:t,zoom:e-1})},this)},_resize:function(e){this._transitionEnd(e)}}),l.mapboxGL=function(e){return new l.MapboxGL(e)}},"function"==typeof define&&define.amd?define(["leaflet","mapbox-gl"],i):"object"===(void 0===n?"undefined":o(n))?t.exports=i(e("leaflet")):r.returnExports=i(window.L,window.mapboxgl)},{leaflet:473}],45:[function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(e){var t=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(i,o){if(!L.Util.isArray(i))return this.addLayer(i);var a,s=this._featureGroup,l=this._nonPointGroup,u=this.options.chunkedLoading,c=this.options.chunkInterval,h=this.options.chunkProgress,f=i.length,d=0,p=!0;if(this._map){var m=(new Date).getTime(),g=L.bind(function(){for(var e=(new Date).getTime();d<f;d++){if(u&&0==d%200){var t=(new Date).getTime()-e;if(c<t)break}if((a=i[d])instanceof L.LayerGroup)p&&(i=i.slice(),p=!1),this._extractNonGroupLayers(a,i),f=i.length;else if(a.getLatLng){if(!this.hasLayer(a)&&(this._addLayer(a,this._maxZoom),o||this.fire("layeradd",{layer:a}),a.__parent&&2===a.__parent.getChildCount())){var n=a.__parent.getAllChildMarkers(),r=n[0]===a?n[1]:n[0];s.removeLayer(r)}}else l.addLayer(a),o||this.fire("layeradd",{layer:a})}h&&h(d,f,(new Date).getTime()-m),d===f?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(g,this.options.chunkDelay)},this);g()}else for(var e=this._needsClustering;d<f;d++)(a=i[d])instanceof L.LayerGroup?(p&&(i=i.slice(),p=!1),this._extractNonGroupLayers(a,i),f=i.length):a.getLatLng?this.hasLayer(a)||e.push(a):l.addLayer(a);return this},removeLayers:function(e){var t,n,r=e.length,i=this._featureGroup,o=this._nonPointGroup,a=!0;if(!this._map){for(t=0;t<r;t++)(n=e[t])instanceof L.LayerGroup?(a&&(e=e.slice(),a=!1),this._extractNonGroupLayers(n,e),r=e.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var s=e.slice(),l=r;for(t=0;t<l;t++)(n=s[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,s),l=s.length):this._unspiderfyLayer(n)}for(t=0;t<r;t++)(n=e[t])instanceof L.LayerGroup?(a&&(e=e.slice(),a=!1),this._extractNonGroupLayers(n,e),r=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),i.hasLayer(n)&&(i.removeLayer(n),n.clusterShow&&n.clusterShow())):(o.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,r,i,o=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),r=o.length-1;0<=r;r--){for(n=!0,i=a.length-1;0<=i;i--)if(a[i].layer===o[r]){n=!1;break}n&&e.call(t,o[r])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var n=null;return t=parseInt(t,10),this.eachLayer(function(e){L.stamp(e)===t&&(n=e)}),n},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(t,n){"function"!=typeof n&&(n=function(){});var e=function e(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",e,this),this.off("animationend",e,this),t._icon?n():t.__parent._icon&&(this.once("spiderfied",n,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?n():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",e,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",e,this),this.on("animationend",e,this),t.__parent.zoomToBounds())},onAdd:function(e){var t,n,r;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(r=this._needsRemoving[t]).newlatlng=r.layer._latlng,r.layer._latlng=r.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)r=this._needsRemoving[t],this._removeLayer(r.layer,!0),r.layer._latlng=r.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,r=this._gridUnclustered,i=Math.floor(this._map.getMinZoom());i<=t&&r[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){e.target.__dragStart&&this._moveChild(e.target,e.target.__dragStart,e.target._latlng),delete e.target.__dragStart},_removeLayer:function(e,t,n){var r=this._gridClusters,i=this._gridUnclustered,o=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var l,u=e.__parent,c=u._markers;for(this._arraySplice(c,e);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<s));)t&&u._childCount<=1?(l=u._markers[0]===e?u._markers[1]:u._markers[0],r[u._zoom].removeObject(u,a.project(u._cLatLng,u._zoom)),i[u._zoom].addObject(l,a.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(o.removeLayer(u),n||o.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick;(t||r)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,n=t;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,r=this._map;(e||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,r=n;"function"!=typeof n&&(r=function(){return n}),null!==this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var i=e;t<=i;i--)this._gridClusters[i]=new L.DistanceGrid(r(i)),this._gridUnclustered[i]=new L.DistanceGrid(r(i));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,r,i=this._gridClusters,o=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);a<=t;t--){n=this._map.project(e.getLatLng(),t);var s=i[t].getNearObject(n);if(s)return s._addChild(e),void(e.__parent=s);if(s=o[t].getNearObject(n)){var l=s.__parent;l&&this._removeLayer(s,!1);var u=new this._markerCluster(this,t,s,e);i[t].addObject(u,this._map.project(u._cLatLng,t)),s.__parent=u;var c=e.__parent=u;for(r=t-1;r>l._zoom;r--)c=new this._markerCluster(this,r,c),i[r].addObject(c,this._map.project(s.getLatLng(),r));return l._addChild(c),void this._removeFromGridUnclustered(s,t)}o[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return void 0!==t&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,r=e.getLayers(),i=0;for(t=t||[];i<r.length;i++)(n=r[i])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,o){var a,s=this._getExpandedVisibleBounds(),l=this._featureGroup,e=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(s,i,e,function(e){var t,n=e._latlng,r=e._markers;for(s.contains(n)||(n=null),e._isSingleParent()&&i+1===o?(l.removeLayer(e),e._recursivelyAddChildrenToMap(null,o,s)):(e.clusterHide(),e._recursivelyAddChildrenToMap(n,o,s)),a=r.length-1;0<=a;a--)t=r[a],s.contains(t._latlng)||l.removeLayer(t)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,o),l.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(s,i,o,function(e){e._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,i,e,function(e){l.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,r=this._featureGroup;r.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){r.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,n,r){var i=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(i,o,n+1,r);var a=this;this._forceLayout(),t._recursivelyBecomeVisible(i,r),this._enqueue(function(){if(1===t._childCount){var e=t._markers[0];this._ignoreMove=!0,e.setLatLng(e.getLatLng()),this._ignoreMove=!1,e.clusterShow&&e.clusterShow()}else t._recursively(i,r,o,function(e){e._recursivelyRemoveChildrenFromMap(i,o,n+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,r){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),r&&this._addChild(r)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;0<=t;t--)this._childClusters[t].getAllChildMarkers(e);for(var n=this._markers.length-1;0<=n;n--)e.push(this._markers[n]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),r=this._group._map,i=r.getBoundsZoom(this._bounds),o=this._zoom+1,a=r.getZoom();0<n.length&&o<i;){o++;var s=[];for(t=0;t<n.length;t++)s=s.concat(n[t]._childClusters);n=s}o<i?this._group._map.setView(this._latlng,o):i<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,r,i=this._markers,o=this._childClusters,a=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<i.length;e++)n=i[e]._latlng,this._bounds.extend(n),a+=n.lat,s+=n.lng;for(e=0;e<o.length;e++)(t=o[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,r=t._childCount,a+=n.lat*r,s+=n.lng*r;this._latlng=this._wLatLng=new L.LatLng(a/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,i,t){this._recursively(e,this._group._map.getMinZoom(),t-1,function(e){var t,n,r=e._markers;for(t=r.length-1;0<=t;t--)(n=r[t])._icon&&(n._setPos(i),n.clusterHide())},function(e){var t,n,r=e._childClusters;for(t=r.length-1;0<=t;t--)(n=r[t])._icon&&(n._setPos(i),n.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,n,r,i){this._recursively(t,i,n,function(e){e._recursivelyAnimateChildrenIn(t,e._group._map.latLngToLayerPoint(e.getLatLng()).round(),r),e._isSingleParent()&&r-1===i?(e.clusterShow(),e._recursivelyRemoveChildrenFromMap(t,n,r)):e.clusterHide(),e._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(r,i,o){this._recursively(o,this._group._map.getMinZoom()-1,i,function(e){if(i!==e._zoom)for(var t=e._markers.length-1;0<=t;t--){var n=e._markers[t];o.contains(n._latlng)&&(r&&(n._backupLatlng=n.getLatLng(),n.setLatLng(r),n.clusterHide&&n.clusterHide()),e._group._featureGroup.addLayer(n))}},function(e){e._addToMap(r)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var r=this._childClusters.length-1;0<=r;r--)this._childClusters[r]._restorePosition();else for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,r){var i,o;this._recursively(e,t-1,n-1,function(e){for(o=e._markers.length-1;0<=o;o--)i=e._markers[o],r&&r.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(e){for(o=e._childClusters.length-1;0<=o;o--)i=e._childClusters[o],r&&r.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(e,t,n,r,i){var o,a,s=this._childClusters,l=this._zoom;if(t<=l&&(r&&r(this),i&&l===n&&i(this)),l<t||l<n)for(o=s.length-1;0<=o;o--)a=s[o],e.intersects(a._bounds)&&a._recursively(e,t,n,r,i)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),r=this._getCoord(t.y),i=this._grid,o=i[r]=i[r]||{},a=o[n]=o[n]||[],s=L.Util.stamp(e);this._objectPoint[s]=t,a.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,r,i=this._getCoord(t.x),o=this._getCoord(t.y),a=this._grid,s=a[o]=a[o]||{},l=s[i]=s[i]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,r=l.length;n<r;n++)if(l[n]===e)return l.splice(n,1),1===r&&delete s[i],!0},eachObject:function(e,t){var n,r,i,o,a,s,l=this._grid;for(n in l)for(r in a=l[n])for(i=0,o=(s=a[r]).length;i<o;i++)e.call(t,s[i])&&(i--,o--)},getNearObject:function(e){var t,n,r,i,o,a,s,l,u=this._getCoord(e.x),c=this._getCoord(e.y),h=this._objectPoint,f=this._sqCellSize,d=null;for(t=c-1;t<=c+1;t++)if(i=this._grid[t])for(n=u-1;n<=u+1;n++)if(o=i[n])for(r=0,a=o.length;r<a;r++)s=o[r],((l=this._sqDist(h[L.Util.stamp(s)],e))<f||l<=f&&null===d)&&(f=l,d=s);return d},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,r,i,o=0,a=null,s=[];for(n=t.length-1;0<=n;n--)r=t[n],0<(i=this.getDistant(r,e))&&(s.push(r),o<i&&(o=i,a=r));return{maxPoint:a,newPoints:s}},buildConvexHull:function(e,t){var n=[],r=this.findMostDistantPointFromBaseLine(e,t);return r.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],r.maxPoint],r.newPoints))).concat(this.buildConvexHull([r.maxPoint,e[1]],r.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,r=!1,i=!1,o=!1,a=null,s=null,l=null,u=null,c=null,h=null;for(t=e.length-1;0<=t;t--){var f=e[t];(!1===n||f.lat>n)&&(n=(a=f).lat),(!1===r||f.lat<r)&&(r=(s=f).lat),(!1===i||f.lng>i)&&(i=(l=f).lng),(!1===o||f.lng<o)&&(o=(u=f).lng)}return c=r!==n?(h=s,a):(h=u,l),[].concat(this.buildConvexHull([h,c],e),this.buildConvexHull([c,h],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),r=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),r.push(e);return L.QuickHull.getConvexHull(r)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e=t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,r,i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,o=this._2PI/e,a=[];for(i=Math.max(i,35),a.length=e,n=0;n<e;n++)r=this._circleStartAngle+n*o,a[n]=new L.Point(t.x+i*Math.cos(r),t.y+i*Math.sin(r))._round();return a},_generatePointsSpiral:function(e,t){var n,r=this._group.options.spiderfyDistanceMultiplier,i=r*this._spiralLengthStart,o=r*this._spiralFootSeparation,a=r*this._spiralLengthFactor*this._2PI,s=0,l=[];for(n=l.length=e;0<=n;n--)n<e&&(l[n]=new L.Point(t.x+i*Math.cos(s),t.y+i*Math.sin(s))._round()),i+=a/(s+=o/i+5e-4*n);return l},_noanimationUnspiderfy:function(){var e,t,n=this._group,r=n._map,i=n._featureGroup,o=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),t=o.length-1;0<=t;t--)e=o[t],i.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(r.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,r,i,o,a=this._group,s=a._map,l=a._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,n=0;n<e.length;n++)o=s.layerPointToLatLng(t[n]),r=e[n],i=new L.Polyline([this._latlng,o],u),s.addLayer(i),r._spiderLeg=i,r._preSpiderfyLatlng=r._latlng,r.setLatLng(o),r.setZIndexOffset&&r.setZIndexOffset(1e6),l.addLayer(r);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,r,i,o,a,s,l=this,u=this._group,c=u._map,h=u._featureGroup,f=this._latlng,d=c.latLngToLayerPoint(f),p=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),g=m.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=g,u._ignoreMove=!0,n=0;n<e.length;n++)r=e[n],s=c.layerPointToLatLng(t[n]),i=new L.Polyline([f,s],m),c.addLayer(i),r._spiderLeg=i,p&&(a=(o=i._path).getTotalLength()+.1,o.style.strokeDasharray=a,o.style.strokeDashoffset=a),r.setZIndexOffset&&r.setZIndexOffset(1e6),r.clusterHide&&r.clusterHide(),h.addLayer(r),r._setPos&&r._setPos(d);for(u._forceLayout(),u._animationStart(),n=e.length-1;0<=n;n--)s=c.layerPointToLatLng(t[n]),(r=e[n])._preSpiderfyLatlng=r._latlng,r.setLatLng(s),r.clusterShow&&r.clusterShow(),p&&((o=(i=r._spiderLeg)._path).style.strokeDashoffset=0,i.setStyle({opacity:g}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:l,markers:e})},200)},_animationUnspiderfy:function(e){var t,n,r,i,o,a,s=this,l=this._group,u=l._map,c=l._featureGroup,h=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),d=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=f.length-1;0<=n;n--)(t=f[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,a=!0,t._setPos&&(t._setPos(h),a=!1),t.clusterHide&&(t.clusterHide(),a=!1),a&&c.removeLayer(t),d&&(o=(i=(r=t._spiderLeg)._path).getTotalLength()+.1,i.style.strokeDashoffset=o,r.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(n=f.length-1;0<=n;n--)(t=f[n])._spiderLeg&&e++;for(n=f.length-1;0<=n;n--)(t=f[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<e&&c.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),e.MarkerClusterGroup=t,e.MarkerCluster=n},"object"==((r=void 0)===n?"undefined":o(n))&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r.Leaflet=r.Leaflet||{},r.Leaflet.markercluster=r.Leaflet.markercluster||{}))},{}],46:[function(h,e,t){(function(n){"use strict";var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function o(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof h&&h;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var c="function"==typeof h&&h,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){},{}],2:[function(e,t,n){function i(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s==a?t=0:r==s?t=(i-o)/l:i==s?t=2+(o-r)/l:o==s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s==a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]}function o(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return n=0==s?0:l/s*1e3/10,s==a?t=0:r==s?t=(i-o)/l:i==s?t=2+(o-r)/l:o==s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,n,s/255*1e3/10]}function a(e){var t=e[0],n=e[1],r=e[2];return[i(e)[0],1/255*Math.min(t,Math.min(n,r))*100,100*(r=1-1/255*Math.max(t,Math.max(n,r)))]}function s(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]}function l(e){return C[JSON.stringify(e)]}function u(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=.04045<r?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]}function c(e){var t=u(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=.008856<(n/=95.047)?Math.pow(n,1/3):7.787*n+16/116,[116*(r=.008856<r?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116))]}function h(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[o=255*l,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,1<r&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*o;return i}function f(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}}function d(e){var t,n,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100,u=s+l;switch(1<u&&(s/=u,l/=u),i=6*a-(t=Math.floor(6*a)),0!=(1&t)&&(i=1-i),o=s+i*((n=1-l)-s),t){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function p(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]}function m(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=.0031308<(t=3.2406*i+-1.5372*o+-.4986*a)?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]}function y(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=.008856<r?Math.pow(r,1/3):7.787*r+16/116))]}function _(e){var t,n,r,i,o=e[0],a=e[1],s=e[2];return i=o<=8?(n=100*o/903.3)/100*7.787+16/116:(n=100*Math.pow((o+16)/116,3),Math.pow(n/100,1/3)),[t=t/95.047<=.008856?t=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),n,r=r/108.883<=.008859?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function v(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]}function w(e){return m(_(e))}function x(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]}function k(e){return L[e]}t.exports={rgb2hsl:i,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:l,rgb2xyz:u,rgb2lab:c,rgb2lch:function(e){return v(c(e))},hsl2rgb:h,hsl2hsv:function(e){var t=e[0],n=e[1]/100,r=e[2]/100;return 0===r?[0,0,0]:[t,2*(n*=(r*=2)<=1?r:2-r)/(r+n)*100,(r+n)/2*100]},hsl2hwb:function(e){return a(h(e))},hsl2cmyk:function(e){return s(h(e))},hsl2keyword:function(e){return l(h(e))},hsv2rgb:f,hsv2hsl:function(e){var t,n,r=e[0],i=e[1]/100,o=e[2]/100;return t=i*o,[r,100*(t=(t/=(n=(2-i)*o)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(e){return a(f(e))},hsv2cmyk:function(e){return s(f(e))},hsv2keyword:function(e){return l(f(e))},hwb2rgb:d,hwb2hsl:function(e){return i(d(e))},hwb2hsv:function(e){return o(d(e))},hwb2cmyk:function(e){return s(d(e))},hwb2keyword:function(e){return l(d(e))},cmyk2rgb:p,cmyk2hsl:function(e){return i(p(e))},cmyk2hsv:function(e){return o(p(e))},cmyk2hwb:function(e){return a(p(e))},cmyk2keyword:function(e){return l(p(e))},keyword2rgb:k,keyword2hsl:function(e){return i(k(e))},keyword2hsv:function(e){return o(k(e))},keyword2hwb:function(e){return a(k(e))},keyword2cmyk:function(e){return s(k(e))},keyword2lab:function(e){return c(k(e))},keyword2xyz:function(e){return u(k(e))},xyz2rgb:m,xyz2lab:y,xyz2lch:function(e){return v(y(e))},lab2xyz:_,lab2rgb:w,lab2lch:v,lch2lab:x,lch2xyz:function(e){return _(x(e))},lch2rgb:function(e){return w(x(e))}};var L={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C={};for(var S in L)C[JSON.stringify(L[S])]=S},{}],3:[function(e,t,n){var i=e("./conversions"),o=function(){return new u};for(var r in i){o[r+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),i[t](e)}}(r);var a=/(\w+)2(\w+)/.exec(r),s=a[1],l=a[2];(o[s]=o[s]||{})[l]=o[r]=function(r){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var t=i[r](e);if("string"==typeof t||void 0===t)return t;for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]);return t}}(r)}var u=function(){this.convs={}};u.prototype.routeSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n))},u.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},u.prototype.getValues=function(e){var t=this.convs[e];if(!t){var n=this.space,r=this.convs[n];t=o[n][e](r),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){u.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),t.exports=o},{"./conversions":2}],4:[function(e,t,n){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(e,t,n){var o=e("color-name");function r(e){if(e){var t=[0,0,0],n=1,r=e.match(/^#([a-fA-F0-9]{3})$/);if(r){r=r[1];for(var i=0;i<t.length;i++)t[i]=parseInt(r[i]+r[i],16)}else if(r=e.match(/^#([a-fA-F0-9]{6})$/))for(r=r[1],i=0;i<t.length;i++)t[i]=parseInt(r.slice(2*i,2*i+2),16);else if(r=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<t.length;i++)t[i]=parseInt(r[i+1]);n=parseFloat(r[4])}else if(r=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<t.length;i++)t[i]=Math.round(2.55*parseFloat(r[i+1]));n=parseFloat(r[4])}else if(r=e.match(/(\D+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(t=o[r[1]]))return}for(i=0;i<t.length;i++)t[i]=c(t[i],0,255);return n=n||0==n?c(n,0,1):1,t[3]=n,t}}function i(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[c(parseInt(t[1]),0,360),c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}}}function a(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[c(parseInt(t[1]),0,360),c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}}}function s(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function l(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function u(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function c(e,t,n){return Math.min(Math.max(t,e),n)}function h(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}t.exports={getRgba:r,getHsla:i,getRgb:function(e){var t=r(e);return t&&t.slice(0,3)},getHsl:function(e){var t=i(e);return t&&t.slice(0,3)},getHwb:a,getAlpha:function(e){var t=r(e);return t?t[3]:(t=i(e))?t[3]:(t=a(e))?t[3]:void 0},hexString:function(e){return"#"+h(e[0])+h(e[1])+h(e[2])},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?s(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:s,percentString:function(e,t){return t<1||e[3]&&e[3]<1?l(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:l,hslString:function(e,t){return t<1||e[3]&&e[3]<1?u(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:u,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return f[e.slice(0,3)]}};var f={};for(var d in o)f[o[d]]=d},{"color-name":4}],6:[function(e,t,n){var u=e("color-convert"),r=e("color-string"),i=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof t)if(n=r.getRgba(t))this.setValues("rgb",n);else if(n=r.getHsla(t))this.setValues("hsl",n);else{if(!(n=r.getHwb(t)))throw new Error('Unable to parse color from string "'+t+'"');this.setValues("hwb",n)}else if("object"==(void 0===t?"undefined":G(t))){var n;if(void 0!==(n=t).r||void 0!==n.red)this.setValues("rgb",n);else if(void 0!==n.l||void 0!==n.lightness)this.setValues("hsl",n);else if(void 0!==n.v||void 0!==n.value)this.setValues("hsv",n);else if(void 0!==n.w||void 0!==n.whiteness)this.setValues("hwb",n);else{if(void 0===n.c&&void 0===n.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(t));this.setValues("cmyk",n)}}};(i.prototype={rgb:function(e){return this.setSpace("rgb",arguments)},hsl:function(e){return this.setSpace("hsl",arguments)},hsv:function(e){return this.setSpace("hsv",arguments)},hwb:function(e){return this.setSpace("hwb",arguments)},cmyk:function(e){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){return this.values.rgb.concat([this.values.alpha])},hslaArray:function(){return this.values.hsl.concat([this.values.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return r.hexString(this.values.rgb)},rgbString:function(){return r.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return r.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return r.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return r.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return r.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return r.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return r.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return n<t?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return 7.1<=t?"AAA":4.5<=t?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){return this.values.hsl[2]+=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},darken:function(e){return this.values.hsl[2]-=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},saturate:function(e){return this.values.hsl[1]+=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},desaturate:function(e){return this.values.hsl[1]-=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},whiten:function(e){return this.values.hwb[1]+=this.values.hwb[1]*e,this.setValues("hwb",this.values.hwb),this},blacken:function(e){return this.values.hwb[2]+=this.values.hwb[2]*e,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){return this.setValues("alpha",this.values.alpha-this.values.alpha*e),this},opaquer:function(e){return this.setValues("alpha",this.values.alpha+this.values.alpha*e),this},rotate:function(e){var t=this.values.hsl[0];return t=(t=(t+e)%360)<0?360+t:t,this.values.hsl[0]=t,this.setValues("hsl",this.values.hsl),this},mix:function(e,t){for(var n=2*(t=1-(null==t?.5:t))-1,r=this.alpha()-e.alpha(),i=((n*r==-1?n:(n+r)/(1+n*r))+1)/2,o=1-i,a=this.rgbArray(),s=e.rgbArray(),l=0;l<a.length;l++)a[l]=a[l]*i+s[l]*o;this.setValues("rgb",a);var u=this.alpha()*t+e.alpha()*(1-t);return this.setValues("alpha",u),this},toJSON:function(){return this.rgb()},clone:function(){return new i(this.rgb())}}).getValues=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=this.values[e][n];return 1!=this.values.alpha&&(t.a=this.values.alpha),t},i.prototype.setValues=function(e,t){var n={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},r={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},i=1;if("alpha"==e)i=t;else if(t.length)this.values[e]=t.slice(0,e.length),i=t[e.length];else if(void 0!==t[e.charAt(0)]){for(var o=0;o<e.length;o++)this.values[e][o]=t[e.charAt(o)];i=t.a}else if(void 0!==t[n[e][0]]){var a=n[e];for(o=0;o<e.length;o++)this.values[e][o]=t[a[o]];i=t.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==i?i:this.values.alpha)),"alpha"!=e){for(o=0;o<e.length;o++){var s=Math.max(0,Math.min(r[e][o],this.values[e][o]));this.values[e][o]=Math.round(s)}for(var l in n)for(l!=e&&(this.values[l]=u[e][l](this.values[e])),o=0;o<l.length;o++)s=Math.max(0,Math.min(r[l][o],this.values[l][o])),this.values[l][o]=Math.round(s);return!0}},i.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},i.prototype.setChannel=function(e,t,n){return void 0===n?this.values[e][t]:(this.values[e][t]=n,this.setValues(e,this.values[e]),this)},t.exports=i},{"color-convert":3,"color-string":5}],7:[function(e,t,n){t.exports=e("./lib/geocrunch")},{"./lib/geocrunch":12}],8:[function(e,t,n){var r=e("underscore"),a=e("./constants").EARTHRADIUS,s=e("./units"),i=e("./flipcoords"),o={sqmeters:function(e){return e},sqmiles:function(e){return s.sqMeters.toSqMiles(e)},acres:function(e){return s.sqMeters.toAcres(e)}};t.exports={_internalAreaCalc:function(){this._calcedArea||(this._coords.length<3?this._calcedArea=0:this._calcedArea=function(e){var t,n,r,i,o=0;for(t=0,n=e.length;t<n;t+=1)r=e[t],i=e[(t+1)%e.length],o+=s.degrees.toRadians(i[0]-r[0])*(2+Math.sin(s.degrees.toRadians(r[1]))+Math.sin(s.degrees.toRadians(i[1])));return Math.abs(o*a*a/2)}(this._coords))},_internalCenterCalc:function(){!this._calcedCenter&&this._coords.length&&(this._calcedCenter=function(e){var t,n,r,i,o,a=e[0],s=0,l=0,u=0;if(1===e.length)return e[0];for(t=0,n=e.length;t<n;t+=1)r=e[t],i=e[(t+1)%e.length],s+=o=(r[1]-a[1])*(i[0]-a[0])-(i[1]-a[1])*(r[0]-a[0]),l+=(r[0]+i[0]-2*a[0])*o,u+=(r[1]+i[1]-2*a[1])*o;return[l/(o=3*s)+a[0],u/o+a[1]]}(this._coords))},area:function(e){var t=r.extend({units:"sqmeters"},e);if(this._internalAreaCalc(),r.isFunction(o[t.units]))return o[t.units](this._calcedArea)},center:function(){return this._internalCenterCalc(),!0===this._options.imBackwards?i(this._calcedCenter):this._calcedCenter}}},{"./constants":9,"./flipcoords":11,"./units":14,underscore:15}],9:[function(e,t,n){t.exports={EARTHRADIUS:6371e3}},{}],10:[function(e,t,n){var r=e("underscore"),f=e("./constants").EARTHRADIUS,d=e("./units"),i={meters:function(e){return e},kilometers:function(e){return d.meters.toKilometers(e)},feet:function(e){return d.meters.toFeet(e)},miles:function(e){return d.meters.toMiles(e)}};t.exports={_internalDistanceCalc:function(){var e,t,n,r,i,o,a,s,l,u,c,h=0;if(!this._calcedDistance){for(e=0,t=this._coords.length;e<t;e+=1)0<e&&(h+=(n=this._coords[e-1],r=this._coords[e],i=d.degrees.toRadians(n[0]-r[0]),o=d.degrees.toRadians(n[1]-r[1]),a=d.degrees.toRadians(n[1]),s=d.degrees.toRadians(r[1]),l=Math.sin(i/2),c=(u=Math.sin(o/2))*u+l*l*Math.cos(a)*Math.cos(s),2*f*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))));this._calcedDistance=h}},distance:function(e){var t=r.extend({units:"meters"},e);if(this._internalDistanceCalc(),r.isFunction(i[t.units]))return i[t.units](this._calcedDistance)}}},{"./constants":9,"./units":14,underscore:15}],11:[function(e,t,n){var r=e("underscore");t.exports=function(e){return r.map(e,function(e){return[e[1],e[0]]})}},{underscore:15}],12:[function(e,t,n){var r=e("underscore"),i=e("./path"),o=e("./distance"),a=e("./area");r.extend(i.prototype,o,a),n.path=function(e,t){return new i(e,t)}},{"./area":8,"./distance":10,"./path":13,underscore:15}],13:[function(e,t,n){var r=e("./flipcoords");t.exports=function(e,t){this._options=t||{},e=e||[],this._coords=!0===this._options.imBackwards?r(e):e}},{"./flipcoords":11}],14:[function(e,t,n){n.meters={toFeet:function(e){return 3.28084*e},toKilometers:function(e){return.001*e},toMiles:function(e){return 621371e-9*e}},n.sqMeters={toSqMiles:function(e){return 3.86102e-7*e},toAcres:function(e){return 247105e-9*e}},n.degrees={toRadians:function(e){return e*Math.PI/180}}},{}],15:[function(e,R,B){(function(){var e=this,t=e._,a={},i=Array.prototype,n=Object.prototype,r=Function.prototype,o=i.push,s=i.slice,l=i.concat,f=n.toString,u=n.hasOwnProperty,c=i.forEach,h=i.map,d=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,y=i.some,_=i.indexOf,v=i.lastIndexOf,b=Array.isArray,w=Object.keys,x=r.bind,k=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};void 0!==B?(void 0!==R&&R.exports&&(B=R.exports=k),B._=k):e._=k,k.VERSION="1.5.2";var L=k.each=k.forEach=function(e,t,n){if(null!=e)if(c&&e.forEach===c)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===a)return}else{var o=k.keys(e);for(r=0,i=o.length;r<i;r++)if(t.call(n,e[o[r]],o[r],e)===a)return}};k.map=k.collect=function(e,r,i){var o=[];return null==e?o:h&&e.map===h?e.map(r,i):(L(e,function(e,t,n){o.push(r.call(i,e,t,n))}),o)};var C="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,r,i,o){var a=2<arguments.length;if(null==e&&(e=[]),d&&e.reduce===d)return o&&(r=k.bind(r,o)),a?e.reduce(r,i):e.reduce(r);if(L(e,function(e,t,n){a?i=r.call(o,i,e,t,n):(i=e,a=!0)}),!a)throw new TypeError(C);return i},k.reduceRight=k.foldr=function(r,i,o,a){var s=2<arguments.length;if(null==r&&(r=[]),p&&r.reduceRight===p)return a&&(i=k.bind(i,a)),s?r.reduceRight(i,o):r.reduceRight(i);var l=r.length;if(l!==+l){var u=k.keys(r);l=u.length}if(L(r,function(e,t,n){t=u?u[--l]:--l,s?o=i.call(a,o,r[t],t,n):(o=r[t],s=!0)}),!s)throw new TypeError(C);return o},k.find=k.detect=function(e,r,i){var o;return S(e,function(e,t,n){if(r.call(i,e,t,n))return o=e,!0}),o},k.filter=k.select=function(e,r,i){var o=[];return null==e?o:m&&e.filter===m?e.filter(r,i):(L(e,function(e,t,n){r.call(i,e,t,n)&&o.push(e)}),o)},k.reject=function(e,r,i){return k.filter(e,function(e,t,n){return!r.call(i,e,t,n)},i)},k.every=k.all=function(e,r,i){r||(r=k.identity);var o=!0;return null==e?o:g&&e.every===g?e.every(r,i):(L(e,function(e,t,n){if(!(o=o&&r.call(i,e,t,n)))return a}),!!o)};var S=k.some=k.any=function(e,r,i){r||(r=k.identity);var o=!1;return null==e?o:y&&e.some===y?e.some(r,i):(L(e,function(e,t,n){if(o||(o=r.call(i,e,t,n)))return a}),!!o)};k.contains=k.include=function(e,t){return null!=e&&(_&&e.indexOf===_?-1!=e.indexOf(t):S(e,function(e){return e===t}))},k.invoke=function(e,t){var n=s.call(arguments,2),r=k.isFunction(t);return k.map(e,function(e){return(r?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,n,t){return k.isEmpty(n)?t?void 0:[]:k[t?"find":"filter"](e,function(e){for(var t in n)if(n[t]!==e[t])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,i,o){if(!i&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!i&&k.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return L(e,function(e,t,n){var r=i?i.call(o,e,t,n):e;r>a.computed&&(a={value:e,computed:r})}),a.value},k.min=function(e,i,o){if(!i&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!i&&k.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return L(e,function(e,t,n){var r=i?i.call(o,e,t,n):e;r<a.computed&&(a={value:e,computed:r})}),a.value},k.shuffle=function(e){var t,n=0,r=[];return L(e,function(e){t=k.random(n++),r[n-1]=r[t],r[t]=e}),r},k.sample=function(e,t,n){return arguments.length<2||n?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var M=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(e,t,r){var i=M(t);return k.pluck(k.map(e,function(e,t,n){return{value:e,index:t,criteria:i.call(r,e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(s){return function(r,e,i){var o={},a=null==e?k.identity:M(e);return L(r,function(e,t){var n=a.call(i,e,t,r);s(o,n,e)}),o}};k.groupBy=P(function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)}),k.indexBy=P(function(e,t,n){e[t]=n}),k.countBy=P(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,r){for(var i=(n=null==n?k.identity:M(n)).call(r,t),o=0,a=e.length;o<a;){var s=o+a>>>1;n.call(r,e[s])<i?o=s+1:a=s}return o},k.toArray=function(e){return e?k.isArray(e)?s.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:s.call(e,0,t)},k.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};k.flatten=function(e,t){return function t(e,n,r){return n&&k.every(e,k.isArray)?l.apply(r,e):(L(e,function(e){k.isArray(e)||k.isArguments(e)?n?o.apply(r,e):t(e,n,r):r.push(e)}),r)}(e,t,[])},k.without=function(e){return k.difference(e,s.call(arguments,1))},k.uniq=k.unique=function(n,r,e,t){k.isFunction(r)&&(t=e,e=r,r=!1);var i=e?k.map(n,e,t):n,o=[],a=[];return L(i,function(e,t){(r?t&&a[a.length-1]===e:k.contains(a,e))||(a.push(e),o.push(n[t]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var n=s.call(arguments,1);return k.filter(k.uniq(e),function(t){return k.every(n,function(e){return 0<=k.indexOf(e,t)})})},k.difference=function(e){var t=l.apply(i,s.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;n<e;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return e[r=k.sortedIndex(e,t)]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(v&&e.lastIndexOf===v)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);i<r;)o[i++]=e,e+=n;return o};var E=function(){};k.bind=function(n,r){var i,o;if(x&&n.bind===x)return x.apply(n,s.call(arguments,1));if(!k.isFunction(n))throw new TypeError;return i=s.call(arguments,2),o=function(){if(!(this instanceof o))return n.apply(r,i.concat(s.call(arguments)));E.prototype=n.prototype;var e=new E;E.prototype=null;var t=n.apply(e,i.concat(s.call(arguments)));return Object(t)===t?t:e}},k.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},k.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return L(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,n){var r={};return n||(n=k.identity),function(){var e=n.apply(this,arguments);return k.has(r,e)?r[e]:r[e]=t.apply(this,arguments)}},k.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(s.call(arguments,1)))},k.throttle=function(n,r,i){var o,a,s,l=null,u=0;i||(i={});var c=function(){u=!1===i.leading?0:new Date,l=null,s=n.apply(o,a)};return function(){var e=new Date;u||!1!==i.leading||(u=e);var t=r-(e-u);return o=this,a=arguments,t<=0?(clearTimeout(l),l=null,u=e,s=n.apply(o,a)):l||!1===i.trailing||(l=setTimeout(c,t)),s}},k.debounce=function(n,r,i){var o,a,s,l,u;return function(){s=this,a=arguments,l=new Date;var e=i&&!o;return o||(o=setTimeout(function e(){var t=new Date-l;t<r?o=setTimeout(e,r-t):(o=null,i||(u=n.apply(s,a)))},r)),e&&(u=n.apply(s,a)),u}},k.once=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}},k.wrap=function(t,n){return function(){var e=[t];return o.apply(e,arguments),n.apply(this,e)}},k.compose=function(){var n=arguments;return function(){for(var e=arguments,t=n.length-1;0<=t;t--)e=[n[t].apply(this,e)];return e[0]}},k.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},k.pairs=function(e){for(var t=k.keys(e),n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},k.invert=function(e){for(var t={},n=k.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(n){return L(s.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},k.pick=function(t){var n={},e=l.apply(i,s.call(arguments,1));return L(e,function(e){e in t&&(n[e]=t[e])}),n},k.omit=function(e){var t={},n=l.apply(i,s.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(n){return L(s.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};k.isEqual=function(e,t){return function e(t,n,r,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof k&&(t=t._wrapped),n instanceof k&&(n=n._wrapped);var o=f.call(t);if(o!=f.call(n))return!1;switch(o){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=(void 0===t?"undefined":G(t))||"object"!=(void 0===n?"undefined":G(n)))return!1;for(var a=r.length;a--;)if(r[a]==t)return i[a]==n;var s=t.constructor,l=n.constructor;if(s!==l&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(l)&&l instanceof l))return!1;r.push(t),i.push(n);var u=0,c=!0;if("[object Array]"==o){if(c=(u=t.length)==n.length)for(;u--&&(c=e(t[u],n[u],r,i)););}else{for(var h in t)if(k.has(t,h)&&(u++,!(c=k.has(n,h)&&e(t[h],n[h],r,i))))break;if(c){for(h in n)if(k.has(n,h)&&!u--)break;c=!u}}return r.pop(),i.pop(),c}(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=b||function(e){return"[object Array]"==f.call(e)},k.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==f.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;i<e;i++)r[i]=t.call(n,i);return r},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=k.invert(T.escape);var I={escape:new RegExp("["+k.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(T.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return T[t][e]})}}),k.result=function(e,t){if(null!=e){var n=e[t];return k.isFunction(n)?n.call(e):n}},k.mixin=function(n){L(k.functions(n),function(e){var t=k[e]=n[e];k.prototype[e]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,t.apply(k,e))}})};var O=0;k.uniqueId=function(e){var t=++O+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(o,e,t){var n;t=k.defaults({},t,k.templateSettings);var r=new RegExp([(t.escape||D).source,(t.interpolate||D).source,(t.evaluate||D).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(r,function(e,t,n,r,i){return s+=o.slice(a,i).replace(A,function(e){return"\\"+N[e]}),t&&(s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=i+e.length,e}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(e)return n(e,k);var i=function(e){return n.call(this,e,k)};return i.source="function("+(t.variable||"obj")+"){\n"+s+"}",i},k.chain=function(e){return k(e).chain()};var j=function(e){return this._chain?k(e).chain():e};k.mixin(k),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];k.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],j.call(this,e)}}),L(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],16:[function(e,n,r){(function(){var e=this,t=e.humanize,h={};void 0!==r?(void 0!==n&&n.exports&&(r=n.exports=h),r.humanize=h):("function"==typeof define&&define.amd&&define("humanize",function(){return h}),e.humanize=h),h.noConflict=function(){return e.humanize=t,this},h.pad=function(e,t,n,r){if(e+="",n?1<n.length&&(n=n.charAt(0)):n=" ","right"==(r=void 0===r?"left":"right"))for(;e.length<t;)e+=n;else for(;e.length<t;)e=n+e;return e},h.time=function(){return(new Date).getTime()/1e3};var l=[0,0,31,59,90,120,151,181,212,243,273,304,334],u=[0,0,31,60,91,121,152,182,213,244,274,305,335];h.date=function(e,t){var r=void 0===t?new Date:t instanceof Date?new Date(t):new Date(1e3*t),n=/\\?([a-z])/gi,i=function(e,t){return s[e]?s[e]():t},o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],s={d:function(){return h.pad(s.j(),2,"0")},D:function(){return s.l().slice(0,3)},j:function(){return r.getDate()},l:function(){return o[s.w()]},N:function(){return s.w()||7},S:function(){var e=s.j();return 4<e&&e<21?"th":{1:"st",2:"nd",3:"rd"}[e%10]||"th"},w:function(){return r.getDay()},z:function(){return(s.L()?u[s.n()]:l[s.n()])+s.j()-1},W:function(){var e=s.z()-s.N()+1.5;return h.pad(1+Math.floor(Math.abs(e)/7)+(3.5<e%7?1:0),2,"0")},F:function(){return a[r.getMonth()]},m:function(){return h.pad(s.n(),2,"0")},M:function(){return s.F().slice(0,3)},n:function(){return r.getMonth()+1},t:function(){return new Date(s.Y(),s.n(),0).getDate()},L:function(){return 1===new Date(s.Y(),1,29).getMonth()?1:0},o:function(){var e=s.n(),t=s.W();return s.Y()+(12===e&&t<9?-1:1===e&&9<t)},Y:function(){return r.getFullYear()},y:function(){return String(s.Y()).slice(-2)},a:function(){return 11<r.getHours()?"pm":"am"},A:function(){return s.a().toUpperCase()},B:function(){var e=r.getTime()/1e3,t=e%86400+3600;t<0&&(t+=86400);var n=t/86.4%1e3;return e<0?Math.ceil(n):Math.floor(n)},g:function(){return s.G()%12||12},G:function(){return r.getHours()},h:function(){return h.pad(s.g(),2,"0")},H:function(){return h.pad(s.G(),2,"0")},i:function(){return h.pad(r.getMinutes(),2,"0")},s:function(){return h.pad(r.getSeconds(),2,"0")},u:function(){return h.pad(1e3*r.getMilliseconds(),6,"0")},O:function(){var e=r.getTimezoneOffset(),t=Math.abs(e);return(0<e?"-":"+")+h.pad(100*Math.floor(t/60)+t%60,4,"0")},P:function(){var e=s.O();return e.substr(0,3)+":"+e.substr(3,2)},Z:function(){return 60*-r.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(n,i)},r:function(){return"D, d M Y H:i:s O".replace(n,i)},U:function(){return r.getTime()/1e3||0}};return e.replace(n,i)},h.numberFormat=function(e,t,n,r){t=isNaN(t)?2:Math.abs(t),n=void 0===n?".":n,r=void 0===r?",":r;var i=e<0?"-":"";e=Math.abs(+e||0);var o=parseInt(e.toFixed(t),10)+"",a=3<o.length?o.length%3:0;return i+(a?o.substr(0,a)+r:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?n+Math.abs(e-o).toFixed(t).slice(2):"")},h.naturalDay=function(e,t){e=void 0===e?h.time():e,t=void 0===t?"Y-m-d":t;var n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()/1e3;return e<r&&r-86400<=e?"yesterday":r<=e&&e<r+86400?"today":r+86400<=e&&e<r+172800?"tomorrow":h.date(t,e)},h.relativeTime=function(e){e=void 0===e?h.time():e;var t=h.time(),n=t-e;if(n<2&&-2<n)return(0<=n?"just ":"")+"now";if(n<60&&-60<n)return 0<=n?Math.floor(n)+" seconds ago":"in "+Math.floor(-n)+" seconds";if(n<120&&-120<n)return 0<=n?"about a minute ago":"in about a minute";if(n<3600&&-3600<n)return 0<=n?Math.floor(n/60)+" minutes ago":"in "+Math.floor(-n/60)+" minutes";if(n<7200&&-7200<n)return 0<=n?"about an hour ago":"in about an hour";if(n<86400&&-86400<n)return 0<=n?Math.floor(n/3600)+" hours ago":"in "+Math.floor(-n/3600)+" hours";if(n<172800&&-172800<n)return 0<=n?"1 day ago":"in 1 day";if(n<2505600&&-2505600<n)return 0<=n?Math.floor(n/86400)+" days ago":"in "+Math.floor(-n/86400)+" days";if(n<5184e3&&-5184e3<n)return 0<=n?"about a month ago":"in about a month";var r=parseInt(h.date("Y",t),10),i=parseInt(h.date("Y",e),10),o=12*r+parseInt(h.date("n",t),10)-(12*i+parseInt(h.date("n",e),10));if(o<12&&-12<o)return 0<=o?o+" months ago":"in "+-o+" months";var a=r-i;return a<2&&-2<a?0<=a?"a year ago":"in a year":0<=a?a+" years ago":"in "+-a+" years"},h.ordinal=function(e){e=parseInt(e,10);var t=(e=isNaN(e)?0:e)<0?"-":"",n=(e=Math.abs(e))%100;return t+e+(4<n&&n<21?"th":{1:"st",2:"nd",3:"rd"}[e%10]||"th")},h.filesize=function(e,t,n,r,i,o){return e<=0?"0 bytes":(e<(t=void 0===t?1024:t)&&void 0===n&&(n=0),void 0===o&&(o=" "),h.intword(e,["bytes","KB","MB","GB","TB","PB"],t,n,r,i,o))},h.intword=function(e,t,n,r,i,o,a){var s,l;l=(t=t||["","K","M","B","T"]).length-1,n=n||1e3,r=isNaN(r)?2:Math.abs(r),i=i||".",o=o||",",a=a||"";for(var u=0;u<t.length;u++)if(e<Math.pow(n,u+1)){l=u;break}s=e/Math.pow(n,l);var c=t[l]?a+t[l]:"";return h.numberFormat(s,r,i,o)+c},h.linebreaks=function(e){return"<p>"+(e=(e=(e=(e=(e=e.replace(/^([\n|\r]*)/,"")).replace(/([\n|\r]*)$/,"")).replace(/(\r\n|\n|\r)/g,"\n")).replace(/(\n{2,})/g,"</p><p>")).replace(/\n/g,"<br />"))+"</p>"},h.nl2br=function(e){return e.replace(/(\r\n|\n|\r)/g,"<br />")},h.truncatechars=function(e,t){return e.length<=t?e:e.substr(0,t)+"…"},h.truncatewords=function(e,t){var n=e.split(" ");return n.length<t?e:n.slice(0,t).join(" ")+"…"}}).call(this)},{}],17:[function(e,n,t){(function(r){var l=e("sprintf").vsprintf,s=e("fs"),t=e("path");function i(e,t,n){return e.hasOwnProperty(t)?e[t]:"string"==typeof t?i(e,t.split("."),n):1===t.length&&void 0!==n?e[t[0]]=n:0===t.length?e:e.hasOwnProperty(t[0])?i(e[t[0]],t.slice(1),n):e[t.join(".")]=t.join(".")}var u=n.exports=function(e){var t=this;for(var n in this.devMode="production"!==r.env.NODE_ENV,e)this[n]=e[n];"object"==G(this.register)&&u.resMethods.forEach(function(e){t.register[e]=t[e].bind(t)}),e.locales&&e.locales.forEach&&(this.locales={},e.locales.forEach(function(e){t.readFile(e)}),this.defaultLocale=e.locales[0]),this.setLocale(this.defaultLocale),this.locales[this.defaultLocale]||console.error("Not a valid default locale."),this.request&&(this.subdomain&&this.setLocaleFromSubdomain(this.request),!1!==this.query&&this.setLocaleFromQuery(this.request),!1!==this.session&&this.setLocaleFromSessionVar(this.request),this.prefLocale=this.preferredLocale(),!1!==this.prefLocale&&this.prefLocale!==this.locale&&this.setLocale(this.prefLocale))};u.version="0.4.7",u.localeCache={},u.resMethods=["__","__n","getLocale","isPreferredLocale"],u.expressBind=function(e,r){e&&(e.use(function(e,t,n){(r.request=e).i18n=new u(r),t.locals&&u.registerMethods(t.locals,e),n()}),e.dynamicHelpers&&e.dynamicHelpers(u.registerMethods({})))},u.registerMethods=function(e,n){return u.resMethods.forEach(function(t){e[t]=n?n.i18n[t].bind(n.i18n):function(e){return e.i18n[t].bind(e.i18n)}}),e},u.prototype={defaultLocale:"en",extension:".js",directory:"./locales",cookieName:"lang",sessionVarName:"locale",indent:"\t",parse:JSON.parse,dump:function(e,t){return JSON.stringify(e,null,t)},__:function(){var e=this.translate(this.locale,arguments[0]);return 1<arguments.length&&(e=l(e,Array.prototype.slice.call(arguments,1))),e},__n:function(e,t,n){var r;if("number"==typeof t){var i=e,o=t;r=this.translate(this.locale,i),r=l(1<parseInt(o,10)?r.other:r.one,Array.prototype.slice.call(arguments,1))}else{var a=e,s=t;o=n,r=this.translate(this.locale,a,s),r=l(1<parseInt(o,10)?r.other:r.one,[o]),3<arguments.length&&(r=l(r,Array.prototype.slice.call(arguments,3)))}return r},setLocale:function(e){if(e)return this.locales[e]||(this.devMode&&console.warn("Locale ("+e+") not found."),e=this.defaultLocale),this.locale=e},getLocale:function(){return this.locale},isPreferredLocale:function(){return!this.prefLocale||this.prefLocale===this.getLocale()},setLocaleFromSessionVar:function(e){if((e=e||this.request)&&e.session&&e.session[this.sessionVarName]){var t=e.session[this.sessionVarName];this.locales[t]&&(this.devMode&&console.log("Overriding locale from query: "+t),this.setLocale(t))}},setLocaleFromQuery:function(e){if((e=e||this.request)&&e.query&&e.query.lang){var t=(e.query.lang+"").toLowerCase();this.locales[t]&&(this.devMode&&console.log("Overriding locale from query: "+t),this.setLocale(t))}},setLocaleFromSubdomain:function(e){(e=e||this.request)&&e.headers&&e.headers.host&&/^([^.]+)/.test(e.headers.host)&&this.locales[RegExp.$1]&&(this.devMode&&console.log("Overriding locale from host: "+RegExp.$1),this.setLocale(RegExp.$1))},setLocaleFromCookie:function(e){if((e=e||this.request)&&e.cookies&&this.cookieName&&e.cookies[this.cookieName]){var t=e.cookies[this.cookieName].toLowerCase();this.locales[t]&&(this.devMode&&console.log("Overriding locale from cookie: "+t),this.setLocale(t))}},setLocaleFromEnvironmentVariable:function(){if(r.env.LANG){var e=r.env.LANG.split("_")[0];this.locales[e]&&(this.devMode&&console.log("Overriding locale from environment variable: "+e),this.setLocale(e))}},preferredLocale:function(e){if((e=e||this.request)&&e.headers){for(var t,n=e.headers["accept-language"]||"",r=/(^|,\s*)([a-z0-9-]+)/gi;!t&&(match=r.exec(n));){var i=match[2].toLowerCase(),o=i.split("-");this.locales[i]?t=i:1<o.length&&this.locales[o[0]]&&(t=o[0])}return t||this.defaultLocale}},translate:function(e,t,n){return e&&this.locales[e]||(this.devMode&&console.warn("WARN: No locale found. Using the default ("+this.defaultLocale+") as current locale"),e=this.defaultLocale,this.initLocale(e,{})),this.locales[e][t]||this.devMode&&(i(this.locales[e],t,n?{one:t,other:n}:void 0),this.writeFile(e)),i(this.locales[e],t,n?{one:t,other:n}:void 0)},readFile:function(e){var t=this.locateFile(e);if(this.devMode||!u.localeCache[t])try{var n,r=s.readFileSync(t);if("function"==typeof this.base){var i;try{i=this.base(e)}catch(n){console.error("base function threw exception for locale %s",e,n)}if("string"==typeof i)try{n=this.parse(s.readFileSync(this.locateFile(i)))}catch(n){console.error("unable to read or parse base file %s for locale %s",i,e,n)}}try{var o=this.parse(r);if(n){for(var a in o)n[a]=o[a];o=n}this.initLocale(e,o)}catch(n){console.error("unable to parse locales from file (maybe "+t+" is empty or invalid "+this.extension+"?): ",n)}}catch(n){s.existsSync(t)||this.writeFile(e)}else this.initLocale(e,u.localeCache[t])},writeFile:function(e){if(this.devMode){try{s.lstatSync(this.directory)}catch(e){this.devMode&&console.log("creating locales dir in: "+this.directory),s.mkdirSync(this.directory,"0755")}this.initLocale(e,{});try{var t=this.locateFile(e),n=t+".tmp";s.writeFileSync(n,this.dump(this.locales[e],this.indent),"utf8"),s.statSync(n).isFile()?s.renameSync(n,t):console.error("unable to write locales to file (either "+n+" or "+t+" are not writeable?): ")}catch(e){console.error("unexpected error writing files (either "+n+" or "+t+" are not writeable?): ",e)}}else this.initLocale(e,{})},locateFile:function(e){return t.normalize(this.directory+"/"+e+this.extension)},initLocale:function(e,t){if(!this.locales[e]&&(this.locales[e]=t,!this.devMode)){var n=this.locateFile(e);u.localeCache[n]||(u.localeCache[n]=t)}}}}).call(this,e("_process"))},{_process:20,fs:1,path:19,sprintf:21}],18:[function(e,t,n){t.exports=e("./i18n")},{"./i18n":17}],19:[function(e,t,u){(function(i){function o(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return t.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}u.resolve=function(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){var r=0<=n?arguments[n]:i.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),n="/"===r(e,-1);return(e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return"/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},u.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var l=[];for(s=a;s<r.length;s++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){var t=a(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(e,t){var n=a(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},u.extname=function(e){return a(e)[3]};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:20}],20:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],h=!1,f=-1;function d(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!h){var e=l(d);h=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||h||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],21:[function(e,t,n){var g=function(){function d(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function p(e,t){for(var n=[];0<t;n[--t]=e);return n.join("")}var m=function e(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};return m.object_stringify=function(e,t,n,r){var i="";if(null!=e)switch(void 0===e?"undefined":G(e)){case"function":return"[Function"+(e.name?": "+e.name:"")+"]";case"object":if(e instanceof Error)return"["+e.toString()+"]";if(n<=t)return"[Object]";if(r&&(r=r.slice(0)).push(e),null!=e.length){i+="[";var o=[];for(var a in e)r&&0<=r.indexOf(e[a])?o.push("[Circular]"):o.push(m.object_stringify(e[a],t+1,n,r));i+=o.join(", ")+"]"}else{if("getMonth"in e)return"Date("+e+")";for(var s in i+="{",o=[],e)e.hasOwnProperty(s)&&(r&&0<=r.indexOf(e[s])?o.push(s+": [Circular]"):o.push(s+": "+m.object_stringify(e[s],t+1,n,r)));i+=o.join(", ")+"}"}return i;case"string":return'"'+e+'"'}return""+e},m.format=function(e,t){var n,r,i,o,a,s,l,u=1,c=e.length,h="",f=[];for(r=0;r<c;r++)if("string"===(h=d(e[r])))f.push(e[r]);else if("array"===h){if((o=e[r])[2])for(n=t[u],i=0;i<o[2].length;i++){if(!n.hasOwnProperty(o[2][i]))throw new Error(g('[sprintf] property "%s" does not exist',o[2][i]));n=n[o[2][i]]}else n=o[1]?t[o[1]]:t[u++];if(/[^sO]/.test(o[8])&&"number"!=d(n))throw new Error(g('[sprintf] expecting number but found %s "'+n+'"',d(n)));switch(o[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n,10);break;case"e":n=o[7]?n.toExponential(o[7]):n.toExponential();break;case"f":n=o[7]?parseFloat(n).toFixed(o[7]):parseFloat(n);break;case"O":n=m.object_stringify(n,0,parseInt(o[7])||5);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&o[7]?n.substring(0,o[7]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(o[8])&&o[3]&&0<=n?"+"+n:n,s=o[4]?"0"==o[4]?"0":o[4].charAt(1):" ",l=o[6]-String(n).length,a=o[6]?p(s,l):"",f.push(o[5]?n+a:a+n)}return f.join("")},m.cache={},m.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(t)))throw new Error("[sprintf] "+t);if(n[2]){i|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[sprintf] "+a);for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("[sprintf] "+a);o.push(s[1])}n[2]=o}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},m}();((t.exports=g).sprintf=g).vsprintf=function(e,t){var n=t.slice();return n.unshift(e),g.apply(null,n)}},{}],22:[function(e,q,U){(function(){var e=this,t=e._,r=Array.prototype,a=Object.prototype,n=Function.prototype,i=r.push,l=r.slice,f=a.toString,o=a.hasOwnProperty,s=Array.isArray,u=Object.keys,c=n.bind,h=Object.create,d=function(){},p=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};void 0!==U?(void 0!==q&&q.exports&&(U=q.exports=p),U._=p):e._=p,p.VERSION="1.8.3";var m=function(i,o,e){if(void 0===o)return i;switch(null==e?3:e){case 1:return function(e){return i.call(o,e)};case 2:return function(e,t){return i.call(o,e,t)};case 3:return function(e,t,n){return i.call(o,e,t,n)};case 4:return function(e,t,n,r){return i.call(o,e,t,n,r)}}return function(){return i.apply(o,arguments)}},g=function(e,t,n){return null==e?p.identity:p.isFunction(e)?m(e,t,n):p.isObject(e)?p.matcher(e):p.property(e)};p.iteratee=function(e,t){return g(e,t,1/0)};var y=function(l,u){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var n=1;n<t;n++)for(var r=arguments[n],i=l(r),o=i.length,a=0;a<o;a++){var s=i[a];u&&void 0!==e[s]||(e[s]=r[s])}return e}},_=function(e){if(!p.isObject(e))return{};if(h)return h(e);d.prototype=e;var t=new d;return d.prototype=null,t},v=function(t){return function(e){return null==e?void 0:e[t]}},b=Math.pow(2,53)-1,w=v("length"),x=function(e){var t=w(e);return"number"==typeof t&&0<=t&&t<=b};function k(s){return function(e,t,n,r){t=m(t,r,4);var i=!x(e)&&p.keys(e),o=(i||e).length,a=0<s?0:o-1;return arguments.length<3&&(n=e[i?i[a]:a],a+=s),function(e,t,n,r,i,o){for(;0<=i&&i<o;i+=s){var a=r?r[i]:i;n=t(n,e[a],a,e)}return n}(e,t,n,i,a,o)}}p.each=p.forEach=function(e,t,n){var r,i;if(t=m(t,n),x(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=p.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},p.map=p.collect=function(e,t,n){t=g(t,n);for(var r=!x(e)&&p.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},p.reduce=p.foldl=p.inject=k(1),p.reduceRight=p.foldr=k(-1),p.find=p.detect=function(e,t,n){var r;if(void 0!==(r=x(e)?p.findIndex(e,t,n):p.findKey(e,t,n))&&-1!==r)return e[r]},p.filter=p.select=function(e,r,t){var i=[];return r=g(r,t),p.each(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i},p.reject=function(e,t,n){return p.filter(e,p.negate(g(t)),n)},p.every=p.all=function(e,t,n){t=g(t,n);for(var r=!x(e)&&p.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},p.some=p.any=function(e,t,n){t=g(t,n);for(var r=!x(e)&&p.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},p.contains=p.includes=p.include=function(e,t,n,r){return x(e)||(e=p.values(e)),("number"!=typeof n||r)&&(n=0),0<=p.indexOf(e,t,n)},p.invoke=function(e,n){var r=l.call(arguments,2),i=p.isFunction(n);return p.map(e,function(e){var t=i?n:e[n];return null==t?t:t.apply(e,r)})},p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matcher(t))},p.findWhere=function(e,t){return p.find(e,p.matcher(t))},p.max=function(e,r,t){var n,i,o=-1/0,a=-1/0;if(null==r&&null!=e)for(var s=0,l=(e=x(e)?e:p.values(e)).length;s<l;s++)n=e[s],o<n&&(o=n);else r=g(r,t),p.each(e,function(e,t,n){i=r(e,t,n),(a<i||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},p.min=function(e,r,t){var n,i,o=1/0,a=1/0;if(null==r&&null!=e)for(var s=0,l=(e=x(e)?e:p.values(e)).length;s<l;s++)(n=e[s])<o&&(o=n);else r=g(r,t),p.each(e,function(e,t,n){((i=r(e,t,n))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},p.shuffle=function(e){for(var t,n=x(e)?e:p.values(e),r=n.length,i=Array(r),o=0;o<r;o++)(t=p.random(0,o))!==o&&(i[o]=i[t]),i[t]=n[o];return i},p.sample=function(e,t,n){return null==t||n?(x(e)||(e=p.values(e)),e[p.random(e.length-1)]):p.shuffle(e).slice(0,Math.max(0,t))},p.sortBy=function(e,r,t){return r=g(r,t),p.pluck(p.map(e,function(e,t,n){return{value:e,index:t,criteria:r(e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var L=function(a){return function(r,i,e){var o={};return i=g(i,e),p.each(r,function(e,t){var n=i(e,t,r);a(o,e,n)}),o}};p.groupBy=L(function(e,t,n){p.has(e,n)?e[n].push(t):e[n]=[t]}),p.indexBy=L(function(e,t,n){e[n]=t}),p.countBy=L(function(e,t,n){p.has(e,n)?e[n]++:e[n]=1}),p.toArray=function(e){return e?p.isArray(e)?l.call(e):x(e)?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:x(e)?e.length:p.keys(e).length},p.partition=function(e,r,t){r=g(r,t);var i=[],o=[];return p.each(e,function(e,t,n){(r(e,t,n)?i:o).push(e)}),[i,o]},p.first=p.head=p.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:p.initial(e,e.length-t)},p.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},p.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:p.rest(e,Math.max(0,e.length-t))},p.rest=p.tail=p.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var C=function e(t,n,r,i){for(var o=[],a=0,s=i||0,l=w(t);s<l;s++){var u=t[s];if(x(u)&&(p.isArray(u)||p.isArguments(u))){n||(u=e(u,n,r));var c=0,h=u.length;for(o.length+=h;c<h;)o[a++]=u[c++]}else r||(o[a++]=u)}return o};function S(o){return function(e,t,n){t=g(t,n);for(var r=w(e),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(t(e[i],i,e))return i;return-1}}function M(o,a,s){return function(e,t,n){var r=0,i=w(e);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(s&&n&&i)return e[n=s(e,t)]===t?n:-1;if(t!=t)return 0<=(n=a(l.call(e,r,i),p.isNaN))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(e[n]===t)return n;return-1}}p.flatten=function(e,t){return C(e,t,!1)},p.without=function(e){return p.difference(e,l.call(arguments,1))},p.uniq=p.unique=function(e,t,n,r){p.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=g(n,r));for(var i=[],o=[],a=0,s=w(e);a<s;a++){var l=e[a],u=n?n(l,a,e):l;t?(a&&o===u||i.push(l),o=u):n?p.contains(o,u)||(o.push(u),i.push(l)):p.contains(i,l)||i.push(l)}return i},p.union=function(){return p.uniq(C(arguments,!0,!0))},p.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=w(e);r<i;r++){var o=e[r];if(!p.contains(t,o)){for(var a=1;a<n&&p.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},p.difference=function(e){var t=C(arguments,!0,!0,1);return p.filter(e,function(e){return!p.contains(t,e)})},p.zip=function(){return p.unzip(arguments)},p.unzip=function(e){for(var t=e&&p.max(e,w).length||0,n=Array(t),r=0;r<t;r++)n[r]=p.pluck(e,r);return n},p.object=function(e,t){for(var n={},r=0,i=w(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},p.findIndex=S(1),p.findLastIndex=S(-1),p.sortedIndex=function(e,t,n,r){for(var i=(n=g(n,r,1))(t),o=0,a=w(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},p.indexOf=M(1,p.findIndex,p.sortedIndex),p.lastIndexOf=M(-1,p.findLastIndex),p.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var P=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=_(e.prototype),a=e.apply(o,i);return p.isObject(a)?a:o};p.bind=function(t,n){if(c&&t.bind===c)return c.apply(t,l.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2);return function e(){return P(t,e,n,this,r.concat(l.call(arguments)))}},p.partial=function(o){var a=l.call(arguments,1);return function e(){for(var t=0,n=a.length,r=Array(n),i=0;i<n;i++)r[i]=a[i]===p?arguments[t++]:a[i];for(;t<arguments.length;)r.push(arguments[t++]);return P(o,e,this,this,r)}},p.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e[n=arguments[t]]=p.bind(e[n],e);return e},p.memoize=function(i,o){var e=function e(t){var n=e.cache,r=""+(o?o.apply(this,arguments):t);return p.has(n,r)||(n[r]=i.apply(this,arguments)),n[r]};return e.cache={},e},p.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=p.partial(p.delay,p,1),p.throttle=function(n,r,i){var o,a,s,l=null,u=0;i||(i={});var c=function(){u=!1===i.leading?0:p.now(),l=null,s=n.apply(o,a),l||(o=a=null)};return function(){var e=p.now();u||!1!==i.leading||(u=e);var t=r-(e-u);return o=this,a=arguments,t<=0||r<t?(l&&(clearTimeout(l),l=null),u=e,s=n.apply(o,a),l||(o=a=null)):l||!1===i.trailing||(l=setTimeout(c,t)),s}},p.debounce=function(n,r,i){var o,a,s,l,u,t=function e(){var t=p.now()-l;t<r&&0<=t?o=setTimeout(e,r-t):(o=null,i||(u=n.apply(s,a),o||(s=a=null)))};return function(){s=this,a=arguments,l=p.now();var e=i&&!o;return o||(o=setTimeout(t,r)),e&&(u=n.apply(s,a),s=a=null),u}},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var n=arguments,r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},p.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},p.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},p.once=p.partial(p.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function I(e,t){var n=T.length,r=e.constructor,i=p.isFunction(r)&&r.prototype||a,o="constructor";for(p.has(e,o)&&!p.contains(t,o)&&t.push(o);n--;)(o=T[n])in e&&e[o]!==i[o]&&!p.contains(t,o)&&t.push(o)}p.keys=function(e){if(!p.isObject(e))return[];if(u)return u(e);var t=[];for(var n in e)p.has(e,n)&&t.push(n);return E&&I(e,t),t},p.allKeys=function(e){if(!p.isObject(e))return[];var t=[];for(var n in e)t.push(n);return E&&I(e,t),t},p.values=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},p.mapObject=function(e,t,n){t=g(t,n);for(var r,i=p.keys(e),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=t(e[r],r,e);return a},p.pairs=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},p.invert=function(e){for(var t={},n=p.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},p.functions=p.methods=function(e){var t=[];for(var n in e)p.isFunction(e[n])&&t.push(n);return t.sort()},p.extend=y(p.allKeys),p.extendOwn=p.assign=y(p.keys),p.findKey=function(e,t,n){t=g(t,n);for(var r,i=p.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r},p.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;p.isFunction(t)?(i=p.allKeys(a),r=m(t,n)):(i=C(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var u=i[s],c=a[u];r(c,u,a)&&(o[u]=c)}return o},p.omit=function(e,t,n){if(p.isFunction(t))t=p.negate(t);else{var r=p.map(C(arguments,!1,!1,1),String);t=function(e,t){return!p.contains(r,t)}}return p.pick(e,t,n)},p.defaults=y(p.allKeys,!0),p.create=function(e,t){var n=_(e);return t&&p.extendOwn(n,t),n},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e},p.isMatch=function(e,t){var n=p.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};p.isEqual=function(e,t){return function e(t,n,r,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof p&&(t=t._wrapped),n instanceof p&&(n=n._wrapped);var o=f.call(t);if(o!==f.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n}var a="[object Array]"===o;if(!a){if("object"!=(void 0===t?"undefined":G(t))||"object"!=(void 0===n?"undefined":G(n)))return!1;var s=t.constructor,l=n.constructor;if(s!==l&&!(p.isFunction(s)&&s instanceof s&&p.isFunction(l)&&l instanceof l)&&"constructor"in t&&"constructor"in n)return!1}i=i||[];for(var u=(r=r||[]).length;u--;)if(r[u]===t)return i[u]===n;if(r.push(t),i.push(n),a){if((u=t.length)!==n.length)return!1;for(;u--;)if(!e(t[u],n[u],r,i))return!1}else{var c,h=p.keys(t);if(u=h.length,p.keys(n).length!==u)return!1;for(;u--;)if(c=h[u],!p.has(n,c)||!e(t[c],n[c],r,i))return!1}return r.pop(),i.pop(),!0}(e,t)},p.isEmpty=function(e){return null==e||(x(e)&&(p.isArray(e)||p.isString(e)||p.isArguments(e))?0===e.length:0===p.keys(e).length)},p.isElement=function(e){return!(!e||1!==e.nodeType)},p.isArray=s||function(e){return"[object Array]"===f.call(e)},p.isObject=function(e){var t=void 0===e?"undefined":G(e);return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){p["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":G(Int8Array))&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!==+e},p.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return null!=e&&o.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=v,p.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},p.matcher=p.matches=function(t){return t=p.extendOwn({},t),function(e){return p.isMatch(e,t)}},p.times=function(e,t,n){var r=Array(Math.max(0,e));t=m(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=p.invert(O),N=function(t){var n=function(e){return t[e]},e="(?:"+p.keys(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,n):e}};p.escape=N(O),p.unescape=N(D),p.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),p.isFunction(r)?r.call(e):r};var A=0;p.uniqueId=function(e){var t=++A+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+R[e]};p.template=function(o,e,t){!e&&t&&(e=t),e=p.defaults({},e,p.templateSettings);var n=RegExp([(e.escape||j).source,(e.interpolate||j).source,(e.evaluate||j).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(n,function(e,t,n,r,i){return s+=o.slice(a,i).replace(B,F),a=i+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}var i=function(e){return r.call(this,e,p)},l=e.variable||"obj";return i.source="function("+l+"){\n"+s+"}",i},p.chain=function(e){var t=p(e);return t._chain=!0,t};var z=function(e,t){return e._chain?p(t).chain():t};p.mixin=function(n){p.each(p.functions(n),function(e){var t=p[e]=n[e];p.prototype[e]=function(){var e=[this._wrapped];return i.apply(e,arguments),z(this,t.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];p.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],z(this,e)}}),p.each(["concat","join","slice"],function(e){var t=r[e];p.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},p.prototype.valueOf=p.prototype.toJSON=p.prototype.value,p.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}).call(this)},{}],23:[function(e,t,n){var o=e("underscore"),a=e("geocrunch"),l=function(e){return e<10?"0"+e.toString():e.toString()},s=function(e,t,n){var r=Math.abs(e),i=Math.floor(r),o=Math.floor(60*(r-i)),a=Math.round(3600*(r-i-o/60)*100)/100,s=r===e?t:n;return l(i)+"&deg; "+l(o)+"' "+l(a)+'" '+s};t.exports={measure:function(e){var t=o.last(e),n=a.path(o.map(e,function(e){return[e.lng,e.lat]})),r=n.distance({units:"meters"}),i=n.area({units:"sqmeters"});return{lastCoord:{dd:{x:t.lng,y:t.lat},dms:{x:s(t.lng,"E","W"),y:s(t.lat,"N","S")}},length:r,area:i}}}},{geocrunch:7,underscore:22}],24:[function(e,t,n){t.exports={$:function(e,t){return t||(t=document),t.querySelector(e)},$$:function(e,t){return t||(t=document),Array.prototype.slice.call(t.querySelectorAll(e))},hide:function(e){if(e)return e.setAttribute("style","display:none;"),e},show:function(e){if(e)return e.removeAttribute("style"),e}}},{}],25:[function(e,t,n){t.exports={measure:"Medir",measureDistancesAndAreas:"Medeix distancies i àreas",createNewMeasurement:"Crear nova medicio",startCreating:"Començi a crear la medicio afegint punts al mapa",finishMeasurement:"Acabar la medició",lastPoint:"Últim punt",area:"Área",perimeter:"Perómetre",pointLocation:"Localizació del punt",areaMeasurement:"Medició d'área",linearMeasurement:"Medició lineal",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en aquesta área",centerOnLine:"Centrar en aquesta línia",centerOnLocation:"Centrar en aquesta localizació",cancel:"Cancel·lar",delete:"Eliminar",acres:"Acres",feet:"Peus",kilometers:"Quilòmetres",hectares:"Hectàreas",meters:"Metros",miles:"Milles",sqfeet:"Peus cuadrats",sqmeters:"Metres cuadrats",sqmiles:"Milles cuadrades",decPoint:".",thousandsSep:" "}},{}],26:[function(e,t,n){t.exports={measure:"测量",measureDistancesAndAreas:"同时测量距离和面积",createNewMeasurement:"开始一次新的测量",startCreating:"点击地图加点以开始创建测量",finishMeasurement:"完成测量",lastPoint:"最后点的坐标",area:"面积",perimeter:"周长",pointLocation:"点的坐标",areaMeasurement:"面积测量",linearMeasurement:"距离测量",pathDistance:"路径长度",centerOnArea:"该面积居中",centerOnLine:"该线段居中",centerOnLocation:"该位置居中",cancel:"取消",delete:"删除",acres:"公亩",feet:"英尺",kilometers:"公里",hectares:"公顷",meters:"米",miles:"英里",sqfeet:"平方英尺",sqmeters:"平方米",sqmiles:"平方英里",decPoint:".",thousandsSep:",",sqkilometers:"平方公里"}},{}],27:[function(e,t,n){t.exports={measure:"Mål",measureDistancesAndAreas:"Mål afstande og arealer",createNewMeasurement:"Lav en ny måling",startCreating:"Begynd målingen ved at tilføje punkter på kortet",finishMeasurement:"Afslut måling",lastPoint:"Sidste punkt",area:"Areal",perimeter:"Omkreds",pointLocation:"Punkt",areaMeasurement:"Areal",linearMeasurement:"Linje",pathDistance:"Sti afstand",centerOnArea:"Centrér dette område",centerOnLine:"Centrér denne linje",centerOnLocation:"Centrér dette punkt",cancel:"Annuller",delete:"Slet",acres:"acre",feet:"fod",kilometers:"km",hectares:"ha",meters:"m",miles:"mil",sqfeet:"kvadratfod",sqmeters:"m²",sqmiles:"kvadratmil",decPoint:",",thousandsSep:"."}},{}],28:[function(e,t,n){t.exports={measure:"Messung",measureDistancesAndAreas:"Messung von Abständen und Flächen",createNewMeasurement:"Eine neue Messung durchführen",startCreating:"Führen Sie die Messung durch, indem Sie der Karte Punkte hinzufügen.",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fläche",perimeter:"Rand",pointLocation:"Lage des Punkts",areaMeasurement:"Gemessene Fläche",linearMeasurement:"Gemessener Abstand",pathDistance:"Abstand entlang des Pfads",centerOnArea:"Auf diese Fläche zentrieren",centerOnLine:"Auf diesen Linienzug zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Löschen",acres:"Morgen",feet:"Fuß",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfuß",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:",",thousandsSep:"."}},{}],29:[function(e,t,n){t.exports={measure:"Messung",measureDistancesAndAreas:"Abstände und Flächen messen",createNewMeasurement:"Eine neue Messung durchführen",startCreating:"Messen sie, indem Sie der Karte Punkte hinzufügen",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fläche",perimeter:"Umfang",pointLocation:"Lage des Punkts",areaMeasurement:"Fläche",linearMeasurement:"Abstand",pathDistance:"Umfang",centerOnArea:"Auf diese Fläche zentrieren",centerOnLine:"Auf diese Linie zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Löschen",acres:"Morgen",feet:"Fuß",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfuß",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:".",thousandsSep:"'"}},{}],30:[function(e,t,n){t.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Center on this area",centerOnLine:"Center on this line",centerOnLocation:"Center on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:",",sqkilometers:"Sq Kilometers"}},{}],31:[function(e,t,n){t.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Centre on this area",centerOnLine:"Centre on this line",centerOnLocation:"Centre on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometres",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:",",sqkilometers:"Sq Kilometers"}},{}],32:[function(e,t,n){t.exports={measure:"Medición",measureDistancesAndAreas:"Mida distancias y áreas",createNewMeasurement:"Crear nueva medición",startCreating:"Empiece a crear la medición añadiendo puntos al mapa",finishMeasurement:"Terminar medición",lastPoint:"Último punto",area:"Área",perimeter:"Perímetro",pointLocation:"Localización del punto",areaMeasurement:"Medición de área",linearMeasurement:"Medición linear",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en este área",centerOnLine:"Centrar en esta línea",centerOnLocation:"Centrar en esta localización",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pies",kilometers:"Kilómetros",hectares:"Hectáreas",meters:"Metros",miles:"Millas",sqfeet:"Pies cuadrados",sqmeters:"Metros cuadrados",sqmiles:"Millas cuadradas",decPoint:".",thousandsSep:" "}},{}],33:[function(e,t,n){t.exports={measure:"اندازه گیری",measureDistancesAndAreas:"اندازه گیری فاصله و مساحت",createNewMeasurement:"ثبت اندازه گیری جدید",startCreating:"برای ثبت اندازه گیری جدید نقاطی را به نقشه اضافه کنید.",finishMeasurement:"پایان اندازه گیری",lastPoint:"آخرین نقطه",area:"مساحت",perimeter:"محیط",pointLocation:"مکان نقطه",areaMeasurement:"اندازه گیری مساحت",linearMeasurement:"اندازه گیری خطی",pathDistance:"فاصله مسیر",centerOnArea:"مرکز این سطح",centerOnLine:"مرکز این خط",centerOnLocation:"مرکز این مکان",cancel:"لغو",delete:"حذف",acres:"ایکر",feet:"پا",kilometers:"کیلومتر",hectares:"هکتار",meters:"متر",miles:"مایل",sqfeet:"پا مربع",sqmeters:"متر مربع",sqmiles:"مایل مربع",decPoint:"/",thousandsSep:","}},{}],34:[function(e,t,n){t.exports={measure:"Sukat",measureDistancesAndAreas:"Kalkulahin ang tamang distansya at sukat",createNewMeasurement:"Lumikha ng isang bagong pagsukat",startCreating:"Simulan ang paglikha ng isang pagsukat sa pamamagitan ng pagdaragdag ng mga puntos sa mapa",finishMeasurement:"Tapusin ang pagsukat",lastPoint:"Huling punto sa mapa",area:"Sukat",perimeter:"Palibot",pointLocation:"Lokasyon ng punto",areaMeasurement:"Kabuuang sukat",linearMeasurement:"Pagsukat ng guhit",pathDistance:"Distansya ng daanan",centerOnArea:"I-sentro sa lugar na ito",centerOnLine:"I-sentro sa linya na ito",centerOnLocation:"I-sentro sa lokasyong ito",cancel:"Kanselahin",delete:"Tanggalin",acres:"Acres",feet:"Talampakan",kilometers:"Kilometro",hectares:"Hektarya",meters:"Metro",miles:"Milya",sqfeet:"Talampakang Kwadrado",sqmeters:"Metro Kwadrado",sqmiles:"Milya Kwadrado",decPoint:".",thousandsSep:","}},{}],35:[function(e,t,n){t.exports={measure:"Mesure",measureDistancesAndAreas:"Mesurer les distances et superficies",createNewMeasurement:"Créer une nouvelle mesure",startCreating:"Débuter la création d'une nouvelle mesure en ajoutant des points sur la carte",finishMeasurement:"Finir la mesure",lastPoint:"Dernier point",area:"Superficie",perimeter:"Périmètre",pointLocation:"Placement du point",areaMeasurement:"Mesure de superficie",linearMeasurement:"Mesure linéaire",pathDistance:"Distance du chemin",centerOnArea:"Centrer sur cette zone",centerOnLine:"Centrer sur cette ligne",centerOnLocation:"Centrer à cet endroit",cancel:"Annuler",delete:"Supprimer",acres:"Acres",feet:"Pieds",kilometers:"Kilomètres",hectares:"Hectares",meters:"Mètres",miles:"Miles",sqfeet:"Pieds carrés",sqmeters:"Mètres carrés",sqmiles:"Miles carrés",decPoint:",",thousandsSep:" "}},{}],36:[function(e,t,n){t.exports={measure:"Misura",measureDistancesAndAreas:"Misura distanze e aree",createNewMeasurement:"Crea una nuova misurazione",startCreating:"Comincia a creare una misurazione aggiungendo punti alla mappa",finishMeasurement:"Misurazione conclusa",lastPoint:"Ultimo punto",area:"Area",perimeter:"Perimetro",pointLocation:"Posizione punto",areaMeasurement:"Misura area",linearMeasurement:"Misura lineare",pathDistance:"Distanza percorso",centerOnArea:"Centra su questa area",centerOnLine:"Centra su questa linea",centerOnLocation:"Centra su questa posizione",cancel:"Annulla",delete:"Cancella",acres:"Acri",feet:"Piedi",kilometers:"Chilometri",hectares:"Ettari",meters:"Metri",miles:"Miglia",sqfeet:"Piedi quadri",sqmeters:"Metri quadri",sqmiles:"Miglia quadre",decPoint:".",thousandsSep:","}},{}],37:[function(e,t,n){t.exports={measure:"Meet",measureDistancesAndAreas:"Meet afstanden en oppervlakten",createNewMeasurement:"Maak een nieuwe meting",startCreating:"Begin een meting door punten toe te voegen aan de kaart",finishMeasurement:"Beëindig meting",lastPoint:"Laatste punt",area:"Oppervlakte",perimeter:"Omtrek",pointLocation:"Locatie punt",areaMeasurement:"Oppervlakte meting",linearMeasurement:"Gemeten afstand",pathDistance:"Afstand over de lijn",centerOnArea:"Centreer op dit gebied",centerOnLine:"Centreer op deze lijn",centerOnLocation:"Centreer op deze locatie",cancel:"Annuleer",delete:"Wis",acres:"are",feet:"Voet",kilometers:"km",hectares:"ha",meters:"m",miles:"Mijl",sqfeet:"Vierkante Feet",sqmeters:"m2",sqmiles:"Vierkante Mijl",decPoint:",",thousandsSep:"."}},{}],38:[function(e,t,n){t.exports={measure:"Pomiar",measureDistancesAndAreas:"Pomiar odległości i powierzchni",createNewMeasurement:"Utwórz nowy pomiar",startCreating:"Rozpocznij tworzenie nowego pomiaru poprzez dodanie punktów na mapie",finishMeasurement:"Zakończ pomiar",lastPoint:"Ostatni punkt",area:"Powierzchnia",perimeter:"Obwód",pointLocation:"Punkt lokalizacji",areaMeasurement:"Pomiar powierzchni",linearMeasurement:"Pomiar liniowy",pathDistance:"Długość ścieżki",centerOnArea:"Środek tego obszaru",centerOnLine:"Środek tej linii",centerOnLocation:"Środek w tej lokalizacji",cancel:"Anuluj",delete:"Skasuj",acres:"akrów",feet:"stóp",kilometers:"kilometrów",hectares:"hektarów",meters:"metrów",miles:"mil",sqfeet:"stóp kwadratowych",sqmeters:"metrów kwadratowych",sqmiles:"mil kwadratowych",decPoint:",",thousandsSep:"."}},{}],39:[function(e,t,n){t.exports={measure:"Medidas",measureDistancesAndAreas:"Mede distâncias e áreas",createNewMeasurement:"Criar nova medida",startCreating:"Comece criando uma medida, adicionando pontos no mapa",finishMeasurement:"Finalizar medida",lastPoint:"Último ponto",area:"Área",perimeter:"Perímetro",pointLocation:"Localização do ponto",areaMeasurement:"Medida de área",linearMeasurement:"Medida linear",pathDistance:"Distância",centerOnArea:"Centralizar nesta área",centerOnLine:"Centralizar nesta linha",centerOnLocation:"Centralizar nesta localização",cancel:"Cancelar",delete:"Excluir",acres:"Acres",feet:"Pés",kilometers:"Quilômetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Pés²",sqmeters:"Metros²",sqmiles:"Milhas²",decPoint:",",thousandsSep:"."}},{}],40:[function(e,t,n){t.exports={measure:"Medições",measureDistancesAndAreas:"Medir distâncias e áreas",createNewMeasurement:"Criar uma nova medição",startCreating:"Adicione pontos no mapa, para criar uma nova medição",finishMeasurement:"Finalizar medição",lastPoint:"Último ponto",area:"Área",perimeter:"Perímetro",pointLocation:"Localização do ponto",areaMeasurement:"Medição da área",linearMeasurement:"Medição linear",pathDistance:"Distância",centerOnArea:"Centrar nesta área",centerOnLine:"Centrar nesta linha",centerOnLocation:"Centrar nesta localização",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pés",kilometers:"Kilômetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Pés²",sqmeters:"Metros²",sqmiles:"Milhas²",decPoint:",",thousandsSep:"."}},{}],41:[function(e,t,n){t.exports={measure:"Измерение",measureDistancesAndAreas:"Измерение расстояний и площади",createNewMeasurement:"Создать новое измерение",startCreating:"Для начала измерения добавьте точку на карту",finishMeasurement:"Закончить измерение",lastPoint:"Последняя точка",area:"Область",perimeter:"Периметр",pointLocation:"Местоположение точки",areaMeasurement:"Измерение области",linearMeasurement:"Линейное измерение",pathDistance:"Расстояние",centerOnArea:"Сфокусироваться на данной области",centerOnLine:"Сфокусироваться на данной линии",centerOnLocation:"Сфокусироваться на данной местности",cancel:"Отменить",delete:"Удалить",acres:"акры",feet:"фут",kilometers:"км",hectares:"га",meters:"м",miles:"миль",sqfeet:"футов²",sqmeters:"м²",sqmiles:"миль²",decPoint:".",thousandsSep:","}},{}],42:[function(e,t,n){t.exports={measure:"Mäta",measureDistancesAndAreas:"Mäta avstånd och yta",createNewMeasurement:"Skapa ny mätning",startCreating:"Börja mätning genom att lägga till punkter på kartan",finishMeasurement:"Avsluta mätning",lastPoint:"Sista punkt",area:"Yta",perimeter:"Omkrets",pointLocation:"Punktens Läge",areaMeasurement:"Arealmätning",linearMeasurement:"Längdmätning",pathDistance:"Total linjelängd",centerOnArea:"Centrera på detta område",centerOnLine:"Centrera på denna linje",centerOnLocation:"Centrera på denna punkt",cancel:"Avbryt",delete:"Radera",acres:"Tunnland",feet:"Fot",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Miles",sqfeet:"Kvadratfot",sqmeters:"Kvadratmeter",sqmiles:"Kvadratmiles",decPoint:",",thousandsSep:" "}},{}],43:[function(e,t,n){t.exports={measure:"Hesapla",measureDistancesAndAreas:"Uzaklık ve alan hesapla",createNewMeasurement:"Yeni hesaplama",startCreating:"Yeni nokta ekleyerek hesaplamaya başla",finishMeasurement:"Hesaplamayı bitir",lastPoint:"Son nokta",area:"Alan",perimeter:"Çevre uzunluğu",pointLocation:"Nokta yeri",areaMeasurement:"Alan hesaplaması",linearMeasurement:"Doğrusal hesaplama",pathDistance:"Yol uzunluğu",centerOnArea:"Bu alana odaklan",centerOnLine:"Bu doğtuya odaklan",centerOnLocation:"Bu yere odaklan",cancel:"Çıkış",delete:"Sil",acres:"Dönüm",feet:"Feet",kilometers:"Kilometre",hectares:"Hektar",meters:"Metre",miles:"Mil",sqfeet:"Feet kare",sqmeters:"Metre kare",sqmiles:"Mil kare",decPoint:".",thousandsSep:","}},{}],44:[function(o,e,t){(function(e){var s=o("underscore"),l="undefined"!=typeof window?window.L:void 0!==e?e.L:null,u=o("humanize"),t=o("./units"),c=o("./calc"),n=o("./dom"),h=n.$,r=o("./mapsymbology"),f=s.template('<a class="<%= model.className %>-toggle js-toggle leaflet-bar" href="#" title="<%= i18n.__(\'measureDistancesAndAreas\') %>"><%= i18n.__(\'measure\') %></a>\n<div class="<%= model.className %>-interaction js-interaction">\n  <div class="js-startprompt startprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <ul class="tasks">\n      <a href="#" class="js-start start"><%= i18n.__(\'createNewMeasurement\') %></a>\n    </ul>\n  </div>\n  <div class="js-measuringprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <p class="js-starthelp"><%= i18n.__(\'startCreating\') %></p>\n    <div class="js-results results"></div>\n    <ul class="js-measuretasks tasks">\n      <li><a href="#" class="js-cancel cancel"><%= i18n.__(\'cancel\') %></a></li>\n      <li><a href="#" class="js-finish finish"><%= i18n.__(\'finishMeasurement\') %></a></li>\n    </ul>\n  </div>\n</div>'),i=s.template('<div class="group">\n<p class="lastpoint heading"><%= i18n.__(\'lastPoint\') %></p>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n</div>\n<% if (model.pointCount > 1) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'pathDistance\') %></span> <%= model.lengthDisplay %></p>\n</div>\n<% } %>\n<% if (model.pointCount > 2) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'area\') %></span> <%= model.areaDisplay %></p>\n</div>\n<% } %>'),d=s.template('<h3><%= i18n.__(\'pointLocation\') %></h3>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLocation\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),p=s.template('<h3><%= i18n.__(\'linearMeasurement\') %></h3>\n<p><%= model.lengthDisplay %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLine\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),m=s.template('<h3><%= i18n.__(\'areaMeasurement\') %></h3>\n<p><%= model.areaDisplay %></p>\n<p><%= model.lengthDisplay %> <%= i18n.__(\'perimeter\') %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnArea\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),g=new(o("i18n-2"))({devMode:!1,locales:{ca:o("./i18n/ca"),cn:o("./i18n/cn"),da:o("./i18n/da"),de:o("./i18n/de"),de_CH:o("./i18n/de_CH"),en:o("./i18n/en"),en_UK:o("./i18n/en_UK"),es:o("./i18n/es"),fa:o("./i18n/fa"),fil_PH:o("./i18n/fil_PH"),fr:o("./i18n/fr"),it:o("./i18n/it"),nl:o("./i18n/nl"),pl:o("./i18n/pl"),pt_BR:o("./i18n/pt_BR"),pt_PT:o("./i18n/pt_PT"),ru:o("./i18n/ru"),sv:o("./i18n/sv"),tr:o("./i18n/tr")}});l.Control.Measure=l.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(e){l.setOptions(this,e),this.options.units=l.extend({},t,this.options.units),this._symbols=new r(s.pick(this.options,"activeColor","completedColor")),g.setLocale(this.options.localization)},onAdd:function(e){return this._map=e,this._latlngs=[],this._initLayout(),e.on("click",this._collapse,this),this._layer=l.layerGroup().addTo(e),this._container},onRemove:function(e){e.off("click",this._collapse,this),e.removeLayer(this._layer)},_initLayout:function(){var e=this._className;l.Browser.touch&&(e+=" leaflet-touch");var t,n,r,i,o=this._className,a=this._container=l.DomUtil.create("div",e);a.innerHTML=f({model:{className:o},i18n:g}),a.setAttribute("aria-haspopup",!0),l.Browser.touch?l.DomEvent.on(a,"click",l.DomEvent.stopPropagation):(l.DomEvent.disableClickPropagation(a),l.DomEvent.disableScrollPropagation(a)),t=this.$toggle=h(".js-toggle",a),this.$interaction=h(".js-interaction",a),n=h(".js-start",a),r=h(".js-cancel",a),i=h(".js-finish",a),this.$startPrompt=h(".js-startprompt",a),this.$measuringPrompt=h(".js-measuringprompt",a),this.$startHelp=h(".js-starthelp",a),this.$results=h(".js-results",a),this.$measureTasks=h(".js-measuretasks",a),this._collapse(),this._updateMeasureNotStarted(),l.Browser.android||(l.DomEvent.on(a,"mouseenter",this._expand,this),l.DomEvent.on(a,"mouseleave",this._collapse,this)),l.DomEvent.on(t,"click",l.DomEvent.stop),l.Browser.touch?l.DomEvent.on(t,"click",this._expand,this):l.DomEvent.on(t,"focus",this._expand,this),l.DomEvent.on(n,"click",l.DomEvent.stop),l.DomEvent.on(n,"click",this._startMeasure,this),l.DomEvent.on(r,"click",l.DomEvent.stop),l.DomEvent.on(r,"click",this._finishMeasure,this),l.DomEvent.on(i,"click",l.DomEvent.stop),l.DomEvent.on(i,"click",this._handleMeasureDoubleClick,this)},_expand:function(){n.hide(this.$toggle),n.show(this.$interaction)},_collapse:function(){this._locked||(n.hide(this.$interaction),n.show(this.$toggle))},_updateMeasureNotStarted:function(){n.hide(this.$startHelp),n.hide(this.$results),n.hide(this.$measureTasks),n.hide(this.$measuringPrompt),n.show(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){n.hide(this.$results),n.show(this.$startHelp),n.show(this.$measureTasks),n.hide(this.$startPrompt),n.show(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){n.hide(this.$startHelp),n.show(this.$results),n.show(this.$measureTasks),n.hide(this.$startPrompt),n.show(this.$measuringPrompt)},_startMeasure:function(){KQ.Control.Manager.getInstance()._unselectAllControlsExcept("measure"),this._locked=!0,this._measureVertexes=l.featureGroup().addTo(this._layer),this._captureMarker=l.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),l.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){var e=s.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,l.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker&&this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._measureVertexes&&this._captureMarker&&(this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null),this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",e,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes&&this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(l.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(e){var a=this.options.units;return{lengthDisplay:t(e.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:t(e.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function t(e,t,n,r,i){var o;return t&&a[t]?(o=s(e,a[t],r,i),n&&a[n]&&(o=o+" ("+s(e,a[n],r,i)+")")):o=s(e,null,r,i),o}function s(e,t,n,r){return t&&t.factor&&t.display?u.numberFormat(e*t.factor,t.decimals||0,n||g.__("decPoint"),r||g.__("thousandsSep"))+" "+g.__([t.display])||t.display:u.numberFormat(e,0,n||g.__("decPoint"),r||g.__("thousandsSep"))}},_updateResults:function(){var e=c.measure(this._latlngs),t=this._resultsModel=s.extend({},e,this._getMeasurementDisplayStrings(e),{pointCount:this._latlngs.length});this.$results.innerHTML=i({model:t,humanize:u,i18n:g})},_handleMeasureMove:function(e){this._measureDrag?this._measureDrag.setLatLng(e.latlng):this._measureDrag=l.circleMarker(e.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var e,t,n,r,i,o,a=this._latlngs;this._finishMeasure(),a.length&&(2<a.length&&a.push(s.first(a)),e=c.measure(a),r=1===a.length?(t=l.circleMarker(a[0],this._symbols.getSymbol("resultPoint")),d({model:e,humanize:u,i18n:g})):2===a.length?(t=l.polyline(a,this._symbols.getSymbol("resultLine")),p({model:s.extend({},e,this._getMeasurementDisplayStrings(e)),humanize:u,i18n:g})):(t=l.polygon(a,this._symbols.getSymbol("resultArea")),m({model:s.extend({},e,this._getMeasurementDisplayStrings(e)),humanize:u,i18n:g})),(n=l.DomUtil.create("div","")).innerHTML=r,(i=h(".js-zoomto",n))&&(l.DomEvent.on(i,"click",l.DomEvent.stop),l.DomEvent.on(i,"click",function(){t.getBounds?this._map.fitBounds(t.getBounds(),{padding:[20,20],maxZoom:17}):t.getLatLng&&this._map.panTo(t.getLatLng())},this)),(o=h(".js-deletemarkup",n))&&(l.DomEvent.on(o,"click",l.DomEvent.stop),l.DomEvent.on(o,"click",function(){this._layer.removeLayer(t)},this)),t.addTo(this._layer),t.bindPopup(n,this.options.popupOptions),t.getBounds?t.openPopup(t.getBounds().getCenter()):t.getLatLng&&t.openPopup(t.getLatLng()))},_handleMeasureClick:function(e){var t=this._map.mouseEventToLatLng(e.originalEvent),n=s.last(this._latlngs),r=this._symbols.getSymbol("measureVertex");n&&t.equals(n)||(this._latlngs.push(t),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(e){e.setStyle(r),e.setStyle({className:"layer-measurevertex"})}),this._addNewVertex(t),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(e){l.circleMarker(e,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(e){e.length<3?this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null):this._measureArea?this._measureArea.setLatLngs(e):this._measureArea=l.polygon(e,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(e){e.length<2?this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null):this._measureBoundary?this._measureBoundary.setLatLngs(e):this._measureBoundary=l.polyline(e,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}}),l.Map.mergeOptions({measureControl:!1}),l.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=(new l.Control.Measure).addTo(this))}),l.control.measure=function(e){return new l.Control.Measure(e)}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./calc":23,"./dom":24,"./i18n/ca":25,"./i18n/cn":26,"./i18n/da":27,"./i18n/de":28,"./i18n/de_CH":29,"./i18n/en":30,"./i18n/en_UK":31,"./i18n/es":32,"./i18n/fa":33,"./i18n/fil_PH":34,"./i18n/fr":35,"./i18n/it":36,"./i18n/nl":37,"./i18n/pl":38,"./i18n/pt_BR":39,"./i18n/pt_PT":40,"./i18n/ru":41,"./i18n/sv":42,"./i18n/tr":43,"./mapsymbology":45,"./units":46,humanize:16,"i18n-2":18,underscore:22}],45:[function(e,t,n){var r=e("underscore"),i=e("color"),o=function(e){this.setOptions(e)};o.DEFAULTS={activeColor:"#ABE67E",completedColor:"#C8F2BE"},r.extend(o.prototype,{setOptions:function(e){return this._options=r.extend({},o.DEFAULTS,this._options,e),this},getSymbol:function(e){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:i(this._options.activeColor).darken(.15),fillOpacity:.7,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[e]}}),t.exports=o},{color:6,underscore:22}],46:[function(e,t,n){t.exports={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}}},{}]},{},[44])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,n){"use strict";var r,i=e("../../src/kq"),o=(r=i)&&r.__esModule?r:{default:r};L.Text=L.Layer.extend({includes:L.Mixin.Events,options:{autoPan:!0,offset:new L.Point(0,30),autoPanPadding:new L.Point(5,5),latlng:null,content:"",className:""},layerType:"textLayer",initialize:function(e){L.Util.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||this._initLayout(),e._panes.popupPane.appendChild(this._container),e.on("viewreset",this._updatePosition,this),L.Browser.any3d&&e.on("zoomanim",this._zoomAnimation,this),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),e.off({viewreset:this._updatePosition,zoomanim:this._zoomAnimation},this),this._map=null},setLatLng:function(e){return this.options.latlng=L.latLng(e),this._updatePosition(),this},setContent:function(e){return this.options.content=e,this._updateContent(),this},_initLayout:function(){this._container=L.DomUtil.create("lable","imap-text "+this.options.className+" imap-zoom-animated"),this._contentNode=L.DomUtil.create("span","imap-text-content",this._container)},_update:function(){this._map&&(this._updateContent(),this._updatePosition())},_updateContent:function(){this.options.content&&("string"==typeof this.options.content?this._contentNode.innerHTML=this.options.content:(this._contentNode.innerHTML="",this._contentNode.appendChild(this.options.content)))},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this.options.latlng),t=L.Browser.any3d,n=this.options.offset;t&&L.DomUtil.setPosition(this._container,e),this._containerBottom=-n.y-(t?0:e.y),this._containerLeft=n.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(e){e=this._map._latLngToNewLayerPoint(this.options.latlng,e.zoom,e.center),L.DomUtil.setPosition(this._container,e)}}),L.ComputeDist=L.Handler.extend({options:{toolbarIcon:{className:"leaflet-ComputeDist"}},_rad:Math.PI/180,initialize:function(e,t){this._map=e,this._map._distControl=this,L.setOptions(this,t)},addHooks:function(){this._onMouseClick()},_onMouseClick:function(){this._map._areaControl&&this._map._areaControl._startCompute&&this._map._areaControl._finishCompute(),this._startCompute?this._finishCompute():this._enableCompute()},_setPath:function(e){var t;t="cn"===o.default.Local.getCurrentLanguage()?"起点":"start point";var n=e.latlng||this._map.mouseEventToLatLng(e);if(this._startPath){if(!n.equals(this._lastPoint)){var r=this._currentDist._latlngs;r.push(n);var i=r.length;this._totalDist+=this._getDistance(r[i-2],r[i-1]),this._addMarker(n),this._addLable(n,this._getDistanceString(this._totalDist),"dist-point")}}else this._currentDist={_layers:[],_latlngs:[]},this._addPath(n),this._totalDist=0,this._startPath=!0,this._addMarker(n),this._addLable(n,t,"dist-start"),this._currentDist._latlngs.push(n);this._lastPoint=n,this._startMove=!1},_onMove:function(e){var t=e.latlng,n=e.containerPoint,r=this._map._cursorTip;r.style.left=n.x+7+"px",r.style.top=n.y+23+"px",r.style.display="",this._startPath&&(this._startMove?this._currentPath.setLatLngs(this._currentDist._latlngs.concat(t)):(this._currentPath.addLatLng(t),this._startMove=!0))},_finishCompute:function(e){this._startPath&&(1<this._currentDist._latlngs.length?((!e||"contextmenu"===e.type)&&this._currentPath.setLatLngs(this._currentDist._latlngs),this._addReomveMarker(this._lastPoint),this._currentDist.lastLable._container.style.display="none",this._addLable(this._lastPoint,this._getDistanceString(this._totalDist),"dist-end")):this._clearLayers.call(this._currentDist)),this._disableCompute()},_enableCompute:function(){var e=this._map;e.contextMenu&&e.contextMenu.disable(),this._startCompute=!0,e.on("click",this._setPath,this),e.on("dblclick contextmenu",this._finishCompute,this),e.doubleClickZoom.disable();var t=e._cursorTip=L.DomUtil.create("div","imap-cursorTip",e._container);t.style.cssText=" z-index: 1000;position:absolute;background-color:#fff;border:1px solid #f00;display:none;white-space:nowrap;border-radius: 5px;padding: 0px 5px;","cn"===o.default.Local.getCurrentLanguage()?t.innerHTML="单击确定地点，双击结束":t.innerHTML="click select the point, double click end",e.on("mousemove",this._onMove,this)},_disableCompute:function(){var e=this._map;e.contextMenu&&e.contextMenu.enable(),e._cursorTip&&(e._cursorTip.style.display="none"),e.off("click",this._setPath,this),e.off("dblclick contextmenu",this._finishCompute,this),e.off("mousemove",this._onMove,this),e.doubleClickZoom.enable(),this._startCompute=this._startMove=this._startPath=!1},_addMarker:function(e){var t=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[11,11],iconAnchor:[6,6],className:"md-icon"}),n=new L.Marker(e,{icon:t,clickable:!1});this._map.addLayer(n),this._currentDist._layers.push(n)},_addPath:function(e){var t=this._currentPath=new L.Polyline([e],{weight:2});this._map.addLayer(t),this._currentDist._layers.push(t),this._currentDist._map=this._map},_addLable:function(e,t,n){var r=this._currentDist.lastLable=new L.Text({latlng:e,content:t,className:n});this._map.addLayer(r),this._currentDist._layers.push(r)},_addReomveMarker:function(e){var t=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[12,12],iconAnchor:[-10,7],className:"md-remove-icon"}),n=new L.Marker(e,{icon:t});n.on("click",this._clearLayers,this._currentDist),this._map.addLayer(n),this._currentDist._layers.push(n)},_clearLayers:function(){var e,t,n=this._layers;for(e=0,t=n.length;e<t;e++)this._map.removeLayer(n[e])},_getDistanceString:function(e){return"cn"===o.default.Local.getCurrentLanguage()?e<1e3?e+"米":(e/1e3).toFixed(1)+"公里":e<1e3?e+" m":(e/1e3).toFixed(1)+" km"},_getDistance:function(e,t){var n=(i=this._rad)*e.lat,r=i*t.lat,i=2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-r)/2),2)+Math.cos(n)*Math.cos(r)*Math.pow(Math.sin((i*e.lng-i*t.lng)/2),2)));return Math.round(6378137*i)}}),L.ComputeArea=L.Handler.extend({options:{toolbarIcon:{className:"leaflet-ComputeDist"}},_rad:Math.PI/180,_deg:180/Math.PI,initialize:function(e,t){this._map=e,this._map._areaControl=this,L.setOptions(this,t)},addHooks:function(){this._onMouseClick()},_onMouseClick:function(){this._map._distControl&&this._map._distControl._startCompute&&this._map._distControl._finishCompute(),this._startCompute?this._finishCompute():this._enableCompute()},_setArea:function(e){var t=e.latlng||this._map.mouseEventToLatLng(e);this._startArea?t.equals(this._lastPoint)||(this._addMarker(t),this._compute._latlngs.push(t)):(this._compute={_layers:[],_latlngs:[]},this._addArea(t),this._map.on("mousemove",this._onMove,this),this._startArea=!0,this._addMarker(t),this._compute._latlngs.push(t)),this._lastPoint=t,this._startMove=!1},_onMove:function(e){var t=e.latlng,n=e.containerPoint,r=this._map._cursorTip;r.style.left=n.x+7+"px",r.style.top=n.y+23+"px",r.style.display="",this._startArea&&(this._startMove?this._area.setLatLngs(this._compute._latlngs.concat(t)):(this._area.addLatLng(t),this._startMove=!0))},_finishCompute:function(e){this._startArea&&(2<this._compute._latlngs.length?((!e||"contextmenu"===e.type)&&this._area.setLatLngs(this._compute._latlngs),this._addReomveMarker(this._lastPoint),this._addLable(this._lastPoint,this._getAreaString(this._compute._latlngs),"area-result")):this._clearLayers.call(this._compute)),this._disableCompute()},_enableCompute:function(){var e=this._map;e.contextMenu&&e.contextMenu.disable(),this._startCompute=!0,e.on("click",this._setArea,this),e.on("dblclick contextmenu",this._finishCompute,this),e.doubleClickZoom.disable();var t=e._cursorTip=L.DomUtil.create("div","imap-cursorTip",e._container);t.style.cssText=" z-index: 1000;position:absolute;background-color:#fff;border:1px solid #f00;display:none;white-space:nowrap;border-radius: 5px;padding: 0px 5px;","cn"===o.default.Local.getCurrentLanguage()?t.innerHTML="单击确定地点，双击结束":t.innerHTML="click select the point, double click end",e.on("mousemove",this._onMove,this)},_disableCompute:function(){var e=this._map;e.contextMenu&&e.contextMenu.enable(),e._cursorTip&&(e._cursorTip.style.display="none"),e.off("click",this._setArea,this),e.off("dblclick contextmenu",this._finishCompute,this),e.off("mousemove",this._onMove,this),e.doubleClickZoom.enable(),this._startCompute=this._startMove=this._startArea=!1},_addMarker:function(e){var t=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[11,11],iconAnchor:[6,6],className:"md-icon"}),n=new L.Marker(e,{icon:t,clickable:!1});this._map.addLayer(n),this._compute._layers.push(n)},_addArea:function(e){var t=this._area=new L.Polygon([e],{weight:2,clickable:!1});this._map.addLayer(t),this._compute._layers.push(t),this._compute._map=this._map},_addLable:function(e,t,n){var r=this._compute.lastLable=new L.Text({latlng:e,content:t,className:n});this._map.addLayer(r),this._compute._layers.push(r)},_addReomveMarker:function(e){var t=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[12,12],iconAnchor:[-10,7],className:"md-remove-icon"}),n=new L.Marker(e,{icon:t});n.on("click",this._clearLayers,this._compute),this._map.addLayer(n),this._compute._layers.push(n)},_clearLayers:function(){for(var e=this._layers,t=0;t<e.length;t++)this._map.removeLayer(e[t])},_getAreaString:function(e){return e=Math.round(this._computeArea(e)),"cn"===o.default.Local.getCurrentLanguage()?e<1e6?e+"平方米":(e/1e6).toFixed(2)+"平方公里":e<1e6?e+" m²":(e/1e6).toFixed(2)+" km²"},_computeArea:function(e){var t,n,r,i=0,o=e.length;for(t=0;t<o;++t)n=(t+1)%o,r=(t+2)%o,i+=this._angle(e[t],e[n],e[r]);return 420<(t=i-(e=180*(o-2)))?t=360*o-i-e:300<t&&t<420&&(t=Math.abs(360-t)),t*this._rad*40680631590769},_angle:function(e,t,n){return(t=(e=this._bearing(t,e))-(t=this._bearing(t,n)))<0&&(t+=360),t},_bearing:function(e,t){var n=this._rad,r=e.lat*n,i=e.lng*n,o=t.lat*n,a=t.lng*n,s=-Math.atan2(Math.sin(i-a)*Math.cos(o),Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(i-a));return s<0&&(s+=2*Math.PI),s*=this._deg}})},{"../../src/kq":729}],48:[function(e,t,n){"use strict";var r,i,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r="undefined"!=typeof window?window:void 0,i=function(y){var n,v=y.ss||{},t=/^\s+/,r=/\s+$/,e=/[xy]/g,i=/.*(\/|\\)/,o=/.*[.]/,a=/[\t\r\n]/g,s=0<Object.prototype.toString.call(y.HTMLElement).indexOf("Constructor"),l=-1!==navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("MSIE 1"),u=-1!==navigator.userAgent.indexOf("MSIE 7"),c=document.createElement("input");c.type="file",n="multiple"in c&&"undefined"!=typeof File&&void 0!==(new XMLHttpRequest).upload,v.obj2string=function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=t?t+"["+r+"]":r,o=e[r];n.push("object"===(void 0===o?"undefined":d(o))?v.obj2string(o,i):encodeURIComponent(i)+"="+encodeURIComponent(o))}return n.join("&")},v.extendObj=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},v.addEvent=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n),function(){v.removeEvent(e,t,n)}},v.removeEvent=document.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;void 0===e[r]&&(e[r]=null),e.detachEvent(r,n)},v.newXHR=function(){if("undefined"!=typeof XMLHttpRequest)return new y.XMLHttpRequest;if(y.ActiveXObject)try{return new y.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return!1}},v.encodeUTF8=function(e){return unescape(encodeURIComponent(e))},v.getIFrame=function(){var e,t=v.getUID();return u?e=document.createElement('<iframe src="javascript:false;" name="'+t+'">'):((e=document.createElement("iframe")).src="javascript:false;",e.name=t),e.style.display="none",e.id=t,e},v.getForm=function(e){var t=document.createElement("form");for(var n in t.encoding="multipart/form-data",t.enctype="multipart/form-data",t.style.display="none",e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},v.getHidden=function(e,t){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n},v.parseJSON=function(e){if(!e)return!1;if(e=v.trim(e+""),y.JSON&&y.JSON.parse)try{return y.JSON.parse(e+"")}catch(e){return!1}var i,o=null;return!(!e||v.trim(e.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,function(e,t,n,r){return i&&t&&(o=0),0===o?e:(i=n||t,o+=!r-!n,"")})))&&Function("return "+e)()},v.getBox=function(e){var t,n,r=0,i=0;if(e.getBoundingClientRect)t=e.getBoundingClientRect(),n=document.documentElement,r=t.top+(y.pageYOffset||n.scrollTop)-(n.clientTop||0),i=t.left+(y.pageXOffset||n.scrollLeft)-(n.clientLeft||0);else for(;i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;);return{top:Math.round(r),left:Math.round(i)}},v.addStyles=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},v.copyLayout=function(e,t){var n=v.getBox(e);v.addStyles(t,{position:"absolute",left:n.left+"px",top:n.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})},v.getUID=function(){return"axxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};var h="".trim;v.trim=h&&!h.call("\ufeff ")?function(e){return null===e?"":h.call(e)}:function(e){return null===e?"":e.toString().replace(t,"").replace(r,"")};var f;return v.indexOf=[].indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},v.arrayDelete=function(e,t){var n=v.indexOf(e,t);-1<n&&e.splice(n,1)},v.getFilename=function(e){return e.replace(i,"")},v.getExt=function(e){return-1!==e.indexOf(".")?e.replace(o,""):""},v.isVisible=function(e){return!!e&&(1!==e.nodeType||e==document.body?!(e=null):e.parentNode&&(0<e.offsetWidth||0<e.offsetHeight||"none"!=v.getStyle(e,"display").toLowerCase())?v.isVisible(e.parentNode):(e=null,!1))},v.getStyle=function(e,t){return y.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:void 0},v.getFormObj=function(e){for(var t,n=e.elements,r=["button","submit","image","reset"],i={},o=0,a=n.length;o<a;o++)if(t={},n[o].name&&!n[o].disabled&&-1===v.indexOf(r,n[o].type)){if(("checkbox"==n[o].type||"radio"==n[o].type)&&!n[o].checked)continue;t[n[o].name]=v.val(n[o]),v.extendObj(i,t)}return i},v.val=function(e){if(e){if("SELECT"!=e.nodeName.toUpperCase())return e.value;for(var t,n=e.options,r=e.selectedIndex,i="select-one"===e.type||r<0,o=i?null:[],a=0,s=n.length;a<s;a++)if((n[a].selected||a===r)&&!n[a].disabled){if(t=n[a].value?n[a].value:n[a].text,i)return t;o.push(t)}return o}},v.hasClass=function(e,t){return!(!e||!t)&&0<=(" "+e.className+" ").replace(a," ").indexOf(" "+t+" ")},v.addClass=function(e,t){if(!e||!t)return!1;v.hasClass(e,t)||(e.className+=" "+t)},v.removeClass=(f={},function(e,t){if(!e||!t)return!1;f[t]||(f[t]=new RegExp("(?:^|\\s)"+t+"(?!\\S)")),e.className=e.className.replace(f[t],"")}),v.purge=function(e){var t,n,r,i=e.attributes;if(i)for(t=i.length-1;0<=t;t-=1)"function"==typeof e[r=i[t].name]&&(e[r]=null);if(i=e.childNodes)for(n=i.length,t=0;t<n;t+=1)v.purge(e.childNodes[t])},v.remove=function(e){e&&e.parentNode&&(v.purge(e),e.parentNode.removeChild(e)),e=null},v.verifyElem=function(e){return"undefined"!=typeof jQuery&&e instanceof jQuery?e=e[0]:"string"==typeof e&&("#"==e.charAt(0)&&(e=e.substr(1)),e=document.getElementById(e)),!(!e||1!==e.nodeType)&&("A"==e.nodeName.toUpperCase()&&(e.style.cursor="pointer",v.addEvent(e,"click",function(e){e&&e.preventDefault?e.preventDefault():y.event&&(y.event.returnValue=!1)})),e)},v._options={},v.uploadSetup=function(e){v.extendObj(v._options,e)},v.SimpleUpload=function(e){if(this._opts={button:"",url:"",dropzone:"",dragClass:"",form:"",overrideSubmit:!0,cors:!1,withCredentials:!1,progressUrl:!1,sessionProgressUrl:!1,nginxProgressUrl:!1,multiple:!1,multipleSelect:!1,maxUploads:3,queue:!0,checkProgressInterval:500,keyParamName:"APC_UPLOAD_PROGRESS",sessionProgressName:"PHP_SESSION_UPLOAD_PROGRESS",nginxProgressHeader:"X-Progress-ID",customProgressHeaders:{},corsInputName:"XHR_CORS_TARGETORIGIN",allowedExtensions:[],accept:"",maxSize:!1,name:"",data:{},noParams:!0,autoSubmit:!0,multipart:!0,method:"POST",responseType:"",debug:!1,hoverClass:"",focusClass:"",disabledClass:"",customHeaders:{},encodeHeaders:!0,autoCalibrate:!0,onBlankSubmit:function(){},onAbort:function(e,t,n){},onChange:function(e,t,n,r,i){},onSubmit:function(e,t,n,r){},onProgress:function(e){},onUpdateFileSize:function(e){},onComplete:function(e,t,n,r){},onDone:function(e,t,n,r,i,o){},onAllDone:function(){},onExtError:function(e,t){},onSizeError:function(e,t){},onError:function(e,t,n,r,i,o,a){},startXHR:function(e,t,n){},endXHR:function(e,t,n){},startNonXHR:function(e,t){},endNonXHR:function(e,t){}},v.extendObj(this._opts,v._options),v.extendObj(this._opts,e),this._queue=[],this._active=0,this._disabled=!1,this._maxFails=10,this._progKeys={},this._sizeFlags={},this._btns=[],this.addButton(this._opts.button),delete this._opts.button,this._opts.button=e=null,!1===this._opts.multiple&&(this._opts.maxUploads=1),""!==this._opts.dropzone&&this.addDZ(this._opts.dropzone),""===this._opts.dropzone&&this._btns.length<1)throw new Error("Invalid upload button. Make sure the element you're passing exists.");""!==this._opts.form&&this.setForm(this._opts.form),this._createInput(),this._manDisabled=!1,this.enable(!0)},v.SimpleUpload.prototype={destroy:function(){for(var e=this._btns.length;e--;)this._btns[e].off&&this._btns[e].off(),v.removeClass(this._btns[e],this._opts.hoverClass),v.removeClass(this._btns[e],this._opts.focusClass),v.removeClass(this._btns[e],this._opts.disabledClass),this._btns[e].disabled=!1;this._killInput(),this._destroy=!0},log:function(e){this._opts&&this._opts.debug&&y.console&&y.console.log&&y.console.log("[Uploader] "+e)},setData:function(e){this._opts.data=e},setOptions:function(e){v.extendObj(this._opts,e)},addButton:function(e){var t;if(e instanceof Array)for(var n=0,r=e.length;n<r;n++)!1!==(t=v.verifyElem(e[n]))?this._btns.push(this.rerouteClicks(t)):this.log("Button with array index "+n+" is invalid");else!1!==(t=v.verifyElem(e))&&this._btns.push(this.rerouteClicks(t))},addDZ:function(e){n&&((e=v.verifyElem(e))?this.addDropZone(e):this.log("Invalid or nonexistent element passed for drop zone"))},setProgressBar:function(e){this._progBar=v.verifyElem(e)},setPctBox:function(e){this._pctBox=v.verifyElem(e)},setFileSizeBox:function(e){this._sizeBox=v.verifyElem(e)},setProgressContainer:function(e){this._progBox=v.verifyElem(e)},setAbortBtn:function(e,t){this._abortBtn=v.verifyElem(e),this._removeAbort=!1,t&&(this._removeAbort=!0)},setForm:function(e){if(this._form=v.verifyElem(e),this._form&&"FORM"==this._form.nodeName.toUpperCase()){var t=this;this._opts.autoSubmit=!1,this._opts.overrideSubmit&&(v.addEvent(this._form,"submit",function(e){e.preventDefault?e.preventDefault():y.event&&(y.event.returnValue=!1),t._validateForm()&&t.submit()}),this._form.submit=function(){t._validateForm()&&t.submit()})}else this.log("Invalid or nonexistent element passed for form")},getQueueSize:function(){return this._queue.length},removeCurrent:function(e){if(e){for(var t=this._queue.length;t--;)if(this._queue[t].id===e){this._queue.splice(t,1);break}}else this._queue.splice(0,1);this._cycleQueue()},clearQueue:function(){this._queue.length=0},disable:function(e){var t,n=this._btns.length;for(this._manDisabled=!e||!0===this._manDisabled,this._disabled=!0;n--;)"INPUT"!=(t=this._btns[n].nodeName.toUpperCase())&&"BUTTON"!=t||(this._btns[n].disabled=!0),""!==this._opts.disabledClass&&v.addClass(this._btns[n],this._opts.disabledClass);this._input&&this._input.parentNode&&(this._input.parentNode.style.visibility="hidden")},enable:function(e){if(e||(this._manDisabled=!1),!0!==this._manDisabled){var t=this._btns.length;for(this._disabled=!1;t--;)v.removeClass(this._btns[t],this._opts.disabledClass),this._btns[t].disabled=!1}},updatePosition:function(e){(e=e||this._btns[0])&&this._input&&this._input.parentNode&&v.copyLayout(e,this._input.parentNode),e=null},rerouteClicks:function(t){var e,n,r=this;if(e=v.addEvent(t,"mouseover",function(){r._disabled||(r._input||r._createInput(),r._overBtn=t,v.copyLayout(t,r._input.parentNode),r._input.parentNode.style.visibility="visible")}),n=v.addEvent(t,"click",function(e){e&&e.preventDefault&&e.preventDefault(),r._disabled||(r._input||r._createInput(),r._overBtn=t,l||r._input.click())}),t.off=function(){e(),n()},r._opts.autoCalibrate&&!v.isVisible(t)){r.log("Upload button not visible");y.setTimeout(function e(){v.isVisible(t)?(r.log("Upload button now visible"),y.setTimeout(function(){r.updatePosition(t),1===r._btns.length&&(r._input.parentNode.style.visibility="hidden")},200)):y.setTimeout(e,500)},500)}return t},submit:function(e,t){!t&&this._queue.length<1?this._opts.onBlankSubmit.call(this):this._disabled||this._active>=this._opts.maxUploads||this._queue.length<1||this._checkFile(this._queue[0])&&(!1!==this._opts.onSubmit.call(this,this._queue[0].name,this._queue[0].ext,this._queue[0].btn,this._queue[0].size)?(this._active++,(!1===this._opts.multiple||!1===this._opts.queue&&this._active>=this._opts.maxUploads)&&this.disable(!0),this._initUpload(this._queue[0])):this.removeCurrent(this._queue[0].id))}},v.IframeUpload={_detachEvents:{},_detach:function(e){this._detachEvents[e]&&(this._detachEvents[e](),delete this._detachEvents[e])},_getHost:function(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname.toLowerCase():e},_addFiles:function(e){var t=v.getFilename(e.value),n=v.getExt(t);return!1!==this._opts.onChange.call(this,t,n,this._overBtn,void 0,e)&&(this._queue.push({id:v.getUID(),file:e,name:t,ext:n,btn:this._overBtn,size:null}),!0)},_uploadIframe:function(t,n,r,i,o,a,s){var l,e,u,c=this,h=this._opts,f=v.getUID(),d=v.getIFrame(),p=!1,m=!1;if(e=!0===h.noParams?h.url:h.nginxProgressUrl?e+(-1<e.indexOf("?")?"&":"?")+encodeURIComponent(h.nginxProgressHeader)+"="+encodeURIComponent(f):h.url,l=v.getForm({action:e,target:d.name,method:h.method}),h.onProgress.call(this,0),o&&(o.innerHTML="0%"),i&&(i.style.width="0%"),h.cors){var g=v.getUID();c._detachEvents[g]=v.addEvent(y,"message",function(e){c._getHost(e.origin)==c._getHost(h.url)?(p=!0,c._detach(g),h.endNonXHR.call(c,t.name,t.btn),c._finish(t,"","",e.data,r,n,o,a,s)):c.log("Non-matching origin: "+e.origin)})}c._detachEvents[d.id]=v.addEvent(d,"load",function(){for(var e in c._detach(d.id),h.sessionProgressUrl?l.appendChild(v.getHidden(h.sessionProgressName,f)):h.progressUrl&&l.appendChild(v.getHidden(h.keyParamName,f)),c._form&&v.extendObj(h.data,v.getFormObj(c._form)),h.data)h.data.hasOwnProperty(e)&&l.appendChild(v.getHidden(e,h.data[e]));h.cors&&l.appendChild(v.getHidden(h.corsInputName,y.location.href)),l.appendChild(t.file),c._detachEvents[t.id]=v.addEvent(d,"load",function(){if(d&&d.parentNode&&!m)if(c._detach(t.id),m=!0,delete c._progKeys[f],delete c._sizeFlags[f],a&&v.removeEvent(a,"click",u),h.cors)y.setTimeout(function(){v.remove(d),p||c._errorFinish(t,"","",!1,"error",n,r,o,a,s),h=f=d=r=n=o=a=s=null},600);else{try{var e=(d.contentDocument?d.contentDocument:d.contentWindow.document).body.innerHTML;v.remove(d),d=null,h.endNonXHR.call(c,t.name,t.btn),c._finish(t,"","",e,r,n,o,a,s)}catch(e){c._errorFinish(t,"",e.message,!1,"error",n,r,o,a,s)}h=f=r=n=o=null}}),a&&(u=function(){if(v.removeEvent(a,"click",u),delete c._progKeys[f],delete c._sizeFlags[f],d){m=!0,c._detach(t.id);try{d.contentWindow.document.execCommand&&d.contentWindow.document.execCommand("Stop")}catch(e){}try{d.src="javascript".concat(":false;")}catch(e){}y.setTimeout(function(){v.remove(d),d=null},1)}c.log("Upload aborted"),h.onAbort.call(c,t.name,t.btn,t.size),c._last(r,n,o,a,s,t,"abort")},v.addEvent(a,"click",u)),c.log("Commencing upload using iframe"),l.submit(),y.setTimeout(function(){v.remove(l),l=null,c.removeCurrent(t.id)},1),c._hasProgUrl&&(c._progKeys[f]=1,y.setTimeout(function(){c._getProg(f,i,r,o,1),i=r=o=null},600))}),document.body.appendChild(l),document.body.appendChild(d)},_getProg:function(o,a,s,l,u){var c,e,h,f=this,d=this._opts,t=(new Date).getTime();if(o&&d)if(d.nginxProgressUrl?e=d.nginxProgressUrl+"?"+encodeURIComponent(d.nginxProgressHeader)+"="+encodeURIComponent(o)+"&_="+t:d.sessionProgressUrl?e=d.sessionProgressUrl:d.progressUrl&&(e=d.progressUrl+"?progresskey="+encodeURIComponent(o)+"&_="+t),h=function(){var e,t,n,r,i;try{if(h&&(d.cors||4===c.readyState)){h=void 0,c.onreadystatechange=function(){};try{i=c.statusText,r=c.status}catch(e){r=i=""}if(d.cors||200<=r&&r<300){if(!1===(e=v.parseJSON(c.responseText)))return void f.log("Error parsing progress response (expecting JSON)");if(d.nginxProgressUrl){if("uploading"==e.state)0<(t=parseInt(e.size,10))&&(n=Math.round(parseInt(e.received,10)/t*100),t=Math.round(t/1024));else if("done"==e.state)n=100;else if("error"==e.state)return void f.log("Error requesting upload progress: "+e.status)}else(d.sessionProgressUrl||d.progressUrl)&&!0===e.success&&(t=parseInt(e.size,10),n=parseInt(e.pct,10));if(n&&(l&&(l.innerHTML=n+"%"),a&&(a.style.width=n+"%"),d.onProgress.call(f,n)),t&&!f._sizeFlags[o]&&(s&&(s.innerHTML=t+"K"),f._sizeFlags[o]=1,d.onUpdateFileSize.call(f,t)),!n&&!t&&u>=f._maxFails)return u++,void f.log("Failed progress request limit reached. Count: "+u);n<100&&f._progKeys[o]&&y.setTimeout(function(){f._getProg(o,a,s,l,u),o=a=s=l=u=null},d.checkProgressInterval)}else delete f._progKeys[o],f.log("Error requesting upload progress: "+r+" "+i);c=t=n=r=i=e=null}}catch(e){f.log("Error requesting upload progress: "+e.message)}},d.cors&&!d.sessionProgressUrl){if(!y.XDomainRequest)return;(c=new y.XDomainRequest).open("GET",e,!0),c.onprogress=c.ontimeout=function(){},c.onload=h,c.onerror=function(){delete f._progKeys[o],o=null,f.log("Error requesting upload progress")}}else{var n,r=d.sessionProgressUrl?"POST":"GET",i={};for(var p in(c=v.newXHR()).onreadystatechange=h,c.open(r,e,!0),d.sessionProgressUrl&&(n=encodeURIComponent(d.sessionProgressName)+"="+encodeURIComponent(o),i["Content-Type"]="application/x-www-form-urlencoded"),d.nginxProgressUrl&&(i[d.nginxProgressHeader]=o),i["X-Requested-With"]="XMLHttpRequest",i.Accept="application/json, text/javascript, */*; q=0.01",v.extendObj(i,d.customProgressHeaders),i)i.hasOwnProperty(p)&&(d.encodeHeaders?c.setRequestHeader(p,v.encodeUTF8(i[p]+"")):c.setRequestHeader(p,i[p]+""));c.send(d.sessionProgressUrl&&n||null)}},_initUpload:function(e){if(!1===this._opts.startNonXHR.call(this,e.name,e.btn))return this._disabled&&this.enable(!0),void this._active--;this._hasProgUrl=!!(this._opts.progressUrl||this._opts.sessionProgressUrl||this._opts.nginxProgressUrl),this._uploadIframe(e,this._progBox,this._sizeBox,this._progBar,this._pctBox,this._abortBtn,this._removeAbort),e=this._progBox=this._sizeBox=this._progBar=this._pctBox=this._abortBtn=this._removeAbort=null}},v.XhrUpload={_addFiles:function(e){var t,n,r,i,o=e.length;for(this._opts.multiple||(o=1),i=0;i<o;i++){if(t=v.getFilename(e[i].name),n=v.getExt(t),r=Math.round(e[i].size/1024),!1===this._opts.onChange.call(this,t,n,this._overBtn,r,e[i]))return!1;this._queue.push({id:v.getUID(),file:e[i],name:t,ext:n,btn:this._overBtn,size:r})}return!0},_uploadXhr:function(r,e,t,n,i,o,a,s,l,u){var c,h,f=this,d=this._opts,p=v.newXHR();for(var m in i&&(i.innerHTML=r.size+"K"),s&&(s.innerHTML="0%"),o&&(o.style.width="0%"),c=function(e,t){var n;try{if(c&&(t||4===p.readyState))if(c=void 0,p.onreadystatechange=function(){},t)4!==p.readyState&&p.abort(),d.onAbort.call(f,r.name,r.btn,r.size),f._last(i,a,s,l,u,r,"abort");else{l&&v.removeEvent(l,"click",h);try{n=p.statusText}catch(e){n=""}200<=p.status&&p.status<300?(d.endXHR.call(f,r.name,r.size,r.btn),f._finish(r,p.status,n,p.responseText,i,a,s,l,u)):f._errorFinish(r,p.status,n,p.responseText,"error",a,i,s,l,u)}}catch(e){t||f._errorFinish(r,-1,e.message,!1,"error",a,i,s,l,u)}},l&&(h=function(){v.removeEvent(l,"click",h),c&&c(void 0,!0)},v.addEvent(l,"click",h)),p.onreadystatechange=c,p.open(d.method.toUpperCase(),e,!0),p.withCredentials=!!d.withCredentials,v.extendObj(n,d.customHeaders),n)n.hasOwnProperty(m)&&(d.encodeHeaders?p.setRequestHeader(m,v.encodeUTF8(n[m]+"")):p.setRequestHeader(m,n[m]+""));if(v.addEvent(p.upload,"progress",function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);d.onProgress.call(f,t),s&&(s.innerHTML=t+"%"),o&&(o.style.width=t+"%")}}),d.onProgress.call(this,0),!0===d.multipart){var g=new FormData,y=!1;for(var _ in t)t.hasOwnProperty(_)&&(_!==d.name||!0!==d.noParams||f._form||(y=!0),g.append(_,t[_]));y||g.append(d.name,r.file),this.log("Commencing upload using multipart form"),p.send(g)}else this.log("Commencing upload using binary stream"),p.send(r.file);this.removeCurrent(r.id)},_initUpload:function(e){var t,n={},r={};if(!1===this._opts.startXHR.call(this,e.name,e.size,e.btn))return this._disabled&&this.enable(!0),void this._active--;r["X-Requested-With"]="XMLHttpRequest",r["X-File-Name"]=v.encodeUTF8(e.name),"json"==this._opts.responseType.toLowerCase()&&(r.Accept="application/json, text/javascript, */*; q=0.01"),this._opts.multipart||(r["Content-Type"]="application/octet-stream"),this._form&&v.extendObj(n,v.getFormObj(this._form)),v.extendObj(n,this._opts.data),t=!0===this._opts.noParams?this._opts.url:this._opts.url+(-1<this._opts.url.indexOf("?")?"&":"?")+v.obj2string(n),this._uploadXhr(e,t,n,r,this._sizeBox,this._progBar,this._progBox,this._pctBox,this._abortBtn,this._removeAbort),this._sizeBox=this._progBar=this._progBox=this._pctBox=this._abortBtn=this._removeAbort=null}},v.DragAndDrop={_dragFileCheck:function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return!0;return!1},addDropZone:function(e){var t=this,n=[];v.addStyles(e,{zIndex:16777271}),e.ondragenter=function(e){return e.stopPropagation(),e.preventDefault(),t._dragFileCheck(e)&&(0===n.length&&v.addClass(this,t._opts.dragClass),-1===v.indexOf(n,e.target)&&n.push(e.target)),!1},e.ondragover=function(e){return e.stopPropagation(),e.preventDefault(),t._dragFileCheck(e)&&(e.dataTransfer.dropEffect="copy"),!1},e.ondragend=function(){return v.removeClass(this,t._opts.dragClass),!1},e.ondragleave=function(e){return v.arrayDelete(n,e.target),0===n.length&&v.removeClass(this,t._opts.dragClass),!1},e.ondrop=function(e){e.stopPropagation(),e.preventDefault(),v.arrayDelete(n,e.target),0===n.length&&v.removeClass(this,t._opts.dragClass),t._dragFileCheck(e)&&!1!==t._addFiles(e.dataTransfer.files)&&t._cycleQueue()}}},v.extendObj(v.SimpleUpload.prototype,{_createInput:function(){var e=this,t=document.createElement("div");this._input=document.createElement("input"),this._input.type="file",this._input.name=this._opts.name,this._opts.title&&(this._input.title=this._opts.title),n&&!s&&this._opts.multipleSelect&&(this._input.multiple=!0),"accept"in this._input&&""!==this._opts.accept&&(this._input.accept=this._opts.accept),v.addStyles(t,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:16777270}),"0"!==t.style.opacity&&(t.style.filter="alpha(opacity=0)"),v.addStyles(this._input,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer",height:"100%",zIndex:16777270}),this._input.turnOff=v.addEvent(this._input,"change",function(){e._input&&""!==e._input.value&&!1!==e._addFiles(n?e._input.files:e._input)&&(v.removeClass(e._overBtn,e._opts.hoverClass),v.removeClass(e._overBtn,e._opts.focusClass),e._killInput(),e._createInput(),e._opts.autoSubmit&&e.submit())}),""!==e._opts.hoverClass&&(t.mouseOverOff=v.addEvent(t,"mouseover",function(){v.addClass(e._overBtn,e._opts.hoverClass)})),t.mouseOutOff=v.addEvent(t,"mouseout",function(){e._input.parentNode.style.visibility="hidden",""!==e._opts.hoverClass&&(v.removeClass(e._overBtn,e._opts.hoverClass),v.removeClass(e._overBtn,e._opts.focusClass))}),""!==e._opts.focusClass&&(this._input.focusOff=v.addEvent(this._input,"focus",function(){v.addClass(e._overBtn,e._opts.focusClass)}),this._input.blurOff=v.addEvent(this._input,"blur",function(){v.removeClass(e._overBtn,e._opts.focusClass)})),t.appendChild(this._input),document.body.appendChild(t),t=null},_last:function(e,t,n,r,i,o,a,s,l){if(e&&(e.innerHTML=""),n&&(n.innerHTML=""),r&&i&&v.remove(r),t&&v.remove(t),this._active--,e=t=n=r=i=null,this._disabled&&this.enable(!0),this._destroy&&0===this._queue.length&&0===this._active)for(var u in this)this.hasOwnProperty(u)&&delete this[u];else this._opts.onDone.call(this,o.name,s,a,l,o.btn,o.size),this._cycleQueue(),0===this._queue.length&&0===this._active&&this._opts.onAllDone.call(this);o=a=s=l=null},_errorFinish:function(e,t,n,r,i,o,a,s,l,u){this.log("Upload failed: "+t+" "+n),this._opts.onError.call(this,e.name,i,t,n,r,e.btn,e.size),this._last(a,o,s,l,u,e,"error",t,r),n=i=a=o=s=l=u=null},_finish:function(e,t,n,r,i,o,a,s,l){this.log("Server response: "+r),"json"!=this._opts.responseType.toLowerCase()||!1!==(r=v.parseJSON(r))?(this._opts.onComplete.call(this,e.name,r,e.btn,e.size),this._last(i,o,a,s,l,e,"success",t,r),n=i=o=a=s=l=null):this._errorFinish(e,t,n,!1,"parseerror",o,i,s,l)},_checkFile:function(e){var t=!1,n=this._opts.allowedExtensions.length;if(0<n){for(;n--;)if(this._opts.allowedExtensions[n].toLowerCase()==e.ext.toLowerCase()){t=!0;break}if(!t)return this.removeCurrent(e.id),this.log("File extension not permitted"),this._opts.onExtError.call(this,e.name,e.ext),!1}return e.size&&!1!==this._opts.maxSize&&e.size>this._opts.maxSize?(this.removeCurrent(e.id),this.log(e.name+" exceeds "+this._opts.maxSize+"K limit"),this._opts.onSizeError.call(this,e.name,e.size),!1):!(e=null)},_killInput:function(){this._input&&(this._input.turnOff&&this._input.turnOff(),this._input.focusOff&&this._input.focusOff(),this._input.blurOff&&this._input.blurOff(),this._input.parentNode.mouseOverOff&&this._input.parentNode.mouseOverOff(),v.remove(this._input.parentNode),delete this._input,this._input=null)},_cycleQueue:function(){0<this._queue.length&&this._opts.autoSubmit&&this.submit(void 0,!0)},_validateForm:function(){return!(this._form.checkValidity&&!this._form.checkValidity())}}),n?v.extendObj(v.SimpleUpload.prototype,v.XhrUpload):v.extendObj(v.SimpleUpload.prototype,v.IframeUpload),v.extendObj(v.SimpleUpload.prototype,v.DragAndDrop),v},"function"==typeof define&&define.amd?define(function(){return i(r)}):"object"===(void 0===t?"undefined":d(t))&&t.exports?t.exports=i(r):r.ss=i(r)},{}],49:[function(e,a,t){"use strict";var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,r,i,o){return h((a=h(h(t,e),h(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function f(e,t,n,r,i,o,a){return s(t&n|~t&r,e,t,i,o,a)}function d(e,t,n,r,i,o,a){return s(t&r|n&~r,e,t,i,o,a)}function p(e,t,n,r,i,o,a){return s(t^n^r,e,t,i,o,a)}function m(e,t,n,r,i,o,a){return s(n^(t|~r),e,t,i,o,a)}function l(e,t){var n,r,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,l=-271733879,u=-1732584194,c=271733878;for(n=0;n<e.length;n+=16)l=m(l=m(l=m(l=m(l=p(l=p(l=p(l=p(l=d(l=d(l=d(l=d(l=f(l=f(l=f(l=f(i=l,u=f(o=u,c=f(a=c,s=f(r=s,l,u,c,e[n],7,-680876936),l,u,e[n+1],12,-389564586),s,l,e[n+2],17,606105819),c,s,e[n+3],22,-1044525330),u=f(u,c=f(c,s=f(s,l,u,c,e[n+4],7,-176418897),l,u,e[n+5],12,1200080426),s,l,e[n+6],17,-1473231341),c,s,e[n+7],22,-45705983),u=f(u,c=f(c,s=f(s,l,u,c,e[n+8],7,1770035416),l,u,e[n+9],12,-1958414417),s,l,e[n+10],17,-42063),c,s,e[n+11],22,-1990404162),u=f(u,c=f(c,s=f(s,l,u,c,e[n+12],7,1804603682),l,u,e[n+13],12,-40341101),s,l,e[n+14],17,-1502002290),c,s,e[n+15],22,1236535329),u=d(u,c=d(c,s=d(s,l,u,c,e[n+1],5,-165796510),l,u,e[n+6],9,-1069501632),s,l,e[n+11],14,643717713),c,s,e[n],20,-373897302),u=d(u,c=d(c,s=d(s,l,u,c,e[n+5],5,-701558691),l,u,e[n+10],9,38016083),s,l,e[n+15],14,-660478335),c,s,e[n+4],20,-405537848),u=d(u,c=d(c,s=d(s,l,u,c,e[n+9],5,568446438),l,u,e[n+14],9,-1019803690),s,l,e[n+3],14,-187363961),c,s,e[n+8],20,1163531501),u=d(u,c=d(c,s=d(s,l,u,c,e[n+13],5,-1444681467),l,u,e[n+2],9,-51403784),s,l,e[n+7],14,1735328473),c,s,e[n+12],20,-1926607734),u=p(u,c=p(c,s=p(s,l,u,c,e[n+5],4,-378558),l,u,e[n+8],11,-2022574463),s,l,e[n+11],16,1839030562),c,s,e[n+14],23,-35309556),u=p(u,c=p(c,s=p(s,l,u,c,e[n+1],4,-1530992060),l,u,e[n+4],11,1272893353),s,l,e[n+7],16,-155497632),c,s,e[n+10],23,-1094730640),u=p(u,c=p(c,s=p(s,l,u,c,e[n+13],4,681279174),l,u,e[n],11,-358537222),s,l,e[n+3],16,-722521979),c,s,e[n+6],23,76029189),u=p(u,c=p(c,s=p(s,l,u,c,e[n+9],4,-640364487),l,u,e[n+12],11,-421815835),s,l,e[n+15],16,530742520),c,s,e[n+2],23,-995338651),u=m(u,c=m(c,s=m(s,l,u,c,e[n],6,-198630844),l,u,e[n+7],10,1126891415),s,l,e[n+14],15,-1416354905),c,s,e[n+5],21,-57434055),u=m(u,c=m(c,s=m(s,l,u,c,e[n+12],6,1700485571),l,u,e[n+3],10,-1894986606),s,l,e[n+10],15,-1051523),c,s,e[n+1],21,-2054922799),u=m(u,c=m(c,s=m(s,l,u,c,e[n+8],6,1873313359),l,u,e[n+15],10,-30611744),s,l,e[n+6],15,-1560198380),c,s,e[n+13],21,1309151649),u=m(u,c=m(c,s=m(s,l,u,c,e[n+4],6,-145523070),l,u,e[n+11],10,-1120210379),s,l,e[n+2],15,718787259),c,s,e[n+9],21,-343485551),s=h(s,r),l=h(l,i),u=h(u,o),c=h(c,a);return[s,l,u,c]}function u(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function r(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function n(e){return unescape(encodeURIComponent(e))}function i(e){return u(l(c(t=n(e)),8*t.length));var t}function o(e,t){return function(e,t){var n,r,i=c(e),o=[],a=[];for(o[15]=a[15]=void 0,16<i.length&&(i=l(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=l(o.concat(c(t)),512+8*t.length),u(l(a.concat(r),640))}(n(e),n(t))}function t(e,t,n){return t?n?o(t,e):r(o(t,e)):n?i(e):r(i(e))}"function"==typeof define&&define.amd?define(function(){return t}):"object"===(void 0===a?"undefined":g(a))&&a.exports?a.exports=t:e.md5=t}(void 0)},{}],50:[function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=void 0,i=function(){return function(m){m=m||{},function(){void 0===m.escapeMode&&(m.escapeMode=!0);m.attributePrefix=m.attributePrefix||"_",m.arrayAccessForm=m.arrayAccessForm||"none",m.emptyNodeForm=m.emptyNodeForm||"text",void 0===m.enableToStringFunc&&(m.enableToStringFunc=!0);m.arrayAccessFormPaths=m.arrayAccessFormPaths||[],void 0===m.skipEmptyTextNodesForObj&&(m.skipEmptyTextNodesForObj=!0);void 0===m.stripWhitespaces&&(m.stripWhitespaces=!0);m.datetimeAccessFormPaths=m.datetimeAccessFormPaths||[],void 0===m.useDoubleQuotes&&(m.useDoubleQuotes=!1);m.xmlElementsFilter=m.xmlElementsFilter||[],m.jsonPropertiesFilter=m.jsonPropertiesFilter||[],void 0===m.keepCData&&(m.keepCData=!1)}();var g={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function y(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function _(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i];if("string"==typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"==typeof o&&o(t,n,r))break}return i!=e.length}function v(e,t,n){switch(m.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&0<m.arrayAccessFormPaths.length&&_(m.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function b(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function w(e,t){if(e.nodeType==g.DOCUMENT_NODE){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++){if((o=r.item(i)).nodeType==g.ELEMENT_NODE)n[a=y(o)]=w(o,a)}return n}if(e.nodeType==g.ELEMENT_NODE){(n=new Object).__cnt=0;for(r=e.childNodes,i=0;i<r.length;i++){var o,a=y(o=r.item(i));if(o.nodeType!=g.COMMENT_NODE){var s=t+"."+a;h=n,f=o.nodeType,d=a,p=s,f==g.ELEMENT_NODE&&0<m.xmlElementsFilter.length&&!_(m.xmlElementsFilter,h,d,p)||(n.__cnt++,null==n[a]?(n[a]=w(o,s),v(n,a,s)):(null!=n[a]&&(n[a]instanceof Array||(n[a]=[n[a]],v(n,a,s))),n[a][n[a].length]=w(o,s)))}}for(var l=0;l<e.attributes.length;l++){var u=e.attributes.item(l);n.__cnt++,n[m.attributePrefix+u.name]=u.value}var c=e.prefix;return null!=c&&""!=c&&(n.__cnt++,n.__prefix=c),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),m.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==m.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<m.datetimeAccessFormPaths.length){var r=n.split(".#")[0];return _(m.datetimeAccessFormPaths,e,t,r)?b(e):e}return e}(n.__text,a,t+"."+a)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==m.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==m.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||m.keepCData?1<n.__cnt&&null!=n.__text&&m.skipEmptyTextNodesForObj&&(m.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!m.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==g.TEXT_NODE||e.nodeType==g.CDATA_SECTION_NODE)return e.nodeValue;var h,f,d,p}function u(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var o=0;o<n.length;o++){var a=n[o],s=e[a];m.escapeMode&&(s=l(s)),i+=" "+a.substr(m.attributePrefix.length)+"=",m.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+=r?"/>":">"}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function h(e,t){return"property"==m.arrayAccessForm&&(n=t.toString(),r="_asArray",-1!==n.indexOf(r,n.length-r.length))||0==t.toString().indexOf(m.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n,r}function f(e){var t=0;if(e instanceof Object)for(var n in e)h(e,n)||t++;return t}function d(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(m.attributePrefix)&&t.push(n);return t}function p(e){var t,n,r="";return e instanceof Object?r+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(m.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(m.escapeMode?r+=l(e):r+=e),r}function x(e,t){return""===e?t:e+"."+t}function k(e,t,n,r){var i="";if(0==e.length)i+=u(e,t,n,!0);else for(var o=0;o<e.length;o++)i+=u(e[o],t,d(e[o]),!1),i+=L(e[o],x(r,t)),i+=c(e[o],t);return i}function L(e,t){var n,r,i,o="";if(0<f(e))for(var a in e)if(!h(e,a)&&(""==t||(n=e,i=x(t,r=a),0==m.jsonPropertiesFilter.length||""==i||_(m.jsonPropertiesFilter,n,r,i)))){var s=e[a],l=d(s);if(null==s||null==s)o+=u(s,a,l,!0);else if(s instanceof Object)if(s instanceof Array)o+=k(s,a,l,t);else if(s instanceof Date)o+=u(s,a,l,!1),o+=s.toISOString(),o+=c(s,a);else{0<f(s)||null!=s.__text||null!=s.__cdata?(o+=u(s,a,l,!1),o+=L(s,x(t,a)),o+=c(s,a)):o+=u(s,a,l,!0)}else o+=u(s,a,l,!1),o+=p(s),o+=c(s,a)}return o+=p(e)}this.parseXmlString=function(e){var t,n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!n)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){i=null}try{t=r.parseFromString(e,"text/xml"),null!=i&&0<t.getElementsByTagNameNS(i,"parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?b(e):e},this.xml2json=function(e){return w(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return L(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}},"function"==typeof define&&define.amd?define([],i):"object"===(void 0===n?"undefined":o(n))?t.exports=i():r.X2JS=i()},{}],51:[function(e,t,n){"use strict";L.Path.include({_transform:function(e){return this._renderer&&(e?this._renderer.transformPath(this,e):(this._renderer._resetTransformPath(this),this._update())),this},_onMouseClick:function(e){this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)}});var r={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},i={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"};function u(){return!0}L.Handler.PathDrag=L.Handler.extend({statics:{DRAGGING_CLS:"leaflet-path-draggable"},initialize:function(e){this._path=e,this._matrix=null,this._startPoint=null,this._dragStartPoint=null,this._mapDraggingWasEnabled=!1},addHooks:function(){this._path.on("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className?this._path.options.className+" "+L.Handler.PathDrag.DRAGGING_CLS:L.Handler.PathDrag.DRAGGING_CLS,this._path._path&&L.DomUtil.addClass(this._path._path,L.Handler.PathDrag.DRAGGING_CLS)},removeHooks:function(){this._path.off("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className.replace(new RegExp("\\s+"+L.Handler.PathDrag.DRAGGING_CLS),""),this._path._path&&L.DomUtil.removeClass(this._path._path,L.Handler.PathDrag.DRAGGING_CLS)},moved:function(){return this._path._dragMoved},_onDragStart:function(e){var t=e.originalEvent._simulated?"touchstart":e.originalEvent.type;this._mapDraggingWasEnabled=!1,this._startPoint=e.containerPoint.clone(),this._dragStartPoint=e.containerPoint.clone(),this._matrix=[1,0,0,1,0,0],L.DomEvent.stop(e.originalEvent),L.DomUtil.addClass(this._path._renderer._container,"leaflet-interactive"),L.DomEvent.on(document,i[t],this._onDrag,this).on(document,r[t],this._onDragEnd,this),this._path._map.dragging.enabled()&&(this._path._map.dragging.disable(),this._mapDraggingWasEnabled=!0),this._path._dragMoved=!1,this._path._popup&&this._path._popup._close(),this._replaceCoordGetters(e)},_onDrag:function(e){L.DomEvent.stop(e);var t=e.touches&&1<=e.touches.length?e.touches[0]:e,n=this._path._map.mouseEventToContainerPoint(t);if("touchmove"===e.type&&!this._path._dragMoved&&this._dragStartPoint.distanceTo(n)<=this._path._map.options.tapTolerance)return;var r=n.x,i=n.y,o=r-this._startPoint.x,a=i-this._startPoint.y;(o||a)&&(this._path._dragMoved||(this._path._dragMoved=!0,this._path.fire("dragstart",e),this._path.bringToFront()),this._matrix[4]+=o,this._matrix[5]+=a,this._startPoint.x=r,this._startPoint.y=i,this._path.fire("predrag",e),this._path._transform(this._matrix),this._path.fire("drag",e))},_onDragEnd:function(e){var t,n,r,i,o=this._path._map.mouseEventToContainerPoint(e),a=this.moved();if(a&&(this._transformPoints(this._matrix),this._path._updatePath(),this._path._project(),this._path._transform(null),L.DomEvent.stop(e)),L.DomEvent.off(document,"mousemove touchmove",this._onDrag,this),L.DomEvent.off(document,"mouseup touchend",this._onDragEnd,this),this._restoreCoordGetters(),a){this._path.fire("dragend",{distance:(t=this._dragStartPoint,n=o,r=t.x-n.x,i=t.y-n.y,Math.sqrt(r*r+i*i))});var s=this._path._containsPoint;this._path._containsPoint=L.Util.falseFn,L.Util.requestAnimFrame(function(){L.DomEvent.skipped({type:"click"}),this._path._containsPoint=s},this)}this._matrix=null,this._startPoint=null,this._dragStartPoint=null,this._path._dragMoved=!1,this._mapDraggingWasEnabled&&(a&&L.DomEvent.fakeStop({type:"click"}),this._path._map.dragging.enable())},_transformPoints:function(e,t){var n,r,i,o=this._path,a=L.point(e[4],e[5]),s=o._map.options.crs,l=s.transformation,u=s.scale(o._map.getZoom()),c=s.projection,h=l.untransform(a,u).subtract(l.untransform(L.point(0,0),u)),f=!t;if(o._bounds=new L.LatLngBounds,o._point)t=c.unproject(c.project(o._latlng)._add(h)),f&&(o._latlng=t,o._point._add(a));else if(o._rings||o._parts){var d=o._rings||o._parts,p=o._latlngs;for(t=t||p,L.Util.isArray(p[0])||(p=[p],t=[t]),n=0,r=d.length;n<r;n++){t[n]=t[n]||[];for(var m=0,g=d[n].length;m<g;m++)i=p[n][m],t[n][m]=c.unproject(c.project(i)._add(h)),f&&(o._bounds.extend(p[n][m]),d[n][m]._add(a))}}return t},_replaceCoordGetters:function(){this._path.getLatLng?(this._path.getLatLng_=this._path.getLatLng,this._path.getLatLng=L.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,{})},this._path)):this._path.getLatLngs&&(this._path.getLatLngs_=this._path.getLatLngs,this._path.getLatLngs=L.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,[])},this._path))},_restoreCoordGetters:function(){this._path.getLatLng_?(this._path.getLatLng=this._path.getLatLng_,delete this._path.getLatLng_):this._path.getLatLngs_&&(this._path.getLatLngs=this._path.getLatLngs_,delete this._path.getLatLngs_)}}),L.Handler.PathDrag.makeDraggable=function(e){return e.dragging=new L.Handler.PathDrag(e),e},L.Path.prototype.makeDraggable=function(){return L.Handler.PathDrag.makeDraggable(this)},L.Path.addInitHook(function(){this.options.draggable?(this.options.interactive=!0,this.dragging||L.Handler.PathDrag.makeDraggable(this),this.dragging.enable()):this.dragging&&this.dragging.disable()}),L.SVG.include({_resetTransformPath:function(e){e._path.setAttributeNS(null,"transform","")},transformPath:function(e,t){e._path.setAttributeNS(null,"transform","matrix("+t.join(" ")+")")}}),L.SVG.include(L.Browser.vml?{_resetTransformPath:function(e){e._skew&&(e._skew.on=!1,e._path.removeChild(e._skew),e._skew=null)},transformPath:function(e,t){var n=e._skew;n||(n=L.SVG.create("skew"),e._path.appendChild(n),n.style.behavior="url(#default#VML)",e._skew=n);var r=t[0].toFixed(8)+" "+t[1].toFixed(8)+" "+t[2].toFixed(8)+" "+t[3].toFixed(8)+" 0 0",i=Math.floor(t[4]).toFixed()+", "+Math.floor(t[5]).toFixed(),o=this._path.style,a=parseFloat(o.left),s=parseFloat(o.top),l=parseFloat(o.width),u=parseFloat(o.height);isNaN(a)&&(a=0),isNaN(s)&&(s=0),!isNaN(l)&&l||(l=1),!isNaN(u)&&u||(u=1);var c=(-a/l-.5).toFixed(8)+" "+(-s/u-.5).toFixed(8);n.on="f",n.matrix=r,n.origin=c,n.offset=i,n.on=!0}}:{}),L.Canvas.include({_resetTransformPath:function(e){this._containerCopy&&(delete this._containerCopy,e._containsPoint_&&(e._containsPoint=e._containsPoint_,delete e._containsPoint_,this._requestRedraw(e)))},transformPath:function(e,t){var n,r=this._containerCopy,i=this._ctx,o=L.Browser.retina?2:1,a=this._bounds,s=a.getSize(),l=a.min;r||(n=(r=this._containerCopy=document.createElement("canvas")).getContext("2d"),r.width=o*s.x,r.height=o*s.y,this._removePath(e),this._redraw(),n.translate(o*a.min.x,o*a.min.y),n.drawImage(this._container,0,0),this._initPath(e),e._containsPoint_=e._containsPoint,e._containsPoint=u),i.save(),i.clearRect(l.x,l.y,s.x*o,s.y*o),i.setTransform(1,0,0,1,0,0),i.restore(),i.save(),i.drawImage(this._containerCopy,0,0,s.x,s.y),i.transform.apply(i,t),this._drawing=!0,e._updatePath(),this._drawing=!1,i.restore()}})},{}],52:[function(e,t,n){"use strict";var r,i,Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){var x=1,k=2,L=4,C=5,M=484813681109536e-20,P=Math.PI/2,S=.16666666666666666,E=.04722222222222222,T=.022156084656084655,I=1e-10,s=.017453292519943295,l=57.29577951308232,m=Math.PI/4,r=2*Math.PI,_=3.14159265359,u={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},c={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},a=/[\s_\-\/\(\)]/g;function O(e,t){if(e[t])return e[t];for(var n,r=Object.keys(e),i=t.toLowerCase().replace(a,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(a,"")===i)return e[n]}var i=function(e){var t,n,r,i={},o=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*s},lat_1:function(e){i.lat1=e*s},lat_2:function(e){i.lat2=e*s},lat_ts:function(e){i.lat_ts=e*s},lon_0:function(e){i.long0=e*s},lon_1:function(e){i.long1=e*s},lon_2:function(e){i.long2=e*s},alpha:function(e){i.alpha=parseFloat(e)*s},lonc:function(e){i.longc=e*s},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;var t=O(c,e);t&&(i.to_meter=t.to_meter)},from_greenwich:function(e){i.from_greenwich=e*s},pm:function(e){var t=O(u,e);i.from_greenwich=(t||parseFloat(e))*s},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(i.axis=e)}};for(t in o)n=o[t],t in a?"function"==typeof(r=a[t])?r(n):i[r]=n:i[t]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},n=1,t=/\s/,o=/[A-Za-z]/,h=/[A-Za-z84]/,f=/[,\]]/,d=/[\d\.E\-\+]/;function p(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=n}function g(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var r=t?{}:e,i=n.reduce(function(e,t){return y(t,e),e},r);t&&(e[t]=i)}function y(e,t){if(Array.isArray(e)){var n,r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void y(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r)switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&y(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&y(e[3],t[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void g(t,r,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return y(e,t[r]);return g(t,r,e)}else t[r]=e;else t[r]=!0}else t[e]=!0}p.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;t.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case n:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},p.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(f.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},p.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=n)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=n,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},p.prototype.number=function(e){if(!d.test(e)){if(f.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},p.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},p.prototype.keyword=function(e){if(h.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=n)}if(!f.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},p.prototype.neutral=function(e){if(o.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(d.test(e))return this.word=e,void(this.state=3);if(!f.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},p.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var v=.017453292519943295;function b(e){return e*v}var e,w=function(e){var t=new p(e).output(),n=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",n]);var i={};return y(t,i),function(o){"GEOGCS"===o.type?o.projName="longlat":"LOCAL_CS"===o.type?(o.projName="identity",o.local=!0):"object"===Gt(o.PROJECTION)?o.projName=Object.keys(o.PROJECTION)[0]:o.projName=o.PROJECTION,o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),"metre"===o.units&&(o.units="meter"),o.UNIT.convert&&("GEOGCS"===o.type?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var e=o.GEOGCS;function t(e){return e*(o.to_meter||1)}"GEOGCS"===o.type&&(e=o),e&&(e.DATUM?o.datumCode=e.DATUM.name.toLowerCase():o.datumCode=e.name.toLowerCase(),"d_"===o.datumCode.slice(0,2)&&(o.datumCode=o.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==o.datumCode&&"new_zealand_1949"!==o.datumCode||(o.datumCode="nzgd49"),"wgs_1984"===o.datumCode&&("Mercator_Auxiliary_Sphere"===o.PROJECTION&&(o.sphere=!0),o.datumCode="wgs84"),"_ferro"===o.datumCode.slice(-6)&&(o.datumCode=o.datumCode.slice(0,-6)),"_jakarta"===o.datumCode.slice(-8)&&(o.datumCode=o.datumCode.slice(0,-8)),~o.datumCode.indexOf("belge")&&(o.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(o.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===o.ellps.toLowerCase().slice(0,13)&&(o.ellps="intl"),o.a=e.DATUM.SPHEROID.a,o.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(o.datum_params=e.DATUM.TOWGS84),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65"),"ch1903+"===o.datumCode&&(o.datumCode="ch1903"),~o.datumCode.indexOf("israel")&&(o.datumCode="isr93")),o.b&&!isFinite(o.b)&&(o.b=o.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]].forEach(function(e){return t=o,r=(n=e)[0],i=n[1],void(!(r in t)&&i in t&&(t[r]=t[i],3===n.length&&(t[r]=n[2](t[r]))));var t,n,r,i}),o.long0||!o.longc||"Albers_Conic_Equal_Area"!==o.projName&&"Lambert_Azimuthal_Equal_Area"!==o.projName||(o.long0=o.longc),o.lat_ts||!o.lat1||"Stereographic_South_Pole"!==o.projName&&"Polar Stereographic (variant B)"!==o.projName||(o.lat0=b(0<o.lat1?90:-90),o.lat_ts=o.lat1)}(i),i};function D(e){var t=this;if(2===arguments.length){var n=arguments[1];D[e]="string"==typeof n?"+"===n.charAt(0)?i(arguments[1]):w(arguments[1]):n}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?D.apply(t,e):D(e)});if("string"==typeof e){if(e in D)return D[e]}else"EPSG"in e?D["EPSG:"+e.EPSG]=e:"ESRI"in e?D["ESRI:"+e.ESRI]=e:"IAU2000"in e?D["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(e=D)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"];var N=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var A=["3857","900913","3785","102113"];function j(e){if("string"!=typeof e)return e;if(e in D)return D[e];if(r=e,N.some(function(e){return-1<r.indexOf(e)})){var t=w(e);if(function(e){var t=O(e,"authority");if(t){var n=O(t,"epsg");return n&&-1<A.indexOf(n)}}(t))return D["EPSG:3857"];var n=function(e){var t=O(e,"extension");if(t)return O(t,"proj4")}(t);return n?i(n):t}return"+"===e[0]?i(e):void 0;var r}var R=function(e,t){var n,r;if(e=e||{},!t)return e;for(r in t)void 0!==(n=t[r])&&(e[r]=n);return e},B=function(e,t,n){var r=e*t;return n/Math.sqrt(1-r*r)},F=function(e){return e<0?-1:1},z=function(e){return e},q=function(e){var t=e.lng;e.lng=Math.abs(t)<=_?t:t-F(t)*r},U=function(e,t,n){var r=e*n,i=.5*e;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(P-t))/r},G=function(e,t){for(var n,r,i=.5*e,o=P-2*Math.atan(t),a=0;a<=15;a++)if(n=e*Math.sin(o),o+=r=P-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};function $(e){return e}var V=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,n,r=e.x,i=e.y;if(90<i*l&&i*l<-90&&180<r*l&&r*l<-180)return null;if(Math.abs(Math.abs(i)-P)<=I)return null;if(this.sphere)t=this.x0+this.a*this.k0*z(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(m+.5*i));else{var o=Math.sin(i),a=U(this.e,i,o);t=this.x0+this.a*this.k0*z(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r=e.x-this.x0,i=e.y-this.y0;if(this.sphere)n=P-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=G(this.e,o)))return null}return t=z(this.long0+r/(this.a*this.k0)),e.x=t,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:$,inverse:$,names:["longlat","identity"]}],H={},W=[];function Q(e,t){var n=W.length;return e.names?((W[n]=e).names.forEach(function(e){H[e.toLowerCase()]=n}),this):(console.log(t),!0)}var K={start:function(){V.forEach(Q)},add:Q,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==H[t]&&W[H[t]]?W[H[t]]:void 0}},Z={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},J=Z.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Z.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var X={};function Y(e,t){if(!(this instanceof Y))return new Y(e);t=t||function(e){if(e)throw e};var n=j(e);if("object"===(void 0===n?"undefined":Gt(n))){var r=Y.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=O(X,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,a,s,l,u,c,h,f,d,p,m,g,y,_,v=function(e,t,n,r,i){if(!e){var o=O(Z,r);o||(o=J),e=o.a,t=o.b,n=o.rf}return n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<I)&&(i=!0,t=e),{a:e,b:t,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),b=(o=v.a,a=v.b,v.rf,s=n.R_A,c=((l=o*o)-(u=a*a))/l,h=0,s?(l=(o*=1-c*(S+c*(E+c*T)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(l-u)/u}),w=n.datum||(f=n.datumCode,d=n.datum_params,p=v.a,m=v.b,g=b.es,y=b.ep2,(_={}).datum_type=void 0===f||"none"===f?C:L,d&&(_.datum_params=d.map(parseFloat),0===_.datum_params[0]&&0===_.datum_params[1]&&0===_.datum_params[2]||(_.datum_type=x),3<_.datum_params.length&&(0===_.datum_params[3]&&0===_.datum_params[4]&&0===_.datum_params[5]&&0===_.datum_params[6]||(_.datum_type=k,_.datum_params[3]*=M,_.datum_params[4]*=M,_.datum_params[5]*=M,_.datum_params[6]=_.datum_params[6]/1e6+1))),_.a=p,_.b=m,_.es=g,_.ep2=y,_);R(this,n),R(this,r),this.a=v.a,this.b=v.b,this.rf=v.rf,this.sphere=v.sphere,this.es=b.es,this.e=b.e,this.ep2=b.ep2,this.datum=w,this.init(),t(null,this)}else t(e)}else t(e)}function ee(e){return e===x||e===k}X.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},X.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},X.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},X.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},X.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},X.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},X.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},X.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},X.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},X.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},X.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},X.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},X.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},X.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},X.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},X.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},X.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},(Y.projections=K).start();var te=function(e,t,n){return i=t,(r=e).datum_type===i.datum_type&&!(r.a!==i.a||5e-11<Math.abs(r.es-i.es))&&(r.datum_type===x?r.datum_params[0]===i.datum_params[0]&&r.datum_params[1]===i.datum_params[1]&&r.datum_params[2]===i.datum_params[2]:r.datum_type!==k||r.datum_params[0]===i.datum_params[0]&&r.datum_params[1]===i.datum_params[1]&&r.datum_params[2]===i.datum_params[2]&&r.datum_params[3]===i.datum_params[3]&&r.datum_params[4]===i.datum_params[4]&&r.datum_params[5]===i.datum_params[5]&&r.datum_params[6]===i.datum_params[6])?n:e.datum_type===C||t.datum_type===C?n:e.es!==t.es||e.a!==t.a||ee(e.datum_type)||ee(t.datum_type)?(n=function(e,t,n){var r,i,o,a,s=e.x,l=e.y,u=e.z?e.z:0;if(l<-P&&-1.001*P<l)l=-P;else if(P<l&&l<1.001*P)l=P;else{if(l<-P)return{x:-1/0,y:-1/0,z:e.z};if(P<l)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-t*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-t)+u)*i}}(n,e.es,e.a),ee(e.datum_type)&&(n=function(e,t,n){if(t===x)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===k){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(e.x-l*e.y+s*e.z)+r,y:u*(l*e.x+e.y-a*e.z)+i,z:u*(-s*e.x+a*e.y+e.z)+o}}}(n,e.datum_type,e.datum_params)),ee(t.datum_type)&&(n=function(e,t,n){if(t===x)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===k){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=(e.x-r)/u,h=(e.y-i)/u,f=(e.z-o)/u;return{x:c+l*h-s*f,y:-l*c+h+a*f,z:s*c-a*h+f}}}(n,t.datum_type,t.datum_params)),function(e,t,n,r){var i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v=e.x,b=e.y,w=e.z?e.z:0;if(i=Math.sqrt(v*v+b*b),o=Math.sqrt(v*v+b*b+w*w),i/n<1e-12){if(y=0,o/n<1e-12)return _=-r,{x:e.x,y:e.y,z:e.z}}else y=Math.atan2(b,v);for(a=w/o,h=(s=i/o)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*s*s)),f=a*l,g=0;g++,u=t*(c=n/Math.sqrt(1-t*f*f))/(c+(_=i*h+w*f-c*(1-t*f*f))),m=(p=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*h-(d=s*(1-u)*l)*f,h=d,f=p,1e-24<m*m&&g<30;);return{x:y,y:Math.atan(p/Math.abs(d)),z:_}}(n,t.es,t.a,t.b)):n;var r,i},ne=function(e,t,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==n.z)switch(i=0===o?(r=a,"x"):1===o?(r=s,"y"):(r=l,"z"),e.axis[o]){case"e":u[i]=r;break;case"w":u[i]=-r;break;case"n":u[i]=r;break;case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},re=function(e){var t={x:e[0],y:e[1]};return 2<e.length&&(t.z=e[2]),3<e.length&&(t.m=e[3]),t},ie=function(e){oe(e.x),oe(e.y)};function oe(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ae(e,t,n){var r,i,o;return Array.isArray(n)&&(n=re(n)),ie(n),e.datum&&t.datum&&(o=t,((i=e).datum.datum_type===x||i.datum.datum_type===k)&&"WGS84"!==o.datumCode||(o.datum.datum_type===x||o.datum.datum_type===k)&&"WGS84"!==i.datumCode)&&(n=ae(e,r=new Y("WGS84"),n),e=r),"enu"!==e.axis&&(n=ne(e,!1,n)),n="longlat"===e.projName?{x:n.x*s,y:n.y*s}:(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter}),e.inverse(n)),e.from_greenwich&&(n.x+=e.from_greenwich),n=te(e.datum,t.datum,n),t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y}),"longlat"===t.projName?n={x:n.x*l,y:n.y*l}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter})),"enu"!==t.axis?ne(t,!0,n):n}var se=Y("WGS84");function le(e,t,n){var r,i,o;return q(n),Array.isArray(n)?(r=ae(e,t,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):(i=ae(e,t,n),2===(o=Object.keys(n)).length||o.forEach(function(e){"x"!==e&&"y"!==e&&(i[e]=n[e])}),i)}function ue(e){return e instanceof Y?e:e.oProj?e.oProj:Y(e)}function ce(t,n,e){t=ue(t);var r,i=!1;return void 0===n?(n=t,t=se,i=!0):(void 0!==n.x||Array.isArray(n))&&(e=n,n=t,t=se,i=!0),n=ue(n),e?le(t,n,e):(r={forward:function(e){return le(t,n,e)},inverse:function(e){return le(n,t,e)}},i&&(r.oProj=n),r)}var he=6,fe="AJSAJS",de="AFAFAF",pe=65,me=73,ge=79,ye=86,_e=90,ve={forward:be,inverse:function(e){var t=Le(Se(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:we};function be(e,t){return t=t||5,n=function(e){var t,n,r,i,o,a,s,l,u=e.lat,c=e.lon,h=.00669438,f=xe(u),d=xe(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);56<=u&&u<64&&3<=c&&c<12&&(l=32);72<=u&&u<84&&(0<=c&&c<9?l=31:9<=c&&c<21?l=33:21<=c&&c<33?l=35:33<=c&&c<42&&(l=37));s=xe(6*(l-1)-180+3),t=h/(1-h),n=6378137/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=t*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(d-s),a=6378137*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*h*h*h/3072*Math.sin(6*f));var p=.9996*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*t)*o*o*o*o*o/120)+5e5,m=.9996*(a+n*Math.tan(f)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*t)*o*o*o*o*o*o/720));u<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(p),zoneNumber:l,zoneLetter:function(e){var t="Z";e<=84&&72<=e?t="X":e<72&&64<=e?t="W":e<64&&56<=e?t="V":e<56&&48<=e?t="U":e<48&&40<=e?t="T":e<40&&32<=e?t="S":e<32&&24<=e?t="R":e<24&&16<=e?t="Q":e<16&&8<=e?t="P":e<8&&0<=e?t="N":e<0&&-8<=e?t="M":e<-8&&-16<=e?t="L":e<-16&&-24<=e?t="K":e<-24&&-32<=e?t="J":e<-32&&-40<=e?t="H":e<-40&&-48<=e?t="G":e<-48&&-56<=e?t="F":e<-56&&-64<=e?t="E":e<-64&&-72<=e?t="D":e<-72&&-80<=e&&(t="C");return t}(u)}}({lat:e[1],lon:e[0]}),r=t,i="00000"+n.easting,o="00000"+n.northing,n.zoneNumber+n.zoneLetter+(p=n.easting,m=n.northing,g=n.zoneNumber,y=Ce(g),_=Math.floor(p/1e5),v=Math.floor(m/1e5)%20,a=_,s=v,l=y-1,u=fe.charCodeAt(l),c=de.charCodeAt(l),d=!1,_e<(h=u+a-1)&&(h=h-_e+pe-1,d=!0),(h===me||u<me&&me<h||(me<h||u<me)&&d)&&h++,(h===ge||u<ge&&ge<h||(ge<h||u<ge)&&d)&&++h===me&&h++,_e<h&&(h=h-_e+pe-1),d=ye<(f=c+s)&&(f=f-ye+pe-1,!0),(f===me||c<me&&me<f||(me<f||c<me)&&d)&&f++,(f===ge||c<ge&&ge<f||(ge<f||c<ge)&&d)&&++f===me&&f++,ye<f&&(f=f-ye+pe-1),String.fromCharCode(h)+String.fromCharCode(f))+i.substr(i.length-5,r)+o.substr(o.length-5,r);var n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v}function we(e){var t=Le(Se(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function xe(e){return e*(Math.PI/180)}function ke(e){return e/Math.PI*180}function Le(e){var t=e.northing,n=e.easting,r=e.zoneLetter,i=e.zoneNumber;if(i<0||60<i)return null;var o,a,s,l,u,c,h,f,d,p=.00669438,m=(1-Math.sqrt(1-p))/(1+Math.sqrt(1-p)),g=n-5e5,y=t;r<"N"&&(y-=1e7),h=6*(i-1)-180+3,o=p/(1-p),d=(f=y/.9996/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*f)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*f)+151*m*m*m/96*Math.sin(6*f),a=6378137/Math.sqrt(1-p*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),l=o*Math.cos(d)*Math.cos(d),u=6378137*(1-p)/Math.pow(1-p*Math.sin(d)*Math.sin(d),1.5),c=g/(.9996*a);var _=d-a*Math.tan(d)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-252*o-3*l*l)*c*c*c*c*c*c/720);_=ke(_);var v,b=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(d);if(b=h+ke(b),e.accuracy){var w=Le({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});v={top:w.lat,right:w.lon,bottom:_,left:b}}else v={lat:_,lon:b};return v}function Ce(e){var t=e%he;return 0===t&&(t=he),t}function Se(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n=e.length,r=null,i="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+e;i+=t,o++}var a=parseInt(i,10);if(0===o||n<o+3)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;r=e.substring(o,o+=2);for(var l=Ce(a),u=function(e,t){var n=fe.charCodeAt(t-1),r=1e5,i=!1;for(;n!==e.charCodeAt(0);){if(++n===me&&n++,n===ge&&n++,_e<n){if(i)throw"Bad character: "+e;n=pe,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(e,t){if("V"<e)throw"MGRSPoint given invalid Northing "+e;var n=de.charCodeAt(t-1),r=0,i=!1;for(;n!==e.charCodeAt(0);){if(++n===me&&n++,n===ge&&n++,ye<n){if(i)throw"Bad character: "+e;n=pe,i=!0}r+=1e5}return r}(r.charAt(1),l);c<Me(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,d,p,m=h/2,g=0,y=0;return 0<m&&(f=1e5/Math.pow(10,m),d=e.substring(o,o+m),g=parseFloat(d)*f,p=e.substring(o+m),y=parseFloat(p)*f),{easting:g+u,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function Me(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(0<=t)return t;throw"Invalid zone letter: "+e}function Pe(e,t,n){if(!(this instanceof Pe))return new Pe(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===(void 0===e?"undefined":Gt(e)))this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Pe.fromMGRS=function(e){return new Pe(we(e))},Pe.prototype.toMGRS=function(e){return be([this.x,this.y],e)};var Ee=.01068115234375,Te=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*Ee))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*Ee)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),n*=e,t[3]=n*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t},Ie=function(e,t,n,r){return n*=t,t*=t,r[0]*e-n*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))},Oe=function(e,t,n){for(var r=1/(1-t),i=e,o=20;o;--o){var a=Math.sin(i),s=1-t*a*a;if(i-=s=(Ie(i,a,Math.cos(i),n)-e)*(s*Math.sqrt(s))*r,Math.abs(s)<I)return i}return i};var De={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Te(this.es),this.ml0=Ie(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=z(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),d=Math.abs(l)>I?Math.tan(o):0,p=Math.pow(d,2),m=Math.pow(p,2);t=1-this.es*Math.pow(s,2),u/=Math.sqrt(t);var g=Ie(o,s,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-p+h+c/20*(5-18*p+m+14*h-58*p*h+c/42*(61+179*m-m*p-479*p)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+s*a*u/2*(1+c/12*(5-p+9*h+4*f+c/30*(61+m-58*p+270*h-330*p*h+c/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var y=l*Math.sin(a);if(Math.abs(Math.abs(y)-1)<I)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),1<=(y=Math.abs(r))){if(I<y-1)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=n,e.y=r,e},inverse:function(e){var t,n,r,i,o=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,n=Oe(t,this.es,this.en),Math.abs(n)<P){var s=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>I?Math.tan(n):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),f=Math.pow(u,2),d=Math.pow(f,2);t=1-this.es*Math.pow(s,2);var p=o*Math.sqrt(t)/this.k0,m=Math.pow(p,2);r=n-(t*=u)*m/(1-this.es)*.5*(1-m/12*(5+3*f-9*c*f+c-4*h-m/30*(61+90*f-252*c*f+45*d+46*c-m/56*(1385+3633*f+4095*d+1574*d*f)))),i=z(this.long0+p*(1-m/6*(1+2*f+c-m/20*(5+28*f+24*d+8*c*f+6*c-m/42*(61+662*f+1320*d+720*d*f))))/l)}else r=P*F(a),i=0;else{var g=Math.exp(o/this.k0),y=.5*(g-1/g),_=this.lat0+a/this.k0,v=Math.cos(_);t=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(y,2))),r=Math.asin(t),a<0&&(r=-r),i=0===y&&0===v?0:z(Math.atan2(y,v)+this.long0)}return e.x=i,e.y=r,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Ne=function(e){var t=Math.exp(e);return t=(t-1/t)/2},Ae=function(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),r=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},je=function(e){var t,n,r,i=Math.abs(e);return t=i*(1+i/(Ae(1,i)+1)),i=0===(r=(n=1+t)-1)?t:t*Math.log(n)/r,e<0?-i:i},Re=function(e,t){for(var n,r=2*Math.cos(2*t),i=e.length-1,o=e[i],a=0;0<=--i;)n=r*o-a+e[i],a=o,o=n;return t+n*Math.sin(2*t)},Be=function(e,t,n){for(var r,i,o,a,s=Math.sin(t),l=Math.cos(t),u=Ne(n),c=(r=n,i=((i=Math.exp(r))+1/i)/2),h=2*l*c,f=-2*s*u,d=e.length-1,p=e[d],m=0,g=0,y=0;0<=--d;)o=g,a=m,p=h*(g=p)-o-f*(m=y)+e[d],y=f*g-a+h*m;return[(h=s*c)*p-(f=l*u)*y,h*y+f*p]};var Fe={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),n*=t,this.cgb[1]=n*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n*=t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),n*=t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(t*(-24832/14175)-2.4)),n*=t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n*=t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),n*=t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n*=t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n*=t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n*=t,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=Re(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(e,t){for(var n,r=2*Math.cos(t),i=e.length-1,o=e[i],a=0;0<=--i;)n=r*o-a+e[i],a=o,o=n;return Math.sin(t)*n}(this.gtu,2*r))},forward:function(e){var t=z(e.x-this.long0),n=e.y;n=Re(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(t),a=Math.cos(t);n=Math.atan2(r,a*i),t=Math.atan2(o*i,Ae(r,i*a)),t=je(Math.tan(t));var s,l,u=Be(this.gtu,2*n,2*t);return n+=u[0],t+=u[1],l=Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,this.a*(this.Qn*n+this.Zb)+this.y0):s=1/0,e.x=s,e.y=l,e},inverse:function(e){var t,n,r=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=Be(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Ne(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(a*u,Ae(l,u*s)),r=Math.atan2(l,u*s),t=z(r+this.long0),n=Re(this.cgb,i)}else n=t=1/0;return e.x=t,e.y=n,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var ze={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(z(t)+Math.PI)/Math.PI)+1)<0)return 0;if(60<e)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*s,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Fe.init.apply(this),this.forward=Fe.forward,this.inverse=Fe.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},qe=function(e,t){return Math.pow((1-e)/(1+e),t)};var Ue={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+m)/(Math.pow(Math.tan(.5*this.lat0+m),this.C)*qe(this.e*e,this.ratexp))},forward:function(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+m),this.C)*qe(this.e*Math.sin(n),this.ratexp))-P,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+m)/this.K,1/this.C),i=20;0<i&&(n=2*Math.atan(r*qe(this.e*Math.sin(e.y),-.5*this.e))-P,!(Math.abs(n-e.y)<1e-14));--i)e.y=n;return i?(e.x=t,e.y=n,e):null},names:["gauss"]};var Ge={init:function(){Ue.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,n,r,i;return e.x=z(e.x-this.long0),Ue.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),r=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*r),e.x=i*n*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*n*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,n,r,i,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+e.y*t*this.cosc0/o),r=Math.atan2(e.x*t,o*this.cosc0*n-e.y*this.sinc0*t)}else i=this.phic0,r=0;return e.x=r,e.y=i,Ue.inverse.apply(this,[e]),e.x=z(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var $e={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=I&&(this.k0=.5*(1+F(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=I&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=I&&(this.k0=.5*this.cons*B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/U(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=B(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-P,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,n,r,i,o,a,s=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),h=z(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=I&&Math.abs(l+this.lat0)<=I?(e.x=NaN,e.y=NaN):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),e.x=this.a*t*c*Math.sin(h)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0):(n=2*Math.atan(this.ssfn_(l,u,this.e))-P,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=I?(o=U(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0)):(Math.abs(this.sinlat0)<I?(t=2*this.a*this.k0/(1+i*Math.cos(h)),e.y=t*r):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),e.y=t*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),e.x=t*i*Math.sin(h)+this.x0)),e},inverse:function(e){var t,n,r,i,o;e.x-=this.x0,e.y-=this.y0;var a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,n=this.lat0,a<=I||(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=Math.abs(this.coslat0)<I?0<this.lat0?z(this.long0+Math.atan2(e.x,-1*e.y)):z(this.long0+Math.atan2(e.x,e.y)):z(this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s)))),e.x=t,e.y=n,e}if(Math.abs(this.coslat0)<=I){if(a<=I)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*G(this.e,r),t=this.con*z(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=I?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/a),t=z(this.long0+Math.atan2(e.x*Math.sin(i),a*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),n=-1*G(this.e,Math.tan(.5*(P+o)));return e.x=t,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,n){return t*=n,Math.tan(.5*(P+e))*Math.pow((1-t)/(1+t),.5*n)}};var Ve={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,n=e.y-this.y0,r=t/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;1e-7<Math.abs(u-c);){if(20<++h)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=u,e},names:["somerc"]};var He={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),n=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=U(this.e,this.lat0,e),a=this.bl/t*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=U(this.e,this.lat1,Math.sin(this.lat1)),l=U(this.e,this.lat2,Math.sin(this.lat2));0<=this.lat0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);i=.5*((r=this.el/u)-1/r);var h=(this.el*this.el-c*u)/(this.el*this.el+c*u),f=(c-u)/(c+u),d=z(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=z(this.long0);var p=z(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=0<=this.lat0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:0<=this.lat0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=z(i-this.long0);if(Math.abs(Math.abs(o)-P)<=I)r=0<o?-1:1,n=this.al/this.bl*Math.log(Math.tan(m+r*this.gamma0*.5)),t=-1*r*P*this.al/this.bl;else{var s=U(this.e,o,Math.sin(o)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),h=Math.sin(this.bl*a),f=(u*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=I?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,t=Math.abs(Math.cos(this.bl*a))<=I?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+n):(t-=this.uc,e.x=this.x0+n*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-n*Math.sin(this.alpha)),e},inverse:function(e){var t,n;this.no_rot?(n=e.y-this.y0,t=e.x-this.x0):(n=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*t/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<I?(e.x=this.long0,e.y=P):Math.abs(s+1)<I?(e.x=this.long0,e.y=-1*P):(e.y=G(this.e,l),e.x=z(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var We={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<I)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),r=B(this.e,t,n),i=U(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=B(this.e,o,a),l=U(this.e,this.lat2,o),u=U(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>I?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=I&&(n=F(n)*(P-2*I));var r,i,o=Math.abs(Math.abs(n)-P);if(I<o)r=U(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*z(t-this.long0);return e.x=this.k0*(i*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,e},inverse:function(e){var t,n,r,i,o,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;n=0<this.ns?(t=Math.sqrt(a*a+s*s),1):(t=-Math.sqrt(a*a+s*s),-1);var l=0;if(0!==t&&(l=Math.atan2(n*a,n*s)),0!==t||0<this.ns){if(n=1/this.ns,r=Math.pow(t/(this.a*this.f0),n),-9999===(i=G(this.e,r)))return null}else i=-P;return o=z(l/this.ns+this.long0),e.x=o,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Qe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y,c=z(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,n,r,i,o,a,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t)),e.x=this.long0-n/this.alfa,a=t;for(var u=s=0;e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,u+=1,0===s&&u<15;);return 15<=u?null:e},names:["Krovak","krovak"]},Ke=function(e,t,n,r,i){return e*i-t*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Ze=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Je=function(e){return.375*e*(1+.25*e*(1+.46875*e))},Xe=function(e){return.05859375*e*e*(1+.75*e)},Ye=function(e){return e*e*e*(35/3072)},et=function(e,t,n){var r=t*n;return e/Math.sqrt(1-r*r)},tt=function(e){return Math.abs(e)<P?e:e-F(e)*Math.PI},nt=function(e,t,n,r,i){var o,a;o=e/t;for(var s=0;s<15;s++)if(o+=a=(e-(t*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var rt={init:function(){this.sphere||(this.e0=Ze(this.es),this.e1=Je(this.es),this.e2=Xe(this.es),this.e3=Ye(this.es),this.ml0=this.a*Ke(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,n,r=e.x,i=e.y;if(r=z(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=et(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*a*a/(1-this.es);t=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=this.a*Ke(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r=e.x/this.a,i=e.y/this.a;if(this.sphere){var o=i+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=nt(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-P)<=I)return e.x=this.long0,e.y=P,i<0&&(e.y*=-1),e;var l=et(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/l,f=h*h;t=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return e.x=z(n+this.long0),e.y=tt(t),e},names:["Cassini","Cassini_Soldner","cass"]},it=function(e,t){var n;return 1e-7<e?(1-e*e)*(t/(1-(n=e*t)*n)-.5/e*Math.log((1-n)/(1+n))):2*t};var ot=.3333333333333333,at=.17222222222222222,st=.10257936507936508,lt=.06388888888888888,ut=.0664021164021164,ct=.016415012942191543;var ht={init:function(){var e,t,n,r,i=Math.abs(this.lat0);if(Math.abs(i-P)<I?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<I?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=it(this.e,1),this.mmf=.5/(1-this.es),this.apa=(t=this.es,(r=[])[0]=t*ot,n=t*t,r[0]+=n*at,r[1]=n*lt,n*=t,r[0]+=n*st,r[1]+=n*ut,r[2]=n*ct,r),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=it(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,n,r,i,o,a,s,l,u,c,h=e.x,f=e.y;if(h=z(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=I)return null;t=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.phi0)<I)return null;n=m-.5*f,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(u=l=s=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=it(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=P+f,a=this.qp-a;break;case this.S_POLE:u=f-P,a=this.qp+a}if(Math.abs(u)<I)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:0<=a?(t=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r,i,o,a,s,l,u,c,h=e.x/this.a,f=e.y/this.a;if(this.sphere){var d,p=0,m=0;if(1<(n=.5*(d=Math.sqrt(h*h+f*f))))return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=I?0:Math.asin(f*m/d),h*=m,f=p*d;break;case this.OBLIQ:n=Math.abs(d)<=I?this.phi0:Math.asin(p*this.sinph0+f*m*this.cosph0/d),h*=m*this.cosph0,f=(p-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:f=-f,n=P-n;break;case this.S_POLE:n-=P}t=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(a=Math.sqrt(h*h+f*f))<I)return e.x=0,e.y=this.phi0,e;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),h*=i=Math.sin(i),f=this.mode===this.OBLIQ?(s=r*this.sinb1+f*i*this.cosb1/a,o=this.qp*s,a*this.cosb1*r-f*this.sinb1*i):(s=f*i/a,o=this.qp*s,a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return e.x=0,e.y=this.phi0,e;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(h,f),l=Math.asin(s),u=this.apa,c=l+l,n=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return e.x=z(this.long0+t),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ft=function(e){return 1<Math.abs(e)&&(e=1<e?1:-1),Math.asin(e)};var dt={init:function(){Math.abs(this.lat1+this.lat2)<I||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=B(this.e3,this.sin_po,this.cos_po),this.qs1=it(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=B(this.e3,this.sin_po,this.cos_po),this.qs2=it(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=it(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>I?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=it(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*z(t-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,r=0<=this.ns0?(t=Math.sqrt(e.x*e.x+e.y*e.y),1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),-1),(i=0)!==t&&(i=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,a=this.sphere?Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,this.phi1z(this.e3,n)),o=z(i/this.ns0+this.long0),e.x=o,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var n,r,i,o,a=ft(.5*t);if(e<I)return a;for(var s=e*e,l=1;l<=25;l++)if(a+=o=.5*(i=1-(r=e*(n=Math.sin(a)))*r)*i/Math.cos(a)*(t/(1-s)-n/i+.5/e*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};var pt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y;return r=z(l-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),s=0<(o=this.sin_p14*t+this.cos_p14*n*i)||Math.abs(o)<=I?(a=this.x0+1*this.a*n*Math.sin(r)/o,this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),n=Math.sin(i),r=Math.cos(i),a=ft(r*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.atan2(e.x*n,t*this.cos_p14*r-e.y*this.sin_p14*n),z(this.long0+o)):(a=this.phic0,0),e.x=o,e.y=a,e},names:["gnom"]};var mt={init:function(){this.sphere||(this.k0=B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,n,r=e.x,i=e.y,o=z(r-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=it(this.e,Math.sin(i));t=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=n,e},inverse:function(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=z(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*P:P;for(var r,i,o,a,s=Math.asin(.5*t),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=e*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*e.y*this.k0/this.a),t=z(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e},names:["cea"]};var gt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,n=e.y,r=z(t-this.long0),i=tt(n-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*i,e},inverse:function(e){var t=e.x,n=e.y;return e.x=z(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=tt(this.lat0+(n-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var yt={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ze(this.es),this.e1=Je(this.es),this.e2=Xe(this.es),this.e3=Ye(this.es),this.ml0=this.a*Ke(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,n,r,i=e.x,o=e.y,a=z(i-this.long0);if(r=a*Math.sin(o),this.sphere)n=Math.abs(o)<=I?(t=this.a*a,-1*this.a*this.lat0):(t=this.a*Math.sin(r)/Math.tan(o),this.a*(tt(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=I)t=this.a*a,n=-1*this.ml0;else{var s=et(this.a,this.e,Math.sin(o))/Math.tan(o);t=s*Math.sin(r),n=this.a*Ke(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,n,r,i,o,a,s,l,u;if(r=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=I)t=z(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=I){n=l;break}t=z(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=I)n=0,t=z(this.long0+r/this.a);else{var h,f,d,p,m;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),f=this.a*Ke(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(h*(p=f/this.a)+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*l)*(p*p+s-2*a*p)/(4*h)+(a-p)*(h*d-2/Math.sin(2*l))-d),Math.abs(u)<=I){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=z(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return e.x=t,e.y=n,e},names:["Polyconic","poly"]};var _t={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,n=e.x,r=e.y-this.lat0,i=n-this.long0,o=r/M*1e-5,a=i,s=1,l=0;for(t=1;t<=10;t++)s*=o,l+=this.A[t]*s;var u,c=l,h=a,f=1,d=0,p=0,m=0;for(t=1;t<=6;t++)u=d*c+f*h,f=f*c-d*h,d=u,p=p+this.B_re[t]*f-this.B_im[t]*d,m=m+this.B_im[t]*f+this.B_re[t]*d;return e.x=m*this.a+this.x0,e.y=p*this.a+this.y0,e},inverse:function(e){var t,n,r=e.x,i=e.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,h=0;for(t=1;t<=6;t++)n=u*a+l*s,l=l*a-u*s,u=n,c=c+this.C_re[t]*l-this.C_im[t]*u,h=h+this.C_im[t]*l+this.C_re[t]*u;for(var f=0;f<this.iterations;f++){var d,p=c,m=h,g=a,y=s;for(t=2;t<=6;t++)d=m*c+p*h,p=p*c-m*h,m=d,g+=(t-1)*(this.B_re[t]*p-this.B_im[t]*m),y+=(t-1)*(this.B_im[t]*p+this.B_re[t]*m);p=1,m=0;var _=this.B_re[1],v=this.B_im[1];for(t=2;t<=6;t++)d=m*c+p*h,p=p*c-m*h,m=d,_+=t*(this.B_re[t]*p-this.B_im[t]*m),v+=t*(this.B_im[t]*p+this.B_re[t]*m);var b=_*_+v*v;c=(g*_+y*v)/b,h=(y*_-g*v)/b}var w=c,x=h,k=1,L=0;for(t=1;t<=9;t++)k*=w,L+=this.D[t]*k;var C=this.lat0+L*M*1e5,S=this.long0+x;return e.x=S,e.y=C,e},names:["New_Zealand_Map_Grid","nzmg"]};var vt={init:function(){},forward:function(e){var t=e.x,n=e.y,r=z(t-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=i,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=z(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e},names:["Miller_Cylindrical","mill"]};var bt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Te(this.es)},forward:function(e){var t,n,r=e.x,i=e.y;if(r=z(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<I)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*Ie(i,l,u,this.en),t=this.a*r*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=ft((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=ft(Math.sin(t)/this.n)),r=z(r+this.long0),t=tt(t)):(t=Oe(e.y/this.a,this.es,this.en),(i=Math.abs(t))<P?(i=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),r=z(n)):i-I<P&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]};var wt={init:function(){},forward:function(e){for(var t=e.x,n=e.y,r=z(t-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<I)break}i/=2,Math.PI/2-Math.abs(n)<I&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=s,e.y=l,e},inverse:function(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),.999999999999<Math.abs(n)&&(n=.999999999999),t=Math.asin(n);var r=z(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,1<Math.abs(n)&&(n=1);var i=Math.asin(n);return e.x=r,e.y=i,e},names:["Mollweide","moll"]};var xt={init:function(){Math.abs(this.lat1+this.lat2)<I||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ze(this.es),this.e1=Je(this.es),this.e2=Xe(this.es),this.e3=Ye(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=B(this.e,this.sinphi,this.cosphi),this.ml1=Ke(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<I?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=B(this.e,this.sinphi,this.cosphi),this.ml2=Ke(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ke(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,n=e.x,r=e.y;if(this.sphere)t=this.a*(this.g-r);else{var i=Ke(this.e0,this.e1,this.e2,this.e3,r);t=this.a*(this.g-i)}var o=this.ns*z(n-this.long0),a=this.x0+t*Math.sin(o),s=this.y0+this.rh-t*Math.cos(o);return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,t=0<=this.ns?(n=Math.sqrt(e.x*e.x+e.y*e.y),1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),-1);var o=0;if(0!==n&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=z(this.long0+o/this.ns),r=tt(this.g-n/this.a),e.x=i,e.y=r,e;var a=this.g-n/this.a;return r=nt(a,this.e0,this.e1,this.e2,this.e3),i=z(this.long0+o/this.ns),e.x=i,e.y=r,e},names:["Equidistant_Conic","eqdc"]};var kt={init:function(){this.R=this.a},forward:function(e){var t,n,r=e.x,i=e.y,o=z(r-this.long0);Math.abs(i)<=I&&(t=this.x0+this.R*o,n=this.y0);var a=ft(2*Math.abs(i/Math.PI));(Math.abs(o)<=I||Math.abs(Math.abs(i)-P)<=I)&&(t=this.x0,n=0<=i?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),f=h*h,d=h*(2/u-1),p=d*d,m=Math.PI*this.R*(s*(h-p)+Math.sqrt(l*(h-p)*(h-p)-(p+l)*(f-p)))/(p+l);o<0&&(m=-m),t=this.x0+m;var g=l+h;return m=Math.PI*this.R*(d*g-s*Math.sqrt((p+l)*(l+1)-g*g))/(p+l),n=0<=i?this.y0+m:this.y0-m,e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,h,f;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,o=(r=e.x/h)*r+(i=e.y/h)*i,h=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),1<Math.abs(h)&&(h=0<=h?1:-1),f=Math.acos(h)/3,n=0<=e.y?(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(r)<I?this.long0:z(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),e.x=t,e.y=n,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Lt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k=e.x,L=e.y,C=Math.sin(e.y),S=Math.cos(e.y),M=z(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=I?(e.x=this.x0+this.a*(P-L)*Math.sin(M),e.y=this.y0-this.a*(P-L)*Math.cos(M)):Math.abs(this.sin_p12+1)<=I?(e.x=this.x0+this.a*(P+L)*Math.sin(M),e.y=this.y0+this.a*(P+L)*Math.cos(M)):(_=this.sin_p12*C+this.cos_p12*S*Math.cos(M),y=(g=Math.acos(_))/Math.sin(g),e.x=this.x0+this.a*y*S*Math.sin(M),e.y=this.y0+this.a*y*(this.cos_p12*C-this.sin_p12*S*Math.cos(M))):(t=Ze(this.es),n=Je(this.es),r=Xe(this.es),i=Ye(this.es),Math.abs(this.sin_p12-1)<=I?(o=this.a*Ke(t,n,r,i,P),a=this.a*Ke(t,n,r,i,L),e.x=this.x0+(o-a)*Math.sin(M),e.y=this.y0-(o-a)*Math.cos(M)):Math.abs(this.sin_p12+1)<=I?(o=this.a*Ke(t,n,r,i,P),a=this.a*Ke(t,n,r,i,L),e.x=this.x0+(o+a)*Math.sin(M),e.y=this.y0+(o+a)*Math.cos(M)):(s=C/S,l=et(this.a,this.e,this.sin_p12),u=et(this.a,this.e,C),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*S)),v=0===(h=Math.atan2(Math.sin(M),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(M)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=I?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(M)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*v*(1-(b=v*v)*(m=(d=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*d)*(1-m)/6+(w=b*v)/8*(p=f*d)*(1-2*m)+(x=w*v)/120*(m*(4-7*m)-3*f*f*(1-7*m))-x*v/48*p),e.x=this.x0+g*Math.sin(h),e.y=this.y0+g*Math.cos(h))),e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*P*this.a)return;return n=t/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(t)<=I?a=this.lat0:(a=ft(i*this.sin_p12+e.y*r*this.cos_p12/t),s=Math.abs(this.lat0)-P,o=Math.abs(s)<=I?0<=this.lat0?z(this.long0+Math.atan2(e.x,-e.y)):z(this.long0-Math.atan2(-e.x,e.y)):z(this.long0+Math.atan2(e.x*r,t*this.cos_p12*i-e.y*this.sin_p12*r))),e.x=o,e.y=a,e}return l=Ze(this.es),u=Je(this.es),c=Xe(this.es),h=Ye(this.es),Math.abs(this.sin_p12-1)<=I?(f=this.a*Ke(l,u,c,h,P),t=Math.sqrt(e.x*e.x+e.y*e.y),a=nt((f-t)/this.a,l,u,c,h),o=z(this.long0+Math.atan2(e.x,-1*e.y))):Math.abs(this.sin_p12+1)<=I?(f=this.a*Ke(l,u,c,h,P),t=Math.sqrt(e.x*e.x+e.y*e.y),a=nt((t-f)/this.a,l,u,c,h),o=z(this.long0+Math.atan2(e.x,e.y))):(t=Math.sqrt(e.x*e.x+e.y*e.y),m=Math.atan2(e.x,e.y),d=et(this.a,this.e,this.sin_p12),g=Math.cos(m),_=-(y=this.e*this.cos_p12*g)*y/(1-this.es),v=3*this.es*(1-_)*this.sin_p12*this.cos_p12*g/(1-this.es),x=1-_*(w=(b=t/d)-_*(1+_)*Math.pow(b,3)/6-v*(1+3*_)*Math.pow(b,4)/24)*w/2-b*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*g),o=z(this.long0+Math.asin(Math.sin(m)*Math.sin(w)/Math.cos(p))),a=Math.atan((1-this.es*x*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es))),e.x=o,e.y=a,e},names:["Azimuthal_Equidistant","aeqd"]};var Ct={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y;return r=z(l-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(0<(o=this.sin_p14*t+this.cos_p14*n*i)||Math.abs(o)<=I)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=ft(t/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(t)<=I?s=this.lat0:(s=ft(i*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-P,a=Math.abs(o)<=I?0<=this.lat0?z(this.long0+Math.atan2(e.x,-e.y)):z(this.long0-Math.atan2(-e.x,e.y)):z(this.long0+Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r))),e.x=a,e.y=s,e},names:["ortho"]},St=1,Mt=2,Pt=3,Et=4,Tt=5,It=6,Ot={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Dt(e,t,n,r){var i;return e<I?(r.value=Ot.AREA_0,i=0):(i=Math.atan2(t,n),Math.abs(i)<=m?r.value=Ot.AREA_0:m<i&&i<=P+m?(r.value=Ot.AREA_1,i-=P):P+m<i||i<=-(P+m)?(r.value=Ot.AREA_2,i=0<=i?i-_:i+_):(r.value=Ot.AREA_3,i+=P)),i}function Nt(e,t){var n=e+t;return n<-_?n+=r:+_<n&&(n-=r),n}var At={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=P-m/2?this.face=Tt:this.lat0<=-(P-m/2)?this.face=It:Math.abs(this.long0)<=m?this.face=St:Math.abs(this.long0)<=P+m?this.face=0<this.long0?Mt:Et:this.face=Pt,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,n,r,i,o,a,s={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,this.face===Tt)i=P-t,r=m<=n&&n<=P+m?(l.value=Ot.AREA_0,n-P):P+m<n||n<=-(P+m)?(l.value=Ot.AREA_1,0<n?n-_:n+_):-(P+m)<n&&n<=-m?(l.value=Ot.AREA_2,n+P):(l.value=Ot.AREA_3,n);else if(this.face===It)i=P+t,r=m<=n&&n<=P+m?(l.value=Ot.AREA_0,-n+P):n<m&&-m<=n?(l.value=Ot.AREA_1,-n):n<-m&&-(P+m)<=n?(l.value=Ot.AREA_2,-n-P):(l.value=Ot.AREA_3,0<n?-n+_:-n-_);else{var u,c,h,f,d,p;this.face===Mt?n=Nt(n,+P):this.face===Pt?n=Nt(n,+_):this.face===Et&&(n=Nt(n,-P)),f=Math.sin(t),d=Math.cos(t),p=Math.sin(n),u=d*Math.cos(n),c=d*p,h=f,this.face===St?r=Dt(i=Math.acos(u),h,c,l):this.face===Mt?r=Dt(i=Math.acos(c),h,-u,l):this.face===Pt?r=Dt(i=Math.acos(-u),h,-c,l):this.face===Et?r=Dt(i=Math.acos(-c),h,u,l):(i=r=0,l.value=Ot.AREA_0)}return a=Math.atan(12/_*(r+Math.acos(Math.sin(r)*Math.cos(m))-P)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Ot.AREA_1?a+=P:l.value===Ot.AREA_2?a+=_:l.value===Ot.AREA_3&&(a+=1.5*_),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,h,f,d={lam:0,phi:0},p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),0<=e.x&&e.x>=Math.abs(e.y)?p.value=Ot.AREA_0:0<=e.y&&e.y>=Math.abs(e.x)?(p.value=Ot.AREA_1,t-=P):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=Ot.AREA_2,t=t<0?t+_:t-_):(p.value=Ot.AREA_3,t+=P),u=_/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(t))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:1<s&&(s=1),this.face===Tt)l=Math.acos(s),d.phi=P-l,p.value===Ot.AREA_0?d.lam=a+P:p.value===Ot.AREA_1?d.lam=a<0?a+_:a-_:p.value===Ot.AREA_2?d.lam=a-P:d.lam=a;else if(this.face===It)l=Math.acos(s),d.phi=l-P,p.value===Ot.AREA_0?d.lam=-a+P:p.value===Ot.AREA_1?d.lam=-a:p.value===Ot.AREA_2?d.lam=-a-P:d.lam=a<0?-a-_:-a+_;else{var m,g,y;u=(m=s)*m,g=1<=(u+=(y=1<=u?0:Math.sqrt(1-u)*Math.sin(a))*y)?0:Math.sqrt(1-u),p.value===Ot.AREA_1?(u=g,g=-y,y=u):p.value===Ot.AREA_2?(g=-g,y=-y):p.value===Ot.AREA_3&&(u=g,g=y,y=-u),this.face===Mt?(u=m,m=-g,g=u):this.face===Pt?(m=-m,g=-g):this.face===Et&&(u=m,m=g,g=-u),d.phi=Math.acos(-y)-P,d.lam=Math.atan2(g,m),this.face===Mt?d.lam=Nt(d.lam,-P):this.face===Pt?d.lam=Nt(d.lam,-_):this.face===Et&&(d.lam=Nt(d.lam,+P))}return 0!==this.es&&(c=d.phi<0?1:0,h=Math.tan(d.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(d.phi=-d.phi)),d.lam+=this.long0,e.x=d.lam,e.y=d.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},jt=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Rt=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Bt=l/5,Ft=1/Bt,zt=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};var qt,Ut={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=z(e.x-this.long0),n=Math.abs(e.y),r=Math.floor(n*Bt);r<0?r=0:18<=r&&(r=17);var i={x:zt(jt[r],n=l*(n-Ft*r))*t,y:zt(Rt[r],n)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(e){var r={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(1<=r.y)r.x/=jt[18][0],r.y=e.y<0?-P:P;else{var t=Math.floor(18*r.y);for(t<0?t=0:18<=t&&(t=17);;)if(Rt[t][0]>r.y)--t;else{if(!(Rt[t+1][0]<=r.y))break;++t}var i=Rt[t],n=5*(r.y-i[0])/(Rt[t+1][0]-i[0]);n=function(e,t,n,r){for(var i=t;r;--r){var o=e(i);if(i-=o,Math.abs(o)<n)break}return i}(function(e){return(zt(i,e)-r.y)/(n=e,(t=i)[1]+n*(2*t[2]+3*n*t[3]));var t,n},n,I,100),r.x/=zt(jt[t],n),r.y=(5*t+n)*s,e.y<0&&(r.y=-r.y)}return r.x=z(r.x+this.long0),r},names:["Robinson","robin"]};return ce.defaultDatum="WGS84",ce.Proj=Y,ce.WGS84=new ce.Proj("WGS84"),ce.Point=Pe,ce.toPoint=re,ce.defs=D,ce.transform=ae,ce.mgrs=ve,ce.version="2.5.0",(qt=ce).Proj.projections.add(De),qt.Proj.projections.add(Fe),qt.Proj.projections.add(ze),qt.Proj.projections.add(Ge),qt.Proj.projections.add($e),qt.Proj.projections.add(Ve),qt.Proj.projections.add(He),qt.Proj.projections.add(We),qt.Proj.projections.add(Qe),qt.Proj.projections.add(rt),qt.Proj.projections.add(ht),qt.Proj.projections.add(dt),qt.Proj.projections.add(pt),qt.Proj.projections.add(mt),qt.Proj.projections.add(gt),qt.Proj.projections.add(yt),qt.Proj.projections.add(_t),qt.Proj.projections.add(vt),qt.Proj.projections.add(bt),qt.Proj.projections.add(wt),qt.Proj.projections.add(xt),qt.Proj.projections.add(kt),qt.Proj.projections.add(Lt),qt.Proj.projections.add(Ct),qt.Proj.projections.add(At),qt.Proj.projections.add(Ut),ce},"object"===((r=void 0)===n?"undefined":Gt(n))&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):r.proj4=i()},{}],53:[function(r,i,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,n;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],e);else if("object"===(void 0===i?"undefined":o(i))&&"object"===o(i.exports))t=r("leaflet"),n=r("./proj4-src"),i.exports=e(t,n);else{if(void 0===window.L||void 0===window.proj4)throw"Leaflet and proj4 must be loaded first";e(window.L,window.proj4)}}(function(l,r){return r.__esModule&&r.default&&(r=r.default),l.Proj={},l.Proj._isProj4Obj=function(e){return void 0!==e.inverse&&void 0!==e.forward},l.Proj.Projection=l.Class.extend({initialize:function(e,t,n){var r=l.Proj._isProj4Obj(e);this._proj=r?e:this._projFromCodeDef(e,t),this.bounds=r?t:n},project:function(e){var t=this._proj.forward([e.lng,e.lat]);return new l.Point(t[0],t[1])},unproject:function(e,t){var n=this._proj.inverse([e.x,e.y]);return new l.LatLng(n[1],n[0],t)},_projFromCodeDef:function(e,t){if(t)r.defs(e,t);else if(void 0===r.defs[e]){var n=e.split(":");if(3<n.length&&(e=n[n.length-3]+":"+n[n.length-1]),void 0===r.defs[e])throw"No projection definition for code "+e}return r(e)}}),l.Proj.CRS=l.Class.extend({includes:l.CRS,options:{transformation:new l.Transformation(1,0,-1,0)},initialize:function(e,t,n){var r,i,o,a;if(l.Proj._isProj4Obj(e)?(r=(i=e).srsCode,a=t||{},this.projection=new l.Proj.Projection(i,a.bounds)):(r=e,o=t,a=n||{},this.projection=new l.Proj.Projection(r,o,a.bounds)),l.Util.setOptions(this,a),this.code=r,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new l.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var s=this.options.resolutions.length-1;0<=s;s--)this.options.resolutions[s]&&(this._scales[s]=1/this.options.resolutions[s])}this.infinite=!this.options.bounds},scale:function(e){var t,n=Math.floor(e);return e===n?this._scales[e]:(t=this._scales[n])+(this._scales[n+1]-t)*(e-n)},zoom:function(e){var t,n,r=this._closestElement(this._scales,e),i=this._scales.indexOf(r);return e===r?i:void 0===r?-1/0:(n=i+1,void 0===(t=this._scales[n])?1/0:(e-r)/(t-r)+i)},distance:l.CRS.Earth.distance,R:l.CRS.Earth.R,_closestElement:function(e,t){for(var n,r=e.length;r--;)e[r]<=t&&(void 0===n||n<e[r])&&(n=e[r]);return n}}),l.Proj.GeoJSON=l.GeoJSON.extend({initialize:function(e,t){this._callLevel=0,l.GeoJSON.prototype.initialize.call(this,e,t)},addData:function(e){var n;e&&(e.crs&&"name"===e.crs.type?n=new l.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(n=new l.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==n&&(this.options.coordsToLatLng=function(e){var t=l.point(e[0],e[1]);return n.projection.unproject(t)})),this._callLevel++;try{l.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),l.Proj.geoJson=function(e,t){return new l.Proj.GeoJSON(e,t)},l.Proj.ImageOverlay=l.ImageOverlay.extend({initialize:function(e,t,n){l.ImageOverlay.prototype.initialize.call(this,e,null,n),this._projectedBounds=t},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=l.point(this._projectedBounds.min.x,this._projectedBounds.max.y),r=this._projectedToNewLayerPoint(n,e.zoom,e.center);l.DomUtil.setTransform(this._image,r,t)},_reset:function(){var e=this._map.getZoom(),t=this._map.getPixelOrigin(),n=l.bounds(this._transform(this._projectedBounds.min,e)._subtract(t),this._transform(this._projectedBounds.max,e)._subtract(t)),r=n.getSize();l.DomUtil.setPosition(this._image,n.min),this._image.style.width=r.x+"px",this._image.style.height=r.y+"px"},_projectedToNewLayerPoint:function(e,t,n){var r=this._map.getSize()._divideBy(2),i=this._map.project(n,t)._subtract(r)._round().add(this._map._getMapPanePos());return this._transform(e,t)._subtract(i)},_transform:function(e,t){var n=this._map.options.crs,r=n.transformation,i=n.scale(t);return r.transform(e,i)}}),l.Proj.imageOverlay=function(e,t,n){return new l.Proj.ImageOverlay(e,t,n)},l.Proj})},{"./proj4-src":52,leaflet:473}],54:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};L.ResponsivePopup=L.Popup.extend({options:{hasTip:!0},_initLayout:function(){var e="leaflet-popup",t=this._container=L.DomUtil.create("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=L.DomUtil.create("div",e+"-content-wrapper",t);if(this._contentNode=L.DomUtil.create("div",e+"-content",n),L.DomEvent.disableClickPropagation(n),L.DomEvent.disableScrollPropagation(this._contentNode),L.DomEvent.on(n,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",e+"-tip-container",t),this.options.hasTip||(this._tipContainer.style.visibility="hidden"),this._tip=L.DomUtil.create("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=L.DomUtil.create("a",e+"-close-button",t);r.href="#close",r.innerHTML="&#215;",L.DomEvent.on(r,"click",this._onCloseButtonClick,this)}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._map.layerPointToContainerPoint(e),n=this._container.offsetWidth,r=this._container.offsetHeight,i=L.point(this.options.autoPanPadding),o=L.point(this.options.autoPanPaddingTopLeft||i),a=L.point(this.options.autoPanPaddingBottomRight||i),s=this._map.getSize(),l=this._getAnchor(),u=L.point(this.options.offset),c=Math.abs(u.x),h=Math.abs(u.y);this.options.hasTip&&(c+=11,h+=11,L.DomUtil.removeClass(this._container,"leaflet-resp-popup-north"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-south"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-east"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-west"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-north-east"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-north-west"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-south-east"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-south-west"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-east-north"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-east-south"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-west-north"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-west-south"));var f=!0,d=!0,p=!0,m=!0,g=!1;t.y+l.y-h-r-Math.abs(o.y)<0&&(f=!1),t.y+l.y+h+r+Math.abs(a.y)>s.y&&(d=!1),t.x+l.x-c-n-Math.abs(o.x)<0&&(p=!1),t.x+l.x+c+n+Math.abs(a.x)>s.x&&(m=!1);var y=n/2-l.x,_=r/2-l.y;if(f||d){var v=t.x+l.x-n/2,b=t.x+l.x+n/2;v<Math.abs(o.x)&&(y=n/2-l.x-Math.abs(o.x)+v),b>s.x-Math.abs(a.x)&&(y=n/2-l.x+b-s.x+Math.abs(a.x))}if(p||m){var w=t.y+l.y-r/2,x=t.y+l.y+r/2;w<Math.abs(o.y)&&(_=r/2-l.y-Math.abs(o.y)+w),x>s.y-Math.abs(a.y)&&(_=r/2-l.y+x-s.y+Math.abs(a.y))}if(f)g=e.subtract(L.point(y,-l.y+r+h,!0)),this.options.hasTip&&(t.x+l.x<o.x+12+11?(g.x=e.x+l.x,L.DomUtil.addClass(this._container,"leaflet-resp-popup-north-east"),this._tipContainer.style.top=r+"px",this._tipContainer.style.left="0px"):t.x+l.x>s.x-a.x-12-11?(g.x=e.x+l.x-n,L.DomUtil.addClass(this._container,"leaflet-resp-popup-north-west"),this._tipContainer.style.top=r+"px",this._tipContainer.style.left=n+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-north"),this._tipContainer.style.top=r+"px",this._tipContainer.style.left=e.x+l.x-g.x+"px"));else if(p)g=e.subtract(L.point(-l.x+n+c,_,!0)),this.options.hasTip&&(t.y+l.y<o.y+12+11?(g.y=e.y+l.y,L.DomUtil.addClass(this._container,"leaflet-resp-popup-west-south"),this._tipContainer.style.top="0px"):t.y+l.y>s.y-a.y-12-11?(g.y=e.y+l.y-r,L.DomUtil.addClass(this._container,"leaflet-resp-popup-west-north"),this._tipContainer.style.top=r+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-west"),this._tipContainer.style.top=e.y+l.y-g.y+"px"),this._tipContainer.style.left=n+"px");else if(d)g=e.subtract(L.point(y,-l.y-h,!0)),this.options.hasTip&&(t.x+l.x<o.x+12+11?(g.x=e.x+l.x,L.DomUtil.addClass(this._container,"leaflet-resp-popup-south-east"),this._tipContainer.style.top="0px",this._tipContainer.style.left="0px"):t.x+l.x>s.x-a.x-12-11?(g.x=e.x+l.x-n,L.DomUtil.addClass(this._container,"leaflet-resp-popup-south-west"),this._tipContainer.style.top="0px",this._tipContainer.style.left=n+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-south"),this._tipContainer.style.top="0px",this._tipContainer.style.left=e.x+l.x-g.x+"px"));else if(m)g=e.subtract(L.point(-l.x-c,_,!0)),this.options.hasTip&&(t.y+l.y<o.y+12+11?(g.y=e.y+l.y,L.DomUtil.addClass(this._container,"leaflet-resp-popup-east-south"),this._tipContainer.style.top="0px"):t.y+l.y>s.y-a.y-12-11?(g.y=e.y+l.y-r,L.DomUtil.addClass(this._container,"leaflet-resp-popup-east-north"),this._tipContainer.style.top=r+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-east"),this._tipContainer.style.top=e.y+l.y-g.y+"px"),this._tipContainer.style.left="0px");else{g=(e=this._map.latLngToLayerPoint(this._map.getCenter())).subtract(L.point(n/2,r/2)),this.options.hasTip}t.x<0||t.y<0||t.x>s.x||(t.y,s.y),n-Math.abs(o.x)-Math.abs(a.x)>s.x||(Math.abs(o.y),Math.abs(a.y),s.y),L.DomUtil.setPosition(this._container,g)}}}),L.responsivePopup=function(e,t){return new L.ResponsivePopup(e,t)},"object"===(void 0===n?"undefined":r(n))&&void 0!==t&&(n.responsivePopup=L.responsivePopup,n.ResponsivePopup=L.ResponsivePopup)},{}],55:[function(e,t,n){"use strict";var r,i,$d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(e){function F(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");r&&h(r),i&&g(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function t(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r,i=n.bbox;if(!e)throw new Error("type is required");if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");switch(i&&h(i),e){case"Point":r=z(t).geometry;break;case"LineString":r=U(t).geometry;break;case"Polygon":r=q(t).geometry;break;case"MultiPoint":r=o(t).geometry;break;case"MultiLineString":r=v(t).geometry;break;case"MultiPolygon":r=b(t).geometry;break;default:throw new Error(e+" is invalid")}return i&&(r.bbox=i),r}function z(e,t,n){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!$(e[0])||!$(e[1]))throw new Error("coordinates must contain numbers");return F({type:"Point",coordinates:e},t,n)}function n(e,t,n){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");return G(e.map(function(e){return z(e,t)}),n)}function q(e,t,n){if(!e)throw new Error("coordinates is required");for(var r=0;r<e.length;r++){var i=e[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!$(i[0][0])||!$(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return F({type:"Polygon",coordinates:e},t,n)}function r(e,t,n){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");return G(e.map(function(e){return q(e,t)}),n)}function U(e,t,n){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!$(e[0][1])||!$(e[0][1]))throw new Error("coordinates must contain numbers");return F({type:"LineString",coordinates:e},t,n)}function i(e,t,n){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");return G(e.map(function(e){return U(e,t)}),n)}function G(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.bbox,r=t.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");n&&h(n),r&&g(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=e,i}function v(e,t,n){if(!e)throw new Error("coordinates is required");return F({type:"MultiLineString",coordinates:e},t,n)}function o(e,t,n){if(!e)throw new Error("coordinates is required");return F({type:"MultiPoint",coordinates:e},t,n)}function b(e,t,n){if(!e)throw new Error("coordinates is required");return F({type:"MultiPolygon",coordinates:e},t,n)}function a(e,t,n){if(!e)throw new Error("geometries is required");if(!Array.isArray(e))throw new Error("geometries must be an Array");return F({type:"GeometryCollection",geometries:e},t,n)}function s(e,t){if(null==e||isNaN(e))throw new Error("num is required");if(t&&!(0<=t))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}function p(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var n=fo[t||"kilometers"];if(!n)throw new Error(t+" units is invalid");return e*n}function m(e,t){if(null==e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var n=fo[t||"kilometers"];if(!n)throw new Error(t+" units is invalid");return e/n}function l(e,t){return d(m(e,t))}function f(e){if(null==e)throw new Error("bearing is required");var t=e%360;return t<0&&(t+=360),t}function d(e){if(null==e)throw new Error("radians is required");return e%(2*Math.PI)*180/Math.PI}function _(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180}function u(e,t,n){if(null==e)throw new Error("length is required");if(!(0<=e))throw new Error("length must be a positive number");return p(m(e,t),n||"kilometers")}function c(e,t,n){if(null==e)throw new Error("area is required");if(!(0<=e))throw new Error("area must be a positive number");var r=mo[t||"meters"];if(!r)throw new Error("invalid original units");var i=mo[n||"kilometers"];if(!i)throw new Error("invalid final units");return e/r*i}function $(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function V(e){return!!e&&e.constructor===Object}function h(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!$(e))throw new Error("bbox must only contain numbers")})}function g(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(void 0===e?"undefined":$d(e)))throw new Error("id must be a number or a string")}function x(e,t,n){if(null!==e)for(var r,i,o,a,s,l,u,c,h=0,f=0,d=e.type,p="FeatureCollection"===d,m="Feature"===d,g=p?e.features.length:1,y=0;y<g;y++){s=(c=!!(u=p?e.features[y].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<s;_++){var v=0,b=0;if(null!==(a=c?u.geometries[_]:u)){l=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":t(l,f,y,v,b),f++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++)t(l[r],f,y,v,b),f++,"MultiPoint"===w&&v++;"LineString"===w&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++)t(l[r][i],f,y,v,b),f++;"MultiLineString"===w&&v++,"Polygon"===w&&b++}"Polygon"===w&&v++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for("MultiPolygon"===w&&(b=0),i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++)t(l[r][i][o],f,y,v,b),f++;b++}v++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)x(a.geometries[r],t,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function y(e,o,a,t){var s=a;return x(e,function(e,t,n,r,i){s=0===t&&void 0===a?e:o(s,e,t,n,r,i)},t),s}function w(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length;n++)t(e.features[n].properties,n);break;case"Feature":t(e.properties,0)}}function k(e,n,r){var i=r;return w(e,function(e,t){i=0===t&&void 0===r?e:n(i,e,t)}),i}function L(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)t(e.features[n],n)}function C(e,n,r){var i=r;return L(e,function(e,t){i=0===t&&void 0===r?e:n(i,e,t)}),i}function S(e){var t=[];return x(e,function(e){t.push(e)}),t}function M(e,t){var n,r,i,o,a,s,l,u,c,h,f=0,d="FeatureCollection"===e.type,p="Feature"===e.type,m=d?e.features.length:1;for(n=0;n<m;n++){for(s=d?e.features[n].geometry:p?e.geometry:e,u=d?e.features[n].properties:p?e.properties:{},c=d?e.features[n].bbox:p?e.bbox:void 0,h=d?e.features[n].id:p?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":t(o,f,u,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)t(o.geometries[r],f,u,c,h);break;default:throw new Error("Unknown Geometry Type")}else t(null,f,u,c,h);f++}}function P(e,o,a){var s=a;return M(e,function(e,t,n,r,i){s=0===t&&void 0===a?e:o(s,e,t,n,r,i)}),s}function E(e,s){M(e,function(e,n,r,t,i){var o,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return void s(F(e,r,{bbox:t,id:i}),n,0)}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}e.coordinates.forEach(function(e,t){s(F({type:o,coordinates:e},r),n,t)})})}function T(e,r,i){var o=i;return E(e,function(e,t,n){o=0===t&&0===n&&void 0===i?e:r(o,e,t,n)}),o}function I(e,h){E(e,function(s,l,u){var c=0;if(s.geometry){var e=s.geometry.type;"Point"!==e&&"MultiPoint"!==e&&y(s,function(e,t,n,r,i,o){var a=U([e,t],s.properties);return h(a,l,u,o,c),c++,t})}})}function O(e,o,a){var s=a,l=!1;return I(e,function(e,t,n,r,i){s=!1===l&&void 0===a?e:o(s,e,t,n,r,i),l=!0}),s}function D(e,a){if(!e)throw new Error("geojson is required");E(e,function(e,t,n){if(null!==e.geometry){var r=e.geometry.type,i=e.geometry.coordinates;switch(r){case"LineString":a(e,t,n,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)a(U(i[o],e.properties),t,n,o)}}})}function N(e,i,o){var a=o;return D(e,function(e,t,n,r){a=0===t&&void 0===o?e:i(a,e,t,n,r)}),a}function H(e){var t=[1/0,1/0,-1/0,-1/0];return x(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}function W(e){if(!e)throw new Error("obj is required");var t=A(e);if(1<t.length&&$(t[0])&&$(t[1]))return t;throw new Error("Coordinate is not a valid Point")}function A(e){if(!e)throw new Error("obj is required");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return j(t),t;throw new Error("No valid coordinates")}function j(e){if(1<e.length&&$(e[0])&&$(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return j(e[0]);throw new Error("coordinates must only contain numbers")}function R(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)}function B(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}function Q(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<e.features.length;r++){var i=e.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+i.geometry.type)}}function K(e){if(!e)throw new Error("geojson is required");if(void 0!==e.geometry)return e.geometry;if(e.coordinates||e.geometries)return e;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(e,t){if(!e)throw new Error((t||"geojson")+" is required");if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error((t||"geojson")+" is invalid")}function X(e,t,n){n=n||{};for(var r=Object.keys(vo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=null!=a?a:vo[o],bo[o]=a}bo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+t);var c,h,f,s=(c=function(e,t){for(var n=e.length-1,r=e[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,l=e[o+1][a],u=e[o+1][a+1],c=e[o][a+1],h=e[o][a];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){s|=t<=l?8:0,s|=t<=u?4:0,s|=t<=c?2:0;var f,d,p,m,g=!1;if(5==(s|=t<=h?1:0)||10===s){var y=(l+u+c+h)/4;5===s&&y<t?(s=10,g=!0):10===s&&y<t&&(s=5,g=!0)}if(0!==s&&15!==s)f=d=p=m=.5,1===s?(p=1-Y(t,l,h),d=1-Y(t,c,h)):2===s?(d=Y(t,h,c),m=1-Y(t,u,c)):3===s?(p=1-Y(t,l,h),m=1-Y(t,u,c)):4===s?(f=Y(t,l,u),m=Y(t,c,u)):5===s?(f=Y(t,l,u),m=Y(t,c,u),d=1-Y(t,c,h),p=1-Y(t,l,h)):6===s?(d=Y(t,h,c),f=Y(t,l,u)):7===s?(p=1-Y(t,l,h),f=Y(t,l,u)):8===s?(p=Y(t,h,l),f=1-Y(t,u,l)):9===s?(d=1-Y(t,c,h),f=1-Y(t,u,l)):10===s?(f=1-Y(t,u,l),m=1-Y(t,u,c),d=Y(t,h,c),p=Y(t,h,l)):11===s?(f=1-Y(t,u,l),m=1-Y(t,u,c)):12===s?(p=Y(t,h,l),m=Y(t,c,u)):13===s?(d=1-Y(t,c,h),m=Y(t,c,u)):14===s?(p=Y(t,h,l),d=Y(t,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:g,top:f,right:m,bottom:d,left:p}}}}return i}(e,t),h=[],f=0,c.rows,c.cols,c.cells.forEach(function(e,u){e.forEach(function(e,t){if(void 0!==e&&5!==(l=e).cval&&10!==l.cval&&!ee(e)){var n=function(e,t,n){var r,i,o,a=e.length,s=[],l=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(e[t][n],e[t][n]),f=h.cval,d=ne(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][f]);s.push([n+d[0],t+d[1]]),d=ne(h,o=c[f]),s.push([n+d[0],t+d[1]]),te(h);for(var p=n+l[f],m=t+u[f],g=f;0<=p&&0<=m&&m<a&&(p!=n||m!=t)&&void 0!==(h=e[m][p]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};o=c[f],r=l[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?(r=-1===u[g]?(o="left",-1):(o="right",1),i=0):-1===l[g]&&(o="bottom",r=0,i=-1):10===f&&(h.flipped?i=-1===l[g]?(o="top",r=0,1):(o="bottom",r=0,-1):1===u[g]&&(o="left",r=-1,i=0))),d=ne(h,o),s.push([p+d[0],m+d[1]]),te(h),p+=r,m+=i,g=f}return{path:s,info:"closed"}}(c.cells,u,t),r=!1;if("mergeable"===n.info)for(var i=n.path[n.path.length-1][0],o=n.path[n.path.length-1][1],a=f-1;0<=a;a--)if(Math.abs(h[a][0][0]-i)<=1e-7&&Math.abs(h[a][0][1]-o)<=1e-7){for(var s=n.path.length-2;0<=s;--s)h[a].unshift(n.path[s]);r=!0;break}r||(h[f++]=n.path)}var l})}),h);return"function"==typeof bo.successCallback&&bo.successCallback(s),s}function Y(e,t,n){return(e-t)/(n-t)}function ee(e){return 0===e.cval||15===e.cval}function te(e){ee(e)||5===e.cval||10===e.cval||(e.cval=15)}function ne(e,t){return"top"===t?[e.top,1]:"bottom"===t?[e.bottom,0]:"right"===t?[1,e.right]:"left"===t?[0,e.left]:void 0}function re(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ie(e,t){if(!(this instanceof ie))return new ie(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function oe(e,t){ae(e,0,e.children.length,t,e)}function ae(e,t,n,r,i){i||(i=pe(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],se(i,e.leaf?r(o):o);return i}function se(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function le(e,t){return e.minX-t.minX}function ue(e,t){return e.minY-t.minY}function ce(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function he(e){return e.maxX-e.minX+(e.maxY-e.minY)}function fe(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function de(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function pe(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function me(e,t,n,r,i){for(var o,a=[t,n];a.length;)(n=a.pop())-(t=a.pop())<=r||(o=t+Math.ceil((n-t)/r/2)*r,wo(e,o,t,n,i),a.push(t,o,o,n))}function ge(e,t){return e(t={exports:{}},t.exports),t.exports}function ye(e,t){if(!(this instanceof ye))return new ye(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||function(e,t){return e<t?-1:t<e?1:0},0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function _e(e,t,n){t=Math.max(0,void 0===t?2:t),n=n||0;for(var r,i=function(e){for(var t=e[0],n=e[0],r=e[0],i=e[0],o=0;o<e.length;o++){var a=e[o];a[0]<t[0]&&(t=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[t,n,r,i],l=s.slice();for(o=0;o<e.length;o++)Oo(e[o],s)||l.push(e[o]);var u=function(r){var e=r.length;if(e<3){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return 2===e&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:t}var i=new Array(e);for(n=0;n<e;++n)i[n]=n;i.sort(function(e,t){var n=r[e][0]-r[t][0];return n||r[e][1]-r[t][1]});var o=[i[0],i[1]],a=[i[0],i[1]];for(n=2;n<e;++n){for(var s=i[n],l=r[s],u=o.length;1<u&&Eo(r[o[u-2]],r[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(s),u=a.length;1<u&&0<=Eo(r[a[u-2]],r[a[u-1]],l);)u-=1,a.pop();a.push(s)}t=new Array(a.length+o.length-2);for(var c=0,h=(n=0,o.length);n<h;++n)t[c++]=o[n];for(var f=a.length-2;0<f;--f)t[c++]=a[f];return t}(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(e),o=xo(16,["[0]","[1]","[0]","[1]"]).load(e),a=[],s=0;s<i.length;s++){var l=i[s];o.remove(l),r=ke(l,r),a.push(r)}var u=xo(16);for(s=0;s<a.length;s++)u.insert(xe(a[s]));for(var c=t*t,h=n*n;a.length;){var f=a.shift(),d=f.p,p=f.next.p,m=Le(d,p);if(!(m<h)){var g=m/c;(l=function(e,t,n,r,i,o,a){for(var s=new To(null,ve),l=e.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?Ce(c,n,r):function(e,t,n){if(be(e,n)||be(t,n))return 0;var r=Se(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Se(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Se(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Se(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,c);o<h||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),d=f.node,p=Ce(d,t,n),m=Ce(d,r,i);if(f.dist<p&&f.dist<m&&we(n,d,a)&&we(r,d,a))return d}(l=s.pop())&&(l=l.node)}return null}(o,f.prev.p,d,p,f.next.next.p,g,u))&&Math.min(Le(l,d),Le(l,p))<=g&&(a.push(f),a.push(ke(l,f)),o.remove(l),u.remove(f),u.insert(xe(f)),u.insert(xe(f.next)))}}f=r;for(var y=[];y.push(f.p),(f=f.next)!==r;);return y.push(f.p),y}function ve(e,t){return e.dist-t.dist}function be(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function we(e,t,n){for(var r=Math.min(e[0],t[0]),i=Math.min(e[1],t[1]),o=Math.max(e[0],t[0]),a=Math.max(e[1],t[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),l=0;l<s.length;l++)if(u=s[l].p,c=s[l].next.p,h=e,u!==(f=t)&&c!==h&&0<Do(u,c,h)!=0<Do(u,c,f)&&0<Do(h,f,u)!=0<Do(h,f,c))return!1;var u,c,h,f;return!0}function xe(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function ke(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,(n.prev=t).next.prev=n,t.next=n):(n.prev=n).next=n,n}function Le(e,t){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function Ce(e,t,n){var r=t[0],i=t[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((e[0]-r)*o+(e[1]-i)*a)/(o*o+a*a);1<s?(r=n[0],i=n[1]):0<s&&(r+=o*s,i+=a*s)}return(o=e[0]-r)*o+(a=e[1]-i)*a}function Se(e,t,n,r,i,o,a,s){var l,u,c,h,f=n-e,d=r-t,p=a-i,m=s-o,g=e-i,y=t-o,_=f*f+d*d,v=f*p+d*m,b=p*p+m*m,w=f*g+d*y,x=p*g+m*y,k=_*b-v*v,L=k,C=k;0===k?(u=0,L=1,h=x,C=b):(h=_*x-v*w,(u=v*x-b*w)<0?(u=0,h=x,C=b):L<u&&(u=L,h=x+v,C=b)),h<0?-w<(h=0)?u=0:_<-w?u=L:(u=-w,L=_):C<h&&(h=C,-w+v<0?u=0:_<-w+v?u=L:(u=-w+v,L=_));var S=(1-(c=0===h?0:h/C))*i+c*a-((1-(l=0===u?0:u/L))*e+l*n),M=(1-c)*o+c*s-((1-l)*t+l*r);return S*S+M*M}function Me(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.concavity||1/0,r=[];if(x(e,function(e){r.push([e[0],e[1]])}),!r.length)return null;var i=No(r,n);return 3<i.length?q([i]):null}function Pe(e,t,n){if("object"!=$d(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i,o,a=W(e),s=A(t),l=t.geometry?t.geometry.type:t.type,u=t.bbox;if(u&&!1==(i=a,(o=u)[0]<=i[0]&&o[1]<=i[1]&&o[2]>=i[0]&&o[3]>=i[1]))return!1;"Polygon"===l&&(s=[s]);for(var c=0,h=!1;c<s.length&&!h;c++)if(Ee(a,s[c][0],r)){for(var f=!1,d=1;d<s[c].length&&!f;)Ee(a,s[c][d],!r)&&(f=!0),d++;f||(h=!0)}return h}function Ee(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],l=t[o][0],u=t[o][1];if(e[1]*(a-l)+s*(l-e[0])+u*(e[0]-a)==0&&(a-e[0])*(l-e[0])<=0&&(s-e[1])*(u-e[1])<=0)return!n;s>e[1]!=u>e[1]&&e[0]<(l-a)*(e[1]-s)/(u-s)+a&&(r=!r)}return r}function Te(e,t){var n=[];return M(t,function(t){L(e,function(e){Pe(e,t)&&n.push(e)})}),G(n)}function Ie(e,n){if("FeatureCollection"!==e.type)throw new Error("points must be a FeatureCollection");var o=!1;return G(function(e){if(e.length<3)return[];e.sort(De);for(var t,n,r,i,o,a,s=e.length-1,l=e[s].x,u=e[0].x,c=e[s].y,h=c;s--;)e[s].y<c&&(c=e[s].y),e[s].y>h&&(h=e[s].y);var f,d=u-l,p=h-c,m=p<d?d:p,g=.5*(u+l),y=.5*(h+c),_=[new Oe({x:g-20*m,y:y-m,__sentinel:!0},{x:g,y:y+20*m,__sentinel:!0},{x:g+20*m,y:y-m,__sentinel:!0})],v=[],b=[];for(s=e.length;s--;){for(b.length=0,f=_.length;f--;)0<(d=e[s].x-_[f].x)&&d*d>_[f].r?(v.push(_[f]),_.splice(f,1)):d*d+(p=e[s].y-_[f].y)*p>_[f].r||(b.push(_[f].a,_[f].b,_[f].b,_[f].c,_[f].c,_[f].a),_.splice(f,1));for(Ne(b),f=b.length;f;)n=b[--f],t=b[--f],r=e[s],i=n.x-t.x,o=n.y-t.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),1e-12<Math.abs(a)&&_.push(new Oe(t,n,r))}for(Array.prototype.push.apply(v,_),s=v.length;s--;)(v[s].a.__sentinel||v[s].b.__sentinel||v[s].c.__sentinel)&&v.splice(s,1);return v}(e.features.map(function(e){var t={x:e.geometry.coordinates[0],y:e.geometry.coordinates[1]};return n?t.z=e.properties[n]:3===e.geometry.coordinates.length&&(o=!0,t.z=e.geometry.coordinates[2]),t})).map(function(e){var t=[e.a.x,e.a.y],n=[e.b.x,e.b.y],r=[e.c.x,e.c.y],i={};return o?(t.push(e.a.z),n.push(e.b.z),r.push(e.c.z)):i={a:e.a.z,b:e.b.z,c:e.c.z},q([[t,n,r,t]],i)}))}function Oe(e,t,n){this.a=e,this.b=t,this.c=n;var r,i,o=t.x-e.x,a=t.y-e.y,s=n.x-e.x,l=n.y-e.y,u=o*(e.x+t.x)+a*(e.y+t.y),c=s*(e.x+n.x)+l*(e.y+n.y),h=2*(o*(n.y-t.y)-a*(n.x-t.x));this.x=(l*u-a*c)/h,this.y=(o*c-s*u)/h,r=this.x-e.x,i=this.y-e.y,this.r=r*r+i*i}function De(e,t){return t.x-e.x}function Ne(e){var t,n,r,i,o,a=e.length;e:for(;a;)for(n=e[--a],t=e[--a],r=a;r;)if(o=e[--r],t===(i=e[--r])&&n===o||t===o&&n===i){e.splice(a,2),e.splice(r,2),a-=2;continue e}}function Ae(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.units,i=W(e),o=W(t),a=_(o[1]-i[1]),s=_(o[0]-i[0]),l=_(i[1]),u=_(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(u);return p(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function je(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Re(e);case"FeatureCollection":return t=e,n={type:"FeatureCollection"},Object.keys(t).forEach(function(e){switch(e){case"type":case"features":return;default:n[e]=t[e]}}),n.features=t.features.map(function(e){return Re(e)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Be(e);default:throw new Error("unknown GeoJSON type")}var t,n}function Re(t){var n={type:"Feature"};return Object.keys(t).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:n[e]=t[e]}}),n.properties=function n(r){var i={};return r&&Object.keys(r).forEach(function(e){var t=r[e];"object"==(void 0===t?"undefined":$d(t))?null===t?i[e]=null:t.length?i[e]=t.map(function(e){return e}):i[e]=n(t):i[e]=t}),i}(t.properties),n.geometry=Be(t.geometry),n}function Be(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?t.geometries=e.geometries.map(function(e){return Be(e)}):t.coordinates=function t(e){return"object"!=$d(e[0])?e.slice():e.map(function(e){return t(e)})}(e.coordinates),t}function Fe(e,t){function i(e,t){t.length&&t.pop();for(var n=u[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(l(n[r],r));e<0&&Bo(t,i)}function o(e){return l(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function n(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function s(e){return e.map(n)}var l=Ro(e.transform),u=e.arcs;return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=s(t.arcs);break;case"MultiPolygon":n=t.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(t)}function ze(e,t,n){for(var r,i=t+(n---t>>1);t<i;++t,--n)r=e[t],e[t]=e[n],e[n]=r}function qe(e){var t,n=Ue(e.geometry);for(t in null!=e.id&&(n.id=e.id),null!=e.bbox&&(n.bbox=e.bbox),e.properties){n.properties=e.properties;break}return n}function Ue(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(Ue)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}function Ge(e){var t,n=e[0],r=e[1];return r<n&&(t=n,n=r,r=t),n+31*r}function $e(e,t){var n,r=e[0],i=e[1],o=t[0],a=t[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Ve(e){return e[0].toString()+","+e[1].toString()}function He(r,e){if(!V(e=e||{}))throw new Error("options is invalid");var t=e.mutate;if("FeatureCollection"!==J(r))throw new Error("geojson must be a FeatureCollection");if(!r.features.length)throw new Error("geojson is empty");!1!==t&&void 0!==t||(r=je(r));var n=function(e){var t={};E(r,function(e){t[e.geometry.type]=!0});var n=Object.keys(t);return 1===n.length?n[0]:null}();if(!n)throw new Error("geojson must be homogenous");switch(n){case"LineString":return function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.mutate;if("FeatureCollection"!==J(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(e=je(e));var r=[],i=N(e,function(u,e){return function(e,t){var n,r=u.geometry.coordinates,i=t.geometry.coordinates,o=Ve(r[0]),a=Ve(r[r.length-1]),s=Ve(i[0]),l=Ve(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(s===a)n=r.concat(i.slice(1));else if(o===s)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return U(n)}(0,e)||(r.push(u),e)});return i&&r.push(i),r.length?1===r.length?r[0]:v(r.map(function(e){return e.coordinates})):null}(r,e);case"Polygon":return function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.mutate;if("FeatureCollection"!==J(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(e=je(e));var r=[];E(e,function(e){r.push(e.geometry)});var i=function(e,t){function n(e){e&&c.hasOwnProperty(e.type)&&c[e.type](e)}function r(e){var t=[];do{var n=u.get(e);t.push(e[0]<e[1]?n:~n)}while(e=e.next);return t}function i(e){return e.map(r)}var o=function(e){function t(e){null!=e&&u.hasOwnProperty(e.type)&&u[e.type](e)}function n(e){var t=e[0],n=e[1];t<o&&(o=t),s<t&&(s=t),n<a&&(a=n),l<n&&(l=n)}function r(e){e.forEach(n)}function i(e){e.forEach(r)}var o=1/0,a=1/0,s=-1/0,l=-1/0,u={GeometryCollection:function(e){e.geometries.forEach(t)},Point:function(e){n(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(n)},LineString:function(e){r(e.arcs)},MultiLineString:function(e){e.arcs.forEach(r)},Polygon:function(e){e.arcs.forEach(r)},MultiPolygon:function(e){e.arcs.forEach(i)}};for(var c in e)t(e[c]);return o<=s&&a<=l?[o,a,s,l]:void 0}(e=function(e){var t,n,r={};for(t in e)r[t]=null==(n=e[t])?{type:null}:("FeatureCollection"===n.type?function(e){var t={type:"GeometryCollection",geometries:e.features.map(qe)};return null!=e.bbox&&(t.bbox=e.bbox),t}:"Feature"===n.type?qe:Ue)(n);return r}(e)),a=0<t&&o&&function(e,t,n){function r(e){return[Math.round((e[0]-h)*d),Math.round((e[1]-f)*p)]}function i(e,t){for(var n,r,i,o,a,s=-1,l=0,u=e.length,c=new Array(u);++s<u;)n=e[s],o=Math.round((n[0]-h)*d),a=Math.round((n[1]-f)*p),o===r&&a===i||(c[l++]=[r=o,i=a]);for(c.length=l;l<t;)l=c.push([c[0][0],c[0][1]]);return c}function o(e){return i(e,2)}function a(e){return i(e,4)}function s(e){return e.map(a)}function l(e){null!=e&&m.hasOwnProperty(e.type)&&m[e.type](e)}var h=t[0],f=t[1],u=t[2],c=t[3],d=u-h?(n-1)/(u-h):1,p=c-f?(n-1)/(c-f):1,m={GeometryCollection:function(e){e.geometries.forEach(l)},Point:function(e){e.coordinates=r(e.coordinates)},MultiPoint:function(e){e.coordinates=e.coordinates.map(r)},LineString:function(e){e.arcs=o(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(o)},Polygon:function(e){e.arcs=s(e.arcs)},MultiPolygon:function(e){e.arcs=e.arcs.map(s)}};for(var g in e)l(e[g]);return{scale:[1/d,1/p],translate:[h,f]}}(e,o,t),s=function(e){function t(e){var t,n,r,i,o,a,s,l;if(r=d.get(t=h[e[0]]))for(s=0,l=r.length;s<l;++s)if(function(e,t){var n=e[0],r=t[0],i=e[1],o=t[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!zo(h[n],h[r]))return!1;return!0}(i=r[s],e))return e[0]=i[0],void(e[1]=i[1]);if(o=d.get(n=h[e[1]]))for(s=0,l=o.length;s<l;++s)if(function(e,t){var n=e[0],r=t[0],i=e[1],o=t[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!zo(h[n],h[o]))return!1;return!0}(a=o[s],e))return e[1]=a[0],void(e[0]=a[1]);r?r.push(e):d.set(t,[e]),o?o.push(e):d.set(n,[e]),p.push(e)}function a(e,t){var n=e[0],r=t[0],i=e[1]-n;if(i!==t[1]-r)return!1;for(var o=c(e),a=c(t),s=0;s<i;++s)if(!zo(h[n+(s+o)%i],h[r+(s+a)%i]))return!1;return!0}function s(e,t){var n=e[0],r=t[0],i=e[1],o=t[1],a=i-n;if(a!==o-r)return!1;for(var s=c(e),l=a-c(t),u=0;u<a;++u)if(!zo(h[n+(u+s)%a],h[o-(u+l)%a]))return!1;return!0}function c(e){for(var t=e[0],n=e[1],r=t,i=r,o=h[r];++r<n;){var a=h[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-t}var n,r,i,o,h=e.coordinates,l=e.lines,u=e.rings,f=l.length+u.length;for(delete e.lines,delete e.rings,i=0,o=l.length;i<o;++i)for(n=l[i];n=n.next;)++f;for(i=0,o=u.length;i<o;++i)for(r=u[i];r=r.next;)++f;var d=Fo(2*f*1.4,$o,zo),p=e.arcs=[];for(i=0,o=l.length;i<o;++i)for(n=l[i];t(n),n=n.next;);for(i=0,o=u.length;i<o;++i)if((r=u[i]).next)for(;t(r),r=r.next;);else!function(e){var t,n,r,i,o;if(n=d.get(t=h[e[0]]))for(i=0,o=n.length;i<o;++i){if(a(r=n[i],e))return e[0]=r[0],e[1]=r[1];if(s(r,e))return e[0]=r[1],e[1]=r[0]}if(n=d.get(t=h[e[0]+c(e)]))for(i=0,o=n.length;i<o;++i){if(a(r=n[i],e))return e[0]=r[0],e[1]=r[1];if(s(r,e))return e[0]=r[1],e[1]=r[0]}n?n.push(e):d.set(t,[e]),p.push(e)}(r);return e}(function(e){var t,n,r,i=function(e){function t(e,t,n,r){if(f[n]!==e){f[n]=e;var i=d[n];if(0<=i){var o=p[n];i===t&&o===r||i===r&&o===t||(++g,m[n]=1)}else d[n]=t,p[n]=r}}function i(e){return $o(l[e])}function o(e,t){return zo(l[e],l[t])}var n,r,a,s,l=e.coordinates,u=e.lines,c=e.rings,h=function(){for(var e=Fo(1.4*l.length,i,o,Int32Array,-1,Int32Array),t=new Int32Array(l.length),n=0,r=l.length;n<r;++n)t[n]=e.maybeSet(n,n);return t}(),f=new Int32Array(l.length),d=new Int32Array(l.length),p=new Int32Array(l.length),m=new Int8Array(l.length),g=0;for(n=0,r=l.length;n<r;++n)f[n]=d[n]=p[n]=-1;for(n=0,r=u.length;n<r;++n){var y=u[n],_=y[0],v=y[1];for(a=h[_],s=h[++_],++g,m[a]=1;++_<=v;)t(n,a,a=s,s=h[_]);++g,m[s]=1}for(n=0,r=l.length;n<r;++n)f[n]=-1;for(n=0,r=c.length;n<r;++n){var b=c[n],w=b[0]+1,x=b[1];for(t(n,h[x-1],a=h[w-1],s=h[w]);++w<=x;)t(n,a,a=s,s=h[w])}f=d=p=null;var k,L=function(i,o,a,e,s){3===arguments.length&&(e=Array,s=null);for(var l=new e(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),u=i-1,t=0;t<i;++t)l[t]=s;return{add:function(e){for(var t=o(e)&u,n=l[t],r=0;n!=s;){if(a(n,e))return!0;if(++r>=i)throw new Error("full hashset");n=l[t=t+1&u]}return l[t]=e,!0},has:function(e){for(var t=o(e)&u,n=l[t],r=0;n!=s;){if(a(n,e))return!0;if(++r>=i)break;n=l[t=t+1&u]}return!1},values:function(){for(var e=[],t=0,n=l.length;t<n;++t){var r=l[t];r!=s&&e.push(r)}return e}}}(1.4*g,$o,zo);for(n=0,r=l.length;n<r;++n)m[k=h[n]]&&L.add(l[k]);return L}(e),o=e.coordinates,a=e.lines,s=e.rings;for(n=0,r=a.length;n<r;++n)for(var l=a[n],u=l[0],c=l[1];++u<c;)i.has(o[u])&&(t={0:u,1:l[1]},l[1]=u,l=l.next=t);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],d=f,p=h[1],m=i.has(o[f]);++d<p;)i.has(o[d])&&(m?(t={0:d,1:h[1]},h[1]=d,h=h.next=t):(v=(_=p)-d,ze(g=o,y=f,_),ze(g,y,y+v),ze(g,y+v,_),o[p]=o[f],m=!0,d=f));var g,y,_,v;return e}(function(e){function t(e){e&&u.hasOwnProperty(e.type)&&u[e.type](e)}function n(e){for(var t=0,n=e.length;t<n;++t)l[++o]=e[t];var r={0:o-n+1,1:o};return a.push(r),r}function r(e){for(var t=0,n=e.length;t<n;++t)l[++o]=e[t];var r={0:o-n+1,1:o};return s.push(r),r}function i(e){return e.map(r)}var o=-1,a=[],s=[],l=[],u={GeometryCollection:function(e){e.geometries.forEach(t)},LineString:function(e){e.arcs=n(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(n)},Polygon:function(e){e.arcs=e.arcs.map(r)},MultiPolygon:function(e){e.arcs=e.arcs.map(i)}};for(var c in e)t(e[c]);return{type:"Topology",coordinates:l,lines:a,rings:s,objects:e}}(e))),l=s.coordinates,u=Fo(1.4*s.arcs.length,Ge,$e);e=s.objects,s.bbox=o,s.arcs=s.arcs.map(function(e,t){return u.set(e,t),l.slice(e[0],e[1]+1)}),delete s.coordinates,l=null;var c={GeometryCollection:function(e){e.geometries.forEach(n)},LineString:function(e){e.arcs=r(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(r)},Polygon:function(e){e.arcs=e.arcs.map(r)},MultiPolygon:function(e){e.arcs=e.arcs.map(i)}};for(var h in e)n(e[h]);return a&&(s.transform=a,s.arcs=function(e){for(var t=-1,n=e.length;++t<n;){for(var r,i,o=e[t],a=0,s=1,l=o.length,u=o[0],c=u[0],h=u[1];++a<l;)r=(u=o[a])[0],i=u[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return e}(s.arcs)),s}({geoms:a(r).geometry});return function(e){return Fe(e,function(s,e){function n(t){t.forEach(function(e){e.forEach(function(e){(u[e=e<0?~e:e]||(u[e]=[])).push(t)})}),r.push(t)}function l(e){return function(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[0]*i[1]-t[1]*i[0];return Math.abs(o)}(Fe(s,{type:"Polygon",arcs:[e]}).coordinates[0])}var u={},r=[],i=[];return e.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":n(t.arcs);break;case"MultiPolygon":t.arcs.forEach(n)}}),r.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,i.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(e){var t,n=[];if(e.forEach(function(e){e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].length<2&&n.push(e)})})}),1<(t=(n=function(f,i){function e(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){o[e<0?~e:e]=1}),a.push(r)}}var o={},d={},p={},a=[],s=-1;return i.forEach(function(e,t){var n,r=f.arcs[e<0?~e:e];r.length<3&&!r[1][0]&&!r[1][1]&&(n=i[++s],i[s]=e,i[t]=n)}),i.forEach(function(e){var t,n,r,i,o,a,s=(r=e,o=f.arcs[r<0?~r:r],a=o[0],f.transform?(i=[0,0],o.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})):i=o[o.length-1],r<0?[i,a]:[a,i]),l=s[0],u=s[1];if(t=p[l])if(delete p[t.end],t.push(e),t.end=u,n=d[u]){delete d[n.start];var c=n===t?t:t.concat(n);d[c.start=t.start]=p[c.end=n.end]=c}else d[t.start]=p[t.end]=t;else if(t=d[u])if(delete d[t.start],t.unshift(e),t.start=l,n=p[l]){delete p[n.end];var h=n===t?t:n.concat(t);d[h.start=n.start]=p[h.end=t.end]=h}else d[t.start]=p[t.end]=t;else d[(t=[e]).start=l]=p[t.end=u]=t}),e(p,d),e(d,p),i.forEach(function(e){o[e<0?~e:e]||a.push([e])}),a}(s,n)).length))for(var r,i,o=1,a=l(n[0]);o<t;++o)(r=l(n[o]))>a&&(i=n[0],n[0]=n[o],n[o]=i,a=r);return n})}}.apply(this,arguments))}(i,i.objects.geoms.geometries)}(r,e);default:throw new Error(n+" is not supported")}}function We(e,t){var n="object"==(void 0===t?"undefined":$d(t))?t.mutate:t;if(!e)throw new Error("geojson is required");var r=J(e),i=[];switch(r){case"LineString":i=Qe(e);break;case"MultiLineString":case"Polygon":A(e).forEach(function(e){i.push(Qe(e))});break;case"MultiPolygon":A(e).forEach(function(e){var t=[];e.forEach(function(e){t.push(Qe(e))}),i.push(t)});break;case"Point":return e;case"MultiPoint":var o={};A(e).forEach(function(e){var t=e.join("-");o.hasOwnProperty(t)||(i.push(e),o[t]=!0)});break;default:throw new Error(r+" geometry not supported")}return e.coordinates?!0===n?(e.coordinates=i,e):{type:r,coordinates:i}:!0===n?(e.geometry.coordinates=i,e):F({type:r,coordinates:i},e.properties,e.bbox,e.id)}function Qe(e){var t,n,r=A(e);if(2===r.length&&(t=r[0],n=r[1],t[0]!==n[0]||t[1]!==n[1]))return r;var i,o,a,s,l,u,c,h,f,d,p,m,g,y,_=[],v=r.length-1;_.push(r[0]);for(var b=1;b<v;b++)i=r[b-1],o=r[b],s=i,l=a=r[b+1],void 0,c=(u=o)[0],h=u[1],f=s[0],d=s[1],p=l[0],m=l[1],(c-f)*(y=m-d)-(h-d)*(g=p-f)==0&&(Math.abs(g)>=Math.abs(y)?0<g?f<=c&&c<=p:p<=c&&c<=f:0<y?d<=h&&h<=m:m<=h&&h<=d)||_.push(o);return _.push(a),_}function Ke(e,t,n){var r=t.x,i=t.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((e.x-r)*o+(e.y-i)*a)/(o*o+a*a);1<s?(r=n.x,i=n.y):0<s&&(r+=o*s,i+=a*s)}return(o=e.x-r)*o+(a=e.y-i)*a}function Ze(e,t,n){if(e.length<=2)return e;var r,i,o,a,s=void 0!==t?t*t:1;return e=n?e:function(e,t){for(var n,r=e[0],i=[r],o=1,a=e.length;o<a;o++)s=n=e[o],l=r,void 0,u=s.x-l.x,c=s.y-l.y,t<u*u+c*c&&(i.push(n),r=n);var s,l,u,c;return r!==n&&i.push(n),i}(e,s),i=s,o=(r=e).length-1,a=[r[0]],function e(t,n,r,i,o){for(var a,s=i,l=n+1;l<r;l++){var u=Ke(t[l],t[n],t[r]);s<u&&(a=l,s=u)}i<s&&(1<a-n&&e(t,n,a,i,o),o.push(t[a]),1<r-a&&e(t,a,r,i,o))}(r,0,o,i,a),a.push(r[o]),a}function Je(e,t,n){return Ze(e.map(function(e){return{x:e[0],y:e[1],z:e[2]}}),t,n).map(function(e){return e.z?[e.x,e.y,e.z]:[e.x,e.y]})}function Xe(e,i,o){return e.map(function(e){var t,n=e.map(function(e){return{x:e[0],y:e[1]}});if(n.length<4)throw new Error("invalid polygon");for(var r=Ze(n,i,o).map(function(e){return[e.x,e.y]});(t=r).length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1];)r=Ze(n,i-=.01*i,o).map(function(e){return[e.x,e.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function Ye(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.resolution||1e4,r=t.sharpness||.85;if(!e)throw new Error("line is required");if(!$(n))throw new Error("resolution must be an number");if(!$(r))throw new Error("sharpness must be an number");for(var i=[],o=new Vo({points:K(e).coordinates.map(function(e){return{x:e[0],y:e[1]}}),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var s=o.pos(a);Math.floor(a/100)%2==0&&i.push([s.x,s.y])}return U(i,e.properties)}function et(e){h(e);var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]),i=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,n];return q([[o,[r,n],[r,i],[t,i],o]])}function tt(e){return et(H(e))}function nt(e){var t=e[0],n=e[1],r=e[2],i=e[3];if(Ae(e.slice(0,2),[r,n])>=Ae(e.slice(0,2),[t,i])){var o=(n+i)/2;return[t,o-(r-t)/2,r,o+(r-t)/2]}var a=(t+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function rt(e,t,n,r){if(!V(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties,a=W(e),s=_(a[0]),l=_(a[1]),u=_(n),c=m(t,i),h=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(u));return z([d(s+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(h))),d(h)],o)}function it(e,t,n){var r=(n=n||{}).steps||64,i=n.properties;if(!e)throw new Error("center is required");if(!t)throw new Error("radius is required");if("object"!=(void 0===n?"undefined":$d(n)))throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||e.properties||{};for(var o=[],a=0;a<r;a++)o.push(rt(e,t,-360*a/r,n).geometry.coordinates);return o.push(o[0]),q([o],i)}function ot(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return(ot(t,e)+180)%360;var r=W(e),i=W(t),o=_(r[0]),a=_(i[0]),s=_(r[1]),l=_(i[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return d(Math.atan2(u,c))}function at(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.properties;if(!e)throw new Error("geojson is required");var r=H(e);return z([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function st(e,t){var n=0,r=0,i=0;return x(e,function(e){n+=e[0],r+=e[1],i++},!0),z([n/i,r/i],t)}function lt(t){var n=[];return"FeatureCollection"===t.type?L(t,function(t){x(t,function(e){n.push(z(e,t.properties))})}):x(t,function(e){n.push(z(e,t.properties))}),G(n)}function ut(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,f=ct(e,0,h,n,!0),d=[];if(!f)return d;if(c&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=ct(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(e){for(var t=e,n=e;t.x<n.x&&(n=t),(t=t.next)!==e;);return n}(a));for(s.sort(ft),i=0;i<s.length;i++)!function(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&pt(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&_t(r,e)&&(n=r,f=l),r=r.next;return n}(e,t)){var n=vt(t,e);ht(n,n.next)}}(s[i],n),n=ht(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(l=e[p+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return function h(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){for(var i=e;null===i.z&&(i.z=dt(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==e;);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,o=e=null,a=0;n;){for(a++,r=n,t=s=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;0<s||0<l&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(1<a)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?function(e,t,n,r){var i=e.prev,o=e,a=e.next;if(0<=mt(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=dt(s,l,t,n,r),f=dt(u,c,t,n,r),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&pt(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=mt(d.prev,d,d.next))return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&pt(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=mt(d.prev,d,d.next))return!1;d=d.prevZ}return!0}(e,r,i,o):function(e){var t=e.prev,n=e,r=e.next;if(0<=mt(t,n,r))return!1;for(var i=e.next.next;i!==e.prev;){if(pt(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=mt(i.prev,i,i.next))return!1;i=i.next}return!0}(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),wt(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?h(e=function(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!gt(i,o)&&yt(i,r,r.next,o)&&_t(i,o)&&_t(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),wt(r),wt(r.next),r=e=o),r=r.next}while(r!==e);return r}(e,t,n),t,n,r,i,o,2):2===a&&function(e,t,n,r,i,o){var a,s,l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&yt(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(a,s)&&_t(a,s)&&_t(s,a)&&function(e,t){for(var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==e;);return r}(a,s))){var c=vt(l,u);return l=ht(l,l.next),c=ht(c,c.next),h(l,t,n,r,i,o),h(c,t,n,r,i,o)}u=u.next}l=l.next}while(l!==e)}(e,t,n,r,i,o):h(ht(e),t,n,r,i,o,1);break}}}(f,d,n,r,i,u),d}function ct(e,t,n,r,i){var o,a;if(i===0<kt(e,t,n,r))for(o=t;o<n;o+=r)a=bt(o,e[o],e[o+1],a);else for(o=n-r;t<=o;o-=r)a=bt(o,e[o],e[o+1],a);return a&&gt(a,a.next)&&(wt(a),a=a.next),a}function ht(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!gt(r,r.next)&&0!==mt(r.prev,r,r.next))r=r.next;else{if(wt(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function ft(e,t){return e.x-t.x}function dt(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function pt(e,t,n,r,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(r-s)-(n-a)*(t-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function mt(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function gt(e,t){return e.x===t.x&&e.y===t.y}function yt(e,t,n,r){return!!(gt(e,t)&&gt(n,r)||gt(e,r)&&gt(n,t))||0<mt(e,t,n)!=0<mt(e,t,r)&&0<mt(n,r,e)!=0<mt(n,r,t)}function _t(e,t){return mt(e.prev,e,e.next)<0?0<=mt(e,t,e.next)&&0<=mt(e,e.prev,t):mt(e,t,e.prev)<0||mt(e,e.next,t)<0}function vt(e,t){var n=new xt(e.i,e.x,e.y),r=new xt(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function bt(e,t,n,r){var i=new xt(e,t,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function wt(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xt(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kt(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function Lt(e){var r=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);0<i&&(r+=e[i-1].length,n.holes.push(r))}return n}(e),i=Ho(r.vertices,r.holes,2),t=[],o=[];i.forEach(function(e,t){var n=i[t];o.push([r.vertices[2*n],r.vertices[2*n+1]])});for(var n=0;n<o.length;n+=3){var a=o.slice(n,n+3);a.push(o[n]),t.push(q([a]))}return t}function Ct(r,e){if(!r)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var i,o=1/0;return L(e,function(e,t){var n=Ae(r,e);n<o&&((i=je(e)).properties.featureIndex=t,i.properties.distanceToPoint=n,o=n)}),i}function St(e,t,n,r,i){!function e(t,n,r,i,o){for(;r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=t[n],f=r,d=i;for(Mt(t,r,n),0<o(t[i],h)&&Mt(t,r,i);f<d;){for(Mt(t,f,d),f++,d--;o(t[f],h)<0;)f++;for(;0<o(t[d],h);)d--}0===o(t[r],h)?Mt(t,r,d):Mt(t,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(e,t,n||0,r||e.length-1,i||function(e,t){return e<t?-1:t<e?1:0})}function Mt(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Pt(e,t){if(!(this instanceof Pt))return new Pt(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function Et(e,t){Tt(e,0,e.children.length,t,e)}function Tt(e,t,n,r,i){i||(i=Bt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],It(i,e.leaf?r(o):o);return i}function It(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Ot(e,t){return e.minX-t.minX}function Dt(e,t){return e.minY-t.minY}function Nt(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function At(e){return e.maxX-e.minX+(e.maxY-e.minY)}function jt(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Rt(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Bt(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ft(e,t,n,r,i){for(var o,a=[t,n];a.length;)(n=a.pop())-(t=a.pop())<=r||(St(e,o=t+Math.ceil((n-t)/r/2)*r,t,n,i),a.push(t,o,o,n))}function zt(e){var t=Pt(e);return t.insert=function(e){if(Array.isArray(e)){var t=e;(e=qt(t)).bbox=t}else e.bbox=e.bbox?e.bbox:Ut(e);return Pt.prototype.insert.call(this,e)},t.load=function(e){var n=[];return Array.isArray(e)?e.forEach(function(e){var t=qt(e);t.bbox=e,n.push(t)}):L(e,function(e){e.bbox=e.bbox?e.bbox:Ut(e),n.push(e)}),Pt.prototype.load.call(this,n)},t.remove=function(e){if(Array.isArray(e)){var t=e;(e=qt(t)).bbox=t}return Pt.prototype.remove.call(this,e)},t.clear=function(){return Pt.prototype.clear.call(this)},t.search=function(e){return{type:"FeatureCollection",features:Pt.prototype.search.call(this,this.toBBox(e))}},t.collides=function(e){return Pt.prototype.collides.call(this,this.toBBox(e))},t.all=function(){return{type:"FeatureCollection",features:Pt.prototype.all.call(this)}},t.toJSON=function(){return Pt.prototype.toJSON.call(this)},t.fromJSON=function(e){return Pt.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;return{minX:(t=e.bbox?e.bbox:Array.isArray(e)&&4===e.length?e:Ut(e))[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function qt(e){var t=[e[0],e[1]],n=[e[0],e[3]],r=[e[2],e[3]];return{type:"Feature",bbox:e,properties:{},geometry:{type:"Polygon",coordinates:[[t,[e[2],e[1]],r,n,t]]}}}function Ut(e){var t=[1/0,1/0,-1/0,-1/0];return x(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}function Gt(e){if(!e)throw new Error("geojson is required");var t=[];return E(e,function(e){!function(n,r){var e=[],t=n.geometry;switch(t.type){case"Polygon":e=A(t);break;case"LineString":e=[A(t)]}e.forEach(function(e){var t,u,c;(t=e,u=n.properties,c=[],t.reduce(function(e,t){var n,r,i,o,a,s,l=U([e,t],u);return l.bbox=(r=t,i=(n=e)[0],o=n[1],a=r[0],s=r[1],[i<a?i:a,o<s?o:s,a<i?i:a,s<o?o:s]),c.push(l),t}),c).forEach(function(e){e.id=r.length,r.push(e)})})}(e,t)}),G(t)}function $t(e,t){var i={},o=[];if("LineString"===e.type&&(e=F(e)),"LineString"===t.type&&(t=F(t)),"Feature"===e.type&&"Feature"===t.type&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var n=Vt(e,t);return n&&o.push(n),G(o)}var a=zt();return a.load(Gt(t)),L(Gt(e),function(r){L(a.search(r),function(e){var t=Vt(r,e);if(t){var n=A(t).join(",");i[n]||(i[n]=!0,o.push(t))}})}),G(o)}function Vt(e,t){var n=A(e),r=A(t);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],l=r[0][0],u=r[0][1],c=r[1][0],h=r[1][1],f=(h-u)*(a-i)-(c-l)*(s-o);if(0===f)return null;var d=((c-l)*(o-u)-(h-u)*(i-l))/f,p=((a-i)*(o-u)-(s-o)*(i-l))/f;return 0<=d&&d<=1&&0<=p&&p<=1?z([i+d*(a-i),o+d*(s-o)]):null}function Ht(e,f,d){if(!V(d=d||{}))throw new Error("options is invalid");var t=e.geometry?e.geometry.type:e.type;if("LineString"!==t&&"MultiLineString"!==t)throw new Error("lines must be LineString or MultiLineString");var p=z([1/0,1/0],{dist:1/0}),m=0;return E(e,function(e){for(var t=A(e),n=0;n<t.length-1;n++){var r=z(t[n]);r.properties.dist=Ae(f,r,d);var i=z(t[n+1]);i.properties.dist=Ae(f,i,d);var o=Ae(r,i,d),a=Math.max(r.properties.dist,i.properties.dist),s=ot(r,i),l=rt(f,a,s+90,d),u=rt(f,a,s-90,d),c=$t(U([l.geometry.coordinates,u.geometry.coordinates]),U([r.geometry.coordinates,i.geometry.coordinates])),h=null;0<c.features.length&&((h=c.features[0]).properties.dist=Ae(f,h,d),h.properties.location=m+Ae(r,h,d)),r.properties.dist<p.properties.dist&&((p=r).properties.index=n,p.properties.location=m),i.properties.dist<p.properties.dist&&((p=i).properties.index=n+1,p.properties.location=m+o),h&&h.properties.dist<p.properties.dist&&((p=h).properties.index=n),m+=o}}),p}function Wt(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!e)throw new Error("start point is required");if(!t)throw new Error("end point is required");return 180<(r=i?Qt(W(t),W(e)):Qt(W(e),W(t)))?-(360-r):r}function Qt(e,t){var n=_(e[1]),r=_(t[1]),i=_(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(d(Math.atan2(i,o))+360)%360}function Kt(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!e)throw new Error("from point is required");if(!t)throw new Error("to point is required");var i=W(e),o=W(t);return o[0]+=180<o[0]-i[0]?-360:180<i[0]-o[0]?360:0,u(function(e,t,n){var r=n=void 0===n?ho:Number(n),i=e[1]*Math.PI/180,o=t[1]*Math.PI/180,a=o-i,s=Math.abs(t[0]-e[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),u=1e-11<Math.abs(l)?a/l:Math.cos(i);return Math.sqrt(a*a+u*u*s*s)*r}(i,o),"meters",r)}function Zt(e,t){return Xt(e,"mercator",t)}function Jt(e,t){return Xt(e,"wgs84",t)}function Xt(e,n,t){if(!V(t=t||{}))throw new Error("options is invalid");var r=t.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&$(e[0])?e="mercator"===n?Yt(e):en(e):(!0!==r&&(e=je(e)),x(e,function(e){var t="mercator"===n?Yt(e):en(e);e[0]=t[0],e[1]=t[1]})),e}function Yt(e){var t,n=Math.PI/180,r=20037508.342789244,i=[6378137*(Math.abs(e[0])<=180?e[0]:e[0]-360*(t=e[0],t<0?-1:0<t?1:0))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*e[1]*n))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function en(e){var t=180/Math.PI;return[e[0]*t/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/6378137)))*t]}function tn(e,t,i){if(!V(i=i||{}))throw new Error("options is invalid");if(!e)throw new Error("pt is required");if(Array.isArray(e)?e=z(e):"Point"===e.type?e=F(e):B(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=U(t):"LineString"===t.type?t=F(t):B(t,"LineString","line");var o=1/0,a=e.geometry.coordinates;return I(t,function(e){var t=e.geometry.coordinates[0],n=e.geometry.coordinates[1],r=function(e,t,n,r){var i=r.mercator,o=!0!==i?Ae(t,e,r):nn(t,e,r),a=f(!0!==i?ot(t,e):Wt(t,e)),s=f(!0!==i?ot(t,n):Wt(t,n)),l=Math.abs(a-s);if(90<l)return o;var u=(s+180)%360,c=f(!0!==i?ot(n,e):Wt(n,e)),h=Math.abs(c-u);return 180<h&&(h=Math.abs(h-360)),90<h?!0!==i?Ae(e,n,r):nn(e,n,r):!0!==i?o*Math.sin(_(l)):function(e,t,n,r){var i=0;(180<=Math.abs(e[0])||180<=Math.abs(t[0])||180<=Math.abs(n[0]))&&(i=0<e[0]||0<t[0]||0<n[0]?-180:180);var o,a,s,l,u,c,h,f,d=z(n),p=Zt([e[0]+i,e[1]]),m=Zt([t[0]+i,t[1]]),g=Zt([n[0]+i,n[1]]),y=Jt((a=m,s=g,l=(o=p)[0],u=o[1],c=a[0]-l,h=a[1]-u,f=((s[0]-l)*c+(s[1]-u)*h)/(c*c+h*h),[l+f*c,u+f*h]));return 0!==i&&(y[0]-=i),Kt(d,y,r)}(t,n,e,r)}(a,t,n,i);r<o&&(o=r)}),o}function nn(e,t,n){var r=n.units,i=0;180<=Math.abs(e[0])&&(i=0<e[0]?-180:180),180<=Math.abs(t[0])&&(i=0<t[0]?-180:180);var o=Zt([e[0]+i,e[1]]),a=Zt([t[0]+i,t[1]]),s=function(e){return e*e},l=s(o[0]-a[0])+s(o[1]-a[1]);return u(Math.sqrt(l),"meters",r)}function rn(e){for(var t="FeatureCollection"!==(h=e).type?"Feature"!==h.type?G([F(h)]):G([h]):h,n=at(t),r=!1,i=0;!r&&i<t.features.length;){var o,a=t.features[i].geometry,s=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(r=!0);else if("MultiPoint"===a.type){var l=!1;for(o=0;!l&&o<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[o][0]&&n.geometry.coordinates[1]===a.coordinates[o][1]&&(l=r=!0),o++}else if("LineString"===a.type)for(o=0;!s&&o<a.coordinates.length-1;)on(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(r=s=!0),o++;else if("MultiLineString"===a.type)for(var u=0;u<a.coordinates.length;){s=!1,o=0;for(var c=a.coordinates[u];!s&&o<c.length-1;)on(n.geometry.coordinates[0],n.geometry.coordinates[1],c[o][0],c[o][1],c[o+1][0],c[o+1][1])&&(r=s=!0),o++;u++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||Pe(n,a)&&(r=!0);i++}var h;if(r)return n;var f=G([]);for(i=0;i<t.features.length;i++)f.features=f.features.concat(lt(t.features[i]).features);return z(Ct(n,f).geometry.coordinates)}function on(e,t,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))+Math.sqrt((i-e)*(i-e)+(o-t)*(o-t))}function an(e){return P(e,function(e,t){return e+function e(t){var n,r=0;switch(t.type){case"Polygon":return sn(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=sn(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}}(t)},0)}function sn(e){var t=0;if(e&&0<e.length){t+=Math.abs(ln(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(ln(e[n]))}return t}function ln(e){var t,n,r,i,o,a,s=0,l=e.length;if(2<l){for(a=0;a<l;a++)o=a===l-2?(r=l-2,i=l-1,0):a===l-1?(r=l-1,i=0,1):(i=(r=a)+1,a+2),t=e[r],n=e[i],s+=(un(e[o][0])-un(t[0]))*Math.sin(un(n[1]));s=s*Ko*Ko/2}return s}function un(e){return e*Math.PI/180}function cn(e,r){if(!V(r=r||{}))throw new Error("options is invalid");if(!e)throw new Error("geojson is required");return O(e,function(e,t){var n=t.geometry.coordinates;return e+Ae(n[0],n[1],r)},0)}function hn(e,t,n,r){if(!V(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===e.type)i=e.geometry.coordinates;else{if("LineString"!==e.type)throw new Error("input must be a LineString Feature or Geometry");i=e.coordinates}for(var a,s,l,u=0,c=0;c<i.length&&!(u<=t&&c===i.length-1);c++){if(t<u&&0===o.length){if(!(a=t-u))return o.push(i[c]),U(o);s=ot(i[c],i[c-1])-180,l=rt(i[c],a,s,r),o.push(l.geometry.coordinates)}if(n<=u)return(a=n-u)?(s=ot(i[c],i[c-1])-180,l=rt(i[c],a,s,r),o.push(l.geometry.coordinates)):o.push(i[c]),U(o);if(t<=u&&o.push(i[c]),c===i.length-1)return U(o);u+=Ae(i[c],i[c+1],r)}return U(i[i.length-1])}function fn(e,t,n){var r,i,o,a,s,l,u,c,h,f,d,p,m=(n=n||{}).ignoreEndVertices;if(!V(n))throw new Error("invalid options");if(!e)throw new Error("pt is required");if(!t)throw new Error("line is required");for(var g=W(e),y=A(t),_=0;_<y.length-1;_++){var v=!1;if(m&&(0===_&&(v="start"),_===y.length-2&&(v="end"),0===_&&_+1===y.length-1&&(v="both")),r=y[_],i=y[_+1],a=v,void 0,s=(o=g)[0],l=o[1],u=r[0],c=r[1],h=i[0],f=i[1],d=h-u,p=f-c,(o[0]-u)*p-(o[1]-c)*d==0&&(a?"start"===a?Math.abs(d)>=Math.abs(p)?0<d?u<s&&s<=h:h<=s&&s<u:0<p?c<l&&l<=f:f<=l&&l<c:"end"===a?Math.abs(d)>=Math.abs(p)?0<d?u<=s&&s<h:h<s&&s<=u:0<p?c<=l&&l<f:f<l&&l<=c:"both"===a?Math.abs(d)>=Math.abs(p)?0<d?u<s&&s<h:h<s&&s<u:0<p?c<l&&l<f:f<l&&l<c:void 0:Math.abs(d)>=Math.abs(p)?0<d?u<=s&&s<=h:h<=s&&s<=u:0<p?c<=l&&l<=f:f<=l&&l<=c))return!0}return!1}function dn(e,t){var n=J(e),r=J(t),i=K(e),o=K(t);switch(n){case"Point":switch(r){case"MultiPoint":return function(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(mn(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"LineString":return fn(i,o,{ignoreEndVertices:!0});case"Polygon":return Pe(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)mn(e.coordinates[n],t.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!fn(e.coordinates[r],t))return!1;n||(n=fn(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(e,t){for(var n=!0,r=0;r<e.coordinates.length;r++){var i=Pe(e.coordinates[1],t);if(!i){n=!1;break}i=Pe(e.coordinates[1],t,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(e,t){for(var n=0;n<e.coordinates.length;n++)if(!fn(e.coordinates[n],t))return!1;return!0}(i,o);case"Polygon":return function(e,t){var n,r;if(!pn(H(t),H(e)))return!1;for(var i=!1,o=0;o<e.coordinates.length-1;o++){if(!Pe(e.coordinates[o],t))return!1;if(i||(i=Pe(e.coordinates[o],t,{ignoreBoundary:!0})),!i)i=Pe((n=e.coordinates[o],r=e.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2]),t,{ignoreBoundary:!0})}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(e,t){var n=H(e);if(!pn(H(t),n))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!Pe(e.coordinates[0][r],t))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function pn(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function mn(e,t){return e[0]===t[0]&&e[1]===t[1]}function gn(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.mask,i=n.properties,o=[];if(null==t)throw new Error("cellSide is required");if(!$(t))throw new Error("cellSide is invalid");if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be array");if(4!==e.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(J(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e[0],s=e[1],l=e[2],u=e[3],c=t/Ae([a,s],[l,s],n)*(l-a),h=t/Ae([a,s],[a,u],n)*(u-s),f=l-a,d=u-s,p=Math.floor(f/c),m=(d-Math.floor(d/h)*h)/2,g=a+(f-p*c)/2;g<=l;){for(var y=s+m;y<=u;){var _=z([g,y],i);r?dn(_,r)&&o.push(_):o.push(_),y+=h}g+=c}return G(o)}function yn(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.precision,r=t.coordinates,i=t.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!e)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,n);return x(e,function(e){!function(e,t,n){e.length>n&&e.splice(n,e.length);for(var r=0;r<e.length;r++)e[r]=Math.round(e[r]*t)/t}(e,o,r)}),e}function _n(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!_n(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function vn(e,t){if(void 0===t&&(t=!0),3!=e.length)throw new Error("This function requires an array of three points [x,y]");return 0<=(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0])==t}function bn(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!bn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function wn(r,e){var i=[],o=zt();return E(e,function(e){if(i.forEach(function(e,t){e.id=t}),i.length){var t=o.search(e);if(t.features.length){var n=kn(e,t);i=i.filter(function(e){return e.id!==n.id}),o.remove(n),L(xn(n,e),function(e){i.push(e),o.insert(e)})}}else(i=xn(r,e).features).forEach(function(e){e.bbox||(e.bbox=nt(H(e)))}),o.load(G(i))}),G(i)}function xn(e,o){var a=[],t=A(e)[0],n=A(e)[e.geometry.coordinates.length-1];if(Ln(t,W(o))||Ln(n,W(o)))return G([e]);var r=zt(),i=Gt(e);r.load(i);var s=r.search(o);if(!s.features.length)return G([e]);var l=kn(o,s),u=C(i,function(e,t,n){var r=A(t)[1],i=W(o);return n===l.id?(e.push(i),a.push(U(e)),Ln(i,r)?[i]:[i,r]):(e.push(r),e)},[t]);return 1<u.length&&a.push(U(u)),G(a)}function kn(n,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,i=1/0;return L(e,function(e){var t=Ht(e,n).properties.dist;t<i&&(r=e,i=t)}),r}function Ln(e,t){return e[0]===t[0]&&e[1]===t[1]}function Cn(e,t,n,r,i){if(!V(i=i||{}))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!e)throw new Error("center is required");if(!t)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=(void 0===i?"undefined":$d(i)))throw new Error("options must be an object");o=o||64;var s=Sn(n),l=Sn(r),u=e.properties;if(s===l)return U(it(e,t,i).geometry.coordinates[0],u);for(var c=s,h=s<l?l:l+360,f=c,d=[],p=0;f<h;)d.push(rt(e,t,f,a).geometry.coordinates),f=c+360*++p/o;return h<f&&d.push(rt(e,t,h,a).geometry.coordinates),U(d,u)}function Sn(e){var t=e%360;return t<0&&(t+=360),t}function Mn(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.properties,r=J(e),i=A(e);if(n=n||e.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Pn(i,n);case"MultiPolygon":var o=[];return i.forEach(function(e){o.push(Pn(e,n))}),G(o);default:throw new Error("geom "+r+" not supported")}}function Pn(e,t){return 1<e.length?v(e,t):U(e[0],t)}function En(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.properties,r=t.autoComplete,i=t.orderCoords;if(!e)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,J(e)){case"FeatureCollection":case"GeometryCollection":var o=[];return(e.features?e.features:e.geometries).forEach(function(e){o.push(A(Tn(e,{},r,i)))}),b(o,n)}return Tn(e,n,r,i)}function Tn(e,t,s,l){t=t||e.properties||{};var n=A(e),r=J(e);if(!n.length)throw new Error("line must contain coordinates");switch(r){case"LineString":return s&&(n=In(n)),q([n],t);case"MultiLineString":var u=[],c=0;return n.forEach(function(e){if(s&&(e=In(e)),l){var t=(n=H(U(e)),r=n[0],i=n[1],o=n[2],a=n[3],Math.abs(r-o)*Math.abs(i-a));c<t?(u.unshift(e),c=t):u.push(e)}else u.push(e);var n,r,i,o,a}),q(u,t);default:throw new Error("geometry type "+r+" is not supported")}}function In(e){var t=e[0],n=t[0],r=t[1],i=e[e.length-1],o=i[0],a=i[1];return n===o&&r===a||e.push(t),e}function On(e,t,n){var r,i,o,a,s,l=e.length,u=Nn(e[0],t),c=[];for(n||(n=[]),r=1;r<l;r++){for(i=e[r-1],a=s=Nn(o=e[r],t);;){if(!(u|a)){c.push(i),a!==s?(c.push(o),r<l-1&&(n.push(c),c=[])):r===l-1&&c.push(o);break}if(u&a)break;u?u=Nn(i=Dn(i,o,u,t),t):a=Nn(o=Dn(i,o,a,t),t)}u=s}return c.length&&n.push(c),n}function Dn(e,t,n,r){return 8&n?[e[0]+(t[0]-e[0])*(r[3]-e[1])/(t[1]-e[1]),r[3]]:4&n?[e[0]+(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1]),r[1]]:2&n?[r[2],e[1]+(t[1]-e[1])*(r[2]-e[0])/(t[0]-e[0])]:1&n?[r[0],e[1]+(t[1]-e[1])*(r[0]-e[0])/(t[0]-e[0])]:null}function Nn(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function An(e,t){for(var n=[],r=0;r<e.length;r++){var i=oa.polygon(e[r],t);0<i.length&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),4<=i.length&&n.push(i))}return n}function jn(e){return"[object Arguments]"===Object.prototype.toString.call(e)}function Rn(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=(void 0===e?"undefined":$d(e))&&"object"!=(void 0===t?"undefined":$d(t))?(n.strict,e===t):function(e,t,n){var r,i;if(Bn(e)||Bn(t))return!1;if(e.prototype!==t.prototype)return!1;if(jn(e))return!!jn(t)&&Rn(e=aa.call(e),t=aa.call(t),n);if(Fn(e)){if(!Fn(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var o=Object.keys(e),a=Object.keys(t)}catch(e){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;0<=r;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;0<=r;r--)if(!Rn(e[i=o[r]],t[i],n))return!1;return(void 0===e?"undefined":$d(e))==(void 0===t?"undefined":$d(t))}(e,t,n))}function Bn(e){return null==e}function Fn(e){return!(!e||"object"!=(void 0===e?"undefined":$d(e))||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||0<e.length&&"number"!=typeof e[0])}function zn(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var o,a=n.tolerance||0,s=[],l=zt();return l.load(Gt(e)),I(t,function(r){var i=!1;L(l.search(r),function(e){if(!1===i){var t=A(r).sort(),n=A(e).sort();Rn(t,n)?(i=!0,o=o?qn(o,r):r):(0===a?fn(t[0],e)&&fn(t[1],e):Ht(e,t[0]).properties.dist<=a&&Ht(e,t[1]).properties.dist<=a)?(i=!0,o=o?qn(o,r):r):(0===a?fn(n[0],r)&&fn(n[1],r):Ht(r,n[0]).properties.dist<=a&&Ht(r,n[1]).properties.dist<=a)&&(o=o?qn(o,e):e)}}),!1===i&&o&&(s.push(o),o=void 0)}),o&&s.push(o),G(s)}function qn(e,t){var n=A(t),r=A(e),i=r[0],o=r[r.length-1],a=e.geometry.coordinates;return Rn(n[0],i)?a.unshift(n[1]):Rn(n[0],o)?a.push(n[1]):Rn(n[1],i)?a.unshift(n[0]):Rn(n[1],o)&&a.push(n[0]),e}function Un(e){var t=e%360;return t<0&&(t+=360),t}function Gn(e,t,n,r){if(!V(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties;if(!e)throw new Error("origin is required");if(null==t)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=t))throw new Error("distance must be greater than 0");var f=u(t,i,"meters"),a=W(e),s=function(e,t,n,r){var i=f/(r=void 0===r?ho:Number(r)),o=e[0]*Math.PI/180,a=_(e[1]),s=_(n),l=i*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=0<u?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=1e-11<Math.abs(c)?l/c:Math.cos(a);return[(180*(o+i*Math.sin(s)/h)/Math.PI+540)%360-180,180*u/Math.PI]}(a,0,n);return s[0]+=180<s[0]-a[0]?-360:180<a[0]-s[0]?360:0,z(s,o)}function $n(e,t,n,r,i,o){for(var a=0;a<e.length;a++){var s=e[a],l=e[a+1];a===e.length-1&&(l=e[0]),r=Vn(s,l,t),n<=0&&0<r?Vn(t,s,i)<0||(i=s):0<n&&r<=0&&(0<Vn(t,s,o)||(o=s)),n=r}return[i,o]}function Vn(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function Hn(e){if(!e)throw new Error("line is required");var t=e.geometry?e.geometry.type:e.type;if(!Array.isArray(e)&&"LineString"!==t)throw new Error("geometry must be a LineString");for(var n,r,i=A(e),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return 0<o}function Wn(e,t){switch("Feature"===e.type?e.geometry.type:e.type){case"GeometryCollection":return M(e,function(e){Wn(e,t)}),e;case"LineString":return Qn(A(e),t),e;case"Polygon":return Kn(A(e),t),e;case"MultiLineString":return A(e).forEach(function(e){Qn(e,t)}),e;case"MultiPolygon":return A(e).forEach(function(e){Kn(e,t)}),e;case"Point":case"MultiPoint":return e}}function Qn(e,t){Hn(e)===t&&e.reverse()}function Kn(e,t){Hn(e[0])!==t&&e[0].reverse();for(var n=1;n<e.length;n++)Hn(e[n])===t&&e[n].reverse()}function Zn(e,t,n,r){r=r||{};for(var i=Object.keys(sa),o=0;o<i.length;o++){var a=i[o],s=r[a];s=null!=s?s:sa[a],la[a]=s}la.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+n)+"]");var l,u,c,h=function(e,t,n){for(var r=e.length-1,i=e[0].length-1,o={rows:r,cols:i,cells:[]},a=t+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var l=0;l<i;++l){var u=0,c=e[s+1][l],h=e[s+1][l+1],f=e[s][l+1],d=e[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(d))){u|=c<t?0:a<c?128:64,u|=h<t?0:a<h?32:16,u|=f<t?0:a<f?8:4;var p=+(u|=d<t?0:a<d?2:1),m=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var g=(c+h+f+d)/4;m=a<g?2:g<t?0:1,34===u?1===m?u=35:0===m&&(u=136):136===u?1===m?(u=35,m=4):0===m&&(u=34):17===u?1===m?(u=155,m=4):0===m&&(u=153):68===u?1===m?(u=103,m=4):0===m&&(u=102):153===u?1===m&&(u=155):102===u?1===m&&(u=103):152===u?m<2&&(u=156,m=1):137===u?m<2&&(u=139,m=1):98===u?m<2&&(u=99,m=1):38===u?m<2&&(u=39,m=1):18===u?0<m?(u=156,m=4):u=152:33===u?0<m?(u=139,m=4):u=137:72===u?0<m?(u=99,m=4):u=98:132===u&&(0<m?(u=39,m=4):u=38)}if(0!=u&&170!=u){var y,_,v,b,w,x,k,L;y=_=v=b=w=x=k=L=.5;var C=[];1===u?(v=1-Jn(t,f,d),L=1-Jn(t,c,d),C.push(Qa[u])):169===u?(v=Jn(a,d,f),L=Jn(a,d,c),C.push(Qa[u])):4===u?(x=1-Jn(t,h,f),b=Jn(t,d,f),C.push(Ha[u])):166===u?(x=Jn(a,f,h),b=1-Jn(a,f,d),C.push(Ha[u])):16===u?(w=Jn(t,f,h),_=Jn(t,c,h),C.push(Va[u])):154===u?(w=1-Jn(a,h,f),_=1-Jn(a,h,c),C.push(Va[u])):64===u?(k=Jn(t,d,c),y=1-Jn(t,h,c),C.push(Za[u])):106===u?(k=1-Jn(a,c,d),y=Jn(a,c,h),C.push(Za[u])):168===u?(b=Jn(a,d,f),v=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),C.push(Wa[u]),C.push(Qa[u])):2===u?(b=1-Jn(t,f,d),v=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),C.push(Wa[u]),C.push(Qa[u])):162===u?(w=Jn(a,f,h),x=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),C.push(Wa[u]),C.push(Qa[u])):8===u?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),C.push(Va[u]),C.push(Ha[u])):138===u?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),y=1-Jn(a,h,c),_=1-Jn(t,h,c),C.push(Va[u]),C.push(Ha[u])):32===u?(w=Jn(a,f,h),x=Jn(t,f,h),y=Jn(t,c,h),_=Jn(a,c,h),C.push(Va[u]),C.push(Ha[u])):42===u?(L=1-Jn(a,c,d),k=1-Jn(t,c,d),y=Jn(t,c,h),_=Jn(a,c,h),C.push(Ka[u]),C.push(Za[u])):128===u&&(L=Jn(t,d,c),k=Jn(a,d,c),y=1-Jn(a,h,c),_=1-Jn(t,h,c),C.push(Ka[u]),C.push(Za[u])),5===u?(x=1-Jn(t,h,f),L=1-Jn(t,c,d),C.push(Ha[u])):165===u?(x=Jn(a,f,h),L=Jn(a,d,c),C.push(Ha[u])):20===u?(b=Jn(t,d,f),_=Jn(t,c,h),C.push(Wa[u])):150===u?(b=1-Jn(a,f,d),_=1-Jn(a,h,c),C.push(Wa[u])):80===u?(w=Jn(t,f,h),k=Jn(t,d,c),C.push(Va[u])):90===u?(w=1-Jn(a,h,f),k=1-Jn(a,c,d),C.push(Va[u])):65===u?(v=1-Jn(t,f,d),y=1-Jn(t,h,c),C.push(Qa[u])):105===u?(v=Jn(a,d,f),y=Jn(a,c,h),C.push(Qa[u])):160===u?(w=Jn(a,f,h),x=Jn(t,f,h),L=Jn(t,d,c),k=Jn(a,d,c),C.push(Va[u]),C.push(Ha[u])):10===u?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),L=1-Jn(a,c,d),k=1-Jn(t,c,d),C.push(Va[u]),C.push(Ha[u])):130===u?(b=1-Jn(t,f,d),v=1-Jn(a,f,d),y=1-Jn(a,h,c),_=1-Jn(t,h,c),C.push(Wa[u]),C.push(Qa[u])):40===u?(b=Jn(a,d,f),v=Jn(t,d,f),y=Jn(t,c,h),_=Jn(a,c,h),C.push(Wa[u]),C.push(Qa[u])):101===u?(x=Jn(a,f,h),y=Jn(a,c,h),C.push(Ha[u])):69===u?(x=1-Jn(t,h,f),y=1-Jn(t,h,c),C.push(Ha[u])):149===u?(L=Jn(a,d,c),_=1-Jn(a,h,c),C.push(Ka[u])):21===u?(L=1-Jn(t,c,d),_=Jn(t,c,h),C.push(Ka[u])):86===u?(b=1-Jn(a,f,d),k=1-Jn(a,c,d),C.push(Wa[u])):84===u?(b=Jn(t,d,f),k=Jn(t,d,c),C.push(Wa[u])):89===u?(w=1-Jn(a,h,f),v=Jn(a,d,f),C.push(Qa[u])):81===u?(w=Jn(t,f,h),v=1-Jn(t,f,d),C.push(Qa[u])):96===u?(w=Jn(a,f,h),x=Jn(t,f,h),k=Jn(t,d,c),y=Jn(a,c,h),C.push(Va[u]),C.push(Ha[u])):74===u?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),k=1-Jn(a,c,d),y=1-Jn(t,h,c),C.push(Va[u]),C.push(Ha[u])):24===u?(w=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),_=Jn(t,c,h),C.push(Va[u]),C.push(Qa[u])):146===u?(w=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),_=1-Jn(a,h,c),C.push(Va[u]),C.push(Qa[u])):6===u?(x=1-Jn(t,h,f),b=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),C.push(Ha[u]),C.push(Wa[u])):164===u?(x=Jn(a,f,h),b=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),C.push(Ha[u]),C.push(Wa[u])):129===u?(v=1-Jn(t,f,d),L=Jn(a,d,c),y=1-Jn(a,h,c),_=1-Jn(t,h,c),C.push(Qa[u]),C.push(Ka[u])):41===u?(v=Jn(a,d,f),L=1-Jn(t,c,d),y=Jn(t,c,h),_=Jn(a,c,h),C.push(Qa[u]),C.push(Ka[u])):66===u?(b=1-Jn(t,f,d),v=1-Jn(a,f,d),k=1-Jn(a,c,d),y=1-Jn(t,h,c),C.push(Wa[u]),C.push(Qa[u])):104===u?(b=Jn(a,d,f),v=Jn(t,d,f),k=Jn(t,d,c),y=Jn(a,c,h),C.push(Qa[u]),C.push(Ja[u])):144===u?(w=Jn(t,f,h),L=Jn(t,d,c),k=Jn(a,d,c),_=1-Jn(a,h,c),C.push(Va[u]),C.push(Za[u])):26===u?(w=1-Jn(a,h,f),L=1-Jn(a,c,d),k=1-Jn(t,c,d),_=Jn(t,c,h),C.push(Va[u]),C.push(Za[u])):36===u?(x=Jn(a,f,h),b=Jn(t,d,f),y=Jn(t,c,h),_=Jn(a,c,h),C.push(Ha[u]),C.push(Wa[u])):134===u?(x=1-Jn(t,h,f),b=1-Jn(a,f,d),y=1-Jn(a,h,c),_=1-Jn(t,h,c),C.push(Ha[u]),C.push(Wa[u])):9===u?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),v=Jn(a,d,f),L=1-Jn(t,c,d),C.push(Va[u]),C.push(Ha[u])):161===u?(w=Jn(a,f,h),x=Jn(t,f,h),v=1-Jn(t,f,d),L=Jn(a,d,c),C.push(Va[u]),C.push(Ha[u])):37===u?(x=Jn(a,f,h),L=1-Jn(t,c,d),y=Jn(t,c,h),_=Jn(a,c,h),C.push(Ha[u]),C.push(Ka[u])):133===u?(x=1-Jn(t,h,f),L=Jn(a,d,c),y=1-Jn(a,h,c),_=1-Jn(t,h,c),C.push(Ha[u]),C.push(Ka[u])):148===u?(b=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),_=1-Jn(a,h,c),C.push(Wa[u]),C.push(Za[u])):22===u?(b=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),_=Jn(t,c,h),C.push(Wa[u]),C.push(Za[u])):82===u?(w=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),k=1-Jn(a,c,d),C.push(Va[u]),C.push(Qa[u])):88===u?(w=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),k=Jn(t,d,c),C.push(Va[u]),C.push(Qa[u])):73===u?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),v=Jn(a,d,f),y=1-Jn(t,h,c),C.push(Va[u]),C.push(Ha[u])):97===u?(w=Jn(a,f,h),x=Jn(t,f,h),v=1-Jn(t,f,d),y=Jn(a,c,h),C.push(Va[u]),C.push(Ha[u])):145===u?(w=Jn(t,f,h),v=1-Jn(t,f,d),L=Jn(a,d,c),_=1-Jn(a,h,c),C.push(Va[u]),C.push(Ka[u])):25===u?(w=1-Jn(a,h,f),v=Jn(a,d,f),L=1-Jn(t,c,d),_=Jn(t,c,h),C.push(Va[u]),C.push(Ka[u])):70===u?(x=1-Jn(t,h,f),b=1-Jn(a,f,d),k=1-Jn(a,c,d),y=1-Jn(t,h,c),C.push(Ha[u]),C.push(Wa[u])):100===u?(x=Jn(a,f,h),b=Jn(t,d,f),k=Jn(t,d,c),y=Jn(a,c,h),C.push(Ha[u]),C.push(Wa[u])):34===u?(_=0===m?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)):(w=Jn(a,f,h),x=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)),C.push(Va[u]),C.push(Ha[u]),C.push(Ka[u]),C.push(Za[u])):35===u?(_=4===m?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)):(w=Jn(a,f,h),x=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)),C.push(Va[u]),C.push(Ha[u]),C.push(Qa[u]),C.push(Za[u])):136===u?(_=0===m?(w=Jn(a,f,h),x=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)):(w=1-Jn(t,h,f),x=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)),C.push(Va[u]),C.push(Ha[u]),C.push(Ka[u]),C.push(Za[u])):153===u?(_=0===m?(w=Jn(t,f,h),v=1-Jn(t,f,d),L=1-Jn(t,c,d),Jn(t,c,h)):(w=1-Jn(a,h,f),v=Jn(a,d,f),L=Jn(a,d,c),1-Jn(a,h,c)),C.push(Va[u]),C.push(Qa[u])):102===u?(y=0===m?(x=1-Jn(t,h,f),b=Jn(t,d,f),k=Jn(t,d,c),1-Jn(t,h,c)):(x=Jn(a,f,h),b=1-Jn(a,f,d),k=1-Jn(a,c,d),Jn(a,c,h)),C.push(Ha[u]),C.push(Za[u])):155===u?(_=4===m?(w=Jn(t,f,h),v=1-Jn(t,f,d),L=1-Jn(t,c,d),Jn(t,c,h)):(w=1-Jn(a,h,f),v=Jn(a,d,f),L=Jn(a,d,c),1-Jn(a,h,c)),C.push(Va[u]),C.push(Ka[u])):103===u?(y=4===m?(x=1-Jn(t,h,f),b=Jn(t,d,f),k=Jn(t,d,c),1-Jn(t,h,c)):(x=Jn(a,f,h),b=1-Jn(a,f,d),k=1-Jn(a,c,d),Jn(a,c,h)),C.push(Ha[u]),C.push(Wa[u])):152===u?(_=0===m?(w=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),Jn(t,c,h)):(w=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),1-Jn(a,h,c)),C.push(Va[u]),C.push(Wa[u]),C.push(Qa[u])):156===u?(_=4===m?(w=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),Jn(t,c,h)):(w=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),1-Jn(a,h,c)),C.push(Va[u]),C.push(Qa[u]),C.push(Za[u])):137===u?(_=0===m?(w=Jn(a,f,h),x=Jn(t,f,h),v=1-Jn(t,f,d),L=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)):(w=1-Jn(t,h,f),x=1-Jn(a,h,f),v=Jn(a,d,f),L=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)),C.push(Va[u]),C.push(Ha[u]),C.push(Qa[u])):139===u?(_=4===m?(w=Jn(a,f,h),x=Jn(t,f,h),v=1-Jn(t,f,d),L=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)):(w=1-Jn(t,h,f),x=1-Jn(a,h,f),v=Jn(a,d,f),L=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)),C.push(Va[u]),C.push(Ha[u]),C.push(Ka[u])):98===u?(y=0===m?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),k=Jn(t,d,c),1-Jn(t,h,c)):(w=Jn(a,f,h),x=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),k=1-Jn(a,c,d),Jn(a,c,h)),C.push(Va[u]),C.push(Ha[u]),C.push(Za[u])):99===u?(y=4===m?(w=1-Jn(t,h,f),x=1-Jn(a,h,f),b=Jn(a,d,f),v=Jn(t,d,f),k=Jn(t,d,c),1-Jn(t,h,c)):(w=Jn(a,f,h),x=Jn(t,f,h),b=1-Jn(t,f,d),v=1-Jn(a,f,d),k=1-Jn(a,c,d),Jn(a,c,h)),C.push(Va[u]),C.push(Ha[u]),C.push(Qa[u])):38===u?(_=0===m?(x=1-Jn(t,h,f),b=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)):(x=Jn(a,f,h),b=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)),C.push(Ha[u]),C.push(Ka[u]),C.push(Za[u])):39===u?(_=4===m?(x=1-Jn(t,h,f),b=Jn(t,d,f),L=Jn(t,d,c),k=Jn(a,d,c),y=1-Jn(a,h,c),1-Jn(t,h,c)):(x=Jn(a,f,h),b=1-Jn(a,f,d),L=1-Jn(a,c,d),k=1-Jn(t,c,d),y=Jn(t,c,h),Jn(a,c,h)),C.push(Ha[u]),C.push(Wa[u]),C.push(Za[u])):85===u&&(y=L=v=x=0,_=k=b=w=1),(y<0||1<y||_<0||1<_||w<0||1<w||b<0||1<b||L<0||1<L||k<0||1<k)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+p+" "+c+","+h+","+f+","+d+" "+m+" "+y+" "+_+" "+w+" "+x+" "+b+" "+v+" "+L+" "+k),o.cells[s][l]={cval:u,cval_real:p,flipped:m,topleft:y,topright:_,righttop:w,rightbottom:x,bottomright:b,bottomleft:v,leftbottom:L,lefttop:k,edges:C}}}}}return o}(e,t,n);return l=la.polygons?(la.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=[],c=0,h.cells.forEach(function(e,r){e.forEach(function(e,t){if(void 0!==e){var n=Ya[e.cval](e);"object"==(void 0===n?"undefined":$d(n))&&Xn(n)?"object"==$d(n[0])&&Xn(n[0])?"object"==$d(n[0][0])&&Xn(n[0][0])?n.forEach(function(e){e.forEach(function(e){e[0]+=t,e[1]+=r}),u[c++]=e}):(n.forEach(function(e){e[0]+=t,e[1]+=r}),u[c++]=n):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),u):(la.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),function(e){for(var t=[],n=e.rows,r=e.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==e.cells[o][a]&&0<e.cells[o][a].edges.length){var s=function(e){if(0<e.edges.length){var t=e.edges[e.edges.length-1],n=e.cval_real;switch(t){case 0:return n&ca?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 1:return n&ha?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 2:return n&ha?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 3:return n&fa?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 4:return n&ca?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 5:return n&ha?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 6:return n&ha?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 7:return n&fa?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 8:return n&ha?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.righttop],x:-1,y:0,o:1};case 9:return n&fa?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 10:return n&fa?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.righttop],x:-1,y:0,o:1};case 11:return n&ua?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 12:return n&ha?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 13:return n&fa?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 14:return n&fa?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 15:return n&ua?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 16:return n&ha?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 17:return n&ua?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 18:return n&fa?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 19:return n&ua?{p:[e.bottomleft,0],x:0,y:1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 20:return n&ua?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 21:return n&ca?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.topright,1],x:0,y:-1,o:1};case 22:return n&ua?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 23:return n&ca?{p:[0,e.lefttop],x:1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e)}}return null}(e.cells[o][a]),l=null,u=a,c=o;null!==s&&i.push([s.p[0]+u,s.p[1]+c]);do{if(null===(l=function(e,t,n,r){var i,o,a,s,l,u=e.cval;switch(t){case-1:switch(r){case 0:i=Ha[u],a=xa[u],s=ka[u],l=La[u];break;default:i=Va[u],a=va[u],s=ba[u],l=wa[u]}break;case 1:switch(r){case 0:i=Ka[u],a=Na[u],s=Aa[u],l=ja[u];break;default:i=Za[u],a=Ia[u],s=Oa[u],l=Da[u]}break;default:switch(n){case-1:switch(r){case 0:i=Ja[u],a=da[u],s=pa[u],l=ma[u];break;default:i=Xa[u],a=ga[u],s=ya[u],l=_a[u]}break;case 1:switch(r){case 0:i=Qa[u],a=Ca[u],s=Sa[u],l=Ma[u];break;default:i=Wa[u],a=Pa[u],s=Ea[u],l=Ta[u]}}}if(o=e.edges.indexOf(i),void 0===e.edges[o])return null;switch(function(e,t){delete e.edges[t];for(var n=t+1;n<e.edges.length;n++)e.edges[n-1]=e.edges[n];e.edges.pop()}(e,o),u=e.cval_real,i){case 0:n=u&ca?(t=e.topleft,1):(t=1,e.righttop);break;case 1:n=u&ha?(t=1,e.rightbottom):(t=e.topleft,1);break;case 2:n=u&ha?(t=e.topleft,1):(t=e.bottomright,0);break;case 3:n=u&fa?(t=e.bottomleft,0):(t=e.topleft,1);break;case 4:n=u&ca?(t=e.topright,1):(t=1,e.righttop);break;case 5:n=u&ha?(t=1,e.rightbottom):(t=e.topright,1);break;case 6:n=u&ha?(t=e.topright,1):(t=e.bottomright,0);break;case 7:n=u&fa?(t=e.bottomleft,0):(t=e.topright,1);break;case 8:n=u&ha?(t=1,e.righttop):(t=e.bottomright,0);break;case 9:n=u&fa?(t=e.bottomleft,0):(t=1,e.righttop);break;case 10:n=u&fa?(t=1,e.righttop):(t=0,e.leftbottom);break;case 11:n=u&ua?(t=0,e.lefttop):(t=1,e.righttop);break;case 12:n=u&ha?(t=1,e.rightbottom):(t=e.bottomright,0);break;case 13:n=u&fa?(t=e.bottomleft,0):(t=1,e.rightbottom);break;case 14:n=u&fa?(t=1,e.rightbottom):(t=0,e.leftbottom);break;case 15:n=u&ua?(t=0,e.lefttop):(t=1,e.rightbottom);break;case 16:n=u&ha?(t=0,e.leftbottom):(t=e.bottomright,0);break;case 17:n=u&ua?(t=0,e.lefttop):(t=e.bottomright,0);break;case 18:n=u&fa?(t=e.bottomleft,0):(t=0,e.leftbottom);break;case 19:n=u&ua?(t=0,e.lefttop):(t=e.bottomleft,0);break;case 20:n=u&ua?(t=0,e.leftbottom):(t=e.topleft,1);break;case 21:n=u&ca?(t=e.topright,1):(t=0,e.leftbottom);break;case 22:n=u&ua?(t=0,e.lefttop):(t=e.topleft,1);break;case 23:n=u&ca?(t=e.topright,1):(t=0,e.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e),null}return void 0!==t&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(e),console.log(t+" "+n+" "+a+" "+s+" "+l)),{p:[t,n],x:a,y:s,o:l}}(e.cells[c][u],s.x,s.y,s.o)))break;if(i.push([l.p[0]+u,l.p[1]+c]),u+=l.x,(c+=(s=l).y)<0||n<=c||u<0||r<=u||void 0===e.cells[c][u]){var h=function(e,t,n,r,i,o){for(var a=e.cells[n][t],s=a.cval_real,l=t+r,u=n+i,c=[],h=!1;!h;){if(void 0===e.cells[u]||void 0===e.cells[u][l])if(u-=i,l-=r,s=(a=e.cells[u][l]).cval_real,-1===i)if(0===o)if(s&fa)c.push([l,u]),r=-1,o=i=0;else{if(!(s&ha)){c.push([l+a.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l+1,u]),r=1,o=i=0}else{if(!(s&fa)){if(s&ha){c.push([l+a.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l+a.bottomleft,u]),i=1,h=!(o=r=0);break}c.push([l,u]),r=-1,o=i=0}else if(1===i)if(0===o){if(!(s&ca)){if(s&ua){c.push([l+a.topleft,u+1]),i=-1,h=!(o=r=0);break}c.push([l+a.topright,u+1]),i=-1,o=1,h=!(r=0);break}c.push([l+1,u+1]),i=0,o=r=1}else c.push([l+1,u+1]),i=0,o=r=1;else if(-1===r)if(0===o){if(!(s&ua)){if(s&fa){c.push([l,u+a.leftbottom]),r=1,h=!(o=i=0);break}c.push([l,u+a.lefttop]),o=r=1,h=!(i=0);break}c.push([l,u+1]),i=1,o=r=0}else{if(!(s&ua)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),i=1,o=r=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&ha)){c.push([l+1,u+a.rightbottom]),r=-1,h=!(o=i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}else{if(!(s&ha)){if(s&ca){c.push([l+1,u+a.righttop]),r=-1,i=0,o=1;break}c.push([l+1,u+a.rightbottom]),r=-1,h=!(o=i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}}else if(s=(a=e.cells[u][l]).cval_real,-1===r)if(0===o)if(void 0!==e.cells[u-1]&&void 0!==e.cells[u-1][l])r=0,i=-1,o=1;else{if(!(s&fa)){c.push([l+a.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l,u])}else{if(!(s&ua)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==e.cells[u+1]&&void 0!==e.cells[u+1][l])i=1,o=r=0;else{if(!(s&ca)){c.push([l+a.topleft,u+1]),i=-1,h=!(o=r=0);break}c.push([l+1,u+1]),i=0,o=r=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==e.cells[u][l+1])i=0,o=r=1;else{if(!(s&ha)){c.push([l+1,u+a.righttop]),r=-1,o=1,h=!(i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==e.cells[u][l-1])r=-1,o=i=0;else{if(!(s&ua)){c.push([l,u+a.leftbottom]),r=1,h=!(o=i=0);break}c.push([l,u+1]),i=1,o=r=0}}if(u+=i,(l+=r)===t&&u===n)break}return{path:c,i:l,j:u,x:r,y:i,o:o}}(e,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach(function(e){i.push(e)}),u=h.i,c=h.j,s=h}}while(void 0!==e.cells[c][u]&&0<e.cells[c][u].edges.length);t.push(i),i=[],0<e.cells[o][a].edges.length&&a--}return t}(h)),"function"==typeof la.successCallback&&la.successCallback(l),l}function Jn(e,t,n){return(e-t)/(n-t)}function Xn(e){return-1<e.constructor.toString().indexOf("Array")}function Yn(e,i,t){if(!V(t=t||{}))throw new Error("options is invalid");var o=t.pivot,n=t.mutate;if(!e)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");return 0===i||(o||(o=st(e)),!1!==n&&void 0!==n||(e=je(e)),x(e,function(e){var t=Wt(o,e)+i,n=Kt(o,e),r=A(Gn(o,n,t));e[0]=r[0],e[1]=r[1]})),e}function er(n,r,e){if(!V(e=e||{}))throw new Error("options is invalid");var i=e.origin,t=e.mutate;if(!n)throw new Error("geojson required");if("number"!=typeof r||0===r)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==(void 0===i?"undefined":$d(i));return!0!==t&&(n=je(n)),"FeatureCollection"!==n.type||o?tr(n,r,i):(L(n,function(e,t){n.features[t]=tr(e,r,i)}),n)}function tr(e,i,o){var t="Point"===J(e);return o=function(e,t){if(null!=t||(t="centroid"),Array.isArray(t)||"object"==(void 0===t?"undefined":$d(t)))return W(t);var n=e.bbox?e.bbox:H(e),r=n[0],i=n[1],o=n[2],a=n[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return z([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return z([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return z([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return z([o,a]);case"center":return at(e);case void 0:case null:case"centroid":return st(e);default:throw new Error("invalid origin")}}(e,o),1===i||t||x(e,function(e){var t=Kt(o,e),n=Wt(o,e),r=A(Gn(o,t*i,n));e[0]=r[0],e[1]=r[1],3===e.length&&(e[2]*=i)}),e}function nr(e){var t=e[0],n=e[1];return[n[0]-t[0],n[1]-t[1]]}function rr(e,t){return e[0]*t[1]-t[0]*e[1]}function ir(e,t,n){var M=[],P=l(t,n),E=A(e),T=[];return E.forEach(function(e,t){if(t!==E.length-1){var n=(w=e,x=E[t+1],k=P,L=Math.sqrt((w[0]-x[0])*(w[0]-x[0])+(w[1]-x[1])*(w[1]-x[1])),C=w[0]+k*(x[1]-w[1])/L,S=x[0]+k*(x[1]-w[1])/L,[[C,w[1]+k*(w[0]-x[0])/L],[S,x[1]+k*(w[0]-x[0])/L]]);if(M.push(n),0<t){var r=M[t-1],i=(b=a=r,!(0===rr(nr(o=n),nr(b)))&&(l=a,m=(s=o)[0],g=nr(s),y=l[0],_=nr(l),v=rr(g,_),h=rr((p=u=m,[(d=y)[0]-p[0],d[1]-p[1]]),_)/v,c=[h*(f=g)[0],h*f[1]],[u[0]+c[0],u[1]+c[1]]));!1!==i&&(r[1]=i,n[0]=i),T.push(r[0]),t===E.length-2&&(T.push(n[0]),T.push(n[1]))}2===E.length&&(T.push(n[0]),T.push(n[1]))}var o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S}),U(T,e.properties)}function or(e,t,n){var r=t[0]-e[0],i=t[1]-e[1],o=n[0]-t[0],a=n[1]-t[1];return Math.sign(r*a-o*i)}function ar(t,e){return e.geometry.coordinates[0].every(function(e){return Pe(z(e),t)})}function sr(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(r=e.coordinates[n],i=e.coordinates[n+1],o=t.coordinates,void 0,a=o[0]-r[0],s=o[1]-r[1],l=i[0]-r[0],u=i[1]-r[1],a*u-s*l==0&&(Math.abs(l)>=Math.abs(u)?0<l?r[0]<=o[0]&&o[0]<=i[0]:i[0]<=o[0]&&o[0]<=r[0]:0<u?r[1]<=o[1]&&o[1]<=i[1]:i[1]<=o[1]&&o[1]<=r[1]))return!0;var r,i,o,a,s,l,u;return!1}function lr(e,t){return 0<$t(t,Mn(e)).features.length}function ur(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function cr(e,t){return e[0]===t[0]&&e[1]===t[1]}function hr(e,t){for(var n=!1,r=!1,i=e.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<t.coordinates.length-1;a++){var s=!0;0!==a&&a!==t.coordinates.length-2||(s=!1),pr(t.coordinates[a],t.coordinates[a+1],e.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function fr(e,t){return 0<$t(e,Mn(t)).features.length}function dr(e,t){for(var n=!1,r=!1,i=e.coordinates[0].length,o=0;o<i&&n&&r;)Pe(z(e.coordinates[0][o]),t)?n=!0:r=!0,o++;return r&&r}function pr(e,t,n,r){var i=n[0]-e[0],o=n[1]-e[1],a=t[0]-e[0],s=t[1]-e[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?0<a?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:0<s?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]:Math.abs(a)>=Math.abs(s)?0<a?e[0]<n[0]&&n[0]<t[0]:t[0]<n[0]&&n[0]<e[0]:0<s?e[1]<n[1]&&n[1]<t[1]:t[1]<n[1]&&n[1]<e[1])}function mr(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function gr(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}function yr(e,t){return ss(e,t,{strict:!0})}function _r(e,n){if(!e)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");var t=J(e);if(t!==J(n))throw new Error("features must be of the same type");if("Point"===t)throw new Error("Point geometry not supported");if(new us({precision:6}).compare(e,n))return!1;var r=0;switch(t){case"MultiPoint":var i=S(e),o=S(n);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":I(e,function(t){I(n,function(e){zn(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":I(e,function(t){I(n,function(e){$t(t,e).features.length&&r++})})}return 0<r}function vr(e,t,n){n=n||[];for(var r=0;r<e;r++)n[r]=t;return n}function br(e,t){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+t)}function wr(e){for(var t=e,n=[];t.parent;)n.unshift(t),t=t.parent;return n}function xr(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var n=0;n<e.length;n++){this.grid[n]=[];for(var r=0,i=e[n];r<i.length;r++){var o=new kr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function kr(e,t,n){this.x=e,this.y=t,this.weight=n}function Lr(e){this.content=[],this.scoreFunction=e}function Cr(e){return e[0]}function Sr(e){return e[1]}function Mr(){this._=null}function Pr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Er(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Tr(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ir(e){for(;e.L;)e=e.L;return e}function Or(e,t,n,r){var i=[null,null],o=Ss.push(i)-1;return i.left=e,i.right=t,n&&Nr(i,e,t,n),r&&Nr(i,t,e,r),Ls[e.index].halfedges.push(o),Ls[t.index].halfedges.push(o),i}function Dr(e,t,n){var r=[t,n];return r.left=e,r}function Nr(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Ar(e,t,n,r,i){var o,a=e[0],s=e[1],l=a[0],u=a[1],c=0,h=1,f=s[0]-l,d=s[1]-u;if(o=t-l,f||!(0<o)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(0<f){if(h<o)return;c<o&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(h<o)return;c<o&&(c=o)}else if(0<f){if(o<c)return;o<h&&(h=o)}if(o=n-u,d||!(0<o)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(0<d){if(h<o)return;c<o&&(c=o)}if(o=i-u,d||!(o<0)){if(o/=d,d<0){if(h<o)return;c<o&&(c=o)}else if(0<d){if(o<c)return;o<h&&(h=o)}return!(0<c||h<1)||(0<c&&(e[0]=[l+c*f,u+c*d]),h<1&&(e[1]=[l+h*f,u+h*d]),!0)}}}}}function jr(e,t,n,r,i){var o=e[1];if(o)return!0;var a,s,l=e[0],u=e.left,c=e.right,h=u[0],f=u[1],d=c[0],p=c[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<t||r<=m)return;if(d<h){if(l){if(l[1]>=i)return}else l=[m,n];o=[m,i]}else{if(l){if(l[1]<n)return}else l=[m,i];o=[m,n]}}else if(s=g-(a=(h-d)/(p-f))*m,a<-1||1<a)if(d<h){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<p){if(l){if(l[0]>=r)return}else l=[t,a*t+s];o=[r,a*r+s]}else{if(l){if(l[0]<t)return}else l=[r,a*r+s];o=[t,a*t+s]}return e[0]=l,e[1]=o,!0}function Rr(e,t){return t[+(t.left!==e.site)]}function Br(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(l*h-u*c);if(!(-Ts<=f)){var d=l*l+u*u,p=c*c+h*h,m=(h*d-u*p)/f,g=(l*p-c*d)/f,y=Ms.pop()||new function(){Pr(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=e,y.site=i,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),e.circle=y;for(var _=null,v=Cs._;v;)if(y.y<v.y||y.y===v.y&&y.x<=v.x){if(!v.L){_=v.P;break}v=v.L}else{if(!v.R){_=v;break}v=v.R}Cs.insert(_,y),_||(xs=y)}}}}function Fr(e){var t=e.circle;t&&(t.P||(xs=t.N),Cs.remove(t),Ms.push(t),Pr(t),e.circle=null)}function zr(e){var t=Ps.pop()||new function(){Pr(this),this.edge=this.site=this.circle=null};return t.site=e,t}function qr(e){Fr(e),ks.remove(e),Ps.push(e),Pr(e)}function Ur(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],o=e.P,a=e.N,s=[e];qr(e);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Es&&Math.abs(r-l.circle.cy)<Es;)o=l.P,s.unshift(l),qr(l),l=o;s.unshift(l),Fr(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Es&&Math.abs(r-u.circle.cy)<Es;)a=u.N,s.push(u),qr(u),u=a;s.push(u),Fr(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Nr(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=Or(l.site,u.site,null,i),Br(l),Br(u)}function Gr(e){for(var t,n,r,i,o=e[0],a=e[1],s=ks._;s;)if((r=$r(s,a)-o)>Es)s=s.L;else{if(!((i=o-function(e,t){var n=e.N;if(n)return $r(n,t);var r=e.site;return r[1]===t?r[0]:1/0}(s,a))>Es)){-Es<r?(t=s.P,n=s):-Es<i?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l;Ls[(l=e).index]={site:l,halfedges:[]};var u=zr(e);if(ks.insert(t,u),t||n){if(t===n)return Fr(t),n=zr(t.site),ks.insert(u,n),u.edge=n.edge=Or(t.site,u.site),Br(t),void Br(n);if(n){Fr(t),Fr(n);var c=t.site,h=c[0],f=c[1],d=e[0]-h,p=e[1]-f,m=n.site,g=m[0]-h,y=m[1]-f,_=2*(d*y-p*g),v=d*d+p*p,b=g*g+y*y,w=[(y*v-p*b)/_+h,(d*b-g*v)/_+f];Nr(n.edge,c,m,w),u.edge=Or(c,e,null,w),n.edge=Or(e,m,null,w),Br(t),Br(n)}else u.edge=Or(t.site,u.site)}}function $r(e,t){var n=e.site,r=n[0],i=n[1],o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-t;if(!u)return s;var c=s-r,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function Vr(e,t){return t[1]-e[1]||t[0]-e[0]}function Hr(e,t){var n,r,i,o=e.sort(Vr).pop();for(Ss=[],Ls=new Array(e.length),ks=new Mr,Cs=new Mr;;)if(i=xs,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Gr(o),n=o[0],r=o[1]),o=e.pop();else{if(!i)break;Ur(i.arc)}if(function(){for(var e,t,n,r,i=0,o=Ls.length;i<o;++i)if((e=Ls[i])&&(r=(t=e.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=(l=e,u=Ss[t[n]],f=h=void 0,c=l.site,h=u.left,f=u.right,c===f&&(f=h,h=c),f?Math.atan2(f[1]-h[1],f[0]-h[0]):(f=c===h?(h=u[1],u[0]):(h=u[0],u[1]),Math.atan2(h[0]-f[0],f[1]-h[1])));for(a.sort(function(e,t){return s[t]-s[e]}),n=0;n<r;++n)s[n]=t[a[n]];for(n=0;n<r;++n)t[n]=s[n]}var l,u,c,h,f}(),t){var a=+t[0][0],s=+t[0][1],l=+t[1][0],u=+t[1][1];!function(e,t,n,r){for(var i,o=Ss.length;o--;)jr(i=Ss[o],e,t,n,r)&&Ar(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>Es||Math.abs(i[0][1]-i[1][1])>Es)||delete Ss[o]}(a,s,l,u),function(e,t,n,r){var i,o,a,s,l,u,c,h,f,d,p,m,g,y,_=Ls.length,v=!0;for(i=0;i<_;++i)if(o=Ls[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)Ss[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(g=o,y=Ss[l[s]],d=y[+(y.left===g.site)])[0],m=d[1],h=(c=Rr(o,Ss[l[++s%u]]))[0],f=c[1],(Math.abs(p-h)>Es||Math.abs(m-f)>Es)&&(l.splice(s,0,Ss.push(Dr(a,d,Math.abs(p-e)<Es&&Es<r-m?[e,Math.abs(h-e)<Es?f:r]:Math.abs(m-r)<Es&&Es<n-p?[Math.abs(f-r)<Es?h:n,r]:Math.abs(p-n)<Es&&Es<m-t?[n,Math.abs(h-n)<Es?f:t]:Math.abs(m-t)<Es&&Es<p-e?[Math.abs(f-t)<Es?h:e,t]:null))-1),++u);u&&(v=!1)}if(v){var b,w,x,k=1/0;for(i=0,v=null;i<_;++i)(o=Ls[i])&&(x=(b=(a=o.site)[0]-e)*b+(w=a[1]-t)*w)<k&&(k=x,v=o);if(v){var L=[e,t],C=[e,r],S=[n,r],M=[n,t];v.halfedges.push(Ss.push(Dr(a=v.site,L,C))-1,Ss.push(Dr(a,C,S))-1,Ss.push(Dr(a,S,M))-1,Ss.push(Dr(a,M,L))-1)}}for(i=0;i<_;++i)(o=Ls[i])&&(o.halfedges.length||delete Ls[i])}(a,s,l,u)}this.edges=Ss,this.cells=Ls,ks=Cs=Ss=Ls=null}function Wr(e){return(e=e.slice()).push(e[0]),q([e])}function Qr(e,t,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||e,l=r.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!V(r))throw new Error("options must be an object");if(!$(i))throw new Error("steps must be a number");if(!$(a))throw new Error("angle must be a number");var u=W(e);if("degrees"===o)var c=_(a);else t=Gn(e,t,90,{units:o}),n=Gn(e,n,0,{units:o}),t=W(t)[0]-u[0],n=W(n)[1]-u[1];for(var h=[],f=0;f<i;f+=1){var d=-360*f/i,p=t*n/Math.sqrt(Math.pow(n,2)+Math.pow(t,2)*Math.pow(Kr(d),2)),m=t*n/Math.sqrt(Math.pow(t,2)+Math.pow(n,2)/Math.pow(Kr(d),2));if(d<-90&&-270<=d&&(p=-p),d<-180&&-360<=d&&(m=-m),"degrees"===o){var g=p*Math.cos(c)+m*Math.sin(c),y=m*Math.cos(c)-p*Math.sin(c);p=g,m=y}h.push([p+u[0],m+u[1]])}return h.push(h[0]),"degrees"===o?q([h],l):Yn(q([h],l),a,{pivot:s})}function Kr(e){var t=e*Math.PI/180;return Math.tan(t)}function Zr(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.properties,i=t.weight;if(!e)throw new Error("geojson is required");var o=0,a=0,s=0;return M(e,function(e,t,n){var r=n[i];if(!$(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+t);0<(r=Number(r))&&x(e,function(e){o+=e[0]*r,a+=e[1]*r,s+=r})}),z([o/s,a/s],n)}function Jr(e,t){return{x:e[0]-t[0],y:e[1]-t[1]}}function Xr(e){if(V(e)&&(e=e.bbox),e&&!Array.isArray(e))throw new Error("bbox is invalid");return e?(t=e,[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]):[360*ni(),180*ni()];var t}function Yr(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.bbox;null!=e||(e=1);for(var r=[],i=0;i<e;i++)r.push(z(Xr(n)));return G(r)}function ei(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.bbox,r=t.num_vertices,i=t.max_radial_length;null!=e||(e=1),$(r)||(r=10),$(i)||(i=10);for(var o=[],a=0;a<e;a++){var s=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach(function(e,t,n){n[t]=0<t?e+n[t-1]:e}),l.forEach(function(e){e=2*e*Math.PI/l[l.length-1];var t=Math.random();s.push([t*i*Math.sin(e),t*i*Math.cos(e)])}),s[s.length-1]=s[0],s=s.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(Xr(n))),o.push(q([s]))}return G(o)}function ti(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.bbox,r=t.num_vertices,i=t.max_length,o=t.max_rotation;null!=e||(e=1),(!$(r)||r<2)&&(r=10),$(i)||(i=1e-4),$(o)||(o=Math.PI/8);for(var a=[],s=0;s<e;s++){for(var l=[Xr(n)],u=0;u<r-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;l.push([l[u][0]+h*Math.cos(c),l[u][1]+h*Math.sin(c)])}a.push(U(l))}return G(a)}function ni(){return Math.random()-.5}function ri(e,t){if(!e)throw new Error("geojson is required");if("FeatureCollection"!==e.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("filter is required");var n=[];return L(e,function(e){si(e.properties,t)&&n.push(e)}),G(n)}function ii(e,t,n){if(!e)throw new Error("geojson is required");if("FeatureCollection"!==e.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("property is required");for(var r=ai(e,t),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],l=[],u=0;u<s.length;u++)l.push(e.features[s[u]]);n(G(l),a,o)}}function oi(e,t,r,i){var o=i;return ii(e,t,function(e,t,n){o=0===n&&void 0===i?e:r(o,e,t,n)}),o}function ai(e,i){var o={};return L(e,function(e,t){var n=e.properties||{};if(n.hasOwnProperty(i)){var r=n[i];o.hasOwnProperty(r)?o[r].push(t):o[r]=[t]}}),o}function si(e,t){if(void 0===e)return!1;var n=void 0===t?"undefined":$d(t);if("number"===n||"string"===n)return e.hasOwnProperty(t);if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(!si(e,t[r]))return!1;return!0}return li(e,t)}function li(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}function ui(e,t){if(!t)return{};if(!t.length)return{};for(var n={},r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(n[i]=e[i])}return n}function ci(){}function hi(e){this.message=e||""}function fi(e){this.message=e||""}function di(){}function pi(e){return null===e?Jl:e.color}function mi(e){return null===e?null:e.parent}function gi(e,t){null!==e&&(e.color=t)}function yi(e){return null===e?null:e.left}function _i(e){return null===e?null:e.right}function vi(){this.root_=null,this.size_=0}function bi(){}function wi(){this.array_=[],arguments[0]instanceof jl&&this.addAll(arguments[0])}function xi(){}function ki(e){this.message=e||""}function Li(){this.array_=[]}function Ci(e){switch(e.type){case"Polygon":return 1<an(e)?e:null;case"MultiPolygon":var t=[];if(E(e,function(e){1<an(e)&&t.push(e.geometry.coordinates)}),t.length)return{type:"MultiPolygon",coordinates:t}}}function Si(){this.reset()}function Mi(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function Pi(e){return 1<e?rd:e<-1?-rd:Math.asin(e)}function Ei(){}function Ti(e,t){e&&_d.hasOwnProperty(e.type)&&_d[e.type](e,t)}function Ii(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Oi(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Ii(e[n],t,1);t.polygonEnd()}function Di(e){return[cd(e[1],e[0]),Pi(e[2])]}function Ni(e){var t=e[0],n=e[1],r=hd(n);return[r*hd(t),r*pd(t),pd(n)]}function Ai(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ji(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ri(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Bi(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Fi(e){var t=md(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function zi(e,t){return[nd<e?e-od:e<-nd?e+od:e,t]}function qi(e,t,n){return(e%=od)?t||n?bd(Gi(e),$i(t,n)):Gi(e):t||n?$i(t,n):zi}function Ui(n){return function(e,t){return[nd<(e+=n)?e-od:e<-nd?e+od:e,t]}}function Gi(e){var t=Ui(e);return t.invert=Ui(-e),t}function $i(e,t){function n(e,t){var n=hd(t),r=hd(e)*n,i=pd(e)*n,o=pd(t),a=o*s+r*l;return[cd(i*u-a*c,r*s-o*l),Pi(a*u+i*c)]}var s=hd(e),l=pd(e),u=hd(t),c=pd(t);return n.invert=function(e,t){var n=hd(t),r=hd(e)*n,i=pd(e)*n,o=pd(t),a=o*u-i*c;return[cd(i*u+o*c,r*s+a*l),Pi(a*s-r*l)]},n}function Vi(e,t){(t=Ni(t))[0]-=e,Fi(t);var n,r=1<(n=-t[1])?0:n<-1?nd:Math.acos(n);return((-t[2]<0?-r:r)+od-td)%od}function Hi(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Wi(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Qi(e){return 1<e.length}function Ki(e,t){return((e=e.x)[0]<0?e[1]-rd-td:rd-e[1])-((t=t.x)[0]<0?t[1]-rd-td:rd-t[1])}function Zi(r){return function(e){var t=new Ji;for(var n in r)t[n]=r[n];return t.stream=e,t}}function Ji(){}function Xi(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),vd(n,e.stream(Rd));var a=Rd.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),l=+t[0][0]+(r-s*(a[1][0]+a[0][0]))/2,u=+t[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([l,u])}function Yi(E){return function(e){function n(e){return[(e=u(e[0]*sd,e[1]*sd))[0]*m+a,s-e[1]*m]}function t(e,t){return[(e=o(e,t))[0]*m+a,s-e[1]*m]}function r(){u=bd(l=qi(b,w,x),o);var e=o(_,v);return a=g-e[0]*m,s=y+e[1]*m,i()}function i(){return d=p=null,n}var o,a,s,l,u,c,h,f,d,p,m=150,g=480,y=250,_=0,v=0,b=0,w=0,x=0,k=null,L=Fd,C=null,S=Od,M=.5,P=qd(t,M);return n.stream=function(e){return d&&p===e?d:d=Ud(L(l,P(S(p=e))))},n.clipAngle=function(e){return arguments.length?(L=+e?function(i,o){function d(e,t){return hd(e)*hd(t)>S}function p(e,t,n){var r=[1,0,0],i=ji(Ni(e),Ni(t)),o=Ai(i,i),a=i[0],s=o-a*a;if(!s)return!n&&e;var l=S*o/s,u=-S*a/s,c=ji(r,i),h=Bi(r,l);Ri(h,Bi(i,u));var f=c,d=Ai(h,f),p=Ai(f,f),m=d*d-p*(Ai(h,h)-1);if(!(m<0)){var g=md(m),y=Bi(f,(-d-g)/p);if(Ri(y,h),y=Di(y),!n)return y;var _,v=e[0],b=t[0],w=e[1],x=t[1];b<v&&(_=v,v=b,b=_);var k=b-v,L=ld(k-nd)<td;if(!L&&x<w&&(_=w,w=x,x=_),L||k<td?L?0<w+x^y[1]<(ld(y[0]-v)<td?w:x):w<=y[1]&&y[1]<=x:nd<k^(v<=y[0]&&y[0]<=b)){var C=Bi(f,(-d+g)/p);return Ri(C,h),[y,Di(C)]}}}function m(e,t){var n=g?i:nd-i,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}var S=hd(i),g=0<S,y=ld(S)>td;return Bd(d,function(s){var l,u,c,h,f;return{lineStart:function(){h=c=!1,f=1},point:function(e,t){var n,r=[e,t],i=d(e,t),o=g?i?0:m(e,t):i?m(e+(e<0?nd:-nd),t):0;if(!l&&(h=c=i)&&s.lineStart(),i!==c&&(!(n=p(l,r))||Cd(l,n)||Cd(r,n))&&(r[0]+=td,r[1]+=td,i=d(r[0],r[1])),i!==c)f=0,i?(s.lineStart(),n=p(r,l),s.point(n[0],n[1])):(n=p(l,r),s.point(n[0],n[1]),s.lineEnd()),l=n;else if(y&&l&&g^i){var a;o&u||!(a=p(r,l,!0))||(f=0,g?(s.lineStart(),s.point(a[0][0],a[0][1]),s.point(a[1][0],a[1][1]),s.lineEnd()):(s.point(a[1][0],a[1][1]),s.lineEnd(),s.lineStart(),s.point(a[0][0],a[0][1])))}!i||l&&Cd(l,r)||s.point(r[0],r[1]),l=r,c=i,u=o},lineEnd:function(){c&&s.lineEnd(),l=null},clean:function(){return f|(h&&c)<<1}}},function(e,t,n,r){!function(e,t,n,r,i,o){if(n){var a=hd(t),s=pd(t),l=r*n;null==i?(i=t+r*od,o=t-l/2):(i=Vi(a,i),o=Vi(a,o),(0<r?i<o:o<i)&&(i+=r*od));for(var u,c=i;0<r?o<c:c<o;c-=l)u=Di([a,-s*hd(c),-s*pd(c)]),e.point(u[0],u[1])}}(r,i,o,n,e,t)},g?[0,-i]:[-nd,i-nd])}(k=e*sd,6*sd):(k=null,Fd),i()):k*ad},n.clipExtent=function(e){return arguments.length?(S=null==e?(C=c=h=f=null,Od):function(y,_,v,b){function w(e,t){return y<=e&&e<=v&&_<=t&&t<=b}function x(e,t,n,r){var i=0,o=0;if(null==e||(i=a(e,n))!==(o=a(t,n))||s(e,t)<0^0<n)for(;r.point(0===i||3===i?y:v,1<i?b:_),(i=(i+n+4)%4)!==o;);else r.point(t[0],t[1])}function a(e,t){return ld(e[0]-y)<td?0<t?0:3:ld(e[0]-v)<td?0<t?2:1:ld(e[1]-_)<td?0<t?1:0:0<t?3:2}function k(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(r){function e(e,t){w(e,t)&&m.point(e,t)}function t(e,t){var n=w(e,t);if(h&&o.push([e,t]),d)a=e,s=t,d=!1,(l=n)&&(m.lineStart(),m.point(e,t));else if(n&&f)m.point(e,t);else{var r=[u=Math.max(Td,Math.min(Ed,u)),c=Math.max(Td,Math.min(Ed,c))],i=[e=Math.max(Td,Math.min(Ed,e)),t=Math.max(Td,Math.min(Ed,t))];Ld(r,i,y,_,v,b)?(f||(m.lineStart(),m.point(r[0],r[1])),m.point(i[0],i[1]),n||m.lineEnd(),p=!1):n&&(m.lineStart(),m.point(e,t),p=!1)}u=e,c=t,f=n}var i,h,o,a,s,l,u,c,f,d,p,m=r,n=kd(),g={point:e,lineStart:function(){g.point=t,h&&h.push(o=[]),f=!(d=!0),u=c=NaN},lineEnd:function(){i&&(t(a,s),l&&f&&n.rejoin(),i.push(n.result())),g.point=e,f&&m.lineEnd()},polygonStart:function(){m=n,i=[],h=[],p=!0},polygonEnd:function(){var e=function(){for(var e=0,t=0,n=h.length;t<n;++t)for(var r,i,o=h[t],a=1,s=o.length,l=o[0],u=l[0],c=l[1];a<s;++a)r=u,i=c,u=(l=o[a])[0],c=l[1],i<=b?b<c&&(c-i)*(y-r)<(u-r)*(b-i)&&++e:c<=b&&(u-r)*(b-i)<(c-i)*(y-r)&&--e;return e}(),t=p&&e,n=(i=Pd(i)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),x(null,null,1,r),r.lineEnd()),n&&Sd(i,k,e,x,r),r.polygonEnd()),m=r,i=h=o=null}};return g}}(C=+e[0][0],c=+e[0][1],h=+e[1][0],f=+e[1][1]),i()):null==C?null:[[C,c],[h,f]]},n.scale=function(e){return arguments.length?(m=+e,r()):m},n.translate=function(e){return arguments.length?(g=+e[0],y=+e[1],r()):[g,y]},n.center=function(e){return arguments.length?(_=e[0]%360*sd,v=e[1]%360*sd,r()):[_*ad,v*ad]},n.rotate=function(e){return arguments.length?(b=e[0]%360*sd,w=e[1]%360*sd,x=2<e.length?e[2]%360*sd:0,r()):[b*ad,w*ad,x*ad]},n.precision=function(e){return arguments.length?(P=qd(t,M=e*e),i()):md(M)},n.fitExtent=function(e,t){return Xi(n,e,t)},n.fitSize=function(e,t){return Xi(n,[[0,0],e],t)},function(){return o=function(){return E}.apply(this,arguments),n.invert=o.invert&&function(e){return(e=u.invert((e[0]-a)/m,(s-e[1])/m))&&[e[0]*ad,e[1]*ad]},r()}}()()}function eo(e,t){return[e,dd(gd((rd+t)/2))]}function to(e,t){return[dd(gd((rd+t)/2)),-e]}function no(e,n,r,i){var t=e.properties||{},o="Feature"===e.type?e.geometry:e;if("GeometryCollection"===o.type){var a=[];return M(e,function(e){var t=no(e,n,r,i);t&&a.push(t)}),G(a)}var s,l=H(e),u=50<l[1]&&50<l[3];s=u?{type:o.type,coordinates:function t(e,n){return"object"!=$d(e[0])?n(e):e.map(function(e){return t(e,n)})}(o.coordinates,ro(o))}:Zt(o);var c,h=(new zu).read(s),f=p(m(n,r),"meters"),d=Ih.bufferOp(h,f);if(!function e(t){return Array.isArray(t[0])?e(t[0]):isNaN(t[0])}((d=(new qu).write(d)).coordinates))return(c=u?{type:d.type,coordinates:function t(e,n){return"object"!=$d(e[0])?n.invert(e):e.map(function(e){return t(e,n)})}(d.coordinates,ro(o))}:Jt(d)).geometry?c:F(c,t)}function ro(e){var t=at(e).geometry.coordinates.reverse(),n=t.map(function(e){return-e});return Gd().center(t).rotate(n).scale(ho)}function io(){for(var e=new zu,t=e.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)t=Xf.union(t,e.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:t=(new qu).write(t),properties:arguments[0].properties}}function oo(e,t){var n=K(e),r=K(t);if(We(yn(r,{precision:4})).coordinates[0].length<4)return null;if(We(yn(n,{precision:4})).coordinates[0].length<4)return null;var i=new zu,o=i.read(yn(n)),a=i.read(yn(r)),s=Gf.intersection(o,a);return s.isEmpty()?null:F((new qu).write(s))}function ao(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,o=n.mask;if(null==t)throw new Error("cellSide is required");if(!$(t))throw new Error("cellSide is invalid");if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be array");if(4!==e.length)throw new Error("bbox must contain 4 numbers");if(o&&-1===["Polygon","MultiPolygon"].indexOf(J(o)))throw new Error("options.mask must be a (Multi)Polygon");var a=e[0],s=e[1],l=e[2],u=e[3],c=(s+u)/2,h=(a+l)/2,f=2*t/Ae([a,c],[l,c],n)*(l-a),d=2*t/Ae([h,s],[h,u],n)*(u-s),p=f/2,m=2*p,g=Math.sqrt(3)/2*d,y=l-a,_=u-s,v=.75*m,b=g,w=(y-m)/(m-p/2),x=Math.floor(w),k=(x*v-p/2-y)/2-p/2+v/2,L=Math.floor((_-g)/g),C=(_-L*g)/2,S=g/2<L*g-_;S&&(C-=g/4);for(var M=[],P=[],E=0;E<6;E++){var T=2*Math.PI/6*E;M.push(Math.cos(T)),P.push(Math.sin(T))}for(var I=[],O=0;O<=x;O++)for(var D=0;D<=L;D++){var N=O%2==1;if(!(0===D&&N||0===D&&S)){var A=O*v+a-k,j=D*b+s+C;if(N&&(j-=g/2),!0===i)(function(e,t,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=[];l.push(e),l.push([e[0]+t*i[s],e[1]+n*o[s]]),l.push([e[0]+t*i[(s+1)%6],e[1]+n*o[(s+1)%6]]),l.push(e),a.push(q([l],r))}return a})([A,j],f/2,d/2,r,M,P).forEach(function(e){o?oo(o,e)&&I.push(e):I.push(e)});else{var R=function(e,t,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=e[0]+t*i[s],u=e[1]+n*o[s];a.push([l,u])}return a.push(a[0].slice()),q([a],r)}([A,j],f/2,d/2,r,M,P);o?oo(o,R)&&I.push(R):I.push(R)}}}return G(I)}function so(e){if(e.features.length<=1)return e;var t,n,r,o=(t=e,n=xo(),r=[],E(t,function(e,t){var n=H(e);r.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],geojson:e,index:t})}),n.load(r),n),a=[],s={};return E(e,function(e,t){if(s[t])return!0;for(o.remove({index:t},lo),s[t]=!0;;){var n=H(e),r=o.search({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]});if(0<r.length){var i=r.map(function(e){return s[e.index]=!0,o.remove({index:e.index},lo),e.geojson});i.push(e),e=io.apply(this,i)}if(0===r.length)break}a.push(e)}),G(a)}function lo(e,t){return e.index===t.index}function uo(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==t)throw new Error("cellSide is required");if(!$(t))throw new Error("cellSide is invalid");if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be array");if(4!==e.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e[0],s=e[1],l=e[2],u=e[3],c=t/Ae([a,s],[l,s],n)*(l-a),h=t/Ae([a,s],[a,u],n)*(u-s),f=l-a,d=u-s,p=Math.floor(f/c),m=Math.floor(d/h),g=(d-m*h)/2,y=a+(f-p*c)/2,_=0;_<p;_++){for(var v=s+g,b=0;b<m;b++){var w=q([[[y,v],[y,v+h],[y+c,v+h],[y+c,v],[y,v]]],r);i?oo(i,w)&&o.push(w):o.push(w),v+=h}y+=c}return G(o)}function co(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==t)throw new Error("cellSide is required");if(!$(t))throw new Error("cellSide is invalid");if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be array");if(4!==e.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t/Ae([e[0],e[1]],[e[2],e[1]],n)*(e[2]-e[0]),s=t/Ae([e[0],e[1]],[e[0],e[3]],n)*(e[3]-e[1]),l=0,u=e[0];u<=e[2];){for(var c=0,h=e[1];h<=e[3];){var f=null,d=null;l%2==0&&c%2==0?(f=q([[[u,h],[u,h+s],[u+a,h],[u,h]]],r),d=q([[[u,h+s],[u+a,h+s],[u+a,h],[u,h+s]]],r)):l%2==0&&c%2==1?(f=q([[[u,h],[u+a,h+s],[u+a,h],[u,h]]],r),d=q([[[u,h],[u,h+s],[u+a,h+s],[u,h]]],r)):c%2==0&&l%2==1?(f=q([[[u,h],[u,h+s],[u+a,h+s],[u,h]]],r),d=q([[[u,h],[u+a,h+s],[u+a,h],[u,h]]],r)):c%2==1&&l%2==1&&(f=q([[[u,h],[u,h+s],[u+a,h],[u,h]]],r),d=q([[[u,h+s],[u+a,h+s],[u+a,h],[u,h+s]]],r)),i?(oo(i,f)&&o.push(f),oo(i,d)&&o.push(d)):(o.push(f),o.push(d)),h+=s,c++}l++,u+=a}return G(o)}var ho=6371008.8,fo={meters:ho,metres:ho,millimeters:1e3*ho,millimetres:1e3*ho,centimeters:100*ho,centimetres:100*ho,kilometers:ho/1e3,kilometres:ho/1e3,miles:ho/1609.344,nauticalmiles:ho/1852,inches:39.37*ho,yards:ho/1.0936,feet:3.28084*ho,radians:1,degrees:ho/111325},po={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/ho,degrees:1/111325},mo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},go=Object.freeze({earthRadius:ho,factors:fo,unitsFactors:po,areaFactors:mo,feature:F,geometry:t,point:z,points:n,polygon:q,polygons:r,lineString:U,lineStrings:i,featureCollection:G,multiLineString:v,multiPoint:o,multiPolygon:b,geometryCollection:a,round:s,radiansToLength:p,lengthToRadians:m,lengthToDegrees:l,bearingToAzimuth:f,radiansToDegrees:d,degreesToRadians:_,convertLength:u,convertArea:c,isNumber:$,isObject:V,validateBBox:h,validateId:g,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),yo=Object.freeze({coordEach:x,coordReduce:y,propEach:w,propReduce:k,featureEach:L,featureReduce:C,coordAll:S,geomEach:M,geomReduce:P,flattenEach:E,flattenReduce:T,segmentEach:I,segmentReduce:O,lineEach:D,lineReduce:N}),_o=Object.freeze({getCoord:W,getCoords:A,containsNumber:j,geojsonType:R,featureOf:B,collectionOf:Q,getGeom:K,getGeomType:Z,getType:J}),vo={successCallback:null,verbose:!1},bo={},wo=function e(t,n,r,i,o){for(r=r||0,i=i||t.length-1,o=o||function(e,t){return e<t?-1:t<e?1:0};r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=t[n],f=r,d=i;for(re(t,r,n),0<o(t[i],h)&&re(t,r,i);f<d;){for(re(t,f,d),f++,d--;o(t[f],h)<0;)f++;for(;0<o(t[d],h);)d--}0===o(t[r],h)?re(t,r,d):re(t,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}},xo=ie;ie.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!de(e,t))return n;for(var i,o,a,s,l=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],de(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):fe(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!de(e,t))return!1;for(var r,i,o,a,s=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],de(e,a=t.leaf?n(o):o)){if(t.leaf||fe(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=pe([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(e),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}(e,a.children,t)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!fe(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,a=(r=a).children[0])}return this},toBBox:function(e){return e},compareMinX:le,compareMinY:ue,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return oe(i=pe(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=pe([])).leaf=!1,i.height=r;var s,l,u,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(me(e,t,n,f,this.compareMinX),s=t;s<=n;s+=f)for(me(e,s,u=Math.min(s+f-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(e,l,c,r-1));return oe(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,o,a,s,l,u,c,h;r.push(t),!t.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=t.children.length;i<o;i++)l=ce(a=t.children[i]),f=e,d=a,(u=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);t=s||t.children[0]}var f,d;return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),se(a,i);0<=t&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=pe(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,oe(n,this.toBBox),oe(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=pe([e,t]),this.data.height=e.height+1,this.data.leaf=!1,oe(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,i,o,a,s,l,u,c,h,f,d,p,m,g;for(l=u=1/0,r=t;r<=n-t;r++)h=i=ae(e,0,r,this.toBBox),f=o=ae(e,r,n,this.toBBox),void 0,d=Math.max(h.minX,f.minX),p=Math.max(h.minY,f.minY),m=Math.min(h.maxX,f.maxX),g=Math.min(h.maxY,f.maxY),a=Math.max(0,m-d)*Math.max(0,g-p),s=ce(i)+ce(o),a<l?(l=a,c=r,u=s<u?s:u):a===l&&s<u&&(u=s,c=r);return c},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:le,i=e.leaf?this.compareMinY:ue;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var i,o,a=this.toBBox,s=ae(e,0,t,a),l=ae(e,n-t,n,a),u=he(s)+he(l);for(i=t;i<n-t;i++)o=e.children[i],se(s,e.leaf?a(o):o),u+=he(s);for(i=n-t-1;t<=i;i--)o=e.children[i],se(l,e.leaf?a(o):o),u+=he(l);return u},_adjustParentBBoxes:function(e,t,n){for(var r=n;0<=r;r--)se(t[r],e)},_condense:function(e){for(var t,n=e.length-1;0<=n;n--)0===e[n].children.length?0<n?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():oe(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var ko=function(e,t,n){var r=e*t,i=Lo*e,o=i-(i-e),a=e-o,s=Lo*t,l=s-(s-t),u=t-l,c=a*u-(r-o*l-a*l-o*u);return n?(n[0]=c,n[1]=r,n):[c,r]},Lo=+(Math.pow(2,27)+1),Co=function(e,t){var n,r,i,o,a,s=0|e.length,l=0|t.length;if(1===s&&1===l)return n=e[0],r=t[0],(a=n-((i=n+r)-(o=i-n))+(r-o))?[a,i]:[i];var u,c,h=new Array(s+l),f=0,d=0,p=0,m=Math.abs,g=e[d],y=m(g),_=t[p],v=m(_);y<v?(c=g,(d+=1)<s&&(y=m(g=e[d]))):(c=_,(p+=1)<l&&(v=m(_=t[p]))),d<s&&y<v||l<=p?(u=g,(d+=1)<s&&(y=m(g=e[d]))):(u=_,(p+=1)<l&&(v=m(_=t[p])));for(var b,w,x=u+c,k=x-u,L=c-k,C=L,S=x;d<s&&p<l;)y<v?(u=g,(d+=1)<s&&(y=m(g=e[d]))):(u=_,(p+=1)<l&&(v=m(_=t[p]))),(L=(c=C)-(k=(x=u+c)-u))&&(h[f++]=L),C=S-((b=S+x)-(w=b-S))+(x-w),S=b;for(;d<s;)(L=(c=C)-(k=(x=(u=g)+c)-u))&&(h[f++]=L),C=S-((b=S+x)-(w=b-S))+(x-w),S=b,(d+=1)<s&&(g=e[d]);for(;p<l;)(L=(c=C)-(k=(x=(u=_)+c)-u))&&(h[f++]=L),C=S-((b=S+x)-(w=b-S))+(x-w),S=b,(p+=1)<l&&(_=t[p]);return C&&(h[f++]=C),S&&(h[f++]=S),f||(h[f++]=0),h.length=f,h},So=function(e,t){var n=e.length;if(1===n){var r=ko(e[0],t);return r[0]?r:[r[1]]}var i,o,a,s,l,u,c,h=new Array(2*n),f=[.1,.1],d=[.1,.1],p=0;ko(e[0],t,f),f[0]&&(h[p++]=f[0]);for(var m=1;m<n;++m){ko(e[m],t,d);var g=f[1];void 0,u=(o=d[0])-(l=(s=(i=g)+o)-i),c=i-(s-l),(a=f)&&(a[0]=c+u,a[1]=s),f[0]&&(h[p++]=f[0]);var y=d[1],_=f[1],v=y+_,b=_-(v-y);f[1]=v,b&&(h[p++]=b)}return f[1]&&(h[p++]=f[1]),0===p&&(h[p++]=0),h.length=p,h},Mo=function(e,t){var n,r,i,o,a,s=0|e.length,l=0|t.length;if(1===s&&1===l)return n=e[0],r=-t[0],(a=n-((i=n+r)-(o=i-n))+(r-o))?[a,i]:[i];var u,c,h=new Array(s+l),f=0,d=0,p=0,m=Math.abs,g=e[d],y=m(g),_=-t[p],v=m(_);y<v?(c=g,(d+=1)<s&&(y=m(g=e[d]))):(c=_,(p+=1)<l&&(v=m(_=-t[p]))),d<s&&y<v||l<=p?(u=g,(d+=1)<s&&(y=m(g=e[d]))):(u=_,(p+=1)<l&&(v=m(_=-t[p])));for(var b,w,x=u+c,k=x-u,L=c-k,C=L,S=x;d<s&&p<l;)y<v?(u=g,(d+=1)<s&&(y=m(g=e[d]))):(u=_,(p+=1)<l&&(v=m(_=-t[p]))),(L=(c=C)-(k=(x=u+c)-u))&&(h[f++]=L),C=S-((b=S+x)-(w=b-S))+(x-w),S=b;for(;d<s;)(L=(c=C)-(k=(x=(u=g)+c)-u))&&(h[f++]=L),C=S-((b=S+x)-(w=b-S))+(x-w),S=b,(d+=1)<s&&(g=e[d]);for(;p<l;)(L=(c=C)-(k=(x=(u=_)+c)-u))&&(h[f++]=L),C=S-((b=S+x)-(w=b-S))+(x-w),S=b,(p+=1)<l&&(_=-t[p]);return C&&(h[f++]=C),S&&(h[f++]=S),f||(h[f++]=0),h.length=f,h},Po=ge(function(o){function c(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[r][o]);return n}function h(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",h(e.slice(0,t)),",",h(e.slice(t)),")"].join("")}function f(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",h(f(c(e,n))),",",(r=n,1&r?"-":""),e[0][n],")"].join(""));var r;return t}function a(e){for(var t=[],n=[],r=function(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}(e),i=[],o=0;o<e;++o)0==(1&o)?t.push.apply(t,f(c(r,o))):n.push.apply(n,f(c(r,o))),i.push("m"+o);var a=h(t),s=h(n),l="orientation"+e+"Exact",u=["function ",l,"(",i.join(),"){var p=",a,",n=",s,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",u)(Co,ko,So,Mo)}var l=a(3),w=a(4),s=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),o=(e[0]-n[0])*(t[1]-n[1]),a=i-o;if(0<i){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(0<=o)return a;r=-(i+o)}var s=33306690738754716e-32*r;return s<=a||a<=-s?a:l(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],o=t[0]-r[0],a=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],u=n[1]-r[1],c=e[2]-r[2],h=t[2]-r[2],f=n[2]-r[2],d=o*u,p=a*l,m=a*s,g=i*u,y=i*l,_=o*s,v=c*(d-p)+h*(m-g)+f*(y-_),b=7771561172376103e-31*((Math.abs(d)+Math.abs(p))*Math.abs(c)+(Math.abs(m)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(_))*Math.abs(f));return b<v||b<-v?v:w(e,t,n,r)}];!function(){for(;s.length<=5;)s.push(a(s.length));for(var e=[],t=["slow"],n=0;n<=5;++n)e.push("a"+n),t.push("o"+n);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),t.push(r.join(""));var i=Function.apply(void 0,t);for(o.exports=i.apply(void 0,[function(e){var t=s[e.length];return t||(t=s[e.length]=a(e.length)),t.apply(void 0,e)}].concat(s)),n=0;n<=5;++n)o.exports[n]=s[n]}()}),Eo=Po[3],To=ye,Io=ye;ye.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];0<e;){var i=e-1>>1,o=t[i];if(0<=n(r,o))break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&n(t[a],s)<0&&(s=t[o=a]),0<=n(s,i))break;t[e]=s,e=o}t[e]=i}},To.default=Io;var Oo=function(e,t){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o][0],l=t[o][1],u=t[a][0],c=t[a][1];r<l!=r<c&&n<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i},Do=Po[3],No=_e,Ao=_e;No.default=Ao;var jo=function(e){return e},Ro=function(e){if(null==e)return jo;var o,a,s=e.scale[0],l=e.scale[1],u=e.translate[0],c=e.translate[1];return function(e,t){t||(o=a=0);var n=2,r=e.length,i=new Array(r);for(i[0]=(o+=e[0])*s+u,i[1]=(a+=e[1])*l+c;n<r;)i[n]=e[n],++n;return i}},Bo=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n},Fo=function(o,a,s,e,l,t){3===arguments.length&&(e=t=Array,l=null);for(var u=new e(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),c=new t(o),h=o-1,n=0;n<o;++n)u[n]=l;return{set:function(e,t){for(var n=a(e)&h,r=u[n],i=0;r!=l;){if(s(r,e))return c[n]=t;if(++i>=o)throw new Error("full hashmap");r=u[n=n+1&h]}return u[n]=e,c[n]=t},maybeSet:function(e,t){for(var n=a(e)&h,r=u[n],i=0;r!=l;){if(s(r,e))return c[n];if(++i>=o)throw new Error("full hashmap");r=u[n=n+1&h]}return u[n]=e,c[n]=t},get:function(e,t){for(var n=a(e)&h,r=u[n],i=0;r!=l;){if(s(r,e))return c[n];if(++i>=o)break;r=u[n=n+1&h]}return t},keys:function(){for(var e=[],t=0,n=u.length;t<n;++t){var r=u[t];r!=l&&e.push(r)}return e}}},zo=function(e,t){return e[0]===t[0]&&e[1]===t[1]},qo=new ArrayBuffer(16),Uo=new Float64Array(qo),Go=new Uint32Array(qo),$o=function(e){Uo[0]=e[0],Uo[1]=e[1];var t=Go[0]^Go[1];return 2147483647&(t<<5^t>>7^Go[2]^Go[3])},Vo=function(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length;for(var t=this.delay=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var n=this.points[t],r=this.points[t+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){n=this.centers[t],r=this.centers[t+1];var i=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+i),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+i),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Vo.prototype.cacheSteps=function(e){var t=[],n=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>e&&(t.push(r),n=i)}return t},Vo.prototype.vector=function(e){var t=this.pos(e+10),n=this.pos(e-10);return{angle:180*Math.atan2(t.y-n.y,t.x-n.x)/3.14,speed:Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)+(n.z-t.z)*(n.z-t.z))}},Vo.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var n=t/this.duration;if(1<=n)return this.points[this.length-1];var r,i,o,a,s,l,u,c=Math.floor((this.points.length-1)*n);return r=(this.length-1)*n-c,i=this.points[c],o=this.controls[c][1],a=this.controls[c+1][0],s=this.points[c+1],u=[(l=r*r)*r,3*l*(1-r),3*r*(1-r)*(1-r),(1-r)*(1-r)*(1-r)],{x:s.x*u[0]+a.x*u[1]+o.x*u[2]+i.x*u[3],y:s.y*u[0]+a.y*u[1]+o.y*u[2]+i.y*u[3],z:s.z*u[0]+a.z*u[1]+o.z*u[2]+i.z*u[3]}};var Ho=ut,Wo=ut;ut.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(kt(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(kt(e,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},ut.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);0<i&&(r+=e[i-1].length,n.holes.push(r))}return n},Ho.default=Wo,Pt.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!Rt(e,t))return n;for(var i,o,a,s,l=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],Rt(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):jt(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!Rt(e,t))return!1;for(var r,i,o,a,s=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],Rt(e,a=t.leaf?n(o):o)){if(t.leaf||jt(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Bt([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(e),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}(e,a.children,t)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!jt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,a=(r=a).children[0])}return this},toBBox:function(e){return e},compareMinX:Ot,compareMinY:Dt,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return Et(i=Bt(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Bt([])).leaf=!1,i.height=r;var s,l,u,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(Ft(e,t,n,f,this.compareMinX),s=t;s<=n;s+=f)for(Ft(e,s,u=Math.min(s+f-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(e,l,c,r-1));return Et(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,o,a,s,l,u,c,h;r.push(t),!t.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=t.children.length;i<o;i++)l=Nt(a=t.children[i]),f=e,d=a,(u=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);t=s||t.children[0]}var f,d;return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),It(a,i);0<=t&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Bt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Et(n,this.toBBox),Et(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=Bt([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Et(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,i,o,a,s,l,u,c,h,f,d,p,m,g;for(l=u=1/0,r=t;r<=n-t;r++)h=i=Tt(e,0,r,this.toBBox),f=o=Tt(e,r,n,this.toBBox),void 0,d=Math.max(h.minX,f.minX),p=Math.max(h.minY,f.minY),m=Math.min(h.maxX,f.maxX),g=Math.min(h.maxY,f.maxY),a=Math.max(0,m-d)*Math.max(0,g-p),s=Nt(i)+Nt(o),a<l?(l=a,c=r,u=s<u?s:u):a===l&&s<u&&(u=s,c=r);return c},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:Ot,i=e.leaf?this.compareMinY:Dt;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var i,o,a=this.toBBox,s=Tt(e,0,t,a),l=Tt(e,n-t,n,a),u=At(s)+At(l);for(i=t;i<n-t;i++)o=e.children[i],It(s,e.leaf?a(o):o),u+=At(s);for(i=n-t-1;t<=i;i--)o=e.children[i],It(l,e.leaf?a(o):o),u+=At(l);return u},_adjustParentBBoxes:function(e,t,n){for(var r=n;0<=r;r--)It(t[r],e)},_condense:function(e){for(var t,n=e.length-1;0<=n;n--)0===e[n].children.length?0<n?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():Et(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var Qo=Object.freeze({toMercator:Zt,toWgs84:Jt}),Ko=6378137,Zo=function(e){function t(){for(var e=[],t=0;t<f.features.length;t++)-1==f.features[t].properties.parent&&e.push(t);if(1<e.length)for(t=0;t<e.length;t++){for(var n=-1,r=0;r<f.features.length;r++)e[t]!=r&&Pe(f.features[e[t]].geometry.coordinates[0][0],f.features[r],{ignoreBoundary:!0})&&an(f.features[r])<1/0&&(n=r);f.features[e[t]].properties.parent=n}}function n(){for(var e=0;e<f.features.length;e++)if(-1==f.features[e].properties.parent){var t=f.features[e].properties.winding;i(e,f.features[e].properties.netWinding=t)}}function i(e,t){for(var n=0;n<f.features.length;n++)if(f.features[n].properties.parent==e){var r=t+f.features[n].properties.winding;i(n,f.features[n].properties.netWinding=r)}}if("Feature"!=e.type)throw new Error("The input must a geojson object of type Feature");if(void 0===e.geometry||null==e.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=e.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=e.geometry.coordinates.length,o=[],a=0;a<r;a++){var s=e.geometry.coordinates[a];bn(s[0],s[s.length-1])||s.push(s[0]),o.push.apply(o,s.slice(0,s.length-1))}if(!function(e){for(var t={},n=1,r=0,i=e.length;r<i;++r){if(t.hasOwnProperty(e[r])){n=0;break}t[e[r]]=1}return n}(o))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=o.length,u=function(e,d,t){function r(e,t,n,r){var i,o,a=p[e][t],s=p[e][t+1],l=p[n][r],u=p[n][r+1],c=function(e,t,n,r){if(_n(e,n)||_n(e,r)||_n(t,n)||_n(r,n))return null;var i=e[0],o=e[1],a=t[0],s=t[1],l=n[0],u=n[1],c=r[0],h=r[1],f=(i-a)*(u-h)-(o-s)*(l-c);return 0===f?null:[((i*s-o*a)*(l-c)-(i-a)*(l*h-u*c))/f,((i*s-o*a)*(u-h)-(o-s)*(l*h-u*c))/f]}(a,s,l,u);if(null!==c&&(i=s[0]!==a[0]?(c[0]-a[0])/(s[0]-a[0]):(c[1]-a[1])/(s[1]-a[1]),o=u[0]!==l[0]?(c[0]-l[0])/(u[0]-l[0]):(c[1]-l[1])/(u[1]-l[1]),!(1<=i||i<=0||1<=o||o<=0))){var h=c,f=!g[h];f&&(g[h]=!0),d?m.push(d(c,e,t,a,s,i,n,r,l,u,o,f)):m.push(c)}}function n(e,t){var n,r,i,o,a=p[e][t],s=p[e][t+1];return r=a[0]<s[0]?(n=a[0],s[0]):(n=s[0],a[0]),o=a[1]<s[1]?(i=a[1],s[1]):(i=s[1],a[1]),{minX:n,minY:i,maxX:r,maxY:o,ring:e,edge:t}}if("Polygon"!==e.geometry.type)throw new Error("The input feature must be a Polygon");void 0===t&&(t=1);var p=e.geometry.coordinates,m=[],g={};if(t){for(var i=[],o=0;o<p.length;o++)for(var a=0;a<p[o].length-1;a++)i.push(n(o,a));var s=xo();s.load(i)}for(var l=0;l<p.length;l++)for(var u=0;u<p[l].length-1;u++)if(t)s.search(n(l,u)).forEach(function(e){var t=e.ring,n=e.edge;r(l,u,t,n)});else for(var c=0;c<p.length;c++)for(var h=0;h<p[c].length-1;h++)r(l,u,c,h);return d||(m={type:"Feature",geometry:{type:"MultiPoint",coordinates:m}}),m}(e,function(e,t,n,r,i,o,a,s,l,u,c,h){return[e,t,n,r,i,o,a,s,l,u,c,h]}),c=u.length;if(0==c){var h=[];for(a=0;a<r;a++)h.push(q([e.geometry.coordinates[a]],{parent:-1,winding:function(e){for(var t=0,n=0;n<e.length-1;n++)e[n][0]<e[t][0]&&(t=n);if(vn([e[(t-1).modulo(e.length-1)],e[t],e[(t+1).modulo(e.length-1)]],!0))var r=1;else r=-1;return r}(e.geometry.coordinates[a])}));var f=G(h);return t(),n(),f}var d=[],p=[];for(a=0;a<r;a++){d.push([]);for(var m=0;m<e.geometry.coordinates[a].length-1;m++)d[a].push([new Jo(e.geometry.coordinates[a][(m+1).modulo(e.geometry.coordinates[a].length-1)],1,[a,m],[a,(m+1).modulo(e.geometry.coordinates[a].length-1)],void 0)]),p.push(new Xo(e.geometry.coordinates[a][m],[a,(m-1).modulo(e.geometry.coordinates[a].length-1)],[a,m],void 0,void 0,!1,!0))}for(a=0;a<c;a++)d[u[a][1]][u[a][2]].push(new Jo(u[a][0],u[a][5],[u[a][1],u[a][2]],[u[a][6],u[a][7]],void 0)),u[a][11]&&p.push(new Xo(u[a][0],[u[a][1],u[a][2]],[u[a][6],u[a][7]],void 0,void 0,!0,!0));var g=p.length;for(a=0;a<d.length;a++)for(m=0;m<d[a].length;m++)d[a][m].sort(function(e,t){return e.param<t.param?-1:1});var y=[];for(a=0;a<g;a++)y.push({minX:p[a].coord[0],minY:p[a].coord[1],maxX:p[a].coord[0],maxY:p[a].coord[1],index:a});var _=xo();for(_.load(y),a=0;a<d.length;a++)for(m=0;m<d[a].length;m++)for(var v=0;v<d[a][m].length;v++){w=v==d[a][m].length-1?d[a][(m+1).modulo(e.geometry.coordinates[a].length-1)][0].coord:d[a][m][v+1].coord;var b=_.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0];d[a][m][v].nxtIsectAlongEdgeIn=b.index}for(a=0;a<d.length;a++)for(m=0;m<d[a].length;m++)for(v=0;v<d[a][m].length;v++){var w=d[a][m][v].coord,x=(b=_.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0]).index;x<l?p[x].nxtIsectAlongRingAndEdge2=d[a][m][v].nxtIsectAlongEdgeIn:bn(p[x].ringAndEdge1,d[a][m][v].ringAndEdgeIn)?p[x].nxtIsectAlongRingAndEdge1=d[a][m][v].nxtIsectAlongEdgeIn:p[x].nxtIsectAlongRingAndEdge2=d[a][m][v].nxtIsectAlongEdgeIn}var k=[];for(m=a=0;m<r;m++){var L=a;for(v=0;v<e.geometry.coordinates[m].length-1;v++)p[a].coord[0]<p[L].coord[0]&&(L=a),a++;var C=p[L].nxtIsectAlongRingAndEdge2;for(v=0;v<p.length;v++)if(p[v].nxtIsectAlongRingAndEdge1==L||p[v].nxtIsectAlongRingAndEdge2==L){var S=v;break}var M=vn([p[S].coord,p[L].coord,p[C].coord],!0)?1:-1;k.push({isect:L,parent:-1,winding:M})}for(k.sort(function(e,t){return p[e.isect].coord>p[t.isect].coord?-1:1}),h=[];0<k.length;){var P=k.pop(),E=P.isect,T=P.parent,I=P.winding,O=h.length,D=[p[E].coord],N=E;if(p[E].ringAndEdge1Walkable)var A=p[E].ringAndEdge1,j=p[E].nxtIsectAlongRingAndEdge1;else A=p[E].ringAndEdge2,j=p[E].nxtIsectAlongRingAndEdge2;for(;!bn(p[E].coord,p[j].coord);){D.push(p[j].coord);var R=void 0;for(a=0;a<k.length;a++)if(k[a].isect==j){R=a;break}if(null!=R&&k.splice(R,1),bn(A,p[j].ringAndEdge1)){if(A=p[j].ringAndEdge2,p[j].ringAndEdge2Walkable=!1,p[j].ringAndEdge1Walkable){var B={isect:j};vn([p[N].coord,p[j].coord,p[p[j].nxtIsectAlongRingAndEdge2].coord],1==I)?(B.parent=T,B.winding=-I):(B.parent=O,B.winding=I),k.push(B)}j=p[N=j].nxtIsectAlongRingAndEdge2}else A=p[j].ringAndEdge1,p[j].ringAndEdge1Walkable=!1,p[j].ringAndEdge2Walkable&&(B={isect:j},vn([p[N].coord,p[j].coord,p[p[j].nxtIsectAlongRingAndEdge1].coord],1==I)?(B.parent=T,B.winding=-I):(B.parent=O,B.winding=I),k.push(B)),j=p[N=j].nxtIsectAlongRingAndEdge1}D.push(p[j].coord),h.push(q([D],{index:O,parent:T,winding:I,netWinding:void 0}))}return f=G(h),t(),n(),f},Jo=function(e,t,n,r,i){this.coord=e,this.param=t,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Xo=function(e,t,n,r,i,o,a){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(e){return(this%e+e)%e};var Yo=Math.PI/180,ea=180/Math.PI,ta=function(e,t){this.lon=e,this.lat=t,this.x=Yo*e,this.y=Yo*t};ta.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ta.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:-1*(180-this.lon);return new ta(t,e)};var na=function(){this.coords=[],this.length=0};na.prototype.move_to=function(e){this.length++,this.coords.push(e)};var ra=function(e){this.properties=e||{},this.geometries=[]};ra.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}},ra.prototype.wkt=function(){for(var e="",t="LINESTRING(",n=function(e){t+=e[0]+" "+e[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),e+=t.substring(0,t.length-1)+")"}return e};var ia=function(e,t,n){if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ta(e.x,e.y),this.end=new ta(t.x,t.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};ia.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),n=Math.sin(e*this.g)/Math.sin(this.g),r=t*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ea*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[ea*Math.atan2(i,r),a]},ia.prototype.Arc=function(e,t){var n=[];if(!e||e<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(e-1),i=0;i<e;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=t&&t.offset?t.offset:10,c=180-u,h=-180+u,f=360-u,d=1;d<n.length;++d){var p=n[d-1][0],m=n[d][0],g=Math.abs(m-p);f<g&&(c<m&&p<h||c<p&&m<h)?s=!0:l<g&&(l=g)}var y=[];if(s&&l<u){var _=[];y.push(_);for(var v=0;v<n.length;++v){var b=parseFloat(n[v][0]);if(0<v&&Math.abs(b-n[v-1][0])>f){var w=parseFloat(n[v-1][0]),x=parseFloat(n[v-1][1]),k=parseFloat(n[v][0]),L=parseFloat(n[v][1]);if(-180<w&&w<h&&180===k&&v+1<n.length&&-180<n[v-1][0]&&n[v-1][0]<h){_.push([-180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(c<w&&w<180&&-180===k&&v+1<n.length&&n[v-1][0]>c&&n[v-1][0]<180){_.push([180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(w<h&&c<k){var C=w;w=k,k=C;var S=x;x=L,L=S}if(c<w&&k<h&&(k+=360),w<=180&&180<=k&&w<k){var M=(180-w)/(k-w),P=M*L+(1-M)*x;_.push([n[v-1][0]>c?180:-180,P]),(_=[]).push([n[v-1][0]>c?-180:180,P]),y.push(_)}else _=[],y.push(_);_.push([b,n[v][1]])}else _.push([n[v][0],n[v][1]])}}else{var E=[];y.push(E);for(var T=0;T<n.length;++T)E.push([n[T][0],n[T][1]])}for(var I=new ra(this.properties),O=0;O<y.length;++O){var D=new na;I.geometries.push(D);for(var N=y[O],A=0;A<N.length;++A)D.move_to(N[A])}return I};var oa=On;(On.polyline=On).polygon=function(e,t){var n,r,i,o,a,s,l;for(r=1;r<=8;r*=2){for(n=[],o=!(Nn(i=e[e.length-1],t)&r),a=0;a<e.length;a++)(l=!(Nn(s=e[a],t)&r))!==o&&n.push(Dn(i,s,r,t)),l&&n.push(s),i=s,o=l;if(!(e=n).length)break}return n};var aa=Array.prototype.slice,sa={successCallback:null,verbose:!1,polygons:!1},la={},ua=64,ca=16,ha=4,fa=1,da=[],pa=[],ma=[],ga=[],ya=[],_a=[],va=[],ba=[],wa=[],xa=[],ka=[],La=[],Ca=[],Sa=[],Ma=[],Pa=[],Ea=[],Ta=[],Ia=[],Oa=[],Da=[],Na=[],Aa=[],ja=[];va[85]=xa[85]=-1,ba[85]=ka[85]=0,wa[85]=La[85]=1,Ia[85]=Na[85]=1,Oa[85]=Aa[85]=0,Da[85]=ja[85]=1,da[85]=ga[85]=0,pa[85]=ya[85]=-1,ma[85]=Ma[85]=0,Pa[85]=Ca[85]=0,Ea[85]=Sa[85]=1,_a[85]=Ta[85]=1,Na[1]=Na[169]=0,Aa[1]=Aa[169]=-1,ja[1]=ja[169]=0,Ca[1]=Ca[169]=-1,Sa[1]=Sa[169]=0,Ma[1]=Ma[169]=0,xa[4]=xa[166]=0,ka[4]=ka[166]=-1,La[4]=La[166]=1,Pa[4]=Pa[166]=1,Ea[4]=Ea[166]=0,Ta[4]=Ta[166]=0,va[16]=va[154]=0,ba[16]=ba[154]=1,wa[16]=wa[154]=1,ga[16]=ga[154]=1,ya[16]=ya[154]=0,_a[16]=_a[154]=1,Ia[64]=Ia[106]=0,Oa[64]=Oa[106]=1,Da[64]=Da[106]=0,da[64]=da[106]=-1,pa[64]=pa[106]=0,ma[64]=ma[106]=1,Ia[2]=Ia[168]=0,Oa[2]=Oa[168]=-1,Da[2]=Da[168]=1,Na[2]=Na[168]=0,Aa[2]=Aa[168]=-1,ja[2]=ja[168]=0,Ca[2]=Ca[168]=-1,Sa[2]=Sa[168]=0,Ma[2]=Ma[168]=0,Pa[2]=Pa[168]=-1,Ea[2]=Ea[168]=0,Ta[2]=Ta[168]=1,va[8]=va[162]=0,ba[8]=ba[162]=-1,wa[8]=wa[162]=0,xa[8]=xa[162]=0,ka[8]=ka[162]=-1,La[8]=La[162]=1,Ca[8]=Ca[162]=1,Sa[8]=Sa[162]=0,Ma[8]=Ma[162]=1,Pa[8]=Pa[162]=1,Ea[8]=Ea[162]=0,Ta[8]=Ta[162]=0,va[32]=va[138]=0,ba[32]=ba[138]=1,wa[32]=wa[138]=1,xa[32]=xa[138]=0,ka[32]=ka[138]=1,La[32]=La[138]=0,da[32]=da[138]=1,pa[32]=pa[138]=0,ma[32]=ma[138]=0,ga[32]=ga[138]=1,ya[32]=ya[138]=0,_a[32]=_a[138]=1,Na[128]=Na[42]=0,Aa[128]=Aa[42]=1,ja[128]=ja[42]=1,Ia[128]=Ia[42]=0,Oa[128]=Oa[42]=1,Da[128]=Da[42]=0,da[128]=da[42]=-1,pa[128]=pa[42]=0,ma[128]=ma[42]=1,ga[128]=ga[42]=-1,ya[128]=ya[42]=0,_a[128]=_a[42]=0,xa[5]=xa[165]=-1,ka[5]=ka[165]=0,La[5]=La[165]=0,Na[5]=Na[165]=1,Aa[5]=Aa[165]=0,ja[5]=ja[165]=0,Pa[20]=Pa[150]=0,Ea[20]=Ea[150]=1,Ta[20]=Ta[150]=1,ga[20]=ga[150]=0,ya[20]=ya[150]=-1,_a[20]=_a[150]=1,va[80]=va[90]=-1,ba[80]=ba[90]=0,wa[80]=wa[90]=1,Ia[80]=Ia[90]=1,Oa[80]=Oa[90]=0,Da[80]=Da[90]=1,Ca[65]=Ca[105]=0,Sa[65]=Sa[105]=1,Ma[65]=Ma[105]=0,da[65]=da[105]=0,pa[65]=pa[105]=-1,ma[65]=ma[105]=0,va[160]=va[10]=-1,ba[160]=ba[10]=0,wa[160]=wa[10]=1,xa[160]=xa[10]=-1,ka[160]=ka[10]=0,La[160]=La[10]=0,Na[160]=Na[10]=1,Aa[160]=Aa[10]=0,ja[160]=ja[10]=0,Ia[160]=Ia[10]=1,Oa[160]=Oa[10]=0,Da[160]=Da[10]=1,Pa[130]=Pa[40]=0,Ea[130]=Ea[40]=1,Ta[130]=Ta[40]=1,Ca[130]=Ca[40]=0,Sa[130]=Sa[40]=1,Ma[130]=Ma[40]=0,da[130]=da[40]=0,pa[130]=pa[40]=-1,ma[130]=ma[40]=0,ga[130]=ga[40]=0,ya[130]=ya[40]=-1,_a[130]=_a[40]=1,xa[37]=xa[133]=0,ka[37]=ka[133]=1,La[37]=La[133]=1,Na[37]=Na[133]=0,Aa[37]=Aa[133]=1,ja[37]=ja[133]=0,da[37]=da[133]=-1,pa[37]=pa[133]=0,ma[37]=ma[133]=0,ga[37]=ga[133]=1,ya[37]=ya[133]=0,_a[37]=_a[133]=0,Pa[148]=Pa[22]=-1,Ea[148]=Ea[22]=0,Ta[148]=Ta[22]=0,Na[148]=Na[22]=0,Aa[148]=Aa[22]=-1,ja[148]=ja[22]=1,Ia[148]=Ia[22]=0,Oa[148]=Oa[22]=1,Da[148]=Da[22]=1,ga[148]=ga[22]=-1,ya[148]=ya[22]=0,_a[148]=_a[22]=1,va[82]=va[88]=0,ba[82]=ba[88]=-1,wa[82]=wa[88]=1,Pa[82]=Pa[88]=1,Ea[82]=Ea[88]=0,Ta[82]=Ta[88]=1,Ca[82]=Ca[88]=-1,Sa[82]=Sa[88]=0,Ma[82]=Ma[88]=1,Ia[82]=Ia[88]=0,Oa[82]=Oa[88]=-1,Da[82]=Da[88]=0,va[73]=va[97]=0,ba[73]=ba[97]=1,wa[73]=wa[97]=0,xa[73]=xa[97]=0,ka[73]=ka[97]=-1,La[73]=La[97]=0,Ca[73]=Ca[97]=1,Sa[73]=Sa[97]=0,Ma[73]=Ma[97]=0,da[73]=da[97]=1,pa[73]=pa[97]=0,ma[73]=ma[97]=1,va[145]=va[25]=0,ba[145]=ba[25]=-1,wa[145]=wa[25]=0,Ca[145]=Ca[25]=1,Sa[145]=Sa[25]=0,Ma[145]=Ma[25]=1,Na[145]=Na[25]=0,Aa[145]=Aa[25]=1,ja[145]=ja[25]=1,ga[145]=ga[25]=-1,ya[145]=ya[25]=0,_a[145]=_a[25]=0,xa[70]=xa[100]=0,ka[70]=ka[100]=1,La[70]=La[100]=0,Pa[70]=Pa[100]=-1,Ea[70]=Ea[100]=0,Ta[70]=Ta[100]=1,Ia[70]=Ia[100]=0,Oa[70]=Oa[100]=-1,Da[70]=Da[100]=1,da[70]=da[100]=1,pa[70]=pa[100]=0,ma[70]=ma[100]=0,xa[101]=xa[69]=0,ka[101]=ka[69]=1,La[101]=La[69]=0,da[101]=da[69]=1,pa[101]=pa[69]=0,ma[101]=ma[69]=0,Na[149]=Na[21]=0,Aa[149]=Aa[21]=1,ja[149]=ja[21]=1,ga[149]=ga[21]=-1,ya[149]=ya[21]=0,_a[149]=_a[21]=0,Pa[86]=Pa[84]=-1,Ea[86]=Ea[84]=0,Ta[86]=Ta[84]=1,Ia[86]=Ia[84]=0,Oa[86]=Oa[84]=-1,Da[86]=Da[84]=1,va[89]=va[81]=0,ba[89]=ba[81]=-1,wa[89]=wa[81]=0,Ca[89]=Ca[81]=1,Sa[89]=Sa[81]=0,Ma[89]=Ma[81]=1,va[96]=va[74]=0,ba[96]=ba[74]=1,wa[96]=wa[74]=0,xa[96]=xa[74]=-1,ka[96]=ka[74]=0,La[96]=La[74]=1,Ia[96]=Ia[74]=1,Oa[96]=Oa[74]=0,Da[96]=Da[74]=0,da[96]=da[74]=1,pa[96]=pa[74]=0,ma[96]=ma[74]=1,va[24]=va[146]=0,ba[24]=ba[146]=-1,wa[24]=wa[146]=1,Pa[24]=Pa[146]=1,Ea[24]=Ea[146]=0,Ta[24]=Ta[146]=1,Ca[24]=Ca[146]=0,Sa[24]=Sa[146]=1,Ma[24]=Ma[146]=1,ga[24]=ga[146]=0,ya[24]=ya[146]=-1,_a[24]=_a[146]=0,xa[6]=xa[164]=-1,ka[6]=ka[164]=0,La[6]=La[164]=1,Pa[6]=Pa[164]=-1,Ea[6]=Ea[164]=0,Ta[6]=Ta[164]=0,Na[6]=Na[164]=0,Aa[6]=Aa[164]=-1,ja[6]=ja[164]=1,Ia[6]=Ia[164]=1,Oa[6]=Oa[164]=0,Da[6]=Da[164]=0,Ca[129]=Ca[41]=0,Sa[129]=Sa[41]=1,Ma[129]=Ma[41]=1,Na[129]=Na[41]=0,Aa[129]=Aa[41]=1,ja[129]=ja[41]=0,da[129]=da[41]=-1,pa[129]=pa[41]=0,ma[129]=ma[41]=0,ga[129]=ga[41]=0,ya[129]=ya[41]=-1,_a[129]=_a[41]=0,Pa[66]=Pa[104]=0,Ea[66]=Ea[104]=1,Ta[66]=Ta[104]=0,Ca[66]=Ca[104]=-1,Sa[66]=Sa[104]=0,Ma[66]=Ma[104]=1,Ia[66]=Ia[104]=0,Oa[66]=Oa[104]=-1,Da[66]=Da[104]=0,da[66]=da[104]=0,pa[66]=pa[104]=-1,ma[66]=ma[104]=1,va[144]=va[26]=-1,ba[144]=ba[26]=0,wa[144]=wa[26]=0,Na[144]=Na[26]=1,Aa[144]=Aa[26]=0,ja[144]=ja[26]=1,Ia[144]=Ia[26]=0,Oa[144]=Oa[26]=1,Da[144]=Da[26]=1,ga[144]=ga[26]=-1,ya[144]=ya[26]=0,_a[144]=_a[26]=1,xa[36]=xa[134]=0,ka[36]=ka[134]=1,La[36]=La[134]=1,Pa[36]=Pa[134]=0,Ea[36]=Ea[134]=1,Ta[36]=Ta[134]=0,da[36]=da[134]=0,pa[36]=pa[134]=-1,ma[36]=ma[134]=1,ga[36]=ga[134]=1,ya[36]=ya[134]=0,_a[36]=_a[134]=0,va[9]=va[161]=-1,ba[9]=ba[161]=0,wa[9]=wa[161]=0,xa[9]=xa[161]=0,ka[9]=ka[161]=-1,La[9]=La[161]=0,Ca[9]=Ca[161]=1,Sa[9]=Sa[161]=0,Ma[9]=Ma[161]=0,Na[9]=Na[161]=1,Aa[9]=Aa[161]=0,ja[9]=ja[161]=1,va[136]=0,ba[136]=1,wa[136]=1,xa[136]=0,ka[136]=1,La[136]=0,Pa[136]=-1,Ea[136]=0,Ta[136]=1,Ca[136]=-1,Sa[136]=0,Ma[136]=0,Na[136]=0,Aa[136]=-1,ja[136]=0,Ia[136]=0,Oa[136]=-1,Da[136]=1,da[136]=1,pa[136]=0,ma[136]=0,ga[136]=1,ya[136]=0,_a[136]=1,va[34]=0,ba[34]=-1,wa[34]=0,xa[34]=0,ka[34]=-1,La[34]=1,Pa[34]=1,Ea[34]=0,Ta[34]=0,Ca[34]=1,Sa[34]=0,Ma[34]=1,Na[34]=0,Aa[34]=1,ja[34]=1,Ia[34]=0,Oa[34]=1,Da[34]=0,da[34]=-1,pa[34]=0,ma[34]=1,ga[34]=-1,ya[34]=0,_a[34]=0,va[35]=0,ba[35]=1,wa[35]=1,xa[35]=0,ka[35]=-1,La[35]=1,Pa[35]=1,Ea[35]=0,Ta[35]=0,Ca[35]=-1,Sa[35]=0,Ma[35]=0,Na[35]=0,Aa[35]=-1,ja[35]=0,Ia[35]=0,Oa[35]=1,Da[35]=0,da[35]=-1,pa[35]=0,ma[35]=1,ga[35]=1,ya[35]=0,_a[35]=1,va[153]=0,ba[153]=1,wa[153]=1,Ca[153]=-1,Sa[153]=0,Ma[153]=0,Na[153]=0,Aa[153]=-1,ja[153]=0,ga[153]=1,ya[153]=0,_a[153]=1,xa[102]=0,ka[102]=-1,La[102]=1,Pa[102]=1,Ea[102]=0,Ta[102]=0,Ia[102]=0,Oa[102]=1,Da[102]=0,da[102]=-1,pa[102]=0,ma[102]=1,va[155]=0,ba[155]=-1,wa[155]=0,Ca[155]=1,Sa[155]=0,Ma[155]=1,Na[155]=0,Aa[155]=1,ja[155]=1,ga[155]=-1,ya[155]=0,_a[155]=0,xa[103]=0,ka[103]=1,La[103]=0,Pa[103]=-1,Ea[103]=0,Ta[103]=1,Ia[103]=0,Oa[103]=-1,Da[103]=1,da[103]=1,pa[103]=0,ma[103]=0,va[152]=0,ba[152]=1,wa[152]=1,Pa[152]=-1,Ea[152]=0,Ta[152]=1,Ca[152]=-1,Sa[152]=0,Ma[152]=0,Na[152]=0,Aa[152]=-1,ja[152]=0,Ia[152]=0,Oa[152]=-1,Da[152]=1,ga[152]=1,ya[152]=0,_a[152]=1,va[156]=0,ba[156]=-1,wa[156]=1,Pa[156]=1,Ea[156]=0,Ta[156]=1,Ca[156]=-1,Sa[156]=0,Ma[156]=0,Na[156]=0,Aa[156]=-1,ja[156]=0,Ia[156]=0,Oa[156]=1,Da[156]=1,ga[156]=-1,ya[156]=0,_a[156]=1,va[137]=0,ba[137]=1,wa[137]=1,xa[137]=0,ka[137]=1,La[137]=0,Ca[137]=-1,Sa[137]=0,Ma[137]=0,Na[137]=0,Aa[137]=-1,ja[137]=0,da[137]=1,pa[137]=0,ma[137]=0,ga[137]=1,ya[137]=0,_a[137]=1,va[139]=0,ba[139]=1,wa[139]=1,xa[139]=0,ka[139]=-1,La[139]=0,Ca[139]=1,Sa[139]=0,Ma[139]=0,Na[139]=0,Aa[139]=1,ja[139]=0,da[139]=-1,pa[139]=0,ma[139]=0,ga[139]=1,ya[139]=0,_a[139]=1,va[98]=0,ba[98]=-1,wa[98]=0,xa[98]=0,ka[98]=-1,La[98]=1,Pa[98]=1,Ea[98]=0,Ta[98]=0,Ca[98]=1,Sa[98]=0,Ma[98]=1,Ia[98]=0,Oa[98]=1,Da[98]=0,da[98]=-1,pa[98]=0,ma[98]=1,va[99]=0,ba[99]=1,wa[99]=0,xa[99]=0,ka[99]=-1,La[99]=1,Pa[99]=1,Ea[99]=0,Ta[99]=0,Ca[99]=-1,Sa[99]=0,Ma[99]=1,Ia[99]=0,Oa[99]=-1,Da[99]=0,da[99]=1,pa[99]=0,ma[99]=1,xa[38]=0,ka[38]=-1,La[38]=1,Pa[38]=1,Ea[38]=0,Ta[38]=0,Na[38]=0,Aa[38]=1,ja[38]=1,Ia[38]=0,Oa[38]=1,Da[38]=0,da[38]=-1,pa[38]=0,ma[38]=1,ga[38]=-1,ya[38]=0,_a[38]=0,xa[39]=0,ka[39]=1,La[39]=1,Pa[39]=-1,Ea[39]=0,Ta[39]=0,Na[39]=0,Aa[39]=-1,ja[39]=1,Ia[39]=0,Oa[39]=1,Da[39]=0,da[39]=-1,pa[39]=0,ma[39]=1,ga[39]=1,ya[39]=0,_a[39]=0;var Ra=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},Ba=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},Fa=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},za=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},qa=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},Ua=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},Ga=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},$a=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Va=[],Ha=[],Wa=[],Qa=[],Ka=[],Za=[],Ja=[],Xa=[];Qa[1]=Ka[1]=18,Qa[169]=Ka[169]=18,Wa[4]=Ha[4]=12,Wa[166]=Ha[166]=12,Va[16]=Xa[16]=4,Va[154]=Xa[154]=4,Za[64]=Ja[64]=22,Za[106]=Ja[106]=22,Wa[2]=Za[2]=17,Qa[2]=Ka[2]=18,Wa[168]=Za[168]=17,Qa[168]=Ka[168]=18,Va[8]=Qa[8]=9,Ha[8]=Wa[8]=12,Va[162]=Qa[162]=9,Ha[162]=Wa[162]=12,Va[32]=Xa[32]=4,Ha[32]=Ja[32]=1,Va[138]=Xa[138]=4,Ha[138]=Ja[138]=1,Ka[128]=Xa[128]=21,Za[128]=Ja[128]=22,Ka[42]=Xa[42]=21,Za[42]=Ja[42]=22,Ha[5]=Ka[5]=14,Ha[165]=Ka[165]=14,Wa[20]=Xa[20]=6,Wa[150]=Xa[150]=6,Va[80]=Za[80]=11,Va[90]=Za[90]=11,Qa[65]=Ja[65]=3,Qa[105]=Ja[105]=3,Va[160]=Za[160]=11,Ha[160]=Ka[160]=14,Va[10]=Za[10]=11,Ha[10]=Ka[10]=14,Wa[130]=Xa[130]=6,Qa[130]=Ja[130]=3,Wa[40]=Xa[40]=6,Qa[40]=Ja[40]=3,Ha[101]=Ja[101]=1,Ha[69]=Ja[69]=1,Ka[149]=Xa[149]=21,Ka[21]=Xa[21]=21,Wa[86]=Za[86]=17,Wa[84]=Za[84]=17,Va[89]=Qa[89]=9,Va[81]=Qa[81]=9,Va[96]=Ja[96]=0,Ha[96]=Za[96]=15,Va[74]=Ja[74]=0,Ha[74]=Za[74]=15,Va[24]=Wa[24]=8,Qa[24]=Xa[24]=7,Va[146]=Wa[146]=8,Qa[146]=Xa[146]=7,Ha[6]=Za[6]=15,Wa[6]=Ka[6]=16,Ha[164]=Za[164]=15,Wa[164]=Ka[164]=16,Qa[129]=Xa[129]=7,Ka[129]=Ja[129]=20,Qa[41]=Xa[41]=7,Ka[41]=Ja[41]=20,Wa[66]=Ja[66]=2,Qa[66]=Za[66]=19,Wa[104]=Ja[104]=2,Qa[104]=Za[104]=19,Va[144]=Ka[144]=10,Za[144]=Xa[144]=23,Va[26]=Ka[26]=10,Za[26]=Xa[26]=23,Ha[36]=Xa[36]=5,Wa[36]=Ja[36]=2,Ha[134]=Xa[134]=5,Wa[134]=Ja[134]=2,Va[9]=Ka[9]=10,Ha[9]=Qa[9]=13,Va[161]=Ka[161]=10,Ha[161]=Qa[161]=13,Ha[37]=Xa[37]=5,Ka[37]=Ja[37]=20,Ha[133]=Xa[133]=5,Ka[133]=Ja[133]=20,Wa[148]=Ka[148]=16,Za[148]=Xa[148]=23,Wa[22]=Ka[22]=16,Za[22]=Xa[22]=23,Va[82]=Wa[82]=8,Qa[82]=Za[82]=19,Va[88]=Wa[88]=8,Qa[88]=Za[88]=19,Va[73]=Ja[73]=0,Ha[73]=Qa[73]=13,Va[97]=Ja[97]=0,Ha[97]=Qa[97]=13,Va[145]=Qa[145]=9,Ka[145]=Xa[145]=21,Va[25]=Qa[25]=9,Ka[25]=Xa[25]=21,Ha[70]=Ja[70]=1,Wa[70]=Za[70]=17,Ha[100]=Ja[100]=1,Wa[100]=Za[100]=17,Va[34]=Qa[34]=9,Ha[34]=Wa[34]=12,Ka[34]=Xa[34]=21,Za[34]=Ja[34]=22,Va[136]=Xa[136]=4,Ha[136]=Ja[136]=1,Wa[136]=Za[136]=17,Qa[136]=Ka[136]=18,Va[35]=Xa[35]=4,Ha[35]=Wa[35]=12,Qa[35]=Ka[35]=18,Za[35]=Ja[35]=22,Va[153]=Xa[153]=4,Qa[153]=Ka[153]=18,Ha[102]=Wa[102]=12,Za[102]=Ja[102]=22,Va[155]=Qa[155]=9,Ka[155]=Xa[155]=23,Ha[103]=Ja[103]=1,Wa[103]=Za[103]=17,Va[152]=Xa[152]=4,Wa[152]=Za[152]=17,Qa[152]=Ka[152]=18,Va[156]=Wa[156]=8,Qa[156]=Ka[156]=18,Za[156]=Xa[156]=23,Va[137]=Xa[137]=4,Ha[137]=Ja[137]=1,Qa[137]=Ka[137]=18,Va[139]=Xa[139]=4,Ha[139]=Qa[139]=13,Ka[139]=Ja[139]=20,Va[98]=Qa[98]=9,Ha[98]=Wa[98]=12,Za[98]=Ja[98]=22,Va[99]=Ja[99]=0,Ha[99]=Wa[99]=12,Qa[99]=Za[99]=19,Ha[38]=Wa[38]=12,Ka[38]=Xa[38]=21,Za[38]=Ja[38]=22,Ha[39]=Xa[39]=5,Wa[39]=Ka[39]=16,Za[39]=Ja[39]=22;var Ya=[];Ya[1]=Ya[169]=Ra,Ya[4]=Ya[166]=Ba,Ya[16]=Ya[154]=Fa,Ya[64]=Ya[106]=za,Ya[168]=Ya[2]=qa,Ya[162]=Ya[8]=Ua,Ya[138]=Ya[32]=Ga,Ya[42]=Ya[128]=$a,Ya[5]=Ya[165]=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},Ya[20]=Ya[150]=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},Ya[80]=Ya[90]=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},Ya[65]=Ya[105]=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},Ya[160]=Ya[10]=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},Ya[130]=Ya[40]=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},Ya[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ya[101]=Ya[69]=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},Ya[149]=Ya[21]=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},Ya[86]=Ya[84]=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},Ya[89]=Ya[81]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},Ya[96]=Ya[74]=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},Ya[24]=Ya[146]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},Ya[6]=Ya[164]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},Ya[129]=Ya[41]=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},Ya[66]=Ya[104]=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Ya[144]=Ya[26]=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},Ya[36]=Ya[134]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},Ya[9]=Ya[161]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},Ya[37]=Ya[133]=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},Ya[148]=Ya[22]=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},Ya[82]=Ya[88]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},Ya[73]=Ya[97]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},Ya[145]=Ya[25]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},Ya[70]=Ya[100]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Ya[34]=function(e){return[$a(e),Ua(e)]},Ya[35]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Ya[136]=function(e){return[Ga(e),qa(e)]},Ya[153]=function(e){return[Fa(e),Ra(e)]},Ya[102]=function(e){return[Ba(e),za(e)]},Ya[155]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},Ya[103]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Ya[152]=function(e){return[Fa(e),qa(e)]},Ya[156]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},Ya[137]=function(e){return[Ga(e),Ra(e)]},Ya[139]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},Ya[98]=function(e){return[Ua(e),za(e)]},Ya[99]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},Ya[38]=function(e){return[Ba(e),$a(e)]},Ya[39]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]};var es=function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};es.buildId=function(e){return e.join(",")},es.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},es.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},es.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},es.prototype.sortOuterEdges=function(){var o=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,t){var n=e.to,r=t.to;if(0<=n.coordinates[0]-o.coordinates[0]&&r.coordinates[0]-o.coordinates[0]<0)return 1;if(n.coordinates[0]-o.coordinates[0]<0&&0<=r.coordinates[0]-o.coordinates[0])return-1;if(n.coordinates[0]-o.coordinates[0]==0&&r.coordinates[0]-o.coordinates[0]==0)return 0<=n.coordinates[1]-o.coordinates[1]||0<=r.coordinates[1]-o.coordinates[1]?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var i=or(o.coordinates,n.coordinates,r.coordinates);return i<0?1:0<i?-1:Math.pow(n.coordinates[0]-o.coordinates[0],2)+Math.pow(n.coordinates[1]-o.coordinates[1],2)-(Math.pow(r.coordinates[0]-o.coordinates[0],2)+Math.pow(r.coordinates[1]-o.coordinates[1],2))}),this.outerEdgesSorted=!0)},es.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},es.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},es.prototype.addInnerEdge=function(e){this.innerEdges.push(e)};var ts=function(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};ts.prototype.getSymetric=function(){return this.symetric||(this.symetric=new ts(this.to,this.from),this.symetric.symetric=this),this.symetric},ts.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},ts.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},ts.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},ts.prototype.toLineString=function(){return U([this.from.coordinates,this.to.coordinates])},ts.prototype.compareTo=function(e){return or(e.from.coordinates,e.to.coordinates,this.to.coordinates)};var ns=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},rs={length:{configurable:!0}};ns.prototype.push=function(e){this[this.edges.length]=e,this.edges.push(e),this.polygon=this.envelope=void 0},ns.prototype.get=function(e){return this.edges[e]},rs.length.get=function(){return this.edges.length},ns.prototype.forEach=function(e){this.edges.forEach(e)},ns.prototype.map=function(e){return this.edges.map(e)},ns.prototype.some=function(e){return this.edges.some(e)},ns.prototype.isValid=function(){return!0},ns.prototype.isHole=function(){var r=this,e=this.edges.reduce(function(e,t,n){return t.from.coordinates[1]>r.edges[e].from.coordinates[1]&&(e=n),e},0),t=(0===e?this.length:e)-1,n=(e+1)%this.length,i=or(this.edges[t].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[t].from.coordinates[0]>this.edges[n].from.coordinates[0]:0<i},ns.prototype.toMultiPoint=function(){return o(this.edges.map(function(e){return e.from.coordinates}))},ns.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(e){return e.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=q([e])},ns.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=tt(this.toPolygon())},ns.findEdgeRingContaining=function(u,e){var c,h,f=u.getEnvelope();return e.forEach(function(e){var t,n,r,i,o,a,s=e.getEnvelope();if(h&&(c=h.getEnvelope()),n=f,r=(t=s).geometry.coordinates.map(function(e){return e[0]}),i=t.geometry.coordinates.map(function(e){return e[1]}),o=n.geometry.coordinates.map(function(e){return e[0]}),a=n.geometry.coordinates.map(function(e){return e[1]}),(Math.max(null,r)!==Math.max(null,o)||Math.max(null,i)!==Math.max(null,a)||Math.min(null,r)!==Math.min(null,o)||Math.min(null,i)!==Math.min(null,a))&&ar(s,f)){var l=u.map(function(e){return e.from.coordinates}).find(function(r){return!e.some(function(e){return t=r,n=e.from.coordinates,t[0]===n[0]&&t[1]===n[1];var t,n})});l&&e.inside(z(l))&&(h&&!ar(c,s)||(h=e))}}),h},ns.prototype.inside=function(e){return Pe(e,this.toPolygon())},Object.defineProperties(ns.prototype,rs);var is=function(){this.edges=[],this.nodes={}};is.fromGeoJson=function(e){!function(e){if(!e)throw new Error("No geojson passed");if("FeatureCollection"!==e.type&&"GeometryCollection"!==e.type&&"MultiLineString"!==e.type&&"LineString"!==e.type&&"Feature"!==e.type)throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var i=new is;return E(e,function(e){B(e,"LineString","Graph::fromGeoJson"),y(e,function(e,t){if(e){var n=i.getNode(e),r=i.getNode(t);i.addEdge(n,r)}return t})}),i},is.prototype.getNode=function(e){var t=es.buildId(e),n=this.nodes[t];return n||(n=this.nodes[t]=new es(e)),n},is.prototype.addEdge=function(e,t){var n=new ts(e,t),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},is.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},is.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var n=e.getOuterEdges().map(function(e){return e.to});this.removeNode(e),n.forEach(function(e){return t._removeIfDangle(e)})}},is.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},is.prototype._computeNextCWEdges=function(n){var t=this;void 0===n?Object.keys(this.nodes).forEach(function(e){return t._computeNextCWEdges(t.nodes[e])}):n.getOuterEdges().forEach(function(e,t){n.getOuterEdge((0===t?n.getOuterEdges().length:t)-1).symetric.next=e})},is.prototype._computeNextCCWEdges=function(e,t){for(var n,r,i=e.getOuterEdges(),o=i.length-1;0<=o;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===t&&(l=a),s.label===t&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},is.prototype._findLabeledEdgeRings=function(){var n=[],r=0;return this.edges.forEach(function(e){if(!(0<=e.label)){n.push(e);for(var t=e;t.label=r,t=t.next,!e.isEqual(t););r++}}),n},is.prototype.getEdgeRings=function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(e){e.label=void 0}),this._findLabeledEdgeRings().forEach(function(t){n._findIntersectionNodes(t).forEach(function(e){n._computeNextCCWEdges(e,t.label)})});var t=[];return this.edges.forEach(function(e){e.ring||t.push(n._findEdgeRing(e))}),t},is.prototype._findIntersectionNodes=function(n){for(var e=[],r=n,t=function(){var t=0;r.from.getOuterEdges().forEach(function(e){e.label===n.label&&++t}),1<t&&e.push(r.from),r=r.next};t(),!n.isEqual(r););return e},is.prototype._findEdgeRing=function(e){for(var t=e,n=new ns;n.push(t),t.ring=n,t=t.next,!e.isEqual(t););return n},is.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(e){return t.removeEdge(e)}),e.innerEdges.forEach(function(e){return t.removeEdge(e)}),delete this.nodes[e.id]},is.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var os=ge(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),as=(os.shim,ge(function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==(void 0===e?"undefined":$d(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(t=e.exports=i?n:r).supported=n,t.unsupported=r})),ss=(as.supported,as.unsupported,ge(function(e){function s(e){return null==e}function l(e){return!(!e||"object"!=(void 0===e?"undefined":$d(e))||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||0<e.length&&"number"!=typeof e[0])}var u=Array.prototype.slice,c=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=(void 0===e?"undefined":$d(e))&&"object"!=(void 0===t?"undefined":$d(t))?n.strict?e===t:e==t:function(e,t,n){var r,i;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(as(e))return!!as(t)&&(e=u.call(e),t=u.call(t),c(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var o=os(e),a=os(t)}catch(e){return!1}if(o.length!=a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;0<=r;r--)if(o[r]!=a[r])return!1;for(r=o.length-1;0<=r;r--)if(i=o[r],!c(e[i],t[i],n))return!1;return(void 0===e?"undefined":$d(e))==(void 0===t?"undefined":$d(t))}(e,t,n))}})),ls=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=!(!e||!e.direction)&&e.direction,this.pseudoNode=!(!e||!e.pseudoNode)&&e.pseudoNode,this.objectComparator=e&&e.objectComparator?e.objectComparator:yr};ls.prototype.compare=function(e,t){if(e.type!==t.type||!gr(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(0===e.type.indexOf("Multi")){var n=this,r=mr(e),i=mr(t);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},ls.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].toFixed(this.precision)!==t[n].toFixed(this.precision))return!1;return!0},ls.prototype.compareLine=function(e,t,n,r){if(!gr(e,t))return!1;var i=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},ls.prototype.fixStartIndex=function(e,t){for(var n,r=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){r=i;break}return 0<=r&&(n=[].concat(e.slice(r,e.length),e.slice(1,r+1))),n},ls.prototype.comparePath=function(e,t){var n=this;return e.every(function(e,t){return n.compareCoord(e,this[t])},t)},ls.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var n=e.coordinates.slice(1,e.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},ls.prototype.compareFeature=function(e,t){return!(e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t))&&this.compare(e.geometry,t.geometry)},ls.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))},ls.prototype.removePseudo=function(e){return e};var us=ls,cs=ge(function(e){function t(e,t,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(e,t,n,r)}t.prototype.run=function(e,t,n,r){this._init(e,t,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},t.prototype._init=function(e,t,n,r){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+(void 0===e?"undefined":$d(e))+" given");this.dataset=e,this.clusters=[],this.noise=[],this._datasetLength=e.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),n&&(this.minPts=n),r&&(this.distance=r)},t.prototype._expandCluster=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(t=this._mergeArrays(t,i))}1!==this._assigned[r]&&this._addToCluster(r,e)}},t.prototype._addToCluster=function(e,t){this.clusters[t].push(e),this._assigned[e]=1},t.prototype._regionQuery=function(e){for(var t=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[e],this.dataset[n])<this.epsilon&&t.push(n);return t},t.prototype._mergeArrays=function(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];e.indexOf(i)<0&&e.push(i)}return e},t.prototype._euclideanDistance=function(e,t){for(var n=0,r=Math.min(e.length,t.length);r--;)n+=(e[r]-t[r])*(e[r]-t[r]);return Math.sqrt(n)},e.exports&&(e.exports=t)}),hs=ge(function(e){function t(e,t,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(e,t,n)}t.prototype.init=function(e,t,n){this.assignments=[],this.centroids=[],void 0!==e&&(this.dataset=e),void 0!==t&&(this.k=t),void 0!==n&&(this.distance=n)},t.prototype.run=function(e,t){this.init(e,t);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(0<s){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){for(var e,t,n=this.dataset.length-1;t=Math.round(Math.random()*n),e=this.dataset[t],0<=this.centroids.indexOf(e););return e},t.prototype.assign=function(){for(var e,t=!1,n=this.dataset.length,r=0;r<n;r++)(e=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=e,t=!0);return t},t.prototype.getClusters=function(){for(var e,t=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===t[e=this.assignments[n]]&&(t[e]=[]),t[e].push(n);return t},t.prototype.argmin=function(e,t,n){for(var r,i=Number.MAX_VALUE,o=0,a=t.length,s=0;s<a;s++)(r=n(e,t[s]))<i&&(i=r,o=s);return o},t.prototype.distance=function(e,t){for(var n=0,r=Math.min(e.length,t.length);r--;){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)},e.exports&&(e.exports=t)}),fs=ge(function(e){function t(e,t,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(e,t,n)}t.prototype.insert=function(e,t){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?i<t&&(n=r):t<i&&(n=r)}this._insertAt(e,t,n)},t.prototype.remove=function(e){for(var t=this._queue.length;t--;)if(e===this._queue[t]){this._queue.splice(t,1),this._priorities.splice(t,1);break}},t.prototype.forEach=function(e){this._queue.forEach(e)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(e){return this._priorities[e]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var e=[],t=0,n=this._queue.length;t<n;t++)e.push([this._queue[t],this._priorities[t]]);return e},t.prototype._init=function(e,t,n){if(e&&t){if(this._queue=[],this._priorities=[],e.length!==t.length)throw new Error("Arrays must have the same length");for(var r=0;r<e.length;r++)this.insert(e[r],t[r])}n&&(this._sorting=n)},t.prototype._insertAt=function(e,t,n){this._queue.length===n?(this._queue.push(e),this._priorities.push(t)):(this._queue.splice(n,0,e),this._priorities.splice(n,0,t))},e.exports&&(e.exports=t)}),ds=ge(function(e){function t(e,t,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(e,t,n,r)}if(e.exports)var u=fs;t.prototype.run=function(e,t,n,r){this._init(e,t,n,r);for(var i=0,o=this.dataset.length;i<o;i++)if(1!==this._processed[i]){this._processed[i]=1,this.clusters.push([i]);var a=this.clusters.length-1;this._orderedList.push(i);var s=new u(null,null,"asc"),l=this._regionQuery(i);void 0!==this._distanceToCore(i)&&(this._updateQueue(i,l,s),this._expandCluster(a,s))}return this.clusters},t.prototype.getReachabilityPlot=function(){for(var e=[],t=0,n=this._orderedList.length;t<n;t++){var r=this._orderedList[t],i=this._reachability[r];e.push([r,i])}return e},t.prototype._init=function(e,t,n,r){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+(void 0===e?"undefined":$d(e))+" given");this.dataset=e,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),n&&(this.minPts=n),r&&(this.distance=r)},t.prototype._updateQueue=function(r,e,i){var o=this;this._coreDistance=this._distanceToCore(r),e.forEach(function(e){if(void 0===o._processed[e]){var t=o.distance(o.dataset[r],o.dataset[e]),n=Math.max(o._coreDistance,t);void 0===o._reachability[e]?(o._reachability[e]=n,i.insert(e,n)):n<o._reachability[e]&&(o._reachability[e]=n,i.remove(e),i.insert(e,n))}})},t.prototype._expandCluster=function(e,t){for(var n=t.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[e].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,t),this._expandCluster(e,t))}}},t.prototype._distanceToCore=function(e){for(var t=this.epsilon,n=0;n<t;n++)if(this._regionQuery(e,n).length>=this.minPts)return n},t.prototype._regionQuery=function(e,t){t=t||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[e],this.dataset[r])<t&&n.push(r);return n},t.prototype._euclideanDistance=function(e,t){for(var n=0,r=Math.min(e.length,t.length);r--;)n+=(e[r]-t[r])*(e[r]-t[r]);return Math.sqrt(n)},e.exports&&(e.exports=t)}),ps=ge(function(e){e.exports&&(e.exports={DBSCAN:cs,KMEANS:hs,OPTICS:ds,PriorityQueue:fs})}),ms=(ps.DBSCAN,ps.KMEANS,ps.OPTICS,ps.PriorityQueue,function(e,t,n){for(var r=e.length,i=0,o=0;o<r;o++){var a=(e[o]||0)-(t[o]||0);i+=a*a}return n?Math.sqrt(i):i}),gs=ms,ys=function(e,t,n){var r=Math.abs(e-t);return n?r:r*r},_s=ms,vs=function(e,t,n,r){var i=[],o=[],a=[],s=[],l=!1,u=r||1e4,c=e.length,h=e[0].length,f=0<h,d=[];if(n)i="kmrand"==n?function(e,t){for(var n={},r=[],i=t<<2,o=e.length,a=0<e[0].length;r.length<t&&0<i--;){var s=e[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<t)throw new Error("Error initializating clusters");return r}(e,t):"kmpp"==n?function(e,t){var n=e[0].length?gs:ys,r=[],i=e.length,o=0<e[0].length,a=e[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<t;){for(var s=[],l=r.length,u=0,c=[],h=0;h<i;h++){for(var f=1/0,d=0;d<l;d++){var p=n(e[h],r[d]);p<=f&&(f=p)}s[h]=f}for(var m=0;m<i;m++)u+=s[m];for(var g=0;g<i;g++)c[g]={i:g,v:e[g],pr:s[g]/u,cs:0};c.sort(function(e,t){return e.pr-t.pr}),c[0].cs=c[0].pr;for(var y=1;y<i;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var _=Math.random(),v=0;v<i-1&&c[v++].cs<_;);r.push(c[v-1].v)}return r}(e,t):n;else for(var p={};i.length<t;){var m=Math.floor(Math.random()*c);p[m]||(p[m]=!0,i.push(e[m]))}do{vr(t,0,d);for(var g=0;g<c;g++){for(var y=1/0,_=0,v=0;v<t;v++)(s=f?_s(e[g],i[v]):Math.abs(e[g]-i[v]))<=y&&(y=s,_=v);d[a[g]=_]++}for(var b=[],w=(o=[],0);w<t;w++)b[w]=f?vr(h,0,b[w]):0,o[w]=i[w];if(f){for(var x=0;x<t;x++)i[x]=[];for(var k=0;k<c;k++)for(var L=b[a[k]],C=e[k],S=0;S<h;S++)L[S]+=C[S];l=!0;for(var M=0;M<t;M++){for(var P=i[M],E=b[M],T=o[M],I=d[M],O=0;O<h;O++)P[O]=E[O]/I||0;if(l)for(var D=0;D<h;D++)if(T[D]!=P[D]){l=!1;break}}}else{for(var N=0;N<c;N++)b[a[N]]+=e[N];for(var A=0;A<t;A++)i[A]=b[A]/d[A]||0;l=!0;for(var j=0;j<t;j++)if(o[j]!=i[j]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:t,idxs:a,centroids:i}},bs={search:function(e,t,n,r){e.cleanDirty();var i=(r=r||{}).heuristic||bs.heuristics.manhattan,o=r.closest||!1,a=new Lr(function(e){return e.f}),s=t;for(t.h=i(t,n),a.push(t);0<a.size();){var l=a.pop();if(l===n)return wr(l);l.closed=!0;for(var u=e.neighbors(l),c=0,h=u.length;c<h;++c){var f=u[c];if(!f.closed&&!f.isWall()){var d=l.g+f.getCost(l),p=f.visited;(!p||d<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||i(f,n),f.g=d,f.f=f.g+f.h,e.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),p?a.rescoreElement(f):a.push(f))}}}return o?wr(s):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var n=Math.sqrt(2),r=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};xr.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)bs.cleanNode(this.nodes[e])},xr.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)bs.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},xr.prototype.markDirty=function(e){this.dirtyNodes.push(e)},xr.prototype.neighbors=function(e){var t=[],n=e.x,r=e.y,i=this.grid;return i[n-1]&&i[n-1][r]&&t.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&t.push(i[n+1][r]),i[n]&&i[n][r-1]&&t.push(i[n][r-1]),i[n]&&i[n][r+1]&&t.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&t.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&t.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&t.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&t.push(i[n+1][r+1])),t},xr.prototype.toString=function(){for(var e,t,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(e=[],n=0,r=(t=o[a]).length;n<r;n++)e.push(t[n].weight);i.push(e.join(" "))}return i.join("\n")},kr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},kr.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?1.41421*this.weight:this.weight},kr.prototype.isWall=function(){return 0===this.weight},Lr.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return 0<this.content.length&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];0<e;){var n=(e+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},bubbleUp:function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var i,o=e+1<<1,a=o-1,s=null;if(a<t){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<t){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=n,e=s}}};var ws=function(e){return function(){return e}};Mr.prototype={constructor:Mr,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=Ir(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Er(this,n),n=(e=n).U),n.C=!1,r.C=!0,Tr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Tr(this,n),n=(e=n).U),n.C=!1,r.C=!0,Er(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?Ir(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,((n.L=o).U=n)!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,(n.R=a).U=n):(n.U=i,e=(i=n).R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Er(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Tr(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Er(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Tr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Er(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Tr(this,i),e=this._;break}t.C=!0,i=(e=i).U}while(!e.C);e&&(e.C=!1)}}};var xs,ks,Ls,Cs,Ss,Ms=[],Ps=[],Es=1e-6,Ts=1e-12;Hr.prototype={constructor:Hr,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return Rr(t,n[e])});return e.data=t.site.data,e})},triangles:function(){var f=[],d=this.edges;return this.cells.forEach(function(e,t){if(r=(n=e.halfedges).length)for(var n,r,i,o=e.site,a=-1,s=d[n[r-1]],l=s.left===o?s.right:s.left;++a<r;)i=l,l=(s=d[n[a]]).left===o?s.right:s.left,i&&l&&t<i.index&&t<l.index&&(c=i,h=l,((u=o)[0]-h[0])*(c[1]-u[1])-(u[0]-c[0])*(h[1]-u[1])<0)&&f.push([o.data,i.data,l.data]);var u,c,h}),f},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(a,s,e){for(var t,l,u=this,c=u._found||0,n=u.cells.length;!(l=u.cells[c]);)if(++c>=n)return null;for(var r=a-l.site[0],i=s-l.site[1],h=r*r+i*i;l=u.cells[t=c],c=null,l.halfedges.forEach(function(e){var t=u.edges[e],n=t.left;if(n!==l.site&&n||(n=t.right)){var r=a-n[0],i=s-n[1],o=r*r+i*i;o<h&&(h=o,c=n.index)}}),null!==c;);return u._found=t,null==e||h<=e*e?l.site:null}};var Is=Object.freeze({randomPosition:Xr,randomPoint:Yr,randomPolygon:ei,randomLineString:ti}),Os=Object.freeze({getCluster:ri,clusterEach:ii,clusterReduce:oi,createBins:ai,applyFilter:si,propertiesContainsFilter:li,filterProperties:ui});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(null==this)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0}),Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(e){return e!=e},Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var Ds=function(){};Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds},Ds.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var Ns=function(){},As=function(){},js={MAX_VALUE:{configurable:!0}};As.isNaN=function(e){return Number.isNaN(e)},As.doubleToLongBits=function(e){return e},As.longBitsToDouble=function(e){return e},As.isInfinite=function(e){return!Number.isFinite(e)},js.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(As,js);var Rs=function(){},Bs=function(){},Fs=function(){},zs=function e(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},qs={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};zs.prototype.setOrdinate=function(e,t){switch(e){case zs.X:this.x=t;break;case zs.Y:this.y=t;break;case zs.Z:this.z=t;break;default:throw new Ns("Invalid ordinate index: "+e)}},zs.prototype.equals2D=function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!Ds.equalsWithTolerance(this.x,t.x,n)&&!!Ds.equalsWithTolerance(this.y,t.y,n)}},zs.prototype.getOrdinate=function(e){switch(e){case zs.X:return this.x;case zs.Y:return this.y;case zs.Z:return this.z}throw new Ns("Invalid ordinate index: "+e)},zs.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||As.isNaN(this.z))&&As.isNaN(e.z)},zs.prototype.equals=function(e){return e instanceof zs&&this.equals2D(e)},zs.prototype.equalInZ=function(e,t){return Ds.equalsWithTolerance(this.z,e.z,t)},zs.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},zs.prototype.clone=function(){},zs.prototype.copy=function(){return new zs(this)},zs.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},zs.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)},zs.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},zs.prototype.hashCode=function(){var e=17;return 37*(e=37*e+zs.hashCode(this.x))+zs.hashCode(this.y)},zs.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z},zs.prototype.interfaces_=function(){return[Rs,Bs,ci]},zs.prototype.getClass=function(){return zs},zs.hashCode=function(){if(1===arguments.length){var e=arguments[0],t=As.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}},qs.DimensionalComparator.get=function(){return Us},qs.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},qs.NULL_ORDINATE.get=function(){return As.NaN},qs.X.get=function(){return 0},qs.Y.get=function(){return 1},qs.Z.get=function(){return 2},Object.defineProperties(zs,qs);var Us=function(e){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var t=e;if(2!==t&&3!==t)throw new Ns("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Us.prototype.compare=function(e,t){var n=e,r=t,i=Us.compare(n.x,r.x);if(0!==i)return i;var o=Us.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Us.compare(n.z,r.z)},Us.prototype.interfaces_=function(){return[Fs]},Us.prototype.getClass=function(){return Us},Us.compare=function(e,t){return e<t?-1:t<e?1:As.isNaN(e)?As.isNaN(t)?0:-1:As.isNaN(t)?1:0};var Gs=function(){};Gs.prototype.create=function(){},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs};var $s=function(){},Vs={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s},$s.toLocationSymbol=function(e){switch(e){case $s.EXTERIOR:return"e";case $s.BOUNDARY:return"b";case $s.INTERIOR:return"i";case $s.NONE:return"-"}throw new Ns("Unknown location value: "+e)},Vs.INTERIOR.get=function(){return 0},Vs.BOUNDARY.get=function(){return 1},Vs.EXTERIOR.get=function(){return 2},Vs.NONE.get=function(){return-1},Object.defineProperties($s,Vs);var Hs=function(e,t){return e.interfaces_&&-1<e.interfaces_().indexOf(t)},Ws=function(){},Qs={LOG_10:{configurable:!0}};Ws.prototype.interfaces_=function(){return[]},Ws.prototype.getClass=function(){return Ws},Ws.log10=function(e){var t=Math.log(e);return As.isInfinite(t)?t:As.isNaN(t)?t:t/Ws.LOG_10},Ws.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i},Ws.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:n<e?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},Ws.wrap=function(e,t){return e<0?t- -e%t:e%t},Ws.max=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return r<t&&(r=t),r<n&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=i;return l<o&&(l=o),l<a&&(l=a),l<s&&(l=s),l}},Ws.average=function(e,t){return(e+t)/2},Qs.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ws,Qs);var Ks=function(e){this.str=e};Ks.prototype.append=function(e){this.str+=e},Ks.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},Ks.prototype.toString=function(e){return this.str};var Zs=function(e){this.value=e};Zs.prototype.intValue=function(){return this.value},Zs.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},Zs.isNaN=function(e){return Number.isNaN(e)};var Js=function(){};Js.isWhitespace=function(e){return e<=32&&0<=e||127===e},Js.toUpperCase=function(e){return e.toUpperCase()};var Xs=function e(){if(this._hi=0,(this._lo=0)===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];e.call(this,e.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Ys={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Xs.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo},Xs.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=Xs.magnitude(n._hi),i=Xs.TEN.pow(r);(n=n.divide(i)).gt(Xs.TEN)?(n=n.divide(Xs.TEN),r+=1):n.lt(Xs.ONE)&&(n=n.multiply(Xs.TEN),r-=1);for(var o=r+1,a=new Ks,s=Xs.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){e&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;h=9<u?(c=!0,"9"):"0"+u,a.append(h),n=n.subtract(Xs.valueOf(u)).multiply(Xs.TEN),c&&n.selfAdd(Xs.TEN);var f=!0,d=Xs.magnitude(n._hi);if(d<0&&Math.abs(d)>=s-l&&(f=!1),!f)break}return t[0]=r,a.toString()},Xs.prototype.sqr=function(){return this.multiply(this)},Xs.prototype.doubleValue=function(){return this._hi+this._lo},Xs.prototype.subtract=function(){if(arguments[0]instanceof Xs){var e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){var t=arguments[0];return this.add(-t)}},Xs.prototype.equals=function(){if(1===arguments.length){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},Xs.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Xs.prototype.selfSubtract=function(){if(arguments[0]instanceof Xs){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}},Xs.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Xs.prototype.min=function(e){return this.le(e)?this:e},Xs.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Xs){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],l=null,u=null,c=null,h=null;return i=this._hi/a,h=(l=(c=Xs.SPLIT*i)-(l=c-i))*(u=(h=Xs.SPLIT*a)-(u=h-a))-(o=i*a)+l*(r=a-u)+(n=i-l)*u+n*r,h=i+(c=(this._hi-o-h+this._lo-i*s)/a),this._hi=h,this._lo=i-h+c,this}},Xs.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Xs.prototype.divide=function(){if(arguments[0]instanceof Xs){var e,t,n,r,i=arguments[0],o=null,a=null,s=null,l=null;return e=(n=this._hi/i._hi)-(o=(s=Xs.SPLIT*n)-(o=s-n)),l=o*(a=(l=Xs.SPLIT*i._hi)-(a=l-i._hi))-(r=n*i._hi)+o*(t=i._hi-a)+e*a+e*t,s=(this._hi-r-l+this._lo-n*i._lo)/i._hi,new Xs(l=n+s,n-l+s)}if("number"==typeof arguments[0]){var u=arguments[0];return As.isNaN(u)?Xs.createNaN():Xs.copy(this).selfDivide(u,0)}},Xs.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo},Xs.prototype.pow=function(e){if(0===e)return Xs.valueOf(1);var t=new Xs(this),n=Xs.valueOf(1),r=Math.abs(e);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(t),0<(r/=2)&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n},Xs.prototype.ceil=function(){if(this.isNaN())return Xs.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new Xs(e,t)},Xs.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Xs.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Xs.prototype.setValue=function(){if(arguments[0]instanceof Xs){var e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){var t=arguments[0];return this.init(t),this}},Xs.prototype.max=function(e){return this.ge(e)?this:e},Xs.prototype.sqrt=function(){if(this.isZero())return Xs.valueOf(0);if(this.isNegative())return Xs.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=Xs.valueOf(t),r=this.subtract(n.sqr())._hi*(.5*e);return n.add(r)},Xs.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Xs){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var t,n,r,i,o,a=arguments[0],s=null;return s=(r=this._hi+a)-(i=r-this._hi),n=(o=(s=a-i+(this._hi-s))+this._lo)+(r-(t=r+o)),this._hi=t+n,this._lo=n+(t-this._hi),this}}else if(2===arguments.length){var l,u,c,h,f=arguments[0],d=arguments[1],p=null,m=null,g=null;c=this._hi+f,u=this._lo+d,m=c-(g=c-this._hi),p=u-(h=u-this._lo);var y=(l=c+(g=(m=f-g+(this._hi-m))+u))+(g=(p=d-h+(this._lo-p))+(g+(c-l))),_=g+(l-y);return this._hi=y,this._lo=_,this}},Xs.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Xs){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){var n,r,i=arguments[0],o=arguments[1],a=null,s=null,l=null,u=null;a=(l=Xs.SPLIT*this._hi)-this._hi,u=Xs.SPLIT*i,a=l-a,n=this._hi-a,s=u-i;var c=(l=this._hi*i)+(u=a*(s=u-s)-l+a*(r=i-s)+n*s+n*r+(this._hi*o+this._lo*i)),h=u+(a=l-c);return this._hi=c,this._lo=h,this}},Xs.prototype.selfSqr=function(){return this.selfMultiply(this)},Xs.prototype.floor=function(){if(this.isNaN())return Xs.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new Xs(e,t)},Xs.prototype.negate=function(){return this.isNaN()?this:new Xs(-this._hi,-this._lo)},Xs.prototype.clone=function(){},Xs.prototype.multiply=function(){if(arguments[0]instanceof Xs){var e=arguments[0];return e.isNaN()?Xs.createNaN():Xs.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var t=arguments[0];return As.isNaN(t)?Xs.createNaN():Xs.copy(this).selfMultiply(t,0)}},Xs.prototype.isNaN=function(){return As.isNaN(this._hi)},Xs.prototype.intValue=function(){return Math.trunc(this._hi)},Xs.prototype.toString=function(){var e=Xs.magnitude(this._hi);return-3<=e&&e<=20?this.toStandardNotation():this.toSciNotation()},Xs.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Xs.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Xs.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Xs.prototype.reciprocal=function(){var e,t,n,r,i=null,o=null,a=null,s=null;e=(n=1/this._hi)-(i=(a=Xs.SPLIT*n)-(i=a-n)),o=(s=Xs.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(t=this._hi-o)+e*o+e*t)-n*this._lo)/this._hi);return new Xs(l,n-l+a)},Xs.prototype.toSciNotation=function(){if(this.isZero())return Xs.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=Xs.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Xs.prototype.abs=function(){return this.isNaN()?Xs.NaN:this.isNegative()?this.negate():new Xs(this)},Xs.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},Xs.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo},Xs.prototype.add=function(){if(arguments[0]instanceof Xs){var e=arguments[0];return Xs.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var t=arguments[0];return Xs.copy(this).selfAdd(t)}},Xs.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof Xs){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Xs.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo},Xs.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Xs.prototype.trunc=function(){return this.isNaN()?Xs.NaN:this.isPositive()?this.floor():this.ceil()},Xs.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},Xs.prototype.interfaces_=function(){return[ci,Rs,Bs]},Xs.prototype.getClass=function(){return Xs},Xs.sqr=function(e){return Xs.valueOf(e).selfMultiply(e)},Xs.valueOf=function(){if("string"==typeof arguments[0]){var e=arguments[0];return Xs.parse(e)}if("number"==typeof arguments[0]){var t=arguments[0];return new Xs(t)}},Xs.sqrt=function(e){return Xs.valueOf(e).sqrt()},Xs.parse=function(e){for(var t=0,n=e.length;Js.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);"-"!==i&&"+"!==i||(t++,"-"===i&&(r=!0))}for(var o=new Xs,a=0,s=0,l=0;!(n<=t);){var u=e.charAt(t);if(t++,Js.isDigit(u)){var c=u-"0";o.selfMultiply(Xs.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"!==u&&"E"!==u)throw new Error("Unexpected character '"+u+"' at position "+t+" in string "+e);var h=e.substring(t);try{l=Zs.parseInt(h)}catch(t){throw t instanceof Error?new Error("Invalid exponent "+h+" in string "+e):t}break}s=a}}var f=o,d=a-s-l;if(0===d)f=o;else if(0<d){var p=Xs.TEN.pow(d);f=o.divide(p)}else if(d<0){var m=Xs.TEN.pow(-d);f=o.multiply(m)}return r?f.negate():f},Xs.createNaN=function(){return new Xs(As.NaN,As.NaN)},Xs.copy=function(e){return new Xs(e)},Xs.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=t&&(r+=1),r},Xs.stringOfChar=function(e,t){for(var n=new Ks,r=0;r<t;r++)n.append(e);return n.toString()},Ys.PI.get=function(){return new Xs(3.141592653589793,12246467991473532e-32)},Ys.TWO_PI.get=function(){return new Xs(6.283185307179586,24492935982947064e-32)},Ys.PI_2.get=function(){return new Xs(1.5707963267948966,6123233995736766e-32)},Ys.E.get=function(){return new Xs(2.718281828459045,14456468917292502e-32)},Ys.NaN.get=function(){return new Xs(As.NaN,As.NaN)},Ys.EPS.get=function(){return 123259516440783e-46},Ys.SPLIT.get=function(){return 134217729},Ys.MAX_PRINT_DIGITS.get=function(){return 32},Ys.TEN.get=function(){return Xs.valueOf(10)},Ys.ONE.get=function(){return Xs.valueOf(1)},Ys.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ys.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Xs,Ys);var el=function(){},tl={DP_SAFE_EPSILON:{configurable:!0}};el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.orientationIndex=function(e,t,n){var r=el.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=Xs.valueOf(t.x).selfAdd(-e.x),o=Xs.valueOf(t.y).selfAdd(-e.y),a=Xs.valueOf(n.x).selfAdd(-t.x),s=Xs.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},el.signOfDet2x2=function(e,t,n,r){return e.multiply(r).selfSubtract(t.multiply(n)).signum()},el.intersection=function(e,t,n,r){var i=Xs.valueOf(r.y).selfSubtract(n.y).selfMultiply(Xs.valueOf(t.x).selfSubtract(e.x)),o=Xs.valueOf(r.x).selfSubtract(n.x).selfMultiply(Xs.valueOf(t.y).selfSubtract(e.y)),a=i.subtract(o),s=Xs.valueOf(r.x).selfSubtract(n.x).selfMultiply(Xs.valueOf(e.y).selfSubtract(n.y)),l=Xs.valueOf(r.y).selfSubtract(n.y).selfMultiply(Xs.valueOf(e.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=Xs.valueOf(e.x).selfAdd(Xs.valueOf(t.x).selfSubtract(e.x).selfMultiply(u)).doubleValue(),h=Xs.valueOf(t.x).selfSubtract(e.x).selfMultiply(Xs.valueOf(e.y).selfSubtract(n.y)),f=Xs.valueOf(t.y).selfSubtract(e.y).selfMultiply(Xs.valueOf(e.x).selfSubtract(n.x)),d=h.subtract(f).selfDivide(a).doubleValue(),p=Xs.valueOf(n.y).selfAdd(Xs.valueOf(r.y).selfSubtract(n.y).selfMultiply(d)).doubleValue();return new zs(c,p)},el.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),a=i-o;if(0<i){if(o<=0)return el.signum(a);r=i+o}else{if(!(i<0))return el.signum(a);if(0<=o)return el.signum(a);r=-i-o}var s=el.DP_SAFE_EPSILON*r;return s<=a||s<=-a?el.signum(a):2},el.signum=function(e){return 0<e?1:e<0?-1:0},tl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(el,tl);var nl=function(){},rl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};rl.X.get=function(){return 0},rl.Y.get=function(){return 1},rl.Z.get=function(){return 2},rl.M.get=function(){return 3},nl.prototype.setOrdinate=function(e,t,n){},nl.prototype.size=function(){},nl.prototype.getOrdinate=function(e,t){},nl.prototype.getCoordinate=function(){},nl.prototype.getCoordinateCopy=function(e){},nl.prototype.getDimension=function(){},nl.prototype.getX=function(e){},nl.prototype.clone=function(){},nl.prototype.expandEnvelope=function(e){},nl.prototype.copy=function(){},nl.prototype.getY=function(e){},nl.prototype.toCoordinateArray=function(){},nl.prototype.interfaces_=function(){return[Bs]},nl.prototype.getClass=function(){return nl},Object.defineProperties(nl,rl);var il=function(){},ol=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(il),al=function(){};al.arraycopy=function(e,t,n,r,i){for(var o=0,a=t;a<t+i;a++)n[r+o]=e[a],o++},al.getProperty=function(e){return{"line.separator":"\n"}[e]};var sl=function e(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof zs&&arguments[1]instanceof zs){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3],m=h.y-f.y,g=f.x-h.x,y=h.x*f.y-f.x*h.y,_=d.y-p.y,v=p.x-d.x,b=d.x*p.y-p.x*d.y;this.x=g*b-v*y,this.y=_*y-m*b,this.w=m*v-_*g}};sl.prototype.getY=function(){var e=this.y/this.w;if(As.isNaN(e)||As.isInfinite(e))throw new ol;return e},sl.prototype.getX=function(){var e=this.x/this.w;if(As.isNaN(e)||As.isInfinite(e))throw new ol;return e},sl.prototype.getCoordinate=function(){var e=new zs;return e.x=this.getX(),e.y=this.getY(),e},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,f=(s*a-i*u)/c;if(As.isNaN(h)||As.isInfinite(h)||As.isNaN(f)||As.isInfinite(f))throw new ol;return new zs(h,f)};var ll=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof zs){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},ul={serialVersionUID:{configurable:!0}};ll.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ll.prototype.equals=function(e){if(!(e instanceof ll))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},ll.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new ll;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new ll(t,r,n,i)},ll.prototype.isNull=function(){return this._maxx<this._minx},ll.prototype.getMaxX=function(){return this._maxx},ll.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof zs){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof ll){var t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},ll.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof zs){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},ll.prototype.getMinY=function(){return this._miny},ll.prototype.getMinX=function(){return this._minx},ll.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof zs){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof ll){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},ll.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t},ll.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ll.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},ll.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)},ll.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ll.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ll.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ll.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return t<e?e:t},ll.prototype.expandBy=function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ll.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof zs){var t=arguments[0];return this.covers(t)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},ll.prototype.centre=function(){return this.isNull()?null:new zs((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ll.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof zs){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof ll){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},ll.prototype.getMaxY=function(){return this._maxy},ll.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)},ll.prototype.hashCode=function(){var e=17;return 37*(e=37*(e=37*(e=37*e+zs.hashCode(this._minx))+zs.hashCode(this._maxx))+zs.hashCode(this._miny))+zs.hashCode(this._maxy)},ll.prototype.interfaces_=function(){return[Rs,ci]},ll.prototype.getClass=function(){return ll},ll.intersects=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l<u||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l<u||c<s))}},ul.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(ll,ul);var cl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},hl=function(e){this.geometryFactory=e||new Nu};hl.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=cl.typeStr.exec(e);if(-1!==e.search("EMPTY")&&((i=cl.emptyTypeStr.exec(e))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],dl[n]&&(t=dl[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t},hl.prototype.write=function(e){return this.extractGeometry(e)},hl.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!fl[t])return null;var n=t.toUpperCase();return e.isEmpty()?n+" EMPTY":n+"("+fl[t].apply(this,[e])+")"};var fl={coordinate:function(e){return e.x+" "+e.y},point:function(e){return fl.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+fl.point.apply(this,[e._geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e._points._coordinates.length;n<r;++n)t.push(fl.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e._points._coordinates.length;n<r;++n)t.push(fl.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+fl.linestring.apply(this,[e._geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+fl.linestring.apply(this,[e._shell])+")");for(var n=0,r=e._holes.length;n<r;++n)t.push("("+fl.linestring.apply(this,[e._holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+fl.polygon.apply(this,[e._geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push(this.extractGeometry(e._geometries[n]));return t.join(",")}},dl={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(cl.spaces);return this.geometryFactory.createPoint(new zs(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(cl.trimParens,"$1"),r.push(dl.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].trim().split(cl.spaces),r.push(new zs(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].trim().split(cl.spaces),r.push(new zs(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(cl.parenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(cl.trimParens,"$1"),r.push(dl.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,r,i,o=e.trim().split(cl.parenComma),a=[],s=0,l=o.length;s<l;++s)t=o[s].replace(cl.trimParens,"$1"),n=dl.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(cl.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(cl.trimParens,"$1"),r.push(dl.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();for(var t=(e=e.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=t.length;r<i;++r)n.push(this.read(t[r]));return this.geometryFactory.createGeometryCollection(n)}},pl=function(e){this.parser=new hl(e)};pl.prototype.write=function(e){return this.parser.write(e)},pl.toLineString=function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var ml=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Error),gl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ml),yl=function(){};yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.shouldNeverReachHere=function(){if(0===arguments.length)yl.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new gl("Should never reach here"+(null!==e?": "+e:""))}},yl.isTrue=function(){var e,t;if(1===arguments.length)e=arguments[0],yl.isTrue(e,null);else if(2===arguments.length&&(e=arguments[0],t=arguments[1],!e))throw null===t?new gl:new gl(t)},yl.equals=function(){var e,t,n;if(2===arguments.length)e=arguments[0],t=arguments[1],yl.equals(e,t,null);else if(3===arguments.length&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new gl("Expected "+e+" but encountered "+t+(null!==n?": "+n:""))};var _l=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new zs,this._intPt[1]=new zs,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},vl={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};_l.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]},_l.prototype.getTopologySummary=function(){var e=new Ks;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()},_l.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)},_l.prototype.getIntersectionNum=function(){return this._result},_l.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}},_l.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},_l.prototype.setPrecisionModel=function(e){this._precisionModel=e},_l.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}},_l.prototype.getIntersection=function(e){return this._intPt[e]},_l.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},_l.prototype.hasIntersection=function(){return this._result!==_l.NO_INTERSECTION},_l.prototype.getEdgeDistance=function(e,t){return _l.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])},_l.prototype.isCollinear=function(){return this._result===_l.COLLINEAR_INTERSECTION},_l.prototype.toString=function(){return pl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+pl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},_l.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]},_l.prototype.isIntersection=function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1},_l.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l},_l.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))o=i<r?r:i;else{var a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);0!==(o=i<r?a:s)||e.equals(t)||(o=Math.max(a,s))}return yl.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o},_l.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return yl.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o},vl.DONT_INTERSECT.get=function(){return 0},vl.DO_INTERSECT.get=function(){return 1},vl.COLLINEAR.get=function(){return 2},vl.NO_INTERSECTION.get=function(){return 0},vl.POINT_INTERSECTION.get=function(){return 1},vl.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(_l,vl);var bl=function(l){function a(){l.apply(this,arguments)}return l&&(a.__proto__=l),((a.prototype=Object.create(l&&l.prototype)).constructor=a).prototype.isInSegmentEnvelopes=function(e){var t=new ll(this._inputLines[0][0],this._inputLines[0][1]),n=new ll(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)},a.prototype.computeIntersection=function(){if(3!==arguments.length)return l.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],t=arguments[1],n=arguments[2];if(this._isProper=!1,ll.intersects(t,n,e)&&0===kl.orientationIndex(t,n,e)&&0===kl.orientationIndex(n,t,e))return this._isProper=!0,(e.equals(t)||e.equals(n))&&(this._isProper=!1),this._result=l.POINT_INTERSECTION,null;this._result=l.NO_INTERSECTION},a.prototype.normalizeToMinimum=function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},a.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=sl.intersection(t,n,r,i)}catch(e){if(!(e instanceof ol))throw e;o=a.nearestEndpoint(t,n,r,i)}return o},a.prototype.intersection=function(e,t,n,r){var i=this.intersectionWithNormalization(e,t,n,r);return this.isInSegmentEnvelopes(i)||(i=new zs(a.nearestEndpoint(e,t,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},a.prototype.smallestInAbsValue=function(e,t,n,r){var i=e,o=Math.abs(i);return Math.abs(t)<o&&(i=t,o=Math.abs(t)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},a.prototype.checkDD=function(e,t,n,r,i){var o=el.intersection(e,t,n,r),a=this.isInSegmentEnvelopes(o);al.out.println("DD in env = "+a+"  --------------------- "+o),1e-4<i.distance(o)&&al.out.println("Distance = "+i.distance(o))},a.prototype.intersectionWithNormalization=function(e,t,n,r){var i=new zs(e),o=new zs(t),a=new zs(n),s=new zs(r),l=new zs;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},a.prototype.computeCollinearIntersection=function(e,t,n,r){var i=ll.intersects(e,t,n),o=ll.intersects(e,t,r),a=ll.intersects(n,r,e),s=ll.intersects(n,r,t);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,l.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=e,this._intPt[1]=t,l.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):l.NO_INTERSECTION},a.prototype.normalizeToEnvCentre=function(e,t,n,r,i){var o=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,l=e.y>t.y?e.y:t.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,d=((u<o?o:u)+(s<h?s:h))/2,p=((c<a?a:c)+(l<f?l:f))/2;i.x=d,i.y=p,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},a.prototype.computeIntersect=function(e,t,n,r){if(this._isProper=!1,!ll.intersects(e,t,n,r))return l.NO_INTERSECTION;var i=kl.orientationIndex(e,t,n),o=kl.orientationIndex(e,t,r);if(0<i&&0<o||i<0&&o<0)return l.NO_INTERSECTION;var a=kl.orientationIndex(n,r,e),s=kl.orientationIndex(n,r,t);return 0<a&&0<s||a<0&&s<0?l.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(e,t,n,r):(0===i||0===o||0===a||0===s?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:0===i?this._intPt[0]=new zs(n):0===o?this._intPt[0]=new zs(r):0===a?this._intPt[0]=new zs(e):0===s&&(this._intPt[0]=new zs(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,n,r)),l.POINT_INTERSECTION)},a.prototype.interfaces_=function(){return[]},a.prototype.getClass=function(){return a},a.nearestEndpoint=function(e,t,n,r){var i=e,o=kl.distancePointLine(e,n,r),a=kl.distancePointLine(t,n,r);return a<o&&(o=a,i=t),(a=kl.distancePointLine(n,e,t))<o&&(o=a,i=n),(a=kl.distancePointLine(r,e,t))<o&&(o=a,i=r),i},a}(_l),wl=function(){};wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl},wl.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,a=n.y-t.y;return wl.signOfDet2x2(r,i,o,a)},wl.signOfDet2x2=function(e,t,n,r){var i=null,o=null,a=null;if(i=1,0===e||0===r)return 0===t||0===n?0:0<t?0<n?-i:i:0<n?i:-i;if(0===t||0===n)return 0<r?0<e?i:-i:0<e?-i:i;if(0<t?0<r?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):r=t<=-r?(i=-i,n=-n,-r):(o=e,e=-n,n=o,o=t,t=-r,o):0<r?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):r=r<=t?(e=-e,t=-t,n=-n,-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,o),0<e){if(!(0<n))return i;if(!(e<=n))return i}else{if(0<n)return-i;if(!(n<=e))return-i;i=-i,e=-e,n=-n}for(;;){if((r-=(a=Math.floor(n/e))*t)<0)return-i;if(t<r)return i;if((n-=a*e)+n<e){if(t<r+r)return i}else{if(r+r<t)return-i;n=e-n,r=t-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((t-=(a=Math.floor(e/n))*r)<0)return i;if(r<t)return-i;if((e-=a*n)+e<n){if(r<t+t)return-i}else{if(t+t<r)return i;e=n-e,t=r-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}};var xl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};xl.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return r<n&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,a=t.x-this._p.x,s=t.y-this._p.y,l=wl.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),0<l&&this._crossingCount++}},xl.prototype.isPointInPolygon=function(){return this.getLocation()!==$s.EXTERIOR},xl.prototype.getLocation=function(){return this._isPointOnSegment?$s.BOUNDARY:this._crossingCount%2==1?$s.INTERIOR:$s.EXTERIOR},xl.prototype.isOnSegment=function(){return this._isPointOnSegment},xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl},xl.locatePointInRing=function(){if(arguments[0]instanceof zs&&Hs(arguments[1],nl)){for(var e=arguments[0],t=arguments[1],n=new xl(e),r=new zs,i=new zs,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof zs&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],l=new xl(a),u=1;u<s.length;u++){var c=s[u],h=s[u-1];if(l.countSegment(c,h),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var kl=function(){},Ll={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl},kl.orientationIndex=function(e,t,n){return el.orientationIndex(e,t,n)},kl.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y;t+=i*(e[r-1].y-o)}return t/2}if(Hs(arguments[0],nl)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new zs,u=new zs,c=new zs;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var f=0,d=1;d<s-1;d++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(d+1,c),c.x-=h,f+=u.x*(l.y-c.y);return f/2}},kl.distanceLineLine=function(e,t,n,r){if(e.equals(t))return kl.distancePointLine(e,n,r);if(n.equals(r))return kl.distancePointLine(r,e,t);var i=!1;if(ll.intersects(e,t,n,r)){var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),s=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o,l=a/o;(l<0||1<l||s<0||1<s)&&(i=!0)}}else i=!0;return i?Ws.min(kl.distancePointLine(e,n,r),kl.distancePointLine(t,n,r),kl.distancePointLine(n,e,t),kl.distancePointLine(r,e,t)):0},kl.isPointInRing=function(e,t){return kl.locatePointInRing(e,t)!==$s.EXTERIOR},kl.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new zs;e.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<t;a++){e.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},kl.isCCW=function(e){var t=e.length-1;if(t<3)throw new Ns("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}for(var a=r;(a-=1)<0&&(a=t),e[a].equals2D(n)&&a!==r;);for(var s=r;e[s=(s+1)%t].equals2D(n)&&s!==r;);var l=e[a],u=e[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=kl.computeOrientation(l,n,u);return 0===c?l.x>u.x:0<c},kl.locatePointInRing=function(e,t){return xl.locatePointInRing(e,t)},kl.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)},kl.computeOrientation=function(e,t,n){return kl.orientationIndex(e,t,n)},kl.distancePointLine=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(0===t.length)throw new Ns("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=kl.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(1<=u)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},kl.isOnLine=function(e,t){for(var n=new bl,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1},Ll.CLOCKWISE.get=function(){return-1},Ll.RIGHT.get=function(){return kl.CLOCKWISE},Ll.COUNTERCLOCKWISE.get=function(){return 1},Ll.LEFT.get=function(){return kl.COUNTERCLOCKWISE},Ll.COLLINEAR.get=function(){return 0},Ll.STRAIGHT.get=function(){return kl.COLLINEAR},Object.defineProperties(kl,Ll);var Cl=function(){};Cl.prototype.filter=function(e){},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl};var Sl=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Ml={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Sl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Sl.SORTINDEX_GEOMETRYCOLLECTION},Sl.prototype.getFactory=function(){return this._factory},Sl.prototype.getGeometryN=function(e){return this},Sl.prototype.getArea=function(){return 0},Sl.prototype.isRectangle=function(){return!1},Sl.prototype.equals=function(){if(arguments[0]instanceof Sl){var e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof Sl))return!1;var n=t;return this.equalsExact(n)}},Sl.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)},Sl.prototype.geometryChanged=function(){this.apply(Sl.geometryChangedFilter)},Sl.prototype.geometryChangedAction=function(){this._envelope=null},Sl.prototype.equalsNorm=function(e){return null!==e&&this.norm().equalsExact(e.norm())},Sl.prototype.getLength=function(){return 0},Sl.prototype.getNumGeometries=function(){return 1},Sl.prototype.compareTo=function(){if(1===arguments.length){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Sl.prototype.getUserData=function(){return this._userData},Sl.prototype.getSRID=function(){return this._SRID},Sl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Sl.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Sl.SORTINDEX_GEOMETRYCOLLECTION)throw new Ns("This method does not support GeometryCollection arguments")},Sl.prototype.equal=function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n},Sl.prototype.norm=function(){var e=this.copy();return e.normalize(),e},Sl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Sl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new ll(this._envelope)},Sl.prototype.setSRID=function(e){this._SRID=e},Sl.prototype.setUserData=function(e){this._userData=e},Sl.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},Sl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Sl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Sl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Sl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Sl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Sl.SORTINDEX_MULTIPOLYGON},Sl.prototype.interfaces_=function(){return[Bs,Rs,ci]},Sl.prototype.getClass=function(){return Sl},Sl.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},Sl.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1},Ml.serialVersionUID.get=function(){return 0x799ea46522854c00},Ml.SORTINDEX_POINT.get=function(){return 0},Ml.SORTINDEX_MULTIPOINT.get=function(){return 1},Ml.SORTINDEX_LINESTRING.get=function(){return 2},Ml.SORTINDEX_LINEARRING.get=function(){return 3},Ml.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ml.SORTINDEX_POLYGON.get=function(){return 5},Ml.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ml.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ml.geometryChangedFilter.get=function(){return Pl},Object.defineProperties(Sl,Ml);var Pl=function(){};Pl.interfaces_=function(){return[Cl]},Pl.filter=function(e){e.geometryChangedAction()};var El=function(){};El.prototype.filter=function(e){},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El};var Tl=function(){},Il={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Tl.prototype.isInBoundary=function(e){},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Il.Mod2BoundaryNodeRule.get=function(){return Ol},Il.EndPointBoundaryNodeRule.get=function(){return Dl},Il.MultiValentEndPointBoundaryNodeRule.get=function(){return Nl},Il.MonoValentEndPointBoundaryNodeRule.get=function(){return Al},Il.MOD2_BOUNDARY_RULE.get=function(){return new Ol},Il.ENDPOINT_BOUNDARY_RULE.get=function(){return new Dl},Il.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Nl},Il.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Al},Il.OGC_SFS_BOUNDARY_RULE.get=function(){return Tl.MOD2_BOUNDARY_RULE},Object.defineProperties(Tl,Il);var Ol=function(){};Ol.prototype.isInBoundary=function(e){return e%2==1},Ol.prototype.interfaces_=function(){return[Tl]},Ol.prototype.getClass=function(){return Ol};var Dl=function(){};Dl.prototype.isInBoundary=function(e){return 0<e},Dl.prototype.interfaces_=function(){return[Tl]},Dl.prototype.getClass=function(){return Dl};var Nl=function(){};Nl.prototype.isInBoundary=function(e){return 1<e},Nl.prototype.interfaces_=function(){return[Tl]},Nl.prototype.getClass=function(){return Nl};var Al=function(){};Al.prototype.isInBoundary=function(e){return 1===e},Al.prototype.interfaces_=function(){return[Tl]},Al.prototype.getClass=function(){return Al};var jl=function(){};jl.prototype.add=function(){},jl.prototype.addAll=function(){},jl.prototype.isEmpty=function(){},jl.prototype.iterator=function(){},jl.prototype.size=function(){},jl.prototype.toArray=function(){},jl.prototype.remove=function(){};var Rl=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),Bl=function(){};Bl.prototype.hasNext=function(){},Bl.prototype.next=function(){},Bl.prototype.remove=function(){};var Fl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(jl);(hi.prototype=new Error).name="NoSuchElementException";var zl=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof jl&&this.addAll(arguments[0])}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,jl]},t.prototype.add=function(e){return 1===arguments.length?this.array_.push(e):this.array_.splice(e,arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},t.prototype.iterator=function(){return new ql(this)},t.prototype.get=function(e){if(e<0||e>=this.size())throw new Rl;return this.array_[e]},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},t.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t},t}(Fl),ql=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new hi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Bl),Ul=function(v){function e(){if(v.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.ensureCapacity(t.length),this.add(t,n)}}v&&(e.__proto__=v),(e.prototype=Object.create(v&&v.prototype)).constructor=e;var t={coordArrayType:{configurable:!0}};return t.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(e){return this.get(e)},e.prototype.addAll=function(){if(2!==arguments.length)return v.prototype.addAll.apply(this,arguments);for(var e=arguments[0],t=arguments[1],n=!1,r=e.iterator();r.hasNext();)this.add(r.next(),t),n=!0;return n},e.prototype.clone=function(){for(var e=v.prototype.clone.call(this),t=0;t<this.size();t++)e.add(t,this.get(t).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];v.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return this.add(t,n,!0),!0}if(arguments[0]instanceof zs&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(r))return null;v.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],s);else for(var u=a.length-1;0<=u;u--)this.add(a[u],s);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof zs){var c=arguments[0],h=arguments[1];if(!arguments[2]){var f=this.size();if(0<f){if(0<c&&this.get(c-1).equals2D(h))return null;if(c<f&&this.get(c).equals2D(h))return null}}v.prototype.add.call(this,c,h)}}else if(4===arguments.length){var d=arguments[0],p=arguments[1],m=arguments[2],g=arguments[3],y=1;g<m&&(y=-1);for(var _=m;_!==g;_+=y)this.add(d[_],p);return!0}},e.prototype.closeRing=function(){0<this.size()&&this.add(new zs(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,t),e}(zl),Gl=function(){},$l={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};$l.ForwardComparator.get=function(){return Vl},$l.BidirectionalComparator.get=function(){return Hl},$l.coordArrayType.get=function(){return new Array(0).fill(null)},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))},Gl.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(Gl.indexOf(r,t)<0)return r}return null},Gl.scroll=function(e,t){var n=Gl.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);al.arraycopy(e,n,r,0,e.length-n),al.arraycopy(e,0,r,e.length-n,n),al.arraycopy(r,0,e,0,e.length)},Gl.equals=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Gl.intersection=function(e,t){for(var n=new Ul,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()},Gl.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},Gl.removeRepeatedPoints=function(e){return Gl.hasRepeatedPoints(e)?new Ul(e,!1).toCoordinateArray():e},Gl.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}},Gl.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t).fill(null);if(0===t)return r;for(var i=0,o=0;o<e.length;o++)null!==e[o]&&(r[i++]=e[o]);return r},Gl.copyDeep=function(){if(1===arguments.length){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new zs(e[n]);return t}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new zs(r[i+l])},Gl.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Gl.envelope=function(e){for(var t=new ll,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t},Gl.toCoordinateArray=function(e){return e.toArray(Gl.coordArrayType)},Gl.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]},Gl.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1},Gl.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1},Gl.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(0!==r)return r;n++}return n<t.length?-1:n<e.length?1:0},Gl.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(null===t||0<t.compareTo(e[n]))&&(t=e[n]);return t},Gl.extract=function(e,t,n){t=Ws.clamp(t,0,e.length);var r=(n=Ws.clamp(n,-1,e.length))-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=t;a<=n;a++)i[o++]=e[a];return i},Object.defineProperties(Gl,$l);var Vl=function(){};Vl.prototype.compare=function(e,t){return Gl.compare(e,t)},Vl.prototype.interfaces_=function(){return[Fs]},Vl.prototype.getClass=function(){return Vl};var Hl=function(){};Hl.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Gl.compare(n,r);return Gl.isEqualReversed(n,r)?0:i},Hl.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Gl.increasingDirection(n),o=Gl.increasingDirection(r),a=0<i?0:n.length-1,s=0<o?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},Hl.prototype.interfaces_=function(){return[Fs]},Hl.prototype.getClass=function(){return Hl};var Wl=function(){};Wl.prototype.get=function(){},Wl.prototype.put=function(){},Wl.prototype.size=function(){},Wl.prototype.values=function(){},Wl.prototype.entrySet=function(){};var Ql=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Wl);(fi.prototype=new Error).name="OperationNotSupported",(di.prototype=new jl).contains=function(){};var Kl=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof jl&&this.addAll(arguments[0])}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(this.array_[t]===e)return!0;return!1},t.prototype.add=function(e){return!this.contains(e)&&(this.array_.push(e),!0)},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.remove=function(e){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},t.prototype.iterator=function(){return new Zl(this)},t}(di),Zl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new hi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new fi},e}(Bl),Jl=0;(vi.prototype=new Ql).get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(0<n))return t.value;t=t.right}}return null},vi.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Jl,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=e.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=t,o}i=i.right}}while(null!==i);var a={key:e,left:null,right:null,value:t,parent:n,color:Jl,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},vi.prototype.fixAfterInsertion=function(e){for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)if(mi(e)===yi(mi(mi(e)))){var t=_i(mi(mi(e)));1===pi(t)?(gi(mi(e),Jl),gi(t,Jl),gi(mi(mi(e)),1),e=mi(mi(e))):(e===_i(mi(e))&&(e=mi(e),this.rotateLeft(e)),gi(mi(e),Jl),gi(mi(mi(e)),1),this.rotateRight(mi(mi(e))))}else{var n=yi(mi(mi(e)));1===pi(n)?(gi(mi(e),Jl),gi(n,Jl),gi(mi(mi(e)),1),e=mi(mi(e))):(e===yi(mi(e))&&(e=mi(e),this.rotateRight(e)),gi(mi(e),Jl),gi(mi(mi(e)),1),this.rotateLeft(mi(mi(e))))}this.root_.color=Jl},vi.prototype.values=function(){var e=new zl,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=vi.successor(t));)e.add(t.value);return e},vi.prototype.entrySet=function(){var e=new Kl,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=vi.successor(t));)e.add(t);return e},vi.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,(t.left=e).parent=t}},vi.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,(t.right=e).parent=t}},vi.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},vi.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var n=e.parent,r=e;null!==n&&r===n.right;)n=(r=n).parent;return n},vi.prototype.size=function(){return this.size_};var Xl=function(){};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},bi.prototype=new di,(wi.prototype=new bi).contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(0===this.array_[t].compareTo(e))return!0;return!1},wi.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;t<n;t++)if(1===this.array_[t].compareTo(e))return this.array_.splice(t,0,e),!0;return this.array_.push(e),!0},wi.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},wi.prototype.remove=function(e){throw new fi},wi.prototype.size=function(){return this.array_.length},wi.prototype.isEmpty=function(){return 0===this.array_.length},wi.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},wi.prototype.iterator=function(){return new Yl(this)};var Yl=function(e){this.treeSet_=e,this.position_=0};Yl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new hi;return this.treeSet_.array_[this.position_++]},Yl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Yl.prototype.remove=function(){throw new fi};var eu=function(){};eu.sort=function(){var e,t,n,r,i=arguments[0];if(1===arguments.length)r=function(e,t){return e.compareTo(t)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(e,t){return n.compare(e,t)},i.sort(r);else if(3===arguments.length){(t=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length));for(i.splice(0,i.length),e=0;e<o.length;e++)i.push(o[e])}else if(4===arguments.length)for(t=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(e,t){return n.compare(e,t)},t.sort(r),o=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length)),i.splice(0,i.length),e=0;e<o.length;e++)i.push(o[e])},eu.asList=function(e){for(var t=new zl,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var tu=function(){},nu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};nu.P.get=function(){return 0},nu.L.get=function(){return 1},nu.A.get=function(){return 2},nu.FALSE.get=function(){return-1},nu.TRUE.get=function(){return-2},nu.DONTCARE.get=function(){return-3},nu.SYM_FALSE.get=function(){return"F"},nu.SYM_TRUE.get=function(){return"T"},nu.SYM_DONTCARE.get=function(){return"*"},nu.SYM_P.get=function(){return"0"},nu.SYM_L.get=function(){return"1"},nu.SYM_A.get=function(){return"2"},tu.prototype.interfaces_=function(){return[]},tu.prototype.getClass=function(){return tu},tu.toDimensionSymbol=function(e){switch(e){case tu.FALSE:return tu.SYM_FALSE;case tu.TRUE:return tu.SYM_TRUE;case tu.DONTCARE:return tu.SYM_DONTCARE;case tu.P:return tu.SYM_P;case tu.L:return tu.SYM_L;case tu.A:return tu.SYM_A}throw new Ns("Unknown dimension value: "+e)},tu.toDimensionValue=function(e){switch(Js.toUpperCase(e)){case tu.SYM_FALSE:return tu.FALSE;case tu.SYM_TRUE:return tu.TRUE;case tu.SYM_DONTCARE:return tu.DONTCARE;case tu.SYM_P:return tu.P;case tu.SYM_L:return tu.L;case tu.SYM_A:return tu.A}throw new Ns("Unknown dimension symbol: "+e)},Object.defineProperties(tu,nu);var ru=function(){};ru.prototype.filter=function(e){},ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru};var iu=function(){};iu.prototype.filter=function(e,t){},iu.prototype.isDone=function(){},iu.prototype.isGeometryChanged=function(){},iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu};var ou=function(i){function n(e,t){if(i.call(this,t),this._geometries=e||[],i.hasNullElements(this._geometries))throw new Ns("geometries must not contain null elements")}i&&(n.__proto__=i);var e={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var e=new ll,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e},n.prototype.getGeometryN=function(e){return this._geometries[e]},n.prototype.getSortIndex=function(){return i.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)e[++t]=r[i];return e},n.prototype.getArea=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e},n.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],t))return!1;return!0},n.prototype.normalize=function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();eu.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var e=tu.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e},n.prototype.getDimension=function(){for(var e=tu.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e},n.prototype.getLength=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e},n.prototype.getNumPoints=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=new wi(eu.asList(this._geometries)),n=new wi(eu.asList(e._geometries));return this.compare(t,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),l=0;l<a&&l<s;){var u=this.getGeometryN(l),c=o.getGeometryN(l),h=u.compareToSameClass(c,i);if(0!==h)return h;l++}return l<a?1:l<s?-1:0}},n.prototype.apply=function(){if(Hs(arguments[0],El))for(var e=arguments[0],t=0;t<this._geometries.length;t++)this._geometries[t].apply(e);else if(Hs(arguments[0],iu)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Hs(arguments[0],ru)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Hs(arguments[0],Cl)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),yl.shouldNeverReachHere(),null},n.prototype.clone=function(){var e=i.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var t=0;t<this._geometries.length;t++)e._geometries[t]=this._geometries[t].clone();return e},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)},n.prototype.isEmpty=function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},e.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,e),n}(Sl),au=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return Sl.SORTINDEX_MULTILINESTRING},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&n.prototype.equalsExact.call(this,e,t)},r.prototype.getBoundaryDimension=function(){return this.isClosed()?tu.FALSE:0},r.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0},r.prototype.getDimension=function(){return 1},r.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[e-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(t)},r.prototype.getBoundary=function(){return new su(this).getBoundary()},r.prototype.getGeometryType=function(){return"MultiLineString"},r.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new r(e,this._factory)},r.prototype.interfaces_=function(){return[Xl]},r.prototype.getClass=function(){return r},e.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(r,e),r}(ou),su=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var e=arguments[0],t=Tl.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};su.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},su.prototype.getBoundary=function(){return this._geom instanceof fu?this.boundaryLineString(this._geom):this._geom instanceof au?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},su.prototype.boundaryLineString=function(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},su.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},su.prototype.computeBoundaryCoordinates=function(e){var t=new zl;this._endpointMap=new vi;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&t.add(o.getKey())}return Gl.toCoordinateArray(t)},su.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);null===t&&(t=new lu,this._endpointMap.put(e,t)),t.count++},su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},su.getBoundary=function(){if(1===arguments.length){var e=arguments[0];return new su(e).getBoundary()}if(2===arguments.length){var t=arguments[0],n=arguments[1];return new su(t,n).getBoundary()}};var lu=function(){this.count=null};lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu};var uu=function(){},cu={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu},uu.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)},uu.getStackTrace=function(){if(1===arguments.length){var e=arguments[0],t=new function(){},n=new function(){}(t);return e.printStackTrace(n),t.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(uu.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+uu.NEWLINE}catch(e){if(!(e instanceof xi))throw e;yl.shouldNeverReachHere()}return o}},uu.split=function(e,t){for(var n=t.length,r=new zl,i=""+e,o=i.indexOf(t);0<=o;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(t)}0<i.length&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},uu.toString=function(){if(1===arguments.length){var e=arguments[0];return uu.SIMPLE_ORDINATE_FORMAT.format(e)}},uu.spaces=function(e){return uu.chars(" ",e)},cu.NEWLINE.get=function(){return al.getProperty("line.separator")},cu.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(uu,cu);var hu=function(){};hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu},hu.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))},hu.isRing=function(e){var t=e.size();return 0===t||!(t<=3)&&e.getOrdinate(0,nl.X)===e.getOrdinate(t-1,nl.X)&&e.getOrdinate(0,nl.Y)===e.getOrdinate(t-1,nl.Y)},hu.isEqual=function(e,t){var n=e.size();if(n!==t.size())return!1;for(var r=Math.min(e.getDimension(),t.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=e.getOrdinate(i,o),s=t.getOrdinate(i,o);if(!(e.getOrdinate(i,o)===t.getOrdinate(i,o)||As.isNaN(a)&&As.isNaN(s)))return!1}return!0},hu.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(hu.copy(t,0,r,0,i),0<i)for(var o=i;o<n;o++)hu.copy(t,i-1,r,o,1);return r},hu.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)hu.swap(e,r,t-r)},hu.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}},hu.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)hu.copyCoord(e,t+o,n,r+o)},hu.toString=function(){if(1===arguments.length){var e=arguments[0],t=e.size();if(0===t)return"()";var n=e.getDimension(),r=new Ks;r.append("(");for(var i=0;i<t;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(uu.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}},hu.ensureValidRing=function(e,t){var n=t.size();return 0===n?t:n<=3?hu.createClosedRing(e,t,4):t.getOrdinate(0,nl.X)===t.getOrdinate(n-1,nl.X)&&t.getOrdinate(0,nl.Y)===t.getOrdinate(n-1,nl.Y)?t:hu.createClosedRing(e,t,n+1)},hu.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();hu.copy(t,0,r,0,i);for(var o=i;o<n;o++)hu.copy(t,0,r,o,1);return r};var fu=function(i){function t(e,t){i.call(this,t),this._points=null,this.init(e)}i&&(t.__proto__=i);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ll:this._points.expandEnvelope(new ll)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return i.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),t))return!1;return!0},t.prototype.normalize=function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t)))return 0<this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))&&hu.reverse(this._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?tu.FALSE:0},t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return kl.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var e=this._points.copy();return hu.reverse(e),this.getFactory().createLineString(e)},t.prototype.compareToSameClass=function(){if(1===arguments.length){for(var e=arguments[0],t=0,n=0;t<this._points.size()&&n<e._points.size();){var r=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(n));if(0!==r)return r;t++,n++}return t<this._points.size()?1:n<e._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},t.prototype.apply=function(){if(Hs(arguments[0],El))for(var e=arguments[0],t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t));else if(Hs(arguments[0],iu)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Hs(arguments[0],ru)?arguments[0].filter(this):Hs(arguments[0],Cl)&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return new su(this).getBoundary()},t.prototype.isEquivalentClass=function(e){return e instanceof t},t.prototype.clone=function(){var e=i.prototype.clone.call(this);return e._points=this._points.clone(),e},t.prototype.getCoordinateN=function(e){return this._points.getCoordinate(e)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return 0===this._points.size()},t.prototype.init=function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new Ns("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e},t.prototype.isCoordinate=function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},t.prototype.interfaces_=function(){return[Xl]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,e),t}(Sl),du=function(){};du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var pu=function(n){function e(e,t){n.call(this,t),this._coordinates=e||null,this.init(this._coordinates)}n&&(e.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ll;var e=new ll;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e},e.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),t))},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return tu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}},e.prototype.apply=function(){if(Hs(arguments[0],El)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(Hs(arguments[0],iu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else Hs(arguments[0],ru)?arguments[0].filter(this):Hs(arguments[0],Cl)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=n.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),yl.isTrue(e.size()<=1),this._coordinates=e},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[du]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,t),e}(Sl),mu=function(){};mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu};var gu=function(a){function r(e,t,n){if(a.call(this,n),this._shell=null,(this._holes=null)===e&&(e=this.getFactory().createLinearRing()),null===t&&(t=[]),a.hasNullElements(t))throw new Ns("holes must not contain null elements");if(e.isEmpty()&&a.hasNonEmptyElements(t))throw new Ns("shell is empty but holes are not");this._shell=e,this._holes=t}a&&(r.__proto__=a);var e={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(a&&a.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return a.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)e[++t]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e},r.prototype.getArea=function(){var e=0;e+=Math.abs(kl.signedArea(this._shell.getCoordinateSequence()));for(var t=0;t<this._holes.length;t++)e-=Math.abs(kl.signedArea(this._holes[t].getCoordinateSequence()));return e},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var l=e.getX(s),u=e.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return a.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,r=this._shell,i=n._shell;if(!r.equalsExact(i,t))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],t))return!1;return!0},r.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)this.normalize(this._holes[e],!1);eu.sort(this._holes)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var r=new Array(t.getCoordinates().length-1).fill(null);al.arraycopy(t.getCoordinates(),0,r,0,r.length);var i=Gl.minCoordinate(t.getCoordinates());Gl.scroll(r,i),al.arraycopy(r,0,t.getCoordinates(),0,r.length),t.getCoordinates()[r.length]=r[0],kl.isCCW(t.getCoordinates())===n&&Gl.reverse(t.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e},r.prototype.getNumPoints=function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e},r.prototype.reverse=function(){var e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].copy().reverse();return e},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=this._shell,n=e._shell;return t.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,l=a.compareToSameClass(s,i);if(0!==l)return l;for(var u=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<u&&h<c;){var f=this.getInteriorRingN(h),d=o.getInteriorRingN(h),p=f.compareToSameClass(d,i);if(0!==p)return p;h++}return h<u?1:h<c?-1:0}},r.prototype.apply=function(e){if(Hs(e,El)){this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(Hs(e,iu)){if(this._shell.apply(e),!e.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(e),!e.isDone());n++);e.isGeometryChanged()&&this.geometryChanged()}else if(Hs(e,ru))e.filter(this);else if(Hs(e,Cl)){e.filter(this),this._shell.apply(e);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(e)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)},r.prototype.clone=function(){var e=a.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].clone();return e},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var e=this._shell.copy(),t=new Array(this._holes.length).fill(null),n=0;n<t.length;n++)t[n]=this._holes[n].copy();return new r(e,t,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(e){return this._holes[e]},r.prototype.interfaces_=function(){return[mu]},r.prototype.getClass=function(){return r},e.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,e),r}(Sl),yu=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return Sl.SORTINDEX_MULTIPOINT},r.prototype.isValid=function(){return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&n.prototype.equalsExact.call(this,e,t)},r.prototype.getCoordinate=function(){if(1!==arguments.length)return n.prototype.getCoordinate.apply(this,arguments);var e=arguments[0];return this._geometries[e].getCoordinate()},r.prototype.getBoundaryDimension=function(){return tu.FALSE},r.prototype.getDimension=function(){return 0},r.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},r.prototype.getGeometryType=function(){return"MultiPoint"},r.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new r(e,this._factory)},r.prototype.interfaces_=function(){return[du]},r.prototype.getClass=function(){return r},e.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(r,e),r}(ou),_u=function(n){function e(e,t){e instanceof zs&&t instanceof Nu&&(e=t.getCoordinateSequenceFactory().create(e)),n.call(this,e,t),this.validateConstruction()}n&&(e.__proto__=n);var t={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.getSortIndex=function(){return Sl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return tu.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},e.prototype.reverse=function(){var e=this._points.copy();return hu.reverse(e),this.getFactory().createLinearRing(e)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new Ns("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Ns("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.MINIMUM_VALID_SIZE.get=function(){return 4},t.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,t),e}(fu),vu=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return Sl.SORTINDEX_MULTIPOLYGON},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&n.prototype.equalsExact.call(this,e,t)},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new zl,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t].getBoundary(),r=0;r<n.getNumGeometries();r++)e.add(n.getGeometryN(r));var i=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(i))},r.prototype.getGeometryType=function(){return"MultiPolygon"},r.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new r(e,this._factory)},r.prototype.interfaces_=function(){return[mu]},r.prototype.getClass=function(){return r},e.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(r,e),r}(ou),bu=function(e){this._factory=e||null,this._isUserDataCopied=!1},wu={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};bu.prototype.setCopyUserData=function(e){this._isUserDataCopied=e},bu.prototype.edit=function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n},bu.prototype.editInternal=function(e,t){return null===this._factory&&(this._factory=e.getFactory()),e instanceof ou?this.editGeometryCollection(e,t):e instanceof gu?this.editPolygon(e,t):e instanceof pu?t.edit(e,this._factory):e instanceof fu?t.edit(e,this._factory):(yl.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)},bu.prototype.editGeometryCollection=function(e,t){for(var n=t.edit(e,this._factory),r=new zl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),t);null===o||o.isEmpty()||r.add(o)}return n.getClass()===yu?this._factory.createMultiPoint(r.toArray([])):n.getClass()===au?this._factory.createMultiLineString(r.toArray([])):n.getClass()===vu?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},bu.prototype.editPolygon=function(e,t){var n=t.edit(e,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new zl,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),t);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.GeometryEditorOperation=function(){},wu.NoOpGeometryOperation.get=function(){return xu},wu.CoordinateOperation.get=function(){return ku},wu.CoordinateSequenceOperation.get=function(){return Lu},Object.defineProperties(bu,wu);var xu=function(){};xu.prototype.edit=function(e,t){return e},xu.prototype.interfaces_=function(){return[bu.GeometryEditorOperation]},xu.prototype.getClass=function(){return xu};var ku=function(){};ku.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return null===n?e:e instanceof _u?t.createLinearRing(n):e instanceof fu?t.createLineString(n):e instanceof pu?0<n.length?t.createPoint(n[0]):t.createPoint():e},ku.prototype.interfaces_=function(){return[bu.GeometryEditorOperation]},ku.prototype.getClass=function(){return ku};var Lu=function(){};Lu.prototype.edit=function(e,t){return e instanceof _u?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof fu?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof pu?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e},Lu.prototype.interfaces_=function(){return[bu.GeometryEditorOperation]},Lu.prototype.getClass=function(){return Lu};var Cu=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new zs}else if(Hs(arguments[0],nl)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new zs}},Su={serialVersionUID:{configurable:!0}};Cu.prototype.setOrdinate=function(e,t,n){switch(t){case nl.X:this._coordinates[e].x=n;break;case nl.Y:this._coordinates[e].y=n;break;case nl.Z:this._coordinates[e].z=n;break;default:throw new Ns("invalid ordinateIndex")}},Cu.prototype.size=function(){return this._coordinates.length},Cu.prototype.getOrdinate=function(e,t){switch(t){case nl.X:return this._coordinates[e].x;case nl.Y:return this._coordinates[e].y;case nl.Z:return this._coordinates[e].z}return As.NaN},Cu.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._coordinates[e]}if(2===arguments.length){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}},Cu.prototype.getCoordinateCopy=function(e){return new zs(this._coordinates[e])},Cu.prototype.getDimension=function(){return this._dimension},Cu.prototype.getX=function(e){return this._coordinates[e].x},Cu.prototype.clone=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].clone();return new Cu(e,this._dimension)},Cu.prototype.expandEnvelope=function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e},Cu.prototype.copy=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].copy();return new Cu(e,this._dimension)},Cu.prototype.toString=function(){if(0<this._coordinates.length){var e=new Ks(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"},Cu.prototype.getY=function(e){return this._coordinates[e].y},Cu.prototype.toCoordinateArray=function(){return this._coordinates},Cu.prototype.interfaces_=function(){return[nl,ci]},Cu.prototype.getClass=function(){return Cu},Su.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Cu,Su);var Mu=function(){},Pu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Mu.prototype.readResolve=function(){return Mu.instance()},Mu.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new Cu(e)}if(Hs(arguments[0],nl)){var t=arguments[0];return new Cu(t)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return 3<r&&(r=3),r<2?new Cu(n):new Cu(n,r)}},Mu.prototype.interfaces_=function(){return[Gs,ci]},Mu.prototype.getClass=function(){return Mu},Mu.instance=function(){return Mu.instanceObject},Pu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Pu.instanceObject.get=function(){return new Mu},Object.defineProperties(Mu,Pu);var Eu=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(e){return this.map_.get(e)||null},t.prototype.put=function(e,t){return this.map_.set(e,t),t},t.prototype.values=function(){for(var e=new zl,t=this.map_.values(),n=t.next();!n.done;)e.add(n.value),n=t.next();return e},t.prototype.entrySet=function(){var t=new Kl;return this.map_.entries().forEach(function(e){return t.add(e)}),t},t.prototype.size=function(){return this.map_.size()},t}(Wl),Tu=function e(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ou){var t=arguments[0];(this._modelType=t)===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Iu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Tu.prototype.equals=function(e){if(!(e instanceof Tu))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale},Tu.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Zs(n).compareTo(new Zs(r))},Tu.prototype.getScale=function(){return this._scale},Tu.prototype.isFloating=function(){return this._modelType===Tu.FLOATING||this._modelType===Tu.FLOATING_SINGLE},Tu.prototype.getType=function(){return this._modelType},Tu.prototype.toString=function(){var e="UNKNOWN";return this._modelType===Tu.FLOATING?e="Floating":this._modelType===Tu.FLOATING_SINGLE?e="Floating-Single":this._modelType===Tu.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e},Tu.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var e=arguments[0];return As.isNaN(e)?e:this._modelType===Tu.FLOATING_SINGLE?e:this._modelType===Tu.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof zs){var t=arguments[0];if(this._modelType===Tu.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}},Tu.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===Tu.FLOATING?e=16:this._modelType===Tu.FLOATING_SINGLE?e=6:this._modelType===Tu.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e},Tu.prototype.setScale=function(e){this._scale=Math.abs(e)},Tu.prototype.interfaces_=function(){return[ci,Rs]},Tu.prototype.getClass=function(){return Tu},Tu.mostPrecise=function(e,t){return 0<=e.compareTo(t)?e:t},Iu.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Iu.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Tu,Iu);var Ou=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},Du={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ou.prototype.readResolve=function(){return Ou.nameToTypeMap.get(this._name)},Ou.prototype.toString=function(){return this._name},Ou.prototype.interfaces_=function(){return[ci]},Ou.prototype.getClass=function(){return Ou},Du.serialVersionUID.get=function(){return-552860263173159e4},Du.nameToTypeMap.get=function(){return new Eu},Object.defineProperties(Ou,Du),Tu.Type=Ou,Tu.FIXED=new Ou("FIXED"),Tu.FLOATING=new Ou("FLOATING"),Tu.FLOATING_SINGLE=new Ou("FLOATING SINGLE");var Nu=function e(){this._precisionModel=new Tu,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Hs(arguments[0],Gs)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Tu&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Au={serialVersionUID:{configurable:!0}};Nu.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new zs(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new zs(e.getMinX(),e.getMinY()),new zs(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new zs(e.getMinX(),e.getMinY()),new zs(e.getMinX(),e.getMaxY()),new zs(e.getMaxX(),e.getMaxY()),new zs(e.getMaxX(),e.getMinY()),new zs(e.getMinX(),e.getMinY())]),null)},Nu.prototype.createLineString=function(e){return e?e instanceof Array?new fu(this.getCoordinateSequenceFactory().create(e),this):Hs(e,nl)?new fu(e,this):void 0:new fu(this.getCoordinateSequenceFactory().create([]),this)},Nu.prototype.createMultiLineString=function(){if(0===arguments.length)return new au(null,this);if(1===arguments.length){var e=arguments[0];return new au(e,this)}},Nu.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===t&&(t=a),a!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===t)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Nu.toGeometryArray(e));var s=e.iterator().next();if(1<e.size()){if(s instanceof gu)return this.createMultiPolygon(Nu.toPolygonArray(e));if(s instanceof fu)return this.createMultiLineString(Nu.toLineStringArray(e));if(s instanceof pu)return this.createMultiPoint(Nu.toPointArray(e));yl.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},Nu.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)},Nu.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof zs){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(Hs(arguments[0],nl)){var t=arguments[0];return new pu(t,this)}}},Nu.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Nu.prototype.createPolygon=function(){if(0===arguments.length)return new gu(null,null,this);if(1===arguments.length){if(Hs(arguments[0],nl)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof _u){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new gu(r,i,this)}},Nu.prototype.getSRID=function(){return this._SRID},Nu.prototype.createGeometryCollection=function(){if(0===arguments.length)return new ou(null,this);if(1===arguments.length){var e=arguments[0];return new ou(e,this)}},Nu.prototype.createGeometry=function(e){return new bu(this).edit(e,{edit:function(){if(2===arguments.length){var e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})},Nu.prototype.getPrecisionModel=function(){return this._precisionModel},Nu.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Hs(arguments[0],nl)){var t=arguments[0];return new _u(t,this)}}},Nu.prototype.createMultiPolygon=function(){if(0===arguments.length)return new vu(null,this);if(1===arguments.length){var e=arguments[0];return new vu(e,this)}},Nu.prototype.createMultiPoint=function(){if(0===arguments.length)return new yu(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new yu(e,this)}if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Hs(arguments[0],nl)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());hu.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},Nu.prototype.interfaces_=function(){return[ci]},Nu.prototype.getClass=function(){return Nu},Nu.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.toGeometryArray=function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.getDefaultCoordinateSequenceFactory=function(){return Mu.instance()},Nu.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},Nu.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},Au.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Nu,Au);var ju=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Ru=function(e){this.geometryFactory=e||new Nu};Ru.prototype.read=function(e){var t,n=(t="string"==typeof e?JSON.parse(e):e).type;if(!Bu[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==ju.indexOf(n)?Bu[n].apply(this,[t.coordinates]):"GeometryCollection"===n?Bu[n].apply(this,[t.geometries]):Bu[n].apply(this,[t])},Ru.prototype.write=function(e){var t=e.getGeometryType();if(!Fu[t])throw new Error("Geometry is not supported");return Fu[t].apply(this,[e])};var Bu={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!Bu[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Bu.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new zs(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new zs(e[0],e[1]),new zs(e[2],e[1]),new zs(e[2],e[3]),new zs(e[0],e[3]),new zs(e[0],e[1])])},Point:function(e){var t=new zs(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(Bu.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=Bu.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(Bu.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=Bu.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var o=e[i],a=Bu.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(Bu.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},Fu={coordinate:function(e){return[e.x,e.y]},Point:function(e){return{type:"Point",coordinates:Fu.coordinate.apply(this,[e.getCoordinate()])}},MultiPoint:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=Fu.Point.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=e.getCoordinates(),r=0;r<n.length;++r){var i=n[r];t.push(Fu.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=Fu.LineString.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=Fu.LineString.apply(this,[e._shell]);t.push(n.coordinates);for(var r=0;r<e._holes.length;++r){var i=e._holes[r],o=Fu.LineString.apply(this,[i]);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=Fu.Polygon.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=r.getGeometryType();t.push(Fu[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},zu=function(e){this.geometryFactory=e||new Nu,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ru(this.geometryFactory)};zu.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===Tu.FIXED&&this.reducePrecision(t),t},zu.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])};var qu=function(){this.parser=new Ru(this.geometryFactory)};qu.prototype.write=function(e){return this.parser.write(e)};var Uu=function(){},Gu={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.opposite=function(e){return e===Uu.LEFT?Uu.RIGHT:e===Uu.RIGHT?Uu.LEFT:e},Gu.ON.get=function(){return 0},Gu.LEFT.get=function(){return 1},Gu.RIGHT.get=function(){return 2},Object.defineProperties(Uu,Gu),(ki.prototype=new Error).name="EmptyStackException",(Li.prototype=new Fl).add=function(e){return this.array_.push(e),!0},Li.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]},Li.prototype.push=function(e){return this.array_.push(e),e},Li.prototype.pop=function(e){if(0===this.array_.length)throw new ki;return this.array_.pop()},Li.prototype.peek=function(){if(0===this.array_.length)throw new ki;return this.array_[this.array_.length-1]},Li.prototype.empty=function(){return 0===this.array_.length},Li.prototype.isEmpty=function(){return this.empty()},Li.prototype.search=function(e){return this.array_.indexOf(e)},Li.prototype.size=function(){return this.array_.length},Li.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e};var $u=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};$u.prototype.getCoordinate=function(){return this._minCoord},$u.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n},$u.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();yl.isTrue(0<this._minIndex&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=kl.computeOrientation(this._minCoord,n,t),i=!1;t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===kl.COUNTERCLOCKWISE?i=!0:t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===kl.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},$u.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length)return-1;if(n[t].y===n[t+1].y)return-1;var r=Uu.LEFT;return n[t].y<n[t+1].y&&(r=Uu.RIGHT),r},$u.prototype.getEdge=function(){return this._orientedDe},$u.prototype.checkForRightmostCoordinate=function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])},$u.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},$u.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}yl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Uu.LEFT&&(this._orientedDe=this._minDe.getSym())},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var Vu=function(n){function r(e,t){n.call(this,r.msgWithCoord(e,t)),this.pt=t?new zs(t):null,this.name="TopologyException"}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getCoordinate=function(){return this.pt},r.prototype.interfaces_=function(){return[]},r.prototype.getClass=function(){return r},r.msgWithCoord=function(e,t){return t?e:e+" [ "+t+" ]"},r}(ml),Hu=function(){this.array_=[]};Hu.prototype.addLast=function(e){this.array_.push(e)},Hu.prototype.removeFirst=function(){return this.array_.shift()},Hu.prototype.isEmpty=function(){return 0===this.array_.length};var Wu=function(){this._finder=null,this._dirEdgeList=new zl,this._nodes=new zl,this._rightMostCoord=null,this._env=null,this._finder=new $u};Wu.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)},Wu.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Wu.prototype.computeNodeDepth=function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new Vu("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Wu.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Uu.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},Wu.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Wu.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();1<=t.getDepth(Uu.RIGHT)&&t.getDepth(Uu.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},Wu.prototype.computeDepths=function(e){var t=new Kl,n=new Hu,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();t.contains(s)||(n.addLast(s),t.add(s))}}}},Wu.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Wu.prototype.getEnvelope=function(){if(null===this._env){for(var e=new ll,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)e.expandToInclude(n[r]);this._env=e}return this._env},Wu.prototype.addReachable=function(e){var t=new Li;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}},Wu.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Uu.LEFT,e.getDepth(Uu.RIGHT)),t.setDepth(Uu.RIGHT,e.getDepth(Uu.LEFT))},Wu.prototype.add=function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||t.push(i)}},Wu.prototype.getNodes=function(){return this._nodes},Wu.prototype.getDirectedEdges=function(){return this._dirEdgeList},Wu.prototype.interfaces_=function(){return[Rs]},Wu.prototype.getClass=function(){return Wu};var Qu=function e(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Uu.ON]=n}else if(arguments[0]instanceof e){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Uu.ON]=o,this.location[Uu.LEFT]=a,this.location[Uu.RIGHT]=s}};Qu.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},Qu.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==$s.NONE)return!1;return!0},Qu.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===$s.NONE&&(this.location[t]=e)},Qu.prototype.isLine=function(){return 1===this.location.length},Qu.prototype.merge=function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[Uu.ON]=this.location[Uu.ON],t[Uu.LEFT]=$s.NONE,t[Uu.RIGHT]=$s.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===$s.NONE&&n<e.location.length&&(this.location[n]=e.location[n])},Qu.prototype.getLocations=function(){return this.location},Qu.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Uu.LEFT];this.location[Uu.LEFT]=this.location[Uu.RIGHT],this.location[Uu.RIGHT]=e},Qu.prototype.toString=function(){var e=new Ks;return 1<this.location.length&&e.append($s.toLocationSymbol(this.location[Uu.LEFT])),e.append($s.toLocationSymbol(this.location[Uu.ON])),1<this.location.length&&e.append($s.toLocationSymbol(this.location[Uu.RIGHT])),e.toString()},Qu.prototype.setLocations=function(e,t,n){this.location[Uu.ON]=e,this.location[Uu.LEFT]=t,this.location[Uu.RIGHT]=n},Qu.prototype.get=function(e){return e<this.location.length?this.location[e]:$s.NONE},Qu.prototype.isArea=function(){return 1<this.location.length},Qu.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===$s.NONE)return!0;return!1},Qu.prototype.setLocation=function(){if(1===arguments.length){var e=arguments[0];this.setLocation(Uu.ON,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.location[t]=n}},Qu.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations($s.NONE)},Qu.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]},Qu.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu};var Ku=function e(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Qu(t),this.elt[1]=new Qu(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Qu(n.elt[0]),this.elt[1]=new Qu(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Qu($s.NONE),this.elt[1]=new Qu($s.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Qu(o,a,s),this.elt[1]=new Qu(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Qu($s.NONE,$s.NONE,$s.NONE),this.elt[1]=new Qu($s.NONE,$s.NONE,$s.NONE),this.elt[l].setLocations(u,c,h)}};Ku.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},Ku.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},Ku.prototype.isNull=function(e){return this.elt[e].isNull()},Ku.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}},Ku.prototype.isLine=function(e){return this.elt[e].isLine()},Ku.prototype.merge=function(e){for(var t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new Qu(e.elt[t]):this.elt[t].merge(e.elt[t])},Ku.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ku.prototype.getLocation=function(){if(1===arguments.length){var e=arguments[0];return this.elt[e].get(Uu.ON)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}},Ku.prototype.toString=function(){var e=new Ks;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()},Ku.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=arguments[0];return this.elt[e].isArea()}},Ku.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},Ku.prototype.setLocation=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(Uu.ON,t)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Ku.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},Ku.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},Ku.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Qu(this.elt[e].location[0]))},Ku.prototype.interfaces_=function(){return[]},Ku.prototype.getClass=function(){return Ku},Ku.toLineLabel=function(e){for(var t=new Ku($s.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Zu=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new zl,this._pts=new zl,this._label=new Ku($s.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new zl,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Zu.prototype.computeRing=function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=kl.isCCW(this._ring.getCoordinates())},Zu.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Zu.prototype.computePoints=function(e){var t=this._startDe=e,n=!0;do{if(null===t)throw new Vu("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Vu("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var r=t.getLabel();yl.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)},Zu.prototype.getLinearRing=function(){return this._ring},Zu.prototype.getCoordinate=function(e){return this._pts.get(e)},Zu.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Zu.prototype.addPoints=function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;0<=s;s--)this._pts.add(r[s])}},Zu.prototype.isHole=function(){return this._isHole},Zu.prototype.setInResult=function(){for(var e=this._startDe;e.getEdge().setInResult(!0),(e=e.getNext())!==this._startDe;);},Zu.prototype.containsPoint=function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!kl.isPointInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(e))return!1;return!0},Zu.prototype.addHole=function(e){this._holes.add(e)},Zu.prototype.isShell=function(){return null===this._shell},Zu.prototype.getLabel=function(){return this._label},Zu.prototype.getEdges=function(){return this._edges},Zu.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Zu.prototype.getShell=function(){return this._shell},Zu.prototype.mergeLabel=function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],r=t.getLocation(n,Uu.RIGHT);if(r===$s.NONE)return null;if(this._label.getLocation(n)===$s.NONE)return this._label.setLocation(n,r),null}},Zu.prototype.setShell=function(e){null!==(this._shell=e)&&e.addHole(this)},Zu.prototype.toPolygon=function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)},Zu.prototype.interfaces_=function(){return[]},Zu.prototype.getClass=function(){return Zu};var Ju=function(n){function e(){var e=arguments[0],t=arguments[1];n.call(this,e,t)}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},e.prototype.getNext=function(e){return e.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zu),Xu=function(n){function e(){var e=arguments[0],t=arguments[1];n.call(this,e,t)}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.buildMinimalRings=function(){var e=new zl,t=this._startDe;do{if(null===t.getMinEdgeRing()){var n=new Ju(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e},e.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var e=this._startDe;e.getNode().getEdges().linkMinimalDirectedEdges(this),(e=e.getNext())!==this._startDe;);},e.prototype.getNext=function(e){return e.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zu),Yu=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._label=e}};Yu.prototype.setVisited=function(e){this._isVisited=e},Yu.prototype.setInResult=function(e){this._isInResult=e},Yu.prototype.isCovered=function(){return this._isCovered},Yu.prototype.isCoveredSet=function(){return this._isCoveredSet},Yu.prototype.setLabel=function(e){this._label=e},Yu.prototype.getLabel=function(){return this._label},Yu.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},Yu.prototype.updateIM=function(e){yl.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(e)},Yu.prototype.isInResult=function(){return this._isInResult},Yu.prototype.isVisited=function(){return this._isVisited},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var ec=function(n){function i(){n.call(this),this._coord=null,this._edges=null;var e=arguments[0],t=arguments[1];this._coord=e,this._edges=t,this._label=new Ku(0,$s.NONE)}return n&&(i.__proto__=n),((i.prototype=Object.create(n&&n.prototype)).constructor=i).prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1},i.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},i.prototype.getCoordinate=function(){return this._coord},i.prototype.print=function(e){e.println("node "+this._coord+" lbl: "+this._label)},i.prototype.computeIM=function(e){},i.prototype.computeMergedLocation=function(e,t){var n=$s.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==$s.BOUNDARY&&(n=r)}return n},i.prototype.setLabel=function(){if(2!==arguments.length)return n.prototype.setLabel.apply(this,arguments);var e=arguments[0],t=arguments[1];null===this._label?this._label=new Ku(e,t):this._label.setLocation(e,t)},i.prototype.getEdges=function(){return this._edges},i.prototype.mergeLabel=function(){if(arguments[0]instanceof i){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof Ku)for(var t=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(t,n);this._label.getLocation(n)===$s.NONE&&this._label.setLocation(n,r)}},i.prototype.add=function(e){this._edges.insert(e),e.setNode(this)},i.prototype.setLabelBoundary=function(e){if(null===this._label)return null;var t=$s.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;switch(t){case $s.BOUNDARY:n=$s.INTERIOR;break;case $s.INTERIOR:default:n=$s.BOUNDARY}this._label.setLocation(e,n)},i.prototype.interfaces_=function(){return[]},i.prototype.getClass=function(){return i},i}(Yu),tc=function(){this.nodeMap=new vi,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};tc.prototype.find=function(e){return this.nodeMap.get(e)},tc.prototype.addNode=function(){if(arguments[0]instanceof zs){var e=arguments[0],t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof ec){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},tc.prototype.print=function(e){for(var t=this.iterator();t.hasNext();)t.next().print(e)},tc.prototype.iterator=function(){return this.nodeMap.values().iterator()},tc.prototype.values=function(){return this.nodeMap.values()},tc.prototype.getBoundaryNodes=function(e){for(var t=new zl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===$s.BOUNDARY&&t.add(r)}return t},tc.prototype.add=function(e){var t=e.getCoordinate();this.addNode(t).add(e)},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var nc=function(){},rc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc},nc.isNorthern=function(e){return e===nc.NE||e===nc.NW},nc.isOpposite=function(e,t){return e!==t&&2==(e-t+4)%4},nc.commonHalfPlane=function(e,t){if(e===t)return e;if(2==(e-t+4)%4)return-1;var n=e<t?e:t;return 0===n&&3===(t<e?e:t)?3:n},nc.isInHalfPlane=function(e,t){return t===nc.SE?e===nc.SE||e===nc.SW:e===t||e===t+1},nc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new Ns("Cannot compute the quadrant for point ( "+e+", "+t+" )");return 0<=e?0<=t?nc.NE:nc.SE:0<=t?nc.NW:nc.SW}if(arguments[0]instanceof zs&&arguments[1]instanceof zs){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Ns("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?nc.NE:nc.SE:r.y>=n.y?nc.NW:nc.SW}},rc.NE.get=function(){return 0},rc.NW.get=function(){return 1},rc.SW.get=function(){return 2},rc.SE.get=function(){return 3},Object.defineProperties(nc,rc);var ic=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var e=arguments[0];this._edge=e}else if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2];this._edge=t,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};ic.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:kl.computeOrientation(e._p0,e._p1,this._p1)},ic.prototype.getDy=function(){return this._dy},ic.prototype.getCoordinate=function(){return this._p0},ic.prototype.setNode=function(e){this._node=e},ic.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)},ic.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)},ic.prototype.getDirectedCoordinate=function(){return this._p1},ic.prototype.getDx=function(){return this._dx},ic.prototype.getLabel=function(){return this._label},ic.prototype.getEdge=function(){return this._edge},ic.prototype.getQuadrant=function(){return this._quadrant},ic.prototype.getNode=function(){return this._node},ic.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},ic.prototype.computeLabel=function(e){},ic.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=nc.quadrant(this._dx,this._dy),yl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ic.prototype.interfaces_=function(){return[Rs]},ic.prototype.getClass=function(){return ic};var oc=function(r){function e(){var e=arguments[0],t=arguments[1];if(r.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(e){return this._depth[e]},e.prototype.setVisited=function(e){this._isVisited=e},e.prototype.computeDirectedLabel=function(){this._label=new Ku(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new Vu("assigned depths do not match",this.getCoordinate());this._depth[e]=t},e.prototype.isInteriorAreaEdge=function(){for(var e=!0,t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,Uu.LEFT)===$s.INTERIOR&&this._label.getLocation(t,Uu.RIGHT)===$s.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(e){this._nextMin=e},e.prototype.print=function(e){r.prototype.print.call(this,e),e.print(" "+this._depth[Uu.LEFT]+"/"+this._depth[Uu.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(e){this._minEdgeRing=e},e.prototype.isLineEdge=function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,$s.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,$s.EXTERIOR);return e&&t&&n},e.prototype.setEdgeRing=function(e){this._edgeRing=e},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e},e.prototype.setInResult=function(e){this._isInResult=e},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)},e.prototype.setSym=function(e){this._sym=e},e.prototype.setVisitedEdge=function(e){this.setVisited(e),this._sym.setVisited(e)},e.prototype.setEdgeDepths=function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===Uu.LEFT&&(r=-1);var i=Uu.opposite(e),o=t+n*r;this.setDepth(e,t),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(e){this._next=e},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(e,t){return e===$s.EXTERIOR&&t===$s.INTERIOR?1:e===$s.INTERIOR&&t===$s.EXTERIOR?-1:0},e}(ic),ac=function(){};ac.prototype.createNode=function(e){return new ec(e,null)},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var sc=function(){if(this._edges=new zl,this._nodes=null,this._edgeEndList=new zl,0===arguments.length)this._nodes=new tc(new ac);else if(1===arguments.length){var e=arguments[0];this._nodes=new tc(e)}};sc.prototype.printEdges=function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}},sc.prototype.find=function(e){return this._nodes.find(e)},sc.prototype.addNode=function(){if(arguments[0]instanceof ec){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof zs){var t=arguments[0];return this._nodes.addNode(t)}},sc.prototype.getNodeIterator=function(){return this._nodes.iterator()},sc.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},sc.prototype.debugPrintln=function(e){al.out.println(e)},sc.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===$s.BOUNDARY},sc.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()},sc.prototype.matchInSameDirection=function(e,t,n,r){return!!e.equals(n)&&kl.computeOrientation(e,t,r)===kl.COLLINEAR&&nc.quadrant(e,t)===nc.quadrant(n,r)},sc.prototype.getEdgeEnds=function(){return this._edgeEndList},sc.prototype.debugPrint=function(e){al.out.print(e)},sc.prototype.getEdgeIterator=function(){return this._edges.iterator()},sc.prototype.findEdgeInSameDirection=function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null},sc.prototype.insertEdge=function(e){this._edges.add(e)},sc.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null},sc.prototype.addEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var r=new oc(n,!0),i=new oc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},sc.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)},sc.prototype.getNodes=function(){return this._nodes.values()},sc.prototype.findEdge=function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null},sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()};var lc=function(){this._geometryFactory=null,this._shellList=new zl;var e=arguments[0];this._geometryFactory=e};lc.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}},lc.prototype.computePolygons=function(e){for(var t=new zl,n=e.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);t.add(r)}return t},lc.prototype.placeFreeHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,e);if(null===i)throw new Vu("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},lc.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=new zl,i=e.iterator();i.hasNext();){var o=i.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),t.add(s)):n.addAll(a)}else r.add(o)}return r},lc.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();)if(t.next().containsPoint(e))return!0;return!1},lc.prototype.buildMaximalEdgeRings=function(e){for(var t=new zl,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Xu(r,this._geometryFactory);t.add(i),i.setInResult()}}return t},lc.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}},lc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},lc.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&kl.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},lc.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return yl.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n},lc.prototype.add=function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var t=arguments[0],n=arguments[1];sc.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new zl,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc};var uc=function(){};uc.prototype.getBounds=function(){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var cc=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};cc.prototype.getItem=function(){return this._item},cc.prototype.getBounds=function(){return this._bounds},cc.prototype.interfaces_=function(){return[uc,ci]},cc.prototype.getClass=function(){return cc};var hc=function(){this._size=null,this._items=null,this._size=0,this._items=new zl,this._items.add(null)};hc.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e},hc.prototype.size=function(){return this._size},hc.prototype.reorder=function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)},hc.prototype.clear=function(){this._size=0,this._items.clear()},hc.prototype.isEmpty=function(){return 0===this._size},hc.prototype.add=function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var fc=function(){};fc.prototype.visitItem=function(e){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var dc=function(){};dc.prototype.insert=function(e,t){},dc.prototype.remove=function(e,t){},dc.prototype.query=function(){},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc};var pc=function(){if(this._childBoundables=new zl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._level=e}},mc={serialVersionUID:{configurable:!0}};pc.prototype.getLevel=function(){return this._level},pc.prototype.size=function(){return this._childBoundables.size()},pc.prototype.getChildBoundables=function(){return this._childBoundables},pc.prototype.addChildBoundable=function(e){yl.isTrue(null===this._bounds),this._childBoundables.add(e)},pc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},pc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},pc.prototype.interfaces_=function(){return[uc,ci]},pc.prototype.getClass=function(){return pc},mc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(pc,mc);var gc=function(){};gc.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}},gc.min=function(e){return gc.sort(e),e.get(0)},gc.sort=function(e,t){var n=e.toArray();t?eu.sort(n,t):eu.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},gc.singletonList=function(e){var t=new zl;return t.add(e),t};var yc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};yc.prototype.expandToQueue=function(e,t){var n=yc.isComposite(this._boundable1),r=yc.isComposite(this._boundable2);if(n&&r)return yc.area(this._boundable1)>yc.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,e,t):this.expand(this._boundable2,this._boundable1,e,t),null;if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new Ns("neither boundable is composite")},yc.prototype.isLeaves=function(){return!(yc.isComposite(this._boundable1)||yc.isComposite(this._boundable2))},yc.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0},yc.prototype.expand=function(e,t,n,r){for(var i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new yc(o,t,this._itemDistance);a.getDistance()<r&&n.add(a)}},yc.prototype.getBoundable=function(e){return 0===e?this._boundable1:this._boundable2},yc.prototype.getDistance=function(){return this._distance},yc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},yc.prototype.interfaces_=function(){return[Rs]},yc.prototype.getClass=function(){return yc},yc.area=function(e){return e.getBounds().getArea()},yc.isComposite=function(e){return e instanceof pc};var _c=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new zl,this._nodeCapacity=null,0===arguments.length){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(1===arguments.length){var n=arguments[0];yl.isTrue(1<n,"Node capacity must be greater than 1"),this._nodeCapacity=n}},vc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};_c.prototype.getNodeCapacity=function(){return this._nodeCapacity},_c.prototype.lastNode=function(e){return e.get(e.size()-1)},_c.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof pc?e+=this.size(n):n instanceof cc&&(e+=1)}return e}},_c.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof cc&&i.getItem()===t&&(n=i)}return null!==n&&(e.getChildBoundables().remove(n),!0)},_c.prototype.itemsTree=function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new zl:e}if(1===arguments.length){for(var t=arguments[0],n=new zl,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof pc){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof cc?n.add(i.getItem()):yl.shouldNeverReachHere()}return n.size()<=0?null:n}},_c.prototype.insert=function(e,t){yl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new cc(e,t))},_c.prototype.boundablesAtLevel=function(){if(1===arguments.length){var e=arguments[0],t=new zl;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(yl.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof pc?this.boundablesAtLevel(n,a,i):(yl.isTrue(a instanceof cc),-1===n&&i.add(a))}return null}},_c.prototype.query=function(){if(1===arguments.length){var e=arguments[0];this.build();var t=new zl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,t),t}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Hs(arguments[2],fc)&&arguments[0]instanceof Object&&arguments[1]instanceof pc)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof pc?this.query(i,u,a):u instanceof cc?a.visitItem(u.getItem()):yl.shouldNeverReachHere())}else if(Hs(arguments[2],Fl)&&arguments[0]instanceof Object&&arguments[1]instanceof pc)for(var c=arguments[0],h=arguments[1],f=arguments[2],d=h.getChildBoundables(),p=0;p<d.size();p++){var m=d.get(p);this.getIntersectsOp().intersects(m.getBounds(),c)&&(m instanceof pc?this.query(c,m,f):m instanceof cc?f.add(m.getItem()):yl.shouldNeverReachHere())}},_c.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},_c.prototype.getRoot=function(){return this.build(),this._root},_c.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof pc&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},_c.prototype.createHigherLevels=function(e,t){yl.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)},_c.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();if(n instanceof pc){var r=this.depth(n);e<r&&(e=r)}}return e+1}},_c.prototype.createParentBoundables=function(e,t){yl.isTrue(!e.isEmpty());var n=new zl;n.add(this.createNode(t));var r=new zl(e);gc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n},_c.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},_c.prototype.interfaces_=function(){return[ci]},_c.prototype.getClass=function(){return _c},_c.compareDoubles=function(e,t){return t<e?1:e<t?-1:0},vc.IntersectsOp.get=function(){return bc},vc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},vc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_c,vc);var bc=function(){},wc=function(){};wc.prototype.distance=function(e,t){},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc};var xc=function(u){function y(e){e=e||y.DEFAULT_NODE_CAPACITY,u.call(this,e)}u&&(y.__proto__=u);var e={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((y.prototype=Object.create(u&&u.prototype)).constructor=y).prototype.createParentBoundablesFromVerticalSlices=function(e,t){yl.isTrue(0<e.length);for(var n=new zl,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n},y.prototype.createNode=function(e){return new kc(e)},y.prototype.size=function(){return 0===arguments.length?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},y.prototype.insert=function(){if(2!==arguments.length)return u.prototype.insert.apply(this,arguments);var e=arguments[0],t=arguments[1];if(e.isNull())return null;u.prototype.insert.call(this,e,t)},y.prototype.getIntersectsOp=function(){return y.intersectsOp},y.prototype.verticalSlices=function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t).fill(null),i=e.iterator(),o=0;o<t;o++){r[o]=new zl;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},y.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return u.prototype.query.call(this,e)}if(2===arguments.length){var t=arguments[0],n=arguments[1];u.prototype.query.call(this,t,n)}else if(3===arguments.length)if(Hs(arguments[2],fc)&&arguments[0]instanceof Object&&arguments[1]instanceof pc){var r=arguments[0],i=arguments[1],o=arguments[2];u.prototype.query.call(this,r,i,o)}else if(Hs(arguments[2],Fl)&&arguments[0]instanceof Object&&arguments[1]instanceof pc){var a=arguments[0],s=arguments[1],l=arguments[2];u.prototype.query.call(this,a,s,l)}},y.prototype.getComparator=function(){return y.yComparator},y.prototype.createParentBoundablesFromVerticalSlice=function(e,t){return u.prototype.createParentBoundables.call(this,e,t)},y.prototype.remove=function(){if(2!==arguments.length)return u.prototype.remove.apply(this,arguments);var e=arguments[0],t=arguments[1];return u.prototype.remove.call(this,e,t)},y.prototype.depth=function(){return 0===arguments.length?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},y.prototype.createParentBoundables=function(e,t){yl.isTrue(!e.isEmpty());var n=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),r=new zl(e);gc.sort(r,y.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,t)},y.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Hs(arguments[0],wc)){var e=arguments[0],t=new yc(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof yc){var n=arguments[0];return this.nearestNeighbour(n,As.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof y&&Hs(arguments[1],wc)){var r=arguments[0],i=arguments[1],o=new yc(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof yc&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=null,u=new hc;for(u.add(a);!u.isEmpty()&&0<s;){var c=u.poll(),h=c.getDistance();if(s<=h)break;c.isLeaves()?(s=h,l=c):c.expandToQueue(u,s)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],p=arguments[2],m=new cc(f,d),g=new yc(this.getRoot(),m,p);return this.nearestNeighbour(g)[0]}},y.prototype.interfaces_=function(){return[dc,ci]},y.prototype.getClass=function(){return y},y.centreX=function(e){return y.avg(e.getMinX(),e.getMaxX())},y.avg=function(e,t){return(e+t)/2},y.centreY=function(e){return y.avg(e.getMinY(),e.getMaxY())},e.STRtreeNode.get=function(){return kc},e.serialVersionUID.get=function(){return 0x39920f7d5f261e0},e.xComparator.get=function(){return{interfaces_:function(){return[Fs]},compare:function(e,t){return u.compareDoubles(y.centreX(e.getBounds()),y.centreX(t.getBounds()))}}},e.yComparator.get=function(){return{interfaces_:function(){return[Fs]},compare:function(e,t){return u.compareDoubles(y.centreY(e.getBounds()),y.centreY(t.getBounds()))}}},e.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(e,t){return e.intersects(t)}}},e.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(y,e),y}(_c),kc=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeBounds=function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new ll(n.getBounds()):e.expandToInclude(n.getBounds())}return e},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pc),Lc=function(){};Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.relativeSign=function(e,t){return e<t?-1:t<e?1:0},Lc.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=Lc.relativeSign(t.x,n.x),i=Lc.relativeSign(t.y,n.y);switch(e){case 0:return Lc.compareValue(r,i);case 1:return Lc.compareValue(i,r);case 2:return Lc.compareValue(i,-r);case 3:return Lc.compareValue(-r,i);case 4:return Lc.compareValue(-r,-i);case 5:return Lc.compareValue(-i,-r);case 6:return Lc.compareValue(-i,r);case 7:return Lc.compareValue(r,-i)}return yl.shouldNeverReachHere("invalid octant value"),0},Lc.compareValue=function(e,t){return e<0?-1:0<e?1:t<0?-1:0<t?1:0};var Cc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new zs(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};Cc.prototype.getCoordinate=function(){return this.coord},Cc.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)},Cc.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Lc.compare(this._segmentOctant,this.coord,t.coord)},Cc.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e},Cc.prototype.isInterior=function(){return this._isInterior},Cc.prototype.interfaces_=function(){return[Rs]},Cc.prototype.getClass=function(){return Cc};var Sc=function(){this._nodeMap=new vi,this._edge=null;var e=arguments[0];this._edge=e};Sc.prototype.getSplitCoordinates=function(){var e=new Ul;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()},Sc.prototype.addCollapsedNodes=function(){var e=new zl;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Sc.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)},Sc.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t),r=this._edge.getCoordinate(t+2);n.equals2D(r)&&e.add(new Zs(t+1))}},Sc.prototype.addEdgeCoordinates=function(e,t,n){var r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);n.add(new zs(e.coord),!1);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new zs(t.coord))},Sc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Sc.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},Sc.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r&&(n[0]=e.segmentIndex+1,!0)},Sc.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,t)&&e.add(new Zs(t[0])),r=i}},Sc.prototype.getEdge=function(){return this._edge},Sc.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)},Sc.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new zs(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new zs(t.coord)),new Tc(o,this._edge.getData())},Sc.prototype.add=function(e,t){var n=new Cc(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return null!==r?(yl.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Sc.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new ml("bad split edge start point at "+n);var r=e.get(e.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(t[t.length-1]))throw new ml("bad split edge end point at "+i)},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var Mc=function(){};Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc},Mc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new Ns("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return 0<=e?0<=t?r<=n?0:1:r<=n?7:6:0<=t?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof zs&&arguments[1]instanceof zs){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new Ns("Cannot compute the octant for two identical points "+i);return Mc.octant(a,s)}};var Pc=function(){};Pc.prototype.getCoordinates=function(){},Pc.prototype.size=function(){},Pc.prototype.getCoordinate=function(e){},Pc.prototype.isClosed=function(){},Pc.prototype.setData=function(e){},Pc.prototype.getData=function(){},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc};var Ec=function(){};Ec.prototype.addIntersection=function(e,t){},Ec.prototype.interfaces_=function(){return[Pc]},Ec.prototype.getClass=function(){return Ec};var Tc=function(){this._nodeList=new Sc(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Tc.prototype.getCoordinates=function(){return this._pts},Tc.prototype.size=function(){return this._pts.length},Tc.prototype.getCoordinate=function(e){return this._pts[e]},Tc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Tc.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},Tc.prototype.setData=function(e){this._data=e},Tc.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Mc.octant(e,t)},Tc.prototype.getData=function(){return this._data},Tc.prototype.addIntersection=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new zs(n.getIntersection(i));this.addIntersection(o,r)}},Tc.prototype.toString=function(){return pl.toLineString(new Cu(this._pts))},Tc.prototype.getNodeList=function(){return this._nodeList},Tc.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}return this._nodeList.add(e,n)},Tc.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},Tc.prototype.interfaces_=function(){return[Ec]},Tc.prototype.getClass=function(){return Tc},Tc.getNodedSubstrings=function(){if(1===arguments.length){var e=arguments[0],t=new zl;return Tc.getNodedSubstrings(e,t),t}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var Ic=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new zs,this.p1=new zs;else if(1===arguments.length){var e=arguments[0];this.p0=new zs(e.p0),this.p1=new zs(e.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new zs(t,n),this.p1=new zs(r,i)}},Oc={serialVersionUID:{configurable:!0}};Ic.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Ic.prototype.orientationIndex=function(){if(arguments[0]instanceof Ic){var e=arguments[0],t=kl.orientationIndex(this.p0,this.p1,e.p0),n=kl.orientationIndex(this.p0,this.p1,e.p1);return 0<=t&&0<=n?Math.max(t,n):t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof zs){var r=arguments[0];return kl.orientationIndex(this.p0,this.p1,r)}},Ic.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},Ic.prototype.isVertical=function(){return this.p0.x===this.p1.x},Ic.prototype.equals=function(e){if(!(e instanceof Ic))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},Ic.prototype.intersection=function(e){var t=new bl;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},Ic.prototype.project=function(){if(arguments[0]instanceof zs){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new zs(e);var t=this.projectionFactor(e),n=new zs;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Ic){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),1<i&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),1<o&&(s=this.p1),new Ic(a,s)}},Ic.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Ic.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Ic.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},Ic.prototype.distancePerpendicular=function(e){return kl.distancePointLinePerpendicular(e,this.p0,this.p1)},Ic.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Ic.prototype.midPoint=function(){return Ic.midPoint(this.p0,this.p1)},Ic.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;return r<=0?As.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r},Ic.prototype.closestPoints=function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2).fill(null),r=As.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var a=this.closestPoint(e.p1);(i=a.distance(e.p1))<r&&(r=i,n[0]=a,n[1]=e.p1);var s=e.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=e.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},Ic.prototype.closestPoint=function(e){var t=this.projectionFactor(e);return 0<t&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1},Ic.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Ic.prototype.getLength=function(){return this.p0.distance(this.p1)},Ic.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)},Ic.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},Ic.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)},Ic.prototype.lineIntersection=function(e){try{return sl.intersection(this.p0,this.p1,e.p0,e.p1)}catch(e){if(!(e instanceof ol))throw e}return null},Ic.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Ic.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==t){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=t*i/a,l=t*o/a}return new zs(n-l,r+s)},Ic.prototype.setCoordinates=function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}},Ic.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(1<t||As.isNaN(t))&&(t=1),t},Ic.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Ic.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Ic.prototype.distance=function(){if(arguments[0]instanceof Ic){var e=arguments[0];return kl.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof zs){var t=arguments[0];return kl.distancePointLine(t,this.p0,this.p1)}},Ic.prototype.pointAlong=function(e){var t=new zs;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t},Ic.prototype.hashCode=function(){var e=As.doubleToLongBits(this.p0.x);e^=31*As.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=As.doubleToLongBits(this.p1.x);return n^=31*As.doubleToLongBits(this.p1.y),t^Math.trunc(n)^Math.trunc(n>>32)},Ic.prototype.interfaces_=function(){return[Rs,ci]},Ic.prototype.getClass=function(){return Ic},Ic.midPoint=function(e,t){return new zs((e.x+t.x)/2,(e.y+t.y)/2)},Oc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Ic,Oc);var Dc=function(){this.tempEnv1=new ll,this.tempEnv2=new ll,this._overlapSeg1=new Ic,this._overlapSeg2=new Ic};Dc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Nc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};Nc.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]},Nc.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t==1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,r),a<n&&this.computeSelect(e,a,n,r)},Nc.prototype.getCoordinates=function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e},Nc.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)},Nc.prototype.setId=function(e){this._id=e},Nc.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)},Nc.prototype.getEnvelope=function(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new ll(e,t)}return this._env},Nc.prototype.getEndIndex=function(){return this._end},Nc.prototype.getStartIndex=function(){return this._start},Nc.prototype.getContext=function(){return this._context},Nc.prototype.getId=function(){return this._id},Nc.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var a=this._pts[e],s=this._pts[t],l=n._pts[r],u=n._pts[i];if(t-e==1&&i-r==1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((e+t)/2),h=Math.trunc((r+i)/2);e<c&&(r<h&&this.computeOverlapsInternal(e,c,n,r,h,o),h<i&&this.computeOverlapsInternal(e,c,n,h,i,o)),c<t&&(r<h&&this.computeOverlapsInternal(c,t,n,r,h,o),h<i&&this.computeOverlapsInternal(c,t,n,h,i,o))},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc};var Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.getChainStartIndices=function(e){var t=0,n=new zl;n.add(new Zs(t));do{var r=Ac.findChainEnd(e,t);n.add(new Zs(r)),t=r}while(t<e.length-1);return Ac.toIntArray(n)},Ac.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=nc.quadrant(e[n],e[n+1]),i=t+1;i<e.length&&(e[i-1].equals2D(e[i])||nc.quadrant(e[i-1],e[i])===r);)i++;return i-1},Ac.getChains=function(){if(1===arguments.length){var e=arguments[0];return Ac.getChains(e,null)}if(2===arguments.length){for(var t=arguments[0],n=arguments[1],r=new zl,i=Ac.getChainStartIndices(t),o=0;o<i.length-1;o++){var a=new Nc(t,i[o],i[o+1],n);r.add(a)}return r}},Ac.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var jc=function(){};jc.prototype.computeNodes=function(e){},jc.prototype.getNodedSubstrings=function(){},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var Rc=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setSegmentIntersector(e)}};Rc.prototype.setSegmentIntersector=function(e){this._segInt=e},Rc.prototype.interfaces_=function(){return[jc]},Rc.prototype.getClass=function(){return Rc};var Bc=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new zl,this._index=new xc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t);var n={SegmentOverlapAction:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Tc.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(e){for(var t=Ac.getChains(e.getCoordinates(),e).iterator();t.hasNext();){var n=t.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(e){for(var t=(this._nodedSegStrings=e).iterator();t.hasNext();)this.add(t.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var e=new Fc(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,e),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Fc},Object.defineProperties(e,n),e}(Rc),Fc=function(a){function e(){a.call(this),this._si=null;var e=arguments[0];this._si=e}return a&&(e.__proto__=a),((e.prototype=Object.create(a&&a.prototype)).constructor=e).prototype.overlap=function(){if(4!==arguments.length)return a.prototype.overlap.apply(this,arguments);var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3],i=e.getContext(),o=n.getContext();this._si.processIntersections(i,t,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dc),zc=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},qc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};zc.prototype.getEndCapStyle=function(){return this._endCapStyle},zc.prototype.isSingleSided=function(){return this._isSingleSided},zc.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=zc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=zc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==zc.JOIN_ROUND&&(this._quadrantSegments=zc.DEFAULT_QUADRANT_SEGMENTS)},zc.prototype.getJoinStyle=function(){return this._joinStyle},zc.prototype.setJoinStyle=function(e){this._joinStyle=e},zc.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e},zc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},zc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},zc.prototype.setEndCapStyle=function(e){this._endCapStyle=e},zc.prototype.getMitreLimit=function(){return this._mitreLimit},zc.prototype.setMitreLimit=function(e){this._mitreLimit=e},zc.prototype.setSingleSided=function(e){this._isSingleSided=e},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc},zc.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},qc.CAP_ROUND.get=function(){return 1},qc.CAP_FLAT.get=function(){return 2},qc.CAP_SQUARE.get=function(){return 3},qc.JOIN_ROUND.get=function(){return 1},qc.JOIN_MITRE.get=function(){return 2},qc.JOIN_BEVEL.get=function(){return 3},qc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},qc.DEFAULT_MITRE_LIMIT.get=function(){return 5},qc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(zc,qc);var Uc=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=kl.COUNTERCLOCKWISE,this._inputLine=e||null},Gc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Uc.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,e,n,r)},Uc.prototype.deleteShallowConcavities=function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=Uc.DELETE,r=i=!0),e=i?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return r},Uc.prototype.isShallowConcavity=function(e,t,n,r){return kl.computeOrientation(e,t,n)===this._angleOrientation&&kl.distancePointLine(t,e,n)<r},Uc.prototype.isShallowSampled=function(e,t,n,r,i){var o=Math.trunc((r-n)/Uc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(e,t,this._inputLine[a],i))return!1;return!0},Uc.prototype.isConcave=function(e,t,n){return kl.computeOrientation(e,t,n)===this._angleOrientation},Uc.prototype.simplify=function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=kl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},Uc.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Uc.DELETE;)t++;return t},Uc.prototype.isShallow=function(e,t,n,r){return kl.distancePointLine(t,e,n)<r},Uc.prototype.collapseLine=function(){for(var e=new Ul,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==Uc.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.simplify=function(e,t){return new Uc(e).simplify(t)},Gc.INIT.get=function(){return 0},Gc.DELETE.get=function(){return 1},Gc.KEEP.get=function(){return 1},Gc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Uc,Gc);var $c=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new zl},Vc={COORDINATE_ARRAY_TYPE:{configurable:!0}};$c.prototype.getCoordinates=function(){return this._ptList.toArray($c.COORDINATE_ARRAY_TYPE)},$c.prototype.setPrecisionModel=function(e){this._precisionModel=e},$c.prototype.addPt=function(e){var t=new zs(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},$c.prototype.revere=function(){},$c.prototype.addPts=function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var r=e.length-1;0<=r;r--)this.addPt(e[r])},$c.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance},$c.prototype.toString=function(){return(new Nu).createLineString(this.getCoordinates()).toString()},$c.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new zs(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)},$c.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c},Vc.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties($c,Vc);var Hc=function(){},Wc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.toDegrees=function(e){return 180*e/Math.PI},Hc.normalize=function(e){for(;e>Math.PI;)e-=Hc.PI_TIMES_2;for(;e<=-Math.PI;)e+=Hc.PI_TIMES_2;return e},Hc.angle=function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}},Hc.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return 0<r*(n.x-t.x)+i*(n.y-t.y)},Hc.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)<0},Hc.interiorAngle=function(e,t,n){var r=Hc.angle(t,e),i=Hc.angle(t,n);return Math.abs(i-r)},Hc.normalizePositive=function(e){if(e<0){for(;e<0;)e+=Hc.PI_TIMES_2;Hc.PI_TIMES_2<=e&&(e=0)}else{for(;Hc.PI_TIMES_2<=e;)e-=Hc.PI_TIMES_2;e<0&&(e=0)}return e},Hc.angleBetween=function(e,t,n){var r=Hc.angle(t,e),i=Hc.angle(t,n);return Hc.diff(r,i)},Hc.diff=function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n},Hc.toRadians=function(e){return e*Math.PI/180},Hc.getTurn=function(e,t){var n=Math.sin(t-e);return 0<n?Hc.COUNTERCLOCKWISE:n<0?Hc.CLOCKWISE:Hc.NONE},Hc.angleBetweenOriented=function(e,t,n){var r=Hc.angle(t,e),i=Hc.angle(t,n)-r;return i<=-Math.PI?i+Hc.PI_TIMES_2:i>Math.PI?i-Hc.PI_TIMES_2:i},Wc.PI_TIMES_2.get=function(){return 2*Math.PI},Wc.PI_OVER_2.get=function(){return Math.PI/2},Wc.PI_OVER_4.get=function(){return Math.PI/4},Wc.COUNTERCLOCKWISE.get=function(){return kl.COUNTERCLOCKWISE},Wc.CLOCKWISE.get=function(){return kl.CLOCKWISE},Wc.NONE.get=function(){return kl.COLLINEAR},Object.defineProperties(Hc,Wc);var Qc=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ic,this._seg1=new Ic,this._offset0=new Ic,this._offset1=new Ic,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new bl,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===zc.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Kc={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Qc.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=kl.computeOrientation(this._s0,this._s1,this._s2),r=n===kl.CLOCKWISE&&this._side===Uu.LEFT||n===kl.COUNTERCLOCKWISE&&this._side===Uu.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)},Qc.prototype.addLineEndCap=function(e,t){var n=new Ic(e,t),r=new Ic;this.computeOffsetSegment(n,Uu.LEFT,this._distance,r);var i=new Ic;this.computeOffsetSegment(n,Uu.RIGHT,this._distance,i);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case zc.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,kl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case zc.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case zc.CAP_SQUARE:var l=new zs;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new zs(r.p1.x+l.x,r.p1.y+l.y),c=new zs(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Qc.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Qc.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=sl.intersection(t.p0,t.p1,n.p0,n.p1),(r<=0?1:o.distance(e)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(e){if(!(e instanceof ol))throw e;o=new zs(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())},Qc.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),l=n.x-e.x,u=n.y-e.y,c=Math.atan2(u,l);r===kl.CLOCKWISE?s<=c&&(s+=2*Math.PI):c<=s&&(s-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,s,c,r,i),this._segList.addPt(n)},Qc.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===zc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===zc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))},Qc.prototype.createSquare=function(e){this._segList.addPt(new zs(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new zs(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new zs(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new zs(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()},Qc.prototype.addSegments=function(e,t){this._segList.addPts(e,t)},Qc.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Qc.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Qc.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Qc.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=Hc.angle(i,this._seg0.p0),a=Hc.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Hc.normalize(o+a),l=Hc.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),f=i.y+u*Math.sin(l),d=new zs(h,f),p=new Ic(i,d),m=p.pointAlongOffset(1,c),g=p.pointAlongOffset(1,-c);this._side===Uu.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},Qc.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===Uu.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=e.p0.x-u,r.p0.y=e.p0.y+l,r.p1.x=e.p1.x-u,r.p1.y=e.p1.y+l},Qc.prototype.addFilletArc=function(e,t,n,r,i){var o=r===kl.CLOCKWISE?-1:1,a=Math.abs(t-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new zs;u<a;){var h=t+o*u;c.x=e.x+i*Math.cos(h),c.y=e.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Qc.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor){var n=new zs((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new zs((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Qc.prototype.createCircle=function(e){var t=new zs(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Qc.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)},Qc.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new $c,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Qc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Qc.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===zc.JOIN_BEVEL||this._bufParams.getJoinStyle()===zc.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,kl.CLOCKWISE,this._distance))},Qc.prototype.closeRing=function(){this._segList.closeRing()},Qc.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},Kc.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Kc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Kc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Kc.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Qc,Kc);var Zc=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};Zc.prototype.getOffsetCurve=function(e,t){if(0===(this._distance=t))return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&Gl.reverse(o),o},Zc.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=Uc.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Uu.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(e,!1);var s=Uc.simplify(e,r),l=s.length-1;n.initSideSegments(s[0],s[1],Uu.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Zc.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===Uu.RIGHT&&(r=-r);var i=Uc.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Zc.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=Uc.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Uu.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var a=Uc.simplify(e,-n),s=a.length-1;t.initSideSegments(a[s],a[s-1],Uu.LEFT);for(var l=s-2;0<=l;l--)t.addNextSegment(a[l],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()},Zc.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case zc.CAP_ROUND:t.createCircle(e);break;case zc.CAP_SQUARE:t.createSquare(e)}},Zc.prototype.getLineCurve=function(e,t){if((this._distance=t)<0&&!this._bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);return r.getCoordinates()},Zc.prototype.getBufferParameters=function(){return this._bufParams},Zc.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()},Zc.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(0===n)return Zc.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()},Zc.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=Uc.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Uu.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{var s=Uc.simplify(e,r),l=s.length-1;n.initSideSegments(s[0],s[1],Uu.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Zc.prototype.getSegGen=function(e){return new Qc(this._precisionModel,this._bufParams,e)},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new zs(e[n]);return t};var Jc=function(){this._subgraphs=null,this._seg=new Ic,this._cga=new kl;var e=arguments[0];this._subgraphs=e},Xc={DepthSegment:{configurable:!0}};Jc.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var e=arguments[0],t=new zl,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();e.y<i.getMinY()||e.y>i.getMaxY()||this.findStabbedSegments(e,r.getDirectedEdges(),t)}return t}if(3===arguments.length)if(Hs(arguments[2],Fl)&&arguments[0]instanceof zs&&arguments[1]instanceof oc){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||kl.computeOrientation(this._seg.p0,this._seg.p1,o)===kl.RIGHT)){var c=a.getDepth(Uu.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Uu.RIGHT));var h=new Yc(this._seg,c);s.add(h)}}else if(Hs(arguments[2],Fl)&&arguments[0]instanceof zs&&Hs(arguments[1],Fl))for(var f=arguments[0],d=arguments[1],p=arguments[2],m=d.iterator();m.hasNext();){var g=m.next();g.isForward()&&this.findStabbedSegments(f,g,p)}},Jc.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:gc.min(t)._leftDepth},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Xc.DepthSegment.get=function(){return Yc},Object.defineProperties(Jc,Xc);var Yc=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new Ic(e),this._leftDepth=t};Yc.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n?n:0!=(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(t._upwardSeg)},Yc.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)},Yc.prototype.toString=function(){return this._upwardSeg.toString()},Yc.prototype.interfaces_=function(){return[Rs]},Yc.prototype.getClass=function(){return Yc};var eh=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};eh.prototype.area=function(){return eh.area(this.p0,this.p1,this.p2)},eh.prototype.signedArea=function(){return eh.signedArea(this.p0,this.p1,this.p2)},eh.prototype.interpolateZ=function(e){if(null===e)throw new Ns("Supplied point is null.");return eh.interpolateZ(e,this.p0,this.p1,this.p2)},eh.prototype.longestSideLength=function(){return eh.longestSideLength(this.p0,this.p1,this.p2)},eh.prototype.isAcute=function(){return eh.isAcute(this.p0,this.p1,this.p2)},eh.prototype.circumcentre=function(){return eh.circumcentre(this.p0,this.p1,this.p2)},eh.prototype.area3D=function(){return eh.area3D(this.p0,this.p1,this.p2)},eh.prototype.centroid=function(){return eh.centroid(this.p0,this.p1,this.p2)},eh.prototype.inCentre=function(){return eh.inCentre(this.p0,this.p1,this.p2)},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},eh.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)},eh.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2},eh.det=function(e,t,n,r){return e*r-t*n},eh.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=e.x-i,f=e.y-o,d=(u*h-s*f)/c,p=(-l*h+a*f)/c;return t.z+d*(n.z-t.z)+p*(r.z-t.z)},eh.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),a=r;return a<i&&(a=i),a<o&&(a=o),a},eh.isAcute=function(e,t,n){return!!Hc.isAcute(e,t,n)&&!!Hc.isAcute(t,n,e)&&!!Hc.isAcute(n,e,t)},eh.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,a=e.y-i,s=t.x-r,l=t.y-i,u=2*eh.det(o,a,s,l),c=eh.det(a,o*o+a*a,l,s*s+l*l),h=eh.det(o,o*o+a*a,s,s*s+l*l);return new zs(r-c/u,i+h/u)},eh.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new sl(e.x+n/2,e.y+r/2,1),o=new sl(e.x-r+n/2,e.y+n+r/2,1);return new sl(i,o)},eh.angleBisector=function(e,t,n){var r=t.distance(e),i=r/(r+t.distance(n)),o=n.x-e.x,a=n.y-e.y;return new zs(e.x+i*o,e.y+i*a)},eh.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=n.x-e.x,s=n.y-e.y,l=n.z-e.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=u*u+c*c+h*h;return Math.sqrt(f)/2},eh.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new zs(r,i)},eh.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),a=r+i+o,s=(r*e.x+i*t.x+o*n.x)/a,l=(r*e.y+i*t.y+o*n.y)/a;return new zs(s,l)};var th=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new zl;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};th.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,$s.EXTERIOR,$s.INTERIOR)},th.prototype.addPolygon=function(e){var t=this._distance,n=Uu.LEFT;this._distance<0&&(t=-this._distance,n=Uu.RIGHT);var r=e.getExteriorRing(),i=Gl.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,t,n,$s.EXTERIOR,$s.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var a=e.getInteriorRingN(o),s=Gl.removeRepeatedPoints(a.getCoordinates());0<this._distance&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,t,Uu.opposite(n),$s.INTERIOR,$s.EXTERIOR)}},th.prototype.isTriangleErodedCompletely=function(e,t){var n=new eh(e[0],e[1],e[2]),r=n.inCentre();return kl.distancePointLine(r,n.p0,n.p1)<Math.abs(t)},th.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Gl.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,$s.EXTERIOR,$s.INTERIOR)},th.prototype.addCurve=function(e,t,n){if(null===e||e.length<2)return null;var r=new Tc(e,new Ku(0,$s.BOUNDARY,t,n));this._curveList.add(r)},th.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},th.prototype.addPolygonRing=function(e,t,n,r,i){if(0===t&&e.length<_u.MINIMUM_VALID_SIZE)return null;var o=r,a=i;e.length>=_u.MINIMUM_VALID_SIZE&&kl.isCCW(e)&&(o=i,a=r,n=Uu.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,o,a)},th.prototype.add=function(e){if(e.isEmpty())return null;e instanceof gu?this.addPolygon(e):e instanceof fu?this.addLineString(e):e instanceof pu?this.addPoint(e):e instanceof yu?this.addCollection(e):e instanceof au?this.addCollection(e):e instanceof vu?this.addCollection(e):e instanceof ou&&this.addCollection(e)},th.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i},th.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var nh=function(){};nh.prototype.locate=function(e){},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh};var rh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};rh.prototype.next=function(){if(this._atStart)return this._atStart=!1,rh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new hi;var e=this._parent.getGeometryN(this._index++);return e instanceof ou?(this._subcollectionIterator=new rh(e),this._subcollectionIterator.next()):e},rh.prototype.remove=function(){throw new Error(this.getClass().getName())},rh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},rh.prototype.interfaces_=function(){return[Bl]},rh.prototype.getClass=function(){return rh},rh.isAtomic=function(e){return!(e instanceof ou)};var ih=function(){this._geom=null;var e=arguments[0];this._geom=e};ih.prototype.locate=function(e){return ih.locate(e,this._geom)},ih.prototype.interfaces_=function(){return[nh]},ih.prototype.getClass=function(){return ih},ih.isPointInRing=function(e,t){return!!t.getEnvelopeInternal().intersects(e)&&kl.isPointInRing(e,t.getCoordinates())},ih.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!ih.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(ih.isPointInRing(e,i))return!1}return!0},ih.containsPoint=function(e,t){if(t instanceof gu)return ih.containsPointInPolygon(e,t);if(t instanceof ou)for(var n=new rh(t);n.hasNext();){var r=n.next();if(r!==t&&ih.containsPoint(e,r))return!0}return!1},ih.locate=function(e,t){return t.isEmpty()?$s.EXTERIOR:ih.containsPoint(e,t)?$s.INTERIOR:$s.EXTERIOR};var oh=function(){this._edgeMap=new vi,this._edgeList=null,this._ptInAreaLocation=[$s.NONE,$s.NONE]};oh.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)},oh.prototype.propagateSideLabels=function(e){for(var t=$s.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(e)&&r.getLocation(e,Uu.LEFT)!==$s.NONE&&(t=r.getLocation(e,Uu.LEFT))}if(t===$s.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,Uu.ON)===$s.NONE&&s.setLocation(e,Uu.ON,i),s.isArea(e)){var l=s.getLocation(e,Uu.LEFT),u=s.getLocation(e,Uu.RIGHT);if(u!==$s.NONE){if(u!==i)throw new Vu("side location conflict",a.getCoordinate());l===$s.NONE&&yl.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else yl.isTrue(s.getLocation(e,Uu.LEFT)===$s.NONE,"found single null side"),s.setLocation(e,Uu.RIGHT,i),s.setLocation(e,Uu.LEFT,i)}}},oh.prototype.getCoordinate=function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null},oh.prototype.print=function(e){al.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(e)},oh.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},oh.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel().getLocation(e,Uu.LEFT);yl.isTrue(r!==$s.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();yl.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,Uu.LEFT),l=a.getLocation(e,Uu.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},oh.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1},oh.prototype.iterator=function(){return this.getEdges().iterator()},oh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new zl(this._edgeMap.values())),this._edgeList},oh.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===$s.NONE&&(this._ptInAreaLocation[e]=ih.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]},oh.prototype.toString=function(){var e=new Ks;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()},oh.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(e)},oh.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===$s.BOUNDARY&&(t[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=$s.NONE;if(t[l])u=$s.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,e)}s.setAllLocationsIfNull(l,u)}},oh.prototype.getDegree=function(){return this._edgeMap.size()},oh.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var ah=function(o){function e(){o.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return o&&(e.__proto__=o),((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new Vu("no outgoing dirEdge found",this.getCoordinate());yl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}},e.prototype.insert=function(e){var t=e;this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),o=r.getQuadrant();return nc.isNorthern(i)&&nc.isNorthern(o)?n:nc.isNorthern(i)||nc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(yl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(e){al.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new zl;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.setAllLocationsIfNull(0,e.getLocation(0)),n.setAllLocationsIfNull(1,e.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)},e.prototype.computeDepths=function(){if(1===arguments.length){var e=arguments[0],t=this.findIndex(e),n=e.getDepth(Uu.LEFT),r=e.getDepth(Uu.RIGHT),i=this.computeDepths(t+1,this._edgeList.size(),n);if(this.computeDepths(0,t,i)!==r)throw new Vu("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=o;l<a;l++){var u=this._edgeList.get(l);u.setEdgeDepths(Uu.RIGHT,s),s=u.getDepth(Uu.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(e){for(var t=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(yl.isTrue(null!==t,"found null for first outgoing dirEdge"),yl.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var e=0,t=this.iterator();t.hasNext();)t.next().isInResult()&&e++;return e}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var e=$s.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=$s.INTERIOR;break}if(r.isInResult()){e=$s.EXTERIOR;break}}}if(e===$s.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===$s.INTERIOR):(a.isInResult()&&(i=$s.EXTERIOR),s.isInResult()&&(i=$s.INTERIOR))}},e.prototype.computeLabelling=function(e){o.prototype.computeLabelling.call(this,e),this._label=new Ku($s.NONE);for(var t=this.iterator();t.hasNext();)for(var n=t.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==$s.INTERIOR&&i!==$s.BOUNDARY||this._label.setLocation(r,$s.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(oh),sh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createNode=function(e){return new ec(e,new ah)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ac),lh=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};lh.prototype.compareTo=function(e){var t=e;return lh.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},lh.prototype.interfaces_=function(){return[Rs]},lh.prototype.getClass=function(){return lh},lh.orientation=function(e){return 1===Gl.increasingDirection(e)},lh.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,a=t?e.length:-1,s=r?n.length:-1,l=t?0:e.length-1,u=r?0:n.length-1;;){var c=e[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var uh=function(){this._edges=new zl,this._ocaMap=new vi};uh.prototype.print=function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);0<t&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")},uh.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},uh.prototype.findEdgeIndex=function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1},uh.prototype.iterator=function(){return this._edges.iterator()},uh.prototype.getEdges=function(){return this._edges},uh.prototype.get=function(e){return this._edges.get(e)},uh.prototype.findEqualEdge=function(e){var t=new lh(e.getCoordinates());return this._ocaMap.get(t)},uh.prototype.add=function(e){this._edges.add(e);var t=new lh(e.getCoordinates());this._ocaMap.put(t,e)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var ch=function(){};ch.prototype.processIntersections=function(e,t,n,r){},ch.prototype.isDone=function(){},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var e=arguments[this.numTests=0];this._li=e};hh.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(hh.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1},hh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},hh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},hh.prototype.getLineIntersector=function(){return this._li},hh.prototype.hasProperIntersection=function(){return this._hasProper},hh.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},hh.prototype.hasIntersection=function(){return this._hasIntersection},hh.prototype.isDone=function(){return!1},hh.prototype.hasInteriorIntersection=function(){return this._hasInterior},hh.prototype.interfaces_=function(){return[ch]},hh.prototype.getClass=function(){return hh},hh.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var fh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new zs(e),this.segmentIndex=t,this.dist=n};fh.prototype.getSegmentIndex=function(){return this.segmentIndex},fh.prototype.getCoordinate=function(){return this.coord},fh.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)},fh.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)},fh.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},fh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},fh.prototype.getDistance=function(){return this.dist},fh.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},fh.prototype.interfaces_=function(){return[Rs]},fh.prototype.getClass=function(){return fh};var dh=function(){this._nodeMap=new vi,this.edge=null;var e=arguments[0];this.edge=e};dh.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)},dh.prototype.iterator=function(){return this._nodeMap.values().iterator()},dh.prototype.addSplitEdges=function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},dh.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},dh.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=0<t.dist||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new zs(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=t.coord),new _h(o,new Ku(this.edge._label))},dh.prototype.add=function(e,t,n){var r=new fh(e,t,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},dh.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var ph=function(){};ph.prototype.getChainStartIndices=function(e){var t=0,n=new zl;n.add(new Zs(t));do{var r=this.findChainEnd(e,t);n.add(new Zs(r)),t=r}while(t<e.length-1);return ph.toIntArray(n)},ph.prototype.findChainEnd=function(e,t){for(var n=nc.quadrant(e[t],e[t+1]),r=t+1;r<e.length&&nc.quadrant(e[r-1],e[r])===n;)r++;return r-1},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph},ph.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var mh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ll,this.env2=new ll;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new ph;this.startIndex=t.getChainStartIndices(this.pts)};mh.prototype.getCoordinates=function(){return this.pts},mh.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return n<t?t:n},mh.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n},mh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],d=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,d),!this.env1.intersects(this.env2))return null;var p=Math.trunc((i+o)/2),m=Math.trunc((s+l)/2);i<p&&(s<m&&this.computeIntersectsForChain(i,p,a,s,m,u),m<l&&this.computeIntersectsForChain(i,p,a,m,l,u)),p<o&&(s<m&&this.computeIntersectsForChain(p,o,a,s,m,u),m<l&&this.computeIntersectsForChain(p,o,a,m,l,u))}},mh.prototype.getStartIndexes=function(){return this.startIndex},mh.prototype.computeIntersects=function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var gh=function e(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE},yh={NULL_VALUE:{configurable:!0}};gh.prototype.getDepth=function(e,t){return this._depth[e][t]},gh.prototype.setDepth=function(e,t,n){this._depth[e][t]=n},gh.prototype.isNull=function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this._depth[e][t]!==gh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===gh.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===gh.NULL_VALUE}},gh.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var r=0;this._depth[e][n]>t&&(r=1),this._depth[e][n]=r}}},gh.prototype.getDelta=function(e){return this._depth[e][Uu.RIGHT]-this._depth[e][Uu.LEFT]},gh.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?$s.EXTERIOR:$s.INTERIOR},gh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},gh.prototype.add=function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<2;t++)for(var n=1;n<3;n++){var r=e.getLocation(t,n);r!==$s.EXTERIOR&&r!==$s.INTERIOR||(this.isNull(t,n)?this._depth[t][n]=gh.depthAtLocation(r):this._depth[t][n]+=gh.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===$s.INTERIOR&&this._depth[i][o]++}},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh},gh.depthAtLocation=function(e){return e===$s.EXTERIOR?0:e===$s.INTERIOR?1:gh.NULL_VALUE},yh.NULL_VALUE.get=function(){return-1},Object.defineProperties(gh,yh);var _h=function(r){function a(){if(r.call(this),this.pts=null,this._env=null,this.eiList=new dh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new gh,this._depthDelta=0,1===arguments.length){var e=arguments[0];a.call(this,e,null)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.pts=t,this._label=n}}return r&&(a.__proto__=r),((a.prototype=Object.create(r&&r.prototype)).constructor=a).prototype.getDepth=function(){return this._depth},a.prototype.getCollapsedEdge=function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new a(e,Ku.toLineLabel(this._label))},a.prototype.isIsolated=function(){return this._isIsolated},a.prototype.getCoordinates=function(){return this.pts},a.prototype.setIsolated=function(e){this._isIsolated=e},a.prototype.setName=function(e){this._name=e},a.prototype.equals=function(e){if(!(e instanceof a))return!1;var t=e;if(this.pts.length!==t.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(t.pts[o])||(n=!1),this.pts[o].equals2D(t.pts[--i])||(r=!1),!n&&!r)return!1;return!0},a.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var e=arguments[0];return this.pts[e]}},a.prototype.print=function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)},a.prototype.computeIM=function(e){a.updateIM(this._label,e)},a.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},a.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},a.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},a.prototype.getDepthDelta=function(){return this._depthDelta},a.prototype.getNumPoints=function(){return this.pts.length},a.prototype.printReverse=function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;0<=t;t--)e.print(this.pts[t]+" ");e.println("")},a.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new mh(this)),this._mce},a.prototype.getEnvelope=function(){if(null===this._env){this._env=new ll;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env},a.prototype.addIntersection=function(e,t,n,r){var i=new zs(e.getIntersection(r)),o=t,a=e.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},a.prototype.toString=function(){var e=new Ks;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()},a.prototype.isPointwiseEqual=function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},a.prototype.setDepthDelta=function(e){this._depthDelta=e},a.prototype.getEdgeIntersectionList=function(){return this.eiList},a.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},a.prototype.interfaces_=function(){return[]},a.prototype.getClass=function(){return a},a.updateIM=function(){if(2!==arguments.length)return r.prototype.updateIM.apply(this,arguments);var e=arguments[0],t=arguments[1];t.setAtLeastIfValid(e.getLocation(0,Uu.ON),e.getLocation(1,Uu.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,Uu.LEFT),e.getLocation(1,Uu.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,Uu.RIGHT),e.getLocation(1,Uu.RIGHT),2))},a}(Yu),vh=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new uh,this._bufParams=e||null};vh.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e},vh.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Ku(e.getLabel())).flip(),n.merge(r);var i=vh.depthDelta(r),o=t.getDepthDelta()+i;t.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(vh.depthDelta(e.getLabel()))},vh.prototype.buildSubgraphs=function(e,t){for(var n=new zl,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Jc(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}},vh.prototype.createSubgraphs=function(e){for(var t=new zl,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Wu;i.create(r),t.add(i)}}return gc.sort(t,gc.reverseOrder()),t},vh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},vh.prototype.getNoder=function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new Bc,n=new bl;return n.setPrecisionModel(e),t.setSegmentIntersector(new hh(n)),t},vh.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new Zc(n,this._bufParams),i=new th(e,t,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new sc(new sh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new lc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},vh.prototype.computeNodedEdges=function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new _h(i.getCoordinates(),new Ku(a));this.insertUniqueEdge(s)}}},vh.prototype.setNoder=function(e){this._workingNoder=e},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.depthDelta=function(e){var t=e.getLocation(0,Uu.LEFT),n=e.getLocation(0,Uu.RIGHT);return t===$s.INTERIOR&&n===$s.EXTERIOR?1:t===$s.EXTERIOR&&n===$s.INTERIOR?-1:0},vh.convertSegStrings=function(e){for(var t=new Nu,n=new zl;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var bh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};bh.prototype.rescale=function(){if(Hs(arguments[0],jl))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&al.out.println(n)}},bh.prototype.scale=function(){if(Hs(arguments[0],jl)){for(var e=arguments[0],t=new zl,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Tc(this.scale(r.getCoordinates()),r.getData()))}return t}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new zs(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Gl.removeRepeatedPoints(o)}},bh.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},bh.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e},bh.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)},bh.prototype.interfaces_=function(){return[jc]},bh.prototype.getClass=function(){return bh};var wh=function(){this._li=new bl,this._segStrings=null;var e=arguments[0];this._segStrings=e},xh={fact:{configurable:!0}};wh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next().getCoordinates();this.checkEndPtVertexIntersections(t[0],this._segStrings),this.checkEndPtVertexIntersections(t[t.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new ml("found endpt/interior pt intersection at index "+o+" :pt "+n)},wh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(t,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],d=arguments[3];if(c===f&&h===d)return null;var p=c.getCoordinates()[h],m=c.getCoordinates()[h+1],g=f.getCoordinates()[d],y=f.getCoordinates()[d+1];if(this._li.computeIntersection(p,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,m)||this.hasInteriorIntersection(this._li,g,y)))throw new ml("found non-noded intersection at "+p+"-"+m+" and "+g+"-"+y)}},wh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},wh.prototype.checkCollapses=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},wh.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1},wh.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new ml("found non-noded collapse at "+wh.fact.createLineString([e,t,n]))},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},xh.fact.get=function(){return new Nu},Object.defineProperties(wh,xh);var kh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new Ns("Scale factor must be non-zero");1!==t&&(this._pt=new zs(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new zs,this._p1Scaled=new zs),this.initCorners(this._pt)},Lh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};kh.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return yl.isTrue(!(a&&s),"Found bad envelope test"),s},kh.prototype.initCorners=function(e){this._minx=e.x-.5,this._maxx=e.x+.5,this._miny=e.y-.5,this._maxy=e.y+.5,this._corner[0]=new zs(this._maxx,this._maxy),this._corner[1]=new zs(this._minx,this._maxy),this._corner[2]=new zs(this._minx,this._miny),this._corner[3]=new zs(this._maxx,this._miny)},kh.prototype.intersects=function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},kh.prototype.scale=function(e){return Math.round(e*this._scaleFactor)},kh.prototype.getCoordinate=function(){return this._originalPt},kh.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},kh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var e=kh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ll(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv},kh.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},kh.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||e.equals(this._pt)||t.equals(this._pt)))))},kh.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return!!this.intersects(n,r)&&(e.addIntersection(this.getCoordinate(),t),!0)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},Lh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(kh,Lh);var Ch=function(){this.tempEnv1=new ll,this.selectedSegment=new Ic};Ch.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Sh=function(){this._index=null;var e=arguments[0];this._index=e},Mh={HotPixelSnapAction:{configurable:!0}};Sh.prototype.snap=function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new Ph(t,n,r);return this._index.query(i,{interfaces_:function(){return[fc]},visitItem:function(e){e.select(i,o)}}),o.isNodeAdded()}},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Mh.HotPixelSnapAction.get=function(){return Ph},Object.defineProperties(Sh,Mh);var Ph=function(r){function e(){r.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=t,this._hotPixelVertexIndex=n}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return r.prototype.select.apply(this,arguments);var e=arguments[0],t=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,t)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ch),Eh=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new zl};Eh.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}},Eh.prototype.isDone=function(){return!1},Eh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Eh.prototype.interfaces_=function(){return[ch]},Eh.prototype.getClass=function(){return Eh};var Th=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new bl,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};Th.prototype.checkCorrectness=function(e){var t=Tc.getNodedSubstrings(e),n=new wh(t);try{n.checkValid()}catch(e){if(!(e instanceof il))throw e;e.printStackTrace()}},Th.prototype.getNodedSubstrings=function(){return Tc.getNodedSubstrings(this._nodedSegStrings)},Th.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)},Th.prototype.findInteriorIntersections=function(e,t){var n=new Eh(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()},Th.prototype.computeVertexSnaps=function(){if(Hs(arguments[0],jl))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof Tc)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new kh(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},Th.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new Bc,this._pointSnapper=new Sh(this._noder.getIndex()),this.snapRound(e,this._li)},Th.prototype.computeIntersectionSnaps=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new kh(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},Th.prototype.interfaces_=function(){return[jc]},Th.prototype.getClass=function(){return Th};var Ih=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new zc,this._resultGeometry=null,this._saveException=null,1===arguments.length){var e=arguments[0];this._argGeom=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},Oh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ih.prototype.bufferFixedPrecision=function(e){var t=new bh(new Th(new Tu(1)),e.getScale()),n=new vh(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ih.prototype.bufferReducedPrecision=function(){var e=this;if(0===arguments.length){for(var t=Ih.MAX_PRECISION_DIGITS;0<=t;t--){try{e.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Vu))throw t;e._saveException=t}if(null!==e._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Ih.precisionScaleFactor(this._argGeom,this._distance,n),i=new Tu(r);this.bufferFixedPrecision(i)}},Ih.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Tu.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},Ih.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)},Ih.prototype.bufferOriginalPrecision=function(){try{var e=new vh(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof ml))throw e;this._saveException=e}},Ih.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry},Ih.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Ih.bufferOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return new Ih(e).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Sl&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Ih(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof zc&&arguments[0]instanceof Sl&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=arguments[2];return new Ih(a,l).getResultGeometry(s)}}else if(4===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2],f=arguments[3],d=new Ih(u);return d.setQuadrantSegments(h),d.setEndCapStyle(f),d.getResultGeometry(c)}},Ih.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=Ws.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<t?t:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Oh.CAP_ROUND.get=function(){return zc.CAP_ROUND},Oh.CAP_BUTT.get=function(){return zc.CAP_FLAT},Oh.CAP_FLAT.get=function(){return zc.CAP_FLAT},Oh.CAP_SQUARE.get=function(){return zc.CAP_SQUARE},Oh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ih,Oh);var Dh=function(){this._pt=[new zs,new zs],this._distance=As.NaN,this._isNull=!0};Dh.prototype.getCoordinates=function(){return this._pt},Dh.prototype.getCoordinate=function(e){return this._pt[e]},Dh.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}},Dh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Dh.prototype.getDistance=function(){return this._distance},Dh.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh};var Nh=function(){};Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.computeDistance=function(){if(arguments[2]instanceof Dh&&arguments[0]instanceof fu&&arguments[1]instanceof zs)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new Ic,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(t);n.setMinimum(a,t)}else if(arguments[2]instanceof Dh&&arguments[0]instanceof gu&&arguments[1]instanceof zs){var s=arguments[0],l=arguments[1],u=arguments[2];Nh.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Nh.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Dh&&arguments[0]instanceof Sl&&arguments[1]instanceof zs){var h=arguments[0],f=arguments[1],d=arguments[2];if(h instanceof fu)Nh.computeDistance(h,f,d);else if(h instanceof gu)Nh.computeDistance(h,f,d);else if(h instanceof ou)for(var p=h,m=0;m<p.getNumGeometries();m++){var g=p.getGeometryN(m);Nh.computeDistance(g,f,d)}else d.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Dh&&arguments[0]instanceof Ic&&arguments[1]instanceof zs){var y=arguments[0],_=arguments[1],v=arguments[2],b=y.closestPoint(_);v.setMinimum(b,_)}};var Ah=function(e){this._maxPtDist=new Dh,this._inputGeom=e||null},jh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ah.prototype.computeMaxMidpointDistance=function(e){var t=new Bh(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},Ah.prototype.computeMaxVertexDistance=function(e){var t=new Rh(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},Ah.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()},Ah.prototype.getDistancePoints=function(){return this._maxPtDist},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},jh.MaxPointDistanceFilter.get=function(){return Rh},jh.MaxMidpointDistanceFilter.get=function(){return Bh},Object.defineProperties(Ah,jh);var Rh=function(e){this._maxPtDist=new Dh,this._minPtDist=new Dh,this._geom=e||null};Rh.prototype.filter=function(e){this._minPtDist.initialize(),Nh.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rh.prototype.interfaces_=function(){return[El]},Rh.prototype.getClass=function(){return Rh};var Bh=function(e){this._maxPtDist=new Dh,this._minPtDist=new Dh,this._geom=e||null};Bh.prototype.filter=function(e,t){if(0===t)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new zs((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Nh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bh.prototype.isDone=function(){return!1},Bh.prototype.isGeometryChanged=function(){return!1},Bh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bh.prototype.interfaces_=function(){return[iu]},Bh.prototype.getClass=function(){return Bh};var Fh=function(e){this._comps=e||null};Fh.prototype.filter=function(e){e instanceof gu&&this._comps.add(e)},Fh.prototype.interfaces_=function(){return[ru]},Fh.prototype.getClass=function(){return Fh},Fh.getPolygons=function(){if(1===arguments.length){var e=arguments[0];return Fh.getPolygons(e,new zl)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof gu?n.add(t):t instanceof ou&&t.apply(new Fh(n)),n}};var zh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var e=arguments[0];this._lines=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};zh.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof _u){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof fu&&this._lines.add(e)},zh.prototype.setForceToLineString=function(e){this._isForcedToLineString=e},zh.prototype.interfaces_=function(){return[Cl]},zh.prototype.getClass=function(){return zh},zh.getGeometry=function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(zh.getLines(e))}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(zh.getLines(t,n))}},zh.getLines=function(){if(1===arguments.length){var e=arguments[0];return zh.getLines(e,!1)}if(2===arguments.length){if(Hs(arguments[0],jl)&&Hs(arguments[1],jl)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();zh.getLines(i,n)}return n}if(arguments[0]instanceof Sl&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new zl;return o.apply(new zh(s,a)),s}if(arguments[0]instanceof Sl&&Hs(arguments[1],jl)){var l=arguments[0],u=arguments[1];return l instanceof fu?u.add(l):l.apply(new zh(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Hs(arguments[0],jl)&&Hs(arguments[1],jl)){for(var c=arguments[0],h=arguments[1],f=arguments[2],d=c.iterator();d.hasNext();){var p=d.next();zh.getLines(p,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Sl&&Hs(arguments[1],jl)){var m=arguments[0],g=arguments[1],y=arguments[2];return m.apply(new zh(g,y)),g}}};var qh=function(){if(this._boundaryRule=Tl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(null===e)throw new Ns("Rule must be non-null");this._boundaryRule=e}};qh.prototype.locateInternal=function(){if(arguments[0]instanceof zs&&arguments[1]instanceof gu){var e=arguments[0],t=arguments[1];if(t.isEmpty())return $s.EXTERIOR;var n=t.getExteriorRing(),r=this.locateInPolygonRing(e,n);if(r===$s.EXTERIOR)return $s.EXTERIOR;if(r===$s.BOUNDARY)return $s.BOUNDARY;for(var i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i),a=this.locateInPolygonRing(e,o);if(a===$s.INTERIOR)return $s.EXTERIOR;if(a===$s.BOUNDARY)return $s.BOUNDARY}return $s.INTERIOR}if(arguments[0]instanceof zs&&arguments[1]instanceof fu){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return $s.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?kl.isOnLine(s,u)?$s.INTERIOR:$s.EXTERIOR:$s.BOUNDARY}if(arguments[0]instanceof zs&&arguments[1]instanceof pu){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?$s.INTERIOR:$s.EXTERIOR}},qh.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?kl.locatePointInRing(e,t.getCoordinates()):$s.EXTERIOR},qh.prototype.intersects=function(e,t){return this.locate(e,t)!==$s.EXTERIOR},qh.prototype.updateLocationInfo=function(e){e===$s.INTERIOR&&(this._isIn=!0),e===$s.BOUNDARY&&this._numBoundaries++},qh.prototype.computeLocation=function(e,t){if(t instanceof pu&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof fu)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof gu)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof au)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(e,i))}else if(t instanceof vu)for(var o=t,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(e,s))}else if(t instanceof ou)for(var l=new rh(t);l.hasNext();){var u=l.next();u!==t&&this.computeLocation(e,u)}},qh.prototype.locate=function(e,t){return t.isEmpty()?$s.EXTERIOR:t instanceof fu?this.locateInternal(e,t):t instanceof gu?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?$s.BOUNDARY:0<this._numBoundaries||this._isIn?$s.INTERIOR:$s.EXTERIOR)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Uh=function e(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Gh={INSIDE_AREA:{configurable:!0}};Uh.prototype.isInsideArea=function(){return this._segIndex===Uh.INSIDE_AREA},Uh.prototype.getCoordinate=function(){return this._pt},Uh.prototype.getGeometryComponent=function(){return this._component},Uh.prototype.getSegmentIndex=function(){return this._segIndex},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Gh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Uh,Gh);var $h=function(e){this._pts=e||null};$h.prototype.filter=function(e){e instanceof pu&&this._pts.add(e)},$h.prototype.interfaces_=function(){return[ru]},$h.prototype.getClass=function(){return $h},$h.getPoints=function(){if(1===arguments.length){var e=arguments[0];return e instanceof pu?gc.singletonList(e):$h.getPoints(e,new zl)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof pu?n.add(t):t instanceof ou&&t.apply(new $h(n)),n}};var Vh=function(){this._locations=null;var e=arguments[0];this._locations=e};Vh.prototype.filter=function(e){(e instanceof pu||e instanceof fu||e instanceof gu)&&this._locations.add(new Uh(e,0,e.getCoordinate()))},Vh.prototype.interfaces_=function(){return[ru]},Vh.prototype.getClass=function(){return Vh},Vh.getLocations=function(e){var t=new zl;return e.apply(new Vh(t)),t};var Hh=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new qh,this._minDistanceLocation=null,this._minDistance=As.MAX_VALUE,2===arguments.length){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Hh.prototype.computeContainmentDistance=function(){if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],r=1-t,i=Fh.getPolygons(this._geom[t]);if(0<i.size()){var o=Vh.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[t]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Hs(arguments[0],Fl)&&Hs(arguments[1],Fl)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Uh&&arguments[1]instanceof gu){var f=arguments[0],d=arguments[1],p=arguments[2],m=f.getCoordinate();if($s.EXTERIOR!==this._ptLocator.locate(m,d))return p[this._minDistance=0]=f,p[1]=new Uh(d,m),null}},Hh.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Hh.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=zh.getLines(this._geom[0]),n=zh.getLines(this._geom[1]),r=$h.getPoints(this._geom[0]),i=$h.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),void this.updateMinDistance(e,!1))))},Hh.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Hh.prototype.updateMinDistance=function(e,t){if(null===e[0])return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])},Hh.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Hh.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof fu&&arguments[1]instanceof pu){var e=arguments[0],t=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this._minDistance)return null;for(var r=e.getCoordinates(),i=t.getCoordinate(),o=0;o<r.length-1;o++){var a=kl.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new Ic(r[o],r[o+1]).closestPoint(i);n[0]=new Uh(e,o,s),n[1]=new Uh(t,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof fu&&arguments[1]instanceof fu){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),f=u.getCoordinates(),d=0;d<h.length-1;d++)for(var p=0;p<f.length-1;p++){var m=kl.distanceLineLine(h[d],h[d+1],f[p],f[p+1]);if(m<this._minDistance){this._minDistance=m;var g=new Ic(h[d],h[d+1]),y=new Ic(f[p],f[p+1]),_=g.closestPoints(y);c[0]=new Uh(l,d,_[0]),c[1]=new Uh(u,p,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},Hh.prototype.computeMinDistancePoints=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Uh(i,0,i.getCoordinate()),n[1]=new Uh(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Hh.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Ns("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Hh.prototype.computeMinDistanceLines=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.distance=function(e,t){return new Hh(e,t).distance()},Hh.isWithinDistance=function(e,t,n){return new Hh(e,t,n).distance()<=n},Hh.nearestPoints=function(e,t){return new Hh(e,t).nearestPoints()};var Wh=function(){this._pt=[new zs,new zs],this._distance=As.NaN,this._isNull=!0};Wh.prototype.getCoordinates=function(){return this._pt},Wh.prototype.getCoordinate=function(e){return this._pt[e]},Wh.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}},Wh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Wh.prototype.toString=function(){return pl.toLineString(this._pt[0],this._pt[1])},Wh.prototype.getDistance=function(){return this._distance},Wh.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};var Qh=function(){};Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.computeDistance=function(){if(arguments[2]instanceof Wh&&arguments[0]instanceof fu&&arguments[1]instanceof zs)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new Ic,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(t);n.setMinimum(a,t)}else if(arguments[2]instanceof Wh&&arguments[0]instanceof gu&&arguments[1]instanceof zs){var s=arguments[0],l=arguments[1],u=arguments[2];Qh.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Qh.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Wh&&arguments[0]instanceof Sl&&arguments[1]instanceof zs){var h=arguments[0],f=arguments[1],d=arguments[2];if(h instanceof fu)Qh.computeDistance(h,f,d);else if(h instanceof gu)Qh.computeDistance(h,f,d);else if(h instanceof ou)for(var p=h,m=0;m<p.getNumGeometries();m++){var g=p.getGeometryN(m);Qh.computeDistance(g,f,d)}else d.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Wh&&arguments[0]instanceof Ic&&arguments[1]instanceof zs){var y=arguments[0],_=arguments[1],v=arguments[2],b=y.closestPoint(_);v.setMinimum(b,_)}};var Kh=function(){this._g0=null,this._g1=null,this._ptDist=new Wh;var e=arguments[this._densifyFrac=0],t=arguments[1];this._g0=e,this._g1=t},Zh={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Kh.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Kh.prototype.setDensifyFraction=function(e){if(1<e||e<=0)throw new Ns("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e},Kh.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)},Kh.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Kh.prototype.computeOrientedDistance=function(e,t,n){var r=new Jh(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac){var i=new Xh(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}},Kh.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Kh.distance=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return new Kh(e,t).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Kh(n,r);return o.setDensifyFraction(i),o.distance()}},Zh.MaxPointDistanceFilter.get=function(){return Jh},Zh.MaxDensifiedByFractionDistanceFilter.get=function(){return Xh},Object.defineProperties(Kh,Zh);var Jh=function(){this._maxPtDist=new Wh,this._minPtDist=new Wh,this._euclideanDist=new Qh,this._geom=null;var e=arguments[0];this._geom=e};Jh.prototype.filter=function(e){this._minPtDist.initialize(),Qh.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Jh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Jh.prototype.interfaces_=function(){return[El]},Jh.prototype.getClass=function(){return Jh};var Xh=function(){this._maxPtDist=new Wh,this._minPtDist=new Wh,this._geom=null;var e=arguments[this._numSubSegs=0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};Xh.prototype.filter=function(e,t){if(0===t)return null;for(var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,u=new zs(s,l);this._minPtDist.initialize(),Qh.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Xh.prototype.isDone=function(){return!1},Xh.prototype.isGeometryChanged=function(){return!1},Xh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Xh.prototype.interfaces_=function(){return[iu]},Xh.prototype.getClass=function(){return Xh};var Yh=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},ef={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Yh.prototype.checkMaximumDistance=function(e,t,n){var r=new Kh(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+pl.toLineString(i[0],i[1])+")"}},Yh.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Yh.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),Yh.VERBOSE&&al.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Yh.prototype.checkNegativeValid=function(){if(!(this._input instanceof gu||this._input instanceof vu||this._input instanceof ou))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)},Yh.prototype.getErrorIndicator=function(){return this._errorIndicator},Yh.prototype.checkMinimumDistance=function(e,t,n){var r=new Hh(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+pl.toLineString(i[0],i[1])+" )"}},Yh.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)},Yh.prototype.getErrorLocation=function(){return this._errorLocation},Yh.prototype.getPolygonLines=function(e){for(var t=new zl,n=new zh(t),r=Fh.getPolygons(e).iterator();r.hasNext();)r.next().apply(n);return e.getFactory().buildGeometry(t)},Yh.prototype.getErrorMessage=function(){return this._errMsg},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},ef.VERBOSE.get=function(){return!1},ef.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Yh,ef);var tf=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},nf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};tf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},tf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*tf.MAX_ENV_DIFF_FRAC;0===e&&(e=.001);var t=new ll(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new ll(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},tf.prototype.checkDistance=function(){var e=new Yh(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")},tf.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();0<this._distance&&t<e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},tf.prototype.checkPolygonal=function(){this._result instanceof gu||this._result instanceof vu||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},tf.prototype.getErrorIndicator=function(){return this._errorIndicator},tf.prototype.getErrorLocation=function(){return this._errorLocation},tf.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()?null:0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},tf.prototype.report=function(e){if(!tf.VERBOSE)return null;al.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))},tf.prototype.getErrorMessage=function(){return this._errorMsg},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf},tf.isValidMsg=function(e,t,n){var r=new tf(e,t,n);return r.isValid()?null:r.getErrorMessage()},tf.isValid=function(e,t,n){return!!new tf(e,t,n).isValid()},nf.VERBOSE.get=function(){return!1},nf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(tf,nf);var rf=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};rf.prototype.getCoordinates=function(){return this._pts},rf.prototype.size=function(){return this._pts.length},rf.prototype.getCoordinate=function(e){return this._pts[e]},rf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},rf.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Mc.octant(this.getCoordinate(e),this.getCoordinate(e+1))},rf.prototype.setData=function(e){this._data=e},rf.prototype.getData=function(){return this._data},rf.prototype.toString=function(){return pl.toLineString(new Cu(this._pts))},rf.prototype.interfaces_=function(){return[Pc]},rf.prototype.getClass=function(){return rf};var of=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new zl,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};of.prototype.getInteriorIntersection=function(){return this._interiorIntersection},of.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e},of.prototype.getIntersectionSegments=function(){return this._intSegments},of.prototype.count=function(){return this._intersectionCount},of.prototype.getIntersections=function(){return this._intersections},of.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},of.prototype.setKeepIntersections=function(e){this._keepIntersections=e},of.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(e,t)&&!this.isEndSegment(n,r))return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},of.prototype.isEndSegment=function(e,t){return 0===t||t>=e.size()-2},of.prototype.hasIntersection=function(){return null!==this._interiorIntersection},of.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},of.prototype.interfaces_=function(){return[ch]},of.prototype.getClass=function(){return of},of.createAllIntersectionsFinder=function(e){var t=new of(e);return t.setFindAllIntersections(!0),t},of.createAnyIntersectionFinder=function(e){return new of(e)},of.createIntersectionCounter=function(e){var t=new of(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var af=function(){this._li=new bl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};af.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},af.prototype.getIntersections=function(){return this._segInt.getIntersections()},af.prototype.isValid=function(){return this.execute(),this._isValid},af.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},af.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new of(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new Bc;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},af.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Vu(this.getErrorMessage(),this._segInt.getInteriorIntersection())},af.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+pl.toLineString(e[0],e[1])+" and "+pl.toLineString(e[2],e[3])},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},af.computeIntersections=function(e){var t=new af(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var sf=function e(){this._nv=null;var t=arguments[0];this._nv=new af(e.toSegmentStrings(t))};sf.prototype.checkValid=function(){this._nv.checkValid()},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.toSegmentStrings=function(e){for(var t=new zl,n=e.iterator();n.hasNext();){var r=n.next();t.add(new rf(r.getCoordinates(),r))}return t},sf.checkValid=function(e){new sf(e).checkValid()};var lf=function(e){this._mapOp=e};lf.prototype.map=function(e){for(var t=new zl,n=0;n<e.getNumGeometries();n++){var r=this._mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection(Nu.toGeometryArray(t))},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},lf.map=function(e,t){return new lf(t).map(e)};var uf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new zl,this._resultLineList=new zl;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};uf.prototype.collectLines=function(e){for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this._lineEdgesList),this.collectBoundaryTouchEdge(n,e,this._lineEdgesList)}},uf.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)},uf.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList},uf.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!Gf.isResultOfOp(r,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))},uf.prototype.findCoveredLineEdges=function(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();)e.next().getEdges().findCoveredLineEdges();for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},uf.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},uf.prototype.buildLines=function(e){for(var t=this._lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},uf.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();return e.isLineEdge()?null:e.isVisited()?null:e.isInteriorAreaEdge()?null:e.getEdge().isInResult()?null:(yl.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(Gf.isResultOfOp(r,t)&&t===Gf.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var cf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new zl;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};cf.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}},cf.prototype.extractNonCoveredResultNodes=function(e){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==Gf.INTERSECTION)){var r=n.getLabel();Gf.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}},cf.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var hf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};hf.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},hf.prototype.transformPolygon=function(e,t){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!==r&&r instanceof _u&&!r.isEmpty()||(n=!1);for(var i=new zl,o=0;o<e.getNumInteriorRing();o++){var a=this.transformLinearRing(e.getInteriorRingN(o),e);null===a||a.isEmpty()||(a instanceof _u||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new zl;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},hf.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)},hf.prototype.getInputGeometry=function(){return this._inputGeom},hf.prototype.transformMultiLineString=function(e,t){for(var n=new zl,r=0;r<e.getNumGeometries();r++){var i=this.transformLineString(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},hf.prototype.transformCoordinates=function(e,t){return this.copy(e)},hf.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},hf.prototype.transformMultiPoint=function(e,t){for(var n=new zl,r=0;r<e.getNumGeometries();r++){var i=this.transformPoint(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},hf.prototype.transformMultiPolygon=function(e,t){for(var n=new zl,r=0;r<e.getNumGeometries();r++){var i=this.transformPolygon(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},hf.prototype.copy=function(e){return e.copy()},hf.prototype.transformGeometryCollection=function(e,t){for(var n=new zl,r=0;r<e.getNumGeometries();r++){var i=this.transform(e.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Nu.toGeometryArray(n)):this._factory.buildGeometry(n)},hf.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof pu)return this.transformPoint(e,null);if(e instanceof yu)return this.transformMultiPoint(e,null);if(e instanceof _u)return this.transformLinearRing(e,null);if(e instanceof fu)return this.transformLineString(e,null);if(e instanceof au)return this.transformMultiLineString(e,null);if(e instanceof gu)return this.transformPolygon(e,null);if(e instanceof vu)return this.transformMultiPolygon(e,null);if(e instanceof ou)return this.transformGeometryCollection(e,null);throw new Ns("Unknown Geometry subtype: "+e.getClass().getName())},hf.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf};var ff=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ic,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof fu&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};ff.prototype.snapVertices=function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;r<n;r++){var i=e.get(r),o=this.findSnapForVertex(i,t);null!==o&&(e.set(r,new zs(o)),0===r&&this._isClosed&&e.set(e.size()-1,new zs(o)))}},ff.prototype.findSnapForVertex=function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this._snapTolerance)return t[n]}return null},ff.prototype.snapTo=function(e){var t=new Ul(this._srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},ff.prototype.snapSegments=function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;r<n;r++){var i=t[r],o=this.findSegmentIndexToSnap(i,e);0<=o&&e.add(o+1,new zs(i),!1)}},ff.prototype.findSegmentIndexToSnap=function(e,t){for(var n=As.MAX_VALUE,r=-1,i=0;i<t.size()-1;i++){if(this._seg.p0=t.get(i),this._seg.p1=t.get(i+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(e);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},ff.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.isClosed=function(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])};var df=function(e){this._srcGeom=e||null},pf={SNAP_PRECISION_FACTOR:{configurable:!0}};df.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e);return new mf(t,n).transform(this._srcGeom)},df.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new mf(e,n,!0).transform(this._srcGeom),i=r;return t&&Hs(i,mu)&&(i=r.buffer(0)),i},df.prototype.computeSnapTolerance=function(e){return this.computeMinimumSegmentLength(e)/10},df.prototype.extractTargetCoordinates=function(e){for(var t=new wi,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))},df.prototype.computeMinimumSegmentLength=function(e){for(var t=As.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.snap=function(e,t,n){var r=new Array(2).fill(null),i=new df(e);r[0]=i.snapTo(t,n);var o=new df(t);return r[1]=o.snapTo(r[0],n),r},df.computeOverlaySnapTolerance=function(){if(1===arguments.length){var e=arguments[0],t=df.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===Tu.FIXED){var r=1/n.getScale()*2/1.415;t<r&&(t=r)}return t}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(df.computeOverlaySnapTolerance(i),df.computeOverlaySnapTolerance(o))}},df.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*df.SNAP_PRECISION_FACTOR},df.snapToSelf=function(e,t,n){return new df(e).snapToSelf(t,n)},pf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(df,pf);var mf=function(r){function e(e,t,n){r.call(this),this._snapTolerance=e||null,this._snapPts=t||null,this._isSelfSnap=void 0!==n&&n}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.snapLine=function(e,t){var n=new ff(e,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(t)},e.prototype.transformCoordinates=function(e,t){var n=e.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hf),gf=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};gf.prototype.getCommon=function(){return As.longBitsToDouble(this._commonBits)},gf.prototype.add=function(e){var t=As.doubleToLongBits(e);return this._isFirst?(this._commonBits=t,this._commonSignExp=gf.signExpBits(this._commonBits),this._isFirst=!1,null):gf.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=gf.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=gf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},gf.prototype.toString=function(){if(1===arguments.length){var e=arguments[0],t=As.longBitsToDouble(e),n="0000000000000000000000000000000000000000000000000000000000000000"+As.toBinaryString(e),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+t+" ]"}},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf},gf.getBit=function(e,t){return 0!=(e&1<<t)?1:0},gf.signExpBits=function(e){return e>>52},gf.zeroLowerBits=function(e,t){return e&~((1<<t)-1)},gf.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;0<=r;r--){if(gf.getBit(e,r)!==gf.getBit(t,r))return n;n++}return 52};var yf=function(){this._commonCoord=null,this._ccFilter=new vf},_f={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};yf.prototype.addCommonBits=function(e){var t=new bf(this._commonCoord);e.apply(t),e.geometryChanged()},yf.prototype.removeCommonBits=function(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var t=new zs(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new bf(t);return e.apply(n),e.geometryChanged(),e},yf.prototype.getCommonCoordinate=function(){return this._commonCoord},yf.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},_f.CommonCoordinateFilter.get=function(){return vf},_f.Translater.get=function(){return bf},Object.defineProperties(yf,_f);var vf=function(){this._commonBitsX=new gf,this._commonBitsY=new gf};vf.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)},vf.prototype.getCommonCoordinate=function(){return new zs(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},vf.prototype.interfaces_=function(){return[El]},vf.prototype.getClass=function(){return vf};var bf=function(){this.trans=null;var e=arguments[0];this.trans=e};bf.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)},bf.prototype.isDone=function(){return!1},bf.prototype.isGeometryChanged=function(){return!0},bf.prototype.interfaces_=function(){return[iu]},bf.prototype.getClass=function(){return bf};var wf=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};wf.prototype.selfSnap=function(e){return new df(e).snapTo(e,this._snapTolerance)},wf.prototype.removeCommonBits=function(e){this._cbr=new yf,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t},wf.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e},wf.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=Gf.overlayOp(t[0],t[1],e);return this.prepareResult(n)},wf.prototype.checkValid=function(e){e.isValid()||al.out.println("Snapped geometry is invalid")},wf.prototype.computeSnapTolerance=function(){this._snapTolerance=df.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},wf.prototype.snap=function(e){var t=this.removeCommonBits(e);return df.snap(t[0],t[1],this._snapTolerance)},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.overlayOp=function(e,t,n){return new wf(e,t).getResultGeometry(n)},wf.union=function(e,t){return wf.overlayOp(e,t,Gf.UNION)},wf.intersection=function(e,t){return wf.overlayOp(e,t,Gf.INTERSECTION)},wf.symDifference=function(e,t){return wf.overlayOp(e,t,Gf.SYMDIFFERENCE)},wf.difference=function(e,t){return wf.overlayOp(e,t,Gf.DIFFERENCE)};var xf=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};xf.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=Gf.overlayOp(this._geom[0],this._geom[1],e),n=!0}catch(e){if(!(e instanceof ml))throw e;r=e}if(!n)try{t=wf.overlayOp(this._geom[0],this._geom[1],e)}catch(e){throw e instanceof ml?r:e}return t},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.overlayOp=function(e,t,n){return new xf(e,t).getResultGeometry(n)},xf.union=function(e,t){return xf.overlayOp(e,t,Gf.UNION)},xf.intersection=function(e,t){return xf.overlayOp(e,t,Gf.INTERSECTION)},xf.symDifference=function(e,t){return xf.overlayOp(e,t,Gf.SYMDIFFERENCE)},xf.difference=function(e,t){return xf.overlayOp(e,t,Gf.DIFFERENCE)};var kf=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};kf.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf};var Lf=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},Cf={INSERT:{configurable:!0},DELETE:{configurable:!0}};Lf.prototype.isDelete=function(){return this._eventType===Lf.DELETE},Lf.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e},Lf.prototype.getObject=function(){return this._obj},Lf.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Lf.prototype.getInsertEvent=function(){return this._insertEvent},Lf.prototype.isInsert=function(){return this._eventType===Lf.INSERT},Lf.prototype.isSameLabel=function(e){return null!==this._label&&this._label===e._label},Lf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Lf.prototype.interfaces_=function(){return[Rs]},Lf.prototype.getClass=function(){return Lf},Cf.INSERT.get=function(){return 1},Cf.DELETE.get=function(){return 2},Object.defineProperties(Lf,Cf);var Sf=function(){};Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf};var Mf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};Mf.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(Mf.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1},Mf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Mf.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e},Mf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Mf.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next().getCoordinate();if(e.isIntersection(r))return!0}return!1},Mf.prototype.hasProperIntersection=function(){return this._hasProper},Mf.prototype.hasIntersection=function(){return this._hasIntersection},Mf.prototype.isDone=function(){return this._isDone},Mf.prototype.isBoundaryPoint=function(e,t){return!(null===t||!this.isBoundaryPointInternal(e,t[0])&&!this.isBoundaryPointInternal(e,t[1]))},Mf.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t},Mf.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Mf.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var Pf=function(e){function t(){e.call(this),this.events=new zl,this.nOverlaps=null}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.prepareEvents=function(){gc.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},t.prototype.computeIntersections=function(){if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var n=this.events.get(t);if(n.isInsert()&&this.processOverlaps(t,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Mf&&Hs(arguments[0],Fl)&&Hs(arguments[1],Fl)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Hs(arguments[0],Fl)&&arguments[1]instanceof Mf){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},t.prototype.addEdge=function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new kf(n,i),a=new Lf(t,n.getMinX(i),o);this.events.add(a),this.events.add(new Lf(n.getMaxX(i),a))}},t.prototype.processOverlaps=function(e,t,n,r){for(var i=n.getObject(),o=e;o<t;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},t.prototype.addEdges=function(){if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.addEdge(t,t)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Sf),Ef=function(){this._min=As.POSITIVE_INFINITY,this._max=As.NEGATIVE_INFINITY},Tf={NodeComparator:{configurable:!0}};Ef.prototype.getMin=function(){return this._min},Ef.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)},Ef.prototype.getMax=function(){return this._max},Ef.prototype.toString=function(){return pl.toLineString(new zs(this._min,0),new zs(this._max,0))},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Tf.NodeComparator.get=function(){return If},Object.defineProperties(Ef,Tf);var If=function(){};If.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:o<i?1:0},If.prototype.interfaces_=function(){return[Fs]},If.prototype.getClass=function(){return If};var Of=function(r){function e(){r.call(this),this._item=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._min=e,this._max=t,this._item=n}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ef),Df=function(n){function e(){n.call(this),this._node1=null,this._node2=null;var e=arguments[0],t=arguments[1];this._node1=e,this._node2=t,this.buildExtent(this._node1,this._node2)}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.buildExtent=function(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)},e.prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,n),null!==this._node2&&this._node2.query(e,t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ef),Nf=function(){this._leaves=new zl,this._root=null,this._level=0};Nf.prototype.buildTree=function(){gc.sort(this._leaves,new Ef.NodeComparator);for(var e=this._leaves,t=null,n=new zl;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}},Nf.prototype.insert=function(e,t,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Of(e,t,n))},Nf.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)},Nf.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Nf.prototype.printNode=function(e){al.out.println(pl.toLineString(new zs(e._min,this._level),new zs(e._max,this._level)))},Nf.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Nf.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n);if(null===(n+1<e.size()?e.get(n):null))t.add(r);else{var i=new Df(e.get(n),e.get(n+1));t.add(i)}}},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf};var Af=function(){this._items=new zl};Af.prototype.visitItem=function(e){this._items.add(e)},Af.prototype.getItems=function(){return this._items},Af.prototype.interfaces_=function(){return[fc]},Af.prototype.getClass=function(){return Af};var jf=function(){this._index=null;var e=arguments[0];if(!Hs(e,mu))throw new Ns("Argument must be Polygonal");this._index=new Ff(e)},Rf={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};jf.prototype.locate=function(e){var t=new xl(e),n=new Bf(t);return this._index.query(e.y,e.y,n),t.getLocation()},jf.prototype.interfaces_=function(){return[nh]},jf.prototype.getClass=function(){return jf},Rf.SegmentVisitor.get=function(){return Bf},Rf.IntervalIndexedGeometry.get=function(){return Ff},Object.defineProperties(jf,Rf);var Bf=function(){this._counter=null;var e=arguments[0];this._counter=e};Bf.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},Bf.prototype.interfaces_=function(){return[fc]},Bf.prototype.getClass=function(){return Bf};var Ff=function(){this._index=new Nf;var e=arguments[0];this.init(e)};Ff.prototype.init=function(e){for(var t=zh.getLines(e).iterator();t.hasNext();){var n=t.next().getCoordinates();this.addLine(n)}},Ff.prototype.addLine=function(e){for(var t=1;t<e.length;t++){var n=new Ic(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Ff.prototype.query=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=new Af;return this._index.query(e,t,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff};var zf=function(a){function o(){if(a.call(this),this._parentGeom=null,this._lineEdgeMap=new Eu,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new qh,2===arguments.length){var e=arguments[0],t=arguments[1],n=Tl.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=t,this._boundaryNodeRule=n,null!==t&&this.add(t)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i)}}return a&&(o.__proto__=a),((o.prototype=Object.create(a&&a.prototype)).constructor=o).prototype.insertBoundaryPoint=function(e,t){var n=this._nodes.addNode(t).getLabel(),r=1;n.getLocation(e,Uu.ON)===$s.BOUNDARY&&r++;var i=o.determineBoundary(this._boundaryNodeRule,r);n.setLocation(e,i)},o.prototype.computeSelfNodes=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.computeSelfNodes(e,t,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Mf(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof _u||this._parentGeom instanceof gu||this._parentGeom instanceof vu,l=r||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},o.prototype.computeSplitEdges=function(e){for(var t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(e)},o.prototype.computeEdgeIntersections=function(e,t,n){var r=new Mf(t,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,r),r},o.prototype.getGeometry=function(){return this._parentGeom},o.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},o.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},o.prototype.addPoint=function(){if(arguments[0]instanceof pu){var e=arguments[0].getCoordinate();this.insertPoint(this._argIndex,e,$s.INTERIOR)}else if(arguments[0]instanceof zs){var t=arguments[0];this.insertPoint(this._argIndex,t,$s.INTERIOR)}},o.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),$s.EXTERIOR,$s.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,$s.INTERIOR,$s.EXTERIOR)}},o.prototype.addEdge=function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],$s.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],$s.BOUNDARY)},o.prototype.addLineString=function(e){var t=Gl.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;var n=new _h(t,new Ku(this._argIndex,$s.INTERIOR));this._lineEdgeMap.put(e,n),this.insertEdge(n),yl.isTrue(2<=t.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])},o.prototype.getInvalidPoint=function(){return this._invalidPoint},o.prototype.getBoundaryPoints=function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null),n=0,r=e.iterator();r.hasNext();){var i=r.next();t[n++]=i.getCoordinate().copy()}return t},o.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},o.prototype.addSelfIntersectionNode=function(e,t,n){if(this.isBoundaryNode(e,t))return null;n===$s.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n)},o.prototype.addPolygonRing=function(e,t,n){if(e.isEmpty())return null;var r=Gl.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=t,o=n;kl.isCCW(r)&&(i=n,o=t);var a=new _h(r,new Ku(this._argIndex,$s.BOUNDARY,i,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],$s.BOUNDARY)},o.prototype.insertPoint=function(e,t,n){var r=this._nodes.addNode(t),i=r.getLabel();null===i?r._label=new Ku(e,n):i.setLocation(e,n)},o.prototype.createEdgeSetIntersector=function(){return new Pf},o.prototype.addSelfIntersectionNodes=function(e){for(var t=this._edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(e,o.coord,r)}},o.prototype.add=function(){if(1!==arguments.length)return a.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof vu&&(this._useBoundaryDeterminationRule=!1),e instanceof gu)this.addPolygon(e);else if(e instanceof fu)this.addLineString(e);else if(e instanceof pu)this.addPoint(e);else if(e instanceof yu)this.addCollection(e);else if(e instanceof au)this.addCollection(e);else if(e instanceof vu)this.addCollection(e);else{if(!(e instanceof ou))throw new Error(e.getClass().getName());this.addCollection(e)}},o.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},o.prototype.locate=function(e){return Hs(this._parentGeom,mu)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new jf(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)},o.prototype.findEdge=function(){if(1!==arguments.length)return a.prototype.findEdge.apply(this,arguments);var e=arguments[0];return this._lineEdgeMap.get(e)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o.determineBoundary=function(e,t){return e.isInBoundary(t)?$s.BOUNDARY:$s.INTERIOR},o}(sc),qf=function(){if(this._li=new bl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new zf(0,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],r=Tl.OGC_SFS_BOUNDARY_RULE;0<=t.getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zf(0,t,r),this._arg[1]=new zf(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];0<=i.getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zf(0,i,a),this._arg[1]=new zf(1,o,a)}};qf.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()},qf.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Uf=function(){};Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.map=function(){if(arguments[0]instanceof Sl&&Hs(arguments[1],Uf.MapOp)){for(var e=arguments[0],t=arguments[1],n=new zl,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));null!==i&&n.add(i)}return e.getFactory().buildGeometry(n)}if(Hs(arguments[0],jl)&&Hs(arguments[1],Uf.MapOp)){for(var o=arguments[0],a=arguments[1],s=new zl,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Uf.MapOp=function(){};var Gf=function(n){function o(){var e=arguments[0],t=arguments[1];n.call(this,e,t),this._ptLocator=new qh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new uh,this._resultPolyList=new zl,this._resultLineList=new zl,this._resultPointList=new zl,this._graph=new sc(new sh),this._geomFact=e.getFactory()}return n&&(o.__proto__=n),((o.prototype=Object.create(n&&n.prototype)).constructor=o).prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Ku(e.getLabel())).flip();var i=t.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(e)},o.prototype.getGraph=function(){return this._graph},o.prototype.cancelDuplicateResultEdges=function(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}},o.prototype.isCoveredByLA=function(e){return!!this.isCovered(e,this._resultLineList)||!!this.isCovered(e,this._resultPolyList)},o.prototype.computeGeometry=function(e,t,n,r){var i=new zl;return i.addAll(e),i.addAll(t),i.addAll(n),i.isEmpty()?o.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},o.prototype.mergeSymLabels=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().mergeSymLabels()},o.prototype.isCovered=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(e,r)!==$s.EXTERIOR)return!0}return!1},o.prototype.replaceCollapsedEdges=function(){for(var e=new zl,t=this._edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this._edgeList.addAll(e)},o.prototype.updateNodeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}},o.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this._resultGeom},o.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}},o.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var t=new zl;this._arg[0].computeSplitEdges(t),this._arg[1].computeSplitEdges(t),this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),sf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new lc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new uf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(e);var i=new cf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(e),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)},o.prototype.labelIncompleteNode=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setLocation(t,n)},o.prototype.copyPoints=function(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var n=t.next();this._graph.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}},o.prototype.findResultAreaEdges=function(e){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&o.isResultOfOp(r.getLocation(0,Uu.RIGHT),r.getLocation(1,Uu.RIGHT),e)&&n.setInResult(!0)}},o.prototype.computeLabelsFromDepths=function(){for(var e=this._edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(yl.isTrue(!r.isNull(i,Uu.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Uu.LEFT,r.getLocation(i,Uu.LEFT)),yl.isTrue(!r.isNull(i,Uu.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Uu.RIGHT,r.getLocation(i,Uu.RIGHT))))}}},o.prototype.computeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},o.prototype.labelIncompleteNodes=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(t,0):this.labelIncompleteNode(t,1)),t.getEdges().updateLabelling(n)}},o.prototype.isCoveredByA=function(e){return!!this.isCovered(e,this._resultPolyList)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o}(qf);Gf.overlayOp=function(e,t,n){return new Gf(e,t).getResultGeometry(n)},Gf.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return Gf.createEmptyResult(Gf.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return lf.map(e,{interfaces_:function(){return[Uf.MapOp]},map:function(e){return e.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),xf.overlayOp(e,t,Gf.INTERSECTION)},Gf.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Gf.createEmptyResult(Gf.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),xf.overlayOp(e,t,Gf.SYMDIFFERENCE)},Gf.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case Gf.INTERSECTION:o=Math.min(r,i);break;case Gf.UNION:o=Math.max(r,i);break;case Gf.DIFFERENCE:o=r;break;case Gf.SYMDIFFERENCE:o=Math.max(r,i)}return o},Gf.createEmptyResult=function(e,t,n,r){var i=null;switch(Gf.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Gf.difference=function(e,t){return e.isEmpty()?Gf.createEmptyResult(Gf.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),xf.overlayOp(e,t,Gf.DIFFERENCE))},Gf.isResultOfOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return Gf.isResultOfOp(n,r,t)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===$s.BOUNDARY&&(i=$s.INTERIOR),o===$s.BOUNDARY&&(o=$s.INTERIOR),a){case Gf.INTERSECTION:return i===$s.INTERIOR&&o===$s.INTERIOR;case Gf.UNION:return i===$s.INTERIOR||o===$s.INTERIOR;case Gf.DIFFERENCE:return i===$s.INTERIOR&&o!==$s.INTERIOR;case Gf.SYMDIFFERENCE:return i===$s.INTERIOR&&o!==$s.INTERIOR||i!==$s.INTERIOR&&o===$s.INTERIOR}return!1}},Gf.INTERSECTION=1,Gf.UNION=2,Gf.DIFFERENCE=3,Gf.SYMDIFFERENCE=4;var $f=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new qh,this._seg=new Ic;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};$f.prototype.isWithinToleranceOfBoundary=function(e){for(var t=0;t<this._linework.getNumGeometries();t++)for(var n=this._linework.getGeometryN(t).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(e)<=this._boundaryDistanceTolerance)return!0;return!1},$f.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?$s.BOUNDARY:this._ptLocator.locate(e,this._g)},$f.prototype.extractLinework=function(e){var t=new Vf;e.apply(t);var n=t.getLinework(),r=Nu.toLineStringArray(n);return e.getFactory().createMultiLineString(r)},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var Vf=function(){this._linework=null,this._linework=new zl};Vf.prototype.getLinework=function(){return this._linework},Vf.prototype.filter=function(e){if(e instanceof gu){var t=e;this._linework.add(t.getExteriorRing());for(var n=0;n<t.getNumInteriorRing();n++)this._linework.add(t.getInteriorRingN(n))}},Vf.prototype.interfaces_=function(){return[ru]},Vf.prototype.getClass=function(){return Vf};var Hf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Hf.prototype.extractPoints=function(e,t,n){for(var r=e.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],t,n)},Hf.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t},Hf.prototype.getPoints=function(e){for(var t=new zl,n=zh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,e,t)}return t},Hf.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(t.x+e.x)/2,c=(t.y+e.y)/2;if(this._doLeft){var h=new zs(u-l,c+s);r.add(h)}if(this._doRight){var f=new zs(u+l,c-s);r.add(f)}},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf};var Wf=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new zl;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new $f(this._geom[0],this._boundaryDistanceTolerance),new $f(this._geom[1],this._boundaryDistanceTolerance),new $f(this._geom[2],this._boundaryDistanceTolerance)]},Qf={TOLERANCE:{configurable:!0}};Wf.prototype.reportResult=function(e,t,n){al.out.println("Overlay result invalid - A:"+$s.toLocationSymbol(t[0])+" B:"+$s.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+$s.toLocationSymbol(t[2]))},Wf.prototype.isValid=function(e){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(e)},Wf.prototype.checkValid=function(){if(1===arguments.length){for(var e=arguments[0],t=0;t<this._testCoords.size();t++){var n=this._testCoords.get(t);if(!this.checkValid(e,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Wf.hasLocation(this._location,$s.BOUNDARY)||this.isValidResult(r,this._location)}},Wf.prototype.addTestPts=function(e){var t=new Hf(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))},Wf.prototype.isValidResult=function(e,t){var n=Gf.isResultOfOp(t[0],t[1],e),r=!(n^t[2]===$s.INTERIOR);return r||this.reportResult(e,t,n),r},Wf.prototype.getInvalidLocation=function(){return this._invalidLocation},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1},Wf.computeBoundaryDistanceTolerance=function(e,t){return Math.min(df.computeSizeBasedSnapTolerance(e),df.computeSizeBasedSnapTolerance(t))},Wf.isValid=function(e,t,n,r){return new Wf(e,t,r).isValid(n)},Qf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Wf,Qf);var Kf=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Kf.prototype.extractElements=function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this._skipEmpty&&r.isEmpty()||t.add(r)}},Kf.prototype.combine=function(){for(var e=new zl,t=this._inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Kf.combine=function(){if(1===arguments.length){var e=arguments[0];return new Kf(e).combine()}if(2===arguments.length){var t=arguments[0],n=arguments[1];return new Kf(Kf.createList(t,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Kf(Kf.createList(r,i,o)).combine()}},Kf.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},Kf.createList=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=new zl;return n.add(e),n.add(t),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new zl;return a.add(r),a.add(i),a.add(o),a}};var Zf=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new zl)},Jf={STRTREE_NODE_CAPACITY:{configurable:!0}};Zf.prototype.reduceToGeometries=function(e){for(var t=new zl,n=e.iterator();n.hasNext();){var r=n.next(),i=null;Hs(r,Fl)?i=this.unionTree(r):r instanceof Sl&&(i=r),t.add(i)}return t},Zf.prototype.extractByEnvelope=function(e,t,n){for(var r=new zl,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Zf.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r))return Kf.combine(e,t);if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,i)},Zf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new xc(Zf.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree();return this.unionTree(r)},Zf.prototype.binaryUnion=function(){if(1===arguments.length){var e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Zf.getGeometry(t,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Zf.getGeometry(t,n),Zf.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(t,n,o),s=this.binaryUnion(t,o,r);return this.unionSafe(a,s)}},Zf.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t=null===t?r.copy():t.union(r)}return t},Zf.prototype.unionSafe=function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)},Zf.prototype.unionActual=function(e,t){return Zf.restrictToPolygons(e.union(t))},Zf.prototype.unionTree=function(e){var t=this.reduceToGeometries(e);return this.binaryUnion(t)},Zf.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new zl,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),a=this.unionActual(i,o);return r.add(a),Kf.combine(r)},Zf.prototype.bufferUnion=function(){if(1===arguments.length){var e=arguments[0];return e.get(0).getFactory().buildGeometry(e).buffer(0)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t.getFactory().createGeometryCollection([t,n]).buffer(0)}},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.restrictToPolygons=function(e){if(Hs(e,mu))return e;var t=Fh.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(Nu.toPolygonArray(t))},Zf.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)},Zf.union=function(e){return new Zf(e).union()},Jf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Zf,Jf);var Xf=function(){};Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf},Xf.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Gf.createEmptyResult(Gf.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),xf.overlayOp(e,t,Gf.UNION)};var Yf=function(){return new Si};Si.prototype={constructor:Si,reset:function(){this.s=this.t=0},add:function(e){Mi(ed,e,this.t),Mi(this,ed.s,this.s),this.s?this.t+=ed.t:this.s=ed.t},valueOf:function(){return this.s}};var ed=new Si,td=1e-6,nd=Math.PI,rd=nd/2,id=nd/4,od=2*nd,ad=180/nd,sd=nd/180,ld=Math.abs,ud=Math.atan,cd=Math.atan2,hd=Math.cos,fd=Math.exp,dd=Math.log,pd=Math.sin,md=Math.sqrt,gd=Math.tan,yd={Feature:function(e,t){Ti(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ti(n[r].geometry,t)}},_d={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Ii(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ii(n[r],t,0)},Polygon:function(e,t){Oi(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Oi(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ti(n[r],t)}},vd=function(e,t){e&&yd.hasOwnProperty(e.type)?yd[e.type](e,t):Ti(e,t)},bd=(Yf(),Yf(),Yf(),function(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e});zi.invert=zi;var wd,xd,kd=function(){var n,t=[];return{point:function(e,t){n.push([e,t])},lineStart:function(){t.push(n=[])},lineEnd:Ei,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}},Ld=function(e,t,n,r,i,o){var a,s=e[0],l=e[1],u=0,c=1,h=t[0]-s,f=t[1]-l;if(a=n-s,h||!(0<a)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(0<h){if(c<a)return;u<a&&(u=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(c<a)return;u<a&&(u=a)}else if(0<h){if(a<u)return;a<c&&(c=a)}if(a=r-l,f||!(0<a)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(0<f){if(c<a)return;u<a&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(c<a)return;u<a&&(u=a)}else if(0<f){if(a<u)return;a<c&&(c=a)}return 0<u&&(e[0]=s+u*h,e[1]=l+u*f),c<1&&(t[0]=s+c*h,t[1]=l+c*f),!0}}}}},Cd=function(e,t){return ld(e[0]-t[0])<td&&ld(e[1]-t[1])<td},Sd=function(e,t,n,r,o){var a,i,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],i=e[t];if(Cd(r,i)){for(o.lineStart(),a=0;a<t;++a)o.point((r=e[a])[0],r[1]);o.lineEnd()}else s.push(n=new Hi(r,e,null,!0)),l.push(n.o=new Hi(r,null,n,!1)),s.push(n=new Hi(i,e,null,!1)),l.push(n.o=new Hi(i,null,n,!0))}}),s.length){for(l.sort(t),Wi(s),Wi(l),a=0,i=l.length;a<i;++a)l[a].e=n=!n;for(var u,c,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;u=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,i=u.length;a<i;++a)o.point((c=u[a])[0],c[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(d)for(u=f.p.z,a=u.length-1;0<=a;--a)o.point((c=u[a])[0],c[1]);else r(f.x,f.p.x,-1,o);f=f.p}u=(f=f.o).z,d=!d}while(!f.v);o.lineEnd()}}},Md=function(e,t){return e<t?-1:t<e?1:t<=e?0:NaN},Pd=(1===(wd=Md).length&&(xd=wd,wd=function(e,t){return Md(xd(e),t)}),function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--a]=r[t];return n}),Ed=1e9,Td=-Ed,Id=Yf(),Od=(Yf(),function(e){return e}),Dd=(Yf(),Yf(),1/0),Nd=Dd,Ad=-Dd,jd=Ad,Rd={point:function(e,t){e<Dd&&(Dd=e),Ad<e&&(Ad=e),t<Nd&&(Nd=t),jd<t&&(jd=t)},lineStart:Ei,lineEnd:Ei,polygonStart:Ei,polygonEnd:Ei,result:function(){var e=[[Dd,Nd],[Ad,jd]];return Ad=jd=-(Nd=Dd=1/0),e}},Bd=(Yf(),function(_,v,b,w){return function(r,s){function t(e,t){var n=r(e,t);_(e=n[0],t=n[1])&&s.point(e,t)}function e(e,t){var n=r(e,t);f.point(n[0],n[1])}function n(){y.point=e,f.lineStart()}function i(){y.point=t,f.lineEnd()}function l(e,t){h.push([e,t]);var n=r(e,t);m.point(n[0],n[1])}function o(){m.lineStart(),h=[]}function a(){l(h[0][0],h[0][1]),m.lineEnd();var e,t,n,r,i=m.clean(),o=p.result(),a=o.length;if(h.pop(),u.push(h),h=null,a)if(1&i){if(0<(t=(n=o[0]).length-1)){for(g||(s.polygonStart(),g=!0),s.lineStart(),e=0;e<t;++e)s.point((r=n[e])[0],r[1]);s.lineEnd()}}else 1<a&&2&i&&o.push(o.pop().concat(o.shift())),c.push(o.filter(Qi))}var u,c,h,f=v(s),d=r.invert(w[0],w[1]),p=kd(),m=v(p),g=!1,y={point:t,lineStart:n,lineEnd:i,polygonStart:function(){y.point=l,y.lineStart=o,y.lineEnd=a,c=[],u=[]},polygonEnd:function(){y.point=t,y.lineStart=n,y.lineEnd=i,c=Pd(c);var e=function(e,t){var n=t[0],r=t[1],i=[pd(n),-hd(n),0],o=0,a=0;Id.reset();for(var s=0,l=e.length;s<l;++s)if(c=(u=e[s]).length)for(var u,c,h=u[c-1],f=h[0],d=h[1]/2+id,p=pd(d),m=hd(d),g=0;g<c;++g,f=_,p=b,m=w,h=y){var y=u[g],_=y[0],v=y[1]/2+id,b=pd(v),w=hd(v),x=_-f,k=0<=x?1:-1,L=k*x,C=nd<L,S=p*b;if(Id.add(cd(S*k*pd(L),m*w+S*hd(L))),o+=C?x+k*od:x,C^n<=f^n<=_){var M=ji(Ni(h),Ni(y));Fi(M);var P=ji(i,M);Fi(P);var E=(C^0<=x?-1:1)*Pi(P[2]);(E<r||r===E&&(M[0]||M[1]))&&(a+=C^0<=x?1:-1)}}return(o<-td||o<td&&Id<-td)^1&a}(u,d);c.length?(g||(s.polygonStart(),g=!0),Sd(c,Ki,e,b,s)):e&&(g||(s.polygonStart(),g=!0),s.lineStart(),b(null,null,1,s),s.lineEnd()),g&&(s.polygonEnd(),g=!1),c=u=null},sphere:function(){s.polygonStart(),s.lineStart(),b(null,null,1,s),s.lineEnd(),s.polygonEnd()}};return y}}),Fd=Bd(function(){return!0},function(h){var f,d=NaN,p=NaN,m=NaN;return{lineStart:function(){h.lineStart(),f=1},point:function(e,t){var n,r,i,o,a,s,l,u=0<e?nd:-nd,c=ld(e-d);ld(c-nd)<td?(h.point(d,p=0<(p+t)/2?rd:-rd),h.point(m,p),h.lineEnd(),h.lineStart(),h.point(u,p),h.point(e,p),f=0):m!==u&&nd<=c&&(ld(d-m)<td&&(d-=m*td),ld(e-u)<td&&(e-=u*td),r=p,o=t,l=pd((n=d)-(i=e)),p=ld(l)>td?ud((pd(r)*(s=hd(o))*pd(i)-pd(o)*(a=hd(r))*pd(n))/(a*s*l)):(r+o)/2,h.point(m,p),h.lineEnd(),h.lineStart(),h.point(u,p),f=0),h.point(d=e,p=t),m=u},lineEnd:function(){h.lineEnd(),d=p=NaN},clean:function(){return 2-f}}},function(e,t,n,r){var i;if(null==e)i=n*rd,r.point(-nd,i),r.point(0,i),r.point(nd,i),r.point(nd,0),r.point(nd,-i),r.point(0,-i),r.point(-nd,-i),r.point(-nd,0),r.point(-nd,i);else if(ld(e[0]-t[0])>td){var o=e[0]<t[0]?nd:-nd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-nd,-rd]);Ji.prototype={constructor:Ji,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var zd=hd(30*sd),qd=function(e,t){return+t?function(E,T){function I(e,t,n,r,i,o,a,s,l,u,c,h,f,d){var p=a-e,m=s-t,g=p*p+m*m;if(4*T<g&&f--){var y=r+u,_=i+c,v=o+h,b=md(y*y+_*_+v*v),w=Pi(v/=b),x=ld(ld(v)-1)<td||ld(n-l)<td?(n+l)/2:cd(_,y),k=E(x,w),L=k[0],C=k[1],S=L-e,M=C-t,P=m*S-p*M;(T<P*P/g||.3<ld((p*S+m*M)/g-.5)||r*u+i*c+o*h<zd)&&(I(e,t,n,r,i,o,L,C,x,y/=b,_/=b,v,f,d),d.point(L,C),I(L,C,x,y,_,v,a,s,l,u,c,h,f,d))}}return function(i){function e(e,t){e=E(e,t),i.point(e[0],e[1])}function t(){m=NaN,b.point=n,i.lineStart()}function n(e,t){var n=Ni([e,t]),r=E(e,t);I(m,g,p,y,_,v,m=r[0],g=r[1],p=e,y=n[0],_=n[1],v=n[2],16,i),i.point(m,g)}function r(){b.point=e,i.lineEnd()}function o(){t(),b.point=a,b.lineEnd=s}function a(e,t){n(l=e,t),u=m,c=g,h=y,f=_,d=v,b.point=n}function s(){I(m,g,p,y,_,v,u,c,l,h,f,d,16,i),(b.lineEnd=r)()}var l,u,c,h,f,d,p,m,g,y,_,v,b={point:e,lineStart:t,lineEnd:r,polygonStart:function(){i.polygonStart(),b.lineStart=o},polygonEnd:function(){i.polygonEnd(),b.lineStart=t}};return b}}(e,t):(n=e,Zi({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}));var n},Ud=Zi({point:function(e,t){this.stream.point(e*sd,t*sd)}});eo.invert=function(e,t){return[e,2*ud(fd(t))-rd]},to.invert=function(e,t){return[-t,2*ud(fd(e))-rd]};var Gd=function(){var e=function(n){function t(){var e=nd*l(),t=a(function(t){function e(e){return(e=t(e[0]*sd,e[1]*sd))[0]*=ad,e[1]*=ad,e}return t=qi(t[0]*sd,t[1]*sd,2<t.length?t[2]*sd:0),e.invert=function(e){return(e=t.invert(e[0]*sd,e[1]*sd))[0]*=ad,e[1]*=ad,e},e}(a.rotate()).invert([0,0]));return c(null==h?[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]:n===eo?[[Math.max(t[0]-e,h),r],[Math.min(t[0]+e,i),o]]:[[h,Math.max(t[1]-e,r)],[i,Math.min(t[1]+e,o)]])}var r,i,o,a=Yi(n),s=a.center,l=a.scale,u=a.translate,c=a.clipExtent,h=null;return a.scale=function(e){return arguments.length?(l(e),t()):l()},a.translate=function(e){return arguments.length?(u(e),t()):u()},a.center=function(e){return arguments.length?(s(e),t()):s()},a.clipExtent=function(e){return arguments.length?(null==e?h=r=i=o=null:(h=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),t()):null==h?null:[[h,r],[i,o]]},t()}(to),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)};e.projection=Qo,e.random=Is,e.clusters=Os,e.helpers=go,e.invariant=_o,e.meta=yo,e.isolines=function(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Q(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!V(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a,s,l,u,c,h,f,d,p,m,g,y,_=function(t,e){if(!V(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Q(t,"Point","input must contain Points");for(var o=function(e,n){var r={};return L(t,function(e){var t=A(e)[1];r[t]||(r[t]=[]),r[t].push(e)}),Object.keys(r).map(function(e){return r[e].sort(function(e,t){return A(e)[0]-A(t)[0]})}).sort(function(e,t){return n?A(e[0])[1]-A(t[0])[1]:A(t[0])[1]-A(e[0])[1]})}(0,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(e,{zProperty:r,flip:!0});return G((a=function(e,t,n,r,i){for(var o=[],a=1;a<t.length;a++){var s=+t[a],l=Object.assign({},r,i[a]),u=v(X(e,l[n]=s),l);o.push(u)}return o}(_,t,r,i,o),s=_,l=H(e),u=l[2]-l[0],c=l[3]-l[1],h=l[0],f=l[1],d=s[0].length-1,p=s.length-1,m=u/d,g=c/p,y=function(e){e[0]=e[0]*m+h,e[1]=e[1]*g+f},a.forEach(function(e){x(e,y)}),a))},e.convex=Me,e.pointsWithinPolygon=Te,e.concave=function(e,s){if(!V(s=s||{}))throw new Error("options is invalid");if(!e)throw new Error("points is required");var l=s.maxEdge||1/0;if(!$(l))throw new Error("maxEdge is invalid");var n,r,t=Ie((n=[],r={},L(e,function(e){if(e.geometry){var t=e.geometry.coordinates.join("-");r.hasOwnProperty(t)||(n.push(e),r[t]=!0)}}),G(n)));if(t.features=t.features.filter(function(e){var t=e.geometry.coordinates[0][0],n=e.geometry.coordinates[0][1],r=e.geometry.coordinates[0][2],i=Ae(t,n,s),o=Ae(n,r,s),a=Ae(t,r,s);return i<=l&&o<=l&&a<=l}),t.features.length<1)return null;var i=He(t,s);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),F(i)},e.collect=function(e,t,n,r){var i=xo(6),o=t.features.map(function(e){return{minX:e.geometry.coordinates[0],minY:e.geometry.coordinates[1],maxX:e.geometry.coordinates[0],maxY:e.geometry.coordinates[1],property:e.properties[n]}});return i.load(o),e.features.forEach(function(t){t.properties||(t.properties={});var e=H(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Pe([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),e},e.flip=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.mutate;if(!e)throw new Error("geojson is required");return!1!==n&&void 0!==n||(e=je(e)),x(e,function(e){var t=e[0],n=e[1];e[0]=n,e[1]=t}),e},e.simplify=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=void 0!==t.tolerance?t.tolerance:1,r=t.highQuality||!1,i=t.mutate||!1;if(!e)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(e=je(e)),M(e,function(e){!function(e,t,n){var r=e.type;if("Point"===r||"MultiPoint"===r)return;We(e,!0);var i=e.coordinates;switch(r){case"LineString":e.coordinates=Je(i,t,n);break;case"MultiLineString":e.coordinates=i.map(function(e){return Je(e,t,n)});break;case"Polygon":e.coordinates=Xe(i,t,n);break;case"MultiPolygon":e.coordinates=i.map(function(e){return Xe(e,t,n)})}}(e,n,r)}),e},e.bezierSpline=Ye,e.tag=function(e,n,r,i){return e=je(e),n=je(n),L(e,function(t){t.properties||(t.properties={}),L(n,function(e){void 0===t.properties[i]&&Pe(t,e)&&(t.properties[i]=e.properties[r])})}),e},e.sample=function(e,t){if(!e)throw new Error("featurecollection is required");if(null==t)throw new Error("num is required");if("number"!=typeof t)throw new Error("num must be a number");return G(function(e,t){for(var n,r,i=e.slice(0),o=e.length,a=o-t;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(e.features,t))},e.envelope=tt,e.square=nt,e.circle=it,e.midpoint=function(e,t){return rt(e,Ae(e,t)/2,ot(e,t))},e.center=at,e.centerOfMass=function e(t,n){switch(J(t)){case"Point":return t;case"Polygon":var r=[];x(t,function(e){r.push(e)});var i,o,a,s,l,u,c,h,f=st(t,n),d=f.geometry.coordinates,p=0,m=0,g=0,y=r.map(function(e){return[e[0]-d[0],e[1]-d[1]]});for(i=0;i<r.length-1;i++)s=(o=y[i])[0],u=o[1],l=(a=y[i+1])[0],g+=h=s*(c=a[1])-l*u,p+=(s+l)*h,m+=(u+c)*h;if(0===g)return f;var _=1/(.5*g*6);return z([d[0]+_*p,d[1]+_*m],n);default:var v=Me(t);return v?e(v,n):st(t,n)}},e.centroid=st,e.combine=function(e){function t(e,t,n){n?r[t].coordinates=r[t].coordinates.concat(e.geometry.coordinates):r[t].coordinates.push(e.geometry.coordinates),r[t].properties.push(e.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(r).reduce(function(e,t){return e[t.replace("Multi","")]=t,e},{});return L(e,function(e){e.geometry&&(r[e.geometry.type]?t(e,e.geometry.type,!0):n[e.geometry.type]&&t(e,n[e.geometry.type],!1))}),G(Object.keys(r).filter(function(e){return r[e].coordinates.length}).sort().map(function(e){return F({type:e,coordinates:r[e].coordinates},{collectedProperties:r[e].properties})}))},e.distance=Ae,e.explode=lt,e.bbox=H,e.tesselate=function(e){if(!e.geometry||"Polygon"!==e.geometry.type&&"MultiPolygon"!==e.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return"Polygon"===e.geometry.type?t.features=Lt(e.geometry.coordinates):e.geometry.coordinates.forEach(function(e){t.features=t.features.concat(Lt(e))}),t},e.bboxPolygon=et,e.booleanPointInPolygon=Pe,e.nearestPoint=Ct,e.nearestPointOnLine=Ht,e.nearestPointToLine=function(e,n,t){if(!V(t=t||{}))throw new Error("options is invalid");var r=t.units,i=t.properties||{};if(!e)throw new Error("points is required");if(!(e=function(e){var t=[];switch(e.geometry?e.geometry.type:e.type){case"GeometryCollection":return M(e,function(e){"Point"===e.type&&t.push({type:"Feature",properties:{},geometry:e})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return e.features=e.features.filter(function(e){return"Point"===e.geometry.type}),e;default:throw new Error("points must be a Point Collection")}}(e)).features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==J(n))throw new Error("line must be a LineString");var o=1/0,a=null;return L(e,function(e){var t=tn(e,n,{units:r});t<o&&(o=t,a=e)}),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},e.planepoint=function(e,t){var n=W(e),r=K(t).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=t.properties||{},o=i.a,a=i.b,s=i.c,l=n[0],u=n[1],c=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],d=r[1][0],p=r[1][1],m=void 0!==a?a:r[1][2],g=r[2][0],y=r[2][1],_=void 0!==s?s:r[2][2];return(_*(l-c)*(u-p)+f*(l-d)*(u-y)+m*(l-g)*(u-h)-m*(l-c)*(u-y)-_*(l-d)*(u-h)-f*(l-g)*(u-p))/((l-c)*(u-p)+(l-d)*(u-y)+(l-g)*(u-h)-(l-c)*(u-y)-(l-d)*(u-h)-(l-g)*(u-p))},e.tin=Ie,e.bearing=ot,e.destination=rt,e.kinks=function(e){var t,n,_={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===e.type?e.geometry:e).type)t=[n.coordinates];else if("MultiLineString"===n.type)t=n.coordinates;else if("MultiPolygon"===n.type)t=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");t=n.coordinates}return t.forEach(function(y){t.forEach(function(e){for(var t=0;t<y.length-1;t++)for(var n=t;n<e.length-1;n++){if(y===e){if(1===Math.abs(t-n))continue;if(0===t&&n===y.length-2&&y[t][0]===y[y.length-1][0]&&y[t][1]===y[y.length-1][1])continue}var r=(i=y[t][0],o=y[t][1],a=y[t+1][0],s=y[t+1][1],l=e[n][0],u=e[n][1],c=e[n+1][0],h=e[n+1][1],g=m=p=d=f=void 0,g={x:null,y:null,onLine1:!1,onLine2:!1},0==(f=(h-u)*(a-i)-(c-l)*(s-o))?null!==g.x&&null!==g.y&&g:(m=(a-i)*(d=o-u)-(s-o)*(p=i-l),d=((c-l)*d-(h-u)*p)/f,p=m/f,g.x=i+d*(a-i),g.y=o+d*(s-o),0<=d&&d<=1&&(g.onLine1=!0),0<=p&&p<=1&&(g.onLine2=!0),!(!g.onLine1||!g.onLine2)&&[g.x,g.y]));r&&_.features.push(z([r[0],r[1]]))}var i,o,a,s,l,u,c,h,f,d,p,m,g})}),_},e.pointOnFeature=rn,e.area=an,e.along=function(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===e.type)r=e.geometry.coordinates;else{if("LineString"!==e.type)throw new Error("input must be a LineString Feature or Geometry");r=e.coordinates}if(!$(t))throw new Error("distance must be a number");for(var i=0,o=0;o<r.length&&!(i<=t&&o===r.length-1);o++){if(t<=i){var a=t-i;if(a){var s=ot(r[o],r[o-1])-180;return rt(r[o],a,s,n)}return z(r[o])}i+=Ae(r[o],r[o+1],n)}return z(r[r.length-1])},e.length=cn,e.lineSlice=function(e,t,n){var r=A(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var i,o=Ht(n,e),a=Ht(n,t),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)s.push(r[l]);return s.push(i[1].geometry.coordinates),U(s,n.properties)},e.lineSliceAlong=hn,e.pointGrid=gn,e.truncate=yn,e.flatten=function(e){if(!e)throw new Error("geojson is required");var t=[];return E(e,function(e){t.push(e)}),G(t)},e.lineIntersect=$t,e.lineChunk=function(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return E(e,function(e){i&&(e.geometry.coordinates=e.geometry.coordinates.reverse()),function(e,t,n,r){var i=cn(e,{units:n});if(i<=t)return r(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){r(hn(e,t*a,t*(a+1),{units:n}))}}(e,t,r,function(e){o.push(e)})}),G(o)},e.unkinkPolygon=function(e){var n=[];return E(e,function(t){"Polygon"===t.geometry.type&&L(Zo(t),function(e){n.push(q(e.geometry.coordinates,t.properties))})}),G(n)},e.greatCircle=function(e,t,n){if("object"!=$d(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return e=W(e),t=W(t),r=r||{},i=i||100,o=o||10,new ia({x:e[0],y:e[1]},{x:t[0],y:t[1]},r).Arc(i,{offset:o}).json()},e.lineSegment=Gt,e.lineSplit=function(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var n=J(e),r=J(t);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=yn(t,{precision:7});switch(r){case"Point":return xn(e,i);case"MultiPoint":return wn(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wn(e,$t(e,i))}},e.lineArc=Cn,e.polygonToLine=Mn,e.lineToPolygon=En,e.bboxClip=function(e,t){var n,r=(n=e).geometry?n.geometry.type:n.type,i=A(e),o=e.properties;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(i=[i]),i.forEach(function(e){oa(e,t,a)}),1===a.length?U(a[0],o):v(a,o);case"Polygon":return q(An(i,t),o);case"MultiPolygon":return b(i.map(function(e){return An(e,t)}),o);default:throw new Error("geometry "+r+" not supported")}},e.lineOverlap=zn,e.sector=function(e,t,n,r,i){if(!V(i=i||{}))throw new Error("options is invalid");if(!e)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if("object"!=(void 0===i?"undefined":$d(i)))throw new Error("options must be an object");if(Un(n)===Un(r))return it(e,t,i);var o=A(e),a=[[o]];return x(Cn(e,t,n,r,i),function(e){a[0].push(e)}),a[0].push(o),q(a)},e.rhumbBearing=Wt,e.rhumbDistance=Kt,e.rhumbDestination=Gn,e.polygonTangents=function(e,t){var n,r,i,o=A(e),a=A(t);switch(J(t)){case"Polygon":n=a[0][0],r=a[0][0],i=Vn(a[0][0],a[0][a[0].length-1],o);var s=$n(a[0],o,i,void 0,n,r);n=s[0],r=s[1];break;case"MultiPolygon":n=a[0][0][0],r=a[0][0][0],i=Vn(a[0][0][0],a[0][0][a[0][0].length-1],o),a.forEach(function(e){var t=$n(e[0],o,i,void 0,n,r);n=t[0],r=t[1]})}return G([z(n),z(r)])},e.rewind=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.reverse||!1,r=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(e=je(e));var i=[];switch(e.type){case"GeometryCollection":return M(e,function(e){Wn(e,n)}),e;case"FeatureCollection":return L(e,function(e){L(Wn(e,n),function(e){i.push(e)})}),G(i)}return Wn(e,n)},e.isobands=function(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Q(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!V(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a,s,l,u,c,h,f,d,p,m,g,y,_=function(t,e){if(!V(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Q(t,"Point","input must contain Points");for(var o=function(e,n){var r={};return L(t,function(e){var t=A(e)[1];r[t]||(r[t]=[]),r[t].push(e)}),Object.keys(r).map(function(e){return r[e].sort(function(e,t){return A(e)[0]-A(t)[0]})}).sort(function(e,t){return n?A(e[0])[1]-A(t[0])[1]:A(t[0])[1]-A(e[0])[1]})}(0,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(e,{zProperty:r,flip:!0}),v=function(e,t,n){for(var r=[],i=1;i<t.length;i++){var o=+t[i-1],a=+t[i],s=Zn(e,o,a-o),l=function(e){var n=[],r=[];s.forEach(function(e){var t=an(q([e]));r.push(t),n.push({ring:e,area:t})}),r.sort(function(e,t){return t-e});var i=[];return r.forEach(function(e){for(var t=0;t<n.length;t++)if(n[t].area===e){i.push(n[t].ring),n.splice(t,1);break}}),i}(),u=function(e){for(var t=l.map(function(e){return{lrCoordinates:e,grouped:!1}}),n=[];!function(e){for(var t=0;t<e.length;t++)if(!1===e[t].grouped)return!1;return!0}(t);)for(var r=0;r<t.length;r++)if(!t[r].grouped){var i=[];i.push(t[r].lrCoordinates),t[r].grouped=!0;for(var o=q([t[r].lrCoordinates]),a=r+1;a<t.length;a++)if(!t[a].grouped){var s=q([t[a].lrCoordinates]);(function(e,t){for(var n=lt(s),r=0;r<n.features.length;r++)if(!Pe(n.features[r],t))return!1;return!0})(0,o)&&(i.push(t[a].lrCoordinates),t[a].grouped=!0)}n.push(i)}return n}(),c={};c.groupedRings=u,c[n]=o+"-"+a,r.push(c)}return r}(_,t,r);return G((a=v,s=_,l=H(e),u=l[2]-l[0],c=l[3]-l[1],h=l[0],f=l[1],d=s[0].length-1,p=s.length-1,m=u/d,g=c/p,y=function(e){e[0]=e[0]*m+h,e[1]=e[1]*g+f},a.forEach(function(e){e.groupedRings.forEach(function(e){e.forEach(function(e){e.forEach(y)})})}),v=a).map(function(e,t){if(o[t]&&!V(o[t]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,o[t]);return n[r]=e[r],b(e.groupedRings,n)}))},e.transformRotate=Yn,e.transformScale=er,e.transformTranslate=function(e,n,r,t){if(!V(t=t||{}))throw new Error("options is invalid");var i=t.units,o=t.zTranslation,a=t.mutate;if(!e)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===n&&0===o)return e;if(null==r||isNaN(r))throw new Error("direction is required");return n<0&&(n=-n,r=-r),!1!==a&&void 0!==a||(e=je(e)),x(e,function(e){var t=A(Gn(e,n,r,{units:i}));e[0]=t[0],e[1]=t[1],o&&3===e.length&&(e[2]+=o)}),e},e.lineOffset=function(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");var i=J(e),o=e.properties;switch(i){case"LineString":return ir(e,t,r);case"MultiLineString":var a=[];return E(e,function(e){a.push(ir(e,t,r).geometry.coordinates)}),v(a,o);default:throw new Error("geometry "+i+" is not supported")}},e.polygonize=function(e){var t=is.fromGeoJson(e);t.deleteDangles(),t.deleteCutEdges();var n=[],r=[];return t.getEdgeRings().filter(function(e){return e.isValid()}).forEach(function(e){e.isHole()?n.push(e):r.push(e)}),n.forEach(function(e){ns.findEdgeRingContaining(e,r)&&r.push(e)}),G(r.map(function(e){return e.toPolygon()}))},e.booleanDisjoint=function(e,n){var r;return E(e,function(t){E(n,function(e){if(!1===r)return!1;r=function(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return n=e.coordinates,r=t.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!sr(t,e);case"Polygon":return!Pe(e,t)}break;case"LineString":switch(t.type){case"Point":return!sr(e,t);case"LineString":return!(0<$t(e,t).features.length);case"Polygon":return!lr(t,e)}break;case"Polygon":switch(t.type){case"Point":return!Pe(t,e);case"LineString":return!lr(e,t);case"Polygon":return!function(e,t){for(var n=0;n<e.coordinates[0].length;n++)if(Pe(e.coordinates[0][n],t))return!0;for(var r=0;r<t.coordinates[0].length;r++)if(Pe(t.coordinates[0][r],e))return!0;return!1}(t,e)}}var n,r}(t.geometry,e.geometry)})}),r},e.booleanContains=function(e,t){var n=J(e),r=J(t),i=K(e),o=K(t),a=A(e),s=A(t);switch(n){case"Point":switch(r){case"Point":return cr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(e,t){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(cr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(e,t){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)if(cr(t.coordinates[n],e.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return fn(o,i,{ignoreEndVertices:!0});case"LineString":return function(e,t){for(var n=!1,r=0;r<t.coordinates.length;r++)if(fn({type:"Point",coordinates:t.coordinates[r]},e,{ignoreEndVertices:!0})&&(n=!0),!fn({type:"Point",coordinates:t.coordinates[r]},e,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(e,t){for(var n=!1,r=0;r<t.coordinates.length;r++)if(fn(t.coordinates[r],e,{ignoreEndVertices:!0})&&(n=!0),!fn(t.coordinates[r],e))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Pe(o,i,{ignoreBoundary:!0});case"LineString":return function(e,t){var n,r,i=!1,o=0;if(!ur(H(e),H(t)))return!1;for(;o<t.coordinates.length-1;o++){if(Pe({type:"Point",coordinates:(n=t.coordinates[o],r=t.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2])},e,{ignoreBoundary:!0})){i=!0;break}}return i}(i,o);case"Polygon":return function(e,t){if(!ur(H(e),H(t)))return!1;for(var n=0;n<t.coordinates[0].length;n++)if(!Pe(t.coordinates[0][n],e))return!1;return!0}(i,o);case"MultiPoint":return function(e,t){for(var n=0;n<t.coordinates.length;n++)if(!Pe(t.coordinates[n],e,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},e.booleanCrosses=function(e,t){var n=J(e),r=J(t),i=K(e),o=K(t);switch(n){case"MultiPoint":switch(r){case"LineString":return hr(i,o);case"Polygon":return dr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return hr(o,i);case"LineString":return function(e,t){if(0<$t(e,t).features.length)for(var n=0;n<e.coordinates.length-1;n++)for(var r=0;r<t.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==t.coordinates.length-2||(i=!1),pr(e.coordinates[n],e.coordinates[n+1],t.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return fr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return dr(o,i);case"LineString":return fr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},e.booleanClockwise=Hn,e.booleanOverlap=_r,e.booleanPointOnLine=fn,e.booleanEqual=function(e,t){if(!e)throw new Error("feature1 is required");if(!t)throw new Error("feature2 is required");return J(e)===J(t)&&new us({precision:6}).compare(We(e),We(t))},e.booleanWithin=dn,e.clone=je,e.cleanCoords=We,e.clustersDbscan=function(n,e,t){if("object"!=$d(t=t||{}))throw new Error("options is invalid");var r=t.minPoints,i=t.units;if(Q(n,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(0<Math.sign(e)))throw new Error("Invalid maxDistance");if(!(null==r||0<Math.sign(r)))throw new Error("Invalid minPoints");n=je(n),r=r||3;var o=new ps.DBSCAN,a=-1;return o.run(S(n),u(e,i),r,Ae).forEach(function(e){a++,e.forEach(function(e){var t=n.features[e];t.properties||(t.properties={}),t.properties.cluster=a,t.properties.dbscan="core"})}),o.noise.forEach(function(e){var t=n.features[e];t.properties||(t.properties={}),t.properties.cluster?t.properties.dbscan="edge":t.properties.dbscan="noise"}),n},e.clustersKmeans=function(e,t){if("object"!=$d(t=t||{}))throw new Error("options is invalid");var n=t.numberOfClusters,r=t.mutate;Q(e,"Point","Input must contain Points");var i=e.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(e=je(e));var o=S(e),a=o.slice(0,n),s=vs(o,n,a),l={};return s.centroids.forEach(function(e,t){l[t]=e}),L(e,function(e,t){var n=s.idxs[t];e.properties.cluster=n,e.properties.centroid=l[n]}),e},e.pointToLineDistance=tn,e.booleanParallel=function(e,t){if(!e)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");if("LineString"!==br(e,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==br(t,"line2"))throw new Error("line2 must be a LineString");for(var n=Gt(We(e)).features,r=Gt(We(t)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(a=o,s=r[i].geometry.coordinates,f(Wt(a[0],a[1]))!==f(Wt(s[0],s[1])))return!1}var a,s;return!0},e.shortestPath=function(e,t,n){if(!V(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||G([]);if(!e)throw new Error("start is required");if(!t)throw new Error("end is required");if(r&&!$(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=W(e),s=W(t);switch(e=z(a),t=z(s),J(o)){case"FeatureCollection":if(0===o.features.length)return U([a,s]);break;case"Polygon":o=G([F(K(o))]);break;default:throw new Error("invalid obstacles")}var l=o;l.features.push(e),l.features.push(t);var u=H(er(et(H(l)),1.15));r||(r=Ae([u[0],u[1]],[u[2],u[1]],n)/100),l.features.pop(),l.features.pop();for(var c=u[0],h=u[1],f=u[2],d=u[3],p=r/Ae([c,h],[f,h],n)*(f-c),m=r/Ae([c,h],[c,d],n)*(d-h),g=f-c,y=d-h,_=(g-Math.floor(g/p)*p)/2,v=[],b=[],w=[],x=[],k=1/0,L=1/0,C=d-(y-Math.floor(y/m)*m)/2,S=0;h<=C;){for(var M=[],P=[],E=c+_,T=0;E<=f;){var I=z([E,C]),O=function(e,t){for(var n=0;n<t.features.length;n++)if(Pe(e,t.features[n]))return!0;return!1}(I,o);M.push(O?0:1),P.push(E+"|"+C);var D=Ae(I,e);!O&&D<k&&(k=D,w={x:T,y:S});var N=Ae(I,t);!O&&N<L&&(L=N,x={x:T,y:S}),E+=p,T++}b.push(M),v.push(P),C-=m,S++}var A=new xr(b,{diagonal:!0}),j=A.grid[w.y][w.x],R=A.grid[x.y][x.x],B=[a];return bs.search(A,j,R).forEach(function(e){var t=v[e.x][e.y].split("|");B.push([+t[0],+t[1]])}),B.push(s),We(U(B))},e.voronoi=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Q(e,"Point","points"),G(function(){function t(r){return new Hr(r.map(function(e,t){var n=[Math.round(i(e,t,r)/Es)*Es,Math.round(o(e,t,r)/Es)*Es];return n.index=t,n.data=e,n}),n)}var i=Cr,o=Sr,n=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(e){return arguments.length?(i="function"==typeof e?e:ws(+e),t):i},t.y=function(e){return arguments.length?(o="function"==typeof e?e:ws(+e),t):o},t.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},t.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],t):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},t}().x(function(e){return e.geometry.coordinates[0]}).y(function(e){return e.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(e.features).map(Wr))},e.ellipse=Qr,e.centerMean=Zr,e.centerMedian=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.counter||10;if(!$(n))throw new Error("counter must be a number");var r=t.weight,i=Zr(e,{weight:t.weight}),o=G([]);return L(e,function(e){o.features.push(st(e,{weight:e.properties[r]}))}),o.properties={tolerance:t.tolerance,medianCandidates:[]},function e(o,t,n,r){var i=n.properties.tolerance||.001,a=0,s=0,l=0,u=0;if(L(n,function(e){var t=e.properties.weight,n=null==t?1:t;if(!$(n=Number(n)))throw new Error("weight value must be a number");if(0<n){u+=1;var r=n*Ae(e,o);0===r&&(r=1);var i=n/r;a+=e.geometry.coordinates[0]*i,s+=e.geometry.coordinates[1]*i,l+=i}}),u<1)throw new Error("no features to measure");var c=a/l,h=s/l;return 1===u||0===r||Math.abs(c-t[0])<i&&Math.abs(h-t[1])<i?z([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),e([c,h],o,n,r-1))}(i.geometry.coordinates,[0,0],o,n)},e.standardDeviationalEllipse=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var n=t.steps||64,r=t.weight,i=t.properties||{};if(!$(n))throw new Error("steps must be a number");if(!V(i))throw new Error("properties must be a number");var o=S(e).length,a=Zr(e,{weight:r}),s=0,l=0,u=0;L(e,function(e){var t=e.properties[r]||1,n=Jr(A(e),A(a));s+=Math.pow(n.x,2)*t,l+=Math.pow(n.y,2)*t,u+=n.x*n.y*t});var c=s-l,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),f=2*u,d=Math.atan((c+h)/f),p=180*d/Math.PI,m=0,g=0,y=0;L(e,function(e){var t=e.properties[r]||1,n=Jr(A(e),A(a));m+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*t,g+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*t,y+=t});var _=Math.sqrt(2*m/y),v=Math.sqrt(2*g/y),b=Qr(a,_,v,{units:"degrees",angle:p,steps:n,properties:i}),w=Te(e,G([b])),x={meanCenterCoordinates:A(a),semiMajorAxis:_,semiMinorAxis:v,numberOfFeatures:o,angle:p,percentageWithinEllipse:100*S(w).length/o};return b.properties.standardDeviationalEllipse=x,b},e.difference=function(e,t){var n=K(e),r=K(t),i=e.properties||{};if(n=Ci(n),r=Ci(r),!n)return null;if(!r)return F(n,i);var o=new zu,a=o.read(n),s=o.read(r),l=Gf.difference(a,s);return l.isEmpty()?null:F((new qu).write(l),i)},e.buffer=function(e,n,t){var r=(t=t||{}).units,i=t.steps||64;if(!e)throw new Error("geojson is required");if("object"!=(void 0===t?"undefined":$d(t)))throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(e.type){case"GeometryCollection":return M(e,function(e){var t=no(e,n,r,i);t&&o.push(t)}),G(o);case"FeatureCollection":return L(e,function(e){var t=no(e,n,r,i);t&&L(t,function(e){e&&o.push(e)})}),G(o)}return no(e,n,r,i)},e.union=io,e.intersect=oo,e.dissolve=function(e,t){if(!V(t=t||{}))throw new Error("options is invalid");var o=t.propertyName;Q(e,"Polygon","dissolve");var n=je(e),a=n.features,s=[];a.forEach(function(e,t){e.properties.origIndexPosition=t});var l=zt();for(var u in l.load(n),a){var c=a[u],h=!1;if(l.search(c).features.forEach(function(e){c=a[u];var t,n=e.properties.origIndexPosition;if(0<s.length&&0!==n)if(n>s[s.length-1])n-=s.length;else{var r=function(r,e,t){var i,o;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,t){var n=e-r;0<=n&&(void 0===o||n<o)&&(o=n,i=t)}),i}(n,s);0!==r&&(n-=r)}if(n!==+u){var i=a[n];i&&c&&(void 0!==o&&i.properties[o]!==c.properties[o]||_r(c,i)&&(t=i,0<$t(U(S(c)),U(S(t))).features.length)&&(a[u]=io(c,i),s.push(e.properties.origIndexPosition),s.sort(function(e,t){return e-t}),l.remove(e),a.splice(n,1),c.properties.origIndexPosition=u,l.remove(c,function(e,t){return e.properties.origIndexPosition===t.properties.origIndexPosition}),h=!0))}}),h){if(!c)continue;c.properties.origIndexPosition=u,l.insert(c),u--}}return a.forEach(function(e){delete e.properties.origIndexPosition,delete e.bbox}),n},e.hexGrid=ao,e.mask=function(e,t){var i,o,n,r,a,s,l=q(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),u=(i=[],o=[],E(e,function(e){var t=e.geometry.coordinates,n=t[0],r=t.slice(1);i.push(q([n])),r.forEach(function(e){o.push(q([e]))})}),[G(i),G(o)]),c=u[0],h=u[1];return n=l,r=c=so(c),a=h=so(h),(s=[]).push(n.geometry.coordinates[0]),E(r,function(e){s.push(e.geometry.coordinates[0])}),E(a,function(e){s.push(e.geometry.coordinates[0])}),q(s)},e.squareGrid=uo,e.triangleGrid=co,e.interpolate=function(t,e,s){if("object"!=$d(s=s||{}))throw new Error("options is invalid");var l=s.gridType,u=s.property,c=s.weight;if(!t)throw new Error("points is required");if(Q(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==c&&"number"!=typeof c)throw new Error("weight must be a number");u=u||"elevation",l=l||"square",c=c||1;var n,r=H(t);switch(l){case"point":case"points":n=gn(r,e,s);break;case"square":case"squares":n=uo(r,e,s);break;case"hex":case"hexes":n=ao(r,e,s);break;case"triangle":case"triangles":n=co(r,e,s);break;default:throw new Error("invalid gridType")}var h=[];return L(n,function(i){var o=0,a=0;L(t,function(e){var t,n=Ae("point"===l?i:st(i),e,s);if(void 0!==u&&(t=e.properties[u]),void 0===t&&(t=e.geometry.coordinates[2]),void 0===t)throw new Error("zValue is missing");0===n&&(o=t);var r=1/Math.pow(n,c);a+=r,o+=r*t});var e=je(i);e.properties[u]=o/a,h.push(e)}),G(h)},e.pointOnSurface=rn,e.polygonToLineString=Mn,e.lineStringToPolygon=En,e.inside=Pe,e.within=Te,e.bezier=Ye,e.nearest=Ct,e.pointOnLine=Ht,e.lineDistance=cn,e.radians2degrees=d,e.degrees2radians=_,e.distanceToDegrees=l,e.distanceToRadians=m,e.radiansToDistance=p,e.bearingToAngle=f,e.convertDistance=u,e.toMercator=Zt,e.toWgs84=Jt,e.randomPosition=Xr,e.randomPoint=Yr,e.randomPolygon=ei,e.randomLineString=ti,e.getCluster=ri,e.clusterEach=ii,e.clusterReduce=oi,e.createBins=ai,e.applyFilter=si,e.propertiesContainsFilter=li,e.filterProperties=ui,e.earthRadius=ho,e.factors=fo,e.unitsFactors=po,e.areaFactors=mo,e.feature=F,e.geometry=t,e.point=z,e.points=n,e.polygon=q,e.polygons=r,e.lineString=U,e.lineStrings=i,e.featureCollection=G,e.multiLineString=v,e.multiPoint=o,e.multiPolygon=b,e.geometryCollection=a,e.round=s,e.radiansToLength=p,e.lengthToRadians=m,e.lengthToDegrees=l,e.bearingToAzimuth=f,e.radiansToDegrees=d,e.degreesToRadians=_,e.convertLength=u,e.convertArea=c,e.isNumber=$,e.isObject=V,e.validateBBox=h,e.validateId=g,e.getCoord=W,e.getCoords=A,e.containsNumber=j,e.geojsonType=R,e.featureOf=B,e.collectionOf=Q,e.getGeom=K,e.getGeomType=Z,e.getType=J,e.coordEach=x,e.coordReduce=y,e.propEach=w,e.propReduce=k,e.featureEach=L,e.featureReduce=C,e.coordAll=S,e.geomEach=M,e.geomReduce=P,e.flattenEach=E,e.flattenReduce=T,e.segmentEach=I,e.segmentReduce=O,e.lineEach=D,e.lineReduce=N,Object.defineProperty(e,"__esModule",{value:!0})},"object"==((r=void 0)===n?"undefined":$d(n))&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.turf={})},{}],56:[function(e,t,n){"use strict";L.registerLocale("en",{"全屏模式":"Full screen","退出全屏":"Exit full screen","<strong>错误:</strong> 形状的边不能相交!":"<strong>Error:</strong> shape edges cannot cross!","保存":"Save","保存变化":"Save changes","删除图形":"Delete layers","删除最后一个点":"Delete last point","删除最后一个绘制的点":"Delete last point drawn","半径":"Radius","取消":"Cancel","取消绘制":"Cancel drawing","取消编辑, 放弃所有变化":"Cancel editing, discards all changes","完成":"Finish","完成绘制":"Finish drawing","拖动结点或标记编辑图形":"Drag handles, or marker to edit feature","松开鼠标完成绘制":"Release mouse to finish drawing","没有可删除图形":"No layers to delete","没有可编辑图形":"No layers to edit","清除所有":"Clear all","清除所有图形":"Clear all shapes","点击取消放弃变更":"Click cancel to undo changes","点击图形进行删除":"Click on a feature to remove","点击地图放置标记":"Click map to place marker","点击并且拖动绘制圆":"Click and drag to draw circle","点击并且拖动绘制矩形":"Click and drag to draw rectangle","点击开始绘制形状":"Click to start drawing shape","点击开始绘制线":"Click to start drawing line","点击最后一个点完成线":"Click last point to finish line","点击第一个点完成形状":"Click first point to close this shape","点击继续绘制形状":"Click to continue drawing shape","点击继续绘制线":"Click to continue drawing line","绘制一个圆":"Draw a circle","绘制一个多边形":"Draw a polygon","绘制一个标记":"Draw a marker","绘制一个矩形":"Draw a rectangle","绘制一条折线":"Draw a polyline","编辑图形":"Edit graphics","样式编辑":"Edit style","图标":"Icon","填充透明度":"Fill Opacity","填充颜色":"Fill Color","线条样式":"Line Stroke","透明度":"Opacity","颜色":"Color","点击另一个需要定制样式的要素":"Choose another element you want to style","点击需要定制样式的要素":"Click on the feature you want to edit","尺寸":"Size","导入":"Import","导出":"Export","正在使用GeoJSON":"Using geoJSON","正在使用Shapefile":"Using shapefile","正在使用Excel":"Using excel","正在使用Txt":"Using txt","执行高级查询":"Execute advanced search","打开绘图面板，设置查询范围":"Open draw panel,set query area","请选择高级查询的图层":"Please select layer for advanced search","请填写查询条件或者绘制查询范围":"Please write query condition or set query area","获取数据图层树失败！":"Failed to get data layer tree!","高级查询记录数为空！":"Advanced search records is empty!","选择图层：":"Select Layer:","查询条件：":"Query Condition:","[字段信息]":"[Field Info]","添加到条件信息":"Add To Condition Info","[数值信息]":"[Value Info]","获取唯一值":"Get Unique Value","[条件信息]":"[Condition Info]","清除":"Clear","查询":"Query","范围":"Scope","历史":"History","前一视图":"Go back to previous extent","绘图面板":"Drawing panel","后一视图":"Go to next extent","全图浏览":"Full extent","信息查询":"Information query","地图漫游":"Pan","拉框选择":"Select features by rectangle","放大":"Fixed zoom in","缩小":"Fixed zoom out","拉框放大":"Zoom in","拉框缩小":"Zoom out","<p>请选择图层对比使用的模式<p>":"<p>Pelease select the mode of layer comparison<p>","两窗口":"2 Windows","使用主图":"Use Main Map","取消同步":"Cancel Sync","同步浏览":"Sync","四窗口":"4 Windows","图层对比":"Layer comparison","图层对比 ( 使用鼠标右键选择图层 )":"Layer Comparison ( Right-click on the map )","图层选择":"Select Layer","复制图层":"Copy Layer","对比模式":"Comparison mode","清空图层":"Clear Layer","粘贴图层":"Paste Layer","选择图层":"Select Layer","叠置分析":"Overlay Analysis","要素入库":"Feature Import","历史查看":"History View","书签":"Bookmark","设置":"Settings","高级查询":"Advanced Search","选择主题: ":"Select Theme: ","显示小地图":"Show MiniMap","隐藏小地图":"Hide MiniMap","图例":"Legend","缩放到图层":"Zoom to layer","清除所有选中项":"Clear selected","图例查询记录数为空！":"Legend query record number is empty!","导出Shapefile失败！":"Export shapefile failure!","导出Shapefile成功！":"Export shapefile success!","导入GeoJSON失败！":"Import GeoJSON failure!","导入文件成功！（最多导入数据条数：":"Import success！（Maximum count:","执行叠置分析":"Executive overlay analysis","打开绘图面板，设置分析范围":"Open the drawing panel and set the analysis extent","请绘制叠置分析图形！":"Please draw overlay analysis geometry!","叠置分析记录数为空！":"Overlay analysis record number is empty!","请选择叠置分析图层！":"Please select overlay analysis layer!","叠置分析选中的图层同时也会在图层树中选中！":"Overlay analysis selected layers and also selected in layer tree!","分析":"Analysis","选择":"Opt","设置分析图层：":"Set Analysis Layer:","统计结果过多,无法绘制统计图！":"Too many records to draw a chart!","统计字段为空或者错误,请设置正确的统计字段！":"The statistics field is empty or error,please set the correct statistics field!","统计图":"Statistics","统计字段: ":"Statistical field: ","因为点数过多，不能进入编辑模式！":"Data is too much, cannot enter edit mode!","导入文件失败！":"Failed import file!","导出GeoJSON成功！":"Export GeoJSON success!","无法导入文件！请选择shape文件的zip压缩包！":"Failed, Please select the zip package of shapefile!","没有可以导出的数据！":"There is no data that can be exported","叠置分析结果":"Overlay analysis results","搜索结果":"Search results","闪烁颜色: ":"Flicker color: ","导出 excel":"Export excel","统计值为空,无法绘制统计图！":"The statistic value is null, cannot draw statistics chart! ","图层":"Layer","图层树中选中的图层数不能超过: ":"Layers is over limit: ","重叠面积或长度":"Overlapping Area or Length","高级查询结果":"Advanced query results","GPS轨迹":"GPS Track","停止播放":"Stop Playing","播放轨迹":"Play Track","经纬度":"LatLng","<strong>请等待……</strong>":"<strong>Please wait</strong>","已经设置新主题，刷新页面将生效！":"New theme has been set and please refresh the page to apply it.","图层树控件为空！":"Layer tree is empty!","请选择查询图层！":"Please select the query layer!","请点击并勾选需要查询的图层！":"Please click and tick the layer you want to query!","配置文件中无对应图层！":"There is no corresponding layer in the configuration file!","查询记录数为空！":"The number of query records is empty! ","字段":"Field","值":"Value","信息查询结果":"Information Query Results","内缓冲":"Inner","单位":"Unit","双缓冲":"Both","右缓冲":"Right","外缓冲":"Outer","将屏蔽部分操作，取消卷帘可恢复！":"It will block part of the operation, cancel the shutter can be restored!","左缓冲":"Left","已恢复屏蔽的操作！":"The blocked operation has been restored!","最多选择五个图层！":"Select at most five layers!","缓冲":"Buffer","缓冲类型":"Buffer Type","缓冲距离":"Buffer Length","缓冲距离最大长度:":"The buffer distance maximum length: ","至少选择两个图层！":"Select at least two layers!","关闭卷帘":"Close roller shutters","横向卷帘":"Horizontal swipe","纵向卷帘":"Vertical swipe","截图时显示UI":"Take screenshot with UI","截图时隐藏UI":"Take screenshot without UI","截图":"Screenshot","绘制一个圆标记":"Draw a circle marker","点击地图放置圆形标记":"Click map to place circle marker","置顶":"Stick","清除置顶":"Clear Stick","高级查询历史":"Advanced Search History","确定":"OK","打印地图":"Print Map","发送到打印机":"Send to Printer","保存为PDF":"Saved as PDF","保存为图片":"Saved as Image","输入比例尺":"Input Zoom","文本":"Text","标记":"Mark","图表":"Chart","纸张":"Paper","像素/英寸":"Pixels/Inch","比例尺":"Scale","缩放按钮":"Zoom Button","指北针":"Compass","标题":"Title","一张图":"A Map","添加文字":"Add Text","添加标记":"Add Mark","添加":"Add","删除文字":"Delete Text","删除标记":"Delete Mark","清空":"Clear","关闭探照灯":"Close Search Light","将屏蔽部分操作，关闭探照灯可恢复！":"It will block part of the operation, close the search light can be restored!","探照灯":"Search Light","请在图层树勾选需要探照的图层":"Please check the search light layer in the layer tree","请在图层树选中需要探照的图层":"Please select the search light layer in the layer tree","横向":"Horizontal","纵向":"Vertical","微软雅黑":"Microsoft YaHei","新宋体":"NSimSun","楷体":"KaiTi","关闭滤镜":"Close filter","叠置分析选中的图层也会在图层树中选中！":"Layers selected in overlay analysis will also be selected in the layer manager!","图层树中同时选中的图层数不能超过: ":"Do not exceed the number of layers selected in the layer tree:","将屏蔽部分操作，退出功能后可恢复！":"Activated filter will block some operations, which will be recovered after exit filter!","属性查询":"Information query","属性查询结果":"Attribute Query Result","没有可清除图形":"No graphics can be removed","滤镜":"Filter","请在图层树勾选需要使用的图层":"Please select a layer as target in the layer manager","请在图层树选中单个图层（没有子节点）":"Please select a single layer (without sub-node) in the layer manager","请在图层树选中需要使用的图层":"Please select the layer you want to use on the layer tree","滤镜大小":"Filter size","中心点定位":"Central location","定位":"Location","定位失败！":"Location failed!","目标投影":"Target Projection","测量长度":"Measure Length","测量面积":"Measure Area","弧线":"Arc","曲线":"Curve","折线":"Polyline","闭合曲线":"Closed Curve","自由线":"Free Hand Line","圆":"Circle","椭圆":"Ellipse","弓形":"Lune","扇形":"Sector","矩形":"Rectangle","三角形":"Triangle","集结地":"Gathering Place","多边形":"Polygon","自由面":"Free Hand Polygon","钳击":"Double Arrow","直箭头":"Straight Arrow","细直箭头":"Fine Arrow","突击方向":"Assault Direction","进攻方向":"Attack Arrow","进攻方向（燕尾）":"Tailed Attack Arrow","分队战斗行动":"Squad Combat","分队战斗行动（燕尾）":"Tailed Squad Combat","线标":"Line","面标":"Polygon","箭头":"Arrow","开始标绘":"Start Plotting","结束标绘":"End Plotting","删除":"Delete","正在使用DwgDxf":"Using Dwg,Dxf","请求超时！请确认选择合理有效的图层！":"Request timed out! Please make sure to select a reasonable and valid layer!","请在图层树勾选至少两个图层":"Please select at least two layers in the layer tree","三窗口":"3 Windows","五窗口":"5 Windows","六窗口":"6 Windows","无":"None","统计所有":"Statistics All","重置":"Reset","要素更新":"Update","要素删除":"Delete","是否确定删除此要素?":"Confirm to delete?","当前编辑的要素未入库，是否继续切换?":"Current feature has not import, continue switch?","该要素已经入库，是否重复入库?":"The feature has been imported, import repeat?","添加书签":"Add Bookmark","图层选择：":"Select Layer:","[选择图层]":"[Select Layer]","图形导入：":"Graphic Import：","图形导入":"Graphic Import","选项设置：":"Options：","[要素重叠]":"Feature Overlay","允许重叠":"Allow Overlay","属性录入":"Attribute Import","加载的图形与类型不匹配!":"Graphic no match the layer's type!","请先加载图形文件!":"Please import the graphic file!","无法读取投影坐标系统，请手动选择!":"Read the coordinate system failed, please fill in  manually!","请选择有效的图层!":"Please select a valid layer!","请导入图形！":"Please import graphic!","投影坐标不能为空！":"The coordinate system must not be none!","-要素录入成功!":"- Feature import success!","-要素录入失败!":"- Feature import fail!","-要素更新成功!":"- Feature update success!","-要素重叠!":"- Feature overlap!","-要素更新失败!":"- Feature update fail!","-要素删除成功!":"- Feature delete success!","-要素删除失败!":"- Feature delete fail!","请填写整型数据！":"Please fill in the integer data !","请填写小数！":"Please fill in the float data !","请填写正确的日期格式，如1900/12/12 12:00:00":"Please fill in the date date, e.g. 1900/12/12 12:00:00","读取书签失败!":"Read bookmark failed!","提交":"submit","书签名称:":"Name:","请输入书签名称!":"Please input bookmark name!","-书签删除成功!":"- Delete bookmark success!","-书签删除失败!":"- Delete bookmark failed!","-添加书签成功!":"- Add bookmark success!","-添加书签失败!":"- Add bookmark failed!","删除书签":"Delete","统计结果: ":"Statistical result","饼状图":"Pie chart","柱状图":"Bar chart","分类字段: ":"Summary field:","保留原图形":"Reserved graphics","单位换算":"Unit conversion","添加/删除历史图层":"update timeline","添加历史图层 - ":"Add history layer - ","导出到打印":"Export to printer","图表导出到打印成功!":"Chart export to printer success!","标题背景色":"Background Color","标题设置":"Title Setting","网络分析":"Network Analysis","选择类型：":"Select Type:","选择模式：":"Select Mode:","代数运算":"Algebra","函数运算":"Function","逻辑运算":"Logic","条件运算":"Condition","输入":"Input","输入1":"Input 1","输入2":"Input 2","输出栅格数据":"Output Raster Data","运算符":"Operator","选择条件":"Select Condition","关闭":"Close","函数":"Function","导出选中":"Export the selected","自由绘制":"Free draw","阴影":"Shadow ","显示标题":"Display title","以此为终点":"Ending point","以此为起点":"Starting point","以此为途经点":"Through point ","以此为障碍点":"Barrier point","删除统计图":"Deletion chart","到下一个拐点":"To the next inflection point","向上回溯":"Upstream","向下回溯":"Downstream","回溯法":"Backtracking","方向":"Direction","旅行商分析":"Travel agent analysis","时间优先":"Time preference","最优路线分析":"Optimal route analysis","枚举法":"Enumeration method","移除":"Remove","移除所有点":"Clear points","移除所有面":"Clear polygons","米":"m","终":"E","绘制障碍面":"Barrier polygon","网络分析失败！":"Network analysis failure!","网络分析成功！":"Network analysis success!","贪心法":"Greedy method","起":"S","距离":"Distance","距离优先":"Distance first","路径图层":"The path layer","追溯分析":"Trace analysis","途":"M","隐藏统计图":"Hide chart","障":"B","栅格分析":"Raster image analysis","下载分析结果":"Download analysis results","代数运算成功！":"Algebra Operation Success","代数运算失败！":"Algebra Operation Failure","函数运算成功！":"Function Operation Success","函数运算失败！":"Function Operation Failure","逻辑运算成功！":"Logic Operation Success","逻辑运算失败！":"Logic Operation Failure","条件运算成功！":"Condition Operation Success","条件运算失败！":"Condition Operation Failure","分享":"Share","另存为":"Save as","折叠":"Collapse","创建缩略图":"Create thumb","创建缩略图失败":"Create thumb error","创建缩略图成功":"Create thumb success","保存为OFD":"Saved as OFD","分析结果记录数为空！":"","分析选中的图层也会在图层树中选中！":"","差异分析":"","差异分析结果":"","执行分析":"","拉取":"","请绘制分析图形！":"","请选择分析图层！":""})},{}],57:[function(e,t,n){var o=e("@mapbox/geojson-normalize"),r=e("geojson-stream"),i=e("fs");t.exports.merge=function(e){for(var t={type:"FeatureCollection",features:[]},n=0;n<e.length;n++)for(var r=o(e[n]),i=0;i<r.features.length;i++)t.features.push(r.features[i]);return t},t.exports.mergeFeatureCollectionStream=function(e){var t=r.stringify();return e.forEach(function(e){i.createReadStream(e).pipe(r.parse()).pipe(t)}),t}},{"@mapbox/geojson-normalize":58,fs:92,"geojson-stream":425}],58:[function(e,t,n){t.exports=function(e){if(!e||!e.type)return null;var t=r[e.type];if(!t)return null;{if("geometry"===t)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if("feature"===t)return{type:"FeatureCollection",features:[e]};if("featurecollection"===t)return e}};var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],59:[function(n,e,r){(function(t){"use strict";var e=n("jsonparse"),l=n("through"),i=t.from&&t.from!==Uint8Array.from;function g(e,t){return"string"==typeof e?t==e:e&&"function"==typeof e.exec?e.exec(t):"boolean"==typeof e||"object"==typeof e?e:"function"==typeof e&&e(t)}r.parse=function(h,f){var d,n,r=new e,p=l(function(e){"string"==typeof e&&(e=i?t.from(e):new t(e)),r.write(e)},function(e){e&&p.write(e),d&&p.emit("header",d),n&&p.emit("footer",n),p.queue(null)});"string"==typeof h&&(h=h.split(".").map(function(e){return"$*"===e?{emitKey:!0}:"*"===e||(""===e?{recurse:!0}:e)}));return h&&h.length||(h=null),r.onValue=function(e){if(this.root||(p.root=e),h){for(var t=0,n=0,r=!1,i=!1;t<h.length;){var o,a=h[t];if(n++,a&&!a.recurse){if(!(o=n===this.stack.length?this:this.stack[n]))return;if(!g(a,o.key))return void m(o.key,e);r=!!a.emitKey,i=!!a.emitPath,t++}else{var s=h[++t];if(!s)return;for(;;){if(!(o=n===this.stack.length?this:this.stack[n]))return;if(g(s,o.key)){t++,Object.isFrozen(this.stack[n])||(this.stack[n].value=null);break}m(o.key,e),n++}}}if(d&&(p.emit("header",d),d=!1),n===this.stack.length){0;var l=this.stack.slice(1).map(function(e){return e.key}).concat([this.key]),u=e;for(var c in null!=u&&null!=(u=f?f(u,l):u)&&((r||i)&&(u={value:u},r&&(u.key=this.key),i&&(u.path=l)),p.queue(u)),this.value&&delete this.value[this.key],this.stack)Object.isFrozen(this.stack[c])||(this.stack[c].value=null)}}},r._onToken=r.onToken,r.onToken=function(e,t){r._onToken(e,t),0===this.stack.length&&p.root&&(h||p.queue(p.root),0,p.root=null)},r.onError=function(e){-1<e.message.indexOf("at position")&&(e.message="Invalid JSON ("+e.message+")"),p.emit("error",e)},p;function m(e,t){!1!==d&&((d=d||{})[e]=t),!1!==n&&!1===d&&((n=n||{})[e]=t)}},r.stringify=function(n,r,t,i){i=i||0,!1===n?(r="\n",t=n=""):null==n&&(n="[\n",r="\n,\n",t="\n]\n");var o,a=!0,s=!1;return o=l(function(e){s=!0;try{var t=JSON.stringify(e,null,i)}catch(e){return o.emit("error",e)}a?(a=!1,o.queue(n+t)):o.queue(r+t)},function(e){s||o.queue(n),o.queue(t),o.queue(null)})},r.stringifyObject=function(n,r,t,i){i=i||0,!1===n?(r="\n",t=n=""):null==n&&(n="{\n",r="\n,\n",t="\n}\n");var o=!0,a=!1;return l(function(e){a=!0;var t=JSON.stringify(e[0])+":"+JSON.stringify(e[1],null,i);o?(o=!1,this.queue(n+t)):this.queue(r+t)},function(e){a||this.queue(n),this.queue(t),this.queue(null)})}}).call(this,n("buffer").Buffer)},{buffer:93,jsonparse:433,through:60}],60:[function(t,n,e){(function(u){var c=t("stream");function e(t,n,e){t=t||function(e){this.queue(e)},n=n||function(){this.queue(null)};var r=!1,i=!1,o=[],a=!1,s=new c;function l(){for(;o.length&&!s.paused;){var e=o.shift();if(null===e)return s.emit("end");s.emit("data",e)}}return s.readable=s.writable=!0,s.paused=!1,s.autoDestroy=!(e&&!1===e.autoDestroy),s.write=function(e){return t.call(this,e),!s.paused},s.queue=s.push=function(e){return a||(null===e&&(a=!0),o.push(e),l()),s},s.on("end",function(){s.readable=!1,!s.writable&&s.autoDestroy&&u.nextTick(function(){s.destroy()})}),s.end=function(e){if(!r)return r=!0,arguments.length&&s.write(e),s.writable=!1,n.call(s),!s.readable&&s.autoDestroy&&s.destroy(),s},s.destroy=function(){if(!i)return r=i=!0,o.length=0,s.writable=s.readable=!1,s.emit("close"),s},s.pause=function(){if(!s.paused)return s.paused=!0,s},s.resume=function(){return s.paused&&(s.paused=!1,s.emit("resume")),l(),s.paused||s.emit("drain"),s},s}n.exports=e,e.through=e}).call(this,t("_process"))},{_process:493,stream:497}],61:[function(e,t,n){t.exports=e("./lib/axios")},{"./lib/axios":63}],62:[function(h,e,t){"use strict";var f=h("./../utils"),d=h("./../core/settle"),p=h("./../helpers/buildURL"),m=h("../core/buildFullPath"),g=h("./../helpers/parseHeaders"),y=h("./../helpers/isURLSameOrigin"),_=h("../core/createError");e.exports=function(c){return new Promise(function(n,r){var i=c.data,o=c.headers;f.isFormData(i)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(c.auth){var e=c.auth.username||"",t=c.auth.password||"";o.Authorization="Basic "+btoa(e+":"+t)}var s=m(c.baseURL,c.url);if(a.open(c.method.toUpperCase(),p(s,c.params,c.paramsSerializer),!0),a.timeout=c.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?g(a.getAllResponseHeaders()):null,t={data:c.responseType&&"text"!==c.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:e,config:c,request:a};d(n,r,t),a=null}},a.onabort=function(){a&&(r(_("Request aborted",c,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(_("Network Error",c,null,a)),a=null},a.ontimeout=function(){var e="timeout of "+c.timeout+"ms exceeded";c.timeoutErrorMessage&&(e=c.timeoutErrorMessage),r(_(e,c,"ECONNABORTED",a)),a=null},f.isStandardBrowserEnv()){var l=h("./../helpers/cookies"),u=(c.withCredentials||y(s))&&c.xsrfCookieName?l.read(c.xsrfCookieName):void 0;u&&(o[c.xsrfHeaderName]=u)}if("setRequestHeader"in a&&f.forEach(o,function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)}),f.isUndefined(c.withCredentials)||(a.withCredentials=!!c.withCredentials),c.responseType)try{a.responseType=c.responseType}catch(e){if("json"!==c.responseType)throw e}"function"==typeof c.onDownloadProgress&&a.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(e){a&&(a.abort(),r(e),a=null)}),void 0===i&&(i=null),a.send(i)})}},{"../core/buildFullPath":69,"../core/createError":70,"./../core/settle":74,"./../helpers/buildURL":78,"./../helpers/cookies":80,"./../helpers/isURLSameOrigin":82,"./../helpers/parseHeaders":84,"./../utils":86}],63:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./helpers/bind"),o=e("./core/Axios"),a=e("./core/mergeConfig");function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var l=s(e("./defaults"));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=e("./cancel/Cancel"),l.CancelToken=e("./cancel/CancelToken"),l.isCancel=e("./cancel/isCancel"),l.all=function(e){return Promise.all(e)},l.spread=e("./helpers/spread"),t.exports=l,t.exports.default=l},{"./cancel/Cancel":64,"./cancel/CancelToken":65,"./cancel/isCancel":66,"./core/Axios":67,"./core/mergeConfig":73,"./defaults":76,"./helpers/bind":77,"./helpers/spread":85,"./utils":86}],64:[function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},{}],65:[function(e,t,n){"use strict";var r=e("./Cancel");function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},{"./Cancel":64}],66:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],67:[function(e,t,n){"use strict";var i=e("./../utils"),r=e("../helpers/buildURL"),o=e("./InterceptorManager"),a=e("./dispatchRequest"),s=e("./mergeConfig");function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(e,t){return this.request(i.merge(t||{},{method:n,url:e}))}}),i.forEach(["post","put","patch"],function(r){l.prototype[r]=function(e,t,n){return this.request(i.merge(n||{},{method:r,url:e,data:t}))}}),t.exports=l},{"../helpers/buildURL":78,"./../utils":86,"./InterceptorManager":68,"./dispatchRequest":71,"./mergeConfig":73}],68:[function(e,t,n){"use strict";var r=e("./../utils");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},{"./../utils":86}],69:[function(e,t,n){"use strict";var r=e("../helpers/isAbsoluteURL"),i=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!r(t)?i(e,t):t}},{"../helpers/combineURLs":79,"../helpers/isAbsoluteURL":81}],70:[function(e,t,n){"use strict";var a=e("./enhanceError");t.exports=function(e,t,n,r,i){var o=new Error(e);return a(o,t,n,r,i)}},{"./enhanceError":72}],71:[function(e,t,n){"use strict";var r=e("./../utils"),i=e("./transformData"),o=e("../cancel/isCancel"),a=e("../defaults");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return s(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},{"../cancel/isCancel":66,"../defaults":76,"./../utils":86,"./transformData":75}],72:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},{}],73:[function(e,t,n){"use strict";var l=e("../utils");t.exports=function(t,n){n=n||{};var r={},e=["url","method","params","data"],i=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];l.forEach(e,function(e){void 0!==n[e]&&(r[e]=n[e])}),l.forEach(i,function(e){l.isObject(n[e])?r[e]=l.deepMerge(t[e],n[e]):void 0!==n[e]?r[e]=n[e]:l.isObject(t[e])?r[e]=l.deepMerge(t[e]):void 0!==t[e]&&(r[e]=t[e])}),l.forEach(o,function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])});var a=e.concat(i).concat(o),s=Object.keys(n).filter(function(e){return-1===a.indexOf(e)});return l.forEach(s,function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])}),r}},{"../utils":86}],74:[function(e,t,n){"use strict";var i=e("./createError");t.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},{"./createError":70}],75:[function(e,t,n){"use strict";var r=e("./../utils");t.exports=function(t,n,e){return r.forEach(e,function(e){t=e(t,n)}),t}},{"./../utils":86}],76:[function(s,l,e){(function(e){"use strict";var n=s("./utils"),r=s("./helpers/normalizeHeaderName"),t={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,a={adapter:("undefined"!=typeof XMLHttpRequest?o=s("./adapters/xhr"):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(o=s("./adapters/http")),o),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),l.exports=a}).call(this,s("_process"))},{"./adapters/http":62,"./adapters/xhr":62,"./helpers/normalizeHeaderName":83,"./utils":86,_process:493}],77:[function(e,t,n){"use strict";t.exports=function(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}},{}],78:[function(e,t,n){"use strict";var a=e("./../utils");function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(a.isURLSearchParams(t))r=t.toString();else{var i=[];a.forEach(t,function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),i.push(s(t)+"="+s(e))}))}),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},{"./../utils":86}],79:[function(e,t,n){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],80:[function(e,t,n){"use strict";var s=e("./../utils");t.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(r)&&a.push("path="+r),s.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":86}],81:[function(e,t,n){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],82:[function(e,t,n){"use strict";var a=e("./../utils");t.exports=a.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(e){var t=e;return r&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return n=o(window.location.href),function(e){var t=a.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0}},{"./../utils":86}],83:[function(e,t,n){"use strict";var i=e("../utils");t.exports=function(n,r){i.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}},{"../utils":86}],84:[function(e,t,n){"use strict";var o=e("./../utils"),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,n,r,i={};return e&&o.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=o.trim(e.substr(0,r)).toLowerCase(),n=o.trim(e.substr(r+1)),t){if(i[t]&&0<=a.indexOf(t))return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}}),i}},{"./../utils":86}],85:[function(e,t,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},{}],86:[function(e,t,n){"use strict";var i=e("./helpers/bind"),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}t.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function n(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=n(r[t],e):r[t]=e}for(var t=0,i=arguments.length;t<i;t++)u(arguments[t],e);return r},deepMerge:function n(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=n(r[t],e):r[t]="object"==typeof e?n({},e):e}for(var t=0,i=arguments.length;t<i;t++)u(arguments[t],e);return r},extend:function(n,e,r){return u(e,function(e,t){n[t]=r&&"function"==typeof e?i(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},{"./helpers/bind":77}],87:[function(n,e,t){(function(e){"use strict";if(n("core-js/shim"),n("regenerator-runtime/runtime"),n("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,n){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:n})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":94,"core-js/shim":422,"regenerator-runtime/runtime":88}],88:[function(e,O,t){(function(e){!function(e){"use strict";var l,t=Object.prototype,u=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof O,s=e.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=e.regeneratorRuntime=a?O.exports:{}).wrap=v;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={},c={};c[i]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&u.call(y,i)&&(c=y);var _=k.prototype=w.prototype=Object.create(c);x.prototype=_.constructor=k,k.constructor=x,k[o]=x.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(_),e},s.awrap=function(e){return{__await:e}},L(C.prototype),C.prototype[r]=function(){return this},s.AsyncIterator=C,s.async=function(e,t,n,r){var i=new C(v(e,t,n,r));return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},L(_),_[o]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),m}}}function v(e,t,n,r){var o,a,s,l,i=t&&t.prototype instanceof w?t:w,u=Object.create(i.prototype),c=new E(r||[]);return u._invoke=(o=e,a=n,s=c,l=h,function(e,t){if(l===d)throw new Error("Generator is already running");if(l===p){if("throw"===e)throw t;return I()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=S(n,s);if(r){if(r===m)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===h)throw l=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=d;var i=b(o,a,s);if("normal"===i.type){if(l=s.done?p:f,i.arg===m)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=p,s.method="throw",s.arg=i.arg)}}),u}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function x(){}function k(){}function L(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(s){function l(e,t,n,r){var i=b(s[e],s,t);if("throw"!==i.type){var o=i.arg,a=o.value;return a&&"object"==typeof a&&u.call(a,"__await")?Promise.resolve(a.__await).then(function(e){l("next",e,n,r)},function(e){l("throw",e,n,r)}):Promise.resolve(a).then(function(e){o.value=e,n(o)},r)}r(i.arg)}var t;"object"==typeof e.process&&e.process.domain&&(l=e.process.domain.bind(l)),this._invoke=function(n,r){function e(){return new Promise(function(e,t){l(n,r,e,t)})}return t=t?t.then(e,e):e()}}function S(e,t){var n=e.iterator[t.method];if(n===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,S(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=b(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e};return r.next=r}}return{next:I}}function I(){return{value:l,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],89:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=d(e),i=r[0],o=r[1],a=new f((u=i,c=o,3*(u+c)/4-c)),s=0,l=0<o?i-4:i;var u,c;for(n=0;n<l;n+=4)t=h[e.charCodeAt(n)]<<18|h[e.charCodeAt(n+1)]<<12|h[e.charCodeAt(n+2)]<<6|h[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=h[e.charCodeAt(n)]<<2|h[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=h[e.charCodeAt(n)]<<10|h[e.charCodeAt(n+1)]<<4|h[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(l(e,o,a<o+16383?a:o+16383));1===r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)s[i]=r[i],h[r.charCodeAt(i)]=i;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(s[(i=r)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],90:[function(e,t,n){},{}],91:[function(e,t,n){"use strict";var i=[],a=function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=i[i.length-1];if((t=t||{}).insertAt=t.insertAt||"bottom","top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),i.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}};t.exports={createLink:function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("link");for(var i in r.href=e,r.rel="stylesheet",t)if(t.hasOwnProperty(i)){var o=t[i];r.setAttribute("data-"+i,o)}n.appendChild(r)},createStyle:function(e,t,n){n=n||{};var r=document.createElement("style");for(var i in r.type="text/css",t)if(t.hasOwnProperty(i)){var o=t[i];r.setAttribute("data-"+i,o)}r.sheet?(r.innerHTML=e,r.sheet.cssText=e,a(r,{insertAt:n.insertAt})):r.styleSheet?(a(r,{insertAt:n.insertAt}),r.styleSheet.cssText=e):(r.appendChild(document.createTextNode(e)),a(r,{insertAt:n.insertAt}))}}},{}],92:[function(e,t,n){arguments[4][90][0].apply(n,arguments)},{dup:90}],93:[function(e,t,j){(function(h){"use strict";var r=e("base64-js"),o=e("ieee754");j.Buffer=h,j.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},j.INSPECT_MAX_BYTES=50;var n=2147483647;function a(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=h.prototype,t}function h(e,t,n){if("number"!=typeof e)return i(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function i(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=a(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=h.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return h.from(r,t,n);var i=function(e){if(h.isBuffer(e)){var t=0|c(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||A(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return s(e),a(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function f(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(i)return r?-1:I(e).length;t=(""+t).toLowerCase(),i=!0}}function d(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),A(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var h=!0,f=0;f<l;f++)if(u(e,o+f)!==u(t,f)){h=!1;break}if(h)return o}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=t.length;o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(A(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,h=239<u?4:223<u?3:191<u?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=b));return n}(r)}j.kMaxLength=n,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(e,t,n){return i(e,t,n)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,n){return i=t,o=n,s(r=e),r<=0?a(r):void 0!==i?"string"==typeof o?a(r).fill(i,o):a(r).fill(i):a(r);var r,i,o},h.allocUnsafe=function(e){return l(e)},h.allocUnsafeSlow=function(e){return l(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(N(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=h.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(N(o,Uint8Array)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return w(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=j.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h.prototype.compare=function(e,t,n,r,i){if(N(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},h.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,s,l,u,c,h,f,d,p=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return f=t,d=n,D(I(e,(h=this).length-f),h,f,d);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return l=this,u=t,c=n,D(O(e),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=n,D(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,(o=this).length-a),o,a,s);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=T(e[o]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,r,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,8),o.write(e,t,n,r,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},h.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},h.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);S(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},h.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);S(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,r){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},h.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=h.isBuffer(e)?e:h.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var t=/[^+/0-9A-Za-z-_]/g;function T(e){return e<16?"0"+e.toString(16):e.toString(16)}function I(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function O(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function A(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":89,buffer:93,ieee754:427}],94:[function(e,t,n){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":116,"../../modules/core.regexp.escape":224}],95:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],96:[function(e,t,n){var r=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},{"./_cof":111}],97:[function(e,t,n){var r=e("./_wks")("unscopables"),i=Array.prototype;null==i[r]&&e("./_hide")(i,r,{}),t.exports=function(e){i[r][e]=!0}},{"./_hide":136,"./_wks":222}],98:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"./_string-at":199}],99:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],100:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":145}],101:[function(e,t,n){"use strict";var u=e("./_to-object"),c=e("./_to-absolute-index"),h=e("./_to-length");t.exports=[].copyWithin||function(e,t){var n=u(this),r=h(n.length),i=c(e,r),o=c(t,r),a=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===a?r:c(a,r))-o,r-i),l=1;for(o<i&&i<o+s&&(l=-1,o+=s-1,i+=s-1);0<s--;)o in n?n[i]=n[o]:delete n[i],i+=l,o+=l;return n}},{"./_to-absolute-index":207,"./_to-length":211,"./_to-object":212}],102:[function(e,t,n){"use strict";var s=e("./_to-object"),l=e("./_to-absolute-index"),u=e("./_to-length");t.exports=function(e){for(var t=s(this),n=u(t.length),r=arguments.length,i=l(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:l(o,n);i<a;)t[i++]=e;return t}},{"./_to-absolute-index":207,"./_to-length":211,"./_to-object":212}],103:[function(e,t,n){var r=e("./_for-of");t.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},{"./_for-of":132}],104:[function(e,t,n){var l=e("./_to-iobject"),u=e("./_to-length"),c=e("./_to-absolute-index");t.exports=function(s){return function(e,t,n){var r,i=l(e),o=u(i.length),a=c(n,o);if(s&&t!=t){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===t)return s||a||0;return!s&&-1}}},{"./_to-absolute-index":207,"./_to-iobject":210,"./_to-length":211}],105:[function(e,t,n){var v=e("./_ctx"),b=e("./_iobject"),w=e("./_to-object"),x=e("./_to-length"),r=e("./_array-species-create");t.exports=function(h,e){var f=1==h,d=2==h,p=3==h,m=4==h,g=6==h,y=5==h||g,_=e||r;return function(e,t,n){for(var r,i,o=w(e),a=b(o),s=v(t,n,3),l=x(a.length),u=0,c=f?_(e,l):d?_(e,0):void 0;u<l;u++)if((y||u in a)&&(i=s(r=a[u],u,o),h))if(f)c[u]=i;else if(i)switch(h){case 3:return!0;case 5:return r;case 6:return u;case 2:c.push(r)}else if(m)return!1;return g?-1:p||m?m:c}}},{"./_array-species-create":108,"./_ctx":118,"./_iobject":141,"./_to-length":211,"./_to-object":212}],106:[function(e,t,n){var c=e("./_a-function"),h=e("./_to-object"),f=e("./_iobject"),d=e("./_to-length");t.exports=function(e,t,n,r,i){c(t);var o=h(e),a=f(o),s=d(o.length),l=i?s-1:0,u=i?-1:1;if(n<2)for(;;){if(l in a){r=a[l],l+=u;break}if(l+=u,i?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=l:l<s;l+=u)l in a&&(r=t(r,a[l],l,o));return r}},{"./_a-function":95,"./_iobject":141,"./_to-length":211,"./_to-object":212}],107:[function(e,t,n){var r=e("./_is-object"),i=e("./_is-array"),o=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":143,"./_is-object":145,"./_wks":222}],108:[function(e,t,n){var r=e("./_array-species-constructor");t.exports=function(e,t){return new(r(e))(t)}},{"./_array-species-constructor":107}],109:[function(e,t,n){"use strict";var o=e("./_a-function"),a=e("./_is-object"),s=e("./_invoke"),l=[].slice,u={};t.exports=Function.bind||function(t){var n=o(this),r=l.call(arguments,1),i=function(){var e=r.concat(l.call(arguments));return this instanceof i?function(e,t,n){if(!(t in u)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";u[t]=Function("F,a","return new F("+r.join(",")+")")}return u[t](e,n)}(n,e.length,e):s(n,e,t)};return a(n.prototype)&&(i.prototype=n.prototype),i}},{"./_a-function":95,"./_invoke":140,"./_is-object":145}],110:[function(e,t,n){var i=e("./_cof"),o=e("./_wks")("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},{"./_cof":111,"./_wks":222}],111:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],112:[function(e,t,n){"use strict";var a=e("./_object-dp").f,s=e("./_object-create"),l=e("./_redefine-all"),u=e("./_ctx"),c=e("./_an-instance"),h=e("./_for-of"),r=e("./_iter-define"),i=e("./_iter-step"),o=e("./_set-species"),f=e("./_descriptors"),d=e("./_meta").fastKey,p=e("./_validate-collection"),m=f?"_s":"size",g=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,o,n,r){var i=e(function(e,t){c(e,i,o,"_i"),e._t=o,e._i=s(null),e._f=void 0,e._l=void 0,e[m]=0,null!=t&&h(t,n,e[r],e)});return l(i.prototype,{clear:function(){for(var e=p(this,o),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=p(this,o),n=g(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[m]--}return!!n},forEach:function(e){p(this,o);for(var t,n=u(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!g(p(this,o),e)}}),f&&a(i.prototype,"size",{get:function(){return p(this,o)[m]}}),i},def:function(e,t,n){var r,i,o=g(e,t);return o?o.v=n:(e._l=o={i:i=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:g,setStrong:function(e,n,t){r(e,n,function(e,t){this._t=p(e,n),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?i(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,i(1))},t?"entries":"values",!t,!0),o(n)}}},{"./_an-instance":99,"./_ctx":118,"./_descriptors":122,"./_for-of":132,"./_iter-define":149,"./_iter-step":151,"./_meta":159,"./_object-create":164,"./_object-dp":165,"./_redefine-all":184,"./_set-species":193,"./_validate-collection":219}],113:[function(e,t,n){var r=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":103,"./_classof":110}],114:[function(e,t,n){"use strict";var a=e("./_redefine-all"),s=e("./_meta").getWeak,i=e("./_an-object"),l=e("./_is-object"),u=e("./_an-instance"),c=e("./_for-of"),r=e("./_array-methods"),h=e("./_has"),f=e("./_validate-collection"),o=r(5),d=r(6),p=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return o(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(e,n,r,i){var o=e(function(e,t){u(e,o,n,"_i"),e._t=n,e._i=p++,e._l=void 0,null!=t&&c(t,r,e[i],e)});return a(o.prototype,{delete:function(e){if(!l(e))return!1;var t=s(e);return!0===t?m(f(this,n)).delete(e):t&&h(t,this._i)&&delete t[this._i]},has:function(e){if(!l(e))return!1;var t=s(e);return!0===t?m(f(this,n)).has(e):t&&h(t,this._i)}}),o},def:function(e,t,n){var r=s(i(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},{"./_an-instance":99,"./_an-object":100,"./_array-methods":105,"./_for-of":132,"./_has":135,"./_is-object":145,"./_meta":159,"./_redefine-all":184,"./_validate-collection":219}],115:[function(e,t,n){"use strict";var y=e("./_global"),_=e("./_export"),v=e("./_redefine"),b=e("./_redefine-all"),w=e("./_meta"),x=e("./_for-of"),k=e("./_an-instance"),L=e("./_is-object"),C=e("./_fails"),S=e("./_iter-detect"),M=e("./_set-to-string-tag"),P=e("./_inherit-if-required");t.exports=function(r,e,t,n,i,o){var a=y[r],s=a,l=i?"set":"add",u=s&&s.prototype,c={},h=function(e){var n=u[e];v(u,e,"delete"==e?function(e){return!(o&&!L(e))&&n.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!L(e))&&n.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!L(e)?void 0:n.call(this,0===e?0:e)}:"add"==e?function(e){return n.call(this,0===e?0:e),this}:function(e,t){return n.call(this,0===e?0:e,t),this})};if("function"==typeof s&&(o||u.forEach&&!C(function(){(new s).entries().next()}))){var f=new s,d=f[l](o?{}:-0,1)!=f,p=C(function(){f.has(1)}),m=S(function(e){new s(e)}),g=!o&&C(function(){for(var e=new s,t=5;t--;)e[l](t,t);return!e.has(-0)});m||(((s=e(function(e,t){k(e,s,r);var n=P(new a,e,s);return null!=t&&x(t,i,n[l],n),n})).prototype=u).constructor=s),(p||g)&&(h("delete"),h("has"),i&&h("get")),(g||d)&&h(l),o&&u.clear&&delete u.clear}else s=n.getConstructor(e,r,i,l),b(s.prototype,t),w.NEED=!0;return M(s,r),c[r]=s,_(_.G+_.W+_.F*(s!=a),c),o||n.setStrong(s,r,i),s}},{"./_an-instance":99,"./_export":126,"./_fails":128,"./_for-of":132,"./_global":134,"./_inherit-if-required":139,"./_is-object":145,"./_iter-detect":150,"./_meta":159,"./_redefine":185,"./_redefine-all":184,"./_set-to-string-tag":194}],116:[function(e,t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},{}],117:[function(e,t,n){"use strict";var r=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},{"./_object-dp":165,"./_property-desc":183}],118:[function(e,t,n){var o=e("./_a-function");t.exports=function(r,i,e){if(o(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}},{"./_a-function":95}],119:[function(e,t,n){"use strict";var r=e("./_fails"),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return 9<e?e:"0"+e};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":9999<e?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(99<t?t:"0"+a(t))+"Z"}:o},{"./_fails":128}],120:[function(e,t,n){"use strict";var r=e("./_an-object"),i=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},{"./_an-object":100,"./_to-primitive":213}],121:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],122:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":128}],123:[function(e,t,n){var r=e("./_is-object"),i=e("./_global").document,o=r(i)&&r(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":134,"./_is-object":145}],124:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],125:[function(e,t,n){var s=e("./_object-keys"),l=e("./_object-gops"),u=e("./_object-pie");t.exports=function(e){var t=s(e),n=l.f;if(n)for(var r,i=n(e),o=u.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}},{"./_object-gops":171,"./_object-keys":174,"./_object-pie":175}],126:[function(e,t,n){var m=e("./_global"),g=e("./_core"),y=e("./_hide"),_=e("./_redefine"),v=e("./_ctx"),b="prototype",w=function(e,t,n){var r,i,o,a,s=e&w.F,l=e&w.G,u=e&w.S,c=e&w.P,h=e&w.B,f=l?m:u?m[t]||(m[t]={}):(m[t]||{})[b],d=l?g:g[t]||(g[t]={}),p=d[b]||(d[b]={});for(r in l&&(n=t),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=h&&i?v(o,m):c&&"function"==typeof o?v(Function.call,o):o,f&&_(f,r,o,e&w.U),d[r]!=o&&y(d,r,a),c&&p[r]!=o&&(p[r]=o)};m.core=g,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},{"./_core":116,"./_ctx":118,"./_global":134,"./_hide":136,"./_redefine":185}],127:[function(e,t,n){var r=e("./_wks")("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,!"/./"[t](n)}catch(e){}}return!0}},{"./_wks":222}],128:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],129:[function(e,t,n){"use strict";e("./es6.regexp.exec");var c=e("./_redefine"),h=e("./_hide"),f=e("./_fails"),d=e("./_defined"),p=e("./_wks"),m=e("./_regexp-exec"),g=p("species"),y=!f(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),_=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(n,e,t){var r=p(n),o=!f(function(){var e={};return e[r]=function(){return 7},7!=""[n](e)}),i=o?!f(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[g]=function(){return t}),t[r](""),!e}):void 0;if(!o||!i||"replace"===n&&!y||"split"===n&&!_){var a=/./[r],s=t(d,r,""[n],function(e,t,n,r,i){return t.exec===m?o&&!i?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),l=s[0],u=s[1];c(String.prototype,n,l),h(RegExp.prototype,r,2==e?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}}},{"./_defined":121,"./_fails":128,"./_hide":136,"./_redefine":185,"./_regexp-exec":187,"./_wks":222,"./es6.regexp.exec":319}],130:[function(e,t,n){"use strict";var r=e("./_an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":100}],131:[function(e,t,n){"use strict";var p=e("./_is-array"),m=e("./_is-object"),g=e("./_to-length"),y=e("./_ctx"),_=e("./_wks")("isConcatSpreadable");t.exports=function e(t,n,r,i,o,a,s,l){for(var u,c,h=o,f=0,d=!!s&&y(s,l,3);f<i;){if(f in r){if(u=d?d(r[f],f,n):r[f],c=!1,m(u)&&(c=void 0!==(c=u[_])?!!c:p(u)),c&&0<a)h=e(t,n,u,g(u.length),h,a-1)-1;else{if(9007199254740991<=h)throw TypeError();t[h]=u}h++}f++}return h}},{"./_ctx":118,"./_is-array":143,"./_is-object":145,"./_to-length":211,"./_wks":222}],132:[function(e,t,n){var f=e("./_ctx"),d=e("./_iter-call"),p=e("./_is-array-iter"),m=e("./_an-object"),g=e("./_to-length"),y=e("./core.get-iterator-method"),_={},v={};(n=t.exports=function(e,t,n,r,i){var o,a,s,l,u=i?function(){return e}:y(e),c=f(n,r,t?2:1),h=0;if("function"!=typeof u)throw TypeError(e+" is not iterable!");if(p(u)){for(o=g(e.length);h<o;h++)if((l=t?c(m(a=e[h])[0],a[1]):c(e[h]))===_||l===v)return l}else for(s=u.call(e);!(a=s.next()).done;)if((l=d(s,c,a.value,t))===_||l===v)return l}).BREAK=_,n.RETURN=v},{"./_an-object":100,"./_ctx":118,"./_is-array-iter":142,"./_iter-call":147,"./_to-length":211,"./core.get-iterator-method":223}],133:[function(e,t,n){t.exports=e("./_shared")("native-function-to-string",Function.toString)},{"./_shared":196}],134:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],135:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],136:[function(e,t,n){var r=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":122,"./_object-dp":165,"./_property-desc":183}],137:[function(e,t,n){var r=e("./_global").document;t.exports=r&&r.documentElement},{"./_global":134}],138:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":122,"./_dom-create":123,"./_fails":128}],139:[function(e,t,n){var o=e("./_is-object"),a=e("./_set-proto").set;t.exports=function(e,t,n){var r,i=t.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&a&&a(e,r),e}},{"./_is-object":145,"./_set-proto":192}],140:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],141:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":111}],142:[function(e,t,n){var r=e("./_iterators"),i=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},{"./_iterators":152,"./_wks":222}],143:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":111}],144:[function(e,t,n){var r=e("./_is-object"),i=Math.floor;t.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":145}],145:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],146:[function(e,t,n){var r=e("./_is-object"),i=e("./_cof"),o=e("./_wks")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"./_cof":111,"./_is-object":145,"./_wks":222}],147:[function(e,t,n){var o=e("./_an-object");t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},{"./_an-object":100}],148:[function(e,t,n){"use strict";var r=e("./_object-create"),i=e("./_property-desc"),o=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},{"./_hide":136,"./_object-create":164,"./_property-desc":183,"./_set-to-string-tag":194,"./_wks":222}],149:[function(e,t,n){"use strict";var v=e("./_library"),b=e("./_export"),w=e("./_redefine"),x=e("./_hide"),k=e("./_iterators"),L=e("./_iter-create"),C=e("./_set-to-string-tag"),S=e("./_object-gpo"),M=e("./_wks")("iterator"),P=!([].keys&&"next"in[].keys()),E="values",T=function(){return this};t.exports=function(e,t,n,r,i,o,a){L(n,t,r);var s,l,u,c=function(e){if(!P&&e in p)return p[e];switch(e){case"keys":case E:return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",f=i==E,d=!1,p=e.prototype,m=p[M]||p["@@iterator"]||i&&p[i],g=m||c(i),y=i?f?c("entries"):g:void 0,_="Array"==t&&p.entries||m;if(_&&(u=S(_.call(new e)))!==Object.prototype&&u.next&&(C(u,h,!0),v||"function"==typeof u[M]||x(u,M,T)),f&&m&&m.name!==E&&(d=!0,g=function(){return m.call(this)}),v&&!a||!P&&!d&&p[M]||x(p,M,g),k[t]=g,k[h]=T,i)if(s={values:f?g:c(E),keys:o?g:c("keys"),entries:y},a)for(l in s)l in p||w(p,l,s[l]);else b(b.P+b.F*(P||d),t,s);return s}},{"./_export":126,"./_hide":136,"./_iter-create":148,"./_iterators":152,"./_library":153,"./_object-gpo":172,"./_redefine":185,"./_set-to-string-tag":194,"./_wks":222}],150:[function(e,t,n){var o=e("./_wks")("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},e(r)}catch(e){}return n}},{"./_wks":222}],151:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],152:[function(e,t,n){t.exports={}},{}],153:[function(e,t,n){t.exports=!1},{}],154:[function(e,t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},{}],155:[function(e,t,n){var o=e("./_math-sign"),r=Math.pow,a=r(2,-52),s=r(2,-23),l=r(2,127)*(2-s),u=r(2,-126);t.exports=Math.fround||function(e){var t,n,r=Math.abs(e),i=o(e);return r<u?i*(r/u/s+1/a-1/a)*u*s:l<(n=(t=(1+s/a)*r)-(t-r))||n!=n?i*(1/0):i*n}},{"./_math-sign":158}],156:[function(e,t,n){t.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],157:[function(e,t,n){t.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},{}],158:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],159:[function(e,t,n){var r=e("./_uid")("meta"),i=e("./_is-object"),o=e("./_has"),a=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return u&&h.NEED&&l(e)&&!o(e,r)&&c(e),e}}},{"./_fails":128,"./_has":135,"./_is-object":145,"./_object-dp":165,"./_uid":217}],160:[function(e,t,n){var o=e("./es6.map"),r=e("./_export"),i=e("./_shared")("metadata"),a=i.store||(i.store=new(e("./es6.weak-map"))),s=function(e,t,n){var r=a.get(e);if(!r){if(!n)return;a.set(e,r=new o)}var i=r.get(t);if(!i){if(!n)return;r.set(t,i=new o)}return i};t.exports={store:a,map:s,has:function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){s(n,r,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){r(r.S,"Reflect",e)}}},{"./_export":126,"./_shared":196,"./es6.map":254,"./es6.weak-map":361}],161:[function(e,t,n){var s=e("./_global"),l=e("./_task").set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,h=s.Promise,f="process"==e("./_cof")(c);t.exports=function(){var n,r,i,e=function(){var e,t;for(f&&(e=c.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?i():r=void 0,e}}r=void 0,e&&e.enter()};if(f)i=function(){c.nextTick(e)};else if(!u||s.navigator&&s.navigator.standalone)if(h&&h.resolve){var t=h.resolve(void 0);i=function(){t.then(e)}}else i=function(){l.call(s,e)};else{var o=!0,a=document.createTextNode("");new u(e).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};r&&(r.next=t),n||(n=t,i()),r=t}}},{"./_cof":111,"./_global":134,"./_task":206}],162:[function(e,t,n){"use strict";var i=e("./_a-function");function r(e){var n,r;this.promise=new e(function(e,t){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=i(n),this.reject=i(r)}t.exports.f=function(e){return new r(e)}},{"./_a-function":95}],163:[function(e,t,n){"use strict";var f=e("./_descriptors"),d=e("./_object-keys"),p=e("./_object-gops"),m=e("./_object-pie"),g=e("./_to-object"),y=e("./_iobject"),i=Object.assign;t.exports=!i||e("./_fails")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=i({},e)[n]||Object.keys(i({},t)).join("")!=r})?function(e,t){for(var n=g(e),r=arguments.length,i=1,o=p.f,a=m.f;i<r;)for(var s,l=y(arguments[i++]),u=o?d(l).concat(o(l)):d(l),c=u.length,h=0;h<c;)s=u[h++],f&&!a.call(l,s)||(n[s]=l[s]);return n}:i},{"./_descriptors":122,"./_fails":128,"./_iobject":141,"./_object-gops":171,"./_object-keys":174,"./_object-pie":175,"./_to-object":212}],164:[function(r,e,t){var i=r("./_an-object"),o=r("./_object-dps"),a=r("./_enum-bug-keys"),s=r("./_shared-key")("IE_PROTO"),l=function(){},u="prototype",c=function(){var e,t=r("./_dom-create")("iframe"),n=a.length;for(t.style.display="none",r("./_html").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c[u][a[n]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(l[u]=i(e),n=new l,l[u]=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},{"./_an-object":100,"./_dom-create":123,"./_enum-bug-keys":124,"./_html":137,"./_object-dps":166,"./_shared-key":195}],165:[function(e,t,n){var r=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":100,"./_descriptors":122,"./_ie8-dom-define":138,"./_to-primitive":213}],166:[function(e,t,n){var a=e("./_object-dp"),s=e("./_an-object"),l=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var n,r=l(t),i=r.length,o=0;o<i;)a.f(e,n=r[o++],t[n]);return e}},{"./_an-object":100,"./_descriptors":122,"./_object-dp":165,"./_object-keys":174}],167:[function(t,e,n){"use strict";e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":128,"./_global":134,"./_library":153}],168:[function(e,t,n){var r=e("./_object-pie"),i=e("./_property-desc"),o=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},{"./_descriptors":122,"./_has":135,"./_ie8-dom-define":138,"./_object-pie":175,"./_property-desc":183,"./_to-iobject":210,"./_to-primitive":213}],169:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},{"./_object-gopn":170,"./_to-iobject":210}],170:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},{"./_enum-bug-keys":124,"./_object-keys-internal":173}],171:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],172:[function(e,t,n){var r=e("./_has"),i=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":135,"./_shared-key":195,"./_to-object":212}],173:[function(e,t,n){var a=e("./_has"),s=e("./_to-iobject"),l=e("./_array-includes")(!1),u=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,r=s(e),i=0,o=[];for(n in r)n!=u&&a(r,n)&&o.push(n);for(;t.length>i;)a(r,n=t[i++])&&(~l(o,n)||o.push(n));return o}},{"./_array-includes":104,"./_has":135,"./_shared-key":195,"./_to-iobject":210}],174:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,i)}},{"./_enum-bug-keys":124,"./_object-keys-internal":173}],175:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],176:[function(e,t,n){var i=e("./_export"),o=e("./_core"),a=e("./_fails");t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},{"./_core":116,"./_export":126,"./_fails":128}],177:[function(e,t,n){var l=e("./_descriptors"),u=e("./_object-keys"),c=e("./_to-iobject"),h=e("./_object-pie").f;t.exports=function(s){return function(e){for(var t,n=c(e),r=u(n),i=r.length,o=0,a=[];o<i;)t=r[o++],l&&!h.call(n,t)||a.push(s?[t,n[t]]:n[t]);return a}}},{"./_descriptors":122,"./_object-keys":174,"./_object-pie":175,"./_to-iobject":210}],178:[function(e,t,n){var r=e("./_object-gopn"),i=e("./_object-gops"),o=e("./_an-object"),a=e("./_global").Reflect;t.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},{"./_an-object":100,"./_global":134,"./_object-gopn":170,"./_object-gops":171}],179:[function(e,t,n){var r=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/r(e("./_string-ws")+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},{"./_global":134,"./_string-trim":204,"./_string-ws":205}],180:[function(e,t,n){var r=e("./_global").parseInt,i=e("./_string-trim").trim,o=e("./_string-ws"),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},{"./_global":134,"./_string-trim":204,"./_string-ws":205}],181:[function(e,t,n){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],182:[function(e,t,n){var r=e("./_an-object"),i=e("./_is-object"),o=e("./_new-promise-capability");t.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},{"./_an-object":100,"./_is-object":145,"./_new-promise-capability":162}],183:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],184:[function(e,t,n){var i=e("./_redefine");t.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},{"./_redefine":185}],185:[function(e,t,n){var o=e("./_global"),a=e("./_hide"),s=e("./_has"),l=e("./_uid")("src"),r=e("./_function-to-string"),u=(""+r).split("toString");e("./_core").inspectSource=function(e){return r.call(e)},(t.exports=function(e,t,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",t)),e[t]!==n&&(i&&(s(n,l)||a(n,l,e[t]?""+e[t]:u.join(String(t)))),e===o?e[t]=n:r?e[t]?e[t]=n:a(e,t,n):(delete e[t],a(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[l]||r.call(this)})},{"./_core":116,"./_function-to-string":133,"./_global":134,"./_has":135,"./_hide":136,"./_uid":217}],186:[function(e,t,n){"use strict";var i=e("./_classof"),o=RegExp.prototype.exec;t.exports=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},{"./_classof":110}],187:[function(e,t,n){"use strict";var r,i,o=e("./_flags"),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,u="lastIndex",c=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r[u]||0!==i[u]),h=void 0!==/()??/.exec("")[1];(c||h)&&(l=function(e){var t,n,r,i;return h&&(n=new RegExp("^"+this.source+"$(?!\\s)",o.call(this))),c&&(t=this[u]),r=a.call(this,e),c&&r&&(this[u]=this.global?r.index+r[0].length:t),h&&r&&1<r.length&&s.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=l},{"./_flags":130}],188:[function(e,t,n){t.exports=function(t,n){var r=n===Object(n)?function(e){return n[e]}:n;return function(e){return String(e).replace(t,r)}}},{}],189:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],190:[function(e,t,n){"use strict";var r=e("./_export"),a=e("./_a-function"),s=e("./_ctx"),l=e("./_for-of");t.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,i,o=arguments[1];return a(this),(t=void 0!==o)&&a(o),null==e?new this:(n=[],t?(r=0,i=s(o,arguments[2],2),l(e,!1,function(e){n.push(i(e,r++))})):l(e,!1,n.push,n),new this(n))}})}},{"./_a-function":95,"./_ctx":118,"./_export":126,"./_for-of":132}],191:[function(e,t,n){"use strict";var r=e("./_export");t.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":126}],192:[function(t,e,n){var r=t("./_is-object"),i=t("./_an-object"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,r){try{(r=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,t){return o(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:o}},{"./_an-object":100,"./_ctx":118,"./_is-object":145,"./_object-gopd":168}],193:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_object-dp"),o=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_descriptors":122,"./_global":134,"./_object-dp":165,"./_wks":222}],194:[function(e,t,n){var r=e("./_object-dp").f,i=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},{"./_has":135,"./_object-dp":165,"./_wks":222}],195:[function(e,t,n){var r=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return r[e]||(r[e]=i(e))}},{"./_shared":196,"./_uid":217}],196:[function(e,t,n){var r=e("./_core"),i=e("./_global"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:e("./_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":116,"./_global":134,"./_library":153}],197:[function(e,t,n){var i=e("./_an-object"),o=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||null==(n=i(r)[a])?t:o(n)}},{"./_a-function":95,"./_an-object":100,"./_wks":222}],198:[function(e,t,n){"use strict";var r=e("./_fails");t.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":128}],199:[function(e,t,n){var l=e("./_to-integer"),u=e("./_defined");t.exports=function(s){return function(e,t){var n,r,i=String(u(e)),o=l(t),a=i.length;return o<0||a<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?s?i.charAt(o):n:s?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}},{"./_defined":121,"./_to-integer":209}],200:[function(e,t,n){var r=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},{"./_defined":121,"./_is-regexp":146}],201:[function(e,t,n){var r=e("./_export"),i=e("./_fails"),a=e("./_defined"),s=/"/g,o=function(e,t,n,r){var i=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+i+"</"+t+">"};t.exports=function(t,e){var n={};n[t]=e(o),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",n)}},{"./_defined":121,"./_export":126,"./_fails":128}],202:[function(e,t,n){var c=e("./_to-length"),h=e("./_string-repeat"),f=e("./_defined");t.exports=function(e,t,n,r){var i=String(f(e)),o=i.length,a=void 0===n?" ":String(n),s=c(t);if(s<=o||""==a)return i;var l=s-o,u=h.call(a,Math.ceil(l/a.length));return u.length>l&&(u=u.slice(0,l)),r?u+i:i+u}},{"./_defined":121,"./_string-repeat":203,"./_to-length":211}],203:[function(e,t,n){"use strict";var i=e("./_to-integer"),o=e("./_defined");t.exports=function(e){var t=String(o(this)),n="",r=i(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},{"./_defined":121,"./_to-integer":209}],204:[function(e,t,n){var a=e("./_export"),r=e("./_defined"),s=e("./_fails"),l=e("./_string-ws"),i="["+l+"]",o=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),c=function(e,t,n){var r={},i=s(function(){return!!l[e]()||"​"!="​"[e]()}),o=r[e]=i?t(h):l[e];n&&(r[n]=o),a(a.P+a.F*i,"String",r)},h=c.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(o,"")),2&t&&(e=e.replace(u,"")),e};t.exports=c},{"./_defined":121,"./_export":126,"./_fails":128,"./_string-ws":205}],205:[function(e,t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],206:[function(e,t,n){var r,i,o,a=e("./_ctx"),s=e("./_invoke"),l=e("./_html"),u=e("./_dom-create"),c=e("./_global"),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,g=0,y={},_="onreadystatechange",v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){v.call(e.data)};f&&d||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},d=function(e){delete y[e]},"process"==e("./_cof")(h)?r=function(e){h.nextTick(a(v,e,1))}:m&&m.now?r=function(e){m.now(a(v,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r=_ in u("script")?function(e){l.appendChild(u("script"))[_]=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),t.exports={set:f,clear:d}},{"./_cof":111,"./_ctx":118,"./_dom-create":123,"./_global":134,"./_html":137,"./_invoke":140}],207:[function(e,t,n){var r=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},{"./_to-integer":209}],208:[function(e,t,n){var r=e("./_to-integer"),i=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},{"./_to-integer":209,"./_to-length":211}],209:[function(e,t,n){var r=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?i:r)(e)}},{}],210:[function(e,t,n){var r=e("./_iobject"),i=e("./_defined");t.exports=function(e){return r(i(e))}},{"./_defined":121,"./_iobject":141}],211:[function(e,t,n){var r=e("./_to-integer"),i=Math.min;t.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},{"./_to-integer":209}],212:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":121}],213:[function(e,t,n){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":145}],214:[function(e,t,n){"use strict";if(e("./_descriptors")){var y=e("./_library"),_=e("./_global"),v=e("./_fails"),b=e("./_export"),w=e("./_typed"),r=e("./_typed-buffer"),f=e("./_ctx"),x=e("./_an-instance"),i=e("./_property-desc"),k=e("./_hide"),o=e("./_redefine-all"),a=e("./_to-integer"),L=e("./_to-length"),C=e("./_to-index"),s=e("./_to-absolute-index"),l=e("./_to-primitive"),u=e("./_has"),S=e("./_classof"),M=e("./_is-object"),d=e("./_to-object"),p=e("./_is-array-iter"),P=e("./_object-create"),E=e("./_object-gpo"),T=e("./_object-gopn").f,m=e("./core.get-iterator-method"),c=e("./_uid"),h=e("./_wks"),g=e("./_array-methods"),I=e("./_array-includes"),O=e("./_species-constructor"),D=e("./es6.array.iterator"),N=e("./_iterators"),A=e("./_iter-detect"),j=e("./_set-species"),R=e("./_array-fill"),B=e("./_array-copy-within"),F=e("./_object-dp"),z=e("./_object-gopd"),q=F.f,U=z.f,G=_.RangeError,$=_.TypeError,V=_.Uint8Array,H="ArrayBuffer",W="Shared"+H,Q="BYTES_PER_ELEMENT",K="prototype",Z=Array[K],J=r.ArrayBuffer,X=r.DataView,Y=g(0),ee=g(2),te=g(3),ne=g(4),re=g(5),ie=g(6),oe=I(!0),ae=I(!1),se=D.values,le=D.keys,ue=D.entries,ce=Z.lastIndexOf,he=Z.reduce,fe=Z.reduceRight,de=Z.join,pe=Z.sort,me=Z.slice,ge=Z.toString,ye=Z.toLocaleString,_e=h("iterator"),ve=h("toStringTag"),be=c("typed_constructor"),we=c("def_constructor"),xe=w.CONSTR,ke=w.TYPED,Le=w.VIEW,Ce="Wrong length!",Se=g(1,function(e,t){return Ie(O(e,e[we]),t)}),Me=v(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Pe=!!V&&!!V[K].set&&v(function(){new V(1).set({})}),Ee=function(e,t){var n=a(e);if(n<0||n%t)throw G("Wrong offset!");return n},Te=function(e){if(M(e)&&ke in e)return e;throw $(e+" is not a typed array!")},Ie=function(e,t){if(!(M(e)&&be in e))throw $("It is not a typed array constructor!");return new e(t)},Oe=function(e,t){return De(O(e,e[we]),t)},De=function(e,t){for(var n=0,r=t.length,i=Ie(e,r);n<r;)i[n]=t[n++];return i},Ne=function(e,t,n){q(e,t,{get:function(){return this._d[n]}})},Ae=function(e){var t,n,r,i,o,a,s=d(e),l=arguments.length,u=1<l?arguments[1]:void 0,c=void 0!==u,h=m(s);if(null!=h&&!p(h)){for(a=h.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(c&&2<l&&(u=f(u,arguments[2],2)),t=0,n=L(s.length),i=Ie(this,n);t<n;t++)i[t]=c?u(s[t],t):s[t];return i},je=function(){for(var e=0,t=arguments.length,n=Ie(this,t);e<t;)n[e]=arguments[e++];return n},Re=!!V&&v(function(){ye.call(new V(1))}),Be=function(){return ye.apply(Re?me.call(Te(this)):Te(this),arguments)},Fe={copyWithin:function(e,t){return B.call(Te(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return ne(Te(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return R.apply(Te(this),arguments)},filter:function(e){return Oe(this,ee(Te(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return re(Te(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ie(Te(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){Y(Te(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return ae(Te(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return oe(Te(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return de.apply(Te(this),arguments)},lastIndexOf:function(e){return ce.apply(Te(this),arguments)},map:function(e){return Se(Te(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return he.apply(Te(this),arguments)},reduceRight:function(e){return fe.apply(Te(this),arguments)},reverse:function(){for(var e,t=Te(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return te(Te(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return pe.call(Te(this),e)},subarray:function(e,t){var n=Te(this),r=n.length,i=s(e,r);return new(O(n,n[we]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,L((void 0===t?r:s(t,r))-i))}},ze=function(e,t){return Oe(this,me.call(Te(this),e,t))},qe=function(e){Te(this);var t=Ee(arguments[1],1),n=this.length,r=d(e),i=L(r.length),o=0;if(n<i+t)throw G(Ce);for(;o<i;)this[t+o]=r[o++]},Ue={entries:function(){return ue.call(Te(this))},keys:function(){return le.call(Te(this))},values:function(){return se.call(Te(this))}},Ge=function(e,t){return M(e)&&e[ke]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},$e=function(e,t){return Ge(e,t=l(t,!0))?i(2,e[t]):U(e,t)},Ve=function(e,t,n){return!(Ge(e,t=l(t,!0))&&M(n)&&u(n,"value"))||u(n,"get")||u(n,"set")||n.configurable||u(n,"writable")&&!n.writable||u(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};xe||(z.f=$e,F.f=Ve),b(b.S+b.F*!xe,"Object",{getOwnPropertyDescriptor:$e,defineProperty:Ve}),v(function(){ge.call({})})&&(ge=ye=function(){return de.call(this)});var He=o({},Fe);o(He,Ue),k(He,_e,Ue.values),o(He,{slice:ze,set:qe,constructor:function(){},toString:ge,toLocaleString:Be}),Ne(He,"buffer","b"),Ne(He,"byteOffset","o"),Ne(He,"byteLength","l"),Ne(He,"length","e"),q(He,ve,{get:function(){return this[ke]}}),t.exports=function(e,h,t,o){var f=e+((o=!!o)?"Clamped":"")+"Array",n="get"+e,a="set"+e,d=_[f],s=d||{},r=d&&E(d),i=!d||!w.ABV,l={},u=d&&d[K],p=function(e,i){q(e,i,{get:function(){return e=i,(t=this._d).v[n](e*h+t.o,Me);var e,t},set:function(e){return t=i,n=e,r=this._d,o&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),void r.v[a](t*h+r.o,n,Me);var t,n,r},enumerable:!0})};i?(d=t(function(e,t,n,r){x(e,d,f,"_d");var i,o,a,s,l=0,u=0;if(M(t)){if(!(t instanceof J||(s=S(t))==H||s==W))return ke in t?De(d,t):Ae.call(d,t);i=t,u=Ee(n,h);var c=t.byteLength;if(void 0===r){if(c%h)throw G(Ce);if((o=c-u)<0)throw G(Ce)}else if(c<(o=L(r)*h)+u)throw G(Ce);a=o/h}else a=C(t),i=new J(o=a*h);for(k(e,"_d",{b:i,o:u,l:o,e:a,v:new X(i)});l<a;)p(e,l++)}),u=d[K]=P(He),k(u,"constructor",d)):v(function(){d(1)})&&v(function(){new d(-1)})&&A(function(e){new d,new d(null),new d(1.5),new d(e)},!0)||(d=t(function(e,t,n,r){var i;return x(e,d,f),M(t)?t instanceof J||(i=S(t))==H||i==W?void 0!==r?new s(t,Ee(n,h),r):void 0!==n?new s(t,Ee(n,h)):new s(t):ke in t?De(d,t):Ae.call(d,t):new s(C(t))}),Y(r!==Function.prototype?T(s).concat(T(r)):T(s),function(e){e in d||k(d,e,s[e])}),d[K]=u,y||(u.constructor=d));var c=u[_e],m=!!c&&("values"==c.name||null==c.name),g=Ue.values;k(d,be,!0),k(u,ke,f),k(u,Le,!0),k(u,we,d),(o?new d(1)[ve]==f:ve in u)||q(u,ve,{get:function(){return f}}),l[f]=d,b(b.G+b.W+b.F*(d!=s),l),b(b.S,f,{BYTES_PER_ELEMENT:h}),b(b.S+b.F*v(function(){s.of.call(d,1)}),f,{from:Ae,of:je}),Q in u||k(u,Q,h),b(b.P,f,Fe),j(f),b(b.P+b.F*Pe,f,{set:qe}),b(b.P+b.F*!m,f,Ue),y||u.toString==ge||(u.toString=ge),b(b.P+b.F*v(function(){new d(1).slice()}),f,{slice:ze}),b(b.P+b.F*(v(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!v(function(){u.toLocaleString.call([1,2])})),f,{toLocaleString:Be}),N[f]=m?c:g,y||m||k(u,_e,g)}}else t.exports=function(){}},{"./_an-instance":99,"./_array-copy-within":101,"./_array-fill":102,"./_array-includes":104,"./_array-methods":105,"./_classof":110,"./_ctx":118,"./_descriptors":122,"./_export":126,"./_fails":128,"./_global":134,"./_has":135,"./_hide":136,"./_is-array-iter":142,"./_is-object":145,"./_iter-detect":150,"./_iterators":152,"./_library":153,"./_object-create":164,"./_object-dp":165,"./_object-gopd":168,"./_object-gopn":170,"./_object-gpo":172,"./_property-desc":183,"./_redefine-all":184,"./_set-species":193,"./_species-constructor":197,"./_to-absolute-index":207,"./_to-index":208,"./_to-integer":209,"./_to-length":211,"./_to-object":212,"./_to-primitive":213,"./_typed":216,"./_typed-buffer":215,"./_uid":217,"./_wks":222,"./core.get-iterator-method":223,"./es6.array.iterator":235}],215:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_descriptors"),o=e("./_library"),a=e("./_typed"),s=e("./_hide"),l=e("./_redefine-all"),u=e("./_fails"),c=e("./_an-instance"),h=e("./_to-integer"),f=e("./_to-length"),d=e("./_to-index"),p=e("./_object-gopn").f,m=e("./_object-dp").f,g=e("./_array-fill"),y=e("./_set-to-string-tag"),_="ArrayBuffer",v="DataView",b="prototype",w="Wrong index!",x=r[_],k=r[v],L=r.Math,C=r.RangeError,S=r.Infinity,M=x,P=L.abs,E=L.pow,T=L.floor,I=L.log,O=L.LN2,D="byteLength",N="byteOffset",A=i?"_b":"buffer",j=i?"_l":D,R=i?"_o":N;function B(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,u=l>>1,c=23===t?E(2,-24)-E(2,-77):0,h=0,f=e<0||0===e&&1/e<0?1:0;for((e=P(e))!=e||e===S?(i=e!=e?1:0,r=l):(r=T(I(e)/O),e*(o=E(2,-r))<1&&(r--,o*=2),2<=(e+=1<=r+u?c/o:c*E(2,1-u))*o&&(r++,o/=2),l<=r+u?(i=0,r=l):1<=r+u?(i=(e*o-1)*E(2,t),r+=u):(i=e*E(2,u-1)*E(2,t),r=0));8<=t;a[h++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;0<s;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function F(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;0<s;c=256*c+e[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;0<s;r=256*r+e[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-S:S;r+=E(2,t),c-=a}return(u?-1:1)*r*E(2,c-t)}function z(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function q(e){return[255&e]}function U(e){return[255&e,e>>8&255]}function G(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function $(e){return B(e,52,8)}function V(e){return B(e,23,4)}function H(e,t,n){m(e[b],t,{get:function(){return this[n]}})}function W(e,t,n,r){var i=d(+n);if(i+t>e[j])throw C(w);var o=e[A]._b,a=i+e[R],s=o.slice(a,a+t);return r?s:s.reverse()}function Q(e,t,n,r,i,o){var a=d(+n);if(a+t>e[j])throw C(w);for(var s=e[A]._b,l=a+e[R],u=r(+i),c=0;c<t;c++)s[l+c]=u[o?c:t-c-1]}if(a.ABV){if(!u(function(){x(1)})||!u(function(){new x(-1)})||u(function(){return new x,new x(1.5),new x(NaN),x.name!=_})){for(var K,Z=(x=function(e){return c(this,x),new M(d(e))})[b]=M[b],J=p(M),X=0;J.length>X;)(K=J[X++])in x||s(x,K,M[K]);o||(Z.constructor=x)}var Y=new k(new x(2)),ee=k[b].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||l(k[b],{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else x=function(e){c(this,x,_);var t=d(e);this._b=g.call(new Array(t),0),this[j]=t},k=function(e,t,n){c(this,k,v),c(e,x,v);var r=e[j],i=h(t);if(i<0||r<i)throw C("Wrong offset!");if(r<i+(n=void 0===n?r-i:f(n)))throw C("Wrong length!");this[A]=e,this[R]=i,this[j]=n},i&&(H(x,D,"_l"),H(k,"buffer","_b"),H(k,D,"_l"),H(k,N,"_o")),l(k[b],{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return z(W(this,4,e,arguments[1]))},getUint32:function(e){return z(W(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return F(W(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return F(W(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){Q(this,1,e,q,t)},setUint8:function(e,t){Q(this,1,e,q,t)},setInt16:function(e,t){Q(this,2,e,U,t,arguments[2])},setUint16:function(e,t){Q(this,2,e,U,t,arguments[2])},setInt32:function(e,t){Q(this,4,e,G,t,arguments[2])},setUint32:function(e,t){Q(this,4,e,G,t,arguments[2])},setFloat32:function(e,t){Q(this,4,e,V,t,arguments[2])},setFloat64:function(e,t){Q(this,8,e,$,t,arguments[2])}});y(x,_),y(k,v),s(k[b],a.VIEW,!0),n[_]=x,n[v]=k},{"./_an-instance":99,"./_array-fill":102,"./_descriptors":122,"./_fails":128,"./_global":134,"./_hide":136,"./_library":153,"./_object-dp":165,"./_object-gopn":170,"./_redefine-all":184,"./_set-to-string-tag":194,"./_to-index":208,"./_to-integer":209,"./_to-length":211,"./_typed":216}],216:[function(e,t,n){for(var r,i=e("./_global"),o=e("./_hide"),a=e("./_uid"),s=a("typed_array"),l=a("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,l,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},{"./_global":134,"./_hide":136,"./_uid":217}],217:[function(e,t,n){var r=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+i).toString(36))}},{}],218:[function(e,t,n){var r=e("./_global").navigator;t.exports=r&&r.userAgent||""},{"./_global":134}],219:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":145}],220:[function(e,t,n){var r=e("./_global"),i=e("./_core"),o=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":116,"./_global":134,"./_library":153,"./_object-dp":165,"./_wks-ext":221}],221:[function(e,t,n){n.f=e("./_wks")},{"./_wks":222}],222:[function(e,t,n){var r=e("./_shared")("wks"),i=e("./_uid"),o=e("./_global").Symbol,a="function"==typeof o;(t.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},{"./_global":134,"./_shared":196,"./_uid":217}],223:[function(e,t,n){var r=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},{"./_classof":110,"./_core":116,"./_iterators":152,"./_wks":222}],224:[function(e,t,n){var r=e("./_export"),i=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},{"./_export":126,"./_replacer":188}],225:[function(e,t,n){var r=e("./_export");r(r.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":97,"./_array-copy-within":101,"./_export":126}],226:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(4);r(r.P+r.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":105,"./_export":126,"./_strict-method":198}],227:[function(e,t,n){var r=e("./_export");r(r.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":97,"./_array-fill":102,"./_export":126}],228:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(2);r(r.P+r.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":105,"./_export":126,"./_strict-method":198}],229:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")(o)},{"./_add-to-unscopables":97,"./_array-methods":105,"./_export":126}],230:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":97,"./_array-methods":105,"./_export":126}],231:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(0),o=e("./_strict-method")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":105,"./_export":126,"./_strict-method":198}],232:[function(e,t,n){"use strict";var f=e("./_ctx"),r=e("./_export"),d=e("./_to-object"),p=e("./_iter-call"),m=e("./_is-array-iter"),g=e("./_to-length"),y=e("./_create-property"),_=e("./core.get-iterator-method");r(r.S+r.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,i,o=d(e),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,u=void 0!==l,c=0,h=_(o);if(u&&(l=f(l,2<s?arguments[2]:void 0,2)),null==h||a==Array&&m(h))for(n=new a(t=g(o.length));c<t;c++)y(n,c,u?l(o[c],c):o[c]);else for(i=h.call(o),n=new a;!(r=i.next()).done;c++)y(n,c,u?p(i,l,[r.value,c],!0):r.value);return n.length=c,n}})},{"./_create-property":117,"./_ctx":118,"./_export":126,"./_is-array-iter":142,"./_iter-call":147,"./_iter-detect":150,"./_to-length":211,"./_to-object":212,"./core.get-iterator-method":223}],233:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-includes")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!e("./_strict-method")(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},{"./_array-includes":104,"./_export":126,"./_strict-method":198}],234:[function(e,t,n){var r=e("./_export");r(r.S,"Array",{isArray:e("./_is-array")})},{"./_export":126,"./_is-array":143}],235:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),i=e("./_iter-step"),o=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":97,"./_iter-define":149,"./_iter-step":151,"./_iterators":152,"./_to-iobject":210}],236:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-iobject"),o=[].join;r(r.P+r.F*(e("./_iobject")!=Object||!e("./_strict-method")(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},{"./_export":126,"./_iobject":141,"./_strict-method":198,"./_to-iobject":210}],237:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-iobject"),o=e("./_to-integer"),a=e("./_to-length"),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!e("./_strict-method")(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(1<arguments.length&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}})},{"./_export":126,"./_strict-method":198,"./_to-integer":209,"./_to-iobject":210,"./_to-length":211}],238:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(1);r(r.P+r.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":105,"./_export":126,"./_strict-method":198}],239:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_create-property");r(r.S+r.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);e<t;)i(n,e,arguments[e++]);return n.length=t,n}})},{"./_create-property":117,"./_export":126,"./_fails":128}],240:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-reduce");r(r.P+r.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":106,"./_export":126,"./_strict-method":198}],241:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-reduce");r(r.P+r.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":106,"./_export":126,"./_strict-method":198}],242:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_html"),u=e("./_cof"),c=e("./_to-absolute-index"),h=e("./_to-length"),f=[].slice;r(r.P+r.F*e("./_fails")(function(){i&&f.call(i)}),"Array",{slice:function(e,t){var n=h(this.length),r=u(this);if(t=void 0===t?n:t,"Array"==r)return f.call(this,e,t);for(var i=c(e,n),o=c(t,n),a=h(o-i),s=new Array(a),l=0;l<a;l++)s[l]="String"==r?this.charAt(i+l):this[i+l];return s}})},{"./_cof":111,"./_export":126,"./_fails":128,"./_html":137,"./_to-absolute-index":207,"./_to-length":211}],243:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-methods")(3);r(r.P+r.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":105,"./_export":126,"./_strict-method":198}],244:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_a-function"),o=e("./_to-object"),a=e("./_fails"),s=[].sort,l=[1,2,3];r(r.P+r.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!e("./_strict-method")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},{"./_a-function":95,"./_export":126,"./_fails":128,"./_strict-method":198,"./_to-object":212}],245:[function(e,t,n){e("./_set-species")("Array")},{"./_set-species":193}],246:[function(e,t,n){var r=e("./_export");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":126}],247:[function(e,t,n){var r=e("./_export"),i=e("./_date-to-iso-string");r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},{"./_date-to-iso-string":119,"./_export":126}],248:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive");r(r.P+r.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},{"./_export":126,"./_fails":128,"./_to-object":212,"./_to-primitive":213}],249:[function(e,t,n){var r=e("./_wks")("toPrimitive"),i=Date.prototype;r in i||e("./_hide")(i,r,e("./_date-to-primitive"))},{"./_date-to-primitive":120,"./_hide":136,"./_wks":222}],250:[function(e,t,n){var r=Date.prototype,i="Invalid Date",o=r.toString,a=r.getTime;new Date(NaN)+""!=i&&e("./_redefine")(r,"toString",function(){var e=a.call(this);return e==e?o.call(this):i})},{"./_redefine":185}],251:[function(e,t,n){var r=e("./_export");r(r.P,"Function",{bind:e("./_bind")})},{"./_bind":109,"./_export":126}],252:[function(e,t,n){"use strict";var r=e("./_is-object"),i=e("./_object-gpo"),o=e("./_wks")("hasInstance"),a=Function.prototype;o in a||e("./_object-dp").f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":145,"./_object-dp":165,"./_object-gpo":172,"./_wks":222}],253:[function(e,t,n){var r=e("./_object-dp").f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||e("./_descriptors")&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},{"./_descriptors":122,"./_object-dp":165}],254:[function(e,t,n){"use strict";var r=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},{"./_collection":115,"./_collection-strong":112,"./_validate-collection":219}],255:[function(e,t,n){var r=e("./_export"),i=e("./_math-log1p"),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},{"./_export":126,"./_math-log1p":156}],256:[function(e,t,n){var r=e("./_export"),i=Math.asinh;r(r.S+r.F*!(i&&0<1/i(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{"./_export":126}],257:[function(e,t,n){var r=e("./_export"),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":126}],258:[function(e,t,n){var r=e("./_export"),i=e("./_math-sign");r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":126,"./_math-sign":158}],259:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":126}],260:[function(e,t,n){var r=e("./_export"),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},{"./_export":126}],261:[function(e,t,n){var r=e("./_export"),i=e("./_math-expm1");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":126,"./_math-expm1":154}],262:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{fround:e("./_math-fround")})},{"./_export":126,"./_math-fround":155}],263:[function(e,t,n){var r=e("./_export"),l=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=l(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=0<n?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}})},{"./_export":126}],264:[function(e,t,n){var r=e("./_export"),i=Math.imul;r(r.S+r.F*e("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},{"./_export":126,"./_fails":128}],265:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":126}],266:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":126,"./_math-log1p":156}],267:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":126}],268:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{sign:e("./_math-sign")})},{"./_export":126,"./_math-sign":158}],269:[function(e,t,n){var r=e("./_export"),i=e("./_math-expm1"),o=Math.exp;r(r.S+r.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},{"./_export":126,"./_fails":128,"./_math-expm1":154}],270:[function(e,t,n){var r=e("./_export"),i=e("./_math-expm1"),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},{"./_export":126,"./_math-expm1":154}],271:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},{"./_export":126}],272:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_has"),o=e("./_cof"),a=e("./_inherit-if-required"),c=e("./_to-primitive"),s=e("./_fails"),l=e("./_object-gopn").f,u=e("./_object-gopd").f,h=e("./_object-dp").f,f=e("./_string-trim").trim,d="Number",p=r[d],m=p,g=p.prototype,y=o(e("./_object-create")(g))==d,_="trim"in String.prototype,v=function(e){var t=c(e,!1);if("string"==typeof t&&2<t.length){var n,r,i,o=(t=_?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,s=t.slice(2),l=0,u=s.length;l<u;l++)if((a=s.charCodeAt(l))<48||i<a)return NaN;return parseInt(s,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(y?s(function(){g.valueOf.call(n)}):o(n)!=d)?a(new m(v(t)),n,p):v(t)};for(var b,w=e("./_descriptors")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)i(m,b=w[x])&&!i(p,b)&&h(p,b,u(m,b));(p.prototype=g).constructor=p,e("./_redefine")(r,d,p)}},{"./_cof":111,"./_descriptors":122,"./_fails":128,"./_global":134,"./_has":135,"./_inherit-if-required":139,"./_object-create":164,"./_object-dp":165,"./_object-gopd":168,"./_object-gopn":170,"./_redefine":185,"./_string-trim":204,"./_to-primitive":213}],273:[function(e,t,n){var r=e("./_export");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":126}],274:[function(e,t,n){var r=e("./_export"),i=e("./_global").isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},{"./_export":126,"./_global":134}],275:[function(e,t,n){var r=e("./_export");r(r.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":126,"./_is-integer":144}],276:[function(e,t,n){var r=e("./_export");r(r.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":126}],277:[function(e,t,n){var r=e("./_export"),i=e("./_is-integer"),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},{"./_export":126,"./_is-integer":144}],278:[function(e,t,n){var r=e("./_export");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":126}],279:[function(e,t,n){var r=e("./_export");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":126}],280:[function(e,t,n){var r=e("./_export"),i=e("./_parse-float");r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":126,"./_parse-float":179}],281:[function(e,t,n){var r=e("./_export"),i=e("./_parse-int");r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":126,"./_parse-int":180}],282:[function(e,t,n){"use strict";var r=e("./_export"),u=e("./_to-integer"),c=e("./_a-number-value"),h=e("./_string-repeat"),i=1..toFixed,o=Math.floor,a=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*a[n],a[n]=r%1e7,r=o(r/1e7)},p=function(e){for(var t=6,n=0;0<=--t;)n+=a[t],a[t]=o(n/e),n=n%e*1e7},m=function(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==a[e]){var n=String(a[e]);t=""===t?n:t+h.call("0",7-n.length)+n}return t},g=function(e,t,n){return 0===t?n:t%2==1?g(e,t-1,n*e):g(e*e,t/2,n)};r(r.P+r.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e("./_fails")(function(){i.call({})})),"Number",{toFixed:function(e){var t,n,r,i,o=c(this,f),a=u(e),s="",l="0";if(a<0||20<a)throw RangeError(f);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(s="-",o=-o),1e-21<o)if(n=(t=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(o*g(2,69,1))-69)<0?o*g(2,-t,1):o/g(2,t,1),n*=4503599627370496,0<(t=52-t)){for(d(0,n),r=a;7<=r;)d(1e7,0),r-=7;for(d(g(10,r,1),0),r=t-1;23<=r;)p(1<<23),r-=23;p(1<<r),d(1,1),p(2),l=m()}else d(0,n),d(1<<-t,0),l=m()+h.call("0",a);return l=0<a?s+((i=l.length)<=a?"0."+h.call("0",a-i)+l:l.slice(0,i-a)+"."+l.slice(i-a)):s+l}})},{"./_a-number-value":96,"./_export":126,"./_fails":128,"./_string-repeat":203,"./_to-integer":209}],283:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_fails"),o=e("./_a-number-value"),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},{"./_a-number-value":96,"./_export":126,"./_fails":128}],284:[function(e,t,n){var r=e("./_export");r(r.S+r.F,"Object",{assign:e("./_object-assign")})},{"./_export":126,"./_object-assign":163}],285:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":126,"./_object-create":164}],286:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":122,"./_export":126,"./_object-dps":166}],287:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":122,"./_export":126,"./_object-dp":165}],288:[function(e,t,n){var r=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},{"./_is-object":145,"./_meta":159,"./_object-sap":176}],289:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},{"./_object-gopd":168,"./_object-sap":176,"./_to-iobject":210}],290:[function(e,t,n){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":169,"./_object-sap":176}],291:[function(e,t,n){var r=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(r(e))}})},{"./_object-gpo":172,"./_object-sap":176,"./_to-object":212}],292:[function(e,t,n){var r=e("./_is-object");e("./_object-sap")("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},{"./_is-object":145,"./_object-sap":176}],293:[function(e,t,n){var r=e("./_is-object");e("./_object-sap")("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},{"./_is-object":145,"./_object-sap":176}],294:[function(e,t,n){var r=e("./_is-object");e("./_object-sap")("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},{"./_is-object":145,"./_object-sap":176}],295:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{is:e("./_same-value")})},{"./_export":126,"./_same-value":189}],296:[function(e,t,n){var r=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(r(e))}})},{"./_object-keys":174,"./_object-sap":176,"./_to-object":212}],297:[function(e,t,n){var r=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},{"./_is-object":145,"./_meta":159,"./_object-sap":176}],298:[function(e,t,n){var r=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},{"./_is-object":145,"./_meta":159,"./_object-sap":176}],299:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":126,"./_set-proto":192}],300:[function(e,t,n){"use strict";var r=e("./_classof"),i={};i[e("./_wks")("toStringTag")]="z",i+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},{"./_classof":110,"./_redefine":185,"./_wks":222}],301:[function(e,t,n){var r=e("./_export"),i=e("./_parse-float");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},{"./_export":126,"./_parse-float":179}],302:[function(e,t,n){var r=e("./_export"),i=e("./_parse-int");r(r.G+r.F*(parseInt!=i),{parseInt:i})},{"./_export":126,"./_parse-int":180}],303:[function(n,e,t){"use strict";var r,i,o,a,s=n("./_library"),l=n("./_global"),u=n("./_ctx"),c=n("./_classof"),h=n("./_export"),f=n("./_is-object"),d=n("./_a-function"),p=n("./_an-instance"),m=n("./_for-of"),g=n("./_species-constructor"),y=n("./_task").set,_=n("./_microtask")(),v=n("./_new-promise-capability"),b=n("./_perform"),w=n("./_user-agent"),x=n("./_promise-resolve"),k="Promise",L=l.TypeError,C=l.process,S=C&&C.versions,M=S&&S.v8||"",P=l[k],E="process"==c(C),T=function(){},I=i=v.f,O=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n("./_wks")("species")]=function(e){e(T,T)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t&&0!==M.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},N=function(c,n){if(!c._n){c._n=!0;var r=c._c;_(function(){for(var l=c._v,u=1==c._s,e=0,t=function(e){var t,n,r,i=u?e.ok:e.fail,o=e.resolve,a=e.reject,s=e.domain;try{i?(u||(2==c._h&&R(c),c._h=1),!0===i?t=l:(s&&s.enter(),t=i(l),s&&(s.exit(),r=!0)),t===e.promise?a(L("Promise-chain cycle")):(n=D(t))?n.call(t,o,a):o(t)):a(l)}catch(e){s&&!r&&s.exit(),a(e)}};r.length>e;)t(r[e++]);c._c=[],c._n=!1,n&&!c._h&&A(c)})}},A=function(o){y.call(l,function(){var e,t,n,r=o._v,i=j(o);if(i&&(e=b(function(){E?C.emit("unhandledRejection",r,o):(t=l.onunhandledrejection)?t({promise:o,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=E||j(o)?2:1),o._a=void 0,i&&e.e)throw e.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(t){y.call(l,function(){var e;E?C.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},F=function(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw L("Promise can't be resolved itself");(n=D(e))?_(function(){var t={_w:r,_d:!1};try{n.call(e,u(F,t,1),u(B,t,1))}catch(e){B.call(t,e)}}):(r._v=e,r._s=1,N(r,!1))}catch(e){B.call({_w:r,_d:!1},e)}}};O||(P=function(e){p(this,P,k,"_h"),d(e),r.call(this);try{e(u(F,this,1),u(B,this,1))}catch(e){B.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("./_redefine-all")(P.prototype,{then:function(e,t){var n=I(g(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(F,e,1),this.reject=u(B,e,1)},v.f=I=function(e){return e===P||e===a?new o(e):i(e)}),h(h.G+h.W+h.F*!O,{Promise:P}),n("./_set-to-string-tag")(P,k),n("./_set-species")(k),a=n("./_core")[k],h(h.S+h.F*!O,k,{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!O),k,{resolve:function(e){return x(s&&this===a?P:this,e)}}),h(h.S+h.F*!(O&&n("./_iter-detect")(function(e){P.all(e).catch(T)})),k,{all:function(e){var a=this,t=I(a),s=t.resolve,l=t.reject,n=b(function(){var r=[],i=0,o=1;m(e,!1,function(e){var t=i++,n=!1;r.push(void 0),o++,a.resolve(e).then(function(e){n||(n=!0,r[t]=e,--o||s(r))},l)}),--o||s(r)});return n.e&&l(n.v),t.promise},race:function(e){var t=this,n=I(t),r=n.reject,i=b(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},{"./_a-function":95,"./_an-instance":99,"./_classof":110,"./_core":116,"./_ctx":118,"./_export":126,"./_for-of":132,"./_global":134,"./_is-object":145,"./_iter-detect":150,"./_library":153,"./_microtask":161,"./_new-promise-capability":162,"./_perform":181,"./_promise-resolve":182,"./_redefine-all":184,"./_set-species":193,"./_set-to-string-tag":194,"./_species-constructor":197,"./_task":206,"./_user-agent":218,"./_wks":222}],304:[function(e,t,n){var r=e("./_export"),o=e("./_a-function"),a=e("./_an-object"),s=(e("./_global").Reflect||{}).apply,l=Function.apply;r(r.S+r.F*!e("./_fails")(function(){s(function(){})}),"Reflect",{apply:function(e,t,n){var r=o(e),i=a(n);return s?s(r,t,i):l.call(r,t,i)}})},{"./_a-function":95,"./_an-object":100,"./_export":126,"./_fails":128,"./_global":134}],305:[function(e,t,n){var r=e("./_export"),s=e("./_object-create"),l=e("./_a-function"),u=e("./_an-object"),c=e("./_is-object"),i=e("./_fails"),h=e("./_bind"),f=(e("./_global").Reflect||{}).construct,d=i(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),p=!i(function(){f(function(){})});r(r.S+r.F*(d||p),"Reflect",{construct:function(e,t){l(e),u(t);var n=arguments.length<3?e:l(arguments[2]);if(p&&!d)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(h.apply(e,r))}var i=n.prototype,o=s(c(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return c(a)?a:o}})},{"./_a-function":95,"./_an-object":100,"./_bind":109,"./_export":126,"./_fails":128,"./_global":134,"./_is-object":145,"./_object-create":164}],306:[function(e,t,n){var r=e("./_object-dp"),i=e("./_export"),o=e("./_an-object"),a=e("./_to-primitive");i(i.S+i.F*e("./_fails")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},{"./_an-object":100,"./_export":126,"./_fails":128,"./_object-dp":165,"./_to-primitive":213}],307:[function(e,t,n){var r=e("./_export"),i=e("./_object-gopd").f,o=e("./_an-object");r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},{"./_an-object":100,"./_export":126,"./_object-gopd":168}],308:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_an-object"),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};e("./_iter-create")(o,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},{"./_an-object":100,"./_export":126,"./_iter-create":148}],309:[function(e,t,n){var r=e("./_object-gopd"),i=e("./_export"),o=e("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},{"./_an-object":100,"./_export":126,"./_object-gopd":168}],310:[function(e,t,n){var r=e("./_export"),i=e("./_object-gpo"),o=e("./_an-object");r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},{"./_an-object":100,"./_export":126,"./_object-gpo":172}],311:[function(e,t,n){var a=e("./_object-gopd"),s=e("./_object-gpo"),l=e("./_has"),r=e("./_export"),u=e("./_is-object"),c=e("./_an-object");r(r.S,"Reflect",{get:function e(t,n){var r,i,o=arguments.length<3?t:arguments[2];return c(t)===o?t[n]:(r=a.f(t,n))?l(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:u(i=s(t))?e(i,n,o):void 0}})},{"./_an-object":100,"./_export":126,"./_has":135,"./_is-object":145,"./_object-gopd":168,"./_object-gpo":172}],312:[function(e,t,n){var r=e("./_export");r(r.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":126}],313:[function(e,t,n){var r=e("./_export"),i=e("./_an-object"),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},{"./_an-object":100,"./_export":126}],314:[function(e,t,n){var r=e("./_export");r(r.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":126,"./_own-keys":178}],315:[function(e,t,n){var r=e("./_export"),i=e("./_an-object"),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},{"./_an-object":100,"./_export":126}],316:[function(e,t,n){var r=e("./_export"),i=e("./_set-proto");i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},{"./_export":126,"./_set-proto":192}],317:[function(e,t,n){var l=e("./_object-dp"),u=e("./_object-gopd"),c=e("./_object-gpo"),h=e("./_has"),r=e("./_export"),f=e("./_property-desc"),d=e("./_an-object"),p=e("./_is-object");r(r.S,"Reflect",{set:function e(t,n,r){var i,o,a=arguments.length<4?t:arguments[3],s=u.f(d(t),n);if(!s){if(p(o=c(t)))return e(o,n,r,a);s=f(0)}if(h(s,"value")){if(!1===s.writable||!p(a))return!1;if(i=u.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,l.f(a,n,i)}else l.f(a,n,f(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}})},{"./_an-object":100,"./_export":126,"./_has":135,"./_is-object":145,"./_object-dp":165,"./_object-gopd":168,"./_object-gpo":172,"./_property-desc":183}],318:[function(e,t,n){var r=e("./_global"),o=e("./_inherit-if-required"),i=e("./_object-dp").f,a=e("./_object-gopn").f,s=e("./_is-regexp"),l=e("./_flags"),u=r.RegExp,c=u,h=u.prototype,f=/a/g,d=/a/g,p=new u(f)!==f;if(e("./_descriptors")&&(!p||e("./_fails")(function(){return d[e("./_wks")("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),i=void 0===t;return!n&&r&&e.constructor===u&&i?e:o(p?new c(r&&!i?e.source:e,t):c((r=e instanceof u)?e.source:e,r&&i?l.call(e):t),n?this:h,u)};for(var m=function(t){t in u||i(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},g=a(c),y=0;g.length>y;)m(g[y++]);(h.constructor=u).prototype=h,e("./_redefine")(r,"RegExp",u)}e("./_set-species")("RegExp")},{"./_descriptors":122,"./_fails":128,"./_flags":130,"./_global":134,"./_inherit-if-required":139,"./_is-regexp":146,"./_object-dp":165,"./_object-gopn":170,"./_redefine":185,"./_set-species":193,"./_wks":222}],319:[function(e,t,n){"use strict";var r=e("./_regexp-exec");e("./_export")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},{"./_export":126,"./_regexp-exec":187}],320:[function(e,t,n){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":122,"./_flags":130,"./_object-dp":165}],321:[function(e,t,n){"use strict";var h=e("./_an-object"),f=e("./_to-length"),d=e("./_advance-string-index"),p=e("./_regexp-exec-abstract");e("./_fix-re-wks")("match",1,function(r,i,u,c){return[function(e){var t=r(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=c(u,e,this);if(t.done)return t.value;var n=h(e),r=String(this);if(!n.global)return p(n,r);for(var i,o=n.unicode,a=[],s=n.lastIndex=0;null!==(i=p(n,r));){var l=String(i[0]);""===(a[s]=l)&&(n.lastIndex=d(r,f(n.lastIndex),o)),s++}return 0===s?null:a}]})},{"./_advance-string-index":98,"./_an-object":100,"./_fix-re-wks":129,"./_regexp-exec-abstract":186,"./_to-length":211}],322:[function(e,t,n){"use strict";var L=e("./_an-object"),r=e("./_to-object"),C=e("./_to-length"),S=e("./_to-integer"),M=e("./_advance-string-index"),P=e("./_regexp-exec-abstract"),E=Math.max,T=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;e("./_fix-re-wks")("replace",2,function(i,o,w,x){return[function(e,t){var n=i(this),r=null==e?void 0:e[o];return void 0!==r?r.call(e,n,t):w.call(String(n),e,t)},function(e,t){var n=x(w,e,this,t);if(n.done)return n.value;var r=L(e),i=String(this),o="function"==typeof t;o||(t=String(t));var a=r.global;if(a){var s=r.unicode;r.lastIndex=0}for(var l=[];;){var u=P(r,i);if(null===u)break;if(l.push(u),!a)break;""===String(u[0])&&(r.lastIndex=M(i,C(r.lastIndex),s))}for(var c,h="",f=0,d=0;d<l.length;d++){u=l[d];for(var p=String(u[0]),m=E(T(S(u.index),i.length),0),g=[],y=1;y<u.length;y++)g.push(void 0===(c=u[y])?c:String(c));var _=u.groups;if(o){var v=[p].concat(g,m,i);void 0!==_&&v.push(_);var b=String(t.apply(void 0,v))}else b=k(p,i,m,g,_,t);f<=m&&(h+=i.slice(f,m)+b,f=m+p.length)}return h+i.slice(f)}];function k(o,a,s,l,u,e){var c=s+o.length,h=l.length,t=p;return void 0!==u&&(u=r(u),t=d),w.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,s);case"'":return a.slice(c);case"<":n=u[t.slice(1,-1)];break;default:var r=+t;if(0===r)return e;if(h<r){var i=f(r/10);return 0===i?e:i<=h?void 0===l[i-1]?t.charAt(1):l[i-1]+t.charAt(1):e}n=l[r-1]}return void 0===n?"":n})}})},{"./_advance-string-index":98,"./_an-object":100,"./_fix-re-wks":129,"./_regexp-exec-abstract":186,"./_to-integer":209,"./_to-length":211,"./_to-object":212}],323:[function(e,t,n){"use strict";var l=e("./_an-object"),u=e("./_same-value"),c=e("./_regexp-exec-abstract");e("./_fix-re-wks")("search",1,function(r,i,a,s){return[function(e){var t=r(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=s(a,e,this);if(t.done)return t.value;var n=l(e),r=String(this),i=n.lastIndex;u(i,0)||(n.lastIndex=0);var o=c(n,r);return u(n.lastIndex,i)||(n.lastIndex=i),null===o?-1:o.index}]})},{"./_an-object":100,"./_fix-re-wks":129,"./_regexp-exec-abstract":186,"./_same-value":189}],324:[function(e,t,n){"use strict";var h=e("./_is-regexp"),v=e("./_an-object"),b=e("./_species-constructor"),w=e("./_advance-string-index"),x=e("./_to-length"),k=e("./_regexp-exec-abstract"),f=e("./_regexp-exec"),r=e("./_fails"),L=Math.min,d=[].push,a="split",p="length",m="lastIndex",C=4294967295,S=!r(function(){RegExp(C,"y")});e("./_fix-re-wks")("split",2,function(i,o,g,y){var _;return _="c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[p]||2!="ab"[a](/(?:ab)*/)[p]||4!="."[a](/(.?)(.?)/)[p]||1<"."[a](/()()/)[p]||""[a](/.?/)[p]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!h(e))return g.call(n,e,t);for(var r,i,o,a=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,u=void 0===t?C:t>>>0,c=new RegExp(e.source,s+"g");(r=f.call(c,n))&&!(l<(i=c[m])&&(a.push(n.slice(l,r.index)),1<r[p]&&r.index<n[p]&&d.apply(a,r.slice(1)),o=r[0][p],l=i,a[p]>=u));)c[m]===r.index&&c[m]++;return l===n[p]?!o&&c.test("")||a.push(""):a.push(n.slice(l)),a[p]>u?a.slice(0,u):a}:"0"[a](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)}:g,[function(e,t){var n=i(this),r=null==e?void 0:e[o];return void 0!==r?r.call(e,n,t):_.call(String(n),e,t)},function(e,t){var n=y(_,e,this,t,_!==g);if(n.done)return n.value;var r=v(e),i=String(this),o=b(r,RegExp),a=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(S?"y":"g"),l=new o(S?r:"^(?:"+r.source+")",s),u=void 0===t?C:t>>>0;if(0===u)return[];if(0===i.length)return null===k(l,i)?[i]:[];for(var c=0,h=0,f=[];h<i.length;){l.lastIndex=S?h:0;var d,p=k(l,S?i:i.slice(h));if(null===p||(d=L(x(l.lastIndex+(S?0:h)),i.length))===c)h=w(i,h,a);else{if(f.push(i.slice(c,h)),f.length===u)return f;for(var m=1;m<=p.length-1;m++)if(f.push(p[m]),f.length===u)return f;h=c=d}}return f.push(i.slice(c)),f}]})},{"./_advance-string-index":98,"./_an-object":100,"./_fails":128,"./_fix-re-wks":129,"./_is-regexp":146,"./_regexp-exec":187,"./_regexp-exec-abstract":186,"./_species-constructor":197,"./_to-length":211}],325:[function(t,e,n){"use strict";t("./es6.regexp.flags");var r=t("./_an-object"),i=t("./_flags"),o=t("./_descriptors"),a="toString",s=/./[a],l=function(e){t("./_redefine")(RegExp.prototype,a,e,!0)};t("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):s.name!=a&&l(function(){return s.call(this)})},{"./_an-object":100,"./_descriptors":122,"./_fails":128,"./_flags":130,"./_redefine":185,"./es6.regexp.flags":320}],326:[function(e,t,n){"use strict";var r=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},{"./_collection":115,"./_collection-strong":112,"./_validate-collection":219}],327:[function(e,t,n){"use strict";e("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":201}],328:[function(e,t,n){"use strict";e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":201}],329:[function(e,t,n){"use strict";e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":201}],330:[function(e,t,n){"use strict";e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":201}],331:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_string-at")(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},{"./_export":126,"./_string-at":199}],332:[function(e,t,n){"use strict";var r=e("./_export"),a=e("./_to-length"),s=e("./_string-context"),l="endsWith",u=""[l];r(r.P+r.F*e("./_fails-is-regexp")(l),"String",{endsWith:function(e){var t=s(this,e,l),n=1<arguments.length?arguments[1]:void 0,r=a(t.length),i=void 0===n?r:Math.min(a(n),r),o=String(e);return u?u.call(t,o,i):t.slice(i-o.length,i)===o}})},{"./_export":126,"./_fails-is-regexp":127,"./_string-context":200,"./_to-length":211}],333:[function(e,t,n){"use strict";e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":201}],334:[function(e,t,n){"use strict";e("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":201}],335:[function(e,t,n){"use strict";e("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":201}],336:[function(e,t,n){var r=e("./_export"),o=e("./_to-absolute-index"),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;i<r;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},{"./_export":126,"./_to-absolute-index":207}],337:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_string-context");r(r.P+r.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},{"./_export":126,"./_fails-is-regexp":127,"./_string-context":200}],338:[function(e,t,n){"use strict";e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":201}],339:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":149,"./_string-at":199}],340:[function(e,t,n){"use strict";e("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":201}],341:[function(e,t,n){var r=e("./_export"),a=e("./_to-iobject"),s=e("./_to-length");r(r.S,"String",{raw:function(e){for(var t=a(e.raw),n=s(t.length),r=arguments.length,i=[],o=0;o<n;)i.push(String(t[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}})},{"./_export":126,"./_to-iobject":210,"./_to-length":211}],342:[function(e,t,n){var r=e("./_export");r(r.P,"String",{repeat:e("./_string-repeat")})},{"./_export":126,"./_string-repeat":203}],343:[function(e,t,n){"use strict";e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":201}],344:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-length"),o=e("./_string-context"),a="startsWith",s=""[a];r(r.P+r.F*e("./_fails-is-regexp")(a),"String",{startsWith:function(e){var t=o(this,e,a),n=i(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return s?s.call(t,r,n):t.slice(n,n+r.length)===r}})},{"./_export":126,"./_fails-is-regexp":127,"./_string-context":200,"./_to-length":211}],345:[function(e,t,n){"use strict";e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":201}],346:[function(e,t,n){"use strict";e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":201}],347:[function(e,t,n){"use strict";e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":201}],348:[function(e,t,n){"use strict";e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":204}],349:[function(e,t,n){"use strict";var r=e("./_global"),a=e("./_has"),i=e("./_descriptors"),o=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,u=e("./_fails"),c=e("./_shared"),h=e("./_set-to-string-tag"),f=e("./_uid"),d=e("./_wks"),p=e("./_wks-ext"),m=e("./_wks-define"),g=e("./_enum-keys"),y=e("./_is-array"),_=e("./_an-object"),v=e("./_is-object"),b=e("./_to-object"),w=e("./_to-iobject"),x=e("./_to-primitive"),k=e("./_property-desc"),L=e("./_object-create"),C=e("./_object-gopn-ext"),S=e("./_object-gopd"),M=e("./_object-gops"),P=e("./_object-dp"),E=e("./_object-keys"),T=S.f,I=P.f,O=C.f,D=r.Symbol,N=r.JSON,A=N&&N.stringify,j="prototype",R=d("_hidden"),B=d("toPrimitive"),F={}.propertyIsEnumerable,z=c("symbol-registry"),q=c("symbols"),U=c("op-symbols"),G=Object[j],$="function"==typeof D&&!!M.f,V=r.QObject,H=!V||!V[j]||!V[j].findChild,W=i&&u(function(){return 7!=L(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=T(G,t);r&&delete G[t],I(e,t,n),r&&e!==G&&I(G,t,r)}:I,Q=function(e){var t=q[e]=L(D[j]);return t._k=e,t},K=$&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},Z=function(e,t,n){return e===G&&Z(U,t,n),_(e),t=x(t,!0),_(n),a(q,t)?(n.enumerable?(a(e,R)&&e[R][t]&&(e[R][t]=!1),n=L(n,{enumerable:k(0,!1)})):(a(e,R)||I(e,R,k(1,{})),e[R][t]=!0),W(e,t,n)):I(e,t,n)},J=function(e,t){_(e);for(var n,r=g(t=w(t)),i=0,o=r.length;i<o;)Z(e,n=r[i++],t[n]);return e},X=function(e){var t=F.call(this,e=x(e,!0));return!(this===G&&a(q,e)&&!a(U,e))&&(!(t||!a(this,e)||!a(q,e)||a(this,R)&&this[R][e])||t)},Y=function(e,t){if(e=w(e),t=x(t,!0),e!==G||!a(q,t)||a(U,t)){var n=T(e,t);return!n||!a(q,t)||a(e,R)&&e[R][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=O(w(e)),r=[],i=0;n.length>i;)a(q,t=n[i++])||t==R||t==l||r.push(t);return r},te=function(e){for(var t,n=e===G,r=O(n?U:w(e)),i=[],o=0;r.length>o;)!a(q,t=r[o++])||n&&!a(G,t)||i.push(q[t]);return i};$||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=f(0<arguments.length?arguments[0]:void 0),n=function(e){this===G&&n.call(U,e),a(this,R)&&a(this[R],t)&&(this[R][t]=!1),W(this,t,k(1,e))};return i&&H&&W(G,t,{configurable:!0,set:n}),Q(t)})[j],"toString",function(){return this._k}),S.f=Y,P.f=Z,e("./_object-gopn").f=C.f=ee,e("./_object-pie").f=X,M.f=te,i&&!e("./_library")&&s(G,"propertyIsEnumerable",X,!0),p.f=function(e){return Q(d(e))}),o(o.G+o.W+o.F*!$,{Symbol:D});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)d(ne[re++]);for(var ie=E(d.store),oe=0;ie.length>oe;)m(ie[oe++]);o(o.S+o.F*!$,"Symbol",{for:function(e){return a(z,e+="")?z[e]:z[e]=D(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!$,"Object",{create:function(e,t){return void 0===t?L(e):J(L(e),t)},defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=u(function(){M.f(1)});o(o.S+o.F*ae,"Object",{getOwnPropertySymbols:function(e){return M.f(b(e))}}),N&&o(o.S+o.F*(!$||u(function(){var e=D();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(v(t)||void 0!==e)&&!K(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,A.apply(N,r)}}),D[j][B]||e("./_hide")(D[j],B,D[j].valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},{"./_an-object":100,"./_descriptors":122,"./_enum-keys":125,"./_export":126,"./_fails":128,"./_global":134,"./_has":135,"./_hide":136,"./_is-array":143,"./_is-object":145,"./_library":153,"./_meta":159,"./_object-create":164,"./_object-dp":165,"./_object-gopd":168,"./_object-gopn":170,"./_object-gopn-ext":169,"./_object-gops":171,"./_object-keys":174,"./_object-pie":175,"./_property-desc":183,"./_redefine":185,"./_set-to-string-tag":194,"./_shared":196,"./_to-iobject":210,"./_to-object":212,"./_to-primitive":213,"./_uid":217,"./_wks":222,"./_wks-define":220,"./_wks-ext":221}],350:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_typed"),o=e("./_typed-buffer"),u=e("./_an-object"),c=e("./_to-absolute-index"),h=e("./_to-length"),a=e("./_is-object"),s=e("./_global").ArrayBuffer,f=e("./_species-constructor"),d=o.ArrayBuffer,p=o.DataView,l=i.ABV&&s.isView,m=d.prototype.slice,g=i.VIEW,y="ArrayBuffer";r(r.G+r.W+r.F*(s!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,y,{isView:function(e){return l&&l(e)||a(e)&&g in e}}),r(r.P+r.U+r.F*e("./_fails")(function(){return!new d(2).slice(1,void 0).byteLength}),y,{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(u(this),e);for(var n=u(this).byteLength,r=c(e,n),i=c(void 0===t?n:t,n),o=new(f(this,d))(h(i-r)),a=new p(this),s=new p(o),l=0;r<i;)s.setUint8(l++,a.getUint8(r++));return o}}),e("./_set-species")(y)},{"./_an-object":100,"./_export":126,"./_fails":128,"./_global":134,"./_is-object":145,"./_set-species":193,"./_species-constructor":197,"./_to-absolute-index":207,"./_to-length":211,"./_typed":216,"./_typed-buffer":215}],351:[function(e,t,n){var r=e("./_export");r(r.G+r.W+r.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":126,"./_typed":216,"./_typed-buffer":215}],352:[function(e,t,n){e("./_typed-array")("Float32",4,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],353:[function(e,t,n){e("./_typed-array")("Float64",8,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],354:[function(e,t,n){e("./_typed-array")("Int16",2,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],355:[function(e,t,n){e("./_typed-array")("Int32",4,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],356:[function(e,t,n){e("./_typed-array")("Int8",1,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],357:[function(e,t,n){e("./_typed-array")("Uint16",2,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],358:[function(e,t,n){e("./_typed-array")("Uint32",4,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],359:[function(e,t,n){e("./_typed-array")("Uint8",1,function(r){return function(e,t,n){return r(this,e,t,n)}})},{"./_typed-array":214}],360:[function(e,t,n){e("./_typed-array")("Uint8",1,function(r){return function(e,t,n){return r(this,e,t,n)}},!0)},{"./_typed-array":214}],361:[function(e,t,n){"use strict";var o,r=e("./_global"),i=e("./_array-methods")(0),a=e("./_redefine"),s=e("./_meta"),l=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),h=e("./_validate-collection"),f=e("./_validate-collection"),d=!r.ActiveXObject&&"ActiveXObject"in r,p="WeakMap",m=s.getWeak,g=Object.isExtensible,y=u.ufstore,_=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=m(e);return!0===t?y(h(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(h(this,p),e,t)}},b=t.exports=e("./_collection")(p,_,v,u,!0,!0);f&&d&&(l((o=u.getConstructor(_,p)).prototype,v),s.NEED=!0,i(["delete","has","get","set"],function(r){var e=b.prototype,i=e[r];a(e,r,function(e,t){if(!c(e)||g(e))return i.call(this,e,t);this._f||(this._f=new o);var n=this._f[r](e,t);return"set"==r?this:n})}))},{"./_array-methods":105,"./_collection":115,"./_collection-weak":114,"./_global":134,"./_is-object":145,"./_meta":159,"./_object-assign":163,"./_redefine":185,"./_validate-collection":219}],362:[function(e,t,n){"use strict";var r=e("./_collection-weak"),i=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},{"./_collection":115,"./_collection-weak":114,"./_validate-collection":219}],363:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_flatten-into-array"),o=e("./_to-object"),a=e("./_to-length"),s=e("./_a-function"),l=e("./_array-species-create");r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=l(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":95,"./_add-to-unscopables":97,"./_array-species-create":108,"./_export":126,"./_flatten-into-array":131,"./_to-length":211,"./_to-object":212}],364:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_flatten-into-array"),o=e("./_to-object"),a=e("./_to-length"),s=e("./_to-integer"),l=e("./_array-species-create");r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=l(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),e("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":97,"./_array-species-create":108,"./_export":126,"./_flatten-into-array":131,"./_to-integer":209,"./_to-length":211,"./_to-object":212}],365:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_array-includes")(!0);r(r.P,"Array",{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":97,"./_array-includes":104,"./_export":126}],366:[function(e,t,n){var r=e("./_export"),i=e("./_microtask")(),o=e("./_global").process,a="process"==e("./_cof")(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},{"./_cof":111,"./_export":126,"./_global":134,"./_microtask":161}],367:[function(e,t,n){var r=e("./_export"),i=e("./_cof");r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},{"./_cof":111,"./_export":126}],368:[function(e,t,n){var r=e("./_export");r(r.G,{global:e("./_global")})},{"./_export":126,"./_global":134}],369:[function(e,t,n){e("./_set-collection-from")("Map")},{"./_set-collection-from":190}],370:[function(e,t,n){e("./_set-collection-of")("Map")},{"./_set-collection-of":191}],371:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":113,"./_export":126}],372:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},{"./_export":126}],373:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":126}],374:[function(e,t,n){var r=e("./_export"),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},{"./_export":126}],375:[function(e,t,n){var r=e("./_export"),o=e("./_math-scale"),a=e("./_math-fround");r(r.S,"Math",{fscale:function(e,t,n,r,i){return a(o(e,t,n,r,i))}})},{"./_export":126,"./_math-fround":155,"./_math-scale":157}],376:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},{"./_export":126}],377:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},{"./_export":126}],378:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},{"./_export":126}],379:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":126}],380:[function(e,t,n){var r=e("./_export"),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},{"./_export":126}],381:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{scale:e("./_math-scale")})},{"./_export":126,"./_math-scale":157}],382:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},{"./_export":126}],383:[function(e,t,n){var r=e("./_export");r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},{"./_export":126}],384:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-object"),o=e("./_a-function"),a=e("./_object-dp");e("./_descriptors")&&r(r.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},{"./_a-function":95,"./_descriptors":122,"./_export":126,"./_object-dp":165,"./_object-forced-pam":167,"./_to-object":212}],385:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-object"),o=e("./_a-function"),a=e("./_object-dp");e("./_descriptors")&&r(r.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},{"./_a-function":95,"./_descriptors":122,"./_export":126,"./_object-dp":165,"./_object-forced-pam":167,"./_to-object":212}],386:[function(e,t,n){var r=e("./_export"),i=e("./_object-to-array")(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},{"./_export":126,"./_object-to-array":177}],387:[function(e,t,n){var r=e("./_export"),l=e("./_own-keys"),u=e("./_to-iobject"),c=e("./_object-gopd"),h=e("./_create-property");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=u(e),i=c.f,o=l(r),a={},s=0;o.length>s;)void 0!==(n=i(r,t=o[s++]))&&h(a,t,n);return a}})},{"./_create-property":117,"./_export":126,"./_object-gopd":168,"./_own-keys":178,"./_to-iobject":210}],388:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive"),a=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&r(r.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},{"./_descriptors":122,"./_export":126,"./_object-forced-pam":167,"./_object-gopd":168,"./_object-gpo":172,"./_to-object":212,"./_to-primitive":213}],389:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive"),a=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&r(r.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},{"./_descriptors":122,"./_export":126,"./_object-forced-pam":167,"./_object-gopd":168,"./_object-gpo":172,"./_to-object":212,"./_to-primitive":213}],390:[function(e,t,n){var r=e("./_export"),i=e("./_object-to-array")(!1);r(r.S,"Object",{values:function(e){return i(e)}})},{"./_export":126,"./_object-to-array":177}],391:[function(e,t,n){"use strict";var r=e("./_export"),o=e("./_global"),a=e("./_core"),i=e("./_microtask")(),s=e("./_wks")("observable"),l=e("./_a-function"),u=e("./_an-object"),c=e("./_an-instance"),h=e("./_redefine-all"),f=e("./_hide"),d=e("./_for-of"),p=d.RETURN,m=function(e){return null==e?void 0:l(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},y=function(e){return void 0===e._o},_=function(e){y(e)||(e._o=void 0,g(e))},v=function(t,e){u(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:l(n),this._c=n)}catch(e){return void t.error(e)}y(this)&&g(this)};v.prototype=h({},{unsubscribe:function(){_(this)}});var b=function(e){this._s=e};b.prototype=h({},{next:function(e){var t=this._s;if(!y(t)){var n=t._o;try{var r=m(n.next);if(r)return r.call(n,e)}catch(e){try{_(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var n=t._o;t._o=void 0;try{var r=m(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!y(t)){var n=t._o;t._o=void 0;try{var r=m(n.complete);e=r?r.call(n,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var w=function(e){c(this,w,"Observable","_f")._f=l(e)};h(w.prototype,{subscribe:function(e){return new v(e,this._f)},forEach:function(r){var i=this;return new(a.Promise||o.Promise)(function(e,t){l(r);var n=i.subscribe({next:function(e){try{return r(e)}catch(e){t(e),n.unsubscribe()}},error:t,complete:e})})}}),h(w,{from:function(e){var t="function"==typeof this?this:w,n=m(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return i(function(){if(!n){try{if(d(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:w)(function(t){var n=!1;return i(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),f(w.prototype,s,function(){return this}),r(r.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":95,"./_an-instance":99,"./_an-object":100,"./_core":116,"./_export":126,"./_for-of":132,"./_global":134,"./_hide":136,"./_microtask":161,"./_redefine-all":184,"./_set-species":193,"./_wks":222}],392:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_core"),o=e("./_global"),a=e("./_species-constructor"),s=e("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(t){var n=a(this,i.Promise||o.Promise),e="function"==typeof t;return this.then(e?function(e){return s(n,t()).then(function(){return e})}:t,e?function(e){return s(n,t()).then(function(){throw e})}:t)}})},{"./_core":116,"./_export":126,"./_global":134,"./_promise-resolve":182,"./_species-constructor":197}],393:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_new-promise-capability"),o=e("./_perform");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},{"./_export":126,"./_new-promise-capability":162,"./_perform":181}],394:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},{"./_an-object":100,"./_metadata":160}],395:[function(e,t,n){var r=e("./_metadata"),o=e("./_an-object"),a=r.key,s=r.map,l=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:a(arguments[2]),r=s(o(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var i=l.get(t);return i.delete(n),!!i.size||l.delete(t)}})},{"./_an-object":100,"./_metadata":160}],396:[function(e,t,n){var o=e("./es6.set"),a=e("./_array-from-iterable"),r=e("./_metadata"),i=e("./_an-object"),s=e("./_object-gpo"),l=r.keys,u=r.key,c=function(e,t){var n=l(e,t),r=s(e);if(null===r)return n;var i=c(r,t);return i.length?n.length?a(new o(n.concat(i))):i:n};r.exp({getMetadataKeys:function(e){return c(i(e),arguments.length<2?void 0:u(arguments[1]))}})},{"./_an-object":100,"./_array-from-iterable":103,"./_metadata":160,"./_object-gpo":172,"./es6.set":326}],397:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=e("./_object-gpo"),a=r.has,s=r.get,l=r.key,u=function(e,t,n){if(a(e,t,n))return s(e,t,n);var r=o(t);return null!==r?u(e,r,n):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},{"./_an-object":100,"./_metadata":160,"./_object-gpo":172}],398:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},{"./_an-object":100,"./_metadata":160}],399:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":100,"./_metadata":160}],400:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=e("./_object-gpo"),a=r.has,s=r.key,l=function(e,t,n){if(a(e,t,n))return!0;var r=o(t);return null!==r&&l(e,r,n)};r.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":100,"./_metadata":160,"./_object-gpo":172}],401:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":100,"./_metadata":160}],402:[function(e,t,n){var r=e("./_metadata"),i=e("./_an-object"),o=e("./_a-function"),a=r.key,s=r.set;r.exp({metadata:function(n,r){return function(e,t){s(n,r,(void 0!==t?i:o)(e),a(t))}}})},{"./_a-function":95,"./_an-object":100,"./_metadata":160}],403:[function(e,t,n){e("./_set-collection-from")("Set")},{"./_set-collection-from":190}],404:[function(e,t,n){e("./_set-collection-of")("Set")},{"./_set-collection-of":191}],405:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":113,"./_export":126}],406:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_string-at")(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},{"./_export":126,"./_string-at":199}],407:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_defined"),o=e("./_to-length"),a=e("./_is-regexp"),s=e("./_flags"),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};e("./_iter-create")(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},{"./_defined":121,"./_export":126,"./_flags":130,"./_is-regexp":146,"./_iter-create":148,"./_to-length":211}],408:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_string-pad"),o=e("./_user-agent"),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},{"./_export":126,"./_string-pad":202,"./_user-agent":218}],409:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_string-pad"),o=e("./_user-agent"),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},{"./_export":126,"./_string-pad":202,"./_user-agent":218}],410:[function(e,t,n){"use strict";e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":204}],411:[function(e,t,n){"use strict";e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":204}],412:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":220}],413:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":220}],414:[function(e,t,n){var r=e("./_export");r(r.S,"System",{global:e("./_global")})},{"./_export":126,"./_global":134}],415:[function(e,t,n){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":190}],416:[function(e,t,n){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":191}],417:[function(e,t,n){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":190}],418:[function(e,t,n){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":191}],419:[function(e,t,n){for(var r=e("./es6.array.iterator"),i=e("./_object-keys"),o=e("./_redefine"),a=e("./_global"),s=e("./_hide"),l=e("./_iterators"),u=e("./_wks"),c=u("iterator"),h=u("toStringTag"),f=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),m=0;m<p.length;m++){var g,y=p[m],_=d[y],v=a[y],b=v&&v.prototype;if(b&&(b[c]||s(b,c,f),b[h]||s(b,h,y),l[y]=f,_))for(g in r)b[g]||o(b,g,r[g],!0)}},{"./_global":134,"./_hide":136,"./_iterators":152,"./_object-keys":174,"./_redefine":185,"./_wks":222,"./es6.array.iterator":235}],420:[function(e,t,n){var r=e("./_export"),i=e("./_task");r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":126,"./_task":206}],421:[function(e,t,n){var r=e("./_global"),i=e("./_export"),o=e("./_user-agent"),a=[].slice,s=/MSIE .\./.test(o),l=function(i){return function(e,t){var n=2<arguments.length,r=!!n&&a.call(arguments,2);return i(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,t)}};i(i.G+i.B+i.F*s,{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},{"./_export":126,"./_global":134,"./_user-agent":218}],422:[function(e,t,n){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.exec"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.array.flat-map"),e("./modules/es7.array.flatten"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.map.of"),e("./modules/es7.set.of"),e("./modules/es7.weak-map.of"),e("./modules/es7.weak-set.of"),e("./modules/es7.map.from"),e("./modules/es7.set.from"),e("./modules/es7.weak-map.from"),e("./modules/es7.weak-set.from"),e("./modules/es7.global"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.clamp"),e("./modules/es7.math.deg-per-rad"),e("./modules/es7.math.degrees"),e("./modules/es7.math.fscale"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.rad-per-deg"),e("./modules/es7.math.radians"),e("./modules/es7.math.scale"),e("./modules/es7.math.umulh"),e("./modules/es7.math.signbit"),e("./modules/es7.promise.finally"),e("./modules/es7.promise.try"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":116,"./modules/es6.array.copy-within":225,"./modules/es6.array.every":226,"./modules/es6.array.fill":227,"./modules/es6.array.filter":228,"./modules/es6.array.find":230,"./modules/es6.array.find-index":229,"./modules/es6.array.for-each":231,"./modules/es6.array.from":232,"./modules/es6.array.index-of":233,"./modules/es6.array.is-array":234,"./modules/es6.array.iterator":235,"./modules/es6.array.join":236,"./modules/es6.array.last-index-of":237,"./modules/es6.array.map":238,"./modules/es6.array.of":239,"./modules/es6.array.reduce":241,"./modules/es6.array.reduce-right":240,"./modules/es6.array.slice":242,"./modules/es6.array.some":243,"./modules/es6.array.sort":244,"./modules/es6.array.species":245,"./modules/es6.date.now":246,"./modules/es6.date.to-iso-string":247,"./modules/es6.date.to-json":248,"./modules/es6.date.to-primitive":249,"./modules/es6.date.to-string":250,"./modules/es6.function.bind":251,"./modules/es6.function.has-instance":252,"./modules/es6.function.name":253,"./modules/es6.map":254,"./modules/es6.math.acosh":255,"./modules/es6.math.asinh":256,"./modules/es6.math.atanh":257,"./modules/es6.math.cbrt":258,"./modules/es6.math.clz32":259,"./modules/es6.math.cosh":260,"./modules/es6.math.expm1":261,"./modules/es6.math.fround":262,"./modules/es6.math.hypot":263,"./modules/es6.math.imul":264,"./modules/es6.math.log10":265,"./modules/es6.math.log1p":266,"./modules/es6.math.log2":267,"./modules/es6.math.sign":268,"./modules/es6.math.sinh":269,"./modules/es6.math.tanh":270,"./modules/es6.math.trunc":271,"./modules/es6.number.constructor":272,"./modules/es6.number.epsilon":273,"./modules/es6.number.is-finite":274,"./modules/es6.number.is-integer":275,"./modules/es6.number.is-nan":276,"./modules/es6.number.is-safe-integer":277,"./modules/es6.number.max-safe-integer":278,"./modules/es6.number.min-safe-integer":279,"./modules/es6.number.parse-float":280,"./modules/es6.number.parse-int":281,"./modules/es6.number.to-fixed":282,"./modules/es6.number.to-precision":283,"./modules/es6.object.assign":284,"./modules/es6.object.create":285,"./modules/es6.object.define-properties":286,"./modules/es6.object.define-property":287,"./modules/es6.object.freeze":288,"./modules/es6.object.get-own-property-descriptor":289,"./modules/es6.object.get-own-property-names":290,"./modules/es6.object.get-prototype-of":291,"./modules/es6.object.is":295,"./modules/es6.object.is-extensible":292,"./modules/es6.object.is-frozen":293,"./modules/es6.object.is-sealed":294,"./modules/es6.object.keys":296,"./modules/es6.object.prevent-extensions":297,"./modules/es6.object.seal":298,"./modules/es6.object.set-prototype-of":299,"./modules/es6.object.to-string":300,"./modules/es6.parse-float":301,"./modules/es6.parse-int":302,"./modules/es6.promise":303,"./modules/es6.reflect.apply":304,"./modules/es6.reflect.construct":305,"./modules/es6.reflect.define-property":306,"./modules/es6.reflect.delete-property":307,"./modules/es6.reflect.enumerate":308,"./modules/es6.reflect.get":311,"./modules/es6.reflect.get-own-property-descriptor":309,"./modules/es6.reflect.get-prototype-of":310,"./modules/es6.reflect.has":312,"./modules/es6.reflect.is-extensible":313,"./modules/es6.reflect.own-keys":314,"./modules/es6.reflect.prevent-extensions":315,"./modules/es6.reflect.set":317,"./modules/es6.reflect.set-prototype-of":316,"./modules/es6.regexp.constructor":318,"./modules/es6.regexp.exec":319,"./modules/es6.regexp.flags":320,"./modules/es6.regexp.match":321,"./modules/es6.regexp.replace":322,"./modules/es6.regexp.search":323,"./modules/es6.regexp.split":324,"./modules/es6.regexp.to-string":325,"./modules/es6.set":326,"./modules/es6.string.anchor":327,"./modules/es6.string.big":328,"./modules/es6.string.blink":329,"./modules/es6.string.bold":330,"./modules/es6.string.code-point-at":331,"./modules/es6.string.ends-with":332,"./modules/es6.string.fixed":333,"./modules/es6.string.fontcolor":334,"./modules/es6.string.fontsize":335,"./modules/es6.string.from-code-point":336,"./modules/es6.string.includes":337,"./modules/es6.string.italics":338,"./modules/es6.string.iterator":339,"./modules/es6.string.link":340,"./modules/es6.string.raw":341,"./modules/es6.string.repeat":342,"./modules/es6.string.small":343,"./modules/es6.string.starts-with":344,"./modules/es6.string.strike":345,"./modules/es6.string.sub":346,"./modules/es6.string.sup":347,"./modules/es6.string.trim":348,"./modules/es6.symbol":349,"./modules/es6.typed.array-buffer":350,"./modules/es6.typed.data-view":351,"./modules/es6.typed.float32-array":352,"./modules/es6.typed.float64-array":353,"./modules/es6.typed.int16-array":354,"./modules/es6.typed.int32-array":355,"./modules/es6.typed.int8-array":356,"./modules/es6.typed.uint16-array":357,"./modules/es6.typed.uint32-array":358,"./modules/es6.typed.uint8-array":359,"./modules/es6.typed.uint8-clamped-array":360,"./modules/es6.weak-map":361,"./modules/es6.weak-set":362,"./modules/es7.array.flat-map":363,"./modules/es7.array.flatten":364,"./modules/es7.array.includes":365,"./modules/es7.asap":366,"./modules/es7.error.is-error":367,"./modules/es7.global":368,"./modules/es7.map.from":369,"./modules/es7.map.of":370,"./modules/es7.map.to-json":371,"./modules/es7.math.clamp":372,"./modules/es7.math.deg-per-rad":373,"./modules/es7.math.degrees":374,"./modules/es7.math.fscale":375,"./modules/es7.math.iaddh":376,"./modules/es7.math.imulh":377,"./modules/es7.math.isubh":378,"./modules/es7.math.rad-per-deg":379,"./modules/es7.math.radians":380,"./modules/es7.math.scale":381,"./modules/es7.math.signbit":382,"./modules/es7.math.umulh":383,"./modules/es7.object.define-getter":384,"./modules/es7.object.define-setter":385,"./modules/es7.object.entries":386,"./modules/es7.object.get-own-property-descriptors":387,"./modules/es7.object.lookup-getter":388,"./modules/es7.object.lookup-setter":389,"./modules/es7.object.values":390,"./modules/es7.observable":391,"./modules/es7.promise.finally":392,"./modules/es7.promise.try":393,"./modules/es7.reflect.define-metadata":394,"./modules/es7.reflect.delete-metadata":395,"./modules/es7.reflect.get-metadata":397,"./modules/es7.reflect.get-metadata-keys":396,"./modules/es7.reflect.get-own-metadata":399,"./modules/es7.reflect.get-own-metadata-keys":398,"./modules/es7.reflect.has-metadata":400,"./modules/es7.reflect.has-own-metadata":401,"./modules/es7.reflect.metadata":402,"./modules/es7.set.from":403,"./modules/es7.set.of":404,"./modules/es7.set.to-json":405,"./modules/es7.string.at":406,"./modules/es7.string.match-all":407,"./modules/es7.string.pad-end":408,"./modules/es7.string.pad-start":409,"./modules/es7.string.trim-left":410,"./modules/es7.string.trim-right":411,"./modules/es7.symbol.async-iterator":412,"./modules/es7.symbol.observable":413,"./modules/es7.system.global":414,"./modules/es7.weak-map.from":415,"./modules/es7.weak-map.of":416,"./modules/es7.weak-set.from":417,"./modules/es7.weak-set.of":418,"./modules/web.dom.iterable":419,"./modules/web.immediate":420,"./modules/web.timers":421}],423:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":430}],424:[function(e,t,n){var l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,s=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),i=0===u.x}catch(e){i=!1}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=l(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=c(e))&&0<i&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=n,++e._eventsCount;return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(f,r);return i.listener=n,r.wrapFn=i}function p(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length):[]}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=g(e,r),o=0;o<r;++o)i[o].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=g(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=g(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=g(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=g(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,u,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return h(this,e,t,!1)},r.prototype.prependListener=function(e,t){return h(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,d(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,d(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=l(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=l(null):delete n[e]),this;if(0===arguments.length){var i,o=a(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},r.prototype.listenerCount=m,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],425:[function(e,t,n){var r=e("JSONStream");t.exports.parse=function(){return r.parse("features.*")},t.exports.stringify=function(){return r.stringify('{"type":"FeatureCollection","features":[',"\n,\n","]}")}},{JSONStream:59}],426:[function(e,t,n){var r,i;r=this,i=function(){var e,h,t,l={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},u=(e=function(e){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=e.xField||e.defaultXField,this._yField=e.yField||e.defaultYField,this._valueField=e.valueField||e.defaultValueField,e.radius&&(this._cfgRadius=e.radius)},h=l.defaultRadius,e.prototype={_organiseData:function(e,t){var n=e[this._xField],r=e[this._yField],i=this._radi,o=this._data,a=this._max,s=this._min,l=e[this._valueField]||1,u=e.radius||this._cfgRadius||h;o[n]||(o[n]=[],i[n]=[]),o[n][r]?o[n][r]+=l:(o[n][r]=l,i[n][r]=u);var c=o[n][r];return a<c?(t?this.setDataMax(c):this._max=c,!1):c<s?(t?this.setDataMin(c):this._min=c,!1):{x:n,y:r,value:l,radius:u,min:s,max:a}},_unOrganizeData:function(){var e=[],t=this._data,n=this._radi;for(var r in t)for(var i in t[r])e.push({x:r,y:i,radius:n[r][i],value:t[r][i]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var e=arguments[0],t=e.length;t--;)this.addData.call(this,e[t]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(e){var t=e.data,n=t.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(t[r],!1);return this._max=e.max,this._min=e.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(e){return this._max=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(e){return this._min=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(e){this._coordinator=e},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e),n=function(){var o=function(e){var t=e.gradient||e.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in t)i.addColorStop(o,t[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},m=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e,o=e;if(n.width=n.height=2*e,1==t)r.beginPath(),r.arc(i,o,e,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var a=r.createRadialGradient(i,o,e*t,i,o,e);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=a,r.fillRect(0,0,2*e,2*e)}return n};function e(e){var t=e.container,n=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=e.canvas||document.createElement("canvas"),i=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});r.className="heatmap-canvas",this._width=r.width=n.width=e.width||+i.width.replace(/px/,""),this._height=r.height=n.height=e.height||+i.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",t.style.position="relative",t.appendChild(r),this._palette=o(e),this._templates={},this._setStyles(e)}return e.prototype={renderPartial:function(e){0<e.data.length&&(this._drawAlpha(e),this._colorize())},renderAll:function(e){this._clear(),0<e.data.length&&(this._drawAlpha(function(e){for(var t=[],n=e.min,r=e.max,i=e.radi,o=(e=e.data,Object.keys(e)),a=o.length;a--;)for(var s=o[a],l=Object.keys(e[s]),u=l.length;u--;){var c=l[u],h=e[s][c],f=i[s][c];t.push({x:s,y:c,value:h,radius:f})}return{min:n,max:r,data:t}}(e)),this._colorize())},_updateGradient:function(e){this._palette=o(e)},updateConfig:function(e){e.gradient&&this._updateGradient(e),this._setStyles(e)},setDimensions:function(e,t){this._width=e,this._height=t,this.canvas.width=this.shadowCanvas.width=e,this.canvas.height=this.shadowCanvas.height=t},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(e){this._blur=0==e.blur?0:e.blur||e.defaultBlur,e.backgroundColor&&(this.canvas.style.backgroundColor=e.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=e.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=e.height||this._height,this._opacity=255*(e.opacity||0),this._maxOpacity=255*(e.maxOpacity||e.defaultMaxOpacity),this._minOpacity=255*(e.minOpacity||e.defaultMinOpacity),this._useGradientOpacity=!!e.useGradientOpacity},_drawAlpha:function(e){for(var t=this._min=e.min,n=this._max=e.max,r=(e=e.data||[]).length,i=1-this._blur;r--;){var o,a=e[r],s=a.x,l=a.y,u=a.radius,c=Math.min(a.value,n),h=s-u,f=l-u,d=this.shadowCtx;this._templates[u]?o=this._templates[u]:this._templates[u]=o=m(u,i);var p=(c-t)/(n-t);d.globalAlpha=p<.01?.01:p,d.drawImage(o,h,f),h<this._renderBoundaries[0]&&(this._renderBoundaries[0]=h),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),h+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=h+2*u),f+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*u)}},_colorize:function(){var e=this._renderBoundaries[0],t=this._renderBoundaries[1],n=this._renderBoundaries[2]-e,r=this._renderBoundaries[3]-t,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;e<0&&(e=0),t<0&&(t=0),i<e+n&&(n=i-e),o<t+r&&(r=o-t);for(var c=this.shadowCtx.getImageData(e,t,n,r),h=c.data,f=h.length,d=this._palette,p=3;p<f;p+=4){var m,g=h[p],y=4*g;if(y)m=0<a?a:g<s?g<l?l:g:s,h[p-3]=d[y],h[p-2]=d[y+1],h[p-1]=d[y+2],h[p]=u?d[y+3]:m}c.data=h,this.ctx.putImageData(c,e,t),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(e){var t=this.shadowCtx.getImageData(e.x,e.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(t/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},e}(),c=(t=!1,"canvas2d"===l.defaultRenderer&&(t=n),t),f=function(){for(var e={},t=arguments.length,n=0;n<t;n++){var r=arguments[n];for(var i in r)e[i]=r[i]}return e},r=function(){var s=function(){function e(){this.cStore={}}return e.prototype={on:function(e,t,n){var r=this.cStore;r[e]||(r[e]=[]),r[e].push(function(e){return t.call(n,e)})},emit:function(e,t){var n=this.cStore;if(n[e])for(var r=n[e].length,i=0;i<r;i++){(0,n[e][i])(t)}}},e}();function e(){var t,e,n,r,i=this._config=f(l,arguments[0]||{});if(this._coordinator=new s,i.plugin){var o=i.plugin;if(!l.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var a=l.plugins[o];this._renderer=new a.renderer(i),this._store=new a.store(i)}else this._renderer=new c(i),this._store=new u(i);e=(t=this)._renderer,n=t._coordinator,r=t._store,n.on("renderpartial",e.renderPartial,e),n.on("renderall",e.renderAll,e),n.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),r.setCoordinator(n)}return e.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(e){return this._config=f(this._config,e),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(e){return this._store.getValueAt?this._store.getValueAt(e):this._renderer.getValueAt?this._renderer.getValueAt(e):null}},e}();return{create:function(e){return new r(e)},register:function(e,t){l.plugins[e]=t}}},void 0!==t&&t.exports?t.exports=i():"function"==typeof define&&define.amd?define(i):r.h337=i()},{}],427:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=u}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+h?f/l:f*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[n+d]=255&a,d+=p,a/=256,u-=8);e[n+d-p]|=128*m}},{}],428:[function(e,c,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,o=new e(u),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var s=new t.MessageChannel;s.port1.onmessage=u,n=function(){s.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}c.exports=function(e){1!==l.push(e)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],429:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],430:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],431:[function(e,t,n){!function(w,v,x,b){"use strict";function k(e,t){e||(t=t?": "+t:"",w.error("Fancytree assertion failed"+t))}function t(e,t){var n,r,i=v.console?v.console[e]:null;if(i)try{i.apply(v.console,t)}catch(e){for(r="",n=0;n<t.length;n++)r+=t[n];i(r)}}function o(e,r,t,n,i){var o,a,s,l,u;return o=r[e],a=n[e],s=r.ext[i],l=function(){return o.apply(r,arguments)},u=function(e){return o.apply(r,e)},function(){var e=r._local,t=r._super,n=r._superApply;try{return r._local=s,r._super=l,r._superApply=u,a.apply(r,arguments)}finally{r._local=e,r._super=t,r._superApply=n}}}function a(e,t,n,r){for(var i in n)"function"==typeof n[i]?"function"==typeof e[i]?e[i]=o(i,e,0,n,r):"_"===i.charAt(0)?e.ext[r][i]=o(i,e,0,n,r):w.error("Could not override tree."+i+". Use prefix '_' to create tree."+r+"._"+i):"options"!==i&&(e.ext[r][i]=n[i])}function L(e,t){return e===b?w.Deferred(function(){this.resolve()}).promise():w.Deferred(function(){this.resolveWith(e,t)}).promise()}function p(e,t){return e===b?w.Deferred(function(){this.reject()}).promise():w.Deferred(function(){this.rejectWith(e,t)}).promise()}function m(e,t){return function(){e.resolveWith(t)}}function g(e){var t=w.extend({},e.data()),n=t.json;return delete t.fancytree,delete t.uiFancytree,n&&(delete t.json,t=w.extend(t,n)),t}function y(e){return(""+e).replace(r,function(e){return M[e]})}function e(t){return t=t.toLowerCase(),function(e){return 0<=e.title.toLowerCase().indexOf(t)}}function u(e,t){var n,r,i,o;for(this.parent=e,this.tree=e.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},n=0,r=I.length;n<r;n++)this[i=I[n]]=t[i];for(i in null==this.unselectableIgnore&&null==this.unselectableStatus||(this.unselectable=!0),t.hideCheckbox&&w.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),t.data&&w.extend(this.data,t.data),t)f[i]||w.isFunction(t[i])||d[i]||(this.data[i]=t[i]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),k(this.key,"defaultKey() must return a unique key")):this.key="_"+_._nextNodeKey++:this.key=""+this.key,t.active&&(k(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),t.selected&&(this.tree.lastSelectedNode=this),(o=t.children)?o.length?this._setChildren(o):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function s(e){this.widget=e,this.$div=e.element,this.options=e.options,this.options&&(w.isFunction(this.options.lazyload)&&!w.isFunction(this.options.lazyLoad)&&(this.options.lazyLoad=function(){return _.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),e.options.lazyload.apply(this,arguments)}),w.isFunction(this.options.loaderror)&&w.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),this.options.fx!==b&&_.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),this.options.removeNode!==b&&w.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.data=g(this.$div),this._id=w.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var t,n={tree:this};this.rootNode=new u(n,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,t=w("<ul>",{class:"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=t,this.rootNode.ul=t[0],null==this.options.debugLevel&&(this.options.debugLevel=_.debugLevel)}if(w.ui&&w.ui.fancytree)w.ui.fancytree.warn("Fancytree: ignored duplicate include");else{var l,n,_=null,C=new RegExp(/\.|\//),r=/[&<>"'\/]/g,S=/[<>"'\/]/g,c="$recursive_request",M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},i={16:!0,17:!0,18:!0},P={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={0:"",1:"left",2:"middle",3:"right"},E="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),T={},I="checkbox expanded extraClasses folder icon key lazy radiogroup refKey selected statusNodeType title tooltip unselectable unselectableIgnore unselectableStatus".split(" "),f={},O={},d={active:!0,children:!0,data:!0,focus:!0};for(l=0;l<E.length;l++)T[E[l]]=!0;for(l=0;l<I.length;l++)n=I[l],f[n]=!0,n!==n.toLowerCase()&&(O[n.toLowerCase()]=n);k(w.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),u.prototype={_findDirectChild:function(e){var t,n,r=this.children;if(r)if("string"==typeof e){for(t=0,n=r.length;t<n;t++)if(r[t].key===e)return r[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){k(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var t=0,n=e.length;t<n;t++)this.children.push(new u(this,e[t]))},addChildren:function(e,t){var n,r,i,o,a=this.getFirstChild(),s=this.getLastChild(),l=[];for(w.isPlainObject(e)&&(e=[e]),this.children||(this.children=[]),n=0,r=e.length;n<r;n++)l.push(new u(this,e[n]));if(o=l[0],null==t?this.children=this.children.concat(l):(t=this._findDirectChild(t),k(0<=(i=w.inArray(t,this.children)),"insertBefore must be an existing child"),this.children.splice.apply(this.children,[i,0].concat(l))),a&&!t){for(n=0,r=l.length;n<r;n++)l[n].render();a!==this.getFirstChild()&&a.renderStatus(),s!==this.getLastChild()&&s.renderStatus()}else(!this.parent||this.parent.ul||this.tr)&&this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===l.length?l[0]:null),o},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,t){switch(t!==b&&"over"!==t||(t="child"),t){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var n=this.children?this.children[0]:null;return this.addChildren(e,n);case"child":case"over":return this.addChildren(e)}k(!1,"Invalid mode: "+t)},addPagingNode:function(e,t){var n,r;if(t=t||"child",!1!==e)return e=w.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},e),this.partload=!0,this.addNode(e,t);for(n=this.children.length-1;0<=n;n--)"paging"===(r=this.children[n]).statusNodeType&&this.removeChild(r);this.partload=!1},appendSibling:function(e){return this.addNode(e,"after")},applyPatch:function(e){if(null===e)return this.remove(),L(this);var t,n,r={children:!0,expanded:!0,parent:!0};for(t in e)n=e[t],r[t]||w.isFunction(n)||(f[t]?this[t]=n:this.data[t]=n);return e.hasOwnProperty("children")&&(this.removeChildren(),e.children&&this._setChildren(e.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),e.hasOwnProperty("expanded")?this.setExpanded(e.expanded):L(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,n){return e.addNode(this.toDict(!0,n),t)},countChildren:function(e){var t,n,r,i=this.children;if(!i)return 0;if(r=i.length,!1!==e)for(t=0,n=r;t<n;t++)r+=i[t].countChildren();return r},debug:function(e){2<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),t("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){var t=e?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(t,this)},findAll:function(t){t=w.isFunction(t)?t:e(t);var n=[];return this.visit(function(e){t(e)&&n.push(e)}),n},findFirst:function(t){t=w.isFunction(t)?t:e(t);var n=null;return this.visit(function(e){if(t(e))return n=e,!1}),n},_changeSelectStatusAttrs:function(e){var t=!1,n=this.tree.options,r=_.evalOption("unselectable",this,this,n,!1),i=_.evalOption("unselectableStatus",this,this,n,b);switch(r&&null!=i&&(e=i),e){case!1:t=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:t=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case b:t=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:k(!1,"invalid state: "+e)}return t&&this.renderStatus(),t},fixSelection3AfterClick:function(e){var t=this.isSelected();this.visit(function(e){e._changeSelectStatusAttrs(t)}),this.fixSelection3FromEndNodes(e)},fixSelection3FromEndNodes:function(e){var h=this.tree.options;k(3===h.selectMode,"expected selectMode 3"),function e(t){var n,r,i,o,a,s,l,u,c=t.children;if(c&&c.length){for(l=!(s=!0),n=0,r=c.length;n<r;n++)o=e(i=c[n]),_.evalOption("unselectableIgnore",i,i,h,!1)||(!1!==o&&(l=!0),!0!==o&&(s=!1));a=!!s||!!l&&b}else a=null==(u=_.evalOption("unselectableStatus",t,t,h,b))?!!t.selected:!!u;return t._changeSelectStatusAttrs(a),a}(this),this.visitParents(function(e){var t,n,r,i,o,a=e.children,s=!0,l=!1;for(t=0,n=a.length;t<n;t++)r=a[t],_.evalOption("unselectableIgnore",r,r,h,!1)||(((i=null==(o=_.evalOption("unselectableStatus",r,r,h,b))?!!r.selected:!!o)||r.partsel)&&(l=!0),i||(s=!1));i=!!s||!!l&&b,e._changeSelectStatusAttrs(i)})},fromDict:function(e){for(var t in e)f[t]?this[t]=e[t]:"data"===t?w.extend(this.data,e.data):w.isFunction(e[t])||d[t]||(this.data[t]=e[t]);e.children&&(this.removeChildren(),this.addChildren(e.children)),this.renderTitle()},getChildren:function(){return this.hasChildren()===b?b:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return w.inArray(this,this.parent.children)},getIndexHier:function(e,n){e=e||".";var r,i=[];return w.each(this.getParentList(!1,!0),function(e,t){r=""+(t.getIndex()+1),n&&(r=("0000000"+r).substr(-n)),i.push(r)}),i.join(e)},getKeyPath:function(e){var t=[],n=this.tree.options.keyPathSeparator;return this.visitParents(function(e){e.parent&&t.unshift(e.key)},!e),n+t.join(n)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var e,t,n=this.parent.children;for(e=0,t=n.length-1;e<t;e++)if(n[e]===this)return n[e+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var n=[],r=t?this:this.parent;r;)(e||r.parent)&&n.unshift(r),r=r.parent;return n},getPrevSibling:function(){if(this.parent){var e,t,n=this.parent.children;for(e=1,t=n.length;e<t;e++)if(n[e]===this)return n[e-1]}return null},getSelectedNodes:function(t){var n=[];return this.visit(function(e){if(e.selected&&(n.push(e),!0===t))return"skip"}),n},hasChildren:function(){return this.lazy?null==this.children?b:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode()||b):!(!this.children||!this.children.length)},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){1<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),t("info",arguments))},isActive:function(){return this.tree.activeNode===this},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e||e.tree!==this.tree)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||this.hasChildren()!==b},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return this.hasChildren()===b},isVisible:function(){var e,t,n=this.getParentList(!1,!1);for(e=0,t=n.length;e<t;e++)if(!n[e].expanded)return!1;return!0},lazyLoad:function(e){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(e)},load:function(e){var t,n,r=this,i=this.isExpanded();return k(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),!1===(n=this.tree._triggerNodeEvent("lazyLoad",this))?L(this):(k("boolean"!=typeof n,"lazyLoad event must return source in data.result"),t=this.tree._callHook("nodeLoadChildren",this,n),i?(this.expanded=!0,t.always(function(){r.render()})):t.always(function(){r.renderStatus()}),t)):L(this)},makeVisible:function(e){var t,n=this,r=[],i=new w.Deferred,o=this.getParentList(!1,!1),a=o.length,s=!(e&&!0===e.noAnimation),l=!(e&&!1===e.scrollIntoView);for(t=a-1;0<=t;t--)r.push(o[t].setExpanded(!0,e));return w.when.apply(w,r).done(function(){l?n.scrollIntoView(s).done(function(){i.resolve()}):i.resolve()}),i.promise()},moveTo:function(t,e,n){e===b||"over"===e?e="child":"firstChild"===e&&(t.children&&t.children.length?(e="before",t=t.children[0]):e="child");var r,i=this.parent,o="child"===e?t:t.parent;if(this!==t){if(this.parent?o.isDescendantOf(this)&&w.error("Cannot move a node to its own descendant"):w.error("Cannot move system root"),o!==i&&i.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===o)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else k(0<=(r=w.inArray(this,this.parent.children)),"invalid source parent"),this.parent.children.splice(r,1);if((this.parent=o).hasChildren())switch(e){case"child":o.children.push(this);break;case"before":k(0<=(r=w.inArray(t,o.children)),"invalid target parent"),o.children.splice(r,0,this);break;case"after":k(0<=(r=w.inArray(t,o.children)),"invalid target parent"),o.children.splice(r+1,0,this);break;default:w.error("Invalid mode "+e)}else o.children=[this];n&&t.visit(n,!0),o===i?o.triggerModifyChild("move",this):o.triggerModifyChild("add",this),this.tree!==t.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(e){e.tree=t.tree},!0)),i.isDescendantOf(o)||i.render(),o.isDescendantOf(i)||o===i||o.render()}},navigate:function(t,n){function r(e){if(e){try{e.makeVisible({scrollIntoView:!1})}catch(e){}return w(e.span).is(":visible")?!1===n?e.setFocus():e.setActive():(e.debug("Navigate: skipping hidden node"),void e.navigate(t,n))}}var e,i,o,a=w.ui.keyCode,s=null;switch(t){case a.BACKSPACE:this.parent&&this.parent.parent&&(o=r(this.parent));break;case a.HOME:this.tree.visit(function(e){if(w(e.span).is(":visible"))return o=r(e),!1});break;case a.END:this.tree.visit(function(e){w(e.span).is(":visible")&&(o=e)}),o&&(o=r(o));break;case a.LEFT:this.expanded?(this.setExpanded(!1),o=r(this)):this.parent&&this.parent.parent&&(o=r(this.parent));break;case a.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&(o=r(this.children[0])):(this.setExpanded(),o=r(this));break;case a.UP:for(s=this.getPrevSibling();s&&!w(s.span).is(":visible");)s=s.getPrevSibling();for(;s&&s.expanded&&s.children&&s.children.length;)s=s.children[s.children.length-1];!s&&this.parent&&this.parent.parent&&(s=this.parent),o=r(s);break;case a.DOWN:if(this.expanded&&this.children&&this.children.length)s=this.children[0];else for(e=(i=this.getParentList(!1,!0)).length-1;0<=e;e--){for(s=i[e].getNextSibling();s&&!w(s.span).is(":visible");)s=s.getNextSibling();if(s)break}o=r(s);break;default:!1}return o||L()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(e){var t,n=this.parent,r=w.inArray(this,n.children),i=this;return k(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(t=this.tree._callHook("nodeLoadChildren",this,e)).done(function(e){var t=i.children;for(l=0;l<t.length;l++)t[l].parent=n;n.children.splice.apply(n.children,[r+1,0].concat(t)),i.children=null,i.remove(),n.render()}).fail(function(){i.setExpanded()}),t},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=b,this.renderStatus()},scheduleAction:function(e,t){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var n=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger expand"),n.setExpanded(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger activate"),n.setActive(!0)},t);break;default:w.error("Invalid mode "+e)}},scrollIntoView:function(e,t){var n;t!==b&&((n=t).tree&&n.statusNodeType!==b)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),t={topNode:t});var r,i,o,a=w.extend({effects:!0===e?{duration:200,queue:!1}:e,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},t),s=new w.Deferred,l=this,u=w(this.span).height(),c=w(a.scrollParent),h=a.scrollOfs.top||0,f=a.scrollOfs.bottom||0,d=c.height(),p=c.scrollTop(),m=c,g=c[0]===v,y=a.topNode||null,_=null;return w(this.span).is(":visible")?(g?(i=w(this.span).offset().top,r=y&&y.span?w(y.span).offset().top:0,m=w("html,body")):(k(c[0]!==x&&c[0]!==x.body,"scrollParent should be a simple element or `window`, not document or body."),o=c.offset().top,i=w(this.span).offset().top-o+p,r=y?w(y.span).offset().top-o+p:0,d-=Math.max(0,c.innerHeight()-c[0].clientHeight)),i<p+h?_=i-h:p+d-f<i+u&&(_=i+u-d+f,y&&(k(y.isRootNode()||w(y.span).is(":visible"),"topNode must be visible"),r<_&&(_=r-h))),null!==_?a.effects?(a.effects.complete=function(){s.resolveWith(l)},m.stop(!0).animate({scrollTop:_},a.effects)):(m[0].scrollTop=_,s.resolveWith(this)):s.resolveWith(this),s.promise()):(this.warn("scrollIntoView(): node is invisible."),L())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e,t){return this.tree._callHook("nodeSetSelected",this,e,t)},setStatus:function(e,t,n){return this.tree._callHook("nodeSetStatus",this,e,t,n)},setTitle:function(e){this.title=e,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var n,r,i=this.children;if(i){if(e=e||function(e,t){var n=e.title.toLowerCase(),r=t.title.toLowerCase();return n===r?0:r<n?1:-1},i.sort(e),t)for(n=0,r=i.length;n<r;n++)i[n].children&&i[n].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(e,t){var n,r,i,o={},a=this;if(w.each(I,function(e,t){(a[t]||!1===a[t])&&(o[t]=a[t])}),w.isEmptyObject(this.data)||(o.data=w.extend({},this.data),w.isEmptyObject(o.data)&&delete o.data),t&&t(o,a),e&&this.hasChildren())for(o.children=[],n=0,r=this.children.length;n<r;n++)(i=this.children[n]).isStatusNode()||o.children.push(i.toDict(!0,t));return o},toggleClass:function(e,t){var n,r,i=e.match(/\S+/g)||[],o=0,a=!1,s=this[this.tree.statusClassPropName],l=" "+(this.extraClasses||"")+" ";for(s&&w(s).toggleClass(e,t);n=i[o++];)if(r=0<=l.indexOf(" "+n+" "),t=t===b?!r:!!t)r||(l+=n+" ",a=!0);else for(;-1<l.indexOf(" "+n+" ");)l=l.replace(" "+n+" "," ");return this.extraClasses=w.trim(l),a},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},triggerModifyChild:function(e,t,n){var r,i=this.tree.options.modifyChild;i&&(t&&t.parent!==this&&w.error("childNode "+t+" is not a child of "+this),r={node:this,tree:this.tree,operation:e,childNode:t||null},n&&w.extend(r,n),i({type:"modifyChild"},r))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var n,r,i=!0,o=this.children;if(!0===t&&(!1===(i=e(this))||"skip"===i))return i;if(o)for(n=0,r=o.length;n<r&&!1!==(i=o[n].visit(e,!0));n++);return i},visitAndLoad:function(n,e,t){var r,i,o,a=this;return n&&!0===e&&(!1===(i=n(a))||"skip"===i)?t?i:L():a.children||a.lazy?(r=new w.Deferred,o=[],a.load().done(function(){for(var e=0,t=a.children.length;e<t;e++){if(!1===(i=a.children[e].visitAndLoad(n,!0,!0))){r.reject();break}"skip"!==i&&o.push(i)}w.when.apply(this,o).then(function(){r.resolve()})}),r.promise()):L()},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var n=this.parent;n;){if(!1===e(n))return!1;n=n.parent}return!0},visitSiblings:function(e,t){var n,r,i,o=this.parent.children;for(n=0,r=o.length;n<r;n++)if(i=o[n],(t||i!==this)&&!1===e(i))return!1;return!0},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),t("warn",arguments)}},s.prototype={_makeHookContext:function(e,t,n){var r,i;return e.node!==b?(t&&e.originalEvent!==t&&w.error("invalid args"),r=e):e.tree?r={node:e,tree:i=e.tree,widget:i.widget,options:i.widget.options,originalEvent:t}:e.widget?r={node:null,tree:e,widget:e.widget,options:e.widget.options,originalEvent:t}:w.error("invalid args"),n&&w.extend(r,n),r},_callHook:function(e,t,n){var r=this._makeHookContext(t),i=this[e],o=Array.prototype.slice.call(arguments,2);return w.isFunction(i)||w.error("_callHook('"+e+"') is not a function"),o.unshift(r),i.apply(this,o)},_requireExtension:function(e,t,n,r){n=!!n;var i=this._local.name,o=this.options.extensions,a=w.inArray(e,o)<w.inArray(i,o),s=t&&null==this.ext[e],l=!s&&null!=n&&n!==a;return k(i&&i!==e,"invalid or same name"),!s&&!l||(r||(s||t?(r="'"+i+"' extension requires '"+e+"'",l&&(r+=" to be registered "+(n?"before":"after")+" itself")):r="If used together, `"+e+"` must be registered "+(n?"before":"after")+" `"+i+"`"),w.error(r),!1)},activateKey:function(e){var t=this.getNodeByKey(e);return t?t.setActive():this.activeNode&&this.activeNode.setActive(!1),t},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyPatch:function(e){var t,n,r,i,o,a,s=e.length,l=[];for(n=0;n<s;n++)k(2===(r=e[n]).length,"patchList must be an array of length-2-arrays"),i=r[0],o=r[1],(a=null===i?this.rootNode:this.getNodeByKey(i))?(t=new w.Deferred,l.push(t),a.applyPatch(o).always(m(t,a))):this.warn("could not find node with key '"+i+"'");return w.when.apply(w,l).promise()},clear:function(e){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){2<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),t("log",arguments))},enableUpdate:function(e){return e=!1!==e,!!this._enableUpdate==!!e?e:((this._enableUpdate=e)?(this.debug("enableUpdate(true): redraw "),this.render()):this.debug("enableUpdate(false)..."),!e)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(t,n,e){var r,i=null,o=n.parent.children,a=null,l=function(e,t,n){var r,i,o=e.children,a=o.length,s=o[t];if(s&&!1===n(s))return!1;if(s&&s.children&&s.expanded&&!1===l(s,0,n))return!1;for(r=t+1;r<a;r++)if(!1===l(e,r,n))return!1;return(i=e.parent)?l(i,i.children.indexOf(e)+1,n):l(e,0,n)};return t="string"==typeof t?(r=new RegExp("^"+t,"i"),function(e){return r.test(e.title)}):t,n=n||this.getFirstChild(),l(n.parent,o.indexOf(n),function(e){return e!==i&&(i=i||e,w(e.span).is(":visible")?(!t(e)||(a=e)===n)&&void 0:void e.debug("quicksearch: skipping hidden node"))}),a},generateFormElements:function(e,t,n){function r(e){l.append(w("<input>",{type:"checkbox",name:o,value:e.key,checked:!0}))}n=n||{};var i,o="string"==typeof e?e:"ft_"+this._id+"[]",a="string"==typeof t?t:"ft_"+this._id+"_active",s="fancytree_result_"+this._id,l=w("#"+s),u=3===this.options.selectMode&&!1!==n.stopOnParents;l.length?l.empty():l=w("<div>",{id:s}).hide().insertAfter(this.$container),!1!==t&&this.activeNode&&l.append(w("<input>",{type:"radio",name:a,value:this.activeNode.key,checked:!0})),n.filter?this.visit(function(e){var t=n.filter(e);return"skip"===t?t:void(!1!==t&&r(e))}):!1!==e&&(i=this.getSelectedNodes(u),w.each(i,function(e,t){r(t)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(t,e){var n,r;return!e&&(n=x.getElementById(this.options.idPrefix+t))?n.ftnode?n.ftnode:null:(e=e||this.rootNode,r=null,e.visit(function(e){if(e.key===t)return r=e,!1},!0),r)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){1<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),t("info",arguments))},loadKeyPath:function(e,i,t){function n(t,n,r){i.call(p,n,"loading"),n.load().done(function(){p.loadKeyPath.call(p,u[t],i,n).always(m(r,p))}).fail(function(e){p.warn("loadKeyPath: error loading: "+t+" (parent: "+h+")"),i.call(p,n,"error"),r.reject()})}var r,o,a,s,l,u,c,h,f,d=this.options.keyPathSeparator,p=this;for(i=i||w.noop,w.isArray(e)||(e=[e]),u={},a=0;a<e.length;a++)for(h=t||this.rootNode,(s=e[a]).charAt(0)===d&&(s=s.substr(1)),f=s.split(d);f.length;){if(l=f.shift(),!(c=h._findDirectChild(l))){this.warn("loadKeyPath: key not found: "+l+" (parent: "+h+")"),i.call(this,l,"error");break}if(0===f.length){i.call(this,c,"ok");break}if(c.lazy&&c.hasChildren()===b){i.call(this,c,"loaded"),u[l]?u[l].push(f.join(d)):u[l]=[f.join(d)];break}i.call(this,c,"loaded"),h=c}for(l in r=[],u)null==(c=h._findDirectChild(l))&&(c=p.getNodeByKey(l)),o=new w.Deferred,r.push(o),n(l,c,o);return w.when.apply(w,r).promise()},reactivate:function(e){var t,n=this.activeNode;return n?(this.activeNode=null,t=n.setActive(!0,{noFocus:!0}),e&&n.setFocus(),t):L()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},toDict:function(e,t){var n=this.rootNode.toDict(!0,t);return e?n:n.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(e,t,n,r){var i=this._makeHookContext(t,n,r),o=this.widget._trigger(e,n,i);return!1!==o&&i.result!==b?i.result:o},_triggerTreeEvent:function(e,t,n){var r=this._makeHookContext(this,t,n),i=this.widget._trigger(e,t,r);return!1!==i&&r.result!==b?r.result:i},visit:function(e){return this.rootNode.visit(e,!1)},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),t("warn",arguments)}},w.extend(s.prototype,{nodeClick:function(e){var t,n,r=e.targetType,i=e.node;if("expander"===r){if(i.isLoading())return void i.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",e)}else if("checkbox"===r)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(t=!(n=!1),i.folder)switch(e.options.clickFolderMode){case 2:t=!(n=!0);break;case 3:n=t=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),n&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var n,r,i,o=e.node;if(o.parent)for(r=0,i=(n=o.parent.children).length;r<i;r++)n[r]!==o&&n[r].expanded&&this._callHook("nodeSetExpanded",n[r],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(e){var t,n,r,i=e.originalEvent,o=e.node,a=e.tree,s=e.options,l=i.which,u=String.fromCharCode(l),c=!(i.altKey||i.ctrlKey||i.metaKey||i.shiftKey),h=w(i.target),f=!0,d=!(i.ctrlKey||!s.autoActivate);if(o||(r=this.getActiveNode()||this.getFirstChild())&&(r.setFocus(),(o=e.node=this.focusNode).debug("Keydown force focus on active node")),s.quicksearch&&c&&/\w/.test(u)&&!P[l]&&!h.is(":input:enabled"))return 500<(n=(new Date).getTime())-a.lastQuicksearchTime&&(a.lastQuicksearchTerm=""),a.lastQuicksearchTime=n,a.lastQuicksearchTerm+=u,(t=a.findNextNode(a.lastQuicksearchTerm,a.getActiveNode()))&&t.setActive(),void i.preventDefault();switch(_.eventToString(i)){case"+":case"=":a.nodeSetExpanded(e,!0);break;case"-":a.nodeSetExpanded(e,!1);break;case"space":o.isPagingNode()?a._triggerNodeEvent("clickPaging",e,i):s.checkbox?a.nodeToggleSelected(e):a.nodeSetActive(e,!0);break;case"return":a.nodeSetActive(e,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":o.navigate(i.which,d,!0);break;default:f=!1}f&&i.preventDefault()},nodeLoadChildren:function(o,a){var t,n,e,s=o.tree,l=o.node,u=(new Date).getTime();return w.isFunction(a)&&(a=a.call(s,{type:"source"},o),k(!w.isFunction(a),"source callback must not return another function")),a.url&&(l._requestId&&l.warn("Recursive load request #"+u+" while #"+l._requestId+" is pending."),t=w.extend({},o.options.ajax,a),l._requestId=u,e=t.debugDelay?(n=t.debugDelay,w.isArray(n)&&(n=n[0]+Math.random()*(n[1]-n[0])),l.warn("nodeLoadChildren waiting debugDelay "+Math.round(n)+" ms ..."),t.debugDelay=!1,w.Deferred(function(e){setTimeout(function(){w.ajax(t).done(function(){e.resolveWith(this,arguments)}).fail(function(){e.rejectWith(this,arguments)})},n)})):w.ajax(t),a=new w.Deferred,e.done(function(e,t,n){var r,i;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof e||w.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),l._requestId&&l._requestId>u)a.rejectWith(this,[c]);else{if(o.options.postProcess){try{i=s._triggerNodeEvent("postProcess",o,o.originalEvent,{response:e,error:null,dataType:this.dataType})}catch(e){i={error:e,message:""+e,details:"postProcess failed"}}if(i.error)return r=w.isPlainObject(i.error)?i.error:{message:i.error},r=s._makeHookContext(l,null,r),void a.rejectWith(this,[r]);e=w.isArray(i)?i:e}else e&&e.hasOwnProperty("d")&&o.options.enableAspx&&(e="string"==typeof e.d?w.parseJSON(e.d):e.d);a.resolveWith(this,[e])}}).fail(function(e,t,n){var r=s._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:n,details:e.status+": "+n});a.rejectWith(this,[r])})),w.isFunction(a.then)&&w.isFunction(a.catch)&&(e=a,a=new w.Deferred,e.then(function(e){a.resolve(e)},function(e){a.reject(e)})),w.isFunction(a.promise)&&(s.nodeSetStatus(o,"loading"),a.done(function(e){s.nodeSetStatus(o,"ok"),l._requestId=null}).fail(function(e){var t;return e===c?void l.warn("Ignored response for obsolete load request #"+u+" (expected #"+l._requestId+")"):(e.node&&e.error&&e.message?t=e:"[object Object]"===(t=s._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""})).message&&(t.message=""),l.warn("Load children failed ("+t.message+")",t),void(!1!==s._triggerNodeEvent("loadError",t,null)&&s.nodeSetStatus(o,"error",t.message,t.details)))})),w.when(a).done(function(e){var t;w.isPlainObject(e)&&(k(l.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),k(w.isArray(e.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),e=(t=e).children,delete t.children,w.extend(s.data,t)),k(w.isArray(e),"expected array of children"),l._setChildren(e),s._triggerNodeEvent("loadChildren",l)})},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(e,t){var n,r=e.node,i=w.extend({},e,{node:t}),o=r.children;return 1===o.length?(k(t===o[0],"invalid single child"),this.nodeRemoveChildren(e)):(this.activeNode&&(t===this.activeNode||this.activeNode.isDescendantOf(t))&&this.activeNode.setActive(!1),this.focusNode&&(t===this.focusNode||this.focusNode.isDescendantOf(t))&&(this.focusNode=null),this.nodeRemoveMarkup(i),this.nodeRemoveChildren(i),k(0<=(n=w.inArray(t,o)),"invalid child"),r.triggerModifyChild("remove",t),t.visit(function(e){e.parent=null},!0),this._callHook("treeRegisterNode",this,!1,t),void o.splice(n,1))},nodeRemoveChildMarkup:function(e){var t=e.node;t.ul&&(t.isRootNode()?w(t.ul).empty():(w(t.ul).remove(),t.ul=null),t.visit(function(e){e.li=e.ul=null}))},nodeRemoveChildren:function(e){var t=e.tree,n=e.node;n.children&&(this.activeNode&&this.activeNode.isDescendantOf(n)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(n)&&(this.focusNode=null),this.nodeRemoveChildMarkup(e),w.extend({},e),n.triggerModifyChild("remove",null),n.visit(function(e){e.parent=null,t._callHook("treeRegisterNode",t,!1,e)}),n.lazy?n.children=[]:n.children=null,n.isRootNode()||(n.expanded=!1),this.nodeRenderStatus(e))},nodeRemoveMarkup:function(e){var t=e.node;t.li&&(w(t.li).remove(),t.li=null),this.nodeRemoveChildMarkup(e)},nodeRender:function(e,t,n,r,i){var o,a,s,l,u,c,h,f=e.node,d=e.tree,p=e.options,m=p.aria,g=!1,y=f.parent,_=!y,v=f.children,b=null;if(!1!==d._enableUpdate&&(_||y.ul)){if(k(_||y.ul,"parent UL must exist"),_||(f.li&&(t||f.li.parentNode!==f.parent.ul)&&(f.li.parentNode===f.parent.ul?b=f.li.nextSibling:this.debug("Unlinking "+f+" (must be child of "+f.parent+")"),this.nodeRemoveMarkup(e)),f.li?this.nodeRenderStatus(e):(g=!0,f.li=x.createElement("li"),(f.li.ftnode=f).key&&p.generateIds&&(f.li.id=p.idPrefix+f.key),f.span=x.createElement("span"),f.span.className="fancytree-node",m&&!f.tr&&w(f.li).attr("role","treeitem"),f.li.appendChild(f.span),this.nodeRenderTitle(e),p.createNode&&p.createNode.call(d,{type:"createNode"},e)),p.renderNode&&p.renderNode.call(d,{type:"renderNode"},e)),v){if(_||f.expanded||!0===n){for(f.ul||(f.ul=x.createElement("ul"),(!0!==r||i)&&f.expanded||(f.ul.style.display="none"),m&&w(f.ul).attr("role","group"),f.li?f.li.appendChild(f.ul):f.tree.$div.append(f.ul)),l=0,u=v.length;l<u;l++)h=w.extend({},e,{node:v[l]}),this.nodeRender(h,t,n,!1,!0);for(o=f.ul.firstChild;o;)o=(s=o.ftnode)&&s.parent!==f?(f.debug("_fixParent: remove missing "+s,o),c=o.nextSibling,o.parentNode.removeChild(o),c):o.nextSibling;for(o=f.ul.firstChild,l=0,u=v.length-1;l<u;l++)(a=v[l])!==(s=o.ftnode)?f.ul.insertBefore(a.li,s.li):o=o.nextSibling}}else f.ul&&(this.warn("remove child markup for "+f),this.nodeRemoveChildMarkup(e));_||g&&y.ul.insertBefore(f.li,b)}},nodeRenderTitle:function(e,t){var n,r,i,o,a,s,l=e.node,u=e.tree,c=e.options,h=c.aria,f=l.getLevel(),d=[];t!==b&&(l.title=t),l.span&&!1!==u._enableUpdate&&(a=h&&!1!==l.hasChildren()?" role='button'":"",f<c.minExpandLevel?(l.lazy||(l.expanded=!0),1<f&&d.push("<span "+a+" class='fancytree-expander fancytree-expander-fixed'></span>")):d.push("<span "+a+" class='fancytree-expander'></span>"),(n=_.evalOption("checkbox",l,l,c,!1))&&!l.isStatusNode()&&(a=h?" role='checkbox'":"",r="fancytree-checkbox",("radio"===n||l.parent&&l.parent.radiogroup)&&(r+=" fancytree-radio"),d.push("<span "+a+" class='"+r+"'></span>")),l.data.iconClass!==b&&(l.icon?w.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(l.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),l.icon=l.data.iconClass)),"boolean"!=typeof(i=_.evalOption("icon",l,l,c,!0))&&(i=""+i),!1!==i&&(a=h?" role='presentation'":"","string"==typeof i?C.test(i)?(i="/"===i.charAt(0)?i:(c.imagePath||"")+i,d.push("<img src='"+i+"' class='fancytree-icon' alt='' />")):d.push("<span "+a+" class='fancytree-custom-icon "+i+"'></span>"):d.push("<span "+a+" class='fancytree-icon'></span>")),o="",c.renderTitle&&(o=c.renderTitle.call(u,{type:"renderTitle"},e)||""),o||(!0===(s=_.evalOption("tooltip",l,l,c,null))&&(s=l.title),o="<span class='fancytree-title'"+(s=s?" title='"+(""+s).replace(S,function(e){return M[e]})+"'":"")+(c.titlesTabbable?" tabindex='0'":"")+">"+(c.escapeTitles?y(l.title):l.title)+"</span>"),d.push(o),l.span.innerHTML=d.join(""),this.nodeRenderStatus(e),c.enhanceTitle&&(e.$title=w(">span.fancytree-title",l.span),o=c.enhanceTitle.call(u,{type:"enhanceTitle"},e)||""))},nodeRenderStatus:function(e){var t,n=e.node,r=e.tree,i=e.options,o=n.hasChildren(),a=n.isLastSibling(),s=i.aria,l=i._classNames,u=[],c=n[r.statusClassPropName];c&&!1!==r._enableUpdate&&(s&&(t=w(n.tr||n.li)),u.push(l.node),r.activeNode===n&&u.push(l.active),r.focusNode===n&&u.push(l.focused),n.expanded&&u.push(l.expanded),s&&(!1!==o?t.attr("aria-expanded",Boolean(n.expanded)):t.removeAttr("aria-expanded")),n.folder&&u.push(l.folder),!1!==o&&u.push(l.hasChildren),a&&u.push(l.lastsib),n.lazy&&null==n.children&&u.push(l.lazy),n.partload&&u.push(l.partload),n.partsel&&u.push(l.partsel),_.evalOption("unselectable",n,n,i,!1)&&u.push(l.unselectable),n._isLoading&&u.push(l.loading),n._error&&u.push(l.error),n.statusNodeType&&u.push(l.statusNodePrefix+n.statusNodeType),n.selected?(u.push(l.selected),s&&t.attr("aria-selected",!0)):s&&t.attr("aria-selected",!1),n.extraClasses&&u.push(n.extraClasses),!1===o?u.push(l.combinedExpanderPrefix+"n"+(a?"l":"")):u.push(l.combinedExpanderPrefix+(n.expanded?"e":"c")+(n.lazy&&null==n.children?"d":"")+(a?"l":"")),u.push(l.combinedIconPrefix+(n.expanded?"e":"c")+(n.folder?"f":"")),c.className=u.join(" "),n.li&&w(n.li).toggleClass(l.lastsib,a))},nodeSetActive:function(e,t,n){n=n||{};var r,i=e.node,o=e.tree,a=e.options,s=!0===n.noEvents,l=!0===n.noFocus;return i===o.activeNode===(t=!1!==t)?L(i):t&&!s&&!1===this._triggerNodeEvent("beforeActivate",i,e.originalEvent)?p(i,["rejected"]):(t?(o.activeNode&&(k(o.activeNode!==i,"node was active (inconsistency)"),r=w.extend({},e,{node:o.activeNode}),o.nodeSetActive(r,!1),k(null===o.activeNode,"deactivate was out of sync?")),a.activeVisible&&i.makeVisible({scrollIntoView:l&&null==o.focusNode}),o.activeNode=i,o.nodeRenderStatus(e),l||o.nodeSetFocus(e),s||o._triggerNodeEvent("activate",i,e.originalEvent)):(k(o.activeNode===i,"node was not active (inconsistency)"),o.activeNode=null,this.nodeRenderStatus(e),s||e.tree._triggerNodeEvent("deactivate",i,e.originalEvent)),L(i))},nodeSetExpanded:function(r,i,e){e=e||{};var t,n,o,a,s,l,u=r.node,c=r.tree,h=r.options,f=!0===e.noAnimation,d=!0===e.noEvents;if(i=!1!==i,u.expanded&&i||!u.expanded&&!i)return L(u);if(i&&!u.lazy&&!u.hasChildren())return L(u);if(!i&&u.getLevel()<h.minExpandLevel)return p(u,["locked"]);if(!d&&!1===this._triggerNodeEvent("beforeExpand",u,r.originalEvent))return p(u,["rejected"]);if(f||u.isVisible()||(f=e.noAnimation=!0),n=new w.Deferred,i&&!u.expanded&&h.autoCollapse){s=u.getParentList(!1,!0),l=h.autoCollapse;try{for(h.autoCollapse=!1,o=0,a=s.length;o<a;o++)this._callHook("nodeCollapseSiblings",s[o],e)}finally{h.autoCollapse=l}}return n.done(function(){var e=u.getLastChild();i&&h.autoScroll&&!f&&e?e.scrollIntoView(!0,{topNode:u}).always(function(){d||r.tree._triggerNodeEvent(i?"expand":"collapse",r)}):d||r.tree._triggerNodeEvent(i?"expand":"collapse",r)}),t=function(e){var t=h._classNames,n=h.toggleEffect;if(u.expanded=i,c._callHook("nodeRender",r,!1,!1,!0),u.ul)if("none"!==u.ul.style.display===!!u.expanded)u.warn("nodeSetExpanded: UL.style.display already set");else{if(n&&!f)return w(u.li).addClass(t.animating),void w(u.ul).addClass(t.animating).toggle(n.effect,n.options,n.duration,function(){w(this).removeClass(t.animating),w(u.li).removeClass(t.animating),e()});u.ul.style.display=u.expanded||!parent?"":"none"}e()},i&&u.lazy&&u.hasChildren()===b?u.load().done(function(){n.notifyWith&&n.notifyWith(u,["loaded"]),t(function(){n.resolveWith(u)})}).fail(function(e){t(function(){n.rejectWith(u,["load failed ("+e+")"])})}):t(function(){n.resolveWith(u)}),n.promise()},nodeSetFocus:function(e,t){var n,r=e.tree,i=e.node,o=r.options,a=!!e.originalEvent&&w(e.originalEvent.target).is(":input");if(t=!1!==t,r.focusNode){if(r.focusNode===i&&t)return;n=w.extend({},e,{node:r.focusNode}),r.focusNode=null,this._triggerNodeEvent("blur",n),this._callHook("nodeRenderStatus",n)}t&&(this.hasFocus()||(i.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",e,!0,{calledByNode:!0})),i.makeVisible({scrollIntoView:!1}),r.focusNode=i,o.titlesTabbable?a||w(i.span).find(".fancytree-title").focus():0===w(x.activeElement).closest(".fancytree-container").length&&w(r.$container).focus(),o.aria&&w(r.$container).attr("aria-activedescendant",w(i.tr||i.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",e),o.autoScroll&&i.scrollIntoView(),this._callHook("nodeRenderStatus",e))},nodeSetSelected:function(e,t,n){n=n||{};var r=e.node,i=e.tree,o=e.options,a=!0===n.noEvents,s=r.parent;if(t=!1!==t,!_.evalOption("unselectable",r,r,o,!1)){if(r._lastSelectIntent=t,!!r.selected===t&&(3!==o.selectMode||!r.partsel||t))return t;if(!a&&!1===this._triggerNodeEvent("beforeSelect",r,e.originalEvent))return!!r.selected;t&&1===o.selectMode?(i.lastSelectedNode&&i.lastSelectedNode.setSelected(!1),r.selected=t):3!==o.selectMode||!s||s.radiogroup||r.radiogroup?s&&s.radiogroup?r.visitSiblings(function(e){e._changeSelectStatusAttrs(t&&e===r)},!0):r.selected=t:(r.selected=t,r.fixSelection3AfterClick(n)),this.nodeRenderStatus(e),i.lastSelectedNode=t?r:null,a||i._triggerNodeEvent("select",e)}},nodeSetStatus:function(e,t,n,r){function i(e,t){var n=o.children?o.children[0]:null;return n&&n.isStatusNode()?(w.extend(n,e),n.statusNodeType=t,a._callHook("nodeRenderTitle",n)):(o._setChildren([e]),o.children[0].statusNodeType=t,a.render()),o.children[0]}var o=e.node,a=e.tree;switch(t){case"ok":(function(){var e=o.children?o.children[0]:null;if(e&&e.isStatusNode()){try{o.ul&&(o.ul.removeChild(e.li),e.li=null)}catch(e){}1===o.children.length?o.children=[]:o.children.shift()}})(),o._isLoading=!1,o._error=null,o.renderStatus();break;case"loading":o.parent||i({title:a.options.strings.loading+(n?" ("+n+")":""),checkbox:!1,tooltip:r},t),o._isLoading=!0,o._error=null,o.renderStatus();break;case"error":i({title:a.options.strings.loadError+(n?" ("+n+")":""),checkbox:!1,tooltip:r},t),o._isLoading=!1,o._error={message:n,details:r},o.renderStatus();break;case"nodata":i({title:a.options.strings.noData,checkbox:!1,tooltip:r},t),o._isLoading=!1,o._error=null,o.renderStatus();break;default:w.error("invalid node status "+t)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){var t=e.node,n=!t.selected;return t.partsel&&!t.selected&&!0===t._lastSelectIntent&&(n=!1,t.selected=!0),t._lastSelectIntent=n,this.nodeSetSelected(e,n)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden")},treeInit:function(e){var t=e.tree,n=t.options;t.$container.attr("tabindex",n.tabindex),n.rtl?t.$container.attr("DIR","RTL").addClass("fancytree-rtl"):t.$container.removeAttr("DIR").removeClass("fancytree-rtl"),n.aria&&(t.$container.attr("role","tree"),1!==n.selectMode&&t.$container.attr("aria-multiselectable",!0)),this.treeLoad(e)},treeLoad:function(e,t){var n,r,i,o=e.tree,a=e.widget.element,s=w.extend({},e,{node:this.rootNode});if(o.rootNode.children&&this.treeClear(e),t=t||this.options.source)"string"==typeof t&&w.error("Not implemented");else switch(r=a.data("type")||"html"){case"html":(i=a.find(">ul:first")).addClass("ui-fancytree-source ui-helper-hidden"),t=w.ui.fancytree.parseHtml(i),this.data=w.extend(this.data,g(i));break;case"json":t=w.parseJSON(a.text()),a.contents().filter(function(){return 3===this.nodeType}).remove(),w.isPlainObject(t)&&(k(w.isArray(t.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),t=(n=t).children,delete n.children,w.extend(o.data,n));break;default:w.error("Invalid data-type: "+r)}return this.nodeLoadChildren(s,t).done(function(){o.render(),3===e.options.selectMode&&o.rootNode.fixSelection3FromEndNodes(),o.activeNode&&o.options.activeVisible&&o.activeNode.makeVisible(),o._triggerTreeEvent("init",null,{status:!0})}).fail(function(){o.render(),o._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(e,t,n){},treeSetFocus:function(e,t,n){var r;(t=!1!==t)!==this.hasFocus()&&(!(this._hasFocus=t)&&this.focusNode?this.focusNode.setFocus(!1):!t||n&&n.calledByNode||w(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",t),this._triggerTreeEvent(t?"focusTree":"blurTree"),t&&!this.activeNode&&((r=this._lastMousedownNode||this.getFirstChild())&&r.setFocus()))},treeSetOption:function(e,t,n){var r=e.tree,i=!0,o=!1;switch(t){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":r._callHook("treeCreate",r),o=!0;break;case"escapeTitles":case"tooltip":o=!0;break;case"rtl":!1===n?r.$container.removeAttr("DIR").removeClass("fancytree-rtl"):r.$container.attr("DIR","RTL").addClass("fancytree-rtl"),o=!0;break;case"source":i=!1,r._callHook("treeLoad",r,n),o=!0}r.debug("set option "+t+"="+n+" <"+typeof n+">"),i&&(this.widget._super?this.widget._super.call(this.widget,t,n):w.Widget.prototype._setOption.call(this.widget,t,n)),o&&r.render(!0,!1)}}),w.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,_classNames:{node:"fancytree-node",folder:"fancytree-folder",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new s(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var e,t,n,r=this.options,i=r.extensions;this.tree;for(n=0;n<i.length;n++)t=i[n],(e=w.ui.fancytree._extensions[t])||w.error("Could not apply extension '"+t+"' (it is not registered, did you forget to include it?)"),this.tree.options[t]=w.extend(!0,{},e.options,this.tree.options[t]),k(this.tree.ext[t]===b,"Extension name must not exist as Fancytree.ext attribute: '"+t+"'"),this.tree.ext[t]={},a(this.tree,0,e,t),e;r.icons!==b&&(!0!==r.icon?w.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),r.icon=r.icons)),r.iconClass!==b&&(r.icon?w.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),r.icon=r.iconClass)),r.tabbable!==b&&(r.tabindex=r.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+r.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),w.Widget.prototype.destroy.call(this)},_unbind:function(){var e=this.tree._ns;this.element.off(e),this.tree.$container.off(e),w(x).off(e)},_bind:function(){var a=this,s=this.options,o=this.tree,e=o._ns;this._unbind(),o.$container.on("focusin"+e+" focusout"+e,function(e){var t=_.getNode(e),n="focusin"===e.type;t?o._callHook("nodeSetFocus",o._makeHookContext(t,e),n):o._callHook("treeSetFocus",o,n)}).on("selectstart"+e,"span.fancytree-title",function(e){e.preventDefault()}).on("keydown"+e,function(e){if(s.disabled||!1===s.keyboard)return!0;var t,n=o.focusNode,r=o._makeHookContext(n||o,e),i=o.phase;try{return o.phase="userEvent","preventNav"===(t=n?o._triggerNodeEvent("keydown",n,e):o._triggerTreeEvent("keydown",e))?t=!0:!1!==t&&(t=o._callHook("nodeKeydown",r)),t}finally{o.phase=i}}).on("mousedown"+e,function(e){var t=_.getEventTarget(e);a.tree._lastMousedownNode=t?t.node:null}).on("click"+e+" dblclick"+e,function(e){if(s.disabled)return!0;var t,n=_.getEventTarget(e),r=n.node,i=a.tree,o=i.phase;if(!r)return!0;t=i._makeHookContext(r,e);try{switch(i.phase="userEvent",e.type){case"click":return t.targetType=n.type,r.isPagingNode()?!0===i._triggerNodeEvent("clickPaging",t,e):!1!==i._triggerNodeEvent("click",t,e)&&i._callHook("nodeClick",t);case"dblclick":return t.targetType=n.type,!1!==i._triggerNodeEvent("dblclick",t,e)&&i._callHook("nodeDblclick",t)}}finally{i.phase=o}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(e){return this.tree.getNodeByKey(e)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),_=w.ui.fancytree,w.extend(w.ui.fancytree,{version:"2.24.0",buildType:"production",debugLevel:1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:s,_FancytreeNodeClass:u,jquerySupports:{positionMyOfs:function(e,t,n,r){var i,o,a,s=w.map(w.trim(e).split("."),function(e){return parseInt(e,10)}),l=w.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)});for(i=0;i<l.length;i++)if((o=s[i]||0)!==(a=l[i]||0))return a<o;return!0}(w.ui.version,1,9)},assert:function(e,t){return k(e,t)},debounce:function(t,n,r,i){var o;return 3===arguments.length&&"boolean"!=typeof r&&(i=r,r=!1),function(){var e=arguments;i=i||this,r&&!o&&n.apply(i,e),clearTimeout(o),o=setTimeout(function(){r||n.apply(i,e),o=null},t)}},debug:function(e){2<=w.ui.fancytree.debugLevel&&t("log",arguments)},error:function(e){t("error",arguments)},escapeHtml:y,fixPositionOptions:function(e){if((e.offset||0<=(""+e.my+e.at).indexOf("%"))&&w.error("expected new position syntax (but '%' is not supported)"),!w.ui.fancytree.jquerySupports.positionMyOfs){var t=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(e.my),n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(e.at),r=(t[2]?+t[2]:0)+(n[2]?+n[2]:0),i=(t[4]?+t[4]:0)+(n[4]?+n[4]:0);e=w.extend({},e,{my:t[1]+" "+t[3],at:n[1]+" "+n[3]}),(r||i)&&(e.offset=r+" "+i)}return e},getEventTargetType:function(e){return this.getEventTarget(e).type},getEventTarget:function(e){var t=e&&e.target?e.target.className:"",n={node:this.getNode(e.target),type:b};return/\bfancytree-title\b/.test(t)?n.type="title":/\bfancytree-expander\b/.test(t)?n.type=!1===n.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(t)?n.type="checkbox":/\bfancytree-icon\b/.test(t)?n.type="icon":/\bfancytree-node\b/.test(t)?n.type="title":e&&e.target&&w(e.target).closest(".fancytree-title").length&&(n.type="title"),n},getNode:function(e){if(e instanceof u)return e;for(e instanceof jQuery?e=e[0]:e.originalEvent!==b&&(e=e.target);e;){if(e.ftnode)return e.ftnode;e=e.parentNode}return null},getTree:function(e){var t;return e instanceof s?e:(e===b&&(e=0),"number"==typeof e?e=w(".fancytree-container").eq(e):"string"==typeof e?e=w(e).eq(0):e.selector!==b?e=e.eq(0):e.originalEvent!==b&&(e=w(e.target)),(t=(e=e.closest(":ui-fancytree")).data("ui-fancytree")||e.data("fancytree"))?t.tree:null)},evalOption:function(e,t,n,r,i){var o,a,s=t.tree,l=r[e],u=n[e];return w.isFunction(l)?(o={node:t,tree:s,widget:s.widget,options:s.widget.options},null==(a=l.call(s,{type:e},o))&&(a=u)):a=null!=u?u:l,null==a&&(a=i),a},eventToString:function(e){var t=e.which,n=e.type,r=[];return e.altKey&&r.push("alt"),e.ctrlKey&&r.push("ctrl"),e.metaKey&&r.push("meta"),e.shiftKey&&r.push("shift"),"click"===n||"dblclick"===n?r.push(h[e.button]+n):i[t]||r.push(P[t]||String.fromCharCode(t).toLowerCase()),r.join("+")},info:function(e){1<=w.ui.fancytree.debugLevel&&t("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(e,t,n){var r,i=e[t]||w.noop;e[t]=function(){try{return r=this._super,this._super=i,n.apply(this,arguments)}finally{this._super=r}}},parseHtml:function(a){var s,l,u,c,h,f,d,p,e=a.find(">li"),m=[];return e.each(function(){var e,t,n=w(this),r=n.find(">span:first",this),i=r.length?null:n.find(">a:first"),o={tooltip:null,data:{}};for(r.length?o.title=r.html():i&&i.length?(o.title=i.html(),o.data.href=i.attr("href"),o.data.target=i.attr("target"),o.tooltip=i.attr("title")):(o.title=n.html(),0<=(h=o.title.search(/<ul/i))&&(o.title=o.title.substring(0,h))),o.title=w.trim(o.title),c=0,f=E.length;c<f;c++)o[E[c]]=b;for(s=this.className.split(" "),u=[],c=0,f=s.length;c<f;c++)l=s[c],T[l]?o[l]=!0:u.push(l);if(o.extraClasses=u.join(" "),(d=n.attr("title"))&&(o.tooltip=d),(d=n.attr("id"))&&(o.key=d),n.attr("hideCheckbox")&&(o.checkbox=!1),(e=g(n))&&!w.isEmptyObject(e)){for(t in O)e.hasOwnProperty(t)&&(e[O[t]]=e[t],delete e[t]);for(c=0,f=I.length;c<f;c++)d=I[c],null!=(p=e[d])&&(delete e[d],o[d]=p);w.extend(o.data,e)}(a=n.find(">ul:first")).length?o.children=w.ui.fancytree.parseHtml(a):o.children=o.lazy?b:null,m.push(o)}),m},registerExtension:function(e){k(null!=e.name,"extensions must have a `name` property."),k(null!=e.version,"extensions must have a `version` property."),w.ui.fancytree._extensions[e.name]=e},unescapeHtml:function(e){var t=x.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},warn:function(e){t("warn",arguments)}})}}(jQuery,window,document)},{}],432:[function(e,t,n){var r,i;r="undefined"!=typeof window?window:this,i=function(k,e){var h=[],p=k.document,c=h.slice,m=h.concat,s=h.push,i=h.indexOf,n={},t=n.toString,g=n.hasOwnProperty,y={},L=function(e,t){return new L.fn.init(e,t)},r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,a=/-([\da-z])/gi,l=function(e,t){return t.toUpperCase()};function u(e){var t=!!e&&"length"in e&&e.length,n=L.type(e);return"function"!==n&&!L.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}L.fn=L.prototype={jquery:"1.12.4",constructor:L,selector:"",length:0,toArray:function(){return c.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:c.call(this)},pushStack:function(e){var t=L.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return L.each(this,e)},map:function(n){return this.pushStack(L.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:h.sort,splice:h.splice},L.extend=L.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||L.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],a!==(n=i[r])&&(u&&n&&(L.isPlainObject(n)||(t=L.isArray(n)))?(o=t?(t=!1,e&&L.isArray(e)?e:[]):e&&L.isPlainObject(e)?e:{},a[r]=L.extend(u,o,n)):void 0!==n&&(a[r]=n));return a},L.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===L.type(e)},isArray:Array.isArray||function(e){return"array"===L.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!L.isArray(e)&&0<=t-parseFloat(t)+1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==L.type(e)||e.nodeType||L.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!y.ownFirst)for(t in e)return g.call(e,t);for(t in e);return void 0===t||g.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[t.call(e)]||"object":typeof e},globalEval:function(e){e&&L.trim(e)&&(k.execScript||function(e){k.eval.call(k,e)})(e)},camelCase:function(e){return e.replace(o,"ms-").replace(a,l)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(u(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(r,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(u(Object(e))?L.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(i)return i.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(u(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return m.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(i=e[t],t=e,e=i),L.isFunction(e))return n=c.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(c.call(arguments)))}).guid=e.guid=e.guid||L.guid++,r},now:function(){return+new Date},support:y}),"function"==typeof Symbol&&(L.fn[Symbol.iterator]=h[Symbol.iterator]),L.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var f=function(n){var e,p,b,o,i,m,h,g,w,l,u,x,k,a,L,y,s,c,_,C="sizzle"+1*new Date,v=n.document,S=0,r=0,f=ie(),d=ie(),M=ie(),P=function(e,t){return e===t&&(u=!0),0},E={}.hasOwnProperty,t=[],T=t.pop,I=t.push,O=t.push,D=t.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},A="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B="\\["+j+"*("+R+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+j+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",z=new RegExp(j+"+","g"),q=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),U=new RegExp("^"+j+"*,"+j+"*"),G=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),$=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),V=new RegExp(F),H=new RegExp("^"+R+"$"),W={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+A+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,Y=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),te=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ne=function(){x()};try{O.apply(t=D.call(v.childNodes),v.childNodes),t[v.childNodes.length].nodeType}catch(e){O={apply:t.length?function(e,t){I.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,n,r){var i,o,a,s,l,u,c,h,f=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!r&&((t?t.ownerDocument||t:v)!==k&&x(t),t=t||k,L)){if(11!==d&&(u=J.exec(e)))if(i=u[1]){if(9===d){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&_(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return O.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&p.getElementsByClassName&&t.getElementsByClassName)return O.apply(n,t.getElementsByClassName(i)),n}if(p.qsa&&!M[e+" "]&&(!y||!y.test(e))){if(1!==d)f=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(Y,"\\$&"):t.setAttribute("id",s=C),o=(c=m(e)).length,l=H.test(s)?"#"+s:"[id='"+s+"']";o--;)c[o]=l+" "+pe(c[o]);h=c.join(","),f=X.test(e)&&fe(t.parentNode)||t}if(h)try{return O.apply(n,f.querySelectorAll(h)),n}catch(e){}finally{s===C&&t.removeAttribute("id")}}}return g(e.replace(q,"$1"),t,n,r)}function ie(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function oe(e){return e[C]=!0,e}function ae(e){var t=k.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ce(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function he(a){return oe(function(o){return o=+o,oe(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=re.support={},i=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},x=re.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:v;return r!==k&&9===r.nodeType&&r.documentElement&&(a=(k=r).documentElement,L=!i(k),(n=k.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ne,!1):n.attachEvent&&n.attachEvent("onunload",ne)),p.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=ae(function(e){return e.appendChild(k.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=Z.test(k.getElementsByClassName),p.getById=ae(function(e){return a.appendChild(e).id=C,!k.getElementsByName||!k.getElementsByName(C).length}),p.getById?(b.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}},b.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var n=e.replace(ee,te);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),b.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&L)return t.getElementsByClassName(e)},s=[],y=[],(p.qsa=Z.test(k.querySelectorAll))&&(ae(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+j+"*(?:value|"+A+")"),e.querySelectorAll("[id~="+C+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||y.push(".#.+[+~]")}),ae(function(e){var t=k.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(p.matchesSelector=Z.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ae(function(e){p.disconnectedMatch=c.call(e,"div"),c.call(e,"[s!='']:x"),s.push("!=",F)}),y=y.length&&new RegExp(y.join("|")),s=s.length&&new RegExp(s.join("|")),t=Z.test(a.compareDocumentPosition),_=t||Z.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===k||e.ownerDocument===v&&_(v,e)?-1:t===k||t.ownerDocument===v&&_(v,t)?1:l?N(l,e)-N(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===k?-1:t===k?1:i?-1:o?1:l?N(l,e)-N(l,t):0;if(i===o)return le(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?le(a[r],s[r]):a[r]===v?-1:s[r]===v?1:0}),k},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==k&&x(e),t=t.replace($,"='$1']"),p.matchesSelector&&L&&!M[t+" "]&&(!s||!s.test(t))&&(!y||!y.test(t)))try{var n=c.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,k,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==k&&x(e),_(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==k&&x(e);var n=b.attrHandle[t.toLowerCase()],r=n&&E.call(b.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==r?r:p.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(u=!p.detectDuplicates,l=!p.sortStable&&e.slice(0),e.sort(P),u){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return l=null,e},o=re.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(b=re.selectors={cacheLength:50,createPseudo:oe,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[3]||e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=m(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=f[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&f(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=re.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(z," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,e,t,m,g){var y="nth"!==p.slice(0,3),_="last"!==p.slice(-4),v="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,l,u=y!==_?"nextSibling":"previousSibling",c=e.parentNode,h=v&&e.nodeName.toLowerCase(),f=!n&&!v,d=!1;if(c){if(y){for(;u;){for(a=e;a=a[u];)if(v?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[_?c.firstChild:c.lastChild],_&&f){for(d=(s=(r=(i=(o=(a=c)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(d=s=0)||l.pop();)if(1===a.nodeType&&++d&&a===e){i[p]=[S,s,d];break}}else if(f&&(d=s=(r=(i=(o=(a=e)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&r[1]),!1===d)for(;(a=++s&&a&&a[u]||(d=s=0)||l.pop())&&((v?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++d||(f&&((i=(o=a[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[S,d]),a!==e)););return(d-=g)===m||d%m==0&&0<=d/m}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return a[C]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=N(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:oe(function(e){var r=[],i=[],s=h(e.replace(q,"$1"));return s[C]?oe(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(ee,te),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:oe(function(n){return H.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ee,te).toLowerCase(),function(e){var t;do{if(t=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=ce(e);function de(){}function pe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(s,e,t){var l=e.dir,u=t&&"parentNode"===l,c=r++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||u)return s(e,t,n)}:function(e,t,n){var r,i,o,a=[S,c];if(n){for(;e=e[l];)if((1===e.nodeType||u)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||u){if((r=(i=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}))[l])&&r[0]===S&&r[1]===c)return a[2]=r[2];if((i[l]=a)[2]=s(e,t,n))return!0}}}function ge(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function ye(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function _e(d,p,m,g,y,e){return g&&!g[C]&&(g=_e(g)),y&&!y[C]&&(y=_e(y,e)),oe(function(e,t,n,r){var i,o,a,s=[],l=[],u=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}(p||"*",n.nodeType?[n]:n,[]),h=!d||!e&&p?c:ye(c,s,d,n,r),f=m?y||(e?d:u||g)?[]:t:h;if(m&&m(h,f,n,r),g)for(i=ye(f,l),g(i,[],n,r),o=i.length;o--;)(a=i[o])&&(f[l[o]]=!(h[l[o]]=a));if(e){if(y||d){if(y){for(i=[],o=f.length;o--;)(a=f[o])&&i.push(h[o]=a);y(null,f=[],i,r)}for(o=f.length;o--;)(a=f[o])&&-1<(i=y?N(e,a):s[o])&&(e[i]=!(t[i]=a))}}else f=ye(f===t?f.splice(u,f.length):f),y?y(null,t,f,r):O.apply(t,f)})}function ve(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,l=me(function(e){return e===i},a,!0),u=me(function(e){return-1<N(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?l(e,t,n):u(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[me(ge(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[C]){for(n=++s;n<r&&!b.relative[e[n].type];n++);return _e(1<s&&ge(c),1<s&&pe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(q,"$1"),t,s<n&&ve(e.slice(s,n)),n<r&&ve(e=e.slice(n)),n<r&&pe(e))}c.push(t)}return ge(c)}return de.prototype=b.filters=b.pseudos,b.setFilters=new de,m=re.tokenize=function(e,t){var n,r,i,o,a,s,l,u=d[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=b.preFilter;a;){for(o in n&&!(r=U.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=G.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(q," ")}),a=a.slice(n.length)),b.filter)!(r=W[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?re.error(e):d(e,s).slice(0)},h=re.compile=function(e,t){var n,g,y,_,v,r,i=[],o=[],a=M[e+" "];if(!a){for(t||(t=m(e)),n=t.length;n--;)(a=ve(t[n]))[C]?i.push(a):o.push(a);(a=M(e,(g=o,_=0<(y=i).length,v=0<g.length,r=function(e,t,n,r,i){var o,a,s,l=0,u="0",c=e&&[],h=[],f=w,d=e||v&&b.find.TAG("*",i),p=S+=null==f?1:Math.random()||.1,m=d.length;for(i&&(w=t===k||t||i);u!==m&&null!=(o=d[u]);u++){if(v&&o){for(a=0,t||o.ownerDocument===k||(x(o),n=!L);s=g[a++];)if(s(o,t||k,n)){r.push(o);break}i&&(S=p)}_&&((o=!s&&o)&&l--,e&&c.push(o))}if(l+=u,_&&u!==l){for(a=0;s=y[a++];)s(c,h,t,n);if(e){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=T.call(r));h=ye(h)}O.apply(r,h),i&&!e&&0<h.length&&1<l+y.length&&re.uniqueSort(r)}return i&&(S=p,w=f),c},_?oe(r):r))).selector=e}return a},g=re.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,c=!r&&m(e=u.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&p.getById&&9===t.nodeType&&L&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(ee,te),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=W.needsContext.test(e)?0:o.length;i--&&(a=o[i],!b.relative[s=a.type]);)if((l=b.find[s])&&(r=l(a.matches[0].replace(ee,te),X.test(o[0].type)&&fe(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&pe(o)))return O.apply(n,r),n;break}}return(u||h(e,c))(r,t,!L,n,!t||X.test(e)&&fe(t.parentNode)||t),n},p.sortStable=C.split("").sort(P).join("")===C,p.detectDuplicates=!!u,x(),p.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(k.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||se(A,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re}(k);L.find=f,L.expr=f.selectors,L.expr[":"]=L.expr.pseudos,L.uniqueSort=L.unique=f.uniqueSort,L.text=f.getText,L.isXMLDoc=f.isXML,L.contains=f.contains;var d=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&L(e).is(n))break;r.push(e)}return r},_=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},v=L.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(e,n,r){if(L.isFunction(n))return L.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return L.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(w.test(n))return L.filter(n,e,r);n=L.filter(n,e)}return L.grep(e,function(e){return-1<L.inArray(e,n)!==r})}L.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?L.find.matchesSelector(r,e)?[r]:[]:L.find.matches(e,L.grep(t,function(e){return 1===e.nodeType}))},L.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(L(e).filter(function(){for(t=0;t<i;t++)if(L.contains(r[t],this))return!0}));for(t=0;t<i;t++)L.find(e,r[t],n);return(n=this.pushStack(1<i?L.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&v.test(e)?L(e):e||[],!1).length}});var C,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(L.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||C,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):L.isFunction(e)?void 0!==n.ready?n.ready(e):e(L):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),L.makeArray(e,this));if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof L?t[0]:t,L.merge(this,L.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:p,!0)),b.test(r[1])&&L.isPlainObject(t))for(r in t)L.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((i=p.getElementById(r[2]))&&i.parentNode){if(i.id!==r[2])return C.find(e);this.length=1,this[0]=i}return this.context=p,this.selector=e,this}).prototype=L.fn,C=L(p);var M=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function E(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}L.fn.extend({has:function(e){var t,n=L(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(L.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=v.test(e)||"string"!=typeof e?L(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&L.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?L.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?L.inArray(this[0],L(e)):L.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(L.uniqueSort(L.merge(this.get(),L(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),L.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return E(e,"nextSibling")},prev:function(e){return E(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return L.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:L.merge([],e.childNodes)}},function(r,i){L.fn[r]=function(e,t){var n=L.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=L.filter(t,n)),1<this.length&&(P[r]||(n=L.uniqueSort(n)),M.test(r)&&(n=n.reverse())),this.pushStack(n)}});var T,I,O=/\S+/g;function D(){p.addEventListener?(p.removeEventListener("DOMContentLoaded",N),k.removeEventListener("load",N)):(p.detachEvent("onreadystatechange",N),k.detachEvent("onload",N))}function N(){(p.addEventListener||"load"===k.event.type||"complete"===p.readyState)&&(D(),L.ready())}for(I in L.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},L.each(e.match(O)||[],function(e,t){n[t]=!0}),n):L.extend({},r);var i,t,o,a,s=[],l=[],u=-1,c=function(){for(a=r.once,o=i=!0;l.length;u=-1)for(t=l.shift();++u<s.length;)!1===s[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=s.length,t=!1);r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},h={add:function(){return s&&(t&&!i&&(u=s.length-1,l.push(t)),function n(e){L.each(e,function(e,t){L.isFunction(t)?r.unique&&h.has(t)||s.push(t):t&&t.length&&"string"!==L.type(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return L.each(arguments,function(e,t){for(var n;-1<(n=L.inArray(t,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<L.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=!0,t||h.disable(),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),i||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},L.extend({Deferred:function(e){var o=[["resolve","done",L.Callbacks("once memory"),"resolved"],["reject","fail",L.Callbacks("once memory"),"rejected"],["notify","progress",L.Callbacks("memory")]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var i=arguments;return L.Deferred(function(r){L.each(o,function(e,t){var n=L.isFunction(i[e])&&i[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&L.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this===a?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?L.extend(e,a):a}},s={};return a.pipe=a.then,L.each(o,function(e,t){var n=t[2],r=t[3];a[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var i,t,n,r=0,o=c.call(arguments),a=o.length,s=1!==a||e&&L.isFunction(e.promise)?a:0,l=1===s?e:L.Deferred(),u=function(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?c.call(arguments):e,r===i?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(1<a)for(i=new Array(a),t=new Array(a),n=new Array(a);r<a;r++)o[r]&&L.isFunction(o[r].promise)?o[r].promise().progress(u(r,t,i)).done(u(r,n,o)).fail(l.reject):--s;return s||l.resolveWith(n,o),l.promise()}}),L.fn.ready=function(e){return L.ready.promise().done(e),this},L.extend({isReady:!1,readyWait:1,holdReady:function(e){e?L.readyWait++:L.ready(!0)},ready:function(e){(!0===e?--L.readyWait:L.isReady)||(L.isReady=!0)!==e&&0<--L.readyWait||(T.resolveWith(p,[L]),L.fn.triggerHandler&&(L(p).triggerHandler("ready"),L(p).off("ready")))}}),L.ready.promise=function(e){if(!T)if(T=L.Deferred(),"complete"===p.readyState||"loading"!==p.readyState&&!p.documentElement.doScroll)k.setTimeout(L.ready);else if(p.addEventListener)p.addEventListener("DOMContentLoaded",N),k.addEventListener("load",N);else{p.attachEvent("onreadystatechange",N),k.attachEvent("onload",N);var n=!1;try{n=null==k.frameElement&&p.documentElement}catch(e){}n&&n.doScroll&&function t(){if(!L.isReady){try{n.doScroll("left")}catch(e){return k.setTimeout(t,50)}D(),L.ready()}}()}return T.promise(e)},L.ready.promise(),L(y))break;y.ownFirst="0"===I,y.inlineBlockNeedsLayout=!1,L(function(){var e,t,n,r;(n=p.getElementsByTagName("body")[0])&&n.style&&(t=p.createElement("div"),(r=p.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",y.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=p.createElement("div");y.deleteExpando=!0;try{delete e.test}catch(e){y.deleteExpando=!1}e=null}();var A,j=function(e){var t=L.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)},R=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/([A-Z])/g;function F(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(B,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:R.test(n)?L.parseJSON(n):n)}catch(e){}L.data(e,t,n)}else n=void 0}return n}function z(e){var t;for(t in e)if(("data"!==t||!L.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function q(e,t,n,r){if(j(e)){var i,o,a=L.expando,s=e.nodeType,l=s?L.cache:e,u=s?e[a]:e[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[a]=h.pop()||L.guid++:a),l[u]||(l[u]=s?{}:{toJSON:L.noop}),"object"!=typeof t&&"function"!=typeof t||(r?l[u]=L.extend(l[u],t):l[u].data=L.extend(l[u].data,t)),o=l[u],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[L.camelCase(t)]=n),"string"==typeof t?null==(i=o[t])&&(i=o[L.camelCase(t)]):i=o,i}}function U(e,t,n){if(j(e)){var r,i,o=e.nodeType,a=o?L.cache:e,s=o?e[L.expando]:L.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){i=(t=L.isArray(t)?t.concat(L.map(t,L.camelCase)):t in r?[t]:(t=L.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!z(r):!L.isEmptyObject(r))return}(n||(delete a[s].data,z(a[s])))&&(o?L.cleanData([e],!0):y.deleteExpando||a!=a.window?delete a[s]:a[s]=void 0)}}}L.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?L.cache[e[L.expando]]:e[L.expando])&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return U(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return U(e,t,!0)}}),L.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0!==e)return"object"==typeof e?this.each(function(){L.data(this,e)}):1<arguments.length?this.each(function(){L.data(this,e,t)}):o?F(o,e,L.data(o,e)):void 0;if(this.length&&(i=L.data(o),1===o.nodeType&&!L._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&F(o,r=L.camelCase(r.slice(5)),i[r]);L._data(o,"parsedAttrs",!0)}return i},removeData:function(e){return this.each(function(){L.removeData(this,e)})}}),L.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=L._data(e,t),n&&(!r||L.isArray(n)?r=L._data(e,t,L.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=L.queue(e,t),r=n.length,i=n.shift(),o=L._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){L.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return L._data(e,n)||L._data(e,n,{empty:L.Callbacks("once memory").add(function(){L._removeData(e,t+"queue"),L._removeData(e,n)})})}}),L.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?L.queue(this[0],t):void 0===n?this:this.each(function(){var e=L.queue(this,t,n);L._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&L.dequeue(this,t)})},dequeue:function(e){return this.each(function(){L.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=L.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=L._data(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}}),y.shrinkWrapBlocks=function(){return null!=A?A:(A=!1,(t=p.getElementsByTagName("body")[0])&&t.style?(e=p.createElement("div"),(n=p.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),void 0!==e.style.zoom&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(p.createElement("div")).style.width="5px",A=3!==e.offsetWidth),t.removeChild(n),A):void 0);var e,t,n};var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],H=function(e,t){return e=t||e,"none"===L.css(e,"display")||!L.contains(e.ownerDocument,e)};function W(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return L.css(e,t,"")},l=s(),u=n&&n[3]||(L.cssNumber[t]?"":"px"),c=(L.cssNumber[t]||"px"!==u&&+l)&&$.exec(L.css(e,t));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=o=o||".5",L.style(e,t,c+u),o!==(o=s()/l)&&1!==o&&--a;);return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var Q,K,Z,J=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===L.type(n))for(s in i=!0,n)J(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,L.isFunction(r)||(a=!0),u&&(t=a?(t.call(e,r),null):(u=t,function(e,t,n){return u.call(L(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o},X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,ee=/^$|\/(?:java|ecma)script/i,te=/^\s+/,ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function re(e){var t=ne.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}Q=p.createElement("div"),K=p.createDocumentFragment(),Z=p.createElement("input"),Q.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",y.leadingWhitespace=3===Q.firstChild.nodeType,y.tbody=!Q.getElementsByTagName("tbody").length,y.htmlSerialize=!!Q.getElementsByTagName("link").length,y.html5Clone="<:nav></:nav>"!==p.createElement("nav").cloneNode(!0).outerHTML,Z.type="checkbox",Z.checked=!0,K.appendChild(Z),y.appendChecked=Z.checked,Q.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!Q.cloneNode(!0).lastChild.defaultValue,K.appendChild(Q),(Z=p.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),Q.appendChild(Z),y.checkClone=Q.cloneNode(!0).cloneNode(!0).lastChild.checked,y.noCloneEvent=!!Q.addEventListener,Q[L.expando]=1,y.attributes=!Q.getAttribute(L.expando);var ie={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};function oe(e,t){var n,r,i=0,o=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||L.nodeName(r,t)?o.push(r):L.merge(o,oe(r,t));return void 0===t||t&&L.nodeName(e,t)?L.merge([e],o):o}function ae(e,t){for(var n,r=0;null!=(n=e[r]);r++)L._data(n,"globalEval",!t||L._data(t[r],"globalEval"))}ie.optgroup=ie.option,ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var se=/<|&#?\w+;/,le=/<tbody/i;function ue(e){X.test(e.type)&&(e.defaultChecked=e.checked)}function ce(e,t,n,r,i){for(var o,a,s,l,u,c,h,f=e.length,d=re(t),p=[],m=0;m<f;m++)if((a=e[m])||0===a)if("object"===L.type(a))L.merge(p,a.nodeType?[a]:a);else if(se.test(a)){for(l=l||d.appendChild(t.createElement("div")),u=(Y.exec(a)||["",""])[1].toLowerCase(),h=ie[u]||ie._default,l.innerHTML=h[1]+L.htmlPrefilter(a)+h[2],o=h[0];o--;)l=l.lastChild;if(!y.leadingWhitespace&&te.test(a)&&p.push(t.createTextNode(te.exec(a)[0])),!y.tbody)for(o=(a="table"!==u||le.test(a)?"<table>"!==h[1]||le.test(a)?0:l:l.firstChild)&&a.childNodes.length;o--;)L.nodeName(c=a.childNodes[o],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(L.merge(p,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=d.lastChild}else p.push(t.createTextNode(a));for(l&&d.removeChild(l),y.appendChecked||L.grep(oe(p,"input"),ue),m=0;a=p[m++];)if(r&&-1<L.inArray(a,r))i&&i.push(a);else if(s=L.contains(a.ownerDocument,a),l=oe(d.appendChild(a),"script"),s&&ae(l),n)for(o=0;a=l[o++];)ee.test(a.type||"")&&n.push(a);return l=null,d}!function(){var e,t,n=p.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(y[e]=t in k)||(n.setAttribute(t,"t"),y[e]=!1===n.attributes[t].expando);n=null}();var he=/^(?:input|select|textarea)$/i,fe=/^key/,de=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pe=/^(?:focusinfocus|focusoutblur)$/,me=/^([^.]*)(?:\.(.+)|)/;function ge(){return!0}function ye(){return!1}function _e(){try{return p.activeElement}catch(e){}}function ve(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ve(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ye;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return L().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=L.guid++)),e.each(function(){L.event.add(this,t,i,r,n)})}L.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,h,f,d,p,m,g=L._data(e);if(g){for(n.handler&&(n=(l=n).handler,i=l.selector),n.guid||(n.guid=L.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||((c=g.handle=function(e){return void 0===L||e&&L.event.triggered===e.type?void 0:L.event.dispatch.apply(c.elem,arguments)}).elem=e),s=(t=(t||"").match(O)||[""]).length;s--;)d=m=(o=me.exec(t[s])||[])[1],p=(o[2]||"").split(".").sort(),d&&(u=L.event.special[d]||{},d=(i?u.delegateType:u.bindType)||d,u=L.event.special[d]||{},h=L.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&L.expr.match.needsContext.test(i),namespace:p.join(".")},l),(f=a[d])||((f=a[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,r,p,c)||(e.addEventListener?e.addEventListener(d,c,!1):e.attachEvent&&e.attachEvent("on"+d,c))),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),L.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,h,f,d,p,m,g=L.hasData(e)&&L._data(e);if(g&&(c=g.events)){for(u=(t=(t||"").match(O)||[""]).length;u--;)if(d=m=(s=me.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=L.event.special[d]||{},f=c[d=(r?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,h.remove&&h.remove.call(e,a));l&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||L.removeEvent(e,d,g.handle),delete c[d])}else for(d in c)L.event.remove(e,d+t[u],n,r,!0);L.isEmptyObject(c)&&(delete g.handle,L._removeData(e,"events"))}},trigger:function(e,t,n,r){var i,o,a,s,l,u,c,h=[n||p],f=g.call(e,"type")?e.type:e,d=g.call(e,"namespace")?e.namespace.split("."):[];if(a=u=n=n||p,3!==n.nodeType&&8!==n.nodeType&&!pe.test(f+L.event.triggered)&&(-1<f.indexOf(".")&&(f=(d=f.split(".")).shift(),d.sort()),o=f.indexOf(":")<0&&"on"+f,(e=e[L.expando]?e:new L.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:L.makeArray(t,[e]),l=L.event.special[f]||{},r||!l.trigger||!1!==l.trigger.apply(n,t))){if(!r&&!l.noBubble&&!L.isWindow(n)){for(s=l.delegateType||f,pe.test(s+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(n.ownerDocument||p)&&h.push(u.defaultView||u.parentWindow||k)}for(c=0;(a=h[c++])&&!e.isPropagationStopped();)e.type=1<c?s:l.bindType||f,(i=(L._data(a,"events")||{})[e.type]&&L._data(a,"handle"))&&i.apply(a,t),(i=o&&a[o])&&i.apply&&j(a)&&(e.result=i.apply(a,t),!1===e.result&&e.preventDefault());if(e.type=f,!r&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(h.pop(),t))&&j(n)&&o&&n[f]&&!L.isWindow(n)){(u=n[o])&&(n[o]=null),L.event.triggered=f;try{n[f]()}catch(e){}L.event.triggered=void 0,u&&(n[o]=u)}return e.result}},dispatch:function(e){e=L.event.fix(e);var t,n,r,i,o,a,s=c.call(arguments),l=(L._data(this,"events")||{})[e.type]||[],u=L.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=L.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((L.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?-1<L(i,this).index(l):L.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[L.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=de.test(i)?this.mouseHooks:fe.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new L.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=o.srcElement||p),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||p).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_e()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===_e()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(L.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return L.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=L.extend(new L.Event,n,{type:e,isSimulated:!0});L.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},L.removeEvent=p.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},L.Event=function(e,t){if(!(this instanceof L.Event))return new L.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ge:ye):this.type=e,t&&L.extend(this,t),this.timeStamp=e&&e.timeStamp||L.now(),this[L.expando]=!0},L.Event.prototype={constructor:L.Event,isDefaultPrevented:ye,isPropagationStopped:ye,isImmediatePropagationStopped:ye,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ge,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ge,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ge,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},L.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){L.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||L.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),y.submit||(L.event.special.submit={setup:function(){if(L.nodeName(this,"form"))return!1;L.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=L.nodeName(t,"input")||L.nodeName(t,"button")?L.prop(t,"form"):void 0;n&&!L._data(n,"submit")&&(L.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),L._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&L.event.simulate("submit",this.parentNode,e))},teardown:function(){if(L.nodeName(this,"form"))return!1;L.event.remove(this,"._submit")}}),y.change||(L.event.special.change={setup:function(){if(he.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(L.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),L.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),L.event.simulate("change",this,e)})),!1;L.event.add(this,"beforeactivate._change",function(e){var t=e.target;he.test(t.nodeName)&&!L._data(t,"change")&&(L.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||L.event.simulate("change",this.parentNode,e)}),L._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return L.event.remove(this,"._change"),!he.test(this.nodeName)}}),y.focusin||L.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){L.event.simulate(r,e.target,L.event.fix(e))};L.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=L._data(e,r);t||e.addEventListener(n,i,!0),L._data(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=L._data(e,r)-1;t?L._data(e,r,t):(e.removeEventListener(n,i,!0),L._removeData(e,r))}}}),L.fn.extend({on:function(e,t,n,r){return ve(this,e,t,n,r)},one:function(e,t,n,r){return ve(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,L(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ye),this.each(function(){L.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this},trigger:function(e,t){return this.each(function(){L.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return L.event.trigger(e,t,n,!0)}});var be=/ jQuery\d+="(?:null|\d+)"/g,we=new RegExp("<(?:"+ne+")[\\s/>]","i"),xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ke=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Ce=/^true\/(.*)/,Se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Me=re(p).appendChild(p.createElement("div"));function Pe(e,t){return L.nodeName(e,"table")&&L.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ee(e){return e.type=(null!==L.find.attr(e,"type"))+"/"+e.type,e}function Te(e){var t=Ce.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ie(e,t){if(1===t.nodeType&&L.hasData(e)){var n,r,i,o=L._data(e),a=L._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)L.event.add(t,n,s[n][r]);a.data&&(a.data=L.extend({},a.data))}}function Oe(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!y.noCloneEvent&&t[L.expando]){for(r in(i=L._data(t)).events)L.removeEvent(t,r,i.handle);t.removeAttribute(L.expando)}"script"===n&&t.text!==e.text?(Ee(t).text=e.text,Te(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),y.html5Clone&&e.innerHTML&&!L.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&X.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function De(n,r,i,o){r=m.apply([],r);var e,t,a,s,l,u,c=0,h=n.length,f=h-1,d=r[0],p=L.isFunction(d);if(p||1<h&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);p&&(r[0]=d.call(this,e,t.html())),De(t,r,i,o)});if(h&&(e=(u=ce(r,n[0].ownerDocument,!1,n,o)).firstChild,1===u.childNodes.length&&(u=e),e||o)){for(a=(s=L.map(oe(u,"script"),Ee)).length;c<h;c++)t=u,c!==f&&(t=L.clone(t,!0,!0),a&&L.merge(s,oe(t,"script"))),i.call(n[c],t,c);if(a)for(l=s[s.length-1].ownerDocument,L.map(s,Te),c=0;c<a;c++)t=s[c],ee.test(t.type||"")&&!L._data(t,"globalEval")&&L.contains(l,t)&&(t.src?L._evalUrl&&L._evalUrl(t.src):L.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Se,"")));u=e=null}return n}function Ne(e,t,n){for(var r,i=t?L.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||L.cleanData(oe(r)),r.parentNode&&(n&&L.contains(r.ownerDocument,r)&&ae(oe(r,"script")),r.parentNode.removeChild(r));return e}L.extend({htmlPrefilter:function(e){return e.replace(xe,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,l=L.contains(e.ownerDocument,e);if(y.html5Clone||L.isXMLDoc(e)||!we.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Me.innerHTML=e.outerHTML,Me.removeChild(o=Me.firstChild)),!(y.noCloneEvent&&y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||L.isXMLDoc(e)))for(r=oe(o),s=oe(e),a=0;null!=(i=s[a]);++a)r[a]&&Oe(i,r[a]);if(t)if(n)for(s=s||oe(e),r=r||oe(o),a=0;null!=(i=s[a]);a++)Ie(i,r[a]);else Ie(e,o);return 0<(r=oe(o,"script")).length&&ae(r,!l&&oe(e,"script")),r=s=i=null,o},cleanData:function(e,t){for(var n,r,i,o,a=0,s=L.expando,l=L.cache,u=y.attributes,c=L.event.special;null!=(n=e[a]);a++)if((t||j(n))&&(o=(i=n[s])&&l[i])){if(o.events)for(r in o.events)c[r]?L.event.remove(n,r):L.removeEvent(n,r,o.handle);l[i]&&(delete l[i],u||void 0===n.removeAttribute?n[s]=void 0:n.removeAttribute(s),h.push(i))}}}),L.fn.extend({domManip:De,detach:function(e){return Ne(this,e,!0)},remove:function(e){return Ne(this,e)},text:function(e){return J(this,function(e){return void 0===e?L.text(this):this.empty().append((this[0]&&this[0].ownerDocument||p).createTextNode(e))},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&L.cleanData(oe(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&L.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return L.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(be,""):void 0;if("string"==typeof e&&!ke.test(e)&&(y.htmlSerialize||!we.test(e))&&(y.leadingWhitespace||!te.test(e))&&!ie[(Y.exec(e)||["",""])[1].toLowerCase()]){e=L.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(L.cleanData(oe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return De(this,arguments,function(e){var t=this.parentNode;L.inArray(this,n)<0&&(L.cleanData(oe(this)),t&&t.replaceChild(e,this))},n)}}),L.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){L.fn[e]=function(e){for(var t,n=0,r=[],i=L(e),o=i.length-1;n<=o;n++)t=n===o?this:this.clone(!0),L(i[n])[a](t),s.apply(r,t.get());return this.pushStack(r)}});var Ae,je={HTML:"block",BODY:"block"};function Re(e,t){var n=L(t.createElement(e)).appendTo(t.body),r=L.css(n[0],"display");return n.detach(),r}function Be(e){var t=p,n=je[e];return n||("none"!==(n=Re(e,t))&&n||((t=((Ae=(Ae||L("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||Ae[0].contentDocument).document).write(),t.close(),n=Re(e,t),Ae.detach()),je[e]=n),n}var Fe=/^margin/,ze=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),qe=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i},Ue=p.documentElement;!function(){var r,i,o,a,s,l,u=p.createElement("div"),c=p.createElement("div");function e(){var e,t,n=p.documentElement;n.appendChild(u),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r=o=l=!1,i=s=!0,k.getComputedStyle&&(t=k.getComputedStyle(c),r="1%"!==(t||{}).top,l="2px"===(t||{}).marginLeft,o="4px"===(t||{width:"4px"}).width,c.style.marginRight="50%",i="4px"===(t||{marginRight:"4px"}).marginRight,(e=c.appendChild(p.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",c.style.width="1px",s=!parseFloat((k.getComputedStyle(e)||{}).marginRight),c.removeChild(e)),c.style.display="none",(a=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(e=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",a=0===e[0].offsetHeight)),n.removeChild(u)}c.style&&(c.style.cssText="float:left;opacity:.5",y.opacity="0.5"===c.style.opacity,y.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===c.style.backgroundClip,(u=p.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",u.appendChild(c),y.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,L.extend(y,{reliableHiddenOffsets:function(){return null==r&&e(),a},boxSizingReliable:function(){return null==r&&e(),o},pixelMarginRight:function(){return null==r&&e(),i},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==r&&e(),s},reliableMarginLeft:function(){return null==r&&e(),l}}))}();var Ge,$e,Ve=/^(top|right|bottom|left)$/;function He(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}k.getComputedStyle?(Ge=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=k),t.getComputedStyle(e)},$e=function(e,t,n){var r,i,o,a,s=e.style;return""!==(a=(n=n||Ge(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==a||L.contains(e.ownerDocument,e)||(a=L.style(e,t)),n&&!y.pixelMarginRight()&&ze.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0===a?a:a+""}):Ue.currentStyle&&(Ge=function(e){return e.currentStyle},$e=function(e,t,n){var r,i,o,a,s=e.style;return null==(a=(n=n||Ge(e))?n[t]:void 0)&&s&&s[t]&&(a=s[t]),ze.test(a)&&!Ve.test(t)&&(r=s.left,(o=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"});var We=/alpha\([^)]*\)/i,Qe=/opacity\s*=\s*([^)]*)/i,Ke=/^(none|table(?!-c[ea]).+)/,Ze=new RegExp("^("+G+")(.*)$","i"),Je={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","O","Moz","ms"],et=p.createElement("div").style;function tt(e){if(e in et)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Ye.length;n--;)if((e=Ye[n]+t)in et)return e}function nt(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=L._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&H(r)&&(o[a]=L._data(r,"olddisplay",Be(r.nodeName)))):(i=H(r),(n&&"none"!==n||!i)&&L._data(r,"olddisplay",i?n:L.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function rt(e,t,n){var r=Ze.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function it(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=L.css(e,n+V[o],!0,i)),r?("content"===n&&(a-=L.css(e,"padding"+V[o],!0,i)),"margin"!==n&&(a-=L.css(e,"border"+V[o]+"Width",!0,i))):(a+=L.css(e,"padding"+V[o],!0,i),"padding"!==n&&(a+=L.css(e,"border"+V[o]+"Width",!0,i)));return a}function ot(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ge(e),a=y.boxSizing&&"border-box"===L.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=$e(e,t,o))<0||null==i)&&(i=e.style[t]),ze.test(i))return i;r=a&&(y.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+it(e,t,n||(a?"border":"content"),r,o)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}L.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=$e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:y.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=L.camelCase(t),l=e.style;if(t=L.cssProps[s]||(L.cssProps[s]=tt(s)||s),a=L.cssHooks[t]||L.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];if("string"===(o=typeof n)&&(i=$.exec(n))&&i[1]&&(n=W(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(L.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o,a,s=L.camelCase(t);return t=L.cssProps[s]||(L.cssProps[s]=tt(s)||s),(a=L.cssHooks[t]||L.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=$e(e,t,r)),"normal"===o&&t in Xe&&(o=Xe[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),L.each(["height","width"],function(e,i){L.cssHooks[i]={get:function(e,t,n){if(t)return Ke.test(L.css(e,"display"))&&0===e.offsetWidth?qe(e,Je,function(){return ot(e,i,n)}):ot(e,i,n)},set:function(e,t,n){var r=n&&Ge(e);return rt(0,t,n?it(e,i,n,y.boxSizing&&"border-box"===L.css(e,"boxSizing",!1,r),r):0)}}}),y.opacity||(L.cssHooks.opacity={get:function(e,t){return Qe.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=L.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";((n.zoom=1)<=t||""===t)&&""===L.trim(o.replace(We,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=We.test(o)?o.replace(We,i):o+" "+i)}}),L.cssHooks.marginRight=He(y.reliableMarginRight,function(e,t){if(t)return qe(e,{display:"inline-block"},$e,[e,"marginRight"])}),L.cssHooks.marginLeft=He(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat($e(e,"marginLeft"))||(L.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),L.each({margin:"",padding:"",border:"Width"},function(i,o){L.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+V[t]+o]=r[t]||r[t-2]||r[0];return n}},Fe.test(i)||(L.cssHooks[i+o].set=rt)}),L.fn.extend({css:function(e,t){return J(this,function(e,t,n){var r,i,o={},a=0;if(L.isArray(t)){for(r=Ge(e),i=t.length;a<i;a++)o[t[a]]=L.css(e,t[a],!1,r);return o}return void 0!==n?L.style(e,t,n):L.css(e,t)},e,t,1<arguments.length)},show:function(){return nt(this,!0)},hide:function(){return nt(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){H(this)?L(this).show():L(this).hide()})}}),((L.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||L.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(L.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=L.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=L.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){L.fx.step[e.prop]?L.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[L.cssProps[e.prop]]&&!L.cssHooks[e.prop]?e.elem[e.prop]=e.now:L.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},L.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},L.fx=at.prototype.init,L.fx.step={};var st,lt,ut,ct,ht,ft,dt,pt=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function gt(){return k.setTimeout(function(){st=void 0}),st=L.now()}function yt(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=V[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function _t(e,t,n){for(var r,i=(vt.tweeners[t]||[]).concat(vt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function vt(o,e,t){var n,a,r=0,i=vt.prefilters.length,s=L.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=st||gt(),t=Math.max(0,u.startTime+u.duration-e),n=1-(t/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return s.notifyWith(o,[u,n,t]),n<1&&i?t:(s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:L.extend({},e),opts:L.extend(!0,{specialEasing:{},easing:L.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||gt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=L.Tween(o,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)u.tweens[t].run(1);return e?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,e])):s.rejectWith(o,[u,e]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=L.camelCase(n)],o=e[n],L.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=L.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);r<i;r++)if(n=vt.prefilters[r].call(u,o,c,u.opts))return L.isFunction(n.stop)&&(L._queueHooks(u.elem,u.opts.queue).stop=L.proxy(n.stop,n)),n;return L.map(c,_t,u),L.isFunction(u.opts.start)&&u.opts.start.call(o,u),L.fx.timer(L.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}L.Animation=L.extend(vt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return W(n.elem,e,$.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=L.isFunction(e)?(t=e,["*"]):e.match(O)).length;r<i;r++)n=e[r],vt.tweeners[n]=vt.tweeners[n]||[],vt.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var r,i,o,a,s,l,u,c=this,h={},f=t.style,d=t.nodeType&&H(t),p=L._data(t,"fxshow");for(r in n.queue||(null==(s=L._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,L.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(u=L.css(t,"display"))?L._data(t,"olddisplay")||Be(t.nodeName):u)&&"none"===L.css(t,"float")&&(y.inlineBlockNeedsLayout&&"inline"!==Be(t.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",y.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(i=e[r],pt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!p||void 0===p[r])continue;d=!0}h[r]=p&&p[r]||L.style(t,r)}else u=void 0;if(L.isEmptyObject(h))"inline"===("none"===u?Be(t.nodeName):u)&&(f.display=u);else for(r in p?"hidden"in p&&(d=p.hidden):p=L._data(t,"fxshow",{}),o&&(p.hidden=!d),d?L(t).show():c.done(function(){L(t).hide()}),c.done(function(){var e;for(e in L._removeData(t,"fxshow"),h)L.style(t,e,h[e])}),h)a=_t(d?p[r]:0,r,c),r in p||(p[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?vt.prefilters.unshift(e):vt.prefilters.push(e)}}),L.speed=function(e,t,n){var r=e&&"object"==typeof e?L.extend({},e):{complete:n||!n&&t||L.isFunction(e)&&e,duration:e,easing:n&&t||t&&!L.isFunction(t)&&t};return r.duration=L.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in L.fx.speeds?L.fx.speeds[r.duration]:L.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){L.isFunction(r.old)&&r.old.call(this),r.queue&&L.dequeue(this,r.queue)},r},L.fn.extend({fadeTo:function(e,t,n,r){return this.filter(H).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=L.isEmptyObject(t),o=L.speed(e,n,r),a=function(){var e=vt(this,L.extend({},t),o);(i||L._data(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=L.timers,r=L._data(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&mt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||L.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=L._data(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=L.timers,o=n?n.length:0;for(t.finish=!0,L.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),L.each(["toggle","show","hide"],function(e,r){var i=L.fn[r];L.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(yt(r,!0),e,t,n)}}),L.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){L.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),L.timers=[],L.fx.tick=function(){var e,t=L.timers,n=0;for(st=L.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||L.fx.stop(),st=void 0},L.fx.timer=function(e){L.timers.push(e),e()?L.fx.start():L.timers.pop()},L.fx.interval=13,L.fx.start=function(){lt||(lt=k.setInterval(L.fx.tick,L.fx.interval))},L.fx.stop=function(){k.clearInterval(lt),lt=null},L.fx.speeds={slow:600,fast:200,_default:400},L.fn.delay=function(r,e){return r=L.fx&&L.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=k.setTimeout(e,r);t.stop=function(){k.clearTimeout(n)}})},ct=p.createElement("input"),ht=p.createElement("div"),ft=p.createElement("select"),dt=ft.appendChild(p.createElement("option")),(ht=p.createElement("div")).setAttribute("className","t"),ht.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ut=ht.getElementsByTagName("a")[0],ct.setAttribute("type","checkbox"),ht.appendChild(ct),(ut=ht.getElementsByTagName("a")[0]).style.cssText="top:1px",y.getSetAttribute="t"!==ht.className,y.style=/top/.test(ut.getAttribute("style")),y.hrefNormalized="/a"===ut.getAttribute("href"),y.checkOn=!!ct.value,y.optSelected=dt.selected,y.enctype=!!p.createElement("form").enctype,ft.disabled=!0,y.optDisabled=!dt.disabled,(ct=p.createElement("input")).setAttribute("value",""),y.input=""===ct.getAttribute("value"),ct.value="t",ct.setAttribute("type","radio"),y.radioValue="t"===ct.value;var bt=/\r/g,wt=/[\x20\t\r\n\f]+/g;L.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=L.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,L(this).val()):n)?t="":"number"==typeof t?t+="":L.isArray(t)&&(t=L.map(t,function(e){return null==e?"":e+""})),(r=L.valHooks[this.type]||L.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=L.valHooks[t.type]||L.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(bt,""):null==e?"":e:void 0}}),L.extend({valHooks:{option:{get:function(e){var t=L.find.attr(e,"value");return null!=t?t:L.trim(L.text(e)).replace(wt," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(y.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!L.nodeName(n.parentNode,"optgroup"))){if(t=L(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=L.makeArray(t),a=i.length;a--;)if(r=i[a],-1<L.inArray(L.valHooks.option.get(r),o))try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),L.each(["radio","checkbox"],function(){L.valHooks[this]={set:function(e,t){if(L.isArray(t))return e.checked=-1<L.inArray(L(e).val(),t)}},y.checkOn||(L.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt,kt,Lt=L.expr.attrHandle,Ct=/^(?:checked|selected)$/i,St=y.getSetAttribute,Mt=y.input;L.fn.extend({attr:function(e,t){return J(this,L.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){L.removeAttr(this,e)})}}),L.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?L.prop(e,t,n):(1===o&&L.isXMLDoc(e)||(t=t.toLowerCase(),i=L.attrHooks[t]||(L.expr.match.bool.test(t)?kt:xt)),void 0!==n?null===n?void L.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=L.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&L.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(O);if(o&&1===e.nodeType)for(;n=o[i++];)r=L.propFix[n]||n,L.expr.match.bool.test(n)?Mt&&St||!Ct.test(n)?e[r]=!1:e[L.camelCase("default-"+n)]=e[r]=!1:L.attr(e,n,""),e.removeAttribute(St?n:r)}}),kt={set:function(e,t,n){return!1===t?L.removeAttr(e,n):Mt&&St||!Ct.test(n)?e.setAttribute(!St&&L.propFix[n]||n,n):e[L.camelCase("default-"+n)]=e[n]=!0,n}},L.each(L.expr.match.bool.source.match(/\w+/g),function(e,t){var o=Lt[t]||L.find.attr;Mt&&St||!Ct.test(t)?Lt[t]=function(e,t,n){var r,i;return n||(i=Lt[t],Lt[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,Lt[t]=i),r}:Lt[t]=function(e,t,n){if(!n)return e[L.camelCase("default-"+t)]?t.toLowerCase():null}}),Mt&&St||(L.attrHooks.value={set:function(e,t,n){if(!L.nodeName(e,"input"))return xt&&xt.set(e,t,n);e.defaultValue=t}}),St||(xt={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},Lt.id=Lt.name=Lt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},L.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:xt.set},L.attrHooks.contenteditable={set:function(e,t,n){xt.set(e,""!==t&&t,n)}},L.each(["width","height"],function(e,n){L.attrHooks[n]={set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}}})),y.style||(L.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Pt=/^(?:input|select|textarea|button|object)$/i,Et=/^(?:a|area)$/i;L.fn.extend({prop:function(e,t){return J(this,L.prop,e,t,1<arguments.length)},removeProp:function(e){return e=L.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),L.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&L.isXMLDoc(e)||(t=L.propFix[t]||t,i=L.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=L.find.attr(e,"tabindex");return t?parseInt(t,10):Pt.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.hrefNormalized||L.each(["href","src"],function(e,t){L.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),y.optSelected||(L.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),L.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){L.propFix[this.toLowerCase()]=this}),y.enctype||(L.propFix.enctype="encoding");var Tt=/[\t\r\n\f]/g;function It(e){return L.attr(e,"class")||""}L.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(L.isFunction(t))return this.each(function(e){L(this).addClass(t.call(this,e,It(this)))});if("string"==typeof t&&t)for(e=t.match(O)||[];n=this[l++];)if(i=It(n),r=1===n.nodeType&&(" "+i+" ").replace(Tt," ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=L.trim(r))&&L.attr(n,"class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(L.isFunction(t))return this.each(function(e){L(this).removeClass(t.call(this,e,It(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(O)||[];n=this[l++];)if(i=It(n),r=1===n.nodeType&&(" "+i+" ").replace(Tt," ")){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=L.trim(r))&&L.attr(n,"class",s)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"===o?t?this.addClass(i):this.removeClass(i):L.isFunction(i)?this.each(function(e){L(this).toggleClass(i.call(this,e,It(this),t),t)}):this.each(function(){var e,t,n,r;if("string"===o)for(t=0,n=L(this),r=i.match(O)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!==o||((e=It(this))&&L._data(this,"__className__",e),L.attr(this,"class",e||!1===i?"":L._data(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+It(n)+" ").replace(Tt," ").indexOf(t))return!0;return!1}}),L.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){L.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),L.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Ot=k.location,Dt=L.now(),Nt=/\?/,At=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;L.parseJSON=function(e){if(k.JSON&&k.JSON.parse)return k.JSON.parse(e+"");var i,o=null,t=L.trim(e+"");return t&&!L.trim(t.replace(At,function(e,t,n,r){return i&&t&&(o=0),0===o?e:(i=n||t,o+=!r-!n,"")}))?Function("return "+t)():L.error("Invalid JSON: "+e)},L.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{k.DOMParser?t=(new k.DOMParser).parseFromString(e,"text/xml"):((t=new k.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||L.error("Invalid XML: "+e),t};var jt=/#.*$/,Rt=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ft=/^(?:GET|HEAD)$/,zt=/^\/\//,qt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ut={},Gt={},$t="*/".concat("*"),Vt=Ot.href,Ht=qt.exec(Vt.toLowerCase())||[];function Wt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(O)||[];if(L.isFunction(t))for(;n=i[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Qt(t,i,o,a){var s={},l=t===Gt;function u(e){var r;return s[e]=!0,L.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||l||s[n]?l?!(r=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),r}return u(i.dataTypes[0])||!s["*"]&&u("*")}function Kt(e,t){var n,r,i=L.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&L.extend(!0,e,n),e}L.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":L.parseJSON,"text xml":L.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Kt(Kt(e,L.ajaxSettings),t):Kt(L.ajaxSettings,e)},ajaxPrefilter:Wt(Ut),ajaxTransport:Wt(Gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,c,h,f,d,p,i,m=L.ajaxSetup({},t),g=m.context||m,y=m.context&&(g.nodeType||g.jquery)?L(g):L.event,_=L.Deferred(),v=L.Callbacks("once memory"),b=m.statusCode||{},o={},a={},w=0,s="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!i)for(i={};t=Bt.exec(h);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?h:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=a[n]=a[n]||e,o[e]=t),this},overrideMimeType:function(e){return w||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)b[t]=[b[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||s;return p&&p.abort(t),l(0,t),this}};if(_.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,m.url=((e||m.url||Vt)+"").replace(jt,"").replace(zt,Ht[1]+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=L.trim(m.dataType||"*").toLowerCase().match(O)||[""],null==m.crossDomain&&(n=qt.exec(m.url.toLowerCase()),m.crossDomain=!(!n||n[1]===Ht[1]&&n[2]===Ht[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ht[3]||("http:"===Ht[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=L.param(m.data,m.traditional)),Qt(Ut,m,t,x),2===w)return x;for(r in(d=L.event&&m.global)&&0==L.active++&&L.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Ft.test(m.type),c=m.url,m.hasContent||(m.data&&(c=m.url+=(Nt.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Rt.test(c)?c.replace(Rt,"$1_="+Dt++):c+(Nt.test(c)?"&":"?")+"_="+Dt++)),m.ifModified&&(L.lastModified[c]&&x.setRequestHeader("If-Modified-Since",L.lastModified[c]),L.etag[c]&&x.setRequestHeader("If-None-Match",L.etag[c])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+$t+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||2===w))return x.abort();for(r in s="abort",{success:1,error:1,complete:1})x[r](m[r]);if(p=Qt(Gt,m,t,x)){if(x.readyState=1,d&&y.trigger("ajaxSend",[x,m]),2===w)return x;m.async&&0<m.timeout&&(f=k.setTimeout(function(){x.abort("timeout")},m.timeout));try{w=1,p.send(o,l)}catch(e){if(!(w<2))throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,l,u=t;2!==w&&(w=2,f&&k.clearTimeout(f),p=void 0,h=r||"",x.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}(m,x,n)),s=function(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(m,s,x,i),i?(m.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(L.lastModified[c]=l),(l=x.getResponseHeader("etag"))&&(L.etag[c]=l)),204===e||"HEAD"===m.type?u="nocontent":304===e?u="notmodified":(u=s.state,o=s.data,i=!(a=s.error))):(a=u,!e&&u||(u="error",e<0&&(e=0))),x.status=e,x.statusText=(t||u)+"",i?_.resolveWith(g,[o,u,x]):_.rejectWith(g,[x,u,a]),x.statusCode(b),b=void 0,d&&y.trigger(i?"ajaxSuccess":"ajaxError",[x,m,i?o:a]),v.fireWith(g,[x,u]),d&&(y.trigger("ajaxComplete",[x,m]),--L.active||L.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return L.get(e,t,n,"json")},getScript:function(e,t){return L.get(e,void 0,t,"script")}}),L.each(["get","post"],function(e,i){L[i]=function(e,t,n,r){return L.isFunction(t)&&(r=r||n,n=t,t=void 0),L.ajax(L.extend({url:e,type:i,dataType:r,data:t,success:n},L.isPlainObject(e)&&e))}}),L._evalUrl=function(e){return L.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},L.fn.extend({wrapAll:function(t){if(L.isFunction(t))return this.each(function(e){L(this).wrapAll(t.call(this,e))});if(this[0]){var e=L(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(n){return L.isFunction(n)?this.each(function(e){L(this).wrapInner(n.call(this,e))}):this.each(function(){var e=L(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=L.isFunction(t);return this.each(function(e){L(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){L.nodeName(this,"body")||L(this).replaceWith(this.childNodes)}).end()}}),L.expr.filters.hidden=function(e){return y.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:function(e){if(!L.contains(e.ownerDocument||p,e))return!0;for(;e&&1===e.nodeType;){if("none"===((t=e).style&&t.style.display||L.css(t,"display"))||"hidden"===e.type)return!0;e=e.parentNode}var t;return!1}(e)},L.expr.filters.visible=function(e){return!L.expr.filters.hidden(e)};var Zt=/%20/g,Jt=/\[\]$/,Xt=/\r?\n/g,Yt=/^(?:submit|button|image|reset|file)$/i,en=/^(?:input|select|textarea|keygen)/i;function tn(n,e,r,i){var t;if(L.isArray(e))L.each(e,function(e,t){r||Jt.test(n)?i(n,t):tn(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==L.type(e))i(n,e);else for(t in e)tn(n+"["+t+"]",e[t],r,i)}L.param=function(e,t){var n,r=[],i=function(e,t){t=L.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=L.ajaxSettings&&L.ajaxSettings.traditional),L.isArray(e)||e.jquery&&!L.isPlainObject(e))L.each(e,function(){i(this.name,this.value)});else for(n in e)tn(n,e[n],t,i);return r.join("&").replace(Zt,"+")},L.fn.extend({serialize:function(){return L.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=L.prop(this,"elements");return e?L.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!L(this).is(":disabled")&&en.test(this.nodeName)&&!Yt.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var n=L(this).val();return null==n?null:L.isArray(n)?L.map(n,function(e){return{name:t.name,value:e.replace(Xt,"\r\n")}}):{name:t.name,value:n.replace(Xt,"\r\n")}}).get()}}),L.ajaxSettings.xhr=void 0!==k.ActiveXObject?function(){return this.isLocal?sn():8<p.documentMode?an():/^(get|post|head|put|delete|options)$/i.test(this.type)&&an()||sn()}:an;var nn=0,rn={},on=L.ajaxSettings.xhr();function an(){try{return new k.XMLHttpRequest}catch(e){}}function sn(){try{return new k.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}k.attachEvent&&k.attachEvent("onunload",function(){for(var e in rn)rn[e](void 0,!0)}),y.cors=!!on&&"withCredentials"in on,(on=y.ajax=!!on)&&L.ajaxTransport(function(l){var u;if(!l.crossDomain||y.cors)return{send:function(e,o){var t,a=l.xhr(),s=++nn;if(a.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(t in l.xhrFields)a[t]=l.xhrFields[t];for(t in l.mimeType&&a.overrideMimeType&&a.overrideMimeType(l.mimeType),l.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)void 0!==e[t]&&a.setRequestHeader(t,e[t]+"");a.send(l.hasContent&&l.data||null),u=function(e,t){var n,r,i;if(u&&(t||4===a.readyState))if(delete rn[s],u=void 0,a.onreadystatechange=L.noop,t)4!==a.readyState&&a.abort();else{i={},n=a.status,"string"==typeof a.responseText&&(i.text=a.responseText);try{r=a.statusText}catch(e){r=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=i.text?200:404}i&&o(n,r,i,a.getAllResponseHeaders())},l.async?4===a.readyState?k.setTimeout(u):a.onreadystatechange=rn[s]=u:u()},abort:function(){u&&u(void 0,!0)}}}),L.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return L.globalEval(e),e}}}),L.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),L.ajaxTransport("script",function(t){if(t.crossDomain){var r,i=p.head||L("head")[0]||p.documentElement;return{send:function(e,n){(r=p.createElement("script")).async=!0,t.scriptCharset&&(r.charset=t.scriptCharset),r.src=t.url,r.onload=r.onreadystatechange=function(e,t){(t||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),r=null,t||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(void 0,!0)}}}});var ln=[],un=/(=)\?(?=&|$)|\?\?/;L.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ln.pop()||L.expando+"_"+Dt++;return this[e]=!0,e}}),L.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(un.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&un.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=L.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(un,"$1"+r):!1!==e.jsonp&&(e.url+=(Nt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||L.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=k[r],k[r]=function(){o=arguments},n.always(function(){void 0===i?L(k).removeProp(r):k[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,ln.push(r)),o&&L.isFunction(i)&&i(o[0]),o=i=void 0}),"script"}),L.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||p;var r=b.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ce([e],t,i),i&&i.length&&L(i).remove(),L.merge([],r.childNodes))};var cn=L.fn.load;function hn(e){return L.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}L.fn.load=function(e,t,n){if("string"!=typeof e&&cn)return cn.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=L.trim(e.slice(s,e.length)),e=e.slice(0,s)),L.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&L.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?L("<div>").append(L.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){L.fn[t]=function(e){return this.on(t,e)}}),L.expr.filters.animated=function(t){return L.grep(L.timers,function(e){return t===e.elem}).length},L.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=L.css(e,"position"),c=L(e),h={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=L.css(e,"top"),l=L.css(e,"left"),i=("absolute"===u||"fixed"===u)&&-1<L.inArray("auto",[o,l])?(a=(r=c.position()).top,r.left):(a=parseFloat(o)||0,parseFloat(l)||0),L.isFunction(t)&&(t=t.call(e,n,L.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):c.css(h)}},L.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){L.offset.setOffset(this,t,e)});var e,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(e=o.documentElement,L.contains(e,i)?(void 0!==i.getBoundingClientRect&&(r=i.getBoundingClientRect()),n=hn(o),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===L.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),L.nodeName(e[0],"html")||(n=e.offset()),n.top+=L.css(e[0],"borderTopWidth",!0),n.left+=L.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-L.css(r,"marginTop",!0),left:t.left-n.left-L.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!L.nodeName(e,"html")&&"static"===L.css(e,"position");)e=e.offsetParent;return e||Ue})}}),L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o=/Y/.test(i);L.fn[t]=function(e){return J(this,function(e,t,n){var r=hn(e);if(void 0===n)return r?i in r?r[i]:r.document.documentElement[t]:e[t];r?r.scrollTo(o?L(r).scrollLeft():n,o?n:L(r).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),L.each(["top","left"],function(e,n){L.cssHooks[n]=He(y.pixelPosition,function(e,t){if(t)return t=$e(e,n),ze.test(t)?L(e).position()[n]+"px":t})}),L.each({Height:"height",Width:"width"},function(o,a){L.each({padding:"inner"+o,content:a,"":"outer"+o},function(r,e){L.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return J(this,function(e,t,n){var r;return L.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?L.css(e,t,i):L.style(e,t,n,i)},a,n?e:void 0,n,null)}})}),L.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),L.fn.size=function(){return this.length},L.fn.andSelf=L.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return L});var fn=k.jQuery,dn=k.$;return L.noConflict=function(e){return k.$===L&&(k.$=dn),e&&k.jQuery===L&&(k.jQuery=fn),L},e||(k.jQuery=k.$=L),L},"object"==typeof t&&"object"==typeof t.exports?t.exports=r.document?i(r,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(r)},{}],433:[function(e,t,n){(function(l){var o={},u=o.LEFT_BRACE=1,c=o.RIGHT_BRACE=2,h=o.LEFT_BRACKET=3,f=o.RIGHT_BRACKET=4,d=o.COLON=5,p=o.COMMA=6,m=o.TRUE=7,g=o.FALSE=8,y=o.NULL=9,_=o.STRING=10,v=o.NUMBER=11,b=o.START=17,n=o.STOP=18,w=o.TRUE1=33,x=o.TRUE2=34,k=o.TRUE3=35,L=o.FALSE1=49,C=o.FALSE2=50,S=o.FALSE3=51,M=o.FALSE4=52,P=o.NULL1=65,E=o.NULL2=66,T=o.NULL3=67,I=o.NUMBER1=81,O=o.NUMBER3=83,D=o.STRING1=97,N=o.STRING2=98,A=o.STRING3=99,j=o.STRING4=100,R=o.STRING5=101,B=o.STRING6=102,r=o.VALUE=113,i=o.KEY=114,a=o.OBJECT=129,s=o.ARRAY=130,F="\\".charCodeAt(0),z="/".charCodeAt(0),q="\b".charCodeAt(0),U="\f".charCodeAt(0),G="\n".charCodeAt(0),$="\r".charCodeAt(0),V="\t".charCodeAt(0);function H(){this.tState=b,this.value=void 0,this.string=void 0,this.stringBuffer=l.alloc?l.alloc(65536):new l(65536),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=r,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new l(2),3:new l(3),4:new l(4)},this.offset=-1}H.toknam=function(e){for(var t=Object.keys(o),n=0,r=t.length;n<r;n++){var i=t[n];if(o[i]===e)return i}return e&&"0x"+e.toString(16)};var e=H.prototype;e.onError=function(e){throw e},e.charError=function(e,t){this.tState=n,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+H.toknam(this.tState)))},e.appendStringChar=function(e){65536<=this.stringBufferOffset&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=e},e.appendStringBuf=function(e,t,n){var r=e.length;"number"==typeof t&&(r="number"==typeof n?n<0?e.length-t+n:n-t:e.length-t),r<0&&(r=0),65536<this.stringBufferOffset+r&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),e.copy(this.stringBuffer,this.stringBufferOffset,t,n),this.stringBufferOffset+=r},e.write=function(e){var t;"string"==typeof e&&(e=new l(e));for(var n=0,r=e.length;n<r;n++)if(this.tState===b){if(t=e[n],this.offset++,123===t)this.onToken(u,"{");else if(125===t)this.onToken(c,"}");else if(91===t)this.onToken(h,"[");else if(93===t)this.onToken(f,"]");else if(58===t)this.onToken(d,":");else if(44===t)this.onToken(p,",");else if(116===t)this.tState=w;else if(102===t)this.tState=L;else if(110===t)this.tState=P;else if(34===t)this.string="",this.stringBufferOffset=0,this.tState=D;else if(45===t)this.string="-",this.tState=I;else if(48<=t&&t<64)this.string=String.fromCharCode(t),this.tState=O;else if(32!==t&&9!==t&&10!==t&&13!==t)return this.charError(e,n)}else if(this.tState===D)if(t=e[n],0<this.bytes_remaining){for(var i=0;i<this.bytes_remaining;i++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+i]=e[i];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,n=n+i-1}else if(0===this.bytes_remaining&&128<=t){if(t<=193||244<t)return this.onError(new Error("Invalid UTF-8 character at position "+n+" in state "+H.toknam(this.tState)));if(194<=t&&t<=223&&(this.bytes_in_sequence=2),224<=t&&t<=239&&(this.bytes_in_sequence=3),240<=t&&t<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>e.length){for(var o=0;o<=e.length-1-n;o++)this.temp_buffs[this.bytes_in_sequence][o]=e[n+o];this.bytes_remaining=n+this.bytes_in_sequence-e.length,n=e.length-1}else this.appendStringBuf(e,n,n+this.bytes_in_sequence),n=n+this.bytes_in_sequence-1}else if(34===t)this.tState=b,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(_,this.string),this.offset+=l.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===t)this.tState=N;else{if(!(32<=t))return this.charError(e,n);this.appendStringChar(t)}else if(this.tState===N)if(34===(t=e[n]))this.appendStringChar(t),this.tState=D;else if(92===t)this.appendStringChar(F),this.tState=D;else if(47===t)this.appendStringChar(z),this.tState=D;else if(98===t)this.appendStringChar(q),this.tState=D;else if(102===t)this.appendStringChar(U),this.tState=D;else if(110===t)this.appendStringChar(G),this.tState=D;else if(114===t)this.appendStringChar($),this.tState=D;else if(116===t)this.appendStringChar(V),this.tState=D;else{if(117!==t)return this.charError(e,n);this.unicode="",this.tState=A}else if(this.tState===A||this.tState===j||this.tState===R||this.tState===B){if(!(48<=(t=e[n])&&t<64||64<t&&t<=70||96<t&&t<=102))return this.charError(e,n);if(this.unicode+=String.fromCharCode(t),this.tState++===B){var a=parseInt(this.unicode,16);(this.unicode=void 0)!==this.highSurrogate&&56320<=a&&a<57344?(this.appendStringBuf(new l(String.fromCharCode(this.highSurrogate,a))),this.highSurrogate=void 0):void 0===this.highSurrogate&&55296<=a&&a<56320?this.highSurrogate=a:(void 0!==this.highSurrogate&&(this.appendStringBuf(new l(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new l(String.fromCharCode(a)))),this.tState=D}}else if(this.tState===I||this.tState===O)switch(t=e[n]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(t),this.tState=O;break;default:this.tState=b;var s=Number(this.string);if(isNaN(s))return this.charError(e,n);this.string.match(/[0-9]+/)==this.string&&s.toString()!=this.string?this.onToken(_,this.string):this.onToken(v,s),this.offset+=this.string.length-1,this.string=void 0,n--}else if(this.tState===w){if(114!==e[n])return this.charError(e,n);this.tState=x}else if(this.tState===x){if(117!==e[n])return this.charError(e,n);this.tState=k}else if(this.tState===k){if(101!==e[n])return this.charError(e,n);this.tState=b,this.onToken(m,!0),this.offset+=3}else if(this.tState===L){if(97!==e[n])return this.charError(e,n);this.tState=C}else if(this.tState===C){if(108!==e[n])return this.charError(e,n);this.tState=S}else if(this.tState===S){if(115!==e[n])return this.charError(e,n);this.tState=M}else if(this.tState===M){if(101!==e[n])return this.charError(e,n);this.tState=b,this.onToken(g,!1),this.offset+=4}else if(this.tState===P){if(117!==e[n])return this.charError(e,n);this.tState=E}else if(this.tState===E){if(108!==e[n])return this.charError(e,n);this.tState=T}else if(this.tState===T){if(108!==e[n])return this.charError(e,n);this.tState=b,this.onToken(y,null),this.offset+=3}},e.onToken=function(e,t){},e.parseError=function(e,t){this.tState=n,this.onError(new Error("Unexpected "+H.toknam(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+H.toknam(this.state)))},e.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},e.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=r)},e.emit=function(e){this.mode&&(this.state=p),this.onValue(e)},e.onValue=function(e){},e.onToken=function(e,t){if(this.state===r)if(e===_||e===v||e===m||e===g||e===y)this.value&&(this.value[this.key]=t),this.emit(t);else if(e===u)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=i,this.mode=a;else if(e===h)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=s,this.state=r;else if(e===c){if(this.mode!==a)return this.parseError(e,t);this.pop()}else{if(e!==f)return this.parseError(e,t);if(this.mode!==s)return this.parseError(e,t);this.pop()}else if(this.state===i)if(e===_)this.key=t,this.state=d;else{if(e!==c)return this.parseError(e,t);this.pop()}else if(this.state===d){if(e!==d)return this.parseError(e,t);this.state=r}else{if(this.state!==p)return this.parseError(e,t);if(e===p)this.mode===s?(this.key++,this.state=r):this.mode===a&&(this.state=i);else{if(!(e===f&&this.mode===s||e===c&&this.mode===a))return this.parseError(e,t);this.pop()}}},H.C=o,t.exports=H}).call(this,e("buffer").Buffer)},{buffer:93}],434:[function(e,t,n){"use strict";var a={};function r(){try{return new window.XMLHttpRequest}catch(e){}}a._getBinaryFromXHR=function(e){return e.response||e.responseText};var s=window.ActiveXObject?function(){return r()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:r;a.getBinaryContent=function(r,i){try{var o=s();o.open("GET",r,!0),"responseType"in o&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.onreadystatechange=function(e){var t,n;if(4===o.readyState)if(200===o.status||0===o.status){n=t=null;try{t=a._getBinaryFromXHR(o)}catch(e){n=new Error(e)}i(n,t)}else i(new Error("Ajax error for "+r+" : "+this.status+" "+this.statusText),null)},o.send()}catch(e){i(new Error(e),null)}},t.exports=a},{}],435:[function(e,t,n){"use strict";var d=e("./utils"),h=e("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,r,i,o,a,s,l=[],u=0,c=e.length,h=c,f="string"!==d.getTypeOf(e);u<e.length;)h=c-u,r=f?(t=e[u++],n=u<c?e[u++]:0,u<c?e[u++]:0):(t=e.charCodeAt(u++),n=u<c?e.charCodeAt(u++):0,u<c?e.charCodeAt(u++):0),i=t>>2,o=(3&t)<<4|n>>4,a=1<h?(15&n)<<2|r>>6:64,s=2<h?63&r:64,l.push(p.charAt(i)+p.charAt(o)+p.charAt(a)+p.charAt(s));return l.join("")},n.decode=function(e){var t,n,r,i,o,a,s=0,l=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var u,c=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===p.charAt(64)&&c--,e.charAt(e.length-2)===p.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=h.uint8array?new Uint8Array(0|c):new Array(0|c);s<e.length;)t=p.indexOf(e.charAt(s++))<<2|(i=p.indexOf(e.charAt(s++)))>>4,n=(15&i)<<4|(o=p.indexOf(e.charAt(s++)))>>2,r=(3&o)<<6|(a=p.indexOf(e.charAt(s++))),u[l++]=t,64!==o&&(u[l++]=n),64!==a&&(u[l++]=r);return u}},{"./support":464,"./utils":466}],436:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/DataLengthProbe"),a=e("./stream/Crc32Probe");o=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":440,"./stream/Crc32Probe":459,"./stream/DataLengthProbe":460,"./stream/DataWorker":461}],437:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":441,"./stream/GenericWorker":462}],438:[function(e,t,n){"use strict";var r=e("./utils");var s=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var i=s,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var i=s,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":466}],439:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],440:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:474}],441:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":462,"./utils":466,pako:476}],442:[function(e,t,n){"use strict";var I=e("../utils"),i=e("../stream/GenericWorker"),O=e("../utf8"),D=e("../crc32"),N=e("../signature"),A=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},o=function(e,t,n,r,i,o){var a,s,l=e.file,u=e.compression,c=o!==O.utf8encode,h=I.transformTo("string",o(l.name)),f=I.transformTo("string",O.utf8encode(l.name)),d=l.comment,p=I.transformTo("string",o(d)),m=I.transformTo("string",O.utf8encode(d)),g=f.length!==l.name.length,y=m.length!==d.length,_="",v="",b="",w=l.dir,x=l.date,k={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(k.crc32=e.crc32,k.compressedSize=e.compressedSize,k.uncompressedSize=e.uncompressedSize);var L=0;t&&(L|=8),c||!g&&!y||(L|=2048);var C,S,M,P=0,E=0;w&&(P|=16),"UNIX"===i?(E=798,P|=(C=l.unixPermissions,S=w,(M=C)||(M=S?16893:33204),(65535&M)<<16)):(E=20,P|=63&(l.dosPermissions||0)),a=x.getUTCHours(),a<<=6,a|=x.getUTCMinutes(),a<<=5,a|=x.getUTCSeconds()/2,s=x.getUTCFullYear()-1980,s<<=4,s|=x.getUTCMonth()+1,s<<=5,s|=x.getUTCDate(),g&&(v=A(1,1)+A(D(h),4)+f,_+="up"+A(v.length,2)+v),y&&(b=A(1,1)+A(D(p),4)+m,_+="uc"+A(b.length,2)+b);var T="";return T+="\n\0",T+=A(L,2),T+=u.magic,T+=A(a,2),T+=A(s,2),T+=A(k.crc32,4),T+=A(k.compressedSize,4),T+=A(k.uncompressedSize,4),T+=A(h.length,2),T+=A(_.length,2),{fileRecord:N.LOCAL_FILE_HEADER+T+h+_,dirRecord:N.CENTRAL_FILE_HEADER+A(E,2)+T+A(p.length,2)+"\0\0\0\0"+A(P,4)+A(r,4)+h+_+p}};function r(e,t,n,r){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(r,i),r.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},r.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=o(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,r=o(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),n)this.push({data:(t=e,N.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,r,i,o,a,s,l=this.bytesWritten-e,u=(n=this.dirRecords.length,r=l,i=e,o=this.zipComment,a=this.encodeFileName,s=I.transformTo("string",a(o)),N.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A(n,2)+A(n,2)+A(r,4)+A(i,4)+A(s.length,2)+s);this.push({data:u,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},r.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=r},{"../crc32":438,"../signature":457,"../stream/GenericWorker":462,"../utf8":465,"../utils":466}],443:[function(e,t,n){"use strict";var u=e("../compressions"),r=e("./ZipFileWorker");n.generateWorker=function(e,a,t){var s=new r(a.streamFiles,t,a.platform,a.encodeFileName),l=0;try{e.forEach(function(e,t){l++;var n=function(e,t){var n=e||t,r=u[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(t.options.compression,a.compression),r=t.options.compressionOptions||a.compressionOptions||{},i=t.dir,o=t.date;t._compressWorker(n,r).withStreamInfo("file",{name:e,dir:i,date:o,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(s)}),s.entriesCount=l}catch(e){s.error(e)}return s}},{"../compressions":437,"./ZipFileWorker":442}],444:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.2.0",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":439,"./external":440,"./load":445,"./object":449,"./support":464}],445:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),s=e("./utf8"),l=(r=e("./utils"),e("./zipEntries")),o=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function c(r){return new i.Promise(function(e,t){var n=r.decompressed.getContentWorker().pipe(new o);n.on("error",function(e){t(e)}).on("end",function(){n.streamInfo.crc32!==r.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}t.exports=function(e,o){var a=this;return o=r.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,o.optimizedBinaryString,o.base64).then(function(e){var t=new l(o);return t.load(e),t}).then(function(e){var t=[i.Promise.resolve(e)],n=e.files;if(o.checkCRC32)for(var r=0;r<n.length;r++)t.push(c(n[r]));return i.Promise.all(t)}).then(function(e){for(var t=e.shift(),n=t.files,r=0;r<n.length;r++){var i=n[r];a.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:o.createFolders})}return t.zipComment.length&&(a.comment=t.zipComment),a})}},{"./external":440,"./nodejsUtils":446,"./stream/Crc32Probe":459,"./utf8":465,"./utils":466,"./zipEntries":467}],446:[function(e,t,n){(function(n){"use strict";t.exports={isNode:void 0!==n,newBufferFrom:function(e,t){if(n.from&&n.from!==Uint8Array.from)return n.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new n(e,t)},allocBuffer:function(e){if(n.alloc)return n.alloc(e);var t=new n(e);return t.fill(0),t},isBuffer:function(e){return n.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,e("buffer").Buffer)},{buffer:93}],447:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":462,"../utils":466}],448:[function(e,t,n){"use strict";var i=e("readable-stream").Readable;function r(e,t,n){i.call(this,t),this._helper=e;var r=this;e.on("data",function(e,t){r.push(e)||r._helper.pause(),n&&n(t)}).on("error",function(e){r.emit("error",e)}).on("end",function(){r.push(null)})}e("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":466,"readable-stream":450}],449:[function(e,t,n){"use strict";var i=e("./utf8"),u=e("./utils"),c=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),h=e("./defaults"),f=e("./compressedObject"),d=e("./zipObject"),a=e("./generate"),p=e("./nodejsUtils"),m=e("./nodejs/NodejsStreamInputAdapter"),s=function(e,t,n){var r,i=u.getTypeOf(t),o=u.extend(n||{},h);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=y(e)),o.createFolders&&(r=g(e))&&_.call(this,r,!0);var a="string"===i&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!a),(t instanceof f&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",i="string");var s=null;s=t instanceof f||t instanceof c?t:p.isNode&&p.isStream(t)?new m(e,t):u.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var l=new d(e,s,o);this.files[e]=l},g=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},y=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},_=function(e,t){return t=void 0!==t?t:h.createFolders,e=y(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var r={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(n){var r=[];return this.forEach(function(e,t){n(e,t)&&r.push(t)}),r},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,n),this;if(l(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(n){if(!n)return this;if(l(n))return this.filter(function(e,t){return t.dir&&n.test(e)});var e=this.root+n,t=_.call(this,e),r=this.clone();return r.root=t.name,r},remove:function(n){n=this.root+n;var e=this.files[n];if(e||("/"!==n.slice(-1)&&(n+="/"),e=this.files[n]),e&&!e.dir)delete this.files[n];else for(var t=this.filter(function(e,t){return t.name.slice(0,n.length)===n}),r=0;r<t.length;r++)delete this.files[t[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=u.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");u.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=a.generateWorker(this,n,r)}catch(e){(t=new c("error")).error(e)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=r},{"./compressedObject":436,"./defaults":439,"./generate":443,"./nodejs/NodejsStreamInputAdapter":447,"./nodejsUtils":446,"./stream/GenericWorker":462,"./stream/StreamHelper":463,"./utf8":465,"./utils":466,"./zipObject":469}],450:[function(e,t,n){t.exports=e("stream")},{stream:497}],451:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":466,"./DataReader":452}],452:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":466}],453:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":466,"./Uint8ArrayReader":455}],454:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":466,"./DataReader":452}],455:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":466,"./ArrayReader":451}],456:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":464,"../utils":466,"./ArrayReader":451,"./NodeBufferReader":453,"./StringReader":454,"./Uint8ArrayReader":455}],457:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],458:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":466,"./GenericWorker":462}],459:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":438,"../utils":466,"./GenericWorker":462}],460:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":466,"./GenericWorker":462}],461:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":466,"./GenericWorker":462}],462:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],463:[function(s,h,e){(function(l){"use strict";var u=s("../utils"),i=s("./ConvertWorker"),o=s("./GenericWorker"),c=s("../base64"),e=s("../support"),t=s("../external"),n=null;if(e.nodestream)try{n=s("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function r(e,s){return new t.Promise(function(t,n){var r=[],i=e._internalType,o=e._outputType,a=e._mimeType;e.on("data",function(e,t){r.push(e),s&&s(t)}).on("error",function(e){r=[],n(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return u.newBlob(u.transformTo("arraybuffer",t),n);case"base64":return c.encode(t);default:return u.transformTo(e,t)}}(o,function(e,t){var n,r=0,i=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return l.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(i,r),a);t(e)}catch(e){n(e)}r=[]}).resume()})}function a(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,u.checkSupport(r),this._worker=e.pipe(new i(r)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}a.prototype={accumulate:function(e){return r(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){u.delay(t,arguments,n)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(u.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new n(this,{objectMode:"nodebuffer"!==this._outputType},e)}},h.exports=a}).call(this,s("buffer").Buffer)},{"../base64":435,"../external":440,"../nodejs/NodejsStreamOutputAdapter":448,"../support":464,"../utils":466,"./ConvertWorker":458,"./GenericWorker":462,buffer:93}],464:[function(r,e,i){(function(e){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==e,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var t=new ArrayBuffer(0);try{i.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(t),i.blob=0===n.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch(e){i.nodestream=!1}}).call(this,r("buffer").Buffer)},{buffer:93,"readable-stream":450}],465:[function(e,t,o){"use strict";for(var s=e("./utils"),l=e("./support"),n=e("./nodejsUtils"),r=e("./stream/GenericWorker"),u=new Array(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;u[254]=u[254]=1;function a(){r.call(this,"utf-8 decode"),this.leftOver=null}function c(){r.call(this,"utf-8 encode")}o.utf8encode=function(e){return l.nodebuffer?n.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=l.uint8array?new Uint8Array(s):new Array(s),i=o=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},o.utf8decode=function(e){return l.nodebuffer?s.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,i,o=e.length,a=new Array(2*o);for(t=n=0;t<o;)if((r=e[t++])<128)a[n++]=r;else if(4<(i=u[r]))a[n++]=65533,t+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&t<o;)r=r<<6|63&e[t++],i--;1<i?a[n++]=65533:r<65536?a[n++]=r:(r-=65536,a[n++]=55296|r>>10&1023,a[n++]=56320|1023&r)}return a.length!==n&&(a.subarray?a=a.subarray(0,n):a.length=n),s.applyFromCharCode(a)}(e=s.transformTo(l.uint8array?"uint8array":"array",e))},s.inherits(a,r),a.prototype.processChunk=function(e){var t=s.transformTo(l.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var n=t;(t=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),t.set(n,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var r=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+u[e[n]]>t?n:t}(t),i=t;r!==t.length&&(l.uint8array?(i=t.subarray(0,r),this.leftOver=t.subarray(r,t.length)):(i=t.slice(0,r),this.leftOver=t.slice(r,t.length))),this.push({data:o.utf8decode(i),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=a,s.inherits(c,r),c.prototype.processChunk=function(e){this.push({data:o.utf8encode(e.data),meta:e.meta})},o.Utf8EncodeWorker=c},{"./nodejsUtils":446,"./stream/GenericWorker":462,"./support":464,"./utils":466}],466:[function(e,t,s){"use strict";var l=e("./support"),u=e("./base64"),n=e("./nodejsUtils"),r=e("set-immediate-shim"),c=e("./external");function i(e){return e}function h(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}s.newBlob=function(t,n){s.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var o={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&1===String.fromCharCode.apply(null,n.allocBuffer(1)).length}catch(e){return!1}}()}};function a(e){var t=65536,n=s.getTypeOf(e),r=!0;if("uint8array"===n?r=o.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=o.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return o.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return o.stringifyByChar(e)}function f(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}s.applyFromCharCode=a;var d={};d.string={string:i,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:function(e){return h(e,n.allocBuffer(e.length))}},d.array={string:a,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return n.newBufferFrom(e)}},d.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return n.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:a,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return n.newBufferFrom(e)}},d.nodebuffer={string:a,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:i},s.transformTo=function(e,t){if(t||(t=""),!e)return t;s.checkSupport(e);var n=s.getTypeOf(t);return d[n][e](t)},s.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":l.nodebuffer&&n.isBuffer(e)?"nodebuffer":l.uint8array&&e instanceof Uint8Array?"uint8array":l.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(e){if(!l[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},s.delay=function(e,t,n){r(function(){e.apply(n||null,t||[])})},s.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},s.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},s.prepareContent=function(r,e,i,o,a){return c.Promise.resolve(e).then(function(r){return l.blob&&(r instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(r)))&&"undefined"!=typeof FileReader?new c.Promise(function(t,n){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){n(e.target.error)},e.readAsArrayBuffer(r)}):r}).then(function(e){var t,n=s.getTypeOf(e);return n?("arraybuffer"===n?e=s.transformTo("uint8array",e):"string"===n&&(a?e=u.decode(e):i&&!0!==o&&(e=h(t=e,l.uint8array?new Uint8Array(t.length):new Array(t.length)))),e):c.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":435,"./external":440,"./nodejsUtils":446,"./support":464,"set-immediate-shim":496}],467:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":456,"./signature":457,"./support":464,"./utf8":465,"./utils":466,"./zipEntry":468}],468:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),u=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":436,"./compressions":437,"./crc32":438,"./reader/readerFor":456,"./support":464,"./utf8":465,"./utils":466}],469:[function(e,t,n){"use strict";var o=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),a=e("./utf8"),i=e("./compressedObject"),s=e("./stream/GenericWorker"),l=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};l.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new o(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof i&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),i.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof i?this._data.getContentWorker():this._data instanceof s?this._data:new r(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)l.prototype[u[h]]=c;t.exports=l},{"./compressedObject":436,"./stream/DataWorker":461,"./stream/GenericWorker":462,"./stream/StreamHelper":463,"./utf8":465}],470:[function(e,t,n){var r,i;r=window,i=function(n){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=59)}([function(e,t){e.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},function(e,t){e.exports=n},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var c=n(0),h=n(11).f,f=n(16),d=n(33),p=n(30),m=n(52),g=n(69);e.exports=function(e,t){var n,r,i,o,a,s=e.target,l=e.global,u=e.stat;if(n=l?c:u?c[s]||p(s,{}):(c[s]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=h(n,r))&&a.value:n[r],!g(l?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;m(o,i)}(e.sham||i&&i.sham)&&f(o,"sham",!0),d(n,r,o,e)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(20),i=n(7),o=n(55),a=n(8).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(9),i=n(46),o=n(2),a=n(13),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(15)("wks"),i=n(31),o=n(0).Symbol,a=n(49);e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}},function(e,t,n){var r=n(9),i=n(32),o=n(14),a=n(17),s=n(13),l=n(7),u=n(46),c=Object.getOwnPropertyDescriptor;t.f=r?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){e.exports=n(21)},function(e,t,n){var i=n(4);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(0),i=n(30),o=r["__core-js_shared__"]||i("__core-js_shared__",{});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.0.1",mode:n(48)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(8),i=n(14);e.exports=n(9)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(65),i=n(43);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(15)("keys"),i=n(31);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports={}},function(e,t,n){e.exports=n(0)},function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(22),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(O,e){!function(e){"use strict";var l,t=Object.prototype,u=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof O,s=e.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=e.regeneratorRuntime=a?O.exports:{}).wrap=v;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={},c={};c[i]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&u.call(y,i)&&(c=y);var _=k.prototype=w.prototype=Object.create(c);x.prototype=_.constructor=k,k.constructor=x,k[o]=x.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(_),e},s.awrap=function(e){return{__await:e}},L(C.prototype),C.prototype[r]=function(){return this},s.AsyncIterator=C,s.async=function(e,t,n,r){var i=new C(v(e,t,n,r));return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},L(_),_[o]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),m}}}function v(e,t,n,r){var o,a,s,l,i=t&&t.prototype instanceof w?t:w,u=Object.create(i.prototype),c=new E(r||[]);return u._invoke=(o=e,a=n,s=c,l=h,function(e,t){if(l===d)throw new Error("Generator is already running");if(l===p){if("throw"===e)throw t;return I()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=S(n,s);if(r){if(r===m)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===h)throw l=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=d;var i=b(o,a,s);if("normal"===i.type){if(l=s.done?p:f,i.arg===m)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=p,s.method="throw",s.arg=i.arg)}}),u}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function x(){}function k(){}function L(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(l){var t;this._invoke=function(n,r){function e(){return new Promise(function(e,t){!function t(e,n,r,i){var o=b(l[e],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):Promise.resolve(s).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,i)})}i(o.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function S(e,t){var n=e.iterator[t.method];if(n===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,S(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=b(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e};return r.next=r}}return{next:I}}function I(){return{value:l,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){var r=n(24);"string"==typeof r&&(r=[[e.i,r,""]]);n(26)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(25)(!1)).push([e.i,"@-webkit-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-moz-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-ms-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-o-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\npath.leaflet-ant-path {\n  fill: none;\n  -webkit-animation: linear infinite leaflet-ant-path-animation;\n  -moz-animation: linear infinite leaflet-ant-path-animation;\n  -ms-animation: linear infinite leaflet-ant-path-animation;\n  -o-animation: linear infinite leaflet-ant-path-animation;\n  animation: linear infinite leaflet-ant-path-animation; }\n  path.leaflet-ant-path__hardware-acceleration {\n    -webkit-transform: translateZ(0);\n    -moz-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    -o-transform: translateZ(0);\n    transform: translateZ(0); }\n  path.leaflet-ant-path__reverse {\n    -webkit-animation-direction: reverse;\n    -moz-animation-direction: reverse;\n    -ms-animation-direction: reverse;\n    -o-animation-direction: reverse;\n    animation-direction: reverse; }\n",""])},function(e,t,n){"use strict";e.exports=function(n){var a=[];return a.toString=function(){return this.map(function(e){var t=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(n[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];null!=o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),a.push(o))}},a}},function(e,t,r){var n,i,o,l={},u=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),a=(o={},function(e,t){if("function"==typeof e)return e();if(void 0===o[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}o[e]=n}return o[e]}),c=null,h=0,s=[],f=r(27);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=l[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(v(r.parts[o],t))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(v(r.parts[o],t));l[r.id]={id:r.id,refs:1,parts:a}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function m(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),s.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=s.indexOf(e);0<=t&&s.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=r.nc;n&&(e.attrs.nonce=n)}return _(t,e.attrs),m(e,t),t}function _(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function v(t,e){var n,r,i,o,a,s;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var l=h++;n=c||(c=y(e)),r=x.bind(null,n,l,!1),i=x.bind(null,n,l,!0)}else i=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=e,s=document.createElement("link"),void 0===a.attrs.type&&(a.attrs.type="text/css"),a.attrs.rel="stylesheet",_(s,a.attrs),m(a,s),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=f(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n=s,e),function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(e),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=u()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=p(e,a);return d(s,a),function(e){for(var t=[],n=0;n<s.length;n++){var r=s[n];(i=l[r.id]).refs--,t.push(i)}for(e&&d(p(e,a),a),n=0;n<t.length;n++){var i;if(0===(i=t[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete l[i.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function x(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,o=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(e,t,n){var r=n(29);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(0),i=n(16);e.exports=function(t,n){try{i(r,t,n)}catch(e){r[t]=n}return n}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var s=n(0),l=n(16),u=n(7),c=n(30),r=n(50),i=n(51),o=i.get,h=i.enforce,f=String(r).split("toString");n(15)("inspectSource",function(e){return r.call(e)}),(e.exports=function(e,t,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||u(n,"name")||l(n,"name",t),h(n).source=f.join("string"==typeof t?t:"")),e!==s?(i?!a&&e[t]&&(o=!0):delete e[t],o?e[t]=n:l(e,t,n)):o?e[t]=n:c(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&o(this).source||r.call(this)})},function(e,t,n){var r=n(54),i=n(35).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(8).f,i=n(7),o=n(10)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(54),i=n(35);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(7),i=n(42),o=n(18)("IE_PROTO"),a=n(57),s=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(12),a=n.n(r);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){d(t,e,n[e])})}return t}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={main:Symbol("main"),pulse:Symbol("pulse")},m=p.main,g=p.pulse,y=Symbol.species,_=Symbol.toStringTag,v=Symbol.iterator,i=function(e){function i(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this,d(f(f(t=!(n=c(i).call(this))||"object"!==s(n)&&"function"!=typeof n?f(this):n)),m,null),d(f(f(t)),g,null),d(f(f(t)),"_map",null),d(f(f(t)),"_path",null),d(f(f(t)),"_animatedPathId",null),d(f(f(t)),"_animatedPathClass","leaflet-ant-path"),d(f(f(t)),"_reversePathClass","".concat(t._animatedPathClass,"__reverse")),d(f(f(t)),"_hardwareAccClass","hardware-acceleration"),d(f(f(t)),"_defaultOptions",{use:o.polyline,paused:!1,reverse:!1,hardwareAcceleration:!1,renderer:Object(o.svg)({pane:"overlayPane"}),delay:400,dashArray:[10,20],weight:5,opacity:.5,color:"#0000FF",pulseColor:"#FFFFFF"}),o.Util.setOptions(f(f(t)),u({},t._defaultOptions,r)),t._path=e,t._animatedPathId="ant-path-".concat((new Date).getTime()),t._mount(),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,o.FeatureGroup),t=i,r=[{key:y,get:function(){return this}}],n=[{key:"map",value:function(e){return new this.constructor[Symbol.species](this._path.map(e),u({},this.options))}},{key:v,value:a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._path,"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"_processOptions",value:function(){var e=this.options,t=this._animatedPathClass,n=this._reversePathClass,r=this._hardwareAccClass,i=this._animatedPathId,o=e.reverse,a=e.hardwareAcceleration,s=u({},e),l=u({},e);return l.color=l.pulseColor||e.pulseColor,l.className=[t,i,o?n:"",a?"".concat(t,"__").concat(r):""].join(" "),delete s.dashArray,Array.isArray(l.dashArray)&&(l.dashArray=String(l.dashArray)),{pathOpts:s,pulseOpts:l}}},{key:"_mount",value:function(){var e=this._processOptions(),t=e.pathOpts,n=e.pulseOpts,r=this.options.use;this.addLayer(this[p.main]=r(this._path,t)),this.addLayer(this[p.pulse]=r(this._path,n))}},{key:"_calculateAnimationSpeed",value:function(){var e=this.options,t=this._map,n=this._animatedPathId;if(!e.paused&&t){var r=t.getZoom(),i=document.getElementsByClassName(n),o=1+e.delay/3/r+"s",a=["-webkit-","-moz-","-ms-","-o-",""].map(function(e){return"".concat(e,"animation-duration: ").concat(o)}).join(";");Array.from(i,function(e){e.style.cssText=a,e.setAttribute("data-animated","true")})}}},{key:"_pureReverse",value:function(){var e=this[p.pulse].getElement();e&&(this.options.reverse?e.classList.remove(this._reversePathClass):e.classList.add(this._reversePathClass))}},{key:"onAdd",value:function(e){return this._map=e,this._map.on("zoomend",this._calculateAnimationSpeed,this),this._mount(),this._calculateAnimationSpeed(),this}},{key:"onRemove",value:function(e){return this._map&&(this._map.off("zoomend",this._calculateAnimationSpeed,this),this._map=null),e&&e.removeLayer(this[p.main]).removeLayer(this[p.pulse]),this}},{key:"pause",value:function(){if(this.options.paused)return!1;var e=this[p.pulse].getElement();return this.options.paused=!0,e&&(e.removeAttribute("style"),e.setAttribute("data-animated","true")),!0}},{key:"resume",value:function(){var e=this.options;return!!e.paused&&(e.paused=!1,this._calculateAnimationSpeed(),!0)}},{key:"bringToFront",value:function(){return this[p.main].bringToFront(),this[p.pulse].bringToFront(),this}},{key:"bringToBack",value:function(){return this[p.pulse].bringToBack(),this[p.main].bringToBack(),this}},{key:"removeFrom",value:function(e){return e&&e.hasLayer(this)&&e.removeLayer(this),this}},{key:"setStyle",value:function(e){var t=u({},this.options,e),n=t.paused,r=t.delay,i=t.reverse;n?this.pause():this.resume(),r!==this.options.delay&&(this.options.delay=r||this._defaultOptions.delay,this._calculateAnimationSpeed()),void 0!==i&&i!==this.options.reverse&&this._pureReverse(),this.options=u({},this.options,e);var o=this._processOptions(),a=o.pathOpts,s=o.pulseOpts;return this[p.main].setStyle(a),this[p.pulse].setStyle(s),this}},{key:"reverse",value:function(){return this._pureReverse(),this.options.reverse=!this.options.reverse,this}},{key:"redraw",value:function(){return this[p.main].redraw(),this[p.pulse].redraw(),this}},{key:"addLatLng",value:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._path=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(o=this._path)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[r]),(e=this[p.main]).addLatLng.apply(e,r),(t=this[p.pulse]).addLatLng.apply(t,r),this;var o}},{key:"setLatLngs",value:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._path=r,(e=this[p.main]).setLatLngs.apply(e,r),(t=this[p.pulse]).setLatLngs.apply(t,r),this}},{key:"getLatLngs",value:function(){return this[p.main].getLatLngs()}},{key:"spliceLatLngs",value:function(){var e,t,n=(e=this[p.main]).spliceLatLngs.apply(e,arguments);return(t=this[p.pulse]).spliceLatLngs.apply(t,arguments),n}},{key:"getBounds",value:function(){return this[p.main].getBounds()}},{key:"toGeoJSON",value:function(){return this[p.main].toGeoJSON()}},{key:_,get:function(){return"L.Polyline.AntPath"}}],l(t.prototype,n),l(t,r),i}(),b=function(e,t){return Reflect.construct(i,[e,t])};n(23),n.d(t,"AntPath",function(){return w}),n.d(t,"antPath",function(){return x}),o.Polyline.AntPath=i,o.polyline.antPath=b;var w=i,x=b;t.default={AntPath:w,antPath:x}},function(e,t,n){var r=n(43);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(45),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){e.exports=!n(9)&&!n(5)(function(){return 7!=Object.defineProperty(n(47)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(4),i=n(0).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){e.exports=!1},function(e,t,n){e.exports=!n(5)(function(){return!String(Symbol())})},function(e,t,n){e.exports=n(15)("native-function-to-string",Function.toString)},function(e,t,n){var r,i,o,a=n(66),s=n(4),l=n(16),u=n(7),c=n(18),h=n(19),f=n(0).WeakMap;if(a){var d=new f,p=d.get,m=d.has,g=d.set;r=function(e,t){return g.call(d,e,t),t},i=function(e){return p.call(d,e)||{}},o=function(e){return m.call(d,e)}}else{var y=c("state");h[y]=!0,r=function(e,t){return l(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(n){return function(e){var t;if(!s(e)||(t=i(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}}},function(e,t,n){var s=n(7),l=n(53),u=n(11),c=n(8);e.exports=function(e,t){for(var n=l(t),r=c.f,i=u.f,o=0;o<n.length;o++){var a=n[o];s(e,a)||r(e,a,i(t,a))}}},function(e,t,n){var r=n(34),i=n(36),o=n(2),a=n(0).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var a=n(7),s=n(17),l=n(67)(!1),u=n(19);e.exports=function(e,t){var n,r=s(e),i=0,o=[];for(n in r)!a(u,n)&&a(r,n)&&o.push(n);for(;t.length>i;)a(r,n=t[i++])&&(~l(o,n)||o.push(n));return o}},function(e,t,n){t.f=n(10)},function(e,t,n){var r=n(2),i=n(75),o=n(35),a=n(76),s=n(47),l=n(18)("IE_PROTO"),u=function(){},c=function(){var e,t=s("iframe"),n=o.length;for(t.style.display="none",a.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[o[n]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[l]=e):n=c(),void 0===t?n:i(n,t)},n(19)[l]=!0},function(e,t,n){e.exports=!n(5)(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var r=n(4),i=n(2);e.exports=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}},function(e,t,n){n(60),n(93),e.exports=n(41)},function(e,t,n){n(61),n(70),n(73),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),e.exports=n(20).Symbol},function(e,t,n){"use strict";var r=n(28),i=n(4),u=n(42),c=n(44),h=n(62),f=n(63),o=n(10)("isConcatSpreadable"),a=!n(5)(function(){var e=[];return e[o]=!1,e.concat()[0]!==e}),s=n(64)("concat"),d=function(e){if(!i(e))return!1;var t=e[o];return void 0!==t?!!t:r(e)},l=!a||!s;n(3)({target:"Array",proto:!0,forced:l},{concat:function(e){var t,n,r,i,o,a=u(this),s=f(a,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],d(o)){if(9007199254740991<l+(i=c(o.length)))throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,l++)n in o&&h(s,l,o[n])}else{if(9007199254740991<=l)throw TypeError("Maximum allowed index exceeded");h(s,l++,o)}return s.length=l,s}})},function(e,t,n){"use strict";var i=n(13),o=n(8),a=n(14);e.exports=function(e,t,n){var r=i(t);r in e?o.f(e,r,a(0,n)):e[r]=n}},function(e,t,n){var r=n(4),i=n(28),o=n(10)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(5),i=n(10)("species");e.exports=function(t){return!r(function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(e,t,n){var r=n(5),i=n(29),o="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(50),i=n(0).WeakMap;e.exports="function"==typeof i&&/native code/.test(r.call(i))},function(e,t,n){var l=n(17),u=n(44),c=n(68);e.exports=function(s){return function(e,t,n){var r,i=l(e),o=u(i.length),a=c(n,o);if(s&&t!=t){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===t)return s||a||0;return!s&&-1}}},function(e,t,n){var r=n(45),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(5),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==u||n!=l&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(71),i=Object.prototype;r!==i.toString&&n(33)(i,"toString",r,{unsafe:!0})},function(e,t,n){"use strict";var r=n(72),i={};i[n(10)("toStringTag")]="z",e.exports="[object z]"!==String(i)?function(){return"[object "+r(this)+"]"}:i.toString},function(e,t,n){var i=n(29),o=n(10)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){"use strict";var r=n(0),a=n(7),i=n(9),o=n(48),s=n(3),l=n(33),u=n(19),c=n(5),h=n(15),f=n(37),d=n(31),p=n(10),m=n(55),g=n(6),y=n(74),_=n(28),v=n(2),b=n(4),w=n(17),x=n(13),k=n(14),L=n(56),C=n(77),S=n(11),M=n(8),P=n(32),E=n(16),T=n(38),I=n(18)("hidden"),O=n(51),D=O.set,N=O.getterFor("Symbol"),A=S.f,j=M.f,R=C.f,B=r.Symbol,F=r.JSON,z=F&&F.stringify,q=p("toPrimitive"),U=P.f,G=h("symbol-registry"),$=h("symbols"),V=h("op-symbols"),H=h("wks"),W=Object.prototype,Q=r.QObject,K=n(49),Z=!Q||!Q.prototype||!Q.prototype.findChild,J=i&&c(function(){return 7!=L(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=A(W,t);r&&delete W[t],j(e,t,n),r&&e!==W&&j(W,t,r)}:j,X=function(e,t){var n=$[e]=L(B.prototype);return D(n,{type:"Symbol",tag:e,description:t}),i||(n.description=t),n},Y=K&&"symbol"==typeof B.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof B},ee=function(e,t,n){return e===W&&ee(V,t,n),v(e),t=x(t,!0),v(n),a($,t)?(n.enumerable?(a(e,I)&&e[I][t]&&(e[I][t]=!1),n=L(n,{enumerable:k(0,!1)})):(a(e,I)||j(e,I,k(1,{})),e[I][t]=!0),J(e,t,n)):j(e,t,n)},te=function(e,t){v(e);for(var n,r=y(t=w(t)),i=0,o=r.length;i<o;)ee(e,n=r[i++],t[n]);return e},ne=function(e){var t=U.call(this,e=x(e,!0));return!(this===W&&a($,e)&&!a(V,e))&&(!(t||!a(this,e)||!a($,e)||a(this,I)&&this[I][e])||t)},re=function(e,t){if(e=w(e),t=x(t,!0),e!==W||!a($,t)||a(V,t)){var n=A(e,t);return!n||!a($,t)||a(e,I)&&e[I][t]||(n.enumerable=!0),n}},ie=function(e){for(var t,n=R(w(e)),r=[],i=0;n.length>i;)a($,t=n[i++])||a(u,t)||r.push(t);return r},oe=function(e){for(var t,n=e===W,r=R(n?V:w(e)),i=[],o=0;r.length>o;)!a($,t=r[o++])||n&&!a(W,t)||i.push($[t]);return i};K||(l((B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor");var e=void 0===arguments[0]?void 0:String(arguments[0]),t=d(e),n=function(e){this===W&&n.call(V,e),a(this,I)&&a(this[I],t)&&(this[I][t]=!1),J(this,t,k(1,e))};return i&&Z&&J(W,t,{configurable:!0,set:n}),X(t,e)}).prototype,"toString",function(){return N(this).tag}),P.f=ne,M.f=ee,S.f=re,n(34).f=C.f=ie,n(36).f=oe,i&&(j(B.prototype,"description",{configurable:!0,get:function(){return N(this).description}}),o||l(W,"propertyIsEnumerable",ne,{unsafe:!0})),m.f=function(e){return X(p(e),e)}),s({global:!0,wrap:!0,forced:!K,sham:!K},{Symbol:B});for(var ae=T(H),se=0;ae.length>se;)g(ae[se++]);s({target:"Symbol",stat:!0,forced:!K},{for:function(e){return a(G,e+="")?G[e]:G[e]=B(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol");for(var t in G)if(G[t]===e)return t},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),s({target:"Object",stat:!0,forced:!K,sham:!i},{create:function(e,t){return void 0===t?L(e):te(L(e),t)},defineProperty:ee,defineProperties:te,getOwnPropertyDescriptor:re}),s({target:"Object",stat:!0,forced:!K},{getOwnPropertyNames:ie,getOwnPropertySymbols:oe}),F&&s({target:"JSON",stat:!0,forced:!K||c(function(){var e=B();return"[null]"!=z([e])||"{}"!=z({a:e})||"{}"!=z(Object(e))})},{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Y(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,z.apply(F,r)}}),B.prototype[q]||E(B.prototype,q,B.prototype.valueOf),f(B,"Symbol"),u[I]=!0},function(e,t,n){var s=n(38),l=n(36),u=n(32);e.exports=function(e){var t=s(e),n=l.f;if(n)for(var r,i=n(e),o=u.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}},function(e,t,n){var r=n(9),a=n(8),s=n(2),l=n(38);e.exports=r?Object.defineProperties:function(e,t){s(e);for(var n,r=l(t),i=r.length,o=0;o<i;)a.f(e,n=r[o++],t[n]);return e}},function(e,t,n){var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(17),i=n(34).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){n(6)("asyncIterator")},function(e,t,n){"use strict";var r=n(9),i=n(7),o=n(4),a=n(8).f,s=n(52),l=n(0).Symbol;if(r&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},c=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof c?new l(e):void 0===e?l():l(e);return""===e&&(u[t]=!0),t};s(c,l);var h=c.prototype=l.prototype;h.constructor=c;var f=h.toString,d="Symbol(test)"==String(l("test")),p=/^Symbol\((.*)\)[^)]+$/;a(h,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=f.call(e);if(i(u,e))return"";var n=d?t.slice(7,-1):t.replace(p,"$1");return""===n?void 0:n}}),n(3)({global:!0,forced:!0},{Symbol:c})}},function(e,t,n){n(6)("hasInstance")},function(e,t,n){n(6)("isConcatSpreadable")},function(e,t,n){n(6)("iterator")},function(e,t,n){n(6)("match")},function(e,t,n){n(6)("replace")},function(e,t,n){n(6)("search")},function(e,t,n){n(6)("species")},function(e,t,n){n(6)("split")},function(e,t,n){n(6)("toPrimitive")},function(e,t,n){n(6)("toStringTag")},function(e,t,n){n(6)("unscopables")},function(e,t,n){n(37)(Math,"Math",!0)},function(e,t,n){n(37)(n(0).JSON,"JSON",!0)},function(e,t,n){n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(108),n(109),e.exports=n(20).Reflect},function(e,t,n){var r=n(39),i=n(2),o=(n(0).Reflect||{}).apply,a=Function.apply,s=!n(5)(function(){o(function(){})});n(3)({target:"Reflect",stat:!0,forced:s},{apply:function(e,t,n){return r(e),i(n),o?o(e,t,n):a.call(e,t,n)}})},function(e,t,n){var s=n(56),l=n(39),u=n(2),c=n(4),r=n(5),h=n(96),f=(n(0).Reflect||{}).construct,d=r(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),p=!r(function(){f(function(){})}),i=d||p;n(3)({target:"Reflect",stat:!0,forced:i,sham:i},{construct:function(e,t){l(e),u(t);var n=arguments.length<3?e:l(arguments[2]);if(p&&!d)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(h.apply(e,r))}var i=n.prototype,o=s(c(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return c(a)?a:o}})},function(e,t,n){"use strict";var o=n(39),a=n(4),s=[].slice,l={};e.exports=Function.bind||function(t){var n=o(this),r=s.call(arguments,1),i=function(){var e=r.concat(s.call(arguments));return this instanceof i?function(e,t,n){if(!(t in l)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";l[t]=Function("C,a","return new C("+r.join(",")+")")}return l[t](e,n)}(n,e.length,e):n.apply(t,e)};return a(n.prototype)&&(i.prototype=n.prototype),i}},function(e,t,n){var r=n(8),i=n(2),o=n(13),a=n(9),s=n(5)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})});n(3)({target:"Reflect",stat:!0,forced:s,sham:!a},{defineProperty:function(e,t,n){i(e),t=o(t,!0),i(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11).f,i=n(2);n(3)({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=r(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var a=n(11),s=n(40),l=n(7),u=n(4),c=n(2);n(3)({target:"Reflect",stat:!0},{get:function e(t,n){var r,i,o=arguments.length<3?t:arguments[2];return c(t)===o?t[n]:(r=a.f(t,n))?l(r,"value")?r.value:void 0===r.get?void 0:r.get.call(o):u(i=s(t))?e(i,n,o):void 0}})},function(e,t,n){var r=n(11),i=n(2),o=n(9);n(3)({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,n){var r=n(40),i=n(2),o=n(57);n(3)({target:"Reflect",stat:!0,sham:!o},{getPrototypeOf:function(e){return r(i(e))}})},function(e,t,n){n(3)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var r=n(2),i=Object.isExtensible;n(3)({target:"Reflect",stat:!0},{isExtensible:function(e){return r(e),!i||i(e)}})},function(e,t,n){n(3)({target:"Reflect",stat:!0},{ownKeys:n(53)})},function(e,t,n){var r=n(106),i=n(2),o=n(107);n(3)({target:"Reflect",stat:!0,sham:!o},{preventExtensions:function(e){i(e);try{var t=r("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(20),i=n(0),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){e.exports=!n(5)(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,n){var l=n(8),u=n(11),c=n(40),h=n(7),f=n(14),d=n(2),p=n(4);n(3)({target:"Reflect",stat:!0},{set:function e(t,n,r){var i,o,a=arguments.length<4?t:arguments[3],s=u.f(d(t),n);if(!s){if(p(o=c(t)))return e(o,n,r,a);s=f(0)}if(h(s,"value")){if(!1===s.writable||!p(a))return!1;if(i=u.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,l.f(a,n,i)}else l.f(a,n,f(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}})},function(e,t,n){var r=n(110),i=n(58);r&&n(3)({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e,t);try{return r(e,t),!0}catch(e){return!1}}})},function(e,t,n){var i=n(58);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),r=e instanceof Array}catch(n){}return function(e,t){return i(e,t),r?n.call(e,t):e.__proto__=t,e}}():void 0)}])},"object"==typeof n&&"object"==typeof t?t.exports=i(e("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],i):"object"==typeof n?n["leaflet-ant-path"]=i(e("leaflet")):r["leaflet-ant-path"]=i(r.L)},{leaflet:473}],471:[function(n,r,e){!function(e){var t;if("function"==typeof define&&define.amd)define(["leaflet"],e);else if("object"==typeof r&&"object"==typeof r.exports)t=n("leaflet"),r.exports=e(t);else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");e(window.L)}}(function(c){c.Map.mergeOptions({contextmenuItems:[]}),c.Map.ContextMenu=c.Handler.extend({_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(e){c.Handler.prototype.initialize.call(this,e),this._items=[],this._visible=!1;var t=this._container=c.DomUtil.create("div",c.Map.ContextMenu.BASE_CLS,e._container);t.style.zIndex=1e4,t.style.position="absolute",e.options.contextmenuWidth&&(t.style.width=e.options.contextmenuWidth+"px"),this._createItems(),c.DomEvent.on(t,"click",c.DomEvent.stop).on(t,"mousedown",c.DomEvent.stop).on(t,"dblclick",c.DomEvent.stop).on(t,"contextmenu",c.DomEvent.stop)},addHooks:function(){var e=this._map.getContainer();c.DomEvent.on(e,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this),c.Browser.touch&&c.DomEvent.on(document,this._touchstart,this._hide,this),this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var e=this._map.getContainer();c.DomEvent.off(e,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this),c.Browser.touch&&c.DomEvent.off(document,this._touchstart,this._hide,this),this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(e,t){e instanceof c.LatLng&&(e=this._map.latLngToContainerPoint(e)),this._showAtPoint(e,t)},hide:function(){this._hide()},addItem:function(e){return this.insertItem(e)},insertItem:function(e,t){t=void 0!==t?t:this._items.length;var n=this._createItem(this._container,e,t);return this._items.push(n),this._sizeChanged=!0,this._map.fire("contextmenu.additem",{contextmenu:this,el:n.el,index:t}),n.el},removeItem:function(e){var t=this._container;return isNaN(e)||(e=t.children[e]),e?(this._removeItem(c.Util.stamp(e)),this._sizeChanged=!0,this._map.fire("contextmenu.removeitem",{contextmenu:this,el:e}),e):null},removeAllItems:function(){for(var e,t=this._container.children;t.length;)e=t[0],this._removeItem(c.Util.stamp(e));return t},hideAllItems:function(){var e,t;for(e=0,t=this._items.length;e<t;e++)this._items[e].el.style.display="none"},showAllItems:function(){var e,t;for(e=0,t=this._items.length;e<t;e++)this._items[e].el.style.display=""},setDisabled:function(e,t){var n=this._container,r=c.Map.ContextMenu.BASE_CLS+"-item";isNaN(e)||(e=n.children[e]),e&&c.DomUtil.hasClass(e,r)&&(t?(c.DomUtil.addClass(e,r+"-disabled"),this._map.fire("contextmenu.disableitem",{contextmenu:this,el:e})):(c.DomUtil.removeClass(e,r+"-disabled"),this._map.fire("contextmenu.enableitem",{contextmenu:this,el:e})))},isVisible:function(){return this._visible},_createItems:function(){var e,t,n=this._map.options.contextmenuItems;for(e=0,t=n.length;e<t;e++)this._items.push(this._createItem(this._container,n[e]))},_createItem:function(e,t,n){if(t.separator||"-"===t)return this._createSeparator(e,n);var r=c.Map.ContextMenu.BASE_CLS+"-item",i=t.disabled?r+" "+r+"-disabled":r,o=this._insertElementAt("a",i,e,n),a=this._createEventHandler(o,t.callback,t.context,t.hideOnSelect),s=this._getIcon(t),l=this._getIconCls(t),u="";return s?u='<img class="'+c.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>':l&&(u='<span class="'+c.Map.ContextMenu.BASE_CLS+"-icon "+l+'"></span>'),o.innerHTML=u+t.text,o.href="#",c.DomEvent.on(o,"mouseover",this._onItemMouseOver,this).on(o,"mouseout",this._onItemMouseOut,this).on(o,"mousedown",c.DomEvent.stopPropagation).on(o,"click",a),c.Browser.touch&&c.DomEvent.on(o,this._touchstart,c.DomEvent.stopPropagation),c.Browser.pointer||c.DomEvent.on(o,"click",this._onItemMouseOut,this),{id:c.Util.stamp(o),el:o,callback:a}},_removeItem:function(e){var t,n,r,i,o;for(r=0,i=this._items.length;r<i;r++)if((t=this._items[r]).id===e)return n=t.el,(o=t.callback)&&(c.DomEvent.off(n,"mouseover",this._onItemMouseOver,this).off(n,"mouseover",this._onItemMouseOut,this).off(n,"mousedown",c.DomEvent.stopPropagation).off(n,"click",o),c.Browser.touch&&c.DomEvent.off(n,this._touchstart,c.DomEvent.stopPropagation),c.Browser.pointer||c.DomEvent.on(n,"click",this._onItemMouseOut,this)),this._container.removeChild(n),this._items.splice(r,1),t;return null},_createSeparator:function(e,t){var n=this._insertElementAt("div",c.Map.ContextMenu.BASE_CLS+"-separator",e,t);return{id:c.Util.stamp(n),el:n}},_createEventHandler:function(t,n,r,i){var o=this,a=this._map,s=c.Map.ContextMenu.BASE_CLS+"-item-disabled";i=void 0===i||i;return function(e){c.DomUtil.hasClass(t,s)||(i&&o._hide(),n&&n.call(r||a,o._showLocation),o._map.fire("contextmenu.select",{contextmenu:o,el:t}))}},_insertElementAt:function(e,t,n,r){var i,o=document.createElement(e);return o.className=t,void 0!==r&&(i=n.children[r]),i?n.insertBefore(o,i):n.appendChild(o),o},_show:function(e){this._showAtPoint(e.containerPoint,e)},_showAtPoint:function(e,t){if(this._items.length){var n=this._map,r=n.containerPointToLayerPoint(e),i=n.layerPointToLatLng(r),o=c.extend(t||{},{contextmenu:this});this._showLocation={latlng:i,layerPoint:r,containerPoint:e},t&&t.relatedTarget&&(this._showLocation.relatedTarget=t.relatedTarget),this._setPosition(e),this._visible||(this._container.style.display="block",this._visible=!0),this._map.fire("contextmenu.show",o)}},_hide:function(){this._visible&&(this._visible=!1,this._container.style.display="none",this._map.fire("contextmenu.hide",{contextmenu:this}))},_getIcon:function(e){return c.Browser.retina&&e.retinaIcon||e.icon},_getIconCls:function(e){return c.Browser.retina&&e.retinaIconCls||e.iconCls},_setPosition:function(e){var t,n=this._map.getSize(),r=this._container,i=this._getElementSize(r);this._map.options.contextmenuAnchor&&(t=c.point(this._map.options.contextmenuAnchor),e=e.add(t)),(r._leaflet_pos=e).x+i.x>n.x?(r.style.left="auto",r.style.right=Math.min(Math.max(n.x-e.x,0),n.x-i.x-1)+"px"):(r.style.left=Math.max(e.x,0)+"px",r.style.right="auto"),e.y+i.y>n.y?(r.style.top="auto",r.style.bottom=Math.min(Math.max(n.y-e.y,0),n.y-i.y-1)+"px"):(r.style.top=Math.max(e.y,0)+"px",r.style.bottom="auto")},_getElementSize:function(e){var t=this._size,n=e.style.display;return t&&!this._sizeChanged||(t={},e.style.left="-999999px",e.style.right="auto",e.style.display="block",t.x=e.offsetWidth,t.y=e.offsetHeight,e.style.left="auto",e.style.display=n,this._sizeChanged=!1),t},_onKeyDown:function(e){27===e.keyCode&&this._hide()},_onItemMouseOver:function(e){c.DomUtil.addClass(e.target||e.srcElement,"over")},_onItemMouseOut:function(e){c.DomUtil.removeClass(e.target||e.srcElement,"over")}}),c.Map.addInitHook("addHandler","contextmenu",c.Map.ContextMenu),c.Mixin.ContextMenu={bindContextMenu:function(e){return c.setOptions(this,e),this._initContextMenu(),this},unbindContextMenu:function(){return this.off("contextmenu",this._showContextMenu,this),this},addContextMenuItem:function(e){this.options.contextmenuItems.push(e)},removeContextMenuItemWithIndex:function(e){for(var t=[],n=0;n<this.options.contextmenuItems.length;n++)this.options.contextmenuItems[n].index==e&&t.push(n);for(var r=t.pop();void 0!==r;)this.options.contextmenuItems.splice(r,1),r=t.pop()},replaceContextMenuItem:function(e){this.removeContextMenuItemWithIndex(e.index),this.addContextMenuItem(e)},_initContextMenu:function(){this._items=[],this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(e){var t,n,r,i,o;if(this._map.contextmenu){for(n=c.extend({relatedTarget:this},e),r=this._map.mouseEventToContainerPoint(e.originalEvent),this.options.contextmenuInheritItems||this._map.contextmenu.hideAllItems(),i=0,o=this.options.contextmenuItems.length;i<o;i++)t=this.options.contextmenuItems[i],this._items.push(this._map.contextmenu.insertItem(t,t.index));this._map.once("contextmenu.hide",this._hideContextMenu,this),this._map.contextmenu.showAt(r,n)}},_hideContextMenu:function(){var e,t;for(e=0,t=this._items.length;e<t;e++)this._map.contextmenu.removeItem(this._items[e]);this._items.length=0,this.options.contextmenuInheritItems||this._map.contextmenu.showAllItems()}};var e,t,n,r=[c.Marker,c.Path],i={contextmenu:!1,contextmenuItems:[],contextmenuInheritItems:!0};for(t=0,n=r.length;t<n;t++)(e=r[t]).prototype.options?e.mergeOptions(i):e.prototype.options=i,e.addInitHook(function(){this.options.contextmenu&&this._initContextMenu()}),e.include(c.Mixin.ContextMenu);return c.Map.ContextMenu})},{leaflet:473}],472:[function(e,t,n){L.locales={},L.locale=null,L.registerLocale=function(e,t){L.locales[e]=L.Util.extend({},L.locales[e],t)},L.setLocale=function(e){L.locale=e},L.i18n=L._=function(e,t){L.locale&&L.locales[L.locale]&&L.locales[L.locale][e]&&(e=L.locales[L.locale][e]);try{e=L.Util.template(e,t)}catch(e){}return e}},{}],473:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t=Object.freeze;function l(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}Object.freeze=function(e){return e};var o=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function p(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var n=0;function u(e){return e._leaflet_id=e._leaflet_id||++n,e._leaflet_id}function r(e,t,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(a,t),r=!0)}}function i(e,t,n){var r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function s(){return!1}function a(e,t){var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function c(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return c(e).split(/\s+/)}function f(e,t){for(var n in e.hasOwnProperty("options")||(e.options=e.options?o(e.options):{}),t)e.options[n]=t[n];return e.options}function d(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(e,r){return e.replace(m,function(e,t){var n=r[t];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(r)),n})}var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function _(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function x(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var k=window.requestAnimationFrame||b("RequestAnimationFrame")||x,C=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function S(e,t,n){if(!n||k!==x)return k.call(window,p(e,t));e.call(t)}function M(e){e&&C.call(window,e)}var P=(Object.freeze||Object)({freeze:t,extend:l,create:o,bind:p,lastId:n,stamp:u,throttle:r,wrapNum:i,falseFn:s,formatNum:a,trim:c,splitWords:h,setOptions:f,getParamString:d,template:g,isArray:y,indexOf:_,emptyImageUrl:v,requestFn:k,cancelFn:C,requestAnimFrame:S,cancelAnimFrame:M});function E(){}E.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,r=o(n);for(var i in(r.constructor=t).prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(t[i]=this[i]);return e.statics&&(l(t,e.statics),delete e.statics),e.includes&&(!function(e){if("undefined"==typeof L||!L||!L.Mixin)return;e=y(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(e.includes),l.apply(null,[r].concat(e.includes)),delete e.includes),r.options&&(e.options=l(o(r.options),e.options)),l(r,e),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},t},E.include=function(e){return l(this.prototype,e),this},E.mergeOptions=function(e){return l(this.prototype.options,e),this},E.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var T={on:function(e,t,n){if("object"==typeof e)for(var r in e)this._on(r,e[r],t);else for(var i=0,o=(e=h(e)).length;i<o;i++)this._on(e[i],t,n);return this},off:function(e,t,n){if(e)if("object"==typeof e)for(var r in e)this._off(r,e[r],t);else for(var i=0,o=(e=h(e)).length;i<o;i++)this._off(e[i],t,n);else delete this._events;return this},_on:function(e,t,n){this._events=this._events||{};var r=this._events[e];r||(r=[],this._events[e]=r),n===this&&(n=void 0);for(var i={fn:t,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===t&&o[a].ctx===n)return;o.push(i)},_off:function(e,t,n){var r,i,o;if(this._events&&(r=this._events[e]))if(t){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===t)return a.fn=s,this._firingCount&&(this._events[e]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=s;delete this._events[e]}},fire:function(e,t,n){if(!this.listens(e,n))return this;var r=l({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var i=this._events[e];if(i){this._firingCount=this._firingCount+1||1;for(var o=0,a=i.length;o<a;o++){var s=i[o];s.fn.call(s.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(e,t){var n=this._events&&this._events[e];if(n&&n.length)return!0;if(t)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var r in e)this.once(r,e[r],t);return this}var i=p(function(){this.off(e,t,n).off(e,i,n)},this);return this.on(e,t,n).on(e,i,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[u(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[u(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,l({layer:e.target,propagatedFrom:e.target},e),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var I=E.extend(T);function O(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var D=Math.trunc||function(e){return 0<e?Math.floor(e):Math.ceil(e)};function N(e,t,n){return e instanceof O?e:y(e)?new O(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new O(e.x,e.y):new O(e,t,n)}function A(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(e,t){return!e||e instanceof A?e:new A(e,t)}function R(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function B(e,t){return e instanceof R?e:new R(e,t)}function F(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function z(e,t,n){return e instanceof F?e:y(e)&&"object"!=typeof e[0]?3===e.length?new F(e[0],e[1],e[2]):2===e.length?new F(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new F(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new F(e,t,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(e){return this.clone()._add(N(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(N(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new O(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new O(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(e){var t=(e=N(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=N(e)).x===this.x&&e.y===this.y},contains:function(e){return e=N(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},A.prototype={extend:function(e){return e=N(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"==typeof e[0]||e instanceof O?N(e):j(e))instanceof A?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>=t.x&&r.x<=n.x,a=i.y>=t.y&&r.y<=n.y;return o&&a},overlaps:function(e){e=j(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>t.x&&r.x<n.x,a=i.y>t.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(e){var t,n,r=this._southWest,i=this._northEast;if(e instanceof F)n=t=e;else{if(!(e instanceof R))return e?this.extend(z(e)||B(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||i?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(t.lat,t.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new R(new F(t.lat-r,t.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof F||"lat"in e?z(e):B(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof R?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&r.lat<=n.lat,a=i.lng>=t.lng&&r.lng<=n.lng;return o&&a},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&r.lat<n.lat,a=i.lng>t.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}};var q,U={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new A(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!(F.prototype={equals:function(e,t){return!!e&&(e=z(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+a(this.lat,e)+", "+a(this.lng,e)+")"},distanceTo:function(e){return G.distance(this,z(e))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}}),wrapLatLng:function(e){var t=this.wrapLng?i(e.lng,this.wrapLng,!0):e.lng;return new F(this.wrapLat?i(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(0===r&&0===i)return e;var o=e.getSouthWest(),a=e.getNorthEast();return new R(new F(o.lat-r,o.lng-i),new F(a.lat-r,a.lng-i))}},G=l({},U,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),a=Math.sin((t.lng-e.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),$={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new O(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new F((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(q=6378137*Math.PI,new A([-q,-q],[q,q]))};function V(e,t,n,r){if(y(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function H(e,t,n,r){return new V(e,t,n,r)}V.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new O((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var W,Q=l({},G,{code:"EPSG:3857",projection:$,transformation:(W=.5/(Math.PI*$.R),H(W,.5,-W,.5))}),K=l({},Q,{code:"EPSG:900913"});function Z(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function J(e,t){var n,r,i,o,a,s,l="";for(n=0,i=e.length;n<i;n++){for(r=0,o=(a=e[n]).length;r<o;r++)l+=(r?"L":"M")+(s=a[r]).x+" "+s.y;l+=t?Ee?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,Y="ActiveXObject"in window,ee=Y&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Ie("webkit"),re=Ie("android"),ie=Ie("android 2")||Ie("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ae=re&&Ie("Google")&&oe<537&&!("AudioNode"in window),se=!!window.opera,le=Ie("chrome"),ue=Ie("gecko")&&!ne&&!se&&!Y,ce=!le&&Ie("safari"),he=Ie("phantom"),fe="OTransition"in X,de=0===navigator.platform.indexOf("Win"),pe=Y&&"transition"in X,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,ge="MozPerspective"in X,ye=!window.L_DISABLE_3D&&(pe||me||ge)&&!fe&&!he,_e="undefined"!=typeof orientation||Ie("mobile"),ve=_e&&ne,be=_e&&me,we=!window.PointerEvent&&window.MSPointerEvent,xe=!(ne||!window.PointerEvent&&!we),ke=!window.L_NO_TOUCH&&(xe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Le=_e&&se,Ce=_e&&ue,Se=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Me=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",s,t),window.removeEventListener("testPassiveEventSupport",s,t)}catch(e){}return e},Pe=!!document.createElement("canvas").getContext,Ee=!(!document.createElementNS||!Z("svg").createSVGRect),Te=!Ee&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}();function Ie(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}var Oe=(Object.freeze||Object)({ie:Y,ielt9:ee,edge:te,webkit:ne,android:re,android23:ie,androidStock:ae,opera:se,chrome:le,gecko:ue,safari:ce,phantom:he,opera12:fe,win:de,ie3d:pe,webkit3d:me,gecko3d:ge,any3d:ye,mobile:_e,mobileWebkit:ve,mobileWebkit3d:be,msPointer:we,pointer:xe,touch:ke,mobileOpera:Le,mobileGecko:Ce,retina:Se,passiveEvents:Me,canvas:Pe,svg:Ee,vml:Te}),De=we?"MSPointerDown":"pointerdown",Ne=we?"MSPointerMove":"pointermove",Ae=we?"MSPointerUp":"pointerup",je=we?"MSPointerCancel":"pointercancel",Re=["INPUT","SELECT","OPTION"],Be={},Fe=!1,ze=0;function qe(e,t,n,r){var i,o,a,s,l,u,c,h,f,d;return"touchstart"===t?(c=e,h=n,f=r,d=p(function(e){if("mouse"!==e.pointerType&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(!(Re.indexOf(e.target.tagName)<0))return;Bt(e)}Ve(e,h)}),c["_leaflet_touchstart"+f]=d,c.addEventListener(De,d,!1),Fe||(document.documentElement.addEventListener(De,Ue,!0),document.documentElement.addEventListener(Ne,Ge,!0),document.documentElement.addEventListener(Ae,$e,!0),document.documentElement.addEventListener(je,$e,!0),Fe=!0)):"touchmove"===t?(l=n,u=function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&Ve(e,l)},(s=e)["_leaflet_touchmove"+r]=u,s.addEventListener(Ne,u,!1)):"touchend"===t&&(o=n,a=function(e){Ve(e,o)},(i=e)["_leaflet_touchend"+r]=a,i.addEventListener(Ae,a,!1),i.addEventListener(je,a,!1)),this}function Ue(e){Be[e.pointerId]=e,ze++}function Ge(e){Be[e.pointerId]&&(Be[e.pointerId]=e)}function $e(e){delete Be[e.pointerId],ze--}function Ve(e,t){for(var n in e.touches=[],Be)e.touches.push(Be[n]);e.changedTouches=[e],t(e)}var He=we?"MSPointerDown":xe?"pointerdown":"touchstart",We=we?"MSPointerUp":xe?"pointerup":"touchend",Qe="_leaflet_";function Ke(e,i,t){var o,a,s=!1;function n(e){var t;if(xe){if(!te||"mouse"===e.pointerType)return;t=ze}else t=e.touches.length;if(!(1<t)){var n=Date.now(),r=n-(o||n);a=e.touches?e.touches[0]:e,s=0<r&&r<=250,o=n}}function r(e){if(s&&!a.cancelBubble){if(xe){if(!te||"mouse"===e.pointerType)return;var t,n,r={};for(n in a)t=a[n],r[n]=t&&t.bind?t.bind(a):t;a=r}a.type="dblclick",a.button=0,i(a),o=null}}return e[Qe+He+t]=n,e[Qe+We+t]=r,e[Qe+"dblclick"+t]=i,e.addEventListener(He,n,!!Me&&{passive:!1}),e.addEventListener(We,r,!!Me&&{passive:!1}),e.addEventListener("dblclick",i,!1),this}function Ze(e,t){var n=e[Qe+He+t],r=e[Qe+We+t],i=e[Qe+"dblclick"+t];return e.removeEventListener(He,n,!!Me&&{passive:!1}),e.removeEventListener(We,r,!!Me&&{passive:!1}),te||e.removeEventListener("dblclick",i,!1),this}var Je,Xe,Ye,et,tt,nt=_t(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),rt=_t(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),it="webkitTransition"===rt||"OTransition"===rt?rt+"End":"transitionend";function ot(e){return"string"==typeof e?document.getElementById(e):e}function at(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function st(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function lt(e){var t=e.parentNode;t&&t.removeChild(e)}function ut(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ct(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function ht(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function ft(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=gt(e);return 0<n.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function dt(e,t){if(void 0!==e.classList)for(var n=h(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!ft(e,t)){var o=gt(e);mt(e,(o?o+" ":"")+t)}}function pt(e,t){void 0!==e.classList?e.classList.remove(t):mt(e,c((" "+gt(e)+" ").replace(" "+t+" "," ")))}function mt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function gt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function yt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&function(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(e){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}(e,t)}function _t(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function vt(e,t,n){var r=t||new O(0,0);e.style[nt]=(pe?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function bt(e,t){e._leaflet_pos=t,ye?vt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function wt(e){return e._leaflet_pos||new O(0,0)}if("onselectstart"in document)Je=function(){Tt(window,"selectstart",Bt)},Xe=function(){Ot(window,"selectstart",Bt)};else{var xt=_t(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Je=function(){if(xt){var e=document.documentElement.style;Ye=e[xt],e[xt]="none"}},Xe=function(){xt&&(document.documentElement.style[xt]=Ye,Ye=void 0)}}function kt(){Tt(window,"dragstart",Bt)}function Lt(){Ot(window,"dragstart",Bt)}function Ct(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(St(),tt=(et=e).style.outline,e.style.outline="none",Tt(window,"keydown",St))}function St(){et&&(et.style.outline=tt,tt=et=void 0,Ot(window,"keydown",St))}function Mt(e){for(;!((e=e.parentNode).offsetWidth&&e.offsetHeight||e===document.body););return e}function Pt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Et=(Object.freeze||Object)({TRANSFORM:nt,TRANSITION:rt,TRANSITION_END:it,get:ot,getStyle:at,create:st,remove:lt,empty:ut,toFront:ct,toBack:ht,hasClass:ft,addClass:dt,removeClass:pt,setClass:mt,getClass:gt,setOpacity:yt,testProp:_t,setTransform:vt,setPosition:bt,getPosition:wt,disableTextSelection:Je,enableTextSelection:Xe,disableImageDrag:kt,enableImageDrag:Lt,preventOutline:Ct,restoreOutline:St,getSizedParentNode:Mt,getScale:Pt});function Tt(e,t,n,r){if("object"==typeof t)for(var i in t)Dt(e,i,t[i],n);else for(var o=0,a=(t=h(t)).length;o<a;o++)Dt(e,t[o],n,r);return this}var It="_leaflet_events";function Ot(e,t,n,r){if("object"==typeof t)for(var i in t)Nt(e,i,t[i],n);else if(t)for(var o=0,a=(t=h(t)).length;o<a;o++)Nt(e,t[o],n,r);else{for(var s in e[It])Nt(e,s,e[It][s]);delete e[It]}return this}function Dt(t,e,n,r){var i=e+u(n)+(r?"_"+u(r):"");if(t[It]&&t[It][i])return this;var o=function(e){return n.call(r||t,e||window.event)},a=o;xe&&0===e.indexOf("touch")?qe(t,e,o,i):!ke||"dblclick"!==e||xe&&le?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Me&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,Wt(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&re&&(o=function(e){!function(e,t){var n=e.timeStamp||e.originalEvent&&e.originalEvent.timeStamp,r=Gt&&n-Gt;if(r&&100<r&&r<500||e.target._simulatedClick&&!e._simulated)return Ft(e);Gt=n,t(e)}(e,a)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Ke(t,o,i),t[It]=t[It]||{},t[It][i]=o}function Nt(e,t,n,r){var i,o,a,s=t+u(n)+(r?"_"+u(r):""),l=e[It]&&e[It][s];if(!l)return this;xe&&0===t.indexOf("touch")?(a=(i=e)["_leaflet_"+(o=t)+s],"touchstart"===o?i.removeEventListener(De,a,!1):"touchmove"===o?i.removeEventListener(Ne,a,!1):"touchend"===o&&(i.removeEventListener(Ae,a,!1),i.removeEventListener(je,a,!1))):!ke||"dblclick"!==t||xe&&le?"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",l,!!Me&&{passive:!1}):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,l,!1):"detachEvent"in e&&e.detachEvent("on"+t,l):Ze(e,s),e[It][s]=null}function At(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,Ht(e),this}function jt(e){return Dt(e,"mousewheel",At),this}function Rt(e){return Tt(e,"mousedown touchstart dblclick",At),Dt(e,"click",Vt),this}function Bt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Ft(e){return Bt(e),At(e),this}function zt(e,t){if(!t)return new O(e.clientX,e.clientY);var n=Pt(t),r=n.boundingClientRect;return new O((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var qt=de&&le?2*window.devicePixelRatio:ue?window.devicePixelRatio:1;function Ut(e){return te?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/qt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}var Gt,$t={};function Vt(e){$t[e.type]=!0}function Ht(e){var t=$t[e.type];return $t[e.type]=!1,t}function Wt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(e){return!1}return n!==e}var Qt=(Object.freeze||Object)({on:Tt,off:Ot,stopPropagation:At,disableScrollPropagation:jt,disableClickPropagation:Rt,preventDefault:Bt,stop:Ft,getMousePosition:zt,getWheelDelta:Ut,fakeStop:Vt,skipped:Ht,isExternalTarget:Wt,addListener:Tt,removeListener:Ot}),Kt=I.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=wt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),bt(this._el,n),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Zt=I.extend({options:{crs:Q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(z(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=rt&&ye&&!Le&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Tt(this._proxy,it,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if((t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(z(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n)&&(void 0!==n.animate&&(n.zoom=l({animate:n.animate},n.zoom),n.pan=l({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(ye?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(ye?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),o=(e instanceof O?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=N(t.paddingTopLeft||t.padding||[0,0]),r=N(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if((i="number"==typeof t.maxZoom?Math.min(t.maxZoom,i):i)===1/0)return{center:e.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=N(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Kt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){dt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(o,a,e){if(!1===(e=e||{}).animate||!ye)return this.setView(o,a,e);this._stop();var s=this.project(this.getCenter()),l=this.project(o),t=this.getSize(),u=this._zoom;o=z(o),a=void 0===a?u:a;var c=Math.max(t.x,t.y),r=c*this.getZoomScale(u,a),h=l.distanceTo(s)||1,f=1.42,i=f*f;function n(e){var t=(r*r-c*c+(e?-1:1)*i*i*h*h)/(2*(e?r:c)*i*h),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function d(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}var m=n(0);function g(e){return c*(p(m)*(d(t=m+f*e)/p(t))-d(m))/i;var t}var y=Date.now(),_=(n(1)-m)/f,v=e.duration?1e3*e.duration:1e3*_*.8;return this._moveStart(!0,e.noMoveStart),function e(){var t,n,r=(Date.now()-y)/v,i=(t=r,(1-Math.pow(1-t,1.5))*_);r<=1?(this._flyToFrame=S(e,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(g(i)/h)),u),this.getScaleZoom(c/(n=i,c*(p(m)/p(m+f*n))),u),{flyTo:!0})):this._move(o,a)._moveEnd(!0)}.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=B(e)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=N((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=N(t.paddingBottomRight||t.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(e),s=this.getPixelBounds(),l=s.getSize().divideBy(2),u=j([s.min.add(n),s.max.subtract(r)]);if(!u.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),h=N(a.x+c.x,a.y+c.y);(a.x<u.min.x||a.x>u.max.x)&&(h.x=o.x-c.x,0<c.x?h.x+=l.x-n.x:h.x-=l.x-r.x),(a.y<u.min.y||a.y>u.max.y)&&(h.y=o.y-c.y,0<c.y?h.y+=l.y-n.y:h.y-=l.y-r.y),this.panTo(this.unproject(h),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=l({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=t.divideBy(2).round(),i=n.divideBy(2).round(),o=r.subtract(i);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=l({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=p(this._handleGeolocationResponse,this),n=p(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=new F(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:t,bounds:n,timestamp:e.timestamp};for(var a in e.coords)"number"==typeof e.coords[a]&&(o[a]=e.coords[a]);this.fire("locationfound",o)},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)lt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=st("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new R(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=N(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),u=j(this.project(s,r),this.project(a,r)).getSize(),c=ye?this.options.zoomSnap:1,h=l.x/u.x,f=l.y/u.y,d=t?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(d,r),c&&(r=Math.round(r/(c/100))*(c/100),r=t?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new A(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(z(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(N(e),t)},layerPointToLatLng:function(e){var t=N(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(z(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(z(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(z(e),z(t))},containerPointToLayerPoint:function(e){return N(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return N(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(N(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(e)))},mouseEventToContainerPoint:function(e){return zt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ot(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Tt(t,"scroll",this._onScroll,this),this._containerId=u(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye,dt(e,"leaflet-container"+(ke?" leaflet-touch":"")+(Se?" leaflet-retina":"")+(ee?" leaflet-oldie":"")+(ce?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=at(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bt(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(dt(e.markerPane,"leaflet-zoom-hide"),dt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){bt(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,!1)._move(e,t)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){bt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={};var t=e?Ot:Tt;t((this._targets[u(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),ye&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=S(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],i="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((n=this._targets[u(o)])&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(i&&!Wt(o,e))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!Wt(o,e)||(r=[this]),r},_handleDOMEvent:function(e){if(this._loaded&&!Ht(e)){var t=e.type;"mousedown"!==t&&"keypress"!==t&&"keyup"!==t&&"keydown"!==t||Ct(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,n){if("click"===e.type){var r=l({},e);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!e._stopped&&(n=(n||[]).concat(this._findEventTargets(e,t))).length){var i=n[0];"contextmenu"===t&&i.listens(t,!0)&&Bt(e);var o={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var a=i.getLatLng&&(!i._radius||i._radius<=10);o.containerPoint=a?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(e),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=a?i.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(t,o,!0),o.originalEvent._stopped||!1===n[s].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return wt(this._mapPane)||new O(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),o=new A(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,t);return a.round().equals([0,0])?e:this.unproject(r.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new A(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),o=r.max.subtract(e.max);return new O(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(e,t){return 0<e+t?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=ye?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=st("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=nt,n=this._proxy.style[t];vt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();vt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&0<=e.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(S(function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S(function(){this._moveEnd(!0)},this))}});var Jt=E.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return dt(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(e){this._map&&e&&0<e.screenX&&0<e.screenY&&this._map.getContainer().focus()}}),Xt=function(e){return new Jt(e)};Zt.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var r=this._controlCorners={},i="leaflet-",o=this._controlContainer=st("div",i+"control-container",this._container);function e(e,t){var n=i+e+" "+i+t;r[e+t]=st("div",n,o)}e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)lt(this._controlCorners[e]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yt=Jt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),(this._map=e).on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Jt.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(u(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=st("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Rt(t),jt(t);var r=this._section=st("section",e+"-list");n&&(this._map.on("click",this.collapse,this),re||Tt(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=st("a",e+"-toggle",t);i.href="#",i.title="Layers",ke?(Tt(i,"click",Ft),Tt(i,"click",this.expand,this)):Tt(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=st("div",e+"-base",r),this._separator=st("div",e+"-separator",r),this._overlaysList=st("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&u(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(p(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ut(this._baseLayersList),ut(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&1<i,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(u(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+u(this),r),this._layerControlInputs.push(t),t.layerId=u(e.layer),Tt(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(t),o.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var e,t,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;0<=o;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||i.push(t);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;0<=i;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),en=Jt.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=st("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var o=st("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Rt(o),Tt(o,"click",Ft),Tt(o,"click",i,this),Tt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";pt(this._zoomInButton,t),pt(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&dt(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&dt(this._zoomInButton,t)}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new en,this.addControl(this.zoomControl))});var tn=Jt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=st("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=st("div",t,n)),e.imperial&&(this._iScale=st("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;5280<i?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),nn=Jt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in(e.attributionControl=this)._container=st("div","leaflet-control-attribution"),Rt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e&&(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update()),this},removeAttribution:function(e){return e&&this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook(function(){this.options.attributionControl&&(new nn).addTo(this)});Jt.Layers=Yt,Jt.Zoom=en,Jt.Scale=tn,Jt.Attribution=nn,Xt.layers=function(e,t,n){return new Yt(e,t,n)},Xt.zoom=function(e){return new en(e)},Xt.scale=function(e){return new tn(e)},Xt.attribution=function(e){return new nn(e)};var rn=E.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});rn.addTo=function(e,t){return e.addHandler(t,this),this};var on,an={Events:T},sn=ke?"touchstart mousedown":"mousedown",ln={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},un={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},cn=I.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){f(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Tt(this._dragStartTarget,sn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cn._dragging===this&&this.finishDrag(),Ot(this._dragStartTarget,sn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!ft(this._element,"leaflet-zoom-anim")&&!(cn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||((cn._dragging=this)._preventOutline&&Ct(this._element),kt(),Je(),this._moving)))){this.fire("down");var t=e.touches?e.touches[0]:e,n=Mt(this._element);this._startPoint=new O(t.clientX,t.clientY),this._parentScale=Pt(n),Tt(document,un[e.type],this._onMove,this),Tt(document,ln[e.type],this._onUp,this)}},_onMove:function(e){if(!e._simulated&&this._enabled)if(e.touches&&1<e.touches.length)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new O(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Bt(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=wt(this._element).subtract(n),dt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,M(this._animRequest),this._lastEvent=e,this._animRequest=S(this._updatePosition,this,!0)))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),bt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),un)Ot(document,un[e],this._onMove,this),Ot(document,ln[e],this._onUp,this);Lt(),Xe(),this._moved&&this._moving&&(M(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,cn._dragging=!1}});function hn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=function(e,t){var n=e.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function e(t,n,r,i,o){var a,s,l,u=0;for(s=i+1;s<=o-1;s++)l=gn(t[s],t[i],t[o],!0),u<l&&(a=s,u=l);r<u&&(n[a]=1,e(t,n,r,i,a),e(t,n,r,a,o))}(e,r,t,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(e[i]);return o}(e=function(e,t){for(var n=[e[0]],r=1,i=0,o=e.length;r<o;r++)a=e[r],s=e[i],void 0,l=s.x-a.x,u=s.y-a.y,t<l*l+u*u&&(n.push(e[r]),i=r);var a,s,l,u;i<o-1&&n.push(e[o-1]);return n}(e,n),n)}function fn(e,t,n){return Math.sqrt(gn(e,t,n,!0))}function dn(e,t,n,r,i){var o,a,s,l=r?on:mn(e,n),u=mn(t,n);for(on=u;;){if(!(l|u))return[e,t];if(l&u)return!1;s=mn(a=pn(e,t,o=l||u,n,i),n),o===l?(e=a,l=s):(t=a,u=s)}}function pn(e,t,n,r,i){var o,a,s=t.x-e.x,l=t.y-e.y,u=r.min,c=r.max;return 8&n?(o=e.x+s*(c.y-e.y)/l,a=c.y):4&n?(o=e.x+s*(u.y-e.y)/l,a=u.y):2&n?(o=c.x,a=e.y+l*(c.x-e.x)/s):1&n&&(o=u.x,a=e.y+l*(u.x-e.x)/s),new O(o,a,i)}function mn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function gn(e,t,n,r){var i,o=t.x,a=t.y,s=n.x-o,l=n.y-a,u=s*s+l*l;return 0<u&&(1<(i=((e.x-o)*s+(e.y-a)*l)/u)?(o=n.x,a=n.y):0<i&&(o+=s*i,a+=l*i)),s=e.x-o,l=e.y-a,r?s*s+l*l:new O(o,a)}function yn(e){return!y(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function _n(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yn(e)}var vn=(Object.freeze||Object)({simplify:hn,pointToSegmentDistance:fn,closestPointOnSegment:function(e,t,n){return gn(e,t,n)},clipSegment:dn,_getEdgeIntersection:pn,_getBitCode:mn,_sqClosestPointOnSegment:gn,isFlat:yn,_flat:_n});function bn(e,t,n){var r,i,o,a,s,l,u,c,h,f=[1,4,2,8];for(i=0,u=e.length;i<u;i++)e[i]._code=mn(e[i],t);for(a=0;a<4;a++){for(c=f[a],r=[],i=0,o=(u=e.length)-1;i<u;o=i++)s=e[i],l=e[o],s._code&c?l._code&c||((h=pn(l,s,c,t,n))._code=mn(h,t),r.push(h)):(l._code&c&&((h=pn(l,s,c,t,n))._code=mn(h,t),r.push(h)),r.push(s));e=r}return e}var wn,xn=(Object.freeze||Object)({clipPolygon:bn}),kn={project:function(e){return new O(e.lng,e.lat)},unproject:function(e){return new F(e.y,e.x)},bounds:new A([-180,-90],[180,90])},Ln={R:6378137,R_MINOR:6356752.314245179,bounds:new A([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new O(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-e.y/r),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)t=o*Math.sin(s),t=Math.pow((1-t)/(1+t),o/2),s+=u=Math.PI/2-2*Math.atan(a*t)-s;return new F(s*n,e.x*n/r)}},Cn=(Object.freeze||Object)({LonLat:kn,Mercator:Ln,SphericalMercator:$}),Sn=l({},G,{code:"EPSG:3395",projection:Ln,transformation:(wn=.5/(Math.PI*Ln.R),H(wn,.5,-wn,.5))}),Mn=l({},G,{code:"EPSG:4326",projection:kn,transformation:H(1/180,1,-1/180,.5)}),Pn=l({},U,{projection:kn,transformation:H(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});U.Earth=G,U.EPSG3395=Sn,U.EPSG3857=Q,U.EPSG900913=K,U.EPSG4326=Mn,U.Simple=Pn;var En=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[u(e)]=this},removeInteractiveTarget:function(e){return delete this._map._targets[u(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=u(e);return this._layers[t]||((this._layers[t]=e)._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=u(e);return this._layers[t]&&(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null),this},hasLayer:function(e){return!!e&&u(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?y(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[u(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=u(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=void 0===i.minZoom?e:Math.min(e,i.minZoom),t=void 0===i.maxZoom?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tn=En.extend({initialize:function(e,t){var n,r;if(f(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return u(e)}}),In=Tn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Tn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Tn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new R;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),On=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"==typeof r&&(r=[r,r]);var i=N(r),o=N("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Se&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});var Dn=On.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return Dn.imagePath||(Dn.imagePath=this._detectIconPath()),(this.options.imagePath||Dn.imagePath)+On.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=st("div","leaflet-default-icon-path",document.body),t=at(e,"background-image")||at(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Nn=rn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new cn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),dt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=wt(t._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=j(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!l.contains(o)){var u=N((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),bt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=S(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=wt(t._icon),i=t._map.layerPointToLatLng(r);n&&bt(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),An=En.extend({options:{icon:new Dn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=z(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),dt(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(dt(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&bt(this._icon,e),this._shadow&&bt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nn)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nn(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&yt(this._icon,e),this._shadow&&yt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var jn=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&e.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Rn=jn.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=z(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return jn.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new A(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Bn=Rn.extend({initialize:function(e,t,n){if("number"==typeof t&&(t=l({},n,{radius:t})),f(this,t),this._latlng=z(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:jn.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===G.distance){var i=Math.PI/180,o=this._mRadius/G.R/i,a=n.project([t+o,e]),s=n.project([t-o,e]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*i)-Math.sin(t*i)*Math.sin(u*i))/(Math.cos(t*i)*Math.cos(u*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,e-c]).x,this._radiusY=l.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});var Fn=jn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,i=null,o=gn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){var h=o(e,t=l[u-1],n=l[u],!0);h<r&&(r=h,i=o(e,t,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,n,r,i,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=e=0;e<l-1;e++)t+=s[e].distanceTo(s[e+1])/2;if(0===t)return this._map.layerPointToLatLng(s[0]);for(r=e=0;e<l-1;e++)if(i=s[e],o=s[e+1],t<(r+=n=i.distanceTo(o)))return a=(r-t)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=z(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new R,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return yn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=yn(e),r=0,i=e.length;r<i;r++)n?(t[r]=z(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new A;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new O(e,e);this._pxBounds=new A([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(e,t,n){var r,i,o=e[0]instanceof F,a=e.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,i,o,a,s,l=this._parts;for(r=t=0,i=this._rings.length;t<i;t++)for(n=0,o=(s=this._rings[t]).length;n<o-1;n++)(a=dn(s[n],s[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=hn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((t||0!==r)&&fn(e,s[i],s[r])<=l)return!0;return!1}});Fn._flat=_n;var zn=Fn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,n,r,i,o,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(o=a=s=0,e=0,t=c-1;e<c;t=e++)n=u[e],r=u[t],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return l=0===o?u[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(e){var t=Fn.prototype._convertLatLngs.call(this,e),n=t.length;return 2<=n&&t[0]instanceof F&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){Fn.prototype._setLatLngs.call(this,e),yn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new O(t,t);if(e=new A(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=bn(this._rings[i],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,i,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(l=(t=this._parts[i]).length)-1;o<l;a=o++)n=t[o],r=t[a],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||Fn.prototype._containsPoint.call(this,e,!0)}});var qn=In.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=y(e)?e:e.features;if(i){for(t=0,n=i.length;t<n;t++)((r=i[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var a=Un(e,o);return a?(a.feature=Kn(e),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(e,a),this.addLayer(a)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=l({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"==typeof t&&(t=t(e.feature)),e.setStyle(t))}});function Un(e,t){var n,r,i,o,a="Feature"===e.type?e.geometry:e,s=a?a.coordinates:null,l=[],u=t&&t.pointToLayer,c=t&&t.coordsToLatLng||$n;if(!s&&!a)return null;switch(a.type){case"Point":return Gn(u,e,n=c(s),t);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),l.push(Gn(u,e,n,t));return new In(l);case"LineString":case"MultiLineString":return r=Vn(s,"LineString"===a.type?0:1,c),new Fn(r,t);case"Polygon":case"MultiPolygon":return r=Vn(s,"Polygon"===a.type?1:2,c),new zn(r,t);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=Un({geometry:a.geometries[i],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new In(l);default:throw new Error("Invalid GeoJSON object.")}}function Gn(e,t,n,r){return e?e(t,n):new An(n,r&&r.markersInheritOptions&&r)}function $n(e){return new F(e[1],e[0],e[2])}function Vn(e,t,n){for(var r,i=[],o=0,a=e.length;o<a;o++)r=t?Vn(e[o],t-1,n):(n||$n)(e[o]),i.push(r);return i}function Hn(e,t){return t="number"==typeof t?t:6,void 0!==e.alt?[a(e.lng,t),a(e.lat,t),a(e.alt,t)]:[a(e.lng,t),a(e.lat,t)]}function Wn(e,t,n,r){for(var i=[],o=0,a=e.length;o<a;o++)i.push(t?Wn(e[o],t-1,n,r):Hn(e[o],r));return!t&&n&&i.push(i[0]),i}function Qn(e,t){return e.feature?l({},e.feature,{geometry:t}):Kn(t)}function Kn(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Zn={toGeoJSON:function(e){return Qn(this,{type:"Point",coordinates:Hn(this.getLatLng(),e)})}};function Jn(e,t){return new qn(e,t)}An.include(Zn),Bn.include(Zn),Rn.include(Zn),Fn.include({toGeoJSON:function(e){var t=!yn(this._latlngs);return Qn(this,{type:(t?"Multi":"")+"LineString",coordinates:Wn(this._latlngs,t?1:0,!1,e)})}}),zn.include({toGeoJSON:function(e){var t=!yn(this._latlngs),n=t&&!yn(this._latlngs[0]),r=Wn(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),Qn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Tn.include({toMultiPoint:function(t){var n=[];return this.eachLayer(function(e){n.push(e.toGeoJSON(t).geometry.coordinates)}),Qn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(r){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(r);var i="GeometryCollection"===e,o=[];return this.eachLayer(function(e){if(e.toGeoJSON){var t=e.toGeoJSON(r);if(i)o.push(t.geometry);else{var n=Kn(t);"FeatureCollection"===n.type?o.push.apply(o,n.features):o.push(n)}}}),i?Qn(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var Xn=Jn,Yn=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ct(this._image),this},bringToBack:function(){return this._map&&ht(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:st("img");dt(t,"leaflet-image-layer"),this._zoomAnimated&&dt(t,"leaflet-zoom-animated"),this.options.className&&dt(t,this.options.className),t.onselectstart=s,t.onmousemove=s,t.onload=p(this.fire,this,"load"),t.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;vt(this._image,n,t)},_reset:function(){var e=this._image,t=new A(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();bt(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),er=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:st("video");if(dt(t,"leaflet-image-layer"),this._zoomAnimated&&dt(t,"leaflet-zoom-animated"),this.options.className&&dt(t,this.options.className),t.onselectstart=s,t.onmousemove=s,t.onloadeddata=p(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],i=0;i<n.length;i++)r.push(n[i].src);this._url=0<n.length?r:[t.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&t.style.hasOwnProperty("objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=st("source");a.src=this._url[o],t.appendChild(a)}}}});var tr=Yn.extend({_initImage:function(){var e=this._image=this._url;dt(e,"leaflet-image-layer"),this._zoomAnimated&&dt(e,"leaflet-zoom-animated"),this.options.className&&dt(e,this.options.className),e.onselectstart=s,e.onmousemove=s}});var nr=En.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){f(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&yt(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(yt(this._container,0),this._removeTimeout=setTimeout(p(lt,void 0,this._container),200)):lt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=z(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ct(this._container),this},bringToBack:function(){return this._map&&ht(this._container),this},_prepareOpen:function(e,t,n){if(t instanceof En||(n=t,t=e),t instanceof In)for(var r in e._layers){t=e._layers[r];break}if(!n)if(t.getCenter)n=t.getCenter();else{if(!t.getLatLng)throw new Error("Unable to get source layer LatLng.");n=t.getLatLng()}return this._source=t,this.update(),n},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=N(this.options.offset),n=this._getAnchor();this._zoomAnimated?bt(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),rr=nr.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){nr.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof jn||this._source.on("preclick",At))},onRemove:function(e){nr.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof jn||this._source.off("preclick",At))},getEvents:function(){var e=nr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=st("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=st("div",e+"-content-wrapper",t);if(this._contentNode=st("div",e+"-content",n),Rt(n),jt(this._contentNode),Tt(n,"contextmenu",At),this._tipContainer=st("div",e+"-tip-container",t),this._tip=st("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=st("a",e+"-close-button",t);r.href="#close",r.innerHTML="&#215;",Tt(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&i<r?(t.height=i+"px",dt(e,o)):pt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();bt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,t=parseInt(at(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new O(this._containerLeft,-n-this._containerBottom);i._add(wt(this._container));var o=e.layerPointToContainerPoint(i),a=N(this.options.autoPanPadding),s=N(this.options.autoPanPaddingTopLeft||a),l=N(this.options.autoPanPaddingBottomRight||a),u=e.getSize(),c=0,h=0;o.x+r+l.x>u.x&&(c=o.x+r-u.x+l.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+l.y>u.y&&(h=o.y+n-u.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&e.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(e){this._close(),Ft(e)},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(e,t,n){return e instanceof rr||(e=new rr(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),En.include({bindPopup:function(e,t){return e instanceof rr?(f(e,t),(this._popup=e)._source=this):(this._popup&&!t||(this._popup=new rr(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){return this._popup&&this._map&&(t=this._popup._prepareOpen(this,e,t),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(Ft(e),t instanceof jn?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var ir=nr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){nr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){nr.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=nr.prototype.getEvents.call(this);return ke&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=st("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,n=this._container,r=t.latLngToContainerPoint(t.getCenter()),i=t.layerPointToContainerPoint(e),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=N(this.options.offset),u=this._getAnchor();e="top"===o?e.add(N(-a/2+l.x,-s+l.y+u.y,!0)):"bottom"===o?e.subtract(N(a/2-l.x,-l.y,!0)):"center"===o?e.subtract(N(a/2+l.x,s/2-u.y+l.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",e.add(N(l.x+u.x,u.y-s/2+l.y,!0))):(o="left",e.subtract(N(a+u.x-l.x,s/2-u.y-l.y,!0))),pt(n,"leaflet-tooltip-right"),pt(n,"leaflet-tooltip-left"),pt(n,"leaflet-tooltip-top"),pt(n,"leaflet-tooltip-bottom"),dt(n,"leaflet-tooltip-"+o),bt(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&yt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Zt.include({openTooltip:function(e,t,n){return e instanceof ir||(e=new ir(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),En.include({bindTooltip:function(e,t){return e instanceof ir?(f(e,t),(this._tooltip=e)._source=this):(this._tooltip&&!t||(this._tooltip=new ir(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),ke&&(n.click=this._openTooltip)),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){return this._tooltip&&this._map&&(t=this._tooltip._prepareOpen(this,e,t),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(dt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var or=On.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ut(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=N(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});On.Default=Dn;var ar=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),lt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ct(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof O?e:new O(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,o=n.length;i<o;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee){yt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(e-i.loaded)/200);yt(i.el,o),o<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(M(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=st("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(lt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||((r=this._levels[e]={}).el=st("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r}},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)lt(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),o=Math.floor(t/2),a=n-1,s=new O(+i,+o);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),r<a&&this._retainParent(i,o,a,r))},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var o=2*t;o<2*t+2;o++){var a=new O(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=this._clampZoom(Math.round(t));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();ye?vt(e.el,i,r):bt(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*r);return new A(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,l=new A(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new O(c.x,c.y))||(this._tiles[u].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(e,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var d=new O(f,h);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new R(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new O(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(lt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){dt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=s,e.onmousemove=s,ee&&this.options.opacity<1&&yt(e,this.options.opacity),re&&!ie&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),i=this.createTile(this._wrapCoords(e),p(this._tileReady,this,e));this._initTile(i),this.createTile.length<2&&S(p(this._tileReady,this,e,null,i)),bt(i,n),this._tiles[r]={el:i,coords:e,current:!0},t.appendChild(i),this.fire("tileloadstart",{tile:i,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(yt(n.el,0),M(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(dt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new O(this._wrapX?i(e.x,this._wrapX):e.x,this._wrapY?i(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new A(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});var sr=ar.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&Se&&0<t.maxZoom&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),re||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Tt(n,"load",p(this._tileOnLoad,this,t,n)),Tt(n,"error",p(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Se?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return g(this._url,l(t,this.options))},_tileOnLoad:function(e,t){ee?setTimeout(p(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=s,t.onerror=s,t.complete||(t.src=v,lt(t),delete this._tiles[e]))},_removeTile:function(e){var t=this._tiles[e];if(t)return ae||t.el.setAttribute("src",v),ar.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==v))return ar.prototype._tileReady.call(this,e,t,n)}});function lr(e,t){return new sr(e,t)}var ur=sr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=l({},this.defaultWmsParams);for(var r in t)r in this.options||(n[r]=t[r]);var i=(t=f(this,t)).detectRetina&&Se?2:1,o=this.getTileSize();n.width=o.x*i,n.height=o.y*i,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,sr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=j(n.project(t[0]),n.project(t[1])),i=r.min,o=r.max,a=(1.3<=this._wmsVersion&&this._crs===Mn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=sr.prototype.getTileUrl.call(this,e);return s+d(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return l(this.wmsParams,e),t||this.redraw(),this}});sr.WMS=ur,lr.wms=function(e,t){return new ur(e,t)};var cr=En.extend({options:{padding:.1,tolerance:0},initialize:function(e){f(this,e),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=wt(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),a=this._map.project(e,t).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);ye?vt(this._container,s,n):bt(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new A(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hr=cr.extend({getEvents:function(){var e=cr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Tt(e,"mousemove",this._onMouseMove,this),Tt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Tt(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,lt(this._container),Ot(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){cr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Se?2:1;bt(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Se&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e);var t=(this._layers[u(e)]=e)._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[u(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;i.push(t)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new A,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,o,a=e._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),i=this._drawFirst;i;i=i.next)(t=i.layer).options.interactive&&t._containsPoint(r)&&!this._map._draggableMoved(t)&&(n=t);n&&(Vt(e),this._fireEvent([n],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(pt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(dt(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&((n.prev=r)?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,(this._drawLast.next=t).next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&((r.next=n)?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function fr(e){return Pe?new hr(e):null}var dr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),pr={_initContainer:function(){this._container=st("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=dr("shape");dt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=dr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[u(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;lt(t),e.removeInteractiveTarget(t),delete this._layers[u(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||(t=e._stroke=dr("stroke")),i.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=y(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=dr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){ct(e._container)},_bringToBack:function(e){ht(e._container)}},mr=Te?dr:Z,gr=cr.extend({getEvents:function(){var e=cr.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=mr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),Ot(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){cr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),bt(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=mr("path");e.options.className&&dt(t,e.options.className),e.options.interactive&&dt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[u(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){lt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[u(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,J(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",i=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,i)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){ct(e._path)},_bringToBack:function(e){ht(e._path)}});function yr(e){return Ee||Te?new gr(e):null}Te&&gr.include(pr),Zt.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&fr(e)||yr(e)}});var _r=zn.extend({initialize:function(e,t){zn.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});gr.create=mr,gr.pointsToPath=J,qn.geometryToLayer=Un,qn.coordsToLatLng=$n,qn.coordsToLatLngs=Vn,qn.latLngToCoords=Hn,qn.latLngsToCoords=Wn,qn.getFeature=Qn,qn.asFeature=Kn,Zt.mergeOptions({boxZoom:!0});var vr=rn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ot(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),Je(),kt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Tt(document,{contextmenu:Ft,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=st("div","leaflet-zoom-box",this._container),dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new A(this._point,this._startPoint),n=t.getSize();bt(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(lt(this._box),pt(this._container,"leaflet-crosshair")),Xe(),Lt(),Ot(document,{contextmenu:Ft,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var t=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}});Zt.addInitHook("addHandler","boxZoom",vr),Zt.mergeOptions({doubleClickZoom:!0});var br=rn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});Zt.addInitHook("addHandler","doubleClickZoom",br),Zt.mergeOptions({dragging:!0,inertia:!ie,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wr=rn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new cn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;1<this._positions.length&&50<e-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,o=(r+t+n)%e-t-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),h=u/(n.inertiaDeceleration*a),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=t._limitOffset(f,t.options.maxBounds),S(function(){t.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});Zt.addInitHook("addHandler","dragging",wr),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xr=rn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Tt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ot(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;t<n;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;t<n;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;t<n;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;t<n;t++)r[i.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;t<n;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;t<n;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){Tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ot(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(t=this._panKeys[n],e.shiftKey&&(t=N(t).multiplyBy(3)),r.panBy(t),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ft(e)}}});Zt.addInitHook("addHandler","keyboard",xr),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kr=rn.extend({addHooks:function(){Tt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ot(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Ut(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),r),Ft(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=e._limitZoom(t+(0<this._delta?o:-o))-t;this._delta=0,this._startTime=null,a&&("center"===e.options.scrollWheelZoom?e.setZoom(t+a):e.setZoomAround(this._lastMousePos,t+a))}});Zt.addInitHook("addHandler","scrollWheelZoom",kr),Zt.mergeOptions({tap:!0,tapTolerance:15});var Lr=rn.extend({addHooks:function(){Tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ot(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(Bt(e),this._fireClick=!0,1<e.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],n=t.target;this._startPos=this._newPos=new O(t.clientX,t.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&dt(n,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),this._simulateEvent("mousedown",t),Tt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),Ot(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],n=t.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&pt(n,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new O(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var n=document.createEvent("MouseEvents");n._simulated=!0,t.target._simulatedClick=!0,n.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}});ke&&!xe&&Zt.addInitHook("addHandler","tap",Lr),Zt.mergeOptions({touchZoom:ke&&!ie,bounceAtZoomLimits:!0});var Cr=rn.extend({addHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),Tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Ot(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Tt(document,"touchmove",this._onTouchMove,this),Tt(document,"touchend",this._onTouchEnd,this),Bt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),i=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(i,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&i<1||this._zoom>t.getMaxZoom()&&1<i)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var a=p(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S(a,this,!0),Bt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,M(this._animRequest),Ot(document,"touchmove",this._onTouchMove),Ot(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Zt.addInitHook("addHandler","touchZoom",Cr),Zt.BoxZoom=vr,Zt.DoubleClickZoom=br,Zt.Drag=wr,Zt.Keyboard=xr,Zt.ScrollWheelZoom=kr,Zt.Tap=Lr,Zt.TouchZoom=Cr,Object.freeze=t,e.version="1.6.0",e.Control=Jt,e.control=Xt,e.Browser=Oe,e.Evented=I,e.Mixin=an,e.Util=P,e.Class=E,e.Handler=rn,e.extend=l,e.bind=p,e.stamp=u,e.setOptions=f,e.DomEvent=Qt,e.DomUtil=Et,e.PosAnimation=Kt,e.Draggable=cn,e.LineUtil=vn,e.PolyUtil=xn,e.Point=O,e.point=N,e.Bounds=A,e.bounds=j,e.Transformation=V,e.transformation=H,e.Projection=Cn,e.LatLng=F,e.latLng=z,e.LatLngBounds=R,e.latLngBounds=B,e.CRS=U,e.GeoJSON=qn,e.geoJSON=Jn,e.geoJson=Xn,e.Layer=En,e.LayerGroup=Tn,e.layerGroup=function(e,t){return new Tn(e,t)},e.FeatureGroup=In,e.featureGroup=function(e){return new In(e)},e.ImageOverlay=Yn,e.imageOverlay=function(e,t,n){return new Yn(e,t,n)},e.VideoOverlay=er,e.videoOverlay=function(e,t,n){return new er(e,t,n)},e.SVGOverlay=tr,e.svgOverlay=function(e,t,n){return new tr(e,t,n)},e.DivOverlay=nr,e.Popup=rr,e.popup=function(e,t){return new rr(e,t)},e.Tooltip=ir,e.tooltip=function(e,t){return new ir(e,t)},e.Icon=On,e.icon=function(e){return new On(e)},e.DivIcon=or,e.divIcon=function(e){return new or(e)},e.Marker=An,e.marker=function(e,t){return new An(e,t)},e.TileLayer=sr,e.tileLayer=lr,e.GridLayer=ar,e.gridLayer=function(e){return new ar(e)},e.SVG=gr,e.svg=yr,e.Renderer=cr,e.Canvas=hr,e.canvas=fr,e.Path=jn,e.CircleMarker=Rn,e.circleMarker=function(e,t){return new Rn(e,t)},e.Circle=Bn,e.circle=function(e,t,n){return new Bn(e,t,n)},e.Polyline=Fn,e.polyline=function(e,t){return new Fn(e,t)},e.Polygon=zn,e.polygon=function(e,t){return new zn(e,t)},e.Rectangle=_r,e.rectangle=function(e,t){return new _r(e,t)},e.Map=Zt,e.map=function(e,t){return new L.Map(e,t)};var Sr=window.L;e.noConflict=function(){return window.L=Sr,this},window.L=e},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.L={})},{}],474:[function(e,t,n){"use strict";var i=e("immediate");function u(){}var c={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==u&&d(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,n,r){i(function(){var e;try{e=n(r)}catch(e){return c.reject(t,e)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,c.reject(t,e))}function i(e){n||(n=!0,c.resolve(t,e))}var o=p(function(){e(i,r)});"error"===o.status&&r(o.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=s).prototype.finally=function(t){if("function"!=typeof t)return this;var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(u);this.state!==r?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){c.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return c.reject(e,n.value);var r=n.value;if(r)d(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},s.resolve=function(e){if(e instanceof this)return e;return c.resolve(new this(u),e)},s.reject=function(e){var t=new this(u);return c.reject(t,e)},s.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,t=-1,s=new this(u);for(;++t<r;)l(e[t],t);return s;function l(e,t){n.resolve(e).then(function(e){o[t]=e,++a!==r||i||(i=!0,c.resolve(s,o))},function(e){i||(i=!0,c.reject(s,e))})}},s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,o=new this(u);for(;++i<n;)a=e[i],t.resolve(a).then(function(e){r||(r=!0,c.resolve(o,e))},function(e){r||(r=!0,c.reject(o,e))});var a;return o}},{immediate:428}],475:[function(h,t,n){(function(r){!function(e){if("object"==typeof n&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=e()}}(function(){return function o(a,s,l){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof h&&h;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return u(t||e)},i,i.exports,o,a,s,l)}return s[n].exports}for(var c="function"==typeof h&&h,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,c,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,o=new e(u),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var s=new t.MessageChannel;s.port1.onmessage=u,n=function(){s.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}c.exports=function(e){1!==l.push(e)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function u(){}var c={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==u&&d(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,n,r){i(function(){var e;try{e=n(r)}catch(e){return c.reject(t,e)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,c.reject(t,e))}function i(e){n||(n=!0,c.resolve(t,e))}var o=p(function(){e(i,r)});"error"===o.status&&r(o.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=s).prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(u);this.state!==r?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){c.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return c.reject(e,n.value);var r=n.value;if(r)d(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},s.resolve=function(e){if(e instanceof this)return e;return c.resolve(new this(u),e)},s.reject=function(e){var t=new this(u);return c.reject(t,e)},s.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,t=-1,s=new this(u);for(;++t<r;)l(e[t],t);return s;function l(e,t){n.resolve(e).then(function(e){o[t]=e,++a!==r||i||(i=!0,c.resolve(s,o))},function(e){i||(i=!0,c.reject(s,e))})}},s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,o=new this(u);for(;++i<n;)a=e[i],t.resolve(a).then(function(e){r||(r=!0,c.resolve(o,e))},function(e){r||(r=!0,c.reject(o,e))});var a;return o}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function a(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var h=Promise;function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function o(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",i=void 0,c={},p=Object.prototype.toString,m="readonly",g="readwrite";function y(e){return"boolean"==typeof i?h.resolve(i):(r=e,new h(function(n){var e=r.transaction(u,g),t=a([""]);e.objectStore(u).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})).then(function(e){return i=e});var r}function _(e){var t=c[e.name],n={};n.promise=new h(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function v(e){var t=c[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function b(e,t){var n=c[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function w(i,o){return new h(function(e,t){if(c[i.name]=c[i.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},i.db){if(!o)return e(i.db);_(i),i.db.close()}var n=[i.name];o&&n.push(i.version);var r=s.open.apply(s,n);o&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(i.storeName),t.oldVersion<=1&&e.createObjectStore(u)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+i.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+i.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),t(r.error)},r.onsuccess=function(){e(r.result),v(i)}})}function x(e){return w(e,!1)}function k(e){return w(e,!0)}function L(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function C(e){return a([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function S(e){return e&&e.__local_forage_encoded_blob}function M(e){var t=this,n=t._initReady().then(function(){var e=c[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(n,e,e),n}function P(t,n,r,i){void 0===i&&(i=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<i&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return h.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)}).then(function(){return function(n){_(n);for(var r=c[n.name],i=r.forages,e=0;e<i.length;e++){var t=i[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,x(n).then(function(e){return n.db=e,L(n)?k(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<i.length;t++)i[t]._dbInfo.db=e}).catch(function(e){throw b(n,e),e})}(t).then(function(){P(t,n,r,i-1)})}).catch(r);r(e)}}var E={_driver:"asyncStorage",_initStorage:function(e){var r=this,i={db:null};if(e)for(var t in e)i[t]=e[t];var o=c[i.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},c[i.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=M);var n=[];function a(){return h.resolve()}for(var s=0;s<o.forages.length;s++){var l=o.forages[s];l!==r&&n.push(l._initReady().catch(a))}var u=o.forages.slice(0);return h.all(n).then(function(){return i.db=o.db,x(i)}).then(function(e){return i.db=e,L(i,r._defaultConfig.version)?k(i):e}).then(function(e){i.db=o.db=e,r._dbInfo=i;for(var t=0;t<u.length;t++){var n=u[t];n!==r&&(n._dbInfo.db=i.db,n._dbInfo.version=i.version)}})},_support:function(){try{if(!s)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var s=this,t=new h(function(o,n){s.ready().then(function(){P(s._dbInfo,m,function(e,t){if(e)return n(e);try{var r=t.objectStore(s._dbInfo.storeName).openCursor(),i=1;r.onsuccess=function(){var e=r.result;if(e){var t=e.value;S(t)&&(t=C(t));var n=a(t,e.key,i++);void 0!==n?o(n):e.continue()}else o()},r.onerror=function(){n(r.error)}}catch(e){n(e)}})}).catch(n)});return f(t,e),t},getItem:function(o,e){var a=this;o=d(o);var t=new h(function(r,i){a.ready().then(function(){P(a._dbInfo,m,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).get(o);n.onsuccess=function(){var e=n.result;void 0===e&&(e=null),S(e)&&(e=C(e)),r(e)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return f(t,e),t},setItem:function(s,t,e){var l=this;s=d(s);var n=new h(function(o,a){var e;l.ready().then(function(){return e=l._dbInfo,"[object Blob]"===p.call(t)?y(e.db).then(function(e){return e?t:(r=t,new h(function(n,e){var t=new FileReader;t.onerror=e,t.onloadend=function(e){var t=btoa(e.target.result||"");n({__local_forage_encoded_blob:!0,data:t,type:r.type})},t.readAsBinaryString(r)}));var r}):t}).then(function(i){P(l._dbInfo,g,function(e,t){if(e)return a(e);try{var n=t.objectStore(l._dbInfo.storeName);null===i&&(i=void 0);var r=n.put(i,s);t.oncomplete=function(){void 0===i&&(i=null),o(i)},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return f(n,e),n},removeItem:function(o,e){var a=this;o=d(o);var t=new h(function(r,i){a.ready().then(function(){P(a._dbInfo,g,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(o);t.oncomplete=function(){r()},t.onerror=function(){i(n.error)},t.onabort=function(){var e=n.error?n.error:n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return f(t,e),t},clear:function(e){var o=this,t=new h(function(r,i){o.ready().then(function(){P(o._dbInfo,g,function(e,t){if(e)return i(e);try{var n=t.objectStore(o._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error?n.error:n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return f(t,e),t},length:function(e){var o=this,t=new h(function(r,i){o.ready().then(function(){P(o._dbInfo,m,function(e,t){if(e)return i(e);try{var n=t.objectStore(o._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return f(t,e),t},key:function(s,e){var l=this,t=new h(function(o,a){s<0?o(null):l.ready().then(function(){P(l._dbInfo,m,function(e,t){if(e)return a(e);try{var n=t.objectStore(l._dbInfo.storeName),r=!1,i=n.openCursor();i.onsuccess=function(){var e=i.result;e?0===s?o(e.key):r?o(e.key):(r=!0,e.advance(s)):o(null)},i.onerror=function(){a(i.error)}}catch(e){a(e)}})}).catch(a)});return f(t,e),t},keys:function(e){var a=this,t=new h(function(i,o){a.ready().then(function(){P(a._dbInfo,m,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).openCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):i(r)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return f(t,e),t},dropInstance:function(a,e){e=o.apply(this,arguments);var t,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db?h.resolve(this._dbInfo.db):x(a).then(function(e){var t=c[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e});t=a.storeName?r.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var i=e.version+1;_(a);var r=c[a.name],o=r.forages;e.close();for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=null,n._dbInfo.version=i}return new h(function(t,n){var r=s.open(a.name,i);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,v(n._dbInfo)}}).catch(function(e){throw(b(a,e)||h.resolve()).catch(function(){}),e})}}):r.then(function(e){_(a);var n=c[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++)r[t]._dbInfo.db=null;return new h(function(t,n){var r=s.deleteDatabase(a.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)v(r[t]._dbInfo)}).catch(function(e){throw(b(a,e)||h.resolve()).catch(function(){}),e})})}else t=h.reject("Invalid arguments");return f(t,e),t}};var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",D=O.length,N=D+"arbf".length,A=Object.prototype.toString;function j(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=T.indexOf(e[t]),r=T.indexOf(e[t+1]),i=T.indexOf(e[t+2]),o=T.indexOf(e[t+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}function R(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=T[n[t]>>2],r+=T[(3&n[t])<<4|n[t+1]>>4],r+=T[(15&n[t+1])<<2|n[t+2]>>6],r+=T[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var B={serialize:function(t,n){var e="";if(t&&(e=A.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===A.call(t.buffer))){var r,i=O;t instanceof ArrayBuffer?(r=t,i+="arbf"):(r=t.buffer,"[object Int8Array]"===e?i+="si08":"[object Uint8Array]"===e?i+="ui08":"[object Uint8ClampedArray]"===e?i+="uic8":"[object Int16Array]"===e?i+="si16":"[object Uint16Array]"===e?i+="ur16":"[object Int32Array]"===e?i+="si32":"[object Uint32Array]"===e?i+="ui32":"[object Float32Array]"===e?i+="fl32":"[object Float64Array]"===e?i+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(i+R(r))}else if("[object Blob]"===e){var o=new FileReader;o.onload=function(){var e="~~local_forage_type~"+t.type+"~"+R(this.result);n(O+"blob"+e)},o.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function(e){if(e.substring(0,D)!==O)return JSON.parse(e);var t,n=e.substring(N),r=e.substring(D,N);if("blob"===r&&I.test(n)){var i=n.match(I);t=i[1],n=n.substring(i[0].length)}var o=j(n);switch(r){case"arbf":return o;case"blob":return a([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:j,bufferToString:R};function F(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function z(e,r,i,o,a,s){e.executeSql(i,o,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?s(e,n):F(e,r,function(){e.executeSql(i,o,a,s)},s)},s):s(e,n)},s)}var q={_driver:"webSQLStorage",_initStorage:function(e){var r=this,i={db:null};if(e)for(var t in e)i[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new h(function(t,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(e){return n(e)}i.db.transaction(function(e){F(e,i,function(){r._dbInfo=i,t()},function(e,t){n(t)})},n)});return i.serializer=B,n},_support:"function"==typeof openDatabase,iterate:function(u,e){var t=this,n=new h(function(l,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(e){z(e,s,"SELECT * FROM "+s.storeName,[],function(e,t){for(var n=t.rows,r=n.length,i=0;i<r;i++){var o=n.item(i),a=o.value;if(a&&(a=s.serializer.deserialize(a)),void 0!==(a=u(a,o.key,i+1)))return void l(a)}l()},function(e,t){n(t)})})}).catch(n)});return f(n,e),n},getItem:function(t,e){var o=this;t=d(t);var n=new h(function(i,n){o.ready().then(function(){var r=o._dbInfo;r.db.transaction(function(e){z(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),i(n)},function(e,t){n(t)})})}).catch(n)});return f(n,e),n},setItem:function(e,t,n){return function a(s,e,l,u){var c=this;s=d(s);var t=new h(function(i,o){c.ready().then(function(){void 0===e&&(e=null);var n=e,r=c._dbInfo;r.serializer.serialize(e,function(t,e){e?o(e):r.db.transaction(function(e){z(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[s,t],function(){i(n)},function(e,t){o(t)})},function(e){if(e.code===e.QUOTA_ERR){if(0<u)return void i(a.apply(c,[s,n,l,u-1]));o(e)}})})}).catch(o)});return f(t,l),t}.apply(this,[e,t,n,1])},removeItem:function(i,e){var o=this;i=d(i);var t=new h(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){z(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[i],function(){n()},function(e,t){r(t)})})}).catch(r)});return f(t,e),t},clear:function(e){var i=this,t=new h(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){z(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return f(t,e),t},length:function(e){var i=this,t=new h(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){z(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var n=t.rows.item(0).c;r(n)},function(e,t){n(t)})})}).catch(n)});return f(t,e),t},key:function(i,e){var o=this,t=new h(function(r,n){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){z(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[i+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;r(n)},function(e,t){n(t)})})}).catch(n)});return f(t,e),t},keys:function(e){var r=this,t=new h(function(i,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){z(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);i(n)},function(e,t){n(t)})})}).catch(n)});return f(t,e),t},dropInstance:function(n,e){e=o.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var t,i=this;return f(t=n.name?new h(function(e){var t,o;t=n.name===r.name?i._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?e({db:t,storeNames:[n.storeName]}):e((o=t,new h(function(i,n){o.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);i({db:o,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(s){return new h(function(o,a){s.db.transaction(function(r){function e(t){return new h(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}for(var t=[],n=0,i=s.storeNames.length;n<i;n++)t.push(e(s.storeNames[n]));h.all(t).then(function(){o()}).catch(function(e){a(e)})},function(e){a(e)})})}):h.reject("Invalid arguments"),e),t}};function U(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function G(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length}var $={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=U(e,this._defaultConfig),G()?((this._dbInfo=t).serializer=B,h.resolve()):h.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(l,e){var u=this,t=u.ready().then(function(){for(var e=u._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,i=1,o=0;o<r;o++){var a=localStorage.key(o);if(0===a.indexOf(t)){var s=localStorage.getItem(a);if(s&&(s=e.serializer.deserialize(s)),void 0!==(s=l(s,a.substring(n),i++)))return s}}});return f(t,e),t},getItem:function(n,e){var r=this;n=d(n);var t=r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t&&(t=e.serializer.deserialize(t)),t});return f(t,e),t},setItem:function(a,e,t){var s=this;a=d(a);var n=s.ready().then(function(){void 0===e&&(e=null);var o=e;return new h(function(n,r){var i=s._dbInfo;i.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(i.keyPrefix+a,e),n(o)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return f(n,t),n},removeItem:function(t,e){var n=this;t=d(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return f(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return f(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return f(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t&&(t=t.substring(e.keyPrefix.length)),t});return f(t,e),t},keys:function(e){var o=this,t=o.ready().then(function(){for(var e=o._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var i=localStorage.key(r);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n});return f(t,e),t},dropInstance:function(t,e){if(e=o.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return f(r=t.name?new h(function(e){t.storeName?e(U(t,i._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):h.reject("Invalid arguments"),e),r}},V=function(e,t){for(var n,r,i=e.length,o=0;o<i;){if((n=e[o])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},H=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},Q={},K={INDEXEDDB:E,WEBSQL:q,LOCALSTORAGE:$},Z=[K.INDEXEDDB._driver,K.WEBSQL._driver,K.LOCALSTORAGE._driver],J=["dropInstance"],X=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(J),Y={description:"",driver:Z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ee(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}function te(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(H(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ne=new(function(){function i(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),K)if(K.hasOwnProperty(t)){var n=K[t],r=n._driver;this[t]=r,W[r]||this.defineDriver(n)}this._defaultConfig=te({},Y),this._config=te({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return i.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},i.prototype.defineDriver=function(u,e,t){var n=new h(function(t,n){try{var r=u._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void n(e);for(var i=X.concat("_initStorage"),o=0,a=i.length;o<a;o++){var s=i[o];if((!V(J,s)||u[s])&&"function"!=typeof u[s])return void n(e)}!function(){for(var e=function(n){return function(){var e=new Error("Method "+n+" is not implemented by the current driver"),t=h.reject(e);return f(t,arguments[arguments.length-1]),t}},t=0,n=J.length;t<n;t++){var r=J[t];u[r]||(u[r]=e(r))}}();var l=function(e){W[r]&&console.info("Redefining LocalForage driver: "+r),W[r]=u,Q[r]=e,t()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(l,n):l(!!u._support):l(!0)}catch(e){n(e)}});return l(n,e,t),n},i.prototype.driver=function(){return this._driver||null},i.prototype.getDriver=function(e,t,n){var r=W[e]?h.resolve(W[e]):h.reject(new Error("Driver not found."));return l(r,t,n),r},i.prototype.getSerializer=function(e){var t=h.resolve(B);return l(t,e),t},i.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(n,e,e),n},i.prototype.setDriver=function(e,t,n){var o=this;H(e)||(e=[e]);var r=this._getSupportedDrivers(e);function a(){o._config.driver=o.driver()}function s(e){return o._extend(e),a(),o._ready=o._initStorage(o._config),o._ready}var i=null!==this._driverSet?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=i.then(function(){var e=r[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){var i;o._driver=e._driver,a(),o._wrapLibraryMethodsWithReady(),o._initDriver=(i=r,function(){var r=0;return function e(){for(;r<i.length;){var t=i[r];return r++,o._dbInfo=null,o._ready=null,o.getDriver(t).then(s).catch(e)}a();var n=new Error("No available storage method found.");return o._driverSet=h.reject(n),o._driverSet}()})})}).catch(function(){a();var e=new Error("No available storage method found.");return o._driverSet=h.reject(e),o._driverSet}),l(this._driverSet,t,n),this._driverSet},i.prototype.supports=function(e){return!!Q[e]},i.prototype._extend=function(e){te(this,e)},i.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},i.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=X.length;e<t;e++)ee(this,X[e])},i.prototype.createInstance=function(e){return new i(e)},i}());t.exports=ne},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],476:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":477,"./lib/inflate":478,"./lib/utils/common":479,"./lib/zlib/constants":482}],477:[function(e,t,n){"use strict";var a=e("./zlib/deflate"),s=e("./utils/common"),l=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString,c=0,h=-1,f=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=s.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(i[n]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?l.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=a.deflateSetDictionary(this.strm,r))!==c)throw new Error(i[n]);this._dict_set=!0}}function r(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||i[n.err];return n.result}p.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=l.string2buf(e):"[object ArrayBuffer]"===u.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=a.deflate(i,r))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(i.output,i.next_out))):this.onData(s.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==n);return 4===r?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==r||(this.onEnd(c),!(i.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=r,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,r(e,t)}},{"./utils/common":479,"./utils/strings":480,"./zlib/deflate":484,"./zlib/messages":489,"./zlib/zstream":491}],478:[function(e,t,n){"use strict";var h=e("./zlib/inflate"),f=e("./utils/common"),d=e("./utils/strings"),p=e("./zlib/constants"),r=e("./zlib/messages"),i=e("./zlib/zstream"),o=e("./zlib/gzheader"),m=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var n=h.inflateInit2(this.strm,t.windowBits);if(n!==p.Z_OK)throw new Error(r[n]);if(this.header=new o,h.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=d.string2buf(t.dictionary):"[object ArrayBuffer]"===m.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=h.inflateSetDictionary(this.strm,t.dictionary))!==p.Z_OK))throw new Error(r[n])}function s(e,t){var n=new a(t);if(n.push(e,!0),n.err)throw n.msg||r[n.err];return n.result}a.prototype.push=function(e,t){var n,r,i,o,a,s=this.strm,l=this.options.chunkSize,u=this.options.dictionary,c=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?p.Z_FINISH:p.Z_NO_FLUSH,"string"==typeof e?s.input=d.binstring2buf(e):"[object ArrayBuffer]"===m.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new f.Buf8(l),s.next_out=0,s.avail_out=l),(n=h.inflate(s,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&u&&(n=h.inflateSetDictionary(this.strm,u)),n===p.Z_BUF_ERROR&&!0===c&&(n=p.Z_OK,c=!1),n!==p.Z_STREAM_END&&n!==p.Z_OK)return this.onEnd(n),!(this.ended=!0);s.next_out&&(0!==s.avail_out&&n!==p.Z_STREAM_END&&(0!==s.avail_in||r!==p.Z_FINISH&&r!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(i=d.utf8border(s.output,s.next_out),o=s.next_out-i,a=d.buf2string(s.output,i),s.next_out=o,s.avail_out=l-o,o&&f.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(f.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(c=!0)}while((0<s.avail_in||0===s.avail_out)&&n!==p.Z_STREAM_END);return n===p.Z_STREAM_END&&(r=p.Z_FINISH),r===p.Z_FINISH?(n=h.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p.Z_OK):r!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(s.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=a,n.inflate=s,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,s(e,t)},n.ungzip=s},{"./utils/common":479,"./utils/strings":480,"./zlib/constants":482,"./zlib/gzheader":485,"./zlib/inflate":487,"./zlib/messages":489,"./zlib/zstream":491}],479:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);r.length;){var i=r.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var o in i)t=i,n=o,Object.prototype.hasOwnProperty.call(t,n)&&(e[o]=i[o])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],480:[function(e,t,n){"use strict";var l=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var u=new l.Buf8(256),r=0;r<256;r++)u[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function c(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}u[254]=u[254]=1,n.string2buf=function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new l.Buf8(s),i=o=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new l.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if(4<(o=u[i]))s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<a;)i=i<<6|63&e[n++],o--;1<o?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return c(s,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+u[e[n]]>t?n:t}},{"./common":479}],481:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],482:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],483:[function(e,t,n){"use strict";var s=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,r){var i=s,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],484:[function(e,t,n){"use strict";var l,f=e("../utils/common"),u=e("./trees"),d=e("./adler32"),p=e("./crc32"),r=e("./messages"),c=0,h=4,m=0,g=-2,y=-1,_=4,i=2,v=8,b=9,o=286,a=30,s=19,w=2*o+1,x=15,k=3,L=258,C=L+k+1,S=42,M=113,P=1,E=2,T=3,I=4;function O(e,t){return e.msg=r[t],t}function D(e){return(e<<1)-(4<e?9:0)}function N(e){for(var t=e.length;0<=--t;)e[t]=0}function A(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(f.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function j(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,A(e.strm)}function R(e,t){e.pending_buf[e.pending++]=t}function B(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function F(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,u=e.window,c=e.w_mask,h=e.prev,f=e.strstart+L,d=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===p&&u[n+a-1]===d&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=L-(f-o),o=f-L,a<r){if(e.match_start=t,s<=(a=r))break;d=u[o+a-1],p=u[o+a]}}}while((t=h[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function z(e){var t,n,r,i,o,a,s,l,u,c,h=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-C)){for(f.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;r=e.head[--t],e.head[t]=h<=r?r-h:0,--n;);for(t=n=h;r=e.prev[--t],e.prev[t]=h<=r?r-h:0,--n;);i+=h}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,l=e.strstart+e.lookahead,u=i,c=void 0,c=a.avail_in,u<c&&(c=u),n=0===c?0:(a.avail_in-=c,f.arraySet(s,a.input,a.next_in,c,l),1===a.state.wrap?a.adler=d(a.adler,s,c,l):2===a.state.wrap&&(a.adler=p(a.adler,s,c,l)),a.next_in+=c,a.total_in+=c,c),e.lookahead+=n,e.lookahead+e.insert>=k)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+k-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<C&&0!==e.strm.avail_in)}function q(e,t){for(var n,r;;){if(e.lookahead<C){if(z(e),e.lookahead<C&&t===c)return P;if(0===e.lookahead)break}if(n=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-C&&(e.match_length=F(e,n)),e.match_length>=k)if(r=u._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(j(e,!1),0===e.strm.avail_out))return P}return e.insert=e.strstart<k-1?e.strstart:k-1,t===h?(j(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?P:E}function U(e,t){for(var n,r,i;;){if(e.lookahead<C){if(z(e),e.lookahead<C&&t===c)return P;if(0===e.lookahead)break}if(n=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-C&&(e.match_length=F(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-k,r=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=k-1,e.strstart++,r&&(j(e,!1),0===e.strm.avail_out))return P}else if(e.match_available){if((r=u._tr_tally(e,0,e.window[e.strstart-1]))&&j(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return P}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,t===h?(j(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?P:E}function G(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*w),this.dyn_dtree=new f.Buf16(2*(2*a+1)),this.bl_tree=new f.Buf16(2*(2*s+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(x+1),this.heap=new f.Buf16(2*o+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*o+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S:M,e.adler=2===t.wrap?0:1,t.last_flush=c,u._tr_init(t),m):O(e,g)}function H(e){var t,n=V(e);return n===m&&((t=e.state).window_size=2*t.w_size,N(t.head),t.max_lazy_match=l[t.level].max_lazy,t.good_match=l[t.level].good_length,t.nice_match=l[t.level].nice_length,t.max_chain_length=l[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=k-1,t.match_available=0,t.ins_h=0),n}function W(e,t,n,r,i,o){if(!e)return g;var a=1;if(t===y&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||b<i||n!==v||r<8||15<r||t<0||9<t||o<0||_<o)return O(e,g);8===r&&(r=9);var s=new $;return(e.state=s).strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+k-1)/k),s.window=new f.Buf8(2*s.w_size),s.head=new f.Buf16(s.hash_size),s.prev=new f.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new f.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,H(e)}l=[new G(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(z(e),0===e.lookahead&&t===c)return P;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,j(e,!1),0===e.strm.avail_out))return P;if(e.strstart-e.block_start>=e.w_size-C&&(j(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===h?(j(e,!0),0===e.strm.avail_out?T:I):(e.strstart>e.block_start&&(j(e,!1),e.strm.avail_out),P)}),new G(4,4,8,4,q),new G(4,5,16,8,q),new G(4,6,32,32,q),new G(4,4,16,16,U),new G(8,16,32,32,U),new G(8,16,128,128,U),new G(8,32,128,256,U),new G(32,128,258,1024,U),new G(32,258,258,4096,U)],n.deflateInit=function(e,t){return W(e,t,v,15,8,0)},n.deflateInit2=W,n.deflateReset=H,n.deflateResetKeep=V,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,m):g},n.deflate=function(e,t){var n,r,i,o;if(!e||!e.state||5<t||t<0)return e?O(e,g):g;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&t!==h)return O(e,0===e.avail_out?-5:g);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===S)if(2===r.wrap)e.adler=0,R(r,31),R(r,139),R(r,8),r.gzhead?(R(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),R(r,255&r.gzhead.time),R(r,r.gzhead.time>>8&255),R(r,r.gzhead.time>>16&255),R(r,r.gzhead.time>>24&255),R(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),R(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(R(r,255&r.gzhead.extra.length),R(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=p(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(R(r,0),R(r,0),R(r,0),R(r,0),R(r,0),R(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),R(r,3),r.status=M);else{var a=v+(r.w_bits-8<<4)<<8;a|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=M,B(r,a),0!==r.strstart&&(B(r,e.adler>>>16),B(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=p(e.adler,r.pending_buf,r.pending-i,i)),A(e),i=r.pending,r.pending!==r.pending_buf_size));)R(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=p(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=p(e.adler,r.pending_buf,r.pending-i,i)),A(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,R(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=p(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=p(e.adler,r.pending_buf,r.pending-i,i)),A(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,R(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=p(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&A(e),r.pending+2<=r.pending_buf_size&&(R(r,255&e.adler),R(r,e.adler>>8&255),e.adler=0,r.status=M)):r.status=M),0!==r.pending){if(A(e),0===e.avail_out)return r.last_flush=-1,m}else if(0===e.avail_in&&D(t)<=D(n)&&t!==h)return O(e,-5);if(666===r.status&&0!==e.avail_in)return O(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var s=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(z(e),0===e.lookahead)){if(t===c)return P;break}if(e.match_length=0,n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(j(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===h?(j(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?P:E}(r,t):3===r.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=L){if(z(e),e.lookahead<=L&&t===c)return P;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=k&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+L;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=L-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=k?(n=u._tr_tally(e,1,e.match_length-k),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(j(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===h?(j(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(j(e,!1),0===e.strm.avail_out)?P:E}(r,t):l[r.level].func(r,t);if(s!==T&&s!==I||(r.status=666),s===P||s===T)return 0===e.avail_out&&(r.last_flush=-1),m;if(s===E&&(1===t?u._tr_align(r):5!==t&&(u._tr_stored_block(r,0,0,!1),3===t&&(N(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),A(e),0===e.avail_out))return r.last_flush=-1,m}return t!==h?m:r.wrap<=0?1:(2===r.wrap?(R(r,255&e.adler),R(r,e.adler>>8&255),R(r,e.adler>>16&255),R(r,e.adler>>24&255),R(r,255&e.total_in),R(r,e.total_in>>8&255),R(r,e.total_in>>16&255),R(r,e.total_in>>24&255)):(B(r,e.adler>>>16),B(r,65535&e.adler)),A(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?m:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==S&&69!==t&&73!==t&&91!==t&&103!==t&&t!==M&&666!==t?O(e,g):(e.state=null,t===M?O(e,-3):m):g},n.deflateSetDictionary=function(e,t){var n,r,i,o,a,s,l,u,c=t.length;if(!e||!e.state)return g;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==S||n.lookahead)return g;for(1===o&&(e.adler=d(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(N(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new f.Buf8(n.w_size),f.arraySet(u,t,c-n.w_size,n.w_size,0),t=u,c=n.w_size),a=e.avail_in,s=e.next_in,l=e.input,e.avail_in=c,e.next_in=0,e.input=t,z(n);n.lookahead>=k;){for(r=n.strstart,i=n.lookahead-(k-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+k-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=k-1,z(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=k-1,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=a,n.wrap=o,m},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":479,"./adler32":481,"./crc32":483,"./messages":489,"./trees":490}],485:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],486:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{p<15&&(d+=C[r++]<<p,p+=8,d+=C[r++]<<p,p+=8),v=m[d&y];t:for(;;){if(d>>>=b=v>>>24,p-=b,0===(b=v>>>16&255))S[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=m[(65535&v)+(d&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&v,(b&=15)&&(p<b&&(d+=C[r++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=C[r++]<<p,p+=8,d+=C[r++]<<p,p+=8),v=g[d&_];n:for(;;){if(d>>>=b=v>>>24,p-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=g[(65535&v)+(d&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&v,p<(b&=15)&&(d+=C[r++]<<p,(p+=8)<b&&(d+=C[r++]<<p,p+=8)),l<(x+=d&(1<<b)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=b,p-=b,(b=o-a)<x){if(c<(b=x-b)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(L=f,(k=0)===h){if(k+=u-b,b<w){for(w-=b;S[o++]=f[k++],--b;);k=o-x,L=S}}else if(h<b){if(k+=u+h-b,(b-=h)<w){for(w-=b;S[o++]=f[k++],--b;);if(k=0,h<w){for(w-=b=h;S[o++]=f[k++],--b;);k=o-x,L=S}}}else if(k+=h-b,b<w){for(w-=b;S[o++]=f[k++],--b;);k=o-x,L=S}for(;2<w;)S[o++]=L[k++],S[o++]=L[k++],S[o++]=L[k++],w-=3;w&&(S[o++]=L[k++],1<w&&(S[o++]=L[k++]))}else{for(k=o-x;S[o++]=S[k++],S[o++]=S[k++],S[o++]=S[k++],2<(w-=3););w&&(S[o++]=S[k++],1<w&&(S[o++]=S[k++]))}break}}break}}while(r<i&&o<s);r-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},{}],487:[function(e,t,n){"use strict";var E=e("../utils/common"),T=e("./adler32"),I=e("./crc32"),O=e("./inffast"),D=e("./inftrees"),N=1,A=2,j=0,R=-2,B=1,r=852,i=592;function F(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new E.Buf16(320),this.work=new E.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new E.Buf32(r),t.distcode=t.distdyn=new E.Buf32(i),t.sane=1,t.back=-1,j):R}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):R}function l(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?R:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,s(e))):R}function u(e,t){var n,r;return e?(r=new o,(e.state=r).window=null,(n=l(e,t))!==j&&(e.state=null),n):R}var c,h,f=!0;function z(e){if(f){var t;for(c=new E.Buf32(512),h=new E.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(D(N,e.lens,0,288,c,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;D(A,e.lens,0,32,h,0,e.work,{bits:5}),f=!1}e.lencode=c,e.lenbits=9,e.distcode=h,e.distbits=5}function q(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new E.Buf8(o.wsize)),r>=o.wsize?(E.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(i=o.wsize-o.wnext)&&(i=r),E.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(E.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}n.inflateReset=s,n.inflateReset2=l,n.inflateResetKeep=a,n.inflateInit=function(e){return u(e,15)},n.inflateInit2=u,n.inflate=function(e,t){var n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S=0,M=new E.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return R;12===(n=e.state).mode&&(n.mode=13),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,c=n.bits,h=s,f=l,k=j;e:for(;;)switch(n.mode){case B:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===u){M[n.check=0]=255&u,M[1]=u>>>8&255,n.check=I(n.check,M,2,0),c=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){e.msg="unknown compression method",n.mode=30;break}if(c-=4,x=8+(15&(u>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,e.adler=n.check=1,n.mode=512&u?10:12,c=u=0;break;case 2:for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(n.flags=u,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,n.check=I(n.check,M,2,0)),c=u=0,n.mode=3;case 3:for(;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,M[2]=u>>>16&255,M[3]=u>>>24&255,n.check=I(n.check,M,4,0)),c=u=0,n.mode=4;case 4:for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,n.check=I(n.check,M,2,0)),c=u=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(M[0]=255&u,M[1]=u>>>8&255,n.check=I(n.check,M,2,0)),c=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(s<(d=n.length)&&(d=s),d&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),E.arraySet(n.head.extra,r,o,d,x)),512&n.flags&&(n.check=I(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;for(d=0;x=r[o+d++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x)),x&&d<s;);if(512&n.flags&&(n.check=I(n.check,r,d,o)),s-=d,o+=d,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;for(d=0;x=r[o+d++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x)),x&&d<s;);if(512&n.flags&&(n.check=I(n.check,r,d,o)),s-=d,o+=d,x)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}c=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}e.adler=n.check=F(u),c=u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(z(n),n.mode=20,6!==t)break;u>>>=2,c-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,c=u=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(d=n.length){if(s<d&&(d=s),l<d&&(d=l),0===d)break e;E.arraySet(i,r,o,d,a),s-=d,o+=d,l-=d,a+=d,n.length-=d;break}n.mode=12;break;case 17:for(;c<14;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.lens[P[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},k=D(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,k){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;y=(S=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(_<16)u>>>=g,c-=g,n.lens[n.have++]=_;else{if(16===_){for(C=g+2;c<C;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],d=3+(3&u),u>>>=2,c-=2}else if(17===_){for(C=g+3;c<C;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}c-=g,x=0,d=3+(7&(u>>>=g)),u>>>=3,c-=3}else{for(C=g+7;c<C;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}c-=g,x=0,d=11+(127&(u>>>=g)),u>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,L={bits:n.lenbits},k=D(N,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,k){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},k=D(A,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,k){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=s&&258<=l){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,O(e,f),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;y=(S=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(y&&0==(240&y)){for(v=g,b=y,w=_;y=(S=n.lencode[w+((u&(1<<v+b)-1)>>v)])>>>16&255,_=65535&S,!(v+(g=S>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=g,c-=g,n.back+=g,n.length=_,0===y){n.mode=26;break}if(32&y){n.back=-1,n.mode=12;break}if(64&y){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&y,n.mode=22;case 22:if(n.extra){for(C=n.extra;c<C;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;y=(S=n.distcode[u&(1<<n.distbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(0==(240&y)){for(v=g,b=y,w=_;y=(S=n.distcode[w+((u&(1<<v+b)-1)>>v)])>>>16&255,_=65535&S,!(v+(g=S>>>24)<=c);){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=g,c-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&y,n.mode=24;case 24:if(n.extra){for(C=n.extra;c<C;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(d=f-l,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p=d>n.wnext?(d-=n.wnext,n.wsize-d):n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,p=a-n.offset,d=n.length;for(l<d&&(d=l),l-=d,n.length-=d;i[a++]=m[p++],--d;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break e;s--,u|=r[o++]<<c,c+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?I(n.check,i,f,a-f):T(n.check,i,f,a-f)),f=l,(n.flags?u:F(u))!==n.check){e.msg="incorrect data check",n.mode=30;break}c=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break e;s--,u+=r[o++]<<c,c+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}c=u=0}n.mode=29;case 29:k=1;break e;case 30:k=-3;break e;case 31:return-4;case 32:default:return R}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,(n.wsize||f!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&q(e,e.output,e.next_out,f-e.avail_out)?(n.mode=31,-4):(h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?I(n.check,i,f,e.next_out-f):T(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||4===t)&&k===j&&(k=-5),k)},n.inflateEnd=function(e){if(!e||!e.state)return R;var t=e.state;return t.window&&(t.window=null),e.state=null,j},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?R:((n.head=t).done=!1,j):R},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?R:11===n.mode&&T(1,t,r,0)!==n.check?-3:q(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,j):R},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":479,"./adler32":481,"./crc32":483,"./inffast":486,"./inftrees":488}],488:[function(e,t,n){"use strict";var N=e("../utils/common"),A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],j=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],B=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,r,i,o,a,s){var l,u,c,h,f,d,p,m,g,y=s.bits,_=0,v=0,b=0,w=0,x=0,k=0,L=0,C=0,S=0,M=0,P=null,E=0,T=new N.Buf16(16),I=new N.Buf16(16),O=null,D=0;for(_=0;_<=15;_++)T[_]=0;for(v=0;v<r;v++)T[t[n+v]]++;for(x=y,w=15;1<=w&&0===T[w];w--);if(w<x&&(x=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<w&&0===T[b];b++);for(x<b&&(x=b),_=C=1;_<=15;_++)if(C<<=1,(C-=T[_])<0)return-1;if(0<C&&(0===e||1!==w))return-1;for(I[1]=0,_=1;_<15;_++)I[_+1]=I[_]+T[_];for(v=0;v<r;v++)0!==t[n+v]&&(a[I[t[n+v]]++]=v);if(d=0===e?(P=O=a,19):1===e?(P=A,E-=257,O=j,D-=257,256):(P=R,O=B,-1),_=b,f=o,L=v=M=0,c=-1,h=(S=1<<(k=x))-1,1===e&&852<S||2===e&&592<S)return 1;for(;;){for(p=_-L,g=a[v]<d?(m=0,a[v]):a[v]>d?(m=O[D+a[v]],P[E+a[v]]):(m=96,0),l=1<<_-L,b=u=1<<k;i[f+(M>>L)+(u-=l)]=p<<24|m<<16|g|0,0!==u;);for(l=1<<_-1;M&l;)l>>=1;if(0!==l?(M&=l-1,M+=l):M=0,v++,0==--T[_]){if(_===w)break;_=t[n+a[v]]}if(x<_&&(M&h)!==c){for(0===L&&(L=x),f+=b,C=1<<(k=_-L);k+L<w&&!((C-=T[k+L])<=0);)k++,C<<=1;if(S+=1<<k,1===e&&852<S||2===e&&592<S)return 1;i[c=M&h]=x<<24|k<<16|f-o|0}}return 0!==M&&(i[f+M]=_-L<<24|64<<16|0),s.bits=x,0}},{"../utils/common":479}],489:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],490:[function(e,t,n){"use strict";var l=e("../utils/common"),s=0,u=1;function r(e){for(var t=e.length;0<=--t;)e[t]=0}var c=0,a=29,h=256,f=h+1+a,d=30,p=19,g=2*f+1,y=15,i=16,m=7,_=256,v=16,b=17,w=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(f+2));r(S);var M=new Array(2*d);r(M);var P=new Array(512);r(P);var E=new Array(256);r(E);var T=new Array(a);r(T);var I,O,D,N=new Array(d);function A(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function j(e){return e<256?P[e]:P[256+(e>>>7)]}function R(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,n){e.bi_valid>i-n?(e.bi_buf|=t<<e.bi_valid&65535,R(e,e.bi_buf),e.bi_buf=t>>i-e.bi_valid,e.bi_valid+=n-i):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function F(e,t,n){B(e,n[2*t],n[2*t+1])}function z(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function q(e,t,n){var r,i,o=new Array(y+1),a=0;for(r=1;r<=y;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=z(o[s]++,s))}}function U(e){var t;for(t=0;t<f;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){8<e.bi_valid?R(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function $(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function V(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&$(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!$(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function H(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?F(e,i,t):(F(e,(o=E[i])+h+1,t),0!==(a=x[o])&&B(e,i-=T[o],a),F(e,o=j(--r),n),0!==(a=k[o])&&B(e,r-=N[o],a)),s<e.last_lit;);F(e,_,t)}function W(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=g,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)V(e,o,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,V(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=y;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<g;n++)p<(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(o=p,m++),l[2*r+1]=o,u<r||(e.bl_count[o]++,a=0,d<=r&&(a=f[r-d]),s=l[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)u<(i=e.heap[--n])||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),q(o,u,e.bl_count)}function Q(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*v]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function K(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)for(;F(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(F(e,i,e.bl_tree),s--),F(e,v,e.bl_tree),B(e,s-3,2)):s<=10?(F(e,b,e.bl_tree),B(e,s-3,3)):(F(e,w,e.bl_tree),B(e,s-11,7));o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}r(N);var Z=!1;function J(e,t,n,r){var i,o,a,s;B(e,(c<<1)+(r?1:0),3),o=t,a=n,s=!0,G(i=e),s&&(R(i,a),R(i,~a)),l.arraySet(i.pending_buf,i.window,o,a,i.pending),i.pending+=a}n._tr_init=function(e){Z||(function(){var e,t,n,r,i,o=new Array(y+1);for(r=n=0;r<a-1;r++)for(T[r]=n,e=0;e<1<<x[r];e++)E[n++]=r;for(E[n-1]=r,r=i=0;r<16;r++)for(N[r]=i,e=0;e<1<<k[r];e++)P[i++]=r;for(i>>=7;r<d;r++)for(N[r]=i<<7,e=0;e<1<<k[r]-7;e++)P[256+i++]=r;for(t=0;t<=y;t++)o[t]=0;for(e=0;e<=143;)S[2*e+1]=8,e++,o[8]++;for(;e<=255;)S[2*e+1]=9,e++,o[9]++;for(;e<=279;)S[2*e+1]=7,e++,o[7]++;for(;e<=287;)S[2*e+1]=8,e++,o[8]++;for(q(S,f+1,o),e=0;e<d;e++)M[2*e+1]=5,M[2*e]=z(e,5);I=new A(S,x,h+1,f,y),O=new A(M,k,0,d,y),D=new A(new Array(0),L,0,p,m)}(),Z=!0),e.l_desc=new o(e.dyn_ltree,I),e.d_desc=new o(e.dyn_dtree,O),e.bl_desc=new o(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,U(e)},n._tr_stored_block=J,n._tr_flush_block=function(e,t,n,r){var i,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return s;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return u;for(t=32;t<h;t++)if(0!==e.dyn_ltree[2*t])return u;return s}(e)),W(e,e.l_desc),W(e,e.d_desc),a=function(e){var t;for(Q(e,e.dyn_ltree,e.l_desc.max_code),Q(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=p-1;3<=t&&0===e.bl_tree[2*C[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?J(e,t,n,r):4===e.strategy||o===i?(B(e,2+(r?1:0),3),H(e,S,M)):(B(e,4+(r?1:0),3),function(e,t,n,r){var i;for(B(e,t-257,5),B(e,n-1,5),B(e,r-4,4),i=0;i<r;i++)B(e,e.bl_tree[2*C[i]+1],3);K(e,e.dyn_ltree,t-1),K(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),H(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&G(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+h+1)]++,e.dyn_dtree[2*j(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;B(e,2,3),F(e,_,S),16===(t=e).bi_valid?(R(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":479}],491:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],492:[function(e,t,n){(function(s){"use strict";void 0===s||!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(a-1),o=0;o<i.length;)i[o++]=arguments[o];return s.nextTick(function(){e.apply(null,i)})}}}:t.exports=s}).call(this,e("_process"))},{_process:493}],493:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],h=!1,f=-1;function d(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!h){var e=l(d);h=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||h||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],494:[function(e,t,n){var r,i;r=this,i=function(){"use strict";function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function u(e,t){return e<t?-1:t<e?1:0}var e=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function c(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function d(e,t){y(e,0,e.children.length,t,e)}function y(e,t,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];f(i,e.leaf?r(a):a)}return i}function f(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function o(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function _(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function m(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function l(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function g(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,n,r,i){for(var o=[t,n];o.length;)if(!((n=o.pop())-(t=o.pop())<=r)){var a=t+Math.ceil((n-t)/r/2)*r;l=i,function e(t,n,r,i,o){for(;r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=t[n],f=r,d=i;for(p(t,r,n),0<o(t[i],h)&&p(t,r,i);f<d;){for(p(t,f,d),f++,d--;o(t[f],h)<0;)f++;for(;0<o(t[d],h);)d--}0===o(t[r],h)?p(t,r,d):p(t,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(s=e,a,t||0,n||s.length-1,l||u),o.push(t,a,a,n)}var s,l}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(e){var t=this.data,n=[];if(!l(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?r(a):a;l(e,s)&&(t.leaf?n.push(a):h(e,s)?this._all(a,n):i.push(a))}t=i.pop()}return n},e.prototype.collides=function(e){var t=this.data;if(!l(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],o=t.leaf?this.toBBox(i):i;if(l(e,o)){if(t.leaf||h(e,o))return!0;n.push(i)}}t=n.pop()}return!1},e.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},e.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},e.prototype.clear=function(){return this.data=g([]),this},e.prototype.remove=function(e,t){if(!e)return this;for(var n,r,i,o=this.data,a=this.toBBox(e),s=[],l=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],n=l.pop(),i=!0),o.leaf){var u=c(e,o.children,t);if(-1!==u)return o.children.splice(u,1),s.push(o),this._condense(s),this}i||o.leaf||!h(o,a)?r?(n++,o=r.children[n],i=!1):o=null:(s.push(o),l.push(n),n=0,o=(r=o).children[0])}return this},e.prototype.toBBox=function(e){return e},e.prototype.compareMinX=function(e,t){return e.minX-t.minX},e.prototype.compareMinY=function(e,t){return e.minY-t.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(e){return this.data=e,this},e.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},e.prototype._build=function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return d(i=g(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=g([])).leaf=!1,i.height=r;var s=Math.ceil(o/a),l=s*Math.ceil(Math.sqrt(a));v(e,t,n,l,this.compareMinX);for(var u=t;u<=n;u+=l){var c=Math.min(u+l-1,n);v(e,u,c,s,this.compareMinY);for(var h=u;h<=c;h+=s){var f=Math.min(h+s-1,c);i.children.push(this._build(e,h,f,r-1))}}return d(i,this.toBBox),i},e.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],u=_(l),c=(h=e,f=l,(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-u);c<o?(o=c,i=u<i?u:i,a=l):c===o&&u<i&&(i=u,a=l)}t=a||t.children[0]}var h,f;return t},e.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],o=this._chooseSubtree(r,this.data,t,i);for(o.children.push(e),f(o,r);0<=t&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},e.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,d(n,this.toBBox),d(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},e.prototype._splitRoot=function(e,t){this.data=g([e,t]),this.data.height=e.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(e,t,n){for(var r,i,o,a,s,l,u,c=1/0,h=1/0,f=t;f<=n-t;f++){var d=y(e,0,f,this.toBBox),p=y(e,f,n,this.toBBox),m=(i=d,o=p,void 0,a=Math.max(i.minX,o.minX),s=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),u=Math.min(i.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,u-s)),g=_(d)+_(p);m<c?(c=m,r=f,h=g<h?g:h):m===c&&g<h&&(h=g,r=f)}return r||n-t},e.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:o,i=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},e.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,o=y(e,0,t,i),a=y(e,n-t,n,i),s=m(o)+m(a),l=t;l<n-t;l++){var u=e.children[l];f(o,e.leaf?i(u):u),s+=m(o)}for(var c=n-t-1;t<=c;c--){var h=e.children[c];f(a,e.leaf?i(h):h),s+=m(a)}return s},e.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;0<=r;r--)f(t[r],e)},e.prototype._condense=function(e){for(var t=e.length-1,n=void 0;0<=t;t--)0===e[t].children.length?0<t?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():d(e[t],this.toBBox)},e},"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):(r=r||self).RBush=i()},{}],495:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:93}],496:[function(e,t,n){(function(e){"use strict";t.exports="function"==typeof e?e:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,e("timers").setImmediate)},{timers:513}],497:[function(e,t,n){t.exports=r;var c=e("events").EventEmitter;function r(){c.call(this)}e("inherits")(r,c),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(u(),0===c.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",l),t.on("error",l),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t}},{events:424,inherits:429,"readable-stream/duplex.js":499,"readable-stream/passthrough.js":508,"readable-stream/readable.js":509,"readable-stream/transform.js":510,"readable-stream/writable.js":511}],498:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],499:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":500}],500:[function(e,t,n){"use strict";var r=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=h;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var a=e("./_stream_readable"),s=e("./_stream_writable");o.inherits(h,a);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":502,"./_stream_writable":504,"core-util-is":423,inherits:429,"process-nextick-args":492}],501:[function(e,t,n){"use strict";t.exports=o;var r=e("./_stream_transform"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":503,"core-util-is":423,inherits:429}],502:[function(D,N,e){(function(g,e){"use strict";var y=D("process-nextick-args");N.exports=f;var a,_=D("isarray");f.ReadableState=o;D("events").EventEmitter;var v=function(e,t){return e.listeners(t).length},i=D("./internal/streams/stream"),u=D("safe-buffer").Buffer,c=e.Uint8Array||function(){};var t=Object.create(D("core-util-is"));t.inherits=D("inherits");var n=D("util"),b=void 0;b=n&&n.debuglog?n.debuglog("stream"):function(){};var s,l=D("./internal/streams/BufferList"),r=D("./internal/streams/destroy");t.inherits(f,i);var h=["error","close","destroy","pause","resume"];function o(e,t){e=e||{};var n=t instanceof(a=a||D("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=D("string_decoder/").StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function f(e){if(a=a||D("./_stream_duplex"),!(this instanceof f))return new f(e);this._readableState=new o(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function d(e,t,n,r,i){var o,a,s,l=e._readableState;null===t?(l.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,x(e)}(e,l)):(i||(o=function(e,t){var n;r=t,u.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(l,t)),o?e.emit("error",o):l.objectMode||t&&0<t.length?("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===u.prototype||(a=t,t=u.from(a)),r?l.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):p(e,l,t,!0):l.ended?e.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?p(e,l,t,!1):L(e,l)):p(e,l,t,!1))):r||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function p(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),L(e,t)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),f.prototype.destroy=r.destroy,f.prototype._undestroy=r.undestroy,f.prototype._destroy=function(e,t){this.push(null),t(e)},f.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),d(this,e,t,!1,n)},f.prototype.unshift=function(e){return d(this,e,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(e){return s||(s=D("string_decoder/").StringDecoder),this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var m=8388608;function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(m<=(n=e)?n=m:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(b("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?y.nextTick(k,e):k(e))}function k(e){b("emit readable"),e.emit("readable"),P(e)}function L(e,t){t.readingMore||(t.readingMore=!0,y.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(b("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){b("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(b("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(b("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=o.slice(a);break}++r}return t.length-=r,i}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=o.slice(a);break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function T(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,y.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}f.prototype.read=function(e){b("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return b("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):x(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&T(this),null;var r,i=t.needReadable;return b("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&b("length less than watermark",i=!0),t.ended||t.reading?b("reading or ended",i=!1):i&&(b("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(r=0<e?E(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&T(this)),null!==r&&this.emit("data",r),r},f.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(n,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,b("pipe count=%d opts=%j",i.pipesCount,e);var t=(!e||!1!==e.end)&&n!==g.stdout&&n!==g.stderr?a:m;function o(e,t){b("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,b("cleanup"),n.removeListener("close",d),n.removeListener("finish",p),n.removeListener("drain",l),n.removeListener("error",f),n.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",h),u=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||l())}function a(){b("onend"),n.end()}i.endEmitted?y.nextTick(t):r.once("end",t),n.on("unpipe",o);var s,l=(s=r,function(){var e=s._readableState;b("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&v(s,"data")&&(e.flowing=!0,P(s))});n.on("drain",l);var u=!1;var c=!1;function h(e){b("ondata"),(c=!1)!==n.write(e)||c||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==O(i.pipes,n))&&!u&&(b("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function f(e){b("onerror",e),m(),n.removeListener("error",f),0===v(n,"error")&&n.emit("error",e)}function d(){n.removeListener("finish",p),m()}function p(){b("onfinish"),n.removeListener("close",d),m()}function m(){b("unpipe"),r.unpipe(n)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?_(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",f),n.once("close",d),n.once("finish",p),n.emit("pipe",r),i.flowing||(b("pipe resume"),r.resume()),n},f.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=O(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},f.prototype.addListener=f.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&x(this):y.nextTick(S,this))}return n},f.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(b("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,y.nextTick(M,e,t))),this},f.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){if(b("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){(b("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e)||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<h.length;o++)t.on(h[o],this.emit.bind(this,h[o]));return this._read=function(e){b("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=E}).call(this,D("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":500,"./internal/streams/BufferList":505,"./internal/streams/destroy":506,"./internal/streams/stream":507,_process:493,"core-util-is":423,events:424,inherits:429,isarray:498,"process-nextick-args":492,"safe-buffer":495,"string_decoder/":512,util:90}],503:[function(e,t,n){"use strict";t.exports=o;var r=e("./_stream_duplex"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){s(n,e,t)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":500,"core-util-is":423,inherits:429}],504:[function(k,L,e){(function(e,t,n){"use strict";var y=k("process-nextick-args");function h(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}L.exports=c;var s,f=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?n:y.nextTick;c.WritableState=u;var r=Object.create(k("core-util-is"));r.inherits=k("inherits");var i={deprecate:k("util-deprecate")},o=k("./internal/streams/stream"),_=k("safe-buffer").Buffer,v=t.Uint8Array||function(){};var a,l=k("./internal/streams/destroy");function b(){}function u(e,t){s=s||k("./_stream_duplex"),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(h=n,h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0,t)a=e,s=n,l=r,u=t,c=i,--s.pendingcb,l?(y.nextTick(c,u),y.nextTick(x,a,s),a._writableState.errorEmitted=!0,a.emit("error",u)):(c(u),a._writableState.errorEmitted=!0,a.emit("error",u),x(a,s));else{var o=m(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||p(e,n),r?f(d,e,n,o,i):d(e,n,o,i)}var a,s,l,u,c;var h}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function c(e){if(s=s||k("./_stream_duplex"),!(a.call(c,this)||this instanceof s))return new c(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function w(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function d(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),x(e,t)}function p(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)(i[a]=n).isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,w(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new h(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(w(e,t,!1,t.objectMode?1:l.length,l,u,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function g(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),x(t,n)})}function x(e,t){var n,r,i=m(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,y.nextTick(g,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}r.inherits(c,o),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===c&&(e&&e._writableState instanceof u)}})):a=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r,i,o,a,s,l,u,c,h,f,d,p=this._writableState,m=!1,g=!p.objectMode&&(r=e,_.isBuffer(r)||r instanceof v);return g&&!_.isBuffer(e)&&(i=e,e=_.from(i)),"function"==typeof t&&(n=t,t=null),g?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof n&&(n=b),p.ended?(h=this,f=n,d=new Error("write after end"),h.emit("error",d),y.nextTick(f,d)):(g||(o=this,a=p,l=n,c=!(u=!0),null===(s=e)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),y.nextTick(l,c),u=!1),u))&&(p.pendingcb++,m=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=_.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else w(e,t,!1,s,r,i,o);return l}(this,p,g,e,t,n)),m},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||p(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?y.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,k("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},k("timers").setImmediate)},{"./_stream_duplex":500,"./internal/streams/destroy":506,"./internal/streams/stream":507,_process:493,"core-util-is":423,inherits:429,"process-nextick-args":492,"safe-buffer":495,timers:513,"util-deprecate":514}],505:[function(e,t,n){"use strict";var s=e("safe-buffer").Buffer,r=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,t.copy(n,r),a+=o.data.length,o=o.next;return i},e}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":495,util:90}],506:[function(e,t,n){"use strict";var o=e("process-nextick-args");function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":492}],507:[function(e,t,n){t.exports=e("events").EventEmitter},{events:424}],508:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":509}],509:[function(e,t,n){(((n=t.exports=e("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":500,"./lib/_stream_passthrough.js":501,"./lib/_stream_readable.js":502,"./lib/_stream_transform.js":503,"./lib/_stream_writable.js":504}],510:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":509}],511:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":504}],512:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=a(t[r])))return 0<i&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=a(t[r])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":495}],513:[function(l,e,u){(function(e,t){var r=l("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function s(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,r(function(){o[t]&&(n?e.apply(null,n):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof t?t:function(e){delete o[e]}}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":493,timers:513}],514:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],515:[function(e,t,n){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},{}],516:[function(e,t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);t.exports=function(){return r(i),i}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},{}],517:[function(e,t,n){var a=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||s(i)}},{"./lib/bytesToUuid":515,"./lib/rng":516}],518:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=T(e("./BuilderProject")),i=T(e("./BuilderCommon")),o=T(e("./BuilderLayer")),a=T(e("./BuilderLayerDatas")),s=T(e("./RenderShape")),l=T(e("./RenderShape_Point")),u=T(e("./RenderPointBasic")),c=T(e("./RenderLineBasic")),h=T(e("./RenderPolygonBasic")),f=T(e("./RenderPolygonSingle")),d=T(e("./RenderLineSingle")),p=T(e("./RenderPolygonSection")),m=T(e("./RenderLineSection")),g=T(e("./RenderPointSingle")),y=T(e("./RenderPointSection")),_=T(e("./RenderPointHeatmap")),v=T(e("./ui/BuilderUi")),b=T(e("./ProjectManager")),w=T(e("./BuilderPortal")),x=T(e("./BuilderPortalProxy")),k=T(e("./RenderWMS")),L=T(e("./RenderWMTS")),C=T(e("./BuilderUpdate")),S=T(e("./RenderKANQ")),M=T(e("./RenderHandDraw")),P=T(e("./toolbox/BuilderToolbox")),E=T(e("./BuilderSetting"));function T(e){return e&&e.__esModule?e:{default:e}}var I={BuilderProject:r.default,BuilderCommon:i.default,BuilderLayer:o.default,BuilderLayerDatas:a.default,RenderShape:s.default,RenderShape_Point:l.default,RenderPointBasic:u.default,RenderLineBasic:c.default,RenderPolygonBasic:h.default,RenderLineSingle:d.default,RenderPolygonSingle:f.default,RenderLineSection:m.default,RenderPolygonSection:p.default,RenderPointSingle:g.default,RenderPointSection:y.default,RenderPointHeatmap:_.default,RenderWMS:k.default,RenderWMTS:L.default,BuilderUi:v.default,ProjectManager:b.default,BuilderPortal:w.default,BuilderPortalProxy:x.default,BuilderUpdate:C.default,RenderKANQ:S.default,RenderHandDraw:M.default,BuilderToolbox:P.default,BuilderSetting:E.default};n.default=I},{"./BuilderCommon":519,"./BuilderLayer":520,"./BuilderLayerDatas":521,"./BuilderPortal":522,"./BuilderPortalProxy":523,"./BuilderProject":524,"./BuilderSetting":525,"./BuilderUpdate":526,"./ProjectManager":527,"./RenderHandDraw":528,"./RenderKANQ":529,"./RenderLineBasic":530,"./RenderLineSection":531,"./RenderLineSingle":532,"./RenderPointBasic":533,"./RenderPointHeatmap":534,"./RenderPointSection":535,"./RenderPointSingle":536,"./RenderPolygonBasic":537,"./RenderPolygonSection":538,"./RenderPolygonSingle":539,"./RenderShape":540,"./RenderShape_Point":541,"./RenderWMS":542,"./RenderWMTS":543,"./toolbox/BuilderToolbox":563,"./ui/BuilderUi":572}],519:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(e("leaflet")),f=i(e("../kq"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return r(e,null,[{key:"bindPopup",value:function(e,t){var n="<ul>",r=e.properties;for(var i in r)n+="<li><span>"+i+"</span><span>"+r[i]+"</span></li>";n+="</ul>";var o=a.default.responsivePopup({maxHeight:400,minWidth:400,className:"property-popup",autoPan:!1}).setContent(n);t.bindPopup(o)}},{key:"createPopup",value:function(e,t,n){var r="<ul>",i=t.properties;for(var o in i)r+="<li><span>"+o+"</span><span>"+i[o]+"</span></li>";r+="</ul>";a.default.popup({maxHeight:400,minWidth:400,className:"property-popup"}).setLatLng(n).setContent(r).openOn(e)}},{key:"isValidGeojson",value:function(e){return!(!e||e.type.toLowerCase()!=="FeatureCollection".toLowerCase())}},{key:"addNewLayer",value:(n=o(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.default.Builder.BuilderProject.getInstance(),r=n.mapView,i=new f.default.Builder.BuilderLayer({dataSource:t},r._getMap()),e.prev=3,f.default.Control.Waiting.show(r._getMap(),"pin","meter"),e.next=7,i.confirmDataSourceAsync();case 7:o=e.sent,setTimeout(function(){try{if(o){n.setting.layer=i,n.addLayer(i);var e=n.getLayerId(i);n.layersContainer.unshift({layerId:e,name:i.options.name,type:i.options.featureType}),n.resetLayersZIndex();try{i.getRender().addToMapView(r),f.default.Control.Notification.getInstance().showSuccess("添加图层成功！",0)}catch(e){f.default.Control.Notification.getInstance().showError("添加图层失败！",0)}f.default.Builder.BuilderCommon.refreshAnalysisLayersControl()}else f.default.Control.Notification.getInstance().showError("添加图层失败！",0)}finally{f.default.Control.Waiting.close()}},0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),f.default.Control.Notification.getInstance().showError("添加图层失败！",0);case 14:return e.prev=14,f.default.Control.Waiting.close(),e.finish(14);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}},e,this,[[3,11,14,17]])})),function(e){return n.apply(this,arguments)})},{key:"addNewLayerWithoutWaitingDialog",value:(t=o(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.default.Builder.BuilderProject.getInstance(),r=n.mapView,i=new f.default.Builder.BuilderLayer({dataSource:t},r._getMap()),e.prev=3,e.next=6,i.confirmDataSourceAsync();case 6:if(e.sent){n.addLayer(i),o=n.getLayerId(i),n.layersContainer.unshift({layerId:o,name:i.options.name,type:i.options.featureType}),n.resetLayersZIndex();try{i.getRender().addToMapView(r),f.default.Control.Notification.getInstance().showSuccess("添加图层成功！",0)}catch(e){f.default.Control.Notification.getInstance().showError("添加图层失败！",0)}f.default.Builder.BuilderCommon.refreshAnalysisLayersControl()}else f.default.Control.Notification.getInstance().showError("添加图层失败！",0);e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),f.default.Control.Notification.getInstance().showError("添加图层失败！",0);case 13:return e.prev=13,f.default.Control.Waiting.close(),e.finish(13);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this,[[3,10,13,16]])})),function(e){return t.apply(this,arguments)})},{key:"clearLayersContainer",value:function(){var t=f.default.Builder.BuilderProject.getInstance(),e=t.layersContainer;t.setting.layers.eachLayer(function(e){t.deleteLayer(e)}),e.clear()}},{key:"refreshAnalysisLayersControl",value:function(){var e=f.default.Builder.BuilderCommon.layersControlDataSource(),t=f.default.Builder.BuilderProject.getInstance(),n=t.setting.analysisCurrentPage;if(n&&t.analysis_controls){var r=t.analysis_controls[n].get(n+" src-layers");if(r){var i=r.select(),o=void 0;o=-1===i?0:i,r.setDataSource(e),r.select(o)}var a=t.analysis_controls[n].get(n+" dest-layers");if(a){var s=a.select(),l=void 0;l=-1===s?0:s,a.setDataSource(e),a.select(l)}var u=t.analysis_controls[n].get(n+" src1-layers");if(u){var c=u.select(),h=void 0;h=-1===c?0:c,u.setDataSource(e),u.select(h)}}}},{key:"layersControlDataSource",value:function(){var n=[];return f.default.Builder.BuilderProject.getInstance().setting.layers.eachLayer(function(e){var t=e.options;n.push({name:t.name,value:t.guid})}),n}},{key:"getGeoSRSFromGeojson",value:function(e){var t="EPSG:4326";if(!e)return t;if(e.crs){var n=f.default.Builder.BuilderCommon._getGeoSRSFromObject(e.crs);return n?n[0].replace("::",":"):t}return e.proj4?"PROJ4:"+e.proj4:t}},{key:"_getGeoSRSFromObject",value:function(e){for(var t in e){var n=null,r=Object.prototype.toString.call(e[t]);if("[object Object]"===r?n=f.default.Builder.BuilderCommon._getGeoSRSFromObject(e[t]):"[object String]"===r&&(n=String(e[t]).match(/EPSG(::|:)\d{4}/gi)),n)return n}return null}},{key:"isPortalEnvironment",value:function(){return!!(parent&&parent.window&&parent.window.vm&&parent.window.vm.$api&&parent.window.vm.$api.mapBuilderApi)}},{key:"mapBoundToGeometry",value:function(e){var t=e.getNorthEast(),n=t.lat,r=t.lng,i=e.getSouthWest(),o=i.lat,a=i.lng;return{type:"Polygon",coordinates:[[[r,n],[a,n],[a,o],[r,o],[r,n]]]}}},{key:"deepCompare",value:function(e,t){var n,r,i,o;function a(e,t){var n;if(isNaN(e)&&isNaN(t)&&"number"==typeof e&&"number"==typeof t)return!0;if(e===t)return!0;if("function"==typeof e&&"function"==typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(-1<i.indexOf(e)||-1<o.indexOf(t))return!1;for(n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(s(t[n])!==s(e[n]))return!1}for(n in e){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(s(t[n])!==s(e[n]))return!1;switch(s(e[n])){case"object":case"function":if(i.push(e),o.push(t),!a(e[n],t[n]))return!1;i.pop(),o.pop();break;default:if(e[n]!==t[n])return!1}}return!0}if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(i=[],o=[],!a(e,arguments[n]))return!1;return!0}},{key:"geomanFindLayers",value:function(e){var t=[];return e.eachLayer(function(e){(e instanceof a.default.Polyline||e instanceof a.default.Marker||e instanceof a.default.Circle||e instanceof a.default.CircleMarker)&&t.push(e)}),t=(t=t.filter(function(e){return!!e.pm})).filter(function(e){return!e._pmTempLayer})}},{key:"imageUrl",value:function(e){return e.replace(/^url\(/,"").replace(/\)$/,"")}},{key:"initContainer",value:function(e,t){for(var n=document.getElementsByClassName(e),r=0;r<n.length;r++){var i=document.createElement("div");i.innerHTML=t,n[r].appendChild(i)}}},{key:"activeLayer",value:function(){return f.default.Builder.BuilderProject.getInstance().setting.layer}},{key:"activeRender",value:function(){return f.default.Builder.BuilderCommon.activeLayer().getRender()}},{key:"renderModel",value:function(){return f.default.Builder.BuilderProject.getInstance().getInfo("render_model")}},{key:"convertPointVectorInfoOptions",value:function(e){e.lineColor=e.vectorInfo.strokeColor,e.lineWidth=e.vectorInfo.strokeWidth,e.colorIndex=e.vectorInfo.colorIndex,e.vectorInfo.thematicField&&(e.thematicField=e.vectorInfo.thematicField),void 0!==e.vectorInfo.sectionMethod&&(e.sectionMethod=e.vectorInfo.sectionMethod,e.sectionCount=e.vectorInfo.sectionCount)}},{key:"fillSvgSymbols",value:function(r,i){r.empty();for(var o=["&#xe614","&#xe6e3","&#xe6ad","&#xe629","&#xe613","&#xe66b","&#xe65a","&#xe75f","&#xe656","&#xe679","&#xe657","&#xe652","&#xe615","&#xe67e","&#xe620","&#xe7df","&#xe667","&#xe666","&#xe642","&#xe640","&#xe628","&#xe67b","&#xeac9","&#xe63f","&#xe61a","&#xe64d","&#xe626","&#xe6cb","&#xe6b5","&#xe689","&#xe6f6","&#xe71c","&#xe646","&#xe6c7","&#xe671","&#xe66f","&#xe641","&#xe63e","&#xe63a","&#xe676","&#xe739","&#xe651","&#xe663","&#xe67a","&#xe677","&#xe612","&#xe81f","&#xe65c","&#xe664","&#xe665","&#xe61f","&#xe623","&#xe624","&#xe62a","&#xe62b","&#xe611","&#xe66d","&#xe660","&#xe64c","&#xe630"],a=o.length,e=Math.ceil(a/i),s=0;s<e;++s){for(var l=$('<div class="symbol-row"></div>'),t=function(e){var t=s*i+e+1;if(a<t)return"continue";var n=$('<div class="iconfont"></div>');n.html(o[t-1]),n.click(function(){r.trigger("svg_symbol_selected",o[t-1])}),l.append(n)},n=0;n<i;++n)t(n);r.append(l)}}},{key:"fillImageSymbols",value:function(r,i){r.empty();for(var e=Math.ceil(60/i),o=0;o<e;++o){for(var a=$('<div class="symbol-row"></div>'),t=function(e){var t=o*i+e+1;if(60<t)return"continue";var n=$('<div class="point-img" ><div style="'+("background-image: url(./images/point_images/IMAGE"+t+".png);")+'"></div></div>');n.click(function(){r.trigger("image_symbol_selected",{number:t})}),a.append(n)},n=0;n<i;++n)t(n);r.append(a)}}},{key:"geomanShapeToType",value:function(e){return{Marker:"point",Line:"line",Polygon:"polygon",Rectangle:"rectangle",Circle:"circle",Text:"text"}[e]}}]),e}();n.default=l},{"../kq":729,leaflet:473}],520:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=r(e("leaflet")),M=r(e("../kq"));r(e("./RenderHandDraw"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a={visible:!0,guid:"",name:"",featureType:"",projection:"EPSG:4326",enableFields:[],dataSource:{type:"STATIC_DATA",url:"",name:""},render:{}},u={type:"FeatureCollection",features:[]},s=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=l.default.extend({},a,e),this.render=null,this.renderType="basic",this.visible=!0,this.options.guid=M.default.Common.ComputeTools.guid(),this.options.label_guid=M.default.Common.ComputeTools.guid(),t&&(t.createPane(this.options.guid),t.createPane(this.options.label_guid),this.pane=this.options.guid,this.label_pane=this.options.label_guid,t.getPane(this.options.guid).style.zIndex=M.default.Common.CommonValues.overlayPane_zIndex,t.getPane(this.options.label_guid).style.zIndex=M.default.Common.CommonValues.labelPane_zIndex,this.map=t)}var e,t,r;return i(n,[{key:"confirmDataSourceAsync",value:(r=o(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).options.dataSource,r=M.default.Data.DataManager.getInstance(),"HAND_DRAW_DATA"===(i=n.type))return e.next=7,t.initRender();e.next=11;break;case 7:t.options.featureType="hand-draw",t.options.name=n.name,e.next=32;break;case 11:if("WMS_DATA"===i||"WMTS_DATA"===i||"KQ_DATA"===i)return e.next=14,t.initRender();e.next=18;break;case 14:t.options.featureType="tile",t.options.name="WMTS_DATA"===i?n.name.__text:n.name,e.next=32;break;case 18:if(null===(o=M.default.Builder.BuilderLayerDatas.getInstance().prepareReqData(t.options.guid,{zoom:this.map.getZoom(),bound:this.map.getBounds()})))return e.abrupt("return",!0);e.next=21;break;case 21:return e.next=23,r.getData(n);case 23:if(a=e.sent,M.default.Builder.BuilderCommon.isValidGeojson(a)){e.next=26;break}return e.abrupt("return",!1);case 26:if(t.options.featureType=M.default.Common.CommonTools._getGeoJSONType(a),t.options.name=n.name,M.default.Builder.BuilderLayerDatas.getInstance().setData(t.options.guid,a,o))return e.next=32,t.initRender();e.next=32;break;case 32:return e.abrupt("return",!0);case 33:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"refresh",value:(t=o(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("BuilderLayer refresh!"),n=this,null===(r=M.default.Builder.BuilderLayerDatas.getInstance().prepareReqData(n.options.guid,{zoom:this.map.getZoom(),bound:this.map.getBounds()})))return e.abrupt("return",!0);e.next=5;break;case 5:return i=M.default.Data.DataManager.getInstance(),o=M.default.Builder.BuilderCommon.mapBoundToGeometry(t),a=l.default.extend({},n.options.dataSource,{geometry:JSON.stringify(o)}),e.next=10,i.getData(a);case 10:if((s=e.sent)||(s=u),s.features||(s.features=[]),M.default.Builder.BuilderCommon.isValidGeojson(s)){e.next=15;break}return e.abrupt("return",!1);case 15:return M.default.Builder.BuilderLayerDatas.getInstance().setData(n.options.guid,s,r)&&n.initRender(!0),e.abrupt("return",!0);case 18:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getRender",value:function(){return this.render.get(this.renderType)}},{key:"getRenderType",value:function(){return this.renderType}},{key:"setRenderType",value:function(e,t){var n=this.render.get(this.renderType),r=this.render.get(e);this.renderType=e,n.remove(),r.addToMapView(t)}},{key:"initRender",value:(e=o(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("BuilderLayer initRender!"),t=this,n=M.default.Builder.BuilderProject.getInstance(),r=n.mapView,i=new Map,"HAND_DRAW_DATA"===(o=t.options.dataSource.type))return t.renderType="hand-draw",a=new M.default.Builder.RenderHandDraw(t.pane),e.next=11,a.setOptions(t.options.dataSource);e.next=14;break;case 11:i.set(t.renderType,a),e.next=49;break;case 14:if("WMS_DATA"===o)return t.renderType="wms",s=new M.default.Builder.RenderWMS(t.pane),e.next=19,s.setOptions(t.options.dataSource);e.next=22;break;case 19:i.set(t.renderType,s),e.next=49;break;case 22:if("WMTS_DATA"===o)return t.renderType="wmts",l=new M.default.Builder.RenderWMTS(t.pane),e.next=27,l.setOptions(t.options.dataSource);e.next=30;break;case 27:i.set(t.renderType,l),e.next=49;break;case 30:if("KQ_DATA"===o)return t.renderType="kq",u=new M.default.Builder.RenderKANQ(t.pane),e.next=35,u.setOptions(t.options.dataSource);e.next=38;break;case 35:i.set(t.renderType,u),e.next=49;break;case 38:if(c=M.default.Builder.BuilderLayerDatas.getInstance().getData(t.options.guid),h={},f={},d={},p={},m=null,"DS_DATA"===o)return e.next=47,M.default.ServiceTool.ServiceToolData.getDSDataBounds(t.options.dataSource);e.next=48;break;case 47:m=e.sent;case 48:"point"===this.options.featureType?(S&&(h=t.render.get("basic").options,f=t.render.get("single").options,d=t.render.get("section").options,p=t.render.get("heatmap").options),(g=new M.default.Builder.RenderPointBasic(c,t.pane,t.label_pane)).setOptions(h),(y=new M.default.Builder.RenderPointSingle(c,t.pane,t.label_pane)).setOptions(f),(_=new M.default.Builder.RenderPointSection(c,t.pane,t.label_pane)).setOptions(d),(v=new M.default.Builder.RenderPointHeatmap(c,t.pane,t.label_pane)).setOptions(p),S&&(t.render.get("basic").remove(),t.render.get("single").remove(),t.render.get("section").remove(),t.render.get("heatmap").remove()),m&&(g.setBounds(m),y.setBounds(m),_.setBounds(m),v.setBounds(m)),i.set("basic",g),i.set("single",y),i.set("section",_),i.set("heatmap",v)):"line"===this.options.featureType?(S&&(h=t.render.get("basic").options,f=t.render.get("single").options,d=t.render.get("section").options),(b=new M.default.Builder.RenderLineBasic(c,t.pane,t.label_pane)).setOptions(h),(w=new M.default.Builder.RenderLineSingle(c,t.pane,t.label_pane)).setOptions(f),(x=new M.default.Builder.RenderLineSection(c,t.pane,t.label_pane)).setOptions(d),S&&(t.render.get("basic").remove(),t.render.get("single").remove(),t.render.get("section").remove()),m&&(b.setBounds(m),w.setBounds(m),x.setBounds(m)),i.set("basic",b),i.set("single",w),i.set("section",x)):"polygon"===this.options.featureType&&(S&&(h=t.render.get("basic").options,f=t.render.get("single").options,d=t.render.get("section").options),(k=new M.default.Builder.RenderPolygonBasic(c,t.pane,t.label_pane)).setOptions(h),(L=new M.default.Builder.RenderPolygonSingle(c,t.pane,t.label_pane)).setOptions(f),(C=new M.default.Builder.RenderPolygonSection(c,t.pane,t.label_pane)).setOptions(d),S&&(t.render.get("basic").remove(),t.render.get("single").remove(),t.render.get("section").remove()),m&&(k.setBounds(m),L.setBounds(m),C.setBounds(m)),i.set("basic",k),i.set("single",L),i.set("section",C));case 49:this.render=i,S&&t.render.get(t.renderType).addToMapView(r);case 51:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"setPaneZIndex",value:function(e){this.map.getPane(this.options.guid).style.zIndex=M.default.Common.CommonValues.overlayPane_zIndex+e,this.map.getPane(this.options.label_guid).style.zIndex=M.default.Common.CommonValues.labelPane_zIndex+e}},{key:"getPaneZIndex",value:function(){return this.map.getPane(this.options.guid).style.zIndex}},{key:"removePane",value:function(){this.map.getPane(this.options.guid).remove()}},{key:"getBoundingBox",value:function(){return this.render.get(this.renderType).getBounds()}}]),n}();n.default=s},{"../kq":729,"./RenderHandDraw":528,leaflet:473}],521:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("leaflet")),a=i(e("../kq"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataMap=new Map,this.reqCountMap=new Map}return r(e,[{key:"prepareReqData",value:function(e,t){if(this.reqCountMap.get(e)){var n=this.reqCountMap.get(e);if(n.zoom==t.zoom&&a.default.Builder.BuilderCommon.deepCompare(n.bound,t.bound))return console.log("BuilderLayerDatas prepareReqData: null"),null;var r=o.default.extend({},{reqID:n.reqID+1},t);this.reqCountMap.set(e,r)}else{var i=o.default.extend({},{reqID:0},t);this.reqCountMap.set(e,i)}return console.log("BuilderLayerDatas prepareReqData:"+JSON.stringify(this.reqCountMap.get(e))),this.reqCountMap.get(e)}},{key:"setData",value:function(e,t,n){return n.reqID<this.reqCountMap.get(e).reqID?(console.log("BuilderLayerDatas setData:"+e+" false reqID:"+n.reqID),!1):(console.log("BuilderLayerDatas setData:"+e+" true reqID:"+n.reqID+" get(guid).reqID:"+this.reqCountMap.get(e).reqID),this.dataMap.set(e,t),!0)}},{key:"getData",value:function(e){return this.dataMap.get(e)}},{key:"delData",value:function(e){this.dataMap.delete(e)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729,leaflet:473}],522:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../kq");(r=i)&&r.__esModule;function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,i;return o(e,null,[{key:"isPortalEnvironment",value:function(){return!!(parent&&parent.window&&parent.window.vm&&parent.window.vm.$api&&parent.window.vm.$api.mapBuilderApi)}},{key:"uploadJsonToFileServer",value:(i=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",parent.window.vm.$api.mapBuilderApi.saveToFile({contentJson:t.contentJson,fileName:t.fileName,fileType:t.fileType,taskId:t.taskId},{__LOGINTYPE:"dialog",noLoading:!0}).then(function(e){return e.data.downloadPath="/fileapi/sliceFile/download/"+e.data.taskId,e.data}).catch(function(){return null}));case 1:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"uploadUrl",value:function(){return parent.window.vm.$api.mapBuilderApi.sliceFileUpload({},{})}},{key:"downloadUrl",value:function(e){return"http://"+parent.window.vm.$api.mapBuilderApi.sliceRootUrl()+"/fileapi/sliceFile/download/"+e}},{key:"currentInfo",value:function(){return e.isPortalEnvironment()?parent.window.getPortalCurrentInfo():{jwt:"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJrYW5nc2siLCJjcmVhd…SsvCeT0Gyt04rrYkpjkcCUOCMcTxH1tnrLHhaC2IsEz_kieVw",userInfo:'{"headImg":"8729967d-cf88-4f0a-a463-a4c78bf89df4","loginName":"kangsk","id":4,"username":"张三","status":1}',language:""}}},{key:"isLogin",value:(r=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",parent.window.getPortalCurrentInfoLiveUpdate().then(function(e){return""!==e.userInfo}).catch(function(){return!1}));case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"openLoginDialog",value:function(){parent.window.openPortalLoginDialog()}},{key:"webFileDataSourceInfos",value:(n=a(regeneratorRuntime.mark(function e(s){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",parent.window.vm.$api.mapBuilderApi.getFilesList({},{__LOGINTYPE:"dialog",noLoading:!0}).then(function(e){var t=e.data;if("success"!==t.result)return null;for(var n=[],r=t.list,i=0;i<r.length;++i){var o=r[i],a=o.fileName.replace("."+o.fileType,"");o.fileType==s&&n.push({name:a,time:o.uploadEndTime,type:o.fileType,dataSourceInfo:{type:"STATIC_DATA",name:a,url:"http://"+parent.window.vm.$api.mapBuilderApi.sliceRootUrl()+o.downloadPath}})}return n}).catch(function(){return null}));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getListServiceNoCLassify",value:(t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",parent.window.vm.$api.mapBuilderApi.getListServiceNoCLassify({},{__LOGINTYPE:"dialog",noLoading:!0}).then(function(e){var t=e.data;if("success"!==t.title)return[];for(var n=[],r=t.data,i=0;i<r.length;++i)r[i].C_SERVICE_URL&&n.push({url:r[i].C_SERVICE_URL,userName:r[i].USERNAME,scope:r[i].C_SCOPE,createTime:r[i].CREATE_TIME});return n}).catch(function(){return[]}));case 1:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();n.default=s},{"../kq":729}],523:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("../kq")),a=r(e("./BuilderPortal"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return i(e,null,[{key:"uploadJsonToFileServer",value:(r=s(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.default.Builder.BuilderPortal.isPortalEnvironment())return e.next=3,o.default.Builder.BuilderPortal.uploadJsonToFileServer(t);e.next=6;break;case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,o.default.Common.NetworkTools.httpPostAsync(n,o.default.Common.NetworkTools.getParamString(t));case 8:if("error"===(r=e.sent))return e.abrupt("return",{result:"error"});e.next=13;break;case 13:(r=JSON.parse(r)).downloadPath=n.replace("/file/saveToFile","/file/download/")+r.taskId;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"uploadUrl",value:function(){return o.default.Builder.BuilderPortal.isPortalEnvironment()?o.default.Builder.BuilderPortal.uploadUrl():o.default.Map.MapConfig.getInstance().getMapBuilder_fileServerUrl()+"/sliceFileUpload?chunkSize=10485760"}},{key:"downloadUrl",value:function(e){return o.default.Builder.BuilderPortal.isPortalEnvironment()?o.default.Builder.BuilderPortal.downloadUrl(e):"http://27.17.43.14:9411/file/download/"+e}},{key:"currentInfo",value:function(){return a.default.isPortalEnvironment()?parent.window.getPortalCurrentInfo():{jwt:"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJrYW5nc2siLCJjcmVhd…SsvCeT0Gyt04rrYkpjkcCUOCMcTxH1tnrLHhaC2IsEz_kieVw",userInfo:'{"headImg":"165ae30e-30d1-415d-8329-95558b2a4fb1","loginName":"kangsk","id":4,"username":"张三","status":1}',language:""}}},{key:"isLogin",value:function(){return o.default.Builder.BuilderPortal.isLogin()}},{key:"openLoginDialog",value:function(){return o.default.Builder.BuilderPortal.openLoginDialog()}},{key:"webFileDataSourceInfos",value:(n=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.default.Builder.BuilderPortal.isPortalEnvironment())return e.next=3,o.default.Builder.BuilderPortal.webFileDataSourceInfos(t);e.next=6;break;case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,o.default.Data.DataManager.getInstance().getWebFileDataSourceInfos_server(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getListServiceNoCLassify",value:(t=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.default.Builder.BuilderPortal.isPortalEnvironment())return e.next=3,o.default.Builder.BuilderPortal.getListServiceNoCLassify();e.next=6;break;case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",[{url:"http://172.16.0.26:8699/KQGis/rest/services/ds_all/DataServer",userName:"罗忺忺",scope:"Public",createTime:"2020-04-17 16:04:34"}]);case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();n.default=l},{"../kq":729,"./BuilderPortal":522}],524:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("leaflet")),o=a(e("../kq"));a(e("../common/CommonValues"));function a(e){return e&&e.__esModule?e:{default:e}}var s={extent:{leftBottom:{x:-20037508.3427892,y:-20037508.3427892},rightTop:{x:-20037508.3427892,y:-20037508.3427892}},level:1,center:{x:114,y:31},baseLayer:{layerType:"CLOUD",name:"高德地图"},layers:i.default.layerGroup(),description:"",projection:"EPSG:3857",title:"无标题",version:"1.0",name:"",layer:null,analysisCurrentPage:"",handDrawLayer:null},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.infoMap=new Map,this.setting=s,this.analysis_controls=new Map,this.analysis_result=new Map,this.basemapGroup=null,this.layersContainer=null}return r(e,[{key:"setInfo",value:function(e,t){this.infoMap.set(e,t)}},{key:"getInfo",value:function(e){return this.infoMap.get(e)}},{key:"delInfo",value:function(e){this.infoMap.delete(e)}},{key:"setCenter",value:function(e){this.setting.center=e}},{key:"setLevel",value:function(e){this.setting.level=e}},{key:"addLayer",value:function(e){this.setting.layers.addLayer(e)}},{key:"getLayer",value:function(e){return this.setting.layers.getLayer(e)}},{key:"getLayerFromGuid",value:function(e){for(var t=this.setting.layers.getLayers(),n=0;n<t.length;++n){var r=t[n];if(r.options.guid==e)return r}return null}},{key:"getLayerId",value:function(e){return this.setting.layers.getLayerId(e)}},{key:"resetLayersZIndex",value:function(){for(var e=this.layersContainer,t=e.items(),n=t.length,r=0;r<n;++r){var i=e.dataItem(t[r]);this.setting.layers.getLayer(i.layerId).setPaneZIndex(n-r)}}},{key:"clearLayers",value:function(){this.setting.layers.clearLayers()}},{key:"removeLayer",value:function(e){this.setting.layers.removeLayer(e),e.getRender().remove()}},{key:"deleteLayer",value:function(e){this.removeLayer(e),e.removePane()}},{key:"layers",value:function(){return this.setting.layers}},{key:"setPaneZIndexArray",value:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.getPane(r.layerid).style.zIndex=o.default.Common.CommonValues.overlayPane_zIndex+Number(r.zIndex)}}},{key:"load",value:function(e){}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../common/CommonValues":606,"../kq":729,leaflet:473}],525:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(){var i=l.default.Builder.BuilderProject.getInstance(),o=i.setting,a=l.default.Builder.BuilderProject.getInstance().mapView._getMap(),s=!0;a.on("zoomend moveend",function(){var e=a._zoom;$(".mapsetting-content .map-level").val(e);var t=a.getCenter().lng,n=a.getCenter().lat,r={x:t,y:n};i.setCenter(r),i.setLevel(e),s&&($(".mapsetting-content .map-center-x").val(t),$(".mapsetting-content .map-center-y").val(n)),s=!0});var e,t=kendo.observable({centerX:o.center.x/1e5,centerY:o.center.y/1e5,level:o.level});kendo.bind($("div.mapsetting-content"),t),$(".mapsetting-content .map-level").change(function(e){var t=Number(e.target.value);if(!Number.isInteger(t)||t<0||23<t)l.default.Control.Notification.getInstance().showError("不合法的输入值！"),e.target.value=o.level;else{o.level=t;var n=l.default.Builder.BuilderProject.getInstance().mapView;s=!1,n.zoom(t)}}),$(".mapsetting-content .map-center-x").change(function(e){var t=Number(e.target.value);if(t==parseInt(t)||t<-180||180<t)l.default.Control.Notification.getInstance().showError("不合法的输入值！"),e.target.value=o.center.x;else{o.center.x=1e5*t;var n=l.default.Builder.BuilderProject.getInstance().mapView,r=$(".mapsetting-content .map-center-y").val();s=!1,n.panTo([r,o.center.x/1e5])}}),$(".mapsetting-content .map-center-y").change(function(e){var t=Number(e.target.value);if(t==parseInt(t)||t<-90||90<t)l.default.Control.Notification.getInstance().showError("不合法的输入值！"),e.target.value=o.center.y;else{o.center.y=1e5*t;var n=l.default.Builder.BuilderProject.getInstance().mapView,r=$(".mapsetting-content .map-center-x").val();s=!1,n.panTo([o.center.y/1e5,r])}}),$(".ooc").on("click",function(){$("#occdialog").kendoDialog({width:"300px",height:"400px",title:"开源协议",content:'<div class="occ-content">内容待补充</div>',actions:[{text:"关闭"}]}).data("kendoDialog").open()}),$(".addtags").on("click",(e=regeneratorRuntime.mark(function e(){var a,s,t,n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=$(".maptags-text").val(),s=a.replace(/[\uff0c]/g,",").split(","),s=Array.from(new Set(s)),s=$.grep(s,function(e){return 0<$.trim(e).length}),console.log(a,s),e.next=7,l.default.Common.NetworkTools.httpGetAsync(l.default.Common.CommonValues.kqwebmapPath+"services/map_builder/data/tags.json").then(function(e){for(var t="",n=0;n<JSON.parse(e).length;n++)t+='\n            <li>\n              <input id="'+JSON.parse(e)[n].tag+'" type="checkbox">\n              <label for="'+JSON.parse(e)[n].tag+'">'+JSON.parse(e)[n].tag+"</label>\n            </li>\n          ";$("#addtagsdialog").kendoDialog({width:"300px",height:"400px",title:"标签库",content:'<div class="addtags-content">\n            <p>从列表中选中一个或多个标签(最多支持6个)</p>\n            <ul>\n              '+t+"\n            </ul>\n          </div>",actions:[{text:"取消"},{text:"使用所选标签",action:function(){for(var e="",t=$(".addtags-content ul li"),n=0;n<s.length;n++)for(var r=0;r<t.length;r++)s[n]===t[r].innerText&&s.splice(n,1);t.map(function(e){t[e].children[0].checked&&s.push(t[e].innerText)}),s=Array.from(new Set(s));for(var i=0;i<s.length;i++)e+=s[i]+",";console.log(s,e),e=e.substring(0,e.lastIndexOf(",")),$(".maptags-text").attr({title:e}),$(".maptags-text").val(e);for(var o=0;o<t.length;o++)t[o].setAttribute("style","pointer-events: auto");return!0}}]}).data("kendoDialog").open()}).catch(function(e){console.log(e)});case 7:for(t=0;t<s.length;t++)for(n=$("#addtagsdialog .addtags-content ul li"),r=0;r<n.length;r++)s[t]===n[r].innerText&&(n[r].children[0].checked=!0);if(6<=s.length)for(l.default.Control.Notification.getInstance().showInfo("您已经有"+s.length+"个标签了。",0),i=$("#addtagsdialog .addtags-content ul li input:not(:checked)"),console.log(i),o=0;o<i.length;o++)i[o].parentNode.setAttribute("style","pointer-events: none");$("#addtagsdialog .addtags-content ul li input").on("change",function(){var e=$("#addtagsdialog .addtags-content ul li"),t=a.replace(/[\uff0c]/g,",").split(",");t=Array.from(new Set(t)),t=$.grep(t,function(e){return 0<$.trim(e).length});for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)t[n]===e[r].innerText&&t.splice(n,1);for(var i=0;i<e.length;i++)e[i].setAttribute("style","pointer-events: auto"),e[i].children[0].checked&&t.push(e[i].innerText);if(6<=(t=Array.from(new Set(t))).length){l.default.Control.Notification.getInstance().showInfo("您已经有"+t.length+"个标签了。",0);var o=$("#addtagsdialog .addtags-content ul li input:not(:checked)");o.map(function(e){o[e].parentNode.setAttribute("style","pointer-events: none")})}});case 10:case"end":return e.stop()}},e,this)}),function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})})),$(".maptags-text").on("change",function(){var e=$(".maptags-text").val();$(".maptags-text").attr({title:e})}),settingScrollBar()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],526:[function(n,e,o){(function(l){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=(e(n("leaflet")),e(n("../kq")));function e(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limitedRefreshDBFile=u.default.Common.CommonTools._debounce(this._refreshDBFile,200)}var t,n;return r(e,[{key:"bindRefreshEvent",value:(n=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("BuilderUpdate bindEvent moveend!"),this.limitedRefreshDBFile(t);case 2:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"bindEvent",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];console.log("BuilderUpdate bindEvent ! "+e);var t=u.default.Builder.BuilderProject.getInstance().mapView._getMap();e?t.on("moveend",this.bindRefreshEvent,this):t.off("moveend",this.bindRefreshEvent,this)}},{key:"_refreshDBFile",value:(t=i(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.kqLeftMouseButtonOnlyDown)return console.log("LeftMouseButton down， delay refresh！"),this.limitedRefreshDBFile(t),e.abrupt("return");e.next=4;break;case 4:console.log("BuilderUpdate refreshDatabaseFile!"),this,n=u.default.Builder.BuilderProject.getInstance(),r=n.mapView,i=n.setting.layers.getLayers(),o=r.getBounds(),a=0;case 11:if(!(a<i.length)){e.next=22;break}if("DB_DATA"!==(s=i[a]).options.dataSource.type&&"DS_DATA"!==s.options.dataSource.type)return e.abrupt("continue",19);e.next=15;break;case 15:if(s.visible){e.next=17;break}return e.abrupt("continue",19);case 17:return e.next=19,s.refresh(o);case 19:a++,e.next=11;break;case 22:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();o.default=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":729,leaflet:473}],527:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=o(e("./BuilderProject")),M=o(e("../kq"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.infoMap=new Map,this.builderProject=i.default.getInstance(),this.mapJson={},this.contentJson={},this.projectJson={},this.taskId=""}var t,n;return r(e,[{key:"saveProject",value:(t=regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,k,L,C,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(c in n=this.builderProject.setting.layers._layers,r=$("#current-project-name")[0].innerText,i=$(".setting-maptags input")[0].value,o=$(".mapdescribe-text")[0].value,a=M.default.Map.MapGeoman.getInstance(),s=a.toSaveString(),""!=t.projectName&&(r=t.projectName),l=M.default.Control.Notification.getInstance(),u=new Map,n)h=n[c].renderType,f=n[c].options.featureType,d=n[c].options.dataSource,p=n[c].render.get(h),(m=new Object).renderType=h,m.featureType=f,m.options=p.options,m.options.renderType=h,m.dataSource=d,p.options.thematicColors&&delete p.options.thematicColors,p.options.gradient&&delete p.options.gradient,"hand-draw"===h&&(m.renderDataSource=p.dataSource),u.set(c,m);for(g=M.default.Builder.BuilderProject.getInstance().layersContainer,y=g.items(),_={},v=0;v<y.length;++v)b=g.dataItem(y[v]),_[b.layerId]=y.length-1-v;return this.mapJson.layersOrderMap=_,this.mapJson.center=this.builderProject.setting.center,this.mapJson.extent=this.builderProject.setting.extent,this.mapJson.level=this.builderProject.setting.level,this.mapJson.name=this.builderProject.setting.name,this.mapJson.projection=this.builderProject.setting.projection,this.mapJson.title=r,this.mapJson.version=this.builderProject.setting.version,this.mapJson.layers=u,this.mapJson.baseLayer=this.builderProject.setting.baseLayer,this.mapJson.marks=i,this.mapJson.comments=o,this.mapJson.geomanArray=s,w=M.default.Map.MapConfig.getInstance(),x=w.getMapBuilder_fileServerUrl(),k=x+"/saveToFile",L="",t.isSaveAs||""==this.taskId||(L=this.taskId),C={contentJson:this.mapJson,fileName:r,fileType:"prj",comments:o,keyWord:i,taskId:L},e.next=35,M.default.Common.NetworkTools.uploadJsonToFileServer(k,C);case 35:return"error"==(S=e.sent).result?l.showError("保存工程至服务器失败！"):(l.showSuccess("保存工程成功！"),t.isSaveAs||(this.taskId=S.taskId)),e.abrupt("return",S);case 38:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return n.apply(this,arguments)})},{key:"saveAs",value:function(){}},{key:"share",value:function(){}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729,"./BuilderProject":524}],528:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("leaflet")),o=a(e("../kq"));function a(e){return e&&e.__esModule?e:{default:e}}var s={layer:"",style:"default"},l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.pane=e,this.options={},this.mapView=null,this.dataSource=[]}var e,n;return r(t,[{key:"setOptions",value:(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.options=i.default.extend({},s,{pane:this.pane},t);case 1:case"end":return e.stop()}},e,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return n.apply(this,arguments)})},{key:"addToMapView",value:function(e){this.mapView=e;for(var t=this.dataSource,n=0;n<t.length;++n)o.default.Builder.BuilderProject.getInstance().geoman.displayGeomanLayerById(t[n].id,!0)}},{key:"remove",value:function(){if(!this.mapView)return null;this.layer&&(this.layer.remove(),this.layer=null);for(var e=this.dataSource,t=0;t<e.length;++t)o.default.Builder.BuilderProject.getInstance().geoman.displayGeomanLayerById(e[t].id,!1);return this.mapView}},{key:"setDataSource",value:function(e){this.dataSource=e,o.default.Builder.BuilderProject.getInstance().handDrawLayersContainer.setDataSource(e)}}]),t}();n.default=l},{"../kq":729,leaflet:473}],529:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=r(e("leaflet")),s=r(e("../kq"));function r(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var u={layer:"",style:"default"},i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.pane=e,this.options={},this.mapView=null}var n,r,i;return o(t,[{key:"setOptions",value:(i=l(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=a.default.extend({},u,{pane:this.pane},t),e.next=3,this.initServiceInfo(t.url);case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"addToMapView",value:function(e){this.mapView=e;var t=this.mapView._getMap();this.layer=new s.default.Layer.SingleLayerKANQ(this.options.url,this.options),t.addLayer(this.layer)}},{key:"remove",value:function(){return this.mapView?(this.layer&&(this.layer.remove(),this.layer=null),this.mapView):null}},{key:"moveToCenter",value:function(){this.mapView&&this.mapView.panTo(this.getBounds().getCenter())}},{key:"flyToBounds",value:function(){this.mapView&&this.mapView.flyToBounds(this.getBounds())}},{key:"getBounds",value:function(){if(!this.root.fullExtent84)return null;var e=this.root.fullExtent84,t=a.default.latLng(e.ymin84,e.xmin84),n=a.default.latLng(e.ymax84,e.xmax84);return a.default.latLngBounds(t,n)}},{key:"getLayerInfos",value:function(){return this.layerInfos}},{key:"initServiceInfo",value:(r=l(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.Builder.RenderKANQ.getServiceInfoRoot(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return this.allTitle=n.mapName,this.layerInfos=s.default.Builder.RenderKANQ.getLayerInfos(n),this.root=n,e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}],[{key:"getServiceInfoRoot",value:(n=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.Common.NetworkTools.httpGetAsync(t+"?f=json");case 2:n=e.sent,r=null;try{r=JSON.parse(n)}catch(e){console.log(e.message)}return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getLayerInfos",value:function(e){return e?e.layers:[]}},{key:"getBoundingBox",value:function(e){if(!e.rect84)return null;var t=e.rect84.split(","),n=a.default.latLng(t[1],t[0]),r=a.default.latLng(t[3],t[2]);return a.default.latLngBounds(n,r)}}]),t}();n.default=i},{"../kq":729,leaflet:473}],530:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=i(e("leaflet")),s=i(e("./RenderShape")),l=i(e("../kq"));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.defaultOptions=a.default.extend({},r.defaultOptions,{renderType:"basic",lineColor:"#4CC8A3",lineStyle:l.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:2,lineOpacity:1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),r(i,[{key:"setOptions",value:function(e){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,e)}},{key:"_render",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_render",this).call(this),console.log("RenderLineBasic _render!")}},{key:"getStyle",value:function(){if(this.options){var e=this.options;return{color:e.lineColor,dashArray:s.default._lineStyleToDashArray(e.lineStyle,e.lineWidth),weight:e.lineWidth,opacity:e.lineOpacity}}}}]),i}();n.default=u},{"../kq":729,"./RenderShape":540,leaflet:473}],531:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=i(e("../kq")),u=i(e("./RenderShape"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function s(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,n)),i=r.geojsonObjectSectionFields(),o=Object.keys(i)[0],a=l.default.Common.CommonValues.classBreaksMethod.classBreaks_equidistant;return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"section",thematicField:o,sectionMethod:a,sectionCount:6,colorIndex:0,thematicColors:u.default.getThematicFieldColorsSection(e,o,0,a,6),lineStyle:l.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:2,lineOpacity:1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,u.default),r(s,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(e){return{color:this._sectionFieldColor(this.options.thematicColors,e.properties[this.options.thematicField]),weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:u.default._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),s}();n.default=o},{"../kq":729,"./RenderShape":540}],532:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=i(e("../kq")),l=i(e("./RenderShape"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n)),i=r.geojsonObjectFields(),o=Object.keys(i)[0];return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"single",thematicField:o,colorIndex:0,thematicColors:l.default.getThematicFieldColorsSingle(e,o,0),lineStyle:s.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:2,lineOpacity:1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.default),r(a,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(e){return{color:this.options.thematicColors.get(e.properties[this.options.thematicField]),weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:l.default._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),a}();n.default=o},{"../kq":729,"./RenderShape":540}],533:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("leaflet")),a=i(e("./RenderShape_Point"));i(e("../kq"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.defaultOptions=o.default.extend({},r.defaultOptions,{renderType:"basic",pointSymbolType:"vector",vectorInfo:{fillColor:"#ff0000",fontSize:"12px",fillOpacity:.9,strokeColor:"#ffffff",strokeWidth:1,strokeOpacity:1,name:"1-1",unicode:"&#xe601",className:"iconfont"},imageInfo:{width:50,height:50,url:"url(./images/point_images/IMAGE2.png)",radius:.5}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),r(i,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(){}},{key:"render",value:function(){}}]),i}();n.default=s},{"../kq":729,"./RenderShape_Point":541,leaflet:473}],534:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("../kq")),a=i(e("./RenderShape_Point"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.defaultOptions={renderType:"heatmap",colorIndex:0,radius:5,weightField:"",filter:"",gradient:o.default.Common.CommonValues.heatmapColorRamp[0]},r.pane=t,r.options={},r.mapGeoJSON=null,r.mapView=null,r.geojson_obj=e,r.currFilter="",r.currWeightField="",r.heatmapLayer=null,r.data=[],r.heatmapConfig={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),r(i,[{key:"setOptions",value:function(e){var t=this;t.options=L.extend({},t.defaultOptions,t.options,e),!t.currFilter||!t.currWeightField||t.currFilter&&t.currFilter!==t.options.filter||t.currWeightField&&t.currWeightField!==t.options.weightField?(t.currFilter=t.options.filter,t.currWeightField=t.options.weightField,t._readGeoJSON(!0)):t._readGeoJSON(!1)}},{key:"_readGeoJSON",value:function(e){this.mapView&&(e&&(this.data=[]),this.mapGeoJSON&&delete this.mapGeoJSON,this.mapGeoJSON=new o.default.Map.MapGeoJSON(this.geojson_obj,{onEachFeature:L.Util.bind(this.onEachFeature,this),filter:L.Util.bind(this.onFilter,this),isAddToDraw:!1}),this.heatmapConfig={radius:this.options.radius,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"value",gradient:this.options.gradient,pane:this.pane},this.heatmapLayer&&(this.heatmapLayer.remove(),delete this.heatmapLayer,this.mapView._getMap().off("click",this._onHeatmapLayerClick)),this.heatmapLayer=new o.default.Layer.LayerHeatmap(this.heatmapConfig),this.mapView._getMap().on("click",this._onHeatmapLayerClick,this),this.heatmapLayer.setData(this.data),this.heatmapLayer.addToMapView(this.mapView))}},{key:"_onHeatmapLayerClick",value:function(e){console.log("_onHeatmapLayerClick");for(var t=this.mapView._getMap(),n=t.latLngToLayerPoint(e.latlng),r=0;r<this.data.length;r++){var i=t.latLngToLayerPoint(this.data[r]);if(Math.abs(i.x-n.x)<5&&Math.abs(i.y-n.y)<5)return void o.default.Builder.BuilderCommon.createPopup(this.mapView._getMap(),this.data[r].feature,e.latlng)}}},{key:"getStyle",value:function(e){return{}}},{key:"addToMapView",value:function(e){e&&(this.mapView=e,this._readGeoJSON(!1))}},{key:"remove",value:function(){return this.mapGeoJSON&&(delete this.mapGeoJSON,this.data=[]),this.heatmapLayer&&this.heatmapLayer.remove(),this.mapView}},{key:"onFilter",value:function(e){if(!this.currFilter)return!0;var t=this.currFilter;for(var n in e.properties)t=t.replace(RegExp(n,"g"),"feature.properties."+n);return new Function("feature","return "+t)(e)}},{key:"onEachFeature",value:function(e,t){var n={lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],value:e.properties[this.options.currWeightField],feature:e};this.data.push(n)}},{key:"moveToCenter",value:function(){this.mapGeoJSON&&this.mapView&&this.mapView.panTo(this.mapGeoJSON.getBounds().getCenter())}},{key:"flyToBounds",value:function(){if(this.mapGeoJSON&&this.mapView){var e=this.mapGeoJSON.getBounds();this.geoFitBounds(e)}}},{key:"geoFitBounds",value:function(e){var t=this.mapView._getMap(),n=L.latLngBounds(e),r=t.getBoundsZoom(n,!1),i=n.getCenter();t.setView(i,r)}}]),i}();n.default=s},{"../kq":729,"./RenderShape_Point":541}],535:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=o(e("../kq")),u=o(e("./RenderShape")),i=o(e("./RenderShape_Point"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function s(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,n)),i=r.geojsonObjectSectionFields(),o=Object.keys(i)[0],a=l.default.Common.CommonValues.classBreaksMethod.classBreaks_equidistant;return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"section",pointSymbolType:"vector",vectorInfo:{thematicField:o,sectionMethod:a,sectionCount:6,colorIndex:0,thematicColors:u.default.getThematicFieldColorsSection(e,o,0,a,6),fillColor:"#0000FF",fontSize:"5px",fillOpacity:.9,strokeColor:"#FFFFFF",strokeWidth:1,strokeOpacity:1,name:"1-1",unicode:"&#xe601",className:"iconfont"}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i.default),r(s,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOptions",this).call(this,e)}},{key:"updateFillColor",value:function(e){var t=this.options.vectorInfo;t.fillColor=this._sectionFieldColor(t.thematicColors,e.properties[t.thematicField])}},{key:"getStyle",value:function(e){return{fillColor:this._sectionFieldColor(this.options.thematicColors,e.properties[this.options.thematicField]),fontSize:this.options.fontSize,pointOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity}}}]),s}();n.default=a},{"../kq":729,"./RenderShape":540,"./RenderShape_Point":541}],536:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=(o(e("../kq")),o(e("./RenderShape"))),i=o(e("./RenderShape_Point"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n)),i=r.geojsonObjectFields(),o=Object.keys(i)[0];return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"single",pointSymbolType:"vector",vectorInfo:{thematicField:o,thematicColors:s.default.getThematicFieldColorsSingle(e,o,0),colorIndex:0,fillColor:"#00ff00",fontSize:"5px",fillOpacity:.9,strokeColor:"#FF00FF",strokeWidth:1,strokeOpacity:1,name:"1-1",unicode:"&#xe601",className:"iconfont"}}),r.defaultOptions.pointSymbolType="vector",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default),r(a,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(e){return{}}},{key:"updateFillColor",value:function(e){var t=this.options.vectorInfo;t.fillColor=t.thematicColors.get(e.properties[t.thematicField])}}]),a}();n.default=a},{"../kq":729,"./RenderShape":540,"./RenderShape_Point":541}],537:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("leaflet")),a=i(e("./RenderShape"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.defaultOptions=o.default.extend({},r.defaultOptions,{renderType:"basic",fillColor:"#8D7AC0",fillOpacity:.9,lineColor:"#FFFFFF",lineStyle:KQ.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:1,lineOpacity:1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),r(i,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(){var e=this.options;return{fillColor:e.fillColor,fillOpacity:e.fillOpacity,color:e.lineColor,weight:e.lineWidth,opacity:e.lineOpacity,dashArray:a.default._lineStyleToDashArray(e.lineStyle,e.lineWidth)}}}]),i}();n.default=s},{"./RenderShape":540,leaflet:473}],538:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=i(e("./RenderShape")),u=i(e("../kq"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function s(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,n)),i=r.geojsonObjectSectionFields(),o=Object.keys(i)[0],a=u.default.Common.CommonValues.classBreaksMethod.classBreaks_equidistant;return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"section",thematicField:o,sectionMethod:a,sectionCount:6,colorIndex:0,fillOpacity:.9,thematicColors:l.default.getThematicFieldColorsSection(e,o,0,a,6),lineColor:"#FFFFFF",lineStyle:u.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:1,lineOpacity:1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,l.default),r(s,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(e){return{fillColor:this._sectionFieldColor(this.options.thematicColors,e.properties[this.options.thematicField]),fillOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:l.default._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),s}();n.default=o},{"../kq":729,"./RenderShape":540}],539:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./RenderShape"),s=(r=o)&&r.__esModule?r:{default:r};var a=function(e){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n)),i=r.geojsonObjectFields(),o=Object.keys(i)[0];return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"single",thematicField:o,colorIndex:0,thematicColors:s.default.getThematicFieldColorsSingle(e,o,0),fillOpacity:.9,lineColor:"#FFFFFF",lineStyle:KQ.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:1,lineOpacity:1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.default),i(a,[{key:"setOptions",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setOptions",this).call(this,e)}},{key:"getStyle",value:function(e){return{fillColor:this.options.thematicColors.get(e.properties[this.options.thematicField]),fillOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:s.default._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),a}();n.default=a},{"./RenderShape":540}],540:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),d=r(e("leaflet")),p=r(e("../kq")),o=r(e("../common/CommonValues"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.defaultOptions={filter:"",labelField:"",labelColor:"#000000",labelFontName:p.default.Common.CommonValues.labelFontName.yaHei,labelSize:"12",labelWeight:"normal",labelStyle:"normal",collisionFlg:!0,labelBorderColor:"white",labelBorderWidth:"2.5",labelPosition:"mid",labelMarkerPadding:"4",labelMarkerWidth:0,labelMarkerHeight:0},this.pane=t,this.options={},this.mapGeoJSON=null,this.labelLayers=d.default.featureGroup(),this.mapView=null,this.limitedRender=p.default.Common.CommonTools._debounce(this._render,200),this.geojson_obj=e,this.currFilter="",this.currLabelOptions="",this.labelTextCollision=new d.default.LabelTextCollision({pane:n}),this.ciLayer=null}return i(r,[{key:"setOptions",value:function(e){var t=this;t.options=d.default.extend({},t.defaultOptions,t.options,e),t.labelTextCollision._setOptions({collisionFlg:t.options.collisionFlg,labelField:t.options.labelField,fontName:t.options.labelFontName,fontSize:t.options.labelSize,fontWeight:t.options.labelWeight,fontStyle:t.options.labelStyle,textColor:t.options.labelColor,borderColor:t.options.labelBorderColor,borderWidth:t.options.labelBorderWidth}),t.limitedRender()}},{key:"_renderLabel",value:function(e){var t=this.labelTextCollision.getString();if(this.currFilter!=this.options.filter||this.currLabelOptions!=t||e){this.currFilter=this.options.filter,this.currLabelOptions=this.labelTextCollision.getString(),this.labelLayers.clearLayers();var n=this.mapView._getMap();""!=this.labelTextCollision.options.labelField?this.addToMapView(this.mapView):(this.labelTextCollision.removeTextCanvas(),this.labelTextCollision.remove()),n.panTo(n.getCenter())}}},{key:"_render",value:function(){this.mapView&&this.mapGeoJSON&&(console.log("RenderShape _render!"),this._renderLabel(!1),this.mapGeoJSON.setStyle(d.default.bind(this.getStyle,this)))}},{key:"addToMapView",value:function(e){this.mapView=e;var t=this.mapView._getMap();t.hasLayer(this.mapGeoJSON)&&(t.removeLayer(this.mapGeoJSON),delete this.mapGeoJSON);var n=[];turf.flattenEach(this.geojson_obj,function(e){n.push(e)}),this.geojson_obj.features=n,this.mapGeoJSON=new p.default.Map.MapGeoJSON(this.geojson_obj,{onEachFeature:d.default.Util.bind(this.onEachFeature,this),filter:d.default.Util.bind(this.onFilter,this),style:d.default.Util.bind(this.getStyle,this),isAddToDraw:!1,pane:this.pane}),t.addLayer(this.mapGeoJSON),t.hasLayer(this.labelLayers)||(this.labelLayers.addTo(t),t.on("zoomend",this._endZoom,this)),this.limitedRender()}},{key:"_readGeoJSON",value:function(e){if(e){this.data=[];var t=this.mapView._getMap();t.hasLayer(this.mapGeoJSON)&&(t.removeLayer(this.mapGeoJSON),delete this.mapGeoJSON)}this.mapGeoJSON=new p.default.Map.MapGeoJSON(this.geojson_obj,{onEachFeature:d.default.Util.bind(this.onEachFeature,this),filter:d.default.Util.bind(this.onFilter,this),style:d.default.Util.bind(this.getStyle,this),isAddToDraw:!1,pane:this.pane}),this.mapView&&(this.heatmapConfig={radius:this.options.radius,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!1,latField:"lat",lngField:"lng",valueField:"value",gradient:this.options.gradient},this.heatmapLayer&&(this.heatmapLayer.remove(),delete this.heatmapLayer,this.mapView._getMap().off("click",this._onHeatmapLayerClick)),this.heatmapLayer=new p.default.Layer.LayerHeatmap(this.heatmapConfig),this.mapView._getMap().on("click",this._onHeatmapLayerClick,this),this.heatmapLayer.setData(this.data),this.heatmapLayer.addToMapView(this.mapView))}},{key:"remove",value:function(){if(this.ciLayer&&(this.ciLayer.remove(),this.ciLayer.clearLayers()),!this.mapView)return null;var e=this.mapView._getMap();return e.hasLayer(this.mapGeoJSON)&&(e.removeLayer(this.mapGeoJSON),delete this.mapGeoJSON),this.mapGeoJSON&&(this.mapGeoJSON.remove(),delete this.mapGeoJSON),this.labelLayers.remove(),this.labelLayers.clearLayers(),e.off("zoomend",this._endZoom,this),this.mapView.panTo(this.mapView.getCenter()),this.mapView}},{key:"moveToCenter",value:function(){this.mapGeoJSON&&this.mapView&&this.mapView.panTo(this.getBounds().getCenter())}},{key:"flyToBounds",value:function(){this.mapGeoJSON&&this.mapView&&this.mapView.flyToBounds(this.getBounds())}},{key:"setBounds",value:function(e){this.bounds=e}},{key:"getBounds",value:function(){return this.bounds?this.bounds:this.mapGeoJSON.getBounds()}},{key:"getStyle",value:function(){}},{key:"getStyleColor",value:function(e){var t,n,r="#ffffff",i=(t=this.options.thematicColors,"string"===(n=Object.prototype.toString.call(t).match(/^\[object (.*)\]$/)[1].toLowerCase())&&"object"===(void 0===t?"undefined":a(t))?"object":null===t?"null":void 0===t?"undefined":n);try{if("array"==i){var o=this.options.thematicColors;r=new Map(o.map(function(e){return[e[0],e[1]]})).get(e.properties[this.options.thematicField])}else r="map"==i?this.options.thematicColors.get(e.properties[this.options.thematicField]):function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.set(e[s][0],e[s][1])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}(this.options.thematicColors).get(e.properties[this.options.thematicField])}catch(e){console.log("options: ",this.options),console.log("e: ",e)}return r}},{key:"_sectionFieldColor",value:function(e,t){for(var n=e.colors,r=e.breaksData,i=0;i<r.length-1;i++)if(t>=r[i]&&t<r[i+1])return n[i];return n[n.length-1]}},{key:"onFilter",value:function(e){if(!this.currFilter)return!0;var t=this.currFilter;for(var n in t=t.replaceAll("([^=><])=([^=><])","=="),e.properties)t=t.replace(RegExp(n,"ig"),"feature.properties."+n);return t===this.currFilter||new Function("feature","return "+t)(e)}},{key:"onEachFeature",value:function(e,t){if(this.mapView)for(var n=turf.flatten(e),r=0;r<n.features.length;r++){var i=n.features[r],o=i.properties[this.options.labelField];if(null!=o){var a=turf.pointOnFeature(i),s=f(a.geometry.coordinates,2),l=s[0],u=s[1],c=d.default.latLng(u,l),h=d.default.circleMarker(c,{weight:0,fill:!1,text:o,renderer:this.labelTextCollision});this.labelLayers.addLayer(h)}}p.default.Builder.BuilderCommon.bindPopup(e,t)}},{key:"geojsonObjectFields",value:function(){var e={};return this.geojson_obj&&this.geojson_obj.features&&0<this.geojson_obj.features.length&&(e=this.geojson_obj.features[0].properties),e}},{key:"geojsonObjectSectionFields",value:function(){var e={},t=this.geojsonObjectFields();for(var n in t){"number"==typeof this.geojson_obj.features[0].properties[n]&&(e[n]=!0)}return e}},{key:"getGeojsonObject",value:function(){return this.geojson_obj}},{key:"_endZoom",value:function(){console.log("_endZoom")}}],[{key:"getThematicFieldColorsSingle",value:function(e,t,n){var r=new Map,i=[],o=e.features;if(!o||0===o.length)return r;o.forEach(function(e){i.push(e.properties[t])}),"number"==typeof(i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(i))))[0]?i.sort(function(e,t){return e-t}):"string"==typeof i[0]&&i.sort();for(var a=this._scaleColors(p.default.Common.CommonValues.singleColorRamp[n],i.length),s=0;s<i.length;++s)r.set(i[s],a[s]);return r}},{key:"getThematicFieldColorsSection",value:function(e,t,n,r,i){var o=[],a=e.features;if(!a||0===a.length)return{breaksData:[],colors:[]};a.forEach(function(e){o.push(e.properties[t])});var s=this._breaksData(o,r,i);return{breaksData:s,colors:this._scaleColors(p.default.Common.CommonValues.singleColorRamp[n],s.length-1)}}},{key:"_lineStyleToDashArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=p.default.Common.CommonValues.lineStyle,r=null;switch(e){case n.lineStyle_simple_line:return null;case n.lineStyle_dot_line:r=[2,1];break;case n.lineStyle_short_dash_line:r=[8,4];break;case n.lineStyle_short_dash_dot_line:r=[6,3,2,3];break;case n.lineStyle_long_dash_line:r=[11,5];break;case n.lineStyle_long_dash_dot_line:r=[11,5,2,5]}return r.map(function(e){return e*t})}},{key:"_scaleColors",value:function(e,t){return chroma.scale(e).colors(t)}},{key:"_breaksData",value:function(e,t,n){switch(t){case o.default.classBreaksMethod.classBreaks_equidistant:t="e";break;case o.default.classBreaksMethod.classBreaks_quantile:t="q";break;case o.default.classBreaksMethod.classBreaks_logarithmic:t="l";break;case o.default.classBreaksMethod.classBreaks_k_means:t="k"}return chroma.limits(e,t,n)}}]),r}();n.default=s},{"../common/CommonValues":606,"../kq":729,leaflet:473}],541:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=i(e("leaflet")),o=i(e("./RenderShape")),l=i(e("../kq"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.defaultOptions.labelPosition="down",r.defaultOptions.labelMarkerPadding="4",r.defaultOptions.labelMarkerWidth=0,r.defaultOptions.labelMarkerHeight=0,r.ciLayer=s.default.canvasIconLayer({pane:r.pane}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,[{key:"setOptions",value:function(e){var t=this;t.options=s.default.extend({},t.defaultOptions,t.options,e);var n={collisionFlg:t.options.collisionFlg,labelField:t.options.labelField,fontName:t.options.labelFontName,fontSize:t.options.labelSize,fontWeight:t.options.labelWeight,fontStyle:t.options.labelStyle,textColor:t.options.labelColor,borderColor:t.options.labelBorderColor,borderWidth:t.options.labelBorderWidth,position:t.options.labelPosition,markerPadding:t.options.labelMarkerPadding},r=this.options.vectorInfo.fontSize.replace("px","");r=Number(r)+2*this.options.vectorInfo.strokeWidth,n.markerWidth=r,n.markerHeight=r,t.labelTextCollision._setOptions(n),t.limitedRender()}},{key:"_render",value:function(){this.mapView&&(console.log("RenderShape_Point _render!"),this._renderLabel(!1),this.ciLayer.clearLayers(),this.mapGeoJSON&&(this.mapGeoJSON.remove(),delete this.mapGeoJSON),this.mapGeoJSON=new l.default.Map.MapGeoJSON(this.geojson_obj,{pointToLayer:s.default.Util.bind(this.pointToLayer,this),onEachFeature:s.default.Util.bind(this.onEachFeature,this),filter:s.default.Util.bind(this.onFilter,this),style:s.default.Util.bind(this.getStyle,this),isAddToDraw:!1,pane:this.pane}))}},{key:"addToMapView",value:function(e){console.log("RenderShape_Point addToMapView!");this.mapView=e;var t=this.mapView._getMap();this.ciLayer.addTo(t),t.hasLayer(this.labelLayers)||(this.labelLayers.addTo(t),t.on("zoomend",this._endZoom,this)),this._render()}},{key:"pointToLayer",value:function(e,t){var n=void 0;if("vector"===this.options.pointSymbolType){this.updateFillColor(e);var r=s.default.extend({},this.options.vectorInfo);n=new l.default.Map.MapMarker(t,{extraIcon:r})}else if("image"===this.options.pointSymbolType){var i=this.options.imageInfo,o=[20*i.radius,20*i.radius];this.options.imageInfo.width=o[0],this.options.imageInfo.height=o[1];var a=s.default.icon({iconUrl:l.default.Builder.BuilderCommon.imageUrl(i.url),iconSize:o});n=new l.default.Map.MapMarker(t,{icon:a})}else n=s.default.marker(t);return this.ciLayer.addLayer(n),n}},{key:"moveToCenter",value:function(){var e=this;e.mapGeoJSON&&e.mapView&&setTimeout(function(){e.mapView.panTo(e.mapGeoJSON.getBounds().getCenter())},300)}},{key:"remove",value:function(){return this.mapView?(this.mapView._getMap().off("zoomend",this._endZoom,this),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"remove",this).call(this)):null}},{key:"updateFillColor",value:function(e){}}]),i}();n.default=a},{"../kq":729,"./RenderShape":540,leaflet:473}],542:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=r(e("leaflet")),a=r(e("../kq"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var c={layers:"",styles:"",format:"image/png",transparent:!0,version:"1.1.1",crs:null,uppercase:!1},i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.pane=e,this.options={},this.mapView=null}var n,r,i;return o(t,[{key:"setOptions",value:(i=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=l.default.extend({},c,{pane:this.pane},t),e.next=3,this.initServiceInfo(t.url);case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"addToMapView",value:function(e){this.mapView=e;var t=this.mapView._getMap();this.layer=l.default.tileLayer.wms(this.options.url,this.options),t.addLayer(this.layer)}},{key:"remove",value:function(){return this.mapView?(this.layer&&(this.layer.remove(),this.layer=null),this.mapView):null}},{key:"moveToCenter",value:function(){this.mapView&&this.mapView.panTo(this.getBounds().getCenter())}},{key:"flyToBounds",value:function(){this.mapView&&this.mapView.flyToBounds(this.getBounds())}},{key:"getBounds",value:function(){return this.allBoundingBox}},{key:"getLayerInfos",value:function(){return this.layerInfos}},{key:"initServiceInfo",value:(r=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Builder.RenderWMS.getServiceInfoRoot(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return this.allBoundingBox=a.default.Builder.RenderWMS.getBoundingBox(n.Capability.Layer),this.allTitle=n.Capability.Layer.Title,this.layerInfos=a.default.Builder.RenderWMS.getLayerInfos(n),this.root=n,e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}],[{key:"getServiceInfoRoot",value:(n=s(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(t);case 2:return n=e.sent,r=new X2JS,i=r.xml_str2json(n),o=null,i&&((o=i.WMS_Capabilities)||(o=i.WMT_MS_Capabilities)),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getLayerInfos",value:function(e){if(!e)return[];var t=e.Capability.Layer;t.length||(t=[t]);for(var n=[],r=0;r<t.length;r++){var i=t[r];i.Layer.Layer&&(n=[].concat(u(n),u(i.Layer.Layer)))}return t=[].concat(u(t),u(n))}},{key:"getBoundingBox",value:function(e){for(var t=[].concat(u(e.BoundingBox)),n=0;n<t.length;n++)if("CRS:84"===t[n]._CRS){var r=l.default.latLng(t[n]._miny,t[n]._minx),i=l.default.latLng(t[n]._maxy,t[n]._maxx);return l.default.latLngBounds(r,i)}for(var o=0;o<t.length;o++)if("EPSG:4326"===t[o]._SRS){var a=l.default.latLng(t[o]._miny,t[o]._minx),s=l.default.latLng(t[o]._maxy,t[o]._maxx);return l.default.latLngBounds(a,s)}return null}}]),t}();n.default=i},{"../kq":729,leaflet:473}],543:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=r(e("leaflet")),a=r(e("../kq"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var u={layer:"",style:"default",tilematrixSet:"default",format:"png"},i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.pane=e,this.options={},this.mapView=null}var n,r,i;return o(t,[{key:"setOptions",value:(i=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=l.default.extend({},u,{pane:this.pane},t),e.next=3,this.initServiceInfo(t.url);case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"addToMapView",value:function(e){this.mapView=e;var t=this.mapView._getMap();this.layer=new a.default.Layer.LayerWMTS(this.options.url,this.options),t.addLayer(this.layer)}},{key:"remove",value:function(){return this.mapView?(this.layer&&(this.layer.remove(),this.layer=null),this.mapView):null}},{key:"moveToCenter",value:function(){this.mapView&&this.mapView.panTo(this.getBounds().getCenter())}},{key:"flyToBounds",value:function(){this.mapView&&this.mapView.flyToBounds(this.getBounds())}},{key:"getBounds",value:function(){var e=a.default.Builder.RenderWMTS.getLayerInfos(this.root);return a.default.Builder.RenderWMTS.getBoundingBox(e[0])}},{key:"getLayerInfos",value:function(){return this.layerInfos.Layer?this.layerInfos.Layer:this.layerInfos}},{key:"initServiceInfo",value:(r=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Builder.RenderWMTS.getServiceInfoRoot(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return this.allTitle=n.ServiceIdentification.Title.__text,this.layerInfos=a.default.Builder.RenderWMTS.getLayerInfos(n),this.root=n,e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}],[{key:"getServiceInfoRoot",value:(n=s(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(t);case 2:return n=e.sent,r=new X2JS,i=r.xml_str2json(n),o=null,i&&(o=i.Capabilities),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getLayerInfos",value:function(e){return e?e.Contents.Layer:[]}},{key:"getBoundingBox",value:function(e){if(!e.WGS84BoundingBox)return null;var t=e.WGS84BoundingBox,n=t.LowerCorner.__text,r=t.UpperCorner.__text,i=n.split(" "),o=r.split(" "),a=l.default.latLng(i[1],i[0]),s=l.default.latLng(o[1],o[0]);return l.default.latLngBounds(a,s)}}]),t}();n.default=i},{"../kq":729,leaflet:473}],544:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../servicetool/ServiceToolAnalysisServerDifference");(r=o)&&r.__esModule;function m(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(c){var h=KQ.Builder.BuilderProject.getInstance(),f=h.analysis_controls[c],d=h.analysis_result[c]=null,p=h.mapView;f.get(c+" run").click(m(regeneratorRuntime.mark(function e(){var o,t,n,a,r,i,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(p._getMap(),"pin","meter"),e.prev=1,d&&d.remove(),o=f.get(c+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(o.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},a=f.get(c+" dest-layers"),r=KQ.Builder.BuilderLayerDatas.getInstance().getData(a.value()),i=KQ.Common.CommonTools.getGeomFromFeatureCollection(r),s=f.get(c+" tolerance"),l=void 0,l=null===s.value()?1e-8:s.value(),u=new KQ.ServiceTool.ServiceToolAnalysisServerDifference,e.next=15,u.getDifferenceResult({datasource:encodeURIComponent(JSON.stringify(n)),geometry:JSON.stringify(i),tolerance:l}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=o.dataSource.options.data[o.selectedIndex].name,n=a.dataSource.options.data[a.selectedIndex].name,r=f.get(c+" resultLayerName");""!==r.val()?r.val():r.val(t+" 和 "+n+" 的差集");var i=JSON.parse(e).result;(d=new KQ.Map.MapGeoJSON(i)).setStyle({fillColor:"red",color:"red"}),p.getPane("overlayPane").style.zIndex=4e6,(h.analysis_result[c]=d).addToMapView(p),p._getMap().flyToBounds(d.getBounds()),refreshButtonState(c,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),f.get(c+" saveLayer").bind("click",m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(c,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=f.get(c+" resultLayerName").val(),e.next=4,saveLayer(t,d);case 4:h.analysis_result[c]=null;case 5:case"end":return e.stop()}},e,this)}))),f.get(c+" cancel").bind("click",function(){refreshButtonState(c,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),d.remove(),h.analysis_result[c]=null}),f.get(c+" result").val(JSON.stringify(i)),copyResult(c)}}).catch(function(e){console.log(e)});case 15:return e.prev=15,KQ.Control.Waiting.close(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,,15,18]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../../servicetool/ServiceToolAnalysisServerDifference":802}],545:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(d){var p=KQ.Builder.BuilderProject.getInstance(),m=p.analysis_controls[d],g=p.analysis_result[d]=null,y=p.mapView;m.get(d+" run").click(_(regeneratorRuntime.mark(function e(){var c,t,n,h,r,i,f,o,a,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(y._getMap(),"pin","meter"),e.prev=1,g&&g.remove(),c=m.get(d+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(c.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},h=m.get(d+" difference-layers"),r=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(h.value()).options.dataSource,i={type:"dataservice",url:r.url+"/proc",datasourceid:r.datasourceId,featureclassname:r.featureClassName},f=m.get(d+" dest-layers"),o=KQ.Builder.BuilderLayerDatas.getInstance().getData(f.value()),a=KQ.Common.CommonTools.getGeomFromFeatureCollection(o),s=m.get(d+" tolerance"),l=void 0,l=null===s.value()?1e-8:s.value(),u=new KQ.ServiceTool.ServiceToolAnalysisServerDifferenceext,e.next=18,u.getDifferenceextResult({datasource:encodeURIComponent(JSON.stringify(n)),datasource2:encodeURIComponent(JSON.stringify(i)),geometry:JSON.stringify(a),tolerance:l}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=c.dataSource.options.data[c.selectedIndex].name,n=h.dataSource.options.data[h.selectedIndex].name,r=f.dataSource.options.data[f.selectedIndex].name,i=m.get(d+" resultLayerName");""!==i.val()?i.val():i.val(t+"、"+n+" 和 "+r+" 的差集");for(var o=JSON.parse(e).result,a=o.features,s=[],l=0;l<a.length;++l){var u=a[l];s.push(u.difference)}(g=new KQ.Map.MapGeoJSON({type:"FeatureCollection",features:s})).setStyle({fillColor:"red",color:"red"}),y.getPane("overlayPane").style.zIndex=4e6,(p.analysis_result[d]=g).addToMapView(y),y._getMap().flyToBounds(g.getBounds()),refreshButtonState(d,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),m.get(d+" saveLayer").bind("click",_(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(d,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=m.get(d+" resultLayerName").val(),e.next=4,saveLayer(t,g);case 4:p.analysis_result[d]=null;case 5:case"end":return e.stop()}},e,this)}))),m.get(d+" cancel").bind("click",function(){refreshButtonState(d,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),g.remove(),p.analysis_result[d]=null}),m.get(d+" result").val(JSON.stringify(o)),copyResult(d)}}).catch(function(e){console.log(e)});case 18:return e.prev=18,KQ.Control.Waiting.close(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[1,,18,21]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],546:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(g){var e=KQ.Builder.BuilderProject.getInstance(),y=e.analysis_controls[g],o=e.analysis_result[g]=null,a=e.mapView;y.get(g+" run").click(_(regeneratorRuntime.mark(function e(){var m,t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(a._getMap(),"pin","meter"),e.prev=1,o&&o.remove(),m=y.get(g+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(m.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},r=$("#sql-condition").val(),i=new KQ.ServiceTool.ServiceToolAnalysisServerQuery,e.next=10,i.getQueryResult({datasource:encodeURIComponent(JSON.stringify(n)),where:r}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);for(var t=[],n=JSON.parse(e).result,r=n.features,i=0;i<r.length;i++){var o=r[i],a=o.geometry,s=o.properties;s.geometry=a,t.push(s)}for(var l=[],u=[],c=n.fields,h=0;h<c.length;++h){var f=c[h].name,d=c[h].aliasName||f;l.push(f),u.push(d)}var p=[{label:m.dataSource.options.data[m.selectedIndex].name,fields:l,titles:u,records:t}];KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(p,{title:"SQL查询"}),refreshButtonState(g,{returnResultButtonOpen:"returnResultButtonOpen"}),y.get(g+" returnResultButton").bind("click",_(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(p,{title:"SQL查询"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 10:return e.prev=10,KQ.Control.Waiting.close(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,,10,13]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],547:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function u(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(o){var e=KQ.Builder.BuilderProject.getInstance(),a=e.analysis_controls[o],s=e.analysis_result[o]=null,l=e.mapView;a.get(o+" run").click(u(regeneratorRuntime.mark(function e(){var r,t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(l._getMap(),"pin","meter"),e.prev=1,s&&s.remove(),r=a.get(o+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(r.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},i=new KQ.ServiceTool.ServiceToolAnalysisServerFields,e.next=9,i.getFieldsResult({datasource:encodeURIComponent(JSON.stringify(n))}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=JSON.parse(e).result.fields,n=[{label:r.dataSource.options.data[r.selectedIndex].name,fields:["name","aliasname","type","length","precision","scale"],titles:["字段名","字段别名","字段类型","字段长度","数值精度","有效位数"],records:t}];KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(n,{title:"表字段查询"}),refreshButtonState(o,{returnResultButtonOpen:"returnResultButtonOpen"}),a.get(o+" returnResultButton").bind("click",u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(n,{title:"表字段查询"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 9:return e.prev=9,KQ.Control.Waiting.close(),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[1,,9,12]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],548:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../servicetool/ServiceToolAnalysisServerOverlap");(r=o)&&r.__esModule;function C(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(b){var w=KQ.Builder.BuilderProject.getInstance(),x=w.analysis_controls[b],k=w.analysis_result[b]=null,L=w.mapView;x.get(b+" run").click(C(regeneratorRuntime.mark(function e(){var _,t,n,v,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(L._getMap(),"pin","meter"),e.prev=1,k&&k.remove(),_=x.get(b+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(_.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},v=x.get(b+" dest-layers"),r=KQ.Builder.BuilderLayerDatas.getInstance().getData(v.value()),i=KQ.Common.CommonTools.getGeomFromFeatureCollection(r),o=x.get(b+" tolerance"),a=void 0,a=null===o.value()?1e-8:o.value(),s=new KQ.ServiceTool.ServiceToolAnalysisServerOverlap,e.next=15,s.getOverlapResult({datasource:encodeURIComponent(JSON.stringify(n)),geometry:JSON.stringify(i),tolerance:a}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=_.dataSource.options.data[_.selectedIndex].name,n=v.dataSource.options.data[v.selectedIndex].name,r=x.get(b+" resultLayerName");""!==r.val()?r.val():r.val(t+" 和 "+n+" 的交集");var i=JSON.parse(e).result;(k=new KQ.Map.MapGeoJSON(i)).setStyle({fillColor:"red",color:"red"}),L.getPane("overlayPane").style.zIndex=4e6,(w.analysis_result[b]=k).addToMapView(L),L._getMap().flyToBounds(k.getBounds()),refreshButtonState(b,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),x.get(b+" saveLayer").bind("click",C(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(b,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=x.get(b+" resultLayerName").val(),e.next=4,saveLayer(t,k);case 4:w.analysis_result[b]=null;case 5:case"end":return e.stop()}},e,this)}))),x.get(b+" cancel").bind("click",function(){refreshButtonState(b,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),k.remove(),w.analysis_result[b]=null});for(var o=[],a=i.features,s=0;s<a.length;s++){var l=a[s],u=l.geometry,c=l.properties;c.geometry=u,o.push(c)}for(var h=[],f=[],d=i.fields,p=0;p<d.length;++p){var m=d[p].name,g=d[p].aliasName||m;h.push(m),f.push(g)}var y=[{label:_.dataSource.options.data[_.selectedIndex].name,fields:h,titles:f,records:o}];KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(y,{title:"叠置分析"}),refreshButtonState(b,{returnResultButtonOpen:"returnResultButtonOpen"}),x.get(b+" returnResultButton").bind("click",C(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(y,{title:"叠置分析"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 15:return e.prev=15,KQ.Control.Waiting.close(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,,15,18]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../../servicetool/ServiceToolAnalysisServerOverlap":806}],549:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function v(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(d){var p=KQ.Builder.BuilderProject.getInstance(),m=p.analysis_controls[d],g=p.analysis_result[d]=null,y=p.mapView;m.get(d+" run").click(v(regeneratorRuntime.mark(function e(){var c,t,n,h,r,i,f,o,a,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(y._getMap(),"pin","meter"),e.prev=1,g&&g.remove(),c=m.get(d+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(c.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},h=m.get(d+" overlap-layers"),r=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(h.value()).options.dataSource,i={type:"dataservice",url:r.url+"/proc",datasourceid:r.datasourceId,featureclassname:r.featureClassName},f=m.get(d+" dest-layers"),o=KQ.Builder.BuilderLayerDatas.getInstance().getData(f.value()),a=KQ.Common.CommonTools.getGeomFromFeatureCollection(o),s=m.get(d+" tolerance"),l=void 0,l=null===s.value()?1e-8:s.value(),u=new KQ.ServiceTool.ServiceToolAnalysisServerOverlapext,e.next=18,u.getOverlapextResult({datasource:encodeURIComponent(JSON.stringify(n)),datasource2:encodeURIComponent(JSON.stringify(i)),geometry:JSON.stringify(a),tolerance:l}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=c.dataSource.options.data[c.selectedIndex].name,n=h.dataSource.options.data[h.selectedIndex].name,r=f.dataSource.options.data[f.selectedIndex].name,i=m.get(d+" resultLayerName");""!==i.val()?i.val():i.val(t+"、"+n+" 和 "+r+" 的交集");for(var o=JSON.parse(e).result,a=o.features,s=[],l=0;l<a.length;++l){var u=a[l];s.push.apply(s,_(u.overlaps))}JSON.stringify({type:"FeatureCollection",features:s}),(g=new KQ.Map.MapGeoJSON({type:"FeatureCollection",features:s})).setStyle({fillColor:"red",color:"red"}),y.getPane("overlayPane").style.zIndex=4e6,(p.analysis_result[d]=g).addToMapView(y),y._getMap().flyToBounds(g.getBounds()),refreshButtonState(d,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),m.get(d+" saveLayer").bind("click",v(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(d,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=m.get(d+" resultLayerName").val(),e.next=4,saveLayer(t,g);case 4:p.analysis_result[d]=null;case 5:case"end":return e.stop()}},e,this)}))),m.get(d+" cancel").bind("click",function(){refreshButtonState(d,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),g.remove(),p.analysis_result[d]=null}),m.get(d+" result").val(JSON.stringify(o)),copyResult(d)}}).catch(function(e){console.log(e)});case 18:return e.prev=18,KQ.Control.Waiting.close(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[1,,18,21]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],550:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(g){var e=KQ.Builder.BuilderProject.getInstance(),y=e.analysis_controls[g],u=e.analysis_result[g]=null,c=e.mapView;y.get(g+" run").click(_(regeneratorRuntime.mark(function e(){var m,t,n,r,i,o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(c._getMap(),"pin","meter"),e.prev=1,u&&u.remove(),m=y.get(g+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(m.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},r=y.get(g+" dest-layers"),i=KQ.Builder.BuilderLayerDatas.getInstance().getData(r.value()),o=KQ.Common.CommonTools.getGeomFromFeatureCollection(i),a=y.get(g+" tolerance"),s=void 0,s=null===a.value()?1e-8:a.value(),l=new KQ.ServiceTool.ServiceToolAnalysisServerQuery,e.next=15,l.getQueryResult({datasource:encodeURIComponent(JSON.stringify(n)),geometry:JSON.stringify(o),tolerance:s}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);for(var t=JSON.parse(e).result,n=[],r=t.features,i=0;i<r.length;i++){var o=r[i],a=o.geometry,s=o.properties;s.geometry=a,n.push(s)}for(var l=[],u=[],c=t.fields,h=0;h<c.length;++h){var f=c[h].name,d=c[h].aliasName||f;l.push(f),u.push(d)}var p=[{label:m.dataSource.options.data[m.selectedIndex].name,fields:l,titles:u,records:n}];KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(p,{title:"空间查询"}),refreshButtonState(g,{returnResultButtonOpen:"returnResultButtonOpen"}),y.get(g+" returnResultButton").bind("click",_(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(p,{title:"空间查询"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 15:return e.prev=15,KQ.Control.Waiting.close(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,,15,18]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],551:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function k(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(w){var e=KQ.Builder.BuilderProject.getInstance(),x=e.analysis_controls[w],u=e.analysis_result[w]=null,c=e.mapView;x.get(w+" run").click(k(regeneratorRuntime.mark(function e(){var y,t,n,r,i,o,_,v,b,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(c._getMap(),"pin","meter"),e.prev=1,u&&u.remove(),y=x.get(w+" src-layers"),t=KQ.Builder.BuilderProject.getInstance().getLayerFromGuid(y.value()).options.dataSource,n={type:"dataservice",url:t.url+"/proc",datasourceid:t.datasourceId,featureclassname:t.featureClassName},r=x.get(w+" dest-layers"),i=KQ.Builder.BuilderLayerDatas.getInstance().getData(r.value()),o=KQ.Common.CommonTools.getGeomFromFeatureCollection(i),_=x.get(w+" groupfields").value(),v=x.get(w+" summaryfields").value(),b=x.get(w+" summarytypes").value(),a=x.get(w+" tolerance"),s=void 0,s=null===a.value()?1e-8:a.value(),l=new KQ.ServiceTool.ServiceToolAnalysisServerSummary,e.next=18,l.getSummaryResult({datasource:encodeURIComponent(JSON.stringify(n)),geometry:JSON.stringify(o),groupfields:_,summaryfields:v,summarytypes:b,tolerance:s}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);for(var t=[],n=JSON.parse(e).result.items,r=0;r<n.length;r++)for(var i=n[r],o=i.values,a=0;a<o.length;++a){for(var s={},l=o[r],u=0;u<b.length;++u)l[b[u]]&&(s[b[u]]=l[b[u]]);s[_]=i.name,t.push(s)}for(var c=[_,v],h=[_,v],f=x.get(w+" summarytypes").dataItems(),d=0;d<f.length;++d){var p=f[d].value,m=f[d].name;c.push(p),h.push(m)}var g=[{label:y.dataSource.options.data[y.selectedIndex].name,fields:c,titles:h,records:t}];KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(g,{title:"汇总分析"}),refreshButtonState(w,{returnResultButtonOpen:"returnResultButtonOpen"}),x.get(w+" returnResultButton").bind("click",k(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(g,{title:"汇总分析"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 18:return e.prev=18,KQ.Control.Waiting.close(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[1,,18,21]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],552:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(o){var e,t=KQ.Builder.BuilderProject.getInstance(),a=t.analysis_controls[o],s=t.mapView;a.get(o+" run").click((e=regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(s._getMap(),"pin","meter"),e.prev=1,t=a.get(o+" src-layers"),n=KQ.Builder.BuilderLayerDatas.getInstance().getData(t.value()),r=KQ.Common.CommonTools.getGeomFromFeatureCollection(n),i=new KQ.ServiceTool.ServiceToolArea,e.next=8,i.getAreaResult({data:JSON.stringify(r)}).then(function(e){"error"===e||"error"===JSON.parse(e).resultcode?KQ.Control.Notification.getInstance().showError("请求失败！",0):KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=JSON.parse(e).result;a.get(o+" result").val(JSON.stringify(t))}).catch(function(e){console.log(e)});case 8:return e.prev=8,KQ.Control.Waiting.close(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[1,,8,11]])}),function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],553:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function p(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(u){var c=KQ.Builder.BuilderProject.getInstance(),h=c.analysis_controls[u],f=c.analysis_result[u]=null,d=c.mapView;h.get(u+" run").click(p(regeneratorRuntime.mark(function e(){var i,t,n,r,o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(d._getMap(),"pin","meter"),e.prev=1,f&&f.remove(),i=h.get(u+" src-layers"),t=KQ.Builder.BuilderLayerDatas.getInstance().getData(i.value()),n=KQ.Common.CommonTools.getGeomFromFeatureCollection(t),r=h.get(u+" bufferSideType"),o=r.value(),a=h.get(u+" bufferRadius"),s=a.value(),l=new KQ.ServiceTool.ServiceToolBuffer,e.next=13,l.getBufferResult({data:JSON.stringify(n),sideType:o,radius:s}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=i.dataSource.options.data[i.selectedIndex].name,n=h.get(u+" resultLayerName");""!==n.val()?n.val():n.val(t+" 的缓冲集");var r=JSON.parse(e).result;(f=new KQ.Map.MapGeoJSON(r)).setStyle({fillColor:"red",color:"red"}),d.getPane("overlayPane").style.zIndex=4e6,(c.analysis_result[u]=f).addToMapView(d),d._getMap().flyToBounds(f.getBounds()),refreshButtonState(u,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),h.get(u+" saveLayer").bind("click",p(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(u,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=h.get(u+" resultLayerName").val(),e.next=4,saveLayer(t,f);case 4:c.analysis_result[u]=null;case 5:case"end":return e.stop()}},e,this)}))),h.get(u+" cancel").bind("click",function(){refreshButtonState(u,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),f.remove(),c.analysis_result[u]=null})}}).catch(function(e){console.log(e)});case 13:return e.prev=13,KQ.Control.Waiting.close(),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[1,,13,16]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],554:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function m(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(c){var h=KQ.Builder.BuilderProject.getInstance(),f=h.analysis_controls[c],d=h.analysis_result[c]=null,p=h.mapView;f.get(c+" run").click(m(regeneratorRuntime.mark(function e(){var o,t,n,a,r,i,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(p._getMap(),"pin","meter"),e.prev=1,d&&d.remove(),o=f.get(c+" src-layers"),t=KQ.Builder.BuilderLayerDatas.getInstance().getData(o.value()),n=KQ.Common.CommonTools.getGeomFromFeatureCollection(t),a=f.get(c+" dest-layers"),r=KQ.Builder.BuilderLayerDatas.getInstance().getData(a.value()),i=KQ.Common.CommonTools.getGeomFromFeatureCollection(r),s=f.get(c+" tolerance"),l=void 0,l=null===s.value()?1e-8:s.value(),u=new KQ.ServiceTool.ServiceToolDifference,e.next=15,u.getDifferenceResult({srcData:JSON.stringify(n),destData:JSON.stringify(i),tolerance:l}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=o.dataSource.options.data[o.selectedIndex].name,n=a.dataSource.options.data[a.selectedIndex].name,r=f.get(c+" resultLayerName");""!==r.val()?r.val():r.val(t+" 和 "+n+" 的差集");var i=JSON.parse(e).result;(d=new KQ.Map.MapGeoJSON(i)).setStyle({fillColor:"red",color:"red"}),p.getPane("overlayPane").style.zIndex=4e6,(h.analysis_result[c]=d).addToMapView(p),p._getMap().flyToBounds(d.getBounds()),refreshButtonState(c,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),f.get(c+" saveLayer").bind("click",m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(c,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=f.get(c+" resultLayerName").val(),e.next=4,saveLayer(t,d);case 4:h.analysis_result[c]=null;case 5:case"end":return e.stop()}},e,this)}))),f.get(c+" cancel").bind("click",function(){refreshButtonState(c,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),d.remove(),h.analysis_result[c]=null})}}).catch(function(e){console.log(e)});case 15:return e.prev=15,KQ.Control.Waiting.close(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,,15,18]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],555:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(s){var e,t,l=KQ.Builder.BuilderProject.getInstance().analysis_controls[s];l.get(s+" run").click((e=regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.get(s+" src-layers"),n=KQ.Builder.BuilderLayerDatas.getInstance().getData(t.value()),r=KQ.Common.CommonTools.getGeomFromFeatureCollection(n),i=l.get(s+" exportShpFormat"),o=i.value(),a=new KQ.ServiceTool.ServiceToolExportShp,e.next=8,a.getExportShpResult({data:JSON.stringify(r),format:o});case 8:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return t.apply(this,arguments)}))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],556:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function f(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(c){var e=KQ.Builder.BuilderProject.getInstance(),h=e.analysis_controls[c],a=e.mapView;h.get(c+" run").click(f(regeneratorRuntime.mark(function e(){var t,n,r,i,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(a._getMap(),"pin","meter"),e.prev=1,t=h.get(c+" src-layers"),n=KQ.Builder.BuilderLayerDatas.getInstance().getData(t.value()),r=KQ.Common.CommonTools.getGeomFromFeatureCollection(n),i=h.get(c+" geometryAttribute"),u=i.value(),o=new KQ.ServiceTool.ServiceToolGeometryAttribute,e.next=10,o.getGeometryAttributeResult({data:JSON.stringify(r),attributenames:u}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=JSON.parse(e).result,n=[],r=[];returnResultTableDataSource(t,r,u);for(var i=t[0]||t,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a].name||o[a],l=o[a].aliasName||s;n.push({field:s,title:l})}KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(r,n,{title:"几何属性表"}),refreshButtonState(c,{returnResultButtonOpen:"returnResultButtonOpen"}),h.get(c+" returnResultButton").bind("click",f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(r,n,{title:"几何属性表"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 10:return e.prev=10,KQ.Control.Waiting.close(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,,10,13]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],557:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function y(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(m){var e=KQ.Builder.BuilderProject.getInstance(),g=e.analysis_controls[m],u=e.mapView;g.get(m+" run").click(y(regeneratorRuntime.mark(function e(){var p,t,n,r,i,o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(u._getMap(),"pin","meter"),e.prev=1,p=g.get(m+" src-layers"),t=KQ.Builder.BuilderLayerDatas.getInstance().getData(p.value()),n=KQ.Common.CommonTools.getGeomFromFeatureCollection(t),r=g.get(m+" pointLimit"),i=r.value(),o=g.get(m+" areaLimit"),a=o.value(),s={PointLimit:i,AreaLimit:a},l=new KQ.ServiceTool.ServiceToolGeometryCheck,e.next=13,l.getGeometryCheckResult({geometries:JSON.stringify(n),params:JSON.stringify(s)}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);for(var t=JSON.parse(e).result,n=[],r=0;r<t.length;r++){for(var i="",o=0;o<t[r].errors.length;o++){i+=t[r].errors[o].name+" "}n.push({id:t[r].id,errors:i})}for(var a=t[0]||t,s=Object.keys(a),l=[],u=[],c=0;c<s.length;c++){var h=s[c].name||s[c],f=s[c].aliasName||h;l.push(h),u.push(f)}var d=[{label:p.dataSource.options.data[p.selectedIndex].name,fields:l,titles:u,records:n}];KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(d,{title:"图形检查表"}),refreshButtonState(m,{returnResultButtonOpen:"returnResultButtonOpen"}),g.get(m+" returnResultButton").bind("click",y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:KQ.Builder.BuilderUi.BuilderInfoDialog.getInstance().open(d,s,{title:"图形检查表"});case 1:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 13:return e.prev=13,KQ.Control.Waiting.close(),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[1,,13,16]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],558:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(f){var e,d=KQ.Builder.BuilderProject.getInstance().analysis_controls[f];d.get(f+" run").click((e=regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.get(f+" geometry1-layers"),n=KQ.Builder.BuilderLayerDatas.getInstance().getData(t.value()),r=KQ.Common.CommonTools.getGeomFromFeatureCollection(n),i=d.get(f+" geometry2-layers"),o=KQ.Builder.BuilderLayerDatas.getInstance().getData(i.value()),a=KQ.Common.CommonTools.getGeomFromFeatureCollection(o),s=d.get(f+" operatorType"),l=s.value(),u=d.get(f+" operatorCheckGeo"),c=u.value(),h=new KQ.ServiceTool.ServiceToolOperator,e.next=13,h.getOperatorResult({operator:l,geometry1:JSON.stringify(r),geometry2:JSON.stringify(a),checkGeo:c});case 13:case"end":return e.stop()}},e,this)}),function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],559:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function v(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(p){var m=KQ.Builder.BuilderProject.getInstance(),g=m.analysis_controls[p],y=m.analysis_result[p]=null,_=m.mapView;g.get(p+" run").click(v(regeneratorRuntime.mark(function e(){var o,t,n,a,r,i,s,l,u,c,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(_._getMap(),"pin","meter"),e.prev=1,y&&y.remove(),o=g.get(p+" src-layers"),t=KQ.Builder.BuilderLayerDatas.getInstance().getData(o.value()),n=KQ.Common.CommonTools.getGeomFromFeatureCollection(t),a=g.get(p+" dest-layers"),r=KQ.Builder.BuilderLayerDatas.getInstance().getData(a.value()),i=KQ.Common.CommonTools.getGeomFromFeatureCollection(r),s=g.get(p+" geoSRS"),l=s.val(),u=g.get(p+" destGeoSRS"),c=u.val(),"$area$,$length$",h=g.get(p+" tolerance"),f=void 0,f=null===h.value()?1e-8:h.value(),d=new KQ.ServiceTool.ServiceToolOverlap,e.next=20,d.getOverlapResult({srcData:JSON.stringify(n),destData:JSON.stringify(i),geoSRS:l,destGeoSRS:c,tolerance:f,fields:"$area$,$length$"}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=JSON.parse(e).result;returnFields(p,t,"area"),returnFields(p,t,"length");var n=o.dataSource.options.data[o.selectedIndex].name,r=a.dataSource.options.data[a.selectedIndex].name,i=g.get(p+" resultLayerName");""!==i.val()?i.val():i.val(n+" 和 "+r+" 的交集"),(y=new KQ.Map.MapGeoJSON(t)).setStyle({fillColor:"red",color:"red"}),_.getPane("overlayPane").style.zIndex=4e6,(m.analysis_result[p]=y).addToMapView(_),_._getMap().flyToBounds(y.getBounds()),refreshButtonState(p,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),g.get(p+" saveLayer").bind("click",v(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(p,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=g.get(p+" resultLayerName").val(),e.next=4,saveLayer(t,y);case 4:m.analysis_result[p]=null;case 5:case"end":return e.stop()}},e,this)}))),g.get(p+" cancel").bind("click",v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:refreshButtonState(p,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),y.remove(),m.analysis_result[p]=null;case 3:case"end":return e.stop()}},e,this)})))}}).catch(function(e){console.log(e)});case 20:return e.prev=20,KQ.Control.Waiting.close(),e.finish(20);case 23:case"end":return e.stop()}},e,this,[[1,,20,23]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],560:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(s){var e,t=KQ.Builder.BuilderProject.getInstance(),l=t.analysis_controls[s],u=t.mapView;l.get(s+" run").click((e=regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(u._getMap(),"pin","meter"),e.prev=1,t=l.get(s+" src-layers"),n=KQ.Builder.BuilderLayerDatas.getInstance().getData(t.value()),r=KQ.Common.CommonTools.getGeomFromFeatureCollection(n),i=l.get(s+" outSRS"),o=i.val(),a=new KQ.ServiceTool.ServiceToolProject,e.next=10,a.getProjectResult({data:JSON.stringify(r),outSRS:o}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=formatJson(JSON.parse(e).result);console.log(t),l.get(s+" result").val(t),copyResult(s)}}).catch(function(e){console.log(e)});case 10:return e.prev=10,KQ.Control.Waiting.close(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,,10,13]])}),function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],561:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(a){var e,t=KQ.Builder.BuilderProject.getInstance(),s=t.analysis_controls[a],l=t.mapView;s.get(a+" run").click((e=regeneratorRuntime.mark(function e(){var t,n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(l._getMap(),"pin","meter"),e.prev=1,t=s.get(a+" prj"),n=s.get(a+" outSRSType"),r=t.val(),i=n.value(),o=new KQ.ServiceTool.ServiceToolProjectSystem,e.next=9,o.getProjectResult({prj:r,destType:i}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=JSON.parse(e).result;s.get(a+" result").val(t),copyResult(a)}}).catch(function(e){console.log(e)});case 9:return e.prev=9,KQ.Control.Waiting.close(),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[1,,9,12]])}),function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],562:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function m(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(c){var h=KQ.Builder.BuilderProject.getInstance(),f=h.analysis_controls[c],d=h.analysis_result[c]=null,p=h.mapView;f.get(c+" run").click(m(regeneratorRuntime.mark(function e(){var o,t,n,a,r,i,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(p._getMap(),"pin","meter"),e.prev=1,d&&d.remove(),o=f.get(c+" src-layers"),t=KQ.Builder.BuilderLayerDatas.getInstance().getData(o.value()),n=KQ.Common.CommonTools.getGeomFromFeatureCollection(t),a=f.get(c+" dest-layers"),r=KQ.Builder.BuilderLayerDatas.getInstance().getData(a.value()),i=KQ.Common.CommonTools.getGeomFromFeatureCollection(r),s=f.get(c+" tolerance"),l=void 0,l=null===s.value()?1e-8:s.value(),u=new KQ.ServiceTool.ServiceToolSymDifference,e.next=15,u.getSymDifferenceResult({srcData:JSON.stringify(n),destData:JSON.stringify(i),tolerance:l}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=o.dataSource.options.data[o.selectedIndex].name,n=a.dataSource.options.data[a.selectedIndex].name,r=f.get(c+" resultLayerName");""!==r.val()?r.val():r.val(t+" 和 "+n+" 的对称差集");var i=JSON.parse(e).result;(d=new KQ.Map.MapGeoJSON(i)).setStyle({fillColor:"red",color:"red"}),p.getPane("overlayPane").style.zIndex=4e6,(h.analysis_result[c]=d).addToMapView(p),p._getMap().flyToBounds(d.getBounds()),refreshButtonState(c,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),f.get(c+" saveLayer").bind("click",m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(c,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=f.get(c+" resultLayerName").val(),e.next=4,saveLayer(t,d);case 4:h.analysis_result[c]=null;case 5:case"end":return e.stop()}},e,this)}))),f.get(c+" cancel").bind("click",function(){refreshButtonState(c,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),d.remove(),h.analysis_result[c]=null})}}).catch(function(e){console.log(e)});case 15:return e.prev=15,KQ.Control.Waiting.close(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,,15,18]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],563:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=k(e("./BuilderOverlay")),i=k(e("./BuilderArea")),o=k(e("./BuilderBuffer")),a=k(e("./BuilderDifference")),s=k(e("./BuilderExportShp")),l=k(e("./BuilderGeometryAttribute")),u=k(e("./BuilderGeometryCheck")),c=k(e("./BuilderOperator")),h=k(e("./BuilderProject")),f=k(e("./BuilderProjectSystem")),d=k(e("./BuilderSymDifference")),p=k(e("./BuilderUnion")),m=k(e("./BuilderAnalysisServerDifference")),g=k(e("./BuilderAnalysisServerDifferenceext")),y=k(e("./BuilderAnalysisServerOverlap")),_=k(e("./BuilderAnalysisServerOverlapext")),v=k(e("./BuilderAnalysisServerFields")),b=k(e("./BuilderAnalysisServerQuery")),w=k(e("./BuilderAnalysisServerSummary")),x=k(e("./BuilderAnalysisServerExecute"));function k(e){return e&&e.__esModule?e:{default:e}}var L={BuilderOverlay:r.default,BuilderArea:i.default,BuilderBuffer:o.default,BuilderDifference:a.default,BuilderExportShp:s.default,BuilderGeometryAttribute:l.default,BuilderGeometryCheck:u.default,BuilderOperator:c.default,BuilderProject:h.default,BuilderProjectSystem:f.default,BuilderSymDifference:d.default,BuilderUnion:p.default,BuilderAnalysisServerDifference:m.default,BuilderAnalysisServerDifferenceext:g.default,BuilderAnalysisServerOverlap:y.default,BuilderAnalysisServerOverlapext:_.default,BuilderAnalysisServerFields:v.default,BuilderAnalysisServerQuery:b.default,BuilderAnalysisServerSummary:w.default,BuilderAnalysisServerExecute:x.default};n.default=L},{"./BuilderAnalysisServerDifference":544,"./BuilderAnalysisServerDifferenceext":545,"./BuilderAnalysisServerExecute":546,"./BuilderAnalysisServerFields":547,"./BuilderAnalysisServerOverlap":548,"./BuilderAnalysisServerOverlapext":549,"./BuilderAnalysisServerQuery":550,"./BuilderAnalysisServerSummary":551,"./BuilderArea":552,"./BuilderBuffer":553,"./BuilderDifference":554,"./BuilderExportShp":555,"./BuilderGeometryAttribute":556,"./BuilderGeometryCheck":557,"./BuilderOperator":558,"./BuilderOverlay":559,"./BuilderProject":560,"./BuilderProjectSystem":561,"./BuilderSymDifference":562,"./BuilderUnion":564}],564:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function f(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(s){var l=KQ.Builder.BuilderProject.getInstance(),u=l.analysis_controls[s],c=l.analysis_result[s]=null,h=l.mapView;u.get(s+" run").click(f(regeneratorRuntime.mark(function e(){var i,t,n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KQ.Control.Waiting.show(h._getMap(),"pin","meter"),e.prev=1,c&&c.remove(),i=u.get(s+" src-layers"),t=KQ.Builder.BuilderLayerDatas.getInstance().getData(i.value()),n=KQ.Common.CommonTools.getGeomFromFeatureCollection(t),r=u.get(s+" outSRS"),o=r.val(),a=new KQ.ServiceTool.ServiceToolUnion,e.next=11,a.getUnionResult({geometries:JSON.stringify(n),outSRS:o}).then(function(e){if("error"===e||"error"===JSON.parse(e).resultcode)KQ.Control.Notification.getInstance().showError("请求失败！",0);else{KQ.Control.Notification.getInstance().showSuccess("请求成功！",0);var t=i.dataSource.options.data[i.selectedIndex].name,n=u.get(s+" resultLayerName");""!==n.val()?n.val():n.val(t+" 的图形合并结果");var r=JSON.parse(e).result;(c=new KQ.Map.MapGeoJSON(r)).setStyle({fillColor:"red",color:"red"}),h.getPane("overlayPane").style.zIndex=4e6,(l.analysis_result[s]=c).addToMapView(h),h._getMap().flyToBounds(c.getBounds()),refreshButtonState(s,{saveLayerButtonOpen:"saveLayerButtonOpen",cancelLayerButtonOpen:"cancelLayerButtonOpen"}),u.get(s+" saveLayer").bind("click",f(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return refreshButtonState(s,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),t=u.get(s+" resultLayerName").val(),e.next=4,saveLayer(t,c);case 4:l.analysis_result[s]=null;case 5:case"end":return e.stop()}},e,this)}))),u.get(s+" cancel").bind("click",function(){refreshButtonState(s,{saveLayerButtonClose:"saveLayerButtonClose",cancelLayerButtonClose:"cancelLayerButtonClose"}),c.remove(),l.analysis_result[s]=null})}}).catch(function(e){console.log(e)});case 11:return e.prev=11,KQ.Control.Waiting.close(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,,11,14]])})))}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],565:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(){this.createWindow()}},{key:"createWindow",value:function(){$("#account-info-container").kendoWindow({width:"350px",height:"300px",modal:!0,draggable:!1,resizable:!1,content:{template:this.windowContentTemplate()}}).data("kendoWindow").center().open().wrapper.find(".k-window-title").html("账户信息")}},{key:"windowContentTemplate",value:function(){var e=JSON.parse(a.default.Builder.BuilderPortalProxy.currentInfo().userInfo);return'<div class="account-info-content">\n        <div class="head-img">\n            <span>头像：</span>\n            <img src="'+("http://27.17.43.14:9405/filedownloadapi/"+e.headImg+"/true")+'" alt="">\n        </div>\n        <div class="user-name">\n            <span>姓名：</span>\n            <text>'+e.username+'</text>\n        </div>\n        <div class="login-name">\n            <span>登录名：</span>\n            <text>'+e.loginName+'</text>\n        </div>\n        <div class="status">\n            <span>状态：</span>\n            <text>'+(1===e.status?"可登录":"不可登录")+"</text>\n        </div>\n      </div>"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../../kq":729}],566:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../../kq"),a=(r=i)&&r.__esModule?r:{default:r};var s={title:"账户信息"},l=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=n;return r._id=e,r._options=L.extend({},s,t),r._createWindow(),r._refreshData(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,L.Evented),o(i,[{key:"_createWindow",value:function(){var e=this,t=$(e._id).kendoWindow({width:"700px",height:"200px",modal:!0,draggable:!1,resizable:!1,content:{template:e._windowContentTemplate()},open:function(){e._refreshData()}}).data("kendoWindow"),n='<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">'+e._options.title+"</span>";t.wrapper.find(".k-window-title").html(n)}},{key:"_windowContentTemplate",value:function(){return"<div class='account-info-dialog'></div>"}},{key:"_refreshData",value:function(){var e=this,t=JSON.parse(a.default.Builder.BuilderPortalProxy.currentInfo().userInfo),n=[],r="http://27.17.43.14:9405/filedownloadapi/"+t.headImg+"/true";t.headImg=r,console.log("accountInfo",t);var i=[{field:"headImg",title:"头像",template:'<div style="height: 150px;width: 150px;background-image: url('+r+');border-radius: 50%"></div>',width:170},{field:"username",title:"用户名"},{field:"loginName",title:"登录名"},{field:"id",title:"id"},{field:"status",title:"状态"}];$(e._id+" .account-info-dialog").kendoGrid({columns:i}).data("kendoGrid"),n.push(t),0<n.length&&setTimeout(function(){$(e._id+" .account-info-dialog").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:n}))},0)}}]),i}();n.default=l},{"../../kq":729}],567:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=o(e("../../control/QueryResultDialog"));o(e("../../control/toolbar/ModeToolButton"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._desc="builder-info-",t._title=KQ.Local.Control.overlayAnalysisResultDialog.title(),t._init(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"open",value:function(e,t){t=L.extend({},{width:1174,position:{left:354,top:406}},t),i.default.prototype.open.call(this,e,t)}},{key:"_initHtml",value:function(){$("#KqMapID").append($('<div id="builder-info-result-dialog"><div id="builder-info-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"builder-info-result-dialog"}},{key:"_getSiderBarContainerWidth",value:function(){return 340}},{key:"_getLayerNameTabsId",value:function(){return"builder-info-layer-name-tabs"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=a},{"../../control/QueryResultDialog":668,"../../control/toolbar/ModeToolButton":713}],568:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._grid=null,this._window=null,this._init()}return r(e,[{key:"open",value:function(e,t,n){this._updateUi(e,t);var r=(n=n||{}).title?n.title:"属性表";this._window.title(r),this._window.open()}},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){$("#KqMapID").append($('<div id="builder-info-dialog"><div id="builder-info-grid"></div></div>'))}},{key:"_initUi",value:function(){this._createGrid(),this._createWindow()}},{key:"_createGrid",value:function(){this._grid=$("#builder-info-grid").kendoGrid({}).data("kendoGrid")}},{key:"_createWindow",value:function(){this._window=$("#builder-info-dialog").kendoWindow({position:{top:456,left:356},width:1176,actions:["Close"]}).data("kendoWindow")}},{key:"_updateUi",value:function(e,t){var n=t.concat();this._grid.setOptions({resizable:!0,sortable:!0,selectable:"row",height:254,pageable:{pageSize:5},columns:this._fillColumnsExtraInfo(n),dataSource:e}),this._grid.refresh()}},{key:"_fillColumnsExtraInfo",value:function(e){return this._fillColumnsWidthInfo(e),this._fillColumnsAttributesInfo(e),e.push({field:"hidden",title:" "}),e}},{key:"_fillColumnsWidthInfo",value:function(e){for(var t=0;t<e.length;++t)e[t].width=this._getEstimateTextWidth(e[t].title);for(var n=0,r=0;r<e.length;++r)n+=e[r].width;if(n<1120)for(var i=1120/n,o=0;o<e.length;++o)e[o].width*=i}},{key:"_getEstimateTextWidth",value:function(e){var t=$('<span class="k-widget">'+e+"</span>").hide().appendTo("body"),n=$(t).width();return t.remove(),Math.max(80,2*n)}},{key:"_fillColumnsAttributesInfo",value:function(e){for(var t=0;t<e.length;++t)e[t].attributes={class:"hasTooltip",style:"white-space: nowrap;text-align: center;"}}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],569:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("../../kq")),a=i(e("./BuilderSearchBarHtml"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._createHtml(),this._toggleCityList(),this._SearchCityMethod(),this._closeCityList(),this._provinceTab(),this._pinyinTab(),this._searchPoi(),this._clearInput()}var n,t,e;return r(i,[{key:"_createHtml",value:function(){(new a.default).createBuilderSearchBarHtml()}},{key:"_toggleCityList",value:function(){$(".builder-searchbar-settings-name").on("click",function(e){e.stopPropagation();var t=$(".builder-searchbar-settings-searchcity"),n=t[0].style.display;t.css("display","block"),"block"===n&&t.css("display","none"),$(".search-by-search-input").val(""),i.clickTabCity(),i.searchCity()})}},{key:"_SearchCityMethod",value:function(){$(".search-city .search-by-province").on("click",function(){$(".builder-searchbar-settings-searchcity-tab.search-by-province-tab").css("display","block"),$(".builder-searchbar-settings-searchcity-tab.search-by-pinyin-tab").css("display","none"),$(".search-city .search-by-province").css("color","rgba(255,255,255,.8)"),$(".search-city .search-by-pinyin").css("color","rgba(255,255,255,.5)")}),$(".search-city .search-by-pinyin").on("click",function(){$(".builder-searchbar-settings-searchcity-tab.search-by-province-tab").css("display","none"),$(".builder-searchbar-settings-searchcity-tab.search-by-pinyin-tab").css("display","block"),$(".search-city .search-by-province").css("color","rgba(255,255,255,.5)"),$(".search-city .search-by-pinyin").css("color","rgba(255,255,255,.8)")})}},{key:"_closeCityList",value:function(){$(".builder-searchbar-settings-searchcity-title .close").on("click",function(){$(".builder-searchbar-settings-searchcity").css("display","none")})}},{key:"_provinceTab",value:function(){$(".search-by-province-tab ul li").on("click",function(e){$(".search-by-province-tab ul li.on").removeClass("on"),e.target.classList.add("on");var t=$(".search-by-province-tab ul li.on").data("index");0===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-HOT").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-HOT)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):1===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-A").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-A)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):2===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-F").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-F)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):3===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-G").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-G)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):4===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-H").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-H)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):5===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-J").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-J)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):6===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-L").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-L)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):7===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-N").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-N)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):8===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-Q").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-Q)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):9===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-S").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-S)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):10===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-T").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-T)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):11===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-X").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-X)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):12===t?($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-Y").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-Y)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):13===t&&($(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > .city-Z").css("display","block"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-Z)").css("display","none"),$(".search-by-province-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")),i.clickTabCity()})}},{key:"_pinyinTab",value:function(){$(".search-by-pinyin-tab ul li").on("click",function(e){$(".search-by-pinyin-tab ul li.on").removeClass("on"),e.target.classList.add("on");var t=$(".search-by-pinyin-tab ul li.on").data("index");0===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-HOT").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-HOT)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):1===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-AB").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-AB)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):2===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-CD").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-CD)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):3===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-EFG").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-EFG)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):4===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-H").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-H)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):5===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-J").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-J)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):6===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-KL").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-KL)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):7===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-MNP").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-MNP)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):8===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-QR").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-QR)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):9===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-S").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-S)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):10===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-T").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-T)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):11===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-W").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-W)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):12===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-X").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-X)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):13===t?($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-Y").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-Y)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")):14===t&&($(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > .city-Z").css("display","block"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist > :not(.city-Z)").css("display","none"),$(".search-by-pinyin-tab .builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")),i.clickTabCity()})}},{key:"_searchPoi",value:function(){i.searchPoi()}},{key:"_clearInput",value:function(){$(".builder-searchbar-input-text").bind("input propertychange",function(){""===$(".builder-searchbar-input-text").val()?$(".builder-searchbar-clear-input").css("display","none"):$(".builder-searchbar-clear-input").css("display","block")}),$(".builder-searchbar-clear-input").on("click",function(){$(".builder-searchbar-input-text").val(null),$(".builder-searchbar-clear-input").css("display","none")})}}],[{key:"flyToCity",value:function(e){if(void 0===JSON.parse(e).districts[0])o.default.Control.Notification.getInstance().showError("查无此行政区！",0);else{var t=JSON.parse(e).districts[0].center.split(","),n=JSON.parse(e).districts[0].name,r=JSON.parse(e).districts[0].level,i=null;"country"===r?i=4:"province"===r?i=6:"city"===r?i=8:"district"===r?i=11:"street"===r&&(i=13),o.default.Builder.BuilderProject.getInstance().mapView._getMap().flyTo([Number.parseFloat(t[1]),Number.parseFloat(t[0])],i),$(".builder-searchbar-settings-city").text(n)}}},{key:"clickTabCity",value:function(){$(".builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").on("click",function(e){e.stopPropagation();var t=e.target.innerText;$(".builder-searchbar-settings-searchcity").css("display","none"),$(".builder-searchbar-clear-input").trigger("click"),$(".builder-searchbar-clear-input").off("click"),"全国"===t?($(".builder-searchbar-settings-city").text(t),o.default.Builder.BuilderProject.getInstance().mapView._getMap().flyTo([39.915085,116.3683244],4)):"台湾"===t||"台北"===t||"高雄"===t||"台中"===t||"台南"===t||"新北"===t||"基隆"===t||"新竹"===t||"嘉义"===t?($(".builder-searchbar-settings-city").text(t),o.default.Builder.BuilderProject.getInstance().mapView._getMap().flyTo([24,121],8)):i.getCityCoordinates(t).then(function(e){i.flyToCity(e)}).catch(function(e){console.log(e)}),$(".builder-searchbar-settings-searchcity-tablist .city .city-content .city-name").off("click")})}},{key:"searchCity",value:function(){$(".search-by-search-input").on("focus",function(){$(".search-by-search-input").on("keypress",function(e){if(e.stopPropagation(),13===e.keyCode){var t=$(".search-by-search-input").val();""===t?($(".builder-searchbar-settings-searchcity").css("display","none"),$(".builder-searchbar-clear-input").trigger("click")):i.getCityCoordinates(t).then(function(e){i.flyToCity(e),$(".builder-searchbar-settings-searchcity").css("display","none"),$(".builder-searchbar-clear-input").trigger("click"),$(".search-by-search-input").off("keypress")}).catch(function(e){console.log(e)})}}),$(".search-by-search-input").off("focus")})}},{key:"searchPoi",value:(e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$(".builder-searchbar-search").on("click",function(e){e.stopPropagation();var t=$(".builder-searchbar-settings-city").text(),n=$(".builder-searchbar-input-text").val();""!==n&&i.getSearchPoi(t,n).then(function(e){var t=JSON.parse(e).pois,n=[],r=[];5<t.length?t.forEach(function(e){5===r.length&&(r=[]),0===r.length&&n.push(r),r.push(e)}):(t.map(function(e){r.push(e)}),n.push(r)),0!==t.length?(new o.default.Builder.BuilderUi.BuilderSearchBarPoiResult).poiResultList(n,0):o.default.Control.Notification.getInstance().showError("POI查询无果！",0),$(".builder-searchbar-search").off("click"),i.searchPoi()}).catch(function(e){console.log(e),o.default.Control.Notification.getInstance().showError(""+e,0)})}),$(".builder-searchbar-input-text").on("focus",function(){$(".builder-searchbar-input-text").on("keypress",function(e){e.stopPropagation(),13===e.keyCode&&($(".builder-searchbar-search").trigger("click"),$(".builder-searchbar-search").off("click"))})});case 2:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getCityCoordinates",value:(t=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.Common.NetworkTools.httpGetAsync("https://restapi.amap.com/v3/config/district?key=da7eac4e459a585e36453ce277b620ee&subdistrict=0&keywords="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getSearchPoi",value:(n=s(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,$(".builder-searchbar-loading").css("display","block"),$(".builder-searchbar-clear-input").css("display","none"),"全国"===t)return e.next=6,o.default.Common.NetworkTools.httpGetAsync("https://restapi.amap.com/v3/place/text?key=da7eac4e459a585e36453ce277b620ee&children=&offset=&page=&extensions=all&keywords="+n+"&city=");e.next=9;break;case 6:return e.abrupt("return",e.sent);case 9:return e.next=11,o.default.Common.NetworkTools.httpGetAsync("https://restapi.amap.com/v3/place/text?key=da7eac4e459a585e36453ce277b620ee&children=&offset=&page=&extensions=all&keywords="+n+"&city="+t);case 11:return e.abrupt("return",e.sent);case 12:return e.prev=12,$(".builder-searchbar-loading").css("display","none"),$(".builder-searchbar-clear-input").css("display","block"),e.finish(12);case 16:case"end":return e.stop()}},e,this,[[0,,12,16]])})),function(e,t){return n.apply(this,arguments)})}]),i}();n.default=l},{"../../kq":729,"./BuilderSearchBarHtml":570}],570:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return i(e,[{key:"createBuilderSearchBarHtml",value:function(){$(".builder-searchbar").append('<div class="builder-searchbar-content">\n          <div class="builder-searchbar-settings">\n              <div class="builder-searchbar-settings-name">\n                  <span class="builder-searchbar-settings-city">全国</span>\n                  <span class="k-icon k-i-arrow-60-down"></span>\n              </div>\n              <div class="builder-searchbar-settings-searchcity">\n                  <div class="builder-searchbar-settings-searchcity-title">\n                      <div class="search-city">\n                          <span class="search-by-province">按省份搜索城市</span>\n                          <span class="search-by-pinyin">按拼音搜索城市</span>\n                          <div class="search-by-search">\n                              <input type="text" class="search-by-search-input" placeholder="请输入城市(行政区域)">\n                              <span class="search-by-search-icon iconfont icon-search"></span>\n                          </div>\n                      </div>\n                      <span class="close iconfont icon-clear"></span>\n                  </div>\n                  <div class="builder-searchbar-settings-searchcity-tab search-by-province-tab">\n                      <ul>\n                          <li data-index="0" class="on">HOT</li>\n                          <li data-index="1" class="">A</li>\n                          <li data-index="2" class="">F</li>\n                          <li data-index="3" class="">G</li>\n                          <li data-index="4" class="">H</li>\n                          <li data-index="5" class="">J</li>\n                          <li data-index="6" class="">L</li>\n                          <li data-index="7" class="">N</li>\n                          <li data-index="8" class="">Q</li>\n                          <li data-index="9" class="">S</li>\n                          <li data-index="10" class="">T</li>\n                          <li data-index="11" class="">X</li>\n                          <li data-index="12" class="">Y</li>\n                          <li data-index="13" class="">Z</li>\n                      </ul>\n                      <div class="builder-searchbar-settings-searchcity-tablist">\n                          <div class="city city-HOT">\n                              <div class="HOT">\n                                  <div class="py-key">HOT</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-A">\n                              <div class="AnHui">\n                                  <div class="py-key">安徽</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-F">\n                              <div class="FuJian">\n                                  <div class="py-key">福建</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-G">\n                              <div class="GuangDong">\n                                  <div class="py-key">广东</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="GuangXi">\n                                  <div class="py-key">广西</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="GuiZhou">\n                                  <div class="py-key">贵州</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="GanSu">\n                                  <div class="py-key">甘肃</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-H">\n                              <div class="HeBei">\n                                  <div class="py-key">河北</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="HeiLongJiang">\n                                  <div class="py-key">黑龙江</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="HeNan">\n                                  <div class="py-key">河南</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="HuBei">\n                                  <div class="py-key">湖北</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="HuNan">\n                                  <div class="py-key">湖南</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="HaiNan">\n                                  <div class="py-key">海南</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-J">\n                              <div class="JiLin">\n                                  <div class="py-key">吉林</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="JiangSu">\n                                  <div class="py-key">江苏</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="JiangXi">\n                                  <div class="py-key">江西</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-L">\n                              <div class="Liaoling">\n                                  <div class="py-key">辽宁</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-N">\n                              <div class="NeiMengGu">\n                                  <div class="py-key">内蒙古</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="NingXia">\n                                  <div class="py-key">宁夏</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-Q">\n                              <div class="Qinghai">\n                                  <div class="py-key">青海</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-S">\n                              <div class="ShanXi">\n                                  <div class="py-key">山西</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="ShanDong">\n                                  <div class="py-key">山东</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="SiChuan">\n                                  <div class="py-key">四川</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="ShanXiProvince">\n                                  <div class="py-key">陕西</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-T">\n                              <div class="TaiWan">\n                                  <div class="py-key">台湾</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-X">\n                              <div class="XiZang">\n                                  <div class="py-key">西藏</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="XinJiang">\n                                  <div class="py-key">新疆</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-Y">\n                              <div class="YunNan">\n                                  <div class="py-key">云南</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-Z">\n                              <div class="ZheJiang">\n                                  <div class="py-key">浙江</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n                  <div style="display: none" class="builder-searchbar-settings-searchcity-tab search-by-pinyin-tab">\n                      <ul>\n                          <li data-index="0" class="on">HOT</li>\n                          <li data-index="1" class="">AB</li>\n                          <li data-index="2" class="">CD</li>\n                          <li data-index="3" class="">EFG</li>\n                          <li data-index="4" class="">H</li>\n                          <li data-index="5" class="">J</li>\n                          <li data-index="6" class="">KL</li>\n                          <li data-index="7" class="">MNP</li>\n                          <li data-index="8" class="">QR</li>\n                          <li data-index="9" class="">S</li>\n                          <li data-index="10" class="">T</li>\n                          <li data-index="11" class="">W</li>\n                          <li data-index="12" class="">X</li>\n                          <li data-index="13" class="">Y</li>\n                          <li data-index="14" class="">Z</li>\n                      </ul>\n                      <div class="builder-searchbar-settings-searchcity-tablist">\n                          <div class="city city-HOT">\n                              <div class="HOT">\n                                  <div class="py-key">HOT</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-AB">\n                              <div class="A">\n                                  <div class="py-key">A</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="B">\n                                  <div class="py-key">B</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-CD">\n                              <div class="C">\n                                  <div class="py-key">C</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="D">\n                                  <div class="py-key">D</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-EFG">\n                              <div class="E">\n                                  <div class="py-key">E</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="F">\n                                  <div class="py-key">F</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="G">\n                                  <div class="py-key">G</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-H">\n                              <div class="H">\n                                  <div class="py-key">H</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-J">\n                              <div class="J">\n                                  <div class="py-key">J</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-KL">\n                              <div class="K">\n                                  <div class="py-key">K</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="L">\n                                  <div class="py-key">L</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-MNP">\n                              <div class="M">\n                                  <div class="py-key">M</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="N">\n                                  <div class="py-key">N</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="P">\n                                  <div class="py-key">P</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-QR">\n                              <div class="Q">\n                                  <div class="py-key">Q</div>\n                                  <div class="city-content"></div>\n                              </div>\n                              <div class="R">\n                                  <div class="py-key">R</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-S">\n                              <div class="S">\n                                  <div class="py-key">S</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-T">\n                              <div class="T">\n                                  <div class="py-key">T</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-W">\n                              <div class="W">\n                                  <div class="py-key">W</div>\n                                  <div class="city-content"> </div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-X">\n                              <div class="X">\n                                  <div class="py-key">X</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-Y">\n                              <div class="Y">\n                                  <div class="py-key">Y</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                          <div style="display: none;" class="city city-Z">\n                              <div class="Z">\n                                  <div class="py-key">Z</div>\n                                  <div class="city-content"></div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n          <div class="builder-searchbar-input k-input">\n              <input type="text" class="builder-searchbar-input-text" placeholder="请输入搜索内容" value="">\n              <span class="builder-searchbar-clear-input iconfont icon-clear"></span>\n              <span class="builder-searchbar-loading iconfont icon-analysis-buffer"></span>\n              <span class="builder-searchbar-search iconfont icon-search"></span>\n          </div>\n      </div>'),e.getCityList().then(function(e){for(var t="",n=0;n<JSON.parse(e).cityData.hotCitys.length;n++)t+='<span class="city-name">'+JSON.parse(e).cityData.hotCitys[n].name+"</span>";$(".HOT .city-content").append(t);for(var r="",i=0;i<JSON.parse(e).provinceByLetter.A[0]["安徽"].length;i++)r+='<span class="city-name">'+JSON.parse(e).provinceByLetter.A[0]["安徽"][i].name+"</span>";$(".AnHui .city-content").append(r);for(var o="",a=0;a<JSON.parse(e).provinceByLetter.F[0]["福建"].length;a++)o+='<span class="city-name">'+JSON.parse(e).provinceByLetter.F[0]["福建"][a].name+"</span>";$(".FuJian .city-content").append(o);for(var s="",l=0;l<JSON.parse(e).provinceByLetter.G[0]["广东"].length;l++)s+='<span class="city-name">'+JSON.parse(e).provinceByLetter.G[0]["广东"][l].name+"</span>";$(".GuangDong .city-content").append(s);for(var u="",c=0;c<JSON.parse(e).provinceByLetter.G[1]["广西"].length;c++)u+='<span class="city-name">'+JSON.parse(e).provinceByLetter.G[1]["广西"][c].name+"</span>";$(".GuangXi .city-content").append(u);for(var h="",f=0;f<JSON.parse(e).provinceByLetter.G[2]["贵州"].length;f++)h+='<span class="city-name">'+JSON.parse(e).provinceByLetter.G[2]["贵州"][f].name+"</span>";$(".GuiZhou .city-content").append(h);for(var d="",p=0;p<JSON.parse(e).provinceByLetter.G[3]["甘肃"].length;p++)d+='<span class="city-name">'+JSON.parse(e).provinceByLetter.G[3]["甘肃"][p].name+"</span>";$(".GanSu .city-content").append(d);for(var m="",g=0;g<JSON.parse(e).provinceByLetter.H[0]["河北"].length;g++)m+='<span class="city-name">'+JSON.parse(e).provinceByLetter.H[0]["河北"][g].name+"</span>";$(".HeBei .city-content").append(m);for(var y="",_=0;_<JSON.parse(e).provinceByLetter.H[1]["黑龙江"].length;_++)y+='<span class="city-name">'+JSON.parse(e).provinceByLetter.H[1]["黑龙江"][_].name+"</span>";$(".HeiLongJiang .city-content").append(y);for(var v="",b=0;b<JSON.parse(e).provinceByLetter.H[2]["河南"].length;b++)v+='<span class="city-name">'+JSON.parse(e).provinceByLetter.H[2]["河南"][b].name+"</span>";$(".HeNan .city-content").append(v);for(var w="",x=0;x<JSON.parse(e).provinceByLetter.H[3]["湖北"].length;x++)w+='<span class="city-name">'+JSON.parse(e).provinceByLetter.H[3]["湖北"][x].name+"</span>";$(".HuBei .city-content").append(w);for(var k="",L=0;L<JSON.parse(e).provinceByLetter.H[4]["湖南"].length;L++)k+='<span class="city-name">'+JSON.parse(e).provinceByLetter.H[4]["湖南"][L].name+"</span>";$(".HuNan .city-content").append(k);for(var C="",S=0;S<JSON.parse(e).provinceByLetter.H[5]["海南"].length;S++)C+='<span class="city-name">'+JSON.parse(e).provinceByLetter.H[5]["海南"][S].name+"</span>";$(".HaiNan .city-content").append(C);for(var M="",P=0;P<JSON.parse(e).provinceByLetter.J[0]["吉林"].length;P++)M+='<span class="city-name">'+JSON.parse(e).provinceByLetter.J[0]["吉林"][P].name+"</span>";$(".JiLin .city-content").append(M);for(var E="",T=0;T<JSON.parse(e).provinceByLetter.J[1]["江苏"].length;T++)E+='<span class="city-name">'+JSON.parse(e).provinceByLetter.J[1]["江苏"][T].name+"</span>";$(".JiangSu .city-content").append(E);for(var I="",O=0;O<JSON.parse(e).provinceByLetter.J[2]["江西"].length;O++)I+='<span class="city-name">'+JSON.parse(e).provinceByLetter.J[2]["江西"][O].name+"</span>";$(".JiangXi .city-content").append(I);for(var D="",N=0;N<JSON.parse(e).provinceByLetter.L[0]["辽宁"].length;N++)D+='<span class="city-name">'+JSON.parse(e).provinceByLetter.L[0]["辽宁"][N].name+"</span>";$(".Liaoling .city-content").append(D);for(var A="",j=0;j<JSON.parse(e).provinceByLetter.N[0]["内蒙古"].length;j++)A+='<span class="city-name">'+JSON.parse(e).provinceByLetter.N[0]["内蒙古"][j].name+"</span>";$(".NeiMengGu .city-content").append(A);for(var R="",B=0;B<JSON.parse(e).provinceByLetter.N[1]["宁夏"].length;B++)R+='<span class="city-name">'+JSON.parse(e).provinceByLetter.N[1]["宁夏"][B].name+"</span>";$(".NingXia .city-content").append(R);for(var F="",z=0;z<JSON.parse(e).provinceByLetter.Q[0]["青海"].length;z++)F+='<span class="city-name">'+JSON.parse(e).provinceByLetter.Q[0]["青海"][z].name+"</span>";$(".Qinghai .city-content").append(F);for(var q="",U=0;U<JSON.parse(e).provinceByLetter.S[0]["山西"].length;U++)q+='<span class="city-name">'+JSON.parse(e).provinceByLetter.S[0]["山西"][U].name+"</span>";$(".ShanXi .city-content").append(q);for(var G="",V=0;V<JSON.parse(e).provinceByLetter.S[1]["山东"].length;V++)G+='<span class="city-name">'+JSON.parse(e).provinceByLetter.S[1]["山东"][V].name+"</span>";$(".ShanDong .city-content").append(G);for(var H="",W=0;W<JSON.parse(e).provinceByLetter.S[2]["四川"].length;W++)H+='<span class="city-name">'+JSON.parse(e).provinceByLetter.S[2]["四川"][W].name+"</span>";$(".SiChuan .city-content").append(H);for(var Q="",K=0;K<JSON.parse(e).provinceByLetter.S[3]["陕西"].length;K++)Q+='<span class="city-name">'+JSON.parse(e).provinceByLetter.S[3]["陕西"][K].name+"</span>";$(".ShanXiProvince .city-content").append(Q);for(var Z="",J=0;J<JSON.parse(e).provinceByLetter.T[0]["台湾"].length;J++)Z+='<span class="city-name">'+JSON.parse(e).provinceByLetter.T[0]["台湾"][J].name+"</span>";$(".TaiWan .city-content").append(Z);for(var X="",Y=0;Y<JSON.parse(e).provinceByLetter.X[0]["西藏"].length;Y++)X+='<span class="city-name">'+JSON.parse(e).provinceByLetter.X[0]["西藏"][Y].name+"</span>";$(".XiZang .city-content").append(X);for(var ee="",te=0;te<JSON.parse(e).provinceByLetter.X[1]["新疆"].length;te++)ee+='<span class="city-name">'+JSON.parse(e).provinceByLetter.X[1]["新疆"][te].name+"</span>";$(".XinJiang .city-content").append(ee);for(var ne="",re=0;re<JSON.parse(e).provinceByLetter.Y[0]["云南"].length;re++)ne+='<span class="city-name">'+JSON.parse(e).provinceByLetter.Y[0]["云南"][re].name+"</span>";$(".YunNan .city-content").append(ne);for(var ie="",oe=0;oe<JSON.parse(e).provinceByLetter.Z[0]["浙江"].length;oe++)ie+='<span class="city-name">'+JSON.parse(e).provinceByLetter.Z[0]["浙江"][oe].name+"</span>";$(".ZheJiang .city-content").append(ie);for(var ae="",se=0;se<JSON.parse(e).cityByLetter.A.length;se++)ae+='<span class="city-name">'+JSON.parse(e).cityByLetter.A[se].name+"</span>";$(".A .city-content").append(ae);for(var le="",ue=0;ue<JSON.parse(e).cityByLetter.B.length;ue++)le+='<span class="city-name">'+JSON.parse(e).cityByLetter.B[ue].name+"</span>";$(".B .city-content").append(le);for(var ce="",he=0;he<JSON.parse(e).cityByLetter.C.length;he++)ce+='<span class="city-name">'+JSON.parse(e).cityByLetter.C[he].name+"</span>";$(".C .city-content").append(ce);for(var fe="",de=0;de<JSON.parse(e).cityByLetter.D.length;de++)fe+='<span class="city-name">'+JSON.parse(e).cityByLetter.D[de].name+"</span>";$(".D .city-content").append(fe);for(var pe="",me=0;me<JSON.parse(e).cityByLetter.E.length;me++)pe+='<span class="city-name">'+JSON.parse(e).cityByLetter.E[me].name+"</span>";$(".E .city-content").append(pe);for(var ge="",ye=0;ye<JSON.parse(e).cityByLetter.F.length;ye++)ge+='<span class="city-name">'+JSON.parse(e).cityByLetter.F[ye].name+"</span>";$(".F .city-content").append(ge);for(var _e="",ve=0;ve<JSON.parse(e).cityByLetter.G.length;ve++)_e+='<span class="city-name">'+JSON.parse(e).cityByLetter.G[ve].name+"</span>";$(".G .city-content").append(_e);for(var be="",we=0;we<JSON.parse(e).cityByLetter.H.length;we++)be+='<span class="city-name">'+JSON.parse(e).cityByLetter.H[we].name+"</span>";$(".H .city-content").append(be);for(var xe="",ke=0;ke<JSON.parse(e).cityByLetter.J.length;ke++)xe+='<span class="city-name">'+JSON.parse(e).cityByLetter.J[ke].name+"</span>";$(".J .city-content").append(xe);for(var Le="",Ce=0;Ce<JSON.parse(e).cityByLetter.K.length;Ce++)Le+='<span class="city-name">'+JSON.parse(e).cityByLetter.K[Ce].name+"</span>";$(".K .city-content").append(Le);for(var Se="",Me=0;Me<JSON.parse(e).cityByLetter.L.length;Me++)Se+='<span class="city-name">'+JSON.parse(e).cityByLetter.L[Me].name+"</span>";$(".L .city-content").append(Se);for(var Pe="",Ee=0;Ee<JSON.parse(e).cityByLetter.M.length;Ee++)Pe+='<span class="city-name">'+JSON.parse(e).cityByLetter.M[Ee].name+"</span>";$(".M .city-content").append(Pe);for(var Te="",Ie=0;Ie<JSON.parse(e).cityByLetter.N.length;Ie++)Te+='<span class="city-name">'+JSON.parse(e).cityByLetter.N[Ie].name+"</span>";$(".N .city-content").append(Te);for(var Oe="",De=0;De<JSON.parse(e).cityByLetter.P.length;De++)Oe+='<span class="city-name">'+JSON.parse(e).cityByLetter.P[De].name+"</span>";$(".P .city-content").append(Oe);for(var Ne="",Ae=0;Ae<JSON.parse(e).cityByLetter.Q.length;Ae++)Ne+='<span class="city-name">'+JSON.parse(e).cityByLetter.Q[Ae].name+"</span>";$(".Q .city-content").append(Ne);for(var je="",Re=0;Re<JSON.parse(e).cityByLetter.R.length;Re++)je+='<span class="city-name">'+JSON.parse(e).cityByLetter.R[Re].name+"</span>";$(".R .city-content").append(je);for(var Be="",Fe=0;Fe<JSON.parse(e).cityByLetter.S.length;Fe++)Be+='<span class="city-name">'+JSON.parse(e).cityByLetter.S[Fe].name+"</span>";$(".S .city-content").append(Be);for(var ze="",qe=0;qe<JSON.parse(e).cityByLetter.T.length;qe++)ze+='<span class="city-name">'+JSON.parse(e).cityByLetter.T[qe].name+"</span>";$(".T .city-content").append(ze);for(var Ue="",Ge=0;Ge<JSON.parse(e).cityByLetter.W.length;Ge++)Ue+='<span class="city-name">'+JSON.parse(e).cityByLetter.W[Ge].name+"</span>";$(".W .city-content").append(Ue);for(var $e="",Ve=0;Ve<JSON.parse(e).cityByLetter.X.length;Ve++)$e+='<span class="city-name">'+JSON.parse(e).cityByLetter.X[Ve].name+"</span>";$(".X .city-content").append($e);for(var He="",We=0;We<JSON.parse(e).cityByLetter.Y.length;We++)He+='<span class="city-name">'+JSON.parse(e).cityByLetter.Y[We].name+"</span>";$(".Y .city-content").append(He);for(var Qe="",Ke=0;Ke<JSON.parse(e).cityByLetter.Z.length;Ke++)Qe+='<span class="city-name">'+JSON.parse(e).cityByLetter.Z[Ke].name+"</span>";$(".Z .city-content").append(Qe)})}}],[{key:"getCityList",value:(t=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"services/map_builder/data/localCityData.json");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})}]),e}();n.default=s},{"../../kq":729}],571:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),h=(r=o)&&r.__esModule?r:{default:r};function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"poiResultList",value:function(e,t){$(".buibuilder-searchbar-poi-result").remove();for(var n=e[t],r="",i=0;i<e.length;i++)r+="<li>"+(i+1)+"</li>";var o='<div class="buibuilder-searchbar-poi-result">\n          <div class="builder-searchbar-poi-result-content"></div>\n          <div class="builder-searchbar-poi-result-helper">\n                <ul class="poi-result-helper-pagination">\n                    <li class="iconfont icon-arrow-left"></li>\n                    '+r+'\n                    <li class="iconfont icon-arrow-right"></li>\n                </ul>\n                <div class="poi-save-result-btn">\n                    <div>保存本页搜索结果</div>\n                    <div>保存所选</div>\n                </div>\n          </div>\n      </div>';$(".builder-searchbar-content").append(o),this.poiResultContent(n),$(".poi-result-helper-pagination li.click-active").removeClass("click-active"),$(".poi-result-helper-pagination li")[t+1].classList.add("click-active");var a=$(".poi-result-helper-pagination li.icon-arrow-left")[0],s=$(".poi-result-helper-pagination li.icon-arrow-right")[0];$(".poi-result-helper-pagination li.click-active")[0].previousElementSibling===a&&$(".poi-result-helper-pagination li:first-child").css({"pointer-events":"none",color:"rgba(27,43,82,.86)"}),$(".poi-result-helper-pagination li.click-active")[0].nextElementSibling===s&&$(".poi-result-helper-pagination li:last-child").css({"pointer-events":"none",color:"rgba(27,43,82,.86)"}),this.marker(n),this.clickPoiResultItem(n),this.clickPoiPagination(e),this.clickPoiSaveResultBtn(n)}},{key:"poiResultContent",value:function(e){e.map(function(e,t,n){var r='<div class="poi-result-items">\n            <div class="poi-result-icon iconfont icon-builder-biaoji"></div>\n            <div class="poi-result-info">\n                <div class="title">'+e.name+'</div>\n                <div class="decription">'+e.adname+e.address+'</div>\n            </div>\n            <div class="poi-result-checkbox">\n                <input type="checkbox">\n            </div>\n        </div>';$(".builder-searchbar-poi-result-content").append(r)})}},{key:"marker",value:function(i){for(var o=h.default.Builder.BuilderProject.getInstance().mapView,a=[],e=function(e){var t=i[e].location.split(","),n=[parseFloat(t[1]),parseFloat(t[0])];a.push(n);var r=new h.default.Map.MapMarker(n,{extraIcon:{icon:"icon-draw-marker",markerColor:"blue",prefix:"iconfont"}});r.bindPopup('<div class="builder-searchbar-marker-popup">\n                      <ul>\n                          <li>\n                              <span>name</span>\n                              <span>'+i[e].name+"</span>\n                          </li>\n                          <li>\n                              <span>tel</span>\n                              <span>"+(0===i[e].tel.length?"无电话号码":i[e].tel)+"</span>\n                          </li>\n                          <li>\n                              <span>address</span>\n                              <span>"+i[e].adname+i[e].address+"</span>\n                          </li>\n                          <li>\n                              <span>type</span>\n                              <span>"+i[e].type+"</span>\n                          </li>\n                      </ul>\n                  </div>"),r.addToMapView(o),$(".builder-searchbar-clear-input").on("click",function(){$(".builder-searchbar-input-text").val(null),$(".builder-searchbar-clear-input").css("display","none"),$(".buibuilder-searchbar-poi-result").css("display","none"),r.remove()}),$(".builder-searchbar-search").on("click",function(){r.remove()}),$(".poi-result-helper-pagination li").on("click",function(){r.remove()})},t=0;t<i.length;t++)e(t);o._getMap().flyToBounds(a)}},{key:"clickPoiResultItem",value:function(o){var a=h.default.Builder.BuilderProject.getInstance().mapView;$(".builder-searchbar-poi-result-content .poi-result-items").on("click",function(e){e.stopPropagation();var t=$(".builder-searchbar-poi-result-content .poi-result-items");$(".builder-searchbar-poi-result-content .poi-result-items.click-active").removeClass("click-active"),e.currentTarget.classList.add("click-active");for(var n=0;n<t.length;n++)if(e.currentTarget===t[n]){var r=o[n].location.split(","),i=[parseFloat(r[1]),parseFloat(r[0])];a._getMap().flyTo(i)}})}},{key:"clickPoiPagination",value:function(n){$(".poi-result-helper-pagination li:not(.iconfont)").on("click",function(e){e.stopPropagation();var t=e.target.innerText;(new h.default.Builder.BuilderUi.BuilderSearchBarPoiResult).poiResultList(n,t-1)}),$(".poi-result-helper-pagination li.icon-arrow-left").on("click",function(e){e.stopPropagation();var t=parseInt($(".poi-result-helper-pagination li.click-active").text());(new h.default.Builder.BuilderUi.BuilderSearchBarPoiResult).poiResultList(n,t-2)}),$(".poi-result-helper-pagination li.icon-arrow-right").on("click",function(e){e.stopPropagation();var t=parseInt($(".poi-result-helper-pagination li.click-active").text());(new h.default.Builder.BuilderUi.BuilderSearchBarPoiResult).poiResultList(n,t)})}},{key:"clickPoiSaveResultBtn",value:function(l){function u(e,t,n,r,i,o){var a=h.default.Common.ComputeTools.guid();h.default.Map.MapGeoman.getInstance().addGeomanLayer(a,i);var s=h.default.Builder.BuilderProject.getInstance().layersContainer,l=s.items()[0],u=s.getDataFromListItem(l),c=u.layer.getRender();o.push({id:a,name:e,type:"point",poiTel:t,poiAddress:n,poiType:r}),c.setDataSource(o),$("#vector-layers-container").trigger("select",[u,l]),h.default.Map.MapGeoman.getInstance().displayGeomanLayerById(a,!0)}$(".poi-save-result-btn div:first-child").on("click",a(regeneratorRuntime.mark(function e(){var i,t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $(".builder-searchbar-clear-input").trigger("click"),e.next=3,h.default.Builder.BuilderCommon.addNewLayer({name:"POI注记图层",type:"HAND_DRAW_DATA"});case 3:for(i=[],t=function(e){var t=l[e].location.split(","),n=[parseFloat(t[1]),parseFloat(t[0])],r=L.marker(n);r.bindPopup('<div class="builder-searchbar-marker-popup">\n              <ul>\n                  <li>\n                      <span>name</span>\n                      <span>'+l[e].name+"</span>\n                  </li>\n                  <li>\n                      <span>tel</span>\n                      <span>"+(0===l[e].tel.length?"无电话号码":l[e].tel)+"</span>\n                  </li>\n                  <li>\n                      <span>address</span>\n                      <span>"+l[e].adname+l[e].address+"</span>\n                  </li>\n                  <li>\n                      <span>type</span>\n                      <span>"+l[e].type+"</span>\n                  </li>\n              </ul>\n          </div>"),setTimeout(function(){u(l[e].name,0===l[e].tel.length?"无电话号码":l[e].tel,l[e].adname+l[e].address,l[e].type,r,i)},100)},n=0;n<l.length;n++)t(n);case 6:case"end":return e.stop()}},e,this)}))),$(".poi-save-result-btn div:last-child").on("click",a(regeneratorRuntime.mark(function e(){var o,a,s,t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $(".builder-searchbar-clear-input").trigger("click"),e.next=3,h.default.Builder.BuilderCommon.addNewLayer({name:"POI注记图层",type:"HAND_DRAW_DATA"});case 3:for(o=[],a=$(".poi-result-checkbox input:checked"),s=$(".poi-result-items"),t=function(t){for(var e=l[t].location.split(","),n=[parseFloat(e[1]),parseFloat(e[0])],r=0;r<a.length;r++){var i=a[r].parentNode.parentNode;s[t]===i&&function(){var e=L.marker(n);e.bindPopup('<div class="builder-searchbar-marker-popup">\n                  <ul>\n                      <li>\n                          <span>name</span>\n                          <span>'+l[t].name+"</span>\n                      </li>\n                      <li>\n                          <span>tel</span>\n                          <span>"+(0===l[t].tel.length?"无电话号码":l[t].tel)+"</span>\n                      </li>\n                      <li>\n                          <span>address</span>\n                          <span>"+l[t].adname+l[t].address+"</span>\n                      </li>\n                      <li>\n                          <span>type</span>\n                          <span>"+l[t].type+"</span>\n                      </li>\n                  </ul>\n              </div>"),setTimeout(function(){u(l[t].name,0===l[t].tel.length?"无电话号码":l[t].tel,l[t].adname+l[t].address,l[t].type,e,o)},100)}()}},n=0;n<s.length;n++)t(n);case 8:case"end":return e.stop()}},e,this)})))}}]),e}();n.default=s},{"../../kq":729}],572:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=M(e("./LayerListBox")),i=M(e("./FileLoadDialog")),o=M(e("./DatabaseLoadDialog")),a=M(e("./DataServiceLoadDialog")),s=M(e("./WebLayerLoadDialog")),l=M(e("./ProjectLoadDialog")),u=M(e("./BuilderInfoDialog")),c=M(e("./ProjectSaveAsDialog")),h=M(e("./BuilderLayerAttributeDialog")),f=M(e("./AccountInfoDialog")),d=M(e("./BuilderUserInfo")),p=M(e("./BuilderSearchBar")),m=M(e("./HandDrawLayerListBox")),g=M(e("./BuilderSearchBarPoiResult")),y=M(e("./HandDrawEditDialog")),_=M(e("./CreateFirstMapDialog")),v=M(e("./AccountInfo")),b=M(e("./HandDrawEditInfo")),w=M(e("./HandDrawEditAttribute")),x=M(e("./InformationTips")),k=M(e("./render_setting/container/ColorField")),L=M(e("./render_setting/RenderSettingUi")),C=M(e("./render_setting/RenderSettingDataSource")),S=M(e("./HandDrawTextEditDialog"));function M(e){return e&&e.__esModule?e:{default:e}}var P={LayerListBox:r.default,FileLoadDialog:i.default,DatabaseLoadDialog:o.default,DataServiceLoadDialog:a.default,WebLayerLoadDialog:s.default,ProjectLoadDialog:l.default,BuilderInfoDialog:u.default,ProjectSaveAsDialog:c.default,BuilderLayerAttributeDialog:h.default,AccountInfoDialog:f.default,BuilderUserInfo:d.default,BuilderSearchBar:p.default,HandDrawLayerListBox:m.default,BuilderSearchBarPoiResult:g.default,HandDrawEditDialog:y.default,HandDrawTextEditDialog:S.default,CreateFirstMapDialog:_.default,AccountInfo:v.default,HandDrawEdtInfo:b.default,HandDrawEditAttribute:w.default,InformationTips:x.default,ColorField:k.default,RenderSettingUi:L.default,RenderSettingDataSource:C.default};n.default=P},{"./AccountInfo":565,"./AccountInfoDialog":566,"./BuilderInfoDialog":567,"./BuilderLayerAttributeDialog":568,"./BuilderSearchBar":569,"./BuilderSearchBarPoiResult":571,"./BuilderUserInfo":573,"./CreateFirstMapDialog":574,"./DataServiceLoadDialog":576,"./DatabaseLoadDialog":577,"./FileLoadDialog":578,"./HandDrawEditAttribute":579,"./HandDrawEditDialog":580,"./HandDrawEditInfo":581,"./HandDrawLayerListBox":582,"./HandDrawTextEditDialog":583,"./InformationTips":584,"./LayerListBox":585,"./ProjectLoadDialog":586,"./ProjectSaveAsDialog":587,"./WebLayerLoadDialog":589,"./render_setting/RenderSettingDataSource":590,"./render_setting/RenderSettingUi":591,"./render_setting/container/ColorField":592}],573:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createHtml(),this._showUserInfo(),this._accountInfo(),this._createMap(),this._myMap(),this._backHome()}return i(e,[{key:"_createHtml",value:function(){$(".buildersidebar-user-info").append($('<div class="user-info-content">\n          <div class="account-info" style="border-width: 0 1px 1px 0;">\n              <span class="user-info-icon-font iconfont icon-account-info"></span>\n              <span class="title">账户信息</span>\n          </div>\n          <div class="create-map" style="border-width: 0 0 1px 0;">\n              <span class="user-info-icon-font iconfont icon-add-map"></span>\n              <span class="title">创建地图</span>\n          </div>\n          <div class="my-map" style="border-width: 0 1px 0 0;">\n              <span class="user-info-icon-font iconfont icon-my-map"></span>\n              <span class="title">我的地图</span>\n          </div>\n          <div class="back-home" style="border-width: 0;">\n              <span class="user-info-icon-font iconfont icon-home-page"></span>\n              <span class="title">返回首页</span>\n          </div>\n      </div>'))}},{key:"_showUserInfo",value:function(){$(".user-info").on("click",function(e){e.stopPropagation();$(".buildersidebar-user-info")[0].style.display;setTimeout(function(){$(".buildersidebar-user-info").css("display","block")},200),$(document).on("mousedown",function(e){var t=$(e.target);"buildersidebar-user-info"!==t.context.className&&"buildersidebar-user-info"!==t.context.parentNode.className&&"buildersidebar-user-info"!==t.context.parentNode.parentNode.className&&"buildersidebar-user-info"!==t.context.parentNode.parentNode.parentNode.className&&"buildersidebar-user-info"!==(t.context.parentNode.parentNode.parentNode.className&&t.context.parentNode.parentNode.parentNode.parentNode.className)&&$(".buildersidebar-user-info").css("display","none")})})}},{key:"_accountInfo",value:function(){$(".account-info").on("click",function(){console.log("click--账户信息",a.default.Builder.BuilderPortalProxy.currentInfo()),window.accountInfoDialog=null,window.accountInfoDialog||a.default.Builder.BuilderUi.AccountInfo.getInstance().init(),$("#account-info-container").data("kendoWindow").center().open(),$(".buildersidebar-user-info").css("display","none")})}},{key:"_createMap",value:function(){$(".create-map").on("click",function(){console.log("click--创建地图",window.location.href),a.default.Builder.BuilderPortal.isPortalEnvironment()?window.open("http://27.17.43.14:9405/mapbuilder"):window.open(window.location.href),$(".buildersidebar-user-info").css("display","none")})}},{key:"_myMap",value:function(){$(".my-map").on("click",function(){var t,n,r;console.log("click--我的地图"),a.default.Builder.BuilderPortal.isPortalEnvironment()?window.open("http://27.17.43.14:9405/mapDrafting"):(window.loadProjectDialog=null,window.loadProjectDialog||(window.loadProjectDialog=new a.default.Builder.BuilderUi.ProjectLoadDialog("#project-download-container",{title:"我的地图"},{filter:"prj"}),window.loadProjectDialog.on("load",(r=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,loadProject(t.dataSourceInfo.url);case 2:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})),window.loadProjectDialog.on("delete",(n=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$("#confirm-div").kendoConfirm({title:"删除远程工程",content:"工程删除后无法恢复，确定删除？",messages:{okText:"确定",cancelText:"取消"}}).data("kendoConfirm").result.done(function(){$("body").append($('<div id="confirm-div">')),window.loadProjectDialog.fire("delete_event",t)}).fail(function(){$("body").append($('<div id="confirm-div">'))});case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})),window.loadProjectDialog.on("delete_event",(t=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,deleteProjectFile(t.dataSourceInfo.url);case 2:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}))),$("#project-download-container").data("kendoWindow").center().open()),$(".buildersidebar-user-info").css("display","none")})}},{key:"_backHome",value:function(){$(".back-home").on("click",function(){console.log("click--返回首页"),window.open("http://27.17.43.14:9405/index"),$(".buildersidebar-user-info").css("display","none")})}}]),e}();n.default=l},{"../../kq":729}],574:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._windowContentTemplate()}return i(e,[{key:"init",value:function(){this.createWindow(),this.toggleSmallLargeInfo()}},{key:"createWindow",value:function(){if("false"!==(localStorage&&localStorage.getItem("isShowCreateFirstMapDialog"))){var e=$("#create-first-map").kendoWindow({width:"900px",height:"440px",modal:!0,draggable:!1,resizable:!1,content:{template:this._windowContentTemplate()},close:function(){$("#create-first-map .not-show input")[0].checked&&localStorage.setItem("isShowCreateFirstMapDialog","false")}}).data("kendoWindow").center().open();e.wrapper.find(".k-window-title").html('<div class="create-first-map-title">\n          <div>创建第一幅地图</div>\n          <div>多种方式创建地图</div>\n        </div>'),this.createMap(e),changeDialogBackgroundColor("#create-first-map","#152242")}}},{key:"_windowContentTemplate",value:function(){return'<div class="create-first-map-content">\n        <div class="add-file small-info-group">\n          <div class="small-info">\n            <div class="name">数据文件上图</div>\n          </div>\n          <div style="display: none" class="large-info">\n            <div class="name">数据文件上图</div>\n            <div class="des">在地图上添加GeoJSON，Shapefile等数据文件，制作专题</div>\n             <div class="k-button">打开远程文件</div>\n          </div>\n          <img src=\''+a.default.Common.CommonValues.kqwebmapPath+'services/map_builder/images/create_first_map/1.jpg\' alt="">\n        </div>\n        <div class="add-database small-info-group">\n          <div class="small-info">\n            <div class="name">数据服务上图</div>\n          </div>\n          <div style="display: none" class="large-info">\n            <div class="name">数据服务上图</div>\n            <div class="des">在地图上添加数据服务，制作专题图</div>\n            <div class="k-button">加载数据服务器</div>            \n          </div>\n          <img src=\''+a.default.Common.CommonValues.kqwebmapPath+'services/map_builder/images/create_first_map/2.jpg\' alt="">\n          </div>\n        <div class="add-web small-info-group">\n          <div class="small-info">\n            <div class="name">WEB服务上图</div>\n          </div>\n          <div style="display: none" class="large-info">\n            <div class="name">WEB服务上图</div>\n            <div class="des">在地图上叠加KANQ REST服务和OGC标准服务</div>\n            <div class="k-button">添加Web服务</div>\n          </div>\n          <img src=\''+a.default.Common.CommonValues.kqwebmapPath+'services/map_builder/images/create_first_map/3.jpg\' alt="">\n        </div>\n        <div class="add-hand-draw large-info-group">\n          <div style="display: none" class="small-info">\n            <div class="name">手绘图层上图</div>\n          </div>\n          <div class="large-info">\n            <div class="name">手绘图层上图</div>\n            <div class="des">在地图上绘制地图标记，图形，文本，并编辑位置，样式，制作专题图</div>\n            <div class="k-button">创建标记图层</div>\n          </div>\n          <img src=\''+a.default.Common.CommonValues.kqwebmapPath+'services/map_builder/images/create_first_map/4.jpg\' alt="">\n        </div>\n      </div>\n      <div class="not-show">\n        <input id="not-show-anymore" type="checkbox">\n        <label for="not-show-anymore">不再显示</label>\n      </div>'}},{key:"toggleSmallLargeInfo",value:function(){$(".create-first-map-content > div").on("mouseenter",function(){$(".create-first-map-content > div:hover").removeClass("small-info-group").addClass("large-info-group"),$(".create-first-map-content > div:not(:hover)").removeClass("large-info-group").addClass("small-info-group"),$(".create-first-map-content > div:hover .small-info").css("display","none"),$(".create-first-map-content > div:hover .large-info").css("display","block"),$(".create-first-map-content > div:not(:hover) .small-info").css("display","block"),$(".create-first-map-content > div:not(:hover) .large-info").css("display","none")})}},{key:"createMap",value:function(e){var r=this,t=a.default.Builder.BuilderProject.getInstance().mapView;$(".create-first-map-content .add-file .k-button").on("click",function(){var t,n;r.closeDialog(e),window.loadFileDialog=null,window.loadFileDialog||(window.loadFileDialog=new a.default.Builder.BuilderUi.FileLoadDialog("#load-file-layer-container",{filter:"geojson"}),window.loadFileDialog.on("load",(n=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Builder.BuilderCommon.addNewLayer(t.dataSourceInfo);case 2:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})),window.loadFileDialog.on("delete",function(e){$("#confirm-div").kendoConfirm({title:"删除远程图层文件",content:"远程图层文件删除后无法恢复，确定删除？",messages:{okText:"确定",cancelText:"取消"}}).data("kendoConfirm").result.done(function(){$("body").append($('<div id="confirm-div">')),window.loadFileDialog.fire("delete_event",e)}).fail(function(){$("body").append($('<div id="confirm-div">'))})}),window.loadFileDialog.on("delete_event",(t=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,deleteDataFile(t.dataSourceInfo.url);case 2:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}))),$("#load-file-layer-container").data("kendoWindow").center().open()}),$(".create-first-map-content .add-database .k-button").on("click",function(){var t;r.closeDialog(e),window.loadDataServiceDialog=null,window.loadDataServiceDialog||(window.loadDataServiceDialog=new a.default.Builder.BuilderUi.DataServiceLoadDialog("#load-database-layer-container",{filter:"geojson"}),window.loadDataServiceDialog.on("load",(t=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Builder.BuilderCommon.addNewLayer(t.dataSourceInfo);case 2:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}))),$("#load-database-layer-container").data("kendoWindow").center().open()}),$(".create-first-map-content .add-web .k-button").on("click",function(){r.closeDialog(e),window.webLayerLoadDialog=null,window.webLayerLoadDialog||(window.webLayerLoadDialog=new a.default.Builder.BuilderUi.WebLayerLoadDialog("#load-web-layer-container"),window.webLayerLoadDialog.on("confirm",function(e){a.default.Control.Waiting.show(t._getMap(),"pin","meter");try{console.log("dataSourceInfo",e.dataSourceInfo),a.default.Builder.BuilderCommon.addNewLayer(e.dataSourceInfo)}finally{a.default.Control.Waiting.close()}})),$("#load-web-layer-container").data("kendoWindow").center().open()}),$(".create-first-map-content .add-hand-draw .k-button").on("click",function(){r.closeDialog(e),a.default.Control.Waiting.show(t._getMap(),"pin","meter");try{a.default.Builder.BuilderCommon.addNewLayer({name:"未命名注记图层",type:"HAND_DRAW_DATA"})}finally{a.default.Control.Waiting.close()}})}},{key:"closeDialog",value:function(e){$("#create-first-map .not-show input")[0].checked&&localStorage.setItem("isShowCreateFirstMapDialog","false"),e.close()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../../kq":729}],575:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={title:""},i=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=n;return r._id=e,r._options=L.extend({},o,t),r._createWindow(),r._createGrid(),r._createUploadWidget(),r._refreshData(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,L.Evented),r(i,[{key:"_createWindow",value:function(){var e=this,t=$(e._id).kendoWindow({minWidth:700,maxWidth:700,minHeight:436,modal:!0,draggable:!1,resizable:!1,content:{template:e._windowContentTemplate()},open:function(){e._refreshData()}}).data("kendoWindow"),n='<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">'+e._options.title+"</span>";t.wrapper.find(".k-window-title").html(n)}},{key:"_createGrid",value:function(){var r=this;$(r._id+" .layer-data-download").kendoGrid({width:640,height:300,resizable:!0,toolbar:[{template:kendo.template('<button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>')}],columns:r._columns().concat({command:[{text:"加载",click:function(e){var t=this.items().index($(e.currentTarget).closest("tr")),n=this.dataSource.options.data[t];n.dataSourceInfo.url=n.dataSourceInfo.url.replace("http://172.16.0.8:8080","http://27.17.43.14:9411"),r.fire("load",{dataSourceInfo:n.dataSourceInfo})}},{text:"删除",click:function(e){var t=this.items().index($(e.currentTarget).closest("tr")),n=this.dataSource.options.data[t];n.dataSourceInfo.url=n.dataSourceInfo.url.replace("http://172.16.0.8:8080","http://27.17.43.14:9411"),r.fire("delete",{dataSourceInfo:n.dataSourceInfo})}}]})}).data("kendoGrid"),$(r._id+" .layer-data-download .refresh-data").kendoButton({click:function(){r._refreshData()}})}},{key:"_createUploadWidget",value:function(){}},{key:"_windowContentTemplate",value:function(){}},{key:"_uploadTemplate",value:function(){}},{key:"_refreshData",value:function(){}},{key:"_columns",value:function(){}},{key:"_formatFileSize",value:function(e){return(Math.ceil(e/1024)||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+" KB"}}]),i}();n.default=i},{}],576:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=r(e("./DataLoadDialog")),h=r(e("../../kq"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l={title:"加载数据服务器图层"},i=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=L.extend({},l,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n._url="",n._datasourceId="",n._refreshDataServiceList(),n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),o(r,[{key:"_windowContentTemplate",value:function(){return'\n        <div class="ds-content-template">\n            <div class=\'ds-service-list\' style="width: 680px; height: 380px"></div>\n            <div class=\'ds-datasource-list\' style="display: none!important;"></div>\n            <div class=\'ds-feature-class-list\'  style="display: none!important;"></div>\n        </div>'}},{key:"_createGrid",value:function(){this._createDataServiceListGrid(),this._createDataSourceListGrid(),this._createDataFeatureClassListGrid()}},{key:"_createDataServiceListGrid",value:function(){var t,i=this,e=kendo.template('<button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>');$(i._id+" .ds-content-template .ds-service-list").kendoGrid({toolbar:[{template:e}],columns:[{field:"url",title:"服务地址",width:"280px"},{field:"userName",title:"用户名",width:"80px"},{field:"scope",title:"权限",width:"80px"},{field:"createTime",title:"创建时间",width:"140px"}].concat({command:[{text:"加载",click:(t=s(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.items().index($(t.currentTarget).closest("tr")),r=this.dataSource.options.data[n],i._url=r.url,e.next=5,i._refreshDataSourceList();case 5:i._switchGridPage("ds-datasource-list");case 6:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]})}).data("kendoGrid"),$(i._id+"  .ds-content-template .ds-service-list .refresh-data").kendoButton({click:function(){i._refreshDataServiceList()}})}},{key:"_createDataSourceListGrid",value:function(){var t,e,i=this,n=kendo.template('\n                <button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>\n                <button class="previous-page"><span class="fa fa-reply"></span>前一页面</button>');$(i._id+" .ds-content-template .ds-datasource-list").kendoGrid({toolbar:[{template:n}],columns:[{field:"datasourceId",title:"数据源ID"},{field:"typename",title:"类型"},{field:"name",title:"名称"}].concat({command:[{text:"加载",click:(t=s(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.items().index($(t.currentTarget).closest("tr")),r=this.dataSource.options.data[n],i._datasourceId=r.datasourceId,e.next=5,i._refreshFeatureClassList();case 5:i._switchGridPage("ds-feature-class-list");case 6:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]})}).data("kendoGrid"),$(i._id+"  .ds-content-template .ds-datasource-list .refresh-data").kendoButton({click:function(){i._refreshDataSourceList()}}),$(i._id+"  .ds-content-template .ds-datasource-list .previous-page").kendoButton({click:(e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._refreshDataServiceList();case 2:i._switchGridPage("ds-service-list");case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})})}},{key:"_createDataFeatureClassListGrid",value:function(){var e,r=this,t=kendo.template('\n                <button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>\n                <button class="previous-page"><span class="fa fa-reply"></span>前一页面</button>');$(r._id+" .ds-content-template .ds-feature-class-list").kendoGrid({toolbar:[{template:t}],columns:[{field:"name",title:"名称"},{field:"type",title:"类型"}].concat({command:[{text:"加载",click:function(e){var t=this.items().index($(e.currentTarget).closest("tr")),n=this.dataSource.options.data[t];n.dataSourceInfo.url=n.dataSourceInfo.url.replace("http://172.16.0.8:8080","http://27.17.43.14:9411"),r.fire("load",{dataSourceInfo:n.dataSourceInfo})}}]})}).data("kendoGrid"),$(r._id+"  .ds-content-template .ds-feature-class-list .refresh-data").kendoButton({click:function(){r._refreshFeatureClassList()}}),$(r._id+"  .ds-content-template .ds-feature-class-list .previous-page").kendoButton({click:(e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._refreshDataSourceList();case 2:r._switchGridPage("ds-datasource-list");case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})})}},{key:"_refreshDataServiceList",value:(i=s(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n=h.default.Builder.BuilderProject.getInstance().mapView,h.default.Control.Waiting.show(n._getMap(),"pin","meter"),e.prev=3,e.next=6,h.default.Builder.BuilderPortalProxy.getListServiceNoCLassify();case 6:0<(r=e.sent).length?setTimeout(function(){$(t._id+" .ds-content-template .ds-service-list").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:r}))},0):h.default.Control.Notification.getInstance().showError("读取服务的数据列表失败！");case 8:return e.prev=8,h.default.Control.Waiting.close(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(){return i.apply(this,arguments)})},{key:"_refreshDataSourceList",value:(n=s(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this)._url,r=h.default.Builder.BuilderProject.getInstance().mapView,h.default.Control.Waiting.show(r._getMap(),"pin","meter"),e.prev=4,console.time("刷新数据源列表耗时"),i=new h.default.ServiceTool.ServiceToolData({url:n}),e.t0=JSON,e.next=10,i.getDatasourceList();case 10:if(e.t1=e.sent,"success"===(o=e.t0.parse.call(e.t0,e.t1)).resultcode){for(o=o.result,a=[],s=0;s<o.length;++s)l=o[s],u="",u=21==l.type?l.path:l.database,a.push({url:n,datasourceId:l.id,typename:l.typename,name:u});setTimeout(function(){$(t._id+" .ds-content-template .ds-datasource-list").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:a}))},0)}else h.default.Control.Notification.getInstance().showError("读取服务的数据列表失败！");case 13:return e.prev=13,h.default.Control.Waiting.close(),console.timeEnd("刷新数据源列表耗时"),e.finish(13);case 17:case"end":return e.stop()}},e,this,[[4,,13,17]])})),function(){return n.apply(this,arguments)})},{key:"_refreshFeatureClassList",value:(t=s(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this)._url,r=t._datasourceId,i=h.default.Builder.BuilderProject.getInstance().mapView,h.default.Control.Waiting.show(i._getMap(),"pin","meter"),e.prev=5,console.time("刷新要素集列表耗时"),o=new h.default.ServiceTool.ServiceToolData({url:n}),e.t0=JSON,e.next=11,o.getCatalog({datasourceId:r});case 11:if(e.t1=e.sent,"success"===(a=e.t0.parse.call(e.t0,e.t1)).resultcode){for(s=a.result.featureClasses,l=[],u=0;u<s.length;++u)c=s[u],l.push({name:c.name,type:"Data Service",dataSourceInfo:{type:"DS_DATA",url:n,datasourceId:r,featureClassName:c.name,name:c.name}});setTimeout(function(){$(t._id+" .ds-content-template .ds-feature-class-list").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:l}))},0)}else h.default.Control.Notification.getInstance().showError("读取服务的数据列表失败！");case 14:return e.prev=14,h.default.Control.Waiting.close(),console.timeEnd("刷新要素集列表耗时"),e.finish(14);case 18:case"end":return e.stop()}},e,this,[[5,,14,18]])})),function(){return t.apply(this,arguments)})},{key:"_switchGridPage",value:function(e){var t=$(this._id+" .ds-content-template ."+e);t.siblings().css("cssText","display:none!important"),t.css("cssText","display:block!important; width: 680px; height: 380px")}}]),r}();n.default=i},{"../../kq":729,"./DataLoadDialog":575}],577:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("./DataLoadDialog")),o=a(e("../../kq"));function a(e){return e&&e.__esModule?e:{default:e}}var s={title:"加载数据库图层"},l=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=L.extend({},s,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"_windowContentTemplate",value:function(){return"\n        <div class='layer-data-download'></div>"}},{key:"_refreshData",value:function(){for(var e=this,t=(new o.default.Data.DataManager).getDBFileDataSourceInfos(),n=[],r=0;r<t.length;++r){var i=t[r];n.push({name:i.name,type:"database",dataSourceInfo:i})}setTimeout(function(){$(e._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:n}))},0)}},{key:"_columns",value:function(){return[{field:"name",title:"名称"},{field:"type",title:"类型"}]}}]),n}();n.default=l},{"../../kq":729,"./DataLoadDialog":575}],578:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("./DataLoadDialog")),o=a(e("../../kq"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l={title:"加载远程文件图层"},u=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=L.extend({},l,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}var t;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"_createUploadWidget",value:function(){var t,n=this,e=o.default.Builder.BuilderPortalProxy.uploadUrl();$(n._id+" .layer-data-upload").kendoUpload({async:{saveUrl:e,removeUrl:"remove",autoUpload:!1,chunkSize:10485760},select:function(e){var t=e.files;-1!=$.inArray(t[0].extension,[".geojson"])||(e.preventDefault(),this.removeAllFiles(),o.default.Control.Notification.getInstance().showError("上传文件类型必须为GeoJson。"))},success:function(e){n._refreshData()},upload:(t=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.default.Builder.BuilderPortal.isPortalEnvironment())return n=o.default.Builder.BuilderPortal.currentInfo(),t.sender.options.async.saveUrl+="?jwt_auth="+n.jwt,e.next=5,o.default.Builder.BuilderPortal.isLogin();e.next=7;break;case 5:e.sent?t.sender.options.async.saveUrl+="?jwt_auth="+n.jwt:(o.default.Builder.BuilderPortal.openLoginDialog(),t.preventDefault(),this.removeAllFiles());case 7:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}),multiple:!1,template:kendo.template(n._uploadTemplate())})}},{key:"_windowContentTemplate",value:function(){return"\n        <div class='layer-data-download'></div>\n        <input type='file' name='files' class='layer-data-upload'/>"}},{key:"_uploadTemplate",value:function(){return"\n        <div class=\"layer-data-upload-template\">\n            <span class='k-progress'></span>\n            <div class='file-wrapper'>\n                <span class='file-icon'></span> \n                <h4 class='file-heading file-name-heading'>Name: #=name#</h4>\n                <h4 class='file-heading file-size-heading'>Size: #=size# bytes</h4>\n                <strong class=\"k-upload-status\">\n                    <button type='button' class='k-upload-action'></button>\n                    <button type='button' class='k-upload-action'></button>\n                </strong>\n            </div>\n        </div>"}},{key:"_refreshData",value:(t=s(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n=o.default.Builder.BuilderProject.getInstance().mapView,o.default.Control.Waiting.show(n._getMap(),"pin","meter"),e.prev=3,e.next=6,o.default.Data.DataManager.getInstance().getWebFileDataSourceInfos("geojson");case 6:(r=e.sent)?setTimeout(function(){$(t._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:r}))},0):o.default.Control.Notification.getInstance().showError("读取远程文件列表失败！");case 8:return e.prev=8,o.default.Control.Waiting.close(),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(){return t.apply(this,arguments)})},{key:"_columns",value:function(){return[{field:"name",title:"名称"},{field:"time",title:"修改时间"},{field:"type",title:"类型"}]}}]),n}();n.default=u},{"../../kq":729,"./DataLoadDialog":575}],579:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq");(r=o)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){this.attribute(e)}},{key:"attribute",value:function(e){$("#tabstrip > div:nth-child(4) .name input").val(e.name),$("#tabstrip > div:nth-child(4) .tel input").val(e.poiTel),$("#tabstrip > div:nth-child(4) .address input").val(e.poiAddress),$("#tabstrip > div:nth-child(4) .type input").val(e.poiType)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../../kq":729}],580:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._grid=null,this._window=null,this._init()}return r(e,[{key:"open",value:function(e){var t=(e=e||{}).title?e.title:"标注编辑";this._window.title(t),this._window.center().open()}},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){$("#tabstrip").kendoTabStrip({animation:{open:{effects:"fadeIn"}}})}},{key:"_initUi",value:function(){this._createWindow()}},{key:"_createWindow",value:function(){this._window=$("#hand-draw-edit-dialog").kendoWindow({width:360,height:360,actions:["Close"]}).data("kendoWindow")}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],581:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){this.togglePicture(),this.uploadPicture(),this.title(e.name)}},{key:"togglePicture",value:function(){$(".picture .pic-container-header span:first-child").on("click",function(){$(".picture .pic-container-header span:first-child").addClass("active"),$(".picture .pic-container-header span:last-child").removeClass("active"),$(".picture .pic-container-content.upload-image").css("display","flex"),$(".picture .pic-container-content.network-image").css("display","none")}),$(".picture .pic-container-header span:last-child").on("click",function(){$(".picture .pic-container-header span:first-child").removeClass("active"),$(".picture .pic-container-header span:last-child").addClass("active"),$(".picture .pic-container-content.upload-image").css("display","none"),$(".picture .pic-container-content.network-image").css("display","block")})}},{key:"uploadPicture",value:function(){var e=a.default.Builder.BuilderPortalProxy.uploadUrl();$(".picture .pic-container .pic-container-content.upload-image .upload #upload-image-files").kendoUpload({async:{saveUrl:e,removeUrl:"remove",autoUpload:!1,chunkSize:10485760},multiple:!1,localization:{select:"点击上传"}})}},{key:"title",value:function(e){$("#tabstrip > div:nth-child(2) > div.title label input").val(e)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../../kq":729}],582:[function(s,e,l){(function(e){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t,n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=s("../../kq"),i=(t=r)&&t.__esModule?t:{default:t};var o={},a=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);this._id=e,$("#"+this._id).addClass("builder-hand-draw-container"),n.template=kendo.template(this._template()),this._initGlobalFunction(),$("#"+e).kendoListBox(n),this._listbox=$("#"+e).data("kendoListBox")}return n(r,[{key:"setDataSource",value:function(e){this._listbox.setDataSource(new kendo.data.DataSource({data:e}))}},{key:"_template",value:function(){return'<div onclick="triggerEventHandleBuilder(\'select\', this, event)" onmouseenter="onmouseenterHandleBuilder(this)" onmouseleave="onmouseleaveHandleBuilder(this)" style="height: 100%; width: 100%; margin-top: 20px">\n            <div class="marker-feature">\n                <span class="icon iconfont icon-shape-#:data.type#"></span>\n                <span class="editable-span base title" onclick="triggerEventHandleHandDraw(\'hand_draw_layer_rename\', this, event)">\n                    <span>#:name#</span>\n                    <input style="display: none;" value=#:data.name#>\n                </span>\n                    \n                <span class="fa fa-edit" onclick="triggerEventHandleHandDraw(\'hand_draw_layer_edit\', this, event)"></span>\n                <span class="fa fa-trash" onclick="triggerEventHandleHandDraw(\'hand_draw_layer_delete\', this, event)"></span>\n            </div>\n        </div>'}},{key:"_initGlobalFunction",value:function(){var r=this;e.triggerEventHandleHandDraw=e.triggerEventHandleHandDraw||function(e,t,n){n.stopPropagation(),t=$(t).closest("li"),$("#"+r._id).trigger(e,[r.getDataFromListItem(t),t])}}},{key:"getDataFromListItem",value:function(e){var t=this._listbox.dataItem(e);return t.layer=i.default.Map.MapGeoman.getInstance().getLayer(t.id),t}},{key:"remove",value:function(e){this._listbox.remove(e)}},{key:"add",value:function(e){var t=this._listbox.dataSource;t.add(e),t.sync()}},{key:"dataItems",value:function(){return this._listbox.dataItems()}},{key:"items",value:function(){return this._listbox.items()}},{key:"dataItem",value:function(e){return this._listbox.dataItem(e)}},{key:"clear",value:function(){this._listbox.remove(this._listbox.items())}},{key:"_createTooltip",value:function(){}},{key:"reset",value:function(e){this.setDataSource(e)}},{key:"dataSource",value:function(){for(var e=[],t=this.dataItems(),n=0;n<t.length;++n){var r=t[n];e.push({id:r.id,name:r.name,type:r.type,poiTel:"",poiAddress:"",poiType:""})}return e}}]),r}();l.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../kq":729}],583:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=null,this.id="#hand-draw-text-edit-dialog",this.editor=null,this.toolTextWidth=null,this.isAllRange=!1,this._init()}return r(e,[{key:"open",value:function(e){var t=this,n=(e=e||{}).title?e.title:"文本标注",r=e.editorOptions;this.editor.value(r.text),this.toolTextWidth.value(parseInt(r.maxWidth));var i=this.editor.getRange()||this.editor.createRange();i.selectNodeContents(this.editor.body),this.editor.selectRange(i),setTimeout(function(){t.editor.exec("backColor",{value:r.backgroundColor})},10),this._window.title(n),this._window.center().open()}},{key:"_init",value:function(){this._initUi()}},{key:"_initUi",value:function(){this._createWindow(),this._createEditor(),this._createToolTextWidth()}},{key:"_createWindow",value:function(){this._window=$(this.id).kendoWindow({width:384,height:300,actions:["Close"]}).data("kendoWindow")}},{key:"_createEditor",value:function(){var n=this;this.editor=$(this.id+" .content").kendoEditor({tools:["bold","italic","justifyLeft","justifyCenter","justifyRight","justifyFull",{name:"foreColor",palette:""},{name:"backColor",palette:""},{name:"fontName",items:[].concat([{text:"仿宋",value:"仿宋"},{text:"宋体",value:"宋体"},{text:"楷体",value:"楷体"},{text:"黑体",value:"黑体"},{text:"幼圆",value:"幼圆"},{text:"隶书",value:"隶书"},{text:"方正姚体",value:"方正姚体"},{text:"方正舒体",value:"方正舒体"},{text:"华文中宋",value:"华文中宋"},{text:"华文行楷",value:"华文行楷"},{text:"Microsoft YaHei",value:"Microsoft YaHei"}],kendo.ui.Editor.fn.options.fontName)},{name:"fontSize",items:[{text:"6px",value:"6px"},{text:"7px",value:"7px"},{text:"8px",value:"8px"},{text:"9px",value:"9px"},{text:"10px",value:"10px"},{text:"11px",value:"11px"},{text:"12px",value:"12px"},{text:"14px",value:"14px"},{text:"16px",value:"16px"},{text:"18px",value:"18px"},{text:"20px",value:"20px"},{text:"22px",value:"22px"},{text:"24px",value:"24px"}]},{name:"textWidth",template:'<input class="text-width" title="文本框最大宽度"/>'}],execute:function(e){if("insertparagraph"===e.name)setTimeout(function(){n._render()},10);else if(n.isAllRange)n.isAllRange=!n.isAllRange,setTimeout(function(){n._render(),n._moveToEnd()},10);else{var t=n.editor.getRange()||n.editor.createRange();t.selectNodeContents(n.editor.body),n.isAllRange=!n.isAllRange,n.editor.exec(e.name,{value:e.command.options.value,range:t}),e.preventDefault()}}}).data("kendoEditor"),$(this.id+" table").css("height","290px"),$(this.id+" table tbody ul li .k-fontSize").closest(".k-combobox").css("width","100px"),$(this.editor.body).bind("input propertychange",function(){n._render()}),$(this.editor.body).keyup(function(e){8===e.keyCode&&n._render()})}},{key:"_createToolTextWidth",value:function(){var t=this;this.toolTextWidth=$(this.id+" .text-width").kendoNumericTextBox({min:0,max:1e3,format:"n0",spin:function(){t._render()},change:function(){t._render()}}).data("kendoNumericTextBox"),$(this.id+" .text-width").closest("li").css("width","80px"),this.toolTextWidth.element.on("keyup",function(e){t.toolTextWidth.value(e.target.value),t.toolTextWidth.trigger("change")})}},{key:"_render",value:function(){var e=this.editor.value(),t=this.editor.state("backColor"),n=this.toolTextWidth.value()+"px";KQ.Map.MapGeomanStyleEditor.getInstance().changeStyle(KQ.Builder.BuilderProject.getInstance().setting.handDrawLayer,{text:e,backgroundColor:t,maxWidth:n})}},{key:"_moveToEnd",value:function(){this.editor.value(this.editor.value());var e=this.editor.getRange()||this.editor.createRange();e.selectNodeContents(this.editor.body),e.collapse(!1),this.editor.selectRange(e)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],584:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(e,t,n){this.informationTipsTemplate(e),this.tips(e,t,n)}},{key:"informationTipsTemplate",value:function(e){$(e).append('<div class="information-tips" style="font-size: 12px;display: flex;justify-content: center;align-items: center;">?</div>')}},{key:"tips",value:function(e,t,n){$(e).kendoTooltip({position:"right",content:'\n        <span style="color: rgba(255,255,255,.8);display: block;text-align: left;margin-right: -15px">\n          '+t+"\n        </span>\n      ",width:n}).data("kendoTooltip")}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],585:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i={},n=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},i,t);this._id=e,$("#"+this._id).addClass("builder-container"),n.template=kendo.template(this._template()),n.draggable={placeholder:this._customPlaceholder.bind(this)},this._initGlobalFunction(),$("#"+e).kendoListBox(n),this._listbox=$("#"+e).data("kendoListBox")}return t(r,[{key:"setDataSource",value:function(e){var t=new kendo.data.DataSource({data:e});this._listbox.setDataSource(t),this._createTooltip()}},{key:"onmouseenterHandle",value:function(e){$(e).parent().addClass("largeSize"),$(e).children(".secound-line").css("display","block")}},{key:"_template",value:function(){return'<div onclick="triggerEventHandleBuilder(\'select\', this, event)" onmouseenter="onmouseenterHandleBuilder(this)" onmouseleave="onmouseleaveHandleBuilder(this)" style="height: 100%; width: 100%">\n            <div class="first-line">\n                <div class="layer-icon">\n                    <span class="icon iconfont icon-shape-#:data.type#"></span>\n                </div>\n                \n                <span class="editable-span title" title=#:data.name#>\n                    <span style="display: inline-block;">#:name#</span>\n                    <input value=#:data.name# style="display: none;">\n                </span>\n                \n                <span class="fa fa-eye" style="opacity: 0;" onclick="toggleLayerVisible(this, event)"></span>\n            </div>\n\n            <div class="secound-line" style="display: none;">\n                <span class="fa fa-arrows-alt" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_full_map\', this, event)"></span>\n               \n                <span>\n                    <span class="fa fa-arrow-down" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_export\', this, event)"></span>\n                    <span class="fa fa-table" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_attribute_table\', this, event)"></span>\n                    <span class="fa fa-bar-chart" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_legend\', this, event)"></span>\n                    <span class="fa fa-trash" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_layer_delete\', this, event)"></span>\n                </span>\n                \n                <span tabindex="-1">\n                    <span class="fa fa-ellipsis-v" style="cursor: pointer;" onclick="popupMenuHandleBuilder(\'builder_popup\', this, event)"></span>\n                \n                    <div class="lists" style="display: none;">\n                        <div>\n                            <span class="fa fa-pencil-square-o" onclick="triggerEventHandleBuilder(\'builder_rename\', this, event)">重命名</span>\n                        </div>\n                        \n                        <div>\n                            <span class="fa fa-star-half-o" onclick="triggerEventHandleBuilder(\'builder_opacity\', this, event)">不透明度</span>\n                            <div></div>\n                        </div>\n                        \n                        <div>\n                            <span class="fa fa-object-group" onclick="triggerEventHandleBuilder(\'builder_layer_style\', this, event)">图层样式</span>\n                        </div>\n                    \n                        <div>\n                            <span class="fa fa-info-circle" onclick="triggerEventHandleBuilder(\'builder_layer_attribute\', this, event)">图层属性</span>\n                        </div>\n                    </div>\n                </span>\n            </div>\n        <div>'}},{key:"_initGlobalFunction",value:function(){var i=this;e.onmouseenterHandleBuilder=e.onmouseenterHandleBuilder||function(e){$(e).parent().addClass("largeSize"),$(e).children(".secound-line").css("display","block"),$(e).find(".fa-eye").css("opacity","1")},e.onmouseleaveHandleBuilder=e.onmouseleaveHandleBuilder||function(e){$(e).parent().removeClass("largeSize"),$(e).children(".secound-line").css("display","none"),$(e).find(".fa-eye").css("opacity","0"),$(e).children(".secound-line").find(".lists").hide()},e.popupMenuHandleBuilder=e.popupMenuHandleBuilder||function(e,t,n){n.stopPropagation(),$(t).siblings(".lists").toggle()},e.toggleLayerVisible=e.toggleLayerVisible||function(e,t){t.stopPropagation();var n="",r=$(e).closest("li");n=$(e).hasClass("fa-eye")?($(e).removeClass("fa-eye"),$(e).addClass("fa-eye-slash"),i._listbox.enable(r,!1),$(e).css("pointer-events","auto"),"builder_layer_invisible"):($(e).addClass("fa-eye"),$(e).removeClass("fa-eye-slash"),i._listbox.enable(r,!0),"builder_layer_visible"),$("#"+i._id).trigger(n,i.getDataFromListItem(r))},e.triggerEventHandleBuilder=e.triggerEventHandleBuilder||function(e,t,n){n.stopPropagation(),t=$(t).closest("li"),$("#"+i._id).trigger(e,[i.getDataFromListItem(t),t])}}},{key:"getDataFromListItem",value:function(e){var t=this._listbox.dataItem(e);return t.layer=KQ.Builder.BuilderProject.getInstance().getLayer(t.layerId),t}},{key:"remove",value:function(e){this._listbox.remove(e)}},{key:"unshift",value:function(e){var t=this._listbox.dataSource;t.insert(0,e),t.sync(),this._createTooltip()}},{key:"clear",value:function(){this._listbox.remove(this._listbox.items())}},{key:"_customPlaceholder",value:function(e){return e.clone().addClass("custom-placeholder").removeClass("k-ghost")}},{key:"_createTooltip",value:function(){var t={".fa-arrows-alt":"全图",".fa-arrow-down":"导出",".fa-table":"属性表",".fa-bar-chart":"图例",".fa-trash":"删除"},e=function(e){$(e).kendoTooltip({animation:!1,callout:!1,width:60,position:"bottom",content:function(){return t[e]},show:function(e){e.sender.popup.element.css("margin-top","6px"),e.sender.popup.element.css("margin-left","35px"),e.sender.popup.element.find(".k-tooltip-content").css("padding","3px")}})};for(var n in t)e(n)}},{key:"dataItems",value:function(){return this._listbox.dataItems()}},{key:"items",value:function(){return this._listbox.items()}},{key:"dataItem",value:function(e){return this._listbox.dataItem(e)}}]),r}();r.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],586:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("./DataLoadDialog")),a=r(e("../../kq"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default),i(n,[{key:"_createUploadWidget",value:function(){}},{key:"_windowContentTemplate",value:function(){return"\n        <div class='layer-data-download'></div>"}},{key:"_uploadTemplate",value:function(){}},{key:"_refreshData",value:(t=regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,a.default.Data.DataManager.getInstance().getWebFileDataSourceInfos("prj");case 3:(n=e.sent)?setTimeout(function(){$(t._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:n}))},0):a.default.Control.Notification.getInstance().showError("读取工程文件列表失败！");case 5:case"end":return e.stop()}},e,this)}),r=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return r.apply(this,arguments)})},{key:"_columns",value:function(){return[{field:"name",title:"名称"},{field:"time",title:"上传日期"},{field:"type",title:"类型"}]}}]),n}();n.default=s},{"../../kq":729,"./DataLoadDialog":575}],587:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={title:"工程另存为",mark:[]},i=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=n;return r._id=e,r._options=L.extend({},o,t),r._createWindow(),r._initDialogDoms(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,L.Evented),r(i,[{key:"_createWindow",value:function(){var e=$(this._id).kendoWindow({width:520,resizable:!1,draggable:!1,modal:!0,content:{template:this._windowContentTemplate()},open:function(){}}).data("kendoWindow"),t='<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">'+this._options.title+"</span>";e.wrapper.find(".k-window-title").html(t),this.window=e}},{key:"_windowContentTemplate",value:function(){return'\n    <div class=\'layer-data-download web-layer-data-download\'>\n      <div style="width: 520px; margin-top: 24px;"></div>\n        <span style="width: 520px;">\n          <label>另存名称</label>\n          <input class="k-textbox" id="project-saveas-name-input" style="width: 387px;" placeholder="输入工程另存名称">\n        </span>\n      <div style="width: 520px; margin-top: 24px;">\n          <label>用户标记</label>   \n          <input class="k-textbox" id="project-saveas-mark-input" style="width: 387px;" disabled="disabled">\n      </div>\n      <div style="text-align: right;  margin-top: 24px; margin-bottom: 12px;">\n        <div style="display: inline-block; margin-right: 10px; width: 40px;">\n          <button type="button" id="project-saveas-cancel-button" >取消</button>\n        </div>\n        <div style="display: inline-block; margin-right: 38px; width: 40px;">\n          <button type="button" id="project-saveas-save-button" >保存</button>\n        </div>     \n      </div>\n    </div>\n    '}},{key:"_initDialogDoms",value:function(){var e,t,n=this,r=$(n._id+" #project-saveas-save-button").kendoButton({enable:!1,click:function(){var e=$("#project-saveas-name-input")[0].value;n.fire("save",{dataSourceInfo:{name:e,mark:[]}})}}).data("kendoButton");$("#project-saveas-cancel-button").kendoButton({enable:!0,click:function(){console.log("button cancel!"),n.window.close()}}),$("#project-saveas-name-input").change((e=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,console.log("e: ",t),""==n?r.enable(!1):r.enable(!0);case 3:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)}));var i=$(".setting-maptags input")[0].value;$("#project-saveas-mark-input").val(i)}}]),i}();n.default=i},{}],588:[function(e,t,n){"use strict";var r,i=e("../../kq"),a=(r=i)&&r.__esModule?r:{default:r};$(function(){var i,o,e,n,t;i=jQuery,o=window.kendo,e=o.ui,n=e.Widget,t=n.extend({init:function(e,t){n.fn.init.call(this,e,t),this._create()},options:{name:"SaveToolBar",onSelect:function(e){var t=i(e.item).data("type");switch(console.log("Selected: "+t),t){case"save":console.log("do save!");break;case"saveas":console.log("do saveas!");break;case"clouddown":console.log("do clouddown!");break;case"fold":console.log("do fold!"),this.options.sidebar&&this.options.sidebar.close()}}},_create:function(){var e=a.default.Local.Builder.saveToolBar.save(),t=a.default.Local.Builder.saveToolBar.saveAs(),n=(a.default.Local.Builder.saveToolBar.transmit(),a.default.Local.Builder.saveToolBar.colouddown()),r=a.default.Local.Builder.saveToolBar.menuFold();this.element.append('\n        <ul class="save-toolbar">\n          <li><span class="iconfont icon-save"></span>\n            <ul>\n                <li data-type="save">'+e+'</li>\n                <li data-type="saveas">'+t+'</li>\n            </ul>\n          </li>\n          \x3c!--<li data-type="transmit"><span class="iconfont icon-transmit"></span></li>--\x3e\n          <li data-type="clouddown"><span class="iconfont icon-clouddown"></span></li>\n          <li data-type="fold"><span class="iconfont icon-menu-fold"></span></li>\n        </ul>\n        '),o.bind(this.element,this.options),i(".save-toolbar").kendoMenu({select:this.options.onSelect.bind(this)}),i(".iconfont.icon-clouddown").kendoTooltip({position:"bottom",content:function(){return n}}).data("kendoTooltip"),i(".iconfont.icon-menu-fold").kendoTooltip({position:"bottom",content:function(){return r}}).data("kendoTooltip")}}),e.plugin(t)})},{"../../kq":729}],589:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={title:"Web加载图层",serviceTypeList:[{id:0,value:"KQ REST Map Service"},{id:1,value:"OGC WMS Service"},{id:2,value:"OGC WMTS Service"}],serviceAddressList:["http://<server>:<port>/KQGis/rest/services/{servicename}/MapServer","http://<server>:<port>/KQGis/rest/services/{servicename}/MapServer/WMS","http://<server>:<port>/KQGis/rest/services/{servicename}/MapServer/WMTS"],serviceLayerList:[]},i=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=n;return r._id=e,r._typeIndex=0,r._index=0,r._options=L.extend({},o,t),r._createWindow(),r._initDialogDoms(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,L.Evented),r(i,[{key:"_createWindow",value:function(){var e=$(this._id).kendoWindow({width:520,resizable:!1,draggable:!1,modal:!0,content:{template:this._windowContentTemplate()},open:function(){}}).data("kendoWindow"),t='<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">'+this._options.title+"</span>";e.wrapper.find(".k-window-title").html(t),this.window=e}},{key:"_windowContentTemplate",value:function(){return'\n    <div class=\'layer-data-download web-layer-data-download\'>\n      <div style="width: 520px; margin-top: 24px;"></div>\n        <span style="width: 520px;">\n          <label>服务类型</label>\n          <div id="service-type-dropdownlist" style="width: 260px;"></div>\n        </span>\n      <div style="width: 520px; margin-top: 24px; display:inline-block;">\n          <label>服务地址</label>   \n          <input class="k-textbox" id="service-address-input" style="width: 387px;" placeholder="http://<server>:<port>/KQGis/rest/services/{servicename}/MapServer">\n      </div>\n      <div id="web-layer-servicelist-div" style="width: 520px; margin-top: 24px; display:none;">\n          <label>可选图层</label>   \n          <div id="service-layer-dropdownlist" style="width: 260px;"></div>\n      </div>\n      <div id="web-layer-scalelist-div" style="width: 520px; margin-top: 24px; display:none;">\n          <label>比例尺</label>\n          <div id="service-scale-dropdownlist" style="width: 260px;"></div>\n      </div>\n      <div style="text-align: right;  margin-top: 24px; margin-bottom: 12px;">\n        <div style="display: inline-block; margin-right: 10px; width: 40px;">\n          <button type="button" class="k-button" id="web-layer-load-cancel-button">取消</button>\n        </div>\n        <div style="display: inline-block; margin-right: 38px; width: 40px;">\n          <button type="button" class="k-button" id="web-layer-load-confirm-button">添加</button>\n        </div>\n        \n      </div>\n    </div>\n    '}},{key:"_initDialogDoms",value:function(){var e,t,v=this,b=$(v._id+" #web-layer-load-confirm-button").kendoButton({enable:!1,click:function(){switch(console.log("service type index: ",v._typeIndex),v._typeIndex){case 0:v.fire("confirm",{dataSourceInfo:{type:"KQ_DATA",url:v._url,layers:v._options.serviceLayerList[v._index].id,name:v._options.serviceLayerList[v._index].value}});break;case 1:v.fire("confirm",{dataSourceInfo:{type:"WMS_DATA",url:v._url,layers:v._options.serviceLayerList[v._index].id,name:v._options.serviceLayerList[v._index].value}});break;case 2:v.fire("confirm",{dataSourceInfo:{type:"WMTS_DATA",url:v._url,layer:v._options.serviceLayerList[v._index].id,style:"default",tilematrixSet:v._tilematrixSet,format:"png",name:v._options.serviceLayerList[v._index].value}}),console.log("self._tilematrixSet: ",v._tilematrixSet)}}}).data("kendoButton");$(v._id+" #service-type-dropdownlist").kendoDropDownList({dataTextField:"value",dataValueField:"id",dataSource:v._options.serviceTypeList,change:function(e){$("#service-address-input").val("");var t=e.sender.selectedIndex;v._typeIndex=t,$("#service-address-input").attr("placeholder",v._options.serviceAddressList[t]),$("#web-layer-servicelist-div").css("display","none"),b.enable(!1),$("#web-layer-scalelist-div").css("display","none")}}),v._serviceLayerDropdownlist=$(v._id+" #service-layer-dropdownlist").kendoDropDownList({dataTextField:"value",dataValueField:"id",dataSource:v._options.serviceLayerList,select:function(e){v._index=e.dataItem.index,0!=e.dataItem.index?(console.log("options: ",v._options),0!=v._options.serviceLayerList[v._index].scale.length?($("#web-layer-scalelist-div").css("display","inline-block"),v._serviceScaleDropdownlist.setDataSource(v._options.serviceLayerList[v._index].scale),v._serviceScaleDropdownlist.select(0)):b.enable(!0)):(b.enable(!1),$("#web-layer-scalelist-div").css("display","none"))}}).data("kendoDropDownList"),v._serviceScaleDropdownlist=$(v._id+" #service-scale-dropdownlist").kendoDropDownList({dataTextField:"value",dataValueField:"index",dataSource:[],select:function(e){v._scaleIndex=e.dataItem.index,0!=v._scaleIndex?(b.enable(!0),v._tilematrixSet=v._options.serviceLayerList[v._index].scale[v._scaleIndex].value):b.enable(!1)}}).data("kendoDropDownList"),$("#service-address-input").on("change",(e=regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(n=t.target.value))return e.abrupt("return");e.next=3;break;case 3:r=null,e.t0=v._typeIndex,e.next=0===e.t0?7:1===e.t0?12:2===e.t0?16:20;break;case 7:return e.next=9,KQ.Builder.RenderKANQ.getServiceInfoRoot(n);case 9:return r=e.sent,console.log("root: ",r),e.abrupt("break",20);case 12:return e.next=14,KQ.Builder.RenderWMS.getServiceInfoRoot(n);case 14:return r=e.sent,e.abrupt("break",20);case 16:return e.next=18,KQ.Builder.RenderWMTS.getServiceInfoRoot(n);case 18:return r=e.sent,e.abrupt("break",20);case 20:if(r){e.next=27;break}KQ.Control.Notification.getInstance().showError("请求的服务地址不合法！"),$("#web-layer-servicelist-div").css("display","none"),b.enable(!1),$("#web-layer-scalelist-div").css("display","none"),e.next=50;break;case 27:v._url=n,i=[],o="kanq",e.t1=v._typeIndex,e.next=0===e.t1?33:1===e.t1?36:2===e.t1?39:42;break;case 33:return i=KQ.Builder.RenderKANQ.getLayerInfos(r),o="kanq",e.abrupt("break",42);case 36:return i=KQ.Builder.RenderWMS.getLayerInfos(r),o="wms",e.abrupt("break",42);case 39:return i=KQ.Builder.RenderWMTS.getLayerInfos(r),o="wmts",e.abrupt("break",42);case 42:for((a=[]).push({id:"-1",value:"请选择一个图层",index:0}),Array.isArray(i)||(i=[i]),s=0;s<i.length;s++){if(l=i[s],u=l.Title,0==v._typeIndex&&(u=l.name),(c=[]).push({value:"请选择一个比例尺",index:0}),l.TileMatrixSetLink&&0!=l.TileMatrixSetLink.length)for(h=0;h<l.TileMatrixSetLink.length;++h)f={value:l.TileMatrixSetLink[h].TileMatrixSet,index:c.length},c.push(f);else c=[];if(d=s,"wms"===o&&!(d=l.Name?l.Name:"")&&l.Layer)if(Array.isArray(l.Layer))for(p=0;p<l.Layer.length;p++)m={id:l.Layer[p].Name,value:l.Layer[p].Title,index:a.length,scale:c},a.push(m);else d=l.Layer.Name,g={id:d,value:l.Layer.Title,index:a.length,scale:c},a.push(g);"wmts"===o&&(d=l.Identifier.__text,y={id:d,value:u,index:a.length,scale:c},a.push(y)),"kanq"==o&&(d=l.id,_={id:d,value:u,index:a.length,scale:c},a.push(_))}v._options.serviceLayerList=a,v._serviceLayerDropdownlist.setDataSource(a),v._serviceLayerDropdownlist.select(0),$("#web-layer-servicelist-div").css("display","inline-block");case 50:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})),$(v._id+" #web-layer-load-cancel-button").kendoButton({click:function(){v._cancelAddService()}})}},{key:"_confirmAddService",value:function(){console.log("add service!!!")}},{key:"_cancelAddService",value:function(){console.log("cancel add service!!!");$("#web-layer-scalelist-div").css("display","none"),this.window.close()}}]),i}();n.default=i},{}],590:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"sectionThematicFieldList",value:function(){var t=[],e=KQ.Builder.RenderSetting.Common.CommonTools.activeRender();return Object.keys(e.geojsonObjectSectionFields()).forEach(function(e){t.push({name:e,value:e})}),t}}],[{key:"labelFontList",value:function(){return[{name:"仿宋",value:KQ.Common.CommonValues.labelFontName.fangSong},{name:"宋体",value:KQ.Common.CommonValues.labelFontName.song},{name:"微软雅黑",value:KQ.Common.CommonValues.labelFontName.yaHei}]}},{key:"thematicFieldList",value:function(){var t=[],e=KQ.Builder.BuilderCommon.activeRender();return Object.keys(e.geojsonObjectFields()).forEach(function(e){t.push({name:e,value:e})}),t}},{key:"labelFieldList",value:function(){return[{name:"未设置",value:""}].concat(KQ.Builder.BuilderUi.RenderSettingDataSource.thematicFieldList())}},{key:"weightFieldList",value:function(){return[{name:"未设置",value:""}].concat(KQ.Builder.BuilderUi.RenderSettingDataSource.thematicFieldList())}},{key:"lineStyleList",value:function(){var n=[];return Object.values(KQ.Common.CommonValues.lineStyle).forEach(function(e,t){n.push({name:String(t),value:e})}),n}},{key:"sectionMethodList",value:function(){return[{name:"等距分段法",value:KQ.Common.CommonValues.classBreaksMethod.classBreaks_equidistant},{name:"等量分段法",value:KQ.Common.CommonValues.classBreaksMethod.classBreaks_quantile},{name:"对数分段法",value:KQ.Common.CommonValues.classBreaksMethod.classBreaks_logarithmic},{name:"K聚类分段法",value:KQ.Common.CommonValues.classBreaksMethod.classBreaks_k_means}]}},{key:"sectionNumberList",value:function(){for(var e=[],t=2;t<16;++t)e.push({name:String(t),value:t});return e}},{key:"rampColorList",value:function(){for(var e=[],t=0;t<30;++t)e.push({name:String(t),value:String(t)});return e}},{key:"heatmapRampColorList",value:function(){for(var e=[],t=0;t<18;++t)e.push({name:String(t),value:String(t)});return e}},{key:"labelDirectionList",value:function(){return[{name:"中",value:"mid"},{name:"上",value:"up"},{name:"下",value:"down"},{name:"左",value:"left"},{name:"右",value:"right"}]}},{key:"extraIconShape",value:function(){return[{name:"圆形",value:"circle"},{name:"方形",value:"square"},{name:"星形",value:"star"},{name:"五角星",value:"penta"}]}},{key:"extraIconMarkerColor",value:function(){return[{name:"red",value:"red"},{name:"orange-dark",value:"orange-dark"},{name:"orange",value:"orange"},{name:"yellow",value:"yellow"},{name:"blue-dark",value:"blue-dark"},{name:"cyan",value:"cyan"},{name:"purple",value:"purple"},{name:"violet",value:"violet"},{name:"pink",value:"pink"},{name:"green-dark",value:"green-dark"},{name:"green",value:"green"},{name:"green-light",value:"green-light"},{name:"black",value:"black"},{name:"white",value:"white"}]}},{key:"getExtraIconNameFromUnicode",value:function(e){return{"&#xe614":"icon-builder-yuanxing","&#xe6e3":"icon-fangxing","&#xe6ad":"icon-builder-lingxing","&#xe629":"icon-builder-sanjiaoxing","&#xe613":"icon-builder-wujiaoxing","&#xe66b":"icon-builder-hupo","&#xe65a":"icon-builder-heliu","&#xe75f":"icon-builder-shuiku","&#xe656":"icon-builder-gouqu","&#xe679":"icon-builder-tantu","&#xe657":"icon-builder-caodi","&#xe652":"icon-zhaozedi","&#xe615":"icon-builder-chayuan","&#xe67e":"icon-builder-guoyuan","&#xe620":"icon-builder-lindi","&#xe7df":"icon-builder-shuitian","&#xe667":"icon-builder-gangkou","&#xe666":"icon-builder-matou","&#xe642":"icon-builder-feijichang","&#xe640":"icon-builder-huochezhan","&#xe628":"icon-builder-gonggongqichezhan","&#xe67b":"icon-builder-suidao","&#xeac9":"icon-builder-chuzuche","&#xe63f":"icon-builder-jiayouzhan","&#xe61a":"icon-builder-tingchechang","&#xe64d":"icon-builder-dianyingyuan","&#xe626":"icon-builder-shangchang","&#xe6cb":"icon-builder-zhusu","&#xe6b5":"icon-builder-yiyuan","&#xe689":"icon-builder-daxue","&#xe6f6":"icon-builder-cesuo","&#xe71c":"icon-builder-gongyuan","&#xe646":"icon-builder-yinhang","&#xe6c7":"icon-builder-dongwuyuan","&#xe671":"icon-builder-xiaofang","&#xe66f":"icon-builder-canyin","&#xe641":"icon-builder-junshijidi","&#xe63e":"icon-builder-xingzhengjiguan","&#xe63a":"icon-builder-jingju","&#xe676":"icon-builder-jianyu","&#xe739":"icon-builder-cunzhuang","&#xe651":"icon-builder-xiangzhen","&#xe663":"icon-builder-shengzhengfu","&#xe67a":"icon-builder-dasha","&#xe677":"icon-builder-chubanshe","&#xe612":"icon-builder-shangwu","&#xe81f":"icon-builder-fengjing","&#xe65c":"icon-builder-binzang","&#xe664":"icon-builder-gongye","&#xe665":"icon-builder-caikuang","&#xe61f":"icon-builder-zongjiao","&#xe623":"icon-builder-shouye","&#xe624":"icon-builder-fenlei","&#xe62a":"icon-builder-yonghu","&#xe62b":"icon-builder-kefu","&#xe611":"icon-builder-yundong","&#xe66d":"icon-builder-biaoji","&#xe660":"icon-builder-dianhua","&#xe64c":"icon-builder-zhinanzhen","&#xe630":"icon-builder-hongqi"}[e]}}]),e}();n.default=i},{}],591:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=m(e("./container/Filter")),o=m(e("./container/HeatMap")),a=m(e("./container/Label")),s=m(e("./container/Line")),l=m(e("./container/Point")),u=m(e("./container/Polygon")),c=m(e("./container/Section")),h=m(e("./container/Thematic")),f=m(e("./container/HandDrawPoint")),d=m(e("./container/ColorField")),p=m(e("./controls/Controls"));function m(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){i.default.getInstance().init(),o.default.getInstance().init(),a.default.getInstance().init(),s.default.getInstance().init(),l.default.getInstance().init(),u.default.getInstance().init(),c.default.getInstance().init(),h.default.getInstance().init(),f.default.getInstance().init(),p.default.getInstance().init()}},{key:"initColorField",value:function(){d.default.getInstance().init()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=g},{"./container/ColorField":592,"./container/Filter":593,"./container/HandDrawPoint":594,"./container/HeatMap":595,"./container/Label":596,"./container/Line":597,"./container/Point":598,"./container/Polygon":599,"./container/Section":600,"./container/Thematic":601,"./controls/Controls":602}],592:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../controls/Controls"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(){this.builderProject=KQ.Builder.BuilderProject.getInstance(),this.layer=this.builderProject.setting.layer,this.featureType=this.layer.options.featureType,this._updateLegend(),this._render=a.default.getInstance()._render,this._initSingleFieldColorContainer(),this._initSectionFieldColorContainer(),this._initHeatMapFieldColorContainer(),this._initColorPicker(),this._bindEvent()}},{key:"_getColorFieldsArray",value:function(e){var t=KQ.Builder.BuilderProject.getInstance().setting.layer,n=t.render,r=t.options.featureType;return console.log("render: ",n),"single"===e?"point"==r?n.get("single").options.vectorInfo.thematicColors:(console.log("_initDOms.js 1071, thematicColors: ",n.get("single").options.thematicColors),n.get("single").options.thematicColors):"section"===e?"point"==r?n.get("section").options.vectorInfo.thematicColors.colors:n.get("section").options.thematicColors.colors:"heatmap"===e?n.get("heatmap").options.gradient:void 0}},{key:"_getRangeArray",value:function(){var e=KQ.Builder.BuilderProject.getInstance().setting.layer,t=e.render;return"point"==e.options.featureType?t.get("section").options.vectorInfo.thematicColors.breaksData:t.get("section").options.thematicColors.breaksData}},{key:"_updateLegend",value:function(){var e=KQ.Builder.BuilderProject.getInstance().setting.layer;if("none"!=$("#legend-window").parent().css("display")){var t=e.renderType,n=e.render,r=e.options,i=r.featureType,o="item-icon icon iconfont icon-shape-point";"line"==i?o="item-icon icon iconfont icon-shape-line":"polygon"==i&&(o="item-icon icon iconfont icon-shape-polygon");var a=r.name,s=document.createElement("div");if(s.setAttribute("class","item-title"),"point"==i)var l=n.get(t).options.vectorInfo;else"line"!=i&&"polygon"!=i||(l=n.get(t).options);if("basic"==t){var u=document.createElement("div");if("point"==i)var c=l.fillColor;"line"==i?c=l.lineColor:"polygon"==i&&(c=l.fillColor),u.setAttribute("class",o),u.style.color=c,u.style.marginRight="5px",s.append(u)}var h=document.createElement("p");h.innerText=a,s.append(h),$("#legend-window .legend-item").empty(),$("#legend-window .legend-item").append(s);var f="",d=document.createElement("div");d.className="content-info";var p="icon-shape-"+i;if("single"==t)f+='<div class="title" style="margin: 10px 0 10px;">\n                 <span>专题字段：</span>\n                 <span>'+l.thematicField+'</span>\n                </div>\n                <div class="fields-container" style="display: block;">',this._getColorFieldsArray("single").forEach(function(e,t){f+='<div class="fields-item">\n                <span class="icon iconfont '+p+'" style="color: '+e+'"></span>\n                <span class="value">',f+=t+"</span></div>"}),f+="</div>",d.innerHTML=f,$("#legend-window .legend-item").append(d);else if("section"==t){f+='<div class="title"  style="margin: 10px 0 10px;">\n                 <span>专题字段：</span>\n                 <span>'+l.thematicField+'</span>\n                </div>\n                <div class="fields-container" style="display: block;">';var m=this._getColorFieldsArray("section"),g=this._getRangeArray();m.forEach(function(e,t){f+='<div class="fields-item" data-index='+t+' >\n                    <span class="icon iconfont '+p+'" style="color: '+e+'"></span>\n                    <div class="range-values">\n                      <input style="width: 50px" class="value-start" readonly="readonly" value='+g[t].toFixed(3)+'>\n                      <span class="value-hr">-</span>\n                      <input style="width: 50px; float: right; margin-left: 20px;" readonly="readonly" class="value-end" value='+g[t+1].toFixed(3)+">\n                    </div>\n                  </div>"}),f+="</div>",d.innerHTML=f,$("#legend-window .legend-item").append(d)}else if("heatmap"==t){f+='<div class="fields-container" style="display: block; margin-top: 5px;">';var y=n.get(t).options.colorIndex;f+='<span>少</span><span style="margin-left: 80px;">中</span><span style="margin-left: 80px;">多</span>',f+='<span class="selected-value" style="background-image: url(./images/heatmap_ramp/color'+y+'.png)"></span>',f+="</div>",d.innerHTML=f,$("#legend-window .legend-item").append(d)}}}},{key:"_initSingleFieldColorContainer",value:function(){for(var n=this.featureType,e=n+" editor-fields-color single",t=document.getElementsByClassName(e),r=0;r<t.length;r++){var i='<div class="title">\n                 <span>自定义单值</span>\n                  <div class="unique-show"><span>展开</span><i class="fa fa-plus-square-o fields-div-switch state-close"></i></div>\n                </div>\n                <div class="fields-container" style="display: none;">';this._getColorFieldsArray("single").forEach(function(e,t){i+='<div class="fields-item">\n                <span class="icon iconfont icon-shape-'+n+' colors-picker" style="color: '+e+'"><div class="single-colors-picker" value='+e+'></div></span>\n                <span class="value">',i+=t+"</span></div>"}),i+="</div>";var o=document.createElement("div");o.innerHTML=i,$(t[r]).empty(),t[r].appendChild(o)}}},{key:"_initSectionFieldColorContainer",value:function(){for(var i=this,o=this.featureType,e=this.featureType+" editor-fields-color section",a=document.getElementsByClassName(e),t=function(){var n='<div class="title">\n                 <span>自定义分段</span>\n                  <div class="unique-show"><span>展开</span><i class="fa fa-plus-square-o fields-div-switch state-close"></i></div>\n                </div>\n                <div class="fields-container" style="display: none;">',e=i._getColorFieldsArray("section"),r=i._getRangeArray();e.forEach(function(e,t){n+='<div class="fields-item" data-index='+t+' >\n                    <span class="icon iconfont icon-shape-'+o+' colors-picker" style="color: '+e+'"><div class="section-colors-picker" value='+e+'></div></span>\n                    <div class="range-values">\n                      <input style="width: 100px" class="value-start" value='+r[t].toFixed(3)+'>\n                      <span class="value-hr">-</span>\n                      <input style="width: 100px" class="value-end" value='+r[t+1].toFixed(3)+">\n                    </div>\n                  </div>"}),n+="</div>";var t=document.createElement("div");t.innerHTML=n,$(a[s]).empty(),a[s].appendChild(t),$(a[s]).find(".value-start").kendoMaskedTextBox({}),$(a[s]).find(".value-end").kendoMaskedTextBox({})},s=0;s<a.length;s++)t()}},{key:"_initHeatMapFieldColorContainer",value:function(){for(var t=this,e=this.featureType+" editor-fields-color heatmap",i=document.getElementsByClassName(e),n=function(){var n='<div class="editor-fields-color" >\n            <div class="title"><span>自定义颜色</span>\n              <div class="unique-show"><span>展开</span><i class="fa fa-plus-square-o fields-div-switch state-close"></i></div>\n            </div>\n            <div class="fields-container" style="display: none;">',r=t._getColorFieldsArray("heatmap");Object.keys(r).sort().forEach(function(e,t){n+='<div class="editor-tool" data-key='+e+'>\n                  <div class="text">热点颜色'+(Number(t)+1)+'</div>\n                  <div class="heatmap-colors-picker" data-role="colorpicker" value="'+r[e]+'"></div>\n                 </div>'}),n+="</div>";var e=document.createElement("div");e.innerHTML=n,$(i[o]).empty(),i[o].appendChild(e)},o=0;o<i.length;o++)n()}},{key:"_initColorPicker",value:function(){for(var e=this.featureType+" editor-fields-color",t=document.getElementsByClassName(e),n=0;n<t.length;n++)$(t[n]).find(".single-colors-picker").kendoColorPicker({button:!1,change:function(e){var t=e.value,n=$(this)[0].element.parents(".fields-item").find(".value").text(),r=this._getColorFieldsArray("single");$(this)[0].element.parents("span").css("color",t),r.has(n)?r.set(n,t):r.has(Number(n))&&r.set(Number(n),t),this._render()}}),$(t[n]).find(".section-colors-picker").kendoColorPicker({button:!1,change:function(e){var t=e.value,n=$(this)[0].element.parents(".fields-item").attr("data-index"),r=this._getColorFieldsArray("section");$(this)[0].element.parents("span").css("color",t),r[n]=t,this._render()}}),$(t[n]).find(".heatmap-colors-picker").kendoColorPicker({button:!1,change:function(e){var t=e.value,n=$(this)[0].element.parents(".editor-tool").attr("data-key"),r=KQ.Builder.BuilderProject.getInstance().getInfo("render_model").styleOptions;r.gradient=KQ.Common.CommonValues.heatmapColorRamp[r.colorIndex],r.gradient[n]=t,this._render()}})}},{key:"_bindEvent",value:function(){for(var e=this.featureType+" editor-fields-color",t=document.getElementsByClassName(e),n=0;n<t.length;n++)$(t[n]).find(".value-start input").change(function(e){var t=Number($(this).parents(".fields-item").attr("data-index")),n=$(this).parents(".editor-fields-color")[0].classList,r=n[1],i=n[2],o=this._getRangeArray(r,i),a=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,l=Number(e.target.value),u=null;0<=t-1&&(a=o[t-1],u=$(this).parents(".fields-item").prev().find(".value-end input")),t+1<o.length&&(s=o[t+1]),a<l&&l<s?(o[t]=l,u&&u.val(l)):(KQ.Control.Notification.getInstance().showError("数值范围不正确"),e.target.value=o[t]),this.render()}),$(t[n]).find(".value-end input").change(function(e){var t=Number($(this).parents(".fields-item").attr("data-index"))+1,n=$(this).parents(".editor-fields-color")[0].classList[2],r=this._getRangeArray(n),i=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,a=Number(e.target.value),s=null;0<=t-1&&(i=r[t-1]),t+1<r.length&&(o=r[t+1],s=$(this).parents(".fields-item").next().find(".value-start input")),i<a&&a<o?(r[t]=a,s&&s.val(a)):(KQ.Control.Notification.getInstance().showError("数值范围不正确"),e.target.value=r[t]),this._render()}),$(t[n]).find(".colors-picker").click(function(){$(this).find(".k-selected-color")[0].click()}),$(t[n]).find(".fields-div-switch").click(function(){var e=$(this);e.hasClass("state-close")?(e.siblings("span").value="展开",e.parents(".title").siblings(".fields-container").css("display","block"),e.removeClass("state-close"),e.removeClass("fa-plus-square-o"),e.addClass("fa-minus-square-o")):(e.siblings("span").value="收起",e.parents(".title").siblings(".fields-container").css("display","none"),e.addClass("state-close"),e.removeClass("fa-minus-square-o"),e.addClass("fa-plus-square-o"))})}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../controls/Controls":602}],593:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initFilterDisplayContainer()}},{key:"_initFilterDisplayContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("filter-display-container",'\n        <div class="editor-tool">\n            <div class="text">过滤显示</div>\n            <input class="dv-input" placeholder="featureID < 1000" data-bind="value: styleOptions.filter"/>\n        </div>\n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],594:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initPointTypeSwitchingContainer(),this._initPointRenderType0Container(),this._initExtraIconImageWidthContainer(),this._initExtraIconImageHeightContainer(),this._initExtraIconImageRadiusContainer(),this._initPointRenderType1Container(),this._initExtraIconShapeContainer(),this._initExtraIconMarkerColorContainer(),this._initExtraIconIconColorContainer(),this._initExtraIconZoomRateContainer()}},{key:"_initPointTypeSwitchingContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("point-type-switching-container",'\n        <ul class="point-type-switching">\n            <li>图片点符号</li>\n            <li>矢量点符号</li>\n        </ul>      \n    ')}},{key:"_initPointRenderType0Container",value:function(){KQ.Builder.BuilderCommon.initContainer("point-render-container-image",'\n        <div class="extra-icon-image-symbols"></div>\n        <div class="extra-icon-image-width-container"></div>\n        <div class="extra-icon-image-height-container"></div>\n        <div class="extra-icon-image-radius-container"></div>\n    ')}},{key:"_initPointRenderType1Container",value:function(){KQ.Builder.BuilderCommon.initContainer("point-render-container-vector",'\n        <div class="extra-icon-svg-symbols"></div>\n        <div class="extra-icon-shape-container"></div>\n        <div class="extra-icon-marker-color-container"></div>\n        <div class="extra-icon-icon-color-container"></div>\n        <div class="extra-icon-zoom-rate-container"></div>\n    ')}},{key:"_initExtraIconImageWidthContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-image-width-container",'\n        <div class="editor-tool">\n            <div class="text">图片宽度</div>\n            <div class="value-container">\n                <input class="image-size-silder" data-bind="value: styleOptions.imageInfo.width"/>\n                <input type="text" style="border: none;" data-bind="value: styleOptions.imageInfo.width">\n                <p stype="padding-right: 5px;">px</p>\n            </div>\n        </div>\n    ')}},{key:"_initExtraIconImageHeightContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-image-height-container",'\n        <div class="editor-tool">\n            <div class="text">图片高度</div>\n            <div class="value-container">\n                <input class="image-size-silder" data-bind="value: styleOptions.imageInfo.height"/>\n                <input type="text" style="border: none;" data-bind="value: styleOptions.imageInfo.height">\n                <p stype="padding-right: 5px;">px</p>\n            </div>\n        </div>\n    ')}},{key:"_initExtraIconImageRadiusContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-image-radius-container",'\n        <div class="editor-tool">\n            <div class="text">缩放比例</div>\n            <div class="value-container">\n                <input class="symbol-scale-slider" data-bind="value: radius"/>\n                <input type="text" style="border: none;" data-bind="value: radius">\n                <p stype="padding-right: 5px;">%</p>\n            </div>\n        </div>           \n    ')}},{key:"_initExtraIconShapeContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-shape-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">标记形状</div>\n            <select class="extra-icon-shape-list" data-bind="value: styleOptions.vectorInfo.shape"/>\n        </div>     \n    ')}},{key:"_initExtraIconMarkerColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-marker-color-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">标记颜色</div>\n            <input class="extra-icon-marker-color-list" data-bind="value: styleOptions.vectorInfo.markerColor"/>\n        </div>    \n    ')}},{key:"_initExtraIconIconColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-icon-color-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">Icon颜色</div>\n            <input class="colors-picker-input" data-role="colorpicker" data-bind="value: styleOptions.vectorInfo.iconColor"/>\n        </div>   \n    ')}},{key:"_initExtraIconZoomRateContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("extra-icon-zoom-rate-container",'\n        <div class="editor-tool">\n            <div class="text">缩放比例</div>\n            <div class="value-container">\n                <input class="symbol-scale-slider" data-bind="value: zoomRate"/>\n                <input type="text" style="border: none;" data-bind="value: zoomRate">\n                <p stype="padding-right: 5px;">%</p>\n            </div>\n        </div>           \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],595:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initHeatmapRampColorContainer(),this._initHeatmapRadiusContainer(),this._initHeatmapWeightFieldContainer()}},{key:"_initHeatmapRampColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("heatmap-ramp-color-container",'\n        <div class="editor-tool">\n            <div class="text">热点颜色</div>\n            <input class="heatmap-ramp-color" data-bind="source: heatmapRampColorList, value: styleOptions.colorIndex"/>\n        </div>          \n    ')}},{key:"_initHeatmapRadiusContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("heatmap-radius-container",'\n        <div class="editor-tool">\n            <div class="text">热点半径</div>\n            <div class="value-container">\n                <input class="heatmap-radius-silder" data-bind="value: styleOptions.radius"/>\n                <input type="text" style="border: none;" data-bind="value: styleOptions.radius">\n                <p stype="padding-right: 5px;">px</p>\n            </div>\n        </div>\n    ')}},{key:"_initHeatmapWeightFieldContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("heatmap-weight-field-container",'\n        <div class="editor-tool">\n            <div class="text">权重字段</div>\n            <select class="weight-field-list" data-bind="source: weightFieldList, value: styleOptions.weightField"></select>\n        </div>          \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],596:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initLabelFieldContainer(),this._initLabelColorContainer(),this._initLabelFontContainer(),this._initLabelDirectionContainer(),this._initLabelOffsetContainer()}},{key:"_initLabelFieldContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("label-field-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">标签字段</div>\n            <select class="label-field-list" data-bind="source: labelFieldList, value: styleOptions.labelField"></select>\n        </div>  \n    ')}},{key:"_initLabelColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("label-color-container",'\n        <div class="editor-tool lable-style">\n            <div class="text">标签颜色</div>\n            <input class="colors-picker-input" data-role="colorpicker" data-bind="value: styleOptions.labelColor"/>\n        </div>\n    ')}},{key:"_initLabelFontContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("label-font-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">标签字体</div>\n            <select class="label-font-list" data-bind="source: labelFontList, value: styleOptions.labelFontName"> </select>\n        </div>\n    ')}},{key:"_initLabelDirectionContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("label-direction-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">标签位置</div>\n            <select class="label-direction-list" data-bind="source: labelDirectionList, value: styleOptions.labelPosition"/>\n        </div>        \n    ')}},{key:"_initLabelOffsetContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("label-offset-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">标签偏移</div>\n            <div class="value-container">\n                <input class="label-offset-silder" data-bind="value: styleOptions.labelMarkerPadding"/>\n                <input type="text" style="border: none;" data-bind="value: styleOptions.labelMarkerPadding">\n                <p stype="padding-right: 5px;">px</p>\n            </div>\n        </div>        \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],597:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initLineColorContainer(),this._initLineStyleListContainer(),this._initLineWidthContainer(),this._initLineOpacityContainer(),this._initLineRampColorContainer()}},{key:"_initLineColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("line-color-container",'\n        <div class="editor-tool">\n            <div class="text">线颜色</div>\n            <input class="colors-picker-input" data-role="colorpicker" data-bind="value: styleOptions.lineColor"/>\n        </div>\n    ')}},{key:"_initLineStyleListContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("line-style-list-container",'\n        <div class="editor-tool">\n            <div class="text">线样式</div>\n            <input class="line-style-list" style="width: 152px; height: 28px;" data-bind="source: lineStyleList, value: styleOptions.lineStyle"/>\n        </div>\n    ')}},{key:"_initLineWidthContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("line-width-container",'\n        <div class="editor-tool">\n            <div class="text">线宽度</div>\n            <div class="value-container">\n                <input class="line-width-silder" data-bind="value: styleOptions.lineWidth"/>\n                <input type="text" style="border: none;" data-bind="value: styleOptions.lineWidth">\n                <p stype="padding-right: 5px;">px</p>\n            </div>\n        </div>\n    ')}},{key:"_initLineOpacityContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("line-opacity-container",'\n        <div class="editor-tool">\n            <div class="text">线不透明度</div>\n            <div class="value-container">\n                <input class="opacity-slider" data-bind="value: lineOpacity"/>\n                <input type="text" style="border: none;" data-bind="value: lineOpacity">\n                <p stype="padding-right: 5px;">%</p>\n            </div>\n        </div>           \n    ')}},{key:"_initLineRampColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("line-ramp-color-container",'\n        <div class="editor-tool">\n            <div class="text">线颜色</div>\n            <input class="ramp-color" data-bind="source: rampColorList, value: styleOptions.colorIndex"/>\n        </div>          \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],598:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initSymbolTypeContainer(),this._initPointSytleContainer(),this._initPointColorContainer(),this._initPointSizeContainer(),this._initPointOpacityContainer(),this._initPointRampColorContainer()}},{key:"_initSymbolTypeContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("symbol-type-container",'\n        <div class="editor-tool">\n            <div class="text">符号类型</div>\n            <ul class="point-symbol-type">\n                <li class="point-symbol point-symbol-svg">矢量</li>\n                <li class="point-symbol point-symbol-img">图片</li>\n            </ul>\n        </div>\n        ')}},{key:"_initPointSytleContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("point-style-container",'\n        <div class="editor-tool">\n          <div class="text">点样式</div>\n          <div class="default-point-icon">\n             <div class="iconfont" data-bind="html: styleOptions.vectorInfo.unicode"></div>\n             <div class="icon-container" style="display: none;" data-bind="style: { backgroundImage:  styleOptions.imageInfo.url }"></div>\n          </div>\n          <div class="symbols-container" style="display: none;">\n            <div class="symbols-box">\n            </div>\n          </div>\n        </div>\n        ')}},{key:"_initPointColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("point-color-container",'\n        <div class="editor-tool">\n            <div class="text">点颜色</div>\n            <input class="colors-picker-input" data-role="colorpicker" data-bind="value: styleOptions.vectorInfo.fillColor"/>\n        </div>\n    ')}},{key:"_initPointSizeContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("point-size-container",'\n        <div class="editor-tool">\n            <div class="text">点大小</div>\n            <div class="value-container">\n                <input class="point-size-silder" data-bind="value: pointSize"/>\n                <input type="text" style="border: none;" data-bind="value: pointSize">\n                <p stype="padding-right: 5px;">px</p>\n            </div>\n        </div>\n    ')}},{key:"_initPointOpacityContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("point-opacity-container",'\n        <div class="editor-tool">\n            <div class="text">点不透明度</div>\n            <div class="value-container">\n                <input class="opacity-slider" data-bind="value: pointOpacity"/>\n                <input type="text" style="border: none;" data-bind="value: pointOpacity">\n                <p stype="padding-right: 5px;">%</p>\n             </div>\n         </div>           \n    ')}},{key:"_initPointRampColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("point-ramp-color-container",'\n        <div class="editor-tool">\n            <div class="text">点颜色</div>\n            <input class="ramp-color" data-bind="source: rampColorList, value: styleOptions.colorIndex"/>\n        </div>          \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],599:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../RenderSettingDataSource");(r=o)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(){this._initPolygonColorContainer(),this._initPolygonOpacityContainer(),this._initPolygonRampColorContainer()}},{key:"_initPolygonColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("polygon-color-container",'\n        <div class="editor-tool point-color">\n            <div class="text">面颜色</div>\n            <input class="colors-picker-input" data-role="colorpicker" data-bind="value: styleOptions.fillColor"/>\n        </div>   \n    ')}},{key:"_initPolygonOpacityContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("polygon-opacity-container",'\n        <div class="editor-tool">\n            <div class="text">面不透明度</div>\n            <div class="value-container">\n                <input class="opacity-slider" data-bind="value: fillOpacity"/>\n                <input type="text" style="border: none;" data-bind="value: fillOpacity">\n                <p stype="padding-right: 5px;">%</p>\n            </div>\n        </div>           \n    ')}},{key:"_initPolygonRampColorContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("polygon-ramp-color-container",'\n        <div class="editor-tool">\n            <div class="text">面颜色</div>\n            <input class="ramp-color" data-bind="source: rampColorList, value: styleOptions.colorIndex"/>\n        </div>          \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../RenderSettingDataSource":590}],600:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initSectionMethodContainer(),this._initSectionNumberContainer()}},{key:"_initSectionMethodContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("section-method-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">分段方法</div>\n            <select class="section-method-list" data-bind="source: sectionMethodList, value: styleOptions.sectionMethod"/>\n        </div>       \n    ')}},{key:"_initSectionNumberContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("section-number-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">分段个数</div>\n            <select class="section-number-list" data-bind="source: sectionNumberList, value: styleOptions.sectionCount"/>\n        </div>        \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],601:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){this._initFilterDisplayContainer()}},{key:"_initFilterDisplayContainer",value:function(){KQ.Builder.BuilderCommon.initContainer("thematic-field-container",'\n        <div class="editor-tool lable-select">\n            <div class="text">专题字段</div>\n            <select class="thematic-field-list" data-bind="source: thematicFieldList, value: styleOptions.thematicField"/>\n        </div>      \n    ')}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],602:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("../container/ColorField")),o=a(e("./HandDrawControl"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(){var e=this;$(".colors-picker-input").kendoColorPicker({button:!1,change:function(){e._render()}}),$(".point-size-silder").kendoSlider({min:1,max:20,smallStep:1,largeStep:1,showButtons:!1,tips:!1,change:function(){e._render()}}).data("kendoSlider"),$(".heatmap-radius-silder").kendoSlider({min:1,max:20,smallStep:1,largeStep:1,showButtons:!1,tips:!1,change:function(){e._render()}}).data("kendoSlider"),$(".line-width-silder").kendoSlider({min:0,max:20,smallStep:1,largeStep:1,showButtons:!1,tips:!1,change:function(){e._render()}}).data("kendoSlider"),$(".opacity-slider").kendoSlider({min:0,max:100,smallStep:5,largeStep:10,showButtons:!1,change:function(){e._render()}}).data("kendoSlider"),$(".line-style-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",template:'<span class="k-state-default" style="background-image: url(./images/line_styles/line_style#:data.name#.png)"></span>',valueTemplate:'<span class="selected-value" style="background-image: url(./images/line_styles/line_style#:data.name#.png)"></span>',height:200,change:function(){e._render()}}),$(".ramp-color").kendoDropDownList({dataTextField:"value",dataValueField:"name",template:'<span class="k-state-default" style="height: 12px; background-image: url(./images/color_ramp/color#:data.name#.png)"></span>',valueTemplate:'<span class="selected-value" style="background-image: url(./images/color_ramp/color#:data.name#.png)"></span>',height:200,change:function(){e._refreshThematicColors(),i.default.getInstance().init(),e._render()}}),$(".heatmap-ramp-color").kendoDropDownList({dataTextField:"value",dataValueField:"name",template:'<span class="k-state-default" style="height: 12px; background-image: url(./images/heatmap_ramp/color#:data.name#.png)"></span>',valueTemplate:'<span class="selected-value" style="background-image: url(./images/heatmap_ramp/color#:data.name#.png)"></span>',height:200,change:function(){e._refreshHeatmapGradient(),i.default.getInstance().init(),e._render()}}),$(".thematic-field-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._refreshThematicColors(),i.default.getInstance().init(),e._render()}}),$(".section-method-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._refreshThematicColors(),i.default.getInstance().init(),e._render()}}),$(".section-number-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._refreshThematicColors(),i.default.getInstance().init(),e._render()}});var t=$(".dv-input").kendoMaskedTextBox({change:function(){e._render()}}).data("kendoMaskedTextBox");$("[data-role=maskedtextbox]").on("keydown",function(e){13===e.keyCode&&t.trigger("change",{data:$(this).val()})}),$(".label-field-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._render()}}),$(".label-font-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._render()}}),$(".label-direction-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._render()}}),$(".label-offset-silder").kendoSlider({min:0,max:40,smallStep:1,largeStep:1,showButtons:!1,tips:!1,change:function(){e._render()}}).data("kendoSlider"),$(".weight-field-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,change:function(){e._render()}}),e._initSymbolTypeSwapControl(),e._initPointStyleControl(),o.default.getInstance().init()}},{key:"_refreshThematicColors",value:function(){var e=KQ.Builder.BuilderCommon.renderModel(),t=KQ.Builder.BuilderCommon.activeRender(),n=KQ.Builder.BuilderCommon.activeLayer(),r=e.styleOptions,i=t.options,o=n.getRenderType();"point"===n.options.featureType&&(i=i.vectorInfo);var a=null;a="single"===o?KQ.Builder.RenderShape.getThematicFieldColorsSingle(t.getGeojsonObject(),r.thematicField,r.colorIndex):KQ.Builder.RenderShape.getThematicFieldColorsSection(t.getGeojsonObject(),r.thematicField,r.colorIndex,r.sectionMethod,r.sectionCount),r.thematicColors=a,i.thematicColors=a}},{key:"_refreshHeatmapGradient",value:function(){var e=KQ.Builder.BuilderCommon.renderModel().styleOptions;e.gradient=KQ.Common.CommonValues.heatmapColorRamp[e.colorIndex]}},{key:"_render",value:function(){var e=KQ.Builder.BuilderCommon.renderModel(),t=e.styleOptions;this._convertOpacityFromModel(t,e),this._convertPointOptionsFromModel(t,e),this._convertGradientFromOptions(t);var n=KQ.Builder.BuilderCommon.activeLayer();"hand-draw"===n.getRenderType()?(this._convertSymbolScaleFromModel(t,e),KQ.Map.MapGeomanStyleEditor.getInstance().changeStyle(KQ.Builder.BuilderProject.getInstance().setting.handDrawLayer,t)):n.getRender().setOptions(t)}},{key:"_convertOpacityFromModel",value:function(e,t){e.vectorInfo&&(e.vectorInfo.fillOpacity=t.pointOpacity/100,e.vectorInfo.strokeOpacity=t.lineOpacity/100),e.fillOpacity&&(e.fillOpacity=t.fillOpacity/100),e.lineOpacity&&(e.lineOpacity=t.lineOpacity/100)}},{key:"_convertPointOptionsFromModel",value:function(e,t){t.pointSize&&("vector"===e.pointSymbolType?(e.vectorInfo.fontSize=t.pointSize+"px",e.vectorInfo.strokeColor=t.styleOptions.lineColor,e.vectorInfo.strokeWidth=t.styleOptions.lineWidth,e.vectorInfo.colorIndex=t.styleOptions.colorIndex,t.styleOptions.thematicField&&(e.vectorInfo.thematicField=t.styleOptions.thematicField),t.styleOptions.thematicColors&&(e.vectorInfo.thematicColors=t.styleOptions.thematicColors),t.styleOptions.sectionMethod&&(e.vectorInfo.sectionMethod=t.styleOptions.sectionMethod),t.styleOptions.sectionCount&&(e.vectorInfo.sectionCount=t.styleOptions.sectionCount)):e.imageInfo.radius=t.pointSize/10)}},{key:"_convertGradientFromOptions",value:function(e){"heatmap"===e.renderType&&(e.gradient=KQ.Common.CommonValues.heatmapColorRamp[e.colorIndex])}},{key:"_initSymbolTypeSwapControl",value:function(){var e=$(".point-symbol-type").kendoMobileButtonGroup({index:0}).data("kendoMobileButtonGroup");KQ.Builder.BuilderProject.getInstance().symbolTypeSwapButton=e}},{key:"_convertSymbolScaleFromModel",value:function(e,t){t.radius&&(e.imageInfo.radius=t.radius/100),t.zoomRate&&(e.vectorInfo.zoomRate=t.zoomRate/100)}},{key:"_initPointStyleControl",value:function(){for(var i=this,e=document.getElementsByClassName("point-style-container"),t=0;t<e.length;t++)$(e[t]).find(".symbols-container .symbols-box").bind({svg_symbol_selected:function(e,t){var n=KQ.Builder.BuilderProject.getInstance().getInfo("render_model").styleOptions;n.vectorInfo.unicode=t;var r=$(this).closest(".editor-tool").find(".default-point-icon div").eq(0);r.html(n.vectorInfo.unicode),r.css("display","block").siblings().css("display","none"),i._render()},image_symbol_selected:function(e,t){var n=KQ.Builder.BuilderProject.getInstance().getInfo("render_model").styleOptions;n.imageInfo.url="url(./images/point_images/IMAGE"+t.number+".png)";var r=$(this).closest(".editor-tool").find(".default-point-icon div").eq(1);r.css("background-image",n.imageInfo.url),r.css("display","block").siblings().css("display","none"),i._render()},symbol_type_vector:function(){$(this).closest(".editor-tool").find(".default-point-icon div").eq(0).css("display","block").siblings().css("display","none"),i._render()},symbol_type_image:function(){$(this).closest(".editor-tool").find(".default-point-icon div").eq(1).css("display","block").siblings().css("display","none"),i._render()}});$(".default-point-icon").click(function(){$(this).next().css("display","block")}),$("body").click(function(e){$(e.target).parent().hasClass("default-point-icon")||$(".symbols-container").css("display","none")})}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../container/ColorField":592,"./HandDrawControl":603}],603:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Controls"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(){this._layerFilter(),this._drawPoint(),this._drawLine(),this._drawPolygon(),this._drawText(),this._drawCircle(),this._drawRectangle(),this._initPointControl(),this._initPointSymbolsControl()}},{key:"_initPointControl",value:function(){$(".point-type-switching").kendoButtonGroup({index:0,select:function(){var e=this.current().index(),t=["image","vector"],n=KQ.Builder.BuilderProject.getInstance().getInfo("render_model");n&&($(".hand-draw-edit-point .point-render-container .point-render-container-"+t[e]).css("display","block").siblings().css("display","none"),n.styleOptions.pointSymbolType=t[e],a.default.getInstance()._render())}}),$(".image-size-silder").kendoSlider({min:1,max:100,smallStep:1,largeStep:1,showButtons:!1,tips:!1,change:function(){a.default.getInstance()._render()}}).data("kendoSlider"),$(".extra-icon-shape-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,dataSource:KQ.Builder.BuilderUi.RenderSettingDataSource.extraIconShape(),change:function(){a.default.getInstance()._render()}}),$(".extra-icon-marker-color-list").kendoDropDownList({dataTextField:"name",dataValueField:"value",height:140,dataSource:KQ.Builder.BuilderUi.RenderSettingDataSource.extraIconMarkerColor(),change:function(){a.default.getInstance()._render()}}),$(".symbol-scale-slider").kendoSlider({min:50,max:200,smallStep:5,largeStep:10,showButtons:!1,change:function(){a.default.getInstance()._render()}}).data("kendoSlider"),KQ.Builder.BuilderCommon.fillSvgSymbols($(".extra-icon-svg-symbols"),8),KQ.Builder.BuilderCommon.fillImageSymbols($(".extra-icon-image-symbols"),8)}},{key:"_initPointSymbolsControl",value:function(){for(var e=document.getElementsByClassName("hand-draw-edit-point"),t=0;t<e.length;t++)$(e[t]).find(".point-render-container-image .extra-icon-image-symbols").bind({image_symbol_selected:function(e,t){KQ.Builder.BuilderProject.getInstance().getInfo("render_model").styleOptions.imageInfo.url="url(./images/point_images/IMAGE"+t.number+".png)",a.default.getInstance()._render()}}),$(e[t]).find(".point-render-container-vector .extra-icon-svg-symbols").bind({svg_symbol_selected:function(e,t){KQ.Builder.BuilderProject.getInstance().getInfo("render_model").styleOptions.vectorInfo.icon=KQ.Builder.BuilderUi.RenderSettingDataSource.getExtraIconNameFromUnicode(t),a.default.getInstance()._render()}})}},{key:"_layerFilter",value:function(){$(".hand-draw-layer-list .search-bar input").keyup(function(){var e=$(this).val();KQ.Builder.BuilderProject.getInstance().handDrawLayersContainer._listbox.dataSource.filter({field:"name",operator:"contains",value:e})})}},{key:"_drawPoint",value:function(){$(".hand-draw-layer-list .draw-button-group > .dv-draw-option:nth-child(1)").kendoButton({click:function(e){KQ.Builder.BuilderProject.getInstance().geoman.enableDraw(KQ.Map.MapGeoman.Type_Point)}})}},{key:"_drawLine",value:function(){$(".hand-draw-layer-list .draw-button-group > .dv-draw-option:nth-child(2)").kendoButton({click:function(e){KQ.Builder.BuilderProject.getInstance().geoman.enableDraw(KQ.Map.MapGeoman.Type_Line)}})}},{key:"_drawPolygon",value:function(){$(".hand-draw-layer-list .draw-button-group > .dv-draw-option:nth-child(3)").kendoButton({click:function(e){KQ.Builder.BuilderProject.getInstance().geoman.enableDraw(KQ.Map.MapGeoman.Type_Polygon)}})}},{key:"_drawText",value:function(){$(".hand-draw-layer-list .draw-button-group > .dv-draw-option:nth-child(4)").kendoButton({click:function(e){KQ.Builder.BuilderProject.getInstance().geoman.enableDraw(KQ.Map.MapGeoman.Type_Text)}})}},{key:"_drawCircle",value:function(){$(".hand-draw-layer-list .draw-button-group > .dv-draw-option:nth-child(5)").kendoButton({click:function(e){KQ.Builder.BuilderProject.getInstance().geoman.enableDraw(KQ.Map.MapGeoman.Type_Circle)}})}},{key:"_drawRectangle",value:function(){$(".hand-draw-layer-list .draw-button-group > .dv-draw-option:nth-child(6)").kendoButton({click:function(e){KQ.Builder.BuilderProject.getInstance().geoman.enableDraw(KQ.Map.MapGeoman.Type_Rectangle)}})}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"./Controls":602}],604:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=g(e("./CommonValues")),i=g(e("./CommonTools")),o=g(e("./ComputeTools")),a=g(e("./NetworkTools")),s=g(e("./TaskManager")),l=g(e("./ExportShape")),u=g(e("./ThemeManager")),c=g(e("./LoadJSCSS")),h=g(e("./MaskLayerManager")),f=g(e("./PaneZIndexManager")),d=g(e("./QueryInfoManager")),p=g(e("./FileUpload")),m=g(e("./ExportOFD"));function g(e){return e&&e.__esModule?e:{default:e}}var y={CommonValues:r.default,CommonTools:i.default,ComputeTools:o.default,NetworkTools:a.default,TaskManager:s.default,ExportShape:l.default,ThemeManager:u.default,LoadJSCSS:c.default,MaskLayerManager:h.default,PaneZIndexManager:f.default,QueryInfoManager:d.default,FileUpload:p.default,ExportOFD:m.default};n.default=y},{"./CommonTools":605,"./CommonValues":606,"./ComputeTools":607,"./ExportOFD":608,"./ExportShape":609,"./FileUpload":610,"./LoadJSCSS":611,"./MaskLayerManager":612,"./NetworkTools":613,"./PaneZIndexManager":614,"./QueryInfoManager":615,"./TaskManager":616,"./ThemeManager":617}],605:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(e("../kq")),l=i(e("./CommonValues"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}return r(s,null,[{key:"_promiseWrap",value:function(t){return function(){var e=[].slice.call(arguments);return new Promise(function(n,r){t.apply(null,e.concat(function(e,t){e?r(e):n(t)}))})}}},{key:"_promiseWrap_0",value:function(r){return function(){var e=[].slice.call(arguments);return new Promise(function(t,n){r.apply(null,e.concat(function(e){err?n(err):t(e)}))})}}},{key:"stringTrim",value:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},{key:"stringLTrim",value:function(e){return e.replace(/(^\s*)/g,"")}},{key:"stringRTrim",value:function(e){return e.replace(/(\s*$)/g,"")}},{key:"stringRemoveBlank",value:function(e){return e.replace(/\s+/g,"")}},{key:"clearFromCache",value:function(e){var t=arguments[5];for(var n in t)if(t[n].exports==e)return void delete t[n];throw"could not clear instance from module cache"}},{key:"_exportData_old",value:function(e,t,n){var r=document,i=arguments,o=r.createElement("a"),a=(i[0],i[1]);i[2];if(n=n||"text/plain",o.href="data:"+n+"charset=utf-8,"+escape(e),window.MSBlobBuilder){var s=new MSBlobBuilder;return s.append(e),navigator.msSaveBlob(s,t)}if("download"in o)return o.setAttribute("download",a),o.innerHTML="",r.body.appendChild(o),setTimeout(function(){var e=r.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e),r.body.removeChild(o)},1e4),!0;var l=r.createElement("iframe");return r.body.appendChild(l),l.src="data:"+(i[2]?i[2]:"application/octet-stream")+(window.btoa?";base64":"")+","+(window.btoa?window.btoa:escape)(e),setTimeout(function(){r.body.removeChild(l)},333),!0}},{key:"exportData",value:function(e,t,n){var r=n||"application/json",i=new Blob([e],{type:r});-1!==r.indexOf("json")&&(i=s._toBom(i)),s._exportBlob(i,t)}},{key:"_toBom",value:function(e){return new Blob([String.fromCharCode(65279),e],{type:e.type})}},{key:"_exportBlob",value:function(e,t){var n=t||"download.txt";if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(e,n);else{var r=document.createElement("a");document.body.appendChild(r),r.setAttribute("type","hidden"),r.href=window.URL.createObjectURL(e),r.download=n,r.click(),window.URL.revokeObjectURL(r.href)}}},{key:"exportBase64UrlToImage",value:function(e,t){for(var n=window.atob(e.split(",")[1]),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);var a=new Blob([r],{type:"image/jpeg"});s._exportBlob(a,t)}},{key:"downloadFromUrl",value:function(e,t){if(e&&""!==e){e=encodeURI(e);var n=t||"download.txt",r=document.createElement("a");document.body.appendChild(r),r.setAttribute("type","hidden"),r.href=e,r.download=n,r.click(),window.URL.revokeObjectURL(r.href)}}},{key:"geoJsonFromGeometry",value:function(e,t,n){return t=t||{},n||(n="overlayPane"),new a.default.Map.MapGeoJSON(e,{style:t,pane:n,pointToLayer:function(e,t){var n=void 0;if(e.properties&&e.properties.options){var r=e.properties.options;if(e.properties.isCircleMarker)n=L.circleMarker(t,r);else n=r.icon&&r.icon.options.iconUrl?new a.default.Map.MapMarker(t,{icon:L.icon(r.icon.options)}):new a.default.Map.MapMarker(t)}else n=new a.default.Map.MapMarker(t);return n}})}},{key:"geoJsonFCToGC",value:function(e){if(!e||"FeatureCollection"!==e.type||!e.features)return null;var t={type:"GeometryCollection",geometries:[]};return e.features.forEach(function(e){e.geometry&&(e.geometry.geometries?t.geometries=t.geometries.concat(e.geometry.geometries):t.geometries.push(e.geometry))}),t}},{key:"geoJsonToGC",value:function(e){if(!e)return null;var t={type:"GeometryCollection",geometries:[]};return e.geometry&&t.geometries.push(e.geometry),t}},{key:"_getGeoJSONGeometryType",value:function(e){if(e){if("Point"===e.type||"MultiPoint"===e.type)return"point";if("LineString"===e.type||"MultiLineString"===e.type)return"line";if("Polygon"===e.type||"MultiPolygon"===e.type)return"polygon"}return"unknown"}},{key:"_getGeoJSONType",value:function(e){if(!e)return"unknown";if("FeatureCollection"===e.type){if(0<e.features.length)return s._getGeoJSONType(e.features[0].geometry)}else{if("GeometryCollection"!==e.type)return"Feature"===e.type?s._getGeoJSONGeometryType(e.geometry):s._getGeoJSONGeometryType(e);if(0<e.geometries.length)return s._getGeoJSONType(e.geometries[0])}return"unknown"}},{key:"_geoJSONLatLngToDestProj",value:function(e,a,s){if(e.geometry)if("Point"===e.geometry.type)if(s){var t=L.point(e.geometry.coordinates[0],e.geometry.coordinates[1]),n=a.options.crs.unproject(t);e.geometry.coordinates=[n.lng,n.lat]}else{var r=L.latLng(e.geometry.coordinates[1],e.geometry.coordinates[0]),i=a.options.crs.project(r);e.geometry.coordinates=[i.x,i.y]}else if("LineString"===e.geometry.type){var o=[];e.geometry.coordinates.forEach(function(e){if(s){var t=L.point(e[0],e[1]),n=a.options.crs.unproject(t);o.push([n.lng,n.lat])}else{var r=L.latLng(e[1],e[0]),i=a.options.crs.project(r);o.push([i.x,i.y])}}),e.geometry.coordinates=o}else if("Polygon"===e.geometry.type){var l=[];e.geometry.coordinates.forEach(function(e){var o=[];e.forEach(function(e){if(s){var t=L.point(e[0],e[1]),n=a.options.crs.unproject(t);o.push([n.lng,n.lat])}else{var r=L.latLng(e[1],e[0]),i=a.options.crs.project(r);o.push([i.x,i.y])}}),l.push(o)}),e.geometry.coordinates=l}}},{key:"_loadKendoAndRun",value:function(e){e&&e()}},{key:"loadUiLib",value:function(e){a.default.Common.CommonTools._loadKendoAndRun(e)}},{key:"_getMapAbsoluteLeftTop",value:function(){var e="#"+a.default.Common.CommonValues.mapContainerID;return[$(e).offset().left,$(e).offset().top]}},{key:"_getMapAbsoluteRightBottom",value:function(){var e="#"+a.default.Common.CommonValues.mapContainerID,t=$(e).offset().left,n=$(e).offset().top;return[t+$(e).width(),n+$(e).height()]}},{key:"_getMapAbsoluteCenter",value:function(){var e="#"+a.default.Common.CommonValues.mapContainerID,t=$(e).offset().left,n=$(e).offset().top;return[t+$(e).width()/2,n+$(e).height()/2]}},{key:"_isGoogleScale",value:function(e){for(var t=l.default.google_scales,n=0;n<e.length;n++){for(var r=e[n],i=!1,o=0;o<t.length;o++){var a=t[o];if(Math.abs(a-r)/a<.01){i=!0;break}}if(!i)return!1}return!0}},{key:"_sleep",value:function(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);}},{key:"_escapeSpecialTags",value:function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"_getIPPortFromUrl",value:function(e){for(var t=e.split("/"),n=0;n<t.length;n++){var r=t[n].indexOf(":");if(-1<r&&parseInt(t[n].substring(r+1)))return t[n]}}},{key:"_findTooltipFromSourceNameLayerId",value:function(e,t){var n=a.default.Map.MapConfig.getInstance(),r=n.findLayer(e,t);if(null===r)return null;var i=n.getLayerTooltip(r);return i||(i=n.getLayerLabel(r)),i}},{key:"_hideLoading",value:function(){$(".kqmaploadingtxt").remove(),$("#map").removeClass("loading")}},{key:"stopDomEvent",value:function(e){L.DomEvent.stop(e)}},{key:"getShapeType",value:function(e){var t=a.default.Common.CommonValues.shapeTypes.point,n=e;return n instanceof L.Polygon||n instanceof L.LayerGroup||n instanceof L.Circle?t=a.default.Common.CommonValues.shapeTypes.fill:n instanceof L.Polyline&&(t=a.default.Common.CommonValues.shapeTypes.line),t}},{key:"getCoords",value:function(e){var t=a.default.Common.CommonTools.getShapeType(e);return t===a.default.Common.CommonValues.shapeTypes.point?[e.getLatLng()]:t===a.default.Common.CommonValues.shapeTypes.line?e.getLatLngs():t===a.default.Common.CommonValues.shapeTypes.fill?e instanceof L.Circle?[a.default.Control.Draw._circleToPolygon(e)]:e.getLatLngs():[]}},{key:"_addExtraLibs",value:function(){$("head").append('<script src="../../dist/cropper.min.js"><\/script>'),$("head").append('<script src="../../dist/rangeslider.min.js"><\/script>'),$("head").append('<script src="../../dist/building.min.js"><\/script>'),$("head").append('<script src="../../dist/wec.min.js"><\/script>'),a.default.Map.MapConfig.isHasControl("plotting")&&$("head").append('<script src="../../dist/plot.dist.js"><\/script>'),a.default.Map.MapConfig.getInstance().isMapBuilder()&&($("head").append('<script src="../../libs/geoman/leaflet-geoman.js"><\/script>'),$("head").append('<link href="../../libs/geoman/leaflet-geoman.css" rel="stylesheet" type="text/css">'))}},{key:"toDataURL",value:function(e,t){var n=new XMLHttpRequest;n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n.response)},n.open("GET",e),n.responseType="blob",n.send()}},{key:"getUrlname",value:function(e){var t=(e=e.split("?")[0]).split("/");return t[t.length-1].toLowerCase()}},{key:"hexToRGB",value:function(e,t){var n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return t?"rgba("+n+", "+r+", "+i+", "+t+")":"rgb("+n+", "+r+", "+i+")"}},{key:"pickObject",value:function(n,e){return e.reduce(function(e,t){return t in n&&(e[t]=n[t]),e},{})}},{key:"getGeomFromFeatureCollection",value:function(e){var t=[];return turf.featureEach(e,function(e){t.push(turf.getGeom(e))}),turf.getGeom(turf.geometryCollection(t))}},{key:"_getGoogleScaleID",value:function(e){for(var t=l.default.google_scales,n=0;n<t.length;n++){var r=t[n];if(Math.abs(r-e)/r<.01)return n}return-1}},{key:"_debounce",value:function(n,r){var i=null;return function(){var e=arguments,t=this;i=(i&&clearTimeout(i),setTimeout(function(){n.apply(t,e)},r))}}},{key:"runTurfCallback",value:function(e){}},{key:"getMapIntegerZoom",value:function(e,t){var n=e.getZoom(),r=Math.floor(n),i=a.default.Map.MapConfig.getInstance().scales(),o=r;return t&&(o=Number(i[r]._id)),o}},{key:"setMapStandardScale",value:function(e,t){for(var n,r=a.default.Map.MapConfig.getInstance().scales(),i=r.length-1,o=0;o<r.length;o++)if(t<Number(r[o].__text)){i=o;break}n=i-1+(t-Number(r[i-1].__text))/(Number(r[i].__text)-Number(r[i-1].__text)),console.log("Zoom To:"+n),e.setZoom(n)}}]),s}();n.default=o},{"../kq":729,"./CommonValues":606}],606:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};r.defaltProj4_EPSG4326="+proj=longlat +datum=WGS84 +no_defs",r.defaltPrj_EPSG4326='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433],AUTHORITY["EPSG",4326]]',r.defaltProj4_EPSG3857="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",r.defaltPrj_EPSG3857='PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_1SP"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["latitude_of_origin",0.0],UNIT["Meter",1.0]]',r.mapContainerID="map",r.insideMapID="KqMapID",r.defaultTheme="default-blue",r.basemapPane_zIndex=1e5,r.tilePane_zIndex=2e5,r.overlayPane_zIndex=4e5,r.labelPane_zIndex=45e4,r.shadowPane_zIndex=5e5,r.markerPane_zIndex=6e5,r.maskPane_zIndex=649e3,r.tooltipPane_zIndex=65e4,r.popupPane_zIndex=7e5,r.kqwebmapPath="../../",r.distPath="../../dist/",r.configFilePath="./",r.maskPath="../../mask/",r.showAfterInMsec=2e3,r.treeSelectMaxCount=12,r.flickerColor="#74A402",r.shapeTypes={point:0,line:1,fill:2},r.bufferTypes={outer:0,inner:1,left:2,right:3,both:4},r.bufferUnit={m:0,km:1},r.networkAnalysisTypes={optimal_path:0,trace_back:1,traveling_salesman_problem:2},r.networkAnalysisOptimalPathTypes={distance_first:0,time_first:1},r.networkAnalysisTracebackTypes={up:0,down:1},r.networkAnalysisTSPTypes={greed:0,trace_back:1,enumeration:2},r.rasterAnalysisTypes={function:0,algebra:1,logic:2,condition_select:3},r.rasterAnalysisFunctionTypes={abs:1,negate:2,square:3,sqrt:4,int:5,float:6,rounddown:7,roundup:8},r.rasterAnalysisAlgebraTypes={plus:1,minus:2,multiply:3,divide:4},r.rasterAnalysisLogicTypes={or:5,and:6,xor:7,diff:8,equal:9,not_equal:10,less_than:11,less_than_equal:12,greater_than:13,greater_than_equal:14,over:15},r.pointSymbolType={vector:"vector",image:"image"},r.labelFontName={fangSong:"FangSong",song:"SimSun",yaHei:"Microsoft YaHei"},r.lineStyle={lineStyle_simple_line:0,lineStyle_dot_line:1,lineStyle_short_dash_line:2,lineStyle_short_dash_dot_line:3,lineStyle_long_dash_line:4,lineStyle_long_dash_dot_line:5},r.singleColorRamp=[["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],["#009b9e","#42b7b9","#a7d3d4","#f1f1f1","#e4c1d9","#d691c1","#c75dab"],["#a16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"],["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],["#762a83","#af8dc3","#e7d4e8","#f5f5f5","#d9f0d3","#7fbf7b","#1b7837"],["#c51b7d","#e9a3c9","#fde0ef","#f5f5f5","#e6f5d0","#a1d76a","#4d9221"],["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],["#e9f013","#b3b3b3","#408000","#000080","#0d3069","#ababab","#fffcff"],["#b1e086","#1777b6","#9ccbd5","#fd9997","#ffc068","#ff7f00","#cab1d7"],["#ffffaf","#beb9db","#fd7f6f","#7eb0d5","#b2e061","#fdcce5","#d9d9d9"],["#b2cde4","#cbecc4","#decae5","#ffdaa3","#e5d8bc","#fedaec","#f2f2f2"],["#f53b44","#ff7a45","#ffc872","#b7eb8f","#5cdbd3","#2f54eb","#531dab"],["#d9af6b","#736f4c","#526a83","#68855c","#a06177","#8c785d","#7c7c7c"],["#11a579","#f2b701","#e73f74","#e68310","#cf1c90","#f97b72","#a5aa99"],["#f6cf71","#dcb0f2","#87c55f","#fe88b1","#8be0a4","#b497e7","#b3b3b3"],["#1d6996","#0f8554","#73af48","#e17c05","#94346e","#6f4070","#666666"],["#cc6677","#117733","#332288","#44aa99","#882255","#661100","#888888"]],r.heatmapColorRamp=[{0:"#000cff",.1:"#0070ff",.2:"#00d5ff",.3:"#00ffc5",.4:"#00ff61",.5:"#03ff00",.6:"#68ff00",.7:"#ccff00",.8:"#ffcd00",.9:"#ff6800",1:"#ff0400"},{0:"#7efdff",.1:"#6eebfc",.2:"#5edafa",.3:"#4dc9f7",.4:"#3eb8f5",.5:"#2da5f1",.6:"#2585d6",.7:"#1b64ba",.8:"#1343a0",.9:"#092284",1:"#000169"},{0:"#999dff",.1:"#99baff",.2:"#99d9ff",.3:"#99f7ff",.4:"#afe9e9",.5:"#cdcaca",.6:"#ebadad",.7:"#ffa399",.8:"#ffc299",.9:"#ffdf99",1:"#fffe99"},{0:"#9969be",.1:"#ad85b7",.2:"#c1a1b0",.3:"#c4adb8",.4:"#bdadcb",.5:"#b4addd",.6:"#a7abdd",.7:"#99a9dd",.8:"#8da9de",.9:"#80a9df",1:"#75a9e1"},{0:"#f0ebb3",.1:"#ecd594",.2:"#e9c177",.3:"#e6ac59",.4:"#e3973c",.5:"#df821e",.6:"#d06a1b",.7:"#c05216",.8:"#b13a12",.9:"#a1220d",1:"#920a09"},{0:"#8149aa",.1:"#8132a2",.2:"#821d9b",.3:"#941b85",.4:"#b62866",.5:"#d53648",.6:"#e57846",.7:"#f5b844",.8:"#fee169",.9:"#feefb2",1:"#fffffc"},{0:"#6069e9",.1:"#4349e0",.2:"#272ad9",.3:"#401cb6",.4:"#801d81",.5:"#be1d4e",.6:"#d54d69",.7:"#eb7b82",.8:"#f9a89c",.9:"#fbd2b3",1:"#fffdcb"},{0:"#83c785",.1:"#a8b7b7",.2:"#ceb3c1",.3:"#f3bd92",.4:"#fedb8e",.5:"#fafb99",.6:"#85a5a7",.7:"#4356a6",.8:"#651889",.9:"#8e2456",1:"#bd5919"},{0:"#9dc8e0",.1:"#4d95c4",.2:"#4492aa",.3:"#9ace90",.4:"#7bc462",.5:"#379f2e",.6:"#ae9c6f",.7:"#f28183",.8:"#db3a43",.9:"#e25e46",1:"#fcbc6e"},{0:"#d82127",.1:"#725c82",.2:"#3d8a9d",.3:"#49a75b",.4:"#6e8571",.5:"#9a4f9f",.6:"#d76c3f",.7:"#ff990a",.8:"#ffe529",.9:"#dcbd2e",1:"#a85a28"},{0:"#da362b",.1:"#ef6d48",.2:"#fda266",.3:"#fdd283",.4:"#ffeea2",.5:"#fefebd",.6:"#e8f59f",.7:"#cae882",.8:"#a0d669",.9:"#63b959",1:"#1d9950"},{0:"#d84450",.1:"#ee7255",.2:"#fda266",.3:"#fdd283",.4:"#ffeea2",.5:"#fefebe",.6:"#f0f9a7",.7:"#d6ee97",.8:"#a9dc95",.9:"#71b7a3",1:"#348abc"},{0:"#da362b",.1:"#ef6d48",.2:"#fda267",.3:"#fdd287",.4:"#ffeea4",.5:"#fefec0",.6:"#ecf8e2",.7:"#cfe8f2",.8:"#a1cae1",.9:"#73a2cc",1:"#4777b5"},{0:"#b6202f",.1:"#da634f",.2:"#f39e7b",.3:"#faceb7",.4:"#feebdf",.5:"#fefefe",.6:"#ececec",.7:"#d1d1d1",.8:"#a8a8a8",.9:"#7b7b7b",1:"#4f4f4f"},{0:"#e5ec1e",.1:"#c5c77c",.2:"#96a686",.3:"#52881c",.4:"#244937",.5:"#00017f",.6:"#081e72",.7:"#2d4976",.8:"#8b929e",.9:"#cbcacb",1:"#fdfafd"},{0:"#a0a0b7",.1:"#1515f5",.2:"#006fff",.3:"#00ce8b",.4:"#00ff3e",.5:"#07f7f7",.6:"#d12e2e",.7:"#ff6400",.8:"#ff6565",.9:"#d000ff",1:"#0800ff"},{0:"#4f23b2",.1:"#2f53ea",.2:"#3e9ffd",.3:"#55cfdd",.4:"#97e5a7",.5:"#dde78f",.6:"#ffd67f",.7:"#ffaa5e",.8:"#fd6e45",.9:"#ef3640",1:"#ab091c"},{0:"#b00c1e",.1:"#f43a43",.2:"#fe7245",.3:"#ffaf60",.4:"#ffd882",.5:"#d8e88f",.6:"#91e4ac",.7:"#53cbe0",.8:"#3d99fb",.9:"#314fe6",1:"#521fad"}],r.classBreaksMethod={classBreaks_equidistant:0,classBreaks_quantile:1,classBreaks_logarithmic:2,classBreaks_k_means:3},r.analysisDefaultOptions={url:location.hostname,port:"8699"},r.google_scales=[1/591658710.90913,1/295829355.454565,1/147914677.7272825,1/73957338.86364125,1/36978669.43182062,1/18489334.71591031,1/9244667.357955156,1/4622333.678977578,1/2311166.839488789,8.653637486605612e-7,1/577791.7098721972,1/288895.8549360986,1/144447.9274680493,1/72223.9637340247,1/36111.9818670123,1/18055.9909335062,1/9027.9954667531,1/4513.9977333765,1/2256.9988666883,1/1128.4994333441,1/564.2497166721,1/282.124858336,1/141.062429168,1/70.531214584,1/35.265607292],n.default=r},{}],607:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var u=8993220293e-15,a=1/u,s=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}return i(r,null,[{key:"stdScalesToResolutions",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:96,r=[];if(e instanceof Array){var i=!0,o=!1,a=void 0;try{for(var s,l=e.values()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=1/(s.value*n*1/.0254)*t;r.push(u)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}return r}},{key:"getToMetersFromProj4",value:function(e){var t=l.default.Common.CommonTools;if(-1!==e.indexOf("longlat")||-1!==e.indexOf("latlong"))return u;if(-1!==e.indexOf("+to_meter")){for(var n=e.split("+"),r=0;r<n.length;r++)if(-1!==n[r].indexOf("to_meter")){var i=n[r];return i=(i=t.stringRemoveBlank(i)).replace(/to_meter=/,"")}}else if(-1!==e.indexOf("+units"))for(var o=e.split("+"),a=0;a<o.length;a++)if(-1!==o[a].indexOf("units")){var s=o[a];if("us-ft"===(s=(s=t.stringRemoveBlank(s)).replace(/units=/,"")))return.304800609601219;if("m"===s)return 1}return 1}},{key:"getUnitFromProj4",value:function(e){var t=l.default.Common.CommonTools;if(-1!==e.indexOf("longlat")||-1!==e.indexOf("latlong"))return"degree";if(-1!==e.indexOf("+units")){for(var n=e.split("+"),r=0;r<n.length;r++)if(-1!==n[r].indexOf("units")){var i=n[r];if("us-ft"===(i=(i=t.stringRemoveBlank(i)).replace(/units=/,"")))return"us-ft";if("m"===i)return"meter"}}else if(-1!==e.indexOf("+to_meter"))return"other";return"other"}},{key:"degreeToMeters",value:function(e){return a*e}},{key:"meterToDegrees",value:function(e){return 1/a*e}},{key:"scrollBarWidth",value:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var r=e.offsetWidth;return n==r&&(r=t.clientWidth),document.body.removeChild(t),n-r}},{key:"_rgbToHex",value:function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}},{key:"fullColorHex",value:function(e,t,n){return"#"+r._rgbToHex(e)+r._rgbToHex(t)+r._rgbToHex(n)}},{key:"_S4",value:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)}},{key:"guid",value:function(){return r._S4()+r._S4()+"-"+r._S4()+"-"+r._S4()+"-"+r._S4()+"-"+r._S4()+r._S4()+r._S4()}}]),r}();n.default=s},{"../kq":729}],608:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isLastError=!1,this._data=""}return i(e,[{key:"_getBBox",value:function(e){return e.getBounds().toBBoxString()}},{key:"_getRequestUrl",value:function(e,t){var n=this._getBBox(t),r=l.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/exportofd";return r+="?data="+e+"&format=filestream&bbox="+n}},{key:"exportOFDAsync",value:function(e,t){var o=this;o._isLastError=!1;var n={data:e,imgtype:"png",bbox:o._getBBox(t),srs:"proj4:"+t.options.crs.proj4},a=l.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/exportofd",s=l.default.Local.Other.exportOFDAsync;return $.ajax({type:"POST",url:a,data:n,success:function(e,t,n){console.log("ExportShape success");var r=JSON.parse(e);if("success"!==r.resultcode)o._isLastError=!0,console.log("Export ofd:"+r.message),l.default.Control.Notification.getInstance().showError(s.fail());else{o._data=r;var i="http://"+l.default.Common.CommonTools._getIPPortFromUrl(a)+"/"+o._data.filename;console.log("download_url:"+i),l.default.Common.CommonTools.downloadFromUrl(i,"export_file.ofd","application/ofd"),l.default.Control.Notification.getInstance().showSuccess(s.success())}},error:function(e,t,n){console.log("ExportOFD error"),l.default.Control.Notification.getInstance().showError(s.fail())}})}},{key:"data",value:function(){return this._data}},{key:"isLastError",value:function(){return this._isLastError}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],609:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isLastError=!1,this._data=""}return i(e,[{key:"_getRequestUrl",value:function(e){var t=l.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/exportshp";return t+="?data="+e+"&format=filestream"}},{key:"exportShapeAsync",value:function(e){var o=this;o._isLastError=!1;var t=l.default.Common.CommonTools.geoJsonFCToGC(e),n=void 0;n=""!==e.prj?"ESRI:"+e.prj:"PROJ4:"+e.proj4;var r={data:JSON.stringify(t),geoSRS:n},a=l.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/exportshp",s=l.default.Local.Other.exportShapeAsync;return $.ajax({type:"POST",url:a,data:r,success:function(e,t,n){console.log("ExportShape success");var r=JSON.parse(e);if("success"!==r.resultcode)o._isLastError=!0,console.log("Export shape:"+r.message),l.default.Control.Notification.getInstance().showError(s.fail());else{o._data=r;var i="http://"+l.default.Common.CommonTools._getIPPortFromUrl(a)+"/"+o._data.filename;console.log("download_url:"+i),l.default.Common.CommonTools.downloadFromUrl(i,"shapefile.zip","application/zip"),l.default.Control.Notification.getInstance().showSuccess(s.success())}},error:function(e,t,n){console.log("ExportShape error"),l.default.Control.Notification.getInstance().showError(s.fail())}})}},{key:"data",value:function(){return this._data}},{key:"isLastError",value:function(){return this._isLastError}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],610:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.url=e.url,t.file=null,t.registeInfo=null,t.chunkIndex=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Evented),r(n,[{key:"registeFile",value:function(e){var t=this;t.file=e,$.ajax({encoding:"UTF-8",url:t.url+"/registe",type:"POST",dataType:"json",data:{fileName:t.file.name,fileSize:t.file.size},success:function(e){"success"==e.result?(t.chunkIndex=1,t.registeInfo=e,t.fire("registe_success",t.registeInfo)):t.fire("registe_failed",e.errorInfo)},error:function(e){t.fire("registe_failed",e.responseText)}})}},{key:"uploadFile",value:function(){var t=this,e=t._blob(),n=t.registeInfo.taskId,r=new FormData;r.append("taskId",n),r.append("chunkIndex",t.chunkIndex),r.append("sliceFile",e,t.file.name),$.ajax({url:t.url+"/sliceUpload",type:"POST",dataType:"json",data:r,cache:!1,contentType:!1,processData:!1,success:function(e){"success"==e.result?1==e.taskIsOver?t.fire("file_upload_finish"):t.fire("file_upload_success"):t.fire("file_upload_failed")},error:function(){t.fire("file_upload_failed")}})}},{key:"updateProgress",value:function(){var t=this,e=t.registeInfo.taskId;$.ajax({url:this.url+"/getProgress",type:"POST",dataType:"json",data:{taskId:e},success:function(e){"success"==e.result?e.taskLog?t.fire("update_progress_success",100):t.fire("update_progress_success",{progress:e.progress}):t.fire("update_progress_failed")},error:function(){t.fire("update_progress_failed")}})}},{key:"nextChunkIndex",value:function(){++this.chunkIndex}},{key:"currentChunkIndex",value:function(){return this.chunkIndex}},{key:"_blob",value:function(){var e=this.registeInfo.chunkSize,t=(this.chunkIndex-1)*e,n=this.chunkIndex*e;return this.file.slice(t,n)}}]),n}();n.default=i},{}],611:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l)}return r(l,null,[{key:"loadJsCssFile",value:function(e,t){if("js"==t)(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",e);else if("css"==t){var n;(n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)}void 0!==n&&document.getElementsByTagName("head")[0].appendChild(n)}},{key:"createJsCssFile",value:function(e,t){if("js"==t)(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",e);else if("css"==t){var n;(n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)}return n}},{key:"removeJsCssFile",value:function(e,t){for(var n="js"==t?"script":"css"==t?"link":"none",r="js"==t?"src":"css"==t?"href":"none",i=document.getElementsByTagName(n),o=i.length;0<=o;o--)i[o]&&null!=i[o].getAttribute(r)&&-1!=i[o].getAttribute(r).indexOf(e)&&i[o].parentNode.removeChild(i[o])}},{key:"replaceJsCssFile",value:function(e,t,n){for(var r="js"==n?"script":"css"==n?"link":"none",i="js"==n?"src":"css"==n?"href":"none",o=document.getElementsByTagName(r),a=o.length;0<=a;a--)if(o[a]&&null!=o[a].getAttribute(i)&&-1!=o[a].getAttribute(i).indexOf(e)){var s=l.createJsCssFile(t,n);o[a].parentNode.replaceChild(s,o[a])}}}]),l}();n.default=i},{}],612:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=e("leaflet"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._maskLayers=[],this._maskSources={},this._maskGroup=a.layerGroup([]),this._mapLayerManager=l.default.Map.MapLayerManager.getInstance().cloneManagerObject(),this._init()}return i(e,[{key:"_init",value:function(){this._initLayers(),this._initSources(),l.default.Control.Manager.getInstance()._getMap().addLayer(this._maskGroup)}},{key:"_initLayers",value:function(){for(var e=l.default.Map.MapConfig.getInstance(),t=e.maskLayers(),n=0;n<t.length;++n){var r=t[n],i=e.getLayerID(r),o=e.getLayerSourceName(r),a=l.default.Map.MapCommon.getKeyFromSourceNameLayerId(o,i),s=e.getLayerLabel(r);this._maskLayers.unshift({key:a,label:s})}}},{key:"_initSources",value:function(){this._maskSources=this._mapLayerManager._getMaskSources()}},{key:"layers",value:function(){return this._maskLayers}},{key:"addLayer",value:function(e){var t=this._getLayerFromKey(e);t&&this._maskGroup.addLayer(t)}},{key:"removeLayer",value:function(e){var t=this._getLayerFromKey(e);t&&this._maskGroup.removeLayer(t)}},{key:"_getLayerFromKey",value:function(e){var t=null,n=l.default.Map.MapCommon.getSourceNameLayerIdFromKey(e),r=n.sourceName,i=n.layerId,o=null;if(this._maskSources[r]&&(o=this._maskSources[r].layers),o)for(var a=0;a<o.length;++a)if(o[a].layerId===i){t=o[a].layer;break}return t}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729,leaflet:473}],613:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=e("axios");window.JSZip=e("jszip");var u=e("jszip-utils");window.pako=e("pako");var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t;return i(e,null,[{key:"ajax",value:function(e,t){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(console.log(200),t.call(n,null,r.responseText)):t.call(n,"error",null))},r.open("GET",e),r.send()}},{key:"httpGetAsync",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{timeout:6e4};return l.get(encodeURI(t),e).then(function(e){return e.request.response}).catch(function(e){return console.log("httpGetAsync: url:"+t+" error:"+e),"error"})}},{key:"httpPostAsync",value:function(t,e){if(2<arguments.length&&void 0!==arguments[2]&&arguments[2]){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);var i=void 0;i=window.pako.gzip(n);return l.post(encodeURI(t),i,{headers:{"Content-Encoding":"gzip"}}).then(function(e){return e.request.response}).catch(function(e){return console.log("httpPostAsync: url:"+t+" error:"+e),"error"})}return l.post(encodeURI(t),e).then(function(e){return e.request.response}).catch(function(e){return console.log("httpPostAsync: url:"+t+" error:"+e),"error"})}},{key:"loadZipFileAsync",value:function(e,r){return new Promise(function(t,n){a.default.Common.CommonTools._promiseWrap(u.getBinaryContent)(e).then(function(e){return JSZip.loadAsync(e)}).then(function(e){return e.file(r).async("string")}).then(function(e){t(e)}).catch(function(e){n(e)})})}},{key:"getParamString",value:function(e,t,n){var r=[];for(var i in e)r.push((n?i.toUpperCase():i)+"="+e[i]);return t?(-1===t.indexOf("?")?"?":"&")+r.join("&"):r.join("&")}},{key:"uploadJsonToFileServer",value:(t=s(regeneratorRuntime.mark(function e(){var t,n,r,i,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t=null,r=a.default.Map.MapConfig.getInstance(),i=r.getMapBuilder_fileServerUrl(),(n=1===o.length?(t=i+"/saveToFile",o[0]):(t=o[0],o[1])).contentJson=JSON.stringify(n.contentJson),"prj"===n.fileType&&(n.contentJson=encodeURIComponent(n.contentJson)),e.next=9,a.default.Builder.BuilderPortalProxy.uploadJsonToFileServer(n,t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"uploadJsonToFileServer_server",value:(n=s(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpPostAsync(t,a.default.Common.NetworkTools.getParamString(n));case 2:if("error"===(r=e.sent))return e.abrupt("return",{result:"error"});e.next=7;break;case 7:(r=JSON.parse(r)).downloadPath=t.replace("/file/saveToFile","/file/download/")+r.taskId;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),e}();n.default=c},{"../kq":729,axios:61,jszip:444,"jszip-utils":434,pako:476}],614:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._zIndex=a.default.Common.CommonValues.overlayPane_zIndex}return i(e,[{key:"getNextZIndex",value:function(){return--this._zIndex}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],615:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._task=new Map,this._currentContext=null,this._intervalID=0}return i(e,[{key:"_tree",value:function(){return a.default.Control.Manager.getInstance().getControl("tree")}},{key:"_checkedLayers",value:function(){var e=this._tree();return e?e.getCheckedLayers():[]}},{key:"_mapConfig",value:function(){return a.default.Map.MapConfig.getInstance()}},{key:"_infoQueryConfig",value:function(){return a.default.Query.InfoQueryConfig.getInstance()}},{key:"_buildingQueryConfig",value:function(){return a.default.Query.BuildingQueryConfig.getInstance()}},{key:"_getOriginSourceName",value:function(e){var t=this._mapConfig(),n=t.getSourceByName(e,!1);return t.getOriginSourceName(n)}},{key:"_getConfigLayerInfo",value:function(e){var t=e.sourceName,n=e.layerId;return{originSourceName:this._getOriginSourceName(t),layerId:n}}},{key:"_findMapConfigLayer",value:function(e){var t=this._mapConfig(),n=this._getConfigLayerInfo(e);return t.findLayer(n.originSourceName,n.layerId)}},{key:"_findInfoQueryConfigLayer",value:function(e){var t=this._infoQueryConfig(),n=this._getConfigLayerInfo(e);return t.findLayer(n.layerId,n.originSourceName)}},{key:"_findBuildingQueryConfigLayers",value:function(e){var t=this._buildingQueryConfig(),n=this._getConfigLayerInfo(e);return t.findAllLayer(n.layerId,n.originSourceName)}},{key:"_getUrl",value:function(e){var t=this._mapConfig(),n=this._findMapConfigLayer(e),r=t.getLayerProperty(n,"src_name"),i=t.getSourceByName(r,!1);return t.getSourceUrl(i)}},{key:"_getInfoQueryOptions",value:function(e){var t=this._infoQueryConfig(),n=this._findInfoQueryConfigLayer(e);return{fields:t.getLayerFields(n)+",#length#,#area#",layerId:t.getLayerQueryID(n),url:this._getUrl(e)}}},{key:"_getBuildingQueryOptions",value:function(e){for(var t=this._buildingQueryConfig(),n=this._findBuildingQueryConfigLayers(e),r=[],i=this._getUrl(e),o=0;o<n.length;++o){var a=t.getLayerFields(n[o])+",#length#,#area#",s=t.getLayerBuildingID(n[o]);r.push({fields:a,layerId:s,url:i})}return r}},{key:"_LatLngBoundsToGeometry",value:function(e){var t=e.getNorthEast(),n=e.getSouthEast(),r=e.getSouthWest(),i=e.getNorthWest();return{type:"PolyGon",coordinates:[[[t.lng,t.lat],[n.lng,n.lat],[r.lng,r.lat],[i.lng,i.lat],[t.lng,t.lat]]]}}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],616:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._task=new Map,this._currentContext=null,this._intervalID=0}return r(e,[{key:"addTask",value:function(e,t){t.setStatusWaiting(),console.log("TaskManager addWork"),this._task.set(e,t)}},{key:"deleteTask",value:function(e){this._task.delete(e)}},{key:"doTask",value:function(){if(null===this._currentContext||null!=this._currentContext&&(this._currentContext.isStatusDone()||this._currentContext.isWaiting())||null!=this._currentContext&&null===this._currentContext._map){var e=this._findTask(),t=u(e,2),n=t[0],r=t[1];if(void 0===n)return;this._currentContext=r,this._currentContext.setStatusWorking(),console.log("TaskManager doTask"),this.deleteTask(n),this._currentContext.update()}}},{key:"start",value:function(){console.log("TaskManager start");var e=this;this._intervalID=setInterval(function(){e.doTask()},50)}},{key:"stop",value:function(){clearInterval(this._intervalID)}},{key:"isAllDone",value:function(){var e=!0;return this._currentContext&&(e=this._currentContext.isStatusDone()),console.log("isAllDone:"+e),e}},{key:"_findTask",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=!0,n=!1,r=void 0;try{for(var i,o=this._task[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=u(i.value,2),s=a[0],l=a[1];if(s._currentUrl&&-1!==s._currentUrl.lastIndexOf("mask=1"))return[s,l]}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e?[this._task.keys().next().value,this._task.values().next().value]:this._findTask(!0)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],617:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function o(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a="kq-webmap-theme",r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._currentTheme=null,$("body").prepend('<div style="display: none; " class="kq-maincolor"/>')}var t,n,r;return i(e,[{key:"loadInitTheme",value:(r=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getInitThemeName();case 2:return t=e.sent,e.next=5,this._load(t);case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_load",value:(n=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("load theme:"+t),e.prev=1,e.next=4,$.ajax(KQ.Common.CommonValues.distPath+"kqcss-"+t+".js");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}},e,this,[[1,6]])})),function(e){return n.apply(this,arguments)})},{key:"getInitThemeName",value:(t=o(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=KQ.Map.MapConfig.getInstance(),n=t.themeName(),e.next=4,this.getSavedThemeName();case 4:return(r=e.sent)&&(n=r),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getSavedThemeName",value:function(){return localforage.getItem(a).then(function(e){return e}).catch(function(e){console.log("getSavedThemeName error:"+e)})}},{key:"setSavedThemeName",value:function(e){return localforage.setItem(a,e).then(function(){}).catch(function(e){console.log("setSavedThemeName error:"+e)})}},{key:"mainColor",value:function(){return $(".kq-maincolor").css("color")}},{key:"getThemeList",value:function(){return["default-blue","default-red","black-black","blueopal-blue","bootstrap-blue","fiori-blue","flat-black","highcontrast-purple","material-blue","materialblack-black","metro-green","metroblack-black","moonlight-black","nova-red","office365-blue","silver-blue","uniform-gray"]}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=r},{}],618:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),v=r(e("../kq")),b=r(e("./AdvancedSearchResultDialog")),h=r(e("./AdvancedSearchHistoryDialog")),f=r(e("./Manager")),d=r(e("leaflet"));function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var m="kq-webmap-query-history",i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._config=e,this._div=t,this._data=[],this._currentLayerFieldList=[],this._currentLayerFieldAliasList=[],this._create(),this._html=v.default.Local.Control.advancedSearch.html}var e,t,r,i,o,a,s,l,u;return c(n,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__select-layer__",this._html.selectLayer()).replace("__query-condition__",this._html.queryCondition()).replace("__field-label__",this._html.fieldLabel()).replace("__add-to-condition-info__",this._html.addToConditionInfo()).replace("__value-info__",this._html.valueInfo()).replace("__value-add-to-condition-info__",this._html.addToConditionInfo()).replace("__get-only-value__",this._html.getOnlyValue()).replace("__condition-info__",this._html.conditionInfo()).replace("__clear__",this._html.clear()).replace("__query__",this._html.query()).replace("__scope__",this._html.scope())}},{key:"_initHtml",value:(u=p(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._container=d.default.DomUtil.get(t._div),t._container||(t._container=d.default.DomUtil.create("div")),e.next=5,v.default.Common.NetworkTools.httpGetAsync(v.default.Common.CommonValues.kqwebmapPath+"query/advanced_search.html");case 5:if("error"===(n=e.sent))return console.log("load advanced_search_html error!"),e.abrupt("return",!1);e.next=9;break;case 9:n=t._translateHtmlChineseEnglish(n),$(t._container).append(n),$("#advanced-dropdownlist").kendoDropDownList({dataSource:{data:t._getConfigLayersLabels()},animation:!1,cascade:t._onLayerChange.bind(t)}).data("kendoDropDownList").wrapper.kendoTooltip({filter:"span:first-child:not(:empty)",position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,width:124,content:function(e){return e.target.text()},show:function(e){this.content.text()!=this.target().text()&&this.refresh()}}).data("kendoTooltip"),$("#advanced-search-history-button").kendoButton({icon:"clock",click:function(e){console.log("query-history-button clicked!"),t._openQueryHistoryDialog()}}),$("#advanced-search-history-button").kendoTooltip({position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,content:function(){return v.default.Local.Control.AdvancedSearchHistoryDialog.AdvancedSearchHistory()}}).data("kendoTooltip"),$("#field-listView").kendoListView({dataSource:{data:t._getCurrentLayerFieldData()},template:"<div>#:name#</div>",selectable:!0,dataBound:t._setFieldListViewEvent.bind(t)}),(r=$("#field-listView").data("kendoListView")).select(r.element.children().first()),$("#field-add-condition-button").kendoButton({click:function(e){t._addSelectFieldToQueryCondition()}}),$("#equal-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" =",$("#condition-textarea").val(t),console.log("equal-button clicked!")}}),$("#less-than-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" <",$("#condition-textarea").val(t),console.log("less-than-button clicked!")}}),$("#greater-than-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" >",$("#condition-textarea").val(t),console.log("greater-than-button clicked!")}}),$("#greater-or-equal-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" >=",$("#condition-textarea").val(t),console.log("greater-or-equal-button clicked!")}}),$("#less-or-equal-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" <=",$("#condition-textarea").val(t),console.log("less-or-equal-button clicked!")}}),$("#greater-or-less-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" <>",$("#condition-textarea").val(t),console.log("greater-or-less-button clicked!")}}),$("#like-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" LIKE",$("#condition-textarea").val(t),console.log("like-button clicked!")}}),$("#or-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" OR",$("#condition-textarea").val(t),console.log("or-button clicked!")}}),$("#and-button").kendoButton({click:function(e){var t=$("#condition-textarea").val();t+=" AND",$("#condition-textarea").val(t),console.log("and-button clicked!")}}),$("#value-info-listView").kendoListView({dataSource:{data:[]},template:"<div>#:name#</div>",selectable:!0,dataBound:t._setValueInfoListViewEvent.bind(t)}),$("#value-add-condition-button").kendoButton({click:function(e){t._addSelectValueInfoToQueryCondition()}}),$("#get-only-value-button").kendoButton({click:function(e){console.log("get-only-value-button clicked!"),t._getQueryFields()}}),$("#clear-button").kendoButton({click:function(e){console.log("clear"),$("#condition-textarea").val("")}}),$("#search-button").kendoButton({click:function(e){console.log("advanced-search-button clicked!"),t._executeAdvancedSearch(),t._saveQueryConditionToHistory()},type:"submit"}),$("#search-button").kendoTooltip({position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,content:function(){return v.default.Local.Control.advancedSearch.searchButton.tooltip()}}).data("kendoTooltip"),$("#control-panel-button").kendoButton({click:function(e){console.log("control-panel-button clicked!"),t._toggleDrawingPanel()}}),$("#control-panel-button").kendoTooltip({position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,content:function(){return v.default.Local.Control.advancedSearch.controlPanelButton.tooltip()}}).data("kendoTooltip"),d.default.Browser.mobile?($("#field-add-condition-button").show(),$("#value-add-condition-button").show()):($("#field-add-condition-button").hide(),$("#value-add-condition-button").hide());case 37:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"addTo",value:function(e){this._map=e}},{key:"_create",value:function(){this._initHtml()}},{key:"_toggleDrawingPanel",value:function(){f.default.getInstance()._toggleDrawPane()}},{key:"_openQueryHistoryDialog",value:(l=p(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,console.log("Function _openQueryHistoryDialog exec() !"),e.next=4,t.getSavedAdvancedSearchHistory();case 4:(n=e.sent)||(n=[]),h.default.getInstance().open(n);case 7:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"_saveQueryConditionToHistory",value:(s=p(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n=null,!(i=(t=this)._getSelectedConfigLayer())){e.next=13;break}if(null===(o=t._getConfigLayer(i)))return e.abrupt("return");e.next=10;break;case 10:a=v.default.Query.AdvancedSearchConfig.getInstance(),n=a.getLayerQueryID(o),r=a.getLayerLabel(o);case 13:return s=$("#condition-textarea").val(),l=$("#advanced-dropdownlist").data("kendoDropDownList").select(),u=n+","+r+","+l+","+s,e.next=18,t.getSavedAdvancedSearchHistory();case 18:return(c=e.sent)||(c=[]),c.push({name:u}),e.next=23,t.setSavedAdvancedSearchHistory(c);case 23:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"getSavedAdvancedSearchHistory",value:(a=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localforage.getItem(m).then(function(e){return e}).catch(function(e){console.log("getSavedAdvancedSearchHistory error:"+e)}));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"setSavedAdvancedSearchHistory",value:(o=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localforage.setItem(m,t).then(function(){}).catch(function(e){console.log("setSavedAdvancedSearchHistory error:"+e)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"_getSource",value:function(e){return v.default.Map.MapConfig.getInstance().getSourceByName(e,!0)}},{key:"_getQueryUrl",value:function(e){return v.default.Map.MapConfig.getInstance().getSourceUrl(this._getSource(e))}},{key:"_getOriginSourceName",value:function(e){var t=this._getSource(e);return v.default.Map.MapConfig.getInstance().getOriginSourceName(t)}},{key:"_getConfigLayer",value:function(e){var t=v.default.Query.AdvancedSearchConfig.getInstance(),n=t.getLayerID(e),r=t.getLayerSourceName(e);return t.findLayer(n,r)}},{key:"_getConfigLayersLabels",value:function(){var i=v.default.Query.AdvancedSearchConfig.getInstance(),o=v.default.Map.MapConfig.getInstance(),a=[];return i.layers().forEach(function(e){if(e){var t=i.getLayerSourceName(e),n=i.getLayerID(e),r=o.findLayer(t,n);if(null!==r)!0===o.isLayerHasPermission(r)&&a.push(e)}}),[].concat(a.map(function(e){return i.getLayerLabel(e)}))}},{key:"_getCurrentLayerFieldData",value:function(){var n=this,e=v.default.Query.AdvancedSearchConfig.getInstance();n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[];var t=this._getSelectedConfigLayer();if(t){var r=e.getLayerListFieldsAlias(t).split(",");e.getLayerListFields(t).split(",").map(function(e,t){"shape"!==e.toLowerCase()&&(n._currentLayerFieldList.push({name:e}),n._currentLayerFieldAliasList.push({name:r[t]}))})}return n._currentLayerFieldAliasList}},{key:"_getListViewCurrentIndex",value:function(e){var t=$(e).data("kendoListView"),n=t.items(),r=t.select();return n.index(r[0])}},{key:"_getSelectedListViewText",value:function(e){var t=this._getListViewCurrentIndex(e);return-1==t?"":$(e).data("kendoListView").items()[t].textContent}},{key:"_onLayerChange",value:function(){this._getCurrentLayerFieldData(),$("#field-listView").kendoListView({dataSource:this._currentLayerFieldAliasList,template:"<div>#:name#</div>",selectable:!0});var e=$("#field-listView").data("kendoListView");e.select(e.element.children().first()),$("#value-info-listView").kendoListView({dataSource:{data:[]},template:"<div>#:name#</div>",selectable:!0}),$("#condition-textarea").val("")}},{key:"_getFieldListViewSelectField",value:function(){var e=this._getListViewCurrentIndex("#field-listView");return e<0?"":this._currentLayerFieldList[e].name}},{key:"_addSelectFieldToQueryCondition",value:function(){var e=$("#condition-textarea").val();e+=" "+this._getFieldListViewSelectField(),$("#condition-textarea").val(e)}},{key:"_setFieldListViewEvent",value:function(){var n=this;$("#field-listView").on("dblclick",function(e,t){n._addSelectFieldToQueryCondition()})}},{key:"_addSelectValueInfoToQueryCondition",value:function(){var e=$("#condition-textarea").val();e+=" "+this._getSelectedListViewText("#value-info-listView"),$("#condition-textarea").val(e)}},{key:"_setValueInfoListViewEvent",value:function(){var n=this;$("#value-info-listView").on("dblclick",function(e,t){n._addSelectValueInfoToQueryCondition()})}},{key:"_getQueryFields",value:(i=p(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this)._getFieldListViewSelectField(),r=t._getSelectedConfigLayer())return i=v.default.Query.AdvancedSearchConfig.getInstance().getLayerQueryID(r),o=v.default.Query.AdvancedSearchConfig.getInstance().getLayerSourceName(r),a=t._getQueryUrl(o),s=new Date,l=s.toLocaleString()+"."+s.getMilliseconds(),u={url:a,sql:"select distinct "+n+" from $$"+i+"$$ ORDER BY "+n,reqcount:1e3,currentTime:l},c=[],e.prev=11,v.default.Control.Waiting.show(v.default.Control.Manager.getInstance()._getMap()),e.next=15,t._getSqlQueryData(u);e.next=27;break;case 15:c=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),v.default.Control.Waiting.close();case 21:return e.prev=21,v.default.Control.Waiting.close(),e.finish(21);case 24:h=[],$.each(c,function(e,t){h.push({name:t.properties[n]})}),$("#value-info-listView").kendoListView({dataSource:{data:h},template:"<div>#:name#</div>",selectable:!0});case 27:case"end":return e.stop()}},e,this,[[11,18,21,24]])})),function(){return i.apply(this,arguments)})},{key:"_stringMatchNumberValue",value:function(e){var t=new RegExp("\\s*([A-Za-z0-9_\\u4E00-\\u9FFF]+)\\s*=\\s*([-+]?\\d+(\\.\\d+)?)\\s*","ig");return e.match(t)}},{key:"_stringReplaceEqualToBetween",value:function(e){var t=v.default.Common.CommonTools.stringRemoveBlank(e).split("="),n=t[0],r=t[1],i=parseFloat(r);return" ( "+n+" * 1.0 > "+(i-1e-7)+" AND "+n+" * 1.0 < "+(i+1e-7)+" ) "}},{key:"_parseSqlNumberCondition",value:function(e){var t=this._stringMatchNumberValue(e),n=e;if(null!==t)for(var r=0;r<t.length;++r){var i=this._stringReplaceEqualToBetween(t[r]);n=n.replace(t[r],i)}return n}},{key:"_getQueryOptions",value:function(e){var t=e;if(null===t)return null;var n=v.default.Query.AdvancedSearchConfig.getInstance(),r=n.getLayerQueryID(t),i=n.getLayerFields(t),o=n.getLayerSourceName(t),a=this._getQueryUrl(o),s=n.getLayerRequestCount(t),l=$("#condition-textarea").val();return{url:a,layerId:r,fields:i,where:this._parseSqlNumberCondition(l),geometry:this._getGeometry(),reqcount:s}}},{key:"_getSqlQueryData",value:(r=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.default.Query.SqlQuery.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_getGeoInfoQueryData",value:(t=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.default.Query.InfoQuery.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_getSelectedConfigLayer",value:function(){var e=$("#advanced-dropdownlist").data("kendoDropDownList").select();return v.default.Query.AdvancedSearchConfig.getInstance().layers()[e]}},{key:"_getKey",value:function(e,t){return v.default.Map.MapCommon.getKeyFromSourceNameLayerId(e,t)}},{key:"_getLayerFields",value:function(e){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerFields(e)}},{key:"_getLayerChartFields",value:function(e){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerChartField(e)}},{key:"_getLayerLabel",value:function(e){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerLabel(e)}},{key:"_getLayerFieldsAlias",value:function(e){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerFieldsAlias(e)}},{key:"_getLayerSummaryField",value:function(e){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerSummaryField(e)}},{key:"_getGeometry",value:function(){var e=v.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!1);return e?JSON.stringify(v.default.Common.CommonTools.geoJsonFCToGC(e)):null}},{key:"_organizeQueryData",value:function(e,t){for(var n=[],r=0;r<e.length;++r){var i=e[r],o={},a=i.properties;o.geometry=i.geometry;for(var s=0;s<t.length;++s){var l=t[s];a.hasOwnProperty(l)&&(o[l]=a[l])}n.push(o)}return n}},{key:"_executeAdvancedSearch",value:(e=p(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,n=v.default.Query.AdvancedSearchConfig.getInstance(),!(r=t._getSelectedConfigLayer())){e.next=36;break}if(i={sourceName:n.getLayerSourceName(r),layerId:n.getLayerID(r)},null===(o=t._getQueryOptions(r)))return v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.optionError()),e.abrupt("return");e.next=11;break;case 11:if(""===o.where&&null===o.geometry)return v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.conditionError()),e.abrupt("return");e.next=14;break;case 14:if(a=[],s=[],l=v.default.Control.Manager.getInstance().getControl("tree")){e.next=21;break}v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.layerTreeError()),e.next=36;break;case 21:return l.setQueryLayersChecked([i]),e.prev=22,v.default.Control.Waiting.show(v.default.Control.Manager.getInstance()._getMap()),e.next=26,t._getGeoInfoQueryData(o);case 26:s=e.sent,e.next=32;break;case 29:e.prev=29,e.t0=e.catch(22),v.default.Control.Waiting.close();case 32:return e.prev=32,v.default.Control.Waiting.close(),e.finish(32);case 35:v.default.Query.QueryIDManager.isDataArrayCanceled(s)?console.log("query canceled, data come!"):0===s.length?v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.queryRecordError()):(u=t._getLayerLabel(r),c=t._getLayerFields(r),h=v.default.Query.AdvancedSearchConfig.getInstance().getLayerID(r),f=v.default.Query.AdvancedSearchConfig.getInstance().getLayerQueryID(r),d=v.default.Query.AdvancedSearchConfig.getInstance().getLayerSourceName(r),p=v.default.Common.CommonTools._findTooltipFromSourceNameLayerId(d,h),m=[],(g=v.default.Query.AdvancedSearchConfig.getInstance()).getLayerChartField(r)&&(m=g.getLayerChartField(r).split("|")),y=[],g.getLayerSummaryField(r)&&(y=g.getLayerSummaryField(r).split("|")),0==y.length&&(y[0]="areaLength"),a.push({sourceName:d,layerId:h,queryId:f,label:u,toolTip:p,fields:c.split(","),titles:t._getLayerFieldsAlias(r).split(","),records:t._organizeQueryData(s,c.split(",")),summaryField:y,chartFields:m}),(_=b.default.getInstance()).setTitle(v.default.Local.Control.advancedSearchResultDialog.title()),_.open(a));case 36:case"end":return e.stop()}},e,this,[[22,29,32,35]])})),function(){return e.apply(this,arguments)})},{key:"toString",value:function(){return"AdvancedSearch"}}]),n}();n.default=i},{"../kq":729,"./AdvancedSearchHistoryDialog":619,"./AdvancedSearchResultDialog":620,"./Manager":643,leaflet:473}],619:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Window"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._historyDialog=null,this._isFirstOpen=!0,this._historyListView=null,this._historyListData=[],this._init()}return i(e,[{key:"open",value:function(e){this._historyListData=e,this._historyListView.setDataSource(new kendo.data.DataSource({data:e})),this._historyListView.select(this._historyListView.element.children().first()),this._isFirstOpen?(this._isFirstOpen=!1,this._historyDialog.center().open()):this._historyDialog.open()}},{key:"_init",value:function(){this._initHtml(),this._initHistoryDialog()}},{key:"_initHtml",value:function(){var t=this,e='<div id="query-history-dialog" ><div id="query-history-list" style="overflow: auto; line-height: 1.6em; clear:both; height: 280px;"></div><button id="query-history-dialog-ok-button" type="button" style="float:right; margin: 15px 50px 15px 20px;" >'+KQ.Local.Control.AdvancedSearchHistoryDialog.HistoryOkButton()+"</button></div>",n=KQ.Common.CommonValues.mapContainerID;$("#"+n).append($(e)),$("#query-history-dialog-ok-button").kendoButton({click:function(e){console.log("query-history-dialog-ok-button clicked!"),t._addSelectStatementToAdvancedSearch()}})}},{key:"_initHistoryDialog",value:function(){var e=this,t={title:KQ.Local.Control.AdvancedSearchHistoryDialog.AdvancedSearchHistory(),minWidth:"350px",minHeight:"350px",scrollable:!1,actions:["Close"]},n=new a.default(e._getHistoryDialogId(),t);n.initAsync(function(){e._historyDialog=n._object()}),e._initHistoryListView()}},{key:"_initHistoryListView",value:function(){this._historyListView=$("#"+this._getQueryHistoryListViewId()).kendoListView({template:kendo.template("<div>#:name#</div>"),selectable:!0}).data("kendoListView")}},{key:"_getHistoryDialogId",value:function(){return"query-history-dialog"}},{key:"_getQueryHistoryListViewId",value:function(){return"query-history-list"}},{key:"_addSelectStatementToAdvancedSearch",value:function(){console.log("### -> Function _addSelectStatementToAdvancedSearch exec() !");var e=this._getHistoryListViewSelectStatement().split(",");4===e.length&&($("#advanced-dropdownlist").data("kendoDropDownList").select(parseInt(e[2])),$("#condition-textarea").val(e[3]))}},{key:"_getHistoryListViewSelectStatement",value:function(){var e=$("#"+this._getQueryHistoryListViewId()).data("kendoListView"),t=e.items(),n=e.select(),r=t.index(n[0]);return r<0?"":this._historyListData[r].name}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"./Window":694}],620:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=o(e("./QueryResultDialog")),p=o(e("./FeatureUpdateAttributeDialog"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._desc="advanced-search-",t._title=KQ.Local.Control.advancedSearchResultDialog.title(),t._init(),t._addOrRemoveFeatureUpdateDelete(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"_initHtml",value:function(){var e=KQ.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="advanced-search-result-dialog"><div id="advanced-search-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"advanced-search-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"advanced-search-layer-name-tabs"}},{key:"_addOrRemoveFeatureUpdateDelete",value:function(){var o=this,a=KQ.Map.MapConfig.getInstance();a.controls().forEach(function(e){var t=a.getControlType(e);if(a.isControlHasPermission(e)){if("sidebar"===t){var n=a.getSubControl(e,"featureImport"),r=a.getControlProperty(n,"is_update"),i=a.getControlProperty(n,"is_delete");n&&a.isControlHasPermission(n)&&o._initRecordListContextMenu(r,i)}}else;})}},{key:"_getFeatureUpdateDeleteMenuItems",value:function(e,t){var n=[];return"1"===e&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureUpdateMenu(),cmd:"featureUpdate",uiIcon:"ui-icon custom-icon-transparency"}),"1"===t&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureDeleteMenu(),cmd:"featureDelete",uiIcon:"ui-icon custom-icon-clearall"}),n}},{key:"_initRecordListContextMenu",value:function(e,t){var n,d=this;($("div#advanced-search-result-dialog").bind("contextmenu",function(e){e.preventDefault()}),"0"!==e||"0"!==t)&&((e||t)&&$("#advanced-search-result-dialog").contextmenu({delegate:"tbody > tr.k-state-selected",menu:d._getFeatureUpdateDeleteMenuItems(e,t),select:(n=m(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d._dataSource.length<1)return e.abrupt("return");e.next=2;break;case 2:if(r=d._dataSource[0].sourceName,i=d._dataSource[0].layerId,o=d._dataSource[0].records,a=KQ.Query.FeatureImportConfig.getInstance(),s=a.findLayer(i,r),d._currentSelectDataItem){e.next=9;break}return e.abrupt("return");case 9:l=a.getLayerPrimaryKey(s),u=""+d._currentSelectDataItem[l],d._isBlankText(u)&&(u="blank"),c=d._currentSelectDataItem[l],h=l+"="+c,e.t0=n.cmd,e.next="featureUpdate"===e.t0?17:"featureDelete"===e.t0?21:28;break;case 17:return console.log("FeatureUpdate: "),d._featureUpdateAttributeDialog=p.default.getInstance(),d._featureUpdateAttributeDialog.initFeatureUpdateDialog(s,d._currentSelectDataItem,u),e.abrupt("break",28);case 21:return console.log("FeatureDelete: "),f=KQ.Common.CommonValues.mapContainerID,$("#"+f).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),d._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: medium;'>"+KQ.Local.Control.FeatureImport.ContextMenu.ConfirmToDelete()+"</b>",messages:{okText:KQ.Local.Control.FeatureImport.ContextMenu.okText(),cancel:KQ.Local.Control.FeatureImport.ContextMenu.cancelText()}}).data("kendoConfirm"),d._confirmDialog.result.done(m(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("准备删除要素!"),d._featureUpdateAttributeDialog=p.default.getInstance(),e.next=4,d._featureUpdateAttributeDialog.featureDeleteFunction(i,h,u);case 4:if(t=e.sent,n=-1,console.log("Feature delete is success @@@ ---\x3e"+t),!t){e.next=18;break}r=0;case 9:if(!(r<o.length)){e.next=17;break}if(o[r][l]===c)return n=r,e.abrupt("break",17);e.next=14;break;case 14:++r,e.next=9;break;case 17:-1!=n&&(d._dataSource[0].records.splice(n,1),d.open(d._dataSource),setTimeout(function(){KQ.Control.Manager.getInstance()._getMap().panBy([-150,-150])},1e3));case 18:case"end":return e.stop()}},e,this)}))).fail(function(){console.log("取消要素删除操作!")}),d._confirmDialog.open(),e.abrupt("break",28);case 28:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}))}},{key:"_isBlankText",value:function(e){return!e||"string"==typeof e&&0===(e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).length}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=a},{"./FeatureUpdateAttributeDialog":635,"./QueryResultDialog":668}],621:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("leaflet"),a=(r=o)&&r.__esModule?r:{default:r};var s={width:300,height:200,keepAspectRatio:!0},l=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=a.default.extend({},s,e);this._areaSelect=new a.default.AreaSelect(t)}return i(n,[{key:"addTo",value:function(e){this._areaSelect.addTo(e)}},{key:"addToMapView",value:function(e){e.addControl(this._areaSelect)}},{key:"remove",value:function(){this._areaSelect.remove()}},{key:"getBounds",value:function(){return this._areaSelect.getBounds()}}]),n}();n.default=l},{leaflet:473}],622:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),c=r(e("../kq")),a=r(e("./BookmarkAddDialog"));function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._div_id=e,this._local_bookmark=c.default.Local.Control.Bookmark,this._bookmarkAddDialog=null,this._bookmarkRecordGrid=null,this._bookmarkMenu=null,this._bookmarkRecordList=[],this._currentBookmarkIndex=-1,this._init()}var e,n,r,i;return o(t,[{key:"addTo",value:function(e){self._map=e}},{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__add-bookmark__",this._local_bookmark.addBookmarkButton())}},{key:"_initHtml",value:(i=h(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._container=L.DomUtil.get(t._div_id),t._container||(t._container=L.DomUtil.create("div")),e.next=5,c.default.Common.NetworkTools.httpGetAsync(c.default.Common.CommonValues.kqwebmapPath+"query/bookmark.html");case 5:if("error"===(n=e.sent))return console.log("load bookmark_html error!"),e.abrupt("return",!1);e.next=9;break;case 9:n=t._translateHtmlChineseEnglish(n),$(t._container).append(n),console.log("load bookmark_html success");case 12:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_init",value:(r=h(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=this,e.next=3,s._initHtml();case 3:return $("#bookmark-add-button").kendoButton({click:function(){console.log("bookmark-add-button clicked!"),s._bookmarkAddDialog=a.default.getInstance(),s._bookmarkAddDialog.open()}}),s._bookmarkRecordGrid=$("#bookmark-record-grid").kendoGrid({height:"calc(100% - 55px)",selectable:!0,resizable:!0,scrollable:!0,columns:[{field:"bookmarkField",title:s._local_bookmark.bookmark(),editable:function(e){return!1}}],dataSource:{data:[]},change:function(e){var t=$("#bookmark-record-grid").data("kendoGrid").select(),n=$(t).closest("tr").index(),r=s._bookmarkRecordList[n];s._currentBookmarkIndex=n,console.log("@@@ position: ",r);var i=c.default.Control.Manager.getInstance().getMapView(),o=r.coordinates.split(","),a=[];a.push(parseFloat(o[1])),a.push(parseFloat(o[0])),i.flyTo(a,parseInt(r.scalelevel))}}).data("kendoGrid"),$(window).resize(function(){s._bookmarkRecordGrid.resize()}),console.log("123456 -add-button clicked!"),e.next=9,s.readBookmarkList();case 9:s._initBookmarkListContextMenu();case 10:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"readBookmarkList",value:(n=h(regeneratorRuntime.mark(function e(){var t,n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n=c.default.Query.BookmarkRead.getInstance(),r=c.default.Control.Notification.getInstance(),e.prev=3,i=c.default.Map.MapConfig.getInstance(),console.log("-> bookmark query properties: "),o={url:i.getSourceUrl(),type:"read"},e.next=9,n.queryAsync(o,function(){console.log("Bookmark read query_good");var e=n.response();console.log("Bookmark read response: "),console.log(e),e&&"success"===e.resultcode&&e.result?t.resetMarkListDataSource(e.result):t._bookmarkMenu&&r.showError(c.default.Local.Control.Bookmark.readFail())},function(){console.log("Bookmark add query_error"),t._bookmarkMenu&&r.showError(c.default.Local.Control.Bookmark.readFail())});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Bookmark add error:"+e.t0);case 14:case"end":return e.stop()}},e,this,[[3,11]])})),function(){return n.apply(this,arguments)})},{key:"deleteBookmarkFunction",value:(e=h(regeneratorRuntime.mark(function e(){var n,t,r,i,o,a,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(n=this)._currentBookmarkIndex,r=n._bookmarkRecordList[t].title,i=n._bookmarkRecordList[t].coordinates,o=n._bookmarkRecordList[t].id,a=c.default.Query.BookmarkDelete.getInstance(),s=c.default.Control.Notification.getInstance(),e.prev=7,l=c.default.Map.MapConfig.getInstance(),console.log("-> bookmark delete properties: "),u={url:l.getSourceUrl(),coordinates:i,title:r,id:o,type:"del"},e.next=13,a.queryAsync(u,function(){var e=h(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Bookmark delete query_good"),t=a.response(),console.log("Bookmark delete response: "),console.log(t),t&&"success"===t.resultcode)return s.showSuccess(decodeURIComponent(r)+c.default.Local.Control.Bookmark.deleteOk()),e.next=8,n.readBookmarkList();e.next=10;break;case 8:e.next=11;break;case 10:s.showError(decodeURIComponent(r)+c.default.Local.Control.Bookmark.deleteFail());case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),function(){console.log("Bookmark add query_error"),s.showError(decodeURIComponent(r)+c.default.Local.Control.Bookmark.deleteFail())});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log("Bookmark delete error:"+e.t0);case 18:case"end":return e.stop()}},e,this,[[7,15]])})),function(){return e.apply(this,arguments)})},{key:"_initBookmarkListContextMenu",value:function(){var n,r=this;$("div#bookmark-div").bind("contextmenu",function(e){e.preventDefault()}),r._bookmarkMenu=$("#bookmark-div").contextmenu({delegate:"div.k-grid tr.k-state-selected",menu:[{title:r._local_bookmark.deleteBookmark(),cmd:"bookmarkDelete",uiIcon:"ui-icon custom-icon-clearall"}],select:(n=h(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.cmd,e.next="bookmarkDelete"===e.t0?3:7;break;case 3:return console.log("bookmarkDelete: "),e.next=6,r.deleteBookmarkFunction();case 6:return e.abrupt("break",7);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})})}},{key:"resetMarkListDataSource",value:function(e){this._bookmarkRecordList=e;for(var t=[],n=0;n<e.length;n++){var r=e[n].title,i=decodeURIComponent(r);t.push({bookmarkField:i})}var o=new kendo.data.DataSource({data:t});this._bookmarkRecordGrid.setDataSource(o),this._currentBookmarkIndex=-1,console.log("datasource ---\x3e"),console.log(t)}}],[{key:"getInstance",value:function(e){return t._instance||(t._instance=new t(e)),t._instance}}]),t}();n.default=i},{"../kq":729,"./BookmarkAddDialog":623}],623:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),p=r(e("../kq")),o=r(e("./Window"));function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._bookmarkAddDialog=null,this._isFirstOpen=!0,this._html=p.default.Local.Control.Bookmark.html}var t,n,r;return i(e,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__bookmark-name__",this._html.bookmarkName()).replace("__submit__",this._html.submit())}},{key:"open",value:(r=m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initBookmarkAddWindow();case 3:t._initBookmarkAddHtml(),t._bookmarkAddDialog&&t._bookmarkAddDialog.open();case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_init",value:(n=m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initBookmarkAddWindow();case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initBookmarkAddWindow",value:(t=m(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n={title:p.default.Local.Control.Bookmark.addBookmark(),width:"350px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:["Close"],close:function(){console.log("Bookmark Add Dialog on close!"),t.remove()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new o.default(t._getBookmarkAddDialogId(),n),e.next=5,r.initAsync(function(){t._bookmarkAddDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initBookmarkAddHtml",value:function(){var t,d=this;$("#bookmark-add-confirm-button").kendoButton({click:(t=m(regeneratorRuntime.mark(function e(t){var r,n,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("bookmark-add-button clicked!"),r=p.default.Control.Notification.getInstance(),$("#bookmark-add-title-input").val()){e.next=7;break}r.showError(p.default.Local.Control.Bookmark.bookmarkNone()),e.next=27;break;case 7:return n=p.default.Control.Manager.getInstance().getMapView(),i=n.getBounds(),o=i.getSouthWest(),a=i.getNorthEast(),o.lat+","+o.lng+","+a.lat+","+a.lng,s=n.getCenter(),l=n.getZoom(),u=$("#bookmark-add-title-input").val(),c=p.default.Query.BookmarkAdd.getInstance(),e.prev=16,h=p.default.Map.MapConfig.getInstance(),console.log("-> bookmark add properties: "),f={url:h.getSourceUrl(),coordinates:s.lng+","+s.lat,title:encodeURIComponent($("#bookmark-add-title-input").val()),scalelevel:l,type:"ADD"},e.next=22,c.queryAsync(f,function(){var e=m(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Bookmark add query_good"),t=c.response(),console.log("Bookmark add response: "),console.log(t),t&&"success"===t.resultcode)return r.showSuccess(u+p.default.Local.Control.Bookmark.addOk()),n=p.default.Control.Manager.getInstance().getControl("bookmark"),e.next=9,n.readBookmarkList();e.next=11;break;case 9:e.next=12;break;case 11:r.showError(u+p.default.Local.Control.Bookmark.addFail());case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),function(){console.log("Bookmark add query_error"),r.showError(u+p.default.Local.Control.Bookmark.addFail())});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(16),console.log("Bookmark add error:"+e.t0);case 27:setTimeout(function(){d._bookmarkAddDialog.close()},150);case 28:case"end":return e.stop()}},e,this,[[16,24]])})),function(e){return t.apply(this,arguments)})})}},{key:"remove",value:function(){this._bookmarkAddDialog&&(e._instance=null,this._bookmarkAddDialog.destroy())}},{key:"_getBookmarkAddDialogId",value:function(){return"bookmark-add-dialog"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729,"./Window":694}],624:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return i(e,[{key:"_getMap",value:function(){return a.default.Control.Manager.getInstance()._getMap()}},{key:"_getMapView",value:function(){return a.default.Control.Manager.getInstance().getMapView()}},{key:"_getBuilding",value:function(){var n=this,r=a.default.Map.MapBuilding.getInstance();return r.setOnClick(function(e){var t=r.getData(e.feature).properties;$("#popup_properties").length&&$("#popup_properties").remove(),L.popup({minWidth:240}).setLatLng([e.lat,e.lon]).setContent('<div id="popup_properties"></div>').openOn(n._getMap()),$("#popup_properties").kendoGrid({selectable:"row",allowCopy:!0,columns:[{field:"Field",title:a.default.Local.Control.infoQueryDialog.columns.field()},{field:"Value",title:a.default.Local.Control.infoQueryDialog.columns.value()}],dataSource:t}),$("#popup_properties .k-grid-content").css("max-height","200px")}),r}},{key:"_getQueryInfoManager",value:function(){return a.default.Common.QueryInfoManager.getInstance()}},{key:"_isDisplayZoom",value:function(){var e=this._getMap(),t=this._getBuilding(),n=e.getZoom();return t.minZoom()<=n}},{key:"_isBuildingLayer",value:function(e){var t=this._getQueryInfoManager(),n=t._findMapConfigLayer(e);return"1"===t._mapConfig().getLayerProperty(n,"is_building")}},{key:"_getBuildingHeightField",value:function(e){var t=this._getQueryInfoManager(),n=t._findMapConfigLayer(e);return t._mapConfig().getLayerProperty(n,"building_height_field")}},{key:"_getQueryOptions",value:function(e){for(var t=this._getQueryInfoManager(),n=t._getBuildingQueryOptions(e),r=0;r<n.length;++r)n[r].geometry=JSON.stringify(t._LatLngBoundsToGeometry(this._getMap().getBounds())),n[r].reqcount=1e3;return n}},{key:"_getData",value:(r=s(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._queryData(t);case 2:return n=e.sent,r=t.fields.split(","),e.abrupt("return",this._organizeData(n,r));case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_queryData",value:(n=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.default.Query.InfoQuery.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_organizeData",value:function(e,t){for(var n=0;n<e.length;++n){var r=[],i=e[n].properties;for(var o in i)-1<$.inArray(o,t)&&r.push({Field:o,Value:i[o]});e[n].properties=r}return e}},{key:"_addDataToBuilding",value:function(e,t){for(var n=this._getBuilding(),r=0;r<e.length;++r){var i=e[r],o=a.default.Common.CommonTools.geoJsonFromGeometry(i.geometry,{}).toGeoJSON();o.features[0].properties=i.properties,n.addData(o,{buildingHeightField:t})}}},{key:"_getCheckedLayer",value:function(){return a.default.Common.QueryInfoManager.getInstance()._checkedLayers()}},{key:"_addToMapView",value:function(){this._getBuilding().addToMapView(this._getMapView())}},{key:"load",value:(t=s(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._getCheckedLayer(),n=!1,r=0;case 3:if(!(r<t.length)){e.next=21;break}if(i=t[r],!this._isBuildingLayer(i)){e.next=18;break}n||(n=!0,this._addToMapView()),o=this._getQueryOptions(i),a=this._getBuildingHeightField(i),s=0;case 10:if(s<o.length)return e.next=13,this._getData(o[s]);e.next=18;break;case 13:l=e.sent,this._addDataToBuilding(l,a);case 15:++s,e.next=10;break;case 18:++r,e.next=3;break;case 21:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"remove",value:function(){this._getBuilding().remove()}},{key:"clearData",value:function(){this._getBuilding().clearData()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../kq":729}],625:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),v=(r=o)&&r.__esModule?r:{default:r};function b(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var w={parentID:"map",basemapType:null,position:"topleft",isShowCursor:!0,cursorOpacity:.5,cursorColor:"#dc2027",cursorRadius:20,isEnable2Win:!0,isEnable3Win:!1,isEnable4Win:!0,isEnable5Win:!1,isEnable6Win:!1},y={title:"",modal:!0,actions:["Close"],visible:!1,width:300,height:400},a=12,u=a/2,h=Math.floor(a/3),d=Math.floor(a/4),m=Math.floor(a/5),x=Math.floor(a/6),k="",s=function(){function _(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),this.local=v.default.Local.Control.compare,y.title=this.local.window.treeTitle(),k=this.local.window.title(),this.options=L.extend({},w,e),this.options.maxSelectedNumber&&(a=this.options.maxSelectedNumber,u=a/2,h=Math.floor(a/3),d=Math.floor(a/4),m=Math.floor(a/5),x=Math.floor(a/6))}var t;return i(_,[{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"initAsync",value:(t=b(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],(n=this).options.isEnable2Win&&r.push({text:this.local.dialog.actionsText2(),primary:!0,action:n._twoWindowCompare}),n.options.isEnable3Win&&r.push({text:this.local.dialog.actionsText3(),action:n._threeWindowCompare}),n.options.isEnable4Win&&r.push({text:this.local.dialog.actionsText4(),action:n._fourWindowCompare}),n.options.isEnable5Win&&r.push({text:this.local.dialog.actionsText5(),action:n._fiveWindowCompare}),n.options.isEnable6Win&&r.push({text:this.local.dialog.actionsText6(),action:n._sixWindowCompare}),i=new v.default.Control.Dialog({parentID:n.options.parentID,id:"compare-dialog",title:this.local.dialog.title(),width:"300",closable:!0,modal:!0,content:this.local.dialog.content(),self:n,actions:r,close:function(){console.log("on close!")}}),e.next=10,i.initAsync(function(){n.button=new v.default.Control.MapButton("iconfont icon-layer-compare",function(e,t){i.open()},n.local.button.title(),"kq-compare"),n.buttonBar=new v.default.Control.MapButtonBar([n.button],{position:n.options.position}),n.buttonBar.setAttribute("id","compare-buttonbar")});case 10:return t&&t(),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_twoWindowCompare",value:function(e){console.log("compare-dialog 2 window!");var o=e.sender.options.self,a=o._getContextMenuWidth(),s=null,l=new v.default.Control.Window("compare-2win",{parentID:o.options.parentID,title:k,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-2win on close!"),l._remove()}});l.initAsync(function(){l._object().maximize(),l.open(),$("#splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-left").kendoWindow(y),$("#window-tree-right").kendoWindow(y);var e=null,t=null,n=null,r=null,i=v.default.Map.MapConfig.getInstance();i.initAsync("",!1,function(){(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:a,contextmenuItems:[{text:o.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&n.setCheckedLayers(e.getCheckedLayers())}},"-",{text:o.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-left").data("kendoWindow").center().open()}},{text:o.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){n.clearSelectedLayers()}},{text:o.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){s=n.getCheckedLayers()}},{text:o.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){s&&(n.clearSelectedLayers(),n.setCheckedLayers(s))}},"-",{text:o.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){o._setIsSync(e,!0),o._sync([e,t])}},{text:o.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){o._setIsSync(e,!1),o._unsync(e,[t])}}]},o.options.basemapType))._customInitAsync("map-left",function(){(n=new v.default.Control.LayerTree).createTree(i,"map-control-tree-left"),n.setMaxLayerSelectedNumber(u),n.selectedLayers(o.options.selectedLayers),n.setMap(e._getMap()),n.addTo(e._getMap())}),(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:a,contextmenuItems:[{text:o.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&r.setCheckedLayers(e.getCheckedLayers())}},"-",{text:o.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-right").data("kendoWindow").center().open()}},{text:o.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){r.clearSelectedLayers()}},{text:o.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){s=r.getCheckedLayers()}},{text:o.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){s&&(r.clearSelectedLayers(),r.setCheckedLayers(s))}},"-",{text:o.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){o._setIsSync(t,!0),o._sync([e,t])}},{text:o.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){o._setIsSync(t,!1),o._unsync(t,[e])}}]},o.options.basemapType))._customInitAsync("map-right",function(){(r=new v.default.Control.LayerTree).createTree(i,"map-control-tree-right"),r.setMaxLayerSelectedNumber(u),r.selectedLayers(o.options.selectedLayers),r.setMap(t._getMap()),r.addTo(t._getMap())}),o._sync([e,t])})})}},{key:"_threeWindowCompare",value:function(e){console.log("compare-dialog 3 window!");var s=e.sender.options.self,l=s._getContextMenuWidth(),u=null,c=new v.default.Control.Window("compare-3win",{parentID:s.options.parentID,title:k,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-3win on close!"),c._remove()}});c.initAsync(function(){c._object().maximize(),c.open(),$("#splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-left").kendoWindow(y),$("#window-tree-mid").kendoWindow(y),$("#window-tree-right").kendoWindow(y);var e=null,t=null,n=null,r=null,i=null,o=null,a=v.default.Map.MapConfig.getInstance();a.initAsync("",!1,function(){(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:l,contextmenuItems:[{text:s.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&r.setCheckedLayers(e.getCheckedLayers())}},"-",{text:s.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-left").data("kendoWindow").center().open()}},{text:s.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){r.clearSelectedLayers()}},{text:s.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){u=r.getCheckedLayers()}},{text:s.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){u&&(r.clearSelectedLayers(),r.setCheckedLayers(u))}},"-",{text:s.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){s._setIsSync(e,!0),s._sync([e,t,n])}},{text:s.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){s._setIsSync(e,!1),s._unsync(e,[t,n])}}]},s.options.basemapType))._customInitAsync("map-left",function(){(r=new v.default.Control.LayerTree).createTree(a,"map-control-tree-left"),r.setMaxLayerSelectedNumber(h),r.selectedLayers(s.options.selectedLayers),r.setMap(e._getMap()),r.addTo(e._getMap())}),(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:l,contextmenuItems:[{text:s.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&i.setCheckedLayers(e.getCheckedLayers())}},"-",{text:s.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-mid").data("kendoWindow").center().open()}},{text:s.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){i.clearSelectedLayers()}},{text:s.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){u=i.getCheckedLayers()}},{text:s.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){u&&(i.clearSelectedLayers(),i.setCheckedLayers(u))}},"-",{text:s.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){s._setIsSync(t,!0),s._sync([e,t,n])}},{text:s.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){s._setIsSync(t,!1),s._unsync(t,[e,n])}}]},s.options.basemapType))._customInitAsync("map-mid",function(){(i=new v.default.Control.LayerTree).createTree(a,"map-control-tree-mid"),i.setMaxLayerSelectedNumber(h),i.selectedLayers(s.options.selectedLayers),i.setMap(t._getMap()),i.addTo(t._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:l,contextmenuItems:[{text:s.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&o.setCheckedLayers(e.getCheckedLayers())}},"-",{text:s.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-right").data("kendoWindow").center().open()}},{text:s.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){o.clearSelectedLayers()}},{text:s.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){u=o.getCheckedLayers()}},{text:s.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){u&&(o.clearSelectedLayers(),o.setCheckedLayers(u))}},"-",{text:s.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){s._setIsSync(n,!0),s._sync([e,t,n])}},{text:s.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){s._setIsSync(n,!1),s._unsync(n,[e,t])}}]},s.options.basemapType))._customInitAsync("map-right",function(){(o=new v.default.Control.LayerTree).createTree(a,"map-control-tree-right"),o.setMaxLayerSelectedNumber(h),o.selectedLayers(s.options.selectedLayers),o.setMap(n._getMap()),o.addTo(n._getMap())}),s._sync([e,t,n])})})}},{key:"_fourWindowCompare",value:function(e){console.log("compare-dialog 4 window!");var u=e.sender.options.self,c=u._getContextMenuWidth(),h=null,f=new v.default.Control.Window("compare-4win",{parentID:u.options.parentID,title:k,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-4win on close!"),f._remove()}});f.initAsync(function(){f._object().maximize(),f.open(),$("#vertical-splitter").kendoSplitter({orientation:"vertical",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line0").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line1").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-line0-0").kendoWindow(y),$("#window-tree-line0-1").kendoWindow(y),$("#window-tree-line1-0").kendoWindow(y),$("#window-tree-line1-1").kendoWindow(y);var e=null,t=null,n=null,r=null,i=null,o=null,a=null,s=null,l=v.default.Map.MapConfig.getInstance();l.initAsync("",!1,function(){(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&i.setCheckedLayers(e.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-0").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){i.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=i.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(i.clearSelectedLayers(),i.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(e,!0),u._sync([e,t,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(e,!1),u._unsync(e,[t,n,r])}}]},u.options.basemapType))._customInitAsync("map-line0-0",function(){(i=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line0-0"),i.setMaxLayerSelectedNumber(d),i.selectedLayers(u.options.selectedLayers),i.setMap(e._getMap()),i.addTo(e._getMap())}),(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&o.setCheckedLayers(e.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-1").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),o.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=o.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(o.clearSelectedLayers(),o.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(t,!0),u._sync([e,t,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(t,!1),u._unsync(t,[e,n,r])}}]},u.options.basemapType))._customInitAsync("map-line0-1",function(){(o=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line0-1"),o.setMaxLayerSelectedNumber(d),o.selectedLayers(u.options.selectedLayers),o.setMap(t._getMap()),o.addTo(t._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&a.setCheckedLayers(e.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-0").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){a.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=a.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(a.clearSelectedLayers(),a.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(n,!0),u._sync([e,t,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(n,!1),u._unsync(n,[e,t,r])}}]},u.options.basemapType))._customInitAsync("map-line1-0",function(){(a=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line1-0"),a.setMaxLayerSelectedNumber(d),a.selectedLayers(u.options.selectedLayers),a.setMap(n._getMap()),a.addTo(n._getMap())}),(r=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&s.setCheckedLayers(e.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-1").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),s.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=s.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(s.clearSelectedLayers(),s.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(r,!0),u._sync([e,t,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(r,!1),u._unsync(r,[e,t,n])}}]},u.options.basemapType))._customInitAsync("map-line1-1",function(){(s=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line1-1"),s.setMaxLayerSelectedNumber(d),s.selectedLayers(u.options.selectedLayers),s.setMap(r._getMap()),s.addTo(r._getMap())}),u._sync([e,t,n,r])})})}},{key:"_fiveWindowCompare",value:function(e){console.log("compare-dialog 5 window!");var h=e.sender.options.self,f=h._getContextMenuWidth(),d=null,p=new v.default.Control.Window("compare-5win",{parentID:h.options.parentID,title:k,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-5win on close!"),p._remove()}});p.initAsync(function(){p._object().maximize(),p.open(),$("#vertical-splitter").kendoSplitter({orientation:"vertical",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line0").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line1").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-line0-0").kendoWindow(y),$("#window-tree-line0-1").kendoWindow(y),$("#window-tree-line1-0").kendoWindow(y),$("#window-tree-line1-1").kendoWindow(y),$("#window-tree-line1-2").kendoWindow(y);var e=null,t=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null,c=v.default.Map.MapConfig.getInstance();c.initAsync("",!1,function(){(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&o.setCheckedLayers(e.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-0").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){o.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){d=o.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){d&&(o.clearSelectedLayers(),o.setCheckedLayers(d))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(e,!0),h._sync([e,t,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(e,!1),h._unsync(e,[t,n,r,i])}}]},h.options.basemapType))._customInitAsync("map-line0-0",function(){(o=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line0-0"),o.setMaxLayerSelectedNumber(m),o.selectedLayers(h.options.selectedLayers),o.setMap(e._getMap()),o.addTo(e._getMap())}),(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&a.setCheckedLayers(e.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-1").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),a.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){d=a.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){d&&(a.clearSelectedLayers(),a.setCheckedLayers(d))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(t,!0),h._sync([e,t,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(t,!1),h._unsync(t,[e,n,r,i])}}]},h.options.basemapType))._customInitAsync("map-line0-1",function(){(a=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line0-1"),a.setMaxLayerSelectedNumber(m),a.selectedLayers(h.options.selectedLayers),a.setMap(t._getMap()),a.addTo(t._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&s.setCheckedLayers(e.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-0").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){s.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){d=s.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){d&&(s.clearSelectedLayers(),s.setCheckedLayers(d))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(n,!0),h._sync([e,t,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(n,!1),h._unsync(n,[e,t,r,i])}}]},h.options.basemapType))._customInitAsync("map-line1-0",function(){(s=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line1-0"),s.setMaxLayerSelectedNumber(m),s.selectedLayers(h.options.selectedLayers),s.setMap(n._getMap()),s.addTo(n._getMap())}),(r=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&l.setCheckedLayers(e.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-1").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),l.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){d=l.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){d&&(l.clearSelectedLayers(),l.setCheckedLayers(d))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(r,!0),h._sync([e,t,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(r,!1),h._unsync(r,[e,t,n,i])}}]},h.options.basemapType))._customInitAsync("map-line1-1",function(){(l=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line1-1"),l.setMaxLayerSelectedNumber(m),l.selectedLayers(h.options.selectedLayers),l.setMap(r._getMap()),l.addTo(r._getMap())}),(i=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&u.setCheckedLayers(e.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-2").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),u.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){d=u.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){d&&(u.clearSelectedLayers(),u.setCheckedLayers(d))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(i,!0),h._sync([e,t,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(i,!1),h._unsync(i,[e,t,n,r])}}]},h.options.basemapType))._customInitAsync("map-line1-2",function(){(u=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line1-2"),u.setMaxLayerSelectedNumber(m),u.selectedLayers(h.options.selectedLayers),u.setMap(i._getMap()),u.addTo(i._getMap())}),h._sync([e,t,n,r,i])})})}},{key:"_sixWindowCompare",value:function(e){console.log("compare-dialog 6 window!");var d=e.sender.options.self,p=d._getContextMenuWidth(),m=null,g=new v.default.Control.Window("compare-6win",{parentID:d.options.parentID,title:k,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-6win on close!"),g._remove()}});g.initAsync(function(){g._object().maximize(),g.open(),$("#vertical-splitter").kendoSplitter({orientation:"vertical",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line0").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line1").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-line0-0").kendoWindow(y),$("#window-tree-line0-1").kendoWindow(y),$("#window-tree-line0-2").kendoWindow(y),$("#window-tree-line1-0").kendoWindow(y),$("#window-tree-line1-1").kendoWindow(y),$("#window-tree-line1-2").kendoWindow(y);var e=null,t=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null,f=v.default.Map.MapConfig.getInstance();f.initAsync("",!1,function(){(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:p,contextmenuItems:[{text:d.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&a.setCheckedLayers(e.getCheckedLayers())}},"-",{text:d.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-0").data("kendoWindow").center().open()}},{text:d.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){a.clearSelectedLayers()}},{text:d.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){m=a.getCheckedLayers()}},{text:d.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){m&&(a.clearSelectedLayers(),a.setCheckedLayers(m))}},"-",{text:d.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){d._setIsSync(e,!0),d._sync([e,t,n,r,i,o])}},{text:d.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){d._setIsSync(e,!1),d._unsync(e,[t,n,r,i,o])}}]},d.options.basemapType))._customInitAsync("map-line0-0",function(){(a=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line0-0"),a.setMaxLayerSelectedNumber(x),a.selectedLayers(d.options.selectedLayers),a.setMap(e._getMap()),a.addTo(e._getMap())}),(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:p,contextmenuItems:[{text:d.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&s.setCheckedLayers(e.getCheckedLayers())}},"-",{text:d.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-1").data("kendoWindow").center().open()}},{text:d.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),s.clearSelectedLayers()}},{text:d.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){m=s.getCheckedLayers()}},{text:d.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){m&&(s.clearSelectedLayers(),s.setCheckedLayers(m))}},"-",{text:d.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){d._setIsSync(t,!0),d._sync([e,t,n,r,i,o])}},{text:d.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){d._setIsSync(t,!1),d._unsync(t,[e,n,r,i,o])}}]},d.options.basemapType))._customInitAsync("map-line0-1",function(){(s=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line0-1"),s.setMaxLayerSelectedNumber(x),s.selectedLayers(d.options.selectedLayers),s.setMap(t._getMap()),s.addTo(t._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:p,contextmenuItems:[{text:d.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&l.setCheckedLayers(e.getCheckedLayers())}},"-",{text:d.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-2").data("kendoWindow").center().open()}},{text:d.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),l.clearSelectedLayers()}},{text:d.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){m=l.getCheckedLayers()}},{text:d.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){m&&(l.clearSelectedLayers(),l.setCheckedLayers(m))}},"-",{text:d.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){d._setIsSync(n,!0),d._sync([e,t,n,r,i,o])}},{text:d.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){d._setIsSync(n,!1),d._unsync(n,[e,t,r,i,o])}}]},d.options.basemapType))._customInitAsync("map-line0-2",function(){(l=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line0-2"),l.setMaxLayerSelectedNumber(x),l.selectedLayers(d.options.selectedLayers),l.setMap(n._getMap()),l.addTo(n._getMap())}),(r=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:p,contextmenuItems:[{text:d.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&u.setCheckedLayers(e.getCheckedLayers())}},"-",{text:d.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-0").data("kendoWindow").center().open()}},{text:d.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){u.clearSelectedLayers()}},{text:d.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){m=u.getCheckedLayers()}},{text:d.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){m&&(u.clearSelectedLayers(),u.setCheckedLayers(m))}},"-",{text:d.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){d._setIsSync(r,!0),d._sync([e,t,n,r,i,o])}},{text:d.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){d._setIsSync(r,!1),d._unsync(r,[e,t,n,i,o])}}]},d.options.basemapType))._customInitAsync("map-line1-0",function(){(u=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line1-0"),u.setMaxLayerSelectedNumber(x),u.selectedLayers(d.options.selectedLayers),u.setMap(r._getMap()),u.addTo(r._getMap())}),(i=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:p,contextmenuItems:[{text:d.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&c.setCheckedLayers(e.getCheckedLayers())}},"-",{text:d.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-1").data("kendoWindow").center().open()}},{text:d.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),c.clearSelectedLayers()}},{text:d.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){m=c.getCheckedLayers()}},{text:d.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){m&&(c.clearSelectedLayers(),c.setCheckedLayers(m))}},"-",{text:d.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){d._setIsSync(i,!0),d._sync([e,t,n,r,i,o])}},{text:d.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){d._setIsSync(i,!1),d._unsync(i,[e,t,n,r,o])}}]},d.options.basemapType))._customInitAsync("map-line1-1",function(){(c=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line1-1"),c.setMaxLayerSelectedNumber(x),c.selectedLayers(d.options.selectedLayers),c.setMap(i._getMap()),c.addTo(i._getMap())}),(o=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:p,contextmenuItems:[{text:d.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var e=v.default.Control.Manager.getInstance().getControl("tree");e&&h.setCheckedLayers(e.getCheckedLayers())}},"-",{text:d.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-2").data("kendoWindow").center().open()}},{text:d.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),h.clearSelectedLayers()}},{text:d.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){m=h.getCheckedLayers()}},{text:d.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){m&&(h.clearSelectedLayers(),h.setCheckedLayers(m))}},"-",{text:d.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){d._setIsSync(o,!0),d._sync([e,t,n,r,i,o])}},{text:d.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){d._setIsSync(o,!1),d._unsync(o,[e,t,n,r,i])}}]},d.options.basemapType))._customInitAsync("map-line1-2",function(){(h=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line1-2"),h.setMaxLayerSelectedNumber(x),h.selectedLayers(d.options.selectedLayers),h.setMap(o._getMap()),h.addTo(o._getMap())}),d._sync([e,t,n,r,i,o])})})}},{key:"_getContextMenuWidth",value:function(){return"en"===v.default.Local.getCurrentLanguage()?160:100}},{key:"_sync",value:function(e){_._staticSync(e,this.options)}},{key:"_unsync",value:function(t,e){t._getMap().unsyncSelf(),e.forEach(function(e){t!==e&&e._getMap().unsync(t._getMap())})}},{key:"_setIsSync",value:function(e,t){e._getMap().options.is_sync=t}}],[{key:"compareTwoMap",value:function(o,a){var n,e=(n=b(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.Common.NetworkTools.httpGetAsync(v.default.Common.CommonValues.kqwebmapPath+"window/compare-two-map.html");case 2:if("error"===(r=e.sent))return console.log("compare-two-map load html error!"),n&&n(),e.abrupt("return",!1);e.next=7;break;case 7:if(console.log("compare-two-map load html successfully！"),(i=$("#"+s)).length<=0)return console.log("compare-two-map: "+s+" was not found!"),n&&n(),e.abrupt("return",!1);e.next=13;break;case 13:return i.resize(function(){console.log("compareTwoMap parentdiv resize!")}),i.append(r),t&&t(),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)});console.log("compare-two-map!");var s=o.parentID,l=_._getCheckedLayerKeys(o.leftLayerInfos),u=_._getCheckedLayerKeys(o.rightLayerInfos),c=o.leftGeoJSON,h=o.rightGeoJSON,f=null,d=null,p=o.zoom,m=o.center,g=o.leftQueryLayerInfo,y=o.rightQueryLayerInfo;e(function(){console.log("_loadHtml success!"),$("#ctm-splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]});var r=null,i=null;v.default.Map.MapConfig.getInstance().initAsync("",!1,function(){(f=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-left",function(){r=new v.default.Map.MapLayerManager;for(var e=0;e<l.length;e++){r.getLayerFromKey(l[e]).addTo(f._getMap())}c&&c.addTo(f._getMap()),o.left_layerManager=r,o.mapView_left=f}),(d=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-right",function(){i=new v.default.Map.MapLayerManager;for(var e=0;e<u.length;e++){i.getLayerFromKey(u[e]).addTo(d._getMap())}h&&h.addTo(d._getMap()),o.right_layerManager=i,o.mapView_right=d}),m&&(f._getMap().panTo(m),d._getMap().panTo(m)),p&&(f._getMap().setZoom(p),d._getMap().setZoom(p));var e=new v.default.Control.InfoQueryDialog({html:'<div id="left-info-query-dialog"><ul id="left-info-query-record-list"></ul><div id="left-info-query-property-grid"></div></div>',map:f._getMap(),parent:"ctm-map-left"}),t=new v.default.Control.InfoQueryDialog({html:'<div id="right-info-query-dialog"><ul id="right-info-query-record-list"></ul><div id="right-info-query-property-grid"></div></div>',map:d._getMap(),parent:"ctm-map-right"});g&&y&&(new v.default.Control.ToolBar({position:"bottomright",subControls:[{type:"roaming",options:{}},{type:"custom_info-query",options:{sourceName:g.src_name,layerId:g.id,dialog:e}}]}).addTo(f._getMap()),new v.default.Control.ToolBar({position:"bottomright",subControls:[{type:"roaming",options:{}},{type:"custom_info-query",options:{sourceName:y.src_name,layerId:y.id,dialog:t}}]}).addTo(d._getMap()));if(_._staticSync([f,d],w),o.win){var n=o.win._getKendoObject();n.bind("resize",function(){f._getMap().invalidateSize(),d._getMap().invalidateSize()}),n.bind("close",function(){o.win._remove()})}a._compareMapViewList=[],a._compareMapViewList.push(f),a._compareMapViewList.push(d)})},function(){console.log("_loadHtml error!")})}},{key:"compareThreeMap",value:function(i,o){var n,e=(n=b(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.Common.NetworkTools.httpGetAsync(v.default.Common.CommonValues.kqwebmapPath+"window/compare-three-map.html");case 2:if("error"===(r=e.sent))return console.log("compare-three-map load html error!"),n&&n(),e.abrupt("return",!1);e.next=7;break;case 7:if(console.log("compare-three-map load html successfully！"),(i=$("#"+a)).length<=0)return console.log("compare-three-map: "+a+" was not found!"),n&&n(),e.abrupt("return",!1);e.next=13;break;case 13:return i.resize(function(){console.log("compare-three-map: parentdiv resize!")}),i.append(r),t&&t(),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)});console.log("compare-three-map!");var a=i.parentID,s=_._getCheckedLayerKeys(i.leftLayerInfos),l=_._getCheckedLayerKeys(i.rightLayerInfos),u=_._getCheckedLayerKeys(i.midLayerInfos),c=null,h=null,f=null,d=i.zoom,p=i.center;e(function(){console.log("_loadHtml success!"),$("#ctm-splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]});var t=null,n=null,r=null;v.default.Map.MapConfig.getInstance().initAsync("",!1,function(){if((c=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-left",function(){t=new v.default.Map.MapLayerManager;for(var e=0;e<s.length;e++){t.getLayerFromKey(s[e]).addTo(c._getMap())}i.left_layerManager=t,i.mapView_left=c}),(h=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-right",function(){n=new v.default.Map.MapLayerManager;for(var e=0;e<l.length;e++){n.getLayerFromKey(l[e]).addTo(h._getMap())}i.right_layerManager=n,i.mapView_right=h}),(f=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-mid",function(){r=new v.default.Map.MapLayerManager;for(var e=0;e<u.length;e++){r.getLayerFromKey(u[e]).addTo(f._getMap())}i.mid_layerManager=r,i.mapView_mid=f}),p&&(c._getMap().panTo(p),h._getMap().panTo(p),f._getMap().panTo(p)),d&&(c._getMap().setZoom(d),h._getMap().setZoom(d),f._getMap().setZoom(d)),_._staticSync([c,h,f],w),i.win){var e=i.win._getKendoObject();e.bind("resize",function(){c._getMap().invalidateSize(),h._getMap().invalidateSize(),f._getMap().invalidateSize()}),e.bind("close",function(){i.win._remove()})}o._compareMapViewList=[],o._compareMapViewList.push(c),o._compareMapViewList.push(h),o._compareMapViewList.push(f)})},function(){console.log("_loadHtml error!")})}},{key:"_staticSync",value:function(e,t){for(var n={fillOpacity:t.cursorOpacity,fillColor:t.cursorColor,radius:t.cursorRadius,stroke:!1,pane:"tooltipPane"},r=0;r<e.length;r++)for(var i=e[r]._getMap(),o=0;o<e.length;o++){var a=e[o]._getMap();i!==a&&i.options.is_sync&&a.options.is_sync&&(console.log("["+r+", "+o+"] "),i.sync(a,{syncCursor:t.isShowCursor,syncCursorMarkerOptions:n}))}}},{key:"_getCheckedLayerKeys",value:function(e){console.log("layerInfos:"+e);var t=[];if(e&&e instanceof Array)for(var n=v.default.Map.MapConfig.getInstance(),r=0;r<e.length;r++){var i=n._getOptimizedSourceByOriginLayerInfo(e[r]),o=v.default.Map.MapCommon.getKeyFromSourceNameLayerId(i._name,e[r].id);t.push(o)}return t}}]),_}();n.default=s},{"../kq":729}],626:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=fe(e("./Sidebar")),i=fe(e("./LayerTree")),o=fe(e("./MapLayerTree")),a=fe(e("./Draw")),s=fe(e("./OverlayAnalysis")),l=fe(e("./DifferenceAnalysis")),u=fe(e("./toolbar/ToolBar")),c=fe(e("./Manager")),h=fe(e("./Window")),f=fe(e("./MapButton")),d=fe(e("./MapButtonBar")),p=fe(e("./Waiting")),m=fe(e("./Notification")),g=fe(e("./AdvancedSearch")),y=fe(e("./FeatureImport")),_=fe(e("./Bookmark")),v=fe(e("./SimpleSidebar")),b=fe(e("./Dialog")),w=fe(e("./Compare")),x=fe(e("./SimplePrint")),k=fe(e("./MapPrint")),L=fe(e("./Upload")),C=fe(e("./Coordinates")),S=fe(e("./MapBaseLayer")),M=fe(e("./Scale")),P=fe(e("./AdvancedSearchResultDialog")),E=fe(e("./OverlayAnalysisResultDialog")),T=fe(e("./AdvancedSearchHistoryDialog")),I=fe(e("./SearchBarResultDialog")),O=fe(e("./BookmarkAddDialog")),D=fe(e("./MapInput")),N=fe(e("./Setting")),A=fe(e("./Playback")),j=fe(e("./toolbar/InfoQueryDialog")),R=fe(e("./RubberBand")),B=fe(e("./SideBySide")),F=fe(e("./ScreenShot")),z=fe(e("./MapSearchLight")),q=fe(e("./toolbar/OperatorToolButton")),U=fe(e("./SearchLightSizeDialog")),G=fe(e("./Measure")),$=fe(e("./SetLocation")),V=fe(e("./LocationDialog")),H=fe(e("./BuildingLoading")),W=fe(e("./Panorama")),Q=fe(e("./MeasureSeparate")),K=fe(e("./Plotting")),Z=fe(e("./RubberBandSelect")),J=fe(e("./OverlayAnalysisTree")),X=fe(e("./custom/Custom")),Y=fe(e("./custom/MainMenu")),ee=fe(e("./custom/AdvMenu")),te=fe(e("./custom/DrawMenu")),ne=fe(e("./LegendQuery")),re=fe(e("./MarkerCluster")),ie=fe(e("./TimelineLayers")),oe=fe(e("./HistoryView")),ae=fe(e("./HistoryCompare")),se=fe(e("./NetworkAnalysisDialog")),le=fe(e("./SearchBar")),ue=fe(e("./AreaSelect")),ce=fe(e("./ZoomInput")),he=fe(e("./ZoomInputDialog"));function fe(e){return e&&e.__esModule?e:{default:e}}var de={Sidebar:r.default,LayerTree:i.default,MapLayerTree:o.default,Draw:a.default,OverlayAnalysis:s.default,DifferenceAnalysis:l.default,ToolBar:u.default,Manager:c.default,Window:h.default,MapButton:f.default,MapButtonBar:d.default,Waiting:p.default,Notification:m.default,AdvancedSearch:g.default,FeatureImport:y.default,Bookmark:_.default,SimpleSidebar:v.default,Dialog:b.default,Compare:w.default,SimplePrint:x.default,MapPrint:k.default,Upload:L.default,Coordinates:C.default,MapBaseLayer:S.default,Scale:M.default,AdvancedSearchResultDialog:P.default,OverlayAnalysisResultDialog:E.default,SearchBarResultDialog:I.default,AdvancedSearchHistoryDialog:T.default,BookmarkAddDialog:O.default,MapInput:D.default,Setting:N.default,Playback:A.default,InfoQueryDialog:j.default,RubberBand:R.default,SideBySide:B.default,ScreenShot:F.default,MapSearchLight:z.default,OperatorToolButton:q.default,SearchLightSizeDialog:U.default,Measure:G.default,SetLocation:$.default,LocationDialog:V.default,BuildingLoading:H.default,Panorama:W.default,MeasureSeparate:Q.default,Plotting:K.default,RubberBandSelect:Z.default,OverlayAnalysisTree:J.default,Custom:X.default,MainMenu:Y.default,AdvMenu:ee.default,DrawMenu:te.default,MarkerCluster:re.default,LegendQuery:ne.default,TimelineLayers:ie.default,HistoryView:oe.default,HistoryCompare:ae.default,NetworkAnalysisDialog:se.default,SearchBar:le.default,AreaSelect:ue.default,ZoomInput:ce.default,ZoomInputDialog:he.default};n.default=de},{"./AdvancedSearch":618,"./AdvancedSearchHistoryDialog":619,"./AdvancedSearchResultDialog":620,"./AreaSelect":621,"./Bookmark":622,"./BookmarkAddDialog":623,"./BuildingLoading":624,"./Compare":625,"./Coordinates":627,"./Dialog":628,"./DifferenceAnalysis":629,"./Draw":632,"./FeatureImport":633,"./HistoryCompare":636,"./HistoryView":637,"./LayerTree":639,"./LegendQuery":640,"./LocationDialog":642,"./Manager":643,"./MapBaseLayer":644,"./MapButton":645,"./MapButtonBar":646,"./MapInput":647,"./MapLayerTree":648,"./MapPrint":649,"./MapSearchLight":653,"./MarkerCluster":654,"./Measure":655,"./MeasureSeparate":656,"./NetworkAnalysisDialog":657,"./Notification":658,"./OverlayAnalysis":659,"./OverlayAnalysisResultDialog":661,"./OverlayAnalysisTree":662,"./Panorama":663,"./Playback":664,"./Plotting":665,"./RubberBand":676,"./RubberBandSelect":677,"./Scale":678,"./ScreenShot":679,"./SearchBar":680,"./SearchBarResultDialog":681,"./SearchLightSizeDialog":682,"./SetLocation":683,"./Setting":684,"./SideBySide":685,"./Sidebar":686,"./SimplePrint":687,"./SimpleSidebar":688,"./TimelineLayers":691,"./Upload":692,"./Waiting":693,"./Window":694,"./ZoomInput":695,"./ZoomInputDialog":696,"./custom/AdvMenu":697,"./custom/Custom":698,"./custom/DrawMenu":699,"./custom/MainMenu":700,"./toolbar/InfoQueryDialog":711,"./toolbar/OperatorToolButton":716,"./toolbar/ToolBar":721}],627:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i={position:"bottomleft",decimals:2,label_x:"X",label_y:"Y",decimalSeperator:".",enableUserInput:!1,isProject:!1,isShowScaleIndex:!1,label_scale:"Scale"},o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L.extend({},i,e)}return r(t,[{key:"addTo",value:function(e){var o=this;o._map=e,o.options.labelTemplateLat=o.options.label_y+": {y}",o.options.labelTemplateLng=o.options.label_x+": {x}",o.options.customLabelFcn=function(e,t){var n=void 0;if(o.options.isProject){var r=o._map.options.crs;if(r){var i=r.project(e);n=o.options.label_x+": "+Number(i.x).toFixed(o.options.decimals)+" "+o.options.label_y+": "+Number(i.y).toFixed(o.options.decimals)}}else n=o.options.label_x+": "+Number(e.lng).toFixed(o.options.decimals)+" "+o.options.label_y+": "+Number(e.lat).toFixed(o.options.decimals);return o.options.isShowScaleIndex&&(n+=" "+o.options.label_scale+": "+o._map.getZoom()),n},o._coordinates=L.control.coordinates(o.options),o._coordinates.addTo(e)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}]),t}();n.default=o},{}],628:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i={parentID:"map",id:"dialog",title:"Window",width:"400",visible:!1,closable:!0,modal:!0,content:"<p>这里弹出你想要的<strong>内容</strong>. 是否可以?<p>",actions:[{text:"确定",primary:!0,action:function(e){console.log("dialog ok!")}},{text:"取消",action:function(e){console.log("dialog cancel!")}}],close:function(){console.log("on close!")}},o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L.extend({},i,e)}var e,n;return r(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,KQ.Map.MapConfig.getInstance(),0<(r=$("#"+n.options.id)).length&&r.remove(),i="<div id='"+n.options.id+"'></div>",(o=$("#"+n.options.parentID)).length<=0&&console.log("Dialog.initAsync: "+n.options.parentID+" was not found!"),o.append(i),r=$("#"+n.options.id),KQ.Common.CommonTools._loadKendoAndRun(function(){r.kendoDialog(n.options),n._dialog=r.data("kendoDialog")}),t&&t(),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return n.apply(this,arguments)})},{key:"open",value:function(){this._dialog.open()}},{key:"close",value:function(){this._dialog.close()}},{key:"_remove",value:function(){this._dialog.destroy()}}]),t}();n.default=o},{}],629:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("../kq")),a=r(e("./DifferenceAnalysisResultDialog")),s=r(e("./DifferenceAnalysisTree")),l=r(e("./QueryAnalysis"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._config=o.default.Query.DifferenceAnalysisConfig.getInstance(),t._init(),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.default),i(n,[{key:"addTo",value:function(e){this._map=e}},{key:"_init",value:(r=u(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initHtml("difference_analysis");case 3:t._layerTree=new s.default("differenceAnalysisLayerTree"),t._bindEvent(),t._resiezeLayerTree();case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_getResultDialogInstance",value:function(){return a.default.getInstance()}},{key:"_bindEvent",value:function(){var e=this;$("#difference-analysis-execute").kendoButton({click:function(){e._executeAnalysis()}}),$("#difference-analysis-execute").kendoTooltip({position:"top",showAfter:o.default.Common.CommonValues.showAfterInMsec,content:function(e){return o.default.Local.Control.queryAnalysis.executeAnalysis()}}).data("kendoTooltip"),$("#difference-analysis-draw").kendoButton({click:function(){e._toggleDrawingPanel()}}),$("#difference-analysis-draw").kendoTooltip({position:"top",showAfter:o.default.Common.CommonValues.showAfterInMsec,content:function(e){return o.default.Local.Control.queryAnalysis.setAnalysisExtent()}}).data("kendoTooltip")}},{key:"_resiezeLayerTree",value:function(){var i=this;i._prevWindowHeight=window.innerHeight,$(window).resize(function(e){var t=e.target.innerHeight,n=t-i._prevWindowHeight,r=$("#differenceAnalysisLayerTree .k-grid-content").height()+n;$("#differenceAnalysisLayerTree .k-grid-content").height(r),i._prevWindowHeight=t})}},{key:"_queryData",value:(t=u(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.default.Query.DifferenceAnalysis.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),n}();n.default=c},{"../kq":729,"./DifferenceAnalysisResultDialog":630,"./DifferenceAnalysisTree":631,"./QueryAnalysis":666}],630:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./QueryResultDialog"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._desc="overlay-analysis-",t._title=KQ.Local.Control.overlayAnalysisResultDialog.title(),t._init(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"_initHtml",value:function(){var e=KQ.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="difference-analysis-result-dialog"><div id="difference-analysis-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"difference-analysis-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"difference-analysis-layer-name-tabs"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultDialog":668}],631:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("../kq")),i=o(e("./QueryTree"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._config=r.default.Query.DifferenceAnalysisConfig.getInstance(),t._init(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),n}();n.default=a},{"../kq":729,"./QueryTree":669}],632:[function(r,e,i){(function(p){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e,t=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),n=r("../kq"),m=(e=n)&&e.__esModule?e:{default:e};var o=r("@mapbox/geojson-merge"),g={position:"topleft",importExport:"1",importEncoding:"gbk",importMaxFeatureCount:1e3,maxEditPointCount:2e3,dataFormatList:["G","S"],importTxtFunction:function(e){console.log("importTxt!!!"+e.name)},exportTxtFunction:function(){console.log("exportTxt!!!")},importExcelFunction:function(e){console.log("importExcel!!!"+e.name)},exportExcelFunction:function(){console.log("exportExcel!!!")},importDwgDxfFunction:function(e){console.log("importDwgDxf!!!"+e.name)},exportDwgDxfFunction:function(){console.log("exportDwgDxf!!!")},onImportedFunction:function(e){console.log("onImported!")}};p.kqImportGeoJSON=function(e){console.log("kqImportGeoJSON:"+e.files[0].name);var i=m.default.Control.Manager.getInstance()._getMap(),o=m.default.Control.Manager.getInstance().getControl("draw");if(o){o.fire("import.loading"),m.default.Control.Waiting.show(i);var t=new FileReader;t.onloadend=function(e){var t=e.target.result,n=null;try{var r=JSON.parse(t);o._removeRedundantFeatures(r),n=new m.default.Map.MapGeoJSON(r),o.loadFromGeoJSON(n),n.getBounds().isValid()&&m.default.Map.MapCommon.fitBoundsLayer(n,i),m.default.Control.Waiting.close(),m.default.Control.Notification.getInstance().showSuccess(m.default.Local.Control.drawControl.import.success()+g.importMaxFeatureCount+"）",500),o.fire("import.done")}catch(e){console.log("kqImportGeoJSON exception:"+e),m.default.Control.Notification.getInstance().showError(m.default.Local.Control.drawControl.import.fail(),500),m.default.Control.Waiting.close()}finally{a._resetImportFileHtml(),n&&p._kqonImportedFunction(n)}},t.readAsText(e.files[0],o.options.importEncoding)}},p.kqImportTxt=function(e){console.log("kqImportTxt!"),p._kqimportTxtFunction(e.files[0])},p.kqImportExcel=function(e){console.log("kqImportExcel!"),p._kqimportExcelFunction(e.files[0])},p.kqImportDwgDxf=function(e){console.log("kqImportDwgDxf!"),p._kqimportDwgDxfFunction(e.files[0])};var a=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.options=L.extend({},g,e),t._drawnItems=L.featureGroup(),t._drawnItems.desc="_drawnItems",t.on("import.loading",function(){console.log("import.loading")}),t.on("import.done",function(){console.log("import done")}),p._kqimportTxtFunction=t.options.importTxtFunction,p._kqimportExcelFunction=t.options.importExcelFunction,p._kqimportDwgDxfFunction=t.options.importDwgDxfFunction,p._kqonImportedFunction=t.options.onImportedFunction,n._resetImportFileHtml(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Evented),t(n,[{key:"_getDefaultOption",value:function(e){return{position:this.options.position,edit:{featureGroup:this._drawnItems,poly:{allowIntersection:!1},maxEditPointCount:this.options.maxEditPointCount},draw:{polyline:{allowIntersection:!1,metric:!0,feet:!1,shapeOptions:{color:e}},polygon:{allowIntersection:!1,showArea:!0,metric:!0,shapeOptions:{color:e}},rectangle:{showArea:!0,shapeOptions:{color:e}},circle:{feet:!1,shapeOptions:{color:e}},marker:{icon:new m.default.Struct.Icon({iconUrl:"../../images/marker-icon.png",iconSize:[25,41],iconAnchor:[13,40],shadowUrl:"../../images/marker-shadow.png",shadowSize:[25,41],shadowAnchor:[8,40]})},circlemarker:{color:e}}}}},{key:"addTo",value:function(h){var f=this,d=this;if(!d._map){d._map=h,this._drawnItems.addTo(d._map);var e,n,t=m.default.Map.MapConfig.getInstance(),r=t.getDrawOption().drawDefaultColor?t.getDrawOption().drawDefaultColor:"#3388ff",i=d._getDefaultOption(r);if(d._draw=new L.Control.Draw(i),d._draw.addTo(d._map),$(".leaflet-draw-draw-polyline").append('<i class="icon iconfont icon-draw-polyline"></i>'),$(".leaflet-draw-draw-polygon").append('<i class="icon iconfont icon-draw-polygon"></i>'),$(".leaflet-draw-draw-rectangle").append('<i class="icon iconfont icon-draw-rectangle"></i>'),$(".leaflet-draw-draw-circle").append('<i class="icon iconfont icon-draw-circle"></i>'),$(".leaflet-draw-draw-marker").append('<i class="icon iconfont icon-draw-marker"></i>'),$(".leaflet-draw-draw-circlemarker").append('<i class="icon iconfont icon-draw-circlemarker"></i>'),$(".leaflet-draw-edit-edit").append('<i class="icon iconfont icon-draw-edit"></i>'),$(".leaflet-draw-edit-remove").append('<i class="icon iconfont icon-draw-remove"></i>'),d._map.on("draw:created",function(e){console.log("draw:created event!");e.layerType;var t=e.layer;d._drawnItems.addLayer(t),m.default.Control.Manager.getInstance().getMapView().fire("draw:created",e)}),d._map.on("draw:deleted",function(e){console.log("draw:deleted event!")}),d._map.on("draw:error",function(e){console.log("draw:error event!"),m.default.Control.Notification.getInstance().showError(m.default.Local.Control.drawControl.addTo.drawError())}),d._boundToolbarClickEvent(),"1"===d.options.importExport){for(var l=[],o=function(e){var t=d.options.dataFormatList[e],n=e===d.options.dataFormatList.length-1,r=void 0;r=n?d.options.dataFormatList[0]:d.options.dataFormatList[e+1];var i=d._getIOMode(t),o=(d._getBtnState(t),d._getIOMode(r)),a=d._getBtnState(r);0===e&&(d._iomode=i);var s=d._getDataState(t);s.onClick=function(e,t){"S"!==r?(d.importOtherButton.show(),d.importShapeButton.hide()):(d.importOtherButton.hide(),d.importShapeButton.show()),d._iomode=o,e.state(a)},l.push(s)},a=0;a<d.options.dataFormatList.length;a++)o(a);var s=d.options.dataFormatList[0],u=new m.default.Control.MapButton({states:l}),c=new m.default.Control.MapButton("icon iconfont icon-export",function(e,t){d._exportDraw()},m.default.Local.Control.draw.io.export());d.importOtherButton=new m.default.Control.MapButton("icon iconfont icon-import",function(e,t){d._importDraw()},m.default.Local.Control.draw.io.import()),d.importShapeButton=new m.default.Control.MapButton("icon iconfont icon-import",function(e,t){console.log("$('#shapeuploadbutton').click();!"),$("#shapeuploadbutton")[0].click()},m.default.Local.Control.draw.io.import(),"kq-importshape"),"S"!==s?d.importShapeButton.hide():d.importOtherButton.hide(),d._iobar=new m.default.Control.MapButtonBar([u,d.importOtherButton,d.importShapeButton,c],{position:d.options.position}),d._iobar.setAttribute("id","importexport-buttonbar"),d._iobar.addTo(h);d._getImportShapeUrl();d.upload_options={onComplete:(e=regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&"success"===n.resultcode){e.next=5;break}m.default.Control.Notification.getInstance().showError(m.default.Local.Control.drawControl.addTo.needZip(),500),n.message&&console.log(n.message),e.next=36;break;case 5:if(!n.result){e.next=36;break}console.log(JSON.stringify(n.result)),r=d._getPrjConvertUrl(),e.prev=8,i=m.default.Control.Manager.getInstance().getControl("draw"),o=null,a=0;case 12:if(a<n.result.length)return e.next=15,m.default.Common.NetworkTools.httpGetAsync(r+n.result[a].prj);e.next=28;break;case 15:s=e.sent,l=JSON.parse(s),u=null,"success"===l.resultcode&&(u=l.result),n.result[a].prj=u,console.log("prj:"+n.result[a].prj),c=new m.default.Map.MapGeoJSON(n.result[a]),i.loadFromGeoJSON(c),p._kqonImportedFunction(c),c.getBounds().isValid()&&(o?o.extend(c.getBounds()):o=c.getBounds());case 25:a++,e.next=12;break;case 28:m.default.Map.MapCommon.fitBound(o,h),m.default.Control.Notification.getInstance().showSuccess(m.default.Local.Control.drawControl.import.success()+g.importMaxFeatureCount+"）",500),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(8),console.log(e.t0),m.default.Control.Notification.getInstance().showError(m.default.Local.Control.drawControl.addTo.fail(),500);case 36:m.default.Control.Waiting.close();case 37:case"end":return e.stop()}},e,f,[[8,32]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e,t){return n.apply(this,arguments)}),onError:function(){console.log("Unable to upload file"),m.default.Control.Notification.getInstance().showError(m.default.Local.Control.drawControl.addTo.fail(),500),m.default.Control.Waiting.close()},onSubmit:function(){console.log("onSubmit file!"),m.default.Control.Waiting.show(h)}},L.Browser.ie&&(d.upload_options.accept=".zip"),d.upload=new m.default.Control.Upload,d.upload.attachToHtmlButton($("#shapeuploadbutton")[0],d._getImportShapeUrl(),d.upload_options)}}}},{key:"remove",value:function(){this._map.removeControl(this._draw)}},{key:"_boundToolbarClickEvent",value:function(){for(var e=this._draw._toolbars.draw._toolbarContainer.children,t=0;t<e.length;t++)L.DomEvent.on(e[t],"click",function(){m.default.Control.Manager.getInstance()._unselectAllControlsExcept("draw")},this);for(var n=this._draw._toolbars.edit._toolbarContainer.children,r=0;r<n.length;r++)L.DomEvent.on(n[r],"click",function(){m.default.Control.Manager.getInstance()._unselectAllControlsExcept("draw")},this);var i=m.default.Control.Manager.getInstance().getControl("styleeditor");i&&i.on("enabled",function(){console.log("style editor enabled!!!"),m.default.Control.Manager.getInstance()._unselectAllControlsExcept("styleeditor")})}},{key:"_unselectDraw",value:function(){this._draw&&(this._draw._toolbars.draw.disable(),this._draw._toolbars.edit.disable())}},{key:"_unselectStyleEditor",value:function(){var e=m.default.Control.Manager.getInstance().getControl("styleeditor");e&&e.isEnabled()&&(e.options.enabled=!1,L.DomUtil.removeClass(e.options.controlUI,"enabled"),e.disable())}},{key:"toGeoJSON",value:function(n){var r=this,i=[];if(0===r._drawnItems.getLayers().length)return null;r._drawnItems.eachLayer(function(e){console.log(r._getShapeType(e));var t=void 0;"circle"===r._getShapeType(e)?t=new L.Polygon(m.default.Control.Draw._circleToPolygon(e)).toGeoJSON(8):t=e.toGeoJSON(8);"circlemarker"===r._getShapeType(e)&&(t.properties.isCircleMarker=!0),n&&m.default.Common.CommonTools._geoJSONLatLngToDestProj(t,r._map),t.properties||(t.properties={}),t.properties.options=e.options,i.push(t)});var e=o.merge(i);if(n){var t=m.default.Map.MapConfig.getInstance();e.proj4=t.getProj4(),e.prj=t.getPrj()}else e.proj4=m.default.Common.CommonValues.defaltProj4_EPSG4326,e.prj=m.default.Common.CommonValues.defaltPrj_EPSG4326;return e}},{key:"loadFromGeoJSON",value:function(e){console.log("loadFromGeoJSON");for(var t=e.getLayers(),n=0;n<t.length;n++)t[n].addTo(this._map),this._drawnItems.addLayer(t[n])}},{key:"removeGeoJSON",value:function(e){console.log("removeGeoJSON");if(e.getLayers)for(var t=e.getLayers(),n=0;n<t.length;n++)this._drawnItems.removeLayer(t[n]),t[n].remove();else{var r=e;this._drawnItems.removeLayer(r),r.remove()}}},{key:"clear",value:function(){console.log("clear layers");for(var e=this._drawnItems.getLayers(),t=0;t<e.length;t++)this._drawnItems.removeLayer(e[t]),e[t].remove()}},{key:"_getShapeType",value:function(e){return e instanceof L.Circle?"circle":e instanceof L.Icon?"icon":e instanceof L.Marker?"marker":e instanceof L.Polyline&&!(e instanceof L.Polygon)?"polyline":e instanceof L.Polygon&&!(e instanceof L.Rectangle)?"polygon":e instanceof L.Rectangle?"rectangle":e instanceof L.CircleMarker?"circlemarker":"unknown"}},{key:"_exportDraw",value:function(){console.log("_exportDraw:"+this._iomode);var e=m.default.Map.MapConfig.getInstance()._isDestProjection(),t=this.toGeoJSON(e);if(null!==t)if("geojson"===this._iomode){var n=JSON.stringify(t);m.default.Common.CommonTools.exportData(n,"exportdata.geojson"),m.default.Control.Notification.getInstance().showSuccess(m.default.Local.Control.drawControl.exportDraw.success())}else"shapefile"===this._iomode?m.default.Common.ExportShape.getInstance().exportShapeAsync(t):"txt"===this._iomode?this.options.exportTxtFunction():"excel"===this._iomode?this.options.exportExcelFunction():"dwgdxf"===this._iomode&&this.options.exportDwgDxfFunction();else m.default.Control.Notification.getInstance().showInfo(m.default.Local.Control.drawControl.exportDraw.noData())}},{key:"_importDraw",value:function(){console.log("_importDraw:"+this._iomode),"geojson"===this._iomode?$("#kqimportgeojson").click():"txt"===this._iomode?$("#kqimporttxt").click():"excel"===this._iomode?$("#kqimportexcel").click():"dwgdxf"===this._iomode&&$("#kqimportdwgdxf").click()}},{key:"_removeRedundantFeatures",value:function(e){e.features.length>this.options.importMaxFeatureCount&&e.features.splice(0,e.features.length-this.options.importMaxFeatureCount)}},{key:"_toggle",value:function(e){e=e||500,this._draw&&$(this._draw._container).toggle(e),this._iobar&&$(this._iobar._bar._container).toggle(e)}},{key:"_hide",value:function(){this._draw&&$(this._draw._container).hide(),this._iobar&&$(this._iobar._bar._container).hide()}},{key:"_getImportShapeUrl",value:function(){return m.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/shpparser"}},{key:"_getPrjConvertUrl",value:function(){return m.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/projectsystem?destType=wkt&prj="}},{key:"_getProj4ConvertUrl",value:function(){return m.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/projectsystem?destType=proj4&prj="}},{key:"_addDrawnLayer",value:function(e){this._drawnItems.addLayer(e)}},{key:"_getIOMode",value:function(e){return"G"===e?"geojson":"S"===e?"shapefile":"D"===e?"dwgdxf":"T"===e?"txt":"E"===e?"excel":void 0}},{key:"_getBtnState",value:function(e){return"G"===e?"mode-geojson":"S"===e?"mode-shapefile":"D"===e?"mode-dwgdxf":"T"===e?"mode-txt":"E"===e?"mode-excel":void 0}},{key:"_getDataState",value:function(e){return"G"===e?{stateName:"mode-geojson",icon:"icon iconfont icon-g",title:m.default.Local.Control.draw.io.usingGeoJSON()}:"S"===e?{stateName:"mode-shapefile",icon:"icon iconfont icon-s",title:m.default.Local.Control.draw.io.usingShapefile()}:"D"===e?{stateName:"mode-dwgdxf",icon:"icon iconfont icon-d",title:m.default.Local.Control.draw.io.usingDwgDxf()}:"T"===e?{stateName:"mode-txt",icon:"icon iconfont icon-t",title:m.default.Local.Control.draw.io.usingTxt()}:"E"===e?{stateName:"mode-excel",icon:"icon iconfont icon-e",title:m.default.Local.Control.draw.io.usingExcel()}:void 0}},{key:"customImportDraw",value:function(e){"shapefile"===(this._iomode=e)?$("#kq-importshape").click():this._importDraw()}},{key:"customExportDraw",value:function(e){this._iomode=e,this._exportDraw()}}],[{key:"_circleToPolygon",value:function(e,t,n){if(!(n=n||e._map))throw Error("Can't figure out points without adding the feature to the map");var r,i,o,a,s,l=[],u=n.options.crs,c=2*Math.PI,h=0;i=u===L.CRS.EPSG3857?(a=n.latLngToLayerPoint.bind(n),s=n.layerPointToLatLng.bind(n),e._radius):(a=u.projection.project.bind(u.projection),s=u.projection.unproject.bind(u.projection),e._mRadius),r=a(e._latlng),t=t||64;for(var f=0;f<t-1;f++)h-=c/t,o=new L.Point(r.x+i*Math.cos(h),r.y+i*Math.sin(h)),0<f&&o.equals(l[f-1])||l.push(s(o));return l}},{key:"_resetImportFileHtml",value:function(e){console.log("_resetImportFileHtml !!!!!!"),$("#kqimportgeojson").remove(),$("#kqimporttxt").remove(),$("#kqimportexcel").remove(),$("#kqimportdwgdxf").remove(),$("body").prepend('<input type="file" id=\'kqimportgeojson\' onchange="kqImportGeoJSON(this)" accept=\'.geojson\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<input type="file" id=\'kqimporttxt\' onchange="kqImportTxt(this)" accept=\'.txt\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<input type="file" id=\'kqimportexcel\' onchange="kqImportExcel(this)" accept=\'.xls,.xlsx\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<input type="file" id=\'kqimportdwgdxf\' onchange="kqImportDwgDxf(this)" accept=\'.dwg,.dxf\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<button style="display: none; " id="shapeuploadbutton" title="Import"/>');var t=m.default.Control.Manager.getInstance().getControl("draw");t&&t.upload&&t.upload.attachToHtmlButton($("#shapeuploadbutton")[0],t._getImportShapeUrl(),t.upload_options)}}]),n}();i.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":729,"@mapbox/geojson-merge":57}],633:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),h=r(e("../kq")),o=r(e("./Manager")),a=r(e("leaflet")),s=r(e("./FeatureImportAttributeDialog"));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=this;n._config=e,n._div=t,n._data=[],n._featureImportAttributeDialog=null,n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[],n._dataSourceLayer=[],n._create(),n._html=h.default.Local.Control.FeatureImport.html,n._language=h.default.Local.getCurrentLanguage()}var e,t;return i(r,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__layer-select__",this._html.layerSelect()).replace("__select-layer__",this._html.selectLayer()).replace("__layer-import__",this._html.graphicImport()).replace("__import-layer__",this._html.graphicImport_()).replace("__options__",this._html.options()).replace("__feature-overlay__",this._html.featureOverlay()).replace("__allow-overlay__",this._html.allowOverlay()).replace("__attribute-import__",this._html.attributeImport())}},{key:"_initHtml",value:(e=regeneratorRuntime.mark(function e(){var c,r,t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=h.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON(),t=h.default.Query.FeatureImportConfig.getInstance().getLayerGeoType(c._getSelectedConfigLayer()),n=e.type,r=jQuery.makeArray({point:["Point","MultiPoint"],line:["LineString","MultiLineString"],polygon:["Polygon","MultiPolygon"]}[t]);if("FeatureCollection"==n){for(var i=e.features,o=!1,a=0;a<i.length;a++)if(-1!=jQuery.inArray(i[a].geometry.type,r)){o=!0;break}if(0==o)return!1}else if("GeometryCollection"==n){for(var s=e.geometries,l=!1,u=0;u<s.length;u++)if(-1!=jQuery.inArray(s[u].type,r)){l=!0;break}if(0==l)return!1}return!0},c=this,t=h.default.Query.FeatureImportConfig.getInstance(),c._dataSourceLayer=t.layers(),c._container=a.default.DomUtil.get(c._div),c._container||(c._container=a.default.DomUtil.create("div")),e.next=8,h.default.Common.NetworkTools.httpGetAsync(h.default.Common.CommonValues.kqwebmapPath+"query/feature_import.html");case 8:if("error"===(n=e.sent))return console.log("load feature_import_html error!"),e.abrupt("return",!1);e.next=12;break;case 12:n=c._translateHtmlChineseEnglish(n),$(c._container).append(n),$("#feature-import-layer-dropdownlist").kendoDropDownList({valueTemplate:'<span class= "k-state-default feature-import-layer-icon" style="background-image: url(\'../../ftree/#:data.iconType#.png\')"></span><span class="k-state-default"><p class="feature-import-layer-text" style="width: 100%; display: inline">#: data.value #</p></span>',template:'<span class= "k-state-default feature-import-layer-icon" style="background-image: url(\'../../ftree/#:data.iconType#.png\')"></span><span class="k-state-default"><p class="feature-import-layer-text" style="width: 100%; display: inline">#: data.value #</p></span>',dataSource:{data:c._getDataSource()},height:200}).data("kendoDropDownList"),$("#graphics-import-btn").kendoButton({click:function(){console.log("graphics-import-btn clicked!"),c._toggleDrawingPanel(),h.default.Control.Manager.getInstance().getControl("draw").on("import.done",function(e){var t=h.default.Control.Notification.getInstance();0==r()&&t.showError(h.default.Local.Control.FeatureImport.import.typeUnmatch());var n=h.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON();if(null!=n)if(null!=n.proj4)$("#feature-coord-custom").click(),console.log(n.proj4),$("#feature-coord-textarea").prop("value","PROJ4:"+n.proj4);else{if(null==n.prj)return void t.showError(h.default.Local.Control.FeatureImport.import.manualImportCoord());$("#feature-coord-custom").click(),console.log(n.proj4),$("#feature-coord-textarea").prop("value","prj:"+n.prj)}else t.showError(h.default.Local.Control.FeatureImport.import.noGraphic())})}}),$("#attribute-import-btn").kendoButton({click:function(){console.log("attribute-import-btn clicked!");var e=h.default.Control.Notification.getInstance(),t=c._getSelectedConfigLayer();void 0!==t?null!=h.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON()?0!=r()?""!=$("#feature-coord-textarea").val()?(c._featureImportAttributeDialog=s.default.getInstance(),c._featureImportAttributeDialog.initFeatureImportDialog(t)):e.showError(h.default.Local.Control.FeatureImport.import.coordNone()):e.showError(h.default.Local.Control.FeatureImport.import.typeUnmatch()):e.showError(h.default.Local.Control.FeatureImport.import.importLayer()):e.showError(h.default.Local.Control.FeatureImport.import.invalidLayer())}}),$("#feature-coord-4326").click(function(){$("#feature-coord-textarea").prop("value","EPSG:4326"),$("#feature-coord-textarea").attr("readonly","readonly")}),$("#feature-coord-3857").click(function(){$("#feature-coord-textarea").prop("value","EPSG:3857"),$("#feature-coord-textarea").attr("readonly","readonly")}),$("#feature-coord-target").click(function(){var e=h.default.Map.MapConfig.getInstance().getProj4();$("#feature-coord-textarea").prop("value","PROJ4:"+e),$("#feature-coord-textarea").attr("readonly","readonly")}),$("#feature-coord-custom").click(function(){$("#feature-coord-textarea").removeAttr("readonly"),$("#feature-coord-textarea").attr("value","")});case 21:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return t.apply(this,arguments)})},{key:"_getDataSource",value:function(){var l=h.default.Query.FeatureImportConfig.getInstance(),u=h.default.Map.MapConfig.getInstance(),e=l.layers(),c=[];return e.forEach(function(e){if(e){var t=l.getLayerSourceName(e),n=l.getLayerID(e),r=l.getLayerLabel(e),i=u.findLayer(t,n);if(null!==i){var o=u.isLayerHasPermission(i),a=l.getLayerGeoType(e);if(!0===o){var s={};s.value=r,"point"===a.toLowerCase()?s.iconType="point":"line"===a.toLowerCase()?s.iconType="line":"polygon"===a.toLowerCase()?s.iconType="polygon":s.iconType="unknown",c.push(s)}}}}),c}},{key:"_getLayerLabels",value:function(){var t=h.default.Query.FeatureImportConfig.getInstance();return[].concat(this._dataSourceLayer.map(function(e){return t.getLayerLabel(e)}))}},{key:"_create",value:function(){this._initHtml()}},{key:"_toggleDrawingPanel",value:function(){o.default.getInstance()._toggleDrawPane()}},{key:"_getSource",value:function(e){return h.default.Map.MapConfig.getInstance().getSourceByName(e,!0)}},{key:"_getQueryUrl",value:function(e){return h.default.Map.MapConfig.getInstance().getSourceUrl(this._getSource(e))}},{key:"_getConfigLayer",value:function(e){var t=h.default.Query.FeatureImportConfig.getInstance(),n=t.getLayerID(e),r=t.getLayerSourceName(e);return t.findLayer(n,r)}},{key:"_getSelectedConfigLayer",value:function(){var e=$("#feature-import-layer-dropdownlist").data("kendoDropDownList").select();return this._dataSourceLayer[e]}},{key:"_getGeometry",value:function(){var e=h.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!1);return e?JSON.stringify(h.default.Common.CommonTools.geoJsonFCToGC(e)):null}},{key:"toString",value:function(){return"FeatureImport"}}]),r}();n.default=l},{"../kq":729,"./FeatureImportAttributeDialog":634,"./Manager":643,leaflet:473}],634:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),p=r(e("../kq")),c=r(e("./Window"));function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var f=e("axios"),i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e._layer=null,e._attributeImportDialog=null,e._featureRecordList=null,e._featurePropertyGrid=null,e._confirmDialog=null,e._featureImportCurrentLayer=null,e._currentLayerFieldList=[],e._currentLayerFieldAliasList=[],e._currentFeatureIndex=0,e._geojsonFeatureImportPropertiesArray=[],e._local=p.default.Local.Control.FeatureImportDialog}var n,e,r,i,o,a,s,l;return u(t,[{key:"initFeatureImportDialog",value:(l=h(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this)._geojsonFeatureImportPropertiesArray=n._getFeatureImportPropertyValue(),n._featureImportCurrentLayer=t,n._getCurrentLayerFieldData(t),e.next=6,n._initWindow();case 6:return e.next=8,n._initRecordList();case 8:return e.next=10,n._initPropertyGrid();case 10:n._attributeImportDialog.open();case 11:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__feature-import__",this._local.featureImportButton()).replace("__feature-reset__",this._local.featureImportResetButton())}},{key:"_featureImportFunction",value:function(){var l=this;console.log("__FUNCTION _featureImportFunction() ! ");var e=p.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON();if(e){var t=$("#feature-import-property-grid").data("kendoGrid").dataSource.data(),n={},u=p.default.Query.FeatureImportConfig.getInstance(),r=u.getLayerID(l._featureImportCurrentLayer);t.forEach(function(e){n[e.layerField]=e.layerFieldValue});var c=p.default.Query.FeatureImport.getInstance();try{console.log("-----\x3e options :  ");var i=p.default.Map.MapConfig.getInstance();console.log("json data: "),console.log("-> drawGeoJSON geometry: "),console.log(e.features[l._currentFeatureIndex].geometry),console.log("-> properties: "),console.log(n);var o={type:"Feature",ID:"Feature1",geometry:e.features[l._currentFeatureIndex].geometry,properties:n};console.log("-> json_data: "),console.log(o);var a=p.default.Map.MapConfig.getInstance().getSourceByName(l._featureImportCurrentLayer._src_name,!0),h={url:i.getSourceUrl(a),layerId:r,forceImport:$("#feature-cover-force-checkbox").is(":checked"),data:JSON.stringify(o),geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},f=l._geojsonFeatureImportPropertiesArray[l._currentFeatureIndex].text,d=p.default.Control.Notification.getInstance();c.queryAsync(h,function(){console.log("query_good");var e=c.response();if(e&&"success"===e.resultcode){l._geojsonFeatureImportPropertiesArray[l._currentFeatureIndex].spriteCssClass="fa fa-check-square-o";var t=u.getLayerLabel(l._featureImportCurrentLayer);l._featureRecordList.setDataSource([{text:t,items:l._geojsonFeatureImportPropertiesArray,type:"layer"}]),l._featureRecordList.expand($("#feature-import-record-list .k-item:eq(0)"),!1),l._featureRecordList.select($("#feature-import-record-list .k-group .k-item:eq("+l._currentFeatureIndex+")"));var n=e.result[0];if(1==h.forceImport)if(!n||"success"!=n.status&&"overlap"!=n.status)d.showError(f+p.default.Local.Control.FeatureImport.dialog.importFail());else{d.showSuccess(f+p.default.Local.Control.FeatureImport.dialog.importOk());var r=p.default.Control.Manager.getInstance()._getMap();setTimeout(function(){r.panBy([-150,-150])},1e3)}else if(n&&"success"==n.status){d.showSuccess(f+p.default.Local.Control.FeatureImport.dialog.importOk());var i=p.default.Control.Manager.getInstance()._getMap();setTimeout(function(){i.panBy([-150,-150])},1e3)}else if(n&&"overlap"==n.status){d.showError(f+p.default.Local.Control.FeatureImport.dialog.overlap());var o=e.result[0].overlap.features[0].geometry,a=p.default.Common.CommonTools.geoJsonFromGeometry(o,{color:"#F00",fillColor:"#F00"}),s=p.default.Control.Manager.getInstance()._getMap();$("#feature-import-attribute-dialog").parent().hide(),setTimeout(function(){$("#feature-import-attribute-dialog").parent().show();var e=p.default.Control.Manager.getInstance();if(e){var t=e._getMap();p.default.Map.MapCommon.clearFlickerLayer(t)}},3e3),p.default.Map.MapCommon.flickerLayer(a,s)}else d.showError(f+p.default.Local.Control.FeatureImport.dialog.importFail())}},function(){d.showError(f+p.default.Local.Control.FeatureImport.dialog.importFail())})}catch(e){console.log("catch error:"+e)}}else{p.default.Control.Notification.getInstance().showInfo(p.default.Local.Control.FeatureImport.dialog.importLayer())}}},{key:"_featureImportResetFunction",value:(s=h(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,console.log("__FUNCTION _featureImportResetFunction() ! "),e.next=4,t._getFeatureImportPropertyGridDataArray();case 4:n=e.sent,r=new kendo.data.DataSource({data:n,schema:{model:{id:"layerField"}}}),t._featurePropertyGrid.setDataSource(r);case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"_initWindow",value:(a=h(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n="#"+p.default.Common.CommonValues.mapContainerID,r={title:t._local.featureImport(),width:"720px",height:"600px",actions:["Close"],scrollable:!0,resizable:!0,appendTo:n,modal:!0,close:function(){console.log("Feature import attribute dialog on close!"),p.default.Control.Manager.getInstance().getControl("draw").clear(),i._remove()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},i=new c.default("feature-import-attribute-dialog",r),e.next=6,i.initAsync(function(){t._attributeImportDialog=i._object()});case 6:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_initRecordList",value:(o=h(regeneratorRuntime.mark(function e(){var r,t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this,function(e){console.log("select index  "+$(e.item).index())},t=p.default.Query.FeatureImportConfig.getInstance(),n=t.getLayerLabel(r._featureImportCurrentLayer),r._featureRecordList=$("#feature-import-record-list").kendoPanelBar({select:function(){var t=h(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!=r._geojsonFeatureImportPropertiesArray[r._currentFeatureIndex].spriteCssClass.indexOf("fa-check-square-o")||!r._featurePropertyGrid.dataSource.hasChanges()){e.next=8;break}n=p.default.Common.CommonValues.mapContainerID,$("#"+n).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),r._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: large;'>"+r._local.currentFeatureSwitch()+"</b>",messages:{okText:r._local.okText(),cancel:r._local.cancelText()}}).data("kendoConfirm"),r._confirmDialog.result.done(h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r._currentFeatureIndex=$(t.item).index(),e.next=3,r._refreshPropertyGrid();case 3:case"end":return e.stop()}},e,this)}))).fail(function(){r._featureRecordList.clearSelection(),r._featureRecordList.select($("#feature-import-record-list .k-panel .k-item:eq("+r._currentFeatureIndex+")"))}),e.next=12;break;case 8:return console.log("select index  "+$(t.item).index()),r._currentFeatureIndex=$(t.item).index(),e.next=12,r._refreshPropertyGrid();case 12:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),collapse:function(e){e.preventDefault()}}).data("kendoPanelBar"),r._featureRecordList.setDataSource([{text:n,items:r._geojsonFeatureImportPropertiesArray,type:"layer"}]),r._selectFirstItem();case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"_GetToolbarTemplate",value:function(){return'<a class="k-button k-primary" id="featureImportButton" href="\\#" >'+this._local.featureImport()+'</a><a class="k-button" id="featureImportResetButton" href="\\#" >'+this._local.featureImportReset()+"</a>"}},{key:"_initPropertyGrid",value:(i=h(regeneratorRuntime.mark(function e(){var n,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){console.log("@# options ----\x3e ",t);var n=t.model.layerValueType,r=t.model.layerFieldValue,i=p.default.Control.Notification.getInstance();"integer"==n.toLowerCase()?$('<input name= "'+t.field+'"/>').appendTo(e).kendoNumericTextBox({change:function(e){if(!/^\d+$/.test(e.sender.value())&&null!=e.sender.value())return i.showError(p.default.Local.Control.FeatureImport.dialog.fillInt()),void t.model.set("layerFieldValue",r);t.model.set("layerFieldValue",e.sender.value())}}):"float"==n.toLowerCase()||"double"==n.toLowerCase()?$('<input name= "'+t.field+'"/>').appendTo(e).kendoNumericTextBox({change:function(e){if(!/^[+|-]?\d*.?\d*$/.test(e.sender.value())&&null!=e.sender.value())return i.showError(p.default.Local.Control.FeatureImport.dialog.fillFloat()),void t.model.set("layerFieldValue",r);t.model.set("layerFieldValue",e.sender.value())}}):"date"==n.toLowerCase()?$('<input name= "'+t.field+'"/>').appendTo(e).kendoDateTimePicker({format:"yyyy/MM/dd HH:mm:ss",change:function(e){if(!/^[1-9]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/.test(e.sender._oldText)&&null!=e.sender.value())return i.showError(p.default.Local.Control.FeatureImport.dialog.fillDate()),void t.model.set("layerFieldValue",r);t.model.set("layerFieldValue",e.sender._oldText)}}):$('<input name= "'+t.field+'"/>').addClass("k-input k-textbox").appendTo(e).change(function(e){t.model.set("layerFieldValue",e.originalEvent.target.value)})},(n=this)._featurePropertyGrid=$("#feature-import-property-grid").kendoGrid({selectable:"row",allowCopy:!0,editable:!0,scrollable:!0,columns:[{field:"layerFieldAlias",title:p.default.Local.Control.infoQueryDialog.columns.field(),editable:function(e){return!1}},{field:"layerFieldValue",title:p.default.Local.Control.infoQueryDialog.columns.value(),editor:t}],dataBound:function(e){}}).data("kendoGrid"),$("#featureImportButton").click(function(e){if(console.log("FUNCTION Feature Import: -> "),-1!=n._geojsonFeatureImportPropertiesArray[n._currentFeatureIndex].spriteCssClass.indexOf("fa-check-square-o")){var t=p.default.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),n._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: large;'>"+n._local.featureImportRepeat()+"</b>",messages:{okText:n._local.okText(),cancel:n._local.cancelText()}}).data("kendoConfirm"),n._confirmDialog.result.done(function(){n._featureImportFunction()}).fail(function(){console.log("Cancel import!")}),n._confirmDialog.open()}else n._featureImportFunction();return!1}),$("#featureImportResetButton").click(function(){var t=h(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FUNCTION Feature Import Reset -> "),e.next=3,n._featureImportResetFunction();case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()),e.next=7,n._refreshPropertyGrid();case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_selectFirstItem",value:function(){this._featureRecordList.expand($("#feature-import-record-list .k-item:eq(0)"),!1),this._featureRecordList.select($("#feature-import-record-list .k-group .k-item:eq(0)")),this._currentFeatureIndex=0}},{key:"_getFeatureImportPropertyGridDataArray",value:(r=h(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n=[],r=p.default.Query.FeatureImportConfig.getInstance(),i=r.getLayerID(t._featureImportCurrentLayer),o=p.default.Map.MapConfig.getInstance().getSourceByName(t._featureImportCurrentLayer._src_name,!0),e.next=7,t.getFieldJSON(i,o);case 7:a=e.sent,s=a.result.fields,l=0;case 10:if(!(l<t._currentLayerFieldAliasList.length)){e.next=26;break}u=t._currentLayerFieldAliasList[l].name,c=t._currentLayerFieldList[l].name,h="",f=0;case 15:if(!(f<s.length)){e.next=22;break}if(s[f].name===c)return h=s[f].type,e.abrupt("break",22);e.next=19;break;case 19:++f,e.next=15;break;case 22:t._geojsonFeatureImportPropertiesArray[t._currentFeatureIndex].properties.hasOwnProperty(c)?n.push({layerFieldAlias:u,layerField:c,layerFieldValue:t._geojsonFeatureImportPropertiesArray[t._currentFeatureIndex].properties[c],layerValueType:h}):n.push({layerFieldAlias:u,layerField:c,layerFieldValue:"",layerValueType:h});case 23:++l,e.next=10;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_refreshPropertyGrid",value:(e=h(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._getFeatureImportPropertyGridDataArray();case 3:n=e.sent,r=new kendo.data.DataSource({data:n,schema:{model:{id:"layerField"}}}),t._featurePropertyGrid.setDataSource(r);case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_getFeatureImportPropertyValue",value:function(){this._geojsonFeatureImportPropertiesArray=[];var e=p.default.Control.Notification.getInstance(),t=p.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON();if(null!=t){if("FeatureCollection"==t.type)for(var n=t.features,r=0;r<n.length;++r){var i=n[r].properties,o="Feature "+(r+1);this._geojsonFeatureImportPropertiesArray.push({text:o,spriteCssClass:"fa fa-square-o",properties:i})}return this._geojsonFeatureImportPropertiesArray}e.showError(p.default.Local.Control.FeatureImport.dialog.importLayer())}},{key:"_getCurrentLayerFieldData",value:function(e){var n=this,t=p.default.Query.FeatureImportConfig.getInstance();if(n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[],e){var r=t.getLayerFilterFieldsAlias(e).split(",");t.getLayerFilterFields(e).split(",").map(function(e,t){n._currentLayerFieldList.push({name:e}),n._currentLayerFieldAliasList.push({name:r[t]})})}return n._currentLayerFieldAliasList}},{key:"getFieldJSON",value:(n=h(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.default.Map.MapConfig.getInstance().getSourceUrl(n),i=r+"/queryserver/fields?layerid="+t,e.next=4,f.get(i).then(function(e){return console.log("-----\x3eresponse: "),console.log(e),console.log("-----\x3eresponse.data: "),console.log(e.data),e.data}).catch(function(e){return console.log("httpGetAsync: url:"+r+" error:"+e),"error"});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=i},{"../kq":729,"./Window":694,axios:61}],635:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),y=r(e("../kq")),f=r(e("./Window"));function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var p=e("axios"),i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e._layer=null,e._attributeUpdateDialog=null,e._featureRecordList=null,e._featurePropertyGrid=null,e._featureUpdateCurrentLayer=null,e._currentLayerFieldList=[],e._currentLayerFieldAliasList=[],e._currentFeatureIndex=0,e._inputFeatureUpdateRecord=null,e._featureUpdateRecordName=null,e._local=y.default.Local.Control.FeatureUpdateDialog}var n,e,r,i,o,a,s,l,u,c;return h(t,[{key:"initFeatureUpdateDialog",value:(c=d(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this)._inputFeatureUpdateRecord=n,i._featureUpdateRecordName=r,i._featureUpdateCurrentLayer=t,i._getCurrentLayerFieldData(t),e.next=7,i._initWindow();case 7:return e.next=9,i._initRecordList();case 9:return e.next=11,i._initPropertyGrid();case 11:i._attributeUpdateDialog.open();case 12:case"end":return e.stop()}},e,this)})),function(e,t,n){return c.apply(this,arguments)})},{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__feature-update__",this._local.featureUpdateButton()).replace("__feature-reset__",this._local.featureUpdateResetButton())}},{key:"_featureUpdateResetFunction",value:(u=d(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,console.log("__FUNCTION _featureUpdateResetFunction() ! "),e.next=4,t._refreshPropertyGrid();case 4:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"_featureUpdateFunction",value:(l=d(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,console.log("__FUNCTION _featureUpdateFunction() ! "),n=$("#feature-update-property-grid").data("kendoGrid"),r=n.dataSource.data(),i={},o=y.default.Query.FeatureImportConfig.getInstance(),a=o.getLayerID(t._featureUpdateCurrentLayer),r.forEach(function(e){i[e.layerField]=e.layerFieldValue}),s=o.getLayerPrimaryKey(t._featureUpdateCurrentLayer),l=t._inputFeatureUpdateRecord[s],u=s+"="+l,c=t._inputFeatureUpdateRecord.geometry,h=y.default.Query.FeatureUpdate.getInstance(),e.prev=13,f=y.default.Map.MapConfig.getInstance(),console.log("-> feature update properties: "),console.log(i),d={type:"Feature",ID:"Feature1",where:u,geometry:c,properties:i},console.log("-> json_data: "),console.log(d),p=y.default.Map.MapConfig.getInstance().getSourceByName(t._featureUpdateCurrentLayer._src_name,!0),m={url:f.getSourceUrl(p),layerId:a,forceImport:!0,data:JSON.stringify(d),geoSRS:"EPSG:4326"},g=y.default.Control.Notification.getInstance(),e.next=25,h.queryAsync(m,function(){console.log("query_good");var e=h.response();console.log("Feature Delete response: "),console.log(e),e&&"success"===e.resultcode?g.showSuccess(t._featureUpdateRecordName+y.default.Local.Control.FeatureImport.dialog.updateOk()):g.showError(t._featureUpdateRecordName+y.default.Local.Control.FeatureImport.dialog.updateFail())},function(){console.log("query_error"),g.showError(t._featureUpdateRecordName+y.default.Local.Control.FeatureImport.dialog.updateFail())});case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(13),console.log("Feature update error:"+e.t0);case 30:case"end":return e.stop()}},e,this,[[13,27]])})),function(){return l.apply(this,arguments)})},{key:"featureDeleteFunction",value:(s=d(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this,o=!1,a=y.default.Map.MapConfig.getInstance(),s=y.default.Query.FeatureDelete.getInstance(),l=y.default.Map.MapConfig.getInstance().getSourceByName(i,!0),e.prev=5,u={url:a.getSourceUrl(l),layerId:t,where:n},c=y.default.Control.Notification.getInstance(),e.next=10,s.queryAsync(u,function(){console.log("Feature delete query_good");var e=s.response();console.log("Feature Delete response: "),console.log(e),o=e&&"success"===e.resultcode?(c.showSuccess(r+y.default.Local.Control.FeatureImport.dialog.deleteOk()),!0):(c.showError(r+y.default.Local.Control.FeatureImport.dialog.deleteFail()),!1)},function(){console.log("query_error"),c.showError(r+y.default.Local.Control.FeatureImport.dialog.deleteFail()),o=!1});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("Feature delete error:"+e.t0),o=!1;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}},e,this,[[5,12]])})),function(e,t,n,r){return s.apply(this,arguments)})},{key:"_initWindow",value:(a=d(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n="#"+y.default.Common.CommonValues.mapContainerID,r={title:t._local.featureUpdate(),width:"720px",height:"600px",actions:["Close"],scrollable:!0,resizable:!0,appendTo:n,modal:!0,close:function(){console.log("Feature update attribute dialog on close!"),i._remove()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},i=new f.default("feature-update-attribute-dialog",r),e.next=6,i.initAsync(function(){t._attributeUpdateDialog=i._object()});case 6:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_initRecordList",value:(o=d(regeneratorRuntime.mark(function e(){var n,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this,function(e){console.log("select index  "+$(e.item).index())},t=y.default.Query.FeatureImportConfig.getInstance(),t.getLayerLabel(n._featureUpdateCurrentLayer),n._featureRecordList=$("#feature-update-record-list").kendoPanelBar({select:function(){var t=d(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("select index  "+$(t.item).index()),n._currentFeatureIndex=$(t.item).index(),e.next=4,n._refreshPropertyGrid();case 4:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),collapse:function(e){e.preventDefault()}}).data("kendoPanelBar"),n._featureRecordList.setDataSource(n._getFeatureUpdateRecordListDataSource()),n._selectFirstItem();case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"_GetToolbarTemplate",value:function(){return'<a class="k-button k-primary" id="featureUpdateButton" href="\\#" >'+this._local.featureUpdate()+'</a><a class="k-button" id="featureUpdateResetButton" href="\\#" >'+this._local.featureUpdateReset()+"</a>"}},{key:"_initPropertyGrid",value:(i=d(regeneratorRuntime.mark(function e(){var n,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){console.log("@# options ----\x3e ",t);var n=t.model.layerValueType,r=t.model.layerFieldValue,i=y.default.Control.Notification.getInstance();console.log("@# type -------\x3e ",n),"integer"==n.toLowerCase()?$('<input name= "'+t.field+'"/>').appendTo(e).kendoNumericTextBox({change:function(e){if(!/^\d+$/.test(e.sender.value())&&null!=e.sender.value())return i.showError(y.default.Local.Control.FeatureImport.dialog.fillInt()),void t.model.set("layerFieldValue",r);t.model.set("layerFieldValue",e.sender.value())}}):"float"==n.toLowerCase()||"double"==n.toLowerCase()?$('<input name= "'+t.field+'"/>').appendTo(e).kendoNumericTextBox({change:function(e){if(!/^[+|-]?\d*.?\d*$/.test(e.sender.value())&&null!=e.sender.value())return i.showError(y.default.Local.Control.FeatureImport.dialog.fillFloat()),void t.model.set("layerFieldValue",r);t.model.set("layerFieldValue",e.sender.value())}}):"date"==n.toLowerCase()?$('<input name= "'+t.field+'"/>').appendTo(e).kendoDateTimePicker({format:"yyyy/MM/dd HH:mm:ss",change:function(e){if(!/^[1-9]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/.test(e.sender._oldText)&&null!=e.sender.value())return i.showError(y.default.Local.Control.FeatureImport.dialog.fillDate()),void t.model.set("layerFieldValue",r);t.model.set("layerFieldValue",e.sender._oldText)}}):$('<input name= "'+t.field+'"/>').addClass("k-input k-textbox").appendTo(e).change(function(e){t.model.set("layerFieldValue",e.originalEvent.target.value)})},(n=this)._featurePropertyGrid=$("#feature-update-property-grid").kendoGrid({selectable:"row",allowCopy:!0,editable:!0,scrollable:!0,columns:[{field:"layerFieldAlias",title:y.default.Local.Control.infoQueryDialog.columns.field(),editable:function(e){return!1}},{field:"layerFieldValue",title:y.default.Local.Control.infoQueryDialog.columns.value(),editor:t}]}).data("kendoGrid"),$("#featureUpdateButton").click(function(){var t=d(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FUNCTION Feature Update: -> "),e.next=3,n._featureUpdateFunction();case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()),$("#featureUpdateResetButton").click(function(){var t=d(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("FUNCTION Feature Update Reset -> "),n._featureUpdateResetFunction();case 2:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()),e.next=7,n._refreshPropertyGrid();case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_selectFirstItem",value:function(){this._featureRecordList.expand($("#feature-update-record-list .k-item:eq(0)"),!1),this._featureRecordList.select($("#feature-update-record-list .k-group .k-item:eq(0)")),this._currentFeatureIndex=0}},{key:"_getFeatureUpdateRecordListDataSource",value:function(){var e=[],t=[],n=y.default.Query.FeatureImportConfig.getInstance().getLayerLabel(this._featureUpdateCurrentLayer);return t.push({text:this._featureUpdateRecordName,type:"item"}),e.push({text:n,items:t,type:"layer"}),e}},{key:"_getFeatureUpdatePropertyGridDataSource",value:(r=d(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n=[],r=y.default.Query.FeatureImportConfig.getInstance(),i=r.getLayerID(t._featureUpdateCurrentLayer),o=y.default.Map.MapConfig.getInstance().getSourceByName(t._featureUpdateCurrentLayer._src_name,!0),e.next=7,t.getFieldJSON(i,o);case 7:a=e.sent,s=a.result.fields,l=0;case 10:if(!(l<t._currentLayerFieldList.length)){e.next=26;break}u=t._currentLayerFieldList[l].name,c=t._currentLayerFieldAliasList[l].name,h="",f=0;case 15:if(!(f<s.length)){e.next=22;break}if(s[f].name===u)return h=s[f].type,e.abrupt("break",22);e.next=19;break;case 19:f++,e.next=15;break;case 22:t._inputFeatureUpdateRecord.hasOwnProperty(u)&&n.push({layerFieldAlias:c,layerField:u,layerFieldValue:t._inputFeatureUpdateRecord[u],layerValueType:h});case 23:++l,e.next=10;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_refreshPropertyGrid",value:(e=d(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._getFeatureUpdatePropertyGridDataSource();case 3:n=e.sent,t._featurePropertyGrid.setOptions({dataSource:n});case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_getCurrentLayerFieldData",value:function(e){var n=this,t=y.default.Query.FeatureImportConfig.getInstance();if(n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[],e){var r=t.getLayerFilterFieldsAlias(e).split(",");t.getLayerFilterFields(e).split(",").map(function(e,t){n._currentLayerFieldList.push({name:e}),n._currentLayerFieldAliasList.push({name:r[t]})})}return n._currentLayerFieldAliasList}},{key:"getFieldJSON",value:(n=d(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.default.Map.MapConfig.getInstance().getSourceUrl(n),i=r+"/queryserver/fields?layerid="+t,e.next=4,p.get(i).then(function(e){return console.log("-----\x3eresponse: "),console.log(e),console.log("-----\x3eresponse.data: "),console.log(e.data),e.data}).catch(function(e){return console.log("httpGetAsync: url:"+r+" error:"+e),"error"});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=i},{"../kq":729,"./Window":694,axios:61}],636:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=this;t._div_id=e,t._local_historyCompare=a.default.Local.Control.HistoryCompare,t._historyCompareDataSourceList=[],t._historyLayerGroup=null,t._bookmarkAddDialog=null,t._historyCompareRecordGrid=null,t._bookmarkRecordList=[],t._currentBookmarkIndex=-1,t._init(),t._local_history_compare=a.default.Local.Control.HistoryCompare}var e,t;return i(n,[{key:"addTo",value:function(e){self._map=e}},{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__add-bookmark__",this._local_bookmark.addBookmarkButton())}},{key:"_initHtml",value:(t=s(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._container=L.DomUtil.get(t._div_id),t._container||(t._container=L.DomUtil.create("div")),e.next=5,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"query/history_compare.html");case 5:if("error"===(n=e.sent))return console.log("load history_compare_html error!"),e.abrupt("return",!1);e.next=9;break;case 9:$(t._container).append(n),console.log("load history_compare_html success");case 11:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_init",value:(e=s(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.next=3,o._initHtml();case 3:o._historyCompareRecordGrid=$("#history-compare-record-grid").kendoGrid({height:"calc(100% - 55px)",selectable:!0,resizable:!0,scrollable:!0,columns:[{field:"historyLayerTitle",title:o._local_history_compare.HistoryView(),editable:function(e){return!1}}],dataSource:{data:[]},change:function(e){var t=$("#history-compare-record-grid").data("kendoGrid");console.log("_historyCompareRecordGrid changed!");var n=t.select();console.log("_historyCompareRecordGrid select index: "+n);var r=$(n).closest("tr").index(),i=o._historyCompareDataSourceList[r].mapLayerObject;o._updateHistoryLayerGroup(i)}}).data("kendoGrid"),$(window).resize(function(){o._historyCompareRecordGrid.resize()});case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_updateHistoryLayerGroup",value:function(e){this._historyLayerGroup?this._historyLayerGroup.clearLayers():this._historyLayerGroup=L.layerGroup([]),this._historyLayerGroup.addLayer(e);var t=a.default.Control.Manager.getInstance().getMapView();this._historyLayerGroup.addTo(t._getMap())}},{key:"resetMarkListDataSource",value:function(e){this._bookmarkRecordList=e;for(var t=[],n=0;n<e.length;n++){var r=e[n].title,i=decodeURIComponent(r);t.push({bookmarkField:i})}var o=new kendo.data.DataSource({data:t});this._historyCompareRecordGrid.setDataSource(o),this._currentBookmarkIndex=-1,console.log("datasource ---\x3e"),console.log(t)}},{key:"addHistoryCompareLayer",value:function(e,t){var n=this._getMapLayerFromLayerKey(e);console.log("FUNCTION addHistoryCompareLayer layerTitle ---\x3e "+t),this._historyCompareDataSourceList.push({historyLayerTitle:t,mapLayerObject:n});var r=new kendo.data.DataSource({data:this._historyCompareDataSourceList});this._historyCompareRecordGrid.setDataSource(r)}},{key:"_getMapLayerFromLayerKey",value:function(e){return this._mapLayerManager||(this._mapLayerManager=a.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.getLayerFromKey(e)}}],[{key:"getInstance",value:function(e){return n._instance||(n._instance=new n(e)),n._instance}}]),n}();n.default=l},{"../kq":729}],637:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("../kq")),a=i(e("./Window")),s=i(e("leaflet"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}e("./TimelineLayers.js");var u={position:"topright"},c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this.options=s.default.extend({},u,e),this._local=o.default.Local.Control.HistoryView,this._map=null}var e,n;return r(t,[{key:"initAsync",value:function(e){var n,r=this;r.button=new o.default.Control.MapButton("icon-font icon-search",(n=l(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._initDialog();case 2:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)}),"History View","kq-history"),r.buttonBar=new o.default.Control.MapButtonBar([r.button],{position:r.options.position}),r.buttonBar.setAttribute("id","historyview-buttonbar"),e&&e()}},{key:"_initHtml",value:(n=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this;case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initDialog",value:(e=l(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n="#"+o.default.Common.CommonValues.mapContainerID,parseInt($(n).css("width")),parseInt($(n).css("height")),r={animation:!1,title:"History View",actions:["Close"],draggable:!1,scrollable:!1,appendTo:n,minWidth:300,resizable:!0,close:function(){console.log("history view dialog closed!"),i._remove()},updateHtml:function(e){return e}},(i=new a.default("history-view-win",r)).initAsync(function(){i._object().maximize(),t._initHtml(),o.default.Map.MapConfig.getInstance().initAsync("",!1,function(){t._map=new o.default.Map.MapView({renderer:s.default.svg()}),t._map._customInitAsync("history-map",function(){o.default.Control.TimelineLayers.getInstance().addTo(t._map._getMap())})}),i.open()});case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}],[{key:"getInstance",value:function(e){return t._instance||(t._instance=new t(e)),t._instance}}]),t}();n.default=c},{"../kq":729,"./TimelineLayers.js":691,"./Window":694,leaflet:473}],638:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=o(e("../kq")),i=o(e("./Window"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._layer=null,this._opacitySettingDialog=null,this._opacitySettingSlider=null,this._init()}var t,n;return r(e,[{key:"executeOpacitySetting",value:(t=regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=this)._layer=t,r._opacitySettingSlider.value(r._getOpacity()),i=parseInt($("#sidebar").css("width"))+20+"px",o=parseInt($("#sidebar").css("top"))+"px",r._opacitySettingDialog.setOptions({position:{top:o,left:i},title:a.default.Local.Control.layerOpacitySettingDialog.title()+"--"+n}),r._opacitySettingDialog.open();case 7:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e,t){return n.apply(this,arguments)})},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var e=a.default.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="layer-opacity-setting-dialog"><input id="layer-opacity-setting-slider"></div>'))}},{key:"_initUi",value:function(){this._initOpacitySettingDialog(),this._initOpacitySettingSlider()}},{key:"_initOpacitySettingDialog",value:function(){var e=this,t={width:"216px",height:"50px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+a.default.Common.CommonValues.mapContainerID},n=new i.default(e._getOpacitySettingDialogId(),t);n.initAsync(function(){e._opacitySettingDialog=n._object()})}},{key:"_initOpacitySettingSlider",value:function(){var t=this;t._opacitySettingSlider=$(t._getOpacitySettingSliderId()).kendoSlider({precision:1,smallStep:.1,largeStep:.1,min:0,max:1,tickPlacement:"none",value:0,change:function(e){t._setOpacity(e.value)}}).data("kendoSlider")}},{key:"_setOpacity",value:function(e){a.default.Control.Manager.getInstance().getControl("tree")._getMapLayerFromKey(this._layer).setOpacity(e)}},{key:"_getOpacity",value:function(){var e=a.default.Control.Manager.getInstance().getControl("tree")._getMapLayerFromKey(this._layer),t=parseFloat(e.getOpacity());return isNaN(t)?1:t}},{key:"_getOpacitySettingDialogId",value:function(){return"layer-opacity-setting-dialog"}},{key:"_getOpacitySettingSliderId",value:function(){return"#layer-opacity-setting-slider"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729,"./Window":694}],639:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),c=i(e("../kq")),l=i(e("./LegendQuery")),u=i(e("./LayerOpacitySettingDialog"));function i(e){return e&&e.__esModule?e:{default:e}}var h=e("leaflet"),o={hasMenu:!1,maxSelectedLayerNumber:20},a=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._checkedLayers=[],t._options=h.extend({},o),t._isLayerNumberLimit=!1,t._customFuns={},t._mapLayerManager=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,h.Evented),r(n,[{key:"clearSelectedLayers",value:function(){this.setCheckedLayers([])}},{key:"selectedLayers",value:function(e){this.setQueryLayersChecked(e)}},{key:"getMaxLayerSelectedNumber",value:function(){return this._options.maxSelectedLayerNumber}},{key:"setMaxLayerSelectedNumber",value:function(e){e&&"number"==typeof e&&0<e&&(this._options.maxSelectedLayerNumber=e)}},{key:"setOpacity",value:function(e,t){var n=c.default.Map.MapConfig.getInstance(),r=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e),i=r.sourceName,o=r.layerId,a=n.getLayerKey(n.findLayer(i,o));this._updateLayerGroup(this._mapLayerManager.resetSourceFromKey(a)),this._getMapLayerFromKey(a).setOpacity(t)}},{key:"prepareSideBySide",value:function(){for(var e=this._getSelectedLayerNodes(),t=0;t<e.length;t++)this._updateLayerGroup(this._mapLayerManager.resetSourceFromKey(e[t].key))}},{key:"_getSelectedLayerNodes",value:function(){for(var e=[],t=$(this._container).fancytree("getTree").getSelectedNodes(),n=0;n<t.length;++n)t[n].isFolder()||e.push(t[n]);return e}},{key:"_getNodesSourceNumber",value:function(e){for(var t={},n=0;n<e.length;++n){var r=this._mapLayerManager._getActualSourceNameFromKey(e[n].key);r in t||(t[r]=!0)}return Object.keys(t).length}},{key:"addToMapView",value:function(e){this.setMap(e._getMap())}},{key:"addTo",value:function(e){this.setMap(e)}},{key:"setMap",value:function(e){this._map=e,this._createTopPane(),this._refreshMap(),this._bindEvent()}},{key:"_createTopPane",value:function(){var e=c.default.Common.PaneZIndexManager.getInstance().getNextZIndex(),t="pane"+e;this._map.getPane(t)||(this._map.createPane(t),this._map.getPane(t).style.zIndex=e,this._map.getPane(t).style.pointerEvents="none",this._topPaneData={zIndex:e,layerKey:"",layerZIndex:""})}},{key:"createTree",value:function(e,t,n){var s=this;s._div=t,s._config=e,s._options=h.extend(s._options,n),s._initContainer();var r=2;n&&n.minExpandLevel&&(r=n.minExpandLevel),$(s._container).fancytree({selectMode:3,checkbox:!0,tooltip:!0,iconPath:c.default.Common.CommonValues.kqwebmapPath+"ftree/",imagePath:c.default.Common.CommonValues.kqwebmapPath+"ftree/",autoScroll:!0,minExpandLevel:r,source:s._getAllNodeData()}),n&&n.expandSelectedLayers&&s._expandSelectedNodes();var i=null;s._options.hasMenu&&(i=[{title:c.default.Local.Control.layerTree.menu.stick(),cmd:"stick",uiIcon:"ui-icon custom-icon-stick"},{title:c.default.Local.Control.layerTree.menu.clearStick(),cmd:"clearStick",uiIcon:"ui-icon custom-icon-clearStick"},{title:c.default.Local.Control.layerTree.menu.legend(),cmd:"legend",uiIcon:"ui-icon custom-icon-legend"},{title:c.default.Local.Control.layerTree.menu.opacity(),cmd:"opacity",uiIcon:"ui-icon custom-icon-transparency"},{title:c.default.Local.Control.layerTree.menu.zoomToLayer(),cmd:"zoomToLayer",uiIcon:"ui-icon custom-icon-zoomToLayer"},{title:c.default.Local.Control.layerTree.menu.clearAllSelected(),cmd:"clearAllSelected",uiIcon:"ui-icon custom-icon-clearall"}]),$(s._container).contextmenu({delegate:"span.fancytree-node",menu:i,select:function(e,t){var i=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"stick":s._customFuns.stick?s._customFuns.stick(i.key):s._stick(i.key);break;case"clearStick":s._customFuns.clearStick?s._customFuns.clearStick(i.key):s._clearStick();break;case"legend":s._customFuns.legend?s._customFuns.legend(i.key):l.default.getInstance().executeLegendQuery(i.key);break;case"opacity":s._customFuns.opacity?s._customFuns.opacity(i.key):(s._updateLayerGroup(s._mapLayerManager.resetSourceFromKey(i.key)),u.default.getInstance().executeOpacitySetting(i.key,i.title));break;case"zoomToLayer":if(s._customFuns.zoomToLayer)s._customFuns.zoomToLayer(i.key);else if(i.getParent().isRootNode()){c.default.Control.Manager.getInstance().getMapView().zoomToMap()}else{var n=i.data.layerExtent.split(" ");if(4==n.length){var r=s._map.options.crs,o=r.unproject(h.point(n[0],n[1])),a=r.unproject(h.point(n[2],n[3]));s._map.fitBounds(h.latLngBounds(a,o))}setTimeout(function(){for(var e=c.default.Map.MapConfig.getInstance().scales(),t=Number(i.data.minStandardScale),n=c.default.Control.Manager.getInstance().getMapView(),r=e.length-1;0<=r;--r)if(t>Number(e[r].__text)){n.zoom(r+1);break}},500)}break;case"clearAllSelected":s._customFuns.clearAllSelected?s._customFuns.clearAllSelected(i.key):$(s._container).fancytree("getTree").visit(function(e){e.isSelected()&&e.setSelected(!1)})}},beforeOpen:function(e,t){var i=$.ui.fancytree.getNode(t.target);$(s._container).contextmenu("enableEntry","stick",!i.isFolder()&&i.isSelected()),$(s._container).contextmenu("enableEntry","legend",function(){var e=s._mapLayerManager._getConfigLayerFromKey(i.key);if(e){var t=c.default.Map.MapConfig.getInstance(),n=t.getLayerProperty(e,"id");if(t.getLayerProperty(e,"map_src_name")||"0"===n)return!1;var r=t.getLayerIcon(e);if(!i.isFolder()&&"image.png"!==r)return!0}return!1}()),$(s._container).contextmenu("enableEntry","opacity",!i.isFolder()),i.setActive()}})}},{key:"setHorizontalScroll",value:function(){$("#"+this._div+" .ui-fancytree").css("overflow-x","auto")}},{key:"layerCount",value:function(){var t=0;return $(this._container).fancytree("getTree").visit(function(e){e.isFolder()||++t}),t}},{key:"_stick",value:function(e){var t=this;if(t._topPaneData.layerKey!==e){t._clearStick(),t._updateLayerGroup(t._mapLayerManager.resetSourceFromKey(e));var n=t._getMapLayerFromKey(e);t._topPaneData.layerKey=e,t._topPaneData.layerZIndex=n._source._overlay._zIndex,t._resetLayerZIndex(n,t._topPaneData.zIndex),t._setNodeTitleColor(t._getNodeFromKey(e),"red")}}},{key:"_clearStick",value:function(){var e=this._topPaneData.layerKey;if(e){var t=this._getMapLayerFromKey(e);this._resetLayerZIndex(t,this._topPaneData.layerZIndex),this._topPaneData.layerZIndex="",this._topPaneData.layerKey="",this._setNodeTitleColor(this._getNodeFromKey(e),"black")}}},{key:"_setNodeTitleColor",value:function(e,t){$(e.span).find(".fancytree-title").css("color",t)}},{key:"_getNodeFromKey",value:function(e){return $(this._container).fancytree("getTree").getNodeByKey(e)}},{key:"_resetLayerZIndex",value:function(e,t){this.layerGroup.hasLayer(e)?(this.layerGroup.removeLayer(e),e._source._overlay._zIndex=t,this.layerGroup.addLayer(e)):e._source._overlay._zIndex=t}},{key:"getActiveNode",value:function(){return $(this._container).fancytree("getTree").getActiveNode()}},{key:"getNodeByLabel",value:function(t){var n=void 0;return $(this._container).fancytree("getTree").visit(function(e){e.title==t&&(n=e)}),n}},{key:"getActiveLayerKey",value:function(){var e=$(this._container).fancytree("getTree").getActiveNode();return e?e.key:""}},{key:"_initContainer",value:function(){this._container=h.DomUtil.get(this._div),this._container||(this._container=h.DomUtil.create("div"))}},{key:"getCheckedLayers",value:function(){var r=this;return r._checkedLayers=[],$(r._container).fancytree("getTree").visit(function(e){if(!e.isFolder()&&e.selected){var t=e.key,n=r._getSourceNameLayerIdFromKey(t);n.originSourceName=r.getOriginSourceNameFromKey(t),r._checkedLayers.push(n)}}),r._checkedLayers}},{key:"setCheckedLayers",value:function(e){for(var t={},n=0;n<e.length;++n){var r=e[n],i=this._getKeyFromSourceNameLayerId(r.sourceName,r.layerId);t[i]=i}$(this._container).fancytree("getTree").visit(function(e){e.isFolder()||e.setSelected(t.hasOwnProperty(e.key))})}},{key:"unselectedLayers",value:function(e){for(var l=this,u={},t=0;t<e.length;++t){var n=e[t],r=l._getKeyFromSourceNameLayerId(n.sourceName,n.layerId);u[r]=r}$(l._container).fancytree("getTree").visit(function(e){if(!e.isFolder()&&e.isSelected()){var t=l._getSourceNameLayerIdFromKey(e.key),n=t.sourceName,r=t.layerId,i=c.default.Map.MapConfig.getInstance(),o=i.getSourceByName(n),a=i.getOriginSourceName(o),s=l._getKeyFromSourceNameLayerId(a,r);u.hasOwnProperty(s)&&e.setSelected(!1)}})}},{key:"addCheckedLayer",value:function(t){$(this._container).fancytree("getTree").visit(function(e){e.key===t.key&&e.setSelected(t.selected)})}},{key:"activeNode",value:function(e){return $(this._container).fancytree("getTree").activateKey(e)}},{key:"moveLayerToTop",value:function(e){this._stick(e)}},{key:"setLayerOpacity",value:function(e,t){this._updateLayerGroup(this._mapLayerManager.resetSourceFromKey(e)),u.default.getInstance().executeOpacitySetting(e,t)}},{key:"clearTopLayer",value:function(){this._clearStick()}},{key:"setQueryLayersChecked",value:function(e){for(var l=this,u={},t=0;t<e.length;++t){var n=e[t],r=l._getKeyFromSourceNameLayerId(n.sourceName,n.layerId);u[r]=r}return l._isLayerNumberLimit=!1,$(l._container).fancytree("getTree").visit(function(e){if(l._isLayerNumberLimit)return!1;if(!e.isFolder()&&!e.isSelected()){var t=l._getSourceNameLayerIdFromKey(e.key),n=t.sourceName,r=t.layerId,i=c.default.Map.MapConfig.getInstance(),o=i.getSourceByName(n),a=i.getOriginSourceName(o),s=l._getKeyFromSourceNameLayerId(a,r);e.setSelected(u.hasOwnProperty(s))}}),!l._isLayerNumberLimit}},{key:"_bindEvent",value:function(){var n=this;$(n._container).off("fancytreeselect"),$(n._container).off("fancytreebeforeselect"),$(n._container).off("fancytreeclick"),$(n._container).off("fancytreeactivate"),$(n._container).on("fancytreeselect",n._onFancyTreeSelect.bind(n)),$(n._container).on("fancytreebeforeselect",n._onFancyTreeBeforeSelect.bind(n)),$(n._container).on("fancytreeclick",function(e,t){n.fire("click",{event:e,data:t})}),$(n._container).on("fancytreeactivate",function(e,t){n.fire("activate",{event:e,data:t})})}},{key:"_onFancyTreeSelect",value:function(e,t){var n=t.node;this._refreshMap(),this.fire("select",{key:n.key,selected:n.selected}),n.selected?(this._map.fire("checkedLayer",{key:n.key}),n.setActive(!0)):this._map.fire("uncheckedLayer",{key:n.key})}},{key:"_onFancyTreeBeforeSelect",value:function(e,t){for(var n={},r=t.node.selected,i=0;i<this._checkedLayers.length;++i){var o=this._checkedLayers[i],a=this._getKeyFromSourceNameLayerId(o.sourceName,o.layerId);n[a]=!0}t.node.visit(function(e){e.isFolder()||(n[e.key]=!r)},!0);var s=0;for(var l in n)n[l]&&(s+=1);return!(s>this._options.maxSelectedLayerNumber)||(this._isLayerNumberLimit=!0,c.default.Control.Notification.getInstance().showInfo(c.default.Local.Control.layerTree.notification.layerOverLimit()+this._options.maxSelectedLayerNumber+" !"),!1)}},{key:"getOriginSourceNameFromKey",value:function(e){var t=this._getSourceNameLayerIdFromKey(e),n=this._config.getSourceByName(t.sourceName);return this._config.getOriginSourceName(n)}},{key:"setContextmenuCustomFunction",value:function(e){this._customFuns=e}},{key:"_refreshMap",value:function(){var i=this,o=[];i._checkedLayers=[],$(i._container).fancytree("getTree").visit(function(e){if(!e.isFolder()){var t=e.key,n=i._getMapLayerFromKey(t);if(e.selected){var r=i._getSourceNameLayerIdFromKey(t);r.originSourceName=i.getOriginSourceNameFromKey(t),i._checkedLayers.push(r)}n&&o.unshift({layer:n,checked:e.selected})}}),i._updateLayerGroup(o)}},{key:"_updateLayerGroup",value:function(e){if(e){this.layerGroup||(this.layerGroup=h.layerGroup([]),this.layerGroup.desc="_treeLayerGroup",this._map?this._map.addLayer(this.layerGroup):console.log("map is null can't loading map!"));for(var t=0;t<e.length;t++){var n=e[t];n.checked?this.layerGroup.addLayer(n.layer):this.layerGroup.removeLayer(n.layer)}}}},{key:"_getAllNodeData",value:function(){for(var e=[],t=this._config.layers(),n=0;n<t.length;++n)this._config.isLayerHasPermission(t[n])&&(this._config.isLayerGroup(t[n])?e.push(this._getNodeGroupData(t[n])):e.push(this._getNodeData(t[n])));return this._config.isHideTreeLabel()?e:[].concat({title:this._config.treeLabel(),icon:this._config.treeIcon(),children:e,folder:!0})}},{key:"_getNodeGroupData",value:function(e){for(var t=[],n=this._config.getLayerSubLayer(e),r=0;r<n.length;++r)this._config.isLayerHasPermission(n[r])&&(this._config.isLayerGroup(n[r])?t.push(this._getNodeGroupData(n[r])):t.push(this._getNodeData(n[r])));return{title:this._config.getLayerLabel(e),children:t,folder:!0,icon:this._config.getLayerIcon(e),layerExtent:this._config.getLayerProperty(e,"layer_extent"),minStandardScale:this._config.getLayerProperty(e,"min_standard_scale")}}},{key:"_getNodeData",value:function(e){return{folder:!1,title:this._config.getLayerLabel(e),key:this._config.getLayerKey(e),icon:this._config.getLayerIcon(e),selected:this._config.isLayerVisible(e),layerExtent:this._config.getLayerProperty(e,"layer_extent"),minStandardScale:this._config.getLayerProperty(e,"min_standard_scale")}}},{key:"_getKeyFromSourceNameLayerId",value:function(e,t){return c.default.Map.MapCommon.getKeyFromSourceNameLayerId(e,t)}},{key:"_getSourceNameLayerIdFromKey",value:function(e){return c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e)}},{key:"_getMapLayerFromKey",value:function(e){return null===this._mapLayerManager&&(this._mapLayerManager=c.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.getLayerFromKey(e)}},{key:"appendLayer",value:function(e,t){$(this._container).fancytree("getTree").getRootNode().getFirstChild().addNode({folder:!1,title:t.title,key:e.name+"@@"+t.id,icon:t.icon+".png",layerExtent:t.extent,tooltip:t.tooltip}),null===this._mapLayerManager&&(this._mapLayerManager=c.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.appendLayer(e,t)}},{key:"_expandSelectedNodes",value:function(){for(var e=this._getSelectedLayerNodes(),t=0;t<e.length;++t)for(var n=e[t].getParent();null!=n&&!n.isExpanded();)n.setExpanded(),n=n.getParent()}},{key:"getSource",value:function(){return $(this._container).fancytree("getTree").options.source}}]),n}();n.default=a},{"../kq":729,"./LayerOpacitySettingDialog":638,"./LegendQuery":640,leaflet:473}],640:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=r(e("../kq")),o=r(e("./LegendQueryResultDialog"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return i(e,[{key:"executeLegendQuery",value:(r=a(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,n._getQueryData(t);case 3:r=e.sent,l.default.Query.QueryIDManager.isDataArrayCanceled(r)?console.log("query canceled, data come!"):0===r.length?l.default.Control.Notification.getInstance().showError(l.default.Local.Control.legendQuery.legendEmpty()):(i=n._organizeQueryData(r),o.default.getInstance().open(i));case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_getQueryData",value:(n=a(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=(n=this)._getQueryOptions(t))return e.prev=4,l.default.Control.Waiting.show(l.default.Control.Manager.getInstance()._getMap()),e.next=8,n._queryData(i);e.next=17;break;case 8:r=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),l.default.Control.Waiting.close();case 14:return e.prev=14,l.default.Control.Waiting.close(),e.finish(14);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[4,11,14,17]])})),function(e){return n.apply(this,arguments)})},{key:"_organizeQueryData",value:function(e){for(var t={},n=0;n<e.length;++n){t[e[n].name]=this._getLegends(e[n].legend)}return t}},{key:"_getLegends",value:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n].label,i=r,o="data:image/png;base64,"+e[n].imageData,a=r.lastIndexOf("("),s=r.lastIndexOf(")");if(-1<a&&-1<s)i="1"==l.default.Map.MapConfig.getInstance().legendLabelMode()?(r=r.slice(0,a),i.slice(a+1,s)):(r=r.slice(a+1,s),i.slice(0,a));"default"!==r&&"默认"!==r||("cn"===l.default.Local.getCurrentLanguage()?(r="默认",i="default"):"en"===l.default.Local.getCurrentLanguage()&&(i=r="default")),t.push({label:r,legend:o,tooltip:i})}return t}},{key:"_getQueryOptions",value:function(e){var t=l.default.Map.MapCommon.getSourceNameLayerIdFromKey(e),n=t.sourceName,r=t.layerId;return n&&r?{url:this._getQueryUrl(n),layerId:r}:null}},{key:"_getQueryUrl",value:function(e){var t=this._getSourceByName(e);return l.default.Map.MapConfig.getInstance().getSourceUrl(t)}},{key:"_getSourceByName",value:function(e){return l.default.Map.MapConfig.getInstance().getSourceByName(e)}},{key:"_queryData",value:(t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.default.Query.LegendQuery.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729,"./LegendQueryResultDialog":641}],641:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../kq"),a=(r=i)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._sideBar=null,this._iconListView=null,this._isFirstOpen=!0}var t,n,r,i;return o(e,[{key:"open",value:(i=s(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r=null,(n=this)._isFirstOpen)return n._isFirstOpen=!1,e.next=7,n._init();e.next=7;break;case 7:for(o in t)i=t[r=o];$("#legend-side-bar").append($(".leaflet-sidebar-s a").remove()),$("#legend-side-bar").parent().css("z-index","9999"),$("#legend-side-bar-header .title").html(r),n._iconListView.setDataSource(new kendo.data.DataSource({data:i})),n._sideBar.show();case 13:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_init",value:(r=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initUi();case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_initUi",value:(n=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initSideBar();case 3:t._initIconListView();case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initSideBar",value:(t=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._sideBar=new a.default.Control.SimpleSidebar({id:"legend-side-bar",fileName:"legendsidebar.html"}),e.next=4,t._sideBar.initAsync();case 4:t._sideBar.addTo(a.default.Control.Manager.getInstance()._getMap());case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initIconListView",value:function(){var t=this;t._iconListView=$(t._getIconListViewId()).kendoListView({template:kendo.template('<div class="legend"><img src="#= legend #" alt="#= label #" /><p>#:label#</p></div>')}).data("kendoListView"),$(t._getIconListViewId()).kendoTooltip({width:120,filter:"p",position:"top",showAfter:a.default.Common.CommonValues.showAfterInMsec,content:function(e){return t._iconListView.dataItem(e.target).tooltip}}).data("kendoTooltip")}},{key:"_getIconListViewId",value:function(){return"#legend-query-legend-list"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../kq":729}],642:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("../kq")),o=a(e("./Window"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._dialog=null;var e=i.default.Control.Manager.getInstance()._getMap();this._currentCoord=e.getCenter(),this._init()}return r(t,[{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var e=i.default.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="location-dialog"><div id="wgs84_btn"></div><div id="target_btn"></div><input id="coordinate_text" /><br><button id="location_btn" type="button">'+i.default.Local.Control.locationDialog.location()+"</button></div>"))}},{key:"_coordinateToText",value:function(e){return this._btn1.checked()?e.lng.toFixed(4)+" "+e.lat.toFixed(4):(e=i.default.Control.Manager.getInstance()._getMap().options.crs.project(e)).x.toFixed(4)+" "+e.y.toFixed(4)}},{key:"_textToCoordinate",value:function(e){if(2==(e=e.split(/[,]|\s+/)).length)return this._btn1.checked()?L.latLng(e[1],e[0]):i.default.Control.Manager.getInstance()._getMap().options.crs.unproject(L.point(e[0],e[1]))}},{key:"_initUi",value:function(){var r=this;r._mark=L.marker(),r._initDialog(),r._btn1=new i.default.ui.RadioButton("wgs84_btn",{label:"WGS84",name:"coordinate_type",checked:!0}),r._btn2=new i.default.ui.RadioButton("target_btn",{label:i.default.Local.Control.locationDialog.targetProjection(),name:"coordinate_type"}),r._coordinate=new i.default.ui.MaskedTextBox("coordinate_text",{value:r._coordinateToText(r._currentCoord)}),$("#wgs84_btn").on("click",function(){r._coordinate.value(r._coordinateToText(r._currentCoord))}),$("#target_btn").on("click",function(){r._coordinate.value(r._coordinateToText(r._currentCoord))}),r._location_btn=new i.default.ui.Button("location_btn",{click:function(){try{var e=i.default.Control.Manager.getInstance()._getMap(),t=e.getZoom(),n=r._textToCoordinate(r._coordinate.value());e.setView(n,t),r._mark.setLatLng(n).addTo(e),r._currentCoord=n}catch(e){i.default.Control.Notification.getInstance().showError(i.default.Local.Control.locationDialog.locationFailed())}}})}},{key:"_initDialog",value:function(){var t=this,e={width:"240px",height:"130px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+i.default.Common.CommonValues.mapContainerID,close:function(e){i.default.Control.Manager.getInstance()._getMap().removeLayer(t._mark)}},n=new o.default(t._getDialogId(),e);n.initAsync(function(){t._dialog=n._object()})}},{key:"_getDialogId",value:function(){return"location-dialog"}},{key:"open",value:function(){var e=parseInt($("#sidebar").css("width"))+20+"px";this._dialog.setOptions({position:{top:"10px",left:e},title:i.default.Local.Control.setlocation.title()}),this._dialog.open()}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":729,"./Window":694}],643:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),We=i(e("../kq")),Qe=i(e("leaflet"));function i(e){return e&&e.__esModule?e:{default:e}}function Ke(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._controls=new Map,this._mapview=null}var n;return r(t,[{key:"addToAcync",value:(n=Ke(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this,r=t._getMap(),n._mapview=t,i=We.default.Map.MapConfig.getInstance(),o=i.controls(),a=0;case 6:if(!(a<o.length)){e.next=22;break}if(s=o[a],l=i.getControlType(s),u=n.getControl(l)){e.next=12;break}return e.abrupt("continue",19);case 12:if("compare"===l)return e.next=15,u.initAsync();e.next=18;break;case 15:u.addTo(r),e.next=19;break;case 18:"zoom"===l?(u.addTo(r),r.zoomControl=u,(c="1"===(c=i.getControlProperty(s,"fullscreen"))||"true"===c)&&n.getControl("fullscreen").addTo(r),u.getContainer().setAttribute("id","zoom-buttonbar")):"styleeditor"===l?(u.addTo(r),$(".leaflet-control-styleeditor-interior").append('<i class="icon iconfont icon-edit"></i>')):"basemap"===l?(u.addTo(r),$(".leaflet-control-layers-toggle").attr("class","leaflet-control-layers-toggle icon iconfont icon-layers-line")):"timelineLayers"===l?(u.addTo(r),$(".leaflet-control-layers-toggle").attr("class","leaflet-control-layers-toggle icon iconfont icon-layers-line")):u.addTo(r);case 19:a++,e.next=6;break;case 22:(h=n.getControl("tree"))&&h.addTo(r),(f=n.getControl("draw"))&&(f.addTo(r),f._hide()),(d=this.getControl("styleeditor"))&&($(d._container).hide(),d._container.setAttribute("id","kq-styleeditor")),h&&h.on("select",function(){this._mapview._getMap().fire("layerSelect")},this),n._customHideControls();case 30:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getControls",value:function(){return t._instance._controls}},{key:"getControl",value:function(e){return t._instance._controls.get(e)}},{key:"getMapView",value:function(){return t._instance._mapview}},{key:"_getMap",value:function(){return t._instance._mapview?t._instance._mapview._getMap():null}},{key:"_toggleDrawPane",value:function(){var e=this.getControl("draw");e&&e._toggle(500);var t=this.getControl("styleeditor");t&&$(t._container).toggle(500)}},{key:"_unselectAllControlsExcept",value:function(e){if("toolbar"!==e){var t=this.getControl("toolbar");t&&t._unselect()}var n=this.getControl("draw");if("draw"!==e&&n&&n._unselectDraw(),"styleeditor"!==e&&n&&n._unselectStyleEditor(),"sidebyside"!==e){var r=this.getControl("sidebyside");r&&r._stop(r)}if("searchlight"!==e){var i=this.getControl("searchlight");i&&i._stop(i)}if("measure"!==e){var o=this.getControl("measure");o&&o.measure._finishMeasure()}if("measureseparate"!==e){var a=this.getControl("measureseparate");a&&a.disable()}if("plotting"!==e){var s=this.getControl("plotting");s&&(s.stopDraw(),s._stop())}}},{key:"_customHideControls",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=We.default.Map.MapConfig.getInstance();if(e||t.isControlsCustom())for(var n=["#kq-toolbar","#zoom-buttonbar","#compare-buttonbar","#searchlight-buttonbar","#sidebyside-buttonbar","#screenshot-buttonbar","#print-buttonbar","#measureseparate-buttonbar","#setlocation-buttonbar",".leaflet-control-attribution",".leaflet-control-layers"],r=0;r<n.length;r++){var i=$(n[r]);0<i.length&&(i.css("position","absolute"),i.css("left",1e5))}}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t,t._init(t._instance)),t._instance}},{key:"_init",value:function(Ge){var $e=this,Ve=We.default.Map.MapConfig.getInstance();We.default.Control.Notification._insertNotificationHtml();var He=!1;if(Ve.controls().forEach(function(e){var t=Ve.getControlType(e),n=null;if(Ve.isControlHasPermission(e)){if("tree"===t){var r=Ve.getControlPosition(e),i=Ve.getTreeSelectMaxCount();r=r||"topleft",n=new We.default.Control.MapLayerTree(Ve,{position:r,maxSelectedLayerNumber:i})}else if("zoom"===t){var o=Ve.getControlPosition(e),a=Ve.getControlProperty(e,"fullscreen");if(o=o||"topright",n=Qe.default.control.zoom({position:o,zoomInTitle:We.default.Local.Control.zoom.zoomInTitle(),zoomOutTitle:We.default.Local.Control.zoom.zoomOutTitle()}),a="1"===a||"true"===a){var s=We.default.Local.Control.fullscreen,l=Qe.default.control.fullscreen({position:o,title:s.title(),titleCancel:s.titleCancel(),content:null,forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1});Ge._controls.set("fullscreen",l)}}else if("zoomslider"===t){var u=Ve.getControlPosition(e);u=u||"topleft",n=new Qe.default.Control.Zoomslider({position:u,zoomInTitle:We.default.Local.Control.zoom.zoomInTitle(),zoomOutTitle:We.default.Local.Control.zoom.zoomOutTitle(),stepHeight:8,knobHeight:6})}else if("attribution"===t){var c=Ve.getControlPosition(e),h=Ve.getControlProperty(e,"tooltip"),f=Ve.getControlProperty(e,"url"),d=Ve.getControlProperty(e,"label"),p=Ve.getControlProperty(e,"img"),m=Ve.getControlProperty(e,"imgWidth"),g=Ve.getControlProperty(e,"imgHeight");c=c||"bottomright",h=h||"苍穹数码",f=f||"http://www.kanq.com.cn",d=d||"Kanq",p=p||We.default.Common.CommonValues.kqwebmapPath+"images/logo.png",m=m||24,g=g||36,n=Qe.default.control.condensedAttribution({emblem:'<div class="emblem-wrap" style="width: '+m+"px; height: "+g+'px"><img src='+p+"></div>",prefix:"<a href="+f+" title="+h+' target="_blank">'+d+"</a>",position:c})}else if("coordinates"===t){var y=Ve.getControlPosition(e),_=Ve.getControlProperty(e,"decimals"),v=Ve.getControlProperty(e,"label_x"),b=Ve.getControlProperty(e,"label_y"),w=Ve.getControlProperty(e,"is_project"),x=Ve.getControlProperty(e,"is_show_scale_index"),k=Ve.getControlProperty(e,"label_scale");y=y||"bottomleft",_=_||2,v=v||"Lng",b=b||"Lat",w="1"===w,x="1"===x,k=k||"Scale",n=new We.default.Control.Coordinates({position:y,decimals:_,label_x:v,label_y:b,enableUserInput:!1,isProject:w,isShowScaleIndex:x,label_scale:k})}else if("scale"===t){var L=Ve.getControlPosition(e),C=Ve.getControlProperty(e,"fill"),S=Ve.getControlProperty(e,"doubleLine"),M=Ve.getControlProperty(e,"showSubunits"),P=Ve.getControlProperty(e,"labelPlacement");L=L||"bottomleft",C=C||"hollow",S=S||!1,M=M||!0,P=P||"auto",n=new We.default.Control.Scale({position:L,fill:C,doubleLine:S,showSubunits:M,labelPlacement:P})}else if("buildersearchbar"===t)new We.default.Builder.BuilderUi.BuilderSearchBar;else if("input"===t){var E=Ve.getControlPosition(e),T=Ve.getControlProperty(e,"width"),I=Ve.getControlProperty(e,"icon");E=E||"topleft",T=T||"200px",I=I||"search",n=new We.default.Control.MapInput({position:E,width:T,icon:I})}else if("measure"===t){var O=Ve.getControlPosition(e);O=O||"topleft",n=new We.default.Control.Measure({position:O})}else if("measureseparate"===t){var D=Ve.getControlPosition(e);D=D||"topleft",n=new We.default.Control.MeasureSeparate({position:D})}else if("zoominput"===t){var N=Ve.getControlPosition(e);N=N||"topleft",n=new We.default.Control.ZoomInput({position:N})}else if("setlocation"===t){var A=Ve.getControlPosition(e);A=A||"topright",n=new We.default.Control.SetLocation({position:A})}else if("panorama"===t){var j=Ve.getControlPosition(e);j=j||"topright",n=new We.default.Control.Panorama({position:j})}else if("plotting"===t){var R=Ve.getControlPosition(e);R=R||"topleft",n=new We.default.Control.Plotting({position:R})}else if("searchbar"===t){var B=Ve.getControlPosition(e);B=B||"topleft",n=new We.default.Control.SearchBar({position:B})}else if("draw"===t){var F=Ve.getControlPosition(e),z=Ve.getControlProperty(e,"import_export");F=F||"topleft",z=z||"1";var q=Qe.default.extend({},{position:F,importExport:z},Ve.getDrawOption());n=new We.default.Control.Draw(q),He=!0}else if("styleeditor"===t){var U=Ve.getControlPosition(e),G=Ve.getControlProperty(e,"is_use_marker_icon");U=U||"topleft",G="0"!==G,n=Qe.default.control.styleEditor({position:U,useGrouping:!1,tooltipCallback:function(e){We.default.Control.Notification.getInstance().showInfo(Qe.default.styleEditorLocal.tooltip+"!")},errorCallback:function(e){We.default.Control.Notification.getInstance().showError(e)},bufferCallback:We.default.Query.BufferAnalysis.getInstance()._bufferCallback,is_use_marker_icon:G})}else if("compare"===t){var V=Ve.getControlPosition(e),H=Number(Ve.getControlProperty(e,"max_selected_number")),W=[],Q=Ve.getControlProperty(e,"checked_layers");if(Q){Q=Q.split("##");for(var K=0;K<Q.length;++K)W.push(We.default.Map.MapCommon.getSourceNameLayerIdFromKey(Q[K]))}var Z=Ve.getControlProperty(e,"is_show_cursor"),J=Ve.getControlProperty(e,"cursor_opacity"),X=Ve.getControlProperty(e,"cursor_color"),Y=Ve.getControlProperty(e,"cursor_radius"),ee=Ve.getControlProperty(e,"is_enable_2win"),te=Ve.getControlProperty(e,"is_enable_3win"),ne=Ve.getControlProperty(e,"is_enable_4win"),re=Ve.getControlProperty(e,"is_enable_5win"),ie=Ve.getControlProperty(e,"is_enable_6win");V=V||"topleft",Z="0"!==Z,J=J||.5,X=X||"#dc2027",Y=Y||20,ee="0"!==ee,te="1"===te,ne="0"!==ne,re="1"===re,ie="1"===ie,n=new We.default.Control.Compare({position:V,maxSelectedNumber:H,selectedLayers:W,isShowCursor:Z,cursorOpacity:J,cursorColor:X,cursorRadius:Y,isEnable2Win:ee,isEnable3Win:te,isEnable4Win:ne,isEnable5Win:re,isEnable6Win:ie})}else if("sidebyside"===t){var oe=Ve.getControlPosition(e);oe=oe||"topleft",n=new We.default.Control.SideBySide({position:oe})}else if("searchlight"===t){var ae=Ve.getControlPosition(e),se=Ve.getControlProperty(e,"light_size");ae=ae||"topleft",se=se?Number(se):256,n=new We.default.Control.MapSearchLight({position:ae,light_size:se})}else if("screenshot"===t){var le=Ve.getControlPosition(e);le=le||"topleft",n=new We.default.Control.ScreenShot({position:le})}else if("basemap"===t){console.log("basemap!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");var ue=Ve.getControlPosition(e),ce=Ve.getControlProperty(e,"visible"),he=Ve.getSubControls(e);ue=ue||"topleft",ce="1"===ce,n=new We.default.Control.MapBaseLayer(ue,ce);for(var fe=0;fe<he.length;fe++){var de=he[fe],pe=Ve.getControlProperty(de,"name"),me=Ve.getControlProperty(de,"maptype"),ge=Ve.getControlProperty(de,"subtype"),ye=Ve.getControlProperty(de,"is_selected"),_e=Ve.getControlProperty(de,"key");ye="1"===ye,n.addSubLayer(pe,me,ge,ye,_e)}}else if("print"===t){var ve=Ve.getControlPosition(e);ve=ve||"topleft",(n=new We.default.Control.MapPrint.getInstance({position:ve})).initAsync()}else if("historyview"===t){var be=Ve.getControlPosition(e);be=be||"topleft",(n=new We.default.Control.HistoryView.getInstance({position:be})).initAsync()}else if("timelineLayers"===t){var we=Ve.getControlPosition(e);we=we||"bottomright"}else if("mini"===t){var xe=Ve.getControlPosition(e),ke=Ve.getControlProperty(e,"basemap"),Le=Ve.getControlProperty(e,"basemaptype"),Ce=Ve.getControlProperty(e,"minimized");xe=xe||"bottomright",Le=Le||"vector",Ce="1"===Ce;var Se=We.default.Map.MapLayerManager.getInstance().getMiniLayers(),Me=[];ke&&(Me=We.default.Control.MapBaseLayer.getLayers(ke,Le));var Pe=Qe.default.layerGroup(Me.concat(Se));n=new Qe.default.Control.MiniMap(Pe,{position:xe,aimingRectOptions:{color:"#64a0dc",weight:1,clickable:!1},toggleDisplay:!0,minimized:Ce,strings:{hideText:We.default.Local.Control.mini.hideText(),showText:We.default.Local.Control.mini.showText()}})}else if("toolbar"===t){var Ee=[],Te=Ve.getSubControls(e),Ie=Ve.getControlPosition(e);Ie=Ie||"topright";for(var Oe=0;Oe<Te.length;++Oe)if(Ve.isControlHasPermission(Te[Oe])){var De=Ve.getControlProperty(Te[Oe],"type"),Ne=Ve.getControlProperty(Te[Oe],"icon"),Ae=Ve.getControlProperty(Te[Oe],"tips"),je={};if(Ne&&(je.icon=Ne),Ae&&(je.tips=Ae),"rubber-band"===De){var Re=Ve.getRubberBandOption();$.isEmptyObject(Re)||(je=Qe.default.extend(je,Re))}Ee.push({type:De,options:je})}0<Ee.length&&(n=new We.default.Control.ToolBar({position:Ie,subControls:Ee}))}else if("sidebar"===t){var Be=Ve.getControlPosition(e),Fe=Ve.getControlProperty(e,"init_open_id");Be="left"===Be||"right"===Be?Be:"left",Fe=Fe||"",n=new We.default.Control.Sidebar({position:Be,init_open_id:Fe,id:"sidebar"}),$e._addSubControlsToSidebar(Ve,e,Ge,n)}else if("sidebar-left"===t){var ze=Ve.getControlProperty(e,"init_open_id");ze=ze||"",n=new We.default.Control.Sidebar({position:"left",init_open_id:ze,id:"sidebar-left"}),$e._addSubControlsToSidebar(Ve,e,Ge,n)}else if("sidebar-right"===t){var qe=Ve.getControlProperty(e,"init_open_id");qe=qe||"",n=new We.default.Control.Sidebar({position:"right",init_open_id:qe,id:"sidebar-right"}),$e._addSubControlsToSidebar(Ve,e,Ge,n)}else if("mainmenu"===t)setTimeout(Ke(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=We.default.Local.getCurrentLanguage(),n="","en"===t)return e.next=5,We.default.Common.NetworkTools.httpGetAsync(We.default.Common.CommonValues.configFilePath+"../../custom/custommenu_en.html");e.next=8;break;case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,We.default.Common.NetworkTools.httpGetAsync(We.default.Common.CommonValues.configFilePath+"../../custom/custommenu.html");case 10:n=e.sent;case 11:if("error"===n)return console.log("load mainmenu_html error!"),e.abrupt("return",!1);e.next=14;break;case 14:console.log("load mainmenu_html successfully！"),r=We.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("mainmenu_html.initAsync: mapdiv was not found!"),i.append(n);case 19:case"end":return e.stop()}},e,this)})),1e3);else if("drawmenu"===t){var Ue=new We.default.Control.DrawMenu({});Ge._controls.set("drawmenu",Ue)}}else;n&&Ge._controls.set(t,n)}),!He&&"1"!==Ve._object.config.map._nodraw){var e="topleft",t="1";e=e||"topleft",t=t||"1";var n=Qe.default.extend({},{position:e,importExport:t},Ve.getDrawOption()),r=new We.default.Control.Draw(n);Ge._controls.set("draw",r)}}},{key:"_addTreeControlToSidebar",value:function(e,t,n,r){var i=e.getSubControl(t,"tree");if(i&&e.isControlHasPermission(i)){var o=e.getControlProperty(i,"id"),a=e.getTreeSelectMaxCount(),s=e._minExpandLevel(),l=e._expandSelectedLayers(),u=new We.default.Control.LayerTree;u.createTree(e,o,{hasMenu:!0,maxSelectedLayerNumber:a,minExpandLevel:s,expandSelectedLayers:l}),n._controls.set("tree",u)}else r.removeTab("tab_layers")}},{key:"_addAdvancedControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"advanced");i&&n.isControlHasPermission(i)?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.AdvancedSearch(n,e);r._controls.set("advancedSearch",t)}):t.removeTab("tab_advanced")}},{key:"_addOverlayControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"overlay");i&&n.isControlHasPermission(i)?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.OverlayAnalysis(e);r._controls.set("overlayAnalysis",t)}):t.removeTab("tab_overlay")}},{key:"_addDifferenceControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"difference");i&&n.isControlHasPermission(i)?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.DifferenceAnalysis(e);r._controls.set("differenceAnalysis",t)}):t.removeTab("tab_difference")}},{key:"_addFeatureControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"featureImport"),o=n.getControlProperty(i,"is_add");i&&n.isControlHasPermission(i)&&"1"===o?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.FeatureImport(n,e);r._controls.set("feature",t)}):t.removeTab("tab_featureImport")}},{key:"_addHistoryCompareControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"historyCompare");i&&n.isControlHasPermission(i)?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.HistoryCompare(e);r._controls.set("historyCompare",t)}):t.removeTab("tab_historyCompare")}},{key:"_addBookmarkControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"bookmark");i&&n.isControlHasPermission(i)?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.Bookmark(e);r._controls.set("bookmark",t)}):t.removeTab("tab_bookmark")}},{key:"_addSettingControlToSidebar",value:function(n,e,r,t){var i=n.getSubControl(e,"setting");i&&n.isControlHasPermission(i)?We.default.Common.CommonTools._loadKendoAndRun(function(){var e=n.getControlProperty(i,"id"),t=new We.default.Control.Setting(e);r._controls.set("setting",t)}):t.removeTab("tab_setting")}},{key:"_addSubControlsToSidebar",value:function(e,t,n,r){this._addTreeControlToSidebar(e,t,n,r),this._addAdvancedControlToSidebar(e,t,n,r),this._addOverlayControlToSidebar(e,t,n,r),this._addDifferenceControlToSidebar(e,t,n,r),this._addFeatureControlToSidebar(e,t,n,r),this._addHistoryCompareControlToSidebar(e,t,n,r),this._addBookmarkControlToSidebar(e,t,n,r),this._addSettingControlToSidebar(e,t,n,r)}}]),t}();n.default=o},{"../kq":729,leaflet:473}],644:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var g={pane:"basemapPane"},a=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.position=e,this.visible=t,this.init_selected_layergroup=null,this.baseLayers={},this.overlays={};var n=L.layerGroup();n.desc="baselayer_noneLayerGroup",this.baseLayers[s.default.Local.Control.basemap.layerTypeNode()]=n,this.init_selected_layergroup=n}return i(r,null,[{key:"getLayers",value:function(e,t,n){return"osm"===e?this._getOSM(t):"gaode"===e?this._getGaode(t):"tianditu"===e?this._getTianditu(t,n):"google"===e?this._getGoogle(t):"googleen"===e?this._getGoogleEn(t):"geoq"===e?this._getGeoq(t):"baidu"===e?this._getBaidu(t):"custom-tms"===e?this._getTMS(t):[]}}]),i(r,[{key:"addSubLayer",value:function(e,t,n,r,i){var o=s.default.Control.MapBaseLayer.getLayers(t,n,i),a=L.layerGroup(o);"realtime"===n?this.overlays[e]=a:0<o.length&&(this.baseLayers[e]=a,r&&(this.init_selected_layergroup=a))}},{key:"addTo",value:function(e){this.init_selected_layergroup&&(this.init_selected_layergroup.getLayers().forEach(function(e){e.pane="basemapPane"}),this.init_selected_layergroup.setZIndex(-1),this.init_selected_layergroup.desc="baselayer_init_selected_layergroup",this.init_selected_layergroup.addTo(e)),this.control=L.control.layers(this.baseLayers,this.overlays,{position:this.position}),this.visible&&this.control.addTo(e)}},{key:"remove",value:function(){this.control.remove()}}],[{key:"_isGoogleScale",value:function(e){return!0}},{key:"_getOSM",value:function(e){if(e&&"vector"!==e)return[];var t=L.extend({},g,{subdomains:["a","b","c"]}),n=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",t);return this._setDesc(n),[n]}},{key:"_getGaode",value:function(e){if("vector"===e){var t=L.tileLayer.chinaProvider("GaoDe.Normal.Map",g);return this._setDesc(t),[t]}if("image"!==e)return[];var n=L.tileLayer.chinaProvider("GaoDe.Satellite.Map",g),r=L.tileLayer.chinaProvider("GaoDe.Satellite.Annotion",g);return this._setDesc(n),this._setDesc(r),[n,r]}},{key:"_getBaidu",value:function(e){if("vector"===e){var t=L.tileLayer.chinaProvider("BaiDu.Normal.Map",g);return this._setDesc(t),[t]}if("dark"===e){var n=L.tileLayer.chinaProvider("BaiDu.Normal.Dark",g);return this._setDesc(n),[n]}if("midnight"===e){var r=L.tileLayer.chinaProvider("BaiDu.Normal.Midnight",g);return this._setDesc(r),[r]}if("grayscale"===e){var i=L.tileLayer.chinaProvider("BaiDu.Normal.Grayscale",g);return this._setDesc(i),[i]}if("hardedge"===e){var o=L.tileLayer.chinaProvider("BaiDu.Normal.Hardedge",g);return this._setDesc(o),[o]}if("light"===e){var a=L.tileLayer.chinaProvider("BaiDu.Normal.Light",g);return this._setDesc(a),[a]}if("redalert"===e){var s=L.tileLayer.chinaProvider("BaiDu.Normal.Redalert",g);return this._setDesc(s),[s]}if("googlelite"===e){var l=L.tileLayer.chinaProvider("BaiDu.Normal.Googlelite",g);return this._setDesc(l),[l]}if("grassgreen"===e){var u=L.tileLayer.chinaProvider("BaiDu.Normal.Grassgreen",g);return this._setDesc(u),[u]}if("pink"===e){var c=L.tileLayer.chinaProvider("BaiDu.Normal.Pink",g);return this._setDesc(c),[c]}if("darkgreen"===e){var h=L.tileLayer.chinaProvider("BaiDu.Normal.Darkgreen",g);return this._setDesc(h),[h]}if("bluish"===e){var f=L.tileLayer.chinaProvider("BaiDu.Normal.Bluish",g);return this._setDesc(f),[f]}if("image"===e){var d=L.tileLayer.chinaProvider("BaiDu.Satellite.Map",g),p=L.tileLayer.chinaProvider("BaiDu.Satellite.Annotion",g);return this._setDesc(d),this._setDesc(p),[d,p]}if("realtime"!==e)return[];var m=L.tileLayer.chinaProvider("BaiDu.Realtime.Map",g);return this._setDesc(m),[m]}},{key:"_getTianditu",value:function(e,t){if("vector"===e){var n=JSON.parse(JSON.stringify(g));""!==t&&(n.key=t);var r=L.tileLayer.chinaProvider("TianDiTu.Normal.Map",n),i=L.tileLayer.chinaProvider("TianDiTu.Normal.Annotion",n);return this._setDesc(r),this._setDesc(i),[r,i]}if("image"===e){var o=L.tileLayer.chinaProvider("TianDiTu.Satellite.Map",g),a=L.tileLayer.chinaProvider("TianDiTu.Satellite.Annotion",g);return this._setDesc(o),this._setDesc(a),[o,a]}if("terrain"!==e)return[];var s=L.tileLayer.chinaProvider("TianDiTu.Terrain.Map",g),l=L.tileLayer.chinaProvider("TianDiTu.Terrain.Annotion",g);return this._setDesc(s),this._setDesc(l),[s,l]}},{key:"_getGoogle",value:function(e){if("vector"===e){var t=L.tileLayer.chinaProvider("Google.Normal.Map",g);return this._setDesc(t),[t]}if("image"===e){var n=L.tileLayer.chinaProvider("Google.Satellite.Map",g);return this._setDesc(n),[n]}if("terrain"!==e)return[];var r=L.tileLayer.chinaProvider("Google.Terrain.Map",g);return this._setDesc(r),[r]}},{key:"_getGoogleEn",value:function(e){if("vector"===e){var t=L.tileLayer.chinaProvider("GoogleEn.Normal.Map",g);return this._setDesc(t),[t]}if("image"===e){var n=L.tileLayer.chinaProvider("GoogleEn.Satellite.Map",g);return this._setDesc(n),[n]}if("terrain"!==e)return[];var r=L.tileLayer.chinaProvider("GoogleEn.Terrain.Map",g);return this._setDesc(r),[r]}},{key:"_getGeoq",value:function(e){if("vector"===e){var t=L.tileLayer.chinaProvider("Geoq.Normal.Map",g);return this._setDesc(t),[t]}if("blue"===e){var n=L.tileLayer.chinaProvider("Geoq.Normal.PurplishBlue",g);return this._setDesc(n),[n]}if("gray"===e){var r=L.tileLayer.chinaProvider("Geoq.Normal.Gray",g);return this._setDesc(r),[r]}if("warm"===e){var i=L.tileLayer.chinaProvider("Geoq.Normal.Warm",g);return this._setDesc(i),[i]}if("cold"!==e)return[];var o=L.tileLayer.chinaProvider("Geoq.Normal.Cold",g);return this._setDesc(o),[o]}},{key:"_getTMS",value:function(e){var t=L.tileLayer(e);return this._setDesc(t),[t]}},{key:"_setDesc",value:function(e){e.desc="baselayer"}}]),r}();n.default=a},{"../kq":729}],645:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._button=r?L.easyButton(e,t,n,r):n?L.easyButton(e,t,n):t?L.easyButton(e,t):L.easyButton(e),this._enabled=!1}return r(i,[{key:"addTo",value:function(e,t){t&&(this._button.options.position=t),this._button.addTo(e)}},{key:"addToMapView",value:function(e,t){t&&(this._button.options.position=t),this._button.addTo(e._map)}},{key:"hide",value:function(){return L.DomUtil.addClass(this._button.button,"kqhidden"),this}},{key:"show",value:function(){return L.DomUtil.removeClass(this._button.button,"kqhidden"),this}},{key:"remove",value:function(){this._button.remove()}},{key:"setPosition",value:function(e){this._button.setPosition(e)}},{key:"setEnabled",value:function(e){e?L.DomUtil.addClass(this._button.button,"btn-enabled"):L.DomUtil.removeClass(this._button.button,"btn-enabled"),this._enabled=e}},{key:"enabled",value:function(){return this._enabled}},{key:"setTitle",value:function(e){this._button._states[0].title=e,this._button._currentState.title=e,this._button.button.title=e}}]),i}();n.default=i},{}],646:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../libs/controls/easybutton/easy-button");(r=o)&&r.__esModule;var a=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=[];e.forEach(function(e){n.push(e._button)}),this._bar=L.easyBar(n,t)}return i(r,[{key:"addTo",value:function(e){this._bar.addTo(e)}},{key:"addToMapView",value:function(e){this._bar.addTo(e._map)}},{key:"hide",value:function(){return L.DomUtil.addClass(this._bar.container,"kqhidden"),this}},{key:"show",value:function(){return L.DomUtil.removeClass(this._bar.container,"kqhidden"),this}},{key:"remove",value:function(){this._bar.remove()}},{key:"setPosition",value:function(e){this._bar.setPosition(e)}},{key:"setAttribute",value:function(e,t){this._bar.container.setAttribute(e,t)}}]),r}();n.default=a},{"../../libs/controls/easybutton/easy-button":14}],647:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};e("../extend/L.Control.MapInput");var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Control.MapInput),i(t,[{key:"addToMapView",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addTo",this).call(this,e._getMap())}},{key:"remove",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"value",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this)}},{key:"dropdownValue",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dropdownValue",this).call(this)}},{key:"setOnClick",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setOnClick",this).call(this,e)}}]),t}();n.default=l},{"../extend/L.Control.MapInput":728,leaflet:473}],648:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=(i(e("../kq")),i(e("./LayerTree")));function i(e){return e&&e.__esModule?e:{default:e}}var a=e("leaflet"),s=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.setOptions(r,t),r.createTree(e,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,[{key:"onAdd",value:function(e){return this.setMap(e),this._container}},{key:"onRemove",value:function(){this.removeEvent()}},{key:"addTo",value:function(e){a.Control.prototype.addTo.call(this,e);var t=parseInt($(this._map.getContainer()).css("height")),n=parseInt($(this._container).css("margin-top")),r=parseInt($(this._container).css("margin-bottom")),i=t-2*Math.max(n,r);return $(this._container).css("height",i),this}}]),i}();n.default=s},{"../kq":729,"./LayerTree":639,leaflet:473}],649:[function(n,e,r){(function(u){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),w=e(n("../kq")),f=e(n("./Window")),x=e(n("leaflet")),k=e(n("./LegendQuery")),d=e(n("./MapPrintAddTextDialog")),p=e(n("./MapPrintAddHtmlDialog")),m=e(n("./MapPrintTitleSettingDialog"));function e(e){return e&&e.__esModule?e:{default:e}}function g(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var y={position:"topleft"},_={A2:[1512,2169],A3:[1047,1512],A4:[718,1047],A5:[484,718],A6:[321,484]},t=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=t;return r._mapPrintDialogObject=null,r._mapPrintAddTextDialog=null,r._mapPrintTitleSettingDialog=null,r.options=x.default.extend({},y,e),r._div=null,r._mapDialog=null,r._map_tree=null,r._baseMapLayer=null,r._printMapView=null,r._printDrawGeoJSON=null,r._control_zoom=null,r._control_scale=null,r._local=w.default.Local.Control.MapPrint,r._isPrintMarker=!0,r._queryResultChartArray=[],r._output_image_name="KQMap.jpg",$("#"+w.default.Common.CommonValues.mapContainerID).bind("export_image_to_printer",function(e,t){var n={};n.item_uuid=u.uuid(),n.item_data=t,r._queryResultChartArray.push(n),console.log("MapPrint export_image_to_printer success"),w.default.Control.Notification.getInstance().showSuccess(w.default.Local.Control.MapPrint.ChartExportPrintSuccess())}),t}var t,r,i,o,a,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,x.default.Evented),h(n,[{key:"_translateHtmlChineseEnglish",value:function(e){var t=this;return e.replace("__send-to-printer__",t._local.SendToPrinter()).replace("__select-layer__",t._local.SelectLayer()).replace("__saved-as-image__",t._local.SavedAsImage()).replace("__saved-as-ofd__",t._local.SavedAsOfd()).replace("__clear__",t._local.Clear()).replace("__text__",t._local.Text()).replace("__mark__",t._local.Mark()).replace("__paper__",t._local.Paper()).replace("__pixels-per-inch__",t._local.PixelsPerInch()).replace("__scale__",t._local.Scale()).replace("__zoom-button__",t._local.ZoomButton()).replace("__compass__",t._local.Compass()).replace("__legend__",t._local.Legend()).replace("__a-map__",t._local.AMap()).replace("__input-zoom__",t._local.InputZoom()).replace("__title__",t._local.Title()).replace("__chart__",t._local.Chart()).replace("__title-background-color__",t._local.TitleBackgroundColor())}},{key:"initAsync",value:function(e){var n,r=this;r.button=new w.default.Control.MapButton("iconfont icon-print",(n=g(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("src_control_mapprint : map print!"),console.log("@@@ -----\x3e my map print!"),e.next=4,r.openMapPrintDialog();case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)}),r._local.PrintMap(),"kq-print"),r.buttonBar=new w.default.Control.MapButtonBar([r.button],{position:r.options.position}),r.buttonBar.setAttribute("id","print-buttonbar"),e&&e()}},{key:"openMapPrintDialog",value:(l=g(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._mapPrintDialogObject&&t._mapPrintDialogObject.close(),e.next=4,t._initMapDialog();case 4:t._initHtml(),t.fire("beforeOpen"),t._mapPrintDialogObject.open(),n=$("#map-to-print-outside").css("padding-top").replace("px",""),$("#print-map-box").scrollTop(n);case 9:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"getPrintMap",value:function(){var e=null;return this._printMapView&&(e=this._printMapView._getMap()),e}},{key:"getPrintMapView",value:function(){var e=null;return this._printMapView&&(e=this._printMapView),e}},{key:"setPrintDirection",value:function(e){var t=$("#paper-direction-dropdownlist").data("kendoDropDownList");"vertical"===e?t.select(1):t.select(0)}},{key:"removeMapPrintDialog",value:function(){this._mapPrintDialogObject&&this._mapPrintDialogObject.destroy()}},{key:"setNotPrintMarker",value:function(){this._isPrintMarker=!1}},{key:"setPrintMarker",value:function(){this._isPrintMarker=!0}},{key:"_initHtml",value:(s=g(regeneratorRuntime.mark(function e(){var n,t,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(function(e,t){var n=$("#ruler");return n.css("font",e),n.text(t),n[0]}),function(e){var t={canvas:document.getElementById("map-print-title"),drawStartX:0,drawStartY:40,lineHeight:40,drawWidth:120,color:"#000000",backgroundColor:"#FFFFFF"};if(e&&"object"===(void 0===e?"undefined":c(e)))for(var n in e)t[n]=e[n];var r=t.canvas,i=r.getContext("2d");i.fillStyle="rgba(255, 255, 255, 0)",i.fillRect(0,0,r.width,r.height),i.font=t.fontSize+"px "+t.font,i.fillStyle=t.color;var o=0,a=[];for(n=0;n<t.text.length;n++)i.measureText(t.text.substr(o,n-o)).width>t.drawWidth&&(o=judgePunctuationMarks(t.text[n-1])?(a.push(t.text.substr(o,n-o)),n):(a.push(t.text.substr(o,n-o-1)),n-1)),n===t.text.length-1&&a.push(t.text.substr(o,n-o+1));r.style.height=a.length*t.lineHeight+t.drawStartY,i.font=t.fontSize+t.font,i.fillStyle=t.color;for(n=0;n<a.length;n++)i.fillText(a[n],t.drawStartX,t.drawStartY+n*t.lineHeight);return r.toDataURL()},n=this,$("#sender-to-printer-button").kendoButton({click:function(e){n._printDrawGeoJSON&&n._printDrawGeoJSON.eachLayer(function(e){e instanceof x.default.Path&&(e.remove(),e.setStyle({renderer:x.default.svg()}),e.addTo(n._printMapView._getMap()))}),console.log("sender-to-printer-button clicked!"),console.log($("#map-to-print").width(),$("#map-to-print").height()),n._control_zoom.remove(),w.default.Control.Waiting.show(w.default.Control.Manager.getInstance()._getMap());$("#print-area").print({globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:$.Deferred().done(function(){w.default.Control.Waiting.close()}),timeout:3e4,title:null,doctype:"<!doctype html>"}),i.is(":checked")&&n._control_zoom.addTo(n._printMapView._getMap()),n._printDrawGeoJSON&&n._printDrawGeoJSON.eachLayer(function(e){e instanceof x.default.Path&&(e.remove(),e.setStyle({renderer:x.default.canvas()}),e.addTo(n._printMapView._getMap()))})}}),$("#choose-print-layer-button").kendoButton({click:function(e){console.log("choose-print-layer-button clicked!");var t=$("#choose-print-layer-button").offset().top+$("#choose-print-layer-button").outerHeight(),n=$("#choose-print-layer-button").offset().left;$("#print-map-control-tree").data("kendoWindow").setOptions({position:{top:t,left:n}}),$("#print-map-control-tree").data("kendoWindow").open()}}),$("#save-print-image-button").kendoButton({click:function(e){console.log("save-print-image-button clicked!"),n._control_zoom.remove(),kendo.drawing.drawDOM($("#print-area")).then(function(e){return kendo.drawing.exportImage(e)}).done(function(e){console.log("map print save as image data:  "+e),w.default.Common.CommonTools.exportBase64UrlToImage(e,n._output_image_name),i.is(":checked")&&n._control_zoom.addTo(n._printMapView._getMap())})}}),$("#save-print-ofd-button").kendoButton({click:function(e){console.log("save-print-ofd-button clicked!"),n._control_zoom.remove(),kendo.drawing.drawDOM($("#print-area")).then(function(e){return kendo.drawing.exportImage(e)}).done(function(e){var t=n._printMapView._getMap();w.default.Common.ExportOFD.getInstance().exportOFDAsync(e,t),i.is(":checked")&&n._control_zoom.addTo(n._printMapView._getMap())})}}),$("#clear-print-button").kendoButton({click:function(e){console.log("clear-print-button clicked!"),n._map_tree.clearSelectedLayers(),$(".print-custom-text")&&$(".print-custom-text").remove(),$(".print-custom-html")&&$(".print-custom-html").remove(),$(".print-query-result-chart")&&$(".print-query-result-chart").remove(),n._printDrawGeoJSON&&(n._printDrawGeoJSON.remove(),n._printDrawGeoJSON=null)}}),$("#text-print-button").kendoButton({click:function(e){console.log("text-print-button clicked!"),n._mapPrintAddTextDialog=d.default.getInstance(),n._mapPrintAddTextDialog.open()}}),$("#map-print-html-button").kendoButton({click:function(e){console.log("map-print-html-button clicked!"),n._mapPrintAddTextDialog=p.default.getInstance(),n._mapPrintAddTextDialog.open()}}),$("#map-print-input-zoom-button").kendoButton({click:function(){var e=w.default.Control.ZoomInputDialog.getInstance();e.setMapView(n._printMapView),e.open({top:"124px",left:"2px"})}}),$("#map-print-title-button").kendoButton({click:function(e){console.log("map-print-title-button clicked!"),n._mapPrintTitleSettingDialog=m.default.getInstance(),n._mapPrintTitleSettingDialog.open()}}),$("#map-print-chart-button").kendoButton({click:function(e){console.log("map-print-chart-button clicked!"),n._addQueryResultChart()}}),$("#paper-size-dropdownlist").kendoDropDownList({dataSource:["A2","A3","A4","A5","A6"],animation:!1,index:2,change:function(e){n._changePrintPaperSize()}}).data("kendoDropDownList"),$("#paper-direction-dropdownlist").kendoDropDownList({dataSource:[n._local.Horizontal(),n._local.Vertical()],animation:!1,cascade:function(e){n._changePrintPaperSize()}}).data("kendoDropDownList"),$("#pixel-dropdownlist").kendoDropDownList({dataSource:["96"],animation:!1,enable:!1}).data("kendoDropDownList"),(t=$("#display-compass-checkbox")).change(function(){t.is(":checked")?$("#map-print-compass").show():$("#map-print-compass").hide()}),(r=$("#display-scale-checkbox")).change(function(){r.is(":checked")?n._control_scale.addTo(n._printMapView._getMap()):n._control_scale.remove()}),(i=$("#operate-zoom-checkbox")).change(function(){i.is(":checked")?n._control_zoom.addTo(n._printMapView._getMap()):n._control_zoom.remove()}),(o=$("#display-legend-checkbox")).change(function(){o.is(":checked")?n._diaplayPrintLegendWithLayerName():$("#map-print-legend-div").hide()});case 24:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"_addQueryResultChart",value:function(){var r=this;r._queryResultChartArray.forEach(function(e,t){var n=document.getElementById("map-to-print");r.query_result_chart_img=x.default.DomUtil.create("img","print-query-result-chart",n),r.query_result_chart_img.setAttribute("style","position: absolute; z-index: 40100; "),r.query_result_chart_img.src=e.item_data,r.query_result_chart_img.style.left=50*t+"px",r.query_result_chart_img.setAttribute("chart_uuid",e.item_uuid),new x.default.Draggable(r.query_result_chart_img).enable()}),$("#map-to-print").contextmenu({delegate:".print-query-result-chart",menu:[{title:r._local.HideStatisticalChart(),cmd:"hideQueryChart",uiIcon:"ui-icon custom-icon-transparency"},{title:"----"},{title:r._local.DeleteStatisticalChart(),cmd:"deleteQueryChart",uiIcon:"ui-icon custom-icon-clearall"}],select:function(e,t){t.target;t.target.remove();var n=t.target.attr("chart_uuid");switch(console.log("select chart uuid value +---\x3e "+n),t.cmd){case"hideQueryChart":console.log("hideQueryChart chart uuid value +---\x3e "+n);break;case"deleteQueryChart":console.log("deleteQueryChart chart uuid +---\x3e "+n),r._deleteQueryResultChart(n)}}})}},{key:"_deleteQueryResultChart",value:function(e){for(var t=-1,n=0;n<this._queryResultChartArray.length;++n){if(this._queryResultChartArray[n].item_uuid===e){t=n;break}}-1!=t&&this._queryResultChartArray.splice(t,1)}},{key:"openMapDialog",value:(a=g(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this;case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"_init",value:(o=g(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this;case 1:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"_initMapDialog",value:(i=g(regeneratorRuntime.mark(function e(){var s,t,n,r,i,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=this,t="#"+w.default.Common.CommonValues.mapContainerID,n=parseInt($(t).css("width")),n-10,r=parseInt($(t).css("height")),r-40,i={animation:!1,title:s._local.PrintMap(),actions:["Close"],draggable:!1,scrollable:!1,appendTo:t,minWidth:300,resizable:!1,close:function(){console.log("print map on close!"),l._remove(),$("#print-map-control-tree").data("kendoWindow").destroy(),s._mapPrintAddTextDialog&&s._mapPrintAddTextDialog.remove(),s._mapPrintTitleSettingDialog&&s._mapPrintTitleSettingDialog.remove(),s.removeMapPrintDialog(),w.default.Control.ZoomInputDialog.getInstance().close()},updateHtml:function(e){return e=s._translateHtmlChineseEnglish(e)}},o={title:s._local.SelectLayer(),modal:!1,actions:["Close"],animation:!1,visible:!1,draggable:!1,resizable:!1,width:300,height:450,position:{top:78,left:136}},l=new f.default("map-print-win",i),e.next=12,l.initAsync(function(){s._mapPrintDialogObject=l._object(),l._object().maximize();$("#print-map-control-tree").kendoWindow(o).data("kendoWindow");var a=w.default.Map.MapConfig.getInstance();a.initAsync("",!1,function(){s._printMapView=new w.default.Map.MapView({renderer:x.default.canvas()}),s._printMapView._customInitAsync("map-to-print",function(){s._map_tree=new w.default.Control.LayerTree,s._map_tree.createTree(a,"print-map-tree"),s._map_tree.setMaxLayerSelectedNumber(w.default.Map.MapConfig.getInstance().getTreeSelectMaxCount()),s._map_tree.setMap(s._printMapView._getMap()),s._map_tree.addTo(s._printMapView._getMap()),$("#map-print-compass").attr("src","../../images/compass.png");var e=document.getElementById("map-print-compass");new x.default.Draggable(e).enable();var t=document.getElementById("map-print-title");new x.default.Draggable(t).enable();var n=document.getElementById("map-print-info-div");new x.default.Draggable(n).enable(),s._control_zoom=x.default.control.zoom({position:"topright",zoomInTitle:w.default.Local.Control.zoom.zoomInTitle(),zoomOutTitle:w.default.Local.Control.zoom.zoomOutTitle()}),s._control_zoom.addTo(s._printMapView._getMap()),s._addPrintScale();var r=w.default.Control.Manager.getInstance().getControl("tree");r&&s._map_tree.setCheckedLayers(r.getCheckedLayers());var i=w.default.Control.Manager.getInstance().getControl("draw");if(i){var o=i.toGeoJSON();o&&(s._printDrawGeoJSON=new w.default.Map.MapGeoJSON(o,{isAddToDraw:!1}),s._isPrintMarker||s._printDrawGeoJSON.eachLayer(function(e){e instanceof x.default.Marker&&s._printDrawGeoJSON.removeLayer(e)}),s._printDrawGeoJSON.addTo(s._printMapView._getMap()))}})})});case 12:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_changePrintPaperSize",value:function(){var e=this,t=$("#paper-direction-dropdownlist").data("kendoDropDownList").select(),n=$("#paper-size-dropdownlist").data("kendoDropDownList").value(),r=0,i=0;$("#map-print-title").width();0==t?(r=_[n][0],i=_[n][1]):1==t&&(r=_[n][1],i=_[n][0]);$("#map-to-print-outside").css({width:i,height:r});var o=$("#map-to-print-outside").css("padding-left").replace("px",""),a=$("#map-to-print-outside").css("padding-right").replace("px",""),s=$("#map-to-print-outside").css("padding-top").replace("px",""),l=$("#map-to-print-outside").css("padding-bottom").replace("px","");$("#map-to-print").css({width:i-o-a,height:r-s-l}),setTimeout(function(){e._printMapView._getMap().invalidateSize()},400)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_hideAllControls",value:function(){$(".leaflet-control-container").addClass("no-print")}},{key:"_createCompassMarker",value:function(){var e=x.default.icon({iconUrl:"../../images/compass.png"});x.default.marker(this._printMapView._getMap().getBounds().getNorthWest(),{icon:e,draggable:!0}).addTo(this._printMapView._getMap())}},{key:"_printElem",value:function(e){var t=document.getElementById(e).innerHTML,n=window.open("","Print","height=600,width=800");n.document.write("<html><head><title>Print</title>"),n.document.write("</head><body >"),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),n.print(),n.close()}},{key:"_printMyElement",value:function(){var e=document.getElementById("map-to-print"),t=document.getElementById("ifmcontentstoprint").contentWindow;t.document.open(),t.document.write(e.innerHTML),t.document.close(),t.focus(),t.print()}},{key:"_printElement",value:function(e){var t=document.createElement("iframe");t.style="height: 0px; width: 0px; position: absolute",document.body.appendChild(t),$(e).clone().appendTo(t.contentDocument.body),t.contentWindow.print(),t.parentElement.removeChild(t)}},{key:"_addPrintScale",value:function(){this._control_scale=new w.default.Control.Scale({position:"bottomleft",fill:"nofill",doubleLine:!1,showSubunits:!0,labelPlacement:"auto"}),this._control_scale.addTo(this._printMapView._getMap())}},{key:"_diaplayPrintLegend",value:(r=g(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._map_tree.getCheckedLayers(),n=[],r=0;case 4:if(r<t.length)return i=t[r],o=w.default.Map.MapCommon.getKeyFromSourceNameLayerId(i.sourceName,i.layerId),e.next=9,k.default.getInstance()._getQueryData(o);e.next=14;break;case 9:for(a=e.sent,s=0;s<a.length;++s)n.push(a[s]);case 11:++r,e.next=4;break;case 14:for(l=[],u=0;u<n.length;++u)-1===l.indexOf(n[u])&&l.push(n[u]);if(w.default.Query.QueryIDManager.isDataArrayCanceled(l))console.log("query canceled, data come!");else if(0===l.length)w.default.Control.Notification.getInstance().showError(w.default.Local.Control.legendQuery.legendEmpty());else{for(p in c=k.default.getInstance()._organizeQueryData(l),h=null,f=[],d={},c)for(h=c[p],m=0;m<h.length;++m)d[h[m].label]||(f.push(h[m]),d[h[m].label]=1);g=640<(g=(g=16*Math.ceil(f.length/3))<48?48:g)?640:g,$("#map-print-legend-div").height(g),$("#map-print-legend-div").kendoListView({dataSource:new kendo.data.DataSource({data:f}),template:kendo.template('<div class="print-legend"> <img style="float:left;" src="#= legend #" alt="#= label #" /><p style="float:left;" >#:label#</p> </div>')}).data("kendoListView"),y=$("#map-to-print").offset(),_=y.top,v=y.left,$("#map-print-legend-div").css({top:20-_+122+"px",left:10-v+2+"px"}),$("#map-print-legend-div").show(),b=document.getElementById("map-print-legend-div"),new x.default.Draggable(b).enable()}case 17:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_diaplayPrintLegendWithLayerName",value:(t=g(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g,y,_,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._map_tree.getCheckedLayers(),n=[],r=0;case 4:if(r<t.length)return i=t[r],o=w.default.Map.MapCommon.getKeyFromSourceNameLayerId(i.sourceName,i.layerId),e.next=9,k.default.getInstance()._getQueryData(o);e.next=14;break;case 9:for(a=e.sent,s=0;s<a.length;++s)n.push(a[s]);case 11:++r,e.next=4;break;case 14:if(w.default.Query.QueryIDManager.isDataArrayCanceled(n))console.log("query canceled, data come!");else if(0===n.length)w.default.Control.Notification.getInstance().showError(w.default.Local.Control.legendQuery.legendEmpty());else{for(f in l=k.default.getInstance()._organizeQueryData(n),c=u=null,h=[],l)c=l[u=f],h.push({layerName:u,legendList:c});for(p=d=0;p<h.length;++p)d+=16,m=h[p].legendList,d+=16*Math.ceil(m.length/3);d=640<(d=d<64?64:d)?640:d,$("#map-print-legend-div").height(d),$("#map-print-legend-div").kendoListView({dataSource:new kendo.data.DataSource({data:h}),template:kendo.template($("#print-legend-template").html())}).data("kendoListView"),g=$("#map-to-print").offset(),y=g.top,_=g.left,$("#map-print-legend-div").css({top:20-y+122+"px",left:10-_+2+"px"}),$("#map-print-legend-div").show(),v=document.getElementById("map-print-legend-div"),new x.default.Draggable(v).enable()}case 15:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"setInfoDivHtml",value:function(e){$("#map-print-info-div").empty(),$("#map-print-info-div").append(e)}},{key:"setInfoDivCSSstyle",value:function(e){$("#map-print-info-div").css(e)}},{key:"disableSaveImagebutton",value:function(){$("#save-print-image-button").attr("disabled",!0)}},{key:"enableSaveImagebutton",value:function(){$("#save-print-image-button").attr("disabled",!1)}},{key:"appendSummaryText",value:function(){var e=document.getElementById("map-to-print");this.custom_text=x.default.DomUtil.create("p","print-custom-text",e),this.custom_text.setAttribute("style","position: relative; z-index: 901; font-size: 30px; color: blue; float: left; background-color: yellow; display: inline-block; "),this.custom_text.style.fontFamily=this._local.Italics(),this.custom_text.innerHTML="原始 Label 内容  <br> 换行内容01  <br> 换行内容02",new x.default.Draggable(this.custom_text).enable()}},{key:"changePaperDirectionVertical",value:function(){$("#paper-direction-dropdownlist").data("kendoDropDownList").select(1),this._changePrintPaperSize()}},{key:"changePaperDirectionHorizontal",value:function(){$("#paper-direction-dropdownlist").data("kendoDropDownList").select(0),this._changePrintPaperSize()}},{key:"changePrintPaperSizeIndex",value:function(e){$("#paper-size-dropdownlist").data("kendoDropDownList").select(e),this._changePrintPaperSize()}},{key:"setOutputImageName",value:function(e){e&&(this._output_image_name=e)}}],[{key:"getInstance",value:function(e){return n._instance||(n._instance=new n(e)),n._instance}}]),n}();r.default=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":729,"./LegendQuery":640,"./MapPrintAddHtmlDialog":650,"./MapPrintAddTextDialog":651,"./MapPrintTitleSettingDialog":652,"./Window":694,leaflet:473}],650:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=r(e("../kq")),o=r(e("./Window"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._printAddHtmlDialog=null,this._local=s.default.Local.Control.MapPrint,this._add_html_id_number=0,this._add_html_template_list=[]}var t,n,r;return i(e,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__import_html__",this._local.ImportHtml()).replace("__add-text__",this._local.AddText()).replace("__clear-text__",this._local.ClearText())}},{key:"open",value:(r=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._printAddHtmlDialog&&t._printAddHtmlDialog.close(),e.next=4,t._initAddHtmlDialog();case 4:return e.next=6,t._initHtml();case 6:t._printAddHtmlDialog.open();case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this._printAddHtmlDialog.close()}},{key:"_initAddHtmlDialog",value:(n=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:(t=this)._local.AddHtmlTitle(),minWidth:"441px",minHeight:"150px",width:"450px",height:"285px",scrollable:!1,actions:["Close"],modal:!1,draggable:!0,resizable:!0,position:{top:200,left:"25%"},appendTo:"#map-print-win",close:function(){console.log("Map print add html dialog on close!"),r._remove()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new o.default(t._getMapPrintHtmlDialogId(),n),e.next=5,r.initAsync(function(){t._printAddHtmlDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initHtml",value:(t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,$("#print-import-file-button").kendoButton({click:function(e){console.log("print-import-file-button clicked!"),$("#print-add-html-template-files").click()}}),(n=document.getElementById("print-add-html-template-files")).accept="text/html",n.addEventListener("change",function(e){console.log("html_template_file change! ");var t=e.target.files[0];if(t){var n=new FileReader;n.readAsText(t,"GBK"),n.onload=function(e){console.log("Load html template success! "),$("#print-add-html-textarea").data("kendoEditor").value(e.target.result)}}}),r=[],e.next=8,s.default.Common.NetworkTools.httpGetAsync(s.default.Common.CommonValues.kqwebmapPath+("en"===s.default.Local.getCurrentLanguage()?"template/template-add-print-en.html":"template/template-add-print.html"));case 8:if("error"===(i=e.sent))console.log("Load template_add_print_html error!"),t._add_html_template_list=[],r=[];else for(console.log("Load template_add_print_html success! "),o=$(i).get(0),t._add_html_template_list=o.getElementsByClassName("template-print"),a=0;a<t._add_html_template_list.length;++a)r.push(t._add_html_template_list[a].title);$("#print-html-template-dropdownlist").kendoDropDownList({dataSource:{data:r},animation:!1,change:t._onTemplateChange.bind(t)}),$("#print-add-html-button").kendoButton({click:function(e){console.log("print-add-text-button clicked!"),t.appendCustomHtml()}}),$("#print-delete-html-button").kendoButton({click:function(e){console.log("print-delete-html-button clicked!"),$(".print-custom-html")&&$(".print-custom-html").remove()}}),$("#print-add-html-textarea").kendoEditor({tools:["bold","italic","underline",{name:"fontSize",items:[{text:"72px",value:"72px"},{text:"48px",value:"48px"},{text:"36px",value:"36px"},{text:"28px",value:"28px"},{text:"26px",value:"26px"},{text:"24px",value:"24px"},{text:"22px",value:"22px"},{text:"20px",value:"20px"},{text:"18px",value:"18px"},{text:"16px",value:"16px"},{text:"14px",value:"14px"},{text:"12px",value:"12px"},{text:"11px",value:"11px"}]},"foreColor","justifyLeft","justifyCenter","justifyRight"]}),$(".k-editor").height("calc(100% - 47px)");case 15:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_onTemplateChange",value:function(){var e=$("#print-html-template-dropdownlist").data("kendoDropDownList").select();if(this._add_html_template_list){var t=this._add_html_template_list[e];$("#print-add-html-textarea").data("kendoEditor").value($(t).html())}}},{key:"_getMapPrintHtmlDialogId",value:function(){return"map-print-add-html-dialog"}},{key:"remove",value:function(){this._printAddHtmlDialog&&(e._instance=null,this._add_html_id_number=0,this._printAddHtmlDialog.destroy())}},{key:"appendCustomHtml",value:function(){var e=document.getElementById("map-to-print");this.custom_html=L.DomUtil.create("div","print-custom-html",e),this._add_html_id_number+=1;var t="print-add-custom-html-"+this._add_html_id_number;this.custom_html.id=t,this.custom_html.setAttribute("style","position: relative; z-index: 901; float: left; display：inline-block; ");var n=$("#print-add-html-textarea").data("kendoEditor");this.custom_html.innerHTML=n.value(),new L.Draggable(this.custom_html).enable(),$("#map-to-print").contextmenu({delegate:".print-custom-html",menu:[{title:this._local.DeleteMark(),cmd:"deleteCustomHtml",uiIcon:"ui-icon custom-icon-clearall"}],select:function(e,t){t.target.closest(".print-custom-html").css("visibility","hidden")}})}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../kq":729,"./Window":694}],651:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("../kq")),a=r(e("./Window"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._printAddTextDialog=null,this._local=o.default.Local.Control.MapPrint,this._add_text_id_number=0}var t,n,r;return i(e,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__add-text__",this._local.AddText()).replace("__clear-text__",this._local.ClearText())}},{key:"open",value:(r=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._printAddTextDialog&&t._printAddTextDialog.close(),e.next=4,t._initAddTextDialog();case 4:t._initHtml(),t._printAddTextDialog.open();case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this._printAddTextDialog.close()}},{key:"_init",value:(n=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initAddTextDialog();case 3:t._initHtml();case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initAddTextDialog",value:(t=s(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:(t=this)._local.AddTextTitle(),minWidth:"400px",minHeight:"150px",width:"450px",height:"285px",scrollable:!1,actions:["Close"],modal:!1,draggable:!0,resizable:!0,position:{top:200,left:"25%"},appendTo:"#map-print-win",close:function(){console.log("Map print add text dialog on close!"),r._remove()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new a.default(t._getMapPrintTextDialogId(),n),e.next=5,r.initAsync(function(){t._printAddTextDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initHtml",value:function(){var t=this;$("#print-text-font-family-dropdownlist").kendoDropDownList({dataSource:{data:[t._local.MicrosoftYaHei(),t._local.SimsunFont(),t._local.Italics(),"Helvetica","Garamond"]},animation:!1,index:1,change:function(){console.log("font family change!!!");var e=$("#print-text-font-family-dropdownlist").val();$("#print-add-text-textarea").css("font-family",e)}}).data("kendoDropDownList"),$("#print-text-font-size-dropdownlist").kendoDropDownList({autoWidth:!0,dataSource:["40","36","32","28","26","24","22","20","18","16","14","12"],animation:!1,index:5,change:function(){var e=$("#print-text-font-size-dropdownlist").val();$("#print-add-text-textarea").css("font-size",e+"px")}}).data("kendoDropDownList"),$("#print-text-font-color-picker").kendoColorPicker({buttons:!1,value:"#000000",select:function(e){$("#print-text-font-color-picker").data("kendoColorPicker").value(e.value);var t=$("#print-text-font-color-picker").data("kendoColorPicker").value();$("#print-add-text-textarea").css("color",t)}}),$("#print-add-text-button").kendoButton({click:function(e){console.log("print-add-text-button clicked!"),t.appendSummaryText()}}),$("#print-delete-text-button").kendoButton({click:function(e){console.log("print-delete-text-button clicked!"),$(".print-custom-text")&&$(".print-custom-text").remove()}}),t._initTextAreaFontStyle()}},{key:"_initTextAreaFontStyle",value:function(){var e=$("#print-text-font-family-dropdownlist").val();$("#print-add-text-textarea").css("font-family",e);var t=$("#print-text-font-size-dropdownlist").val();$("#print-add-text-textarea").css("font-size",t+"px");var n=$("#print-text-font-color-picker").data("kendoColorPicker").value();$("#print-add-text-textarea").css("color",n)}},{key:"_getMapPrintTextDialogId",value:function(){return"map-print-add-text-dialog"}},{key:"remove",value:function(){this._printAddTextDialog&&(e._instance=null,this._add_text_id_number=0,this._printAddTextDialog.destroy())}},{key:"appendSummaryText",value:function(){var e=this,t=$("#print-text-font-family-dropdownlist").val(),n=$("#print-text-font-size-dropdownlist").val(),r=$("#print-text-font-color-picker").data("kendoColorPicker").value(),i=document.getElementById("map-to-print");e.custom_text=L.DomUtil.create("div","print-custom-text",i),e._add_text_id_number+=1;var o="print-add-custom-text-"+e._add_text_id_number;e.custom_text.id=o,e.custom_text.setAttribute("style","position: relative; z-index: 901; float: left; display: inline-block; "),e.custom_text.style.fontFamily=t,e.custom_text.style.fontSize=n+"px",e.custom_text.style.color=r;var a=$("#print-add-text-textarea").width();e.custom_text.style.width=a+"px";var s=$("#print-add-text-textarea").val().replace(/\n/g,"<br/>");s=s.replace(/\s/g,"&ensp;"),e.custom_text.innerHTML=s,new L.Draggable(e.custom_text).enable(),$("#map-to-print").contextmenu({delegate:".print-custom-text",menu:[{title:e._local.DeleteText(),cmd:"deleteCustomText",uiIcon:"ui-icon custom-icon-clearall"}],select:function(e,t){t.target.css("visibility","hidden"),console.log(t.target)}})}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../kq":729,"./Window":694}],652:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("../kq")),a=r(e("./Window"));r(e("./MapPrint"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._printTitleSettingDialog=null,this._local=o.default.Local.Control.MapPrint,this._titleBoxShadowValue="5px 2px 6px #000"}var t,n,r;return i(e,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__title__",this._local.Title()).replace("__a-map__",this._local.AMap()).replace("__title-background-color__",this._local.TitleBackgroundColor()).replace("__title-box-shadow__",this._local.TitleBoxShadow()).replace("__display-title__",this._local.DisplayTitle())}},{key:"open",value:(r=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._printTitleSettingDialog&&t._printTitleSettingDialog.close(),e.next=4,t._initTitleSettingDialog();case 4:t._initHtml(),t._printTitleSettingDialog.open();case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this._printTitleSettingDialog.close()}},{key:"_init",value:(n=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initTitleSettingDialog();case 3:t._initHtml();case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initTitleSettingDialog",value:(t=s(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:(t=this)._local.TitleSetting(),minWidth:"350px",minHeight:"150px",width:"355px",height:"155px",scrollable:!1,actions:["Close"],modal:!1,draggable:!0,resizable:!1,position:{top:180,left:70},appendTo:"#map-print-win",close:function(){console.log("Map print title setting dialog on close!"),r._remove()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new a.default(t._getPrintTitleSettingDialogId(),n),e.next=5,r.initAsync(function(){t._printTitleSettingDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initHtml",value:function(){var t=this,e=$("#print-title-input-textbox").kendoMaskedTextBox({change:function(){t._refreshMapPrintTitle()}}).data("kendoMaskedTextBox");$("#print-title-input-textbox").keyup(function(){e&&e.trigger("change")}),$("#print-title-font-family-dropdownlist").kendoDropDownList({dataSource:{data:[t._local.MicrosoftYaHei(),t._local.SimsunFont(),t._local.Italics(),"Helvetica","Garamond"]},animation:!1,index:1,change:function(){console.log("Setting font family change!!!"),t._refreshMapPrintTitle()}}).data("kendoDropDownList"),$("#print-title-font-size-dropdownlist").kendoDropDownList({autoWidth:!0,dataSource:["40","36","32","28","26","24","22","20","18","16","14","12"],animation:!1,index:0,change:function(){t._refreshMapPrintTitle()}}).data("kendoDropDownList"),$("#print-title-font-color-picker").kendoColorPicker({buttons:!1,value:"#000000",select:function(e){$("#print-title-font-color-picker").data("kendoColorPicker").value(e.value),t._refreshMapPrintTitle()}});var n=$("#title-background-color-picker").kendoColorPicker({buttons:!1,value:"rgba(135, 206, 250, 0.72)",opacity:!0,select:function(e){n.value(e.value),t._refreshMapPrintTitle()}}).data("kendoColorPicker"),r=$("#display-title-box-shadow");r.change(function(){r.is(":checked")?$("#map-print-title").css("box-shadow",t._titleBoxShadowValue):$("#map-print-title").css("box-shadow","none")});var i=$("#display-title-checkbox");i.change(function(){i.is(":checked")?$("#map-print-title").show():$("#map-print-title").hide()}),t._refreshMapPrintTitle()}},{key:"_getPrintTitleSettingDialogId",value:function(){return"map-print-title-setting-dialog"}},{key:"remove",value:function(){this._printTitleSettingDialog&&(e._instance=null,this._printTitleSettingDialog.destroy())}},{key:"_refreshMapPrintTitle",value:function(){console.log("_refreshMapPrintTitle FUNCTION Refresh Map Print Title");var e=$("#print-title-input-textbox").val();e?$("#map-print-title").show():$("#map-print-title").hide(),$("#map-print-title").text(e);var t=$("#print-title-font-family-dropdownlist").data("kendoDropDownList").select(),n=[this._local.MicrosoftYaHei(),this._local.SimsunFont(),this._local.Italics(),"Helvetica","Garamond"][t];$("#map-print-title").css("font-family",n);var r=parseInt($("#print-title-font-size-dropdownlist").val());$("#map-print-title").css("font-size",r+"px");var i=$("#print-title-font-color-picker").data("kendoColorPicker");if(i){var o=i.value();$("#map-print-title").css("color",o)}var a=$("#title-background-color-picker").data("kendoColorPicker");if(a){var s=a.value();$("#map-print-title").css("background-color",s)}$("#display-title-box-shadow").is(":checked")?$("#map-print-title").css("box-shadow",this._titleBoxShadowValue):$("#map-print-title").css("box-shadow","none"),$("#display-title-checkbox").is(":checked")?$("#map-print-title").show():$("#map-print-title").hide()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../kq":729,"./MapPrint":649,"./Window":694}],653:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("leaflet"),u=(r=o)&&r.__esModule?r:{default:r};var a={position:"topleft",pane:"shadowPane",zIndex:5e4,light_size:256},s=void 0,l=void 0,c=void 0,h=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this;n.options=u.default.extend({},a,e),s=KQ.Local.Control.searchlight.title(),l=KQ.Local.Control.searchlight.titleCancel(),c=KQ.Local.Control.searchlight.length(),n.mask=new Image,n.mask.onload=function(){},n.mask.src="../../images/mask.png",n.maskHalo=new Image,n.maskHalo.onload=function(){},n.maskHalo.src="../../images/mask-halo.png",n.button=new KQ.Control.MapButton("icon iconfont icon-search-light",function(e){n.button.enabled()?n._stop(n):n._start(n)},s,"kq-searchlight"),n.buttonLength=new KQ.Control.MapButton("icon iconfont icon-search-light-length",function(e){var t=KQ.Control.SearchLightSizeDialog.getInstance();console.log(n.options.light_size),t.value(n.options.light_size),t.open(),t.on("change",function(e){n.options.light_size=e.value})},c,"kq-searchlight-length"),n.buttonBar=new KQ.Control.MapButtonBar([n.button,n.buttonLength],{position:n.options.position}),n.buttonBar.setAttribute("id","searchlight-buttonbar"),n.canUpdate=!0}return i(t,[{key:"addTo",value:function(e){var t=this;t.map=e,t.buttonBar.addTo(e),t.map.on("mousemove",function(e){t.button.enabled()&&t.options.layer&&"layerwmts"!==t.options.layer.desc&&(t.containerPoint=e.containerPoint,t.isMouseDown||t.isImgValid&&t._updatePosition([t.containerPoint.x,t.containerPoint.y]))}),t.map.on("mousedown",function(e){t.button.enabled()&&t.options.layer&&"layerwmts"!==t.options.layer.desc&&(t.isMouseDown=!0,t.isMouseDownPos=e.containerPoint)}),t.map.on("mouseup",function(e){t.button.enabled()&&t.options.layer&&"layerwmts"!==t.options.layer.desc&&t.isMouseDown&&(t.isMouseDown=!1,t.isMouseDownPos.equals(e.containerPoint)||(t.isImgValid=!1))}),t.map.on("zoom",function(e){t.button.enabled()&&t.options.layer&&"layerwmts"!==t.options.layer.desc&&(t.isImgValid=!1)}),t.map.on("resize",function(e){t.button.enabled()&&t.options.layer&&"layerwmts"!==t.options.layer.desc&&(t._updateCanvasSize(),t.isImgValid=!1)})}},{key:"_updateImage",value:function(){var t=this,e=t.map.getSize(),n=e.x,r=e.y,i=t.options.layer._source._overlay._currentUrl,o=t.map.getBounds(),a=t.map.getZoom(),s=(t.map.options.crs.project(o.getNorthWest(),a),t.map.options.crs.project(o.getSouthEast(),a),t._getProjectedLogicBound(t.map));console.log("url:"+i),console.log("bound:"+s.min.toString()+" "+s.max.toString()),t.new_img=new Image,t.new_img.setAttribute("crossOrigin","anonymous"),t.new_img.onload=function(){console.log("img onload !!!!!!!!!!"),t.img&&(delete t.img,t.isImgValid=!1),t.img=t.new_img,t.isImgValid=!0,t.new_img=null;var e=t.containerPoint?t.containerPoint:[n/2,r/2];t._updatePosition([e.x,e.y],s)},t.new_img.onerror=function(){console.log("img onerror !!!!!!!!!!")},t.new_img.src=i,t.bound=s}},{key:"_updatePosition",value:function(e,t){var n=this,r=n.map.getSize(),i=r.x,o=r.y;if(n.cacheCanvas.width===i&&n.cacheCanvas.height===o&&n.isImgValid&&n.img){n._imageOverlay&&t&&(n._imageOverlay.remove(),delete n._imageOverlay,n._imageOverlay=null),t=t||this.bound;var a=n.options.light_size;if(n._imageOverlay){if(n.canUpdate){n.canUpdate=!1,setTimeout(function(){n.canUpdate=!0},60),n.cacheCtx.save(),n.cacheCtx.clearRect(0,0,n.cacheCanvas.width,n.cacheCanvas.height),n.cacheCtx.drawImage(n.mask,e[0]-a/2,e[1]-a/2,a,a),n.cacheCtx.globalCompositeOperation="source-in",n.cacheCtx.drawImage(n.img,0,0),n.cacheCtx.restore();var s=n.cacheCanvas.toDataURL("png");n._imageOverlay._image.src=s}}else{n.cacheCtx.save(),n.cacheCtx.clearRect(0,0,n.cacheCanvas.width,n.cacheCanvas.height),n.cacheCtx.drawImage(n.mask,e[0]-a/2,e[1]-a/2,a,a),n.cacheCtx.globalCompositeOperation="source-in",n.cacheCtx.drawImage(n.img,0,0),n.cacheCtx.restore();var l=n.cacheCanvas.toDataURL("png");n._imageOverlay=new KQ.Struct.ImageOverlay(l,t),n._imageOverlay.addTo(n.map)}}}},{key:"_updateCanvasSize",value:function(){var e=this.map.getSize(),t=e.x,n=e.y;this.cacheCanvas?this.cacheCanvas.width===t&&this.cacheCanvas.height===n||(delete this.cacheCtx,delete this.cacheCanvas,this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d"),this.cacheCanvas.width=t,this.cacheCanvas.height=n):(this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d"),this.cacheCanvas.width=t,this.cacheCanvas.height=n)}},{key:"_start",value:function(n){var r=KQ.Control.Manager.getInstance().getMapView(),e=r.getTree(),i=r.getTree().getActiveLayerKey();if(!i||i<0)KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.mustSelectLayer());else if(e.getCheckedLayers().length<2)KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.atLeastCheckTwoLayers());else{n.isImgValid=!1;var t=e._mapLayerManager.resetSourceFromKey(i);t?(e._updateLayerGroup(t),KQ.Control.Waiting.show(KQ.Control.Manager.getInstance()._getMap()),setTimeout(function(){var e=r.getTree()._getMapLayerFromKey(i);if(e){if(e.wmtsParams){var t=n.options.light_size;n.wmtsLayer=new KQ.Map.MapLayerWMTSMask(e._url,{maskSize:t,style:e.options.style,layer:e.options.layer,tilematrixSet:e.options.tilematrixSet,format:e.options.format},n.options.zIndex),n.wmtsLayer.addTo(n.map),n.button.setTitle(l),n.button.setEnabled(!n.button.enabled()),$("#sidebar").css("pointer-events","none"),$("#sidebyside-buttonbar").css("pointer-events","none"),$("#screenshot-buttonbar").css("pointer-events","none"),$(".kq-advmenu-btn-side-by-side").css("pointer-events","none"),$(".kq-advmenu-btn-screenshot").css("pointer-events","none"),KQ.Control.Notification.getInstance().showInfo(KQ.Local.Control.searchlight.maskStart()),KQ.Control.Manager.getInstance()._unselectAllControlsExcept("searchlight")}else{if(!e._source._overlay._currentUrl)return KQ.Control.Waiting.close(),void KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.mustCheckLayer());n.button.setTitle(l),n.button.setEnabled(!n.button.enabled()),$("#sidebar").css("pointer-events","none"),$("#sidebyside-buttonbar").css("pointer-events","none"),$("#screenshot-buttonbar").css("pointer-events","none"),$(".kq-advmenu-btn-side-by-side").css("pointer-events","none"),$(".kq-advmenu-btn-screenshot").css("pointer-events","none"),KQ.Control.Notification.getInstance().showInfo(KQ.Local.Control.searchlight.maskStart()),KQ.Control.Manager.getInstance()._unselectAllControlsExcept("searchlight"),n.options.layer=e,r._getMap().dragging.enable(),n.options.layer._source._overlay.on("done",n._onLayerDone,n),n._updateCanvasSize(),n._updateImage()}KQ.Control.Waiting.close()}else KQ.Control.Waiting.close()},2e3)):KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.mustSelectLeafLayer())}}},{key:"_stop",value:function(e){e.button.enabled()&&(e.button.setTitle(s),e.button.setEnabled(!e.button.enabled()),$("#sidebar").css("pointer-events","auto"),$("#sidebyside-buttonbar").css("pointer-events","auto"),$("#screenshot-buttonbar").css("pointer-events","auto"),$(".kq-advmenu-btn-side-by-side").css("pointer-events","auto"),$(".kq-advmenu-btn-screenshot").css("pointer-events","auto"),KQ.Control.Notification.getInstance().showSuccess(KQ.Local.Control.searchlight.maskRestore()),e.options.layer&&e.options.layer._source&&e.options.layer._source._overlay.off("done",e._onLayerDone,e),e._imageOverlay&&(e._imageOverlay.remove(),delete e._imageOverlay,e._imageOverlay=null),e.img&&(delete e.img,e.img=null,e.isImgValid=!1),e.wmtsLayer&&(e.wmtsLayer.remove(),delete e.wmtsLayer,e.wmtsLayer=null))}},{key:"_onLayerDone",value:function(){this.button.enabled()&&this._updateImage()}},{key:"_getProjectedLogicBound",value:function(e){var t=e.getSize(),n=e.getCenter(),r=this.options.crs||e.options.crs,i=e.project(n,e.getZoom()),o=new u.default.Point(i.x-t.x/2,i.y-t.y/2),a=new u.default.Point(i.x+t.x/2,i.y+t.y/2),s=e.unproject(o,e.zoom),l=e.unproject(a,e.zoom);return new u.default.Bounds(r.project(s),r.project(l))}},{key:"remove",value:function(){this.map.removeControl(this.buttonBar)}}]),t}();n.default=h},{leaflet:473}],654:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._markers=L.markerClusterGroup()}return r(e,[{key:"addToMapView",value:function(e){e._getMap().addLayer(this._markers)}},{key:"addLayers",value:function(e){this._markers.addLayers(e)}},{key:"addLayer",value:function(e){this._markers.addLayer(e)}},{key:"removeLayer",value:function(e){this._markers.removeLayer(e)}},{key:"clearLayers",value:function(){this._markers.clearLayers()}}]),e}();n.default=i},{}],655:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i={position:"topleft",localization:"cn",primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"sqmeters",secondaryAreaUnit:"sqkilometers",activeColor:"#74A402",completedColor:"#B82832",units:{sqkilometers:{factor:1e-6,display:"sqkilometers",decimals:3}},onMeasureStart:function(e){console.log("onMeasureStart!")},onMeasureFinish:function(e){console.log("onMeasureFinish!")}},o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.localization=KQ.Local.getCurrentLanguage(),t.options=L.extend({},i,e),t.measure=new L.Control.Measure(t.options),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Evented),r(n,[{key:"addTo",value:function(e){this._map=e,this._map.on("measurestart",this.options.onMeasureStart),this._map.on("measurefinish",this.options.onMeasureFinish),this.measure.addTo(e)}},{key:"remove",value:function(){this._map.off("measurestart",this.options.onMeasureStart),this._map.off("measurefinish",this.options.onMeasureFinish),this._map.removeControl(this.measure)}},{key:"clearMeasure",value:function(){this.measure._layer.clearLayers()}}]),n}();n.default=o},{}],656:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("../kq")),o=a(e("leaflet"));function a(e){return e&&e.__esModule?e:{default:e}}var s={position:"topleft"},l=void 0,u=void 0,c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=o.default.extend({},s,e)}return r(t,[{key:"addTo",value:function(e){var t=this;t._map=e,l=i.default.Local.Control.measureSeparate.titleMeasureLength(),u=i.default.Local.Control.measureSeparate.titleMeasureArea(),t.buttonLength=new i.default.Control.MapButton("iconfont icon-measure-length",function(e){i.default.Control.Manager.getInstance()._unselectAllControlsExcept("measureseparate"),t._stopPreviousMeasure(),t._map._distControl&&(t._map._distControl._disableCompute(),t._map._distControl._enableCompute())},l,"kq-measureseparate-length"),t.buttonArea=new i.default.Control.MapButton("iconfont icon-measure-area",function(e){i.default.Control.Manager.getInstance()._unselectAllControlsExcept("measureseparate"),t._stopPreviousMeasure(),t._map._areaControl&&(t._map._areaControl._disableCompute(),t._map._areaControl._enableCompute())},u,"kq-measureseparate-area"),t.buttonBar=new i.default.Control.MapButtonBar([t.buttonLength,t.buttonArea],{position:t.options.position}),t.buttonBar.setAttribute("id","measureseparate-buttonbar"),this.buttonBar.addTo(this._map)}},{key:"addToMapView",value:function(e){this.addTo(e._getMap())}},{key:"disable",value:function(){this._map._distControl&&(this._map._distControl._finishCompute(),this._map._areaControl._finishCompute())}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"clearDistLayers",value:function(){this._map._distControl._clearLayers.call(this._map._distControl._currentDist)}},{key:"clearAreaLayers",value:function(){this._map._areaControl._clearLayers.call(this._map._areaControl._compute)}},{key:"_stopPreviousMeasure",value:function(){this._map._distControl&&this._map._distControl._finishCompute(),this._map._areaControl&&this._map._areaControl._finishCompute()}}]),t}();n.default=c},{"../kq":729,leaflet:473}],657:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),m=r(e("../kq")),g=r(e("leaflet")),s=r(e("./Window")),y=r(e("../common/CommonValues")),_=r(e("./toolbar/NetworkAnalysisMenu")),v=e("leaflet-ant-path");function r(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._networkAnalysisDialog=null,this._isFirstOpen=!0,this._routeGroup=null,this._html=m.default.Local.Control.NetworkAnalysisDialog.html,this._networkAnalysisTypes=m.default.Local.Control.NetworkAnalysisDialog.networkAnalysisTypes,this._other=m.default.Local.Control.NetworkAnalysisDialog.other}var t,n,r,i,o;return a(e,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__select-type__",this._html.selectType()).replace("__select-mode__",this._html.selectMode()).replace("__select-layer__",this._html.selectLayer()).replace("__analysis__",this._html.analysis()).replace("__clear__",this._html.clear())}},{key:"isOpen",value:function(){return null!=this._networkAnalysisDialog&&!this._networkAnalysisDialog.element.is(":hidden")}},{key:"open",value:(o=l(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initNetworkAnalysisWindow();case 3:t._initNetworkAnalysisHtml(),t._networkAnalysisDialog&&(t._initLayerGroup(),t._networkAnalysisDialog.open());case 5:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"_init",value:(i=l(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initNetworkAnalysisWindow();case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_initNetworkAnalysisWindow",value:(r=l(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n={title:m.default.Local.Control.NetworkAnalysisDialog.networkAnalysis(),width:"270px",height:"265px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:["Close"],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){t.close(),_.default.getInstance().exitNetworkAnalysisMode()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new s.default("network-analysis-dialog",n),e.next=5,r.initAsync(function(){t._networkAnalysisDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_initNetworkAnalysisHtml",value:function(){var e,p=this,t=[{text:this._networkAnalysisTypes.optimal_path(),value:y.default.networkAnalysisTypes.optimal_path},{text:this._networkAnalysisTypes.traveling_salesman_problem(),value:y.default.networkAnalysisTypes.traveling_salesman_problem},{text:this._networkAnalysisTypes.trace_back(),value:y.default.networkAnalysisTypes.trace_back}];$("#network-analysis-type-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:t,animation:!1,change:function(){var e=parseInt($("#network-analysis-type-dropdownlist").val());$("#"+y.default.mapContainerID).trigger("network-analysis_type_changed",e),$("#network-analysis-mode-dropdownlist").data("kendoDropDownList").setDataSource(p._getModeDataSourceByType(e))}}).data("kendoDropDownList"),$("#network-analysis-mode-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:p._getModeDataSourceByType(y.default.networkAnalysisTypes.optimal_path),animation:!1}).data("kendoDropDownList"),$("#network-analysis-layer-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:p._getNetworkAnalysisDataSource(),animation:!1}).data("kendoDropDownList"),$("#network-analysis-execute-btn").kendoButton({click:(e=l(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p._clearLayerGroup(),t=p._getQueryOptions(),e.next=5,p._getQueryData(t);case 5:if(0!==(n=e.sent).length){if(r=p._formatResultData(n),$("#network-analysis-type-dropdownlist").val()==y.default.networkAnalysisTypes.trace_back)for(i=0;i<r.length;++i)o=r[i],a=(0,v.antPath)(o,p._tracebackPathOptions()),p._routeGroup.addLayer(a),a.on("contextmenu",function(){});else{for(s=[],l=0;l<r.length;++l)s.push.apply(s,b(r[l]));u=g.default.polyline(s),p._routeGroup.addLayer(u),u.snakeIn(),u.on("contextmenu",function(){})}for(m.default.Control.Notification.getInstance().showSuccess(p._other.networkAnalysisSuccess()),c={minWidth:"100",closeButton:!1},h=p._getNodeData(n),_.default.getInstance().getStartPointLayer().bindPopup(p._popupTemplateHtml(h[0].direction,h[0].distance),c),f=g.default.icon({iconUrl:m.default.Common.CommonValues.kqwebmapPath+"images/node.png",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-6]}),d=1;d<h.length;++d)p._routeGroup.addLayer(g.default.marker(h[d].coordinate,{icon:f}).bindPopup(p._popupTemplateHtml(h[d].direction,h[d].distance),c))}else m.default.Control.Notification.getInstance().showError(p._other.networkAnalysisFailed());e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m.default.Control.Notification.getInstance().showError(p._other.networkAnalysisFailed());case 12:case"end":return e.stop()}},e,this,[[0,9]])})),function(){return e.apply(this,arguments)})}),$("#network-analysis-clear-btn").kendoButton({click:function(){p._clearLayerGroup()}})}},{key:"close",value:function(){this._networkAnalysisDialog&&(this._clearLayerGroup(),e._instance=null,this._networkAnalysisDialog.destroy())}},{key:"_getNetworkAnalysisDialogId",value:function(){return"network-analysis-dialog"}},{key:"_getNetworkAnalysisDataSource",value:function(){for(var e=m.default.Map.MapConfig.getInstance(),t=e.getAllNetworkAnalysisLayers(),n=[],r=0;r<t.length;++r){var i=t[r];n.push({text:e.getLayerProperty(i,"label"),value:e.getLayerProperty(i,"src_name")+"@@"+e.getLayerProperty(i,"id")})}return n}},{key:"_formatLatLng",value:function(e){return e.lng+","+e.lat}},{key:"_formatLatLngArray",value:function(e){for(var t="",n=0;n<e.length-1;++n)t+=this._formatLatLng(e[n])+",";return 0<=e.length-1&&(t+=this._formatLatLng(e[e.length-1])),t}},{key:"_initLayerGroup",value:function(){if(!this._routeGroup){this._routeGroup=g.default.layerGroup([]),this._routeGroup.desc=this._other.pathLayer();var e=m.default.Control.Manager.getInstance()._getMap();e?e.addLayer(this._routeGroup):console.log("map is null can't loading map!")}}},{key:"_clearLayerGroup",value:function(){this._routeGroup.clearLayers()}},{key:"_getModeDataSourceByType",value:function(e){var t=void 0;switch(e){case y.default.networkAnalysisTypes.optimal_path:t=[{text:this._networkAnalysisTypes.distance_first(),value:y.default.networkAnalysisOptimalPathTypes.distance_first},{text:this._networkAnalysisTypes.time_first(),value:y.default.networkAnalysisOptimalPathTypes.time_first}];break;case y.default.networkAnalysisTypes.traveling_salesman_problem:t=[{text:this._networkAnalysisTypes.greed_method(),value:y.default.networkAnalysisTSPTypes.greed},{text:this._networkAnalysisTypes.trace_back_method(),value:y.default.networkAnalysisTSPTypes.trace_back},{text:this._networkAnalysisTypes.enumeration_method(),value:y.default.networkAnalysisTSPTypes.enumeration}];break;case y.default.networkAnalysisTypes.trace_back:t=[{text:this._networkAnalysisTypes.up(),value:y.default.networkAnalysisTracebackTypes.up},{text:this._networkAnalysisTypes.down(),value:y.default.networkAnalysisTracebackTypes.down}]}return t}},{key:"_getQueryOptions",value:function(){var e=$("#network-analysis-layer-dropdownlist").data("kendoDropDownList").value().split("@@"),t=p(e,2),n=t[0],r=t[1],i=m.default.Map.MapConfig.getInstance().getUrlFromSourceName(n,!1),o=_.default.getInstance().getData(),a=this._formatLatLngArray(o.startPoint),s=this._formatLatLngArray(o.endPoint),l=this._formatLatLngArray(o.impassePoint),u=$("#network-analysis-type-dropdownlist").val(),c=$("#network-analysis-mode-dropdownlist").val(),h="";u!=y.default.networkAnalysisTypes.optimal_path&&u!=y.default.networkAnalysisTypes.traveling_salesman_problem||(h=this._formatLatLngArray(o.wayPoint)),u==y.default.networkAnalysisTypes.traveling_salesman_problem&&(s=this._formatLatLng(o.wayPoint.pop()),h=this._formatLatLngArray(o.wayPoint));var f="";if(0!==o.impasseArea.length){f+="[";for(var d=0;d<o.impasseArea.length-1;++d)f+=JSON.stringify(o.impasseArea[d].toGeoJSON().geometry)+",";f+=JSON.stringify(o.impasseArea[o.impasseArea.length-1].toGeoJSON().geometry)+"]"}return{url:i,layerId:r,origin:a,destination:s,middlepoint:h,barrierpoints:l,avoidareas:f,querytype:u,mode:c}}},{key:"_getQueryData",value:(n=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,r=[],e.prev=2,m.default.Control.Waiting.show(m.default.Control.Manager.getInstance()._getMap()),e.next=6,n._queryData(t);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),m.default.Control.Waiting.close();case 12:return e.prev=12,m.default.Control.Waiting.close(),e.finish(12);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[2,9,12,15]])})),function(e){return n.apply(this,arguments)})},{key:"_queryData",value:(t=l(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.default.Query.NetworkAnalysis.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_tracebackPathOptions",value:function(){return{delay:400,dashArray:[10,20],weight:5,color:"#0000FF",pulseColor:"#FFFFFF",paused:!1,reverse:!1,hardwareAccelerated:!0}}},{key:"_formatResultData",value:function(e){for(var t=[],n=$("#network-analysis-type-dropdownlist").val(),r=e[0].segments.features,i=0;i<r.length;++i){for(var o=[],a=r[i].geometry.coordinates,s=0;s<a.length;++s)n==y.default.networkAnalysisTypes.trace_back?o.push([a[s][1],a[s][0]]):o.push(new g.default.LatLng(a[s][1],a[s][0]));t.push(o)}return t}},{key:"_getNodeData",value:function(e){for(var t=[],n=e[0].segments.features,r=0;r<n.length;++r){var i=n[r];t.push({coordinate:[i.geometry.coordinates[0][1],i.geometry.coordinates[0][0]],direction:i.properties.direction,distance:Number(i.properties.length).toFixed(2)})}return t}},{key:"_popupTemplateHtml",value:function(e,t){return"<div>"+("<div style='font-weight: bold; font-size: 13px; margin-bottom: 4px'>"+this._other.toNextInflexion()+"</div>")+("<div style='margin-bottom: 4px'>"+this._other.direction()+": "+e+"</div>")+("<div>"+this._other.distance()+": "+t+this._other.meter()+"</div>")+"</div>"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{"../common/CommonValues":606,"../kq":729,"./Window":694,"./toolbar/NetworkAnalysisMenu":715,leaflet:473,"leaflet-ant-path":470}],658:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i={right:10,bottom:10},o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L.extend({},i,e),this.parent_id=KQ.Common.CommonValues.mapContainerID,this.notification=$("#notification").kendoNotification({position:{pinned:!0,right:this.options.right,bottom:this.options.bottom},autoHideAfter:5e3,stacking:"default",templates:[{type:"kq-success-s",template:$("#successTemplate_s").html()},{type:"kq-success-m",template:$("#successTemplate_m").html()},{type:"kq-success-l",template:$("#successTemplate_l").html()},{type:"kq-info-s",template:$("#infoTemplate_s").html()},{type:"kq-info-m",template:$("#infoTemplate_m").html()},{type:"kq-info-l",template:$("#infoTemplate_l").html()},{type:"kq-error-s",template:$("#errorTemplate_s").html()},{type:"kq-error-m",template:$("#errorTemplate_m").html()},{type:"kq-error-l",template:$("#errorTemplate_l").html()}]}).data("kendoNotification"),$(document).one("kendo:pageUnload",function(){this.notification&&this.notification.hide()})}return r(t,[{key:"setOptions",value:function(e){this.options=L.extend({},this.options,e)}},{key:"showInfo",value:function(e,t){var n=this,r=n._getMsgVisualLength(e),i="kq-info-l";r<210?i="kq-info-s":210<r&&r<320&&(i="kq-info-m"),e=n._cutMsg(e,500),n._resetPosition(),t=t||100,setTimeout(function(){n.notification.show({message:e},i)},t)}},{key:"showError",value:function(e,t){var n=this,r=n._getMsgVisualLength(e),i="kq-error-l";r<210?i="kq-error-s":210<r&&r<320&&(i="kq-error-m"),e=n._cutMsg(e,500),n._resetPosition(),t=t||100,setTimeout(function(){n.notification.show({message:e},i)},t)}},{key:"showSuccess",value:function(e,t){var n=this,r=n._getMsgVisualLength(e),i="kq-success-l";r<210?i="kq-success-s":210<r&&r<320&&(i="kq-success-m"),e=n._cutMsg(e,500),n._resetPosition(),t=t||100,setTimeout(function(){n.notification.show({message:e},i)},t)}},{key:"_cutMsg",value:function(e,t){var n=e;if(this._getMsgVisualLength(n)>t)for(n+="...";this._getMsgVisualLength(n)>t;)n=n.substring(0,n.length-4)+"...";return n}},{key:"_resetPosition",value:function(){var e=KQ.Common.CommonTools._getMapAbsoluteRightBottom(),t=$(window).width()-e[0]+this.options.right,n=$(window).height()-e[1]+this.options.bottom;this.notification.options.position.right=t,this.notification.options.position.bottom=n}},{key:"_getMsgVisualLength",value:function(e){var t=$("#kq-n-text-test");return t.text(e),t.outerWidth()}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}},{key:"_insertNotificationHtml",value:function(){console.log("_insertNotificationHtml !!!!!!");var e=KQ.Common.CommonValues.mapContainerID;$("#"+e).prepend('\n      <span id="kq-n-text-test"></span>\n      <span id="notification" style="display:none;"></span>\n      \n      <script id="successTemplate_s" type="text/x-kendo-template">\n          <div class="kq-success kq-notification-s">\n              <img src="../../images/notification/success-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="successTemplate_m" type="text/x-kendo-template">\n          <div class="kq-success kq-notification-m">\n              <img src="../../images/notification/success-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="successTemplate_l" type="text/x-kendo-template">\n          <div class="kq-success kq-notification-l">\n              <img src="../../images/notification/success-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>\n      \n      <script id="infoTemplate_s" type="text/x-kendo-template">\n          <div class="kq-info kq-notification-s">\n              <img src="../../images/notification/info-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="infoTemplate_m" type="text/x-kendo-template">\n          <div class="kq-info kq-notification-m">\n              <img src="../../images/notification/info-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>         \n      <script id="infoTemplate_l" type="text/x-kendo-template">\n          <div class="kq-info kq-notification-l">\n              <img src="../../images/notification/info-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>\n      \n      <script id="errorTemplate_s" type="text/x-kendo-template">\n          <div class="kq-error kq-notification-s">\n              <img src="../../images/notification/error-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="errorTemplate_m" type="text/x-kendo-template">\n          <div class="kq-error kq-notification-m">\n              <img src="../../images/notification/error-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>    \n      <script id="errorTemplate_l" type="text/x-kendo-template">\n          <div class="kq-error kq-notification-l">\n              <img src="../../images/notification/error-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>\n      ')}}]),t}();n.default=o},{}],659:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("../kq")),a=r(e("./OverlayAnalysisResultDialog")),s=r(e("./OverlayAnalysisTree")),l=(r(e("./Manager")),r(e("./QueryAnalysis")));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._config=o.default.Query.OverlayAnalysisConfig.getInstance(),t._init(),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.default),i(n,[{key:"addTo",value:function(e){this._map=e}},{key:"_init",value:(r=u(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initHtml("overlay_analysis");case 3:t._layerTree=new s.default("overlayAnalysisLayerTree"),t._bindEvent(),t._resiezeLayerTree();case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_getResultDialogInstance",value:function(){return a.default.getInstance()}},{key:"_bindEvent",value:function(){var e=this;$("#overlay-analysis-execute").kendoButton({click:function(){e._executeAnalysis()}}),$("#overlay-analysis-execute").kendoTooltip({position:"top",showAfter:o.default.Common.CommonValues.showAfterInMsec,content:function(e){return o.default.Local.Control.queryAnalysis.executeAnalysis()}}).data("kendoTooltip"),$("#overlay-analysis-draw").kendoButton({click:function(){e._toggleDrawingPanel()}}),$("#overlay-analysis-draw").kendoTooltip({position:"top",showAfter:o.default.Common.CommonValues.showAfterInMsec,content:function(e){return o.default.Local.Control.queryAnalysis.setAnalysisExtent()}}).data("kendoTooltip")}},{key:"_resiezeLayerTree",value:function(){var i=this;i._prevWindowHeight=window.innerHeight,$(window).resize(function(e){var t=e.target.innerHeight,n=t-i._prevWindowHeight,r=$("#overlayAnalysisLayerTree .k-grid-content").height()+n;$("#overlayAnalysisLayerTree .k-grid-content").height(r),i._prevWindowHeight=t})}},{key:"_queryData",value:(t=u(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.default.Query.OverlayAnalysis.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),n}();n.default=c},{"../kq":729,"./Manager":643,"./OverlayAnalysisResultDialog":661,"./OverlayAnalysisTree":662,"./QueryAnalysis":666}],660:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=(a(e("./Window")),a(e("./QueryResultChart")));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default),r(n,[{key:"open",value:function(e,t){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_mergeOptions",this).call(this,t),i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"open",this).call(this,e)}},{key:"_getChartDialogId",value:function(){return"overlay-query-result-chart-dialog"}},{key:"_getChartId",value:function(){return"overlay-query-result-chart"}},{key:"_getChartPieId",value:function(){return"chartPie_overlay"}},{key:"_getChartBarId",value:function(){return"chartBar_overlay"}},{key:"_exportImageButtonId",value:function(){return"exportImage_overlay"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultChart":667,"./Window":694}],661:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./QueryResultDialog"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._desc="overlay-analysis-",t._title=KQ.Local.Control.overlayAnalysisResultDialog.title(),t._init(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"_initHtml",value:function(){var e=KQ.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="overlay-analysis-result-dialog"><div id="overlay-analysis-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"overlay-analysis-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"overlay-analysis-layer-name-tabs"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultDialog":668}],662:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("../kq")),i=o(e("./QueryTree"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._config=r.default.Query.OverlayAnalysisConfig.getInstance(),t._init(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),n}();n.default=a},{"../kq":729,"./QueryTree":669}],663:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Window"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=t;return n.options=L.extend({},s,e),n._markers=L.markerClusterGroup({chunkedLoading:!0}),n._initPanoramaButton(),n.urls=["https://pannellum.org/images/alma.jpg","https://pannellum.org/images/jfk.jpg","https://pannellum.org/images/cerro-toco-0.jpg","https://i.imgur.com/G7t9QD9.jpg","https://pannellum.org/images/tocopilla.jpg","https://pannellum.org/images/alma-correlator-facility.jpg"],t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,L.Evented),i(r,[{key:"_initPanoramaButton",value:function(){var e=this;e.button=new KQ.Control.MapButton("icon iconfont icon-camera",function(){e.button.enabled()?e._stop(e):e._start(e)},"全景图"),e.buttonBar=new KQ.Control.MapButtonBar([e.button],{position:e.options.position})}},{key:"_initDialog",value:function(){var e=this,t=new a.default("panorama",{scrollable:!1,actions:["Close"],title:"全景图",width:900,height:700,appendTo:"#map"});t.initAsync(function(){e._resultDialog=t._object()})}},{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e),$("#map").append('<div id="panorama"></div>'),this._initDialog()}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_start",value:function(){this.button.setTitle("取消全景图"),this.button.setEnabled(!this.button.enabled()),this._addPanoramaMarkers()}},{key:"_stop",value:function(){this.button.setTitle("全景图"),this.button.setEnabled(!this.button.enabled()),this._removePanoramaMarkers()}},{key:"_removePanoramaMarkers",value:function(){var e=KQ.Control.Manager.getInstance()._getMap();this._markers.clearLayers(),e.removeLayer(this._markers)}},{key:"_addPanoramaMarkers",value:function(){for(var e=KQ.Control.Manager.getInstance()._getMap(),t=e.getCenter(),n=0;n<1e3;++n){var r=L.latLng(t.lat+.1*Math.random(),t.lng+.1*Math.random()),i=this._createMarker(r);this._bindMarkerEvent(i),this._markers.addLayer(i)}e.addLayer(this._markers)}},{key:"_createMarker",value:function(e){return new KQ.Map.MapMarker(e,{extraIcon:{icon:"icon iconfont icon-camera",markerColor:"blue",shape:"circle",prefix:"fa"},url:this.urls[parseInt(997*Math.random())%6]})}},{key:"_bindMarkerEvent",value:function(e){var t=this;e.on("click",function(){0<$("#panorama .pnlm-render-container").length&&$("#panorama .pnlm-render-container").remove(),pannellum.viewer("panorama",{type:"equirectangular",panorama:this.options.url,autoLoad:!0,compass:!0}),t._resultDialog.open()})}}]),r}();n.default=l},{"./Window":694}],664:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var l=new Map,i={tickLen:250,speed:10,maxInterpolationTime:3e5,tracksLayer:!0,playControl:!0,dateControl:!0,sliderControl:!0,tracksLayerPosition:"bottomleft",playControlPosition:"bottomleft",dateControlPosition:"bottomleft",sliderControlPosition:"bottomleft",geojson:null,onPlaybackTimeChange:null,popups:!0,popups_autoClose:!0,tooltips:!1,orientIcons:!1,label_play:"",label_stop:"",label_gpsTrack:"",label_latlng:"",layer:{pointToLayer:function(e,t){var n=l.get(e);n||(n=0);var r=KQ.Common.ThemeManager.getInstance().mainColor(),i={radius:5,stroke:!0,color:r,weight:1,opacity:.8,fill:!0,fillColor:r,fillOpacity:.4,clickable:!0};e.properties&&e.properties.style&&(i=e.properties.style);var o="";if(e.properties&&e.properties.time){var a=e.properties.time[n];o=(a=L.Playback.Util.DateStr(a)+" "+L.Playback.Util.TimeStr(a))+"<br>"+t.lng+", "+t.lat}else o=t.lng+", "+t.lat;var s=new L.CircleMarker(t,i);return s.bindTooltip(o),n++,l.set(e,n),s}},marker:function(e){var t={};e.properties&&e.properties.extraIcon?t.icon=L.ExtraMarkers.icon(e.properties.extraIcon):e.properties&&e.properties.icon?t.icon=L.icon(e.properties.icon):t.icon=L.ExtraMarkers.icon({icon:"fa-coffee",markerColor:"blue",shape:"square",prefix:"fa"});var n=null,r=null,i="";return e&&e.properties&&e.properties.popup_label&&(n='\n        <label class="playback-marker-popup-label">\n          <strong>'+e.properties.popup_label+"</strong>\n        </label>\n      "),e&&e.properties&&e.properties.popup_img&&(r='<img class="playback-marker-popup-img" src='+e.properties.popup_img+' alt="">'),(n||r)&&(i='<div class="playback-marker-popup-container">        \n        '+n+"\n        "+r+"\n      </div>",t.getPopup=function(){return i}),e&&e.properties&&e.properties.is_init_popup&&(t.is_init_popup=e.properties.is_init_popup),t}},o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i.label_play=KQ.Local.Control.playback.label_play(),i.label_stop=KQ.Local.Control.playback.label_stop(),i.label_gpsTrack=KQ.Local.Control.playback.label_gpsTrack(),i.label_latlng=KQ.Local.Control.playback.label_latlng(),this.options=L.extend({},i,e)}return r(t,[{key:"addToMapView",value:function(e){this.playback=new L.Playback(e._getMap(),this.options.geojson,this.options.onPlaybackTimeChange,this.options)}},{key:"remove",value:function(){this.playback.destroy()}},{key:"toggle",value:function(){this.playback.toggle()}},{key:"clearData",value:function(){this.playback.clearData()}},{key:"setData",value:function(e){this.checkData(e),this.playback.setData(e)}},{key:"start",value:function(){this.playback.start()}},{key:"stop",value:function(){this.playback.stop()}},{key:"getSpeed",value:function(){return this.playback.getSpeed()}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"setSpeed",value:function(e){this.playback.setSpeed(e)}},{key:"setCursor",value:function(e){this.playback.setCursor(e)}},{key:"getTime",value:function(){return this.playback.getTime()}},{key:"getStartTime",value:function(){return this.playback.getStartTime()}},{key:"getEndTime",value:function(){return this.playback.getEndTime()}},{key:"getTickLen",value:function(){return this.playback.getTickLen()}}]),t}();n.default=o},{}],665:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft",content:'<div id="plotting"></div>',classes:"",orientation:"vertical",style:{position:"absolute"}},l=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=t;return n.options=L.extend({},s,e),n._plotTypes={},n._plotTypes[a.default.Local.Control.plot.types.arc()]=P.PlotTypes.ARC,n._plotTypes[a.default.Local.Control.plot.types.curve()]=P.PlotTypes.CURVE,n._plotTypes[a.default.Local.Control.plot.types.polyline()]=P.PlotTypes.POLYLINE,n._plotTypes[a.default.Local.Control.plot.types.closedCurve()]=P.PlotTypes.CLOSED_CURVE,n._plotTypes[a.default.Local.Control.plot.types.freeHandLine()]=P.PlotTypes.FREEHAND_LINE,n._plotTypes[a.default.Local.Control.plot.types.circle()]=P.PlotTypes.CIRCLE,n._plotTypes[a.default.Local.Control.plot.types.ellipse()]=P.PlotTypes.ELLIPSE,n._plotTypes[a.default.Local.Control.plot.types.lune()]=P.PlotTypes.LUNE,n._plotTypes[a.default.Local.Control.plot.types.sector()]=P.PlotTypes.SECTOR,n._plotTypes[a.default.Local.Control.plot.types.rectangle()]=P.PlotTypes.RECTANGLE,n._plotTypes[a.default.Local.Control.plot.types.triangle()]=P.PlotTypes.TRIANGLE,n._plotTypes[a.default.Local.Control.plot.types.gatheringPlace()]=P.PlotTypes.GATHERING_PLACE,n._plotTypes[a.default.Local.Control.plot.types.polygon()]=P.PlotTypes.POLYGON,n._plotTypes[a.default.Local.Control.plot.types.freeHandPolygon()]=P.PlotTypes.FREEHAND_POLYGON,n._plotTypes[a.default.Local.Control.plot.types.doubleArrow()]=P.PlotTypes.DOUBLE_ARROW,n._plotTypes[a.default.Local.Control.plot.types.straightArrow()]=P.PlotTypes.FINE_ARROW,n._plotTypes[a.default.Local.Control.plot.types.fineArrow()]=P.PlotTypes.STRAIGHT_ARROW,n._plotTypes[a.default.Local.Control.plot.types.assaultDirection()]=P.PlotTypes.ASSAULT_DIRECTION,n._plotTypes[a.default.Local.Control.plot.types.attackArrow()]=P.PlotTypes.ATTACK_ARROW,n._plotTypes[a.default.Local.Control.plot.types.tailedAttackArrow()]=P.PlotTypes.TAILED_ATTACK_ARROW,n._plotTypes[a.default.Local.Control.plot.types.squadCombat()]=P.PlotTypes.SQUAD_COMBAT,n._plotTypes[a.default.Local.Control.plot.types.tailedSquadCombat()]=P.PlotTypes.TAILED_SQUAD_COMBAT,n._initPlottingButton(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,L.Evented),i(r,[{key:"_initPlottingButton",value:function(){var e=this;e.button=new a.default.Control.MapButton("icon iconfont icon-plot",function(){e.button.enabled()?e._stop(e):e._start(e)},a.default.Local.Control.plot.startTitle()),e.buttonBar=new a.default.Control.MapButtonBar([e.button],{position:e.options.position}),e.buttonBar.setAttribute("id","plotting-buttonbar")}},{key:"addTo",value:function(e){var t=this;t._map=e,t.buttonBar.addTo(e),t._mapPlot=a.default.Map.MapPlot.getInstance(),t._mapPlot.addTo(e),-1!==t.options.position.indexOf("left")?(t.options.style.top=$(".icon-plot").offset().top-15+"px",t.options.style.left="42px"):(t.options.style.top=$(".icon-plot").offset().top-15+"px",t.options.style.right="42px"),t._advmenu=new a.default.Control.Custom(t.options),t._advmenu.addTo(t._map),t._createPlottingPanel(),$("#plotting").hide()}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_start",value:function(){this.button.setTitle(a.default.Local.Control.plot.endTitle()),this.button.setEnabled(!0),this.showPanelBar(),a.default.Control.Manager.getInstance()._unselectAllControlsExcept("plotting")}},{key:"_stop",value:function(){this.button.setTitle(a.default.Local.Control.plot.startTitle()),this.button.setEnabled(!1),this.hidePanelBar()}},{key:"hidePanelBar",value:function(){$("#plotting").slideUp()}},{key:"showPanelBar",value:function(){$("#plotting").slideDown()}},{key:"_createPlottingPanel",value:function(){var i=this,e=[{text:a.default.Local.Control.plot.linePlot(),spriteCssClass:"icon iconfont icon-plot-line",items:[{text:a.default.Local.Control.plot.types.arc()},{text:a.default.Local.Control.plot.types.curve()},{text:a.default.Local.Control.plot.types.polyline()}]},{text:a.default.Local.Control.plot.polygonPlot(),spriteCssClass:"icon iconfont icon-plot-fill",items:[{text:a.default.Local.Control.plot.types.circle()},{text:a.default.Local.Control.plot.types.ellipse()},{text:a.default.Local.Control.plot.types.lune()},{text:a.default.Local.Control.plot.types.sector()},{text:a.default.Local.Control.plot.types.rectangle()},{text:a.default.Local.Control.plot.types.gatheringPlace()},{text:a.default.Local.Control.plot.types.polygon()},{text:a.default.Local.Control.plot.types.closedCurve()}]},{text:a.default.Local.Control.plot.arrowPlot(),spriteCssClass:"icon iconfont icon-plot-arrow-up",items:[{text:a.default.Local.Control.plot.types.doubleArrow()},{text:a.default.Local.Control.plot.types.straightArrow()},{text:a.default.Local.Control.plot.types.fineArrow()},{text:a.default.Local.Control.plot.types.assaultDirection()},{text:a.default.Local.Control.plot.types.attackArrow()},{text:a.default.Local.Control.plot.types.tailedAttackArrow()},{text:a.default.Local.Control.plot.types.squadCombat()},{text:a.default.Local.Control.plot.types.tailedSquadCombat()}]}];$("#plotting").kendoPanelBar({dataSource:{data:e},select:function(e){var t=$(e.item).find("> .k-link").text(),n=i._plotTypes[t];if(n){a.default.Control.Manager.getInstance()._unselectAllControlsExcept("plotting");var r=a.default.Map.MapPlot.getInstance();i._mapPlot.setPlotType(n),r.startDraw(),i._map.doubleClickZoom.disable()}}}),$("#plotting").css("z-index",1e4),$("#plotting").css("width","200px"),$("#plotting .k-link>.k-sprite").css({width:"24px",height:"24px","font-size":"24px","line-height":"24px",float:"left","margin-top":"2px","margin-right":"6px","vertical-align":"middle"})}},{key:"stopDraw",value:function(){this._mapPlot.stopDraw()}}]),r}();n.default=l},{"../kq":729}],666:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),C=r(e("../kq")),o=r(e("./Manager"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._div=e,this._layerTree=null,this._config=null,this._prevWindowHeight=null}var n,e,r;return i(t,[{key:"addTo",value:function(e){this._map=e}},{key:"_initHtml",value:(r=a(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this)._container=L.DomUtil.get(n._div),n._container||(n._container=L.DomUtil.create("div")),e.next=5,C.default.Common.NetworkTools.httpGetAsync(C.default.Common.CommonValues.kqwebmapPath+"query/"+t+".html");case 5:"error"===(r=e.sent)?console.log(t+".html error"):(r=(r=(r=r.replace("__analysis__",C.default.Local.Control.queryAnalysis.html.analysis())).replace("__extent__",C.default.Local.Control.queryAnalysis.html.extent())).replace("__setAnalysisLayer__",C.default.Local.Control.queryAnalysis.html.setAnalysisLayer()),$(n._container).append(r));case 7:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_executeAnalysis",value:(e=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===(n=(t=this)._getAnalysisLayers()).length)return e.abrupt("return");e.next=6;break;case 6:if(r=C.default.Control.Manager.getInstance().getControl("tree")){e.next=11;break}C.default.Control.Notification.getInstance().showError(C.default.Local.Control.queryAnalysis.notification.getLayerTreeFailed()),e.next=34;break;case 11:if(i=t._getGeometry(),C.default.Control.Notification.getInstance().showInfo(C.default.Local.Control.queryAnalysis.notification.selectInLayerTree()),r.setQueryLayersChecked(n)){e.next=15;break}return e.abrupt("return");case 15:if(null!==i){e.next=19;break}C.default.Control.Notification.getInstance().showError(C.default.Local.Control.queryAnalysis.notification.drawAnalysisGeometry()),e.next=34;break;case 19:return o=[],e.prev=20,C.default.Control.Waiting.show(C.default.Control.Manager.getInstance()._getMap()),e.next=24,t._getQueryData(n,i);case 24:o=e.sent,e.next=30;break;case 27:e.prev=27,e.t0=e.catch(20),C.default.Control.Waiting.close();case 30:return e.prev=30,C.default.Control.Waiting.close(),e.finish(30);case 33:C.default.Query.QueryIDManager.isDataArrayCanceled(o,!0)?console.log("query canceled, data come!"):0===o.length?C.default.Control.Notification.getInstance().showError(C.default.Local.Control.queryAnalysis.notification.analysisRecordEmpty()):(a=t._organizeQueryData(o),t._getResultDialogInstance().open(a));case 34:case"end":return e.stop()}},e,this,[[20,27,30,33]])})),function(){return e.apply(this,arguments)})},{key:"_getResultDialogInstance",value:function(){return null}},{key:"_toggleDrawingPanel",value:function(){o.default.getInstance()._toggleDrawPane()}},{key:"_getAnalysisLayers",value:function(){var e=[],t=this._layerTree.getCheckedLayers();if(0===t.length)C.default.Control.Notification.getInstance().showError(C.default.Local.Control.queryAnalysis.notification.selectAnalysisLayer());else for(var n=0;n<t.length;++n){var r=C.default.Map.MapCommon.getSourceNameLayerIdFromKey(t[n].key);r.queryId=t[n].queryId,e.push(r)}return e}},{key:"_getQueryData",value:(n=a(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this,i=[],o=0;case 3:if(!(o<t.length)){e.next=16;break}if(a=t[o],s=r._getExactConfigLayer(a),l=a.sourceName,null!==(u=r._getQueryOptions(s,l,n)))return e.next=11,r._queryData(u);e.next=13;break;case 11:0<(c=e.sent).length&&i.push({sourceName:a.sourceName,layerId:a.layerId,queryId:u.layerId,records:c});case 13:++o,e.next=3;break;case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"_organizeQueryData",value:function(e){for(var t=[],n=this._config,r=0;r<e.length;++r){var i=[],o=e[r],a=o.sourceName,s=o.layerId,l=o.queryId,u=o.records,c=this._getExactConfigLayer({layerId:s,queryId:l,sourceName:a}),h=n.getLayerLabel(c),f=c._flicker_color,d=n.getLayerFields(c).split(","),p=n.getLayerFieldsAlias(c).split(","),m=[];n.getLayerChartField(c)&&(m=n.getLayerChartField(c).split("|"));var g=[];n.getLayerSummaryField(c)&&(g=n.getLayerSummaryField(c).split("|")),0==g.length&&(g[0]="areaLength");for(var y=0;y<g.length;++y)"OBJECTID"===g[y]&&(g[y]="areaLength");for(var _=C.default.Common.CommonTools._findTooltipFromSourceNameLayerId(a,s),v=0;v<u.length;++v){var b=u[v],w={},x=b.properties;w.geometry=b.geometry,w.areaLength=x.AreaLength2,"1"===c.type&&(w.areaLength=1);for(var k=0;k<d.length;++k){var L=d[k];x.hasOwnProperty(L)&&(w[L]=x[L])}i.push(w)}t.push({sourceName:a,layerId:s,queryId:l,flickerColor:f,label:h,toolTip:_,fields:d,titles:p,chartFields:m,records:i,summaryField:g})}return t}},{key:"_getExactConfigLayer",value:function(e){var t=e.layerId,n=e.queryId,r=e.sourceName;return this._config.findExactLayer(t,n,r)}},{key:"_getSourceFromName",value:function(e,t){return C.default.Map.MapConfig.getInstance().getSourceByName(e,t)}},{key:"_getQueryUrl",value:function(e){return C.default.Map.MapConfig.getInstance().getSourceUrl(this._getSourceFromName(e,!0))}},{key:"_getQueryOptions",value:function(e,t,n){var r=this._config,i=r.getLayerQueryID(e),o=r.getLayerFields(e),a=r.getLayerRequestCount(e),s=r.getLayerQueryPrecision(e);return{url:this._getQueryUrl(t),layerId:i,fields:o,geometry:n=this._formatGeometry(n,s),reqcount:a}}},{key:"_formatGeometry",value:function(e,t){for(var n=$.parseJSON(e),r=n.geometries,i=0;i<r.length;++i){var o=r[i].coordinates;this._formatCoordinates(o,t)}return JSON.stringify(n)}},{key:"_formatCoordinates",value:function(e,t){for(var n=0;n<e.length;++n){if("number"!=typeof e[n])return this._formatCoordinates(e[n],t);e[n]=Number(e[n].toFixed(t))}}},{key:"_getGeometry",value:function(){var e=C.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!1);return e?JSON.stringify(C.default.Common.CommonTools.geoJsonFCToGC(e)):null}}]),t}();n.default=s},{"../kq":729,"./Manager":643}],667:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("./Window")),f=a(e("../kq")),o=a(e("../common/CommonValues"));function a(e){return e&&e.__esModule?e:{default:e}}var s={chartFieldSeparator:"@@",summaryField:"",maxTotalNumber:20,chartFields:[],precision:3,colors:["#7acdc9","#093a76","#74a502","#c14000","#4295d1","#fcaf5c","#d9d56e","#0c686a","#b92832","#ffc30e","#99d9ec","#093a76","#eb6018","#00a99d","#8d6138","#fff568","#0076a3","#c7b399","#563e7e","#c5df9b","#fff568","#ffdfed","#74a502","#d9cfe5","#83cb9d","#d95070","#85871c","#a187bf"]},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._options=s,this._chart=null,this._chartDialog=null,this._isFirstOpen=!0,this._currentChartField=null,this._currentSummaryField=null,this._total=0,this._init()}return r(e,[{key:"_adjustPopupPosition",value:function(){this._isFirstOpen?(this._isFirstOpen=!1,this._chartDialog.center().open()):(this._chartDialog.open(),this._chart.refresh())}},{key:"_getChartSelect",value:function(){return $("#"+this._getChartDialogId()+" select:eq(0)")}},{key:"_getSummarySelect",value:function(){return $("#"+this._getChartDialogId()+" select:eq(1)")}},{key:"_initChartFiledDropDownList",value:function(){var e=this,t=e._getChartSelect(),n=e._getSummarySelect();t.kendoDropDownList({dataSource:e._options.chartFields,change:function(){n.data("kendoDropDownList").select(t.data("kendoDropDownList").select()),e._updateChartFieldAndSummaryField(),e._open()}}),n.kendoDropDownList({dataSource:e._options.summaryField,enable:!1})}},{key:"open",value:function(e){this._dataSource=e,this._initChartFiledDropDownList(),this._updateChartFieldAndSummaryField(),$("#"+this._getChartPieId()).click(),this._open(),this._adjustPopupPosition()}},{key:"_updateChartFieldAndSummaryField",value:function(){var e=this._getChartSelect(),t=this._getSummarySelect();this._currentChartField=e.data("kendoDropDownList").text().split(","),this._currentSummaryField=t.data("kendoDropDownList").text()}},{key:"_open",value:function(){var e=this._getChartDataSource(this._dataSource);this._isRightData(e)&&this._chart.setOptions({title:{text:f.default.Local.Control.queryResultChart.statisticalResult()},seriesDefaults:{labels:{visible:!0,template:this._getLabelTemplate()}},tooltip:{visible:!0,template:this._getTooltipTemplate()},dataSource:e})}},{key:"_init",value:function(){this._initHtml(),this._initChartDialog()}},{key:"_mergeOptions",value:function(e){this._options=L.extend({},s,e)}},{key:"_getChartTypeHtml",value:function(){return'<ul class="chartTypes"><li><input type="radio" name="chart" id="'+this._getChartPieId()+'" class="k-radio" checked="checked"><label class="k-radio-label" for="'+this._getChartPieId()+'">'+f.default.Local.Control.queryResultChart.pieChart()+'</label></li><li> <input type="radio" name="chart" id="'+this._getChartBarId()+'" class="k-radio"><label class="k-radio-label" for="'+this._getChartBarId()+'">'+f.default.Local.Control.queryResultChart.barChart()+'</label></li><li> <button id="'+this._exportImageButtonId()+'">'+f.default.Local.Control.queryResultChart.exportToPrint()+"</button></li></ul>"}},{key:"_getChartFieldHtml",value:function(){return'<div class="chartStatisticsField"><div> <span>'+f.default.Local.Control.queryResultChart.summarylField()+'</span><select class="fieldSelect" style="width: 150px"></select></div><div> <span>'+f.default.Local.Control.queryResultChart.statisticalField()+'</span><select class="fieldSelect" style="width: 150px"></select></div></div>'}},{key:"_getChartHtml",value:function(){return'<div class="chartContainer" id="'+this._getChartId()+'"></div>'}},{key:"_initHtml",value:function(){var e=this._getChartDialogId();$("#"+f.default.Common.CommonValues.mapContainerID).append($('<div id="'+e+'">'+this._getChartTypeHtml()+this._getChartFieldHtml()+this._getChartHtml()+"</div>"))}},{key:"_getDataPrecision",value:function(){return this._options?this._options.precision:3}},{key:"_getLabelTemplate",value:function(){var e=this._getDataPrecision();return $("#"+this._getChartBarId()).prop("checked")?"#= kendo.format('{0:p"+e+"}', value)#":"#=category#: #=kendo.format('{0:p"+e+"}', value)#"}},{key:"_getTooltipTemplate",value:function(){var e=this._getDataPrecision();return"Total: "+kendo.format("{0:n"+e+"}",this._total)+"<br/>#= category #: #=kendo.format('{0:n"+e+"}', dataItem.value1)#"}},{key:"_initChartTypeButton",value:function(){var t=this;$("#"+this._getChartPieId()).click(function(){$("#"+t._getChartId()).data("kendoChart").setOptions({seriesDefaults:{type:"pie",labels:{template:t._getLabelTemplate()},tooltip:{visible:!0,template:t._getTooltipTemplate()}}})}),$("#"+this._getChartBarId()).click(function(){$("#"+t._getChartId()).data("kendoChart").setOptions({seriesDefaults:{type:"column",labels:{template:t._getLabelTemplate()},tooltip:{visible:!0,template:t._getTooltipTemplate()}}})}),$("#"+this._exportImageButtonId()).kendoButton({click:function(e){$("#"+t._getChartId()).data("kendoChart").exportImage().done(function(e){$("#"+o.default.mapContainerID).trigger("export_image_to_printer",e)})}})}},{key:"_initChartDialog",value:function(){var e=this,t={title:f.default.Local.Control.queryResultChart.statisticalChart(),minWidth:"500px",width:"700px",height:"400px",scrollable:!1,actions:["Close"]},n=new i.default(e._getChartDialogId(),t);n.initAsync(function(){e._chartDialog=n._object()}),e._initChartTypeButton(),e._initChart()}},{key:"_initChart",value:function(){this._chart=$("#"+this._getChartId()).kendoChart({chartArea:{opacity:.75},renderAs:"canvas",legend:{position:"left"},title:{margin:{bottom:20,left:60}},seriesDefaults:{type:"pie"},series:[{field:"value",startAngle:150,categoryField:"category"}]}).data("kendoChart")}},{key:"_getCatalogKey",value:function(e){for(var t="",n=this._currentChartField,r=0;r<n.length;++r)t+=e[n[r]]+this._options.chartFieldSeparator;return t}},{key:"_getEachCatalogValue",value:function(e){for(var t={},n=this._currentSummaryField,r=0;r<e.length;++r){var i=e[r],o=this._getCatalogKey(i);t[o]||(t[o]=0),t[o]+=Number(i[n])}return t}},{key:"_getChartDataSource",value:function(e){var t=[],n=this._getEachCatalogValue(e),r=this._currentSummaryField;this._total=f.default.Map.MapCommon._totalStatisticsByField(e,r);var i=0,o=this._options.colors;for(var a in n){var s=o[i++%o.length],l=Number(n[a]/this._total),u=a.split(this._options.chartFieldSeparator).join(" ");t.push({color:s,value:l,value1:n[a],category:u})}for(var c=1,h=0;h<t.length-1;++h)c-=t[h].value;return t[t.length-1].value=c,t}},{key:"_isRightData",value:function(e){var t=this._currentChartField;return this._isRightChartFields(t)?!(e.length>this._options.maxTotalNumber)||(f.default.Control.Notification.getInstance().showError(f.default.Local.Control.queryResultChart.notification.limitStatisticalResult()),!1):(f.default.Control.Notification.getInstance().showError(f.default.Local.Control.queryResultChart.notification.setCorrectField()),!1)}},{key:"_isRightChartFields",value:function(e){return e&&L.Util.isArray(e)&&0<e.length}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../common/CommonValues":606,"../kq":729,"./Window":694}],668:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),k=r(e("../kq")),o=r(e("./Window")),a=r(e("./OverlayAnalysisChart")),s=r(e("./SummaryAnalysis"));function r(e){return e&&e.__esModule?e:{default:e}}var l=e("leaflet"),u=function(e){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),t=e;t._color="",t._fillColor="",t._dataSource=[],t._resultDialog=null,t._layerNameTabs=null,t._desc="",t._title="",t._chartFields=null,t._useDefaultFlicker=!0,t._unitConversionOptions=null,t._layerManager={},t._displayCheckbox=!1,t._checkedIds={},t._defaultFlickerColor=null,t._currentFlickerLayerGuid=null,t._currentSelectDataItem=null,t._checkedAll=!1,t._exportChecked=null,t._showExportCheckedRecord=!1,t._exportMode="all",t._chartFn=function(e,t,n){if(t&&n){var r=e.records;0===k.default.Map.MapCommon._totalStatisticsByField(r,n[0])?k.default.Control.Notification.getInstance().showError(k.default.Local.Control.queryResultDialog.notification.statisticValueIsNull()):a.default.getInstance().open(r,{chartFields:t,summaryField:n})}};var n=k.default.Control.Manager.getInstance()._getMap();return n.createPane("flicker-pane"),n.getPane("flicker-pane").style.zIndex=9e5,n.getPane("flicker-pane").style.pointerEvents="none",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,l.Evented),i(r,[{key:"setChartFields",value:function(e){this._chartFields=e}},{key:"resetChartFields",value:function(){this._chartFields=null}},{key:"open",value:function(e,t){e&&(this._dataSource=e),this._dataProcessingFunc&&this._dataProcessingFunc(this._dataSource);var n=this._getDialogWidth(),r=this._getDialogHeight(),i=this._getDialogPosition(),o={width:n,height:r,showChart:!0,showChartAll:!1,position:{top:i.top,left:i.left}};t=l.extend({},this._options,t),this._options=l.extend({},o,t),this._updateUi(),this._openResultDialog()}},{key:"addDataProcessingFunc",value:function(e){this._dataProcessingFunc=e}},{key:"removeDataProcessingFunc",value:function(){delete this._dataProcessingFunc}},{key:"close",value:function(){this._resultDialog.close()}},{key:"clearFlickerLayer",value:function(){var e=k.default.Control.Manager.getInstance();if(e){var t=e._getMap();k.default.Map.MapCommon.clearFlickerLayer(t)}}},{key:"flickerLayer",value:function(e){var t=k.default.Control.Manager.getInstance()._getMap();k.default.Map.MapCommon.fitBoundsLayer(e,t),k.default.Map.MapCommon.flickerLayer(e,t)}},{key:"setUseDefaultFlicker",value:function(e){this._useDefaultFlicker=e}},{key:"setDisplayCheckbox",value:function(e){this._displayCheckbox=e,this._displayCheckbox||(this._checkedAll=!1)}},{key:"setExportCheckedRecordButton",value:function(e){this._showExportCheckedRecord=e}},{key:"setTitle",value:function(e){this._resultDialog.setOptions({title:e})}},{key:"setOptions",value:function(e){this._options=l.extend({},this._options,e)}},{key:"_openResultDialog",value:function(){this._resultDialog.setOptions(this._options),this._resizeTabsAndGrid(),this._resultDialog.open()}},{key:"_init",value:function(){this._initHtml(),this._initResultDialog(),this._initLayerNameTabs();var e=$("#"+this._getLayerNameTabsId());e.addClass("expend-k-tabstrip"),e.parent().addClass("expend-k-tabstrip")}},{key:"_getMapContainer",value:function(){return"#"+k.default.Common.CommonValues.mapContainerID}},{key:"_getMapContainerWidth",value:function(){var e=this._getMapContainer();return parseInt($(e).css("width"))}},{key:"_getMapContainerHeight",value:function(){var e=this._getMapContainer();return parseInt($(e).css("height"))}},{key:"_getSiderBarContainerWidth",value:function(){var e=parseInt($("#sidebar").css("width"));return e||0}},{key:"_getLeafletControlMargin",value:function(){return 10}},{key:"_getDialogLeftMargin",value:function(){var e=this._getLeafletControlMargin();return this._getSiderBarContainerWidth()+2*e}},{key:"_getDialogWidth",value:function(){return this._getMapContainerWidth()-this._getDialogLeftMargin()-this._getLeafletControlMargin()}},{key:"_getDialogHeight",value:function(){return 280}},{key:"_getDialogOuterHeight",value:function(){return $("#"+this._getResultDialogId()).closest(".k-window").outerHeight()}},{key:"_getDialogPosition",value:function(){return{top:this._getMapContainerHeight()-this._getDialogOuterHeight()-this._getLeafletControlMargin(),left:this._getDialogLeftMargin()}}},{key:"_initResultDialog",value:function(){var n=this,e={animation:!1,scrollable:!1,actions:["Minimize","Close"],title:n._title,height:n._getDialogHeight(),appendTo:n._getMapContainer(),close:function(){n.fire("close",{}),n._useDefaultFlicker&&n.clearFlickerLayer(),n._clearCheckedLayers()},activate:function(){n._resizeTabsAndGrid(),console.log("Window was activate")},resize:function(){n._resizeTabsAndGrid()},minimize:function(e){n._prevPosition=l.extend({},e.sender.options.position),n._setMinimizePosition()}},t=new o.default(n._getResultDialogId(),e);t.initAsync(function(){n._resultDialog=t._object()}),t._object().wrapper.on("click",".k-window-action",function(e){var t=$(e.target);(t.is(".k-i-window-restore")||t.children(".k-i-window-restore")[0])&&n._resultDialog.setOptions({position:n._prevPosition})})}},{key:"_setMinimizePosition",value:function(){var e=this._getDialogLeftMargin(),t=this._getMapContainerHeight()-this._getLeafletControlMargin()-30;$("#"+this._getResultDialogId()).parent().css({left:e,top:t})}},{key:"_initLayerNameTabs",value:function(){this._layerNameTabs=$("#"+this._getLayerNameTabsId()).kendoTabStrip({animation:!1}).data("kendoTabStrip"),this._setLayerNameTabsTooltip()}},{key:"_resizeTabsAndGrid",value:function(){var e=$("#"+this._getLayerNameTabsId()),t=e.children(".k-content"),n=t.filter(":visible");t.height(e.innerHeight()-e.children(".k-tabstrip-items").outerHeight()-parseFloat(n.css("padding-top"))-parseFloat(n.css("padding-bottom"))-parseFloat(n.css("border-top-width"))-parseFloat(n.css("border-bottom-width"))-parseFloat(n.css("margin-bottom")));var r=$("#"+this._getLayerNameTabsId()+">.k-state-active>.expend-k-tabstrip").data("kendoGrid");r&&r.resize()}},{key:"_setLayerNameTabsTooltip",value:function(){var n=this;$("#"+n._getLayerNameTabsId()).kendoTooltip({filter:"li:not(:empty)",position:"top",showAfter:k.default.Common.CommonValues.showAfterInMsec,content:function(e){var t=e.target.index();return 0<=t?n._dataSource[t].toolTip:""}}).data("kendoTooltip")}},{key:"_updateUi",value:function(){this._clearContents(),this._createContents(),this._layerNameTabs.select(0)}},{key:"_clearContents",value:function(){this._layerNameTabs.remove("li")}},{key:"_createContents",value:function(){this._createEachLayerTab(),this._createEachLayersGrid()}},{key:"_createEachLayerTab",value:function(){for(var e=[],t=0;t<this._dataSource.length;++t){var n=this._dataSource[t].label,r="<div id="+this._getLayerGridId(t)+"></div>";e.push({text:n,content:r})}this._layerNameTabs.append(e)}},{key:"_createEachLayersGrid",value:function(){var t=this;$("#"+t._getLayerNameTabsId()).find(".k-content").each(function(e){$(this).append(t._createOneLayerGrid(e))})}},{key:"_createOneLayerGrid",value:function(a){var m=this,s=m._dataSource[a],e=$("#"+m._getLayerGridId(a)),t=m._dataSource[a],n=t.summaryField;t.chartFields||(t.chartFields=[]);var r=t.chartFields.join(""),i=m._options.showChart,o=m._options.showChartAll,l=m._showExportCheckedRecord;n&&r||(o=i=!1),m._checkedIds[a]={};for(var u=0;u<s.records.length;++u)s.records[u].GUID=k.default.Common.ComputeTools.guid();var c=m._getChartButttonId(a),h=m._getChartAllButttonId(a),f=m._getExportCheckedButttonId(a),d=m._getFlickerColorButtonId(a),p='<button style="margin-left: 6px" id="'+c+'"><span class="k-icon k-i-file-excel"></span>'+k.default.Local.Control.queryResultDialog.button.statisticalChart()+"</button>",g='<button style="margin-left: 6px" id="'+h+'"><span class="k-icon k-i-file-excel"></span>'+k.default.Local.Control.queryResultDialog.button.statisticalAllChart()+"</button>",y='<button style="margin-left: 6px" id="'+f+'"><span class="k-icon k-i-file-excel"></span>'+k.default.Local.Control.queryResultDialog.button.exportChecked()+"</button>",_='<div style="float: right; margin-right: 10px"><label>'+k.default.Local.Control.queryResultDialog.button.flickerColor()+'</label><button id="'+d+'"></button></div>',v=[{name:"excel"}];i&&v.push({template:kendo.template(p)}),o&&v.push({template:kendo.template(g)}),l&&v.push({template:kendo.template(y)}),v.push({template:kendo.template(_)}),m._needUnitConversion()&&v.push({template:m._getUnitConversionTemplate(a)}),m._options.detail&&v.push({template:m._getDetailButtonTemplate(a)});var b={resizable:!0,sortable:!0,pageable:!0,selectable:"row",excel:{allPages:!0},toolbar:v,excelExport:function(e){e.workbook.fileName=m._getExcelFileName();var t=e.workbook.sheets[0],n=w.dataSource.data(),r=w.columns,i=r.map(function(e){return{value:e.title?e.title:e.field,autoWidth:!0,background:"#7a7a7a",color:"#fff"}}),o=[{cells:i,type:"header"}];if("select"===m._exportMode)for(var a=this.select(),s=0;s<a.length;++s){for(var l=[],u=this.dataItem(a[s]),c=0;c<i.length;++c)l.push({value:u[i[c].value]});o.push({cells:l,type:"data"})}else for(var h=0;h<n.length;h++){for(var f=[],d=0;d<r.length;d++){var p=n[h][r[d].field];f.push({value:p})}o.push({cells:f,type:"data"})}t.rows=o},messages:{commands:{excel:k.default.Local.Control.queryResultDialog.button.exportExcel()}},columns:m._getLayerColumnInfo(s),dataSource:{data:s.records,pageSize:10},change:function(){if(m._currentSelectDataItem=this.dataItem(this.select()[0]),m._currentSelectDataItem){var e=m._currentSelectDataItem.geometry;if(e&&m._useDefaultFlicker){var t=m._currentSelectDataItem.GUID;if(t===m._currentFlickerLayerGuid)m.clearFlickerLayer(),m._currentFlickerLayerGuid=null;else{m._currentFlickerLayerGuid=t;var n=m._getFlickerLayerStyle(this),r=k.default.Common.CommonTools.geoJsonFromGeometry(e,n,"flicker-pane");m.flickerLayer(r),m.fire("select",{item:m._currentSelectDataItem,layer:r})}}else m.fire("select",{item:m._currentSelectDataItem})}},dataBound:function(){for(var e=this.dataSource.view(),t=0;t<e.length;t++)m._checkedIds[a][e[t].GUID]&&this.tbody.find("tr[data-uid='"+e[t].uid+"']").find(".chkbx").attr("checked","checked")}},w=e.kendoGrid(b).data("kendoGrid");$("#"+m._getLayerGridId(a)+" .k-grid-content").on("click","input.chkbx",function(e){var t=w.dataItem($(e.target).closest("tr"));m._dataItemStateChanged(t,this.checked,a);var n=0;for(var r in m._checkedIds[a])m._checkedIds[a][r]&&n++;s.records.length===n?$("#"+m._getLayerGridId(a)+" .k-grid-header input.chkbx").prop("checked",!0):$("#"+m._getLayerGridId(a)+" .k-grid-header input.chkbx").prop("checked",!1);for(var i=m._dataSource[a].records,o=0;o<i.length;++o)i[o].GUID==t.GUID&&(i[o].state=this.checked)});var x=function(e){for(var t=s.records,n=0;n<t.length;++n)m._dataItemStateChanged(t[n],e,a),t[n].state=e;w.refresh()};return $("#"+m._getLayerGridId(a)+" .k-grid-header").on("change","input.chkbx",function(e){x(this.checked)}),m._checkedAll&&x(!0),i&&m._createChartButton(c),o&&m._createChartAllButton(h),l&&m._createExportCheckedButton(f),m._needUnitConversion()&&m._createUnitConversionUi(m._getUnitConversionComboboxId(a),w,s),m._options.detail&&m._createDetailButton(m._getDetailButttonId(a)),m._createFlickerColorButton(d,s.flickerColor),m._setLayerGridCss(e),m._setLayerGridTooltip(e),m._setLayerGridButtonIcon(e),e}},{key:"_createUnitConversionUi",value:function(e,i,o){var a=this;$("#"+e).kendoComboBox({dataSource:{data:a._getUnitConversionTypes()},index:0,select:function(e){var t=e.item.text(),n=a._unitConversionOptions.rules[t],r=new kendo.data.DataSource({data:a._getUnitConversionData(o,n),pageSize:10});i.setDataSource(r)}})}},{key:"_getUnitConversionData",value:function(e,t){for(var n=[],r=this._unitConversionOptions.field,i=0;i<e.records.length;++i)n.push(l.extend({},e.records[i]));for(var o=0;o<n.length;++o)n[o][r]=t(n[o][r]);return n}},{key:"_getUnitConversionTypes",value:function(){var e=[],t=this._unitConversionOptions.rules;for(var n in t)e.push(n);return e}},{key:"_getUnitConversionTemplate",value:function(e){var t=this._getUnitConversionComboboxId(e);return kendo.template('<div style="float: right; margin-right: 10px"><label style="margin-right: 10px">'+k.default.Local.Control.queryResultDialog.label.unitConversion()+'</label><input id="'+t+'" /></div>')}},{key:"_getDetailButtonTemplate",value:function(e){var t=this._options.detail.title,n=this._getDetailButttonId(e);return kendo.template('<button style="margin-left: 6px" id="'+n+'"><span></span>'+t+"</button>")}},{key:"_needUnitConversion",value:function(){return this._unitConversionOptions}},{key:"setUnitConversionOptions",value:function(e){this._unitConversionOptions=e}},{key:"removeUnitConversionOptions",value:function(){this._unitConversionOptions=null}},{key:"_getcChartFields",value:function(e){var t=this._chartFields?this._chartFields:e.chartFields;return t||(k.default.Control.Notification.getInstance().showError(k.default.Local.Control.queryResultDialog.notification.statisticFieldError()),null)}},{key:"_getSummaryField",value:function(e){var t=e.summaryField;return t&&0!=t.length?t:(k.default.Control.Notification.getInstance().showError("统计字段没有设置"),null)}},{key:"_createChartButton",value:function(e){var r=this;$("#"+e).kendoButton({click:function(){var e=r._dataSource[r._layerNameTabs.select().index()],t=r._getcChartFields(e),n=r._getSummaryField(e);r._chartFn(e,t,n)}})}},{key:"_createChartAllButton",value:function(e){var r=this;$("#"+e).kendoButton({click:function(){var e=r._dataSource[r._layerNameTabs.select().index()],t=r._getcChartFields(e),n=r._getSummaryField(e);t&&n&&new s.default({sourceName:e.sourceName,layerId:e.layerId,queryId:e.queryId})._executeSummaryAnalysis({chartFields:t,summaryField:n})}})}},{key:"_createExportCheckedButton",value:function(e){var t=this;$("#"+e).kendoButton({click:function(){var e=t._dataSource[t._layerNameTabs.select().index()].records;"function"==typeof t._exportChecked&&t._exportChecked(e)}})}},{key:"setExportCheckedRecordFun",value:function(e){this._exportChecked=e}},{key:"setChartFunction",value:function(e){this._chartFn=e}},{key:"_createDetailButton",value:function(e){var t=this;$("#"+e).kendoButton({click:function(){t._options.detail.callback()}})}},{key:"_createFlickerColorButton",value:function(e,t){var n=t||this._defaultFlickerColor||"#36cf1b";$("#"+e).kendoColorPicker({value:n})}},{key:"_setLayerGridCss",value:function(e){e.addClass("expend-k-tabstrip")}},{key:"_setLayerGridTooltip",value:function(e){e.kendoTooltip({filter:"td.hasTooltip:not(:empty)",position:"top",showAfter:k.default.Common.CommonValues.showAfterInMsec,content:function(e){return e.target.text()}}).data("kendoTooltip")}},{key:"_setLayerGridButtonIcon",value:function(e){e.find(".k-grid-toolbar span:eq(0)").removeClass("k-i-file-excel").addClass("icon iconfont icon-excel"),e.find(".k-grid-toolbar button:eq(0)").addClass("k-button-icontext"),e.find(".k-grid-toolbar button:eq(1)").addClass("k-button-icontext"),e.find(".k-grid-toolbar [id*='chart-overlay-analysis'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),e.find(".k-grid-toolbar [id*='chart-all-overlay-analysis'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),e.find(".k-grid-toolbar [id*='chart-advanced-search'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),e.find(".k-grid-toolbar [id*='chart-all-advanced-search'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),e.find(".k-grid-toolbar [id*='export-checked'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-export")}},{key:"_getFlickerLayerStyle",value:function(e){var t=$(e.element).find("[data-role='colorpicker']").data("kendoColorPicker").value();return{color:t,fillColor:t}}},{key:"_getLayerGridId",value:function(e){return"tab-"+this._desc+e}},{key:"_getChartButttonId",value:function(e){return"chart-"+this._desc+e}},{key:"_getChartAllButttonId",value:function(e){return"chart-all-"+this._desc+e}},{key:"_getExportCheckedButttonId",value:function(e){return"export-checked-"+this._desc+e}},{key:"_getDetailButttonId",value:function(e){return"detail-"+this._desc+e}},{key:"_getFlickerColorButtonId",value:function(e){return"flicker-"+this._desc+e}},{key:"_getUnitConversionComboboxId",value:function(e){return"unit-"+this._desc+e}},{key:"_getExcelFileName",value:function(){return $(this._layerNameTabs.select()).find("> .k-link").text()+".xlsx"}},{key:"_getLayerColumnInfo",value:function(e){var t=[];return this._fillColumnsFieldInfo(t,e),this._fillColumnsWidthInfo(t),t.push({field:"hidden",title:" "}),this._displayCheckbox&&(this._checkedAll?t.unshift({width:60,title:"<input type='checkbox' class='chkbx' checked='checked' />全选",template:"<input type='checkbox' class='chkbx'/>",attributes:{style:"white-space: nowrap;text-align: center;"}}):t.unshift({width:60,title:"<input type='checkbox' class='chkbx'/>全选",template:"<input type='checkbox' class='chkbx'/>",attributes:{style:"white-space: nowrap;text-align: center;"}})),t}},{key:"_fillColumnsFieldInfo",value:function(e,t){this._replaceShapeField(t);for(var n=0;n<t.fields.length;++n)e.push({field:t.fields[n],title:t.titles[n],attributes:{class:"hasTooltip",style:"white-space: nowrap;text-align: center;"}});if(t.templates)for(var r=0;r<t.templates.length;++r){var i=t.templates[r];i&&(e[r].template=i)}}},{key:"_replaceShapeField",value:function(e){for(var t=0;t<e.fields.length;++t)if("SHAPE"===e.fields[t].toUpperCase()){0!==k.default.Map.MapCommon._totalStatisticsByField(e.records,"areaLength")?(e.fields[t]="areaLength",e.titles[t]=k.default.Local.Control.queryResultDialog.columns.overlappingArea()):(e.fields.splice(t,1),e.titles.splice(t,1));break}}},{key:"_fillColumnsWidthInfo",value:function(e){for(var t=0;t<e.length;++t)e[t].width=this._getEstimateColumnWidth(e[t].title);for(var n=0,r=0;r<e.length;++r)n+=e[r].width;var i=this._getDialogWidth()-60;if(n<i)for(var o=i/n,a=0;a<e.length;++a)e[a].width*=o}},{key:"_getEstimateColumnWidth",value:function(e){var t=$('<span class="k-widget">'+e+"</span>").hide().appendTo("body"),n=$(t).width();return t.remove(),Math.max(80,2*n)}},{key:"_getChartFiledsAlias",value:function(e,t){for(var n=[],r=t.titles,i=t.fields,o=0;o<e.length;++o)for(var a=0;a<i.length;++a)if(e[o]===i[a]){n.push(r[a]);break}return n}},{key:"_closeColorPicker",value:function(){var e=$("#"+this._getLayerNameTabsId()+">.k-state-active").find("[id^='flicker-']").data("kendoColorPicker");e&&e.close()}},{key:"_clearCheckedLayers",value:function(){for(var e in this._layerManager){this._layerManager[e].remove(),delete this._layerManager[e]}}},{key:"_dataItemStateChanged",value:function(e,t,n){if(e){var r=e.GUID;if(this._checkedIds[n][r]=t,this._checkedIds[n][r]){var i=k.default.Control.Manager.getInstance()._getMap(),o=k.default.Common.CommonTools.geoJsonFromGeometry(e.geometry);this._layerManager[r]||(o.addTo(i),this._layerManager[r]=o)}else{var a=this._layerManager[r];a&&(a.remove(),delete this._layerManager[r])}}}},{key:"setDefaultFlickerColor",value:function(e){this._defaultFlickerColor=e}},{key:"setDefaultCheckedAll",value:function(e){this._checkedAll=e,this._displayCheckbox=e}},{key:"setExportMode",value:function(e){this._exportMode=e}}]),r}();n.default=u},{"../kq":729,"./OverlayAnalysisChart":660,"./SummaryAnalysis":689,"./Window":694,leaflet:473}],669:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),b=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._div=e,this._layerTree=null,this._config=null,this._defaultCheckedLayers={}}return i(t,[{key:"_init",value:function(){this._initUi(),this._bindEvent()}},{key:"_initUi",value:function(){var r=this;$(r._getLayerTreeId()).closest(".sidebar-pane").addClass("active"),r._layerTree=$(r._getLayerTreeId()).kendoTreeList({height:"calc(100% - 26px)",columns:[{field:"field",title:b.default.Local.Control.queryTree.columns.layer()},{field:"field",title:b.default.Local.Control.queryTree.columns.analysis(),template:"<input type='checkbox' class='checkbox'/>",attributes:{style:"text-align: center;"},width:40}],dataSource:r._getDataSource()}).data("kendoTreeList"),$(r._getLayerTreeId()).kendoTooltip({filter:"td:first-child:not(:empty)",position:"top",showAfter:1e3,width:165,content:function(e){var t=e.target,n=r._layerTree.dataItem($(t)).layer_tooltip;return void 0===n||""===n?t.text():n}}).data("kendoTooltip"),"1"!=$(r._getLayerTreeId()).attr("data-collapse")&&setTimeout(function(){r._layerTree&&(r._layerTree.expand($(r._getLayerTreeId()+" tbody>tr:eq(0)")),r._setDefaultCheckedLayers())},1200),$(r._getLayerTreeId()).closest(".sidebar-pane").removeClass("active")}},{key:"_setDefaultCheckedLayers",value:function(){for(var e=this._layerTree.items(),t=0;t<e.length;++t){var n=this._layerTree.dataItem(e[t]);this._defaultCheckedLayers[n.id]&&$(e[t]).find(".checkbox").trigger("click")}}},{key:"_bindEvent",value:function(){var e=this;$(e._getLayerTreeId()+" tbody [role='row'] .checkbox").each(function(){this.onclick=e._checkedLayerChanged.bind(e)})}},{key:"_getLayerTreeId",value:function(){return"#"+this._div}},{key:"_checkedLayerChanged",value:function(e){var t=this._getItemFromColumn(e.target);this._updateChildItemsStatus(t,e.target.checked),this._updateParentItemStatus(t)}},{key:"_updateChildItemsStatus",value:function(e,t){for(var n=this._getChildItems(e),r=0;r<n.length;++r)$(n[r]).find(".checkbox").each(function(){$(this).prop("checked",t)})}},{key:"_updateParentItemStatus",value:function(e){var i=this,o=i._getParentItem(e);o&&function(){for(var e=0,t=i._getChildItems(o),n=0;n<t.length;++n)$(t[n]).find(".checkbox").each(function(){this.checked&&++e});var r=e===t.length;$(o).find(".checkbox").prop("checked",r)}()}},{key:"_isLayerGroup",value:function(e){return null===e.parentId}},{key:"getCheckedLayers",value:function(){var t=this,n=[];return $(t._getLayerTreeId()+" tbody [type='checkbox']:checked").each(function(){var e=t._getDataFromItem(t._getItemFromColumn(this));t._isLayerGroup(e)||n.push(e)}),n}},{key:"_getDataSource",value:function(){for(var e=[],t=1e6,n=2e6,r=this._config,i=r.groups(),o=b.default.Map.MapConfig.getInstance(),a=0;a<i.length;++a){for(var s=i[a],l=r.getGroupChildrenLayers(s),u=0;u<l.length;++u){var c=l[u];if(c){var h=this._config.getLayerSourceName(c),f=this._config.getLayerID(c),d=o.findLayer(h,f);if(null!==d&&o.isLayerHasPermission(d)){var p=n++,m=this._getLayerKey(c),g=b.default.Common.CommonTools._findTooltipFromSourceNameLayerId(h,f);"1"===c._visible&&(this._defaultCheckedLayers[p]=!0);for(var y=this._findLayerFromDisplayLayer(c),_=0;_<y.length;++_){var v=y[_];e.push({key:m,id:p,parentId:t,queryId:this._config.getLayerQueryID(v),field:this._config.getLayerLabel(v),layer_tooltip:g})}}}}e.push({id:t++,parentId:null,field:r.getGroupName(s),layer_tooltip:r.getGroupName(s)})}return e}},{key:"_getLayerKey",value:function(e){var t=this._config.getLayerID(e),n=this._config.getLayerSourceName(e);return b.default.Map.MapCommon.getKeyFromSourceNameLayerId(n,t)}},{key:"_findLayerFromDisplayLayer",value:function(e){var t=this._config.getLayerID(e),n=this._config.getLayerSourceName(e);return this._config.findAllLayer(t,n)}},{key:"_getDataFromItem",value:function(e){return this._layerTree.dataItem(e)}},{key:"_getItemId",value:function(e){return this._getDataFromItem(e).id}},{key:"_getItemParentId",value:function(e){return this._getDataFromItem(e).parentId}},{key:"_getAllItems",value:function(){return $(this._getLayerTreeId()+" tbody [role='row']")}},{key:"_getChildItems",value:function(e){for(var t=[],n=this._getItemId(e),r=this._getAllItems(),i=0;i<r.length;++i)n===this._getItemParentId(r[i])&&t.push(r[i]);return t}},{key:"_getParentItem",value:function(e){for(var t=null,n=this._getItemParentId(e),r=this._getAllItems(),i=0;i<r.length;++i)n===this._getItemId(r[i])&&(t=r[i]);return t}},{key:"_getItemFromColumn",value:function(e){return $(e).closest("tr")}}]),t}();n.default=a},{"../kq":729}],670:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),h=o(e("../kq")),i=o(e("./Window")),f=o(e("../common/CommonValues")),d=o(e("./RasterImageAnalysisDialog"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);this._rasterImageAlgebraDialog=null,this._html=h.default.Local.Control.RasterImageAnalysisDialog.html}var e,t;return r(n,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__input-1__",this._html.input_1()).replace("__input-2__",this._html.input_2()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__operator__",this._html.operator()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initRasterImageAlgebraWindow();case 3:t._initRasterImageAlgebraHtml(),t._rasterImageAlgebraDialog&&t._rasterImageAlgebraDialog.open();case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageAlgebraWindow",value:(e=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n={title:h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperation(),width:"270px",height:"340px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){t.close()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new i.default("raster-image-algebra-dialog",n),e.next=5,r.initAsync(function(){t._rasterImageAlgebraDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageAlgebraHtml",value:function(){var i=this;$("#raster-image-algebra-input-1-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:d.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList"),$("#raster-image-algebra-input-2-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:d.default.getInstance()._getRasterAnalysisDataSource(),animation:!1}).data("kendoDropDownList");var e,t=[{text:"Plus (+)",value:f.default.rasterAnalysisAlgebraTypes.plus},{text:"Minus (-)",value:f.default.rasterAnalysisAlgebraTypes.minus},{text:"Multiply (*)",value:f.default.rasterAnalysisAlgebraTypes.multiply},{text:"Divide (/)",value:f.default.rasterAnalysisAlgebraTypes.divide}];$("#raster-image-algebra-operator-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:t,animation:!1}).data("kendoDropDownList"),$("#raster-image-algebra-execute-btn").kendoButton({click:(e=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,$("#raster-image-algebra-output-data").attr("href","javascript:void(0)"),$("#raster-image-algebra-output-data").hide(),t=i._getQueryOptions(),0===Object.keys(t).length)return e.abrupt("return");e.next=6;break;case 6:return e.next=8,d.default.getInstance()._getQueryData(t);case 8:0!==(n=e.sent).length?(r=d.default.getInstance()._getDownloadUrl(t.url,n.join("")),$("#raster-image-algebra-output-data").attr("href",r),$("#raster-image-algebra-output-data").show(),h.default.Control.Notification.getInstance().showSuccess(h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperationSuccess())):h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperationFailure()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperationFailure());case 15:case"end":return e.stop()}},e,this,[[0,12]])})),function(){return e.apply(this,arguments)})}),$("#raster-image-algebra-close-btn").kendoButton({click:function(){n.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageAlgebraDialog&&(n._instance=null,this._rasterImageAlgebraDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-algebra-output-data").val()}},{key:"_getQueryOptions",value:function(){var e=$("#raster-image-algebra-input-1-dropdownlist").data("kendoDropDownList").value(),t=d.default.getInstance()._getUrlAndLayerIdFromText(e),n=c(t,2),r=n[0],i=n[1],o=$("#raster-image-algebra-input-2-dropdownlist").data("kendoDropDownList").value(),a=d.default.getInstance()._getUrlAndLayerIdFromText(o),s=c(a,2),l=s[0],u=s[1];return r!==l?(h.default.Control.Notification.getInstance().showError("代数运算失败，栅格数据来自不同数据源！"),{}):{url:r,layerId1:i,layerId2:u,type:$("#raster-image-algebra-operator-dropdownlist").val(),querytype:f.default.rasterAnalysisTypes.algebra}}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"../common/CommonValues":606,"../kq":729,"./RasterImageAnalysisDialog":671,"./Window":694}],671:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("../kq"),s=(r=a)&&r.__esModule?r:{default:r};function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return i(e,[{key:"_getRasterAnalysisDataSource",value:function(){for(var e=s.default.Map.MapConfig.getInstance(),t=e.getAllRasterAnalysisLayers(),n=[],r=0;r<t.length;++r){var i=t[r];n.push({text:e.getLayerProperty(i,"label"),value:e.getLayerProperty(i,"src_name")+"@@"+e.getLayerProperty(i,"id")})}return n}},{key:"_getUrlAndLayerIdFromText",value:function(e){var t=e.split("@@"),n=o(t,2),r=n[0],i=n[1];return[s.default.Map.MapConfig.getInstance().getUrlFromSourceName(r,!1),i]}},{key:"_getDownloadUrl",value:function(e,t){return e.match(/(\S*)\/KQGis/)[1]+t}},{key:"_getQueryData",value:(n=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,r=[],e.prev=2,s.default.Control.Waiting.show(s.default.Control.Manager.getInstance()._getMap()),e.next=6,n._queryData(t);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s.default.Control.Waiting.close();case 12:return e.prev=12,s.default.Control.Waiting.close(),e.finish(12);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[2,9,12,15]])})),function(e){return n.apply(this,arguments)})},{key:"_queryData",value:(t=l(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.default.Query.RasterAnalysis.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=u},{"../kq":729}],672:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=u(e("../kq")),i=u(e("./RasterImageAlgebraDialog")),a=u(e("./RasterImageFunctionDialog")),s=u(e("./RasterImageLogicDialog")),l=u(e("./RasterImageConditionDialog"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var h={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",orientation:"vertical",style:{}},f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._rasterMenuOptions=h,this._rasterImageAnalysisMenu=null,this._local=o.default.Local.Control.RasterImageAnalysisDialog}var t,n;return r(e,[{key:"initAsync",value:(n=c(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,o.default.Common.NetworkTools.httpGetAsync(o.default.Common.CommonValues.kqwebmapPath+"window/raster-image-analysis-menu.html");case 3:if("error"===(n=e.sent))return console.log("load raster_image_menu_html error!"),e.abrupt("return",!1);e.next=7;break;case 7:return t._raster_image_menu_html=t._translateHtmlChineseEnglish(n),console.log("load raster_image_menu_html successfully！"),r="#"+o.default.Common.CommonValues.mapContainerID,(i=$(r)).length<=0&&console.log("RasterImageAnalysisMenu.initAsync: map_container_id was not found!"),i.append(t._raster_image_menu_html),t._initRasterImageAnalysisMenuHtml(),$("#kq-raster-image-analysis-menu").hide(),e.abrupt("return",!0);case 16:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__algebra-operation__",this._local.AlgebraOperation()).replace("__function-operation__",this._local.FunctionOperation()).replace("__logic-operation__",this._local.LogicOperation()).replace("__condition-operation__",this._local.ConditionOperation())}},{key:"_initRasterImageAnalysisMenu",value:(t=c(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n="#"+o.default.Common.CommonValues.mapContainerID,(r=$(n)).length<=0&&console.log("RasterImageAnalysisMenu.initAsync: map_container_id was not found!"),e.next=6,o.default.Common.NetworkTools.httpGetAsync(o.default.Common.CommonValues.kqwebmapPath+"window/raster-image-analysis-menu.html");case 6:i=e.sent,i=t._translateHtmlChineseEnglish(i),r.append(i);case 9:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageAnalysisMenuHtml",value:function(){this._rasterImageAnalysisMenu=$("#kq-raster-image-analysis-menu").kendoMenu({select:this._onRasterImageAnalysisMenuSelect.bind(this),orientation:"vertical"}).data("kendoMenu")}},{key:"_onRasterImageAnalysisMenuSelect",value:function(e){console.log("Selected: "+$(e.item).children(".k-link").text());var t=$(e.item);t.hasClass("kq-rastermenu-btn-algebra")?($("#kq-raster-image-analysis-menu").hide(),i.default.getInstance().open()):t.hasClass("kq-rastermenu-btn-function")?($("#kq-raster-image-analysis-menu").hide(),a.default.getInstance().open()):t.hasClass("kq-rastermenu-btn-logic")?($("#kq-raster-image-analysis-menu").hide(),s.default.getInstance().open()):t.hasClass("kq-rastermenu-btn-condition")&&($("#kq-raster-image-analysis-menu").hide(),l.default.getInstance().open())}},{key:"remove",value:function(){$("#kq-raster-image-analysis-menu").remove()}},{key:"show",value:function(){$("#kq-raster-image-analysis-menu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-raster-image-analysis-menu").hide()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=f},{"../kq":729,"./RasterImageAlgebraDialog":670,"./RasterImageConditionDialog":673,"./RasterImageFunctionDialog":674,"./RasterImageLogicDialog":675}],673:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=u(e("../kq")),a=u(e("./Window")),s=u(e("./RasterImageAnalysisDialog")),l=u(e("../common/CommonValues"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var h=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._rasterImageConditionDialog=null,this._html=o.default.Local.Control.RasterImageAnalysisDialog.html}var e,n;return i(t,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__input__",this._html.input()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__select-condition__",this._html.selectCondition()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(n=c(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initRasterImageConditionWindow();case 3:t._initRasterImageConditionHtml(),t._rasterImageConditionDialog&&t._rasterImageConditionDialog.open();case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_initRasterImageConditionWindow",value:(e=c(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n={title:o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperation(),width:"270px",height:"265px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){t.close()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new a.default("raster-image-condition-dialog",n),e.next=5,r.initAsync(function(){t._rasterImageConditionDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageConditionHtml",value:function(){var e,i=this;$("#raster-image-condition-input-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:s.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList"),$("#raster-image-condition-execute-btn").kendoButton({click:(e=c(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$("#raster-image-condition-output-data").attr("href","javascript:void(0)"),$("#raster-image-condition-output-data").hide(),t=i._getQueryOptions(),e.next=6,s.default.getInstance()._getQueryData(t);case 6:0!==(n=e.sent).length?(r=s.default.getInstance()._getDownloadUrl(t.url,n.join("")),$("#raster-image-condition-output-data").attr("href",r),$("#raster-image-condition-output-data").show(),o.default.Control.Notification.getInstance().showSuccess(o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperationSuccess())):o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperationFailure()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperationFailure());case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(){return e.apply(this,arguments)})}),$("#raster-image-condition-close-btn").kendoButton({click:function(){t.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageConditionDialog&&(t._instance=null,this._rasterImageConditionDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-condition-output-data").val()}},{key:"_getConditionStatement",value:function(){return $("#raster-image-condition-select-input").val()}},{key:"_getQueryOptions",value:function(){var e=$("#raster-image-condition-input-dropdownlist").data("kendoDropDownList").value(),t=s.default.getInstance()._getUrlAndLayerIdFromText(e),n=r(t,2);return{url:n[0],layerId1:n[1],condition:$("#raster-image-condition-select-input").val(),querytype:l.default.rasterAnalysisTypes.condition_select}}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=h},{"../common/CommonValues":606,"../kq":729,"./RasterImageAnalysisDialog":671,"./Window":694}],674:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=u(e("../kq")),a=u(e("./Window")),s=u(e("../common/CommonValues")),l=u(e("./RasterImageAnalysisDialog"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var h=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);this._rasterImageFunctionDialog=null,this._html=o.default.Local.Control.RasterImageAnalysisDialog.html}var e,t;return i(n,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__input__",this._html.input()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__function__",this._html.function()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(t=c(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initRasterImageFunctionWindow();case 3:t._initRasterImageFunctionHtml(),t._rasterImageFunctionDialog&&t._rasterImageFunctionDialog.open();case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageFunctionWindow",value:(e=c(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n={title:o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperation(),width:"270px",height:"265px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){t.close()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new a.default("raster-image-function-dialog",n),e.next=5,r.initAsync(function(){t._rasterImageFunctionDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageFunctionHtml",value:function(){var i=this;$("#raster-image-function-input-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:l.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList");var e,t=[{text:"Abs",value:s.default.rasterAnalysisFunctionTypes.abs},{text:"Negate",value:s.default.rasterAnalysisFunctionTypes.negate},{text:"Square",value:s.default.rasterAnalysisFunctionTypes.square},{text:"Square root",value:s.default.rasterAnalysisFunctionTypes.sqrt},{text:"Int",value:s.default.rasterAnalysisFunctionTypes.int},{text:"Float",value:s.default.rasterAnalysisFunctionTypes.float},{text:"Round down",value:s.default.rasterAnalysisFunctionTypes.rounddown},{text:"Round up",value:s.default.rasterAnalysisFunctionTypes.roundup}];$("#raster-image-function-select-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:t,animation:!1}).data("kendoDropDownList"),$("#raster-image-function-execute-btn").kendoButton({click:(e=c(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$("#raster-image-function-output-data").attr("href","javascript:void(0)"),$("#raster-image-function-output-data").hide(),t=i._getQueryOptions(),e.next=6,l.default.getInstance()._getQueryData(t);case 6:0!==(n=e.sent).length?(r=l.default.getInstance()._getDownloadUrl(t.url,n.join("")),$("#raster-image-function-output-data").attr("href",r),$("#raster-image-function-output-data").show(),o.default.Control.Notification.getInstance().showSuccess(o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperationSuccess())):o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperationFailure()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperationFailure());case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(){return e.apply(this,arguments)})}),$("#raster-image-function-close-btn").kendoButton({click:function(){n.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageFunctionDialog&&(n._instance=null,this._rasterImageFunctionDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-function-output-data").val()}},{key:"_getQueryOptions",value:function(){var e=$("#raster-image-function-input-dropdownlist").data("kendoDropDownList").value(),t=l.default.getInstance()._getUrlAndLayerIdFromText(e),n=r(t,2);return{url:n[0],layerId1:n[1],type:$("#raster-image-function-select-dropdownlist").val(),querytype:s.default.rasterAnalysisTypes.function}}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=h},{"../common/CommonValues":606,"../kq":729,"./RasterImageAnalysisDialog":671,"./Window":694}],675:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),h=o(e("../kq")),i=o(e("./Window")),f=o(e("../common/CommonValues")),d=o(e("./RasterImageAnalysisDialog"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);this._rasterImageLogicDialog=null,this._html=h.default.Local.Control.RasterImageAnalysisDialog.html}var e,t;return r(n,[{key:"_translateHtmlChineseEnglish",value:function(e){return e.replace("__input-1__",this._html.input_1()).replace("__input-2__",this._html.input_2()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__operator__",this._html.operator()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initRasterImageLogicWindow();case 3:t._initRasterImageLogicHtml(),t._rasterImageLogicDialog&&t._rasterImageLogicDialog.open();case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageLogicWindow",value:(e=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n={title:h.default.Local.Control.RasterImageAnalysisDialog.LogicOperation(),width:"270px",height:"340px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){t.close()},updateHtml:function(e){return e=t._translateHtmlChineseEnglish(e)}},r=new i.default("raster-image-logic-dialog",n),e.next=5,r.initAsync(function(){t._rasterImageLogicDialog=r._object()});case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageLogicHtml",value:function(){var i=this;$("#raster-image-logic-input-1-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:d.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList"),$("#raster-image-logic-input-2-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:d.default.getInstance()._getRasterAnalysisDataSource(),animation:!1}).data("kendoDropDownList");var e,t=[{text:"Or (|)",value:f.default.rasterAnalysisLogicTypes.or},{text:"And (&)",value:f.default.rasterAnalysisLogicTypes.and},{text:"Xor (^)",value:f.default.rasterAnalysisLogicTypes.xor},{text:"Diff",value:f.default.rasterAnalysisLogicTypes.diff},{text:"Equal",value:f.default.rasterAnalysisLogicTypes.equal},{text:"Less than",value:f.default.rasterAnalysisLogicTypes.less_than},{text:"Equal or less than",value:f.default.rasterAnalysisLogicTypes.less_than_equal},{text:"Greater than",value:f.default.rasterAnalysisLogicTypes.greater_than},{text:"Equal or greater than",value:f.default.rasterAnalysisLogicTypes.greater_than_equal},{text:"Over",value:f.default.rasterAnalysisLogicTypes.over}];$("#raster-image-logic-operator-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:t,animation:!1}).data("kendoDropDownList"),$("#raster-image-logic-execute-btn").kendoButton({click:(e=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,$("#raster-image-logic-output-data").attr("href","javascript:void(0)"),$("#raster-image-logic-output-data").hide(),t=i._getQueryOptions(),0===Object.keys(t).length)return e.abrupt("return");e.next=6;break;case 6:return e.next=8,d.default.getInstance()._getQueryData(t);case 8:0!==(n=e.sent).length?(r=d.default.getInstance()._getDownloadUrl(t.url,n.join("")),$("#raster-image-logic-output-data").attr("href",r),$("#raster-image-logic-output-data").show(),h.default.Control.Notification.getInstance().showSuccess(h.default.Local.Control.RasterImageAnalysisDialog.LogicOperationSuccess())):h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.LogicOperationFailure()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.LogicOperationFailure());case 15:case"end":return e.stop()}},e,this,[[0,12]])})),function(){return e.apply(this,arguments)})}),$("#raster-image-logic-close-btn").kendoButton({click:function(){n.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageLogicDialog&&(n._instance=null,this._rasterImageLogicDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-logic-output-data").val()}},{key:"_getQueryOptions",value:function(){var e=$("#raster-image-logic-input-1-dropdownlist").data("kendoDropDownList").value(),t=d.default.getInstance()._getUrlAndLayerIdFromText(e),n=c(t,2),r=n[0],i=n[1],o=$("#raster-image-logic-input-2-dropdownlist").data("kendoDropDownList").value(),a=d.default.getInstance()._getUrlAndLayerIdFromText(o),s=c(a,2),l=s[0],u=s[1];if(r===l)return{url:r,layerId1:i,layerId2:u,type:$("#raster-image-logic-operator-dropdownlist").val(),querytype:f.default.rasterAnalysisTypes.logic};h.default.Control.Notification.getInstance().showError("逻辑运算失败，栅格数据来自不同数据源！")}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"../common/CommonValues":606,"../kq":729,"./RasterImageAnalysisDialog":671,"./Window":694}],676:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./toolbar/BoxZoom"),a=(r=o)&&r.__esModule?r:{default:r};var s=e("leaflet"),l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._map=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"addHooks",value:function(){this._map.dragging.disable(),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addHooks",this).call(this)}},{key:"onMouseDown",value:function(e){this.addHooks(),2!==e.originalEvent.button&&this._onMouseDown.call(this,{clientX:e.originalEvent.clientX,clientY:e.originalEvent.clientY,which:1,shiftKey:!0})}},{key:"_onMouseUp",value:function(e){var t=this;if(1===e.which||1===e.button){if(t._finish(),!t._moved||t._startPoint.x==t._point.x&&t._startPoint.y==t._point.y){t._point=s.point(t._startPoint.x,t._startPoint.y),t._startPoint.x-=5,t._startPoint.y-=5,t._point.x+=5,t._point.y+=5}setTimeout(s.bind(t._resetState,t),0);var n=new s.LatLngBounds(t._map.containerPointToLatLng(t._startPoint),t._map.containerPointToLatLng(t._point));t._map.fire("boundend",n)}}}]),n}();n.default=l},{"./toolbar/BoxZoom":702,leaflet:473}],677:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./RubberBand"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=t;return n._map=e,n._boxZoom=new a.default(n._map),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,L.Evented),i(r,[{key:"bindEvent",value:function(){this._boxZoom.addHooks(),this._map.on("mousedown",this._handleMouseDown,this),this._map.on("boundend",this._handBoundEnd,this)}},{key:"removeEvent",value:function(){this._map.off("mousedown",this._handleMouseDown,this),this._map.off("boundend",this._handBoundEnd,this),this._map.dragging.enable(),this._boxZoom.removeHooks()}},{key:"_handleMouseDown",value:function(e){this._boxZoom.onMouseDown(e)}},{key:"_handBoundEnd",value:function(e){this.fire("boundend",e)}}],[{key:"getInstance",value:function(e){return r._instance||(r._instance=new r(e)),r._instance}}]),r}();n.default=s},{"./RubberBand":676}],678:[function(s,e,l){(function(e){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t,n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=s("../kq"),a=(t=r)&&t.__esModule?t:{default:t};var i={position:"bottomleft",fill:"hollow",doubleLine:!1,showSubunits:!0,maxUnitsWidth:120,isUseLabel:!0},o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L.extend({},i,e),this._scale=L.control.graphicScale(this.options),this.labelText=L.DomUtil.create("div","scaleText")}return n(t,[{key:"addTo",value:function(t){var n=this;n._scale.addTo(t),n.options.isUseLabel&&(t.on("zoomend",function(e){n._updateLabel(t)}),n._scale._container.firstChild.style.marginBottom=0,e.insertAfter(n.labelText,n._scale._container.firstChild),n._updateLabel(t))}},{key:"remove",value:function(){this._scale.remove()}},{key:"_updateLabel",value:function(e){var t='<p style="text-align: center">1:'+a.default.Control.Scale.getStandardScaleNumber(e)+"</p>";this.labelText.innerHTML=t}}],[{key:"getStandardScaleNumber",value:function(e){var t=a.default.Map.MapConfig.getInstance().scales(),n=e.getZoom(),r=Math.floor(n),i=0;r===t.length-1||(i=t[r+1]-t[r]);var o=i*(n-r)+Number(t[r]);return Number(1/o).toFixed()}}]),t}();l.default=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":729}],679:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.options=L.extend({},s,e);var t=this;t.local=a.default.Local.Control.compare,t.button=new a.default.Control.MapButton("iconfont icon-screen-shot",function(e){a.default.Control.AdvancedSearchResultDialog.getInstance()._closeColorPicker(),a.default.Control.OverlayAnalysisResultDialog.getInstance()._closeColorPicker(),t.buttonClicked||(t.buttonClicked=!0,setTimeout(function(){t.buttonClicked=!1},1e3),setTimeout(function(){t._doScreenShot(t)},500))},a.default.Local.Control.screenshot.title(),"kq-screenshot"),t.buttonClicked=!1,t.isShowUI=!0,t.showButton=new a.default.Control.MapButton({id:"kq-screenshot-show",states:[{stateName:"show",icon:"iconfont icon-show",title:a.default.Local.Control.screenshot.showui(),onClick:function(e){e.state("not-show"),t.isShowUI=!1}},{stateName:"not-show",icon:"iconfont icon-not-show",title:a.default.Local.Control.screenshot.hideui(),onClick:function(e){e.state("show"),t.isShowUI=!0}}]});var n=[this.button,this.showButton];L.Browser.ie&&(t.isShowUI=!1,n=[this.button]),t.buttonBar=new a.default.Control.MapButtonBar(n,{position:this.options.position}),t.buttonBar.setAttribute("id","screenshot-buttonbar")}return i(r,[{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_toBlobCallback",value:function(e){var t=(new Date).Format("yyyyMMddhhmmss");console.log(t),a.default.Common.CommonTools.exportData(e,t+".png","image/png")}},{key:"_clipCanvas",value:function(e){var n=this,t=new a.default.Control.Window("screen-shot",{parentID:"map",title:a.default.Local.Control.screenshot.title(),draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("screen-shot on close!"),t._remove()}});t.initAsync(function(){$("#screen-shot-button").text(a.default.Local.Control.screenshot.title()),t._object().maximize(),t.open(),$("#screen-shot-container").append(e),$("#screen-shot-button").kendoButton({type:"submit",click:function(e){console.log("screen-shot-button clicked!");var t=$("#screen-shot canvas");L.Browser.ie?n._toBlobCallback(t.cropper("getCroppedCanvas").msToBlob()):t.cropper("getCroppedCanvas").toBlob(n._toBlobCallback)}}),$("#screen-shot canvas").cropper({autoCrop:!1,ready:function(){$(this).cropper("moveTo",0,0),$(this).cropper("crop")}})})}},{key:"_doScreenShot",value:function(){console.log("_doScreenShot!");var t=this;console.log("self.isShowUI:"+t.isShowUI),t.isShowUI||t._hideUI(),t._doSpecialDeal(),html2canvas(document.body,{logging:!1,useCORS:!0}).then(function(e){t._clipCanvas(e),t._undoSpecialDeal()}),t.isShowUI||t._showUI()}},{key:"doRectScreenShot",value:function(n,r,i,o,a){console.log("_doRectScreenShot!");var s=this;s._hideUI(!0),s._doSpecialDeal(),html2canvas(document.body,{logging:!1,useCORS:!0}).then(function(e){var t=document.createElement("canvas");t.width=i,t.height=o,t.getContext("2d").drawImage(e,n,r,i,o,0,0,i,o),a||(a=s._toBlobCallback),L.Browser.ie?a(t.msToBlob()):t.toBlob(a),s._undoSpecialDeal()}),s._showUI()}},{key:"_hideUI",value:function(e){$("#sidebar").hide(),$(".leaflet-control-container").hide(),$(".k-widget.k-window").each(function(e,t){t.isShow=!1,$(this).is(":hidden")||(t.isShow=!0,$(this).hide())}),e||$(".leaflet-pane.leaflet-popup-pane").hide(),$(".kq-ui").hide()}},{key:"_showUI",value:function(){$("#sidebar").show(),$(".leaflet-control-container").show(),$(".k-widget.k-window").each(function(e,t){t.isShow&&$(this).show()}),$(".leaflet-pane.leaflet-popup-pane").show(),$(".kq-ui").show()}},{key:"_doSpecialDeal",value:function(){$(".ui-contextmenu.ui-menu").each(function(e,t){$(self).hide()});var e=$(".leaflet-map-pane")[0],t=e.style.transform.replace("translate3d(","").split(","),n=parseFloat(t[0].replace("px","")),r=parseFloat(t[1].replace("px",""));e.transform_origin=e.style.transform,e.style.transform="translate3d(0px,0px,0px)";for(var i=$("div.leaflet-tile-container"),o=0;o<i.length;o++){var a=i[o].style.transform,s=a.replace("translate3d(","").split(","),l=parseFloat(s[0].replace("px","")),u=parseFloat(s[1].replace("px",""));i[o].transform_origin=a,i[o].style.transform="translate3d(0px,0px,0px)";for(var c=$("div.leaflet-tile-container:eq("+o+")").children(),h=0;h<c.length;h++){var f=c[h].style.transform.replace("translate3d(","").split(","),d=parseFloat(f[0].replace("px","")),p=parseFloat(f[1].replace("px",""));c[h].style.left=n+l+d+"px",c[h].style.top=r+u+p+"px",c[h].transform_origin=c[h].style.transform,c[h].style.transform="translate3d(0px,0px,0px)"}}for(var m=$("img.leaflet-image-layer"),g=0;g<m.length;g++)m[g].transform_origin=m[g].style.transform,m[g].style.transform="translate3d(0px,0px,0px)";var y=$(".leaflet-overlay-pane canvas");if(L.Browser.ie)y.hide();else for(var _=0;_<y.length;_++){var v=y[_].style.transform.replace("translate3d(","").split(","),b=parseFloat(v[0].replace("px","")),w=parseFloat(v[1].replace("px",""));y[_].style.left=n+b+"px",y[_].style.top=r+w+"px",y[_].transform_origin=y[_].style.transform,y[_].style.transform="translate3d(0px,0px,0px)"}for(var x=$(".leaflet-marker-icon,.leaflet-marker-shadow"),k=0;k<x.length;k++){var C=parseFloat(x[k].style.marginLeft.replace("px","")),S=parseFloat(x[k].style.marginTop.replace("px","")),M=x[k].style.transform.replace("translate3d(","").split(","),P=parseFloat(M[0].replace("px","")),E=parseFloat(M[1].replace("px",""));x[k].transform_origin=x[k].style.transform,x[k].marginLeft_origin=x[k].style.marginLeft,x[k].marginTop_origin=x[k].style.marginTop,x[k].style.transform="translate3d(0px, 0px, 0px)",x[k].style.marginLeft=n+P+C+"px",x[k].style.marginTop=r+E+S+"px"}for(var T=$(".leaflet-popup"),I=0;I<T.length;I++){var O=parseFloat(T[I].style.left.replace("px","")),D=parseFloat(T[I].style.bottom.replace("px","")),N=T[I].style.transform.replace("translate3d(","").split(","),A=parseFloat(N[0].replace("px","")),j=parseFloat(N[1].replace("px",""));T[I].transform_origin=T[I].style.transform,T[I].left_origin=T[I].style.left,T[I].bottom_origin=T[I].style.bottom,T[I].style.transform="translate3d(0px, 0px, 0px)",T[I].style.left=n+A+O+"px",T[I].style.bottom=-r-j-D+"px"}$("#field-listView,#value-info-listView").css("overflow","hidden"),$("#legend-query-legend-list").css("overflow","hidden"),$(".k-grid-content.k-auto-scrollable").css("overflow","hidden"),$(".sidebar-content-content").css("overflow","hidden");for(var R=$(".imap-text.imap-zoom-animated"),B=0;B<R.length;B++){var F=R[B].style.transform.replace("translate3d(","").split(","),z=parseFloat(F[0].replace("px","")),q=parseFloat(F[1].replace("px",""));R[B].transform_origin=R[B].style.transform,R[B].marginLeft_origin=R[B].style.marginLeft,R[B].style.transform="translate3d(0px, 0px, 0px)",R[B].style.marginLeft=n+z+0+"px",R[B].style.bottom=-(r+q+0+30)+"px"}}},{key:"_undoSpecialDeal",value:function(){var e=$(".leaflet-map-pane")[0];e.style.transform=e.transform_origin;for(var t=$("div.leaflet-tile-container"),n=0;n<t.length;n++){t[n].style.transform=t[n].transform_origin;for(var r=$("div.leaflet-tile-container:eq("+n+")").children(),i=0;i<r.length;i++)r[i].style.left="",r[i].style.top="",r[i].style.transform=r[i].transform_origin}var o=$(".leaflet-overlay-pane canvas");if(L.Browser.ie)o.show();else for(var a=0;a<o.length;a++)o[a].style.left="",o[a].style.top="",o[a].style.transform=o[a].transform_origin;for(var s=$("img.leaflet-image-layer"),l=0;l<s.length;l++)s[l].style.transform=s[l].transform_origin;for(var u=$(".leaflet-marker-icon,.leaflet-marker-shadow"),c=0;c<u.length;c++)u[c].style.transform=u[c].transform_origin,u[c].style.marginLeft=u[c].marginLeft_origin,u[c].style.marginTop=u[c].marginTop_origin;for(var h=$(".leaflet-popup"),f=0;f<h.length;f++)h[f].style.transform=h[f].transform_origin,h[f].style.left=h[f].left_origin,h[f].style.bottom=h[f].bottom_origin;for(var d=$(".imap-text.imap-zoom-animated"),p=0;p<d.length;p++)d[p].style.transform=d[p].transform_origin,d[p].style.marginLeft=d[p].marginLeft_origin,d[p].style.bottom="-30px";$("#field-listView,#value-info-listView").css("overflow-y","scroll"),$("#legend-query-legend-list").css("overflow-y","scroll"),$(".k-grid-content.k-auto-scrollable").css("overflow-y","scroll"),$(".sidebar-content-content").css("overflow-y","scroll")}}]),r}();n.default=l},{"../kq":729}],680:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),_=(r=o)&&r.__esModule?r:{default:r};var a={content:'<div id="search" style="margin:0px auto; z-index: 999999; width: 330px; position: absolute;display: none;">\n    <div class="search_box">\n        <div class="search">\n            <div id="pt1" class="select">\x3c!--选择框--\x3e\n                <a id="s0"></a>\n                <div style="display:none;" id="pt2" class="part">\x3c!--隐藏选择框--\x3e\n                </div>\n            </div>\n            <input id="catid" name="catid" type="hidden" value="0">\x3c!--隐藏的数据存储框--\x3e\n            <div id="pt3" class="search1">\n                <input id="q" class="enter" name="infos"  placeholder="请输入查询条件">\x3c!--条件输入框--\x3e\n            </div>\n            <input id="qBtn" class="sb" name="Input" type="button">\x3c!--搜索按钮--\x3e\n        </div>\n    </div>\n</div>',classes:"",orientation:"vertical",style:{position:"absolute"},position:"topleft"},s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.options=L.extend({},a,e),t._searchLayers=[],t._initSearchBarButton(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Evented),i(n,[{key:"_initSearchLayers",value:function(){for(var e=_.default.Query.SearchBarConfig.getInstance(),t=e.layers(),n=0;n<t.length;++n){var r=t[n];this._searchLayers.push({label:e.getLayerProperty(r,"label"),layerId:e.getLayerProperty(r,"query_id"),source:e.getLayerProperty(r,"src_name"),filterWhere:e.getLayerChildNode(r,"filterWhere"),fields:e.getLayerChildNode(r,"fields"),fields_alias:e.getLayerChildNode(r,"fields_alias"),chart_field:e.getLayerChildNode(r,"chart_field"),summary_field:e.getLayerChildNode(r,"summary_field"),server_type:e.getLayerChildNode(r,"server_type"),tooltip:e.getLayerChildNode(r,"tooltip")})}}},{key:"_createSearchLayersElement",value:function(){for(var t=this,e="<p>",n=0;n<t._searchLayers.length;n++)e+='<a id="s'+(n+1)+'">'+t._searchLayers[n].label+"</a>";e+="</p>";var r=$(e);$("#pt2").append(r);for(var i=function(e){$("#s"+(e+1)).click(function(){t._aOnClick(e)})},o=0;o<t._searchLayers.length;o++)i(o)}},{key:"_loadSearchXml",value:function(){this._initSearchLayers(),this._aOnClick(0),this._createSearchLayersElement(),this._bindEvents()}},{key:"_bindEvents",value:function(){var y=this;$("#pt1").mouseover(function(){$("#pt2").css("display",""),$("#pt1").attr("class","select select_hover")}),$("#pt1").mouseout(function(){$("#pt2").css("display","none"),$("#pt1").attr("class","select")}),$("#pt3").mouseout(function(){$("#pt4").css("display","none")}),$(".sb").click(function(){var o=_.default.Control.Notification.getInstance(),e=$("#q").val();if("…"!==e&&""!==e){var t=$("#catid").attr("value"),n=y._searchLayers[t],a=n.label,r=n.filterWhere,i=n.layerId,s=n.source,l=n.fields,u=n.fields_alias,c=n.chart_field.split("|"),h=n.summary_field.split("|");e=e.split(","),r=r.split("'%[VALUE]%'");for(var f="",d=0;d<e.length;++d)f+=r[d]+"'%"+e[d]+"%'";r=f;var p=_.default.Map.MapConfig.getInstance().getSourceByName(s,!0)._url,m=_.default.Query.InfoQuery.getInstance(),g={url:p,layerId:i,reqcount:2e3,where:r};_.default.Control.Waiting.show(_.default.Control.Manager.getInstance()._getMap()),m.queryAsync(g,function(){_.default.Control.Waiting.close();var e=m.data();if(e&&0!==e.length)if(-1!==e[0]){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r].properties;i.geometry=e[r].geometry,n.push(i)}t.push({label:a,fields:l.split(","),titles:u.split(","),records:n,chartFields:c,summaryField:h}),_.default.Control.SearchBarResultDialog.getInstance().open(t)}else console.log("查询被停止或者其他错误");else o.showInfo("未查到任何数据")},function(){_.default.Control.Waiting.close()})}else o.showError("请输入查询条件！")})}},{key:"_aOnClick",value:function(e){var t=$("#q");0!==this._searchLayers.length&&(t[0].placeholder=this._searchLayers[e].tooltip,$("#s0").html(this._searchLayers[e].label)),$("#pt2").css("display","none"),$("#catid").attr("value",e),t.focus()}},{key:"show",value:function(){$("#search").css("display","block")}},{key:"hidden",value:function(){$("#search").css("display","none")}},{key:"_initSearchBarButton",value:function(){var e=this;e.button=new _.default.Control.MapButton("icon iconfont icon-search",function(){e.button.enabled()?e._stop(e):e._start(e)},"展开搜索栏"),e.buttonBar=new _.default.Control.MapButtonBar([e.button],{position:e.options.position}),e.buttonBar.setAttribute("id","searchbar-buttonbar")}},{key:"addTo",value:function(e){var t=this;t._map=e,t.buttonBar.addTo(e),-1!==t.options.position.indexOf("left")?(t.options.style.top=$(".icon-search").offset().top-15+"px",t.options.style.left="42px"):(t.options.style.top=$(".icon-search").offset().top-15+"px",t.options.style.right="42px"),t._advmenu=new _.default.Control.Custom(t.options),t._advmenu.addTo(t._map),t._loadSearchXml()}},{key:"_start",value:function(){this.button.setTitle("折叠搜索栏"),this.button.setEnabled(!0),this.show()}},{key:"_stop",value:function(){this.button.setTitle("展开搜索栏"),this.button.setEnabled(!1),this.hidden()}}]),n}();n.default=s},{"../kq":729}],681:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./QueryResultDialog"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._desc="search-bar-",t._title=KQ.Local.Control.searchBarResultDialog.title(),t._init(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"_initHtml",value:function(){var e=KQ.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="search-bar-result-dialog"><div id="search-bar-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"search-bar-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"search-bar-layer-name-tabs"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultDialog":668}],682:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("../kq")),o=a(e("./Window"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t=e;return t._dialog=null,t._slider=null,t._init(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Evented),r(n,[{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var e=i.default.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="search-light-size-dialog"><input id="search-light-size-slider"></div>'))}},{key:"_initUi",value:function(){this._initDialog(),this._initSlider()}},{key:"_initDialog",value:function(){var e=this,t={width:"216px",height:"50px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+i.default.Common.CommonValues.mapContainerID},n=new o.default(e._getDialogId(),t);n.initAsync(function(){e._dialog=n._object()})}},{key:"_initSlider",value:function(){var t=this;t._slider=$(t._getSliderId()).kendoSlider({precision:1,smallStep:1,largeStep:32,min:32,max:512,tickPlacement:"none",value:0,change:function(e){t.fire("change",e)}}).data("kendoSlider")}},{key:"_getDialogId",value:function(){return"search-light-size-dialog"}},{key:"_getSliderId",value:function(){return"#search-light-size-slider"}},{key:"open",value:function(){var e=parseInt($("#sidebar").css("width"))+20+"px";this._dialog.setOptions({position:{top:"10px",left:e},title:i.default.Local.Control.searchLightSizeDialog.title()}),this._dialog.open()}},{key:"value",value:function(e){return this._slider.value(e)}},{key:"min",value:function(e){return this._slider.min(e)}},{key:"max",value:function(e){return this._slider.max(e)}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"../kq":729,"./Window":694}],683:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));s.localization=a.default.Local.getCurrentLanguage(),t.options=L.extend({},s,e);var n,r,i=t;return i.button=new a.default.Control.MapButton("iconfont icon-set-location",(n=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Builder.BuilderCommon.addNewLayer({name:"手绘图层",type:"HAND_DRAW_DATA"});case 2:setTimeout(function(){var e=a.default.Common.ComputeTools.guid();a.default.Map.MapGeoman.getInstance().addGeomanLayer(e,L.marker({lat:22.653309379351253,lng:25.602881379080582}));var t=a.default.Builder.BuilderProject.getInstance().layersContainer,n=t.items()[0],r=t.getDataFromListItem(n);r.layer.getRender().setDataSource([{id:e,name:"测试数据3",type:"point"}]),$("#vector-layers-container").trigger("select",[r,n])},100);case 3:case"end":return e.stop()}},e,this)}),r=function(){var s=n.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return r.apply(this,arguments)}),a.default.Local.Control.setlocation.title(),"kq-setlocation"),i.buttonBar=new a.default.Control.MapButtonBar([i.button],{position:t.options.position}),i.buttonBar.setAttribute("id","setlocation-buttonbar"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Evented),i(o,[{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}]),o}();n.default=l},{"../kq":729}],684:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._div=e,this._init()}var e,n,r;return i(t,[{key:"addTo",value:function(e){this._map=e}},{key:"_initHtml",value:(r=s(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this)._container=L.DomUtil.get(t._div),t._container||(t._container=L.DomUtil.create("div")),e.next=5,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"sidebar/setting.html");case 5:"error"===(n=e.sent)?console.log("get setting.html error"):(n=n.replaceAll("_selectTheme_",a.default.Local.Control.sidebar.content.setting.selectTheme()),$(t._container).append(n),console.log("get setting.html success"));case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_init",value:(n=s(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t._initHtml();case 3:return n=a.default.Common.ThemeManager.getInstance(),e.next=6,n.getInitThemeName();case 6:r=e.sent,this.themeDropdownList=$("#theme-dropdownlist").kendoDropDownList({dataSource:{data:n.getThemeList()},value:r,animation:!1,change:t._onThemeChange.bind(t)}).data("kendoDropDownList");case 8:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_onThemeChange",value:(e=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.default.Common.ThemeManager.getInstance(),e.next=3,t.setSavedThemeName(this.themeDropdownList.value());case 3:a.default.Control.Notification.getInstance().showInfo(a.default.Local.Control.setting.onThemeChange());case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})}]),t}();n.default=l},{"../kq":729}],685:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var a={position:"topleft",orientation:"horizontal"},l=void 0,u=void 0,c=void 0,h=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=L.extend({},a,e),l=s.default.Local.Control.sidebyside.title(),u=s.default.Local.Control.sidebyside.titleVertical(),c=s.default.Local.Control.sidebyside.titleCancel();var t=this;t.button=new s.default.Control.MapButton("iconfont icon-side-by-side",function(e){t.buttonVertical.enabled()&&(t.startSwitch=!0),t.button.enabled()?t._stop(t):(t.options.orientation="horizontal",t._stop(t),t._start(t))},l,"kq-sidebyside-h"),t.buttonVertical=new s.default.Control.MapButton("iconfont icon-side-by-side-vertical",function(e){t.button.enabled()&&(t.startSwitch=!0),t.buttonVertical.enabled()?t._stop(t):(t.options.orientation="vertical",t._stop(t),t._start(t))},u,"kq-sidebyside-v"),t.buttonBar=new s.default.Control.MapButtonBar([t.button,t.buttonVertical],{position:t.options.position}),t.buttonBar.setAttribute("id","sidebyside-buttonbar")}return i(n,[{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"remove",value:function(){this._releaseLayers(this),this._map.removeControl(this.buttonBar)}},{key:"_bindLayers",value:function(o,i){if(o.sidebyside)return s.default.Control.Waiting.close(),!1;var a=s.default.Map.MapCommon._getActualLayers(o._map);return setTimeout(function(){for(var e=[],t=[],n=0;n<a.length;n++)0===n?t.push(a[n]):e.push(a[n]);var r={init_value:i};"vertical"===o.options.orientation&&(r.orientation="vertical"),o.sidebyside=L.control.sideBySide(t,e,r),o.sidebyside.on("needbind",function(){var i=setInterval(function(){var e=s.default.Map.MapCommon._getActualLayers(o._map);if(!(e.length<2)){clearInterval(i);for(var t=[],n=[],r=0;r<e.length;r++)0===r?n.push(e[r]):t.push(e[r]);o.sidebyside.setLeftLayers(n),o.sidebyside.setRightLayers(t)}},500)}),o.sidebyside.addTo(o._map),s.default.Control.Waiting.close()},100),!0}},{key:"_releaseLayers",value:function(e){e.sidebyside&&(e.sidebyside.remove(),e.sidebyside=void 0)}},{key:"on_moveend",value:function(){console.log("map moveend!");var e=this;if(e._isValid()){s.default.Control.Waiting.showNoClose();var t=e.sidebyside._range.value;e._releaseLayers(e),e._waitImageOverlay(this.sourceCount,function(){e._bindLayers(e,t)})}}},{key:"_isAllLayersDone",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("imageoverlay"===n.desc&&void 0!==n._loaded&&!1===n._loaded)return!1}return!0}},{key:"_isValid",value:function(){return!(!this.sidebyside||!this.sidebyside._range)}},{key:"_waitImageOverlay",value:function(n,r){var i=0,o=this,a=setInterval(function(){if(console.log("_waitImageOverlay ..."),6e4<(i+=1e3))return console.log("_waitImageOverlay timeout ..."),clearInterval(a),s.default.Control.Notification.getInstance().showError(s.default.Local.Control.sidebyside.timeout()),s.default.Control.Waiting.close(),void o._stop(o);var e=s.default.Control.Manager.getInstance().getMapView(),t=s.default.Map.MapCommon._getActualLayers(e._getMap());t.length===n?(console.log("_waitImageOverlay done ..."),clearInterval(a),r()):t.length>n&&(console.log("_waitImageOverlay bigger ..."),clearInterval(a),s.default.Control.Waiting.close())},1e3)}},{key:"_start",value:function(e){var t=s.default.Control.Manager.getInstance().getMapView().getTree();t._clearStick(),t.prepareSideBySide();var n=t._getSelectedLayerNodes(),r=n.length;return r<2?(s.default.Control.Notification.getInstance().showError(s.default.Local.Control.sidebyside.least2()),!1):5<r?(s.default.Control.Notification.getInstance().showError(s.default.Local.Control.sidebyside.most5()),!1):(this.sourceCount=t._getNodesSourceNumber(n),"vertical"===e.options.orientation?(e.buttonVertical.setTitle(c),e.buttonVertical.setEnabled(!e.buttonVertical.enabled())):(e.button.setTitle(c),e.button.setEnabled(!e.button.enabled())),$("#sidebar").css("pointer-events","none"),$("#searchlight-buttonbar").css("pointer-events","none"),$("#screenshot-buttonbar").css("pointer-events","none"),$(".kq-advmenu-btn-search-light").css("pointer-events","none"),$(".kq-advmenu-btn-screenshot").css("pointer-events","none"),e.startSwitch||s.default.Control.Notification.getInstance().showInfo(s.default.Local.Control.sidebyside.maskStart()),s.default.Control.Waiting.showNoClose(),e._waitImageOverlay(this.sourceCount,function(){e._bindLayers(e)}),s.default.Control.Manager.getInstance()._unselectAllControlsExcept("sidebyside"),e._map.on("moveend",this.on_moveend,this),void(e.startSwitch=!1))}},{key:"_stop",value:function(e){e.button.enabled()&&(e.button.setTitle(l),e.button.setEnabled(!e.button.enabled()),e._releaseLayers(e),$("#sidebar").css("pointer-events","auto"),$("#searchlight-buttonbar").css("pointer-events","auto"),$("#screenshot-buttonbar").css("pointer-events","auto"),$(".kq-advmenu-btn-search-light").css("pointer-events","auto"),$(".kq-advmenu-btn-screenshot").css("pointer-events","auto"),e.startSwitch||s.default.Control.Notification.getInstance().showSuccess(s.default.Local.Control.sidebyside.maskRestore()),e.buttonVertical._button._container.style["pointer-events"]="auto",e._map.off("moveend",this.on_moveend,this)),e.buttonVertical.enabled()&&(e.buttonVertical.setTitle(u),e.buttonVertical.setEnabled(!e.buttonVertical.enabled()),e._releaseLayers(e),$("#sidebar").css("pointer-events","auto"),$("#searchlight-buttonbar").css("pointer-events","auto"),$("#screenshot-buttonbar").css("pointer-events","auto"),$(".kq-advmenu-btn-search-light").css("pointer-events","auto"),$(".kq-advmenu-btn-screenshot").css("pointer-events","auto"),e.startSwitch||s.default.Control.Notification.getInstance().showSuccess(s.default.Local.Control.sidebyside.maskRestore()),e.button._button._container.style["pointer-events"]="auto",e._map.off("moveend",this.on_moveend,this))}}]),n}();n.default=h},{"../kq":729}],686:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"left",init_open_id:""},l=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.options=L.extend({},s,e),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Evented),i(o,[{key:"addTo",value:function(e){var t=this;t._map=e,t._sidebar=L.control.sidebar(t.options.id,t.options),t._sidebar.addTo(t._map),t._sidebar.on("content",function(e){t.fire("content",e)}),t.options.init_open_id&&""!==t.options.init_open_id&&setTimeout(function(){t._sidebar.open(t.options.init_open_id),t._updateCloseButtonIcon()},1e3)}},{key:"remove",value:function(){this._sidebar.remove(),$("#sidebar").remove()}},{key:"open",value:function(e){this._sidebar.open(e)}},{key:"removeTab",value:function(e){$("#"+this.options.id+" #"+e).remove()}},{key:"removeContent",value:function(e){$("#"+e+".sidebar-pane").remove()}},{key:"show",value:function(){$("#sidebar").attr("disabled",!0)}},{key:"hide",value:function(){$("#sidebar").hide()}},{key:"close",value:function(){this._sidebar.close()}},{key:"_updateCloseButtonIcon",value:function(){var e=$("#"+this.options.id+" .sidebar-close i"),t="left"===this.options.position?"fa fa-caret-left":"fa fa-caret-right";e.removeClass().addClass(t)}}],[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.local=a.default.Local.Control.sidebar,e.next=3,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"sidebar/"+t);case 3:if("error"===(n=e.sent))return console.log("load sidebar_html error!"),e.abrupt("return",!1);e.next=7;break;case 7:return n=o._localHtml(n),r=a.default.Common.CommonValues.mapContainerID,console.log("load sidebar_html successfully！"),(i=$("#"+r)).length<=0&&console.log("sidebar.initAsync: mapdiv was not found!"),i.css("width","100%"),i.css("height","100%"),i.append(n),sidebar_init&&sidebar_init(),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return n.apply(this,arguments)})},{key:"_localHtml",value:function(e){return e.replaceAll("_layers_",o.local.layers()).replaceAll("_advancedSearch_",o.local.advancedSearch()).replaceAll("_overlayAnalysis_",o.local.overlayAnalysis()).replaceAll("_differenceAnalysis_",o.local.differenceAnalysis()).replaceAll("_featureImport_",o.local.featureImport()).replaceAll("_historyCompare_",o.local.historyCompare()).replaceAll("_bookmark_",o.local.bookmark()).replaceAll("_settings_",o.local.settings())}}]),o}();n.default=l},{"../kq":729}],687:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L.extend({},s,e)}return i(t,[{key:"initAsync",value:function(e){var n=this;n.button=new a.default.Control.MapButton("iconfont icon-print",function(e,t){console.log("print!"),n._hideAllControls(),$("#"+a.default.Common.CommonValues.insideMapID).print({globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:$.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"})},"打印地图"),n.buttonBar=new a.default.Control.MapButtonBar([n.button],{position:n.options.position}),e&&e()}},{key:"addTo",value:function(e){this._map=e,this.buttonBar.addTo(e)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_hideAllControls",value:function(){$(".leaflet-control-container").addClass("no-print")}}]),t}();n.default=l},{"../kq":729}],688:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={id:"simplesidebar",fileName:"simplesidebar.html",closeButton:!0,position:"right",autoPan:!1,type:"s"},l=function(){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=s,n=a.default.Map.MapConfig.getInstance(),r=n.getControl("simplesidebar");if(r){var i=n.getControlPosition(r);i&&(t.position=i)}this.options=L.extend({},t,e)}var e,t;return i(o,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"sidebar/"+this.options.fileName);case 2:if("error"===(n=e.sent))return console.log("load simple_sidebar_html error!"),e.abrupt("return",!1);e.next=6;break;case 6:return r=a.default.Common.CommonValues.mapContainerID,console.log("load simple_sidebar_html successfully！"),(i=$("#"+r)).length<=0&&console.log("sidebar.initAsync: mapdiv was not found!"),i.css("width","100%"),i.css("height","100%"),i.append(n),t&&t(),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})},{key:"addTo",value:function(e){this._map=e,this._sidebar=L.control.sidebar_v0(this.options.id,this.options),this._sidebar.addTo(this._map)}},{key:"remove",value:function(){this._sidebar.remove()}},{key:"show",value:function(){var e=this;setTimeout(function(){e._sidebar.show()},100)}},{key:"hide",value:function(){var e=this;setTimeout(function(){e._sidebar.hide()},100)}}]),o}();n.default=l},{"../kq":729}],689:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=r(e("../kq")),o=r(e("./SummaryAnalysisChart"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._config=u.default.Query.OverlayAnalysisConfig.getInstance()}var n,e,r;return i(t,[{key:"_executeSummaryAnalysis",value:(r=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._geometry=this._getGeometry(),null!==this._geometry){e.next=5;break}u.default.Control.Notification.getInstance().showError(u.default.Local.Control.overlayAnalysis.notification.drawAnalysisGeometry()),e.next=20;break;case 5:return n=[],e.prev=6,u.default.Control.Waiting.show(u.default.Control.Manager.getInstance()._getMap()),e.next=10,this._getQueryData();case 10:n=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),u.default.Control.Waiting.close();case 16:return e.prev=16,u.default.Control.Waiting.close(),e.finish(16);case 19:u.default.Query.QueryIDManager.isDataArrayCanceled(n,!0)||(0===n.length?u.default.Control.Notification.getInstance().showError("汇总分析记录数为空!"):(this._options=L.extend({},this._options,t),o.default.getInstance().open(n[0],this._options)));case 20:case"end":return e.stop()}},e,this,[[6,13,16,19]])})),function(e){return r.apply(this,arguments)})},{key:"_getQueryData",value:(e=a(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this)._getQueryOptions(),e.next=4,t._queryData(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_getQueryOptions",value:function(){var e=this._config,t=this._getExactConfigLayer(),n=this._getQueryUrl(),r=e.getLayerQueryID(t),i="PROJ4: "+u.default.Map.MapConfig.getInstance().getProj4(),o=this._geometry,a=e.getLayerChartField(t),s=e.getLayerSummaryField(t),l="sum";return"1"==t.type?l="count":s&&"OBJECTID"!==s||(s="$area$,$length$"),this._options={chartFiledsAlias:this._getChartFiledsAlias(t),summarytypes:l},{url:n,layerId:r,geoSRS:i,geometry:o,groupfields:a,summaryfields:s,summarytypes:l}}},{key:"_getExactConfigLayer",value:function(){var e=this._options,t=e.layerId,n=e.queryId,r=e.sourceName;return this._config.findExactLayer(t,n,r)}},{key:"_getSourceFromName",value:function(){var e=this._options.sourceName;return u.default.Map.MapConfig.getInstance().getSourceByName(e,!0)}},{key:"_getQueryUrl",value:function(){var e=this._getSourceFromName();return u.default.Map.MapConfig.getInstance().getSourceUrl(e)}},{key:"_getGeometry",value:function(){var e=u.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!0);return e?JSON.stringify(u.default.Common.CommonTools.geoJsonFCToGC(e)):null}},{key:"_queryData",value:(n=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.default.Query.SummaryAnalysis.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_getChartFiledsAlias",value:function(e){for(var t=[],n=this._config,r=n.getLayerFields(e).split(","),i=n.getLayerFieldsAlias(e).split(","),o=n.getLayerChartField(e).split(","),a={},s=0;s<r.length;++s)a[r[s]]=i[s];for(var l=0;l<o.length;++l)a[o[l]]&&t.push(a[o[l]]);return t}}]),t}();n.default=s},{"../kq":729,"./SummaryAnalysisChart":690}],690:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("./QueryResultChart"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),i(n,[{key:"open",value:function(e,t){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_mergeOptions",this).call(this,t),o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"open",this).call(this,e)}},{key:"_isRightData",value:function(e){return!(e.length>this._options.maxTotalNumber)||(KQ.Control.Notification.getInstance().showError(KQ.Local.Control.queryResultChart.notification.limitStatisticalResult()),!1)}},{key:"_getChartDataSource",value:function(e){for(var t=e.items,n=e.itemcount,r=this._options.colors,i=[],o=0,a=0;a<n;++a)t[a].values?o+=t[a].values[0].sum:o+=t[a].count;for(var s=0;s<n;++s){var l=r[s%r.length],u=void 0;u=t[s].values?Number(t[s].values[0].sum/o):Number(t[s].count/o);var c=t[s].name.split("+").join(" ");i.push({color:l,value:u,category:c})}for(var h=1,f=0;f<i.length-1;++f)h-=i[f].value;return i[i.length-1].value=h,i}},{key:"_getChartDialogId",value:function(){return"summary-query-result-chart-dialog"}},{key:"_getChartId",value:function(){return"summary-query-result-chart"}},{key:"_getChartPieId",value:function(){return"chartPie_summary"}},{key:"_getChartBarId",value:function(){return"chartBar_summary"}},{key:"_exportImageButtonId",value:function(){return"exportImage_summary"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=l},{"./QueryResultChart":667}],691:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topright",collapsed:!0},l=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);this._options=L.extend({},s,e),this._instance=null,this._map=null,this._baseLayers={},this._mapLayerManager=null;var t=a.default.Map.MapConfig.getInstance().getAllLayerList(!0);t[0],t[1];console.log("all_layers 0: "+t[0]),this._baseLayers={none:L.layerGroup()}}return i(n,[{key:"addTo",value:function(e){this._map=e,this._timelineLayers=L.control.layers(this._baseLayers,{},this._options),this._timelineLayers.addTo(e)}},{key:"remove",value:function(){this._timelineLayers.remove()}},{key:"addTimelineLayer",value:function(e,t){var n=this._getMapLayerFromLayerKey(e);this._baseLayers[t]=n,this._map&&(this.remove(),this.addTo(this._map),$(".leaflet-control-layers-toggle").attr("class","leaflet-control-layers-toggle icon iconfont icon-layers-line"))}},{key:"updateTimelineLayers",value:function(e,t){var n=a.default.Control.Notification.getInstance();this._baseLayers[t]?(n.showSuccess(a.default.Local.Control.TimelineLayers.delete()+t),delete this._baseLayers[t]):(n.showSuccess(a.default.Local.Control.TimelineLayers.add()+t),this.addTimelineLayer(e,t))}},{key:"getBaseLayers",value:function(){return this._baseLayers}},{key:"_getMapLayerFromLayerKey",value:function(e){return this._mapLayerManager||(this._mapLayerManager=a.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.getLayerFromKey(e)}}],[{key:"getInstance",value:function(e){return n._instance||(n._instance=new n(e)),n._instance}}]),n}();n.default=l},{"../kq":729}],692:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=(i(e("../kq")),i(e("../../libs/other/SimpleAjaxUploader")));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"attachToMapButton",value:function(e,t,n){var r=e._button.button;this.attachToHtmlButton(r,t,n)}},{key:"attachToHtmlButton",value:function(e,t,n){var r={button:e,title:e.title,url:t,name:"kquploadfile",responseType:"json",cors:!0},i=L.extend({},n,r);this.uploader=new o.default.SimpleUpload(i)}}]),e}();n.default=a},{"../../libs/other/SimpleAjaxUploader":48,"../kq":729}],693:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),u=(r=o)&&r.__esModule?r:{default:r};var c="",a=["round","balls","bubble","flip","skeleton","eclipse","boxes","meter"],h=null,f=0,s=function(){function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c=u.default.Local.Control.waitting.defaultText()}return i(l,null,[{key:"show",value:function(e,t,n,r,i){if(e||(e=u.default.Control.Manager.getInstance()._getMap()),r||(r=!1),h||(h=L.control.window(e,{content:c,modal:!0,closeButton:!r,className:"control-window waiting-window "+i}),L.DomEvent.on(h,"hide",function(){console.log("waiting dialog hide !!!")}),L.DomEvent.on(h,"close",function(){console.log("waiting dialog close !!!")}),L.DomEvent.on(h,"closeButtonClicked",function(){console.log("waiting dialog closeButtonClicked !!!"),u.default.Query.QueryIDManager.getInstance().cancelCurrentQuery()}),console.log("waiting dialog open !!!")),u.default.Query.QueryIDManager.getInstance().toNextID(),t||(t="pin"),"pin"===t){var o=l._getNextPinType();n&&(o=n),h.content(l._getPinTemplate(o))}else if("text"===t){var a=c;n&&(a=n),h.content(a)}var s=new Date;f=s.getTime(),h.show()}},{key:"showNoClose",value:function(){l.show(null,null,null,!0)}},{key:"close",value:function(){if(h){var e=(new Date).getTime()-f;e<1e3&&u.default.Common.CommonTools._sleep(1e3-e),f=0,h.close(),h=null}}},{key:"hide",value:function(){h&&h.hide()}},{key:"_getPinTemplate",value:function(e){return'<div class="content-to-center" style="width: 220px; height: 60px"><div class="cp-spinner cp-'+e+'"></div></div>'}},{key:"_getNextPinType",value:function(){var e=Math.floor(Math.random()*a.length);return a[e]}}]),l}();n.default=s},{"../kq":729}],694:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var a={parentID:"map",title:"Window",width:"600px",action:["Close"],icon:null,close:function(e){console.log("on close!")},dragend:function(){var e,t=this.wrapper.position(),n=s.default.Common.ComputeTools.scrollBarWidth(),r=$("body").height()-this.wrapper.height()-2*n-4,i=$("body").width()-this.wrapper.width()-4;t.left<0&&(e={left:0},$(this.wrapper).css(e)),t.top<0&&(e={top:0},$(this.wrapper).css(e)),t.left>i&&(e={left:i},$(this.wrapper).css(e)),t.top>r&&(e={top:r},$(this.wrapper).css(e))},updateHtml:function(e){return e}},l=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=L.extend({},a,t),this.options.template_name=e,this.options.visible=!1,this.obj=null}var e,t;return i(n,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,s.default.Map.MapConfig.getInstance(),!(0<(r=$("#"+n.options.template_name)).length)){e.next=6;break}e.next=18;break;case 6:return e.next=8,s.default.Common.NetworkTools.httpGetAsync(s.default.Common.CommonValues.kqwebmapPath+"window/"+n.options.template_name+".html");case 8:if("error"===(i=e.sent))return console.log("load html error!"),e.abrupt("return",!1);e.next=12;break;case 12:console.log("load html successfully！"),(o=$("#"+n.options.parentID)).length<=0&&console.log("Window.initAsync: "+n.options.parentID+" was not found!"),i=n.options.updateHtml(i),o.append(i),r=$("#"+n.options.template_name);case 18:return n.obj=r.kendoWindow(n.options).data("kendoWindow"),n.options.position||n.obj.center(),null!=n.options.icon&&(a="<i class='"+n.options.icon+"'>"+n.options.title+"</i>",n.obj.wrapper.find(".k-window-title").html(a)),t&&t(),e.abrupt("return",!0);case 23:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})},{key:"_object",value:function(){return this.obj}},{key:"_remove",value:function(){this.obj.destroy()}},{key:"open",value:function(){this.obj.open()}},{key:"close",value:function(){this.obj.close()}},{key:"center",value:function(){this.obj.center()}},{key:"setOptions",value:function(e){this.obj.setOptions(e)}},{key:"_getKendoObject",value:function(){return $("#"+this.options.template_name).data("kendoWindow")}},{key:"maximize",value:function(){this.obj.maximize()}}]),n}();n.default=l},{"../kq":729}],695:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("../kq")),o=a(e("leaflet"));function a(e){return e&&e.__esModule?e:{default:e}}var s={position:"topleft"},l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=o.default.extend({},s,e)}return r(t,[{key:"addTo",value:function(e){this._map=e;var t=i.default.Local.Control.ZoomInput.title();this.button=new i.default.Control.MapButton("iconfont icon-zoominput",function(e){var t=i.default.Control.ZoomInputDialog.getInstance();t.setMapView(i.default.Control.Manager.getInstance()),t.open()},t,"kq-zoominput"),this.buttonBar=new i.default.Control.MapButtonBar([this.button],{position:this.options.position}),this.buttonBar.setAttribute("id","zoominput-buttonbar"),this.buttonBar.addTo(this._map)}},{key:"addToMapView",value:function(e){this.addTo(e._getMap())}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}]),t}();n.default=l},{"../kq":729,leaflet:473}],696:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=o(e("../kq")),i=o(e("./Window"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._dialog=null,this._mapView=null,this._init()}return r(e,[{key:"setMapView",value:function(e){this._mapView=e}},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var e=s.default.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="zoom-input-dialog" style="border-radius: 4px">                       <div style="margin: 20px 20px 20px 20px">                         <div id="zoom-list" style="display: inline-block;"></div>                         <button id="zoom-change-btn" style="display: inline-block; margin-left: 10px" type="button">'+s.default.Local.Control.ZoomInputDialog.execute()+"</button>                      </div>                     </div>"))}},{key:"_formatZoom",value:function(e){if(-1!=e.indexOf(":")){var t=e.split(":",2),n=parseFloat(t[0]),r=parseFloat(t[1]);return n&&r?r/n:""}var i=parseFloat(e);return i||""}},{key:"_initUi",value:function(){var o=this;o._mark=L.marker(),o._initDialog();var a=$("#zoom-list").kendoComboBox({dataSource:{data:o._scales()}}).data("kendoComboBox");new s.default.ui.Button("zoom-change-btn",{click:function(){var e=o._formatZoom(a.text()),t=s.default.Map.MapConfig.getInstance().scales(),n=Math.round(1/Number(t[0].__text)),r=Math.round(1/Number(t[t.length-1].__text));if(e)if(n<e||e<r)s.default.Control.Notification.getInstance().showError("请输入配置范围内的比例尺!");else{a.text("1:"+e);var i=o._mapView._getMap();s.default.Common.CommonTools.setMapStandardScale(i,1/e)}else s.default.Control.Notification.getInstance().showError("请输入正确的比例尺!")}})}},{key:"_currentStandardScaleText",value:function(){return"1:"+s.default.Control.Scale.getStandardScaleNumber(this._mapView._getMap())}},{key:"_initDialog",value:function(){var t=this,e={width:"250px",height:"70px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+s.default.Common.CommonValues.mapContainerID,close:function(e){s.default.Control.Manager.getInstance()._getMap().removeLayer(t._mark)}},n=new i.default(t._getDialogId(),e);n.initAsync(function(){t._dialog=n._object()})}},{key:"_getDialogId",value:function(){return"zoom-input-dialog"}},{key:"open",value:function(e){var t="10px",n=parseInt($("#sidebar").css("width"))+20+"px";e&&(t=e.top||t,n=e.left||n),this._dialog.setOptions({position:{top:t,left:n},title:s.default.Local.Control.ZoomInputDialog.title()}),$("#zoom-input-dialog").parent(".k-window").css({"border-radius":"4px",overflow:"hidden"}),$("#zoom-list").data("kendoComboBox").text(this._currentStandardScaleText()),this._dialog.open()}},{key:"_scales",value:function(){for(var e=[],t=s.default.Map.MapConfig.getInstance().scales(),n=0;n<t.length;++n)e.push("1:"+Math.round(1/Number(t[n].__text)));return e}},{key:"close",value:function(){this._dialog.close()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729,"./Window":694}],697:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",orientation:"vertical",style:{}},l=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.options=L.extend({},s,e),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Evented),i(o,[{key:"addTo",value:function(e){this._map=e,this.options.content=o.advmenu_html,this._advmenu=new a.default.Control.Custom(this.options),this._advmenu.addTo(this._map),$("#kq-advmenu").kendoMenu({select:onAdvMenuSelect,orientation:this.options.orientation}),$("#kq-advmenu").hide(),advmenu_init&&advmenu_init()}},{key:"remove",value:function(){this._sidebar.remove(),$("#kq-advmenu").remove()}},{key:"show",value:function(){$("#kq-advmenu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-advmenu").hide()}}],[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/advmenu.html");case 2:if("error"===(t=e.sent))return console.log("load advmenu_html error!"),e.abrupt("return",!1);e.next=6;break;case 6:return o.advmenu_html=o._localHtml(t),console.log("load advmenu_html successfully！"),e.next=10,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/advmenu_script.html");case 10:if("error"===(n=e.sent))return console.log("load advmenu_script error!"),e.abrupt("return",!1);e.next=14;break;case 14:return r=a.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("advmenu_html.initAsync: mapdiv was not found!"),i.append(n),e.abrupt("return",!0);case 19:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"_localHtml",value:function(e){return e}}]),o}();n.default=l},{"../../kq":729}],698:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq");(r=o)&&r.__esModule;var a={position:"topright",id:"",title:"",classes:"",content:"",style:{},datas:{},events:{}},s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=L.extend({},a,e),this._control=L.control.custom(this.options)}return i(t,[{key:"addTo",value:function(e){this._control.addTo(e)}},{key:"remove",value:function(){this._control.remove()}}]),t}();n.default=s},{"../../kq":729}],699:[function(o,e,l){(function(r){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var e,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),t=o("../../kq"),a=(e=t)&&e.__esModule?e:{default:e};var s={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",orientation:"vertical",style:{}},n=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.options=L.extend({},s,e),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Evented),i(o,[{key:"addTo",value:function(e){this._map=e,this.options.content=o.drawmenu_html,this._drawmenu=new a.default.Control.Custom(this.options),this._drawmenu.addTo(this._map),$("#kq-drawmenu").kendoMenu({select:onAdvMenuSelect,orientation:this.options.orientation}),$("#kq-drawmenu").hide(),r.drawmenu_init&&r.drawmenu_init()}},{key:"remove",value:function(){this._sidebar.remove(),$("#kq-drawmenu").remove()}},{key:"show",value:function(){$("#kq-drawmenu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-drawmenu").hide()}}],[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/drawmenu.html");case 2:if("error"===(t=e.sent))return console.log("load drawmenu_html error!"),e.abrupt("return",!1);e.next=6;break;case 6:return o.drawmenu_html=o._localHtml(t),console.log("load drawmenu_html successfully！"),e.next=10,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/drawmenu_script.html");case 10:if("error"===(n=e.sent))return console.log("load drawmenu_script error!"),e.abrupt("return",!1);e.next=14;break;case 14:return r=a.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("drawmenu_html.initAsync: mapdiv was not found!"),i.append(n),e.abrupt("return",!0);case 19:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"_localHtml",value:function(e){return e}}]),o}();l.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../kq":729}],700:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",style:{}},l=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.options=L.extend({},s,e),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Evented),i(o,[{key:"addTo",value:function(e){this._map=e,this.options.content=o.mainmenu_html,this._mainmenu=new a.default.Control.Custom(this.options),this._mainmenu.addTo(this._map);var t=$("#kq-mainmenu");t.css("opacity",0),t.kendoMenu({select:onMainMenuSelect}),setTimeout(function(){var e=0;t.children("li").each(function(){e+=$(this)[0].getBoundingClientRect().width}),console.log("total_width:"+e),t.css("width",e+0),t.hide(),t.css("opacity",1),t.fadeIn("normal")},500),mainmenu_init&&mainmenu_init()}},{key:"remove",value:function(){this._sidebar.remove(),$("#kq-mainmenu").remove()}},{key:"show",value:function(){$("#kq-mainmenu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-mainmenu").hide()}}],[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/mainmenu.html");case 2:if("error"===(t=e.sent))return console.log("load mainmenu_html error!"),e.abrupt("return",!1);e.next=6;break;case 6:return o.mainmenu_html=o._localHtml(t),console.log("load mainmenu_html successfully！"),e.next=10,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/mainmenu_script.html");case 10:if("error"===(n=e.sent))return console.log("load mainmenu_script error!"),e.abrupt("return",!1);e.next=14;break;case 14:return r=a.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("mainmenu_html.initAsync: mapdiv was not found!"),i.append(n),e.abrupt("return",!0);case 19:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"_localHtml",value:function(e){return e}}]),o}();n.default=l},{"../../kq":729}],701:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(e("../../kq")),o=r(e("./OperatorToolButton"));function r(e){return e&&e.__esModule?e:{default:e}}e("./History");var a=o.default.extend({options:{type:"backward-map",icon:"icon iconfont icon-arrow-left"},initialize:function(e,t,n){var r=this;return r.options.tips=i.default.Local.Control.toolButton.backwardButton.tips(),r.options=L.extend(r.options,n),o.default.prototype.initialize.call(r,e,t),$(r._container).addClass("leaflet-disabled"),e.on("historybackdisabled",function(){$(r._container).addClass("leaflet-disabled")}).on("historybackenabled",function(){$(r._container).removeClass("leaflet-disabled")}),r},executeOperator:function(){L.HistoryControl.getInstance(this._map).goBack()}});n.default=a},{"../../kq":729,"./History":710,"./OperatorToolButton":716}],702:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=e("leaflet"),a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Map.BoxZoom),r(t,[{key:"addHooks",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addHooks",this).call(this)}},{key:"removeHooks",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeHooks",this).call(this)}},{key:"moved",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moved",this).call(this)}},{key:"_resetState",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_resetState",this).call(this)}},{key:"_onMouseDown",value:function(e){console.log("_onMouseDown"),o.Browser.mobile&&document.addEventListener("touchstart",o.DomEvent.preventDefault,{passive:!1}),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onMouseDown",this).call(this,e),o.Browser.mobile&&o.DomEvent.on(document,{touchmove:this._onMouseMove,touchend:this._onMouseUp},this)}},{key:"_onMouseMove",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onMouseMove",this).call(this,e)}},{key:"_finish",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_finish",this).call(this),o.Browser.mobile&&(o.DomEvent.off(document,{touchmove:this._onMouseMove,touchend:this._onMouseUp},this),document.removeEventListener("touchstart",o.DomEvent.preventDefault))}},{key:"_onMouseUp",value:function(e){console.log("_onMouseUp"),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onMouseUp",this).call(this,e)}},{key:"_onKeyDown",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onKeyDown",this).call(this)}}]),t}();n.default=a},{leaflet:473}],703:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./BoxZoom"),a=(r=o)&&r.__esModule?r:{default:r};var s=e("leaflet"),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_onMouseUp",value:function(e){var t=this;if((1===e.which||1===e.button)&&(t._finish(),t._moved)){setTimeout(s.bind(t._resetState,t),0);var n=new s.LatLngBounds(t._map.containerPointToLatLng(t._startPoint),t._map.containerPointToLatLng(t._point));t._map.setView(n.getCenter(),t._map.getZoom()-1).fire("boxzoomend",{boxZoomBounds:n})}}}]),t}();n.default=l},{"./BoxZoom":702,leaflet:473}],704:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});i(e("../../kq"));var r=i(e("./OperatorToolbutton"));function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend({options:{type:"custom"},initialize:function(e,t,n){return this.options=L.extend({},this.options,n),r.default.prototype.initialize.call(this,e,t),this},executeOperator:function(){this._map.fire("custom_button_clicked")}});n.default=o},{"../../kq":729,"./OperatorToolbutton":717}],705:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./InformationButton")),i=o(e("../../kq"));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({options:{type:"custom_info-query",icon:"icon iconfont icon-info-query"},_getConfigLayer:function(){var e=this.options.layerId,t=this.options.sourceName;return i.default.Query.InfoQueryConfig.getInstance().findAllLayer(e,t)},_openQueryDialog:function(e){this.options.dialog.open(e)}});n.default=a},{"../../kq":729,"./InformationButton":712}],706:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./OperatorToolButton")),i=o(e("../Manager"));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({options:{type:"drawing",icon:"icon iconfont icon-draw"},initialize:function(e,t,n){return this.options.tips=KQ.Local.Control.toolButton.drawButton.tips(),this.options=L.extend(this.options,n),r.default.prototype.initialize.call(this,e,t),this},executeOperator:function(){console.log("draw button executeOperator"),i.default.getInstance()._toggleDrawPane()}});n.default=a},{"../Manager":643,"./OperatorToolButton":716}],707:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./OperatorToolButton"),o=(r=i)&&r.__esModule?r:{default:r};e("./History");var a=o.default.extend({options:{type:"forward-map",icon:"icon iconfont icon-arrow-right"},initialize:function(e,t,n){var r=this;return r.options.tips=KQ.Local.Control.toolButton.forwardButton.tips(),r.options=L.extend(r.options,n),o.default.prototype.initialize.call(r,e,t),$(r._container).addClass("leaflet-disabled"),e.on("historyforwarddisabled",function(){$(r._container).addClass("leaflet-disabled")}).on("historyforwardenabled",function(){$(r._container).removeClass("leaflet-disabled")}),r},executeOperator:function(){L.HistoryControl.getInstance(this._map).goForward()}});n.default=a},{"./History":710,"./OperatorToolButton":716}],708:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("../../kq")),i=o(e("./ModeToolButton"));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.extend({options:{type:"free-draw",icon:"icon iconfont icon-freedraw-0"},initialize:function(e,t,n){return this.options.tips=r.default.Local.Control.toolButton.freeDrawButton.tips(),this.options=L.extend({},this.options,n),i.default.prototype.initialize.call(this,e,t),this},bindEvent:function(){this._map.fire("start_free_draw")},removeEvent:function(){this._map.fire("stop_free_draw")}});n.default=a},{"../../kq":729,"./ModeToolButton":713}],709:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("./OperatorToolButton"));i(e("../../map/MapConfig"));function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend({options:{type:"full-map",icon:"icon iconfont icon-full-map"},initialize:function(e,t,n){return this.options.tips=KQ.Local.Control.toolButton.globeButton.tips(),this.options=L.extend(this.options,n),r.default.prototype.initialize.call(this,e,t),this},executeOperator:function(){KQ.Control.Manager.getInstance().getMapView().zoomToMap()}});n.default=o},{"../../map/MapConfig":749,"./OperatorToolButton":716}],710:[function(e,t,n){"use strict";L.HistoryControl=L.Control.extend({options:{maxMovesToSave:20,shouldSaveMoveInHistory:function(e){return!0}},initialize:function(e,t){L.Util.setOptions(this,t),this._map=e,this._shouldSave=!0,this._state.maxMovesToSave=this.options.maxMovesToSave,this._updateDisabled()},onRemove:function(e){e.off("movestart")},performActionWithoutTriggeringEvent:function(e){var t=this._state.ignoringEvents;this._state.ignoringEvents=!0,$.isFunction(e)&&e(),this._state.ignoringEvents=t},moveWithoutTriggeringEvent:function(e){var t=this;this.performActionWithoutTriggeringEvent(function(){t._map.setView(e.centerPoint,e.zoom)})},goBack:function(){return this._invokeBackOrForward("historyback",this._state.history,this._state.future)},goForward:function(){return this._invokeBackOrForward("historyforward",this._state.future,this._state.history)},clearHistory:function(){this._state.history.items=[],this._updateDisabled()},clearFuture:function(){this._state.future.items=[],this._updateDisabled()},_map:null,_state:{backDisabled:null,forwardDisabled:null,ignoringEvents:!1,maxMovesToSave:0,history:{items:[]},future:{items:[]}},_updateDisabled:function(){var e=0===this._state.history.items.length,t=0===this._state.future.items.length;e!==this._state.backDisabled&&(this._state.backDisabled=e,this._map.fire("historyback"+(e?"disabled":"enabled"))),t!==this._state.forwardDisabled&&(this._state.forwardDisabled=t,this._map.fire("historyforward"+(t?"disabled":"enabled"))),this.options.useExternalControls||(this._setButtonDisabled(this._backButton,e),this._setButtonDisabled(this._forwardButton,t))},_setButtonDisabled:function(e,t){var n=$(e),r="leaflet-disabled";t?n.addClass(r):n.removeClass(r)},_pop:function(e){if(e=e.items,$.isArray(e)&&0<e.length)return e.splice(e.length-1,1)[0]},_push:function(e,t){var n=this._state.maxMovesToSave;e=e.items,$.isArray(e)&&(e.push(t),0<n&&e.length>n&&e.splice(0,1))},_invokeBackOrForward:function(e,t,n){var r=this;r._shouldSave=!1,setTimeout(function(){r._shouldSave=!0},200);var i=this._popStackAndUseLocation(t,n);return!!i&&(this._map.fire(e,i),!0)},_popStackAndUseLocation:function(e,t){if($.isArray(e.items)&&0<e.items.length){var n=this._buildZoomCenterObjectFromCurrent(this._map),r=this._pop(e);return this._push(t,n),this.moveWithoutTriggeringEvent(r),{previousLocation:r,currentLocation:n}}},_buildZoomCenterObjectFromCurrent:function(e){return new L.ZoomCenter(e.getZoom(),e.getCenter())},addMapListeners:function(){var n=this;this._map.on("movestart",function(e){if(!n._state.ignoringEvents){var t=n._buildZoomCenterObjectFromCurrent(e.target);n.options.shouldSaveMoveInHistory(t)&&n._shouldSave&&(n._state.future.items=[],n._push(n._state.history,t))}n._updateDisabled()})}}),L.ZoomCenter=L.Class.extend({initialize:function(e,t){this.zoom=e,this.centerPoint=t}}),L.HistoryControl.getInstance=function(e,t){return L.HistoryControl.instance||(L.HistoryControl.instance=new L.HistoryControl(e,t)),L.HistoryControl.instance}},{}],711:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("../Window")),_=r(e("../FeatureUpdateAttributeDialog"));function r(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=e("leaflet"),s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=t;return n._dataSource=null,n._queryDialog=null,n._recordList=null,n._propertyGrid=null,n._confirmDialog=null,n._options=e,n._defaultFlickerColor=null,n._currentFlickerLayerGuid=null,n._selectLayerAndRecordIndexObj=null,n._element=$('<div id="info-query-dialog"><ul id="info-query-record-list"></ul><div><div id="info-query-property-grid"></div></div></div>'),n._map=KQ.Control.Manager.getInstance()._getMap(),n._parent=$("body"),n._selectLayerKey="",e&&(e.html&&(n._element=$(e.html)),e.map&&(n._map=e.map),e.parent&&(n._parent=$("#"+e.parent))),n._init(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.Evented),i(r,[{key:"getGridData",value:function(){return this._propertyGrid.dataSource.options.data}},{key:"open",value:function(e){var t=this;for(var n in t._dataSource=e,t._dataProcessingFunc&&t._dataProcessingFunc(t._dataSource),t._dataSource)for(var r=t._dataSource[n].records,i=0;i<r.length;++i)r[i].GUID=KQ.Common.ComputeTools.guid();for(var o in t._recordList.setDataSource(t._getRecordListDataSource()),setTimeout(function(){t._selectFirstItem()},100),t._queryDialog.open(),t._dataSource)for(var a=t._dataSource[o].records,s=0;s<a.length;++s){var l=a[s].geometry;if(l)KQ.Common.CommonTools.geoJsonFromGeometry(l)}t._addOrRemoveFeatureUpdateDelete()}},{key:"addDataProcessingFunc",value:function(e){this._dataProcessingFunc=e}},{key:"removeDataProcessingFunc",value:function(){delete this._dataProcessingFunc}},{key:"close",value:function(){this._queryDialog.close()}},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){$("body").append(this._element)}},{key:"_initUi",value:function(){this._initQueryDialog(),this._initRecordList(),this._initPropertyGrid()}},{key:"_addOrRemoveFeatureUpdateDelete",value:function(){var o=this,a=KQ.Map.MapConfig.getInstance();a.controls().forEach(function(e){var t=a.getControlType(e);if(a.isControlHasPermission(e)){if("sidebar"===t){var n=a.getSubControl(e,"featureImport"),r=a.getControlProperty(n,"is_update"),i=a.getControlProperty(n,"is_delete");n&&a.isControlHasPermission(n)&&o._initRecordListContextMenu(r,i)}}else;})}},{key:"_getFeatureUpdateDeleteMenuItems",value:function(e,t){var n=[];return"1"===e&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureUpdateMenu(),cmd:"featureUpdate",uiIcon:"ui-icon custom-icon-transparency"}),"1"===t&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureDeleteMenu(),cmd:"featureDelete",uiIcon:"ui-icon custom-icon-clearall"}),n}},{key:"_initRecordListContextMenu",value:function(e,t){var n,y=this;($("div#info-query-dialog > ul#info-query-record-list").bind("contextmenu",function(e){e.preventDefault()}),"0"!==e||"0"!==t)&&((e||t)&&$("#info-query-dialog").contextmenu({delegate:"ul.k-group span.k-state-selected",menu:y._getFeatureUpdateDeleteMenuItems(e,t),select:(n=v(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,l,u,c,h,f,d,p,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=y._selectLayerAndRecordIndexObj.layer,i=y._selectLayerAndRecordIndexObj.index,o=r.split("@@"),a=o[0],s=o[1],l=KQ.Query.FeatureImportConfig.getInstance(),u=l.findLayer(s,a),c=y._dataSource[r].records[i],h=y._dataSource[r].showName,f=""+c[h],y._isBlankText(f)&&(f="blank"),d=l.getLayerPrimaryKey(u),p=c[d],m=d+"="+p,e.t0=n.cmd,e.next="featureUpdate"===e.t0?17:"featureDelete"===e.t0?21:28;break;case 17:return console.log("FeatureUpdate: "),y._featureUpdateAttributeDialog=_.default.getInstance(),y._featureUpdateAttributeDialog.initFeatureUpdateDialog(u,c,f),e.abrupt("break",28);case 21:return console.log("FeatureDelete: "),g=KQ.Common.CommonValues.mapContainerID,$("#"+g).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),y._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: medium;'>"+KQ.Local.Control.FeatureImport.ContextMenu.ConfirmToDelete()+"</b>",messages:{okText:KQ.Local.Control.FeatureImport.ContextMenu.okText(),cancel:KQ.Local.Control.FeatureImport.ContextMenu.cancelText()}}).data("kendoConfirm"),y._confirmDialog.result.done(v(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("准备删除要素!"),y._featureUpdateAttributeDialog=_.default.getInstance(),1==(t=y._selectLayerKey.split("@@")).length&&console.log("获取sourceName失败, _selectLayerKey：",y._selectLayerKey),e.next=6,y._featureUpdateAttributeDialog.featureDeleteFunction(s,m,f,t[0]);case 6:n=e.sent,console.log("Feature delete is success @@@ ---\x3e"+n),n&&(console.log("$$ --\x3e dataSource: ",y._dataSource),y._dataSource[r].records.splice(i,1),y.open(y._dataSource),setTimeout(function(){y._map.panBy([-150,-150])},1e3));case 9:case"end":return e.stop()}},e,this)}))).fail(function(){console.log("取消要素删除操作!")}),y._confirmDialog.open(),e.abrupt("break",28);case 28:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}))}},{key:"_featureDeleteFunction",value:function(e){var t="",n="";if(this._selectLayerAndRecordIndexObj){var r=this._selectLayerAndRecordIndexObj,i=r.layer,o=r.index,a=this._dataSource[i].showName,s=this._dataSource[i].records[o];t=""+s[a],this._isBlankText(t)&&(t="blank"),n=s.OBJECTID}var l=KQ.Map.MapConfig.getInstance(),u=KQ.Query.FeatureDelete.getInstance();try{var c={url:l.getSourceUrl(),layerId:e,where:"objectid="+n},h=KQ.Control.Notification.getInstance();u.queryAsync(c,function(){console.log("Feature delete query_good");var e=u.data();console.log("feature delete data.length:"+e.length),e.forEach(function(e){console.log("Feature delete query ID: "+e.ID)}),h.showSuccess(t+" 要素删除成功!")},function(){console.log("query_error"),h.showError(t+" 要素删除失败!")})}catch(e){console.log("Feature delete error:"+e)}}},{key:"_initQueryDialog",value:function(){var t=this,e={title:KQ.Local.Control.infoQueryDialog.title(),width:"600px",height:"400px",actions:["Minimize","Close"],scrollable:!1,close:function(e){KQ.Map.MapCommon.clearFlickerLayer(t._map)}};t._options&&t._options.parent&&(e.appendTo="#"+t._options.parent,e.position={top:0,left:0},e.draggable=!1,e.resizable=!1);var n=new o.default(t._getQueryDialogId(),e);n.initAsync(function(){t._queryDialog=n._object()}),t._options&&$("#"+t._getQueryDialogId()).closest(".k-window").bind("mousedown mousewheel DOMMouseScroll dblclick",function(e){e.stopPropagation()})}},{key:"_initRecordList",value:function(){var n=this;n._recordList=$(n._getRecordListId()).kendoPanelBar({select:function(e){n._onSelectChanged(e.item)},activate:function(e){var t=$(n._getRecordListId()+" .k-state-selected").siblings(".k-group").children(":first");0!==t.length&&(n._recordList.select(t),n._onSelectChanged(n._recordList.select()[0]))}}).data("kendoPanelBar")}},{key:"_initPropertyGrid",value:function(){this._propertyGrid=$(this._getPropertyGridId()).kendoGrid({selectable:"row",allowCopy:!0,columns:[{field:"Field",title:KQ.Local.Control.infoQueryDialog.columns.field()},{field:"Value",title:KQ.Local.Control.infoQueryDialog.columns.value()}]}).data("kendoGrid")}},{key:"_getQueryDialogId",value:function(){return this._element.attr("id")}},{key:"_getRecordListId",value:function(){return"#"+this._element.children("ul").attr("id")}},{key:"_getPropertyGridId",value:function(){return"#"+this._element.find("div[id*='grid']").attr("id")}},{key:"_onSelectChanged",value:function(e){var t=this;if(t._selectLayerAndRecordIndexObj=t._getLayerAndIndexFromItem($(e)),t._selectLayerAndRecordIndexObj){var n=t._selectLayerAndRecordIndexObj,r=n.layer,i=n.index;t._refreshPropertyGrid(r,i),t._flickerSelectedItem(r,i),t.fire("select",t._getSelectData(r,i)),t._selectLayerKey!==r&&(t._selectLayerKey=r,t.fire("layerKeyChanged",{key:r}))}}},{key:"_getRecordListDataSource",value:function(){var e=[];for(var t in this._dataSource){for(var n=[],r=this._dataSource[t].label,i=this._dataSource[t].showName,o=this._dataSource[t].records,a=0;a<o.length;++a){var s=""+o[a][i];this._isBlankText(s)&&(s="blank"),n.push({text:s,layer:t,type:"item"})}e.push({text:r,items:n,type:"layer"})}return e}},{key:"_getPropertyGridDataSource",value:function(e,t){for(var n=[],r=this._dataSource[e].fields,i=this._dataSource[e].titles,o=this._dataSource[e].records[t],a=0;a<r.length;++a){var s=r[a],l=i[a];o.hasOwnProperty(s)&&n.push({Field:l,Value:o[s]})}return n}},{key:"_getSelectData",value:function(e,t){for(var n={},r=this._dataSource[e].fields,i=this._dataSource[e].records[t],o=0;o<r.length;++o){var a=r[o];i.hasOwnProperty(a)&&(n[a]=i[a])}return i&&i.geometry&&(i.geometry.hasOwnProperty("Length")&&(n.Geometry_Length=i.geometry.Length),i.geometry.hasOwnProperty("Area")&&(n.Geometry_Area=i.geometry.Area)),n}},{key:"_getLayerAndIndexFromItem",value:function(e){var t=e.closest(".k-panelbar"),n=this._recordList.options.dataSource,r=e.parentsUntil(t,".k-item").map(function(){return $(this).index()}).get().reverse();r.push(e.index());for(var i=-1,o=r.length;++i<o;)n=n[r[i]],n=i<o-1?n.items:n;return n&&"item"===n.type?{index:e.index(),layer:n.layer}:null}},{key:"_refreshPropertyGrid",value:function(e,t){this._propertyGrid.setOptions({dataSource:this._getPropertyGridDataSource(e,t)})}},{key:"_flickerSelectedItem",value:function(e,t){var n=this._dataSource[e].records[t].geometry;if(n){var r=this._dataSource[e].records[t].GUID;if(r===this._currentFlickerLayerGuid)KQ.Map.MapCommon.clearFlickerLayer(this._map),this._currentFlickerLayerGuid=null;else{this._currentFlickerLayerGuid=r;var i=this._map,o=this._dataSource[e].flickerColor||this._defaultFlickerColor,a={};o&&(a={color:o,fillColor:o});var s=KQ.Common.CommonTools.geoJsonFromGeometry(n,a);KQ.Map.MapCommon.fitBoundsLayer(s,i),KQ.Map.MapCommon.flickerLayer(s,i)}}}},{key:"_selectFirstItem",value:function(){this._recordList.expand($(this._getRecordListId()+" .k-item:eq(0)")),this._recordList.select($(this._getRecordListId()+" .k-group .k-item:eq(0)")),this._onSelectChanged(this._recordList.select()[0])}},{key:"_isBlankText",value:function(e){return!e||"string"==typeof e&&0===(e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).length}},{key:"setDefaultFlickerColor",value:function(e){this._defaultFlickerColor=e}}],[{key:"getInstance",value:function(){return r._instance||(r._instance=new r),r._instance}}]),r}();n.default=s},{"../FeatureUpdateAttributeDialog":635,"../Window":694,leaflet:473}],712:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var p=a(e("../../kq")),r=a(e("./ModeToolButton")),i=a(e("../RubberBand")),o=a(e("./InfoQueryDialog"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l,u,c,h=r.default.extend({options:{type:"info-query",icon:"icon iconfont icon-info-query"},initialize:function(e,t,n){return this.options.tips=p.default.Local.Control.toolButton.informationButton.tips(),this.options=L.extend({},this.options,n),r.default.prototype.initialize.call(this,e,t),this._bounds=null,this._boxZoom=new i.default(e),this._config=p.default.Query.InfoQueryConfig.getInstance(),this},bindEvent:function(){var e=this;e._boxZoom.addHooks(),L.Browser.mobile?e._map.on("touchstart",e._handleMouseDown,e):e._map.on("mousedown",e._handleMouseDown,e),e._map.on("boundend",e._executeInfoQuery,e)},removeEvent:function(){var e=this;L.Browser.mobile?e._map.off("touchstart",e._handleMouseDown,e):e._map.off("mousedown",e._handleMouseDown,e),e._map.off("boundend",e._executeInfoQuery,e),e._map.dragging.enable(),e._boxZoom.removeHooks()},_handleMouseDown:function(e){this._boxZoom.onMouseDown(e)},_getLayersTree:function(){var e=p.default.Control.Manager.getInstance().getControl("tree");return e||(p.default.Control.Notification.getInstance().showError(p.default.Local.Control.toolButton.informationButton.notification.layerTreeEmpty()),null)},_getCheckedLayers:function(){var e=this._getLayersTree();if(!e)return[];var t=e.getCheckedLayers();return 0===t.length&&p.default.Control.Notification.getInstance().showError(p.default.Local.Control.toolButton.informationButton.notification.selectLayer()),t},_getQueryLayers:function(){return"single"===this._config.queryMode()?this._getQueryLayersSingleMode():this._getQueryLayersMultiMode()},_getQueryLayersSingleMode:function(){var e=this._getCheckedLayers(),t=[];if(0==e.length)return t;for(var n=p.default.Control.Manager.getInstance().getControl("tree").getActiveNode(),r=0;r<e.length;++r){var i=e[r];if(n&&n.key===p.default.Map.MapCommon.getKeyFromSourceNameLayerId(i.sourceName,i.layerId)){t.push(i);break}}return 0===t.length&&p.default.Control.Notification.getInstance().showError(p.default.Local.Control.toolButton.informationButton.notification.selectQueryLayer()),t},_getQueryLayersMultiMode:function(){return this._getCheckedLayers()},_getConfigLayer:function(){for(var e=[],t=this._getQueryLayers(),n=0;n<t.length;++n){var r=t[n],i=this._getOriginSourceName(r.sourceName);e=e.concat(this._config.findAllLayer(r.layerId,i))}return e},_executeInfoQuery:(c=s(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this)._bounds=t,0===(r=n._getConfigLayer()).length)return e.abrupt("return");e.next=5;break;case 5:i={},o=0;case 7:if(!(o<r.length)){e.next=30;break}if(a=r[o],null===(s=n._getQueryOptions(a,n._getGeometry())))return p.default.Control.Notification.getInstance().showError(p.default.Local.Control.toolButton.informationButton.notification.layerNotInConfigFile()),e.abrupt("return");e.next=13;break;case 13:return e.next=15,n._getQueryData(s);case 15:if(l=e.sent,p.default.Query.QueryIDManager.isDataCanceled(l))return console.log("query canceled, data come!"),e.abrupt("return");e.next=19;break;case 19:if(0===l.length)return e.abrupt("continue",27);e.next=21;break;case 21:u={configLayer:a,records:l},c=n._config.getLayerSourceName(a),h=n._config.getLayerID(a),f=n._config.getLayerQueryID(a),d=[c,h,f].join("@@"),i[d]=n._organizeQueryData(u);case 27:++o,e.next=7;break;case 30:0===Object.keys(i).length?p.default.Control.Notification.getInstance().showError(p.default.Local.Control.toolButton.informationButton.notification.queryRecordEmpty()):n._openQueryDialog(i);case 31:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)}),_openQueryDialog:function(e){o.default.getInstance().open(e)},_getQueryData:(u=s(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,r=[],e.prev=2,p.default.Control.Waiting.show(p.default.Control.Manager.getInstance()._getMap()),e.next=6,n._queryData(t);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p.default.Control.Waiting.close();case 12:return e.prev=12,p.default.Control.Waiting.close(),e.finish(12);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[2,9,12,15]])})),function(e){return u.apply(this,arguments)}),_organizeQueryData:function(e){for(var t=e.configLayer,n=e.records,r=t.fields.split(","),i=[],o=this._config.getLayerLabel(t),a=t._flicker_color,s=this._config.getLayerShowName(t),l=this._config.getLayerFieldsAlias(t).split(","),u=0;u<n.length;++u){var c=n[u],h={},f=c.properties;h.geometry=c.geometry;for(var d=0;d<r.length;++d){var p=r[d];f.hasOwnProperty(p)&&(h[p]=f[p])}i.push(h)}return{label:o,showName:s,records:i,fields:r,titles:l,flickerColor:a}},_queryData:(l=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.default.Query.InfoQuery.getInstance(),e.next=3,n.queryAsync(t);case 3:return e.abrupt("return",n.data());case 4:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)}),_getGeometry:function(){var e=this._bounds,t=e.getNorthEast(),n=e.getSouthEast(),r=e.getSouthWest(),i=e.getNorthWest();return{type:"PolyGon",coordinates:[[[t.lng,t.lat],[n.lng,n.lat],[r.lng,r.lat],[i.lng,i.lat],[t.lng,t.lat]]]}},_getOriginSourceName:function(e){var t=this._getSourceByName(e);return p.default.Map.MapConfig.getInstance().getOriginSourceName(t)},_getSourceByName:function(e,t){return p.default.Map.MapConfig.getInstance().getSourceByName(e,t)},_getQueryUrl:function(e){var t=this._getSourceByName(e,!0);return p.default.Map.MapConfig.getInstance().getSourceUrl(t)},_getQueryOptions:function(e,t){if(null===e)return null;var n=this._config,r=n.getLayerFields(e),i=n.getLayerQueryID(e),o=n.getLayerRequestCount(e);return{fields:r+=",#length#,#area#",layerId:i,geometry:JSON.stringify(t),url:this._getQueryUrl(e._src_name),reqcount:o}}});n.default=h},{"../../kq":729,"../RubberBand":676,"./InfoQueryDialog":711,"./ModeToolButton":713}],713:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./ToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{mode:"mode"},initialize:function(e,t){return o.default.prototype.initialize.call(this,e,t),this},bindEvent:function(){},removeEvent:function(){}});n.default=a},{"./ToolButton":722}],714:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(e("./ModeToolButton")),i=a(e("./NetworkAnalysisMenu")),o=a(e("../NetworkAnalysisDialog"));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.extend({options:{type:"network-analysis",icon:"icon iconfont icon-my-path"},initialize:function(e,t,n){return this.options.tips=KQ.Local.Control.NetworkAnalysisDialog.networkAnalysis(),this.options=L.extend({},this.options,n),r.default.prototype.initialize.call(this,e,t),this},bindEvent:function(){o.default.getInstance().isOpen()||(o.default.getInstance().open(),i.default.getInstance().enterNetworkAnalysisMode(this._map)),i.default.getInstance().createContextMenu(this._map),this._map.dragging.disable(),$(".leaflet-container").css("cursor","crosshair"),$(".leaflet-pane.leaflet-overlay-pane").on("mouseover",function(){$(".leaflet-overlay-pane .leaflet-zoom-animated").css("cursor","crosshair")})},removeEvent:function(){i.default.getInstance().resetToDefaultContextMenu(),this._map&&this._map.dragging.enable(),$(".leaflet-container").css("cursor",""),$(".leaflet-pane.leaflet-overlay-pane").on("mouseover",function(){$(".leaflet-overlay-pane .leaflet-zoom-animated").css("cursor","")})}});n.default=s},{"../NetworkAnalysisDialog":657,"./ModeToolButton":713,"./NetworkAnalysisMenu":715}],715:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(e("../../kq")),s=i(e("../../common/CommonValues"));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e._startPointLayers=[],e._endPointLayers=[],e._wayPointLayers=[],e._impassePointLayers=[],e._impasseAreaLayers=[],e._startPointLayerGroup=null,e._endPointLayerGroup=null,e._wayPointLayerGroup=null,e._impassePointLayerGroup=null,e._impasseAreaLayerGroup=null,e._networkAnalysisTypes=null,e._wayPointSeq=1,e._impassePointSeq=1,e._local=a.default.Local.Control.NetworkAnalysisMenu}return r(t,[{key:"enterNetworkAnalysisMode",value:function(e){var n=this;n._map=e,n._initLayerGroups(),n._networkAnalysisTypes=s.default.networkAnalysisTypes.optimal_path,n._wayPointSeq=1,n._impassePointSeq=1,$("#"+s.default.mapContainerID).bind("network-analysis_type_changed",function(e,t){n._clearLayersByType(),n._networkAnalysisTypes=Number(t),n._addMenuItems(),n._updateLayersByType(),0!==n._startPointLayers.length&&(n._startPointLayers[0].options.contextmenuItems=n._getStartPointContextMenuItems(n._startPointLayers[0]))});var t=a.default.Control.Manager.getInstance().getMapView();t&&(t.on("draw:created",n._addImpasseArea,n),t.setDrawingOptions({polygon:{shapeOptions:{color:"#ff3366",FillColor:"#ff3366"}}}))}},{key:"exitNetworkAnalysisMode",value:function(){this._clearData(),this._clearLayers(),this._resetToDefaultContextMenu(),this._networkAnalysisTypes=null;var e=a.default.Control.Manager.getInstance().getMapView();if(e){e.off("draw:created",this._addImpasseArea,this);var t=a.default.Map.MapConfig.getInstance(),n=t.getDrawOption().drawDefaultColor?t.getDrawOption().drawDefaultColor:"#3388ff";e.setDrawingOptions({polygon:{shapeOptions:{color:n,FillColor:n}}})}}},{key:"resetToDefaultContextMenu",value:function(){this._resetToDefaultContextMenu(),this._map&&this._map.off("contextmenu",this._addMenuItems,this)}},{key:"createContextMenu",value:function(e){e.on("contextmenu",this._addMenuItems,this),e.fire("contextmenu")}},{key:"_startingPointMenu",value:function(){var o=this;return{text:o._local.asStartingPoint(),iconCls:"iconfont icon-main-map",disabled:!o._isLayerGroupEmpty(o._startPointLayerGroup),callback:function(e){var t={icon:"fa-number",markerColor:"green",shape:"square",prefix:"fa",number:o._local.startPointMark()},n=e.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:t}),i=[o._removeMarkerMenu(o._removeMarkerFromStartPoint,r)];o._networkAnalysisTypes===s.default.networkAnalysisTypes.optimal_path&&i.push(o._setStartPointToEndPointMenu()),r.bindContextMenu({contextmenuItems:i,contextmenuInheritItems:!1}),o._startPointLayers.push(r),o._startPointLayerGroup.addLayer(r)}}}},{key:"_endingPointMenu",value:function(){var o=this;return{text:o._local.asEndingPoint(),iconCls:"iconfont icon-main-map",disabled:!o._isLayerGroupEmpty(o._endPointLayerGroup),callback:function(e){var t={icon:"fa-number",markerColor:"blue",shape:"square",prefix:"fa",number:o._local.endPointMark()},n=e.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:t}),i=[o._removeMarkerMenu(o._removeMarkerFromEndPoint,r)];o._networkAnalysisTypes===s.default.networkAnalysisTypes.optimal_path&&i.push(o._setEndPointToStartPointMenu()),r.bindContextMenu({contextmenuItems:i,contextmenuInheritItems:!1}),o._endPointLayers.push(r),o._endPointLayerGroup.addLayer(r)}}}},{key:"_wayPointMenu",value:function(){var i=this;return{text:i._local.asMiddlePoint(),iconCls:"iconfont icon-main-map",callback:function(e){var t={icon:"fa-number",markerColor:"blue",shape:"square",prefix:"fa",number:i._local.middlePointMark()+i._wayPointSeq++},n=e.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:t});r.bindContextMenu({contextmenuItems:i._getWayPointContextMenuItems(r),contextmenuInheritItems:!1}),i._wayPointLayers.push(r),i._wayPointLayerGroup.addLayer(r)}}}},{key:"_impassePointMenu",value:function(){var o=this;return{text:o._local.asStickingPoint(),iconCls:"iconfont icon-main-map",callback:function(e){var t={icon:"fa-number",markerColor:"red",shape:"square",prefix:"fa",number:o._local.stickingPointMark()+o._impassePointSeq++},n=e.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:t}),i=[o._removeMarkerMenu(o._removeMarkerFromImpassePoint,r)];r.bindContextMenu({contextmenuItems:i,contextmenuInheritItems:!1}),o._impassePointLayers.push(r),o._impassePointLayerGroup.addLayer(r)}}}},{key:"_impasseAreaMenu",value:function(){return{text:this._local.drawStickingPolygon(),iconCls:"iconfont icon-main-map",callback:function(){a.default.Control.Manager.getInstance().getMapView().callApi("draw-polygon"),a.default.Control.Manager.getInstance().getControl("toolbar").toggleMode("network-analysis")}}}},{key:"_addImpasseArea",value:function(e){this._impasseAreaLayers.push(e.layer),this._impasseAreaLayerGroup.addLayer(e.layer),e.layer.on("contextmenu",function(){})}},{key:"_setStartPointToEndPointMenu",value:function(){var t=this;return{text:t._local.asEndingPoint(),iconCls:"iconfont icon-main-map",callback:function(e){t._swapStartPointEndPoint()}}}},{key:"_setEndPointToStartPointMenu",value:function(){var t=this;return{text:t._local.asStartingPoint(),iconCls:"iconfont icon-main-map",disabled:t._isLayerGroupEmpty(t._startPointLayerGroup),callback:function(e){t._swapStartPointEndPoint()}}}},{key:"_setWayPointToStartPointMenu",value:function(t){var n=this;return{text:n._local.asStartingPoint(),iconCls:"iconfont icon-main-map",callback:function(e){n._setWayPointToStartPoint(t)}}}},{key:"_setWayPointToStartPoint",value:function(e){var t=this;t._wayPointLayerGroup.hasLayer(e)&&t._wayPointLayerGroup.removeLayer(e);for(var n=0;n<t._wayPointLayers.length;++n)if(t._wayPointLayers[n]===e){if(t._wayPointLayers.splice(n,1),0!=t._startPointLayers.length){var r=t._startPointLayers[0];t._markerText(r,t._markerText(e)),t._markerColor(r,"blue"),r.options.contextmenuItems=t._getWayPointContextMenuItems(r),t._wayPointLayers.splice(n,0,r)}break}t._markerText(e,t._local.startPointMark()),t._markerColor(e,"green"),e.options.contextmenuItems=t._getStartPointContextMenuItems(e),t._startPointLayers=[e],t._updateStartPointLayers(),t._updateWayPointLayers()}},{key:"_updateLayers",value:function(e,t){e.clearLayers();for(var n=0;n<t.length;++n)e.addLayer(t[n])}},{key:"_updateStartPointLayers",value:function(){this._updateLayers(this._startPointLayerGroup,this._startPointLayers)}},{key:"_updateEndPointLayers",value:function(){this._updateLayers(this._endPointLayerGroup,this._endPointLayers)}},{key:"_updateWayPointLayers",value:function(){this._updateLayers(this._wayPointLayerGroup,this._wayPointLayers)}},{key:"_updateImpassePointLayers",value:function(){this._updateLayers(this._impassePointLayerGroup,this._impassePointLayers)}},{key:"_updateImpasseAreaLayers",value:function(){this._updateLayers(this._impasseAreaLayerGroup,this._impasseAreaLayers)}},{key:"_updateLayersByType",value:function(){var e=this;switch(e._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:e._updateStartPointLayers(),e._updateEndPointLayers(),e._updateWayPointLayers(),e._updateImpassePointLayers(),e._updateImpasseAreaLayers();break;case s.default.networkAnalysisTypes.traveling_salesman_problem:e._updateStartPointLayers(),e._updateWayPointLayers(),e._updateImpassePointLayers(),e._updateImpasseAreaLayers();break;case s.default.networkAnalysisTypes.trace_back:e._updateStartPointLayers(),e._updateImpassePointLayers(),e._updateImpasseAreaLayers()}}},{key:"_markerText",value:function(e,t){return t&&(e.options.icon.options.number=t),e.options.icon.options.number}},{key:"_markerColor",value:function(e,t){return t&&(e.options.icon.options.markerColor=t),e.options.icon.options.markerColor}},{key:"_getStartPointContextMenuItems",value:function(e){var t=[],n=this._removeMarkerMenu(this._removeMarkerFromStartPoint,e);if(t.push(n),this._networkAnalysisTypes===s.default.networkAnalysisTypes.optimal_path){var r=this._setEndPointToStartPointMenu();t.push(r)}return t}},{key:"_getWayPointContextMenuItems",value:function(e){var t=[],n=this._removeMarkerMenu(this._removeMarkerFromWayPoint,e);if(t.push(n),this._networkAnalysisTypes===s.default.networkAnalysisTypes.traveling_salesman_problem){var r=this._setWayPointToStartPointMenu(e);t.push(r)}return t}},{key:"_swapStartPointEndPoint",value:function(){var e=this;if(0!=e._startPointLayers.length&&0!=e._endPointLayers.length){var t=this._startPointLayers[0]._latlng;e._startPointLayers[0]._latlng=e._endPointLayers[0]._latlng,e._endPointLayers[0]._latlng=t,e._startPointLayerGroup.clearLayers(),e._endPointLayerGroup.clearLayers(),e._startPointLayerGroup.addLayer(e._startPointLayers[0]),e._endPointLayerGroup.addLayer(e._endPointLayers[0])}}},{key:"_removeMarkerFromStartPoint",value:function(e){this._removeMarker(this._startPointLayerGroup,this._startPointLayers,e)}},{key:"_removeMarkerFromEndPoint",value:function(e){this._removeMarker(this._endPointLayerGroup,this._endPointLayers,e)}},{key:"_removeMarkerFromWayPoint",value:function(e){this._removeMarker(this._wayPointLayerGroup,this._wayPointLayers,e)}},{key:"_removeMarkerFromImpassePoint",value:function(e){this._removeMarker(this._impassePointLayerGroup,this._impassePointLayers,e)}},{key:"_removeMarkerMenu",value:function(t,n){var r=this;return{text:r._local.remove(),iconCls:"iconfont icon-main-map",callback:function(e){t.call(r,n)}}}},{key:"_removeAllPointLayerMenu",value:function(){var t=this;return{text:t._local.removeAllPoints(),iconCls:"iconfont icon-main-map",callback:function(e){t._clearPointData(),t._clearPointLayers()}}}},{key:"_removeAllPolygonLayerMenu",value:function(){var t=this;return{text:t._local.removeAllPolygon(),iconCls:"iconfont icon-main-map",callback:function(e){t._clearPolygonData(),t._clearPolygonLayers()}}}},{key:"_removeMarker",value:function(e,t,n){e.hasLayer(n)&&e.removeLayer(n);for(var r=0;r<t.length;++r)t[r]===n&&t.splice(r,1)}},{key:"_addMenuItems",value:function(){var e=this;if(null!==e._networkAnalysisTypes){var t=e._map.contextmenu;switch(t.removeAllItems(),e._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:t.addItem(e._startingPointMenu()),t.addItem(e._endingPointMenu()),t.addItem(e._wayPointMenu()),t.addItem("-"),t.addItem(e._impassePointMenu()),t.addItem(e._impasseAreaMenu()),t.addItem("-"),t.addItem(e._removeAllPointLayerMenu()),t.addItem(e._removeAllPolygonLayerMenu());break;case s.default.networkAnalysisTypes.traveling_salesman_problem:t.addItem(e._startingPointMenu()),t.addItem(e._wayPointMenu()),t.addItem("-"),t.addItem(e._impassePointMenu()),t.addItem(e._impasseAreaMenu()),t.addItem("-"),t.addItem(e._removeAllPointLayerMenu()),t.addItem(e._removeAllPolygonLayerMenu());break;case s.default.networkAnalysisTypes.trace_back:t.addItem(e._startingPointMenu()),t.addItem("-"),t.addItem(e._impassePointMenu()),t.addItem(e._impasseAreaMenu()),t.addItem("-"),t.addItem(e._removeAllPointLayerMenu()),t.addItem(e._removeAllPolygonLayerMenu())}}}},{key:"_resetToDefaultContextMenu",value:function(){if(this._map){var e=this._map.contextmenu;e.hide(),e.removeAllItems()}}},{key:"_clearPointData",value:function(){this._startPointLayers=[],this._endPointLayers=[],this._wayPointLayers=[],this._impassePointLayers=[]}},{key:"_clearPolygonData",value:function(){for(var e=a.default.Control.Manager.getInstance().getControl("draw")._drawnItems,t=0;t<this._impasseAreaLayers.length;++t){var n=this._impasseAreaLayers[t];e.hasLayer(this._impasseAreaLayers[t])&&e.removeLayer(n)}this._impasseAreaLayers=[]}},{key:"_clearPointLayers",value:function(){this._startPointLayerGroup&&(this._startPointLayerGroup.clearLayers(),this._endPointLayerGroup.clearLayers(),this._wayPointLayerGroup.clearLayers(),this._impassePointLayerGroup.clearLayers())}},{key:"_clearPolygonLayers",value:function(){this._impasseAreaLayerGroup&&this._impasseAreaLayerGroup.clearLayers()}},{key:"_clearData",value:function(){this._clearPointData(),this._clearPolygonData()}},{key:"_clearLayers",value:function(){this._clearPointLayers(),this._clearPolygonLayers()}},{key:"_clearDataByType",value:function(){var e=this;switch(e._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:e._startPointLayers=[],e._endPointLayers=[],e._wayPointLayers=[],e._impassePointLayers=[],e._impasseAreaLayers=[];break;case s.default.networkAnalysisTypes.traveling_salesman_problem:e._startPointLayers=[],e._wayPointLayers=[],e._impassePointLayers=[],e._impasseAreaLayers=[];break;case s.default.networkAnalysisTypes.trace_back:e._startPointLayers=[],e._impassePointLayers=[],e._impasseAreaLayers=[]}}},{key:"_clearLayersByType",value:function(){var e=this;switch(e._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:e._startPointLayerGroup.clearLayers(),e._endPointLayerGroup.clearLayers(),e._wayPointLayerGroup.clearLayers(),e._impassePointLayerGroup.clearLayers(),e._impasseAreaLayerGroup.clearLayers();break;case s.default.networkAnalysisTypes.traveling_salesman_problem:e._startPointLayerGroup.clearLayers(),e._wayPointLayerGroup.clearLayers(),e._impassePointLayerGroup.clearLayers(),e._impasseAreaLayerGroup.clearLayers();break;case s.default.networkAnalysisTypes.trace_back:e._startPointLayerGroup.clearLayers(),e._impassePointLayerGroup.clearLayers(),e._impasseAreaLayerGroup.clearLayers()}}},{key:"_initLayerGroups",value:function(){var e=this;e._startPointLayerGroup=e._initLayerGroup(e._startPointLayerGroup,"start_point_group"),e._endPointLayerGroup=e._initLayerGroup(e._endPointLayerGroup,"end_point_group"),e._wayPointLayerGroup=e._initLayerGroup(e._wayPointLayerGroup,"way_point_group"),e._impassePointLayerGroup=e._initLayerGroup(e._impassePointLayerGroup,"impasse_point_group"),e._impasseAreaLayerGroup=e._initLayerGroup(e._impasseAreaLayerGroup,"impasse_area_group")}},{key:"_initLayerGroup",value:function(e,t){return e||((e=L.layerGroup([])).desc=t,this._map?this._map.addLayer(e):console.log("map is null can't loading map!")),e}},{key:"_isLayerGroupEmpty",value:function(e){return 0==e.getLayers().length}},{key:"getData",value:function(){return{startPoint:this._getData(this._startPointLayers),endPoint:this._getData(this._endPointLayers),wayPoint:this._getData(this._wayPointLayers),impassePoint:this._getData(this._impassePointLayers),impasseArea:this._impasseAreaLayers}}},{key:"_getData",value:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e[n]._latlng);return t}},{key:"getStartPointLayer",value:function(){return this._startPointLayerGroup&&!this._isLayerGroupEmpty(this._startPointLayerGroup)?this._startPointLayerGroup.getLayers()[0]:null}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=o},{"../../common/CommonValues":606,"../../kq":729}],716:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./ToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{mode:"operator"},initialize:function(e,t){return o.default.prototype.initialize.call(this,e,t),this},executeOperator:function(){}});n.default=a},{"./ToolButton":722}],717:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./ToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{mode:"operator"},initialize:function(e,t){return o.default.prototype.initialize.call(this,e,t),this},executeOperator:function(){}});n.default=a},{"./ToolButton":722}],718:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=r(e("./ModeToolButton")),s=(r(e("../RasterImageAlgebraDialog")),r(e("../RasterImageFunctionDialog")),r(e("../RasterImageLogicDialog")),r(e("../RasterImageConditionDialog")),r(e("../RasterImageAnalysisMenu")));function r(e){return e&&e.__esModule?e:{default:e}}var i,o,l=a.default.extend({options:{type:"raster-image-analysis",icon:"icon iconfont icon-main-map"},initialize:(i=regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this).options.tips=KQ.Local.Control.RasterImageAnalysisDialog.RasterImageAnalysis(),i.options=L.extend({},i.options,r),a.default.prototype.initialize.call(i,t,n),o=new s.default.getInstance,e.next=7,o.initAsync();case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}),o=function(){var s=i.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e,t,n){return o.apply(this,arguments)}),bindEvent:function(){$("#kq-raster-image-analysis-menu").toggle("fast")},removeEvent:function(){$("#kq-raster-image-analysis-menu").hide()}});n.default=l},{"../RasterImageAlgebraDialog":670,"../RasterImageAnalysisMenu":672,"../RasterImageConditionDialog":673,"../RasterImageFunctionDialog":674,"../RasterImageLogicDialog":675,"./ModeToolButton":713}],719:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./ModeToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{type:"roaming",icon:"icon iconfont icon-hand"},initialize:function(e,t,n){return this.options.tips=KQ.Local.Control.toolButton.roamingButton.tips(),this.options=L.extend(this.options,n),o.default.prototype.initialize.call(this,e,t),this}});n.default=a},{"./ModeToolButton":713}],720:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(e("../../kq")),i=a(e("./ModeToolButton")),o=a(e("../RubberBand"));function a(e){return e&&e.__esModule?e:{default:e}}var s=i.default.extend({options:{type:"rubber-band",icon:"icon iconfont icon-region",rubberBandFunction:function(){console.log("this is a rubber band default function")}},initialize:function(e,t,n){return this.options.tips=r.default.Local.Control.toolButton.rubberBandButton.tips(),this.options=L.extend(this.options,n),i.default.prototype.initialize.call(this,e,t),this._bounds=null,this._boxZoom=new o.default(e),this},bindEvent:function(){var e=this;e._boxZoom.addHooks(),e._boxZoom.addHooks(),L.Browser.mobile?e._map.on("touchstart",e._handleMouseDown,e):e._map.on("mousedown",e._handleMouseDown,e),e._map.on("boundend",e.options.rubberBandFunction,e)},removeEvent:function(){var e=this;L.Browser.mobile?e._map.off("touchstart",e._handleMouseDown,e):e._map.off("mousedown",e._handleMouseDown,e),e._map.off("boundend",e.options.rubberBandFunction,e),e._map.dragging.enable(),e._boxZoom.removeHooks()},_handleMouseDown:function(e){this._boxZoom.onMouseDown(e)}});n.default=s},{"../../kq":729,"../RubberBand":676,"./ModeToolButton":713}],721:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});r(e("../../kq"));var i=r(e("./ZoomInButton")),o=r(e("./ZoomOutButton")),a=r(e("./RoamingButton")),s=r(e("./BackwardButton")),l=r(e("./ForwardButton")),u=r(e("./GlobeButton")),c=r(e("./DrawButton")),h=r(e("./InformationButton")),f=r(e("./RubberBandButton")),d=r(e("./CustomInformationButton")),p=r(e("./FreeDrawButton")),m=r(e("./CustomButton")),g=r(e("./NetworkAnalysisButton")),y=r(e("./RasterImageAnalysisButton"));function r(e){return e&&e.__esModule?e:{default:e}}var _=e("leaflet"),v=_.Control.extend({onAdd:function(e){return this._map=e,this._modeButtons={},this._operatorButtons={},this._container=null,this._init(),this._container},_init:function(){this._container=_.DomUtil.create("div","leaflet-bar tool-bar"),this._container.setAttribute("id","kq-toolbar"),this._initToolButtons(),this._toggleToDefaultMode()},_initToolButtons:function(){for(var e=this.options.subControls,t=0;t<e.length;++t){var n=e[t],r=this._createToolButton(n.type,n.options);this.addButton(r)}},addButton:function(e){e&&("operator"===e.getMode()?(this._operatorButtons[e.getType()]=e).handleClickEvent(this._operatorToggle,this):(this._modeButtons[e.getType()]=e).handleClickEvent(this._modeToggle,this))},_modeToggle:function(e){e&&(this._clearEvent(),e.bindEvent(),$(e.getContainer()).addClass("currentMode").siblings().removeClass("currentMode"))},_operatorToggle:function(e){e.executeOperator()},_clearEvent:function(){for(var e in this._modeButtons)this._modeButtons[e].removeEvent()},_createToolButton:function(e,t){var n=this._map,r=this._container;return"zoom_in"===e?new i.default(n,r,t):"zoom_out"===e?new o.default(n,r,t):"roaming"===e?new a.default(n,r,t):"forward-map"===e?new s.default(n,r,t):"backward-map"===e?new l.default(n,r,t):"full-map"===e?new u.default(n,r,t):"drawing"===e?new c.default(n,r,t):"free-draw"===e?new p.default(n,r,t):"info-query"===e?new h.default(n,r,t):"custom_info-query"===e?new d.default(n,r,t):"rubber-band"===e?new f.default(n,r,t):"network-analysis"===e?new g.default(n,r,t):"raster-image-analysis"===e?new y.default(n,r,t):"custom"===e?new m.default(n,r,t):null},_unselect:function(){var e=this._map.dragging.enabled();this._toggleToDefaultMode(),e?this._map.dragging.enable():this._map.dragging.disable()},_toggleToDefaultMode:function(){this._modeToggle(this._modeButtons.roaming)},toggleMode:function(e){this._modeToggle(this._modeButtons[e])},getContainer:function(e){var t=this._modeButtons[e]||this._operatorButtons[e];return t?t.getContainer():this._container}});n.default=v},{"../../kq":729,"./BackwardButton":701,"./CustomButton":704,"./CustomInformationButton":705,"./DrawButton":706,"./ForwardButton":707,"./FreeDrawButton":708,"./GlobeButton":709,"./InformationButton":712,"./NetworkAnalysisButton":714,"./RasterImageAnalysisButton":718,"./RoamingButton":719,"./RubberBandButton":720,"./ZoomInButton":723,"./ZoomOutButton":724,leaflet:473}],722:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("leaflet"),i=r.Class.extend({options:{type:"",icon:"",tips:"",mode:""},initialize:function(e,t){this._map=e,this._parent=t,this._container=this._initContainer()},getContainer:function(){return this._container},getMode:function(){return this.options.mode},getType:function(){return this.options.type},handleClickEvent:function(e,t){var n=this;r.DomEvent.on(n._container,"mousedown dblclick touchstart",r.DomEvent.stopPropagation).on(n._container,"click",r.DomEvent.stop).on(n._container,"click",function(){KQ.Control.Manager.getInstance()._unselectAllControlsExcept("toolbar"),e.call(t,n)})},_initContainer:function(){var e=r.DomUtil.create("a",this.options.icon,this._parent);return e.href="#",e.title=this.options.tips,e.style.float="left",e.id="kq-"+this.options.type,e}});n.default=i},{leaflet:473}],723:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./ModeToolButton")),i=o(e("./BoxZoom"));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({options:{type:"zoom_in",icon:"icon iconfont icon-zoom-in"},initialize:function(e,t,n){return this.options.tips=KQ.Local.Control.toolButton.zoomInButton.tips(),this.options=L.extend(this.options,n),r.default.prototype.initialize.call(this,e,t),this._boxzoom=new i.default(e),this},bindEvent:function(){this._map.dragging.disable(),this._boxzoom.addHooks(),L.Browser.mobile?this._map.on("touchstart",this._handleMouseDown,this):this._map.on("mousedown",this._handleMouseDown,this)},removeEvent:function(){L.Browser.mobile?this._map.off("touchstart",this._handleMouseDown,this):this._map.off("mousedown",this._handleMouseDown,this),this._map.dragging.enable(),this._boxzoom.removeHooks()},_handleMouseDown:function(e){2!==e.originalEvent.button&&this._boxzoom._onMouseDown.call(this._boxzoom,{clientX:e.originalEvent.clientX,clientY:e.originalEvent.clientY,which:1,shiftKey:!0})}});n.default=a},{"./BoxZoom":702,"./ModeToolButton":713}],724:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./BoxZoomOut")),i=o(e("./ModeToolButton"));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.extend({options:{type:"zoom_out",icon:"icon iconfont icon-zoom-out"},initialize:function(e,t,n){return this._boxZoom=new r.default(e),this.options.tips=KQ.Local.Control.toolButton.zoomOutButton.tips(),this.options=L.extend(this.options,n),i.default.prototype.initialize.call(this,e,t),this},bindEvent:function(){this._map.dragging.disable(),this._boxZoom.addHooks(),L.Browser.mobile?this._map.on("touchstart",this._handleMouseDown,this):this._map.on("mousedown",this._handleMouseDown,this)},removeEvent:function(){L.Browser.mobile?this._map.off("touchstart",this._handleMouseDown,this):this._map.off("mousedown",this._handleMouseDown,this),this._map.dragging.enable(),this._boxZoom.removeHooks()},_handleMouseDown:function(e){2!==e.originalEvent.button&&this._boxZoom._onMouseDown.call(this._boxZoom,{clientX:e.originalEvent.clientX,clientY:e.originalEvent.clientY,which:1,shiftKey:!0})}});n.default=a},{"./BoxZoomOut":703,"./ModeToolButton":713}],725:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./DataCommon")),i=o(e("./DataManager"));function o(e){return e&&e.__esModule?e:{default:e}}var a={DataCommon:r.default,DataManager:i.default};n.default=a},{"./DataCommon":726,"./DataManager":727}],726:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq");(r=o)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"hello",value:function(){console.log("hello DataCommon!")}}]),e}();n.default=a},{"../kq":729}],727:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),f=r(e("../kq"));r(e("../map/MapConfig"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return i(e,[{key:"getWebFileDataSourceInfos",value:(r=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.Builder.BuilderPortalProxy.webFileDataSourceInfos(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getWebFileDataSourceInfos_server",value:(n=o(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u,c,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=f.default.Map.MapConfig.getInstance(),i=r.getMapBuilder_fileServerUrl(),o=i+"/getFilesList",e.prev=4,e.next=7,f.default.Common.NetworkTools.httpGetAsync(o);case 7:if(a=e.sent,"success"!=(s=JSON.parse(a)).result){e.next=13;break}n=s.list,e.next=14;break;case 13:return e.abrupt("return",null);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(4),e.abrupt("return",null);case 19:for(l=[],u=0;u<n.length;++u)c=n[u],h=c.FILE_NAME.replace("."+c.FILE_TYPE,""),c.FILE_TYPE==t&&l.push({name:h,time:c.UPLOAD_END_TIME,type:c.FILE_TYPE,dataSourceInfo:{type:"STATIC_DATA",name:h,url:c.downloadPath}});return e.abrupt("return",l);case 22:case"end":return e.stop()}},e,this,[[4,16]])})),function(e){return n.apply(this,arguments)})},{key:"addWebFileDataSourceInfo",value:function(e){this.file_list.push(e)}},{key:"getDBFileDataSourceInfos",value:function(){return f.default.Map.MapConfig.getInstance().getMapBuilder_dbInfomations()}},{key:"getDataSourceInfos",value:function(){return this.getDBFileDataSourceInfos().concat(this.getWebFileDataSourceInfos())}},{key:"getData",value:(t=o(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getData:"+JSON.stringify(t)),r=n=null,"DB_DATA"===t.type)return i=new f.default.ServiceTool.ServiceToolCatalog(t),e.next=7,i.getFeature(t);e.next=28;break;case 7:if("error"===(r=e.sent))return e.abrupt("return",null);e.next=12;break;case 12:if(e.prev=12,"success"===(o=JSON.parse(r)).resultcode)return e.abrupt("return",o.result);e.next=18;break;case 18:return console.log("getData return error:"+o.message),e.abrupt("return",null);case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(12),console.log("parse data failed! data:"+r),e.abrupt("return",null);case 26:e.next=72;break;case 28:if("STATIC_DATA"===t.type)return e.next=31,f.default.Common.NetworkTools.httpGetAsync(t.url);e.next=46;break;case 31:if("error"===(r=e.sent))return e.abrupt("return",null);e.next=36;break;case 36:e.prev=36,n=JSON.parse(r),e.next=44;break;case 40:return e.prev=40,e.t1=e.catch(36),console.log("parse data failed! data:"+r),e.abrupt("return",null);case 44:e.next=72;break;case 46:if("DS_DATA"===t.type)return a=new f.default.ServiceTool.ServiceToolData(t),e.next=50,a.getFeature(t);e.next=71;break;case 50:if("error"===(r=e.sent))return e.abrupt("return",null);e.next=55;break;case 55:if(e.prev=55,"success"===(s=JSON.parse(r)).resultcode)return e.abrupt("return",s.result);e.next=61;break;case 61:return console.log("getData return error:"+s.message),e.abrupt("return",null);case 63:e.next=69;break;case 65:return e.prev=65,e.t2=e.catch(55),console.log("parse data failed! data:"+r),e.abrupt("return",null);case 69:e.next=72;break;case 71:return e.abrupt("return",null);case 72:return e.abrupt("return",n);case 73:case"end":return e.stop()}},e,this,[[12,22],[36,40],[55,65]])})),function(e){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729,"../map/MapConfig":749}],728:[function(e,t,n){"use strict";L.Control.MapInput=L.Control.extend({defaultOptions:{position:"topleft",iconType:"search",inputWidth:150,isHasDropdown:!0,dropdownWidth:100,dropdownMargin:6,onClick:function(e){L.DomEvent.stop(e),console.log(JSON.stringify(e)),console.log("onclick!!!"),console.log(this.value())}},initialize:function(e){this._options=L.extend({},this.defaultOptions,e),this.setPosition(this._options.position)},onAdd:function(e){var t=this._options.inputWidth;return this._options.isHasDropdown&&(t+=this._options.dropdownWidth+this._options.dropdownMargin),this._parent=L.DomUtil.create("span","kq-mapinput-container"),this._parent.setAttribute("style","width: "+t+"px"),this._options.isHasDropdown&&(this._dropdown=L.DomUtil.create("input","",this._parent),this._dropdown.setAttribute("id","kq-input-dropdownlist"),this._dropdown.setAttribute("style","width: "+this._options.dropdownWidth+"px; margin-right:"+this._options.dropdownMargin+"px")),this._span=L.DomUtil.create("span","kq-mapinput k-textbox k-space-right",this._parent),this._span.setAttribute("style","width: "+this._options.inputWidth+"px"),this._input=L.DomUtil.create("input","k-textbox k-space-right kq-noradius",this._span),this._input.setAttribute("type","text"),this._a=L.DomUtil.create("a","k-icon k-i-"+this._options.iconType+" kq-color",this._span),L.DomEvent.addListener(this._span,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this._a,"click",this._options.onClick,this),this._parent},onRemove:function(e){},addTo:function(e){var t=this;L.Control.prototype.addTo.call(t,e),this._options.isHasDropdown&&KQ.Common.CommonTools.loadUiLib(function(){t._dropdownControl=new KQ.ui.DropdownList("kq-input-dropdownlist",{})})},value:function(){return this._input.value},dropdownValue:function(){return this._dropdownControl?this._dropdownControl.value():null},setOnClick:function(e){L.DomEvent.removeListener(this._a,"click",this._options.onClick,this),this._options.onClick=e,L.DomEvent.addListener(this._a,"click",this._options.onClick,this)},setDropdownData:function(e){this._dropdownControl&&this._dropdownControl.setDataSource(e)}}),L.control.mapinput=function(e){return new L.Control.MapInput(e)}},{}],729:[function(_,e,v){(function(t){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};_("babel-polyfill");var e=m(_("./map/Map")),n=m(_("./control/Control")),r=m(_("./common/Common")),i=m(_("./projection/Projection")),o=m(_("./struct/Struct")),a=m(_("./layer/Layer")),s=m(_("./local/Local")),u=m(_("./query/Query")),c=m(_("./ui/ui")),h=m(_("./vector/Vector")),f=m(_("./builder/Builder")),d=m(_("./data/Data")),p=m(_("./servicetool/ServiceTool"));function m(e){return e&&e.__esModule?e:{default:e}}t||(t=window),t.mixin=function(n){var e=Array.prototype.slice.call(arguments,1),t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n),t}(),r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;for(var u in l)t.prototype[u]=l[u]}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t},t.localforage=_("../node_modules/localforage"),_("../node_modules/leaflet"),_("../node_modules/jquery.fancytree/dist/jquery.fancytree.min"),_("../node_modules/leaflet-i18n/Leaflet.i18n"),_("../node_modules/leaflet-contextmenu/dist/leaflet.contextmenu.min"),_("../node_modules/leaflet-ant-path/dist/leaflet-ant-path"),t.uuid=_("../node_modules/uuid/v4"),t.X2JS=_("../libs/other/x2js/xml2json"),_("../libs/leaflet.wms"),_("../libs/leaflet-tilelayer-wmts-src"),_("../libs/leaflet.sync"),_("../libs/Leaflet.Marker.SlideTo"),_("../libs/controls/sidebyside/leaflet-sidebyside"),_("../libs/jquery.ui-contextmenu.min"),_("../libs/jquery.ui.ipad"),_("../libs/other/SimpleAjaxUploader"),_("../libs/leaflet.ChineseTmsProviders"),_("../libs/controls/draw/leaflet.draw-custom-src"),_("../libs/controls/draw/customization"),_("../libs/controls/fullscreen/Control.fullscreen"),_("../libs/controls/attribution/leaflet-control-condended-attribution"),_("../libs/controls/control-window/L.Control.Window"),_("../libs/controls/sidebar/leaflet-sidebar_v0"),_("../libs/controls/sidebar/leaflet-sidebar"),_("../libs/controls/coordinates/Leaflet.Coordinates-0.1.5.src"),_("../libs/controls/print/jQuery.print"),_("../libs/controls/mini/Control.MiniMap"),_("../libs/controls/scale/Leaflet.GraphicScale"),_("../libs/controls/easybutton/easy-button"),_("../libs/controls/playback/LeafletPlayback"),_("../libs/controls/extramarker/leaflet.extra-markers"),t.html2canvas=_("../libs/html2canvas/html2canvas"),_("../libs/measure/leaflet-measure.min"),_("../libs/measure/leaflet-measureAction"),_("../libs/path-drag/L.Path.Drag-src"),_("../libs/controls/zoomslider/L.Control.Zoomslider"),_("../libs/leaflet.control.custom"),_("../libs/markercluster/leaflet.markercluster.js"),_("../libs/controls/rangeslider/rangeslider.js"),_("../libs/L.Polyline.SnakeAnim"),t.md5=_("../libs/other/md5"),t.turf=_("../libs/turf/turf.min"),t.chroma=_("../libs/chroma/chroma.min"),_("../libs/L.LabelTextCollision");var g=_("../libs/leaflet.canvas-markers-src");window.L.CanvasIconLayer=g(L),window.rbush=_("rbush"),_("../libs/eviltransform/transform"),_("../libs/controls/areaselect/leaflet-areaselect"),_("../libs/mapbox-gl/leaflet-mapbox-gl"),_("../libs/leaflet-event-forwarder"),_("../libs/responsive-popup/leaflet.responsive.popup"),_("./builder/ui/SaveToolBar.js");var y={Map:e.default,Control:n.default,Common:r.default,Projection:i.default,Struct:o.default,Layer:a.default,Local:s.default,Query:u.default,ui:c.default,Vector:h.default,Builder:f.default,Data:d.default,ServiceTool:p.default};t.KQ=y,L.Browser.touch_origin=L.Browser.touch,L.Browser.touch=L.Browser.mobile,L.Map.prototype.__proto__.getScaleZoom_old=L.Map.prototype.__proto__.getScaleZoom,L.Map.prototype.__proto__.getScaleZoom=function(e,t){console.log("my getScaleZoom!!!!!");var n=L.Map.prototype.__proto__.getScaleZoom_old(e,t);if(n!==1/0)return n;var r=this.getMinZoom(),i=this.getMaxZoom();return Math.max(r,i)},Promise.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)},Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},t.insertAfter=function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},t.__DEV__=!1,t.CLOSURE_NO_DEPS=!0,JSON.stringifyOnce=function(i,o,e){var a=[],s=[];return JSON.stringify(i,function(e,n){if(2e3<a.length)return"object too long";var r=!1;if(a.forEach(function(e,t){e===n&&(r=t)}),""==e)return a.push(i),s.push("root"),n;if(r+""!="false"&&"object"==(void 0===n?"undefined":l(n)))return"root"==s[r]?"(pointer to root)":"(see "+(n&&n.constructor?n.constructor.name.toLowerCase():void 0===n?"undefined":l(n))+" with key "+s[r]+")";var t=e||"(empty key)";return a.push(n),s.push(t),o?o(e,n):n},e)},Array.prototype.removeValue=function(e){for(var t=this.indexOf(e);-1<t;)this.splice(t,1),t=this.indexOf(e)},t.kqLeftMouseButtonOnlyDown=!1,t.setLeftButtonState=function(e){t.kqLeftMouseButtonOnlyDown=void 0===e.buttons?1===e.which:1===e.buttons},document.body.onmousedown=t.setLeftButtonState,document.body.onmousemove=t.setLeftButtonState,document.body.onmouseup=t.setLeftButtonState,v.default=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../libs/L.LabelTextCollision":1,"../libs/L.Polyline.SnakeAnim":2,"../libs/Leaflet.Marker.SlideTo":4,"../libs/chroma/chroma.min":6,"../libs/controls/areaselect/leaflet-areaselect":7,"../libs/controls/attribution/leaflet-control-condended-attribution":8,"../libs/controls/control-window/L.Control.Window":9,"../libs/controls/coordinates/Leaflet.Coordinates-0.1.5.src":10,"../libs/controls/draw/customization":11,"../libs/controls/draw/leaflet.draw-custom-src":12,"../libs/controls/easybutton/easy-button":14,"../libs/controls/extramarker/leaflet.extra-markers":15,"../libs/controls/fullscreen/Control.fullscreen":16,"../libs/controls/mini/Control.MiniMap":17,"../libs/controls/playback/LeafletPlayback":18,"../libs/controls/print/jQuery.print":19,"../libs/controls/rangeslider/rangeslider.js":20,"../libs/controls/scale/Leaflet.GraphicScale":21,"../libs/controls/sidebar/leaflet-sidebar":22,"../libs/controls/sidebar/leaflet-sidebar_v0":23,"../libs/controls/sidebyside/leaflet-sidebyside":25,"../libs/controls/zoomslider/L.Control.Zoomslider":28,"../libs/eviltransform/transform":29,"../libs/html2canvas/html2canvas":32,"../libs/jquery.ui-contextmenu.min":33,"../libs/jquery.ui.ipad":34,"../libs/leaflet-event-forwarder":37,"../libs/leaflet-tilelayer-wmts-src":38,"../libs/leaflet.ChineseTmsProviders":39,"../libs/leaflet.canvas-markers-src":40,"../libs/leaflet.control.custom":41,"../libs/leaflet.sync":42,"../libs/leaflet.wms":43,"../libs/mapbox-gl/leaflet-mapbox-gl":44,"../libs/markercluster/leaflet.markercluster.js":45,"../libs/measure/leaflet-measure.min":46,"../libs/measure/leaflet-measureAction":47,"../libs/other/SimpleAjaxUploader":48,"../libs/other/md5":49,"../libs/other/x2js/xml2json":50,"../libs/path-drag/L.Path.Drag-src":51,"../libs/responsive-popup/leaflet.responsive.popup":54,"../libs/turf/turf.min":55,"../node_modules/jquery.fancytree/dist/jquery.fancytree.min":431,"../node_modules/leaflet":473,"../node_modules/leaflet-ant-path/dist/leaflet-ant-path":470,"../node_modules/leaflet-contextmenu/dist/leaflet.contextmenu.min":471,"../node_modules/leaflet-i18n/Leaflet.i18n":472,"../node_modules/localforage":475,"../node_modules/uuid/v4":517,"./builder/Builder":518,"./builder/ui/SaveToolBar.js":588,"./common/Common":604,"./control/Control":626,"./data/Data":725,"./layer/Layer":732,"./local/Local":744,"./map/Map":746,"./projection/Projection":771,"./query/Query":794,"./servicetool/ServiceTool":801,"./struct/Struct":833,"./ui/ui":850,"./vector/Vector":855,"babel-polyfill":87,rbush:494}],730:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=e("leaflet"),i={featureStyle:{weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.8},highlightFeatureStyle:{weight:2,color:"#666",dashArray:"",fillOpacity:.8}},a=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);return this._mergeOptions(t),this._getChoropleth(e)}return r(n,[{key:"_mergeOptions",value:function(e){e.featureStyle=o.extend(i.featureStyle,e.featureStyle),e.highlightFeatureStyle=o.extend(i.highlightFeatureStyle,e.highlightFeatureStyle),this._opts=o.extend(i,e),this._opts.style=this._opts.featureStyle,this._opts.onEachFeature=this._onEachFeature.bind(this)}},{key:"_getChoropleth",value:function(e){return this._geojson=o.choropleth(e,this._opts),this._fillColors(),this._resetFeatureFillColor(),this._geojson.on({add:this.addToMap.bind(this)}),this._geojson}},{key:"_onEachFeature",value:function(e,t){t.on({mouseover:this._highlightFeature.bind(this),mouseout:this._resetHighlight.bind(this),click:this._zoomToFeature.bind(this)})}},{key:"_highlightFeature",value:function(e){o.Browser.ie||o.Browser.opera||o.Browser.edge||layer.bringToFront()}},{key:"_resetHighlight",value:function(e){this._geojson.resetStyle(e.target)}},{key:"_zoomToFeature",value:function(e){this._map.fitBounds(e.target.getBounds())}},{key:"_resetFeatureFillColor",value:function(){var n=this;n._geojson.setStyle(function(e){var t=n._opts.style;return t.fillColor=n._fillColors[e.properties[n._opts.valueProperty]],t})}},{key:"addToMap",value:function(e){this._map=e.target._map,this._createLegend()}},{key:"_createLegend",value:function(){var i=this,e=o.control({position:"bottomright"});e.onAdd=function(e){for(var t=o.DomUtil.create("div","panel panel-primary"),n='<div class="panel-body text-left" style="height:225px;overflow-y:scroll;"><table><tbody>',r=0;r<i._keys.length;++r)n+='<tr> <td class="legendItemHeader">'+i._keys[r]+'</td> <td class="legendItemValue" style="background: '+i._fillColors[i._keys[r]]+'"></td></tr>';return n+="</tbody></table></div>",$(t).append('<div class="panel-heading"><h5 class="panel-title text-center">图例</h5></div>'),$(t).append(n),t},e.addTo(i._map)}},{key:"_fillColors",value:function(){var e=this;e._fillColors={};var t=e._opts.fillColors;if(e._keys=[],"continuous"===e._opts.type)for(var n=e._opts.limits,r=e._opts.colors,i=0;i<n.length;++i)e._fillColors[n[i]]=r[i],e._keys.push(n[i]);else for(var o=0;o<t.length;++o){var a=t[o];for(var s in a)e._keys.push(s),e._fillColors[s]=a[s]}}}]),n}();n.default=a},{leaflet:473}],731:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(e("jquery")),a=i(e("leaflet"));i(e("./Choropleth"));function i(e){return e&&e.__esModule?e:{default:e}}e("../../libs/Proj4Leaflet");var s=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return a.default.Proj.ImageOverlay.prototype.initialize.call(r,e,t,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default.Proj.ImageOverlay),r(i,[{key:"_initImage",value:function(){var e=this._image=a.default.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));e._loaded=!1,e.onselectstart=a.default.Util.falseFn,e.onmousemove=a.default.Util.falseFn,e.onload=a.default.bind(this.onLoad,this),e.onerror=a.default.bind(this.fire,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),e.src=this._url,e.alt=this.options.alt}},{key:"getContainer",value:function(){var e=".leaflet-"+this.options.pane+"-pane";return(0,o.default)(""+e)[0]}},{key:"onLoad",value:function(){this.fire("load"),this._image._loaded=!0}}]),i}();n.default=s},{"../../libs/Proj4Leaflet":5,"./Choropleth":730,jquery:432,leaflet:473}],732:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=p(e("./LayerTile")),i=p(e("./LayerWMS")),o=p(e("./LayerWMTS")),a=p(e("./Choropleth")),s=p(e("./LayerHeatmap")),l=p(e("./LayerVectorTile")),u=p(e("./ImageOverlay")),c=p(e("./SingleLayer")),h=p(e("./SingleLayerWMS")),f=p(e("./SingleLayerKANQ")),d=p(e("./LayerMapbox"));function p(e){return e&&e.__esModule?e:{default:e}}var m={LayerTile:r.default,LayerWMS:i.default,LayerWMTS:o.default,Choropleth:a.default,LayerHeatmap:s.default,LayerVectorTile:l.default,ImageOverlay:u.default,SingleLayer:c.default,SingleLayerWMS:h.default,SingleLayerKANQ:f.default,LayerMapbox:d.default};n.default=m},{"./Choropleth":730,"./ImageOverlay":731,"./LayerHeatmap":733,"./LayerMapbox":734,"./LayerTile":735,"./LayerVectorTile":736,"./LayerWMS":737,"./LayerWMTS":738,"./SingleLayer":739,"./SingleLayerKANQ":740,"./SingleLayerWMS":741}],733:[function(r,e,a){(function(e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=r("leaflet");r("../../libs/heatmap/heatmap"),e.HeatmapOverlay=r("../../libs/heatmap/leaflet-heatmap");var o={radius:2,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count"},n=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=i.extend({},o,t);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,HeatmapOverlay),t(r,[{key:"setData",value:function(e){e.data||(e.data=e),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setData",this).call(this,e)}},{key:"addToMapView",value:function(e){e._getMap().addLayer(this)}}]),r}();a.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../libs/heatmap/heatmap":30,"../../libs/heatmap/leaflet-heatmap":31,leaflet:473}],734:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=e("leaflet"),o={accessToken:"not-needed",style:"style.json",zoom:0,minZoom:0,maxZoom:18,interactive:!1},a=function(){function n(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!n.instance){var t=i.extend({},o,e);this._layer=i.mapboxGL(t)}return n.instance}return r(n,[{key:"addToMapView",value:function(e){this._layer.addTo(e._getMap()),this._map=e._getMap()}},{key:"removeFromMapView",value:function(){this._map.removeLayer(this._layer)}},{key:"getMapboxMap",value:function(){return this._layer._glMap}},{key:"addLayer",value:function(e,t){}},{key:"addSource",value:function(e,t){}},{key:"getFeatureState",value:function(e){}},{key:"getFilter",value:function(e){}},{key:"getLayer",value:function(e){}},{key:"getLayoutProperty",value:function(e,t){}},{key:"getPaintProperty",value:function(e,t){}},{key:"getSource",value:function(e){}},{key:"getStyle",value:function(){}},{key:"moveLayer",value:function(e,t){}},{key:"project",value:function(e){return this._layer._glMap.project(e)}},{key:"queryRenderedFeatures",value:function(e,t){}},{key:"querySourceFeatures",value:function(e,t){}},{key:"setFilter",value:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2]}},{key:"setLayoutProperty",value:function(e,t,n){3<arguments.length&&void 0!==arguments[3]&&arguments[3]}},{key:"setPaintProperty",value:function(e,t,n){3<arguments.length&&void 0!==arguments[3]&&arguments[3]}},{key:"setStyle",value:function(e,t){}}]),n}();n.default=a},{leaflet:473}],735:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=e("leaflet"),a=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.TileLayer),r(n,[{key:"onAdd",value:function(e){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAdd",this).call(this,e)}},{key:"getTileUrl",value:function(e){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getTileUrl",this).call(this,e)}},{key:"setParams",value:function(e,t){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setParams",this).call(this,e,t)}},{key:"toString",value:function(){return"LayerTile"}}]),n}();n.default=a},{leaflet:473}],736:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=e("leaflet"),o={accessToken:"not-needed",style:"style.json",zoom:0,minZoom:0,maxZoom:18,interactive:!1},a=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=i.extend({},o,e);this._layer=i.mapboxGL(t)}return r(n,[{key:"addToMapView",value:function(e){this._layer.addTo(e._getMap()),this._map=e._getMap()}},{key:"removeFromMapView",value:function(){this._map.removeLayer(this._layer)}},{key:"getMapboxMap",value:function(){return this._layer._glMap}},{key:"addLayer",value:function(e,t){}},{key:"addSource",value:function(e,t){}},{key:"getFeatureState",value:function(e){}},{key:"getFilter",value:function(e){}},{key:"getLayer",value:function(e){}},{key:"getLayoutProperty",value:function(e,t){}}]),n}();n.default=a},{leaflet:473}],737:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=e("leaflet"),a={version:"1.3.0",layers:"",styles:"",format:"image/png",transparent:!0,CRS:"EPSG:3857"},i=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=o.extend({},a,t);this._layer=o.wms.source(e,{format:r.format,transparent:r.transparent,attribution:"KQWebMap",info_format:"text/html",serviceType:"wms",layers:[{_id:r.id}],scale_offset:0,version:r.version,mask:0}).getLayer(r.id),this._zIndex=n}return r(i,[{key:"addToMapView",value:function(e){this._layer.addTo(e._getMap()),this._map=e._getMap()}},{key:"removeFromMapView",value:function(){this._map.removeLayer(this._layer)}}]),i}();n.default=i},{leaflet:473}],738:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a=e("leaflet");e("../../libs/leaflet-tilelayer-wmts-src");var s={layer:"",style:"default",tilematrixSet:"default",format:"png",opacity:1},i=function(e){function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=a.extend({},s,t),i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,r));return i._zIndex=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.TileLayer.WMTS),r(o,[{key:"addToMapView",value:function(e){this._mapview=e,this._setPane(e._getMap()),e._getMap().addLayer(this)}},{key:"_setPane",value:function(e){if(this._zIndex){var t=this._zIndex,n="pane"+t;e.getPane(n)||(e.createPane(n),e.getPane(n).style.zIndex=t,e.getPane(n).style.pointerEvents="none"),this.options.pane=n}this.desc="layerwmts"}},{key:"onAdd",value:function(e){this._setPane(e),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onAdd",this).call(this,e)}},{key:"getOpacity",value:function(){return this.options.opacity}}]),o}();n.default=i},{"../../libs/leaflet-tilelayer-wmts-src":38,leaflet:473}],739:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),p=o(e("leaflet")),i=o(e("./ImageOverlay"));function o(e){return e&&e.__esModule?e:{default:e}}var s=400,a=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));console.log("SingleLayer initialize!"),n.defaultWmsParams={service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/png",transparent:!0},n.options={crs:null,uppercase:!1,attribution:"",opacity:1,isBack:!1,zoomOffset:0,minZoom:0,maxZoom:18,zIndex:null,pane:null},n._url=e;var r={},i={};for(var o in t)o in n.options?i[o]=t[o]:r[o]=t[o];return p.default.setOptions(n,i),n.options.pane||(n._zIndex=--s,t.zIndex&&(n._zIndex=t.zIndex)),n.wmsParams=p.default.extend({},n.defaultWmsParams,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,p.default.TileLayer),r(a,[{key:"setParams",value:function(e){p.default.extend(this.wmsParams,e),this._update()}},{key:"setZIndex",value:function(e){this._zIndex=e}},{key:"getAttribution",value:function(){return this.options.attribution}},{key:"onAdd",value:function(){this._update()}},{key:"onRemove",value:function(e){this._currentOverlay&&(e.removeLayer(this._currentOverlay),delete this._currentOverlay),this._currentUrl&&delete this._currentUrl}},{key:"getEvents",value:function(){return{moveend:this._update}}},{key:"setOpacity",value:function(e){this.options.opacity=e,this._currentOverlay&&this._currentOverlay.setOpacity(e)}},{key:"bringToBack",value:function(){this.options.isBack=!0,this._currentOverlay&&this._currentOverlay.bringToBack()}},{key:"bringToFront",value:function(){this.options.isBack=!1,this._currentOverlay&&this._currentOverlay.bringToFront()}},{key:"updateWmsParams",value:function(){}},{key:"getImageUrl",value:function(){var e=this.options.uppercase||!1,t=p.default.Util.getParamString(this.wmsParams,this._url,e);return this._url+t}},{key:"_update",value:function(){if(this._map){this.updateWmsParams();var e=this.getImageUrl();if(this._currentUrl!=e){this._currentUrl=e;var t=this._getProjectedLogisBound(),n=new i.default(e,t,{opacity:0});this.setPane(n),n.addTo(this._map),n.once("load",function(){if(!this._map)return void(n&&n.remove());if(n._url!=this._currentUrl)return void this._map.removeLayer(n);this._currentOverlay&&this._map.removeLayer(this._currentOverlay);(this._currentOverlay=n).setOpacity(this.options.opacity?this.options.opacity:1),!0===this.options.isBack&&n.bringToBack();!1===this.options.isBack&&n.bringToFront()},this),n.once("error",function(){this._currentOverlay?this._map.removeLayer(this._currentOverlay):this._map.removeLayer(n)},this),(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)&&this._map.removeLayer(n)}}}},{key:"_getProjectedLogisBound",value:function(){for(var e=this._map.getPixelBounds().getSize(),t=KQ.Common.CommonTools.getMapIntegerZoom(this._map),n=this._map.getPixelWorldBounds(t).getSize(),r=this._map.options.crs.projection.bounds.getSize(),i=r.x/n.x,o=r.y/n.y,a=void 0,s=void 0,l=this._currentUrl.split("&"),u=0;u<l.length;u++){var c=l[u].split("x=");1<c.length&&(a=c[1]);var h=l[u].split("y=");1<h.length&&(s=h[1])}var f=[Number(a)-e.x/2*i,Number(s)-e.y/2*o],d=[Number(a)+e.x/2*i,Number(s)+e.y/2*o];return new p.default.Bounds(f,d)}},{key:"_pixelBoundsToProjectBounds",value:function(e){var t=this.options.crs||this._map.options.crs,n=this._map.getPixelWorldBounds().getSize(),r=t.getProjectedBounds(this._map.zoom).getSize(),i=r.x/n.x,o=r.y/n.y,a=e.min,s=e.max,l=t.options.origin,u=p.default.point(a.x*i+l[0],l[1]-a.y*o),c=p.default.point(s.x*i+l[0],l[1]-s.y*o);return p.default.bounds(u,c)}},{key:"setPane",value:function(e){if(this.options.pane)e.options.pane=this.options.pane,e.desc="imageoverlay";else{var t=this._zIndex,n="pane"+t;this._map.getPane(n)||(this._map.createPane(n),this._map.getPane(n).style.zIndex=t,this._map.getPane(n).style.pointerEvents="none"),e.options.pane=n,e.desc="imageoverlay"}}},{key:"addToMapView",value:function(e){this.addTo(e._getMap())}}]),a}();n.default=a},{"./ImageOverlay":731,leaflet:473}],740:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(e("leaflet")),i=a(e("./SingleLayer"));a(e("../common/ComputeTools"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e+="/export",function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"updateWmsParams",value:function(e){e||(e=this._map);var t=e.getSize(),n=this.options.crs||e.options.crs;console.log("map.getCenter:"+e.getCenter());var r=n.project(e.getCenter()),i={level:this._getLevel(),x:r.x,y:r.y,size:t.x+","+t.y};o.default.extend(this.wmsParams,i)}},{key:"_getLevel",value:function(){var e=this._map,t=KQ.Common.CommonTools.getMapIntegerZoom(e),n=e.options.crs.scales?e.options.crs.scales:e.options.crs._scales,r=!0;return n&&(r=KQ.Common.CommonTools._isGoogleScale(n)),n&&r&&(t=KQ.Common.CommonTools._getGoogleScaleID(n[t])),t+this.options.zoomOffset}}]),n}();n.default=s},{"../common/ComputeTools":607,"./SingleLayer":739,leaflet:473}],741:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=o(e("leaflet")),i=o(e("./SingleLayer"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"updateWmsParams",value:function(e){e||(e=this._map);var t=e.getBounds(),n=e.getSize(),r=parseFloat(this.wmsParams.version),i=this.options.crs||e.options.crs,o=1.3<=r?"crs":"srs",a=i.project(t.getNorthWest()),s=i.project(t.getSouthEast()),l={width:n.x,height:n.y};l[o]=i.code,l.bbox=(1.3<=r&&i===u.default.CRS.EPSG4326?[s.y,a.x,a.y,s.x]:[a.x,s.y,s.x,a.y]).join(","),u.default.extend(this.wmsParams,l)}}]),n}();n.default=a},{"./SingleLayer":739,leaflet:473}],742:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("leaflet-i18n");var r={saveToolBar:{save:function(){return L._("保存")},saveAs:function(){return L._("另存为")},transmit:function(){return L._("分享")},colouddown:function(){return L._("拉取")},menuFold:function(){return L._("折叠")}},analysisHelp:{overlayTips:function(){return L._("对给定的两个图形的交集")},differenceTips:function(){return L._("求属于目标图形但不属于源图形的部分")},projectTips:function(){return L._("对给定的图形的坐标进行投影转换")},projectSystemTips:function(){return L._("将给定的空间参考转为目标类型空间参考")},symDifferentTips:function(){return L._("求只属于给定要素类A或只属于要素类B，但不同时属于A和B的部分")},geometryCheckTips:function(){return L._("图形的拓朴错误检查")},unionTips:function(){return L._("将给定的要素集合并为一个要素")},geometryAttributeTips:function(){return L._("支持计算给定线状要素或面状要素的长度、中心点、外接矩形以及面状要素的面积")},bufferTips:function(){return L._("计算给定的图形的缓冲区")},analysisServerDifferenceTip:function(){return L._("图层在where条件下查询到的结果记作result，查询图形geometry再与result作差运算，得到属于geometry但不属于图层的要素信息")},analysisServerDifferenceExtTip:function(){return L._("图层1在where1条件下查询到的结果与geometry作相交判断，过滤掉图层1中不相交的部份，结果记作result1，图层2在where2条件下查询到的结果记作result2，result1再与result2作差运算，得到属于result1而不属于result2的要素信息")},analysisServerOverlapTip:function(){return L._("图层在where条件下查询到的结果记作result，查询图形geometry再与result作交运算，得到图层在相交部份的要素信息")},analysisServerOverlapExtTip:function(){return L._("图层1在where1条件下查询到的结果与geometry作相交判断，过滤掉图层1中不相交的部份，结果记作result1，图层2在where2条件下查询到的结果记作result2，result1再与result2作交运算，得到result1和result2交集的要素信息")},analysisServerFieldsTip:function(){return L._("查询图层中的可进行分组或统计的字段信息，其中字符串类型及整型可作为分组字段，整型及浮点型可作为统计字段")},analysisServerQueryTip:function(){return L._("该功能是使用指定的where条件或空间条件查询指定要素图层中的要素信息")},analysisServerSummaryTip:function(){return L._("该功能是使用指定的where条件或空间条件查询指定要素图层中的要素信息")},analysisServerExecuteTip:function(){return L._("该功能是向服务发送一条sql，并在后台服务执行，返回sql语句的执行结果")},developingTip:function(){return L._("developing")}},layerHelp:{overlaySrcLayerTips:function(){return L._("待进行叠置分析的图层")},overlayDestLayerTips:function(){return L._("叠加对象所在的图层")},overlayGeoSrsTips:function(){return L._("待进行叠置分析图层所在的空间参考")},overlayDestGeoSrsTips:function(){return L._("叠加对象图层所在的空间参考")},overlayToleranceTips:function(){return L._("叠置分析结果图层的容差范围")},differenceSrcLayerTips:function(){return L._("待进行差异分析的图层")},differenceDestLayerTips:function(){return L._("叠加对象所在的图层")},differenceGeoSrsTips:function(){return L._("待进行差异分析图层所在的空间参考")},differenceDestGeoSrsTips:function(){return L._("叠加对象图层所在的空间参考")},differenceToleranceTips:function(){return L._("差异分析结果图层的容差范围")},projectSrcLayerTips:function(){return L._("待进行坐标投影转换的图层")},projectOutSrsTips:function(){return L._("坐标投影转换后图层的空间参考")},projectSystemPrjTips:function(){return L._("待进行坐标投影转换的空间参考")},projectSystemOutSrsTypeTips:function(){return L._("坐标投影转换后的空间参考类型")},symDifferenceSrcLayerTips:function(){return L._("待进行对称差分析的图层")},symDifferenceDestLayerTips:function(){return L._("叠加对象所在的图层")},symDifferenceGeoSrsTips:function(){return L._("待进行对称差分析图层所在的空间参考")},symDifferenceDestGeoSrsTips:function(){return L._("叠加对象图层所在的空间参考")},symDifferenceToleranceTips:function(){return L._("对称差分析结果图层的容差范围")},geometryCheckSrcLayerTips:function(){return L._("待进行图形检查的图层")},geometryCheckPointLimitTips:function(){return L._("图形检查参数——容差")},geometryCheckAreaLimitTips:function(){return L._("图形检查参数——最小面积")},unionSrcLayerTips:function(){return L._("待进行图形合并的图层")},unionOutSrsTips:function(){return L._("图形合并后图层的空间参考")},geometryAttributeSrcLayerTips:function(){return L._("待进行几何属性分析的图层")},geometryAttributeNameTips:function(){return L._("进行分析的几何属性参数")},bufferSrcLayerTips:function(){return L._("待进行缓冲分析的图层")},bufferGeoSrsTips:function(){return L._("待进行缓冲分析图层所在的空间参考")},bufferSideTypeTips:function(){return L._("缓冲分析结果图层的缓冲区方向")},bufferRaidusTips:function(){return L._("缓冲分析结果图层的容差半径范围")}}};n.default=r},{"leaflet-i18n":472}],743:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("../control/ZoomInput");(r=i)&&r.__esModule;e("leaflet-i18n");var o={fullscreen:{title:function(){return L._("全屏模式")},titleCancel:function(){return L._("退出全屏")}},thumb:{success:function(){return L._("创建缩略图成功")},error:function(){return L._("创建缩略图失败")},buttonTips:function(){return L._("创建缩略图")}},draw:{draw:{toolbar:{actions:{title:function(){return L._("取消绘制")},text:function(){return L._("取消")}},finish:{title:function(){return L._("完成绘制")},text:function(){return L._("完成")}},undo:{title:function(){return L._("删除最后一个绘制的点")},text:function(){return L._("删除最后一个点")}},buttons:{polyline:function(){return L._("绘制一条折线")},polygon:function(){return L._("绘制一个多边形")},rectangle:function(){return L._("绘制一个矩形")},circle:function(){return L._("绘制一个圆")},marker:function(){return L._("绘制一个标记")},circlemarker:function(){return L._("绘制一个圆标记")}}},handlers:{circle:{tooltip:{start:function(){return L._("点击并且拖动绘制圆")}},radius:function(){return L._("半径")}},circlemarker:{tooltip:{start:function(){return L._("点击地图放置圆形标记")}}},marker:{tooltip:{start:function(){return L._("点击地图放置标记")}}},polygon:{tooltip:{start:function(){return L._("点击开始绘制形状")},cont:function(){return L._("点击继续绘制形状")},end:function(){return L._("点击第一个点完成形状")}}},polyline:{error:function(){return L._("<strong>错误:</strong> 形状的边不能相交!")},tooltip:{start:function(){return L._("点击开始绘制线")},cont:function(){return L._("点击继续绘制线")},end:function(){return L._("点击最后一个点完成线")}}},rectangle:{tooltip:{start:function(){return L._("点击并且拖动绘制矩形")}}},simpleshape:{tooltip:{end:function(){return L._("松开鼠标完成绘制")}}}}},edit:{toolbar:{actions:{save:{title:function(){return L._("保存变化")},text:function(){return L._("保存")}},cancel:{title:function(){return L._("取消编辑, 放弃所有变化")},text:function(){return L._("取消")}},clearAll:{title:function(){return L._("清除所有图形")},text:function(){return L._("清除所有")}}},buttons:{edit:function(){return L._("编辑图形")},editDisabled:function(){return L._("没有可编辑图形")},remove:function(){return L._("清除")},removeDisabled:function(){return L._("没有可清除图形")}}},handlers:{edit:{tooltip:{text:function(){return L._("拖动结点或标记编辑图形")},subtext:function(){return L._("点击取消放弃变更")}}},remove:{tooltip:{text:function(){return L._("点击图形进行删除")}}}}},io:{usingGeoJSON:function(){return L._("正在使用GeoJSON")},usingShapefile:function(){return L._("正在使用Shapefile")},usingDwgDxf:function(){return L._("正在使用DwgDxf")},usingTxt:function(){return L._("正在使用Txt")},usingExcel:function(){return L._("正在使用Excel")},export:function(){return L._("导出")},import:function(){return L._("导入")}}},styleEditor:{buttonTitle:function(){return L._("样式编辑")},icon:function(){return L._("图标")},size:function(){return L._("尺寸")},color:function(){return L._("颜色")},lineStroke:function(){return L._("线条样式")},opacity:function(){return L._("透明度")},fillColor:function(){return L._("填充颜色")},fillOpacity:function(){return L._("填充透明度")},tooltip:function(){return L._("点击需要定制样式的要素")},tooltipNext:function(){return L._("点击另一个需要定制样式的要素")},reservedGraphics:function(){return L._("保留原图形")},buffer:{type:function(){return L._("缓冲类型")},length:function(){return L._("缓冲距离")},unit:function(){return L._("单位")},buffer:function(){return L._("缓冲")},outer:function(){return L._("外缓冲")},inner:function(){return L._("内缓冲")},left:function(){return L._("左缓冲")},right:function(){return L._("右缓冲")},both:function(){return L._("双缓冲")},msgLengthTooLong:function(){return L._("缓冲距离最大长度:")}}},toolButton:{backwardButton:{tips:function(){return L._("前一视图")}},drawButton:{tips:function(){return L._("绘图面板")}},forwardButton:{tips:function(){return L._("后一视图")}},globeButton:{tips:function(){return L._("全图浏览")}},informationButton:{tips:function(){return L._("属性查询")},notification:{layerTreeEmpty:function(){return L._("图层树控件为空！")},selectLayer:function(){return L._("请选择查询图层！")},selectQueryLayer:function(){return L._("请点击并勾选需要查询的图层！")},layerNotInConfigFile:function(){return L._("配置文件中无对应图层！")},queryRecordEmpty:function(){return L._("查询记录数为空！")}}},roamingButton:{tips:function(){return L._("地图漫游")}},freeDrawButton:{tips:function(){return L._("自由绘制")}},rubberBandButton:{tips:function(){return L._("拉框选择")}},zoomInButton:{tips:function(){return L._("拉框放大")}},zoomOutButton:{tips:function(){return L._("拉框缩小")}}},layerOpacitySettingDialog:{title:function(){return L._("透明度")}},layerTree:{menu:{stick:function(){return L._("置顶")},clearStick:function(){return L._("清除置顶")},legend:function(){return L._("图例")},opacity:function(){return L._("透明度")},zoomToLayer:function(){return L._("缩放到图层")},clearAllSelected:function(){return L._("清除所有选中项")}},notification:{layerOverLimit:function(){return L._("图层树中同时选中的图层数不能超过: ")}}},legendQuery:{legendEmpty:function(){return L._("图例查询记录数为空！")}},queryAnalysis:{executeAnalysis:function(){return L._("执行分析")},setAnalysisExtent:function(){return L._("打开绘图面板，设置分析范围")},html:{analysis:function(){return L._("分析")},extent:function(){return L._("范围")},setAnalysisLayer:function(){return L._("设置分析图层：")}},notification:{getLayerTreeFailed:function(){return L._("获取数据图层树失败！")},drawAnalysisGeometry:function(){return L._("请绘制分析图形！")},analysisRecordEmpty:function(){return L._("分析结果记录数为空！")},selectAnalysisLayer:function(){return L._("请选择分析图层！")},selectInLayerTree:function(){return L._("分析选中的图层也会在图层树中选中！")}}},queryResultChart:{statisticalChart:function(){return L._("统计图")},statisticalField:function(){return L._("统计字段: ")},summarylField:function(){return L._("分类字段: ")},statisticalResult:function(){return L._("统计结果: ")},pieChart:function(){return L._("饼状图")},barChart:function(){return L._("柱状图")},exportToPrint:function(){return L._("导出到打印")},notification:{limitStatisticalResult:function(){return L._("统计结果过多,无法绘制统计图！")},setCorrectField:function(){return L._("统计字段为空或者错误,请设置正确的统计字段！")}}},overlayAnalysisResultDialog:{title:function(){return L._("叠置分析结果")}},differenceAnalysisResultDialog:{title:function(){return L._("差异分析结果")}},searchBarResultDialog:{title:function(){return L._("搜索结果")}},overlayAnalysisTree:{columns:{layer:function(){return L._("图层")},analysis:function(){return L._("选择")}}},queryTree:{columns:{layer:function(){return L._("图层")},analysis:function(){return L._("选择")}}},infoQueryDialog:{title:function(){return L._("属性查询结果")},columns:{field:function(){return L._("字段")},value:function(){return L._("值")}}},queryResultDialog:{columns:{overlappingArea:function(){return L._("重叠面积或长度")}},notification:{statisticValueIsNull:function(){return L._("统计值为空,无法绘制统计图！")},statisticFieldError:function(){return L._("统计字段为空或者错误,请设置正确的统计字段！")}},button:{statisticalChart:function(){return L._("统计图")},statisticalAllChart:function(){return L._("统计所有")},flickerColor:function(){return L._("闪烁颜色: ")},exportExcel:function(){return L._("导出 excel")},exportChecked:function(){return L._("导出选中")}},label:{unitConversion:function(){return L._("单位换算")}}},advancedSearchResultDialog:{title:function(){return L._("高级查询结果")},button:{exportExcel:function(){return L._("导出 excel")}}},searchLightSizeDialog:{title:function(){return L._("滤镜大小")}},locationDialog:{location:function(){return L._("定位")},locationFailed:function(){return L._("定位失败！")},targetProjection:function(){return L._("目标投影")}},plot:{types:{arc:function(){return L._("弧线")},curve:function(){return L._("曲线")},polyline:function(){return L._("折线")},closedCurve:function(){return L._("闭合曲线")},freeHandLine:function(){return L._("自由线")},circle:function(){return L._("圆")},ellipse:function(){return L._("椭圆")},lune:function(){return L._("弓形")},sector:function(){return L._("扇形")},rectangle:function(){return L._("矩形")},triangle:function(){return L._("三角形")},gatheringPlace:function(){return L._("集结地")},polygon:function(){return L._("多边形")},freeHandPolygon:function(){return L._("自由面")},doubleArrow:function(){return L._("钳击")},straightArrow:function(){return L._("直箭头")},fineArrow:function(){return L._("细直箭头")},assaultDirection:function(){return L._("突击方向")},attackArrow:function(){return L._("进攻方向")},tailedAttackArrow:function(){return L._("进攻方向（燕尾）")},squadCombat:function(){return L._("分队战斗行动")},tailedSquadCombat:function(){return L._("分队战斗行动（燕尾）")}},linePlot:function(){return L._("线标")},polygonPlot:function(){return L._("面标")},arrowPlot:function(){return L._("箭头")},startTitle:function(){return L._("开始标绘")},endTitle:function(){return L._("结束标绘")},delete:function(){return L._("删除")}},advancedSearch:{searchButton:{tooltip:function(){return L._("执行高级查询")}},controlPanelButton:{tooltip:function(){return L._("打开绘图面板，设置查询范围")}},executeQuery:{optionError:function(){return L._("请选择高级查询的图层")},conditionError:function(){return L._("请填写查询条件或者绘制查询范围")},layerTreeError:function(){return L._("获取数据图层树失败！")},queryRecordError:function(){return L._("高级查询记录数为空！")}},html:{selectLayer:function(){return L._("选择图层：")},queryCondition:function(){return L._("查询条件：")},fieldLabel:function(){return L._("[字段信息]")},addToConditionInfo:function(){return L._("添加到条件信息")},valueInfo:function(){return L._("[数值信息]")},getOnlyValue:function(){return L._("获取唯一值")},conditionInfo:function(){return L._("[条件信息]")},clear:function(){return L._("清除")},query:function(){return L._("查询")},scope:function(){return L._("范围")},history:function(){return L._("历史")}}},AdvancedSearchHistoryDialog:{AdvancedSearchHistory:function(){return L._("高级查询历史")},HistoryOkButton:function(){return L._("确定")}},MapPrint:{PrintMap:function(){return L._("打印地图")},SendToPrinter:function(){return L._("发送到打印机")},SelectLayer:function(){return L._("图层选择")},SavedAsPDF:function(){return L._("保存为PDF")},SavedAsImage:function(){return L._("保存为图片")},SavedAsOfd:function(){return L._("保存为OFD")},Clear:function(){return L._("清除")},InputZoom:function(){return L._("输入比例尺")},Text:function(){return L._("文本")},Mark:function(){return L._("标记")},Chart:function(){return L._("图表")},Paper:function(){return L._("纸张")},PixelsPerInch:function(){return L._("像素/英寸")},Scale:function(){return L._("比例尺")},ZoomButton:function(){return L._("缩放按钮")},Compass:function(){return L._("指北针")},Legend:function(){return L._("图例")},Title:function(){return L._("标题")},AMap:function(){return L._("一张图")},Horizontal:function(){return L._("横向")},Vertical:function(){return L._("纵向")},MicrosoftYaHei:function(){return L._("微软雅黑")},SimsunFont:function(){return L._("新宋体")},Italics:function(){return L._("楷体")},AddTextTitle:function(){return L._("添加文字")},AddHtmlTitle:function(){return L._("添加标记")},AddText:function(){return L._("添加")},DeleteText:function(){return L._("删除文字")},DeleteMark:function(){return L._("删除标记")},ClearText:function(){return L._("清空")},ImportHtml:function(){return L._("导入")},ChartExportPrintSuccess:function(){return L._("图表导出到打印成功!")},TitleBackgroundColor:function(){return L._("标题背景色")},TitleBoxShadow:function(){return L._("阴影")},TitleSetting:function(){return L._("标题设置")},DisplayTitle:function(){return L._("显示标题")},DeleteStatisticalChart:function(){return L._("删除统计图")},HideStatisticalChart:function(){return L._("隐藏统计图")}},FeatureImport:{html:{layerSelect:function(){return L._("图层选择：")},selectLayer:function(){return L._("[选择图层]")},graphicImport:function(){return L._("图形导入：")},graphicImport_:function(){return L._("图形导入")},options:function(){return L._("选项设置：")},featureOverlay:function(){return L._("[要素重叠]")},allowOverlay:function(){return L._("允许重叠")},attributeImport:function(){return L._("属性录入")}},import:{typeUnmatch:function(){return L._("加载的图形与类型不匹配!")},noGraphic:function(){return L._("请先加载图形文件!")},manualImportCoord:function(){return L._("无法读取投影坐标系统，请手动选择!")},invalidLayer:function(){return L._("请选择有效的图层!")},importLayer:function(){return L._("请导入图形！")},coordNone:function(){return L._("投影坐标不能为空！")}},dialog:{importLayer:function(){return L._("请导入图形！")},importOk:function(){return L._("-要素录入成功!")},importFail:function(){return L._("-要素录入失败!")},overlap:function(){return L._("-要素重叠!")},updateOk:function(){return L._("-要素更新成功!")},updateFail:function(){return L._("-要素更新失败!")},deleteOk:function(){return L._("-要素删除成功!")},deleteFail:function(){return L._("-要素删除失败!")},fillInt:function(){return L._("请填写整型数据！")},fillFloat:function(){return L._("请填写小数！")},fillDate:function(){return L._("请填写正确的日期格式，如1900/12/12 12:00:00")}},ContextMenu:{featureUpdateMenu:function(){return L._("要素更新")},featureDeleteMenu:function(){return L._("要素删除")},ConfirmToDelete:function(){return L._("是否确定删除此要素?")},okText:function(){return L._("确定")},cancelText:function(){return L._("取消")}}},ZoomInput:{title:function(){return L._("输入比例尺")}},ZoomInputDialog:{title:function(){return L._("比例尺")},execute:function(){return L._("确定")}},FeatureImportDialog:{featureImportButton:function(){return L._("要素入库")},featureImportResetButton:function(){return L._("重置")},featureImport:function(){return L._("要素入库")},featureImportReset:function(){return L._("重置")},okText:function(){return L._("确定")},cancelText:function(){return L._("取消")},currentFeatureSwitch:function(){return L._("当前编辑的要素未入库，是否继续切换?")},featureImportRepeat:function(){return L._("该要素已经入库，是否重复入库?")}},FeatureUpdateDialog:{featureUpdateButton:function(){return L._("要素更新")},featureUpdateResetButton:function(){return L._("重置")},featureUpdate:function(){return L._("要素更新")},featureUpdateReset:function(){return L._("重置")}},Bookmark:{addBookmarkButton:function(){return L._("添加书签")},readFail:function(){return L._("读取书签失败!")},addOk:function(){return L._("-添加书签成功!")},addFail:function(){return L._("-添加书签失败!")},deleteOk:function(){return L._("-书签删除成功!")},deleteFail:function(){return L._("-书签删除失败!")},bookmarkNone:function(){return L._("请输入书签名称!")},bookmark:function(){return L._("书签")},deleteBookmark:function(){return L._("删除书签")},addBookmark:function(){return L._("添加书签")},html:{bookmarkName:function(){return L._("书签名称:")},submit:function(){return L._("提交")}}},NetworkAnalysisDialog:{html:{selectType:function(){return L._("选择类型：")},selectMode:function(){return L._("选择模式：")},selectLayer:function(){return L._("选择图层：")},analysis:function(){return L._("分析")},clear:function(){return L._("清除")}},networkAnalysisTypes:{optimal_path:function(){return L._("最优路线分析")},traveling_salesman_problem:function(){return L._("旅行商分析")},trace_back:function(){return L._("追溯分析")},distance_first:function(){return L._("距离优先")},time_first:function(){return L._("时间优先")},greed_method:function(){return L._("贪心法")},trace_back_method:function(){return L._("回溯法")},enumeration_method:function(){return L._("枚举法")},up:function(){return L._("向上回溯")},down:function(){return L._("向下回溯")}},other:{networkAnalysisSuccess:function(){return L._("网络分析成功！")},networkAnalysisFailed:function(){return L._("网络分析失败！")},pathLayer:function(){return L._("路径图层")},toNextInflexion:function(){return L._("到下一个拐点")},direction:function(){return L._("方向")},distance:function(){return L._("距离")},meter:function(){return L._("米")}},networkAnalysis:function(){return L._("网络分析")}},NetworkAnalysisMenu:{asStartingPoint:function(){return L._("以此为起点")},startPointMark:function(){return L._("起")},asEndingPoint:function(){return L._("以此为终点")},endPointMark:function(){return L._("终")},asMiddlePoint:function(){return L._("以此为途经点")},middlePointMark:function(){return L._("途")},asStickingPoint:function(){return L._("以此为障碍点")},stickingPointMark:function(){return L._("障")},drawStickingPolygon:function(){return L._("绘制障碍面")},remove:function(){return L._("移除")},removeAllPoints:function(){return L._("移除所有点")},removeAllPolygon:function(){return L._("移除所有面")}},RasterImageAnalysisDialog:{html:{input_1:function(){return L._("输入1")},input_2:function(){return L._("输入2")},input:function(){return L._("输入")},outputRasterData:function(){return L._("输出栅格数据")},operator:function(){return L._("运算符")},function:function(){return L._("函数")},selectCondition:function(){return L._("选择条件")},confirm:function(){return L._("确定")},close:function(){return L._("关闭")},downloadAnalysisResults:function(){return L._("下载分析结果")}},AlgebraOperation:function(){return L._("代数运算")},FunctionOperation:function(){return L._("函数运算")},LogicOperation:function(){return L._("逻辑运算")},ConditionOperation:function(){return L._("条件运算")},RasterImageAnalysis:function(){return L._("栅格分析")},AlgebraOperationSuccess:function(){return L._("代数运算成功！")},AlgebraOperationFailure:function(){return L._("代数运算失败！")},FunctionOperationSuccess:function(){return L._("函数运算成功！")},FunctionOperationFailure:function(){return L._("函数运算失败！")},LogicOperationSuccess:function(){return L._("逻辑运算成功！")},LogicOperationFailure:function(){return L._("逻辑运算失败！")},ConditionOperationSuccess:function(){return L._("条件运算成功！")},ConditionOperationFailure:function(){return L._("条件运算失败！")}},HistoryCompare:{HistoryView:function(){return L._("历史查看")}},zoom:{zoomInTitle:function(){return L._("放大")},zoomOutTitle:function(){return L._("缩小")}},compare:{button:{title:function(){return L._("图层对比")}},window:{treeTitle:function(){return L._("选择图层")},title:function(){return L._("图层对比 ( 使用鼠标右键选择图层 )")}},dialog:{title:function(){return L._("对比模式")},content:function(){return L._("<p>请选择图层对比使用的模式<p>")},actionsText2:function(){return L._("两窗口")},actionsText3:function(){return L._("三窗口")},actionsText4:function(){return L._("四窗口")},actionsText5:function(){return L._("五窗口")},actionsText6:function(){return L._("六窗口")}},contextMenu:{useMainMap:function(){return L._("使用主图")},selectLayer:function(){return L._("图层选择")},clearLayer:function(){return L._("清空图层")},copyLayer:function(){return L._("复制图层")},pasteLayer:function(){return L._("粘贴图层")},sync:function(){return L._("同步浏览")},syncCancel:function(){return L._("取消同步")}}},sidebar:{layers:function(){return L._("图层选择")},advancedSearch:function(){return L._("高级查询")},overlayAnalysis:function(){return L._("叠置分析")},differenceAnalysis:function(){return L._("差异分析")},featureImport:function(){return L._("要素入库")},historyCompare:function(){return L._("历史查看")},bookmark:function(){return L._("书签")},settings:function(){return L._("设置")},content:{setting:{selectTheme:function(){return L._("选择主题: ")}}}},mini:{hideText:function(){return L._("隐藏小地图")},showText:function(){return L._("显示小地图")}},drawControl:{import:{success:function(){return L._("导入文件成功！（最多导入数据条数：")},fail:function(){return L._("导入GeoJSON失败！")}},addTo:{drawError:function(){return L._("因为点数过多，不能进入编辑模式！")},needZip:function(){return L._("无法导入文件！请选择shape文件的zip压缩包！")},fail:function(){return L._("导入文件失败！")}},exportDraw:{noData:function(){return L._("没有可以导出的数据！")},success:function(){return L._("导出GeoJSON成功！")}}},playback:{label_play:function(){return L._("播放轨迹")},label_stop:function(){return L._("停止播放")},label_gpsTrack:function(){return L._("GPS轨迹")},label_latlng:function(){return L._("经纬度")}},setting:{onThemeChange:function(){return L._("已经设置新主题，刷新页面将生效！")}},waitting:{defaultText:function(){return L._("<strong>请等待……</strong>")}},realtime:{label_latlng:function(){return L._("经纬度")}},sidebyside:{title:function(){return L._("横向卷帘")},titleVertical:function(){return L._("纵向卷帘")},titleCancel:function(){return L._("关闭卷帘")},least2:function(){return L._("至少选择两个图层！")},most5:function(){return L._("最多选择五个图层！")},maskStart:function(){return L._("将屏蔽部分操作，取消卷帘可恢复！")},maskRestore:function(){return L._("已恢复屏蔽的操作！")},timeout:function(){return L._("请求超时！请确认选择合理有效的图层！")}},searchlight:{title:function(){return L._("滤镜")},titleCancel:function(){return L._("关闭滤镜")},length:function(){return L._("滤镜大小")},maskStart:function(){return L._("将屏蔽部分操作，退出功能后可恢复！")},maskRestore:function(){return L._("已恢复屏蔽的操作！")},mustSelectLayer:function(){return L._("请在图层树选中需要使用的图层")},mustCheckLayer:function(){return L._("请在图层树勾选需要使用的图层")},mustSelectLeafLayer:function(){return L._("请在图层树选中单个图层（没有子节点）")},atLeastCheckTwoLayers:function(){return L._("请在图层树勾选至少两个图层")}},screenshot:{title:function(){return L._("截图")},showui:function(){return L._("截图时显示UI")},hideui:function(){return L._("截图时隐藏UI")}},setlocation:{title:function(){return L._("中心点定位")}},measureSeparate:{titleMeasureLength:function(){return L._("测量长度")},titleMeasureArea:function(){return L._("测量面积")}},basemap:{layerTypeNode:function(){return L._("无")}}};n.default=o},{"../control/ZoomInput":695,"leaflet-i18n":472}],744:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=s(t("../kq")),i=s(t("./Control")),o=s(t("./Other")),a=s(t("./Builder"));function s(e){return e&&e.__esModule?e:{default:e}}t("../../local/en.js");var l=null,u=null,c=null,h=null,f="cn",d={setLanguage:function(e){L.setLocale(e),f=e,null===l&&null===u||(r.default.Common.CommonTools.clearFromCache(l),r.default.Common.CommonTools.clearFromCache(u)),"cn"===e&&(l=t("../../libs/kendo/js/messages/kendo.messages.zh-CN.min"),u=t("../../libs/kendo/js/cultures/kendo.culture.zh-CN.min"),kendo.culture("zh-CN")),null!==c&&r.default.Common.CommonTools.clearFromCache(c),c=t("../../libs/controls/draw/local.js"),null!==h&&r.default.Common.CommonTools.clearFromCache(h),h=t("../../libs/controls/styleeditor/local.js")},getCurrentLanguage:function(){return f},Control:i.default,Other:o.default,Builder:a.default};n.default=d},{"../../libs/controls/draw/local.js":13,"../../libs/controls/styleeditor/local.js":27,"../../libs/kendo/js/cultures/kendo.culture.zh-CN.min":35,"../../libs/kendo/js/messages/kendo.messages.zh-CN.min":36,"../../local/en.js":56,"../kq":729,"./Builder":742,"./Control":743,"./Other":745}],745:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("leaflet-i18n");var r={exportShapeAsync:{fail:function(){return L._("导出Shapefile失败！")},success:function(){return L._("导出Shapefile成功！")}},exportOFDAsync:{fail:function(){return L._("导出OFD失败！")},success:function(){return L._("导出OFD成功！")}}};n.default=r},{"leaflet-i18n":472}],746:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=M(e("./MapView")),i=M(e("./MapConfig")),o=M(e("./MapGeoJSON")),a=M(e("./MapCommon")),s=M(e("./MapLayerManager")),l=M(e("./MapMarker")),u=M(e("./MapPopup")),c=M(e("./MapTooltip")),h=M(e("./MapMask")),f=M(e("./MapRealtime")),d=M(e("./MapLayerWMTSMask")),p=M(e("./MapBuilding")),m=M(e("./MapEcharts")),g=M(e("./MapPlot")),y=M(e("./MapLabel")),_=M(e("./echart/MapChartMigrate")),v=M(e("./echart/MapChartTraffic")),b=M(e("./echart/MapChartTrajectory")),w=M(e("./echart/MapChartDistribution")),x=M(e("./echart/MapChartDistribution_leaflet")),k=M(e("./MapOtherLayersManager")),L=M(e("./MapGeoman")),C=M(e("./MapGeomanStyleEditor")),S=M(e("./MapGeomanIO"));function M(e){return e&&e.__esModule?e:{default:e}}var P={MapView:r.default,MapConfig:i.default,MapGeoJSON:o.default,MapCommon:a.default,MapLayerManager:s.default,MapMarker:l.default,MapPopup:u.default,MapTooltip:c.default,MapMask:h.default,MapRealtime:f.default,MapLayerWMTSMask:d.default,MapBuilding:p.default,MapEcharts:m.default,MapPlot:g.default,MapLabel:y.default,MapChartMigrate:_.default,MapChartTraffic:v.default,MapChartTrajectory:b.default,MapChartDistribution:w.default,MapChartDistribution_leaflet:x.default,MapOtherLayersManager:k.default,MapGeoman:L.default,MapGeomanStyleEditor:C.default,MapGeomanIO:S.default};n.default=P},{"./MapBuilding":747,"./MapCommon":748,"./MapConfig":749,"./MapEcharts":750,"./MapGeoJSON":751,"./MapGeoman":752,"./MapGeomanIO":753,"./MapGeomanStyleEditor":754,"./MapLabel":755,"./MapLayerManager":756,"./MapLayerWMTSMask":757,"./MapMarker":758,"./MapMask":759,"./MapOtherLayersManager":760,"./MapPlot":761,"./MapPopup":762,"./MapRealtime":763,"./MapTooltip":764,"./MapView":765,"./echart/MapChartDistribution":766,"./echart/MapChartDistribution_leaflet":767,"./echart/MapChartMigrate":768,"./echart/MapChartTraffic":769,"./echart/MapChartTrajectory":770}],747:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("leaflet"),s=(r=o)&&r.__esModule?r:{default:r};var l={buildingHeight:30,roofHeight:0,shadows:!0},a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.building=new OSMBuildings,e&&e.onClick&&this.building.click(e.onClick)}return i(t,[{key:"addToMapView",value:function(e){this.building.addTo(e._getMap()),this.shadows||this.building.style({shadows:this.shadows})}},{key:"addData",value:function(e,t){var r=this,i=s.default.extend({},l,t);r.shadows=i.shadows,delete i.shadows;var o=!1,n=new KQ.Map.MapGeoJSON(e);if(n.eachLayer(function(e){if(!e.feature._building_id){var t=md5(JSON.stringify(e.feature));if(!r.building.includes(t)){if(o=!0,e.feature.properties||(e.feature.properties={}),s.default.extend(e.feature.properties,i),i.buildingHeightField&&e.feature.properties[i.buildingHeightField])e.feature.properties.buildingHeight=e.feature.properties[i.buildingHeightField];else if(i.buildingHeightField)for(var n=0;n<e.feature.properties.length;n++)if(e.feature.properties[n].Field===i.buildingHeightField){e.feature.properties.buildingHeight=e.feature.properties[n].Value;break}0<e.feature.properties.roofHeight&&(e.feature.properties.roofShape="pyramid"),e.feature._building_id&&""!==e.feature._building_id||(e.feature._building_id=t)}}}),o){var a=n.toGeoJSON();r.building.addData(a)}}},{key:"remove",value:function(){this.building.remove()}},{key:"clearData",value:function(){this.building.clearData()}},{key:"delData",value:function(e){this.building.delData(e)}},{key:"minZoom",value:function(e){return OSMBuildings.minZoom(e)}},{key:"getData",value:function(e){return this.building.getData(e)}},{key:"setOnClick",value:function(e){this.building.click(e)}}],[{key:"getInstance",value:function(e){return t._instance||(t._instance=new t(e)),t._instance}}]),t}();n.default=a},{leaflet:473}],748:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),d=(r=o)&&r.__esModule?r:{default:r};var a=function(){function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l)}return i(l,null,[{key:"flickerLayer",value:function(e,t,n){var r=0;function i(){6<=r&&clearInterval(l._flickerInterval),r%2==0?e.addTo(t):e.removeFrom(t),l._flickerMap.set(t._leaflet_id,e),r++}(n=void 0===n||n)&&l.clearFlickerLayer(t),l._stopLayerFlicker(),l._flickerInterval=setInterval(i,350),i()}},{key:"fitBoundsLayer",value:function(e,t){var n=e.getBounds(),r=d.default.Map.MapConfig.getInstance(),i=n.getSouth();r.getDrawOption().isFeatureCenterFullscreen||(i=2*(n.getSouth()-n.getNorth())+n.getNorth());var o=L.latLng(n.getNorth(),n.getWest()),a=L.latLng(i,n.getEast()),s=L.latLngBounds(o,a);l.fitBound(s,t)}},{key:"fitBound",value:function(e,t){e.getSouthWest().equals(e.getNorthEast())&&(e=e.getCenter().toBounds(1e3));var n=d.default.Map.MapConfig.getInstance();Math.round(1*n.scales().length/2).toFixed();t.fitBounds(e,{})}},{key:"clearFlickerLayer",value:function(e){l._stopLayerFlicker();var t=l._flickerMap.get(e._leaflet_id);t&&(t.removeFrom(e),l._flickerMap.delete(e._leaflet_id))}},{key:"_stopLayerFlicker",value:function(){l._flickerInterval&&(clearInterval(l._flickerInterval),l._flickerInterval=null)}},{key:"resetMapPaneZIndex",value:function(e){e.getPane("basemapPane").style.zIndex=d.default.Common.CommonValues.basemapPane_zIndex,e.getPane("tilePane").style.zIndex=d.default.Common.CommonValues.tilePane_zIndex,e.getPane("overlayPane").style.zIndex=d.default.Common.CommonValues.overlayPane_zIndex,e.getPane("shadowPane").style.zIndex=d.default.Common.CommonValues.shadowPane_zIndex,e.getPane("markerPane").style.zIndex=d.default.Common.CommonValues.markerPane_zIndex,e.getPane("maskPane").style.zIndex=d.default.Common.CommonValues.maskPane_zIndex,e.getPane("tooltipPane").style.zIndex=d.default.Common.CommonValues.tooltipPane_zIndex,e.getPane("popupPane").style.zIndex=d.default.Common.CommonValues.popupPane_zIndex}},{key:"getScaleIndexByExtent",value:function(e,t,n){for(var r=e[0],i=e[1],o=e[2],a=e[3],s=d.default.Map.MapConfig.getInstance(),l=(s.getUnit(),Math.abs((o-r)/t)),u=Math.abs((a-i)/n),c=Math.max(l,u),h=s.resolutions(),f=0;f<h.length;f++)if(h[f]<c)return 0===f?0:f-1;return h.length-1}},{key:"getKeyFromSourceNameLayerId",value:function(e,t){return e+"@@"+t}},{key:"getSourceNameLayerIdFromKey",value:function(e){var t=e.split("@@");return{sourceName:t[0],layerId:t[1]}}},{key:"_totalStatisticsByField",value:function(e,t){for(var n=0,r=0;r<e.length;++r)e[r][t]&&(n+=Number(e[r][t]));return n}},{key:"_isGetPropertyMethod",value:function(e){return 0===e.length}},{key:"_getActualLayers",value:function(e,n){n||(n=!1);var r=["baselayer","imageoverlay","layerwmts"],i=[];e.getCenter();return e.eachLayer(function(e){if(e.desc&&r.includes(e.desc))if(n)i.push(e);else if("layerwmts"===e.desc)i.push(e);else if("basemapPane"===e.pane);else if("imageoverlay"===e.desc){var t=$(e.getContainer()).find("img").length;console.log("imgCount:"+t),1!==t||i.push(e)}}),i.sort(function(e,t){var n=Number(e.options.pane.substr(4)),r=Number(t.options.pane.substr(4));return n<r?-1:r<n?1:0}),i.reverse(),i}}]),l}();a._flickerInterval=null,a._flickerMap=new Map,n.default=a},{"../kq":729}],749:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),b=(r=o)&&r.__esModule?r:{default:r};function w(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._isValid=!1,e._object=null,e._origin=null,e._permission=[],e._drawoption={},e._rubberbandoption={},L.Map.addInitHook("addHandler","computeDist",L.ComputeDist),L.Map.addInitHook("addHandler","computeArea",L.ComputeArea),e}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,L.Evented),i(t,[{key:"initAsync",value:(n=w(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,l,u,c,h,f,d,p,m,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",y=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_=arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.default.Common.NetworkTools,b.default.Common.CommonTools._hideLoading(),console.log("typeof xmlstring:"+(void 0===g?"undefined":v(g))),u=l=s=a=o=i=r=n="",!1!==this._isValid){e.next=68;break}if(e.prev=12,""==g||"string"!=typeof g){e.next=17;break}n=g,e.next=37;break;case 17:if(""==g||"object"!==(void 0===g?"undefined":v(g))||!g.configXML){e.next=28;break}n=g.configXML,r=g.infoQueryConfigXML?g.infoQueryConfigXML:"",i=g.buildingQueryConfigXML?g.buildingQueryConfigXML:"",o=g.advancedSearchConfigXML?g.advancedSearchConfigXML:"",a=g.differenceAnalysisConfigXML?g.differenceAnalysisConfigXML:"",s=g.overlayAnalysisConfigXML?g.overlayAnalysisConfigXML:"",l=g.featureImportConfigXML?g.featureImportConfigXML:"",u=g.searchBarConfigXML?g.searchBarConfigXML:"",e.next=37;break;case 28:if(y)return e.next=31,t.loadZipFileAsync(b.default.Common.CommonValues.configFilePath+"config.zip","config.xml");e.next=34;break;case 31:n=e.sent,e.next=37;break;case 34:return e.next=36,t.httpGetAsync(b.default.Common.CommonValues.configFilePath+"config.xml");case 36:n=e.sent;case 37:if(c=new X2JS,this._object=c.xml_str2json(n),this._object){e.next=42;break}return console.log("MapConfig init failed! (xml_str2json failed)"),e.abrupt("return");case 42:return this._origin=JSON.parse(JSON.stringify(this._object)),this._isValid=!0,this._optimizeConfig(!1),e.next=47,b.default.Query.InfoQueryConfig.getInstance().initAsync(r);case 47:if(h=this._isNeedBuildingConfig(),console.log("need_building_config: "+h),h)return e.next=52,b.default.Query.BuildingQueryConfig.getInstance().initAsync(i);e.next=52;break;case 52:return e.next=54,b.default.Query.AdvancedSearchConfig.getInstance().initAsync(o);case 54:return e.next=56,b.default.Query.OverlayAnalysisConfig.getInstance().initAsync(s);case 56:return e.next=58,b.default.Query.DifferenceAnalysisConfig.getInstance().initAsync(a);case 58:(f=b.default.Map.MapConfig.getInstance()).controls().forEach(function(){var t=w(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.getControlType(t),f.isControlHasPermission(t)){e.next=4;break}e.next=14;break;case 4:if("sidebar"!==n){e.next=11;break}if((r=f.getSubControl(t,"featureImport"))&&f.isControlHasPermission(r))return e.next=9,b.default.Query.FeatureImportConfig.getInstance().initAsync(l);e.next=9;break;case 9:e.next=14;break;case 11:if("searchbar"===n)return e.next=14,b.default.Query.SearchBarConfig.getInstance().initAsync(u);e.next=14;break;case 14:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}()),b.default.Common.CommonTools._addExtraLibs(),d=this,setTimeout(function(){OSMBuildings.initMinZoom(d)},500),e.next=68;break;case 65:e.prev=65,e.t0=e.catch(12),console.log("MapConfig init failed:"+e.t0.toString());case 68:return this._updateLayerParent(this.layers()),p=b.default.Common.ThemeManager.getInstance(),e.next=72,p.loadInitTheme();case 72:m={min_scale_value:this.getBuildingMinScaleValue(),height_rate:this.getBuildingHeightRate()},b.default.Map.MapBuilding.getInstance(m),_&&_();case 75:case"end":return e.stop()}},e,this,[[12,65]])})),function(){return n.apply(this,arguments)})},{key:"_isNeedBuildingConfig",value:function(){for(var e=!1,t=this.getAllLayerList(),n=0;n<t.length;++n){var r=t[n];if("1"===this.getLayerProperty(r,"is_building")){e=!0;break}}return e}},{key:"_optimizeConfig",value:function(e){var c=this;if(!c._origin.config.tree||!c._origin.config.tree.sources)return null;c._layerMap=new Map;var t=[].concat(c._origin.config.tree.sources.source);console.debug(t),c.setSources([]);var h=0,f=[];c.layers(!0).forEach(function e(t){if(c.isLayerGroup(t)){var n=c.getLayerSubLayer(t);n.forEach(e)}else{f.push(t);var r=c.getLayerSourceName(t),i=c._getLayerMapSourceName(t),o=c.getSourceByName(r,!0),a=c.getSourceByName(i,!0),s=c.getLayerKey(t);if(c._layerMap.has(s)?t._isDuplicate=!0:c._layerMap.set(s,t),null!==o){var l=JSON.parse(JSON.stringify(o));l._oldname=l._name,l._name=h.toString(),t._src_name=l._name,h++,l._layertype=t._type,c._object.config.tree.sources.source.push(l)}if(null!==a){var u=JSON.parse(JSON.stringify(a));u._oldname=u._name,u._name=h.toString(),t._map_src_name=u._name,h++,u._layertype=t._type,c._object.config.tree.sources.source.push(u)}}});var n=1,r=5;e||(r=n=10);for(var i=null,o=0,a=0;a<f.length;a++){var s=f[a],l=c.getSourceByName(s._src_name,!1),u=c.getSourceByName(s._map_src_name,!1);l.layers=[],u&&(u.layers||(u.layers=[]),u.layers.push(s),i=u);var d=n;c.isLayerDynamic(s)&&(d=r),c.getLayerOpacity(s)<1&&(d=10),c.isLayerMini(s)?d=10:c.isLayerHistory(s)&&(d=10),c.isLayerMask(s)&&(d=10),c._isLayerSpecial(s)&&(d=10),s._isDuplicate&&(d=10),null===i?(i=l,o=d):l._type!==i._type||l._url!==i._url||l._scale_offset?i!==u&&(i=l,o=d):10<o+d?(i=l,o=d):(s._src_name=i._name,o+=d),i.layers.push(s)}c.fire("optimized")}},{key:"getInitExtent",value:function(){return this._isValid?this._object.config.map._init_extent.split(" "):[]}},{key:"getFullExtent",value:function(){return this._isValid?this._object.config.map._full_extent.split(" "):[]}},{key:"getMinScaleID",value:function(){return this._isValid?Number(this._object.config.map._min_scale_id):0}},{key:"isMapBuilder",value:function(){return this._isValid?Number(this._object.config.map._isbuilder):0}},{key:"getMapBackgroundColor",value:function(){return this._isValid?this._object.config.map._background_color:0}},{key:"getScaleOffset",value:function(){return this._isValid?Number(this._object.config.map._scale_offset||0):0}},{key:"getLanguage",value:function(){return this._isValid?this._object.config.map._language:"cn"}},{key:"treeLabel",value:function(){return this._isValid?this._object.config.tree._label:""}},{key:"isHideTreeLabel",value:function(){return this._isValid?this._object.config.tree._is_hide:""}},{key:"treeIcon",value:function(){var e=this._object.config.tree._icon;return!e||e+".png"}},{key:"layers",value:function(e){if(!(this._isValid&&this._object.config.tree&&this._object.config.tree.layers&&this._object.config.tree.layers.layer))return[];for(var t=[].concat(this._object.config.tree.layers.layer),n=[],r=0;r<t.length;r++)e?n.push(t[r]):"0"!==t[r]._is_use&&n.push(t[r]);return n}},{key:"getAllLayerList",value:function(){for(var e=[],t=this.layers(),n=0;n<t.length;++n)this.isLayerHasPermission(t[n])&&(this.isLayerGroup(t[n])?e=e.concat(this._getGroupLayerSubNode(t[n])):e.push(t[n]));return e}},{key:"_getGroupLayerSubNode",value:function(e){for(var t=[],n=this.getLayerSubLayer(e),r=0;r<n.length;++r)this.isLayerHasPermission(n[r])&&(this.isLayerGroup(n[r])?t=t.concat(this._getGroupLayerSubNode(n[r])):t.push(n[r]));return t}},{key:"legendLabelMode",value:function(){return this._isValid&&this._object.config.tree&&this._object.config.tree.legendlabel&&this._object.config.tree.legendlabel._mode?"0"===this._object.config.tree.legendlabel._mode?0:1:0}},{key:"miniLayers",value:function(){if(!(this._isValid&&this._object.config.tree&&this._object.config.tree.layers&&this._object.config.tree.layers.layer))return[];for(var e=[].concat(this._object.config.tree.layers.layer),t=[],n=0;n<e.length;n++)"1"===e[n]._is_mini&&t.push(e[n]);return t}},{key:"maskLayers",value:function(){if(!(this._isValid&&this._object.config.tree&&this._object.config.tree.layers&&this._object.config.tree.layers.layer))return[];for(var e=[].concat(this._object.config.tree.layers.layer),t=[],n=0;n<e.length;n++)"1"===e[n]._is_mask&&t.push(e[n]);return t}},{key:"sources",value:function(){return this._isValid&&this._object.config.tree&&this._object.config.tree.sources?[].concat(this._object.config.tree.sources.source):[]}},{key:"originSources",value:function(){return this._isValid&&this._origin.config.tree&&this._origin.config.tree.sources?[].concat(this._origin.config.tree.sources.source):[]}},{key:"setSources",value:function(e){this._object.config.tree.sources.source=e}},{key:"resolutions",value:function(){var e=b.default.Common.ComputeTools,t=this.scales(),n=this.getProj4(),r=1,i=void 0;return i=(""!==n?r=e.getToMetersFromProj4(n):"degree"===this.getUnit()&&(r=1/111319.490793273),e.stdScalesToResolutions(t,r)),i}},{key:"themeName",value:function(){return this._isValid&&this._object.config.theme&&this._object.config.theme._name?this._object.config.theme._name:b.default.Common.CommonValues.defaultTheme}},{key:"scales",value:function(){return this._isValid?[].concat(this._object.config.map.scales.scale):[]}},{key:"getScaleID",value:function(e){return Number(e._id)}},{key:"scaleIndexToID",value:function(e){if(!this._isValid)return-1;var t=this.scales(),n=Math.round(e);return t.length<=n?-1:this.getScaleID(t[n])}},{key:"scaleIDToIndex",value:function(e){if(!this._isValid)return-1;for(var t=this.scales(),n=0;n<t.length;n++)if(this.scaleIndexToID(n)===e)return n;return-1}},{key:"getScaleByIndex",value:function(e){if(!this._isValid)return-1;var t=this.scales();return t.length<=e?-1:t[e].__text}},{key:"findLayer",value:function(e,t){var n=b.default.Map.MapCommon.getKeyFromSourceNameLayerId(e,t);return this._layerMap.has(n)?this._layerMap.get(n):null}},{key:"isLayerGroup",value:function(e){return"1"===e._is_group}},{key:"getLayerLabel",value:function(e){return e._label}},{key:"getLayerTooltip",value:function(e){return e._tooltip_forefather}},{key:"getLayerOpacity",value:function(e){return e._opacity?e._opacity:1}},{key:"setLayerOpacity",value:function(e,t){e._opacity=t}},{key:"getLayerIcon",value:function(e){return this.isLayerGroup(e)?"compound_layer.png":e._icon+".png"}},{key:"getLayerID",value:function(e){return e._id}},{key:"getLayerSourceName",value:function(e){return e._src_name}},{key:"_getLayerMapSourceName",value:function(e){return e._map_src_name}},{key:"getLayerSubLayer",value:function(e){return e.layer?[].concat(e.layer):[]}},{key:"getLayerKey",value:function(e){return b.default.Map.MapCommon.getKeyFromSourceNameLayerId(e._src_name,e._id)}},{key:"getSourceName",value:function(e){return e._name}},{key:"getOriginSourceName",value:function(e){return e._oldname}},{key:"getSourceUrl",value:function(e){var t=void 0;if(e&&e._url)t=e._url;else{if(!this.sources().length)return"";t=this.sources()[0]._url}return t}},{key:"getSourceType",value:function(e){return e._type}},{key:"getWmsSourceUntiled",value:function(e){return"0"!==e._untiled}},{key:"getWmsSourceTileWidth",value:function(e){return e._tileWidth||"256"}},{key:"getWmsSourceTileHeight",value:function(e){return e._tileHeight||"256"}},{key:"getSourceLayerType",value:function(e){return e._layertype}},{key:"getSourceScaleOffset",value:function(e){return Number(e._scale_offset)||0}},{key:"_getWmsVersion",value:function(e){return e._version||"1.1.1"}},{key:"getSourceLayers",value:function(e){return e.layers}},{key:"getSourceUrl_GeometryService",value:function(e){var t=void 0;if(e)t=e._url;else{if(this._object.config.geometrysource)return this._object.config.geometrysource._url;var n=this.originSources();if(!n.length)return"";t=n[0]._url}var r=t.lastIndexOf("/services/");return t=t.substring(0,r),t+="/services/geometryserver"}},{key:"getSourceUrl_ManagerService",value:function(e){var t=void 0;if(e)t=e._url;else{var n=this.originSources();if(!n.length)return"";t=n[0]._url}var r=t.lastIndexOf("/rest/");return t=t.substring(0,r),t+="/rest/Manager/services"}},{key:"getSourceUrl_IPPort",value:function(e){var t=void 0;if(e)t=e._url;else{if(!this.sources().length)return"";t=this.sources()[0]._url}var n=t.lastIndexOf("/KQGis/");return t=t.substring(0,n)}},{key:"getSourceByName",value:function(e,t){var n=[].concat(this._origin.config.tree.sources.source);t||(n=[].concat(this._object.config.tree.sources.source));for(var r=0;r<n.length;r++)if(n[r]._name===e)return n[r];return null}},{key:"_getOptimizedSourceByOriginLayerInfo",value:function(e){for(var t=[].concat(this._object.config.tree.sources.source),n=0;n<t.length;n++)if(t[n]._oldname===e.src_name)for(var r=0;r<t[n].layers.length;r++)if(t[n].layers[r]._id===e.id)return t[n];return null}},{key:"getTreeSelectMaxCount",value:function(){var e=this._origin.config.tree._select_max_count;return e||(e=b.default.Common.CommonValues.treeSelectMaxCount),Number(e)}},{key:"_minExpandLevel",value:function(){var e=Number(this._origin.config.tree._min_expand_level);return isNaN(e)?2:e}},{key:"_expandSelectedLayers",value:function(){return"0"!==this._origin.config.tree._expand_selected_layers}},{key:"isLayerDynamic",value:function(e){return!!e._is_dynamic&&"1"===e._is_dynamic}},{key:"isLayerMini",value:function(e){return!!e._is_mini&&"1"===e._is_mini}},{key:"isLayerMask",value:function(e){return!!e._is_mask&&"1"===e._is_mask}},{key:"isLayerHistory",value:function(e){return!!e._is_history&&"1"===e._is_history}},{key:"_isLayerSpecial",value:function(e){return"0"===e._id}},{key:"getLayerType",value:function(e){return e._type}},{key:"getLayerpermission",value:function(e){var t=e._permission.split(" ");return[].concat(t)}},{key:"isLayerVisible",value:function(e){return!!e._visible&&"1"===e._visible}},{key:"isLayerUse",value:function(e){return!!e._is_use&&"1"===e._is_use}},{key:"getProj4",value:function(){var e=b.default.Common.CommonValues,t=this.getConfigProj4();""===t&&(t="degree"===this.getUnit()?e.defaltProj4_EPSG4326:e.defaltProj4_EPSG3857);return t}},{key:"getEPSG",value:function(){return this._object.config.map.projection.epsg}},{key:"getPrj",value:function(e){var t=b.default.Common.CommonValues;void 0===e&&(e=!0);var n=this.getConfigPrj();""===n&&e&&(n="degree"===this.getUnit()?t.defaltPrj_EPSG4326:t.defaltPrj_EPSG3857);return n}},{key:"getConfigProj4",value:function(){return this._object.config.map.projection.proj4}},{key:"getConfigPrj",value:function(){return this._object.config.map.projection.prj}},{key:"getProjectionOrigin",value:function(){var e=this._object.config.map.projection.origin;if(e){var t=e._x,n=e._y;if(t&&n)return[Number(t),Number(n)]}var r=this.getUnit();return"meter"===r?[-20037508.3427892,20037508.3427892]:"degree"===r?[-180,90]:[0,0]}},{key:"getProjectionBounds",value:function(){var e=this._object.config.map.projection.bound;if(e){var t=e.split(" ");if(4===t.length)return[Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])]}var n=this.getUnit();return"meter"===n?[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]:"degree"===n?[-180,-90,180,90]:[]}},{key:"getUnit",value:function(){var e="meter",t=this.getConfigProj4();if(""!==t)e=b.default.Common.ComputeTools.getUnitFromProj4(t);else{var n=this.getFullExtent();if(Number(n[0])<=180&&Number(n[1])<=90&&Number(n[2])<=180&&Number(n[3])<=90)return"degree"}return e}},{key:"controls",value:function(){return this._isValid&&this._object.config.controls?[].concat(this._object.config.controls.control):[]}},{key:"isHasControl",value:function(e){for(var t=this.controls(),n=0;n<t.length;n++)if(t[n]._type===e)return!0;return!1}},{key:"getControl",value:function(e){for(var t=this.controls(),n=0;n<t.length;n++)if(t[n]._type===e)return t[n];return null}},{key:"getControlType",value:function(e){return null!==e?e._type:"kqmapping"}},{key:"getControlPosition",value:function(e){return null!==e?e._position:"topleft"}},{key:"getControlWidth",value:function(e){return null!==e?e._width:"0px"}},{key:"getControlpermission",value:function(e){var t=e._permission.split(" ");return[].concat(t)}},{key:"getSubControl",value:function(e,t){if(e&&e.subcontrol)for(var n=[].concat(e.subcontrol),r=0;r<n.length;r++)if(n[r]._type===t)return n[r];return null}},{key:"getSubControls",value:function(e){return null!==e&&e.subcontrol?[].concat(e.subcontrol):[]}},{key:"getControlHeight",value:function(e){return null!==e?e._height:"0px"}},{key:"getControlProperty",value:function(e,t){return null!==e?e["_"+t]:null}},{key:"getLayerProperty",value:function(e,t){return null!==e?e["_"+t]:null}},{key:"isGoogleScale",value:function(){return b.default.Common.CommonTools._isGoogleScale(this.scales())}},{key:"language",value:function(){return"cn"}},{key:"permission",value:function(e){if(!e)return this._permission;this._permission=e}},{key:"isControlHasPermission",value:function(e){if(e._permission){for(var t=this.getControlpermission(e),n=this._permission,r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(t[i]==n[r])return!0;return!1}return!0}},{key:"isLayerHasPermission",value:function(e){if(!e)return!0;if(e._permission){for(var t=this.getLayerpermission(e),n=this._permission,r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(t[i]==n[r])return!0;return!1}return this.isLayerHasPermission(e._parent)}},{key:"_updateLayerParent",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];n._parent=null,this.isLayerGroup(n)&&this._updateLayerGroupParent(n)}}},{key:"_updateLayerGroupParent",value:function(e){var t=e.layer;if(t)for(var n=0;n<t.length;n++){var r=t[n];r._parent=e,this.isLayerGroup(r)&&this._updateLayerGroupParent(r)}}},{key:"setDrawOption",value:function(e){this._drawoption=e}},{key:"getDrawOption",value:function(){return this._drawoption}},{key:"_resetDrawImportFileHtml",value:function(){b.default.Control.Draw._resetImportFileHtml()}},{key:"setRubberBandOption",value:function(e){this._rubberbandoption=e}},{key:"getRubberBandOption",value:function(){return this._rubberbandoption}},{key:"_isDestProjection",value:function(){var e=this.getControl("coordinates");return!!e&&"1"===this.getControlProperty(e,"is_project")}},{key:"_getBuildingMinScaleID",value:function(){if(this._object.config.building&&this._object.config.building._min_scale_id)return this._object.config.building._min_scale_id;for(var e=this.scales(),t=0;t<e.length;t++)if(e[t]>this.getBuildingMinScaleValue())return t;return e.length}},{key:"_isShowBuilding",value:function(){var e=this._getBuildingMinScaleID();return!(this.scales()[e]<this.getBuildingMinScaleValue())}},{key:"getBuildingMinScaleValue",value:function(){return this._object.config.building&&""!==this._object.config.building&&this._object.config.building._min_scale_value?this._object.config.building._min_scale_value:5e-4}},{key:"getBuildingHeightRate",value:function(){return this._object.config.building&&""!==this._object.config.building&&this._object.config.building._height_rate?this._object.config.building._height_rate:1}},{key:"isControlsCustom",value:function(){return this._isValid&&this._object.config.controls?"1"===this._object.config.controls._custom:[]}},{key:"getUrlFromSourceName",value:function(e,t){var n=this.getSourceByName(e,t);return this.getSourceUrl(n)}},{key:"getAllNetworkAnalysisLayers",value:function(){for(var e=this.getAllLayerList(),t=[],n=0;n<e.length;++n)"1"===this.getLayerProperty(e[n],"is_network_analysis")&&t.push(e[n]);return t}},{key:"getAllRasterAnalysisLayers",value:function(){for(var e=this.getAllLayerList(),t=[],n=0;n<e.length;++n)"yx"===this.getLayerProperty(e[n],"type")&&t.push(e[n]);return t}},{key:"getMapBuilder_dbInfomations",value:function(){if(!this._object.config.builder)return[];if(!this._object.config.builder.dbinfomations)return[];if(!this._object.config.builder.dbinfomations.info)return[];for(var e=[],t=this._object.config.builder.dbinfomations.info,n=0;n<t.length;n++){var r=t[n];e.push({type:"DB_DATA",url:r._url,port:r._port,dbname:r._dbname,username:r._username,password:r._password,featureclassname:r._featureclassname,name:r._name})}return e}},{key:"getMapBuilder_fileServerUrl",value:function(){return this._object.config.builder&&this._object.config.builder.fileserver?this._object.config.builder.fileserver._url:""}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}},{key:"createLayerConfig",value:function(e){return L.extend({},{_icon:"polygon",_id:"0",_is_building:"0",_is_dynamic:"1",_is_network_analysis:"0",_label:"",_layer_extent:"",_min_standard_scale:"0.0000000001000000000000000036",_opacity:"1",_parent:null,_src_name:"",_tooltip_forefather:"",_type:"sl"},e)}},{key:"isHasControl",value:function(e){var t=b.default.Map.MapConfig.getInstance();b.default.Control.Notification._insertNotificationHtml();for(var n=0;n<t.controls().length;n++){var r=t.controls()[n];if(t.getControlType(r)===e)return!0}return!1}}]),t}();n.default=a},{"../kq":729}],750:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("leaflet"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._flowEcharts=a.default.flowEcharts(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.Evented),i(n,[{key:"addToMapView",value:function(e){this._map=e._getMap(),this._flowEcharts.addTo(this._map),this._map.on("resize",this._onResize,this)}},{key:"remove",value:function(){this._flowEcharts.remove(),this._map.off("resize",this._onResize,this)}},{key:"_onResize",value:function(e){console.log(e.toString()),this._flowEcharts._initEchartsContainer()}},{key:"on",value:function(e,t){this._flowEcharts._ec.on(e,t)}},{key:"off",value:function(e,t){this._flowEcharts._ec.off(e,t)}}]),n}();n.default=s},{leaflet:473}],751:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l={isAddToDraw:!0,style:function(e){return e.properties&&e.properties.options?e.properties.options:""},pointToLayer:function(e,t){var n=void 0;if(e.properties&&e.properties.options){var r=e.properties.options;if(e.properties.isCircleMarker)n=s.default.circleMarker(t,r);else n=r.icon&&r.icon.options.iconUrl?new KQ.Map.MapMarker(t,{icon:s.default.icon(r.icon.options)}):r.extraIcon&&r.extraIcon.shape?new KQ.Map.MapMarker(t,{extraIcon:r.extraIcon}):new KQ.Map.MapMarker(t)}else n=new KQ.Map.MapMarker(t);var i=KQ.Control.Manager.getInstance().getControl("draw");return i&&e.isAddToDraw&&i._addDrawnLayer(n),n}},u=function(e){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=s.default.extend({},l,t);return e&&e.features&&0<e.features.length&&e.features.forEach(function(e){e.isAddToDraw=n.isAddToDraw}),u._projectToWgs84(e,e.proj4),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,s.default.GeoJSON),i(u,[{key:"toGeoJSON",value:function(){return o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"toGeoJSON",this).call(this)}},{key:"addToMapView",value:function(e){var t=KQ.Control.Manager.getInstance().getControl("draw");t&&this.options.isAddToDraw?t.loadFromGeoJSON(this):o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"addTo",this).call(this,e._getMap())}},{key:"remove",value:function(){var e=KQ.Control.Manager.getInstance().getControl("draw");e?e.removeGeoJSON(this):o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"remove",this).call(this)}},{key:"addData",value:function(e){o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"addData",this).call(this,e)}},{key:"setStyle",value:function(e){o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"setStyle",this).call(this,e)}},{key:"getBounds",value:function(){return o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"getBounds",this).call(this)}},{key:"bindOnClick",value:function(t){t&&this.getLayers().forEach(function(e){e.on("click",t)})}},{key:"bindEvent",value:function(t,n){n&&this.getLayers().forEach(function(e){e.on(t,n)})}}],[{key:"_projectToWgs84",value:function(e,t){if(e.features){var n=t||e.prj;if(n&&n!==KQ.Common.CommonValues.defaltPrj_EPSG4326&&n!==KQ.Common.CommonValues.defaltProj4_EPSG4326)for(var r=0;r<e.features.length;r++)u._projectToWgs84(e.features[r],n)}else if(t&&t!==KQ.Common.CommonValues.defaltPrj_EPSG4326&&t!==KQ.Common.CommonValues.defaltProj4_EPSG4326){var i=new KQ.Projection.ProjectionTransform(t,KQ.Common.CommonValues.defaltProj4_EPSG4326);if("Point"===e.geometry.type)e.geometry.coordinates=i.transformForward(e.geometry.coordinates);else if("LineString"===e.geometry.type)for(var o=0;o<e.geometry.coordinates.length;o++)e.geometry.coordinates[o]=i.transformForward(e.geometry.coordinates[o]);else for(var a=0;a<e.geometry.coordinates.length;a++)if(e.geometry.coordinates[a]instanceof Array)for(var s=0;s<e.geometry.coordinates[a].length;s++)e.geometry.coordinates[a][s]=i.transformForward(e.geometry.coordinates[a][s]);else{var l=i.transformForward(e.geometry.coordinates[a]);e.geometry.coordinates[a]=l}}}}]),u}();n.default=u},{leaflet:473}],752:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=i(e("leaflet")),u=i(e("../kq"));i(e("./MapGeomanIO"));function i(e){return e&&e.__esModule?e:{default:e}}var s={pointSymbolType:"image",vectorInfo:{icon:"icon-female",iconColor:"#ff0",markerColor:"purple",shape:"star",prefix:"iconfont",extraClasses:"",zoomRate:2,name:"1-1"},imageInfo:{width:48,height:43,anchor_v:40,url:"url(./images/point_images/marker_blue.png)",radius:1}},c={lineColor:"#3388ff",lineStyle:0,lineWidth:3,lineOpacity:1},h={fillColor:"#3388ff",fillOpacity:.2,lineColor:"#3388ff",lineStyle:0,lineWidth:3,lineOpacity:1},f={text:'<span style="opacity: 0.8;background-color:white;color:gray;font-size:20px;font-family:Microsoft YaHei;">点击编辑文本</span>',backgroundColor:"white",opacity:.8,maxWidth:"520px"},o=l.default.icon({iconUrl:"./images/point_images/marker_blue.png",iconSize:[48,43],iconAnchor:[24,40]}),d=l.default.divIcon({className:"builder-div-icon",html:"<div style='\n    color: gray;\n    background-color: white;    \n    max-width: 520px;    \n    opacity: 0.8;\n    \n    /*text-align: center;*/\n    font-size: 20px;\n    /*font-weight: normal;    */\n    font-family: \"Microsoft YaHei\";         \n    '>点击编辑文本</div>"}),p={onCreate:function(e){console.log("MapGeoman event onCreate!")},onRemove:function(e){console.log("MapGeoman event onRemove!")},isContextMenuDelete:!1,isContextMenuStyleEdit:!0,pathOptions:{fillColor:"#3388ff",fillOpacity:.2,lineColor:"#3388ff",lineStyle:0,lineWidth:3,lineOpacity:1},markerStyle:{icon:o}},a=function(){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}return r(a,[{key:"init",value:function(e,t,n){this.options=l.default.extend({},p,n),u.default.Map.MapMarker._extraIconZoomRateBindMap(t),this.currentClickedLayer=null,this.currentLayers=e,this.currentOP=a.OP_Null,(this.map=t).pm.setLang("zh");var r=this;t.on("pm:create",function(e){var t=e.layer;r._bindEventCreate(r,t)}),t.on("pm:remove",function(e){var t=e.layer;r._bindEventRemove(r,t)})}},{key:"_setMarkerStyleIcon",value:function(e){this.options.markerStyle={icon:e}}},{key:"getLayer",value:function(e){for(var t=this.currentLayers,n=0;n<t.length;n++)if(t[n].id===e||t[n]._layers&&t[n]._layers[0].id===e)return t[n];return null}},{key:"removeGeomanLayer",value:function(e){this.removeGeomanLayerById(e.id)}},{key:"removeGeomanLayerById",value:function(e){var t=e,n=this._indexOfLayerFromCurrentLayers(t);if(-1!==n){var r=this.currentLayers[n];r.pm.disable(),r.remove(),this._removeOnlyFromCurrentLayers(r)}}},{key:"displayGeomanLayerById",value:function(e,t){var n=this._indexOfLayerFromCurrentLayers(e);if(-1!==n){var r=this.currentLayers[n];t?this.map.addLayer(r):r.remove()}}},{key:"addGeomanLayer",value:function(e,i){var o=this,t=u.default.Map.MapGeomanStyleEditor.getInstance();i.id=e;var n=u.default.Common.CommonTools.getShapeType(i);n===u.default.Common.CommonValues.shapeTypes.point?"builder-div-icon"===i.options.icon.options.className?(i.editorOptions=l.default.extend({},f,i.editorOptions),i.shape=a.Type_Text):(u.default.Map.MapMarker._extraIconZoomRateBindMarker(i),i.editorOptions=l.default.extend({},s,i.editorOptions),i.shape=a.Type_Point):n===u.default.Common.CommonValues.shapeTypes.line?(i.editorOptions=l.default.extend({},c,i.editorOptions),i.shape=a.Type_Line):n===u.default.Common.CommonValues.shapeTypes.fill&&(i.editorOptions=l.default.extend({},h,i.editorOptions),i instanceof l.default.Circle?i.shape=a.Type_Circle:i instanceof l.default.Rectangle?i.shape=a.Type_Rectangle:i.shape=a.Type_Polygon),o.currentLayers.push(i),i.on("contextmenu",function(e){console.log("geoman contextmenu event !"),o.options.isContextMenuDelete&&o.removeGeomanLayer(i),o.options.isContextMenuStyleEdit&&t.changeStyle(i,s)}),i.on("click",function(e){if(o.currentClickedLayer){var t=o._getPMLayer(o.currentClickedLayer);t instanceof l.default.Marker&&t.dragging&&t.pm.disableLayerDrag(),t.pm.disable()}o.currentClickedLayer=i;var n=o._getPMLayer(i),r=!0;n instanceof l.default.Marker&&(r=!1),i.pm.enable({limitMarkersToCount:1,preventMarkerRemoval:!0,snappable:r}),n.pm.enableLayerDrag()}),i.on("dblclick",function(e){if(i.shape===a.Type_Point){t.changeStyle(i,{pointSymbolType:"vector",vectorInfo:{icon:"icon-climbing",color:"#0FF",markerColor:"green-light",shape:"penta",prefix:"iconfont",extraClasses:"",zoomRate:3}})}else if(i.shape===a.Type_Text){t.changeStyle(i,{text:"文本已经被编辑，测试文本测试文本测试文本，测试文本测试文本测试文本测试文本测试文本测试文本测试文本，测试文本测试文本测试文本测试文本测试文本，\n          测试文本，\n          测试文本，\n          测试文本，\n          测试文本，测试文本，测试文本测试文本测试文本！",color:"red",backgroundColor:"white",opacity:.8,maxWidth:"480px",textAlign:"left",fontSize:"24px",fontWeight:"bold",fontFamily:"SimSun"})}}),i.on("pm:drag",function(e){$(".marker-icon").hide()}),i.on("pm:dragend",function(e){$(".marker-icon").show()})}},{key:"_removeOnlyFromCurrentLayers",value:function(e){var t=this.currentLayers,n=this._indexOfLayerFromCurrentLayers(e.id);t.splice(n,1)}},{key:"_indexOfLayerFromCurrentLayers",value:function(e){for(var t=this.currentLayers,n=-1,r=0;r<t.length;r++)(t[r].id==e||t[r]._layers&&t[r]._layers[0].id==e)&&(n=r);return n}},{key:"addControls",value:function(e){this.map.pm.addControls(e)}},{key:"setCurrentLayers",value:function(e){this.currentLayers=e}},{key:"enableDraw",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.Type_Polygon,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.options=l.default.extend({},this.options,t);var n=e;e!==a.Type_Point&&e!==a.Type_Text||(this.options.snappable=!1,this.options.preventMarkerRemoval=!0,e===a.Type_Point&&this._setMarkerStyleIcon(o),e===a.Type_Text&&(this._setMarkerStyleIcon(d),n=a.Type_Point)),this.map.pm.enableDraw(n,this.options),this.currentClickedLayer&&(this.currentClickedLayer.pm.disable(),this.currentClickedLayer=null),this.map.mapEventForwarder&&this.map.mapEventForwarder.disable()}},{key:"disableDraw",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.Type_Polygon;this.map.pm.disableDraw(e),this.map.mapEventForwarder&&this.map.mapEventForwarder.enable()}},{key:"disableDrawAll",value:function(){var t=this.map;t.pm.Draw.getShapes().map(function(e){t.pm.disableDraw(e)})}},{key:"_setOP",value:function(e){this.currentOP=e}},{key:"changeModeEdit",value:function(e){this.disableDrawAll(),e?(this._setOP(a.OP_Edit),this.map.pm.enableGlobalEditMode({allowSelfIntersection:!1})):(this._setOP(a.OP_Null),this.map.pm.disableGlobalEditMode())}},{key:"changeModeDrag",value:function(e){this.disableDrawAll(),e?(this._setOP(a.OP_Drag),this.map.pm.globalDragModeEnabled()||this.map.pm.toggleGlobalDragMode()):(this._setOP(a.OP_Null),this.map.pm.toggleGlobalDragMode()&&this.map.pm.disableGlobalEditMode())}},{key:"changeModeCut",value:function(e){this.disableDrawAll(),e?(this._setOP(a.OP_Cut),this.map.pm.Draw.Cut.enable({allowSelfIntersection:!1})):(this._setOP(a.OP_Null),this.map.pm.Draw.Cut.disable())}},{key:"changeModeRemove",value:function(e){this.disableDrawAll(),e?(this._setOP(a.OP_Remove),this.map.pm.globalRemovalEnabled()||this.map.pm.toggleGlobalRemovalMode()):(this._setOP(a.OP_Null),this.map.pm.globalRemovalEnabled()&&this.map.pm.toggleGlobalRemovalMode())}},{key:"changeModeStyle",value:function(e){this.disableDrawAll(),e?this._setOP(a.OP_Style):this._setOP(a.OP_Null)}},{key:"toSaveString",value:function(){for(var e=u.default.Map.MapGeomanIO.getInstance(),t=[],n=this.currentLayers,r=0;r<n.length;r++){var i=n[r],o={};o.obj=e.toSaveString(i),o.shape=i.shape,o.options=i.options,o.editorOptions=i.editorOptions,o.id=i.id,t.push(o)}return t}},{key:"fromSaveString",value:function(e){this.currentLayers=[];for(var t=u.default.Map.MapGeomanIO.getInstance(),n=(u.default.Map.MapGeomanStyleEditor.getInstance(),0);n<e.length;n++){var r=e[n],i=t.fromSaveString(r);this.addGeomanLayer(i.id,i),i.addTo(this.map)}}},{key:"toGeoJSON",value:function(){for(var e=[],t=this.currentLayers,n=0;n<t.length;n++){var r=t[n],i=r.toGeoJSON();i.properties.shape=r.shape,i.properties.options=r.options,i.properties.editorOptions=r.editorOptions,i.properties.id=r.id,e.push(i)}return e}},{key:"fromGeoJSON",value:function(e){this.currentLayers=[];for(var t=u.default.Map.MapGeomanStyleEditor.getInstance(),n=0;n<e.length;n++)if(2===n){var r=e[n],i=l.default.geoJSON(r),o=this._getPMLayer(i);i.shape=r.properties.shape,o.shape=r.properties.shape,i.options=r.properties.options,i.editorOptions=r.properties.editorOptions,i.id=r.properties.id,this.addGeomanLayer(i.id,i),t.changeStyle(o,i.editorOptions),i.addTo(this.map)}}},{key:"_getPMLayer",value:function(e){return e instanceof l.default.GeoJSON?e.getLayers()[0]:e}},{key:"_bindEventCreate",value:function(e,t){e.addGeomanLayer(u.default.Common.ComputeTools.guid(),t),e.disableDrawAll(),e.options.onCreate(t)}},{key:"_bindEventRemove",value:function(e,t){e._removeOnlyFromCurrentLayers(t),e.options.onRemove(t)}},{key:"_createMarker",value:function(e,t){var n=void 0;if("vector"===t.pointSymbolType){var r=t.vectorInfo;n=new u.default.Map.MapMarker(e,{extraIcon:r})}else if("image"===t.pointSymbolType){var i=t.imageInfo,o=[i.width*i.radius,i.height*i.radius],a=[i.width*i.radius/2,i.anchor_v*i.radius],s=l.default.icon({iconUrl:u.default.Builder.BuilderCommon.imageUrl(i.url),iconSize:o,iconAnchor:a});n=new u.default.Map.MapMarker(e,{icon:s})}return n}},{key:"_createText",value:function(e,t){var n=l.default.extend({},f,t),r=a._textOptionsToIcon(n),i=new u.default.Map.MapMarker(e,{icon:r});return i.editorOptions=n,i}}],[{key:"getInstance",value:function(){return a._instance||(a._instance=new a),a._instance}},{key:"_textOptionsToIcon",value:function(e){return this.options=l.default.extend({},f,e),l.default.divIcon({className:"builder-div-icon",html:"<div style='        \n        background-color: "+e.backgroundColor+";    \n        max-width: "+e.maxWidth+";    \n        opacity: "+e.opacity+";               \n       '>"+e.text+"</div>"})}}]),a}();a.Type_Point="Marker",a.Type_Line="Line",a.Type_Polygon="Polygon",a.Type_Rectangle="Rectangle",a.Type_Circle="Circle",a.Type_Text="Text",a.OP_Null="",a.OP_Edit="Edit",a.OP_Drag="Drag",a.OP_Cut="Cut",a.OP_Remove="Remove",a.OP_Style="Style",n.default=a},{"../kq":729,"./MapGeomanIO":753,leaflet:473}],753:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=s(e("leaflet")),o=s(e("../kq")),a=s(e("./MapGeoman"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"toSaveString",value:function(e){var t="";return e.shape===a.default.Type_Point?t=this._toSaveStringPoint(e):e.shape===a.default.Type_Circle?t=this._toSaveStringCircle(e):e.shape===a.default.Type_Rectangle?t=this._toSaveStringRectangle(e):e.shape===a.default.Type_Polygon?t=this._toSaveStringPolygon(e):e.shape===a.default.Type_Line?t=this._toSaveStringLine(e):e.shape===a.default.Type_Text&&(t=this._toSaveStringText(e)),t}},{key:"_toSaveStringPoint",value:function(e){return JSON.stringify(e.getLatLng())}},{key:"_toSaveStringLine",value:function(e){return JSON.stringify(e.getLatLngs())}},{key:"_toSaveStringPolygon",value:function(e){return JSON.stringify(e.getLatLngs())}},{key:"_toSaveStringRectangle",value:function(e){return JSON.stringify(e.getLatLngs())}},{key:"_toSaveStringCircle",value:function(e){var t={latLng:e.getLatLng(),radius:e.getRadius()};return JSON.stringify(t)}},{key:"_toSaveStringText",value:function(e){return JSON.stringify(e.getLatLng())}},{key:"fromSaveString",value:function(e){var t=void 0;return e.shape===a.default.Type_Point?t=this._fromSaveStringPoint(e):e.shape===a.default.Type_Circle?t=this._fromSaveStringCircle(e):e.shape===a.default.Type_Rectangle?t=this._fromSaveStringRectangle(e):e.shape===a.default.Type_Polygon?t=this._fromSaveStringPolygon(e):e.shape===a.default.Type_Line?t=this._fromSaveStringLine(e):e.shape===a.default.Type_Text&&(t=this._fromSaveStringText(e)),t.id=e.id,t}},{key:"_fromSaveStringPoint",value:function(e){var t=o.default.Map.MapGeoman.getInstance(),n=JSON.parse(e.obj);return t._createMarker(n,e.editorOptions)}},{key:"_fromSaveStringLine",value:function(e){return i.default.polyline(JSON.parse(e.obj),e.options)}},{key:"_fromSaveStringPolygon",value:function(e){return i.default.polygon(JSON.parse(e.obj),e.options)}},{key:"_fromSaveStringRectangle",value:function(e){var t=JSON.parse(e.obj),n=i.default.latLngBounds(t);return i.default.rectangle(n,e.options)}},{key:"_fromSaveStringCircle",value:function(e){var t=JSON.parse(e.obj),n=t.latLng,r=t.radius;return i.default.circle(n,{radius:r},e.options)}},{key:"_fromSaveStringText",value:function(e){var t=o.default.Map.MapGeoman.getInstance(),n=JSON.parse(e.obj);return t._createText(n,e.editorOptions)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=l},{"../kq":729,"./MapGeoman":752,leaflet:473}],754:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=l(e("leaflet")),a=l(e("../kq")),o=l(e("./MapGeoman")),s=l(e("../builder/RenderShape"));function l(e){return e&&e.__esModule?e:{default:e}}var u={},c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(e){this.options=i.default.extend({},u,e)}},{key:"changeStyle",value:function(e,t){e.shape===o.default.Type_Point?this._changeMarkerStyle(e,t):e.shape===o.default.Type_Polygon||e.shape===o.default.Type_Rectangle||e.shape===o.default.Type_Circle?this._changeFillStyle(e,t):e.shape===o.default.Type_Line?this._changeLineStyle(e,t):e.shape===o.default.Type_Text&&this._changeTextStyle(e,t)}},{key:"_changeMarkerStyle",value:function(e,t){console.log("MapGeomanStyleEditor changeMarkerStyle!");var n=i.default.extend({},e.editorOptions,t);e.editorOptions=n,this._refreshMarker(e,n)}},{key:"_refreshMarker",value:function(e,t){var n=e.id,r=e.getLatLng(),i=a.default.Map.MapGeoman.getInstance(),o=i.map;i.removeGeomanLayer(e),(e=i._createMarker(r,t)).addTo(o),e.editorOptions=t,i.addGeomanLayer(n,e)}},{key:"_changeTextStyle",value:function(e,t){console.log("MapGeomanStyleEditor _changeTextStyle!"),"inherit"===t.backgroundColor&&(t.backgroundColor=e.editorOptions.backgroundColor||"white");var n=i.default.extend({},e.editorOptions,t);e.editorOptions=n;var r=o.default._textOptionsToIcon(n);e.setIcon(r)}},{key:"_changeLineStyle",value:function(e,t){console.log("MapGeomanStyleEditor _changeLineStyle!");var n=i.default.extend({},e.editorOptions,t);e.editorOptions=n;var r=this._getLineStyle(n);e.setStyle(r)}},{key:"_getLineStyle",value:function(e){return{color:e.lineColor,dashArray:s.default._lineStyleToDashArray(e.lineStyle,e.lineWidth),weight:e.lineWidth,opacity:e.lineOpacity}}},{key:"_changeFillStyle",value:function(e,t){console.log("MapGeomanStyleEditor _changeFillStyle!");var n=i.default.extend({},e.editorOptions,t);e.editorOptions=n;var r=this._getFillStyle(n);e.setStyle(r)}},{key:"_getFillStyle",value:function(e){return{fillColor:e.fillColor,fillOpacity:e.fillOpacity,color:e.lineColor,weight:e.lineWidth,opacity:e.lineOpacity,dashArray:s.default._lineStyleToDashArray(e.lineStyle,e.lineWidth)}}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=c},{"../builder/RenderShape":540,"../kq":729,"./MapGeoman":752,leaflet:473}],755:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l={className:"leaflet-marker-icon leaflet-zoom-animated leaflet-interactive marker-label-icon-parent",text:""},u=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=s.default.extend({},l,t)).className+=" "+uuid(),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default.Marker),i(n,[{key:"addToMapView",value:function(e){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addTo",this).call(this,e._getMap());var t=KQ.Control.Manager.getInstance().getControl("draw");t&&t._addDrawnLayer(this)}},{key:"remove",value:function(){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"remove",this).call(this)}},{key:"_html",value:function(){}}]),n}();n.default=u},{leaflet:473}],756:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),c=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._sources={},this._sourceMap={},this._miniLayers=[],this._miniSources={},this._maskSources={},this._wmtsLayers={},this._init()}return i(e,[{key:"cloneManagerObject",value:function(){return new e}},{key:"getMiniLayers",value:function(){return this._miniLayers}},{key:"getLayerFromKey",value:function(e){var t=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e).layerId,n=this._getMapSrcNameFromKey(e);if(n){var r=c.default.Map.MapCommon.getKeyFromSourceNameLayerId(n,t);return this._getWmtsLayerFromKey(r)}var i=this._getSourceTypeFromKey(e);return"kqmapping"===i||"wms"===i?this._getKQMappingLayerFromKey(e):"wmts"===i?this._getWmtsLayerFromKey(e):void 0}},{key:"_getSourceTypeFromKey",value:function(e){var t=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e).sourceName,n=c.default.Map.MapConfig.getInstance().getSourceByName(t,!1);return c.default.Map.MapConfig.getInstance().getSourceType(n)}},{key:"_getMapSrcNameFromKey",value:function(e){var t=this._getConfigLayerFromKey(e);return c.default.Map.MapConfig.getInstance().getLayerProperty(t,"map_src_name")}},{key:"_getConfigLayerFromKey",value:function(e){var t=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e),n=t.sourceName,r=t.layerId;if(n&&r){var i=c.default.Map.MapConfig.getInstance().getSourceByName(n,!1),o=c.default.Map.MapConfig.getInstance().getOriginSourceName(i);return c.default.Map.MapConfig.getInstance().findLayer(o,r)}}},{key:"_getKQMappingLayerFromKey",value:function(e){for(var t=null,n=this._getLayerIdFromKey(e),r=this._getActualSourceNameFromKey(e),i=this._getSourceFromName(r).layers,o=0;o<i.length;++o)if(i[o].layerId===n){t=i[o].layer;break}return t}},{key:"_getWmtsLayerFromKey",value:function(e){var t=null,n=this._getSourceNameInKey(e);return this._wmtsLayers.hasOwnProperty(n)&&(t=this._wmtsLayers[n]),t}},{key:"_getSourceNameInKey",value:function(e){var t=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e),n=t.sourceName;t.layerId;return n}},{key:"_getLayerIdFromKey",value:function(e){var t=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(e);t.sourceName;return t.layerId}},{key:"_getActualSourceNameFromKey",value:function(e){return this._sourceMap[e]}},{key:"_getSourceFromName",value:function(e){return this._sources[e]}},{key:"_getCheckedIdsFromSource",value:function(e){var t={},n=c.default.Control.Manager.getInstance().getControl("tree");if(n)for(var r=n.getCheckedLayers(),i=0;i<r.length;++i){var o=r[i],a=c.default.Map.MapCommon.getKeyFromSourceNameLayerId(o.sourceName,o.layerId);this._getActualSourceNameFromKey(a)===e&&(t[o.layerId]=!0)}return t}},{key:"_getLayersSlicePos",value:function(e,t){for(var n=-1,r=0;r<e.length;++r)if(e[r].layerId===t){n=r;break}return n}},{key:"_moveLayersToNewSource",value:function(e,t,n,r){var i=[];if(0!==e.length){for(var o=this._sources[n].source,a=0;a<e.length;++a){var s=e[a].layer,l=e[a].layerId;i.unshift({layer:s,checked:!1}),e[a].layer=o.getLayer(l),r[l]&&i.unshift({layer:e[a].layer,checked:!0});var u=c.default.Map.MapCommon.getKeyFromSourceNameLayerId(t,l);this._sourceMap[u]=n}this._sources[n].layers=e,this._sources[n].source.options.layers=this._sources[t].source.options.layers}return i}},{key:"resetSourceFromKey",value:function(e){var t=[],n=this._getLayerIdFromKey(e),r=this._getSourceNameInKey(e),i=this._getActualSourceNameFromKey(e);if(i){var o=this._getSourceFromName(i).layers,a=this._getCheckedIdsFromSource(i),s=this._getLayersSlicePos(o,n);if(-1!==s)if(0===s){var l=o.splice(s+1),u=(Number(i)+1).toString();t=this._moveLayersToNewSource(l,r,u,a)}else{var c=o.splice(s,1),h=o.splice(s),f=(Number(i)+s).toString(),d=(Number(i)+s+1).toString(),p=this._moveLayersToNewSource(c,r,f,a),m=this._moveLayersToNewSource(h,r,d,a);t=[].concat(p,m)}return t}console.log("resetSourceFromKey:"+e)}},{key:"_init",value:function(){this._parseSources(),this._parseMiniSources(),this._parseMaskSources()}},{key:"_parseSources",value:function(){for(var e=this._getConfig().sources(),t=0;t<e.length;++t)this._parseSource(e[t])}},{key:"_parseKQMappingSource",value:function(e){for(var t=this,n=[],r=t._createWmsLayer(e),i=t._getConfig().getSourceName(e),o=t._getConfig().getSourceLayers(e),a=0;a<o.length;++a){var s=o[a],l=t._getConfig().getLayerID(s),u=t._getConfig().getLayerKey(s),c=r.getLayer(l),h=t._getConfig().getLayerOpacity(s);"1"!==h&&c.setOpacity(h),t._sourceMap[u]=i,n.push({layerId:l,layer:r.getLayer(l)})}t._sources[i]&&t._sources[i].layers&&(n=n.concat(t._sources[i].layers)),t._sources[i]={source:r,layers:n}}},{key:"_createWMTSLayer",value:function(e,t,n){var r=this._getConfig().getLayerProperty(t,"_style"),i=this._getConfig().getLayerProperty(t,"_layer"),o=this._getConfig().getLayerProperty(t,"_tilematrixSet"),a=this._getConfig().getLayerProperty(t,"_format"),s=this._getConfig().getLayerOpacity(t),l=c.default.Common.PaneZIndexManager.getInstance().getNextZIndex(),u=c.default.Map.MapConfig.getInstance().scales().length-1;return new c.default.Layer.LayerWMTS(e,{style:r,layer:i,tilematrixSet:o,format:a,opacity:s,maxZoom:u,scale_offset:this._getConfig().getSourceScaleOffset(n)},l)}},{key:"_parseWmtsSource",value:function(e){for(var t=this._getConfig().getSourceName(e),n=this._getConfig().getSourceUrl(e),r=this._getConfig().getSourceLayers(e),i=0;i<r.length;++i)this._wmtsLayers[t]=this._createWMTSLayer(n,r[i],e)}},{key:"_parseMiniSources",value:function(){for(var e=this,t=e._getConfig().miniLayers(),n=0;n<t.length;++n){var r=e._findSourceByLayer(t[n]),i=e._getConfig().getSourceName(r);if("kqmapping"===r._type){e._miniSources[i]||(e._miniSources[i]=e._createWmsLayer(r));var o=e._getConfig().getLayerID(t[n]),a=e._miniSources[i].getLayer(o);e._miniLayers.unshift(a)}else if("wmts"===r._type){var s=e._getConfig().getSourceUrl(r);e._miniLayers.unshift(e._createWMTSLayer(s,t[n]))}}}},{key:"_parseMaskSources",value:function(){for(var e=this,t=e._getConfig().maskLayers(),n=0;n<t.length;++n){var r=e._getConfig().getLayerSourceName(t[n]),i=e._getConfig().getLayerID(t[n]);if(e._maskSources[r]){var o=e._maskSources[r].source;e._maskSources[r].layers.push({layerId:i,layer:o.getLayer(i)})}else{e._maskSources[r]={};var a=e._getConfig().getSourceByName(r),s=e._createWmsLayer(a,!0);e._maskSources[r].source=s,e._maskSources[r].layers=[{layerId:i,layer:s.getLayer(i)}]}}}},{key:"_getMaskSources",value:function(){return this._maskSources}},{key:"_createWmsLayer",value:function(e,t){var n=this,r=n._getConfig().getSourceLayers(e),i="",o="";if(0<r.length){var a=r[0];"1"===a._is_dynamic&&(i=a._where||""),n._getConfig().getLayerProperty(a,"styles")&&(o=n._getConfig().getLayerProperty(a,"styles"))}var s="image/png";"yx"===n._getConfig().getSourceLayerType(e)&&(s="image/jpg");var l=n._getConfig().getSourceUrl(e),u={styles:o,format:s,transparent:"true",attribution:"KQWebMap",info_format:"text/html",serviceType:n._getConfig().getSourceType(e),layers:r,scale_offset:n._getConfig().getSourceScaleOffset(e),version:n._getConfig()._getWmsVersion(e),mask:t,where:i},c=n._getConfig().getWmsSourceUntiled(e);if(!c){u.untiled=c;var h=Number(n._getConfig().getWmsSourceTileWidth(e)),f=Number(n._getConfig().getWmsSourceTileHeight(e));u.tileSize=L.point(h,f)}return L.wms.source(l,u)}},{key:"_findSourceByLayer",value:function(e){var t=this._getConfig().getLayerSourceName(e);return this._getConfig().getSourceByName(t)}},{key:"_getMaskSource",value:function(e){return this._maskSources[this._getConfig().getLayerSourceName(e)]}},{key:"_getMaskLayer",value:function(e){return this._getMaskSource(e).getLayer(this._getConfig().getLayerID(e))}},{key:"_getConfig",value:function(){return c.default.Map.MapConfig.getInstance()}},{key:"appendLayer",value:function(e,t){var n=this._getConfig().sources();"wmts"==e.type&&(t.id="0");var r={_name:e.name,_oldname:e.name,_type:e.type,_url:e.url,layers:[{_id:t.id,_opacity:t.opacity,_src_name:e.name,_type:t.type,_layer:t.layer,_style:t.style,_tilematrixSet:t.tilematrixSet,_format:t.format}]};n.push(r),c.default.Map.MapConfig.getInstance().setSources(n),this._parseSource(r)}},{key:"_parseSource",value:function(e){var t=this._getConfig().getSourceType(e);"kqmapping"===t||"wms"===t?this._parseKQMappingSource(e):"wmts"===t&&this._parseWmtsSource(e)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],757:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=i(e("leaflet")),o=i(e("../layer/LayerWMTS"));function i(e){return e&&e.__esModule?e:{default:e}}var a={maskUrl:["data:image/png;base64,","iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAC7lBMVEUAAAABAQECAgIDAwMEBAQF","BQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcY","GBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKior","KyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+","Pj4/Pz9AQEBBQUFCQkJDQ0NERERGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFS","UlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRl","ZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29xcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5","eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiKioqLi4uMjIyN","jY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+g","oKChoaGioqKkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGysrKzs7O0","tLS1tbW2tra3t7e4uLi5ubm6urq7u7u9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fI","yMjJycnKysrLy8vMzMzNzc3Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc","3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v","7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///9A5nLSAAAA","AWJLR0QAiAUdSAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98FHBEuKjDLarAAAAAdaVRY","dENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAjNJREFUOMtjYEACjExMLCzMTIwM","2AETK7eQhIyslAgvOzM2aU4xTbvAhMyspFAXPWkedCWM7GJGYVUz1+0+fGTfpvnNCdYynEwo8twq","fo1rTt978fbDh3evHl7c1hOty49kCCOPTtK8U08+fPvx4+fPnz++fXpxaXWhhRAzQr9O5uob7779","hIPvHx/sqLISgNnCrpK8+s6nHz+RwI8vT3aVGnJDPMwk5jfvBqo8SMWjDUkKrGAFnEYNJ9+hyQNV","fLo+zUUAZASTeNjaJ99+YoDvr/flKLEAFbBpVp368BML+HJzohU3UAG33Yy7X7Ep+P58XZAwEwOT","UOC65z+wKfj5/lCmLDMDk0T87rfYFXw6W6HGysAik3kYqxOAjrjcpM3GwCKbdQSXgivNOuwMTFLJ","+95ht+Lz+Wp1VgYmkdBNL7Er+HA0V56FgZHXef7Db9jkf7zaEikGjC92vaYLn7Ap+HpvliMPMKyZ","peO3vfiOxYB3x8s02ECRxWPdc+kjpiu+3FvoKwJOESwy0asefEGX//Zid74GOyTBcOoW7njyFdWM","b6+Ot9rwQ3MIE79F9a5Hn74jJ5cXx3vcxeCJklnIqnTD9TdfoEp+fH13b3ebuxQrIlkzCxgmTdt3","4/n7T1++fP7w6u6xhfk24qwo+YpbwSVn4rqDZy9fOX90y6wyXw1+tLzFyMqvZBWcUdHUXJ0b6agh","zI6ZgxlZuIRlVbW11eXFeFhxZHAmZlY2dlYWlPwPAD6nKPWk11d/AAAAAElFTkSuQmCC"].join(""),maskSize:256},l=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=s.default.extend({},a,t);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,[{key:"getMaskSize",value:function(){var e=this.options.maskSize;return e instanceof s.default.Point?e:new s.default.Point(e,e)}},{key:"setCenter",value:function(e){if(2!==arguments.length){if(this._map){var t=this._map.containerPointToLayerPoint(e);t=t.subtract(this.getMaskSize().divideBy(2)),this._image.setAttribute("x",t.x),this._image.setAttribute("y",t.y)}}else this.setCenter(s.default.point(e,arguments[1]))}},{key:"_initContainer",value:function(){if(!this._container){var e=this._map.getRenderer(this)._rootGroup,t=e.appendChild(s.default.SVG.create("defs")),n=e.appendChild(s.default.SVG.create("g")),r=t.appendChild(s.default.SVG.create("mask")),i=r.appendChild(s.default.SVG.create("image")),o=this.getMaskSize();r.setAttribute("id","leaflet-tilelayer-mask-"+s.default.stamp(this)),i.setAttribute("width",o.x),i.setAttribute("height",o.y),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.options.maskUrl),e.setAttribute("mask","url(#"+r.getAttribute("id")+")"),this._container=n,this._image=i,this.setCenter(this._map.getSize().divideBy(2))}}},{key:"_updateLevels",value:function(){var e=this._tileZoom;if(void 0!==e){for(var t in this._levels)this._levels[t].el.firstChild||t===e||(s.default.DomUtil.remove(this._levels[t].el),this._removeTilesAtZoom(t),delete this._levels[t]);var n=this._levels[e];if(!n){var r=this._map;n={el:this._container.appendChild(s.default.SVG.create("g")),origin:r.project(r.unproject(r.getPixelOrigin()),e).round(),zoom:e},this._setZoomTransform(n,r.getCenter(),r.getZoom()),this._levels[e]=n}return this._level=n}}},{key:"_addTile",value:function(e,t){var n=this._getTilePos(e),r=this.getTileSize(),i=this._tileCoordsToKey(e),o=this.getTileUrl(this._wrapCoords(e)),a=t.appendChild(s.default.SVG.create("image"));a.setAttribute("width",r.x),a.setAttribute("height",r.y),a.setAttribute("x",n.x),a.setAttribute("y",n.y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),this._tiles[i]={el:a,coords:e,current:!0},KQ.Common.NetworkTools.ajax(o,function(e,t){"error"===e&&$("g image[x="+n.x+"][y="+n.y+"]").remove()})}},{key:"addTo",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addTo",this).call(this,e);var t=this;e.on("mousemove",function(e){t.setCenter(e.containerPoint)})}}]),i}();n.default=l},{"../layer/LayerWMTS":738,leaflet:473}],758:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=function(e){function a(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t&&t.extraIcon){if(t.extraIcon.fontSize){var n=2*Number(t.extraIcon.fontSize.replace("px","")),r=.8*n+t.extraIcon.strokeWidth;t.extraIcon.iconSize=[r,r],t.extraIcon.popupAnchor=[0,Math.round(Number(n/6))]}t.icon=L.ExtraMarkers.icon(t.extraIcon)}if(t&&t.label){t.extraIcon=void 0;var i=new KQ.Struct.Icon({iconUrl:"../../images/blank.png",iconSize:[1,1],iconAnchor:[0,1]});t.icon=i}var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return t&&t.label&&o.bindTooltip(t.label,{permanent:!0,direction:"center",className:"kqmarker_label"}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,L.Marker),r(a,[{key:"addToMapView",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addTo",this).call(this,e._getMap());var n=KQ.Control.Manager.getInstance().getControl("draw");n&&t&&n._addDrawnLayer(this)}},{key:"bindTooltip",value:function(e,t){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"bindTooltip",this).call(this,e,t)}},{key:"unbindTooltip",value:function(){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"unbindTooltip",this).call(this)}},{key:"bindPopup",value:function(e,t){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"bindPopup",this).call(this,e,t)}},{key:"unbindPopup",value:function(){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"unbindPopup",this).call(this)}},{key:"remove",value:function(){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"remove",this).call(this)}},{key:"slideTo",value:function(e,t){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"slideTo",this).call(this,e,t)}},{key:"openPopup",value:function(e){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"openPopup",this).call(this,e)}},{key:"closePopup",value:function(){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"closePopup",this).call(this)}},{key:"getBounds",value:function(){return L.latLngBounds(this.getLatLng(),this.getLatLng())}},{key:"_getMarkerIconSize",value:function(e){var t=e.options.icon.options.iconSize;if(e.options.extraIcon){var n=e.options.extraIcon.trueFontSize;t=[n,n]}return t}}],[{key:"_extraIconZoomRateBindMap",value:function(e){e.on("zoomstart",function(){for(var e=document.getElementsByClassName("extra-marker"),t=0;t<e.length;t++)e[t].style.display="none"}),e.on("zoomend",function(){for(var e=document.getElementsByClassName("extra-marker"),t=0;t<e.length;t++){var n=e[t];a._extraIconZoomRateUpdatePosition(n),n.style.display="block"}}),e.on("layeradd",function(e){if(e.layer._icon&&e.layer._icon.classList.contains("extra-marker")){var t=e.layer._icon;t.zoomRate=e.layer.options.extraIcon.zoomRate,a._extraIconZoomRateUpdatePosition(t)}})}},{key:"_extraIconZoomRateBindMarker",value:function(e){e.on("drag",function(e){var t=e.target._icon;a._extraIconZoomRateUpdatePosition(t)})}},{key:"_extraIconZoomRateUpdatePosition",value:function(e){var t=1;e.zoomRate&&(t=e.zoomRate);var n=(1-t)*e.style.width.replace("px","")/2,r=(1-t)*e.style.height.replace("px",""),i=e.style.transform+" translateY("+r+"px) translateX("+n+"px) scale("+t+")";e.style.transform=i}}]),a}();n.default=o},{}],759:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("leaflet"),a=(r=i)&&r.__esModule?r:{default:r};var s={top:0,left:140,bottom:60,right:70,polygon:[],pane:"maskPane",style:function(e){if(!e.properties||!e.properties.options)return{interactive:!1};var t=e.properties.options;return t.interactive=!1,t}},l=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=a.default.extend({},s,t),r={type:"FeatureCollection",features:[{type:"Feature",properties:{options:{stroke:!1,color:"#000",weight:0,opacity:1,fill:!0,fillColor:"#f0f0f0",fillOpacity:1,showArea:!1,clickable:!1}},geometry:{type:"MultiPolygon",coordinates:[[[[n.left,n.top],[n.right,n.top],[n.right,n.bottom],[n.left,n.bottom]]],[e]]}}]};this._obj=new KQ.Map.MapGeoJSON(r,n)}return o(i,[{key:"addToMapView",value:function(e){this._obj.addTo(e._getMap())}},{key:"remove",value:function(){this._obj.remove()}}]),i}();n.default=l},{leaflet:473}],760:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._manager={}}return r(e,[{key:"addLayer",value:function(e,t,n,r){r?(this._manager[r]||(this._manager[r]={}),this._manager[r][e]={layer:t,data:n}):this._manager[e]={layer:t,data:n}}},{key:"removeLayer",value:function(e){for(var t=[this._manager];0!=t.length;)for(var n=t.shift(),r=Object.keys(n),i=0;i<r.length;++i){if(e==r[i])return void delete n[e];"[object Object]"==Object.prototype.toString.call(n[r[i]])&&t.push(n[r[i]])}}},{key:"allLayers",value:function(){for(var e=[],t=[this._manager];0!=t.length;)for(var n=t.shift(),r=Object.keys(n),i=0;i<r.length;++i){if("layer"==r[i].toLowerCase()){e.push(n);break}"[object Object]"==Object.prototype.toString.call(n[r[i]])&&t.push(n[r[i]])}return e}},{key:"getLayerFromKey",value:function(e){for(var t=[this._manager];0!=t.length;)for(var n=t.shift(),r=Object.keys(n),i=0;i<r.length;++i){if(e==r[i])return n[e];"[object Object]"==Object.prototype.toString.call(n[r[i]])&&t.push(n[r[i]])}return null}},{key:"contains",value:function(e){return null!=this.getLayerFromKey(e)}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{}],761:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("leaflet")),o=a(e("../common/ComputeTools"));function a(e){return e&&e.__esModule?e:{default:e}}var s={},l={isPlot:!0,stroke:!0,color:o.default.fullColorHex(200,0,0),opacity:1,fillColor:o.default.fullColorHex(200,0,0),fillOpacity:.9,fillRule:"nonzero"},u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);i.default.extend({},s,e);this._map=null,this._plotType="squadcombat"}return r(t,[{key:"addToMapView",value:function(e){this.addTo(e._getMap())}},{key:"addTo",value:function(e){this._map||((this._map=e).doubleClickZoom.disable(),e.on("click",function(e){console.log("map clicked!"),P.plotDraw.isDrawing()||P.plotEdit.deactivate()}),P.style=l,P.plotDraw=new P.PlotDraw(e),P.plotDraw.on(P.Event.PlotDrawEvent.DRAW_END,this.onDrawEnd,!1,this),P.plotEdit=new P.PlotEdit(e))}},{key:"remove",value:function(){}},{key:"onDrawEnd",value:function(e){var t=e.feature;P.plotEdit.activate(t)}},{key:"setPlotType",value:function(e){this._plotType=e}},{key:"startDraw",value:function(){P.plotEdit.deactivate(),P.plotDraw.activate(this._plotType)}},{key:"setStyle",value:function(e){P.style=i.default.extend({},P.style,e)}},{key:"stopDraw",value:function(){P.plotDraw.deactivate()}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=u},{"../common/ComputeTools":607,leaflet:473}],762:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Popup),i(t,[{key:"addToMapView",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addTo",this).call(this,e._getMap())}},{key:"remove",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"setContent",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setContent",this).call(this,e)}},{key:"setLatLng",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setLatLng",this).call(this,e)}}]),t}();n.default=l},{leaflet:473}],763:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};e("../../libs/L.Realtime");var o=0,a=[[-123.26455772,44.54983277],[-123.26500558,44.54982299],[-123.26528848,44.55004093],[-123.26522978,44.55035858],[-123.26520235,44.55066664],[-123.26522582,44.55098449],[-123.26521138,44.55130029],[-123.26518003,44.55160747],[-123.26518163,44.55188308],[-123.26557851,44.55188898],[-123.26599874,44.55189944],[-123.26642195,44.55190139],[-123.26683924,44.55192871],[-123.26724848,44.55193516],[-123.26766514,44.55194627],[-123.26804338,44.55193255],[-123.268485,44.55190395],[-123.26889981,44.55190189],[-123.26930378,44.5518918],[-123.26972114,44.5519131],[-123.27001578,44.55214162],[-123.26992328,44.55242064],[-123.26980421,44.55271085],[-123.26979138,44.55299119],[-123.26978961,44.5533388],[-123.26979357,44.55360978],[-123.27000672,44.553837],[-123.27043173,44.55391549],[-123.27077426,44.55406337],[-123.2711259,44.55427745],[-123.27142782,44.55448869],[-123.27165155,44.55471097],[-123.27195074,44.55492459],[-123.27223789,44.55511313],[-123.27260869,44.55527249],[-123.27298495,44.55536561],[-123.27335499,44.55545537],[-123.27373329,44.5555322],[-123.27410536,44.55565105],[-123.27423139,44.55593092],[-123.27425776,44.55623974],[-123.2741858,44.55659789],[-123.27411027,44.55687099],[-123.27404736,44.55717146],[-123.27412948,44.55746332],[-123.27421196,44.55773261],[-123.2742752,44.55803031],[-123.27427864,44.55835353],[-123.27421796,44.55862406],[-123.27423396,44.55889831],[-123.27413285,44.55920039],[-123.2740497,44.55949214],[-123.27380771,44.55970488],[-123.27376891,44.55998712],[-123.27394641,44.56024437],[-123.27403613,44.56055581],[-123.27415413,44.56082019],[-123.27425083,44.56111626],[-123.2743179,44.56139533],[-123.2743746,44.56169452],[-123.27429191,44.56199143],[-123.27427041,44.56230578],[-123.27434592,44.56262136],[-123.27431907,44.56289923],[-123.27436043,44.56322845],[-123.27433006,44.56350296],[-123.27436948,44.56379745],[-123.27433029,44.56407998],[-123.27431553,44.56437327],[-123.27443522,44.56450075],[-123.2744672,44.56451763],[-123.27468884,44.56453951],[-123.27473598,44.56454424],[-123.27508694,44.56468481],[-123.27551389,44.56468727],[-123.27588798,44.56462461],[-123.27631628,44.56459386],[-123.27669485,44.5646084],[-123.27683369,44.56481807],[-123.27684494,44.56485063]],s={interval:1e3,shapeType:"point",is_init_popup:!0,is_show_log:!1,popup_label:null,popup_img:null,style:null,extraIcon:null,icon:null,max_track_number:15,label_latlng:"",label_latlng_precision:4,tooltipOffset:[0,-24],popupOffset:[0,0],getCoord:function(){var e=a[o];if(o++,e)return e},src:function(e,t){var n=this.options.getCoord();if(n){var r=this.options.pointTail,i=this.options.pointTail.geometry.coordinates;"line"===this.options.shapeType&&(r=this.options.lineTail,i=this.options.lineTail.geometry.coordinates),i.push(n),i.splice(0,Math.max(0,i.length-this.options.max_track_number)),e({type:"FeatureCollection",features:[r]}),this.options.is_show_log&&console.log("realtime "+this.options.popup_label+": "+n),this._isFollow&&(this._popup.bringToFront(),this._map.panTo([n[1],n[0]]))}},pointTail:{type:"Feature",properties:{id:0},geometry:{type:"MultiPoint",coordinates:[]}},lineTail:{type:"Feature",properties:{id:1},geometry:{type:"LineString",coordinates:[]}},pointToLayer:function(e,t){if(!this)return L.marker([0,0]);var n=KQ.Common.ThemeManager.getInstance().mainColor(),r={radius:5,stroke:!0,color:n,weight:1,opacity:.8,fill:!0,fillColor:n,fillOpacity:.4,clickable:!0};this.options.style&&(r=this.options.style),"line"===this.options.shapeType&&(r.fill=!1);var i=new Date,o=(i=i.toLocaleString())+"<br>"+t.lng+", "+t.lat,a=new L.CircleMarker(t,r);return a.bindTooltip(o,{}),a},updateFeature:function(e,t,n){if(this._marker){var r=e.geometry.coordinates[e.geometry.coordinates.length-1],i=[r[1],r[0]],o=this._marker.getLatLng(),a=this._popupContent;!o||0===o.lat&&0===o.lng?(this._marker.setLatLng(i),this._popup.setContent(a),this.options.is_init_popup&&this._marker.openPopup()):(a+="<p>"+o.lng.toFixed(this.options.label_latlng_precision)+", "+o.lat.toFixed(this.options.label_latlng_precision)+"</p>",this._popup.setContent(a),this._marker.slideTo(i))}}},l=function(e){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),s.label_latlng=KQ.Local.Control.realtime.label_latlng();var n=L.extend({},s,t),r=e||n.src;n.pointTail=JSON.parse(JSON.stringify(n.pointTail)),n.lineTail=JSON.parse(JSON.stringify(n.lineTail));var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,r,n));return i.options.pointToLayer=L.bind(i.options.pointToLayer,i),i._initIcon(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Realtime),r(o,[{key:"addToMapView",value:function(e){i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"addTo",this).call(this,e._getMap()),this._map=e._getMap(),this._marker.addToMapView(e),this._popupContent={},this._isFollow=!1;var t=null,n=null,r="";this.options.popup_label&&(t='\n        <label class="playback-marker-popup-label">\n          <strong>'+this.options.popup_label+"</strong>\n        </label>\n      "),this.options.popup_img&&(n='<img class="playback-marker-popup-img" src='+this.options.popup_img+' alt="">'),(t||n)&&(r='<div class="playback-marker-popup-container">        \n        '+t+"\n        "+n+"\n      </div>",this._popupContent=r),this._popup.setContent(this._popupContent),this._popup.openOn(this._map),this._popup.remove()}},{key:"setFollow",value:function(e){this._isFollow=e}},{key:"start",value:function(){i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"start",this).call(this)}},{key:"stop",value:function(){i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"stop",this).call(this)}},{key:"isRunning",value:function(){return i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"isRunning",this).call(this)}},{key:"removeFromMapView",value:function(){this._map.removeLayer(this),this._marker.remove()}},{key:"_initIcon",value:function(){var e=void 0;e=this.options.extraIcon?L.ExtraMarkers.icon(this.options.extraIcon):this.options.icon?L.icon(this.options.icon):L.ExtraMarkers.icon({icon:"fa-coffee",markerColor:"blue",shape:"square",prefix:"fa"}),this._marker=new KQ.Map.MapMarker(L.latLng(0,0),{icon:e}),this._popup=L.popup().setLatLng(L.latLng(0,0)),this._marker.bindPopup(this._popup,{autoPan:!1,autoClose:!1,closeOnClick:!1,className:"realtime-popup",offset:this.options.popupOffset})}}]),o}();n.default=l},{"../../libs/L.Realtime":3}],764:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Tooltip),i(t,[{key:"addToMapView",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addTo",this).call(this,e._getMap())}},{key:"remove",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"setContent",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setTooltipContent",this).call(this,e)}},{key:"setLatLng",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setLatLng",this).call(this,e)}}]),t}();n.default=l},{leaflet:473}],765:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),y=r(e("leaflet")),_=r(e("../kq"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var v=new y.default.LatLngBounds([[80,-360],[-80,360]]),b={drawControlTooltips:!0,preferCanvas:!0,zoomControl:!1,attributionControl:!1,condensedAttributionControl:!1,bounceAtZoomLimits:!1,permission:[],contextmenu:!0,contextmenuWidth:140,contextmenuItems:[],worldCopyJump:!1},a=function(e){function g(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this)),n=y.default.extend({},b,e),r=_.default.Map.MapConfig.getInstance(),i=_.default.Common.ComputeTools,o=_.default.Projection.ProjectionCRS;if(_.default.Map.MapConfig.getInstance().permission(n.permission),-1!==r.themeName().indexOf("builder")&&(n=y.default.extend({},n,{maxBoundsViscosity:1,maxBounds:v})),!n.crs){for(var a=[],s=0;s<r.scales().length;++s)a.push(r.getScaleByIndex(s));a.push(2*r.getScaleByIndex(r.scales().length-1));var l=r.getProj4(),u=r.getProjectionOrigin(),c=r.getProjectionBounds(),h=i.getToMetersFromProj4(l),f=i.stdScalesToResolutions(a,h),d="EPSG:"+(""===r.getEPSG()?"900913":r.getEPSG()),p={origin:u,resolutions:f};4===c.length&&(p.bounds=y.default.bounds([c[0],c[1]],[c[2],c[3]]));var m=new o(d,l,p);n.crs=m}return t._options=n,t._map=null,t._mapToken="",t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,y.default.Evented),i(g,[{key:"initAsync",value:(r=o(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,r=_.default.Map.MapConfig.getInstance(),e.next=4,n._preproccessDiv(_.default.Common.CommonValues.mapContainerID);case 4:return n._options.minZoom=r.getMinScaleID()?r.getMinScaleID():0,n._options.maxZoom=r.scales().length-1,i=_.default.Common.CommonValues.insideMapID,n._map=y.default.map(i,n._options),(o=r.getMapBackgroundColor())&&n.setBackgroundColor(o),n.setExtent(r.getInitExtent()),a=n._map.getCenter(),s=n._map.getZoom(),n._options.center&&(a=n._options.center),n._options.zoom&&(s=n._options.zoom),n._map.setView(a,s),n._map.createPane("basemapPane"),n._map.createPane("maskPane"),_.default.Map.MapCommon.resetMapPaneZIndex(n._map),l=_.default.Control.Manager.getInstance(),e.next=22,l.addToAcync(n);case 22:setTimeout(function(){y.default.HistoryControl.getInstance(n._map).addMapListeners()},1e3),n._afterInit(),_.default.Common.TaskManager.getInstance().start(),n._map.on("moveend",n.on_moveend,n),u=_.default.Control.BuildingLoading.getInstance(),n._map.on("moveend checkedLayer",function(){u.load()}),n._map.on("uncheckedLayer",function(){u.clearData()}),t&&t();case 31:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_customInitAsync",value:(n=o(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this,i=_.default.Map.MapConfig.getInstance(),o=_.default.Control.Manager.getInstance(),a=o.getMapView()._getMap(),r._options.minZoom=i.getMinScaleID()?i.getMinScaleID():0,r._options.maxZoom=i.scales().length-1,r._map=y.default.map(t,r._options),r._map.createPane("basemapPane"),r._map.createPane("maskPane"),_.default.Map.MapCommon.resetMapPaneZIndex(r._map),r._afterInit(),_.default.Common.TaskManager.getInstance().start(),r._getMap().setView(a.getCenter(),a.getZoom()),n&&n();case 15:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"_afterInit",value:function(){var t=this;t._map.on("click",function(e){t.fire("click",new _.default.Struct.MouseEvent(e))}),t._map.on("dblclick",function(e){t.fire("dblclick",new _.default.Struct.MouseEvent(e))}),t._map.on("mousedown",function(e){t.fire("mousedown",new _.default.Struct.MouseEvent(e))}),t._map.on("mouseup",function(e){t.fire("mouseup",new _.default.Struct.MouseEvent(e))}),t._map.on("mouseover",function(e){t.fire("mouseover",new _.default.Struct.MouseEvent(e))}),t._map.on("mouseout",function(e){t.fire("mouseout",new _.default.Struct.MouseEvent(e))}),t._map.on("mousemove",function(e){t.fire("mousemove",new _.default.Struct.MouseEvent(e))}),t._map.on("contextmenu",function(e){t.fire("contextmenu",new _.default.Struct.MouseEvent(e))}),t._map.on("resize",function(e){t.fire("resize",e)}),t._map.on("load",function(e){t.fire("load",e)}),t._map.on("zoomend",function(e){t.fire("zoomend",e)}),t._map.on("moveend",function(e){t.fire("moveend",e)}),t._map.on("resize",function(e){console.log("map resize!"),t._map.invalidateSize()})}},{key:"_preproccessDiv",value:(t=o(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.default.Map.MapConfig.getInstance().isHasControl("sidebar"))return e.next=4,_.default.Control.Sidebar.initAsync("sidebar.html");e.next=4;break;case 4:if(_.default.Map.MapConfig.getInstance().isHasControl("sidebar-left"))return e.next=8,_.default.Control.Sidebar.initAsync("sidebar_left.html");e.next=8;break;case 8:if(_.default.Map.MapConfig.getInstance().isHasControl("sidebar-right"))return e.next=12,_.default.Control.Sidebar.initAsync("sidebar_right.html");e.next=12;break;case 12:if(_.default.Map.MapConfig.getInstance().isHasControl("mainmenu"))return e.next=16,_.default.Control.MainMenu.initAsync();e.next=16;break;case 16:if(_.default.Map.MapConfig.getInstance().isHasControl("advmenu"))return e.next=20,_.default.Control.AdvMenu.initAsync();e.next=20;break;case 20:(n=$("#"+t)).length<=0&&console.log("_preproccessDiv: mapdiv was not found!"),n.css("position","relative"),r=_.default.Common.CommonValues.insideMapID,n.append("<div id="+r+' class="sidebar-map" style="height: 100%; outline: none"/>');case 25:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_getMap",value:function(){return this._map}},{key:"callApi",value:function(e){var t=$.inArray("kq-"+e,["kq-zoom_in","kq-zoom_out","kq-roaming","kq-forward-map","kq-backward-map","kq-full-map","kq-drawing","kq-info-query","kq-fullscreen","kq-measureseparate-length","kq-measureseparate-area","kq-setlocation","kq-sidebyside-h","kq-sidebyside-v","kq-searchlight","kq-searchlight-length","kq-screenshot","kq-screenshot-show","kq-print","kq-compare","kq-edit-save","kq-edit-cancel","kq-draw-clearall"]),n=$.inArray("leaflet-control-"+e,["leaflet-control-styleeditor","leaflet-control-zoom-in","leaflet-control-zoom-out","leaflet-control-fullscrenn"]),r=$.inArray("leaflet-draw-"+e,["leaflet-draw-draw-polyline","leaflet-draw-draw-polygon","leaflet-draw-draw-rectangle","leaflet-draw-draw-circle","leaflet-draw-draw-marker","leaflet-draw-draw-circlemarker","leaflet-draw-edit-edit","leaflet-draw-edit-remove"]);-1!=t?(-1!=$.inArray(e,["edit-save","edit-cancel","draw-clearall"])&&document.getElementsByClassName("leaflet-draw-edit-remove")[0].click(),null!=document.getElementById("kq-"+e)&&document.getElementById("kq-"+e).click()):-1!=n?null!=document.getElementsByClassName("leaflet-control-"+e)[0]&&document.getElementsByClassName("leaflet-control-"+e)[0].click():-1!=r&&null!=document.getElementsByClassName("leaflet-draw-"+e)[0]&&document.getElementsByClassName("leaflet-draw-"+e)[0].click()}},{key:"setExtent",value:function(e,t){var n=t||_.default.Common.CommonValues.insideMapID,r=$("#"+n).width(),i=$("#"+n).height(),o=_.default.Map.MapCommon.getScaleIndexByExtent(e,r,i),a=Number(e[0]),s=Number(e[1]),l=Number(e[2]),u=Number(e[3]),c=y.default.point(a+(l-a)/2,s+(u-s)/2),h=this._map.options.crs.unproject(c);this._map.setView(h,o)}},{key:"zoom",value:function(e){this._map.setZoom(e)}},{key:"zoomIn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this._map.zoomIn(e)}},{key:"zoomOut",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this._map.zoomOut(e)}},{key:"panTo",value:function(e){this._map.panTo(e)}},{key:"panBy",value:function(e){this._map.panBy(e)}},{key:"flyTo",value:function(e,t){this._map.flyTo(e,t,{animate:!1})}},{key:"flyToBounds",value:function(e){e.getSouth()<-80&&(e._southWest.lat=-80),80<e.getNorth()&&(e._northEast.lat=80),this._map.flyToBounds(e,{animate:!1})}},{key:"zoomToMap",value:function(){var e=_.default.Map.MapConfig.getInstance().getFullExtent(),t=this._map.options.crs,n=t.unproject(y.default.point(Number(e[0]),Number(e[1]))),r=t.unproject(y.default.point(Number(e[2]),Number(e[3])));this._map.fitBounds(y.default.latLngBounds(n,r),{minZoom:this._options.minZoom})}},{key:"addControl",value:function(e){e.addTo&&e.addTo(this._map)}},{key:"removeControl",value:function(e){e.remove&&e.remove()}},{key:"openPopup",value:function(e){this._map.openPopup(e)}},{key:"closePopup",value:function(e){this._map.closePopup(e)}},{key:"openTooltip",value:function(e){this._map.openTooltip(e)}},{key:"closeTooltip",value:function(e){this._map.closeTooltip(e)}},{key:"toggleDrawControl",value:function(){_.default.Control.Manager.getInstance()._toggleDrawPane()}},{key:"clearDrawGeoJSON",value:function(){var e=_.default.Control.Manager.getInstance().getControl("draw");e&&e.clear()}},{key:"getDrawGeoJSON",value:function(e){var t=_.default.Control.Manager.getInstance().getControl("draw");return t?t.toGeoJSON(e):null}},{key:"getTree",value:function(){var e=_.default.Control.Manager.getInstance().getControl("tree");return e||null}},{key:"getInput",value:function(){var e=_.default.Control.Manager.getInstance().getControl("input");return e||null}},{key:"getSidebar",value:function(){var e=_.default.Control.Manager.getInstance().getControl("sidebar");return e||null}},{key:"getPermission",value:function(){return _.default.Map.MapConfig.getInstance().permission()}},{key:"getBounds",value:function(){return this._map.getBounds()}},{key:"on_moveend",value:function(){for(var e=_.default.Map.MapCommon._getActualLayers(this._map),t=0;t<e.length;t++){var n=e[t];"imageoverlay"===n.desc&&(n._loaded=!1)}}},{key:"project",value:function(e){var t=this._map.options.crs;if(t)return t.project(e);console.log("project failed: no crs object!")}},{key:"unproject",value:function(e){var t=this._map.options.crs;if(t)return"number"==typeof e.x&&"number"==typeof e.y||(e.x=Number(e.x),e.y=Number(e.y)),t.unproject(e);console.log("unproject failed: no crs object!")}},{key:"setCursor",value:function(e){$("#"+_.default.Common.CommonValues.insideMapID).css("cursor",e)}},{key:"resetCursor",value:function(){$("#"+_.default.Common.CommonValues.insideMapID).css("cursor","")}},{key:"cursor",value:function(){return $("#"+_.default.Common.CommonValues.insideMapID).css("cursor")}},{key:"getDrawnItems",value:function(){var e=_.default.Control.Manager.getInstance().getControl("draw");return e?e._drawnItems.getLayers():[]}},{key:"compareTwoMap",value:function(e){this._compareMapViewList=[],_.default.Control.Compare.compareTwoMap(e,this)}},{key:"compareThreeMap",value:function(e){this._compareMapViewList=[],_.default.Control.Compare.compareThreeMap(e,this)}},{key:"setView",value:function(e,t){this._map.setView(e,t)}},{key:"getZoom",value:function(){return this._map.getZoom()}},{key:"getCenter",value:function(){return this._map.getCenter()}},{key:"latLngToLayerPoint",value:function(e){return this._map.latLngToLayerPoint(e)}},{key:"layerPointToLatLng",value:function(e){return this._map.layerPointToLatLng(e)}},{key:"setBackgroundColor",value:function(e){$(".leaflet-container").css({"background-color":e})}},{key:"setTempCRS",value:function(e){this._map.options.crs&&!this._config_crs&&(this._config_crs=this._map.options.crs);var t=this.getCenter(),n=new _.default.Projection.ProjectionCRS("",e.proj4,e);this._map.options.crs=n,this.setView(t)}},{key:"restoreCRS",value:function(){if(this._config_crs){var e=this.getCenter();this._map.options.crs=this._config_crs,this._config_crs=null,this.setView(e)}}},{key:"setDrawingOptions",value:function(e){var t=_.default.Control.Manager.getInstance().getControl("draw");t&&t._draw.setDrawingOptions(e)}},{key:"createPane",value:function(e,t){this._map.createPane(t),this._map.getPane(t).style.zIndex=e}},{key:"getPane",value:function(e){return this._map.getPane(e)}},{key:"getControlByType",value:function(e){return _.default.Control.Manager.getInstance().getControl(e)}},{key:"geoFitBounds",value:function(e){var t=this._map.getBoundsZoom(e,!1),n=e.getCenter();this.setView(n,t)}}],[{key:"setMapToken",value:function(e){this._mapToken=e}},{key:"getMapToken",value:function(){return this._mapToken}}]),g}();n.default=a},{"../kq":729,leaflet:473}],766:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=s(e("../../kq")),a=s(e("../../control/Window"));function s(e){return e&&e.__esModule?e:{default:e}}var l={title:{text:"Distribution Chart",subtext:"Develop By Kanq",left:"center",textStyle:{color:"#122f48"}},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{left:"right",min:100,max:1e3,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0},series:[{name:"china PopEstimates",type:"map",roam:!0,map:"china",itemStyle:{emphasis:{label:{show:!0}}}}]},u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);l.series[0].data=e.data,e.data&&delete e.data,this.options=L.extend({},l,e),this._mapChart=new o.default.Map.MapEcharts(this.options),this._chartDialog=null,this._initHtml(),this._initDistributionDialog()}return i(t,[{key:"addToMapView",value:function(e){this._mapChart.addToMapView(e)}},{key:"_initHtml",value:function(){var e=o.default.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="map-chart-distribution-dialog" style="width: 1100px; height: 700px; margin: 0; "></div>'))}},{key:"_getChartDistributionDialogId",value:function(){return"map-chart-distribution-dialog"}},{key:"_initDistributionDialog",value:function(){var e=this,t={title:"分布图",minWidth:"1100px",minHeight:"720px",scrollable:!1,actions:["Close"],close:function(){console.log("map chart distribution on close!"),n._remove()}},n=new a.default(e._getChartDistributionDialogId(),t);n.initAsync(function(){e._chartDialog=n._object()}),e._initChart()}},{key:"_initChart",value:function(){var e=document.getElementById(this._getChartDistributionDialogId()),t=echarts.init(e);this.options&&"object"===r(this.options)&&t.setOption(this.options,!0)}},{key:"open",value:function(){this._chartDialog.open()}},{key:"remove",value:function(){this._chartDialog.close()}}]),t}();n.default=u},{"../../control/Window":694,"../../kq":729}],767:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq");(r=o)&&r.__esModule;var a={isTooltipInfo:!0,title:"Distribution",geoJsonObj:{},valueDataArray:[],valueGrades:[0,10,20,50,100,200,500,1e3],colorLevels:["#FFEDA0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#BD0026","#800026"]},s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._options=L.extend({},a,e),this._map=null,this._legend=L.control({position:"bottomright"}),this._hoverInfo=L.control({position:"bottomright"}),this._geoJson=null}return i(t,[{key:"hoverInfoAddTo",value:function(e){var t=this;t._hoverInfo.onAdd=function(e){return t._hoverInfo._div=L.DomUtil.create("div","info"),t._hoverInfoUpdate(),t._hoverInfo._div},t._options.isTooltipInfo||t._hoverInfo.addTo(e)}},{key:"_hoverInfoUpdate",value:function(e){this._options.isTooltipInfo||(this._hoverInfo._div.innerHTML="<h4>"+this._options.title+"</h4>"+(e?"<b>"+e.name+": </b><br />"+this._findValueByName(e.name):"Hover over a area"))}},{key:"_hoverLayerTooltipUpdate",value:function(e){var t=e.feature.properties,n="<h4>"+this._options.title+"</h4>"+(t?"<b>"+t.name+": </b><br />"+this._findValueByName(t.name):"Hover over a area");e.bindTooltip(n,{direction:"top",sticky:!0})}},{key:"getColor",value:function(e){var t=null,n=null,r=null;if(this._options.valueGrades.length<=this._options.colorLevels.length)for(var i=this._options.valueGrades.length-1;0<=i;i--)if(t=this._options.valueGrades[i],n=this._options.colorLevels[i],t<e){r=n;break}return r}},{key:"_findValueByName",value:function(e){for(var t=null,n=0;n<this._options.valueDataArray.length;++n)if(this._options.valueDataArray[n].name==e){t=this._options.valueDataArray[n].value;break}return t}},{key:"getStyle",value:function(e){console.log("getStyle feature name: "+e.properties.name);var t=this._findValueByName(e.properties.name);return console.log("getStyle feature value: "+t),{weight:2,opacity:1,color:"white",dashArray:"7",fillOpacity:.7,fillColor:this.getColor(t)}}},{key:"highlightFeature",value:function(e){var t=e.target;t.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront(),this._hoverInfoUpdate(t.feature.properties)}},{key:"resetHighlight",value:function(e){this._geojson.resetStyle(e.target),this._hoverInfoUpdate()}},{key:"zoomToFeature",value:function(e){this._map.fitBounds(e.target.getBounds())}},{key:"onEachFeature",value:function(e,t){t.on({mouseover:L.bind(this.highlightFeature,this),mouseout:L.bind(this.resetHighlight,this),click:L.bind(this.zoomToFeature,this)}),this._options.isTooltipInfo&&this._hoverLayerTooltipUpdate(t)}},{key:"geoJsonAddTo",value:function(e){this._geojson=L.geoJson(this._options.geoJsonObj,{style:L.bind(this.getStyle,this),onEachFeature:L.bind(this.onEachFeature,this)}).addTo(e)}},{key:"legendAddTo",value:function(e){var a=this;this._legend.onAdd=function(e){for(var t,n,r=L.DomUtil.create("div","info legend"),i=[],o=0;o<a._options.valueGrades.length;o++)t=a._options.valueGrades[o],n=a._options.valueGrades[o+1],i.push('<i style="background:'+a.getColor(t+1)+'"></i> '+t+(n?"&ndash;"+n:"+"));return r.innerHTML=i.join("<br>"),r},this._legend.addTo(e)}},{key:"addToMapView",value:function(e){this._map=e._getMap(),this.legendAddTo(this._map),this.hoverInfoAddTo(this._map),this.geoJsonAddTo(this._map)}},{key:"remove",value:function(){this._legend.remove(),this._hoverInfo.remove(),this._geojson.remove()}}]),t}();n.default=s},{"../../kq":729}],768:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("leaflet")),o=a(e("../../kq"));function a(e){return e&&e.__esModule?e:{default:e}}var s={title:{text:"Migrate Chart",subtext:"Develop By Kanq",left:"center",textStyle:{color:"#122f48"}},animation:!1,tooltip:{trigger:"item"},legend:{orient:"vertical",top:"bottom",right:"100px",data:[],textStyle:{color:"#c80007"},selectedMode:"single"},geo:{map:"",label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#323c48",borderColor:"#404a59"},emphasis:{areaColor:"#2a333d"}}},series:[]},l=[];l.push({name:null,type:"lines",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#122f48",symbolSize:3},lineStyle:{normal:{color:null,width:0,curveness:.2}},data:null},{name:null,type:"lines",zlevel:2,effect:{show:!0,period:6,trailLength:0,symbol:"path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z",symbolSize:15},lineStyle:{normal:{color:null,width:1,opacity:.1,curveness:.2}},data:null},{name:null,type:"effectScatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(e){return e[2]/8},itemStyle:{normal:{color:null}},data:null});var u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=i.default.extend({},s),this.options.series=[],e.title&&(this.options.title.text=e.title),e.subtitle&&(this.options.title.subtext=e.subtitle),e.titlecolor&&(this.options.title.textStyle.color=e.titlecolor),e.legendtop&&(this.options.legend.top=e.legendtop),e.legendright&&(this.options.legend.right=e.legendright)}return r(t,[{key:"addToMapView",value:function(e){this.kqecharts=new o.default.Map.MapEcharts(this.options),this.kqecharts.addToMapView(e)}},{key:"remove",value:function(){this.kqecharts.remove()}},{key:"addData",value:function(e,t,n,r){var i=$.extend(!0,{},l),o=[];r.forEach(function(e,t){o.push([n,{coord:[e.value[0],e.value[1]]}])}),i[0].name=t,i[0].lineStyle.normal.color=e,i[0].data=o,i[1].name=t,i[1].lineStyle.normal.color=e,i[1].data=o,i[2].name=t,i[2].itemStyle.normal.color=e,i[2].data=r,this.options.series.push(i[0]),this.options.series.push(i[1]),this.options.series.push(i[2]),this.options.legend.data.push(t)}}]),t}();n.default=u},{"../../kq":729,leaflet:473}],769:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={geo:{map:"",label:{emphasis:{show:!1}}},series:[{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,silent:!0,lineStyle:{normal:{opacity:.2,width:1}},progressiveThreshold:500,progressive:200},{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,lineStyle:{normal:{width:0}},effect:{constantSpeed:20,show:!0,trailLength:.1,symbolSize:1.5},zlevel:1}]},l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s.series[0].data=e.data,s.series[1].data=e.data,delete e.data,this.options=L.extend({},s,e),this._mapChart=new a.default.Map.MapEcharts(this.options)}return i(t,[{key:"addToMapView",value:function(e){this._mapChart.addToMapView(e)}},{key:"remove",value:function(){this._mapChart.remove()}}]),t}();n.default=l},{"../../kq":729}],770:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={geo:{map:"",label:{emphasis:{show:!1}}},series:[{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,silent:!0,lineStyle:{normal:{opacity:.2,width:3}},progressiveThreshold:500,progressive:200},{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,lineStyle:{normal:{width:0}},effect:{constantSpeed:20,show:!0,trailLength:.2,symbolSize:3.5},zlevel:1}]},l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s.series[0].data=e.data,s.series[1].data=e.data,e.pointsize&&(s.series[1].effect.symbolSize=e.pointsize),e.linesize&&(s.series[0].lineStyle.normal.width=e.linesize),delete e.data,this.options=L.extend({},s,e),this._mapChart=new a.default.Map.MapEcharts(this.options)}return i(t,[{key:"addToMapView",value:function(e){this._mapChart.addToMapView(e)}},{key:"remove",value:function(){this._mapChart.remove()}}]),t}();n.default=l},{"../../kq":729}],771:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(e("./ProjectionTransform")),i=a(e("./ProjectionCRS")),o=a(e("./ProjectionTransUnusual"));function a(e){return e&&e.__esModule?e:{default:e}}var s={ProjectionTransform:r.default,ProjectionCRS:i.default,ProjectionTransUnusual:o.default};n.default=s},{"./ProjectionCRS":772,"./ProjectionTransUnusual":773,"./ProjectionTransform":774}],772:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},i=e("leaflet"),s=(r=i)&&r.__esModule?r:{default:r};e("../../libs/proj4leaflet");var l=function(e){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.proj4=t,r.prj=n.prj,console.log("ProjectionCRS proj4def:"+t),console.log("ProjectionCRS options:"+JSON.stringify(n)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default.Proj.CRS),o(i,[{key:"latLngToPoint",value:function(e,t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"latLngToPoint",this).call(this,e,t)}},{key:"pointToLatLng",value:function(e,t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"pointToLatLng",this).call(this,e,t)}},{key:"project",value:function(e){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"project",this).call(this,e)}},{key:"unproject",value:function(e){return"number"==typeof e.x&&"number"==typeof e.y||(e.x=Number(e.x),e.y=Number(e.y)),a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"unproject",this).call(this,e)}},{key:"distance",value:function(e,t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"distance",this).call(this,e,t)}},{key:"scale",value:function(e){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"scale",this).call(this,e)}},{key:"zoom",value:function(e){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"zoom",this).call(this,e)}},{key:"_isLongLat",value:function(){try{return-1!==this.proj4.indexOf("longlat")||-1!==this.proj4.indexOf("latlong")}catch(e){return!1}}}]),i}();n.default=l},{"../../libs/proj4leaflet":53,leaflet:473}],773:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"baiduToWGS84",value:function(e,t){return eviltransform.bd2wgs(e,t)}},{key:"wgs84ToBaidu",value:function(e,t){return eviltransform.wgs2bd(e,t)}},{key:"baiduToGCJ",value:function(e,t){return eviltransform.bd2gcj(e,t)}},{key:"gcjToBaidu",value:function(e,t){return eviltransform.gcj2bd(e,t)}},{key:"gcjToWGS84",value:function(e,t){return eviltransform.gcj2wgs(e,t)}},{key:"wgs84ToGCJ",value:function(e,t){return eviltransform.wgs2gcj(e,t)}}]),e}();n.default=i},{}],774:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=e("../../libs/proj4-src"),o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._sourProjection=e,this._destProjection=t}return r(n,[{key:"setSourProjection",value:function(e){this._sourProjection=e}},{key:"setDestProjection",value:function(e){this._destProjection=e}},{key:"transformForward",value:function(e){return i(this._sourProjection,this._destProjection).forward(e)}},{key:"transfromInverse",value:function(e){return i(this._sourProjection,this._destProjection).inverse(e)}}]),n}();n.default=o},{"../../libs/proj4-src":52}],775:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValid=!1,this._object=null}var t,n;return i(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.default.Common.NetworkTools,n="",!1!==this._isValid){e.next=25;break}if(e.prev=3,""==i){e.next=8;break}n=i,e.next=17;break;case 8:if(o)return e.next=11,t.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"advanced_search.zip","advanced_search.xml");e.next=14;break;case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,t.httpGetAsync(a.default.Common.CommonValues.configFilePath+"advanced_search.xml");case 16:n=e.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),console.log("AdvancedSearchConfig init failed:"+e.t0.toString());case 25:case"end":return e.stop()}},e,this,[[3,22]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(e){return e._id}},{key:"getLayerLabel",value:function(e){return e._label}},{key:"getLayerSourceName",value:function(e){return e._src_name}},{key:"getLayerOnlyKey",value:function(e){return a.default.Map.MapCommon.getKeyFromSourceNameLayerId(e._src_name,e._id)}},{key:"getLayerQueryID",value:function(e){return e._query_id}},{key:"getLayerListFields",value:function(e){return e.list_fields}},{key:"getLayerListFieldsAlias",value:function(e){return e.list_fields_alias}},{key:"getLayerFields",value:function(e){return e.fields}},{key:"getLayerRequestCount",value:function(e){return e._reqcount?e._reqcount:"200"}},{key:"getLayerFieldsAlias",value:function(e){return e.fields_alias}},{key:"getLayerChartField",value:function(e){return e.chart_field}},{key:"getLayerSummaryField",value:function(e){return e.summary_field}},{key:"getLayerExpression",value:function(e){return e.expression}},{key:"getLayerServerType",value:function(e){return e.server_type}},{key:"findLayer",value:function(e,t){for(var n=this.layers(),r=0;r<n.length;++r){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===e&&a===t)return i}return null}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],776:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",coordinates:"",title:"",scalelevel:"",type:"ADD",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/bookmark",type:"post",dataType:"json",data:{coordinates:i.coordinates,title:i.title,scalelevel:i.scalelevel,type:i.type,version:i.version}}},schema:{data:function(e){return console.log("Bookmark add return!"),console.log("Response result: "),console.log(e),r._response=e,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?[].concat(e.result):e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Bookmark add success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Bookmark add error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],777:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",coordinates:"",title:"",type:"del",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/bookmark",type:"post",dataType:"json",data:{coordinates:i.coordinates,title:i.title,type:i.type,id:i.id,version:i.version}}},schema:{data:function(e){return console.log("Bookmark delete return!"),console.log("Response result: "),console.log(e),r._response=e,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Bookmark delete success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Bookmark delete error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],778:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",type:"read",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/bookmark",type:"post",dataType:"json",data:{type:i.type,version:i.version}}},schema:{data:function(e){return console.log("Bookmark query return!"),console.log("Response result: "),console.log(e),r._response=e,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Bookmark query success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Bookmark query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],779:[function(t,n,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=t("../kq"),g=(i=a)&&i.__esModule?i:{default:i};var s={data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:"outer",radius:1e3,version:"2.0"},l=function(){function m(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return o(m,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},s,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=g.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:g.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/buffer",type:"post",dataType:"json",data:{data:i.data,geoSRS:i.geoSRS,outSRS:i.outSRS,sideType:i.sideType,radius:i.radius,version:i.version}}},schema:{data:function(e){return console.log("buffer analysis info return!"),g.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?[e.result]:e.coordinates?e.coordinates:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("buffer analysis success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("buffer analysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}},{key:"_bufferCallback",value:function(t){console.log("_bufferCallback!");var a=t.options.currentElement.target,s=g.default.Control.Manager.getInstance().getControl("draw"),l=(g.default.Common.ThemeManager.getInstance().mainColor(),!!t.is_reserve_graphics&&t.is_reserve_graphics);if(g.default.Control.Waiting.show(),t.buffer_shape_type===g.default.Common.CommonValues.shapeTypes.point){var n=t.options.currentElement.target.toGeoJSON(),o=g.default.Query.BufferAnalysis.getInstance();try{var r={data:JSON.stringify(n.geometry),geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:m._getBufferTypeString(t.point_buffer_type),radius:m._getBufferLength(t.buffer_length,t.buffer_unit)};o.queryAsync(r,function(){if(console.log("query_good"),o.isLastError())return g.default.Control.Notification.getInstance().showError("Error: "+o.errorMsg()),void g.default.Control.Waiting.close();var e=o.data()[0];console.log("buffer analysis data.length:"+e.length);var t=e;console.log(JSON.stringify(t));var n={};a.options.color&&(n.color=a.options.color,n.fill=!0,n.fillColor=a.options.fillColor?a.options.fillColor:a.options.color,n.opacity=a.options.opacity,n.dashArray=a.options.dashArray,n.fillOpacity=a.options.fillOpacity);var r=L.geoJSON(t,{style:n});s.loadFromGeoJSON(r),l||s.removeGeoJSON(a);var i=g.default.Control.Manager.getInstance().getControl("styleeditor");i&&(i.addEditClickEvents(r),i.hideEditor()),g.default.Control.Waiting.close()},function(){console.log("query_error"),g.default.Control.Waiting.close()})}catch(e){g.default.Control.Notification.getInstance().showError("Catch Error: "+e),g.default.Control.Waiting.close()}}else if(t.buffer_shape_type===g.default.Common.CommonValues.shapeTypes.line){var i=a.toGeoJSON(),u=g.default.Query.BufferAnalysis.getInstance();try{var c={data:JSON.stringify(i.geometry),geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:m._getBufferTypeString(t.line_buffer_type),radius:m._getBufferLength(t.buffer_length,t.buffer_unit)};u.queryAsync(c,function(){if(console.log("query_good"),u.isLastError())return g.default.Control.Notification.getInstance().showError("Error: "+u.errorMsg()),void g.default.Control.Waiting.close();var e=u.data()[0];console.log("buffer analysis data.length:"+e.length);var t=e,n=a.options;n.fill=!0,n.fillColor=n.color;var r=L.geoJSON(t,{style:n});s.loadFromGeoJSON(r),l||s.removeGeoJSON(a);var i=g.default.Control.Manager.getInstance().getControl("styleeditor");i&&(i.addEditClickEvents(r),i.hideEditor()),g.default.Control.Waiting.close()},function(){g.default.Control.Notification.getInstance().showError("Catch Error: "+e),g.default.Control.Waiting.close()})}catch(e){console.log("catch error:"+e),g.default.Control.Waiting.close()}}else{var h=void 0;if(a instanceof L.Circle)h=new L.Polygon(g.default.Control.Draw._circleToPolygon(a)).toGeoJSON();else h=a.toGeoJSON();var f=g.default.Query.BufferAnalysis.getInstance();try{var d=void 0;h.geometry?d=h.geometry:h.features&&(d=g.default.Common.CommonTools.geoJsonFCToGC(h));var p={data:JSON.stringify(d),geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:m._getBufferTypeString(t.fill_buffer_type),radius:m._getBufferLength(t.buffer_length,t.buffer_unit)};f.queryAsync(p,function(){if(console.log("query_good"),f.isLastError())return g.default.Control.Notification.getInstance().showError("Error: "+f.errorMsg()),void g.default.Control.Waiting.close();var e=f.data()[0];console.log("buffer analysis data.length:"+e.length);var t=e,n=a.options;if(n.style&&n.style.options&&(n=n.style.options),(!n.color||!n.fillColor)&&a.getLayers){var r=a.getLayers();0<r.length&&(n=r[0].options)}n.fill=!0,n.fillColor=n.fillColor?n.fillColor:n.color;var i=L.geoJSON(t,{style:n});s.loadFromGeoJSON(i),l||s.removeGeoJSON(a);var o=g.default.Control.Manager.getInstance().getControl("styleeditor");o&&(o.addEditClickEvents(i),o.hideEditor()),g.default.Control.Waiting.close()},function(){console.log("query_error"),g.default.Control.Waiting.close()})}catch(e){g.default.Control.Notification.getInstance().showError("Catch Error: "+e),g.default.Control.Waiting.close()}}}}],[{key:"getInstance",value:function(){return m._instance||(m._instance=new m),m._instance}},{key:"_getBufferTypeString",value:function(e){return e===g.default.Common.CommonValues.bufferTypes.outer?"outer":e===g.default.Common.CommonValues.bufferTypes.inner?"inner":e===g.default.Common.CommonValues.bufferTypes.left?"left":e===g.default.Common.CommonValues.bufferTypes.right?"right":"both"}},{key:"_getBufferLength",value:function(e,t){return t===g.default.Common.CommonValues.bufferUnit.km?1e3*e:e}}]),m}();r.default=l},{"../kq":729}],780:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/query",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(e){return s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result.features?e.result.features:[]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("building query success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("building query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],781:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValid=!1,this._object=null}var t,n;return i(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.default.Common.NetworkTools,n="",!1!==this._isValid){e.next=25;break}if(e.prev=3,""==i){e.next=8;break}n=i,e.next=17;break;case 8:if(o)return e.next=11,t.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"building_query.zip","building_query.xml");e.next=14;break;case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,t.httpGetAsync(a.default.Common.CommonValues.configFilePath+"building_query.xml");case 16:n=e.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),console.log("BuildingQueryConfig init failed:"+e.t0.toString());case 25:case"end":return e.stop()}},e,this,[[3,22]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(e){return e._id}},{key:"getLayerSourceName",value:function(e){return e._src_name}},{key:"getLayerBuildingID",value:function(e){return e._building_id}},{key:"getLayerRequestCount",value:function(e){return e._reqcount?e._reqcount:"200"}},{key:"getLayerMaxStdScale",value:function(e){return e._max_stdscale}},{key:"getLayerMinStdScale",value:function(e){return e._min_stdscale}},{key:"getLayerFields",value:function(e){return e.fields}},{key:"getLayerFieldsAlias",value:function(e){return e.fields_alias}},{key:"findAllLayer",value:function(e,t){for(var n=[],r=this.layers(),i=0;i<r.length;i++){var o=r[i],a=this.getLayerID(o),s=this.getLayerSourceName(o);a===e&&s===t&&n.push(o)}return n}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],782:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/difference",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(e){return console.log("Difference analysis info return!"),s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result.features?e.result.features:[]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("difference analysis success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("difference analysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],783:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},i=e("./QueryConfig"),s=(r=i)&&r.__esModule?r:{default:r};var l=function(e){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this))}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"initAsync",this).call(this,t,n,"difference_analysis",r);case 2:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return i._instance||(i._instance=new i),i._instance}}]),i}();n.default=l},{"./QueryConfig":795}],784:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",layerId:"",where:"",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/featuredelete",type:"post",dataType:"json",data:{layerId:i.layerId,where:i.where,version:i.version}}},schema:{data:function(e){return console.log("Feature delete return!"),r._response=e,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?[e.result]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Feature delete success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Feature delete error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],785:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",layerId:"",forceImport:!0,data:"",geoSRS:"EPSG:4326",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/featureimport",type:"post",dataType:"json",data:{layerId:i.layerId,forceImport:i.forceImport,data:i.data,geoSRS:i.geoSRS,outSRS:i.outSRS,version:i.version}}},schema:{data:function(e){return console.log("Feature import return!"),console.log("Response result: "),console.log(e),r._response=e,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Feature import success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Feature import error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],786:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValid=!1,this._object=null}var t,n;return i(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.default.Common.NetworkTools,n="",!1!==this._isValid){e.next=25;break}if(e.prev=3,""==i){e.next=8;break}n=i,e.next=17;break;case 8:if(o)return e.next=11,t.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"feature_import.zip","feature_import.xml");e.next=14;break;case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,t.httpGetAsync(a.default.Common.CommonValues.configFilePath+"feature_import.xml");case 16:n=e.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),console.log("FeatureImportConfig init failed:"+e.t0.toString());case 25:case"end":return e.stop()}},e,this,[[3,22]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(e){return e._id}},{key:"getLayerLabel",value:function(e){return e._label}},{key:"getLayerSourceName",value:function(e){return e._src_name}},{key:"getLayerOnlyKey",value:function(e){return a.default.Map.MapCommon.getKeyFromSourceNameLayerId(e._src_name,e._id)}},{key:"getLayerQueryID",value:function(e){return e._query_id}},{key:"getLayerFields",value:function(e){return e.fields}},{key:"getLayerFilterFields",value:function(e){return e.filter_fields}},{key:"getLayerPrimaryKey",value:function(e){return e.primary_key}},{key:"getLayerRequestCount",value:function(e){return e._reqcount?e._reqcount:"200"}},{key:"getLayerFieldsAlias",value:function(e){return e.fields_alias}},{key:"getLayerFilterFieldsAlias",value:function(e){return e.filter_fields_alias}},{key:"getLayerType",value:function(e){return e._type}},{key:"getLayerGeoType",value:function(e){return e._geo_type}},{key:"findLayer",value:function(e,t){for(var n=this.layers(),r=0;r<n.length;++r){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===e&&a===t)return i}return null}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],787:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",layerId:"",forceImport:!0,data:"",geoSRS:"EPSG:4326",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/featureupdate",type:"post",dataType:"json",data:{layerId:i.layerId,forceImport:i.forceImport,data:i.data,geoSRS:i.geoSRS,version:i.version}}},schema:{data:function(e){return console.log("Feature update return!"),r._response=e,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Feature update success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Feature update error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],788:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/query",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(e){return console.log("query info return!"),s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result.features?e.result.features:[]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("info query success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("info query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],789:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValid=!1,this._object=null}var t,n;return i(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.default.Common.NetworkTools,n="",!1!==this._isValid){e.next=25;break}if(e.prev=3,""==i){e.next=8;break}n=i,e.next=17;break;case 8:if(o)return e.next=11,t.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"info_query.zip","info_query.xml");e.next=14;break;case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,t.httpGetAsync(a.default.Common.CommonValues.configFilePath+"info_query.xml");case 16:n=e.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),console.log("InfoQueryConfig init failed:"+e.t0.toString());case 25:case"end":return e.stop()}},e,this,[[3,22]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(e){return e._id}},{key:"getLayerLabel",value:function(e){return e._label}},{key:"getLayerSourceName",value:function(e){return e._src_name}},{key:"getLayerQueryID",value:function(e){return e._query_id}},{key:"getLayerRequestCount",value:function(e){return e._reqcount?e._reqcount:"200"}},{key:"getLayerMaxStdScale",value:function(e){return e._max_stdscale}},{key:"getLayerMinStdScale",value:function(e){return e._min_stdscale}},{key:"getLayerFields",value:function(e){return e.fields}},{key:"getLayerFieldsAlias",value:function(e){return e.fields_alias}},{key:"getLayerShowName",value:function(e){return e.show_name}},{key:"getLayerExpression",value:function(e){return e.expression}},{key:"findLayer",value:function(e,t){for(var n=this.layers(),r=0;r<n.length;r++){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===e&&a===t)return i}return null}},{key:"findLayerByQueryId",value:function(e,t){for(var n=this.layers(),r=0;r<n.length;r++){var i=n[r],o=this.getLayerQueryID(i),a=this.getLayerSourceName(i);if(o===e&&a===t)return i}return null}},{key:"findAllLayer",value:function(e,t){for(var n=[],r=this.layers(),i=0;i<r.length;i++){var o=r[i],a=this.getLayerID(o),s=this.getLayerSourceName(o);a===e&&s===t&&n.push(o)}return n}},{key:"queryMode",value:function(){return this._isValid&&this._object&&"multi"===this._object.config._query_mode?"multi":"single"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],790:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq");(r=o)&&r.__esModule;var a={url:"",layerId:"",bbox:"",reqcount:200,version:"2.0"},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},a,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/legend",type:"post",dataType:"json",data:{layerId:i.layerId,bbox:i.bbox,reqcount:i.reqcount,version:i.version}}},schema:{data:function(e){return"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result?e.result:[]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return o.read().then(function(){r._dataSource=o,console.log("Legend query success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("Legend query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],791:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=o(e("../kq")),i=o(e("../common/CommonValues"));function o(e){return e&&e.__esModule?e:{default:e}}var u={url:"",layerId:"",origin:"",destation:"",middlepoint:[],barrierpoints:[],avoidareas:null,mode:0,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",querytype:i.default.networkAnalysisTypes.optimal_path},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return r(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},u,e);l.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=r.typeToUrlMethod(i.querytype),a=l.default.Query.QueryIDManager.getInstance().getCurrentID(),s=new kendo.data.DataSource({transport:{read:{url:i.url+"/networkserver/"+o,type:"post",dataType:"json",data:{layerId:i.layerId,origin:i.origin,destination:i.destination,middlepoint:i.middlepoint,barrierpoints:i.barrierpoints,avoidareas:i.avoidareas,mode:i.mode,geoSRS:i.geoSRS,outSRS:i.outSRS}}},schema:{data:function(e){return console.log("routeplan info return!"),l.default.Query.QueryIDManager.getInstance().isIDCanceled(a)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result.paths?e.result.paths:[]:void 0)},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return s.read().then(function(){r._dataSource=s,console.log("NetworkAnalysis success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("NetworkAnalysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}},{key:"typeToUrlMethod",value:function(e){return e==i.default.networkAnalysisTypes.optimal_path?"route":e==i.default.networkAnalysisTypes.trace_back?"traceback":e==i.default.networkAnalysisTypes.traveling_salesman_problem?"tsp":"route"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../common/CommonValues":606,"../kq":729}],792:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/overlap",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(e){return console.log("Overlay analysis info return!"),s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result.features?e.result.features:[]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,console.log("overlay analysis success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("overlay analysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],793:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=(i(e("../kq")),i(e("./QueryConfig")));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this))}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),r(i,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"initAsync",this).call(this,t,n,"overlay_analysis",r);case 1:case"end":return e.stop()}},e,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return i._instance||(i._instance=new i),i._instance}}]),i}();n.default=s},{"../kq":729,"./QueryConfig":795}],794:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=M(e("./InfoQueryConfig")),i=M(e("./AdvancedSearchConfig")),o=M(e("./OverlayAnalysisConfig")),a=M(e("./DifferenceAnalysisConfig")),s=M(e("./InfoQuery")),l=M(e("./OverlayAnalysis")),u=M(e("./FeatureImportConfig")),c=M(e("./BufferAnalysis")),h=M(e("./LegendQuery")),f=M(e("./SqlQuery")),d=M(e("./FeatureImport")),p=M(e("./FeatureUpdate")),m=M(e("./FeatureDelete")),g=M(e("./BookmarkAdd")),y=M(e("./BookmarkDelete")),_=M(e("./BookmarkRead")),v=M(e("./QueryIDManager")),b=M(e("./SummaryAnalysis")),w=M(e("./BuildingQuery")),x=M(e("./BuildingQueryConfig")),k=M(e("./NetworkAnalysis")),L=M(e("./RasterAnalysis")),C=M(e("./SearchBarConfig")),S=M(e("./DifferenceAnalysis"));function M(e){return e&&e.__esModule?e:{default:e}}var P={InfoQueryConfig:r.default,AdvancedSearchConfig:i.default,OverlayAnalysisConfig:o.default,DifferenceAnalysisConfig:a.default,InfoQuery:s.default,OverlayAnalysis:l.default,DifferenceAnalysis:S.default,FeatureImportConfig:u.default,BufferAnalysis:c.default,LegendQuery:h.default,FeatureImport:d.default,FeatureUpdate:p.default,FeatureDelete:m.default,BookmarkAdd:g.default,BookmarkDelete:y.default,BookmarkRead:_.default,SqlQuery:f.default,QueryIDManager:v.default,SummaryAnalysis:b.default,BuildingQuery:w.default,BuildingQueryConfig:x.default,NetworkAnalysis:k.default,RasterAnalysis:L.default,SearchBarConfig:C.default};n.default=P},{"./AdvancedSearchConfig":775,"./BookmarkAdd":776,"./BookmarkDelete":777,"./BookmarkRead":778,"./BufferAnalysis":779,"./BuildingQuery":780,"./BuildingQueryConfig":781,"./DifferenceAnalysis":782,"./DifferenceAnalysisConfig":783,"./FeatureDelete":784,"./FeatureImport":785,"./FeatureImportConfig":786,"./FeatureUpdate":787,"./InfoQuery":788,"./InfoQueryConfig":789,"./LegendQuery":790,"./NetworkAnalysis":791,"./OverlayAnalysis":792,"./OverlayAnalysisConfig":793,"./QueryIDManager":796,"./RasterAnalysis":797,"./SearchBarConfig":798,"./SqlQuery":799,"./SummaryAnalysis":800}],795:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValid=!1,this._object=null}var t,n;return i(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",s=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.default.Common.NetworkTools,n="",!1!==this._isValid){e.next=26;break}if(e.prev=3,""==i){e.next=8;break}n=i,e.next=17;break;case 8:if(o)return e.next=11,t.loadZipFileAsync(l.default.Common.CommonValues.configFilePath+a+".zip",a+".xml");e.next=14;break;case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,t.httpGetAsync(l.default.Common.CommonValues.configFilePath+a+".xml");case 16:n=e.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,s&&s(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),console.log(a+"config file init failed:"+e.t0.toString());case 26:case"end":return e.stop()}},e,this,[[3,23]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"groups",value:function(){return this._isValid&&this._object.config.display&&this._object.config.display.group?[].concat(this._object.config.display.group):[]}},{key:"getGroupChildrenLayers",value:function(e){return e.layer?[].concat(e.layer):[]}},{key:"getLayerID",value:function(e){return e._id}},{key:"getLayerQueryID",value:function(e){return e._query_id}},{key:"getLayerLabel",value:function(e){return e._label}},{key:"getLayerSourceName",value:function(e){return e._src_name}},{key:"getLayerRequestCount",value:function(e){return e._reqcount?e._reqcount:"200"}},{key:"getLayerQueryPrecision",value:function(e){return e._query_precision?e._query_precision:"8"}},{key:"getLayerType",value:function(e){return e.type}},{key:"getLayerFields",value:function(e){return e.fields}},{key:"getLayerFieldsAlias",value:function(e){return e.fields_alias}},{key:"getLayerChartField",value:function(e){return e.chart_field}},{key:"getLayerSummaryField",value:function(e){return e.summary_field}},{key:"getLayerExpression",value:function(e){return e.expression}},{key:"getGroupID",value:function(e){return e._id}},{key:"getGroupName",value:function(e){return e._name}},{key:"findLayer",value:function(e,t){for(var n=this.layers(),r=0;r<n.length;++r){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===e&&a===t)return i}return null}},{key:"findExactLayer",value:function(e,t,n){for(var r=this.layers(),i=0;i<r.length;++i){var o=r[i],a=this.getLayerID(o),s=this.getLayerQueryID(o),l=this.getLayerSourceName(o);if(a===e&&l===n&&s===t)return o}return null}},{key:"findAllLayer",value:function(e,t){for(var n=this.layers(),r=[],i=0;i<n.length;++i){var o=n[i],a=this.getLayerID(o),s=this.getLayerSourceName(o);a===e&&s===t&&r.push(o)}return r}},{key:"findLayerParentGroup",value:function(e,t){for(var n=this.groups(),r=0;r<n.length;++r)for(var i=n[r],o=this.getGroupChildrenLayers(i),a=0;a<o.length;++a){var s=o[a],l=this.getLayerID(s),u=this.getLayerSourceName(s);if(l===e&&u===t)return i}return null}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],796:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var n=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.currentID="",this.canceledIDArray=[]}return t(i,[{key:"toNextID",value:function(){this.currentID=e.uuid()}},{key:"getCurrentID",value:function(){return this.currentID}},{key:"cancelCurrentQuery",value:function(){this.canceledIDArray.push(this.currentID)}},{key:"isIDCanceled",value:function(t){return!!this.canceledIDArray.find(function(e){return e===t})}}],[{key:"getInstance",value:function(){return i._instance||(i._instance=new i),i._instance}},{key:"isDataCanceled",value:function(e){return!(!e||!e.length||1!==e.length||-1!==e[0])}},{key:"isDataArrayCanceled",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e)for(var n=0;n<e.length;n++){var r=e[n];if(t&&(r=r.records),i.isDataCanceled(r))return!0}return!1}}]),i}();r.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],797:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=o(e("../kq")),i=o(e("../common/CommonValues"));function o(e){return e&&e.__esModule?e:{default:e}}var u={url:"",layerId1:"",layerId2:"",type:0,condition:"",querytype:i.default.rasterAnalysisTypes.function},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return r(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},u,e);l.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=r.typeToUrlMethod(i.querytype),a=l.default.Query.QueryIDManager.getInstance().getCurrentID(),s=new kendo.data.DataSource({transport:{read:{url:i.url+"/rasterserver/"+o,type:"post",dataType:"json",data:{layerId1:i.layerId1,layerId2:i.layerId2,type:i.type,condition:i.condition}}},schema:{data:function(e){return console.log("RasterAnalysis info return!"),l.default.Query.QueryIDManager.getInstance().isIDCanceled(a)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result:"")},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return s.read().then(function(){r._dataSource=s,console.log("RasterAnalysis success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("RasterAnalysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}},{key:"typeToUrlMethod",value:function(e){return e==i.default.rasterAnalysisTypes.function?"function":e==i.default.rasterAnalysisTypes.algebra?"algebra":e==i.default.rasterAnalysisTypes.logic?"logic":e==i.default.rasterAnalysisTypes.condition_select?"conditionselect":"function"}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../common/CommonValues":606,"../kq":729}],798:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isValid=!1,this._object=null}var t,n;return i(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function e(){var t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.default.Common.NetworkTools,n="",!1!==this._isValid){e.next=25;break}if(e.prev=3,""==i){e.next=8;break}n=i,e.next=17;break;case 8:if(o)return e.next=11,t.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"search.zip","search.xml");e.next=14;break;case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,t.httpGetAsync(a.default.Common.CommonValues.configFilePath+"search.xml");case 16:n=e.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),console.log("FeatureImportConfig init failed:"+e.t0.toString());case 25:case"end":return e.stop()}},e,this,[[3,22]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerProperty",value:function(e,t){return null!==e?e["_"+t]:null}},{key:"getLayerChildNode",value:function(e,t){return null!==e?e[t]:null}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],799:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq");(r=o)&&r.__esModule;var a={url:"",startindex:0,reqcount:200,sql:"",currentTime:"",version:"2.0"},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},a,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/execute",type:"post",dataType:"json",data:{startindex:i.startindex,reqcount:i.reqcount,sql:i.sql,currentTime:i.currentTime,version:i.version}}},schema:{data:function(e){return console.log(e),"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?e.result.features?e.result.features:[]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return o.read().then(function(){r._dataSource=o,console.log("sql query success!"),t&&t()},function(){r._dataSource=null,r._isLastError=!0,console.log("sql query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":729}],800:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqCount:1e5,geoSRS:"EPSG:4326",areaSRS:"EPSG:4326",geometry:"",groupfields:"",summaryfields:"",summarytypes:"",isOverlap:"true",where:"",version:"2.0"},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(e,[{key:"queryAsync",value:function(e,t,n){var r=this,i=L.extend({},l,e);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/summary",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqCount:i.reqCount,geoSRS:i.geoSRS,areaSRS:i.areaSRS,geometry:i.geometry,groupfields:i.groupfields,summaryfields:i.summaryfields,summarytypes:i.summarytypes,isOverlap:i.isOverlap,where:i.where,version:i.version}}},schema:{data:function(e){return s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===e.resultcode?(r._isLastError=!0,r._errorMsg=e.message,[]):(r._isLastError=!1,r._errorMsg="",e.result?[e.result]:e.features?e.features:[])},errors:function(e){return"success"===e.resultcode?"":e.message}},error:function(e){r._isLastError=!0,r._errorMsg=e.errors,console.log(e.errors)}});return a.read().then(function(){r._dataSource=a,t&&t()},function(){r._dataSource=null,r._isLastError=!0,n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=a},{"../kq":729}],801:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=S(e("./ServiceToolCommon")),i=S(e("./ServiceToolCatalog")),o=S(e("./ServiceToolOverlap")),a=S(e("./ServiceToolDifference")),s=S(e("./ServiceToolProject")),l=S(e("./ServiceToolProjectSystem")),u=S(e("./ServiceToolSymDifference")),c=S(e("./ServiceToolGeometryCheck")),h=S(e("./ServiceToolUnion")),f=S(e("./ServiceToolArea")),d=S(e("./ServiceToolGeometryAttribute")),p=S(e("./ServiceToolExportShp")),m=S(e("./ServiceToolBuffer")),g=S(e("./ServiceToolOperator")),y=S(e("./ServiceToolData")),_=S(e("./ServiceToolAnalysisServerDifference")),v=S(e("./ServiceToolAnalysisServerDifferenceext")),b=S(e("./ServiceToolAnalysisServerOverlap")),w=S(e("./ServiceToolAnalysisServerOverlapext")),x=S(e("./ServiceToolAnalysisServerFields")),k=S(e("./ServiceToolAnalysisServerQuery")),L=S(e("./ServiceToolAnalysisServerSummary")),C=S(e("./ServiceToolAnalysisServerExecute"));function S(e){return e&&e.__esModule?e:{default:e}}var M={ServiceToolCommon:r.default,ServiceToolCatalog:i.default,ServiceToolOverlap:o.default,ServiceToolDifference:a.default,ServiceToolProject:s.default,ServiceToolProjectSystem:l.default,ServiceToolSymDifference:u.default,ServiceToolGeometryCheck:c.default,ServiceToolUnion:h.default,ServiceToolArea:f.default,ServiceToolGeometryAttribute:d.default,ServiceToolExportShp:p.default,ServiceToolBuffer:m.default,ServiceToolOperator:g.default,ServiceToolData:y.default,ServiceToolAnalysisServerDifference:_.default,ServiceToolAnalysisServerDifferenceext:v.default,ServiceToolAnalysisServerOverlap:b.default,ServiceToolAnalysisServerOverlapext:w.default,ServiceToolAnalysisServerFields:x.default,ServiceToolAnalysisServerQuery:k.default,ServiceToolAnalysisServerSummary:L.default,ServiceToolAnalysisServerExecute:C.default};n.default=M},{"./ServiceToolAnalysisServerDifference":802,"./ServiceToolAnalysisServerDifferenceext":803,"./ServiceToolAnalysisServerExecute":804,"./ServiceToolAnalysisServerFields":805,"./ServiceToolAnalysisServerOverlap":806,"./ServiceToolAnalysisServerOverlapext":807,"./ServiceToolAnalysisServerQuery":808,"./ServiceToolAnalysisServerSummary":809,"./ServiceToolArea":810,"./ServiceToolBuffer":811,"./ServiceToolCatalog":812,"./ServiceToolCommon":813,"./ServiceToolData":814,"./ServiceToolDifference":815,"./ServiceToolExportShp":816,"./ServiceToolGeometryAttribute":817,"./ServiceToolGeometryCheck":818,"./ServiceToolOperator":819,"./ServiceToolOverlap":820,"./ServiceToolProject":821,"./ServiceToolProjectSystem":822,"./ServiceToolSymDifference":823,"./ServiceToolUnion":824}],802:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=difference"}var e,t;return i(r,[{key:"getDifferenceResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",geometry:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],803:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=differenceext"}var e,t;return i(r,[{key:"getDifferenceextResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",datasource2:"",geometry:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],804:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=execute"}var e,t;return i(r,[{key:"getExecuteResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",sql:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],805:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=fields"}var e,t;return i(r,[{key:"getFieldsResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],806:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=overlap"}var e,t;return i(r,[{key:"getOverlapResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",geometry:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],807:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=overlapext"}var e,t;return i(r,[{key:"getOverlapextResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",datasource2:"",geometry:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],808:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=query"}var e,t;return i(r,[{key:"getQueryResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",geometry:"",where:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],809:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/analysisserver/proc?request=summary"}var e,t;return i(r,[{key:"getSummaryResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{datasource:"",geometry:"",groupfields:[],summaryfields:[],summarytypes:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],810:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/area"}var e,t;return i(r,[{key:"getAreaResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",areaSRS:"EPSG:4326"},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],811:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/buffer"}var e,t;return i(r,[{key:"getBufferResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:"",radius:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],812:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../kq"),s=(r=i)&&r.__esModule?r:{default:r};function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var o=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:s.default.Common.CommonValues.analysisDefaultOptions.url,port:s.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/CatalogServer/proc"}var t,n,i,o;return a(r,[{key:"getCatalog",value:(o=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetCatalog",dbtype:4,server:"",dbname:"",username:"",password:"",rectOutSRS:"EPSG:4326"},t),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,s.default.Common.NetworkTools.httpGetAsync(r,!1);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getFieldInfo",value:(i=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetFieldInfo",dbtype:4,server:"",dbname:"",username:"",password:"",featureclassname:""},t),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,s.default.Common.NetworkTools.httpGetAsync(r,!1);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getFeatureClass",value:(n=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetFeatureClass",dbtype:4,server:"",dbname:"",username:"",password:"",featureclassname:"",rectOutSRS:"EPSG:4326"},t),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,s.default.Common.NetworkTools.httpGetAsync(r,!1);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getFeature",value:(t=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetFeature",dbtype:4,server:"",dbname:"",username:"",password:"",featureclassname:"",outSRS:"EPSG:4326",geoSRS:"EPSG:4326",reqCount:s.default.ServiceTool.ServiceToolCommon.value_7fffffff,geometry:""},t),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,s.default.Common.NetworkTools.httpGetAsync(r,!1);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),r}();n.default=o},{"../kq":729}],813:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq");(r=o)&&r.__esModule;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"hello",value:function(){console.log("hello ServiceToolCommon!")}}]),e}();a.value_7fffffff=2147483647,n.default=a},{"../kq":729}],814:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,s=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../kq"),u=(r=i)&&r.__esModule?r:{default:r};function l(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url+"/proc"}var n,r,i,o,a,e;return s(t,[{key:"getDatasourceList",value:(e=l(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("读取数据源列表耗时"),t={request:"GetDatasourceList"},n=this.url+u.default.Common.NetworkTools.getParamString(t,this.url),e.next=5,u.default.Common.NetworkTools.httpGetAsync(n);case 5:return r=e.sent,console.timeEnd("读取数据源列表耗时"),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getCatalog",value:(a=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("读取要素集列表耗时"),n=L.extend({},{request:"GetCatalog",datasourceId:t.datasourceId,rectOutSRS:"EPSG:4326"},t),r=this.url+u.default.Common.NetworkTools.getParamString(n,this.url),e.next=5,u.default.Common.NetworkTools.httpGetAsync(r);case 5:return i=e.sent,console.timeEnd("读取要素集列表耗时"),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getFieldInfo",value:(o=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetFieldInfo",datasourceId:1,featureClassName:""},t),r=this.url+u.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,u.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getFeatureClass",value:(i=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetFeatureClass",datasourceId:1,featureClassName:"",rectOutSRS:"EPSG:4326"},t),r=this.url+u.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,u.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getFeature",value:(r=l(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{request:"GetFeature",datasourceId:1,featureClassName:"",geometry:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",reqCount:u.default.ServiceTool.ServiceToolCommon.value_7fffffff},t),r=this.url+u.default.Common.NetworkTools.getParamString(n,this.url),e.next=4,u.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}],[{key:"getDSDataBounds",value:(n=l(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.default.ServiceTool.ServiceToolData(t),e.next=3,n.getFeatureClass(t);case 3:if(r=e.sent,console.log("getDSDataBounds getFeatureClass:"+r),"error"===r)return e.abrupt("return",null);e.next=9;break;case 9:if(e.prev=9,"success"===(i=JSON.parse(r)).resultcode)return o=i.result.rect,a=L.latLng(o[1],o[0]),s=L.latLng(o[3],o[2]),l=L.latLngBounds(a,s),e.abrupt("return",l);e.next=19;break;case 19:return console.log("getData return error:"+i.message),e.abrupt("return",null);case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(9),console.log("parse data failed! data:"+r),e.abrupt("return",null);case 27:case"end":return e.stop()}},e,this,[[9,23]])})),function(e){return n.apply(this,arguments)})}]),t}();n.default=o},{"../kq":729}],815:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/difference"}var e,t;return i(r,[{key:"getDifferenceResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{srcData:"",destData:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],816:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/exportshp"}var e,t;return i(r,[{key:"getExportShpResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",format:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],817:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/GeometryAttribute"}var e,t;return i(r,[{key:"getGeometryAttributeResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{data:"",attributenames:"",geoSRS:"EPSG:4326",areaSRS:"EPSG:4326"},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],818:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/geometrycheck"}var e,t;return i(r,[{key:"getGeometryCheckResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{geometries:"",params:"",geoSRS:"EPSG:4326",areaSRS:"EPSG:4326"},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],819:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/operator"}var e,t;return i(r,[{key:"getOperatorResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{operator:"",geometry1:"",geometry2:"",checkGeo:"true"},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],820:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/overlap"}var e,t;return i(r,[{key:"getOverlapResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{srcData:"",destData:"",geoSRS:"",outSRS:"EPSG:4326",destGeoSRS:"",fields:"",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],821:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/project"}var e,t;return i(r,[{key:"getProjectResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",outSRS:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],822:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/projectsystem"}var e,t;return i(r,[{key:"getProjectResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{prj:"",destType:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],823:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/symdifference"}var e,t;return i(r,[{key:"getSymDifferenceResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{srcData:"",destData:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",tolerance:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],824:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t={url:a.default.Common.CommonValues.analysisDefaultOptions.url,port:a.default.Common.CommonValues.analysisDefaultOptions.port},n=L.extend({},t,e);this.url="http://"+n.url+":"+n.port+"/KQGis/rest/services/geometryserver/union"}var e,t;return i(r,[{key:"getUnionResult",value:(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.extend({},{geometries:"",geoSRS:"EPSG:4326",outSRS:""},t),e.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),t=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function t(e,n){try{var r=s[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})},function(e){return t.apply(this,arguments)})}]),r}();n.default=s},{"../kq":729}],825:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=s(e("leaflet")),a=s(e("./Point"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default.Bounds),r(n,[{key:"extend",value:function(e){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"extend",this).call(this,e),this}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getCenter",this).call(this,e))}},{key:"getBottomLeft",value:function(){return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getBottomLeft",this).call(this))}},{key:"getTopRight",value:function(){return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getBottomLeft",this).call(this))}},{key:"getSize",value:function(){return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getSize",this).call(this))}},{key:"contains",value:function(e){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"contains",this).call(this,e)}},{key:"intersects",value:function(e){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"intersects",this).call(this,e)}},{key:"overlaps",value:function(e){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"overlaps",this).call(this,e)}}]),n}();n.default=l},{"./Point":832,leaflet:473}],826:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,L.DivIcon),t}();n.default=r},{}],827:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,L.Icon),t}();n.default=r},{}],828:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("leaflet"),a=(r=o)&&r.__esModule?r:{default:r};e("../../libs/proj4leaflet");var s=function(e){function r(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default.Proj.ImageOverlay),i(r,[{key:"_initImage",value:function(){var e=this._image=a.default.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));e._loaded=!1,e.onselectstart=a.default.Util.falseFn,e.onmousemove=a.default.Util.falseFn,e.onload=a.default.bind(this.onLoad,this),e.onerror=a.default.bind(this.fire,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),e.src=this._url,e.alt=this.options.alt}},{key:"getContainer",value:function(){var e=".leaflet-"+this.options.pane+"-pane";return $(""+e)[0]}},{key:"onLoad",value:function(){this.fire("load"),this._image._loaded=!0}}]),r}();n.default=s},{"../../libs/proj4leaflet":53,leaflet:473}],829:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var r=function(e){function r(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,L.LatLng),i(r,[{key:"distanceTo",value:function(e){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"distanceTo",this).call(this,e)}}]),r}();n.default=r},{}],830:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.LatLngBounds),r(n,[{key:"getCenter",value:function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getCenter",this).call(this)}}]),n}();n.default=i},{}],831:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.latlng=t.latlng,this.layerPoint=t.layerPoint,this.containerPoint=t.containerPoint,this.originalEvent=t.originalEvent,this.type=t.type,this.target=t.target}},{}],832:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=e("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(e){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.default.Point),i(r,[{key:"add",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"add",this).call(this,e)}},{key:"subtract",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"subtract",this).call(this,e)}},{key:"divideBy",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"divideBy",this).call(this,e)}},{key:"multiplyBy",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"multiplyBy",this).call(this,e)}},{key:"round",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"round",this).call(this)}},{key:"floor",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"floor",this).call(this)}},{key:"ceil",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"ceil",this).call(this)}},{key:"distanceTo",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"distanceTo",this).call(this,e)}},{key:"equals",value:function(e){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"equals",this).call(this,e)}},{key:"toString",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toString",this).call(this)}}]),r}();n.default=l},{leaflet:473}],833:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=h(e("./Point")),i=h(e("./Bounds")),o=h(e("./LatLng")),a=h(e("./LatLngBounds")),s=h(e("./ImageOverlay")),l=h(e("./MouseEvent")),u=h(e("./Icon")),c=h(e("./DivIcon"));function h(e){return e&&e.__esModule?e:{default:e}}var f={Point:r.default,Bounds:i.default,LatLng:o.default,LatLngBounds:a.default,ImageOverlay:s.default,MouseEvent:l.default,Icon:u.default,DivIcon:c.default};n.default=f},{"./Bounds":825,"./DivIcon":826,"./Icon":827,"./ImageOverlay":828,"./LatLng":829,"./LatLngBounds":830,"./MouseEvent":831,"./Point":832}],834:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={enable:!0,placeholder:"",filter:"contains",dataSource:{data:[]},change:function(e){console.log("Value of auto complete has changed!")},dataBound:function(e){console.log("Auto complete has received data!")}},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoAutoComplete(n),this._autoComplete=$("#"+e).data("kendoAutoComplete")}return i(r,[{key:"enable",value:function(e){this._autoComplete.enable(e)}},{key:"focus",value:function(){this._autoComplete.focus()}},{key:"setDataSource",value:function(e){var t=new kendo.data.DataSource({data:e});this._autoComplete.setDataSource(t)}},{key:"value",value:function(e){return this._autoComplete.value(e)}}]),r}();n.default=r},{}],835:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={enable:!0,icon:"",imageUrl:"",spriteCssClass:"",click:function(e){console.log("button clicked!")}},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoButton(n),this._button=$("#"+e).data("kendoButton")}return i(r,[{key:"enable",value:function(e){this._button.enable(e)}}]),r}();n.default=r},{}],836:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={renderAs:"canvas",series:[{field:"value",type:"pie"}]};n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=L.extend({},i,n);$("#"+t).kendoChart(r),this._chart=$("#"+t).data("kendoChart")}},{}],837:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a={label:"",name:"",value:"",enable:!0,checked:!1},i=function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=this;n._id=e,n._options=L.extend({},a,t);var r="<input type='checkbox' class='k-checkbox' id='"+e+"'>",i="<label class='k-checkbox-label' for='"+e+"'>"+n._options.label+"</label>";$("#"+e).replaceWith($(r)),$("#"+e).after($(i)),n.name(n._options.name),n.value(n._options.value),n.enable(n._options.enable),n.checked(n._options.checked)}return r(o,[{key:"name",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("name");$("#"+this._id).attr("name",e)}},{key:"value",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).attr("value");$("#"+this._id).attr("value",e)}},{key:"enable",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return!$("#"+this._id).prop("disabled");$("#"+this._id).prop("disabled",!e)}},{key:"checked",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("checked");$("#"+this._id).prop("checked",e)}}]),o}();n.default=i},{}],838:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={text:"",index:0,dataSource:{data:[]},change:function(e){console.log("value changed!")},select:function(e){}},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoDropDownList(n),this._dropdownList=$("#"+e).data("kendoDropDownList")}return i(r,[{key:"enable",value:function(e){this._dropdownList.enable(e)}},{key:"value",value:function(e){return this._dropdownList.value(e)}},{key:"readonly",value:function(e){this._dropdownList.readOnly(e)}},{key:"setDataSource",value:function(e){var t=new kendo.data.DataSource({data:e});this._dropdownList.setDataSource(t)}}]),r}();n.default=r},{}],839:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoGrid(n),this._grid=$("#"+e).data("kendoGrid")}return i(r,[{key:"select",value:function(e){return this._grid.select(e)}},{key:"clearSelection",value:function(){this._grid.clearSelection()}},{key:"dataItem",value:function(e){return this._grid.dataItem(e)}},{key:"items",value:function(){return this._grid.items()}},{key:"setDataSource",value:function(e){return this._grid.setOptions({dataSource:e})}},{key:"setOptions",value:function(e){this._grid.setOptions(e)}}]),r}();n.default=r},{}],840:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var a=function(e){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this)),r=n;r._id=e,r._options=t||{},r._createWindow(),r._createGrid();var i=s.default.Map.MapConfig.getInstance().getMapBuilder_fileServerUrl();return $(r._id+" .layer-data-upload").kendoUpload({async:{saveUrl:i+"/sliceFileUpload?chunkSize=10485760",removeUrl:"remove",autoUpload:!1,chunkSize:10485760},multiple:!1,template:kendo.template(n._uploadTemplate()),localization:{select:"文件上传",headerStatusUploading:"上传中",headerStatusUploaded:"上传完成"}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,L.Evented),i(o,[{key:"_createWindow",value:function(){var e=this;$(e._id).kendoWindow({width:700,height:570,content:{template:"<div class='layer-data-download'></div><input type='file' name='files' class='layer-data-upload'/>"},open:function(){e._refreshData()}}).data("kendoWindow").wrapper.find(".k-window-title").html('<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">工程加载</span>')}},{key:"_createGrid",value:function(){var n=this;$(n._id+" .layer-data-download").kendoGrid({height:300,toolbar:[{template:kendo.template('<button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>')}],columns:[{field:"name",title:"名称"},{field:"modify_time",title:"修改时间"},{field:"type",title:"类型"},{field:"size",title:"大小"},{command:{text:"加载",click:function(e){var t=this.dataItem($(e.currentTarget).closest("tr"));n.fire("load",{url:t.download_url,name:t.name})}},title:" ",width:"90px"}]}).data("kendoGrid"),$(n._id+" .layer-data-download .refresh-data").kendoButton({click:function(){n._refreshData()}})}},{key:"_loadData",value:function(e){var t=this.dataItem($(e.currentTarget).closest("tr"));this.fire("load",{url:t.download_url})}},{key:"_refreshData",value:function(){var a=this,e=s.default.Map.MapConfig.getInstance().getMapBuilder_fileServerUrl();$.ajax({type:"POST",url:e+"/getFilesList",success:function(e){var t=[],n=a._options.filter;if("success"===e.result)for(var r=0;r<e.list.length;++r){var i=e.list[r],o=new RegExp(i.FILE_TYPE,"i");(!n||n&&-1!=n.search(o))&&t.push({name:i.FILE_NAME,modify_time:i.UPLOAD_END_TIME,type:i.FILE_TYPE,size:a._formatFileSize(i.FILE_SIZE),download_url:i.downloadPath})}console.log("@@@@@@@files list: ",t),$(a._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:t}))}})}},{key:"_formatFileSize",value:function(e){return(Math.ceil(e/1024)||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+" KB"}},{key:"_uploadTemplate",value:function(){return"\n        <div class=\"layer-data-upload-template\">\n            <span class='k-progress'></span>\n            <div class='file-wrapper'>\n                <span class='file-icon'></span> \n                <h4 class='file-heading file-name-heading'>Name: #=name#</h4>\n                <h4 class='file-heading file-size-heading'>Size: #=size# bytes</h4>\n                <strong class=\"k-upload-status\">\n                    <button type='button' class='k-upload-action'></button>\n                    <button type='button' class='k-upload-action'></button>\n                </strong>\n            </div>\n        </div>"}}]),o}();n.default=a},{"../kq":729}],841:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={selectable:!0,dataSource:{data:[]},template:"<div>#:name#</div>",change:function(e){console.log("list view selection changed!")},dataBound:function(e){console.log("list view has received data!")}},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoListView(n),this._listView=$("#"+e).data("kendoListView")}return i(r,[{key:"dataItems",value:function(){return this._listView.dataItems()}},{key:"select",value:function(e){return this._listView.select(e)}},{key:"selectFirstItem",value:function(){this._listView.select(this._listView.element.children().first())}},{key:"dataItem",value:function(e){return this._listView.dataItem(e)}},{key:"setDataSource",value:function(e){var t=new kendo.data.DataSource({data:e});this._listView.setDataSource(t)}}]),r}();n.default=r},{}],842:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={mask:"",value:"",change:function(e){console.log("value changed!")}},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoMaskedTextBox(n),this._maskedTextBox=$("#"+e).data("kendoMaskedTextBox")}return i(r,[{key:"enable",value:function(e){this._maskedTextBox.enable(e)}},{key:"readonly",value:function(e){this._maskedTextBox.readOnly(e)}},{key:"value",value:function(e){return this._maskedTextBox.value(e)}}]),r}();n.default=r},{}],843:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoPanelBar(n),this._panelbar=$("#"+e).data("kendoPanelBar")}return i(r,[{key:"clearSelection",value:function(){return this._panelbar.clearSelection()}},{key:"collapse",value:function(e){return this._panelbar.collapse(e)}},{key:"expand",value:function(e){return this._panelbar.expand(e)}},{key:"enable",value:function(e,t){this._panelbar.enable(e,t)}},{key:"select",value:function(e){if(!e)return this._panelbar.select();this._panelbar.select(e)}},{key:"dataItem",value:function(e){var t=$(e).closest(".k-panelbar"),n=this._panelbar.options.dataSource,r=$(e).parentsUntil(t,".k-item").map(function(){return $(this).index()}).get().reverse();r.push($(e).index());for(var i=-1,o=r.length;++i<o;)n=n[r[i]],n=i<o-1?n.items:n;return n}}]),r}();n.default=r},{}],844:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a={label:"",name:"",value:"",enable:!0,checked:!1},i=function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=this;n._id=e,n._options=L.extend({},a,t);var r="<input type='radio' class='k-radio' id='"+e+"'>",i="<label class='k-radio-label' for='"+e+"'>"+n._options.label+"</label>";$("#"+e).replaceWith($(r)),$("#"+e).after($(i)),n.name(n._options.name),n.value(n._options.value),n.enable(n._options.enable),n.checked(n._options.checked)}return r(o,[{key:"name",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("name");$("#"+this._id).attr("name",e)}},{key:"value",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).attr("value");$("#"+this._id).attr("value",e)}},{key:"enable",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return!$("#"+this._id).prop("disabled");$("#"+this._id).prop("disabled",!e)}},{key:"checked",value:function(e){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("checked");$("#"+this._id).prop("checked",e)}}]),o}();n.default=i},{}],845:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoTabStrip(n),this._tabStrip=$("#"+e).data("kendoTabStrip"),console.log(" this._tabStrip "+this._tabStrip)}return i(r,[{key:"select",value:function(e){return this._tabStrip.select(e)}}]),r}();n.default=r},{}],846:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._id=e,$("#"+e).addClass("k-textbox")}return r(t,[{key:"value",value:function(e){return void 0===e?$("#"+this._id).val():$("#"+this._id).val(e)}}]),t}();n.default=i},{}],847:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o={},r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,t);$("#"+e).kendoTreeList(n),this._treeList=$("#"+e).data("kendoTreeList")}return i(r,[{key:"select",value:function(e){return this._treeList.select(e)}},{key:"clearSelection",value:function(){this._treeList.clearSelection()}},{key:"expand",value:function(e){return this._treeList.expand(e)}},{key:"collapse",value:function(e){this._treeList.collapse(e)}},{key:"dataItem",value:function(e){return this._treeList.dataItem(e)}},{key:"items",value:function(){return this._treeList.items()}},{key:"setDataSource",value:function(e){return this._treeList.setDataSource(e)}}]),r}();n.default=r},{}],848:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./TreeViewNode"),a=(r=o)&&r.__esModule?r:{default:r};var s=e("leaflet"),l={},u=function(e){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this)),r=n,i=s.extend({},l,t);return r._container=e,$("#"+r._container).fancytree(i),$("#"+r._container).fancytree({ajax:{debugDelay:1e3},lazyLoad:function(e,t){r._subItemLazyLoadFn?t.result=$.Deferred(function(e){setTimeout(function(){e.resolve(r._subItemLazyLoadFn(t.node))},1e3)}):t.result=[]}}),$("#"+r._container).on("fancytreeclick",function(e,t){r.fire("click",{event:e,data:t})}),$("#"+r._container).on("fancytreeselect",function(e,t){r.fire("select",{event:e,data:t})}),r._tree=$("#"+r._container).fancytree("getTree"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,s.Evented),i(o,[{key:"clear",value:function(){this._tree.clear()}},{key:"activeNode",value:function(e){return this._tree.activateKey(e)}},{key:"count",value:function(){return this._tree.count()}},{key:"getNodeByKey",value:function(e){return new a.default(this._tree.getNodeByKey(e))}},{key:"visit",value:function(e){return this._tree.visit(e)}},{key:"reload",value:function(e){return this._tree.reload(e)}},{key:"subItemsLazyLoadFn",value:function(e){this._subItemLazyLoadFn=e}}]),o}();n.default=u},{"./TreeViewNode":849,leaflet:473}],849:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this._node=e}return r(t,[{key:"isExpanded",value:function(){return this._node.isExpanded()}},{key:"isFolder",value:function(){return this._node.isFolder()}},{key:"isSelected",value:function(){return this._node.isSelected()}},{key:"setExpanded",value:function(e){return this._node.setExpanded(e)}},{key:"setSelected",value:function(e){return this._node.setSelected(e)}},{key:"setTitle",value:function(e){return this._node.setTitle(e)}}]),t}();n.default=i},{}],850:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=v(e("./Button")),i=v(e("./AutoComplete")),o=v(e("./MaskedTextBox")),a=v(e("./DropdownList")),s=v(e("./Checkbox")),l=v(e("./ListView")),u=v(e("./RadioButton")),c=v(e("./TextArea")),h=v(e("./TreeList")),f=v(e("./Grid")),d=v(e("./TreeView")),p=v(e("./TreeViewNode")),m=v(e("./Chart")),g=v(e("./TabStrip")),y=v(e("./PanelBar")),_=v(e("./LayerDataLoadDialog"));function v(e){return e&&e.__esModule?e:{default:e}}var b={Button:r.default,AutoComplete:i.default,MaskedTextBox:o.default,DropdownList:a.default,Checkbox:s.default,ListView:l.default,RadioButton:u.default,TextArea:c.default,TreeList:h.default,Grid:f.default,TreeView:d.default,TreeViewNode:p.default,Chart:m.default,TabStrip:g.default,PanelBar:y.default,LayerDataLoadDialog:_.default};n.default=b},{"./AutoComplete":834,"./Button":835,"./Chart":836,"./Checkbox":837,"./DropdownList":838,"./Grid":839,"./LayerDataLoadDialog":840,"./ListView":841,"./MaskedTextBox":842,"./PanelBar":843,"./RadioButton":844,"./TabStrip":845,"./TextArea":846,"./TreeList":847,"./TreeView":848,"./TreeViewNode":849}],851:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Circle),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLng",value:function(){return this.getLatLng()}}]),n}();n.default=i},{}],852:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Polygon),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLngs",value:function(){return this.getLatLngs()}},{key:"getCenter",value:function(){return this.getCenter()}},{key:"getBounds",value:function(){return this.getBounds()}}]),n}();n.default=i},{}],853:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Polyline),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLngs",value:function(){return this.getLatLngs()}},{key:"getCenter",value:function(){return this.getCenter()}},{key:"getBounds",value:function(){return this.getBounds()}}]),n}();n.default=i},{}],854:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,L.Rectangle),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLngs",value:function(){return this.getLatLngs()}},{key:"getCenter",value:function(){return this.getCenter()}},{key:"getBounds",value:function(){return this.getBounds()}}]),n}();n.default=i},{}],855:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=s(e("./Polyline")),i=s(e("./Polygon")),o=s(e("./Rectangle")),a=s(e("./Circle"));function s(e){return e&&e.__esModule?e:{default:e}}var l={Polyline:r.default,Polygon:i.default,Rectangle:o.default,Circle:a.default};n.default=l},{"./Circle":851,"./Polygon":852,"./Polyline":853,"./Rectangle":854}]},{},[729]),function o(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){L.Control.StyleEditor=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft",enabled:!1,colorRamp:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],markerApi:"../../images/markers/",markers:["circle-stroked","circle","square-stroked","square","triangle-stroked","triangle","star-stroked","star","cross","marker-stroked","marker","religious-jewish","religious-christian","religious-muslim","cemetery","rocket","airport","heliport","rail","rail-metro","rail-light","bus","fuel","parking","parking-garage","airfield","roadblock","ferry","harbor","bicycle","park","park2","museum","lodging","monument","zoo","garden","campsite","theatre","art-gallery","pitch","soccer","america-football","tennis","basketball","baseball","golf","swimming","cricket","skiing","school","college","library","post","fire-station","town-hall","police","prison","embassy","beer","restaurant","cafe","shop","fast-food","bar","bank","grocery","cinema","pharmacy","hospital","danger","industrial","warehouse","commercial","building","place-of-worship","alcohol-shop","logging","oil-well","slaughterhouse","dam","water","wetland","disability","telephone","emergency-telephone","toilets","waste-basket","music","land-use","city","town","village","farm","bakery","dog-park","lighthouse","clothing-store","polling-place","playground","entrance","heart","london-underground","minefield","rail-underground","rail-above","camera","laundry","car","suitcase","hairdresser","chemist","mobilephone","scooter"],editlayers:[],layerGroups:[],openOnLeafletDraw:!0,showTooltip:!0,strings:{tooltip:"Click on the element you want to style",tooltipNext:"Choose another element you want to style"},useGrouping:!0,styleForm:void 0,tooltipCallback:function(e){e.options.tooltipWrapper||(e.options.tooltipWrapper=L.DomUtil.create("div","leaflet-styleeditor-tooltip-wrapper",document.body)),e.options.tooltip||(e.options.tooltip=L.DomUtil.create("div","leaflet-styleeditor-tooltip",e.options.tooltipWrapper)),e.options.tooltip.innerHTML=L.styleEditorLocal.tooltip},errorCallback:function(e){console.log("error:"+e)},bufferCallback:function(e){console.log("buffer!")}},onAdd:function(e){return this.options.map=e,this.createUi()},createUi:function(){var e="";L.Browser.touch&&(e=" leaflet-touch");var t=this.options.controlDiv=L.DomUtil.create("div","leaflet-control-styleeditor"+e);(this.options.controlUI=L.DomUtil.create("div","leaflet-control-styleeditor-interior"+e,t)).title=L.styleEditorLocal.buttonTitle;var n=this.options.styleEditorDiv=L.DomUtil.create("div","leaflet-styleeditor",this.options.map._container);this.options.styleEditorHeader=L.DomUtil.create("div","leaflet-styleeditor-header",n);var r=L.DomUtil.create("div","leaflet-styleeditor-interior",n);n.style.zIndex=1e4;var i={};i.iconDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.markerColorDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.sizeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.colorDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.opacityDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.lineStrokeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.fillColorDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.fillOpacityDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.pointBufferTypeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.lineBufferTypeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.fillBufferTypeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.bufferDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r);return this.options.styleEditorUi=i,this.addDomEvents(),this.addLeafletDrawEvents(),this.addButtons(),this.options.styleForm=new L.StyleForms({colorRamp:this.options.colorRamp,styleEditorUi:i,styleEditorDiv:n,markerApi:this.options.markerApi,markers:this.options.markers,map:this.options.map,errorCallback:this.options.errorCallback,bufferCallback:this.options.bufferCallback,is_use_marker_icon:this.options.is_use_marker_icon}),t},addDomEvents:function(){L.DomEvent.addListener(this.options.controlDiv,"click",function(e){this.clickHandler(e),e.stopPropagation()},this),L.DomEvent.addListener(this.options.controlDiv,"dblclick",function(e){e.stopPropagation()},this),L.DomEvent.addListener(this.options.styleEditorDiv,"click",L.DomEvent.stopPropagation),L.DomEvent.addListener(this.options.styleEditorDiv,"mouseenter",this.disableLeafletActions,this),L.DomEvent.addListener(this.options.styleEditorDiv,"mouseleave",this.enableLeafletActions,this),L.DomEvent.addListener(this.options.controlUI,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.options.controlUI,"mousedown",L.DomEvent.stop)},addLeafletDrawEvents:function(){this.options.openOnLeafletDraw&&L.Control.Draw},addButtons:function(){var e=L.DomUtil.create("button","leaflet-styleeditor-button styleeditor-nextBtn",this.options.styleEditorHeader);e.title=L.styleEditorLocal.tooltipNext,L.DomEvent.addListener(e,"click",function(e){this.hideEditor(),L.DomUtil.hasClass(this.options.controlUI,"enabled")&&this.createTooltip(),e.stopPropagation()},this)},clickHandler:function(e){this.options.enabled=!this.options.enabled,this.options.enabled?(this.enable(),this.fire("enabled",{})):(L.DomUtil.removeClass(this.options.controlUI,"enabled"),this.disable())},disableLeafletActions:function(){var e=this.options.map;e.dragging.disable(),e.touchZoom.disable(),e.doubleClickZoom.disable(),e.scrollWheelZoom.disable(),e.boxZoom.disable(),e.keyboard.disable()},enableLeafletActions:function(){var e=this.options.map;e.dragging.enable(),e.touchZoom.enable(),e.doubleClickZoom.enable(),e.scrollWheelZoom.enable(),e.boxZoom.enable(),e.keyboard.enable()},enable:function(){L.DomUtil.addClass(this.options.controlUI,"enabled"),this.options.map.eachLayer(this.addEditClickEvents,this),this.createTooltip()},disable:function(){this.options.editlayers.forEach(this.removeEditClickEvents,this),this.options.editlayers=[],this.options.layerGroups=[],this.hideEditor(),this.removeTooltip()},addEditClickEvents:function(e){if(this.options.useGrouping&&e instanceof L.LayerGroup)this.options.layerGroups.push(e);else if(e instanceof L.Marker||e instanceof L.Path||e instanceof L.GeoJSON){var t=e.on("click",this.initChangeStyle,this);this.options.editlayers.push(t)}},removeEditClickEvents:function(e){e.off("click",this.initChangeStyle,this)},hideEditor:function(){L.DomUtil.removeClass(this.options.styleEditorDiv,"editor-enabled")},showEditor:function(){var e=this.options.styleEditorDiv;L.DomUtil.hasClass(e,"editor-enabled")||L.DomUtil.addClass(e,"editor-enabled")},initChangeStyle:function(e){this.options.currentElement=this.options.useGrouping?this.getMatchingElement(e):e,this.showEditor(),this.removeTooltip(),e.target instanceof L.Marker?this.showMarkerForm():this.showGeometryForm()},showGeometryForm:function(){this.options.styleForm.showGeometryForm(this.options.currentElement)},showMarkerForm:function(){this.options.styleForm.showMarkerForm(this.options.currentElement)},createTooltip:function(){this.options.showTooltip&&this.options.tooltipCallback(this)},getMatchingElement:function(e){var n=null,t=e.target;for(i=0;i<this.options.layerGroups.length;++i)if((n=this.options.layerGroups[i])&&t!=n&&n.hasLayer(t))return n.options&&n.options.opacity||(n.options=t.options,t.setIcon&&(n.setIcon=function(t){n.eachLayer(function(e){e instanceof L.Marker&&e.setIcon(t)})})),this.getMatchingElement({target:n});return e},removeTooltip:function(){this.options.tooltip&&this.options.tooltip.parentNode&&(this.options.tooltip.remove(),this.options.tooltip=void 0)},isEnabled:function(){return this.options.enabled}}),L.control.styleEditor=function(e){return new L.Control.StyleEditor(e)}},{}],2:[function(e,t,n){L.StyleForms=L.Class.extend({options:{currentMarkerStyle:{size:"m",color:"3498db"}},initialize:function(e){L.setOptions(this,e),this.createIconUrl(),this.createMarkerColor(),this.createMarkerSize(),this.createColor(),this.createOpacity(),this.createStroke(),this.createFillColor(),this.createFillOpacity(),this.createPointBufferType(),this.createLineBufferType(),this.createFillBufferType(),this.createBuffer(),this.addDOMEvents()},addDOMEvents:function(){L.DomEvent.addListener(this.options.map,"click",this.hideSelectInput,this),L.DomEvent.addListener(this.options.styleEditorDiv,"click",this.hideSelectInput,this)},clearForm:function(){var n=this.options.styleEditorUi;this.hideSelectInput(),Object.keys(n).forEach(function(e){var t=n[e];t.innerHTML&&this.hideElement(t)},this)},showGeometryForm:function(e){this.clearForm(),this.options.currentElement=e;var t=this.options.styleEditorUi,n=e.target.options;n.opacity?t.opacityInput.value=n.opacity:t.opacityInput.value=1,n.fillOpacity?t.fillOpacityInput.value=n.fillOpacity:t.fillOpacityInput.value=.2,this.showElement(t.colorDiv),this.showElement(t.opacityDiv),this.showElement(t.lineStrokeDiv);var r=e.target,i=!!r.options.isPlot;r instanceof L.Polygon||r instanceof L.LayerGroup||r instanceof L.Circle||r instanceof L.CircleMarker?(this.showElement(t.fillColorDiv),this.showElement(t.fillOpacityDiv),r instanceof L.Polygon||r instanceof L.LayerGroup||r instanceof L.Circle&&!(r instanceof L.Marker)?i||this.showElement(t.fillBufferTypeDiv):i||this.showElement(t.pointBufferTypeDiv)):r instanceof L.Polyline&&(i||this.showElement(t.lineBufferTypeDiv)),i||this.showElement(t.bufferDiv)},showMarkerForm:function(e){this.clearForm();var t=(this.options.currentElement=e).target.options.icon.options,n=this.options.currentMarkerStyle;t.iconColor&&(n.color=t.iconColor),t.icon&&(n.icon=t.icon),t.iconSizeChar&&(n.size=t.iconSizeChar);var r=this.options.styleEditorUi;this.options.is_use_marker_icon&&(this.showElement(r.iconDiv),this.showElement(r.markerColorDiv),this.showElement(r.sizeDiv),this.styleSelectInput()),this.showElement(r.pointBufferTypeDiv),this.showElement(r.bufferDiv)},setNewMarker:function(){var e=this.options.currentMarkerStyle;if(e.size&&e.icon&&e.color){var t;switch(e.size){case"s":t=[20,50];break;case"m":t=[30,70];break;case"l":t=[35,90]}var n=new L.Icon({iconUrl:this.getIconSrc(),iconSize:t,iconSizeChar:e.size,iconColor:e.color,icon:e.icon,iconAnchor:[t[0]/2,t[1]/2],popupAnchor:[0,-t[1]/2]}),r=this.options.currentElement.target;r.setIcon(n),this.fireChangeEvent(r)}this.hideSelectInput(),this.styleSelectInput()},showElement:function(e){e&&L.DomUtil.removeClass(e,"leaflet-styleeditor-hidden")},hideElement:function(e){e&&L.DomUtil.addClass(e,"leaflet-styleeditor-hidden")},createIconUrl:function(){var e=this.options.styleEditorUi.iconDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.icon,this.createSelectInput(e,function(e){var t=e.target.getAttribute("value");this.options.selectBoxImage.setAttribute("value",t),this.options.currentMarkerStyle.icon=t,this.setNewMarker()}.bind(this),this.options.markers)},createMarkerColor:function(){var e=this.options.styleEditorUi.markerColorDiv,t=this.options.colorUi=L.DomUtil.create("div","leaflet-styleeditor-ui-element",e);L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.color,this.createColorPicker(e,function(e){var t=this.rgbToHex(e.target.style.backgroundColor);this.options.currentMarkerStyle.color=t.replace("#",""),this.setNewMarker()}.bind(this))},createMarkerSize:function(){var e=this.options.styleEditorUi.sizeDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.size;var t=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-small",this.options.styleEditorUi.sizeDiv),n=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-medium",this.options.styleEditorUi.sizeDiv),r=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-large",this.options.styleEditorUi.sizeDiv);L.DomEvent.addListener(t,"click",function(){this.options.currentMarkerStyle.size="s",this.setNewMarker()},this),L.DomEvent.addListener(n,"click",function(){this.options.currentMarkerStyle.size="m",this.setNewMarker()},this),L.DomEvent.addListener(r,"click",function(){this.options.currentMarkerStyle.size="l",this.setNewMarker()},this)},createColor:function(){var e=this.options.styleEditorUi.colorDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.color,this.createColorPicker(e,function(e){var t=this.rgbToHex(e.target.style.backgroundColor);this.setStyle("color",t)}.bind(this))},createStroke:function(){var e=this.options.styleEditorUi.lineStrokeDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.lineStroke;var t=L.DomUtil.create("div","leaflet-styleeditor-stroke",e);t.style.backgroundPosition="0px -75px";var n=L.DomUtil.create("div","leaflet-styleeditor-stroke",e);n.style.backgroundPosition="0px -95px";var r=L.DomUtil.create("div","leaflet-styleeditor-stroke",e);r.style.backgroundPosition="0px -115px",L.DomEvent.addListener(t,"click",function(e){this.setStyle("dashArray","1")},this),L.DomEvent.addListener(n,"click",function(e){this.setStyle("dashArray","10,10")},this),L.DomEvent.addListener(r,"click",function(e){this.setStyle("dashArray","15, 10, 1, 10")},this)},createOpacity:function(){var e=this.options.styleEditorUi.opacityDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.opacity,this.options.styleEditorUi.opacityInput=this.createNumberInput(e,function(e){var t=e.target.value;this.setStyle("opacity",t)}.bind(this),.7,0,1,.1)},createFillColor:function(){var e=this.options.styleEditorUi.fillColorDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.fillColor,this.createColorPicker(e,function(e){var t=this.rgbToHex(e.target.style.backgroundColor);this.setStyle("fillColor",t)}.bind(this))},createFillOpacity:function(){var e=this.options.styleEditorUi.fillOpacityDiv;L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.fillOpacity,this.options.styleEditorUi.fillOpacityInput=this.createNumberInput(e,function(e){var t=e.target.value;this.setStyle("fillOpacity",t)}.bind(this),.4,0,1,.1)},createColorPicker:function(e,n){var r=L.DomUtil.create("div","leaflet-styleeditor-colorpicker",e);return this.options.colorRamp.forEach(function(e){var t=L.DomUtil.create("div","leaflet-styleeditor-color",r);t.style.backgroundColor=e,L.DomEvent.addListener(t,"click",function(e){e.stopPropagation(),n(e)})},this),r},createNumberInput:function(e,t,n,r,i,o){var a=L.DomUtil.create("input","leaflet-styleeditor-input",e);return a.setAttribute("type","number"),a.setAttribute("value",n),a.setAttribute("min",r),a.setAttribute("max",i),a.setAttribute("step",o),L.DomEvent.addListener(a,"change",function(e){e.stopPropagation(),t(e)}),L.DomEvent.addListener(a,"keyup",function(e){e.stopPropagation(),t(e)}),a},createSelectInput:function(e,n,t){var r=L.DomUtil.create("button","leaflet-styleeditor-select leaflet-styleeditor-select-marker",e),i=this.options.selectBoxImage=L.DomUtil.create("img","leaflet-styleeditor-select-image",r),o=this.options.selectOptionWrapper=L.DomUtil.create("ul","leaflet-styleeditor-select-option-wrapper leaflet-styleeditor-hidden",e);return o.id="leaflet-styleeditor-select-option-wrapper",L.DomEvent.addListener(r,"click",this.toggleSelectInput,this),L.DomEvent.addListener(i,"click",this.toggleSelectInput,this),this.options.selectImages=[],t.forEach(function(e){var t=L.DomUtil.create("li","leaflet-styleeditor-select-option",o),n=L.DomUtil.create("img","leaflet-styleeditor-select-option-image",t);n.setAttribute("value",e),this.options.selectImages.push(n)},this),L.DomEvent.addListener(o,"click",function(e){if(e.stopPropagation(),"UL"!==e.target.nodeName){var t=e.target;"LI"===e.target.nodeName&&(t=e.target.childNodes[0]),n({target:t})}},this),r},styleSelectInput:function(){var e=this.options.selectBoxImage;if(this.options.currentElement){var t=this.options.currentElement.target.options.icon.options.icon;t?(e.src=this.getIconSrc("s",t),this.showElement(e)):this.hideElement(e)}else this.hideElement(e);this.options.selectImages.forEach(function(e){e.src=this.getIconSrc("s",e.getAttribute("value"))},this),this.hideSelectInput()},toggleSelectInput:function(e){L.DomEvent.stopPropagation(e);var t=this.options.selectOptionWrapper;L.DomUtil.hasClass(t,"leaflet-styleeditor-hidden")?this.showElement(t):this.hideElement(t)},hideSelectInput:function(e){if(!(e&&e.target&&e.target.tagName&&L.DomUtil.hasClass(e.target,"leaflet-styleeditor-select"))){var t=this.options.selectOptionWrapper;t||(t=L.DomUtil.get("leaflet-styleeditor-select-option-wrapper")),this.hideElement(t)}},getIconSrc:function(e,t){var n=this.options.currentMarkerStyle;return t||(t=n.icon),e||(e=n.size),this.options.markerApi+e+"/pin-"+e+"-"+t+"+"+n.color+"@2x.png"},setStyle:function(e,t){var n={};n[e]=t;var r=this.options.currentElement.target;if(r.setStyle(n),this.fireChangeEvent(r),r.getLayers){var i=r.getLayers();0<i.length&&(r.options=JSON.parse(JSON.stringify(i[0].options)),delete r.options)}},fireChangeEvent:function(e){this.options.map.fireEvent("styleeditor:changed",e)},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},rgbToHex:function(e){return e=e.substring(4).replace(")","").split(","),"#"+this.componentToHex(parseInt(e[0],10))+this.componentToHex(parseInt(e[1],10))+this.componentToHex(parseInt(e[2],10))},createPointBufferType:function(){var e=this.options.styleEditorUi.pointBufferTypeDiv,t=L.DomUtil.create("div","leaflet-styleeditor-interior-element",e);L.DomUtil.create("br","",t),L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.buffer.type;var n=L.DomUtil.create("select","leaflet-styleeditor-select",t),r=L.DomUtil.create("option",null,n);r.text=L.styleEditorLocal.buffer.outer,n.add(r,null),this.point_buffer_type=KQ.Common.CommonValues.bufferTypes.outer},createLineBufferType:function(){var e=this.options.styleEditorUi.lineBufferTypeDiv,t=L.DomUtil.create("div","leaflet-styleeditor-interior-element",e);L.DomUtil.create("br","",t),L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.buffer.type;var n=L.DomUtil.create("select","leaflet-styleeditor-select",t),r=L.DomUtil.create("option",null,n);r.text=L.styleEditorLocal.buffer.both,n.add(r,null),this.line_buffer_type=2,L.DomEvent.addListener(n,"change",function(e){e.stopPropagation(),0===e.target.selectedIndex?this.line_buffer_type=KQ.Common.CommonValues.bufferTypes.left:1===e.target.selectedIndex?this.line_buffer_type=KQ.Common.CommonValues.bufferTypes.right:this.line_buffer_type=KQ.Common.CommonValues.bufferTypes.both,console.log("select_type_callback:"+this.line_buffer_type)}.bind(this))},createFillBufferType:function(){var e=this.options.styleEditorUi.fillBufferTypeDiv,t=L.DomUtil.create("div","leaflet-styleeditor-interior-element",e);L.DomUtil.create("br","",t),L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.buffer.type;var n=L.DomUtil.create("select","leaflet-styleeditor-select",t),r=L.DomUtil.create("option",null,n);r.text=L.styleEditorLocal.buffer.outer;var i=L.DomUtil.create("option",null,n);i.text=L.styleEditorLocal.buffer.inner;var o=L.DomUtil.create("option",null,n);o.text=L.styleEditorLocal.buffer.both,n.add(r,null),n.add(i,null),n.add(o,null),this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.outer,L.DomEvent.addListener(n,"change",function(e){e.stopPropagation(),0===e.target.selectedIndex?this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.outer:1===e.target.selectedIndex?this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.inner:this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.both,console.log("select_type_callback:"+this.fill_buffer_type)}.bind(this))},createBuffer:function(){var r=1e6,e=this.options.styleEditorUi.bufferDiv,t=L.DomUtil.create("div","leaflet-styleeditor-interior-element",e);L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.buffer.length,this.buffer_length=1e3;var n=L.DomUtil.create("input","leaflet-styleeditor-input",t);function i(e){e.stopPropagation(),this.buffer_length=e.target.value,console.log("input_length_callback:"+this.buffer_length)}n.setAttribute("type","number"),n.setAttribute("value",this.buffer_length),n.setAttribute("min",0),n.setAttribute("max",r),n.setAttribute("step",1),L.DomEvent.addListener(n,"change",i.bind(this)),L.DomEvent.addListener(n,"keyup",i.bind(this));var o=L.DomUtil.create("div","leaflet-styleeditor-interior-element",e);L.DomUtil.create("label","leaflet-styleeditor-label",o).innerHTML=L.styleEditorLocal.buffer.unit;var a=L.DomUtil.create("select","leaflet-styleeditor-select",o),s=L.DomUtil.create("option",null,a);s.text="m";var l=L.DomUtil.create("option",null,a);l.text="km",a.add(s,null),a.add(l,null),this.buffer_unit=0,L.DomEvent.addListener(a,"change",function(e){e.stopPropagation(),this.buffer_unit=e.target.selectedIndex,console.log("select_unit_callback:"+this.buffer_unit)}.bind(this));var u=this,c=L.DomUtil.create("div","leaflet-styleeditor-interior-element",e);$(c).append("<input id='reserve_graphics' class='leaflet-styleeditor-input-checkbox' type='checkbox'><label class='leaflet-styleeditor-input-checkbox-label'>"+KQ.Local.Control.styleEditor.reservedGraphics()+"</label>"),$("#reserve_graphics").click(function(){u.is_reserve_graphics=$("#reserve_graphics").prop("checked")});var h=L.DomUtil.create("button","k-primary buffer-button",e);h.innerHTML=L.styleEditorLocal.buffer.buffer,$(".buffer-button").kendoButton({type:"submit"}),L.DomEvent.addListener(h,"click",function(e){e.stopPropagation();var t=this.buffer_length;this.buffer_unit===KQ.Common.CommonValues.bufferUnit.km&&(t*=1e3),r<t&&this.options.errorCallback(L.styleEditorLocal.buffer.msgLengthTooLong+" "+r+"m"),this.buffer_shape_type=KQ.Common.CommonValues.shapeTypes.point;var n=this.options.currentElement.target;n instanceof L.Polygon||n instanceof L.LayerGroup||n instanceof L.Circle?this.buffer_shape_type=KQ.Common.CommonValues.shapeTypes.fill:n instanceof L.Polyline&&(this.buffer_shape_type=KQ.Common.CommonValues.shapeTypes.line),this.options.bufferCallback(this)}.bind(this))}})},{}],3:[function(e,t,n){function p(e){var t,n=e||navigator.userAgent,r=!1,i={i:"Internet Explorer",e:"Edge",f:"Firefox",o:"Opera",s:"Safari",n:"Netscape",c:"Chrome",a:"Android Browser",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",x:"Other"};function o(e,t){if(RegExp(t,"i").test(n))return e}var a=o("bot","bot|spider|archiver|transcoder|crawl|checker|monitoring|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|microsoft|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Gecko Expeditor")||o("discontinued browser","camino|flot|k-meleon|fennec|galeon|chromeframe|coolnovo")||o("complicated device browser","SMART-TV|SmartTV")||o("niche browser","Dorado|Whale|SamsungBrowser|MIDP|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|QupZilla|Otter|Midori|qutebrowser")||o("mobile without upgrade path or landing page","kindle|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10")||o("android(chrome) web view","; wv"),s=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(n);if(a)return{n:"x",v:0,t:"other browser",donotnotify:a};for(var l=[["CriOS.VV","c"],["FxiOS.VV","f"],["Trident.*rv:VV","i"],["Trident.VV","io"],["UCBrowser.VV","uc"],["MSIE.VV","i"],["Edge.VV","e"],["Vivaldi.VV","v"],["OPR.VV","o"],["YaBrowser.VV","y"],["Chrome.VV","c"],["Firefox.VV","f"],["Version.VV.*Safari","s"],["Safari.VV","so"],["Opera.*Version.VV","o"],["Opera.VV","o"],["Netscape.VV","n"]],u=0;u<l.length;u++)if(n.match(new RegExp(l[u][0].replace("VV","(\\d+\\.?\\d+)"),"i"))){t=l[u][1];break}if("v"===t||"y"===t||"uc"===t)var c=RegExp.$1.split("."),h=c[0]+"."+("00".substring(0,2-c[1].length)+c[1]);else h=Math.round(10*parseFloat(RegExp.$1))/10;if(!t)return{n:"x",v:0,t:i[t],mobile:s};if(/windows.nt.5.0|windows.nt.4.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5|os x 10.6|os x 10.7/i.test(n)&&(r="oldOS"),/iphone|ipod|ipad|ios/i.test(n))return n.replace("_",".").match(new RegExp("OS.(\\d+\\.?\\d?)","i")),t="iOS",h=parseFloat(RegExp.$1),Math.max(window.screen.height,window.screen.width)<=480||window.devicePixelRatio<2?{n:"s",v:h,t:"iOS "+h,donotnotify:"iOS without upgrade path",mobile:s}:{n:"s",v:h,t:"iOS "+h,donotnotify:!1,mobile:s};if(-1<n.indexOf("Android")&&"s"===t){var f=parseInt((/WebKit\/([0-9]+)/i.exec(n)||0)[1],10)||2e3;if(f<=534)return{n:"a",v:f,t:i.a,mob:!0,donotnotify:r,mobile:s}}return"f"!=t||45!=Math.round(h)&&52!=Math.round(h)||(r="ESR"),"so"==t&&(h=4,t="s"),"i"==t&&7==h&&window.XDomainRequest&&(h=8),"io"==t&&(t="i",h=6<h?11:5<h?10:4<h?9:3.1<h?8:3<h?7:9),"e"==t?{n:"i",v:h,t:i[t]+" "+h,donotnotify:r,mobile:s}:{n:t,v:h,t:i[t]+" "+h,donotnotify:r,mobile:s}}t.exports=function(e,t){var n,r,i=window.navigator,o=(e=window._buorgres=e||{}).l||(i.languages?i.languages[0]:null)||i.language||i.browserLanguage||i.userLanguage||document.documentElement.getAttribute("lang")||"en";e.ll=o=o.replace("_","-").toLowerCase().substr(0,2),e.apiver=e.api||e.c||-1;var a={i:12,f:53,o:44,s:10.1,n:20,c:58,y:17.04,v:1.1,uc:11.3},s={i:-2,f:-4,o:-4,s:-1.7,n:12,c:-4,a:534,y:-.02,v:-.02,uc:-.03};r=e.apiver<4?{i:9,f:10,o:20,s:7}:{i:8,f:5,o:12.5,s:6.2};e.vs;var l=e.vs||s;for(n in s)l[n]||(l[n]=s[n]),a[n]&&l[n]>=a[n]&&(l[n]=a[n]-.2),a[n]&&l[n]<0&&(l[n]=a[n]+l[n]),r[n]&&l[n]<r[n]&&(l[n]=r[n]);e.vsf=l,e.reminder<.1||0===e.reminder?e.reminder=0:e.reminder=e.reminder||24,e.reminderClosed=e.reminderClosed||168,e.onshow=e.onshow||function(e){},e.onclick=e.onclick||function(e){},e.onclose=e.onclose||function(e){},e.pageurl=e.pageurl||location.hostname||"x",e.newwindow=!1!==e.newwindow,e.test=t||e.test||"#test-bu"===location.hash||"#test-bu-beta"===location.hash||!1;var u=p();if(!e.test){if(!u||!u.n||"x"===u.n||!1!==u.donotnotify||-1<document.cookie.indexOf("browserupdateorg=pause")&&0<e.reminder)return;if(u.v>l[u.n]||u.mobile&&!1===e.mobile)return}e.setCookie=function(e){document.cookie="browserupdateorg=pause; expires="+new Date((new Date).getTime()+36e5*e).toGMTString()+"; path=/"},0<e.reminder&&e.setCookie(e.reminder),e.nomessage?e.onshow(e):c()};var c=function(){var t=window._buorgres,e=t.ll,n=p(),r=t.burl||"http://browser-update.org/";t.url||(t.l?t.url=r+e+"/update-browser.html#24:"+t.pageurl:t.url=r+"update-browser.html#24:"+t.pageurl);if(1e3*Math.random()<1&&!t.test&&!t.betatest){var i=new Image,o=t["text_"+e]||t.text||"",a=encodeURIComponent("frac=1000&txt="+o+"&apiver="+t.apiver);i.src=r+"count.php?what=noti&from="+n.n+"&fromv="+n.v+"&ref="+escape(t.pageurl)+"&jsv=24&tv=24&extra="+a}var s={en:"<b>Your web browser ({brow_name}) is out of date.</b> Update your browser for more security, speed and the best experience on this site. <a{up_but}>Update browser</a> <a{ignore_but}>Ignore</a>",ar:"<b> متصفح الويب ({brow_name}) الخاص بك قديم.</b> قُم بتحديث متصفحك للحصول على مزيدٍ من الحماية والراحة وتجربة أفضل على هذا الموقع. <a{up_but}> تحديث المتصفح</a> <a{ignore_but}> تجاهل</a>",bg:"<b>Вашият браузър ({brow_name}) не е актуализиран.</b> Актуализирайте го за повече сигурност, удобство и най-добро изживяване на сайта. <a{up_but}>Актуализирайте браузъра</a> <a{ignore_but}>Игнорирайте</a>",ca:"El teu navegador (%s) està <b>desactualitzat.</b> Té <b>vulnerabilitats</b> conegudes i pot <b>no mostrar totes les característiques</b> d'aquest i altres llocs web. <a%s>Aprèn a actualitzar el navegador</a>",cs:"<b>Váš webový prohlížeč ({brow_name}) je zastaralý .</b> Pro větší bezpečnost, pohodlí a optimální zobrazení této stránky si prosím svůj prohlížeč aktualizujte. <a{up_but}>Aktualizovat prohlížeč</a> <a{ignore_but}>Ignorovat</a>",da:"<b>Din netbrowser ({brow_name}) er forældet.</b> Opdater din browser for mere sikkerhed, komfort og den bedste oplevelse på denne side. <a{up_but}>Opdater browser</a> <a{ignore_but}>Ignorer</a>",de:"<b>Ihr Browser ({brow_name}) ist veraltet.</b> <span>Aktualisieren Sie Ihren Browser für mehr Sicherheit, Komfort und die einwandfreie Nutzung dieser Webseite.</span> <a{up_but}>Browser aktualisieren</a> <a{ignore_but}>Ignorieren</a>",el:"<b>Η έκδοση του προγράμματος περιήγησής σας ({brow_name}) είναι παλιά.</b> Ενημερώστε τον περιηγητή σας για περισσότερη ασφάλεια, άνεση και την βέλτιστη εμπειρία σε αυτή την ιστοσελίδα. <a{up_but}>Αναβάθμιση περιηγητή</a> <a{ignore_but}>Παράβλεψη</a>",es:"<b>Tu navegador web ({brow_name}) no está actualizado.</b> Actualiza tu navegador para tener más seguridad y comodidad y tener la mejor experiencia en este sitio. <a{up_but}>Actualizar navegador</a> <a{ignore_but}>Ignorar</a>",fa:"مرورگر شما (%s) <b>از رده خارج شده</b> می باشد. این مرورگر دارای <b>مشکلات امنیتی شناخته شده</b> می باشد و <b>نمی تواند تمامی ویژگی های این</b> وب سایت و دیگر وب سایت ها را به خوبی نمایش دهد. <a%s>در خصوص گرفتن راهنمایی درخصوص نحوه ی به روز رسانی مرورگر خود اینجا کلیک کنید.</a>",fi:"<b>Selaimesi ({brow_name}) on vanhentunut.</b> Päivitä selaimesi parantaaksesi turvallisuutta, mukavuutta ja käyttökokemusta tällä sivustolla. <a{up_but}>Päivitä selain</a> <a{ignore_but}>Ohita</a>",fr:"<b>Votre navigateur web ({brow_name}) n'est pas à jour.</b> Mettez votre navigateur à jour pour plus de sécurité, de confort et une expérience optimale sur ce site. <a{up_but}>Mettre le navigateur à jour</a> <a{ignore_but}>Ignorer</a>",ga:"Tá an líonléitheoir agat (%s) <b>as dáta.</b> Tá <b>laigeachtaí slándála</b> a bhfuil ar eolas ann agus b'fhéidir <b>nach taispeánfaidh sé gach gné</b> den suíomh gréasáin seo ná cinn eile. <a%s>Foghlaim conas do líonléitheoir a nuashonrú</a>",gl:"O seu navegador (%s) está <b>desactualizado.</b> Ten coñecidos <b>fallos de seguranza</b> e podería <b>non mostrar tódalas características</b> deste e outros sitios web. <a%s>Aprenda como pode actualizar o seu navegador</a>",he:"הדפדפן שלך (%s) <b>אינו מעודכן.</b> יש לו <b>בעיות אבטחה ידועות</b> ועשוי <b>לא להציג את כל התכונות</b> של אתר זה ואתרים אחרים. <a%s>למד כיצד לעדכן את הדפדפן שלך</a>",hi:"यह वेबसाइट आपको याद दिलाना चाहती हैं: आपका ब्राउज़र (%s) <b> आउट ऑफ़ डेट </ b> हैं। <a%s> और अधिक सुरक्षा, आराम और इस साइट पर सबसे अच्छा अनुभव करने लिए आपके ब्राउज़र को अपडेट करें</a>।",hu:"<b>Az ön ({brow_name}) böngészője elavult.</b> Frissítse a böngészőjét több biztonság, kényelem és a legjobb felhasználói élmény érdekében ezen az oldalon. <a{up_but}>Böngésző frissítése</a> <a{ignore_but}>Mellőzés</a>",id:"<b>Peramban web Anda ({brow_name}) sudah lawas.</b> Perbarui peramban Anda untuk pengalaman terbaik yang lebih aman dan nyaman di situs ini. <a{up_but}>Perbarui peramban</a> <a{ignore_but}>Abaikan</a>",it:"<b>Il suo browser web ({brow_name}) non è aggiornato.</b> Aggiorni il suo browser per ottenere maggiore sicurezza, comfort, e la migliore esperienza possibile su questo sito. <a{up_but}>Aggiorna il browser</a> <a{ignore_but}>Ignora</a>",ja:"<b>お使いのウェブブラウザ ({brow_name}) は古すぎます。</b>安全性と快適さを向上させ、このサイトで最高の体験が出来るよう、お使いのブラウザをアップデートしましょう。<a{up_but}>ブラウザをアップデートする</a> <a{ignore_but}>無視する</a>",ko:"<b>현재 귀하의 웹브라우저 ({brow_name})은(는) 구버전입니다.</b> 본 사이트의 향상된 보안 및 최고 품질의 편안한 서비스를 사용하기 위해서 브라우저를 업데이트해 주십시오. <a{up_but}>브라우저 업데이트</a> <a{ignore_but}>무시하기</a>",lv:"Jūsu pārlūkprogramma (%s) ir <b>novecojusi.</b>  Tai ir zināmas <b>drošības problēmas</b>, un tā var attēlot šo un citas  tīmekļa lapas <b>nekorekti.</b> <a%s>Uzzini, kā atjaunot savu pārlūkprogrammu</a>",ms:"<b>Pelayar web ({brow_name}) anda sudah usang.</b> Kemas kini pelayar anda untuk memperoleh lebih keselamatan, keselesaan dan pengalaman terbaik di tapak ini. <a{up_but}>Kemas kini pelayar</a> <a{ignore_but}>Abaikan</a>",nl:"<b>Uw webbrowser ({brow_name}) is verouderd.</b> Update uw browser voor meer veiligheid, comfort en de beste ervaring op deze site. <a{up_but}>Update browser</a> <a{ignore_but}>Negeer</a>",no:"<b>Nettleseren din,({brow_name}), er utdatert.</b> Oppdater nettleseren din for mer sikkerhet, komfort og den beste opplevelsen på denne siden. <a{up_but}>Oppdater nettleser</a> <a{ignore_but}>Ignorer</a>",pl:"<b>Państwa przeglądarka ({brow_name}) jest nieaktualna.</b> Aby zapewnić większe bezpieczeństwo, wygodę i komfort użytkowania w tej witrynie, proszę zaktualizować swoją przeglądarkę. <a{up_but}>Zaktualizuj przeglądarkę</a> <a{ignore_but}>Zignoruj</a>",pt:"<b>Seu navegador de internet ({brow_name}) está desatualizado.</b> Atualize seu navegador para obter mais segurança, conforto e a melhor experiência neste site. <a{up_but}>Atualizar navegador</a> <a{ignore_but}>Ignorar</a>",ro:"<b>Browserul dumneavoastră ({brow_name}) nu este actualizat.</b> Actualizați-vă browserul pentru securitate sporită, confort și cea mai bună experiență pe site. <a{up_but}>Actualizează browser</a><a{ignore_but}>Ignoră</a>",ru:"<b>Ваш веб-браузер ({brow_name}) устарел.</b> Обновите свой браузер, чтобы сделать пребывание на этом сайте более безопасным, комфортным и продуктивным. <a{up_but}>Обновить браузер</a> <a{ignore_but}>Игнорировать</a>",sk:"<b> Váš internetový prehliadač ({brow_name}) je zastaraný.</b> Aktualizujte váš prehliadač pre vyššiu bezpečnosť, komfort a najlepší zážitok na tejto stránke. <a{up_but}>Aktualizovať prehliadač</a><a{ignore_but}>Ignorovať</a>",sl:"Vaš brskalnik (%s) je <b>zastarel.</b> Ima več <b>varnostnih pomankljivosti</b> in morda <b>ne bo pravilno prikazal</b> te ali drugih strani. <a%s>Poglejte kako lahko posodobite svoj brskalnik</a>",sq:"Shfletuesi juaj (%s) është <b>ca i vjetër.</b> Ai ka <b>të meta sigurie</b> të njohura dhe mundet të <b>mos i shfaqë të gjitha karakteristikat</b> e kësaj dhe shumë faqeve web të tjera. <a%s>Mësoni se si të përditësoni shfletuesin tuaj</a>",sr:"Vaš pretraživač (%s) je <b>zastareo.</b> Ima poznate <b>sigurnosne probleme</b> i najverovatnije <b>neće prikazati sve funkcionalnisti</b> ovog i drugih sajtova. <a%s>Nauči više o nadogradnji svog pretraživača</a>",sv:"<b>Din webbläsare ({brow_name}) är föråldrad.</b> Uppdatera din webbläsare för bättre säkerhet, bekvämlighet och den bästa upplevelsen på den här sidan. <a{up_but}>Uppdatera webbläsare</a> <a{ignore_but}>Avstå</a>",th:"เว็บไซต์นี้อยากจะเตือนคุณ: เบราว์เซอร์ (%s) ของคุณนั้น <b>ล้าสมัยแล้ว</b> <a%s>ปรับปรุงเบราว์เซอร์ของคุณ</a> เพื่อเพิ่ม ความปลอดภัย ความสะดวกสบายและประสบการณ์ที่ดีที่สุดในเว็บไซต์นี้",tr:"<b>({brow_name}) internet tarayıcınız güncel değil.</b> Bu sitede daha fazla güvenlik, konfor ve en iyi deneyim için tarayıcınızı güncelleyin. <a{up_but}>Tarayıcıyı güncelle</a> <a{ignore_but}>Yoksay</a>",uk:"<b>Ваш браузер ({brow_name}) є застарілим.</b> Оновіть його заради безпечнішого, зручнішого та приємнішого перегляду цього та інших сайтів. <a{up_but}>Оновити</a> <a{ignore_but}>Скасувати</a>",vi:"<b>Trình duyệt web của bạn ({brow_name}) đã cũ.</b> Hãy nâng cấp trình duyệt của bạn để được an toàn và thuận lợi hơn đồng thời có được trải nghiệm tốt nhất với trang này. <a{up_but}>Nâng cấp trình duyệt</a> <a{ignore_but}>Bỏ qua</a>",zh:"<b>您的网页浏览器 ({brow_name}) 已过期。</b>更新您的浏览器，以提高安全性和舒适性，并获得访问本网站的最佳体验。<a{up_but}>更新浏览器</a> <a{ignore_but}>忽略</a>","zh-tw":"<b>您的網頁瀏覽器  ({brow_name}) 已經過時。</b> 請更新您的瀏覽器，以在此網站取得更安全、舒適的最佳瀏覽體驗。<a{up_but}>更新瀏覽器</a><a{ignore_but}>忽略</a>"};s=t["text_"+e]||t.text||s[e]||s.en;var l="";t.newwindow&&(l=' target="_blank" rel="noopener"');var u=t.div=document.createElement("div");u.id="buorg",u.className="buorg";var c="<style>.buorg {background: #FDF2AB no-repeat 14px center url("+r+"img/small/"+n.n+".png);}</style>",h="<style>.buorg {background-position: 8px 17px; position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer;        background-color: #fff8ea;    font: 17px Calibri,Helvetica,Arial,sans-serif;    box-shadow: 0 0 5px rgba(0,0,0,0.2);}    .buorg div { padding: 11px 12px 11px 30px;  line-height: 1.7em; }    .buorg div a,.buorg div a:visited{ text-indent: 0; color: #fff; text-decoration: none; box-shadow: 0 0 2px rgba(0,0,0,0.4); padding: 1px 10px; border-radius: 4px; font-weight: normal; background: #5ab400;    white-space: nowrap;    margin: 0 2px; display: inline-block;}    #buorgig{ background-color: #edbc68;}    @media only screen and (max-width: 700px){.buorg div { padding:5px 12px 5px 9px; text-indent: 22px;line-height: 1.3em;}.buorg {background-position: 9px 8px;}}    @keyframes buorgfly {from {opacity:0;transform:translateY(-50px)} to {opacity:1;transform:translateY(0px)}}     .buorg { animation-name: buorgfly; animation-duration: 1s; animation-timing-function: ease-out;}</style>";-1===s.indexOf("{brow_name}")?(s=function(){for(var e=arguments,t=e[0],n=1;n<e.length;++n)t=t.replace(/%s/,e[n]);return t}(s,n.t,' id="buorgul" href="'+t.url+'"'+l),c+="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer; font: 13px Arial,sans-serif;color:#000;}    .buorg div { padding:5px 36px 5px 40px; }    .buorg>div>a,.buorg>div>a:visited{color:#E25600; text-decoration: underline;}    #buorgclose{position:absolute;right:6px;top:0px;height:20px;width:12px;font:18px bold;padding:0;}    #buorga{display:block;}    @media only screen and (max-width: 700px){.buorg div { padding:5px 15px 5px 9px; }}</style>",u.innerHTML="<div>"+s+'<div id="buorgclose"><a id="buorga">&times;</a></div></div>'+c,t.addmargin=!0):("bottom"===t.position?h+="<style>.buorg {bottom:0; top:auto; border-top:1px solid #A29330; } @keyframes buorgfly {from {opacity:0;transform:translateY(50px)} to {opacity:1;transform:translateY(0px)}} </style>":"corner"===t.position?h+="<style>.buorg { width:300px; top:50px; right:50px; left:auto; border:1px solid #A29330; } .buorg div b {display:block;} .buorg div span { display: block; } .buorg div a {margin: 4px 2px;}        </style>":t.addmargin=!0,s=s.replace("{brow_name}",n.t).replace("{up_but}",' id="buorgul" href="'+t.url+'"'+l).replace("{ignore_but}",' id="buorgig" href=""'),u.innerHTML="<div>"+s+"</div>"+c+h),t.text=s,t.container?(t.container.appendChild(u),t.addmargin=!1):document.body.insertBefore(u,document.body.firstChild),u.onclick=function(){return t.newwindow?window.open(t.url,"_blank"):window.location.href=t.url,t.setCookie(t.reminderClosed),t.onclick(t),!1};try{document.getElementById("buorgul").onclick=function(e){return(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0,t.div.style.display="none",f.style.marginTop=t.bodymt,t.onclick(t),!0}}catch(e){}if(t.addmargin){var f=document.getElementsByTagName("html")[0]||document.body;t.bodymt=f.style.marginTop,f.style.marginTop=u.clientHeight+"px"}if((document.getElementById("buorga")||document.getElementById("buorgig")).onclick=function(e){return(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0,t.div.style.display="none",t.addmargin&&(f.style.marginTop=t.bodymt),t.onclose(t),t.setCookie(t.reminderClosed),!1},t.noclose){var d=document.getElementById("buorga")||document.getElementById("buorgig");d.parentNode.removeChild(d)}t.onshow(t)}},{}],4:[function(e,t,n){"use strict";e("../libs/controls/styleeditor/Leaflet.StyleEditor"),e("../libs/controls/styleeditor/Leaflet.StyleForms");e("../libs/other/update.npm.full")({vs:{i:12,f:-4,o:-4,s:8,c:-4},api:4})},{"../libs/controls/styleeditor/Leaflet.StyleEditor":1,"../libs/controls/styleeditor/Leaflet.StyleForms":2,"../libs/other/update.npm.full":3}]},{},[4]);