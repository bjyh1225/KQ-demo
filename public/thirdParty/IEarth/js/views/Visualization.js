define(["text!views/html/Visualization.html","libs/common/common","libs/common/defined","libs/common/defaultValue","libs/common/defineProperties","jquery","Cesium","Vue","VueLazyLoad","Bootstrap","views/Container","views/DataSourceConfig","views/PM25Heatmap","views/EntitiesDotmap","views/BarsMap","views/TrackMap"],function(t,e,i,a,s,o,n,r,l,h,m,p,d,c,u,_){"use strict";var w=p.VisualizDataSourceSettings,v={addNew:"新增",image:"影像",terrain:"地形"};for(var y in v)v[y]=platformLanguage[y]?platformLanguage[y]:v[y];function g(i){i=a(i,{}),this._viewer=a(i.viewer,null),this._parentContainer=a(i.parentContainer,"cesiumContainer"),this._title=a(i.title,"Panel"),this._content=a(t,""),this._shown=a(i.shown,!0),this._showHeader=a(i.showHeader,!1),this._showTitle=a(i.showTitle,!0),this._showCloseBtn=a(i.showCloseBtn,!0),this._style=a(i.style,{position:"absolute",top:"0",left:"0",margin:"0",width:"auto"}),this._bodyStyle=a(i.bodyStyle,{padding:"5px",margin:0}),this._container=null,this._vm=null,this._id=e.newGuid(),this._pm25Heatmap=new d(i),this._entitiesDotmap=new c(i),this._barsMap=new u(i),this._trackMap=new _(i),this.initialize(i)}return g.prototype.initialize=function(t){var e=this,i={parentContainer:this._parentContainer,title:this._title,content:this._content,shown:this._shown,showHeader:this._showHeader,showTitle:this._showTitle,showCloseBtn:this._showCloseBtn,style:this._style,bodyStyle:this._bodyStyle};this._container=new m(i),r.use(l,{error:"images/imageLayer/nopicture.jpg",loading:"images/lazy-loading.gif"}),this._vm=new r({el:".module-visualization-content",data:{guid:this._id,visualizationItemsCollection:w,titles:v},watch:{},methods:{onVisualizationItemsClk:function(t){e.addAndRemoveVisualizationLayer(t)}}})},g.prototype.addAndRemoveVisualizationLayer=function(t){var e=this.vm.visualizationItemsCollection[t];e.selected=!e.selected,this.vm.$set(this.vm.visualizationItemsCollection,t,e),"heatmap"==e.type?e.selected?(this._pm25Heatmap.acceptVisualizationVM(this.vm,t),this._pm25Heatmap.addPM25MapImageryLayer()):this._pm25Heatmap.destroy():"weibo"==e.type?e.selected?this._entitiesDotmap.addWeiboDotmap(e.name):this._entitiesDotmap.removeWeiboDotmap():"gps"==e.type?e.selected?this._entitiesDotmap.addGPSDotmap():this._entitiesDotmap.removeWeiboDotmap():"bars"==e.type?e.selected?this._barsMap.addGlobalPopulationMap(e.name):this._barsMap.removePopulationMap():"bars2"==e.type?e.selected?this._barsMap.addUSPopulationMap(e.name):this._barsMap.removePopulationMap():"track"==e.type?e.selected?this._trackMap.addWuHanCarTrackMap(e.name):this._trackMap.remove():e.selected?alert("Add -- "+w[t].name):alert("Remove -- "+w[t].name)},g.prototype.destroy=function(){return this._container.destroy()},s(g.prototype,{container:{get:function(){return this._container}},vm:{get:function(){return this._vm}},shown:{get:function(){return this._container.shown},set:function(t){this._container.shown=t}}}),g});