!function o(a,s,l){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return u(a[e][1][t]||t)},i,i.exports,o,a,s,l)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){"use strict";L.LabelTextCollision=L.Canvas.extend({options:{collisionFlg:!0,fontName:"FangSong",fontSize:"16",fontWeight:"normal",fontStyle:"normal",textColor:"blue",borderColor:"white",borderWidth:"4.0",position:"mid",markerPadding:2,markerWidth:0,markerHeight:0},initialize:function(t){t=L.Util.setOptions(this,t),this._layers=this._layers||{},this.options=t},_handleMouseHover:function(t,e){var n,r;for(n in this._drawnLayers)(r=this._drawnLayers[n]).options.interactive&&r._containsPoint(e)&&(L.DomUtil.addClass(this._containerText,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_handleMouseOut:function(t,e){var n=this._hoveredLayer;!n||"mouseout"!==t.type&&n._containsPoint(e)||(L.DomUtil.removeClass(this._containerText,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null)},_updateTransform:function(t,e){L.Canvas.prototype._updateTransform.call(this,t,e);var n=this._map.getZoomScale(e,this._zoom),r=L.DomUtil.getPosition(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);L.Browser.any3d?L.DomUtil.setTransform(this._containerText,s,n):L.DomUtil.setPosition(this._containerText,s)},_initContainer:function(t){L.Canvas.prototype._initContainer.call(this),this._containerText=document.createElement("canvas"),L.DomEvent.on(this._containerText,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(this._containerText,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(this._containerText,"mouseout",this._handleMouseOut,this),this._ctxLabel=this._containerText.getContext("2d"),L.DomUtil.addClass(this._containerText,"leaflet-zoom-animated"),this.getPane().appendChild(this._containerText)},_update:function(){this._textList=[],L.Renderer.prototype._update.call(this);var t=this._bounds,e=this._containerText,n=t.getSize(),r=L.Browser.retina?2:1;L.DomUtil.setPosition(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",e.style.zIndex="4",this._container.style.zIndex="3",e.style.zIndex="10000",this._container.style.zIndex="9999",L.Browser.retina&&this._ctxLabel.scale(2,2),this._ctxLabel.translate(-t.min.x,-t.min.y),L.Canvas.prototype._update.call(this)},_updatePoly:function(t,e){L.Canvas.prototype._updatePoly.call(this,t,e),this._text(this._ctxLabel,t)},_updateCircle:function(t){L.Canvas.prototype._updateCircle.call(this,t),this._text(this._ctxLabel,t)},_text:function(t,e){if(null!=e.options.text){t.globalAlpha=1;var n=e._point;if(null==n){if(0==e._parts.length||0==e._parts[0].length)return;n=this._getCenter(e._parts[0])}t.lineWidth=this.options.borderWidth,t.font=this.options.fontStyle+" "+this.options.fontWeight.toString()+" "+this.options.fontSize.toString()+"px "+this.options.fontName;var r=t.measureText(e.options.text).width,i=t.measureText("田").width,o=this._getLabelBound(n,r,i),a=o.getBottomLeft();if(this.options.collisionFlg)for(var s in this._textList){if(this._textList[s].intersects(o))return}this._textList.push(o),t.strokeStyle=this.options.borderColor,t.strokeText(e.options.text,a.x,a.y),null==this.options.textColor?t.fillStyle="blue":t.fillStyle=this.options.textColor,t.fillText(e.options.text,a.x,a.y)}},_getCenter:function(t){var e,n,r,i,o,a,s,l=t.length;if(!l)return null;for(n=e=0;e<l-1;e++)n+=t[e].distanceTo(t[e+1])/2;if(0===n)return t[0];for(i=e=0;e<l-1;e++)if(o=t[e],a=t[e+1],n<(i+=r=o.distanceTo(a))){s=(i-n)/r;var u=[a.x-s*(a.x-o.x),a.y-s*(a.y-o.y)];return L.point(u[0],u[1])}},_setOptions:function(t){this.options=L.extend({},this.options,t)},_getLabelBound:function(t,e,n){var r=[0,0],i=Number(this.options.markerWidth),o=Number(this.options.markerHeight),a=Number(this.options.markerPadding);"mid"===this.options.position?r=[0,0]:"up"===this.options.position?r=[0,-(o+n)/2-a]:"down"===this.options.position?r=[0,(o+n)/2+a]:"left"===this.options.position?r=[-(i+e)/2-a,-2]:"right"===this.options.position&&(r=[(i+e)/2+a,-2]);var s=L.point(t.x+r[0],t.y+r[1]);return L.bounds(L.point(s.x-e/2,s.y-n/2),L.point(s.x+e/2,s.y+n/2))},getString:function(){return JSON.stringify(this.options)},removeTextCanvas:function(){this._containerText&&this._map&&this.getPane().removeChild(this._containerText)}})},{}],2:[function(t,e,n){"use strict";L.Polyline.include({_snakingTimestamp:0,_snakingRings:0,_snakingVertices:0,_snakingDistance:0,_snaking:!1,snakeIn:function(){if(!this._snaking&&"performance"in window&&"now"in window.performance&&this._map)return this._snaking=!0,this._snakingTime=performance.now(),this._snakingVertices=this._snakingRings=this._snakingDistance=0,this._snakeLatLngs||(this._snakeLatLngs=L.LineUtil.isFlat(this._latlngs)?[this._latlngs]:this._latlngs),this._latlngs=[[this._snakeLatLngs[0][0],this._snakeLatLngs[0][0]]],this._update(),this._snake(),this.fire("snakestart"),this},_snake:function(){var t=performance.now(),e=(t-this._snakingTime)*this.options.snakingSpeed/1e3;return this._snakingTime=t,this._latlngs[this._snakingRings].pop(),this._snakeForward(e)},_snakeForward:function(t){if(this._map){var e=this._map.latLngToContainerPoint(this._snakeLatLngs[this._snakingRings][this._snakingVertices]),n=this._map.latLngToContainerPoint(this._snakeLatLngs[this._snakingRings][this._snakingVertices+1]),r=e.distanceTo(n);if(this._snakingDistance+t>r||0===r){if(this._snakingVertices++,this._latlngs[this._snakingRings].push(this._snakeLatLngs[this._snakingRings][this._snakingVertices]),this._snakingVertices>=this._snakeLatLngs[this._snakingRings].length-1){if(this._snakingRings>=this._snakeLatLngs.length-1)return this._snakeEnd();this._snakingVertices=0,this._snakingRings++,this._latlngs[this._snakingRings]=[this._snakeLatLngs[this._snakingRings][this._snakingVertices]]}return this._snakingDistance-=r,this._snakeForward(t)}this._snakingDistance+=t;var i=this._snakingDistance/r,o=n.multiplyBy(i).add(e.multiplyBy(1-i)),a=this._map.containerPointToLatLng(o);this._latlngs[this._snakingRings].push(a),this.setLatLngs(this._latlngs),this.fire("snake"),L.Util.requestAnimFrame(this._snake,this)}},_snakeEnd:function(){this.setLatLngs(this._snakeLatLngs),this._snaking=!1,this.fire("snakeend")}}),L.Polyline.mergeOptions({snakingSpeed:200}),L.LayerGroup.include({_snakingLayers:[],_snakingLayersDone:0,snakeIn:function(){if("performance"in window&&"now"in window.performance&&this._map&&!this._snaking){this._snaking=!0,this._snakingLayers=[],this._snakingLayersDone=0;var t=Object.keys(this._layers);for(var e in t){var n=t[e];this._snakingLayers.push(this._layers[n])}return this.clearLayers(),this.fire("snakestart"),this._snakeNext()}},_snakeNext:function(){if(this._snakingLayersDone>=this._snakingLayers.length)return this.fire("snakeend"),void(this._snaking=!1);var t=this._snakingLayers[this._snakingLayersDone];return this._snakingLayersDone++,this.addLayer(t),"snakeIn"in t?(t.once("snakeend",function(){setTimeout(this._snakeNext.bind(this),this.options.snakingPause)},this),t.snakeIn()):setTimeout(this._snakeNext.bind(this),this.options.snakingPause),this.fire("snake"),this}}),L.LayerGroup.mergeOptions({snakingPause:200})},{}],3:[function(t,e,n){"use strict";L.Realtime=L.GeoJSON.extend({options:{start:!0,interval:6e4,getFeatureId:function(t){return t.properties.id},updateFeature:function(t,e,n){if(e&&"Point"===t.geometry.type){var r=t.geometry.coordinates;return e.setLatLng([r[1],r[0]]),e}},logErrors:!0,cache:!1},initialize:function(i,t){L.GeoJSON.prototype.initialize.call(this,void 0,t),this._src="function"==typeof i?i:L.bind(function(t,e){var n="string"==typeof i||i instanceof String,r=n?i:i.url;void 0!==this._url&&(i.url=this._url);r=this.options.cache?r:this._bustCache(r);fetch(r).then(function(t){return t.json()}).then(t).catch(e)},this),this._features={},this._featureLayers={},this._requestCount=0,this.options.start&&this.start()},start:function(){return this._timer||(this._timer=setInterval(L.bind(this.update,this),this.options.interval),this.update()),this},stop:function(){return this._timer&&(clearTimeout(this._timer),delete this._timer),this},isRunning:function(){return this._timer},setUrl:function(t){this._url=t,this.update()},update:function(t){var e,n,r=++this._requestCount,i=L.bind(function(t){return L.bind(function(){if(r===this._requestCount)return t.apply(this,arguments)},this)},this);return t?this._onNewData(!1,t):(e=L.bind(function(t){this._onNewData(!0,t)},this),n=L.bind(this._onError,this),this._src(i(e),i(n))),this},remove:function(t){var e,n,r,i=L.Util.isArray(t)?t:t.features?t.features:[t],o={};for(e=0,n=i.length;e<n;e++)r=this.options.getFeatureId(i[e]),this.removeLayer(this._featureLayers[r]),o[r]=this._features[r],delete this._features[r],delete this._featureLayers[r];return this.fire("update",{features:this._features,enter:{},update:{},exit:o}),this},getLayer:function(t){return this._featureLayers[t]},getFeature:function(t){return this._features[t]},_onNewData:function(t,e){var s,l,u,c=[],h={},f={},n={},p={},d=L.bind(function(t){var e=L.Util.isArray(t)?t:t.features;if(e)for(s=0,l=e.length;s<l;s++)((u=e[s]).geometries||u.geometry||u.features||u.coordinates)&&d(u);else{var n=this.options;if(!n.filter||n.filter(t)){var r=L.GeoJSON.asFeature(t),i=n.getFeatureId(r),o=this._featureLayers[i],a=L.bind(this.options.updateFeature,this)(r,o,this._marker);if(!a){if(!(a=L.GeoJSON.geometryToLayer(t,n)))return;a.defaultOptions=a.options,a.feature=r,n.onEachFeature&&n.onEachFeature(t,a)}a.feature=r,this.resetStyle(a),o?(f[i]=t,o!=a&&(c.push(o),this.addLayer(a))):(h[i]=t,this.addLayer(a)),this._featureLayers[i]=a,this._features[i]=p[i]=r}}},this);for(d(e),t&&(n=this._removeUnknown(p)),s=0;s<c.length;s++)this.removeLayer(c[s]);this.fire("update",{features:this._features,enter:h,update:f,exit:n})},_onError:function(t,e){this.options.logErrors&&console.warn(t,e),this.fire("error",{error:t,message:e})},_removeUnknown:function(t){var e,n={};for(e in this._featureLayers)t[e]||(this.removeLayer(this._featureLayers[e]),n[e]=this._features[e],delete this._featureLayers[e],delete this._features[e]);return n},_bustCache:function(t){return t+L.Util.getParamString({_:(new Date).getTime()},t)}}),L.realtime=function(t,e){return new L.Realtime(t,e)},e.exports=L.Realtime},{}],4:[function(t,e,n){"use strict";L.Marker.include({_slideToUntil:void 0,_slideToDuration:void 0,_slideToLatLng:void 0,_slideFromLatLng:void 0,_slideKeepAtCenter:void 0,_slideDraggingWasAllowed:void 0,slideTo:function(t,e){if(this._map){var n=e&&e.duration?e.duration:500,r=!(!e||!e.keepAtCenter)&&e.keepAtCenter;return this._slideToDuration=n,this._slideToUntil=performance.now()+n,this._slideFromLatLng=this.getLatLng(),this._slideToLatLng=t,this._slideKeepAtCenter=!!r,this._slideDraggingWasAllowed=void 0!==this._slideDraggingWasAllowed?this._slideDraggingWasAllowed:this._map.dragging.enabled(),this._slideKeepAtCenter&&(this._map.dragging.disable(),this._map.doubleClickZoom.disable(),this._map.options.touchZoom="center",this._map.options.scrollWheelZoom="center"),this.fire("movestart"),this._slideTo(),this}},slideCancel:function(){L.Util.cancelAnimFrame(this._slideFrame)},_slideTo:function(){if(this._map){var t=this._slideToUntil-performance.now();if(t<0)return this.setLatLng(this._slideToLatLng),this.fire("moveend"),this._slideDraggingWasAllowed&&(this._map.dragging.enable(),this._map.doubleClickZoom.enable(),this._map.options.touchZoom=!0,this._map.options.scrollWheelZoom=!0),this._slideDraggingWasAllowed=void 0,this;var e=this._map.latLngToContainerPoint(this._slideFromLatLng);if(e.x!==Number.NaN&&e.y!==Number.NaN){var n=this._map.latLngToContainerPoint(this._slideToLatLng),r=(this._slideToDuration-t)/this._slideToDuration,i=n.multiplyBy(r).add(e.multiplyBy(1-r)),o=this._map.containerPointToLatLng(i);this.setLatLng(o),this._slideKeepAtCenter&&this._map.panTo(o,{animate:!1}),this._slideFrame=L.Util.requestAnimFrame(this._slideTo,this)}}}}),L.Marker.addInitHook(function(){this.on("move",this.slideCancel,this)}),L.CircleMarker.include({slideTo:L.Marker.prototype.slideTo,slideCancel:L.Marker.prototype.slideCancel,_slideTo:L.Marker.prototype._slideTo}),L.CircleMarker.addInitHook(function(){this.on("move",this.slideCancel,this)})},{}],5:[function(t,St,Mt){"use strict";(function(){var M,i,s,P,l,a,p,g,u,c,h,f,it,I,d,r,t,n,e,ot,m,o,T,y,_,v,b,at,x,w,L,C,k,E,S,O,N,D,A,R,F,j,B,z,q,U,G,st,V,H,lt,W,X,Y,ut,$,Z,Q,K,J,tt,et,nt,rt,ct,ht,ft,pt,dt,gt,mt,yt,_t,vt,bt,xt,wt,Lt,Ct,kt,Et=[].slice;xt=function(){var n,t,e,r,i;for(n={},r=0,t=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<t;r++)e=i[r],n["[object "+e+"]"]=e.toLowerCase();return function(t){var e;return e=Object.prototype.toString.call(t),n[e]||"object"}}(),G=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),t<e&&(t=e),n<t&&(t=n),t},wt=function(t){return 3<=t.length?[].slice.call(t):t[0]},m=function(t){var e,n;for(t._clipped=!1,t._unclipped=t.slice(0),e=n=0;n<3;e=++n)e<3?((t[e]<0||255<t[e])&&(t._clipped=!0),t[e]<0&&(t[e]=0),255<t[e]&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),1<t[e]&&(t[e]=1));return t._clipped||delete t._unclipped,t},P=Math.PI,mt=Math.round,T=Math.cos,at=Math.floor,ut=Math.pow,st=Math.log,_t=Math.sin,vt=Math.sqrt,I=Math.atan2,lt=Math.max,it=Math.abs,p=2*P,l=P/3,i=P/180,a=180/P,(ot=function(){return arguments[0]instanceof M?arguments[0]:function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,arguments,function(){})}).default=ot,f=[],null!=St&&null!=St.exports&&(St.exports=ot),"function"==typeof define&&define.amd?define([],function(){return ot}):(null!=Mt?Mt:this).chroma=ot,ot.version="1.3.4",h={},c=!(u=[]),M=function(){function t(){var t,e,n,r,i,o,a,s,l;for(o=this,e=[],s=0,r=arguments.length;s<r;s++)null!=(t=arguments[s])&&e.push(t);if(1<e.length&&(a=e[e.length-1]),null!=h[a])o._rgb=m(h[a](wt(e.slice(0,-1))));else{for(c||(u=u.sort(function(t,e){return e.p-t.p}),c=!0),l=0,i=u.length;l<i&&!(a=(n=u[l]).test.apply(n,e));l++);a&&(o._rgb=m(h[a].apply(h,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t.prototype.clone=function(){return ot(me._rgb)},t}(),ot._input=h,ot.brewer=n={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],n)e.push(n[t.toLowerCase()]=n[t])}(),ot.colors=Lt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},j=function(){var t,e,n,r,i,o,a;return r=(e=wt(arguments))[0],t=e[1],n=e[2],o=(r+16)/116,i=isNaN(t)?o:o+t/500,a=isNaN(n)?o:o-n/200,o=s.Yn*B(o),i=s.Xn*B(i),a=s.Zn*B(a),[kt(3.2404542*i-1.5371385*o-.4985314*a),kt(-.969266*i+1.8760108*o+.041556*a),n=kt(.0556434*i-.2040259*o+1.0572252*a),3<e.length?e[3]:1]},kt=function(t){return 255*(t<=.00304?12.92*t:1.055*ut(t,1/2.4)-.055)},B=function(t){return t>s.t1?t*t*t:s.t2*(t-s.t0)},s={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},nt=function(){var t,e,n,r,i,o,a;return n=(r=wt(arguments))[0],e=r[1],t=r[2],o=(i=pt(n,e,t))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},dt=function(t){return(t/=255)<=.04045?t/12.92:ut((t+.055)/1.055,2.4)},Ct=function(t){return t>s.t3?ut(t,1/3):t/s.t2+s.t0},pt=function(){var t,e,n,r;return n=(r=wt(arguments))[0],e=r[1],t=r[2],n=dt(n),e=dt(e),t=dt(t),[Ct((.4124564*n+.3575761*e+.1804375*t)/s.Xn),Ct((.2126729*n+.7151522*e+.072175*t)/s.Yn),Ct((.0193339*n+.119192*e+.9503041*t)/s.Zn)]},ot.lab=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["lab"]),function(){})},h.lab=j,M.prototype.lab=function(){return nt(this._rgb)},d=function(r){var t,e,n,i,o,a,s,l,u,c,h;return 2===(r=function(){var t,e,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(ot(i));return n}()).length?(u=function(){var t,e,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(i.lab());return n}(),o=u[0],a=u[1],t=function(n){var r,t;return t=function(){var t,e;for(e=[],r=t=0;t<=2;r=++t)e.push(o[r]+n*(a[r]-o[r]));return e}(),ot.lab.apply(ot,t)}):3===r.length?(c=function(){var t,e,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],t=function(n){var r,t;return t=function(){var t,e;for(e=[],r=t=0;t<=2;r=++t)e.push((1-n)*(1-n)*o[r]+2*(1-n)*n*a[r]+n*n*s[r]);return e}(),ot.lab.apply(ot,t)}):4===r.length?(h=function(){var t,e,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(i.lab());return n}(),o=h[0],a=h[1],s=h[2],l=h[3],t=function(n){var r,t;return t=function(){var t,e;for(e=[],r=t=0;t<=2;r=++t)e.push((1-n)*(1-n)*(1-n)*o[r]+3*(1-n)*(1-n)*n*a[r]+3*(1-n)*n*n*s[r]+n*n*n*l[r]);return e}(),ot.lab.apply(ot,t)}):5===r.length&&(e=d(r.slice(0,3)),n=d(r.slice(2,5)),t=function(t){return t<.5?e(2*t):n(2*(t-.5))}),t},ot.bezier=function(t){var e;return(e=d(t)).scale=function(){return ot.scale(e)},e},ot.cubehelix=function(a,s,l,u,c){var h,f,e;return null==a&&(a=300),null==s&&(s=-1.5),null==l&&(l=1),null==u&&(u=1),null==c&&(c=[0,1]),h=0,"array"===xt(c)?f=c[1]-c[0]:(f=0,c=[c,c]),(e=function(t){var e,n,r,i,o;return e=p*((a+120)/360+s*t),i=ut(c[0]+f*t,u),n=(0!==h?l[0]+t*h:l)*i*(1-i)/2,r=T(e),o=_t(e),ot(m([255*(i+n*(-.14861*r+1.78277*o)),255*(i+n*(-.29227*r-.90649*o)),255*(i+n*(1.97294*r))]))}).start=function(t){return null==t?a:(a=t,e)},e.rotations=function(t){return null==t?s:(s=t,e)},e.gamma=function(t){return null==t?u:(u=t,e)},e.hue=function(t){return null==t?l:("array"===xt(l=t)?0==(h=l[1]-l[0])&&(l=l[1]):h=0,e)},e.lightness=function(t){return null==t?c:("array"===xt(t)?f=(c=t)[1]-t[0]:(c=[t,t],f=0),e)},e.scale=function(){return ot.scale(e)},e.hue(l),e},ot.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(at(16*Math.random()));return new M(t)},f=[],S=function(t,e,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==xt(t)&&(t=ot(t)),"object"!==xt(e)&&(e=ot(e)),a=0,o=f.length;a<o;a++)if(r===(i=f[a])[0]){s=i[1](t,e,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(t.alpha()+n*(e.alpha()-t.alpha()))},ot.interpolate=S,M.prototype.interpolate=function(t,e,n){return S(this,t,e,n)},ot.mix=S,M.prototype.mix=M.prototype.interpolate,h.rgb=function(){var t,e,n,r;for(t in n=[],e=wt(arguments))r=e[t],n.push(r);return n},ot.rgb=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["rgb"]),function(){})},M.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},M.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(t){var e;return e=wt(arguments),"array"===xt(e)&&3===e.length?"rgb":4===e.length&&"number"===xt(e[3])&&0<=e[3]&&e[3]<=1?"rgb":void 0}}),h.lrgb=h.rgb,D=function(t,e,n,r){var i,o;return i=t._rgb,o=e._rgb,new M(vt(ut(i[0],2)*(1-n)+ut(o[0],2)*n),vt(ut(i[1],2)*(1-n)+ut(o[1],2)*n),vt(ut(i[2],2)*(1-n)+ut(o[2],2)*n),r)},g=function(t){var e,n,r,i,o;for(e=1/t.length,o=[0,0,0,0],r=0,n=t.length;r<n;r++)i=t[r]._rgb,o[0]+=ut(i[0],2)*e,o[1]+=ut(i[1],2)*e,o[2]+=ut(i[2],2)*e,o[3]+=i[3]*e;return o[0]=vt(o[0]),o[1]=vt(o[1]),o[2]=vt(o[2]),new M(o)},f.push(["lrgb",D]),ot.average=function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d;if(null==e&&(e="rgb"),c=t.length,l=(t=t.map(function(t){return ot(t)})).splice(0,1)[0],"lrgb"===e)return g(t);for(u in o=[],s=a=0,p=l.get(e))p[u]=p[u]||0,o.push(isNaN(p[u])?0:1),"h"!==e.charAt(u)||isNaN(p[u])||(n=p[u]/180*P,a+=T(n),s+=_t(n));for(r=l.alpha(),f=0,h=t.length;f<h;f++)for(u in d=(i=t[f]).get(e),r+=i.alpha(),p)isNaN(d[u])||(p[u]+=d[u],o[u]+=1,"h"===e.charAt(u)&&(n=p[u]/180*P,a+=T(n),s+=_t(n)));for(u in p)if(p[u]=p[u]/o[u],"h"===e.charAt(u)){for(n=I(s/o[u],a/o[u])/P*180;n<0;)n+=360;for(;360<=n;)n-=360;p[u]=n}return ot(p,e).alpha(r/c)},w=function(t){var e,n;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(n=parseInt(t,16))>>16,n>>8&255,255&n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(n=parseInt(t,16))>>24&255,n>>16&255,n>>8&255,mt((255&n)/255*100)/100];if(null!=h.css&&(e=h.css(t)))return e;throw"unknown color: "+t},K=function(t,e){var n,r,i,o,a,s;return null==e&&(e="rgb"),a=t[0],i=t[1],r=t[2],n=t[3],a=Math.round(a),i=Math.round(i),r=Math.round(r),s=(s="000000"+(a<<16|i<<8|r).toString(16)).substr(s.length-6),o=(o="0"+mt(255*n).toString(16)).substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},h.hex=function(t){return w(t)},ot.hex=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["hex"]),function(){})},M.prototype.hex=function(t){return null==t&&(t="rgb"),K(this._rgb,t)},u.push({p:4,test:function(t){if(1===arguments.length&&"string"===xt(t))return"hex"}}),k=function(){var t,e,n,r,i,o,a,s,l,u,c,h,f,p;if(i=(t=wt(arguments))[0],c=t[1],a=t[2],0===c)l=r=e=255*a;else{for(n=[0,0,0],h=2*a-(f=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),1<p[o]&&(p[o]-=1),6*p[o]<1?n[o]=h+6*(f-h)*p[o]:2*p[o]<1?n[o]=f:3*p[o]<2?n[o]=h+(f-h)*(2/3-p[o])*6:n[o]=h;l=(u=[mt(255*n[0]),mt(255*n[1]),mt(255*n[2])])[0],r=u[1],e=u[2]}return 3<t.length?[l,r,e,t[3]]:[l,r,e]},tt=function(t,e,n){var r,i,o,a,s;return void 0!==t&&3<=t.length&&(t=(a=t)[0],e=a[1],n=a[2]),t/=255,e/=255,n/=255,o=Math.min(t,e,n),i=((lt=Math.max(t,e,n))+o)/2,lt===o?(s=0,r=Number.NaN):s=i<.5?(lt-o)/(lt+o):(lt-o)/(2-lt-o),t===lt?r=(e-n)/(lt-o):e===lt?r=2+(n-t)/(lt-o):n===lt&&(r=4+(t-e)/(lt-o)),(r*=60)<0&&(r+=360),[r,s,i]},ot.hsl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["hsl"]),function(){})},h.hsl=k,M.prototype.hsl=function(){return tt(this._rgb)},E=function(){var t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y;if(i=(t=wt(arguments))[0],g=t[1],y=t[2],y*=255,0===g)l=r=e=y;else switch(360===i&&(i=0),360<i&&(i-=360),i<0&&(i+=360),i/=60,o=at(i),n=i-o,a=y*(1-g),s=y*(1-g*n),m=y*(1-g*(1-n)),o){case 0:l=(u=[y,m,a])[0],r=u[1],e=u[2];break;case 1:l=(c=[s,y,a])[0],r=c[1],e=c[2];break;case 2:l=(h=[a,y,m])[0],r=h[1],e=h[2];break;case 3:l=(f=[a,s,y])[0],r=f[1],e=f[2];break;case 4:l=(p=[m,a,y])[0],r=p[1],e=p[2];break;case 5:l=(d=[y,a,s])[0],r=d[1],e=d[2]}return[l,r,e,3<t.length?t[3]:1]},et=function(){var t,e,n,r,i,o,a,s,l;return o=(a=wt(arguments))[0],n=a[1],t=a[2],i=Math.min(o,n,t),e=(lt=Math.max(o,n,t))-i,l=lt/255,0===lt?(r=Number.NaN,s=0):(s=e/lt,o===lt&&(r=(n-t)/e),n===lt&&(r=2+(t-o)/e),t===lt&&(r=4+(o-n)/e),(r*=60)<0&&(r+=360)),[r,s,l]},ot.hsv=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["hsv"]),function(){})},h.hsv=E,M.prototype.hsv=function(){return et(this._rgb)},X=function(t){return"number"===xt(t)&&0<=t&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},ht=function(){var t;return((t=wt(arguments))[0]<<16)+(t[1]<<8)+t[2]},ot.num=function(t){return new M(t,"num")},M.prototype.num=function(t){return null==t&&(t="rgb"),ht(this._rgb,t)},h.num=X,u.push({p:1,test:function(t){if(1===arguments.length&&"number"===xt(t)&&0<=t&&t<=16777215)return"num"}}),x=function(){var t,e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v;if(s=(n=wt(arguments))[0],i=n[1],e=n[2],a=a/100*255,t=255*(i/=100),0===i)h=a=r=e;else switch(360===s&&(s=0),360<s&&(s-=360),s<0&&(s+=360),s/=60,l=at(s),o=s-l,u=e*(1-i),c=u+t*(1-o),_=u+t*o,v=u+t,l){case 0:h=(f=[v,_,u])[0],a=f[1],r=f[2];break;case 1:h=(p=[c,v,u])[0],a=p[1],r=p[2];break;case 2:h=(d=[u,v,_])[0],a=d[1],r=d[2];break;case 3:h=(g=[u,c,v])[0],a=g[1],r=g[2];break;case 4:h=(m=[_,u,v])[0],a=m[1],r=m[2];break;case 5:h=(y=[v,u,c])[0],a=y[1],r=y[2]}return[h,a,r,3<n.length?n[3]:1]},Q=function(){var t,e,n,r,i,o,a,s,l;return s=(l=wt(arguments))[0],i=l[1],e=l[2],a=Math.min(s,i,e),n=100*(r=(lt=Math.max(s,i,e))-a)/255,t=a/(255-r)*100,0===r?o=Number.NaN:(s===lt&&(o=(i-e)/r),i===lt&&(o=2+(e-s)/r),e===lt&&(o=4+(s-i)/r),(o*=60)<0&&(o+=360)),[o,n,t]},ot.hcg=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["hcg"]),function(){})},h.hcg=x,M.prototype.hcg=function(){return Q(this._rgb)},y=function(t){var e,n,r,i,o,a,s,l;if(t=t.toLowerCase(),null!=ot.colors&&ot.colors[t])return w(ot.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=mt(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=mt(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=k(r))[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=o.slice(1,4))[1]*=.01,r[2]*=.01,(s=k(r))[3]=+o[4]);return s},Z=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(mt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(mt).join(",")+","+t[3]+")":void 0},gt=function(t){return mt(100*t)/100},C=function(t,e){var n;return n=e<1?"hsla":"hsl",t[0]=gt(t[0]||0),t[1]=gt(100*t[1])+"%",t[2]=gt(100*t[2])+"%","hsla"===n&&(t[3]=e),n+"("+t.join(",")+")"},h.css=function(t){return y(t)},ot.css=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["css"]),function(){})},M.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?Z(this._rgb):"hsl"===t.slice(0,3)?C(this.hsl(),this.alpha()):void 0},h.named=function(t){return w(Lt[t])},u.push({p:5,test:function(t){if(1===arguments.length&&null!=Lt[t])return"named"}}),M.prototype.name=function(t){var e,n;for(n in arguments.length&&(Lt[t]&&(this._rgb=w(Lt[t])),this._rgb[3]=1),e=this.hex(),Lt)if(e===Lt[n])return n;return e},z=function(){var t,e,n,r;return n=(r=wt(arguments))[0],t=r[1],e=r[2],[n,T(e*=i)*t,_t(e)*t]},q=function(){var t,e,n,r,i,o,a,s,l;return a=(n=wt(arguments))[0],i=n[1],o=n[2],t=(s=z(a,i,o))[0],e=s[1],r=s[2],[(l=j(t,e,r))[0],l[1],r=l[2],3<n.length?n[3]:1]},F=function(){var t,e,n,r,i,o;return i=(o=wt(arguments))[0],t=o[1],e=o[2],n=vt(t*t+e*e),r=(I(e,t)*a+360)%360,0===mt(1e4*n)&&(r=Number.NaN),[i,n,r]},rt=function(){var t,e,n,r,i,o,a;return i=(o=wt(arguments))[0],n=o[1],e=o[2],r=(a=nt(i,n,e))[0],t=a[1],e=a[2],F(r,t,e)},ot.lch=function(){var t;return t=wt(arguments),new M(t,"lch")},ot.hcl=function(){var t;return t=wt(arguments),new M(t,"hcl")},h.lch=q,h.hcl=function(){var t,e,n,r;return e=(r=wt(arguments))[0],t=r[1],n=r[2],q([n,t,e])},M.prototype.lch=function(){return rt(this._rgb)},M.prototype.hcl=function(){return rt(this._rgb).reverse()},$=function(t){var e,n,r,i,o,a;return null==t&&(t="rgb"),o=(a=wt(arguments))[0],r=a[1],e=a[2],r/=255,e/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(r,e))))*(n=i<1?1/(1-i):0),(1-r-i)*n,(1-e-i)*n,i]},o=function(){var t,e,n,r,i,o;return n=(e=wt(arguments))[0],i=e[1],o=e[2],r=e[3],t=4<e.length?e[4]:1,1===r?[0,0,0,t]:[1<=n?0:255*(1-n)*(1-r),1<=i?0:255*(1-i)*(1-r),1<=o?0:255*(1-o)*(1-r),t]},h.cmyk=function(){return o(wt(arguments))},ot.cmyk=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["cmyk"]),function(){})},M.prototype.cmyk=function(){return $(this._rgb)},h.gl=function(){var t,n,e,r,i;for(r=function(){var t,e;for(n in e=[],t=wt(arguments))i=t[n],e.push(i);return e}.apply(this,arguments),t=e=0;e<=2;t=++e)r[t]*=255;return r},ot.gl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["gl"]),function(){})},M.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},ct=function(t,e,n){var r;return t=(r=wt(arguments))[0],e=r[1],n=r[2],.2126*(t=V(t))+.7152*(e=V(e))+.0722*(n=V(n))},V=function(t){return(t/=255)<=.03928?t/12.92:ut((t+.055)/1.055,2.4)},R=function(t,e,n,r){var i,o;return i=t._rgb,o=e._rgb,new M(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),r)},f.push(["rgb",R]),M.prototype.luminance=function(i,o){var t,a,s;return null==o&&(o="rgb"),arguments.length?(0===i?this._rgb=[0,0,0,this._rgb[3]]:1===i?this._rgb=[255,255,255,this._rgb[3]]:(1e-7,a=20,s=function(t,e){var n,r;return n=(r=t.interpolate(e,.5,o)).luminance(),Math.abs(i-n)<1e-7||!a--?r:i<n?s(t,r):s(r,e)},t=ct(this._rgb),this._rgb=(i<t?s(ot("black"),this):s(this,ot("white"))).rgba()),this):ct(this._rgb)},bt=function(t){var e,n,r,i;return(i=t/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*st(n),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*st(e)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*st(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*st(n),e=255),[r,n,e]},ft=function(){var t,e,n,r,i,o,a;for(r=(i=wt(arguments))[0],i[1],t=i[2],n=1e3,e=4e4,.4;.4<e-n;)(o=bt(a=.5*(e+n)))[2]/o[0]>=t/r?e=a:n=a;return mt(a)},ot.temperature=ot.kelvin=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["temperature"]),function(){})},h.temperature=h.kelvin=h.K=bt,M.prototype.temperature=function(){return ft(this._rgb)},M.prototype.kelvin=M.prototype.temperature,ot.contrast=function(t,e){var n,r,i,o;return"string"!==(i=xt(t))&&"number"!==i||(t=new M(t)),"string"!==(o=xt(e))&&"number"!==o||(e=new M(e)),n=t.luminance(),(r=e.luminance())<n?(n+.05)/(r+.05):(r+.05)/(n+.05)},ot.distance=function(t,e,n){var r,i,o,a,s,l,u;for(i in null==n&&(n="lab"),"string"!==(s=xt(t))&&"number"!==s||(t=new M(t)),"string"!==(l=xt(e))&&"number"!==l||(e=new M(e)),o=t.get(n),a=e.get(n),u=0,o)u+=(r=(o[i]||0)-(a[i]||0))*r;return Math.sqrt(u)},ot.deltaE=function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w,L,C,k,E,S;for(null==n&&(n=1),null==r&&(r=1),"string"!==(_=xt(t))&&"number"!==_||(t=new M(t)),"string"!==(v=xt(e))&&"number"!==v||(e=new M(e)),i=(b=t.lab())[0],a=b[1],l=b[2],o=(x=e.lab())[0],s=x[1],u=x[2],c=vt(a*a+l*l),h=vt(s*s+u*u),L=i<16?.511:.040975*i/(1+.01765*i),w=.0638*c/(1+.0131*c)+.638,y=c<1e-6?0:180*I(l,a)/P;y<0;)y+=360;for(;360<=y;)y-=360;return C=164<=y&&y<=345?.56+it(.2*T(P*(y+168)/180)):.36+it(.4*T(P*(y+35)/180)),m=vt((f=c*c*c*c)/(f+1900)),vt((k=(i-o)/(n*L))*k+(E=(g=c-h)/(r*w))*E+((p=a-s)*p+(d=l-u)*d-g*g)/((S=w*(m*C+1-m))*S))},M.prototype.get=function(t){var e,n,r,i,o;return this,r=(i=t.split("."))[0],e=i[1],o=this[r](),e?-1<(n=r.indexOf(e))?o[n]:console.warn("unknown channel "+e+" in mode "+r):o},M.prototype.set=function(t,e){var n,r,i,o,a;if(this,i=(o=t.split("."))[0],n=o[1])if(a=this[i](),-1<(r=i.indexOf(n)))if("string"===xt(e))switch(e.charAt(0)){case"+":case"-":a[r]+=+e;break;case"*":a[r]*=+e.substr(1);break;case"/":a[r]/=+e.substr(1);break;default:a[r]=+e}else a[r]=e;else console.warn("unknown channel "+n+" in mode "+i);else a=e;return ot(a,i).alpha(this.alpha())},M.prototype.clipped=function(){return this._rgb._clipped||!1},M.prototype.alpha=function(t){return arguments.length?ot.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},M.prototype.darken=function(t){var e;return null==t&&(t=1),(e=this.lab())[0]-=s.Kn*t,ot.lab(e).alpha(this.alpha())},M.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},M.prototype.darker=M.prototype.darken,M.prototype.brighter=M.prototype.brighten,M.prototype.saturate=function(t){var e;return null==t&&(t=1),(e=this.lch())[1]+=t*s.Kn,e[1]<0&&(e[1]=0),ot.lch(e).alpha(this.alpha())},M.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},M.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),ot(e[0]*t,e[1]*t,e[2]*t,t)},W=function(t,e){return t*e/255},_=function(t,e){return e<t?e:t},U=function(t,e){return e<t?t:e},yt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Y=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},e=function(t,e){return 255*(1-(1-e/255)/(t/255))},v=function(t,e){return 255===t?255:255<(t=e/255*255/(1-t/255))?255:t},(r=function(t,e,n){if(!r[n])throw"unknown blend mode "+n;return r[n](t,e)}).normal=(t=function(i){return function(t,e){var n,r;return n=ot(e).rgb(),r=ot(t).rgb(),ot(i(n,r),"rgb")}})((b=function(o){return function(t,e){var n,r,i;for(i=[],n=r=0;r<=3;n=++r)i[n]=o(t[n],e[n]);return i}})(function(t,e){return t})),r.multiply=t(b(W)),r.screen=t(b(yt)),r.overlay=t(b(Y)),r.darken=t(b(_)),r.lighten=t(b(U)),r.dodge=t(b(v)),r.burn=t(b(e)),ot.blend=r,ot.analyze=function(t){var e,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,e=t.length;n<e;n++)null==(i=t[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(t,e){return ot.limits(r,t,e)},r},ot.scale=function(c,t){var h,u,f,e,p,d,g,m,y,n,_,v,r,b,x,w,L,s,i,C;return m="rgb",y=ot("#ccc"),p=[r=0,1],v=[],h=!(_=[0,0]),n=!(f=[]),g=0,u={},b=!(e=!(d=1)),i=function(t){var e,n,r,i,o,a;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===xt(t)&&null!=ot.brewer&&(t=ot.brewer[t]||ot.brewer[t.toLowerCase()]||t),"array"===xt(t)){for(e=r=0,i=(t=t.slice(0)).length-1;0<=i?r<=i:i<=r;e=0<=i?++r:--r)n=t[e],"string"===xt(n)&&(t[e]=ot(n));for(e=a=v.length=0,o=t.length-1;0<=o?a<=o:o<=a;e=0<=o?++a:--a)v.push(e/(t.length-1))}return s(),f=t},w=function(t){var e,n;if(null!=h){for(n=h.length-1,e=0;e<n&&t>=h[e];)e++;return e-1}return 0},C=function(t){return t},L=function(t,e){var n,r,i,o,a,s,l;if(null==e&&(e=!1),isNaN(t))return y;if(e?l=t:h&&2<h.length?(l=w(t)/(h.length-2),l=_[0]+l*(1-_[0]-_[1])):d!==g?(l=(t-g)/(d-g),l=_[0]+l*(1-_[0]-_[1]),l=Math.min(1,Math.max(0,l))):l=1,e||(l=C(l)),i=Math.floor(1e4*l),b&&u[i])n=u[i];else{if("array"===xt(f))for(r=o=0,s=v.length-1;0<=s?o<=s:s<=o;r=0<=s?++o:--o){if(a=v[r],l<=a){n=f[r];break}if(a<=l&&r===v.length-1){n=f[r];break}if(a<l&&l<v[r+1]){l=(l-a)/(v[r+1]-a),n=ot.interpolate(f[r],f[r+1],l,m);break}}else"function"===xt(f)&&(n=f(l));b&&(u[i]=n)}return n},s=function(){return u={}},i(c),(x=function(t){var e;return e=ot(L(t)),n&&e[n]?e[n]():e}).classes=function(t){var e;return null!=t?("array"===xt(t)?p=[(h=t)[0],t[t.length-1]]:(e=ot.analyze(p),h=0===t?[e.min,e.max]:ot.limits(e,"e",t)),x):h},x.domain=function(t){var e,n,r,i,o,a,s;if(!arguments.length)return p;if(g=t[0],d=t[t.length-1],v=[],r=f.length,t.length===r&&g!==d)for(o=0,i=t.length;o<i;o++)n=t[o],v.push((n-g)/(d-g));else for(e=s=0,a=r-1;0<=a?s<=a:a<=s;e=0<=a?++s:--s)v.push(e/(r-1));return p=[g,d],x},x.mode=function(t){return arguments.length?(m=t,s(),x):m},x.range=function(t,e){return i(t),x},x.out=function(t){return n=t,x},x.spread=function(t){return arguments.length?(r=t,x):r},x.correctLightness=function(t){return null==t&&(t=!0),e=t,s(),C=e?function(t){var e,n,r,i,o,a,s,l,u;for(e=L(0,!0).lab()[0],n=L(1,!0).lab()[0],s=n<e,r=L(t,!0).lab()[0],i=r-(o=e+(n-e)*t),l=0,u=1,a=20;.01<Math.abs(i)&&0<a--;)s&&(i*=-1),t+=i<0?.5*(u-(l=t)):.5*(l-(u=t)),r=L(t,!0).lab()[0],i=r-o;return t}:function(t){return t},x},x.padding=function(t){return null!=t?("number"===xt(t)&&(t=[t,t]),_=t,x):_},x.colors=function(e,n){var r,i,t,o,a,s,l,u;if(arguments.length<2&&(n="hex"),a=[],0===arguments.length)a=f.slice(0);else if(1===e)a=[x(.5)];else if(1<e)i=p[0],r=p[1]-i,a=function(){s=[];for(var t=0;0<=e?t<e:e<t;0<=e?t++:t--)s.push(t);return s}.apply(this).map(function(t){return x(i+t/(e-1)*r)});else{if(c=[],l=[],h&&2<h.length)for(t=u=1,o=h.length;1<=o?u<o:o<u;t=1<=o?++u:--u)l.push(.5*(h[t-1]+h[t]));else l=p;a=l.map(function(t){return x(t)})}return ot[n]&&(a=a.map(function(t){return t[n]()})),a},x.cache=function(t){return null!=t?b=t:b},x},null==ot.scales&&(ot.scales={}),ot.scales.cool=function(){return ot.scale([ot.hsl(180,1,.9),ot.hsl(250,.7,.4)])},ot.scales.hot=function(){return ot.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},ot.analyze=function(t,n,r){var i,e,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),i=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},l=function(t,e){if(r(t,e))return i(null!=n&&"function"===xt(n)?n(t):null!=n&&"string"===xt(n)||"number"===xt(n)?t[n]:t)},"array"===xt(t))for(a=0,o=t.length;a<o;a++)l(t[a]);else for(e in t)l(t[e],e);return s.domain=[s.min,s.max],s.limits=function(t,e){return ot.limits(s,t,e)},s},ot.limits=function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w,L,C,k,E,S,M,P,I,T,O,N,D,A,R,F,j,B,z,q,U,G,V,H,W,X,Y,$,Z,Q,K,J,tt,et,nt,rt;if(null==e&&(e="equal"),null==n&&(n=7),"array"===xt(t)&&(t=ot.analyze(t)),S=t.min,lt=t.max,t.sum,nt=t.values.sort(function(t,e){return t-e}),1===n)return[S,lt];if(k=[],"c"===e.substr(0,1)&&(k.push(S),k.push(lt)),"e"===e.substr(0,1)){for(k.push(S),w=N=1,F=n-1;1<=F?N<=F:F<=N;w=1<=F?++N:--N)k.push(S+w/n*(lt-S));k.push(lt)}else if("l"===e.substr(0,1)){if(S<=0)throw"Logarithmic scales are only possible for values > 0";for(M=Math.LOG10E*st(S),E=Math.LOG10E*st(lt),k.push(S),w=rt=1,j=n-1;1<=j?rt<=j:j<=rt;w=1<=j?++rt:--rt)k.push(ut(10,M+w/n*(E-M)));k.push(lt)}else if("q"===e.substr(0,1)){for(k.push(S),w=r=1,V=n-1;1<=V?r<=V:V<=r;w=1<=V?++r:--r)D=(nt.length-1)*w/n,(A=at(D))===D?k.push(nt[A]):(R=D-A,k.push(nt[A]*(1-R)+nt[A+1]*R));k.push(lt)}else if("k"===e.substr(0,1)){for(I=nt.length,m=new Array(I),b=new Array(n),K=!0,T=0,_=null,(_=[]).push(S),w=i=1,H=n-1;1<=H?i<=H:H<=i;w=1<=H?++i:--i)_.push(S+w/n*(lt-S));for(_.push(lt);K;){for(L=o=0,W=n-1;0<=W?o<=W:W<=o;L=0<=W?++o:--o)b[L]=0;for(w=a=0,X=I-1;0<=X?a<=X:X<=a;w=0<=X?++a:--a){for(et=nt[w],P=Number.MAX_VALUE,L=s=0,Y=n-1;0<=Y?s<=Y:Y<=s;L=0<=Y?++s:--s)(x=it(_[L]-et))<P&&(P=x,y=L);b[y]++,m[w]=y}for(O=new Array(n),L=l=0,$=n-1;0<=$?l<=$:$<=l;L=0<=$?++l:--l)O[L]=null;for(w=u=0,Z=I-1;0<=Z?u<=Z:Z<=u;w=0<=Z?++u:--u)null===O[v=m[w]]?O[v]=nt[w]:O[v]+=nt[w];for(L=c=0,Q=n-1;0<=Q?c<=Q:Q<=c;L=0<=Q?++c:--c)O[L]*=1/b[L];for(K=!1,L=h=0,B=n-1;0<=B?h<=B:B<=h;L=0<=B?++h:--h)if(O[L]!==_[w]){K=!0;break}_=O,200<++T&&(K=!1)}for(C={},L=f=0,z=n-1;0<=z?f<=z:z<=f;L=0<=z?++f:--f)C[L]=[];for(w=p=0,q=I-1;0<=q?p<=q:q<=p;w=0<=q?++p:--p)C[v=m[w]].push(nt[w]);for(J=[],L=d=0,U=n-1;0<=U?d<=U:U<=d;L=0<=U?++d:--d)J.push(C[L][0]),J.push(C[L][C[L].length-1]);for(J=J.sort(function(t,e){return t-e}),k.push(J[0]),w=g=1,G=J.length-1;g<=G;w=g+=2)tt=J[w],isNaN(tt)||-1!==k.indexOf(tt)||k.push(tt)}return k},L=function(t,e,n){var r,i,o,a;return t=(r=wt(arguments))[0],e=r[1],n=r[2],isNaN(t)&&(t=0),(t/=360)<1/3?o=1-((i=(1-e)/3)+(a=(1+e*T(p*t)/T(l-p*t))/3)):t<2/3?i=1-((a=(1-e)/3)+(o=(1+e*T(p*(t-=1/3))/T(l-p*t))/3)):a=1-((o=(1-e)/3)+(i=(1+e*T(p*(t-=2/3))/T(l-p*t))/3)),[255*(a=G(n*a*3)),255*(o=G(n*o*3)),255*(i=G(n*i*3)),3<r.length?r[3]:1]},J=function(){var t,e,n,r,i,o,a;return i=(o=wt(arguments))[0],e=o[1],t=o[2],p=2*Math.PI,i/=255,e/=255,t/=255,0===(a=1-Math.min(i,e,t)/(r=(i+e+t)/3))?n=0:(n=(i-e+(i-t))/2,n/=Math.sqrt((i-e)*(i-e)+(i-t)*(e-t)),n=Math.acos(n),e<t&&(n=p-n),n/=p),[360*n,a,r]},ot.hsi=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(M,Et.call(arguments).concat(["hsi"]),function(){})},h.hsi=L,M.prototype.hsi=function(){return J(this._rgb)},O=function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p;return"hsl"===r?(f=t.hsl(),p=e.hsl()):"hsv"===r?(f=t.hsv(),p=e.hsv()):"hcg"===r?(f=t.hcg(),p=e.hcg()):"hsi"===r?(f=t.hsi(),p=e.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",f=t.hcl(),p=e.hcl()),"h"===r.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=p[0],h=p[1],l=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===r||(u=h)):(i=o,1!==l&&0!==l||"hsv"===r||(u=c)):i=o+n*(o<a&&180<a-o?a-(o+360):a<o&&180<o-a?a+360-o:a-o),null==u&&(u=c+n*(h-c)),ot[r](i,u,s+n*(l-s))},A=function(t,e,n,r){var i,o;return i=t.num(),o=e.num(),ot.num(i+(o-i)*n,"num")},(f=f.concat(function(){var t,e,n,r;for(r=[],e=0,t=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)H=n[e],r.push([H,O]);return r}())).push(["num",A]),N=function(t,e,n,r){var i,o;return i=t.lab(),o=e.lab(),new M(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),r)},f.push(["lab",N])}).call(void 0)},{}],6:[function(t,e,n){"use strict";L.AreaSelect=L.Class.extend({includes:L.Mixin.Events,options:{width:200,height:300,keepAspectRatio:!1,isCanResize:!0},initialize:function(t){L.Util.setOptions(this,t),this._width=this.options.width,this._height=this.options.height},addTo:function(t){return this.map=t,this._createElements(),this._render(),this},getBounds:function(){var t=this.map.getSize(),e=new L.Point,n=new L.Point;n.x=Math.round((t.x-this._width)/2),e.y=Math.round((t.y-this._height)/2),e.x=t.x-n.x,n.y=t.y-e.y;var r=this.map.containerPointToLatLng(n),i=this.map.containerPointToLatLng(e);return new L.LatLngBounds(r,i)},remove:function(){this.map.off("moveend",this._onMapChange),this.map.off("zoomend",this._onMapChange),this.map.off("resize",this._onMapResize),this._container.parentNode.removeChild(this._container)},setDimensions:function(t){t&&(this._height=parseInt(t.height)||this._height,this._width=parseInt(t.width)||this._width,this._render(),this.fire("change"))},_createElements:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-areaselect-container",this.map._controlContainer),this._topShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._bottomShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._leftShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._rightShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._nwHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._swHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._neHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._seHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this.options.isCanResize&&(this._setUpHandlerEvents(this._nwHandle),this._setUpHandlerEvents(this._neHandle,-1,1),this._setUpHandlerEvents(this._swHandle,1,-1),this._setUpHandlerEvents(this._seHandle,-1,-1)),this.map.on("moveend",this._onMapChange,this),this.map.on("zoomend",this._onMapChange,this),this.map.on("resize",this._onMapResize,this),this.fire("change"))},_setUpHandlerEvents:function(l,u,c){u=u||1,c=c||1;var h=this;L.DomEvent.addListener(l,"mousedown",function n(t){t.stopPropagation(),h.map.dragging.disable(),L.DomEvent.removeListener(this,"mousedown",n);var r=t.pageX,i=t.pageY,o=h._width/h._height,a=h.map.getSize();function s(t){if(h.options.keepAspectRatio){var e=(h._height>=h._width?a.y:a.y*(1/o))-30;h._height+=2*(i-t.originalEvent.pageY)*c,h._height=Math.max(30,h._height),h._height=Math.min(e,h._height),h._width=h._height*o}else h._width+=2*(r-t.originalEvent.pageX)*u,h._height+=2*(i-t.originalEvent.pageY)*c,h._width=Math.max(30,h._width),h._height=Math.max(30,h._height),h._width=Math.min(a.x-30,h._width),h._height=Math.min(a.y-30,h._height);r=t.originalEvent.pageX,i=t.originalEvent.pageY,h._render()}L.DomEvent.addListener(h.map,"mousemove",s),L.DomEvent.addListener(h.map,"mouseup",function t(e){h.map.dragging.enable(),L.DomEvent.removeListener(h.map,"mouseup",t),L.DomEvent.removeListener(h.map,"mousemove",s),L.DomEvent.addListener(l,"mousedown",n),h.fire("change")})})},_onMapResize:function(){this._render()},_onMapChange:function(){this.fire("change")},_render:function(){var t=this.map.getSize(),e=Math.round(this._nwHandle.offsetWidth/2),n=Math.round((t.y-this._height)/2),r=Math.round((t.x-this._width)/2);function i(t,e){t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.bottom=e.bottom+"px",t.style.right=e.right+"px"}i(this._topShade,{width:t.x,height:n,top:0,left:0}),i(this._bottomShade,{width:t.x,height:n,bottom:0,left:0}),i(this._leftShade,{width:r,height:t.y-2*n,top:n,left:0}),i(this._rightShade,{width:r,height:t.y-2*n,top:n,right:0}),i(this._nwHandle,{left:r-e,top:n-7}),i(this._neHandle,{right:r-e,top:n-7}),i(this._swHandle,{left:r-e,bottom:n-7}),i(this._seHandle,{right:r-e,bottom:n-7})}}),L.areaSelect=function(t){return new L.AreaSelect(t)}},{}],7:[function(t,e,n){"use strict";L.Control.CondensedAttribution=L.Control.Attribution.extend({options:{emblem:"?"},onAdd:function(t){var e=parseInt(L.version.split(".")[0]);for(var n in 1<=e&&(t.attributionControl=this),this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return e<1&&t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),L.DomUtil.addClass(this._container,"leaflet-condensed-attribution"),this._container},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML='<div class="attributes-body">'+n.join(" | ")+'</div><div class="attributes-emblem">'+this.options.emblem+"</div>"}}}),L.Map.mergeOptions({attributionControl:!1,condensedAttributionControl:!1}),L.Map.addInitHook(function(){this.options.condensedAttributionControl&&(new L.Control.CondensedAttribution).addTo(this)}),L.control.condensedAttribution=function(t){return new L.Control.CondensedAttribution(t)}},{}],8:[function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};L.Control.Window=L.Control.extend({includes:L.Mixin.Events,options:{element:"map",className:"control-window",visible:!1,title:void 0,closeButton:!0,content:void 0,prompt:void 0,maxWidth:600,modal:!1,position:"center"},initialize:function(t,e){t.hasOwnProperty("options")&&(t=t.getContainer()),e.element=t,L.setOptions(this,e);var n="nonmodal";this.options.modal&&(n="modal"),this._wrapper=L.DomUtil.create("div",n+" leaflet-control-window-wrapper",L.DomUtil.get(this.options.element)),this._container=L.DomUtil.create("div","leaflet-control leaflet-control-window "+this.options.className,this._wrapper),this._container.setAttribute("style","max-width:"+this.options.maxWidth+"px"),this._containerTitleBar=L.DomUtil.create("div","window-titlebar",this._container),this.titleContent=L.DomUtil.create("h2","window-title",this._containerTitleBar),this._containerContent=L.DomUtil.create("div","window-content",this._container),this._containerPromptButtons=L.DomUtil.create("div","promptButtons",this._container),this.options.closeButton&&(this._closeButton=L.DomUtil.create("a","close",this._containerTitleBar),this._closeButton.innerHTML="&times;");var r=L.DomEvent.stopPropagation;if(L.DomEvent.on(this._wrapper,"contextmenu",r).on(this._wrapper,"click",r).on(this._wrapper,"mousedown",r).on(this._wrapper,"touchstart",r).on(this._wrapper,"dblclick",r).on(this._wrapper,"mousewheel",r).on(this._wrapper,"MozMousePixelScroll",r),this.options.closeButton){var i=this._closeButton;L.DomEvent.on(i,"click",this.closeButtonClicked_hide,this)}this.options.title&&this.title(this.options.title),this.options.content&&this.content(this.options.content),"object"==o(this.options.prompt)&&this.prompt(this.options.prompt),this.options.visible&&this.show()},disableBtn:function(){this._btnOK.disabled=!0,this._btnOK.className="disabled"},enableBtn:function(){this._btnOK.disabled=!1,this._btnOK.className=""},title:function(t){if(null==t)return this.options.title;var e=(this.options.title=t)||"";return this.titleContent.innerHTML=e,this},remove:function(){L.DomUtil.get(this.options.element).removeChild(this._wrapper);var t=L.DomEvent.stopPropagation;if(L.DomEvent.off(this._wrapper,"contextmenu",t).off(this._wrapper,"click",t).off(this._wrapper,"mousedown",t).off(this._wrapper,"touchstart",t).off(this._wrapper,"dblclick",t).off(this._wrapper,"mousewheel",t).off(this._wrapper,"MozMousePixelScroll",t),this._closeButton&&this._close){var e=this._closeButton;L.DomEvent.off(e,"click",this.close,this)}return this},mapResized:function(){},show:function(t){t&&(this.options.position=t),L.DomUtil.addClass(this._wrapper,"visible"),this.setContentMaxHeight();var e=this._container.offsetWidth,n=this._container.offsetHeight,r=L.DomUtil.get(this.options.element).getBoundingClientRect(),i=r.right-r.left||Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=r.bottom-r.top||Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=r.top,s=r.left;return"topLeft"==this.options.position?this.showOn([s,a+0]):"left"==this.options.position?this.showOn([s,a+o/2-n/2-8+0]):"bottomLeft"==this.options.position?this.showOn([s,a+o-n-16-0]):"top"==this.options.position?this.showOn([s+i/2-e/2-8,a+0]):"topRight"==this.options.position?this.showOn([s+i-e-16,a+0]):"right"==this.options.position?this.showOn([s+i-e-16,a+o/2-n/2-8+0]):"bottomRight"==this.options.position?this.showOn([s+i-e-16,a+o-n-16-0]):"bottom"==this.options.position?this.showOn([s+i/2-e/2-8,a+o-n-16-0]):this.showOn([s+i/2-e/2-8,a+o/2-n/2-8+0]),this},showOn:function(t){return this.setContentMaxHeight(),L.DomUtil.setPosition(this._container,L.point(Math.round(t[0]),Math.round(t[1]),!0)),new L.Draggable(this._container,this._containerTitleBar).enable(),L.DomUtil.addClass(this._wrapper,"visible"),this.fire("show"),this},hide:function(t){return L.DomUtil.removeClass(this._wrapper,"visible"),this.fire("hide"),this},getContainer:function(){return this._containerContent},content:function(t){return null==t?this.options.content:(this.options.content=t,this.getContainer().innerHTML=t,this)},prompt:function(t){if(null==t)return this.options.prompt;this.options.prompt=t,this.setPromptCallback(t.callback),this.setActionCallback(t.action);var e=this.options.prompt.buttonCancel||"CANCEL",n=this.options.prompt.buttonOK||"OK",r=this.options.prompt.buttonAction||void 0;if(null!=r){var i=L.DomUtil.create("button","",this._containerPromptButtons);L.DomEvent.on(i,"click",this.action,this),i.innerHTML=r}var o=L.DomUtil.create("button","",this._containerPromptButtons);L.DomEvent.on(o,"click",this.promptCallback,this),o.innerHTML=n,this._btnOK=o;var a=L.DomUtil.create("button","",this._containerPromptButtons);return L.DomEvent.on(a,"click",this.close,this),a.innerHTML=e,this},container:function(t){return null==t?this._container.innerHTML:(this._container.innerHTML=t,this.options.closeButton&&(this._closeButton=L.DomUtil.create("a","close",this._container),this._closeButton.innerHTML="&times;",L.DomEvent.on(this._closeButton,"click",this.closeButtonClicked_close,this)),this)},setPromptCallback:function(t){var e=this;"function"!=typeof t&&(t=function(){console.warn("No callback function specified!")});return this.promptCallback=function(){e.close(),t()},this},setActionCallback:function(t){var e=this;"function"!=typeof t&&(t=function(){console.warn("No callback function specified!")});return this.action=function(){e.hide(),t()},this},setContentMaxHeight:function(){var t=68;this.options.title&&(t+=this._containerTitleBar.offsetHeight-36),"object"==o(this.options.prompt)&&(t+=this._containerPromptButtons.offsetHeight-20);var e=L.DomUtil.get(this.options.element).getBoundingClientRect(),n=e.bottom-e.top-t;this._containerContent.setAttribute("style","max-height:"+n+"px")},close:function(){this.hide(),this.remove(),this.fire("close")},closeButtonClicked_hide:function(){this.fire("closeButtonClicked"),this.hide()},closeButtonClicked_close:function(){this.fire("closeButtonClicked"),this.close()}}),L.control.window=function(t,e){return new L.Control.Window(t,e)}},{}],9:[function(t,e,n){"use strict";L.Control.Coordinates=L.Control.extend({options:{position:"bottomright",decimals:4,decimalSeperator:".",labelTemplateLat:"Lat: {y}",labelTemplateLng:"Lng: {x}",labelFormatterLat:void 0,labelFormatterLng:void 0,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1,centerUserCoordinates:!1,markerType:L.marker,markerProps:{}},onAdd:function(t){this._map=t;var e,n,r=this._container=L.DomUtil.create("div","leaflet-control-coordinates"),i=this.options;return this._labelcontainer=L.DomUtil.create("div","uiElement label",r),this._label=L.DomUtil.create("span","labelFirst",this._labelcontainer),this._inputcontainer=L.DomUtil.create("div","uiElement input uiHidden",r),i.useLatLngOrder?(n=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer),e=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer)):(e=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer),n=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer)),e.innerHTML=i.labelTemplateLng.replace("{x}",""),n.innerHTML=i.labelTemplateLat.replace("{y}",""),L.DomEvent.on(this._inputX,"keyup",this._handleKeypress,this),L.DomEvent.on(this._inputY,"keyup",this._handleKeypress,this),t.on("mousemove",this._update,this),t.on("dragstart",this.collapse,this),t.whenReady(this._update,this),this._showsCoordinates=!0,i.enableUserInput&&L.DomEvent.addListener(this._container,"click",this._switchUI,this),r},_createInput:function(t,e){var n=L.DomUtil.create("input",t,e);return n.type="text",L.DomEvent.disableClickPropagation(n),n},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(t){switch(t.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit(),this.collapse();break;default:this._handleSubmit()}},_handleSubmit:function(){var t=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),e=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(void 0!==t&&void 0!==e){var n=this._marker;n||(n=this._marker=this._createNewMarker()).on("click",this._clearMarker,this);var r=new L.LatLng(e,t);n.setLatLng(r),n.addTo(this._map),this.options.centerUserCoordinates&&this._map.setView(r,this._map.getZoom())}},expand:function(){this._showsCoordinates=!1,this._map.off("mousemove",this._update,this),L.DomEvent.addListener(this._container,"mousemove",L.DomEvent.stop),L.DomEvent.removeListener(this._container,"click",this._switchUI,this),L.DomUtil.addClass(this._labelcontainer,"uiHidden"),L.DomUtil.removeClass(this._inputcontainer,"uiHidden")},_createCoordinateLabel:function(t){var e,n,r=this.options;return r.customLabelFcn?r.customLabelFcn(t,r):(e=r.labelLng?r.labelFormatterLng(t.lng):L.Util.template(r.labelTemplateLng,{x:this._getNumber(t.lng,r)}),n=r.labelFormatterLat?r.labelFormatterLat(t.lat):L.Util.template(r.labelTemplateLat,{y:this._getNumber(t.lat,r)}),r.useLatLngOrder?n+" "+e:e+" "+n)},_getNumber:function(t,e){return e.useDMS?L.NumberFormatter.toDMS(t):L.NumberFormatter.round(t,e.decimals,e.decimalSeperator)},collapse:function(){if(!this._showsCoordinates){this._map.on("mousemove",this._update,this),this._showsCoordinates=!0;this.options;if(L.DomEvent.addListener(this._container,"click",this._switchUI,this),L.DomEvent.removeListener(this._container,"mousemove",L.DomEvent.stop),L.DomUtil.addClass(this._inputcontainer,"uiHidden"),L.DomUtil.removeClass(this._labelcontainer,"uiHidden"),this._marker){var t=this._createNewMarker(),e=this._marker.getLatLng();t.setLatLng(e);var n=L.DomUtil.create("div","");L.DomUtil.create("div","",n).innerHTML=this._ordinateLabel(e);var r=L.DomUtil.create("a","",n);r.innerHTML="Remove",r.href="#";var i=L.DomEvent.stopPropagation;L.DomEvent.on(r,"click",i).on(r,"mousedown",i).on(r,"dblclick",i).on(r,"click",L.DomEvent.preventDefault).on(r,"click",function(){this._map.removeLayer(t)},this),t.bindPopup(n),t.addTo(this._map),this._map.removeLayer(this._marker),this._marker=null}}},_switchUI:function(t){L.DomEvent.stop(t),L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._showsCoordinates?this.expand():this.collapse()},onRemove:function(t){t.off("mousemove",this._update,this)},_update:function(t){var e=t.latlng,n=this.options;e&&(e=e.wrap(),this._currentPos=e,this._inputY.value=L.NumberFormatter.round(e.lat,n.decimals,n.decimalSeperator),this._inputX.value=L.NumberFormatter.round(e.lng,n.decimals,n.decimalSeperator),this._label.innerHTML=this._createCoordinateLabel(e))},_createNewMarker:function(){return this.options.markerType(null,this.options.markerProps)}}),L.control.coordinates=function(t){return new L.Control.Coordinates(t)},L.Map.mergeOptions({coordinateControl:!1}),L.Map.addInitHook(function(){this.options.coordinateControl&&(this.coordinateControl=new L.Control.Coordinates,this.addControl(this.coordinateControl))}),L.NumberFormatter={round:function(t,e,n){var r=L.Util.formatNum(t,e)+"",i=r.split(".");if(i[1]){for(var o=e-i[1].length;0<o;o--)i[1]+="0";r=i.join(n||".")}return r},toDMS:function(t){var e=Math.floor(Math.abs(t)),n=60*(Math.abs(t)-e),r=Math.floor(n),i=60*(n-r),o=Math.round(i);60==o&&(r++,o="00"),60==r&&(e++,r="00"),o<10&&(o="0"+o),r<10&&(r="0"+r);var a="";return t<0&&(a="-"),""+a+e+"&deg; "+r+"' "+o+"''"},createValidNumber:function(t,e){if(t&&0<t.length){var n=t.split(e||".");try{var r=Number(n.join("."));if(isNaN(r))return;return r}catch(t){return}}}}},{}],10:[function(t,e,n){"use strict";t("leaflet").GeometryUtil.readableArea=function(t,e){return e?1e4<=t?(1e-6*t).toFixed(2)+" km&sup2":t.toFixed(2)+" m&sup2;":3097600<=(t/=.836127)?(t/3097600).toFixed(2)+" mi&sup2;":4840<=t?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"}},{leaflet:560}],11:[function(t,e,n){"use strict";var o,r,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o=window,r=document,L.drawVersion="0.4.14+6f33f7e",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var n=L.version.split(".");1===parseInt(n[0],10)&&2<=parseInt(n[1],10)?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLatLngs(),r=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(r,!1)}},addVertex:function(t){2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);!this.options.allowIntersection&&e||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,r=e.clientY;this._startPoint.call(this,n,r)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,n=e.clientX,r=e.clientY;this._endPoint.call(this,n,r,t),this._clickHandled=null},_endPoint:function(t,e,n){if(this._mouseDownOrigin){var r=L.point(t,e).distanceTo(this._mouseDownOrigin),i=this._calculateFinishDistance(n.latlng);1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(n.latlng),this._finishShape()):i<10?this._finishShape():Math.abs(r)<9*(o.devicePixelRatio||1)&&this.addVertex(n.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,n,r=t.originalEvent;!r.touches||!r.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=r.touches[0].clientX,n=r.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,n),this._endPoint.call(this,e,n,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(0<this._markers.length){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var r=this._map.latLngToContainerPoint(n.getLatLng()),i=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(i.getLatLng());e=r.distanceTo(o)}else e=1/0;return e},_updateFinishHandler:function(){var t="click";L.Browser.mobile&&(t="touchstart");var e=this._markers.length;1<e&&this._markers[e-1].on(t,this._finishShape,this),2<e&&this._markers[e-2].off(t,this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;0<e&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,r,i,o=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),a=this.options.guidelineDistance,s=this.options.maxGuideLineLength,l=s<o?o-s:a;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<o;l+=this.options.guidelineDistance)n=l/o,r={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},(i=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(i,r)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,r,i=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=i-(e?2:1),r=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[n].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[n].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=r*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?n&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(n)*(this.options.factor||1):this._measurementRunningTotal||0:n&&e?this._measurementRunningTotal+this._map.distance(e,n)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),2<t&&(this._markers[t-1].on("dblclick",this._finishShape,this),3<t&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:(t=this._markers.length<3?L.drawLocal.draw.handlers.polygon.tooltip.cont:L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+=L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return 3<=this._markers.length},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;0<t&&(this._markers[0].off("click",this._finishShape,this),2<t&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),r.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(r,"mouseup",this._onMouseUp,this),L.DomEvent.off(r,"touchend",this._onMouseUp,this),r.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(r,"mouseup",this._onMouseUp,this).on(r,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,r=L.Draw.SimpleShape.prototype._getTooltipText.call(this),i=this._shape,o=this.options.showArea;return i&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=o?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:r.text,subtext:n}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){var e,n=this._map.options.crs,r=n.project(this._startLatLng),i=n.project(t),o=r.distanceTo(i);e=L.GeometryUtil.isVersion07x()?this._startLatLng.distanceTo(t):this._map.distance(this._startLatLng,t),this._shape?this._shape.setRadius(o):(this._shape=new L.Circle(this._startLatLng,o,this.options.shapeOptions),this._map.addLayer(this._shape)),this._shape._radiusMeter=e},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,r=this.options.showRadius,i=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),e=this._shape._radiusMeter?Number(this._shape._radiusMeter).toFixed(1):this._shape.getRadius().toFixed(1);var o="";r&&(o=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,i,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:o})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,r=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=r+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,r,i,o,a=this._defaultShape(),s=0;for(t=0,n=a.length;t<n;t++)if(a[t]instanceof Array)for(var l=0;l<a[t].length;l++)(r=this._createMarker(a[t][l],s++)).on("click",this._onMarkerClick,this),r.on("contextmenu",this._onContextMenu,this),this._markers.push(r);else(r=this._createMarker(a[t],s++)).on("click",this._onMarkerClick,this),r.on("contextmenu",this._onContextMenu,this),this._markers.push(r);for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(i=this._markers[e],o=this._markers[t],this._createMiddleMarker(i,o),this._updatePrevNext(i,o))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,n=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),n.options.poly){var r=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var i=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),r&&r.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:i}),r&&r.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var o=this._poly.getLatLngs();this._poly._convertLatLngs(o,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),r=t.target;L.extend(r._origLatLng,n),r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(e,n){this._markerGroup.eachLayer(function(t){t._index>e&&(t._index+=n)})},_createMiddleMarker:function(e,n){var r,i,t,o=this._getMiddleLatLng(e,n),a=this._createMarker(o);a.setOpacity(.6),e._middleRight=n._middleLeft=a,i=function(){a.off("touchmove",i,this);var t=n._index;a._index=t,a.off("click",r,this).on("click",this._onMarkerClick,this),o.lat=a.getLatLng().lat,o.lng=a.getLatLng().lng,this._spliceLatLngs(t,0,o),this._markers.splice(t,0,a),a.setOpacity(1),this._updateIndexes(t,1),n._index++,this._updatePrevNext(e,a),this._updatePrevNext(a,n),this._poly.fire("editstart")},t=function(){a.off("dragstart",i,this),a.off("dragend",t,this),a.off("touchmove",i,this),this._createMiddleMarker(e,a),this._createMiddleMarker(a,n)},r=function(){i.call(this),t.call(this),this._fireEdit()},a.on("click",r,this).on("dragstart",i,this).on("dragend",t,this).on("touchmove",i,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,r=n.project(t.getLatLng()),i=n.project(e.getLatLng());return n.unproject(r._add(i)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,r=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(r+2)%4],this._toggleCornerMarkers(0,r)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds().getCenter(),n.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=this._shape.getBounds().getCenter(),i=[],o=0,a=n.length;o<a;o++)e=[n[o].lat-r.lat,n[o].lng-r.lng],i.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(i),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng(),n=this._map.options.crs,r=n.project(e),i=n.project(t),o=r.distanceTo(i);o=L.GeometryUtil.isVersion07x()?e.distanceTo(t):this._map.distance(e,t),this._shape._radiusMeter=o,this._shape.setRadius(o),this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(o,!0,this.options.feet,this.options.nautic)}),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var n={};if(void 0!==t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var r=this._map.mouseEventToContainerPoint(n),i=this._map.mouseEventToLayerPoint(n),o=this._map.layerPointToLatLng(i);this._map.fire(e,{latlng:o,layerPoint:i,containerPoint:r,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var t=o.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var t=o.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,r=t.length;n<r;n++)Array.isArray(t[n])?e.push(L.LatLngUtil.cloneLatLngs(t[n])):e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},a={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,r=t.length,i=0,o=Math.PI/180;if(2<r){for(var a=0;a<r;a++)e=t[a],i+=((n=t[(a+1)%r]).lng-e.lng)*o*(2+Math.sin(e.lat*o)+Math.sin(n.lat*o));i=6378137*i*6378137/2}return Math.abs(i)},formattedNumber:function(t,e){var n=parseFloat(t).toFixed(e),r=L.drawLocal.format&&L.drawLocal.format.numeric,i=r&&r.delimiters,o=i&&i.thousands,a=i&&i.decimal;if(o||a){var s=n.split(".");n=o?s[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):s[0],a=a||".",1<s.length&&(n=n+a+s[1])}return n},readableArea:function(t,e,n){var r,i;return n=L.Util.extend({},a,n),e?(i=["ha","m"],type=void 0===e?"undefined":s(e),"string"===type?i=[e]:"boolean"!==type&&(i=e),r=1e6<=t&&-1!==i.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*t,n.km)+" km²":1e4<=t&&-1!==i.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*t,n.ha)+" ha":L.GeometryUtil.formattedNumber(t,n.m)+" m²"):r=3097600<=(t/=.836127)?L.GeometryUtil.formattedNumber(t/3097600,n.mi)+" mi²":4840<=t?L.GeometryUtil.formattedNumber(t/4840,n.ac)+" acres":L.GeometryUtil.formattedNumber(t,n.yd)+" yd²",r},readableDistance:function(t,e,n,r,i){var o;switch(i=L.Util.extend({},a,i),e?"string"==typeof e?e:"metric":n?"feet":r?"nauticalMile":"yards"){case"metric":o=1e3<t?L.GeometryUtil.formattedNumber(t/1e3,i.km)+" km":L.GeometryUtil.formattedNumber(t,i.m)+" m";break;case"feet":t*=3.28083,o=L.GeometryUtil.formattedNumber(t,i.ft)+" ft";break;case"nauticalMile":t*=.53996,o=L.GeometryUtil.formattedNumber(t/1e3,i.nm)+" nm";break;case"yards":default:o=1760<(t*=1.09361)?L.GeometryUtil.formattedNumber(t/1760,i.mi)+" miles":L.GeometryUtil.formattedNumber(t,i.yd)+" yd"}return o},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,r){return this._checkCounterclockwise(t,n,r)!==this._checkCounterclockwise(e,n,r)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,r)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,r=this._getProjectedPoints(),i=r?r.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=i-1;3<=t;t--)if(e=r[t-1],n=r[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._getProjectedPoints(),r=n?n.length:0,i=n?n[r-1]:null,o=r-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(i,t,o,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return!e||(n+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,n,r){var i,o,a=this._getProjectedPoints();r=r||0;for(var s=n;r<s;s--)if(i=a[s-1],o=a[s],L.LineUtil.segmentsIntersect(t,e,i,o))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++)t.push(this._map.latLngToLayerPoint(e[n]));return t}}),L.Polygon.include({intersects:function(){var t,e,n,r,i=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=i.length,e=i[0],n=i[t-1],r=t-2,this._lineSegmentsIntersectsRange(n,e,r,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),r=!1,i="leaflet-draw-toolbar-top";for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&(e=this._toolbars[o].addToolbar(t))&&(r||(L.DomUtil.hasClass(e,i)||L.DomUtil.addClass(e.childNodes[0],i),r=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&2<=parseInt(e[1],10)?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),r=0,i=this._toolbarClass||"",o=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<o.length;e++)o[e].enabled&&this._initModeHandler(o[e].handler,this._toolbarContainer,r++,i,o[e].title);if(r)return this._lastButtonIndex=--r,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,r,i){var o=t.type;this._modes[o]={},this._modes[o].handler=t,this._modes[o].button=this._createButton({type:o,title:i,className:r+"-"+o,container:e,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=n,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!o.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),n=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(n),t.title&&(e.title=t.title,n.innerHTML=t.title),t.text&&(e.innerHTML=t.text,n.innerHTML=t.text);var r=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,r,t.callback,t.context),e},_disposeButton:function(t,e){var n=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,n,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,r,i,o=this._actionsContainer,a=this.getActions(t),s=a.length;for(n=0,r=this._actionButtons.length;n<r;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];o.firstChild;)o.removeChild(o.firstChild);for(var l=0;l<s;l++)"enabled"in a[l]&&!a[l].enabled||(e=L.DomUtil.create("li","",o),i=this._createButton({title:a[l].title,text:a[l].text,container:e,callback:a[l].callback,context:a[l].context}),this._actionButtons.push({button:i,callback:a[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container&&(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?0<t.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<t.subtext.length?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden")),this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(this._visible&&(n.style.visibility="inherit"),L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&2<=parseInt(n[1],10)?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){if(!this._enabled&&this._hasAvailableLayers()){var r=0;this._map.eachLayer(function(t){t.eachLayer&&t.eachLayer(function(t){if(t.getLatLng&&r++,t.getLatLngs){var e=t.getLatLngs();if(e.length&&e[0]instanceof Array)for(var n=0;n<e.length;n++)r+=e[n].length;else r+=e.length}})}),console.log("all point count:"+r);var t=this.options.maxEditPointCount?this.options.maxEditPointCount:1e3;t<r?this._map.fire("draw:error",{allPointCount:r,msg:"too much point to edit (max:"+t+")"}):(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))}},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var e=new L.LayerGroup;this._featureGroup.eachLayer(function(t){t.edited&&(e.addLayer(t),t.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:e})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,r=t.layer||t.target||t;this._backupLayer(r),this.options.poly&&(n=L.Util.extend({},this.options.poly),r.options.poly=n),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=r.options.color,e.fillColor=r.options.fillColor),r.options.original=L.extend({},r.options),r.options.editing=e),r instanceof L.Marker?(r.editing&&r.editing.enable(),r.dragging.enable(),r.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),r=this._map.layerPointToLatLng(n);t.target.setLatLng(r)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var n=L.version.split(".");1===parseInt(n[0],10)&&2<=parseInt(n[1],10)?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length},_findParentDeletableLayer:function(t){var e=this._deletableLayers.getLayers();if(e)for(var n=0;n<e.length;n++)if(t){if(t._leaflet_id===e[n]._leaflet_id)return e[n];for(var r=e[n].getLayers(),i=0;i<r.length;i++)if(t._leaflet_id===r[i]._leaflet_id)return e[n]}return t}})},{}],12:[function(t,e,n){"use strict";var r,i=t("../../../src/kq");var o=((r=i)&&r.__esModule?r:{default:r}).default.Local.Control.draw;L.drawLocal={draw:{toolbar:{actions:{title:o.draw.toolbar.actions.title(),text:o.draw.toolbar.actions.text()},finish:{title:o.draw.toolbar.finish.title(),text:o.draw.toolbar.finish.text()},undo:{title:o.draw.toolbar.undo.title(),text:o.draw.toolbar.undo.text()},buttons:{polyline:o.draw.toolbar.buttons.polyline(),polygon:o.draw.toolbar.buttons.polygon(),rectangle:o.draw.toolbar.buttons.rectangle(),circle:o.draw.toolbar.buttons.circle(),marker:o.draw.toolbar.buttons.marker(),circlemarker:o.draw.toolbar.buttons.circlemarker()}},handlers:{circle:{tooltip:{start:o.draw.handlers.circle.tooltip.start()},radius:o.draw.handlers.circle.radius()},circlemarker:{tooltip:{start:o.draw.handlers.circlemarker.tooltip.start()}},marker:{tooltip:{start:o.draw.handlers.marker.tooltip.start()}},polygon:{tooltip:{start:o.draw.handlers.polygon.tooltip.start(),cont:o.draw.handlers.polygon.tooltip.cont(),end:o.draw.handlers.polygon.tooltip.end()}},polyline:{error:o.draw.handlers.polyline.error(),tooltip:{start:o.draw.handlers.polyline.tooltip.start(),cont:o.draw.handlers.polyline.tooltip.cont(),end:o.draw.handlers.polyline.tooltip.end()}},rectangle:{tooltip:{start:o.draw.handlers.rectangle.tooltip.start()}},simpleshape:{tooltip:{end:o.draw.handlers.simpleshape.tooltip.end()}}}},edit:{toolbar:{actions:{save:{title:o.edit.toolbar.actions.save.title(),text:o.edit.toolbar.actions.save.text()},cancel:{title:o.edit.toolbar.actions.cancel.title(),text:o.edit.toolbar.actions.cancel.text()},clearAll:{title:o.edit.toolbar.actions.clearAll.title(),text:o.edit.toolbar.actions.clearAll.text()}},buttons:{edit:o.edit.toolbar.buttons.edit(),editDisabled:o.edit.toolbar.buttons.editDisabled(),remove:o.edit.toolbar.buttons.remove(),removeDisabled:o.edit.toolbar.buttons.removeDisabled()}},handlers:{edit:{tooltip:{text:o.edit.handlers.edit.tooltip.text(),subtext:o.edit.handlers.edit.tooltip.subtext()}},remove:{tooltip:{text:o.edit.handlers.remove.tooltip.text()}}}},io:{useGeoJSON:o.io.usingGeoJSON(),useShapefile:o.io.usingShapefile(),export:o.io.export(),import:o.io.import()}}},{"../../../src/kq":1075}],13:[function(t,e,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function o(t,e){this.title=t.title,this.stateName=t.stateName?t.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,"")),this.icon.innerHTML=function(t){var e;t.match(/[&;=<>"']/)?e=t:(t=t.replace(/(^\s*|\s*$)/g,""),e=L.DomUtil.create("span",""),0===t.indexOf("fa-")?L.DomUtil.addClass(e,"fa "+t):0===t.indexOf("glyphicon-")?L.DomUtil.addClass(e,"glyphicon "+t):L.DomUtil.addClass(e,t),e=e.outerHTML);return e}(t.icon),this.onClick=L.Util.bind(t.onClick?t.onClick:function(){},e)}L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(t,e){e&&L.Util.setOptions(this,e),this._buildContainer(),this._buttons=[];for(var n=0;n<t.length;n++)t[n]._bar=this,t[n]._container=t[n].button,this._buttons.push(t[n]),this.container.appendChild(t[n].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div","");var t="leaflet-bar easy-button-container leaflet-control";L.Browser.touch&&(t+=" leaflet-touch"),this.options.leafletClasses&&L.DomUtil.addClass(this.container,t),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(t){this._map=t;for(var e=0;e<this._buttons.length;e++)this._buttons[e]._map=t;var n=this._container=this.onAdd(t),r=this.getPosition(),i=t._controlCorners[r];return L.DomUtil.addClass(n,"leaflet-control"),-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}}),L.easyBar=function(){for(var t=[L.Control.EasyBar],e=0;e<arguments.length;e++)t.push(arguments[e]);return new(Function.prototype.bind.apply(L.Control.EasyBar,t))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0,tagName:"button"},initialize:function(t,e,n,r){this.options.states=[],this.options.id=null!=r?r:void 0,this.storage={},"object"===a(arguments[arguments.length-1])&&L.Util.setOptions(this,arguments[arguments.length-1]),0===this.options.states.length&&"string"==typeof t&&"function"==typeof e&&this.options.states.push({icon:t,onClick:e,title:"string"==typeof n?n:""}),this._states=[];for(var i=0;i<this.options.states.length;i++)this._states.push(new o(this.options.states[i],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create(this.options.tagName,""),"button"===this.options.tagName&&this.button.setAttribute("type","button"),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part leaflet-interactive"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop),L.DomEvent.on(this.button,"touchstart",L.DomEvent.stopPropagation),L.DomEvent.addListener(this.button,"click",function(t){L.DomEvent.stop(t),this._currentState.onClick(this,this._map?this._map:null),this._map&&this._map.getContainer().focus()},this),"replace"==this.options.type)this.button.appendChild(this._currentState.icon);else for(var t=0;t<this._states.length;t++)this.button.appendChild(this._states[t].icon)},_currentState:{stateName:"unnamed",icon:document.createElement("span")},_states:null,state:function(t){return"string"==typeof t?this._activateStateNamed(t):"number"==typeof t&&this._activateState(this._states[t]),this},_activateStateNamed:function(t){for(var e=0;e<this._states.length;e++)this._states[e].stateName==t&&this._activateState(this._states[e])},_activateState:function(t){if(t!==this._currentState){"replace"==this.options.type&&(this.button.appendChild(t.icon),this.button.removeChild(this._currentState.icon)),t.title?this.button.title=t.title:this.button.removeAttribute("title");for(var e=0;e<this._states.length;e++)L.DomUtil.removeClass(this._states[e].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[e].icon,t.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,t.stateName+"-active"),this._currentState=t}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},onAdd:function(t){var e=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._anonymousBar=e,this._container=e.container,this._anonymousBar.container}}),L.easyButton=function(){var t=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,t))}}()},{}],14:[function(t,e,n){"use strict";var r;window,r=document,L.ExtraMarkers={},L.ExtraMarkers.version="1.0.1",L.ExtraMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"extra-marker",prefix:"",extraClasses:"",shape:"circle",icon:"",innerHTML:"",markerColor:"red",iconColor:"#fff",number:""},initialize:function(t){t=L.Util.setOptions(this,t)},createIcon:function(){var t=r.createElement("div"),e=this.options;return e.icon&&(t.innerHTML=this._createInner()),e.innerHTML&&(t.innerHTML=e.innerHTML),e.bgPos&&(t.style.backgroundPosition=-e.bgPos.x+"px "+-e.bgPos.y+"px"),this._setIconStyles(t,e.shape+"-"+e.markerColor),t},_createInner:function(){var t="",e="",n=this.options;return n.iconColor&&(t="style='color: "+n.iconColor+"' "),n.number&&(e="number='"+n.number+"' "),"<i "+e+t+"class='"+n.extraClasses+" "+n.prefix+" "+n.icon+"'></i>"},_setIconStyles:function(t,e){var n,r,i=this.options,o=L.point(i["shadow"===e?"shadowSize":"iconSize"]);"shadow"===e?(n=L.point(i.shadowAnchor||i.iconAnchor),r="shadow"):(n=L.point(i.iconAnchor),r="icon"),!n&&o&&(n=o.divideBy(2,!0)),t.className="leaflet-marker-"+r+" extra-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},createShadow:function(){var t=r.createElement("div");return this._setIconStyles(t,"shadow"),t}}),L.ExtraMarkers.icon=function(t){return new L.ExtraMarkers.Icon(t)}},{}],15:[function(t,e,n){"use strict";!function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1,mapContainerID:"map"},onAdd:function(t){var e,n="";return e=t.zoomControl&&!this.options.forceSeparateButton?t.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this.options.content&&(n=this.options.content),this._createButton(this.options.title,"icon iconfont icon-fullscreen",n,e,this.toggleFullScreen,this),this._map.on("enterFullscreen exitFullscreen",this._toggleTitle,this),e},_createButton:function(t,e,n,r,i,o){return this.link=L.DomUtil.create("a",e,r),this.link.href="#",this.link.title=t,this.link.innerHTML=n,this.link.id="kq-fullscreen",L.DomEvent.addListener(this.link,"click touchstart",L.DomEvent.stopPropagation).addListener(this.link,"click",L.DomEvent.preventDefault).addListener(this.link,"click",i,o),L.DomEvent.addListener(this.link,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.link,"mousedown",L.DomEvent.stop),L.DomEvent.addListener(r,a.fullScreenEventName,L.DomEvent.stopPropagation).addListener(r,a.fullScreenEventName,L.DomEvent.preventDefault).addListener(r,a.fullScreenEventName,this._handleEscKey,o),L.DomEvent.addListener(document,a.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,a.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,a.fullScreenEventName,this._handleEscKey,o),this.link},toggleFullScreen:function(){var t=this._map;t._exitFired=!1;var e=document.getElementsByTagName("body");t._isFullscreen?(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.cancelFullScreen(e[0]):L.DomUtil.removeClass(t._container,"leaflet-pseudo-fullscreen"),t.invalidateSize(),t.fire("exitFullscreen"),t._exitFired=!0,t._isFullscreen=!1):(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.requestFullScreen(e[0]):L.DomUtil.addClass(t._container,"leaflet-pseudo-fullscreen"),t.invalidateSize(),t.fire("enterFullscreen"),t._isFullscreen=!0)},_toggleTitle:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel},_handleEscKey:function(){var t=this._map;a.isFullScreen(t)||t._exitFired||(t.fire("exitFullscreen"),t._exitFired=!0,t._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))});var a={supportsFullScreen:!(L.control.fullscreen=function(t){return new L.Control.FullScreen(t)}),isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},t="webkit moz o ms khtml".split(" ");if(void 0!==document.exitFullscreen)a.supportsFullScreen=!0;else{for(var e=0,n=t.length;e<n;e++)if(a.prefix=t[e],void 0!==document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}void 0!==document.msExitFullscreen&&(a.prefix="ms",a.supportsFullScreen=!0)}a.supportsFullScreen&&("ms"===a.prefix?a.fullScreenEventName="MSFullscreenChange":a.fullScreenEventName=a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;case"ms":return document.msFullscreenElement;default:return document[this.prefix+"FullScreen"]}},a.requestFullScreen=function(t){switch(this.prefix){case"":return t.requestFullscreen();case"ms":return t.msRequestFullscreen();default:return t[this.prefix+"RequestFullScreen"]()}},a.cancelFullScreen=function(){switch(this.prefix){case"":return document.exitFullscreen();case"ms":return document.msExitFullscreen();default:return document[this.prefix+"CancelFullScreen"]()}}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var t=jQuery(this);a.supportsFullScreen&&a.requestFullScreen(t)})}),window.fullScreenApi=a}()},{}],16:[function(t,e,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(l){var t=l.Control.extend({options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:20,collapsedHeight:20,collapsedWidth_min:20,collapsedHeight_min:20,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(t,e){l.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=t},onAdd:function(t){this._mainMap=t,this._container=l.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",l.DomEvent.disableClickPropagation(this._container),l.DomEvent.on(this._container,"mousewheel",l.DomEvent.stopPropagation);var e={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs};return e=l.Util.extend(this.options.mapOptions,e),this._miniMap=new l.Map(this._container,e),this._miniMap.createPane("basemapPane"),this._miniMap.getPane("basemapPane").style.zIndex=200,this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(l.Util.bind(function(){this._aimingRect=l.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=l.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){l.Control.prototype.addTo.call(this,t);var e=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(t,e,n,r,i,o){var a=l.DomUtil.create("a",n,r);a.innerHTML=t,a.href="#",a.title=e;var s=l.DomEvent.stopPropagation;return l.DomEvent.on(a,"click",s).on(a,"mousedown",s).on(a,"dblclick",s).on(a,"click",l.DomEvent.preventDefault).on(a,"click",i,o),a},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth_min+"px",this._container.style.height=this.options.collapsedHeight_min+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1},_onMainMapMoved:function(t){if(this._miniMapMoving)this._miniMapMoving=!1;else{var e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),n=this._miniMap.latLngToContainerPoint(e.getSouthWest()),r=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:n,ne:r}}},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new l.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:.3,fillOpacity:.1}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,n=this._miniMap.getZoom()-this._mainMap.getZoom(),r=this._miniMap.getZoom()-this.options.zoomLevelOffset;return n>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=r,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t}});return l.Map.mergeOptions({miniMapControl:!1}),l.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new t).addTo(this))}),t},i=window,"function"==typeof define&&define.amd?define(["leaflet"],r):"object"===(void 0===n?"undefined":o(n))&&(e.exports=r(t("leaflet"))),void 0!==i&&i.L&&(i.L.Control.MiniMap=r(L),i.L.control.minimap=function(t,e){return new i.L.Control.MiniMap(t,e)})},{leaflet:560}],17:[function(n,r,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("object"===(void 0===r?"undefined":i(r))&&"object"===i(r.exports))e=n("leaflet"),r.exports=t(e);else{if(void 0===window.L)throw"Leaflet must be loaded first";t(window.L)}}(function(a){return a.Playback=a.Playback||{},a.Playback.Util=a.Class.extend({statics:{DateStr:function(t){return new Date(t).toLocaleDateString()},TimeStr:function(t){var e=new Date(t),n=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),o=t/1e3,a="AM";return 11<n&&(n%=12,a="PM"),0===n&&(n=12),r<10&&(r="0"+r),i<10&&(i="0"+i),n+":"+r+":"+i+(o-Math.floor(o)).toFixed(2).slice(1)+" "+a},ParseGPX:function(t){for(var e={type:"FeatureCollection",features:[]},n=$.parseXML(t),r=$(n).find("trk"),i=0,o=r.length;i<o;i++){var a=r[i],s={type:"Feature",geometry:{type:"MultiPoint",coordinates:[]},properties:{trk:{},time:[],speed:[],altitude:[],bbox:[]}};s.properties.trk.name=$(a).find("name").text(),s.properties.trk.desc=$(a).find("desc").text(),s.properties.trk.type=$(a).find("type").text(),s.properties.trk.src=$(a).find("src").text();for(var l=$(a).find("trkpt"),u=0,c=l.length;u<c;u++){var h=l[u],f=parseFloat(h.getAttribute("lat")),p=parseFloat(h.getAttribute("lon")),d=$(h).find("time").text(),g=$(h).find("ele").text(),m=new Date(d).getTime(),y=parseFloat(g),_=s.geometry.coordinates,v=s.properties.time,b=s.properties.altitude;_.push([p,f]),v.push(m),b.push(y)}e.features.push(s)}return e}}}),a.Playback=a.Playback||{},a.Playback.MoveableMarker=a.Marker.extend({initialize:function(t,e,n){var r=e.marker||{};this.label_latlng=e.label_latlng,this.label_latlng_precision=e.label_latlng_precision,jQuery.isFunction(r)&&(r=r(n)),a.Marker.prototype.initialize.call(this,t,r),this.popupContent="",this.feature=n,this.is_init_popup=r.is_init_popup,r.getPopup&&(this.popupContent=r.getPopup(n)),e.popups&&this.bindPopup(this.getPopupContent()+t.toString(),{autoClose:e.popups_autoClose,closeOnClick:e.popups_autoClose,autoPan:!1,className:"playback-popup"}),e.tooltips&&this.bindTooltip(this.getPopupContent(),{offset:e.tooltipOffset}),this.on("add",function(){console.log("marker added!"),r.is_init_popup&&this.togglePopup()},this)},getPopupContent:function(){return""!==this.popupContent?"<b>"+this.popupContent+"</b><br/>":""},move:function(t,e){if(a.DomUtil.TRANSITION&&(this._icon&&(this._icon.style[a.DomUtil.TRANSITION]="all "+e+"ms linear",this._popup&&this._popup._wrapper&&(this._popup._wrapper.style[a.DomUtil.TRANSITION]="all "+e+"ms linear")),this._shadow&&(this._shadow.style[a.DomUtil.TRANSITION]="all "+e+"ms linear")),this.setLatLng(t),this._popup){var n=this._latlng.lng.toFixed(this.label_latlng_precision),r=this._latlng.lat.toFixed(this.label_latlng_precision);this._popup.setContent(this.getPopupContent()+this.label_latlng+": "+n+", "+r)}},_old__setPos:a.Marker.prototype._setPos,_updateImg:function(t,e,n){var r="";r+=" translate("+-(e=a.point(n).divideBy(2)._subtract(a.point(e))).x+"px, "+-e.y+"px)",r+=" rotate("+this.options.iconAngle+"deg)",r+=" translate("+e.x+"px, "+e.y+"px)",t.style[a.DomUtil.TRANSFORM]+=r},setIconAngle:function(t){this.options.iconAngle=t,this._map&&this.update()},_setPos:function(t){if(this._icon&&(this._icon.style[a.DomUtil.TRANSFORM]=""),this._shadow&&(this._shadow.style[a.DomUtil.TRANSFORM]=""),this._old__setPos.apply(this,[t]),this.options.iconAngle){var e,n=this.options.icon.options.iconAnchor,r=this.options.icon.options.iconSize;this._icon&&(e=this._icon,this._updateImg(e,n,r)),this._shadow&&(r=this.options.icon.options.shadowSize,e=this._shadow,this._updateImg(e,n,r))}}}),a.Playback=a.Playback||{},a.Playback.Track=a.Class.extend({initialize:function(t,e){var n=(e=e||{}).tickLen||250;this._staleTime=e.staleTime||36e5,this._fadeMarkersWhenStale=e.fadeMarkersWhenStale||!1,this._geoJSON=t,this._tickLen=n,this._ticks=[],this._marker=null,this._orientations=[];var r,i=t.properties.time;this._orientIcon=e.orientIcons;var o,a,s=t.geometry.coordinates,l=s[0],u=s[1],c=i[0],h=c,f=i[1],p=h%n;if(1===i.length)return 0!==p&&(h+=n-p),this._ticks[h]=s[0],this._orientations[h]=0,this._startTime=h,void(this._endTime=h);for(0!==p?(a=(o=n-p)/(f-c),h+=o,this._ticks[h]=this._interpolatePoint(l,u,a)):this._ticks[h]=l,this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h],this._startTime=h,h+=n;h<f;)a=(h-c)/(f-c),this._ticks[h]=this._interpolatePoint(l,u,a),this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h],h+=n;for(var d=1,g=s.length;d<g;d++)for(l=s[d],u=s[d+1],h=c=i[d],f=i[d+1],0!==(p=h%n)&&f?(a=(o=n-p)/(f-c),h+=o,this._ticks[h]=this._interpolatePoint(l,u,a)):this._ticks[h]=l,u?(this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h]):this._orientations[h]=r,h+=n;h<f;)a=(h-c)/(f-c),f-c>e.maxInterpolationTime?this._ticks[h]=l:this._ticks[h]=this._interpolatePoint(l,u,a),u?(this._orientations[h]=this._directionOfPoint(l,u),r=this._orientations[h]):this._orientations[h]=r,h+=n;this._endTime=h-n,this._lastTick=this._ticks[this._endTime]},_interpolatePoint:function(e,n,r){try{var t=[n[0]-e[0],n[1]-e[1]],i=[t[0]*r,t[1]*r];return[e[0]+i[0],e[1]+i[1]]}catch(t){console.log("err: cant interpolate a point"),console.log(["start",e]),console.log(["end",n]),console.log(["ratio",r])}},_directionOfPoint:function(t,e){return this._getBearing(t[1],t[0],e[1],e[0])},_getBearing:function(t,e,n,r){t=this._radians(t),e=this._radians(e),n=this._radians(n);var i=(r=this._radians(r))-e,o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(t/2+Math.PI/4));return Math.abs(i)>Math.PI&&(i=0<i?-(2*Math.PI-i):2*Math.PI+i),(this._degrees(Math.atan2(i,o))+360)%360},_radians:function(t){return t*(Math.PI/180)},_degrees:function(t){return t*(180/Math.PI)},getFirstTick:function(){return this._ticks[this._startTime]},getLastTick:function(){return this._ticks[this._endTime]},getStartTime:function(){return this._startTime},getEndTime:function(){return this._endTime},getTickMultiPoint:function(){for(var t=this.getStartTime(),e=this.getEndTime(),n=[],r=[];t<=e;)r.push(t),n.push(this.tick(t)),t+=this._tickLen;return{type:"Feature",geometry:{type:"MultiPoint",coordinates:n},properties:{time:r}}},trackPresentAtTick:function(t){return t>=this._startTime},trackStaleAtTick:function(t){return this._endTime+this._staleTime<=t},tick:function(t){return t>this._endTime&&(t=this._endTime),t<this._startTime&&(t=this._startTime),this._ticks[t]},courseAtTime:function(t){return t>this._endTime&&(t=this._endTime),t<this._startTime&&(t=this._startTime),this._orientations[t]},setMarker:function(t,e){var n=null;if(n=t?this.tick(t):this.getFirstTick()){var r=new a.LatLng(n[1],n[0]);this._marker=new a.Playback.MoveableMarker(r,e,this._geoJSON),e.mouseOverCallback&&this._marker.on("mouseover",e.mouseOverCallback),e.clickCallback&&this._marker.on("click",e.clickCallback),this._fadeMarkersWhenStale&&!this.trackPresentAtTick(t)&&this._marker.setOpacity(0)}return this._marker},moveMarker:function(t,e,n){this._marker&&(this._fadeMarkersWhenStale&&(this.trackPresentAtTick(n)?this._marker.setOpacity(1):this._marker.setOpacity(0),this.trackStaleAtTick(n)&&this._marker.setOpacity(.25)),this._orientIcon&&this._marker.setIconAngle(this.courseAtTime(n)),this._marker.move(t,e))},getMarker:function(){return this._marker}}),a.Playback=a.Playback||{},a.Playback.TrackController=a.Class.extend({initialize:function(t,e,n){this.options=n||{},this._map=t,this._tracks=[],this.setTracks(e)},clearTracks:function(){for(;0<this._tracks.length;){var t=this._tracks.pop().getMarker();t&&this._map.removeLayer(t)}},setTracks:function(t){this.clearTracks(),this.addTracks(t)},addTracks:function(t){if(t)if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.addTrack(t[e]);else this.addTrack(t)},addTrack:function(t,e){if(t){var n=t.setMarker(e,this.options);n&&(n.addTo(this._map),this._tracks.push(t))}},tock:function(t,e){for(var n=0,r=this._tracks.length;n<r;n++){var i=this._tracks[n].tick(t),o=new a.LatLng(i[1],i[0]);this._tracks[n].moveMarker(o,e,t)}},getStartTime:function(){var t=0;if(0<this._tracks.length){t=this._tracks[0].getStartTime();for(var e=1,n=this._tracks.length;e<n;e++){var r=this._tracks[e].getStartTime();r<t&&(t=r)}}return t},getEndTime:function(){var t=0;if(0<this._tracks.length){t=this._tracks[0].getEndTime();for(var e=1,n=this._tracks.length;e<n;e++){var r=this._tracks[e].getEndTime();t<r&&(t=r)}}return t},getTracks:function(){return this._tracks}}),a.Playback=a.Playback||{},a.Playback.Clock=a.Class.extend({initialize:function(t,e,n){this._trackController=t,this._callbacksArry=[],e&&this.addCallback(e),a.setOptions(this,n),this._speed=this.options.speed,this._tickLen=this.options.tickLen,this._cursor=t.getStartTime(),this._transitionTime=this._tickLen/this._speed},_tick:function(t){t._cursor>t._trackController.getEndTime()?clearInterval(t._intervalID):(t._trackController.tock(t._cursor,t._transitionTime),t._callbacks(t._cursor),t._cursor+=t._tickLen)},_callbacks:function(t){for(var e=this._callbacksArry,n=0,r=e.length;n<r;n++)e[n](t)},addCallback:function(t){this._callbacksArry.push(t)},start:function(){this._intervalID||(this._intervalID=window.setInterval(this._tick,this._transitionTime,this))},stop:function(){this._intervalID&&(clearInterval(this._intervalID),this._intervalID=null)},getSpeed:function(){return this._speed},isPlaying:function(){return!!this._intervalID},setSpeed:function(t){this._speed=t,this._transitionTime=this._tickLen/t,this._intervalID&&(this.stop(),this.start())},setCursor:function(t){var e=parseInt(t);if(e){var n=e%this._tickLen;0!==n&&(e+=this._tickLen-n),this._cursor=e,this._trackController.tock(this._cursor,0),this._callbacks(this._cursor)}},getTime:function(){return this._cursor},getStartTime:function(){return this._trackController.getStartTime()},getEndTime:function(){return this._trackController.getEndTime()},getTickLen:function(){return this._tickLen}}),a.Playback=a.Playback||{},a.Playback.TracksLayer=a.Class.extend({initialize:function(t,e){var n=e.layer||{};jQuery.isFunction(n)&&(n=n(feature)),n.pointToLayer||(n.pointToLayer=function(t,e){return new a.CircleMarker(e,{radius:5})}),this.layer=new a.GeoJSON(null,n);this.control=a.control.layers(null,{},{collapsed:!1,position:e.tracksLayerPosition}),this.control.addOverlay(this.layer,e.label_gpsTrack),this.control.addTo(t),a.DomUtil.addClass(this.control._container,"leaflet-playback-tracklayer")},clearLayer:function(){for(var t in this.layer._layers)this.layer.removeLayer(this.layer._layers[t])},addLayer:function(t){this.layer.addData(t)},toggle:function(){this.control&&$(this.control._container).toggle(500)}}),a.Playback=a.Playback||{},a.Playback.DateControl=a.Control.extend({options:{position:"bottomleft",dateFormatFn:a.Playback.Util.DateStr,timeFormatFn:a.Playback.Util.TimeStr},initialize:function(t,e){a.setOptions(this,e),this.playback=t},onAdd:function(t){this._container=a.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded"),a.DomUtil.addClass(this._container,"leaflet-playback-datecontrol"),a.DomEvent.disableClickPropagation(this._container);var e=this,n=this.playback,r=n.getTime(),i=a.DomUtil.create("div","datetimeControl",this._container);return this._date=a.DomUtil.create("p","",i),this._time=a.DomUtil.create("p","",i),this._date.innerHTML=this.options.dateFormatFn(r),this._time.innerHTML=this.options.timeFormatFn(r),n.addCallback(function(t){e._date.innerHTML=e.options.dateFormatFn(t),e._time.innerHTML=e.options.timeFormatFn(t)}),this._container}}),a.Playback.PlayControl=a.Control.extend({options:{position:"bottomright"},initialize:function(t){this.playback=t},onAdd:function(t){this._container=a.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded"),a.DomUtil.addClass(this._container,"leaflet-playback-playcontrol"),a.DomEvent.disableClickPropagation(this._container);var e=this,n=this.playback;n.setSpeed(this.playback._speed);var r=a.DomUtil.create("div","playControl",this._container);this._button=a.DomUtil.create("button","",r),this._button.innerHTML=e.options.label_play;var i=a.DomEvent.stopPropagation;return a.DomEvent.on(this._button,"click",i).on(this._button,"mousedown",i).on(this._button,"dblclick",i).on(this._button,"click",a.DomEvent.preventDefault).on(this._button,"click",function(){n.isPlaying()?(n.stop(),e._button.innerHTML=e.options.label_play):(n.start(),e._button.innerHTML=e.options.label_stop)},this),this._container}}),a.Playback.SliderControl=a.Control.extend({options:{position:"bottomleft"},initialize:function(t){this.playback=t},onAdd:function(t){this._container=a.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded"),a.DomUtil.addClass(this._container,"leaflet-playback-slidercontrol"),a.DomEvent.disableClickPropagation(this._container);var e=this,n=this.playback;this._slider=a.DomUtil.create("input","slider",this._container),this._slider.type="range",this._slider.min=n.getStartTime(),this._slider.max=n.getEndTime(),this._slider.value=n.getTime();var r=a.DomEvent.stopPropagation;function i(t){var e=Number(t.target.value);n.setCursor(e)}return a.DomEvent.on(this._slider,"click",r).on(this._slider,"mousedown",r).on(this._slider,"dblclick",r).on(this._slider,"click",a.DomEvent.preventDefault).on(this._slider,"change",i,this).on(this._slider,"mousemove",i,this),n.addCallback(function(t){e._slider.value=t}),t.on("playback:add_tracks",function(){e._slider.min=n.getStartTime(),e._slider.max=n.getEndTime(),e._slider.value=n.getTime()}),this._container}}),a.Playback=a.Playback.Clock.extend({statics:{MoveableMarker:a.Playback.MoveableMarker,Track:a.Playback.Track,TrackController:a.Playback.TrackController,Clock:a.Playback.Clock,Util:a.Playback.Util,TracksLayer:a.Playback.TracksLayer,PlayControl:a.Playback.PlayControl,DateControl:a.Playback.DateControl,SliderControl:a.Playback.SliderControl},options:{tickLen:250,speed:1,maxInterpolationTime:3e5,tracksLayer:!0,playControl:!1,dateControl:!1,sliderControl:!1,popups:!0,popups_autoClose:!1,tooltips:!1,tracksLayerPosition:"bottomleft",playControlPosition:"bottomleft",dateControlPosition:"bottomleft",sliderControlPosition:"bottomleft",label_play:"Run Track",label_stop:"Stop Track",label_gpsTrack:"GPS Track",label_latlng:"LngLat",label_latlng_precision:4,tooltipOffset:[0,-24],layer:{},marker:{}},initialize:function(t,e,n,r){a.setOptions(this,r),this._map=t,this._trackController=new a.Playback.TrackController(t,null,this.options),a.Playback.Clock.prototype.initialize.call(this,this._trackController,n,this.options),this.options.tracksLayer&&(r.tracksLayerPosition=this.options.tracksLayerPosition,r.label_gpsTrack=this.options.label_gpsTrack,this._tracksLayer=new a.Playback.TracksLayer(t,r)),this.setData(e),this.options.playControl&&(this.playControl=new a.Playback.PlayControl(this),this.playControl.options.position=this.options.playControlPosition,this.playControl.options.label_play=this.options.label_play,this.playControl.options.label_stop=this.options.label_stop,this.playControl.addTo(t)),this.options.sliderControl&&(this.sliderControl=new a.Playback.SliderControl(this),this.sliderControl.options.position=this.options.sliderControlPosition,this.sliderControl.addTo(t)),this.options.dateControl&&(this.dateControl=new a.Playback.DateControl(this,r),this.dateControl.options.position=this.options.dateControlPosition,this.dateControl.addTo(t))},clearData:function(){this._trackController.clearTracks(),this._tracksLayer&&this._tracksLayer.clearLayer()},setData:function(t){this.clearData(),this._checkGeoJSON(t),this.addData(t,this.getTime()),this.setCursor(this.getStartTime())},addData:function(t,e){if(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)this._trackController.addTrack(new a.Playback.Track(t[n],this.options),e);else if("FeatureCollection"==t.type)for(n=0,r=t.features.length;n<r;n++)this._trackController.addTrack(new a.Playback.Track(t.features[n],this.options),e);else this._trackController.addTrack(new a.Playback.Track(t,this.options),e);this._map.fire("playback:set:data"),this.options.tracksLayer&&this._tracksLayer.addLayer(t)}},destroy:function(){this.clearData(),this.playControl&&this._map.removeControl(this.playControl),this.sliderControl&&this._map.removeControl(this.sliderControl),this.dateControl&&this._map.removeControl(this.dateControl)},toggle:function(){this._tracksLayer&&this._tracksLayer.toggle(),this.playControl&&$(this.playControl._container).toggle(500),this.sliderControl&&$(this.sliderControl._container).toggle(500),this.dateControl&&$(this.dateControl._container).toggle(500)},_checkGeoJSON:function(t){if(t instanceof Array){for(var e=0,n=t.length;e<n;e++)if(!this._checkGeoJSON(t[e]))return!1;return!0}return t.geometry&&t.geometry.coordinates?t.properties&&t.properties.time?t.geometry.coordinates.length===t.properties.time.length||(console.error("playback geojson: the count of geometry.coordinates must be same with the count of properties.time!"),!1):(console.error("playback geojson must have properties.time!"),!1):(console.error("playback geojson must have geometry.coordinates!"),!1)}}),a.Map.addInitHook(function(){this.options.playback&&(this.playback=new a.Playback(this))}),a.playback=function(t,e,n,r){return new a.Playback(t,e,n,r)},a.Playback})},{leaflet:560}],18:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(f){function p(e){var n=f("");try{n=f(e).clone()}catch(t){n=f("<span />").html(e)}return n}function d(e,t,n){var r=f.Deferred();try{var i=(e=e.contentWindow||e.contentDocument||e).document||e.contentDocument||e;n.doctype&&i.write(n.doctype),i.write(t),i.close();var o=!1,a=function(){if(!o){e.focus();try{e.document.execCommand("print",!1,null)||e.print(),f("body").focus()}catch(t){e.print()}e.close(),o=!0,r.resolve()}};f(e).on("load",a),setTimeout(a,n.timeout)}catch(t){r.reject(t)}return r}function g(t,e){return d(window.open(),t,e).always(function(){try{e.deferred.resolve()}catch(t){console.warn("Error notifying deferred",t)}})}function m(t){return!!("object"===("undefined"==typeof Node?"undefined":r(Node))?t instanceof Node:t&&"object"===(void 0===t?"undefined":r(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName)}f.print=f.fn.print=function(){var e,t,n=this;n instanceof f&&(n=n.get(0)),m(n)?(t=f(n),0<arguments.length&&(e=arguments[0])):0<arguments.length?m((t=f(arguments[0]))[0])?1<arguments.length&&(e=arguments[1]):(e=arguments[0],t=f("html")):t=f("html");var r={globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:f.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"};e=f.extend({},r,e||{});var i=f("");e.globalStyles?i=f("style, link, meta, base, title"):e.mediaPrint&&(i=f("link[media=print]")),e.stylesheet&&(i=f.merge(i,f('<link rel="stylesheet" href="'+e.stylesheet+'">')));var o=t.clone();if((o=f("<span/>").append(o)).find(e.noPrintSelector).remove(),o.append(i.clone()),e.title){var a=f("title",o);0===a.length&&(a=f("<title />"),o.append(a)),a.text(e.title)}o.append(p(e.append)),o.prepend(p(e.prepend)),e.manuallyCopyFormValues&&(o.find("input").each(function(){var t=f(this);t.is("[type='radio']")||t.is("[type='checkbox']")?t.prop("checked")&&t.attr("checked","checked"):t.attr("value",t.val())}),o.find("select").each(function(){f(this).find(":selected").attr("selected","selected")}),o.find("textarea").each(function(){var t=f(this);t.text(t.val())}));var s,l,u,c,h=o.html();try{e.deferred.notify("generated_markup",h,o)}catch(t){console.warn("Error notifying deferred",t)}if(o.remove(),e.iframe)try{s=h,u=f((l=e).iframe+""),0===(c=u.length)&&(u=f('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})),d(u.get(0),s,l).done(function(){setTimeout(function(){0===c&&u.remove()},1e3)}).fail(function(t){console.error("Failed to print from iframe",t),g(s,l)}).always(function(){try{l.deferred.resolve()}catch(t){console.warn("Error notifying deferred",t)}})}catch(t){console.error("Failed to print from iframe",t.stack,t.message),g(h,e)}else g(h,e);return this}}(jQuery)},{}],19:[function(t,e,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(o){Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t};var t,a="rangeslider",s=0,l=((t=document.createElement("input")).setAttribute("type","range"),"text"!==t.type),u={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},c={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function n(t,e){var n=function(t){for(var e,n=[],r=t.parentNode;(e=r)&&(0===e.offsetWidth||0===e.offsetHeight||!1===e.open);)n.push(r),r=r.parentNode;return n}(t),r=n.length,i=[],o=t[e];function a(t){void 0!==t.open&&(t.open=!t.open)}if(r){for(var s=0;s<r;s++)i[s]=n[s].style.cssText,n[s].style.setProperty?n[s].style.setProperty("display","block","important"):n[s].style.cssText+=";display: block !important",n[s].style.height="0",n[s].style.overflow="hidden",n[s].style.visibility="hidden",a(n[s]);o=t[e];for(var l=0;l<r;l++)n[l].style.cssText=i[l],a(n[l])}return o}function r(t,e){var n=parseFloat(t);return Number.isNaN(n)?e:n}function i(t){return t.charAt(0).toUpperCase()+t.substr(1)}function h(t,e){if(this.$window=o(window),this.$document=o(document),this.$element=o(t),this.options=o.extend({},u,e),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=c.orientation[this.orientation].dimension,this.DIRECTION=c.orientation[this.orientation].direction,this.DIRECTION_STYLE=c.orientation[this.orientation].directionStyle,this.COORDINATE=c.orientation[this.orientation].coordinate,this.polyfill&&l)return!1;this.identifier="js-"+a+"-"+s++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=o('<div class="'+this.options.fillClass+'" />'),this.$handle=o('<div class="'+this.options.handleClass+'" />'),this.$range=o('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=o.proxy(this.handleDown,this),this.handleMove=o.proxy(this.handleMove,this),this.handleEnd=o.proxy(this.handleEnd,this),this.init();var n,r,i=this;this.$window.on("resize."+this.identifier,(n=function(){!function(t,e){var n=Array.prototype.slice.call(arguments,2);setTimeout(function(){return t.apply(null,n)},e)}(function(){i.update(!1,!1)},300)},r=(r=20)||100,function(){if(!n.debouncing){var t=Array.prototype.slice.apply(arguments);n.lastReturnVal=n.apply(window,t),n.debouncing=!0}return clearTimeout(n.debounceTimeout),n.debounceTimeout=setTimeout(function(){n.debouncing=!1},r),n.lastReturnVal})),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(t,e){if(!e||e.origin!==i.identifier){var n=t.target.value,r=i.getPositionFromValue(n);i.setPosition(r)}})}return h.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},h.prototype.update=function(t,e){(t=t||!1)&&(this.min=r(this.$element[0].getAttribute("min"),0),this.max=r(this.$element[0].getAttribute("max"),100),this.value=r(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=r(this.$element[0].getAttribute("step"),1)),this.handleDimension=n(this.$handle[0],"offset"+i(this.DIMENSION)),this.rangeDimension=n(this.$range[0],"offset"+i(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,e)},h.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),!(-1<(" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))){var e=this.getRelativePosition(t),n=this.$range[0].getBoundingClientRect()[this.DIRECTION],r=this.getPositionFromNode(this.$handle[0])-n,i="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos;this.setPosition(i),r<=e&&e<r+this.handleDimension&&(this.grabPos=e-r)}},h.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(t),n="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos;this.setPosition(n)},h.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(t,e,n){return t<e?e:n<t?n:t},h.prototype.setPosition=function(t,e){var n,r;void 0===e&&(e=!0),n=this.getValueFromPosition(this.cap(t,0,this.maxHandlePos)),r=this.getPositionFromValue(n),this.$fill[0].style[this.DIMENSION]=r+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=r+"px",this.setValue(n),this.position=r,this.value=n,e&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(r,n)},h.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},h.prototype.getRelativePosition=function(t){var e=i(this.COORDINATE),n=this.$range[0].getBoundingClientRect()[this.DIRECTION],r=0;return void 0!==t.originalEvent["client"+e]?r=t.originalEvent["client"+e]:t.originalEvent.touches&&t.originalEvent.touches[0]&&void 0!==t.originalEvent.touches[0]["client"+e]?r=t.originalEvent.touches[0]["client"+e]:t.currentPoint&&void 0!==t.currentPoint[this.COORDINATE]&&(r=t.currentPoint[this.COORDINATE]),r-n},h.prototype.getPositionFromValue=function(t){var e;return e=(t-this.min)/(this.max-this.min),Number.isNaN(e)?0:e*this.maxHandlePos},h.prototype.getValueFromPosition=function(t){var e,n;return e=t/(this.maxHandlePos||1),n=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min,Number(n.toFixed(this.toFixed))},h.prototype.setValue=function(t){t===this.value&&""!==this.$element[0].value||this.$element.val(t).trigger("input",{origin:this.identifier})},h.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+a),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},o.fn[a]=function(n){var r=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=o(this),e=t.data("plugin_"+a);e||t.data("plugin_"+a,e=new h(this,n)),"string"==typeof n&&e[n].apply(e,r)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"},"function"==typeof define&&define.amd?define(["jquery"],r):"object"===(void 0===n?"undefined":i(n))?e.exports=r(t("jquery")):r(jQuery)},{jquery:497}],20:[function(t,e,n){"use strict";L.Control.GraphicScale=L.Control.extend({options:{position:"bottomleft",updateWhenIdle:!1,minUnitWidth:30,maxUnitsWidth:240,fill:!1,showSubunits:!1,doubleLine:!1,labelPlacement:"auto"},onAdd:function(t){return this._map=t,this._possibleUnitsNum=[3,5,2,4],this._possibleUnitsNumLen=this._possibleUnitsNum.length,this._possibleDivisions=[1,.5,.25,.2],this._possibleDivisionsLen=this._possibleDivisions.length,this._possibleDivisionsSub={1:{num:2,division:.5},.5:{num:5,division:.1},.25:{num:5,division:.05},.2:{num:2,division:.1}},this._scaleInner=this._buildScale(),this._scale=this._addScale(this._scaleInner),this._setStyle(this.options),t.on(this.options.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),this._scale},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScale:function(t){var e=L.DomUtil.create("div");return e.className="leaflet-control-graphicscale",e.appendChild(t),e},_setStyle:function(t){var e=["leaflet-control-graphicscale-inner"];t.fill&&"nofill"!==t.fill&&(e.push("filled"),e.push("filled-"+t.fill)),t.showSubunits&&e.push("showsubunits"),t.doubleLine&&e.push("double"),e.push("labelPlacement-"+t.labelPlacement),this._scaleInner.className=e.join(" ")},_buildScale:function(){var t=document.createElement("div");t.className="leaflet-control-graphicscale-inner";var e=L.DomUtil.create("div","subunits",t),n=L.DomUtil.create("div","units",t);this._units=[],this._unitsLbls=[],this._subunits=[];for(var r=0;r<5;r++){var i=this._buildDivision(r%2==0);n.appendChild(i),this._units.push(i);var o=this._buildDivisionLbl();i.appendChild(o),this._unitsLbls.push(o);var a=this._buildDivision(r%2==1);e.appendChild(a),this._subunits.unshift(a)}return this._zeroLbl=L.DomUtil.create("div","label zeroLabel"),this._zeroLbl.innerHTML="0",this._units[0].appendChild(this._zeroLbl),this._subunitsLbl=L.DomUtil.create("div","label subunitsLabel"),this._subunitsLbl.innerHTML="?",this._subunits[4].appendChild(this._subunitsLbl),t},_buildDivision:function(t){var e=L.DomUtil.create("div","division"),n=L.DomUtil.create("div","line");e.appendChild(n);var r=L.DomUtil.create("div","line2");return e.appendChild(r),t&&n.appendChild(L.DomUtil.create("div","fill")),t||r.appendChild(L.DomUtil.create("div","fill")),e},_buildDivisionLbl:function(){return L.DomUtil.create("div","label divisionLabel")},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180)*Math.abs(t.getNorthEast().lng-t.getSouthWest().lng)/180;0<this._map.getSize().x&&0<n&&this._updateScale(n,this.options)},_updateScale:function(t,e){var n=this._getBestScale(t,e.minUnitWidth,e.maxUnitsWidth);this._render(n)},_getBestScale:function(t,e,n){var r=this._getPossibleUnits(t,e,this._map.getSize().x),i=this._getPossibleScales(r,n);i.sort(function(t,e){return e.score-t.score});var o=i[0];return o.subunits=this._getSubunits(o),o},_getSubunits:function(t){var e=this._possibleDivisionsSub[t.unit.unitDivision],n={};return n.subunitDivision=e.division,n.subunitMeters=e.division*(t.unit.unitMeters/t.unit.unitDivision),n.subunitPx=e.division*(t.unit.unitPx/t.unit.unitDivision),{subunit:n,numSubunits:e.num,total:e.num*n.subunitMeters}},_getPossibleScales:function(t,e){for(var n,r=[],i=Number.POSITIVE_INFINITY,o=0;o<this._possibleUnitsNumLen;o++)for(var a=this._possibleUnitsNum[o],s=.5*(this._possibleUnitsNumLen-o),l=0;l<t.length;l++){var u=t[l],c=u.unitPx*a,h={unit:u,totalWidthPx:c,numUnits:a,score:0},f=1-(e-c)/e;f*=3;var p=u.unitScore+s+f;(.25===u.unitDivision&&3===a||.5===u.unitDivision&&3===a||.25===u.unitDivision&&5===a)&&(p-=2),h.score=p,c<e&&r.push(h),c<i&&(i=c,n=h)}return r.length||r.push(n),r},_getPossibleUnits:function(t,e,n){for(var r,i=[],o=(Math.floor(t)+"").length;0<o;o--){r=Math.pow(10,o);for(var a=0;a<this._possibleDivisionsLen;a++){var s=r*this._possibleDivisions[a],l=n*(s/t);if(l<e)return i;i.push({unitMeters:s,unitPx:l,unitDivision:this._possibleDivisions[a],unitScore:this._possibleDivisionsLen-a})}}return i},_render:function(t){this._renderPart(t.unit.unitPx,t.unit.unitMeters,t.numUnits,this._units,this._unitsLbls),this._renderPart(t.subunits.subunit.subunitPx,t.subunits.subunit.subunitMeters,t.subunits.numSubunits,this._subunits);var e=this._getDisplayUnit(t.subunits.total);this._subunitsLbl.innerHTML=""+e.amount+e.unit},_renderPart:function(t,e,n,r,i){for(var o=this._getDisplayUnit(e),a=0;a<this._units.length;a++){var s=r[a];if(a<n?(s.style.width=t+"px",s.className="division"):(s.style.width=0,s.className="division hidden"),i){var l=i[a],u=["label","divisionLabel"];if(a<n){var c=(a+1)*o.amount;a===n-1?(c+=o.unit,u.push("labelLast")):u.push("labelSub"),l.innerHTML=c}l.className=u.join(" ")}}},_getDisplayUnit:function(t){var e=t<1e3?"m":"km";return{unit:e,amount:"km"===e?t/1e3:t}}}),L.Map.mergeOptions({graphicScaleControl:!1}),L.Map.addInitHook(function(){this.options.graphicScaleControl&&(this.graphicScaleControl=new L.Control.GraphicScale,this.addControl(this.graphicScaleControl))}),L.control.graphicScale=function(t){return new L.Control.GraphicScale(t)}},{}],21:[function(t,e,n){"use strict";L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{position:"left"},initialize:function(t,e){var n,r;for(L.setOptions(this,e),this._sidebar=L.DomUtil.get(t),L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),n=this._sidebar.children.length-1;0<=n;n--)"DIV"==(r=this._sidebar.children[n]).tagName&&L.DomUtil.hasClass(r,"sidebar-content")&&(this._container=r);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),n=this._tabitems.length-1;0<=n;n--)this._tabitems[n]._sidebar=this;for(this._panes=[],this._closeButtons=[],n=this._container.children.length-1;0<=n;n--)if("DIV"==(r=this._container.children[n]).tagName&&L.DomUtil.hasClass(r,"sidebar-pane")){this._panes.push(r);for(var i=r.querySelectorAll(".sidebar-close"),o=0,a=i.length;o<a;o++)this._closeButtons.push(i[o])}},addTo:function(t){var e,n;for(this._map=t,e=this._tabitems.length-1;0<=e;e--){var r=(n=this._tabitems[e]).querySelector("a");r.hasAttribute("href")&&"#"==r.getAttribute("href").slice(0,1)&&L.DomEvent.on(r,"click",L.DomEvent.preventDefault).on(r,"click",this._onClick,n)}for(e=this._closeButtons.length-1;0<=e;e--)n=this._closeButtons[e],L.DomEvent.on(n,"click",this._onCloseClick,this);return this},removeFrom:function(t){console.log("removeFrom() has been deprecated, please use remove() instead as support for this function will be ending soon."),this.remove(t)},remove:function(t){var e,n;for(this._map=null,e=this._tabitems.length-1;0<=e;e--)n=this._tabitems[e],L.DomEvent.off(n.querySelector("a"),"click",this._onClick);for(e=this._closeButtons.length-1;0<=e;e--)n=this._closeButtons[e],L.DomEvent.off(n,"click",this._onCloseClick,this);return this},open:function(t){var e,n;for(e=this._panes.length-1;0<=e;e--)(n=this._panes[e]).id==t?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");for(e=this._tabitems.length-1;0<=e;e--)(n=this._tabitems[e]).querySelector("a").hash=="#"+t?L.DomUtil.addClass(n,"active"):L.DomUtil.hasClass(n,"active")&&L.DomUtil.removeClass(n,"active");return this.fire("content",{id:t}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),this._hidePanes(!0,!0),this._hidePanes(!1),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var t=this._tabitems.length-1;0<=t;t--){var e=this._tabitems[t];L.DomUtil.hasClass(e,"active")&&L.DomUtil.removeClass(e,"active")}if(!L.DomUtil.hasClass(this._sidebar,"collapsed")){this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed"),this._hidePanes(!0);var n=this;setTimeout(function(){n._hidePanes(!1)},500)}return this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()},_hidePanes:function(t,e){var n;for(n=this._panes.length-1;0<=n;n--){var r=this._panes[n];t?e?L.DomUtil.addClass(r,"hide-sidebar-pane-immediately"):L.DomUtil.addClass(r,"hide-sidebar-pane"):(L.DomUtil.hasClass(r,"hide-sidebar-pane")&&L.DomUtil.removeClass(r,"hide-sidebar-pane"),L.DomUtil.hasClass(r,"hide-sidebar-pane-immediately")&&L.DomUtil.removeClass(r,"hide-sidebar-pane-immediately"))}}}),L.control.sidebar=function(t,e){return new L.Control.Sidebar(t,e)}},{}],22:[function(t,e,n){"use strict";L.Control.Sidebar_v0=L.Control.extend({includes:L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0,type:"s"},initialize:function(t,e){L.setOptions(this,e);var n=this._contentContainer=L.DomUtil.get(t);n.parentNode.removeChild(n);var r="leaflet-",i=this._container=L.DomUtil.create("div",r+"sidebar-"+this.options.type+" sidebar-"+this.options.position);(L.DomUtil.addClass(n,r+"control"),i.appendChild(n),this.options.closeButton)&&((this._closeButton=L.DomUtil.create("a","close",i)).innerHTML="&times;")},addTo:function(t){var e=this._container,n=this._contentContainer;if(this.options.closeButton){var r=this._closeButton;L.DomEvent.on(r,"click",this.hide,this)}L.DomEvent.on(e,"transitionend",this._handleTransitionEvent,this).on(e,"webkitTransitionEnd",this._handleTransitionEvent,this);var i=t._controlContainer;i.insertBefore(e,i.firstChild),this._map=t;var o=L.DomEvent.stopPropagation,a=L.DomEvent._fakeStop||o;return L.DomEvent.on(n,"contextmenu",o).on(n,"click",a).on(n,"mousedown",o).on(n,"touchstart",o).on(n,"dblclick",a).on(n,"mousewheel",o).on(n,"MozMousePixelScroll",o),this},removeFrom:function(t){this.hide();var e=this._container,n=this._contentContainer;t._controlContainer.removeChild(e),this._map=null;var r=L.DomEvent.stopPropagation,i=L.DomEvent._fakeStop||r;if(L.DomEvent.off(n,"contextmenu",r).off(n,"click",i).off(n,"mousedown",r).off(n,"touchstart",r).off(n,"dblclick",i).off(n,"mousewheel",r).off(n,"MozMousePixelScroll",r),L.DomEvent.off(e,"transitionend",this._handleTransitionEvent,this).off(e,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var o=this._closeButton;L.DomEvent.off(o,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(t){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),t&&L.DomEvent.stopPropagation(t)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(t){var e=this.getContainer();if("string"==typeof t)e.innerHTML=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(t)}return this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(t){"left"!=t.propertyName&&"right"!=t.propertyName||this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar_v0=function(t,e){return new L.Control.Sidebar_v0(t,e)}},{}],23:[function(t,e,n){var r=".leaflet-sbs-range{position:absolute;top:50%;width:100%;z-index:999}.leaflet-sbs-divider{position:absolute;top:0;bottom:0;left:50%;margin-left:-2px;width:4px;background-color:#fff;pointer-events:none;z-index:999}.leaflet-sbs-divider-vertical{position:absolute;bottom:0;left:0;top:50%;margin-top:-2px;height:4px;background-color:#fff;pointer-events:none;z-index:999}";t("browserify-css").createStyle(r,{href:"libs\\controls\\sidebyside\\layout.css"},{insertAt:"bottom"}),e.exports=r},{"browserify-css":87}],24:[function(t,e,n){"use strict";var i=t("leaflet");t("./layout.css"),t("./range.css");var r,o;function a(e,t,n,r){t.split(" ").forEach(function(t){i.DomEvent.on(e,t,n,r)})}function s(e,t,n,r){t.split(" ").forEach(function(t){i.DomEvent.off(e,t,n,r)})}function l(t){return"oninput"in t?"input":"change"}function u(){r=this._map.dragging.enabled(),o=this._map.tap&&this._map.tap.enabled(),this._map.dragging.disable(),this._map.tap&&this._map.tap.disable()}function c(t){this._refocusOnMap(t),r&&this._map.dragging.enable(),o&&this._map.tap.enable()}function h(t){return"undefined"===t?[]:Array.isArray(t)?t:[t]}i.Control.SideBySide=i.Control.extend({options:{thumbSize:40,padding:0,orientation:"horizontal"},initialize:function(t,e,n){this.setLeftLayers(t),this.setRightLayers(e),i.setOptions(this,n)},getPosition:function(){if("vertical"===this.options.orientation){var t=this._range.value/1e3,e=(.5-t)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().y*t+e}var n=this._range.value/1e3,r=(.5-n)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().x*n+r},setPosition:function(){},includes:i.Mixin.Events,addTo:function(n){this.remove(),this._map=n;var t=this._container=i.DomUtil.create("div","leaflet-sbs",n._container);t.style.position="relative",t.style.height="100%","vertical"===this.options.orientation?this._divider=i.DomUtil.create("div","leaflet-sbs-divider-vertical",t):this._divider=i.DomUtil.create("div","leaflet-sbs-divider",t);var e=this._range=i.DomUtil.create("input","",t);e.type="range",e.min=1,e.max=1e3,e.step=1,e.value=this.options.init_value?this.options.init_value:500,e.style.paddingLeft=e.style.paddingRight=this.options.padding+"px","vertical"===this.options.orientation&&e.setAttribute("data-orientation","vertical"),e.setAttribute("id","sidebyside-range"),e.setAttribute("data-rangeslider","");var r=this;return $("#sidebyside-range").rangeslider({polyfill:!1,onInit:function(){},onSlide:function(t,e){r._updateClip(),n.dragging.disable(),n.tap&&n.tap.disable()},onSlideEnd:function(t,e){n.dragging.enable(),n.tap&&n.tap.enable()}}),this._addEvents(),this._updateLayers(),this},remove:function(){if(!this._map)return this;if(this._leftLayers)for(var t=this._leftLayers,e=0;e<t.length;e++)t[e].getContainer().style.clip="";if(this._rightLayers)for(var n=this._rightLayers,r=0;r<n.length;r++)n[r].getContainer().style.clip="";return this._removeEvents(),i.DomUtil.remove(this._container),this._map=null,this},setLeftLayers:function(t){return this._leftLayers=h(t),this._updateLayers(),this},setRightLayers:function(t){return this._rightLayers=h(t),this._updateLayers(),this},_updateClip:function(){var t=this._map;if(!(this._leftLayers&&this._rightLayers&&0<this._leftLayers.length&&0<this._rightLayers.length))return console.log("_leftLayers.length:"+this._leftLayers.length+" _rightLayers.length:"+this._rightLayers.length),void this.fire("needbind",this);if("vertical"===this.options.orientation){var e=t.containerPointToLayerPoint([0,0]),n=t.containerPointToLayerPoint(t.getSize()),r=n.y-this.getPosition(),i=n.y-this.getPosition();this._divider.style.top=i+"px",this.fire("dividermove",{y:i});var o="rect("+[e.y,n.x,r,e.x].join("px,")+"px)",a="rect("+[r,n.x,n.y,e.x].join("px,")+"px)";if(this._leftLayers)for(var s=this._leftLayers,l=0;l<s.length;l++)s[l].getContainer().style.clip=o;if(this._rightLayers)for(var u=this._rightLayers,c=0;c<u.length;c++)u[c].getContainer().style.clip=a}else{var h=t.containerPointToLayerPoint([0,0]),f=t.containerPointToLayerPoint(t.getSize()),p=h.x+this.getPosition(),d=this.getPosition();this._divider.style.left=d+"px",this.fire("dividermove",{x:d});var g="rect("+[h.y,p,f.y,h.x].join("px,")+"px)",m="rect("+[h.y,f.x,f.y,p].join("px,")+"px)";if(this._leftLayers)for(var y=this._leftLayers,_=0;_<y.length;_++)y[_].getContainer().style.clip=g;if(this._rightLayers)for(var v=this._rightLayers,b=0;b<v.length;b++)v[b].getContainer().style.clip=m}},_updateLayers:function(){if(!this._map)return this;this._updateClip()},_addEvents:function(){var t=this._range,e=this._map;e&&t&&(e.on("move",this._updateClip,this),a(t,l(t),this._updateClip,this),a(t,i.Browser.touch?"touchstart":"mousedown",u,this),a(t,i.Browser.touch?"touchend":"mouseup",c,this))},_removeEvents:function(){var t=this._range,e=this._map;t&&(s(t,l(t),this._updateClip,this),s(t,i.Browser.touch?"touchstart":"mousedown",u,this),s(t,i.Browser.touch?"touchend":"mouseup",c,this)),e&&e.off("move",this._updateClip,this)}}),i.control.sideBySide=function(t,e,n){return new i.Control.SideBySide(t,e,n)},e.exports=i.Control.SideBySide},{"./layout.css":23,"./range.css":25,leaflet:560}],25:[function(t,e,n){var r=".leaflet-sbs-range{-webkit-appearance:none;display:inline-block!important;vertical-align:middle;height:0;padding:0;margin:0;border:0;background:rgba(0,0,0,.25);min-width:100px;cursor:pointer;pointer-events:none;z-index:999}.leaflet-sbs-range::-ms-fill-upper{background:0 0}.leaflet-sbs-range::-ms-fill-lower{background:rgba(255,255,255,.25)}.leaflet-sbs-range::-moz-range-track{opacity:0}.leaflet-sbs-range::-ms-track{opacity:0}.leaflet-sbs-range::-ms-tooltip{display:none}.leaflet-sbs-range::-webkit-slider-thumb{-webkit-appearance:none;margin:0;padding:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC) 50% 50%/40px 40px no-repeat #fff;height:40px;width:40px;border-radius:20px;cursor:ew-resize;pointer-events:auto;border:1px solid #ddd}.leaflet-sbs-range::-ms-thumb{margin:0;padding:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC) 50% 50%/40px 40px no-repeat #fff;height:40px;width:40px;border-radius:20px;cursor:ew-resize;pointer-events:auto;border:1px solid #ddd}.leaflet-sbs-range::-moz-range-thumb{padding:0;right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC) 50% 50%/40px 40px no-repeat #fff;height:40px;width:40px;border-radius:20px;cursor:ew-resize;pointer-events:auto;border:1px solid #ddd}.leaflet-sbs-range:disabled::-moz-range-thumb{cursor:default}.leaflet-sbs-range:disabled::-ms-thumb{cursor:default}.leaflet-sbs-range:disabled::-webkit-slider-thumb{cursor:default}.leaflet-sbs-range:disabled{cursor:default}.leaflet-sbs-range:focus{outline:0!important}.leaflet-sbs-range::-moz-focus-outer{border:0}";t("browserify-css").createStyle(r,{href:"libs\\controls\\sidebyside\\range.css"},{insertAt:"bottom"}),e.exports=r},{"browserify-css":87}],26:[function(t,e,n){"use strict";var r,i=t("../../../src/kq"),o=(r=i)&&r.__esModule?r:{default:r};var a=t("leaflet"),s=o.default.Local.Control.styleEditor;a.styleEditorLocal={buttonTitle:s.buttonTitle(),icon:s.icon(),size:s.size(),color:s.color(),lineStroke:s.lineStroke(),opacity:s.opacity(),fillColor:s.fillColor(),fillOpacity:s.fillOpacity(),tooltip:s.tooltip(),tooltipNext:s.tooltipNext(),buffer:{type:s.buffer.type(),length:s.buffer.length(),unit:s.buffer.unit(),buffer:s.buffer.buffer(),outer:s.buffer.outer(),inner:s.buffer.inner(),left:s.buffer.left(),right:s.buffer.right(),both:s.buffer.both(),msgLengthTooLong:s.buffer.msgLengthTooLong()}}},{"../../../src/kq":1075,leaflet:560}],27:[function(n,r,t){"use strict";!function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if(void 0!==r)e=n("leaflet"),r.exports=t(e);else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");t(window.L)}}(function(o){var e;o.Control.Zoomslider=(e=o.Draggable.extend({initialize:function(t,e,n){o.Draggable.prototype.initialize.call(this,t,t),this._element=t,this._stepHeight=e,this._knobHeight=n,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(t){var e=Math.round(this._toValue(t));return e=Math.max(0,Math.min(this._maxValue,e)),this._toY(e)},_toY:function(t){return this._k*t+this._m},_toValue:function(t){return(t-this._m)/this._k},setSteps:function(t){var e=t*this._stepHeight;this._maxValue=t-1,this._k=-this._stepHeight,this._m=e-(this._stepHeight+this._knobHeight)/2},setPosition:function(t){o.DomUtil.setPosition(this._element,o.point(0,this._adjust(t)))},setValue:function(t){this.setPosition(this._toY(t))},getValue:function(){return this._toValue(o.DomUtil.getPosition(this._element).y)}}),o.Control.extend({options:{position:"topleft",stepHeight:8,knobHeight:6,styleNS:"leaflet-control-zoomslider",zoomInTitle:"Zoom in",zoomOutTitle:"Zoom out"},onAdd:function(t){return this._map=t,this._ui=this._createUI(),this._knob=new e(this._ui.knob,this.options.stepHeight,this.options.knobHeight),t.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this).whenReady(this._updateDisabled,this),this._ui.bar},onRemove:function(t){t.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this).off("zoomend zoomlevelschange",this._updateDisabled,this)},_createUI:function(){var t={},e=this.options.styleNS;return t.bar=o.DomUtil.create("div",e+" leaflet-bar"),t.zoomIn=this._createZoomBtn("in","top",t.bar),t.wrap=o.DomUtil.create("div",e+"-wrap leaflet-bar-part",t.bar),t.zoomOut=this._createZoomBtn("out","bottom",t.bar),t.body=o.DomUtil.create("div",e+"-body",t.wrap),t.knob=o.DomUtil.create("div",e+"-knob"),o.DomEvent.disableClickPropagation(t.bar),o.DomEvent.disableClickPropagation(t.knob),t},_createZoomBtn:function(t,e,n){var r=this.options.styleNS+"-"+t+" leaflet-bar-part leaflet-bar-part-"+e,i=o.DomUtil.create("a",r,n);return i.href="#",i.title="in"===t?this.options.zoomInTitle:this.options.zoomOutTitle,o.DomEvent.on(i,"click",o.DomEvent.preventDefault),i},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this).on("zoomend zoomlevelschange",this._updateDisabled,this),o.DomEvent.on(this._ui.body,"click",this._onSliderClick,this),o.DomEvent.on(this._ui.zoomIn,"click",this._zoomIn,this),o.DomEvent.on(this._ui.zoomOut,"click",this._zoomOut,this),this._knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(t){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=o.DomEvent.getMousePosition(e,this._ui.body).y;this._knob.setPosition(n),this._updateMapZoom()},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_zoomLevels:function(){var t=this._map.getMaxZoom()-this._map.getMinZoom()+1;return t<1/0?t:0},_toZoomLevel:function(t){return t+this._map.getMinZoom()},_toValue:function(t){return t-this._map.getMinZoom()},_updateSize:function(){var t=this._zoomLevels();this._ui.body.style.height=this.options.stepHeight*t+"px",this._knob.setSteps(t)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var t=this._map.getZoom(),e=this.options.styleNS+"-disabled";o.DomUtil.removeClass(this._ui.zoomIn,e),o.DomUtil.removeClass(this._ui.zoomOut,e),t===this._map.getMinZoom()&&o.DomUtil.addClass(this._ui.zoomOut,e),t===this._map.getMaxZoom()&&o.DomUtil.addClass(this._ui.zoomIn,e)}})),o.Map.addInitHook(function(){this.options.zoomsliderControl&&(this.zoomsliderControl=new o.Control.Zoomslider,this.addControl(this.zoomsliderControl))}),o.control.zoomslider=function(t){return new o.Control.Zoomslider(t)}})},{leaflet:560}],28:[function(t,e,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"object"===(void 0===e?"undefined":i(e))&&r?r=e.exports:"undefined"!=typeof window&&(r=window.eviltransform={});var m=6378137;function s(t,e){return e<72.004||137.8347<e||(t<.8293||55.8271<t)}function o(t,e){var n,r,i,o,a,s,l,u,c,h=.006693421622965943,f=(i=(n=e-105)*(r=t-35),o=Math.sqrt(Math.abs(n)),a=n*Math.PI,s=r*Math.PI,l=20*Math.sin(6*a)+20*Math.sin(2*a),c=u=l,u+=20*Math.sin(s)+40*Math.sin(s/3),c+=20*Math.sin(a)+40*Math.sin(a/3),u+=160*Math.sin(s/12)+320*Math.sin(s/30),c+=150*Math.sin(a/12)+300*Math.sin(a/30),u*=2/3,c*=2/3,{lat:u+=2*n-100+3*r+.2*r*r+.1*i+.2*o,lng:c+=300+n+2*r+.1*n*n+.1*i+.1*o}),p=t/180*Math.PI,d=Math.sin(p);d=1-h*d*d;var g=Math.sqrt(d);return f.lat=180*f.lat/(m*(1-h)/(d*g)*Math.PI),f.lng=180*f.lng/(m/g*Math.cos(p)*Math.PI),f}function l(t,e){if(s(t,e))return{lat:t,lng:e};var n=o(t,e);return{lat:t+n.lat,lng:e+n.lng}}function a(t,e){if(s(t,e))return{lat:t,lng:e};var n=o(t,e);return{lat:t-n.lat,lng:e-n.lng}}function u(t,e){if(s(t,e))return{lat:t,lng:e};var n=e,r=t,i=Math.sqrt(n*n+r*r)+2e-5*Math.sin(r*Math.PI),o=Math.atan2(r,n)+3e-6*Math.cos(n*Math.PI),a=i*Math.cos(o)+.0065;return{lat:i*Math.sin(o)+.006,lng:a}}function c(t,e){if(s(t,e))return{lat:t,lng:e};var n=e-.0065,r=t-.006,i=Math.sqrt(n*n+r*r)-2e-5*Math.sin(r*Math.PI),o=Math.atan2(r,n)-3e-6*Math.cos(n*Math.PI),a=i*Math.cos(o);return{lat:i*Math.sin(o),lng:a}}r.wgs2gcj=l,r.gcj2wgs=a,r.gcj2wgs_exact=function(t,e){for(var n=t,r=e,i=n,o=r,a=0;a<30;a++){var s=l(i=n,o=r);if(n-=t-s.lat,r-=e-s.lng,Math.max(Math.abs(i-n),Math.abs(o-r))<1e-6)break}return{lat:n,lng:r}},r.distance=function(t,e,n,r){var i=Math.PI/180,o=t*i,a=n*i,s=Math.cos(o)*Math.cos(a)*Math.cos((e-r)*i)+Math.sin(o)*Math.sin(a);return 1<s&&(s=1),s<-1&&(s=-1),Math.acos(s)*m},r.gcj2bd=u,r.bd2gcj=c,r.wgs2bd=function(t,e){var n=l(t,e);return u(n.lat,n.lng)},r.bd2wgs=function(t,e){var n=c(t,e);return a(n.lat,n.lng)}},{}],29:[function(t,e,n){"use strict";var r,i;i=function(){var t,h,e,l={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},u=(t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},h=l.defaultRadius,t.prototype={_organiseData:function(t,e){var n=t[this._xField],r=t[this._yField],i=this._radi,o=this._data,a=this._max,s=this._min,l=t[this._valueField]||1,u=t.radius||this._cfgRadius||h;o[n]||(o[n]=[],i[n]=[]),o[n][r]?o[n][r]+=l:(o[n][r]=l,i[n][r]=u);var c=o[n][r];return a<c?(e?this.setDataMax(c):this._max=c,!1):c<s?(e?this.setDataMin(c):this._min=c,!1):{x:n,y:r,value:l,radius:u,min:s,max:a}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var r in e)for(var i in e[r])t.push({x:r,y:i,radius:n[r][i],value:e[r][i]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(e[r],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t),n=function(){var o=function(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in e)i.addColorStop(o,e[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},g=function(t,e){var n=document.createElement("canvas"),r=n.getContext("2d"),i=t,o=t;if(n.width=n.height=2*t,1==e)r.beginPath(),r.arc(i,o,t,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var a=r.createRadialGradient(i,o,t*e,i,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=a,r.fillRect(0,0,2*t,2*t)}return n};function t(t){var e=t.container,n=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=t.canvas||document.createElement("canvas"),i=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});r.className="heatmap-canvas",this._width=r.width=n.width=t.width||+i.width.replace(/px/,""),this._height=r.height=n.height=t.height||+i.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",e.style.position="relative",e.appendChild(r),this._palette=o(t),this._templates={},this._setStyles(t)}return t.prototype={renderPartial:function(t){0<t.data.length&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),0<t.data.length&&(this._drawAlpha(function(t){for(var e=[],n=t.min,r=t.max,i=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),u=l.length;u--;){var c=l[u],h=t[s][c],f=i[s][c];e.push({x:s,y:c,value:h,radius:f})}return{min:n,max:r,data:e}}(t)),this._colorize())},_updateGradient:function(t){this._palette=o(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,n=this._max=t.max,r=(t=t.data||[]).length,i=1-this._blur;r--;){var o,a=t[r],s=a.x,l=a.y,u=a.radius,c=Math.min(a.value,n),h=s-u,f=l-u,p=this.shadowCtx;this._templates[u]?o=this._templates[u]:this._templates[u]=o=g(u,i);var d=(c-e)/(n-e);p.globalAlpha=d<.01?.01:d,p.drawImage(o,h,f),h<this._renderBoundaries[0]&&(this._renderBoundaries[0]=h),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),h+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=h+2*u),f+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*u)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,r=this._renderBoundaries[3]-e,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),i<t+n&&(n=i-t),o<e+r&&(r=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,r),h=c.data,f=h.length,p=this._palette,d=3;d<f;d+=4){var g,m=h[d],y=4*m;if(y)g=0<a?a:m<s?m<l?l:m:s,h[d-3]=p[y],h[d-2]=p[y+1],h[d-1]=p[y+2],h[d]=u?p[y+3]:g}c.data=h,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),c=(e=!1,"canvas2d"===l.defaultRenderer&&(e=n),e),f=function(){for(var t={},e=arguments.length,n=0;n<e;n++){var r=arguments[n];for(var i in r)t[i]=r[i]}return t},r=function(){var s=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,n){var r=this.cStore;r[t]||(r[t]=[]),r[t].push(function(t){return e.call(n,t)})},emit:function(t,e){var n=this.cStore;if(n[t])for(var r=n[t].length,i=0;i<r;i++){(0,n[t][i])(e)}}},t}();function t(){var e,t,n,r,i=this._config=f(l,arguments[0]||{});if(this._coordinator=new s,i.plugin){var o=i.plugin;if(!l.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var a=l.plugins[o];this._renderer=new a.renderer(i),this._store=new a.store(i)}else this._renderer=new c(i),this._store=new u(i);t=(e=this)._renderer,n=e._coordinator,r=e._store,n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),r.setCoordinator(n)}return t.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=f(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},t}();return{create:function(t){return new r(t)},register:function(t,e){l.plugins[t]=e}}},(r=void 0)!==e&&e.exports?e.exports=i():"function"==typeof define&&define.amd?define(i):r.h337=i()},{}],30:[function(r,i,t){"use strict";!function(t,e,n){if(void 0!==i&&i.exports)i.exports=n(r("heatmap.js"),r("leaflet"));else if("function"==typeof define&&define.amd)define(["heatmap.js","leaflet"],n);else{if(void 0===window.h337)throw new Error("heatmap.js must be loaded before the leaflet heatmap plugin");if(void 0===window.L)throw new Error("Leaflet must be loaded before the leaflet heatmap plugin");e.HeatmapOverlay=n(window.h337,window.L)}}(0,void 0,function(n,l){void 0===l.Layer&&(l.Layer=l.Class);var e=l.Layer.extend({initialize:function(t){this.cfg=t,this._el=l.DomUtil.create("div","leaflet-zoom-hide"),this._data=[],this._max=1,this._min=0,this.cfg.container=this._el},onAdd:function(t){var e=t.getSize();this._map=t,this._width=e.x,this._height=e.y,this._el.style.width=e.x+"px",this._el.style.height=e.y+"px",this._el.style.position="absolute",this._origin=this._map.layerPointToLatLng(new l.Point(0,0)),t.getPanes().overlayPane.appendChild(this._el),this._heatmap||(this._heatmap=n.create(this.cfg)),t.on("moveend",this._reset,this),this._draw()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._el),t.off("moveend",this._reset,this)},_draw:function(){if(this._map){var t=this._map.getPanes().mapPane._leaflet_pos;this._el.style[e.CSS_TRANSFORM]="translate("+-Math.round(t.x)+"px,"+-Math.round(t.y)+"px)",this._update()}},_update:function(){var t,e,n={max:this._max,min:this._min,data:[]};if(this._map.getBounds(),t=this._map.getZoom(),e=Math.pow(2,t),0!=this._data.length){for(var r=[],i=this.cfg.scaleRadius?e:1,o=0,a=0,s=this.cfg.valueField,l=this._data.length;l--;){var u=this._data[l],c=u[s],h=u.latlng;o=Math.max(c,o),a=Math.min(c,a);var f,p=this._map.latLngToContainerPoint(h),d={x:Math.round(p.x),y:Math.round(p.y)};d[s]=c,f=u.radius?u.radius*i:(this.cfg.radius||2)*i,d.radius=f,r.push(d)}this.cfg.useLocalExtrema&&(n.max=o,n.min=a),n.data=r,this._heatmap.setData(n)}else this._heatmap&&this._heatmap.setData(n)},setData:function(t){this._max=t.max||this._max,this._min=t.min||this._min;for(var e=this.cfg.latField||"lat",n=this.cfg.lngField||"lng",r=this.cfg.valueField||"value",i=(t=t.data).length,o=[];i--;){var a=t[i],s={latlng:new l.LatLng(a[e],a[n])};s[r]=a[r],a.radius&&(s.radius=a.radius),o.push(s)}this._data=o,this._draw()},addData:function(t){if(0<t.length)for(var e=t.length;e--;)this.addData(t[e]);else{var n=this.cfg.latField||"lat",r=this.cfg.lngField||"lng",i=this.cfg.valueField||"value",o=t,a={latlng:new l.LatLng(o[n],o[r])};a[i]=o[i],this._max=Math.max(this._max,a[i]),this._min=Math.min(this._min,a[i]),o.radius&&(a.radius=o.radius),this._data.push(a),this._draw()}},_reset:function(){this._origin=this._map.layerPointToLatLng(new l.Point(0,0));var t=this._map.getSize();this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._el.style.width=this._width+"px",this._el.style.height=this._height+"px",this._heatmap._renderer.setDimensions(this._width,this._height)),this._draw()}});return e.CSS_TRANSFORM=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<e.length;n++){var r=e[n];if(void 0!==t.style[r])return r}return e[0]}(),e})},{"heatmap.js":490,leaflet:560}],31:[function(h,n,r){(function(e){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){if("object"===(void 0===r?"undefined":D(r))&&void 0!==n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).html2canvas=t()}}(function(){return function o(a,s,l){function u(n,t){if(!s[n]){if(!a[n]){var e="function"==typeof h&&h;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(t){var e=a[n][1][t];return u(e||t)},i,i.exports,o,a,s,l)}return s[n].exports}for(var c="function"==typeof h&&h,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,O,N){(function(T){!function(t){var e="object"==(void 0===N?"undefined":D(N))&&N&&!N.nodeType&&N,n="object"==(void 0===O?"undefined":D(O))&&O&&!O.nodeType&&O,r="object"==(void 0===T?"undefined":D(T))&&T;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var i,o,y=2147483647,_=36,v=1,b=26,a=38,s=700,x=72,w=128,L="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=_-v,C=Math.floor,k=String.fromCharCode;function E(t){throw new RangeError(h[t])}function p(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function d(t,e){var n=t.split("@"),r="";return 1<n.length&&(r=n[0]+"@",t=n[1]),r+p((t=t.replace(c,".")).split("."),e).join(".")}function S(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function M(t){return p(t,function(t){var e="";return 65535<t&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,n){var r=0;for(t=n?C(t/s):t>>1,t+=C(t/e);f*b>>1<t;r+=_)t=C(t/f);return C(r+(f+1)*t/(t+a))}function g(t){var e,n,r,i,o,a,s,l,u,c,h,f=[],p=t.length,d=0,g=w,m=x;for((n=t.lastIndexOf(L))<0&&(n=0),r=0;r<n;++r)128<=t.charCodeAt(r)&&E("not-basic"),f.push(t.charCodeAt(r));for(i=0<n?n+1:0;i<p;){for(o=d,a=1,s=_;p<=i&&E("invalid-input"),h=t.charCodeAt(i++),(_<=(l=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:_)||l>C((y-d)/a))&&E("overflow"),d+=l*a,!(l<(u=s<=m?v:m+b<=s?b:s-m));s+=_)a>C(y/(c=_-u))&&E("overflow"),a*=c;m=I(d-o,e=f.length+1,0==o),C(d/e)>y-g&&E("overflow"),g+=C(d/e),d%=e,f.splice(d++,0,g)}return M(f)}function m(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m=[];for(f=(t=S(t)).length,e=w,o=x,a=n=0;a<f;++a)(h=t[a])<128&&m.push(k(h));for(r=i=m.length,i&&m.push(L);r<f;){for(s=y,a=0;a<f;++a)e<=(h=t[a])&&h<s&&(s=h);for(s-e>C((y-n)/(p=r+1))&&E("overflow"),n+=(s-e)*p,e=s,a=0;a<f;++a)if((h=t[a])<e&&++n>y&&E("overflow"),h==e){for(l=n,u=_;!(l<(c=u<=o?v:o+b<=u?b:u-o));u+=_)g=l-c,d=_-c,m.push(k(P(c+g%d,0))),l=C(g/d);m.push(k(P(l,0))),o=I(n,p,r==i),n=0,++r}++n,++e}return m.join("")}if(i={version:"1.4.1",ucs2:{decode:S,encode:M},decode:g,encode:m,toASCII:function(t){return d(t,function(t){return u.test(t)?"xn--"+m(t):t})},toUnicode:function(t){return d(t,function(t){return l.test(t)?g(t.slice(4).toLowerCase()):t})}},e&&n)if(O.exports==e)n.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var i=t("./log");function h(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;)!0!==e&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(h(r,e)),r=r.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?function(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){i("Unable to copy canvas content from",e,t)}}(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}e.exports=function(o,t,e,n,a,s,l){var u=h(o.documentElement,a.javascriptEnabled),c=t.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=e,c.height=n,c.scrolling="no",t.body.appendChild(c),new Promise(function(e){var t,n,r,i=c.contentWindow.document;c.contentWindow.onload=c.onload=function(){var t=setInterval(function(){0<i.body.childNodes.length&&(!function t(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var n=e.firstChild;n;)t(n),n=n.nextSibling}}(i.documentElement),clearInterval(t),"view"===a.type&&(c.contentWindow.scrollTo(s,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||c.contentWindow.scrollY===l&&c.contentWindow.scrollX===s||(i.documentElement.style.top=-l+"px",i.documentElement.style.left=-s+"px",i.documentElement.style.position="absolute")),e(c))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),n=s,r=l,!(t=o).defaultView||n===t.defaultView.pageXOffset&&r===t.defaultView.pageYOffset||t.defaultView.scrollTo(n,r),i.replaceChild(i.adoptNode(u),i.documentElement),i.close()})}},{"./log":13}],3:[function(t,e,n){function r(t){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}r.prototype.darken=function(t){var e=1-t;return new r([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),3<t.length&&(this.a=t[3])),Array.isArray(t)};var i=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(t){var e;return null!==(e=t.match(i))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var o=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(t){var e;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(t){var e;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(t){t=t.toLowerCase();var e=l[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},r.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=r},{}],4:[function(t,e,n){var f=t("./support"),p=t("./renderers/canvas"),d=t("./imageloader"),g=t("./nodeparser"),r=t("./nodecontainer"),m=t("./log"),i=t("./utils"),y=t("./clone"),_=t("./proxy").loadUrlDocument,v=i.getBounds,b="data-html2canvas-node",x=0;function o(t,e){var n,r,i=x++;if((e=e||{}).logging&&(m.options.logging=!0,m.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:p,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=e.width?e.width:window.innerWidth,a=null!=e.height?e.height:window.innerHeight;return _((n=t,r=document.createElement("a"),r.href=n,r.href=r.href,r),e.proxy,document,o,a,e).then(function(t){return w(t.contentWindow.document.documentElement,t,e,o,a)})}var s,l,u,c,h,f=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return f.setAttribute(b+i,i),(s=f.ownerDocument,l=e,u=f.ownerDocument.defaultView.innerWidth,c=f.ownerDocument.defaultView.innerHeight,h=i,y(s,s,u,c,l,s.defaultView.pageXOffset,s.defaultView.pageYOffset).then(function(t){m("Document cloned");var e=b+h,n="["+e+"='"+h+"']";s.querySelector(n).removeAttribute(e);var r=t.contentWindow,i=r.document.querySelector(n),o="function"==typeof l.onclone?Promise.resolve(l.onclone(r.document)):Promise.resolve(!0);return o.then(function(){return w(i,t,l,u,c)})})).then(function(t){return"function"==typeof e.onrendered&&(m("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}o.CanvasRenderer=p,o.NodeContainer=r,o.log=m,o.utils=i;var a="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:o;function w(n,r,i,t,e){var o=r.contentWindow,a=new f(o.document),s=new d(i,a),l=v(n),u="view"===i.type?t:l.right+1,c="view"===i.type?e:l.bottom+1,h=new i.renderer(u,c,s,i,document);return new g(n,h,a,s,i).ready.then(function(){var t,e;return m("Finished rendering"),t="view"===i.type?L(h.canvas,{width:h.canvas.width,height:h.canvas.height,top:0,left:0,x:0,y:0}):n===o.document.body||n===o.document.documentElement||null!=i.canvas?h.canvas:L(h.canvas,{width:null!=i.width?i.width:l.width,height:null!=i.height?i.height:l.height,top:l.top,left:l.left,x:0,y:0}),e=r,i.removeContainer&&(e.parentNode.removeChild(e),m("Cleaned up container")),t})}function L(t,e){var n=document.createElement("canvas"),r=Math.min(t.width-1,Math.max(0,e.left)),i=Math.min(t.width,Math.max(1,e.left+e.width)),o=Math.min(t.height-1,Math.max(0,e.top)),a=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;var s=i-r,l=a-o;return m("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",s,"height:",l),m("Resulting crop with width",e.width,"and height",e.height,"with x",r,"and y",o),n.getContext("2d").drawImage(t,r,o,s,l,e.x,e.y,s,l),n}e.exports=a},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,n){var r=t("./log"),i=t("./utils").smallImage;e.exports=function t(e){if(this.src=e,r("DummyImageContainer for",e),!this.promise||!this.image){r("Initiating DummyImageContainer"),t.prototype.image=new Image;var n=this.image;t.prototype.promise=new Promise(function(t,e){n.onload=t,n.onerror=e,n.src=i(),!0===n.complete&&t(n)})}}},{"./log":13,"./utils":26}],6:[function(t,e,n){var l=t("./utils").smallImage;e.exports=function(t,e){var n,r,i=document.createElement("div"),o=document.createElement("img"),a=document.createElement("span"),s="Hidden Text";i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),o.src=l(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin=0,a.style.padding=0,a.appendChild(document.createTextNode(s)),i.appendChild(a),i.appendChild(o),n=o.offsetTop-a.offsetTop+1,i.removeChild(a),i.appendChild(document.createTextNode(s)),i.style.lineHeight="normal",o.style.verticalAlign="super",r=o.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=n,this.lineWidth=1,this.middle=r}},{"./utils":26}],7:[function(t,e,n){var r=t("./font");function i(){this.data={}}i.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new r(t,e)),this.data[t+"-"+e]},e.exports=i},{"./font":6}],8:[function(o,t,e){var a=o("./utils").getBounds,i=o("./proxy").loadUrlDocument;function n(e,t,n){this.image=null,this.src=e;var r=this,i=a(e);this.promise=(t?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(n.proxy,i,n)).then(function(t){return o("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(t){return r.image=t})}n.prototype.proxyLoad=function(t,e,n){var r=this.src;return i(r.src,t,r.ownerDocument,e.width,e.height,n)},t.exports=n},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,n){function r(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=r},{}],10:[function(t,e,n){e.exports=function(n,r){this.src=n,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(t,e){i.image.onload=t,i.image.onerror=e,r&&(i.image.crossOrigin="anonymous"),i.image.src=n,!0===i.image.complete&&t(i.image)})}},{}],11:[function(t,e,n){var o=t("./log"),r=t("./imagecontainer"),i=t("./dummyimagecontainer"),a=t("./proxyimagecontainer"),s=t("./framecontainer"),l=t("./svgcontainer"),u=t("./svgnodecontainer"),c=t("./lineargradientcontainer"),h=t("./webkitgradientcontainer"),f=t("./utils").bind;function p(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}p.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},p.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},p.prototype.addImage=function(n,r){return function(e){e.args.forEach(function(t){this.imageExists(n,t)||(n.splice(0,0,r.call(this,e)),o("Added image #"+n.length,"string"==typeof t?t.substring(0,100):t))},this)}},p.prototype.hasImageBackground=function(t){return"none"!==t.method},p.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new r(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new r(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(e,!0):this.options.proxy?new a(e,this.options.proxy):new i(e):new l(e)}return"linear-gradient"===t.method?new c(t):"gradient"===t.method?new h(t):"svg"===t.method?new u(t.args[0],this.support.svg):"IFRAME"===t.method?new s(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new i(t)},p.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},p.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},p.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},p.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},p.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new i(e.src).promise.then(function(t){e.image=t})})},p.prototype.get=function(e){var n=null;return this.images.some(function(t){return(n=t).src===e})?n:null},p.prototype.fetch=function(t){return this.images=t.reduce(f(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(e,n){e.promise.then(function(){o("Succesfully loaded image #"+(n+1),e)},function(t){o("Failed loading image #"+(n+1),e,t)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},p.prototype.timeout=function(n,r){var i,t=Promise.race([n.promise,new Promise(function(t,e){i=setTimeout(function(){o("Timed out loading image",n),e(n)},r)})]).then(function(t){return clearTimeout(i),t});return t.catch(function(){clearTimeout(i)}),t},e.exports=p},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,n){var i=t("./gradientcontainer"),o=t("./color");function r(t){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var e=r.REGEXP_DIRECTION.test(t.args[0])||!i.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=n;break;case"center":break;default:var i=.01*parseFloat(t,10);if(isNaN(i))break;0===e?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(i.REGEXP_COLORSTOP),n=+e[2],r=0===n?"%":e[3];return{color:new o(e[1]),stop:"%"===r?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(n,r){null===n.stop&&this.colorStops.slice(r).some(function(t,e){return null!==t.stop&&(n.stop=(t.stop-this.colorStops[r-1].stop)/(e+1)+this.colorStops[r-1].stop,!0)},this)},this)}r.prototype=Object.create(i.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,n){var r=function t(){t.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-t.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},e.exports=r},{}],14:[function(t,e,n){var o=t("./color"),r=t("./utils"),i=r.getBounds,a=r.parseBackgrounds,s=r.offsetBounds;function l(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function u(t){return-1!==t.toString().indexOf("%")}function c(t){return t.replace("px","")}function h(t){return parseFloat(t)}l.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},l.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},l.prototype.assignStack=function(t){(this.stack=t).children.push(this)},l.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},l.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},l.prototype.prefixedCss=function(e){var n=this.css(e);return void 0===n&&["webkit","moz","ms","o"].some(function(t){return void 0!==(n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===n?null:n},l.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},l.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},l.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new o(this.css(t)))},l.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},l.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},l.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},l.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=a(this.css("backgroundImage")))},l.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return 1===(n=(n=n[e||0]||n[0]||"auto").trim().split(" ")).length&&(n=[n[0],u(n[0])?"auto":n[0]]),n},l.prototype.parseBackgroundSize=function(t,e,n){var r,i,o=this.cssList("backgroundSize",n);if(u(o[0]))r=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var a=t.width/t.height,s=e.width/e.height;return a<s^"contain"===o[0]?{width:t.height*s,height:t.height}:{width:t.width,height:t.width/s}}r=parseInt(o[0],10)}return i="auto"===o[0]&&"auto"===o[1]?e.height:"auto"===o[1]?r/e.width*e.height:u(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(r=i/e.height*e.width),{width:r,height:i}},l.prototype.parseBackgroundPosition=function(t,e,n,r){var i,o,a=this.cssList("backgroundPosition",n);return i=u(a[0])?(t.width-(r||e).width)*(parseFloat(a[0])/100):parseInt(a[0],10),o="auto"===a[1]?i/e.width*e.height:u(a[1])?(t.height-(r||e).height)*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(i=o/e.height*e.width),{left:i,top:o}},l.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},l.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);e.push({color:new o(i[0]),offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return e},l.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(c).map(h);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},l.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?function(t){{if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}}(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},l.prototype.inverseTransform=function(){var t,e,n,r,i,o,a,s,l=this.parseTransform();return{origin:l.origin,matrix:(t=l.matrix,e=t[0],n=t[2],r=t[4],i=t[1],o=t[3],a=t[5],s=e*o-n*i,[o,-i,-n,e,n*a-r*o,r*i-e*a].map(function(t){return t/s}))}},l.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?s(this.node):i(this.node))},l.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},l.prototype.getValue=function(){var t,e,n=this.node.value||"";return"SELECT"===this.node.tagName?(t=this.node,n=(e=t.options[t.selectedIndex||0])&&e.text||""):"password"===this.node.type&&(n=Array(n.length+1).join("•")),0===n.length?this.node.placeholder||"":n},l.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,l.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,l.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,l.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=l},{"./color":3,"./utils":26}],15:[function(t,e,n){var s=t("./log"),l=t("punycode"),u=t("./nodecontainer"),f=t("./textcontainer"),p=t("./pseudoelementcontainer"),c=t("./fontmetrics"),h=t("./color"),d=t("./stackingcontext"),r=t("./utils"),g=r.bind,a=r.getBounds,m=r.parseBackgrounds,y=r.offsetBounds;function i(t,e,n,r,i){s("Starting NodeParser"),this.renderer=e,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new d(!0,1,t.ownerDocument,null);var o=new u(t,null);if(i.background&&e.rectangle(0,0,e.width,e.height,new h(i.background)),t===t.ownerDocument.documentElement){var a=new u(o.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,a.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=U([o].concat(this.getChildren(o)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new c,s("Fetched nodes, total:",this.nodes.length),s("Calculate overflow clips"),this.calculateOverflowClips(),s("Start fetching images"),this.images=r.fetch(this.nodes.filter(R)),this.ready=this.images.ready.then(g(function(){return s("Images loaded, starting parsing"),s("Creating stacking contexts"),this.createStackingContexts(),s("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),s("Render queue created with "+this.renderQueue.length+" items"),new Promise(g(function(t){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,t):0<this.renderQueue.length?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function o(t){return t.parent&&t.parent.clip.length}function _(){}i.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(R(t)){F(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=o(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,F(t)&&t.cleanDOM()}else j(t)&&(t.clip=o(t)?t.parent.clip:[]);F(t)||(t.bounds=null)},this)},i.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(g(function(){this.asyncRenderer(t,e)},this),0)},i.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+p.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+p.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},i.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},i.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},i.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),r=this.getPseudoElement(t,":after");n&&e.push(n),r&&e.push(r)}return U(e)},i.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r,i,o=(r=n.content,(i=r.substr(0,1))===r.substr(r.length-1)&&i.match(/'|"/)?r.substr(1,r.length-2):r),a="url"===o.substr(0,3),s=document.createElement(a?"img":"html2canvaspseudoelement"),l=new p(s,t,e),u=n.length-1;0<=u;u--){var c=n.item(u).replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});s.style[c]=n[c]}if(s.className=p.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+p.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,a)return s.src=m(o)[0].args[0],[l];var h=document.createTextNode(o);return s.appendChild(h),[l,new f(h,l)]},i.prototype.getChildren=function(n){return U([].filter.call(n.node.childNodes,O).map(function(t){var e=[t.nodeType===Node.TEXT_NODE?new f(t,n):new u(t,n)].filter(q);return t.nodeType===Node.ELEMENT_NODE&&e.length&&"TEXTAREA"!==t.tagName?e[0].isElementVisible()?e.concat(this.getChildren(e[0])):[]:e},this))},i.prototype.newStackingContext=function(t,e){var n=new d(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n),(e?n.getParentStack(this):n.parent.stack).contexts.push(n),t.stack=n},i.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){var e,n;R(t)&&(this.isRootElement(t)||t.getOpacity()<1||(n=(e=t).css("position"),"auto"!==(-1!==["absolute","relative","fixed"].indexOf(n)?e.css("zIndex"):"auto"))||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):R(t)&&(N(t)&&M(t)||-1!==["inline-block","inline-table"].indexOf(t.css("display"))||D(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},i.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},i.prototype.isRootElement=function(t){return null===t.parent},i.prototype.sortStackingContexts=function(t){var n;t.contexts.sort((n=t.contexts.slice(0),function(t,e){return t.cssInt("zIndex")+n.indexOf(t)/n.length-(e.cssInt("zIndex")+n.indexOf(e)/n.length)})),t.contexts.forEach(this.sortStackingContexts,this)},i.prototype.parseTextBounds=function(a){return function(t,e,n){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var r=n.slice(0,e).join("").length;return this.getRangeBounds(a.node,r,t.length)}if(a.node&&"string"==typeof a.node.data){var i=a.node.splitText(t.length),o=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=i,o}}else this.support.rangeBounds&&!a.parent.hasTransform()||(a.node=a.node.splitText(t.length));return{}}},i.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),r=t.parentNode,i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),r.replaceChild(n,t);var o=e?y(n):a(n);return r.replaceChild(i,n),o},i.prototype.getRangeBounds=function(t,e,n){var r=this.range||(this.range=t.ownerDocument.createRange());return r.setStart(t,e),r.setEnd(t,e+n),r.getBoundingClientRect()},i.prototype.parse=function(t){var e=t.contexts.filter(E),n=t.children.filter(R),r=n.filter(A(D)),i=r.filter(A(N)).filter(A(P)),o=n.filter(A(N)).filter(D),a=r.filter(A(N)).filter(P),s=t.contexts.concat(r.filter(N)).filter(M),l=t.children.filter(j).filter(T),u=t.contexts.filter(S);e.concat(i).concat(o).concat(a).concat(s).concat(l).concat(u).forEach(function(t){this.renderQueue.push(t),I(t)&&(this.parse(t),this.renderQueue.push(new _))},this)},i.prototype.paint=function(t){try{t instanceof _?this.renderer.ctx.restore():j(t)?(F(t.parent)&&t.parent.appendToDOM(),this.paintText(t),F(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(s(t),this.options.strict)throw t}},i.prototype.paintNode=function(t){I(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},i.prototype.paintElement=function(n){var r=n.parseBounds();this.renderer.clip(n.backgroundClip,function(){this.renderer.renderBackground(n,r,n.borders.borders.map(z))},this,n),this.renderer.mask(n.backgroundClip,function(){this.renderer.renderShadows(n,n.borders.clip)},this,n),this.renderer.clip(n.clip,function(){this.renderer.renderBorders(n.borders.borders)},this,n),this.renderer.clip(n.backgroundClip,function(){switch(n.node.nodeName){case"svg":case"IFRAME":var t=this.images.get(n.node);t?this.renderer.renderImage(n,r,n.borders,t):s("Error loading <"+n.node.nodeName+">",n.node);break;case"IMG":var e=this.images.get(n.node.src);e?this.renderer.renderImage(n,r,n.borders,e):s("Error loading <img>",n.node.src);break;case"CANVAS":this.renderer.renderImage(n,r,n.borders,{image:n.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(n)}},this,n)},i.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),r={width:n-1,height:n-1,top:e.top,left:e.left},i=[3,3],o=[i,i,i,i],a=[1,1,1,1].map(function(t){return{color:new h("#A5A5A5"),width:t}}),s=w(r,o,a);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new h("#DEDEDE")),this.renderer.renderBorders(b(a,r,s,o)),t.node.checked&&(this.renderer.font(new h("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",r.left+n/6,r.top+n-1))},this,t)},i.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new h("#DEDEDE"),1,new h("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new h("#424242"))},this,t)},i.prototype.paintFormValue=function(e){var t=e.getValue();if(0<t.length){var n=e.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{r.style[t]=e.css(t)}catch(t){s("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var i=e.parseBounds();r.style.position="fixed",r.style.left=i.left+"px",r.style.top=i.top+"px",r.textContent=t,n.body.appendChild(r),this.paintText(new f(r.firstChild,e)),n.body.removeChild(r)}},i.prototype.paintText=function(n){n.applyTextTransform();var t,e=l.ucs2.decode(n.node.data),r=this.options.letterRendering&&!/^(normal|none|0px)$/.test(n.parent.css("letterSpacing"))||(t=n.node.data,/[^\u0000-\u00ff]/.test(t))?e.map(function(t){return l.ucs2.encode([t])}):function(t){var e,n=[],r=0,i=!1;for(;t.length;)o=t[r],-1!==[32,13,10,9,45].indexOf(o)===i?((e=t.splice(0,r)).length&&n.push(l.ucs2.encode(e)),i=!i,r=0):r++,r>=t.length&&(e=t.splice(0,r)).length&&n.push(l.ucs2.encode(e));var o;return n}(e),i=n.parent.fontWeight(),o=n.parent.css("fontSize"),a=n.parent.css("fontFamily"),s=n.parent.parseTextShadows();this.renderer.font(n.parent.color("color"),n.parent.css("fontStyle"),n.parent.css("fontVariant"),i,o,a),s.length?this.renderer.fontShadow(s[0].color,s[0].offsetX,s[0].offsetY,s[0].blur):this.renderer.clearShadow(),this.renderer.clip(n.parent.clip,function(){r.map(this.parseTextBounds(n),this).forEach(function(t,e){t&&(this.renderer.text(r[e],t.left,t.bottom),this.renderTextDecoration(n.parent,t,this.fontMetrics.getMetrics(a,o)))},this)},this,n.parent)},i.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var v={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};function b(a,s,l,u){return a.map(function(t,e){if(0<t.width){var n=s.left,r=s.top,i=s.width,o=s.height-a[2].width;switch(e){case 0:o=a[0].width,t.args=C({c1:[n,r],c2:[n+i,r],c3:[n+i-a[1].width,r+o],c4:[n+a[3].width,r+o]},u[0],u[1],l.topLeftOuter,l.topLeftInner,l.topRightOuter,l.topRightInner);break;case 1:n=s.left+s.width-a[1].width,i=a[1].width,t.args=C({c1:[n+i,r],c2:[n+i,r+o+a[2].width],c3:[n,r+o],c4:[n,r+a[0].width]},u[1],u[2],l.topRightOuter,l.topRightInner,l.bottomRightOuter,l.bottomRightInner);break;case 2:r=r+s.height-a[2].width,o=a[2].width,t.args=C({c1:[n+i,r+o],c2:[n,r+o],c3:[n+a[3].width,r],c4:[n+i-a[3].width,r]},u[2],u[3],l.bottomRightOuter,l.bottomRightInner,l.bottomLeftOuter,l.bottomLeftInner);break;case 3:i=a[3].width,t.args=C({c1:[n,r+o+a[2].width],c2:[n,r],c3:[n+i,r+a[0].width],c4:[n+i,r+o]},u[3],u[0],l.bottomLeftOuter,l.bottomLeftInner,l.topLeftOuter,l.topLeftInner)}}return t})}function x(t,e,n,r){var i=(Math.sqrt(2)-1)/3*4,o=n*i,a=r*i,s=t+n,l=e+r;return{topLeft:L({x:t,y:l},{x:t,y:l-a},{x:s-o,y:e},{x:s,y:e}),topRight:L({x:t,y:e},{x:t+o,y:e},{x:s,y:l-a},{x:s,y:l}),bottomRight:L({x:s,y:e},{x:s,y:e+a},{x:t+o,y:l},{x:t,y:l}),bottomLeft:L({x:s,y:l},{x:s-o,y:l},{x:t,y:e+a},{x:t,y:e})}}function w(t,e,n){var r=t.left,i=t.top,o=t.width,a=t.height,s=e[0][0]<o/2?e[0][0]:o/2,l=e[0][1]<a/2?e[0][1]:a/2,u=e[1][0]<o/2?e[1][0]:o/2,c=e[1][1]<a/2?e[1][1]:a/2,h=e[2][0]<o/2?e[2][0]:o/2,f=e[2][1]<a/2?e[2][1]:a/2,p=e[3][0]<o/2?e[3][0]:o/2,d=e[3][1]<a/2?e[3][1]:a/2,g=o-u,m=a-f,y=o-h,_=a-d;return{topLeftOuter:x(r,i,s,l).topLeft.subdivide(.5),topLeftInner:x(r+n[3].width,i+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:x(r+g,i,u,c).topRight.subdivide(.5),topRightInner:x(r+Math.min(g,o+n[3].width),i+n[0].width,g>o+n[3].width?0:u-n[3].width,c-n[0].width).topRight.subdivide(.5),bottomRightOuter:x(r+y,i+m,h,f).bottomRight.subdivide(.5),bottomRightInner:x(r+Math.min(y,o-n[3].width),i+Math.min(m,a+n[0].width),Math.max(0,h-n[1].width),f-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:x(r,i+_,p,d).bottomLeft.subdivide(.5),bottomLeftInner:x(r+n[3].width,i+_,Math.max(0,p-n[3].width),d-n[2].width).bottomLeft.subdivide(.5)}}function L(s,l,u,c){var h=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:s,startControl:l,endControl:u,end:c,subdivide:function(t){var e=h(s,l,t),n=h(l,u,t),r=h(u,c,t),i=h(e,n,t),o=h(n,r,t),a=h(i,o,t);return[L(s,e,i,a),L(a,o,r,c)]},curveTo:function(t){t.push(["bezierCurve",l.x,l.y,u.x,u.y,c.x,c.y])},curveToReversed:function(t){t.push(["bezierCurve",u.x,u.y,l.x,l.y,s.x,s.y])}}}function C(t,e,n,r,i,o,a){var s=[];return 0<e[0]||0<e[1]?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),0<n[0]||0<n[1]?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(s.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function k(t,e,n,r,i,o,a){0<e[0]||0<e[1]?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,a]),(0<n[0]||0<n[1])&&t.push(["line",i[0].start.x,i[0].start.y])}function E(t){return t.cssInt("zIndex")<0}function S(t){return 0<t.cssInt("zIndex")}function M(t){return 0===t.cssInt("zIndex")}function P(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function I(t){return t instanceof d}function T(t){return 0<t.node.data.trim().length}function O(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function N(t){return"static"!==t.css("position")}function D(t){return"none"!==t.css("float")}function A(t){var e=this;return function(){return!t.apply(e,arguments)}}function R(t){return t.node.nodeType===Node.ELEMENT_NODE}function F(t){return!0===t.isPseudoElement}function j(t){return t.node.nodeType===Node.TEXT_NODE}function B(t){return parseInt(t,10)}function z(t){return t.width}function q(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function U(t){return[].concat.apply([],t)}i.prototype.parseBorders=function(o){var r,t=o.parseBounds(),e=(r=o,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var e=r.css("border"+t+"Radius"),n=e.split(" ");return n.length<=1&&(n[1]=n[0]),n.map(B)})),n=["Top","Right","Bottom","Left"].map(function(t,e){var n=o.css("border"+t+"Style"),r=o.color("border"+t+"Color");"inset"===n&&r.isBlack()&&(r=new h([255,255,255,r.a]));var i=v[n]?v[n][e]:null;return{width:o.cssInt("border"+t+"Width"),color:i?r[i[0]](i[1]):r,args:null}}),i=w(t,e,n);return{clip:this.parseBackgroundClip(o,i,n,e,t),borders:b(n,t,i,e)}},i.prototype.parseBackgroundClip=function(t,e,n,r,i){var o=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":k(o,r[0],r[1],e.topLeftInner,e.topRightInner,i.left+n[3].width,i.top+n[0].width),k(o,r[1],r[2],e.topRightInner,e.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),k(o,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),k(o,r[3],r[0],e.bottomLeftInner,e.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:k(o,r[0],r[1],e.topLeftOuter,e.topRightOuter,i.left,i.top),k(o,r[1],r[2],e.topRightOuter,e.bottomRightOuter,i.left+i.width,i.top),k(o,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,i.left+i.width,i.top+i.height),k(o,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,i.left,i.top+i.height)}return o},e.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){var a=t("./xhr"),r=t("./utils"),s=t("./log"),l=t("./clone"),u=r.decode64;function c(t,e,n){var r="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var i=f(r),o=p(e,t,i);return r?a(o):h(n,o,i).then(function(t){return u(t.content)})}var i=0;function h(i,o,a){return new Promise(function(e,n){var t=i.createElement("script"),r=function(){delete window.html2canvas.proxy[a],i.body.removeChild(t)};window.html2canvas.proxy[a]=function(t){r(),e(t)},t.src=o,t.onerror=function(t){r(),n(t)},i.body.appendChild(t)})}function f(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++i+"_"+Math.round(1e5*Math.random())}function p(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}n.Proxy=c,n.ProxyURL=function(t,e,n){var r="crossOrigin"in new Image,i=f(r),o=p(e,t,i);return r?Promise.resolve(o):h(n,o,i).then(function(t){return"data:"+t.type+";base64,"+t.content})},n.loadUrlDocument=function(t,e,n,r,i,o){return new c(t,e,window.document).then((a=t,function(e){var n,t=new DOMParser;try{n=t.parseFromString(e,"text/html")}catch(t){s("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(t){s("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var r=n.querySelector("base");if(!r||!r.href.host){var i=n.createElement("base");i.href=a,n.head.insertBefore(i,n.head.firstChild)}return n})).then(function(t){return l(t,n,r,i,o,0,0)});var a}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,n){var o=t("./proxy").ProxyURL;e.exports=function(n,r){var t=document.createElement("a");t.href=n,n=t.href,this.src=n,this.image=new Image;var i=this;this.promise=new Promise(function(t,e){i.image.crossOrigin="Anonymous",i.image.onload=t,i.image.onerror=e,new o(n,r,document).then(function(t){i.image.src=t}).catch(e)})}},{"./proxy":16}],18:[function(t,e,n){var r=t("./nodecontainer");function i(t,e,n){r.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}i.prototype.cloneTo=function(t){i.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(i.prototype=Object.create(r.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=i},{"./nodecontainer":14}],19:[function(t,e,n){var l=t("./log");function r(t,e,n,r,i){this.width=t,this.height=e,this.images=n,this.options=r,this.document=i}r.prototype.renderImage=function(t,e,n,r){var i=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),a=t.cssInt("paddingRight"),s=t.cssInt("paddingBottom"),l=n.borders,u=e.width-(l[1].width+l[3].width+i+a),c=e.height-(l[0].width+l[2].width+o+s);this.drawImage(r,0,0,r.image.width||u,r.image.height||c,e.left+i+l[3].width,e.top+o+l[0].width,u,c)},r.prototype.renderBackground=function(t,e,n){0<e.height&&0<e.width&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},r.prototype.renderBackgroundColor=function(t,e){var n=t.color("backgroundColor");n.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,n)},r.prototype.renderShadows=function(t,e){var n=t.css("boxShadow");if("none"!==n){var r=n.split(/,(?![^(]*\))/);this.shadow(e,r)}},r.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},r.prototype.renderBackgroundImage=function(o,a,s){o.parseBackgroundImages().reverse().forEach(function(t,e,n){switch(t.method){case"url":var r=this.images.get(t.args[0]);r?this.renderBackgroundRepeating(o,a,r,n.length-(e+1),s):l("Error loading background-image",t.args[0]);break;case"linear-gradient":case"gradient":var i=this.images.get(t.value);i?this.renderBackgroundGradient(i,a,s):l("Error loading background-image",t.args[0]);break;case"none":break;default:l("Unknown background-image type",t.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(t,e,n,r,i){var o=t.parseBackgroundSize(e,n.image,r),a=t.parseBackgroundPosition(e,n.image,r,o);switch(t.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,o,e,e.left+i[3],e.top+a.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,o,e,e.left+a.left+i[3],e.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,a,o,e,e.left+a.left+i[3],e.top+a.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,a,o,{top:e.top,left:e.left},i[3],i[0])}},e.exports=r},{"./log":13}],20:[function(t,e,n){var r=t("../renderer"),i=t("../lineargradientcontainer"),o=t("../log");function a(t,e){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},o("Initialized CanvasRenderer with size",t,"x",e)}function s(t){return 0<t.length}(a.prototype=Object.create(r.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"===(void 0===t?"undefined":D(t))&&t.isColor?t.toString():t,this.ctx},a.prototype.rectangle=function(t,e,n,r,i){this.setFillStyle(i).fillRect(t,e,n,r)},a.prototype.circle=function(t,e,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},a.prototype.circleStroke=function(t,e,n,r,i,o){this.circle(t,e,n,r),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},a.prototype.shadow=function(t,e){var n=this.setFillStyle("white");n.save(),this.shape(t),e.forEach(function(t){var e=function(t){var e={color:/^(#|rgb|hsl|(?!(inset|initial|inherit))\D+)/i,inset:/^inset/i,px:/px$/i},n=["x","y","blur","spread"],r=t.split(/ (?![^(]*\))/),i={};for(var o in e)i[o]=r.filter(e[o].test.bind(e[o])),i[o]=0===i[o].length?null:1===i[o].length?i[o][0]:i[o];for(var a=0;a<i.px.length;a++)i[n[a]]=parseInt(i.px[a]);return i}(t);e.inset||(n.shadowOffsetX=e.x,n.shadowOffsetY=e.y,n.shadowColor=e.color,n.shadowBlur=e.blur,n.fill())},this),n.restore()},a.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},a.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},a.prototype.drawImage=function(t,e,n,r,i,o,a,s,l){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,r,i,o,a,s,l)},a.prototype.clip=function(t,e,n,r){this.ctx.save(),r&&r.hasTransform()?(this.setTransform(r.inverseTransform()),t.filter(s).forEach(function(t){this.shape(t).clip()},this),this.setTransform(r.parseTransform())):t.filter(s).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},a.prototype.mask=function(t,e,n,r){var i=t[t.length-1];if(i&&i.length){var o=[["rect",this.canvas.width,0,-this.canvas.width,this.canvas.height]].concat(i).concat([i[0]]);t=t.slice(0,-1).concat([o])}this.clip(t,e,n,r)},a.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},a.prototype.font=function(t,e,n,r,i,o){this.setFillStyle(t).font=[e,n,r,i,o].join(" ").split(",")[0]},a.prototype.fontShadow=function(t,e,n,r){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},a.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},a.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},a.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},a.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},a.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},a.prototype.backgroundRepeatShape=function(t,e,n,r,i,o,a,s,l){var u=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+a),Math.round(o)],["line",Math.round(i+a),Math.round(s+o)],["line",Math.round(i),Math.round(s+o)]];this.clip([u],function(){this.renderBackgroundRepeat(t,e,n,r,l[3],l[0])},this)},a.prototype.renderBackgroundRepeat=function(t,e,n,r,i,o){var a=Math.round(r.left+e.left+i),s=Math.round(r.top+e.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},a.prototype.renderBackgroundGradient=function(t,e){if(t instanceof i){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,n)}},a.prototype.resizeImage=function(t,e){var n=t.image;if(n.width===e.width&&n.height===e.height)return n;var r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),r},e.exports=a},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,n){var i=t("./nodecontainer");function r(t,e,n,r){i.call(this,n,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}(r.prototype=Object.create(i.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=r},{"./nodecontainer":14}],22:[function(t,e,n){function r(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(t){var e,n,r=!1;return t.createRange&&(e=t.createRange()).getBoundingClientRect&&((n=t.createElement("boundtest")).style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(r=!0),t.body.removeChild(n)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=r},{}],23:[function(t,e,n){var r=t("./xhr"),i=t("./utils").decode64;function o(t){this.src=t,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(t)?Promise.resolve(n.inlineFormatting(t)):r(t)}).then(function(e){return new Promise(function(t){window.html2canvas.svg.fabric.loadSVGFromString(e,n.createCanvas.call(n,t))})})}o.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},o.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},o.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},o.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},o.prototype.createCanvas=function(r){var i=this;return function(t,e){var n=new window.html2canvas.svg.fabric.StaticCanvas("c");i.image=n.lowerCanvasEl,n.setWidth(e.width).setHeight(e.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(t,e)).renderAll(),r(n.lowerCanvasEl)}},o.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):i(t)},e.exports=o},{"./utils":26,"./xhr":28}],24:[function(t,e,n){var r=t("./svgcontainer");function i(n,t){this.src=n,this.image=null;var r=this;this.promise=t?new Promise(function(t,e){r.image=new Image,r.image.onload=t,r.image.onerror=e,r.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(n),!0===r.image.complete&&t(r.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(n,r.createCanvas.call(r,t))})})}i.prototype=Object.create(r.prototype),e.exports=i},{"./svgcontainer":23}],25:[function(t,e,n){var r=t("./nodecontainer");function i(t,e){r.call(this,t,e)}function o(t,e,n){if(0<t.length)return e+n.toUpperCase()}(i.prototype=Object.create(r.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},i.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return e.toUpperCase();default:return e}},e.exports=i},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},n.decode64=function(t){var e,n,r,i,o,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=t.length,c="";for(e=0;e<u;e+=4)o=l.indexOf(t[e])<<2|(n=l.indexOf(t[e+1]))>>4,a=(15&n)<<4|(r=l.indexOf(t[e+2]))>>2,s=(3&r)<<6|(i=l.indexOf(t[e+3])),c+=64===r?String.fromCharCode(o):64===i||-1===i?String.fromCharCode(o,a):String.fromCharCode(o,a,s);return c},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){var e,n,r,i,o,a,s,l=[],u=0,c=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&0<(i=e.indexOf("-",1)+1)&&(r=e.substr(0,i),e=e.substr(i)),l.push({prefix:r,method:e.toLowerCase(),value:o,args:s,image:null})),s=[],e=r=n=o=""};return s=[],e=r=n=o="",t.split("").forEach(function(t){if(!(0===u&&-1<" \r\n\t".indexOf(t))){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===u)return u=1,void(o+=t);c++;break;case")":if(a)break;if(1===u){if(0===c)return u=0,o+=t,void h();c--}break;case",":if(a)break;if(0===u)return void h();if(1===u&&0===c&&!e.match(/^url$/i))return s.push(n),n="",void(o+=t)}o+=t,0===u?e+=t:n+=t}}),h(),l}},{}],27:[function(t,e,n){var r=t("./gradientcontainer");function i(t){r.apply(this,arguments),this.type="linear"===t.args[0]?r.TYPES.LINEAR:r.TYPES.RADIAL}i.prototype=Object.create(r.prototype),e.exports=i},{"./gradientcontainer":9}],28:[function(t,e,n){e.exports=function(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",r),n.onload=function(){200===n.status?t(n.responseText):e(new Error(n.statusText))},n.onerror=function(){e(new Error("Network Error"))},n.send()})}},{}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(t,e,n){"use strict";var r;r=function(u){var r="onselectstart"in document.createElement("div"),t=u.ui.menu.version.match(/^(\d)\.(\d+)/),e=parseInt(t[1],10),n=parseInt(t[2],10),i=e<2&&n<=10,o=e<2&&n<=11;u.widget("moogle.contextmenu",{version:"1.17.0",options:{addClass:"ui-contextmenu",closeOnWindowBlur:!0,autoFocus:!1,autoTrigger:!0,delegate:null,hide:{effect:"fadeOut",duration:"fast"},ignoreParentSelect:!0,menu:null,position:null,preventContextMenuForPopup:!1,preventSelect:!1,show:{effect:"slideDown",duration:"fast"},taphold:!1,uiMenuOptions:{},beforeOpen:u.noop,blur:u.noop,close:u.noop,create:u.noop,createMenu:u.noop,focus:u.noop,open:u.noop,select:u.noop},_create:function(){var e,t,n=this.options;if(this.$headStyle=null,this.$menu=null,this.menuIsTemp=!1,this.currentTarget=null,this.extraData={},(this.previousFocus=null)==n.delegate&&u.error("ui-contextmenu: Missing required option `delegate`."),n.preventSelect){e="#"+(u(this.element).is(document)?u("body"):this.element).uniqueId().attr("id")+" "+n.delegate+" { -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }",this.$headStyle=u("<style class='moogle-contextmenu-style' />").prop("type","text/css").appendTo("head");try{this.$headStyle.html(e)}catch(t){this.$headStyle[0].styleSheet.cssText=e}r&&this.element.on("selectstart"+this.eventNamespace,n.delegate,function(t){t.preventDefault()})}this._createUiMenu(n.menu),t="contextmenu"+this.eventNamespace,n.taphold&&(t+=" taphold"+this.eventNamespace),this.element.on(t,n.delegate,u.proxy(this._openMenu,this))},_destroy:function(){this.element.off(this.eventNamespace),this._createUiMenu(null),this.$headStyle&&(this.$headStyle.remove(),this.$headStyle=null)},_createUiMenu:function(t){var e,n,o=this.options;this.isOpen()&&(e=this.currentTarget,n=this.extraData,this._closeMenu(!0),this.currentTarget=e,this.extraData=n),this.menuIsTemp?this.$menu.remove():this.$menu&&this.$menu.menu("destroy").removeClass(this.options.addClass).hide(),this.$menu=null,this.menuIsTemp=!1,t&&(u.isArray(t)?(this.$menu=u.moogle.contextmenu.createMenuMarkup(t),this.menuIsTemp=!0):this.$menu="string"==typeof t?u(t):t,this.$menu.hide().addClass(o.addClass).menu(u.extend(!0,{},o.uiMenuOptions,{items:"> :not(.ui-widget-header)",blur:u.proxy(o.blur,this),create:u.proxy(o.createMenu,this),focus:u.proxy(o.focus,this),select:u.proxy(function(t,e){var n,r=u.moogle.contextmenu.isMenu(e.item),i=e.item.data("actionHandler");e.cmd=e.item.attr("data-command"),e.target=u(this.currentTarget),e.extraData=this.extraData,r&&o.ignoreParentSelect||(n=this._trigger.call(this,"select",t,e),i&&(n=i.call(this,t,e)),!1!==n&&this._closeMenu.call(this),t.preventDefault())},this)})))},_openMenu:function(e,t){var n,r,i,o=this.options,a=o.position,s=this,l=!!e.isTrigger;if(o.autoTrigger||l){if(e.preventDefault(),this.currentTarget=e.target,this.extraData=e._extraData||{},i={menu:this.$menu,target:u(this.currentTarget),extraData:this.extraData,originalEvent:e,result:null},!t){if(n=this._trigger("beforeOpen",e,i),r=i.result&&u.isFunction(i.result.promise)?i.result:null,i.result=null,!1===n)return this.currentTarget=null,!1;if(r)return r.done(function(){s._openMenu(e,!0)}),this.currentTarget=null,!1;i.menu=this.$menu}u(document).on("keydown"+this.eventNamespace,function(t){t.which===u.ui.keyCode.ESCAPE&&s._closeMenu()}).on("mousedown"+this.eventNamespace+" touchstart"+this.eventNamespace,function(t){u(t.target).closest(".ui-menu-item").length||s._closeMenu()}),u(window).on("blur"+this.eventNamespace,function(t){o.closeOnWindowBlur&&s._closeMenu()}),u.isFunction(a)&&(a=a(e,i)),a=u.extend({my:"left top",at:"left bottom",of:void 0===e.pageX?e.target:e,collision:"fit"},a),this._updateEntries(this.$menu),this.$menu.show().css({position:"absolute",left:0,top:0}).position(a).hide(),o.preventContextMenuForPopup&&this.$menu.on("contextmenu"+this.eventNamespace,function(t){t.preventDefault()}),this._show(this.$menu,o.show,function(){var t;o.autoFocus&&(s.previousFocus=u(e.target),t=s.$menu.children("li.ui-menu-item").not(".ui-state-disabled").first(),s.$menu.menu("focus",null,t).focus()),s._trigger.call(s,"open",e,i)})}},_closeMenu:function(t){var e=this,n=!t&&this.options.hide,r={menu:this.$menu,target:u(this.currentTarget),extraData:this.extraData};u(document).off("mousedown"+this.eventNamespace).off("touchstart"+this.eventNamespace).off("keydown"+this.eventNamespace),u(window).off("blur"+this.eventNamespace),e.currentTarget=null,e.extraData={},this.$menu?(this.$menu.off("contextmenu"+this.eventNamespace),this._hide(this.$menu,n,function(){e.previousFocus&&(e.previousFocus.focus(),e.previousFocus=null),e._trigger("close",null,r)})):e._trigger("close",null,r)},_setOption:function(t,e){switch(t){case"menu":this.replaceMenu(e)}u.Widget.prototype._setOption.apply(this,arguments)},_getMenuEntry:function(t){return this.$menu.find("li[data-command="+t+"]")},close:function(){this.isOpen()&&this._closeMenu()},_updateEntries:function(){var o=this,a={menu:this.$menu,target:u(this.currentTarget),extraData:this.extraData};u.each(this.$menu.find(".ui-menu-item"),function(t,e){var n=u(e),r=n.data("disabledHandler"),i=r?r({type:"disabled"},a):null;a.item=n,a.cmd=n.attr("data-command"),null!=i&&(o.enableEntry(a.cmd,!i),o.showEntry(a.cmd,"hide"!==i)),null!=(i=(r=n.data("titleHandler"))?r({type:"title"},a):null)&&o.setEntry(a.cmd,""+i),null!=(i=(r=n.data("tooltipHandler"))?r({type:"tooltip"},a):null)&&n.attr("title",""+i)})},enableEntry:function(t,e){this._getMenuEntry(t).toggleClass("ui-state-disabled",!1===e)},getMenu:function(){return this.$menu},isOpen:function(){return!!this.$menu&&!!this.currentTarget},open:function(t,e){e=e||{};var n=t&&t.type&&t.target,r=n?t:{},i=n?t.target:t,o=jQuery.Event("contextmenu",{target:u(i).get(0),pageX:r.pageX,pageY:r.pageY,originalEvent:n?t:void 0,_extraData:e});return this.element.trigger(o)},replaceMenu:function(t){this._createUiMenu(t)},setEntry:function(t,e){var n,r=this._getMenuEntry(t);"string"==typeof e?u.moogle.contextmenu.updateTitle(r,e):(r.empty(),e.cmd=e.cmd||t,u.moogle.contextmenu.createEntryMarkup(e,r),u.isArray(e.children)&&(n=u("<ul/>").appendTo(r),u.moogle.contextmenu.createMenuMarkup(e.children,n)),r.removeClass("ui-menu-item"),this.getMenu().menu("refresh"))},showEntry:function(t,e){this._getMenuEntry(t).toggle(!1!==e)}}),u.extend(u.moogle.contextmenu,{createEntryMarkup:function(n,r){var t=null;r.attr("data-command",n.cmd),/[^\-\u2014\u2013\s]/.test(n.title)?(i?(t=u("<a/>",{html:""+n.title,href:"#"}).appendTo(r),n.uiIcon&&t.append(u("<span class='ui-icon' />").addClass(n.uiIcon))):o?(r.html(""+n.title),n.uiIcon&&r.append(u("<span class='ui-icon' />").addClass(n.uiIcon))):(t=u("<div/>",{html:""+n.title}).appendTo(r),n.uiIcon&&t.append(u("<span class='ui-icon' />").addClass(n.uiIcon))),u.each(["action","disabled","title","tooltip"],function(t,e){u.isFunction(n[e])&&r.data(e+"Handler",n[e])}),!0===n.disabled&&r.addClass("ui-state-disabled"),n.isHeader&&r.addClass("ui-widget-header"),n.addClass&&r.addClass(n.addClass),u.isPlainObject(n.data)&&r.data(n.data),"string"==typeof n.tooltip&&r.attr("title",n.tooltip)):r.text(n.title)},createMenuMarkup:function(t,e){var n,r,i,o;for(null==e&&(e=u("<ul class='ui-helper-hidden' />").appendTo("body")),n=0;n<t.length;n++)r=t[n],o=u("<li/>").appendTo(e),u.moogle.contextmenu.createEntryMarkup(r,o),u.isArray(r.children)&&(i=u("<ul/>").appendTo(o),u.moogle.contextmenu.createMenuMarkup(r.children,i));return e},isMenu:function(t){return i?0<t.has(">a[aria-haspopup='true']").length:o?t.is("[aria-haspopup='true']"):0<t.has(">div[aria-haspopup='true']").length},replaceFirstTextNodeChild:function(t,e){var n=t.find(">span.ui-icon,>ul.ui-menu").detach();t.empty().html(e).append(n)},updateTitle:function(t,e){i?u.moogle.contextmenu.replaceFirstTextNodeChild(u("a",t),e):o?u.moogle.contextmenu.replaceFirstTextNodeChild(t,e):u.moogle.contextmenu.replaceFirstTextNodeChild(u("div",t),e)}})},"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widgets/menu"],r):r(jQuery)},{}],33:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};$(function(){$.extend($.support,{touch:"object"==("undefined"==typeof Touch?"undefined":r(Touch))}),$.support.touch&&(document.addEventListener("touchstart",a,!1),document.addEventListener("touchmove",a,!1),document.addEventListener("touchend",a,!1),document.addEventListener("touchcancel",a,!1))});var l=null,u=!1,c=null;var i=!1,o=null,h=!1;function f(){i&&(window.clearTimeout(o),i=!1,null)}function p(t){i||(i=!0,t.changedTouches[0],o=window.setTimeout("doRightClick();",800))}function a(t){var e="";if(!(1<t.touches.length)){switch(t.type){case"touchstart":if($(t.changedTouches[0].target).is("select"))return;return r=(n=t).changedTouches[0],i="mouseover",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o),i="mousedown",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o),u?(window.clearTimeout(c),r.target==l?(l=null,u=!1,i="click",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o),i="dblclick",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(o)):(l=r.target,u=!0,c=window.setTimeout("cancelTap();",600),p(n))):(l=r.target,u=!0,c=window.setTimeout("cancelTap();",600),p(n)),t.preventDefault(),!1;case"touchmove":f(),e="mousemove",t.preventDefault();break;case"touchend":if(h)return h=!1,t.preventDefault(),!1;f(),e="mouseup";break;default:return}var n,r,i,o,a=t.changedTouches[0],s=document.createEvent("MouseEvent");s.initMouseEvent(e,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(s),"mouseup"==e&&u&&a.target==l&&((s=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(s))}}},{}],34:[function(t,e,n){"use strict";var r;r=function(){kendo.cultures["zh-CN"]={name:"zh-CN",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n%","n%"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"Chinese Yuan",abbr:"CNY",pattern:["$-n","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],namesAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",F:"yyyy'年'M'月'd'日' H:mm:ss",g:"yyyy/M/d H:mm",G:"yyyy/M/d H:mm:ss",m:"M月d日",M:"M月d日",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"H:mm",T:"H:mm:ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"yyyy'年'M'月'",Y:"yyyy'年'M'月'"},"/":"/",":":":",firstDay:1}}}},"function"==typeof define&&define.amd?define(["kendo.core.min"],r):r()},{}],35:[function(t,e,n){"use strict";var r;r=function(){var t;t=window.kendo.jQuery,kendo.ui.FlatColorPicker&&(kendo.ui.FlatColorPicker.prototype.options.messages=t.extend(!0,kendo.ui.FlatColorPicker.prototype.options.messages,{apply:"确定",cancel:"取消",noColor:"无颜色",clearColor:"清除颜色",previewInput:"颜色十六进制代码"})),kendo.ui.ColorPicker&&(kendo.ui.ColorPicker.prototype.options.messages=t.extend(!0,kendo.ui.ColorPicker.prototype.options.messages,{apply:"确定",cancel:"取消",noColor:"无颜色",clearColor:"清除颜色",previewInput:"颜色十六进制代码"})),kendo.ui.ColumnMenu&&(kendo.ui.ColumnMenu.prototype.options.messages=t.extend(!0,kendo.ui.ColumnMenu.prototype.options.messages,{sortAscending:"升序排列",sortDescending:"降序排列",filter:"筛选",columns:"字段列",done:"完成",settings:"列设置",lock:"锁定",unlock:"解锁"})),kendo.ui.Editor&&(kendo.ui.Editor.prototype.options.messages=t.extend(!0,kendo.ui.Editor.prototype.options.messages,{bold:"粗体",italic:"斜体",underline:"下划线",strikethrough:"删除线",superscript:"上标",subscript:"下标",justifyCenter:"水平居中",justifyLeft:"左对齐",justifyRight:"右对齐",justifyFull:"两端对齐",insertUnorderedList:"插入无序列表",insertOrderedList:"插入有序列表",indent:"增加缩进",outdent:"减少缩进",createLink:"插入链接",unlink:"删除链接",insertImage:"插入图片",insertFile:"插入文件",insertHtml:"插入HTML",viewHtml:"源代码编辑",fontName:"请选择字体",fontNameInherit:"（默认字体）",fontSize:"请选择字号",fontSizeInherit:"（默认字号）",formatBlock:"格式",formatting:"格式",foreColor:"文字颜色",backColor:"文字背景色",style:"样式",emptyFolder:"文件夹为空",editAreaTitle:"在可编辑区域可按 F10 跳转工具栏。",uploadFile:"上传文件",overflowAnchor:"更多功能",orderBy:"排序方式：",orderBySize:"按大小排序",orderByName:"按名称排序",invalidFileType:"你上传的文件格式 {0} 是无效的，支持的文件类型为：{1}",deleteFile:"你确定要删除【{0}】这个文件吗？",overwriteFile:"当前文件夹已存在文件名为【{0}】的文件，是否覆盖？",directoryNotFound:"文件夹未找到",imageWebAddress:"图片链接地址",imageAltText:"图片占位符",imageWidth:"图片宽度（单位px）",imageHeight:"图片高度（单位px）",fileWebAddress:"文件链接地址",fileTitle:"文件标题",linkWebAddress:"链接地址",linkText:"链接文字",linkToolTip:"链接提示",linkOpenInNewWindow:"在新窗口中打开链接",dialogUpdate:"更新",dialogInsert:"插入",dialogButtonSeparator:"或",dialogOk:"确定",dialogCancel:"取消",cleanFormatting:"清除格式",createTable:"创建表格",createTableHint:"创建一个 {0} 行 {1} 列的表格",addColumnLeft:"在左侧插入列",addColumnRight:"在右侧插入列",addRowAbove:"在上方插入行",addRowBelow:"在下方插入行",deleteRow:"删除行",deleteColumn:"删除列",tableWizard:"表格向导",tableTab:"表格",cellTab:"单元格",accessibilityTab:"可访问性",caption:"标题",summary:"摘要",width:"宽",height:"高",units:"单位",cellSpacing:"单元格间距",cellPadding:"单元格内边距",cellMargin:"单元格外边距",alignment:"对齐",background:"背景色",cssClass:"样式表",id:"ID",border:"边框",borderStyle:"边框样式",collapseBorders:"合并边框",wrapText:"文字换行",associateCellsWithHeaders:"关联表头与单元格",alignLeft:"左对齐",alignCenter:"居中对齐",alignRight:"右对齐",alignLeftTop:"左上对齐",alignCenterTop:"中上对齐",alignRightTop:"右上对齐",alignLeftMiddle:"左中对齐",alignCenterMiddle:"居中对齐",alignRightMiddle:"右中对齐",alignLeftBottom:"左下对齐",alignCenterBottom:"中下对齐",alignRightBottom:"右下对齐",alignRemove:"移除对齐",columns:"列",rows:"行",selectAllCells:"选择所有单元格",exportAs:"导出",import:"导入"})),kendo.ui.FileBrowser&&(kendo.ui.FileBrowser.prototype.options.messages=t.extend(!0,kendo.ui.FileBrowser.prototype.options.messages,{uploadFile:"上传文件",orderBy:"排序方式",orderByName:"按名称排序",orderBySize:"按大小排序",directoryNotFound:"文件夹未找到",emptyFolder:"文件夹为空",deleteFile:"你确定要删除【{0}】这个文件吗？",invalidFileType:"你上传的文件格式 {0} 是无效的，支持的文件类型为：{1}",overwriteFile:"当前文件夹已存在文件名为【{0}】的文件，是否覆盖？",dropFilesHere:"将文件拖拽到此处上传",search:"搜索"})),kendo.ui.FilterCell&&(kendo.ui.FilterCell.prototype.options.messages=t.extend(!0,kendo.ui.FilterCell.prototype.options.messages,{isTrue:"是",isFalse:"否",filter:"筛选",clear:"清空",operator:"运算符"})),kendo.ui.FilterCell&&(kendo.ui.FilterCell.prototype.options.operators=t.extend(!0,kendo.ui.FilterCell.prototype.options.operators,{string:{eq:"等于",neq:"不等于",startswith:"开头是",contains:"包含",doesnotcontain:"不含",endswith:"结尾是",isnull:"为空",isnotnull:"非空",isempty:"空字符串",isnotempty:"非空字符串",isnullorempty:"无值",isnotnullorempty:"有值"},number:{eq:"等于",neq:"不等于",gte:"大于等于",gt:"大于",lte:"小于等于",lt:"小于",isnull:"为空",isnotnull:"非空"},date:{eq:"等于",neq:"不等于",gte:"晚于等于",gt:"晚于",lte:"早于等于",lt:"早于",isnull:"为空",isnotnull:"非空"},enums:{eq:"等于",neq:"不等于",isnull:"为空",isnotnull:"非空"}})),kendo.ui.FilterMenu&&(kendo.ui.FilterMenu.prototype.options.messages=t.extend(!0,kendo.ui.FilterMenu.prototype.options.messages,{info:"筛选条件：",title:"筛选条件：",isTrue:"是",isFalse:"否",filter:"筛选",clear:"清空",and:"并且",or:"或者",selectValue:"-= 请选择 =-",operator:"运算符",value:"值",additionalValue:"附加值",additionalOperator:"附加运算",logic:"筛选逻辑",cancel:"取消"})),kendo.ui.FilterMenu&&(kendo.ui.FilterMenu.prototype.options.operators=t.extend(!0,kendo.ui.FilterMenu.prototype.options.operators,{string:{eq:"等于",neq:"不等于",startswith:"开头是",contains:"包含",doesnotcontain:"不含",endswith:"结尾是",isnull:"为空",isnotnull:"非空",isempty:"空字符串",isnotempty:"非空字符串",isnullorempty:"无值",isnotnullorempty:"有值"},number:{eq:"等于",neq:"不等于",gte:"大于等于",gt:"大于",lte:"小于等于",lt:"小于",isnull:"为空",isnotnull:"非空"},date:{eq:"等于",neq:"不等于",gte:"晚于等于",gt:"晚于",lte:"早于等于",lt:"早于",isnull:"为空",isnotnull:"非空"},enums:{eq:"等于",neq:"不等于",isnull:"为空",isnotnull:"非空"}})),kendo.ui.FilterMultiCheck&&(kendo.ui.FilterMultiCheck.prototype.options.messages=t.extend(!0,kendo.ui.FilterMultiCheck.prototype.options.messages,{checkAll:"全选",clear:"清空",filter:"筛选",search:"搜索",cancel:"取消",selectedItemsFormat:"已选择 {0} 条数据"})),kendo.ui.Gantt&&(kendo.ui.Gantt.prototype.options.messages=t.extend(!0,kendo.ui.Gantt.prototype.options.messages,{actions:{addChild:"新增子任务",append:"新增任务",insertAfter:"插入到后面",insertBefore:"插入到前面",pdf:"导出 PDF"},cancel:"取消",deleteDependencyWindowTitle:"删除从属任务",deleteDependencyConfirmation:"你确定要删除这项从属任务吗？",deleteTaskWindowTitle:"删除任务",deleteTaskConfirmation:"你确定要删除这项任务吗？",destroy:"删除",editor:{assingButton:"资源分配",editorTitle:"编辑任务",end:"结束时间",percentComplete:"完成进度",resources:"资源",resourcesEditorTitle:"资源编辑",resourcesHeader:"资源名称",start:"开始时间",title:"任务标题",unitsHeader:"百分比"},save:"保存",views:{day:"日视图",end:"任务结束",month:"月视图",start:"任务开始",week:"周视图",year:"年视图"}})),kendo.ui.GanttTimeline&&(kendo.ui.GanttTimeline.prototype.options.messages=t.extend(!0,kendo.ui.GanttTimeline.prototype.options.messages,{views:{day:"日视图",week:"周视图",month:"月视图",year:"年视图",start:"任务开始",end:"任务结束"}})),kendo.ui.Grid&&(kendo.ui.Grid.prototype.options.messages=t.extend(!0,kendo.ui.Grid.prototype.options.messages,{commands:{cancel:"取消",canceledit:"取消",create:"新增",destroy:"删除",edit:"编辑",excel:"导出 Excel",pdf:"导出 PDF",save:"保存",select:"选择",update:"更新"},editable:{cancelDelete:"取消删除",confirmation:"你确定要删除这条数据吗？",confirmDelete:"确定删除"},noRecords:"无相关数据",expandCollapseColumnHeader:""})),kendo.ui.Groupable&&(kendo.ui.Groupable.prototype.options.messages=t.extend(!0,kendo.ui.Groupable.prototype.options.messages,{empty:"将字段列名称拖拽到此处可进行该列的分组显示"})),kendo.ui.NumericTextBox&&(kendo.ui.NumericTextBox.prototype.options=t.extend(!0,kendo.ui.NumericTextBox.prototype.options,{upArrowText:"增加",downArrowText:"减少"})),kendo.ui.MediaPlayer&&(kendo.ui.MediaPlayer.prototype.options.messages=t.extend(!0,kendo.ui.MediaPlayer.prototype.options.messages,{pause:"暂停",play:"播放",mute:"静音",unmute:"取消静音",quality:"画质",fullscreen:"全屏"})),kendo.ui.Pager&&(kendo.ui.Pager.prototype.options.messages=t.extend(!0,kendo.ui.Pager.prototype.options.messages,{allPages:"全部",display:"{0} - {1} 条　共 {2} 条数据",empty:"无相关数据",page:"转到第",of:"页　共 {0} 页",itemsPerPage:"条每页",first:"首页",previous:"上一页",next:"下一页",last:"末页",refresh:"刷新",morePages:"更多..."})),kendo.ui.TreeListPager&&(kendo.ui.TreeListPager.prototype.options.messages=t.extend(!0,kendo.ui.TreeListPager.prototype.options.messages,{allPages:"全部",display:"{0} - {1} 条　共 {2} 条数据",empty:"无相关数据",page:"转到第",of:"页　共 {0} 页",itemsPerPage:"条每页",first:"首页",previous:"上一页",next:"下一页",last:"末页",refresh:"刷新",morePages:"更多..."})),kendo.ui.PivotGrid&&(kendo.ui.PivotGrid.prototype.options.messages=t.extend(!0,kendo.ui.PivotGrid.prototype.options.messages,{measureFields:"拖拽数据字段到此处",columnFields:"拖拽列字段到此处",rowFields:"拖拽行字段到此处"})),kendo.ui.PivotFieldMenu&&(kendo.ui.PivotFieldMenu.prototype.options.messages=t.extend(!0,kendo.ui.PivotFieldMenu.prototype.options.messages,{info:"筛选条件：",sortAscending:"升序排列",sortDescending:"降序排列",filterFields:"字段筛选",filter:"筛选",include:"包含字段...",title:"包含的字段",clear:"清空",ok:"确定",cancel:"取消",operators:{contains:"包含",doesnotcontain:"不含",startswith:"开头是",endswith:"结尾是",eq:"等于",neq:"不等于"}})),kendo.ui.PivotSettingTarget&&(kendo.ui.PivotSettingTarget.prototype.options.messages=t.extend(!0,kendo.ui.PivotSettingTarget.prototype.options.messages,{empty:"拖拽字段到此处"})),kendo.ui.PivotConfigurator&&(kendo.ui.PivotConfigurator.prototype.options.messages=t.extend(!0,kendo.ui.PivotConfigurator.prototype.options.messages,{measures:"拖拽数据字段到此处",columns:"拖拽列字段到此处",rows:"拖拽行字段到此处",measuresLabel:"量",columnsLabel:"列",rowsLabel:"行",fieldsLabel:"字段"})),kendo.ui.RecurrenceEditor&&(kendo.ui.RecurrenceEditor.prototype.options.messages=t.extend(!0,kendo.ui.RecurrenceEditor.prototype.options.messages,{recurrenceEditorTitle:"周期类型事件编辑",frequencies:{never:"从不",hourly:"每小时",daily:"每天",weekly:"每周",monthly:"每月",yearly:"每年"},hourly:{repeatEvery:"周期",interval:" 小时"},daily:{repeatEvery:"周期",interval:" 天"},weekly:{repeatEvery:"周期",repeatOn:"重复于",interval:" 周"},monthly:{repeatEvery:"周期",repeatOn:"重复于",interval:" 月",day:"几号 "},yearly:{repeatEvery:"周期",repeatOn:"重复于",interval:" 年",of:" 在 "},end:{label:"截止",mobileLabel:"截止",never:"从不",after:"重复 ",occurrence:" 次后",on:"止于 "},offsetPositions:{first:"第一",second:"第二",third:"第三",fourth:"第四",last:"最后一"},weekdays:{day:"天",weekday:"工作日",weekend:"周末"}})),kendo.ui.MobileRecurrenceEditor&&(kendo.ui.MobileRecurrenceEditor.prototype.options.messages=t.extend(!0,kendo.ui.MobileRecurrenceEditor.prototype.options.messages,{cancel:"取消",update:"保存",endTitle:"周期截止",repeatTitle:"周期模式",headerTitle:"周期事件",end:{patterns:{never:"从不",after:"重复...",on:"止于..."},never:"从不",after:"周期后截止",on:"周期时截止"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"重复到：",dayOfMonth:"几号",dayOfWeek:"周几",repeatEvery:"全部重复",every:"每",day:"天"},yearly:{interval:"",repeatBy:"重复到：",dayOfMonth:"几号",dayOfWeek:"周几",repeatEvery:"全部重复",every:"每",month:"月",day:"天"}})),kendo.ui.Scheduler&&(kendo.ui.Scheduler.prototype.options.messages=t.extend(!0,kendo.ui.Scheduler.prototype.options.messages,{allDay:"全天",date:"日期",event:"事件",time:"时间",showFullDay:"显示全天",showWorkDay:"显示工作时间",today:"今天",pdf:"导出 PDF",save:"保存",cancel:"取消",destroy:"删除",deleteWindowTitle:"删除事件",next:"往后",previous:"往前",ariaSlotLabel:"从 {0:t} 到 {1:t} 的选择",ariaEventLabel:"在 {1:D} {2:t} 的 {0}",editable:{confirmation:"你确定要删除这个事件吗？"},views:{day:"日视图",week:"周视图",workWeek:"工作日视图",agenda:"列表视图",month:"月视图",timeline:"时间线",timelineWeek:"时间线周视图",timelineWorkWeek:"时间线工作日视图",timelineMonth:"时间线月视图"},recurrenceMessages:{deleteWindowTitle:"删除周期类型事件",deleteWindowOccurrence:"删除当前事件",deleteWindowSeries:"删除整个周期事件",editWindowTitle:"编辑周期类型事件",editWindowOccurrence:"编辑当前事件",editWindowSeries:"编辑整个周期事件",deleteRecurring:"你想仅删除当前事件还是整个周期事件？",editRecurring:"你想仅编辑当前事件还是整个周期事件？"},editor:{title:"事件标题",start:"开始时间",end:"结束时间",allDayEvent:"全天事件",description:"描述",repeat:"重复",timezone:"时区",startTimezone:"开始时区",endTimezone:"结束时区",separateTimezones:"使用独立的开始和结束时区",timezoneEditorTitle:"时区设置",timezoneEditorButton:"时区选择",timezoneTitle:"选择时区",noTimezone:"无时区",editorTitle:"事件"}})),kendo.spreadsheet&&kendo.spreadsheet.messages.borderPalette&&(kendo.spreadsheet.messages.borderPalette=t.extend(!0,kendo.spreadsheet.messages.borderPalette,{allBorders:"内外框线",insideBorders:"内框线",insideHorizontalBorders:"横向内框线",insideVerticalBorders:"纵向内框线",outsideBorders:"外框线",leftBorder:"左框线",topBorder:"上框线",rightBorder:"右框线",bottomBorder:"下框线",noBorders:"无框线",reset:"无填充颜色",customColor:"其他颜色...",apply:"确定",cancel:"取消"})),kendo.spreadsheet&&kendo.spreadsheet.messages.dialogs&&(kendo.spreadsheet.messages.dialogs=t.extend(!0,kendo.spreadsheet.messages.dialogs,{apply:"确定",save:"保存",cancel:"取消",remove:"移除",retry:"重试",revert:"复原",okText:"确定",formatCellsDialog:{title:"单元格格式",categories:{number:"数字",currency:"货币",date:"日期"}},fontFamilyDialog:{title:"字体"},fontSizeDialog:{title:"字号"},bordersDialog:{title:"边框"},alignmentDialog:{title:"对齐",buttons:{justtifyLeft:"左对齐",justifyCenter:"水平居中",justifyRight:"右对齐",justifyFull:"两端对齐",alignTop:"顶端对齐",alignMiddle:"垂直居中",alignBottom:"底端对齐"}},mergeDialog:{title:"合并单元格",buttons:{mergeCells:"全部合并",mergeHorizontally:"水平合并",mergeVertically:"垂直合并",unmerge:"取消合并"}},freezeDialog:{title:"冻结窗格",buttons:{freezePanes:"冻结上行左列",freezeRows:"冻结上部行",freezeColumns:"冻结左侧列",unfreeze:"取消冻结"}},confirmationDialog:{text:"你确定要删除这张工作表吗？",title:"删除工作表"},validationDialog:{title:"数据验证",hintMessage:"请输入一个{1}的{0}值",hintTitle:"验证{0}",criteria:{any:"任何值",number:"数字",text:"文本",date:"日期",custom:"自定义公式",list:"序列"},comparers:{greaterThan:"大于",lessThan:"小于",between:"介于",notBetween:"不介于",equalTo:"等于",notEqualTo:"不等于",greaterThanOrEqualTo:"大于等于",lessThanOrEqualTo:"小于等于"},comparerMessages:{greaterThan:"大于{0}",lessThan:"小于{0}",between:"介于{0}和{1}之间",notBetween:"不介于{0}和{1}之间",equalTo:"等于{0}",notEqualTo:"不等于{0}",greaterThanOrEqualTo:"大于等于{0}",lessThanOrEqualTo:"小于等于{0}",custom:"满足公式{0}"},labels:{criteria:"允许",comparer:"比较",min:"最小值",max:"最大值",value:"值",start:"开始",end:"结束",onInvalidData:"对无效的数据",rejectInput:"拒绝输入",showWarning:"显示警告",showHint:"选定单元格时显示",hintTitle:"选定时的标题",hintMessage:"选定时的信息",ignoreBlank:"忽略空值",showListButton:"显示序列按钮",showCalendarButton:"显示日历按钮"},placeholders:{typeTitle:"请输入标题",typeMessage:"请输入信息"}},exportAsDialog:{title:"导出...",labels:{scale:"缩放",fit:"调整为一页",fileName:"文件名",saveAsType:"保存类型",exportArea:"导出范围",paperSize:"纸张大小",margins:"页边距",orientation:"纸张方向",print:"打印",guidelines:"网格线",center:"居中方式",horizontally:"水平",vertically:"垂直"}},modifyMergedDialog:{errorMessage:"不能更改已合并单元格的局部。"},rangeDisabledDialog:{errorMessage:"指定范围包含禁用单元格。"},incompatibleRangesDialog:{errorMessage:"范围不匹配"},noFillDirectionDialog:{errorMessage:"无法判断填充方向"},duplicateSheetNameDialog:{errorMessage:"工作表名称重复"},overflowDialog:{errorMessage:"不能粘贴，因为复制区域和粘贴区域的大小和形状不一样。"},useKeyboardDialog:{title:"复制和粘贴",errorMessage:"不能通过菜单调用这些操作，请使用键盘快捷键代替：",labels:{forCopy:"为复制",forCut:"为剪切",forPaste:"为粘贴"}},unsupportedSelectionDialog:{errorMessage:"不能在多选的情况下执行该操作。"},linkDialog:{title:"链接",labels:{text:"链接文字",url:"链接地址",removeLink:"移除链接"}}})),kendo.spreadsheet&&kendo.spreadsheet.messages.filterMenu&&(kendo.spreadsheet.messages.filterMenu=t.extend(!0,kendo.spreadsheet.messages.filterMenu,{sortAscending:"按A到Z升序排列",sortDescending:"按Z到A降序排列",filterByValue:"内容筛选",filterByCondition:"条件筛选",apply:"确定",search:"搜索",addToCurrent:"添加到当前选择",clear:"清空",blanks:"（无）",operatorNone:"无",and:"并且",or:"或者",operators:{string:{contains:"文本包含",doesnotcontain:"文本不包含",startswith:"文本开头是",endswith:"文本结尾是",matches:"文本等于",doesnotmatch:"文本不等于"},date:{eq:"日期等于",neq:"日期不等于",lt:"日期早于",gt:"日期晚于"},number:{eq:"数字等于",neq:"数字不等于",gte:"数字大于等于",gt:"数字大于",lte:"数字小于等于",lt:"数字小于"}}})),kendo.spreadsheet&&kendo.spreadsheet.messages.colorPicker&&(kendo.spreadsheet.messages.colorPicker=t.extend(!0,kendo.spreadsheet.messages.colorPicker,{reset:"无填充颜色",customColor:"其他颜色...",apply:"确定",cancel:"取消"})),kendo.spreadsheet&&kendo.spreadsheet.messages.toolbar&&(kendo.spreadsheet.messages.toolbar=t.extend(!0,kendo.spreadsheet.messages.toolbar,{addColumnLeft:"在左侧插入列",addColumnRight:"在右侧插入列",addRowAbove:"在上面插入行",addRowBelow:"在下面插入行",alignment:"对齐",alignmentButtons:{justtifyLeft:"左对齐",justifyCenter:"水平居中",justifyRight:"右对齐",justifyFull:"两端对齐",alignTop:"顶端对齐",alignMiddle:"垂直居中",alignBottom:"底端对齐"},backgroundColor:"背景颜色",bold:"粗体",borders:"边框",colorPicker:{reset:"无填充颜色",customColor:"其他颜色..."},copy:"复制",cut:"剪切",deleteColumn:"删除整列",deleteRow:"删除整行",excelImport:"从 Excel 导入...",exportAs:"导出为...",filter:"筛选",fontFamily:"字体",fontSize:"字号",format:"定制格式...",formatTypes:{automatic:"自动",text:"文本",number:"数字",percent:"百分比",financial:"财务",currency:"货币",date:"日期",time:"时间",dateTime:"日期时间",duration:"时分秒",moreFormats:"更多格式..."},formatDecreaseDecimal:"减少小数位数",formatIncreaseDecimal:"增加小数位数",freeze:"冻结窗格",freezeButtons:{freezePanes:"冻结上行左列",freezeRows:"冻结上部行",freezeColumns:"冻结左侧列",unfreeze:"取消冻结"},italic:"斜体",merge:"合并单元格",mergeButtons:{mergeCells:"全部合并",mergeHorizontally:"水平合并",mergeVertically:"垂直合并",unmerge:"取消合并"},open:"打开...",paste:"粘贴",quickAccess:{redo:"重做",undo:"撤消"},toggleGridlines:"切换网格线",saveAs:"另存为...",sort:"排序",sortAsc:"升序排列",sortDesc:"降序排列",sortButtons:{sortSheetAsc:"表格按A到Z升序排列",sortSheetDesc:"表格按Z到A降序排列",sortRangeAsc:"选定范围按A到Z升序排列",sortRangeDesc:"选定范围按Z到A降序排列"},textColor:"文字颜色",textWrap:"文字换行",underline:"下划线",validation:"数据验证...",hyperlink:"链接"})),kendo.spreadsheet&&kendo.spreadsheet.messages.view&&(kendo.spreadsheet.messages.view=t.extend(!0,kendo.spreadsheet.messages.view,{errors:{openUnsupported:"不支持的格式，请选择一个后缀名为 .xlsx 的文件。",shiftingNonblankCells:"由于数据可能丢失无法插入单元格，请选择另一处插入或者从工作表的尾部删除数据。",insertColumnWhenRowIsSelected:"在选择所有列时不能插入列。",insertRowWhenColumnIsSelected:"在选择所有行时不能插入行。",filterRangeContainingMerges:"无法在包含合并单元格的情况下进行筛选",sortRangeContainingMerges:"无法在包含合并单元格的情况下排序",cantSortMultipleSelection:"无法在多选的情况下排序",cantSortNullRef:"无法在没有选择的情况下排序",cantSortMixedCells:"无法在包含有混合形状单元格的情况下排序",validationError:"你输入的值不符合当前单元格的验证规则。",cannotModifyDisabled:"不能修改被禁用的单元格。"},tabs:{home:"开始",insert:"插入",data:"数据"}})),kendo.ui.Slider&&(kendo.ui.Slider.prototype.options=t.extend(!0,kendo.ui.Slider.prototype.options,{increaseButtonTitle:"增加",decreaseButtonTitle:"减少",dragHandleTitle:"拖"})),kendo.ui.ListBox&&(kendo.ui.ListBox.prototype.options.messages=t.extend(!0,kendo.ui.ListBox.prototype.options.messages,{tools:{remove:"删除",moveUp:"上移",moveDown:"下移",transferTo:"转移过去",transferFrom:"转移回来",transferAllTo:"全部转移过去",transferAllFrom:"全部转移回来"}})),kendo.ui.TreeList&&(kendo.ui.TreeList.prototype.options.messages=t.extend(!0,kendo.ui.TreeList.prototype.options.messages,{noRows:"无相关数据",loading:"载入中...",requestFailed:"请求失败！",retry:"重试",commands:{edit:"编辑",update:"更新",canceledit:"取消",create:"新增",createchild:"新增子项",destroy:"删除",excel:"导出 Excel",pdf:"导出 PDF"}})),kendo.ui.TreeView&&(kendo.ui.TreeView.prototype.options.messages=t.extend(!0,kendo.ui.TreeView.prototype.options.messages,{loading:"载入中...",requestFailed:"请求失败！",retry:"重试"})),kendo.ui.PanelBar&&(kendo.ui.PanelBar.prototype.options.messages=t.extend(!0,kendo.ui.PanelBar.prototype.options.messages,{loading:"载入中...",requestFailed:"请求失败！",retry:"重试"})),kendo.ui.Upload&&(kendo.ui.Upload.prototype.options.localization=t.extend(!0,kendo.ui.Upload.prototype.options.localization,{select:"选择文件",cancel:"取消",retry:"重试",remove:"移除",pause:"暂停",resume:"恢复",clearSelectedFiles:"清空",uploadSelectedFiles:"上传",dropFilesHere:"将文件拖拽到此处上传",invalidFiles:"文件不符合要求！",statusUploading:"上传中...",statusUploaded:"上传成功！",statusWarning:"上传警告！",statusFailed:"上传失败！",headerStatusUploading:"上传中...",headerStatusPaused:"上传暂停",headerStatusUploaded:"上传完成！",invalidMaxFileSize:"文件太大！",invalidMinFileSize:"文件太小！",invalidFileExtension:"不支持的文件格式！"})),kendo.ui.Validator&&(kendo.ui.Validator.prototype.options.messages=t.extend(!0,kendo.ui.Validator.prototype.options.messages,{required:"{0} 是必填项！",pattern:"{0} 的格式不正确！",min:"{0} 必须大于或等于 {1} ！",max:"{0} 必须小于或等于 {1} ！",step:"{0} 不是正确的步进值！",email:"{0} 不是正确的电子邮件格式！",url:"{0} 不是正确的网址格式！",date:"{0} 不是正确的日期格式！",dateCompare:"结束日期必须晚于或等于开始日期！"})),kendo.ui.progress&&(kendo.ui.progress.messages=t.extend(!0,kendo.ui.progress.messages,{loading:"载入中..."})),kendo.ui.Dialog&&(kendo.ui.Dialog.prototype.options.messages=t.extend(!0,kendo.ui.Dialog.prototype.options.localization,{close:"关闭"})),kendo.ui.Calendar&&(kendo.ui.Calendar.prototype.options.messages=t.extend(!0,kendo.ui.Calendar.prototype.options.messages,{weekColumnHeader:""})),kendo.ui.Alert&&(kendo.ui.Alert.prototype.options.messages=t.extend(!0,kendo.ui.Alert.prototype.options.localization,{okText:"确定"})),kendo.ui.Confirm&&(kendo.ui.Confirm.prototype.options.messages=t.extend(!0,kendo.ui.Confirm.prototype.options.localization,{okText:"确定",cancel:"取消"})),kendo.ui.Prompt&&(kendo.ui.Prompt.prototype.options.messages=t.extend(!0,kendo.ui.Prompt.prototype.options.localization,{okText:"确定",cancel:"取消"})),kendo.ui.DateInput&&(kendo.ui.DateInput.prototype.options.messages=t.extend(!0,kendo.ui.DateInput.prototype.options.messages,{year:"年",month:"月",day:"日",weekday:"周",hour:"时",minute:"分",second:"秒",dayperiod:"上午/下午"})),kendo.ui.DropDownTree&&(kendo.ui.DropDownTree.prototype.options.messages=t.extend(!0,kendo.ui.DropDownTree.prototype.options.messages,{clear:"清空",deleteTag:"删除",singleTag:"项已选择"})),kendo.ui.Chat&&(kendo.ui.Chat.prototype.options.messages=t.extend(!0,kendo.ui.Chat.prototype.options.messages,{placeholder:"请输入..."})),kendo.mobile.ui.Scroller&&(kendo.mobile.ui.Scroller.prototype.options.messages=t.extend(!0,kendo.mobile.ui.Scroller.prototype.options.messages,{pullTemplate:"下拉刷新",releaseTemplate:"释放刷新",refreshTemplate:"刷新中..."})),kendo.mobile.ui.ListView&&(kendo.mobile.ui.ListView.prototype.options.messages=t.extend(!0,kendo.mobile.ui.ListView.prototype.options.messages,{loadMoreText:"点击载入更多",pullTemplate:"下拉刷新",releaseTemplate:"释放刷新",refreshTemplate:"刷新中..."}))},"function"==typeof define&&define.amd?define(["kendo.core.min"],r):r()},{}],36:[function(t,e,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(a){a=a&&a.hasOwnProperty("default")?a.default:a;var e=void 0,s=null,n=a.Class.extend({initialize:function(t){e=t},enable:function(){!0===e.events.click&&a.DomEvent.on(e.map,"click",this._handleClick,this),!0===e.events.mousemove&&a.DomEvent.on(e.map,"mousemove",this._throttle(this._handleMouseMove,e.throttleMs,e.throttleOptions),this)},disable:function(){a.DomEvent.off(e.map,"click",this._handleClick,this),a.DomEvent.off(e.map,"mousemove",this._throttle(this._handleMouseMove,e.throttleMs,e.throttleOptions),this)},_handleMouseMove:function(t){if(!t.originalEvent._stopped){var e,n=t.originalEvent.target;e={node:n,pointerEvents:n.style.pointerEvents},n.style.pointerEvents="none";var r=document.elementFromPoint(t.originalEvent.clientX,t.originalEvent.clientY),i="canvas"===r.nodeName.toLowerCase();if(s&&s!=r&&s.dispatchEvent(new MouseEvent("mouseout",t.originalEvent)),(s=r)&&"body"!==r.nodeName.toLowerCase()&&-1===r.classList.value.indexOf("leaflet-container")){var o=new MouseEvent(i?"mousemove":"mouseover",t.originalEvent);(!r.dispatchEvent(o)||o._stopped)&&a.DomEvent.stop(t)}e.node.style.pointerEvents=e.pointerEvents}},_handleClick:function(t){if(!t.originalEvent._stopped){var e,n=t.originalEvent.target;e={node:n,pointerEvents:n.style.pointerEvents},n.style.pointerEvents="none";var r=document.elementFromPoint(t.originalEvent.clientX,t.originalEvent.clientY);if(r&&"body"!==r.nodeName.toLowerCase()&&-1===r.classList.value.indexOf("leaflet-container")){var i=new MouseEvent(t.originalEvent.type,t.originalEvent);(!r.dispatchEvent(i)||i._stopped)&&a.DomEvent.stop(t)}e.node.style.pointerEvents=e.pointerEvents}},_throttle:function(n,r,i){var o,a,s,l=null,u=0;i||(i={});var c=function(){u=!1===i.leading?0:Date.now(),l=null,s=n.apply(o,a),l||(o=a=null)};return function(){var t=Date.now();u||!1!==i.leading||(u=t);var e=r-(t-u);return o=this,a=arguments,e<=0||r<e?(l&&(clearTimeout(l),l=null),u=t,s=n.apply(o,a),l||(o=a=null)):l||!1===i.trailing||(l=setTimeout(c,e)),s}}});return a.eventForwarder=function(t){return new n(t)},a.eventForwarder},"object"===((r=void 0)===n?"undefined":o(n))&&void 0!==e?e.exports=i(t("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],i):r["leaflet-event-forwarder"]=i(r.L)},{leaflet:560}],37:[function(t,e,n){"use strict";var r,i=t("../src/kq"),s=(r=i)&&r.__esModule?r:{default:r};L.TileLayer.WMTS=L.TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixSet:"",format:"png"},initialize:function(t,e){this._url=t;var n=L.extend({},this.defaultWmtsParams),r=e.tileSize||this.options.tileSize;for(var i in e.detectRetina&&L.Browser.retina?n.width=n.height=2*r:n.width=n.height=r,e)this.options.hasOwnProperty(i)||"matrixIds"==i||(n[i]=e[i]);this.wmtsParams=n,L.setOptions(this,e)},onAdd:function(t){L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){var n=t.x,r=t.y,i=Number(t.z);this.wmtsParams.scale_offset&&(i+=this.wmtsParams.scale_offset);var o=L.Util.template(this._url,{s:this._getSubdomain(t)});o=o+L.Util.getParamString(this.wmtsParams,o)+"&tilematrix="+i+"&tilerow="+r+"&tilecol="+n;var a=s.default.Map.MapView.getMapToken();return o+L.Util.getParamString(a,o)},setParams:function(t,e){return L.extend(this.wmtsParams,t),e||this.redraw(),this}}),L.tileLayer.wmts=function(t,e){return new L.TileLayer.WMTS(t,e)}},{"../src/kq":1075}],38:[function(t,e,n){"use strict";L.TileLayer.ChinaProvider=L.TileLayer.extend({initialize:function(t,e){e||(e={});var n=L.TileLayer.ChinaProvider.providers,r=t.split("."),i=r[0],o=r[1],a=r[2],s=n[i][o][a];(e.subdomains=n[i].Subdomains,e.key=e.key||n[i].key,"BaiDu"===i&&(e.tms=!0),"Realtime"===o)&&(s+=(new Date).getTime());L.TileLayer.prototype.initialize.call(this,s,e)}}),L.TileLayer.ChinaProvider.providers={TianDiTu:{Normal:{Map:"http://t{s}.tianditu.com/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk={key}"},Satellite:{Map:"http://t{s}.tianditu.com/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk={key}"},Terrain:{Map:"http://t{s}.tianditu.com/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk={key}"},Subdomains:["0","1","2","3","4","5","6","7"],key:"174705aebfe31b79b3587279e211cb9a"},GaoDe:{Normal:{Map:"http://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"},Satellite:{Map:"http://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",Annotion:"http://webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}"},Subdomains:["1","2","3","4"]},Google:{Normal:{Map:"http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}"},Satellite:{Map:"http://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}"},Terrain:{Map:"http://www.google.cn/maps/vt?lyrs=t@189&gl=cn&x={x}&y={y}&z={z}"},Subdomains:[]},Geoq:{Normal:{Map:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",PurplishBlue:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",Gray:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}",Warm:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetWarm/MapServer/tile/{z}/{y}/{x}"},Theme:{Hydro:"http://thematic.geoq.cn/arcgis/rest/services/ThematicMaps/WorldHydroMap/MapServer/tile/{z}/{y}/{x}"},Subdomains:[]},OSM:{Normal:{Map:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"},Subdomains:["a","b","c"]},BaiDu:{Normal:{Map:"http://online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1",Dark:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=dark",Midnight:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=midnight",Grayscale:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=grayscale",Hardedge:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=hardedge",Light:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=light",Redalert:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=redalert",Googlelite:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=googlelite",Grassgreen:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=grassgreen",Pink:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=pink",Darkgreen:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=darkgreen",Bluish:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid=bluish"},Satellite:{Map:"http://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46",Annotion:"http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020"},Realtime:{Map:"http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&v=017&time="},Subdomains:["0","1","2"]},GoogleEn:{Normal:{Map:"http://mt.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"},Satellite:{Map:"http://mt.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"},Terrain:{Map:"http://mt.google.com/vt/lyrs=t&x={x}&y={y}&z={z}"},Subdomains:[]}},L.tileLayer.chinaProvider=function(t,e){return new L.TileLayer.ChinaProvider(t,e)}},{}],39:[function(t,e,n){"use strict";e.exports=function(u){var e=(u.Layer?u.Layer:u.Class).extend({initialize:function(t){u.setOptions(this,t),this._onClickListeners=[],this._onHoverListeners=[]},setOptions:function(t){return u.setOptions(this,t),this.redraw()},redraw:function(){this._redraw(!0)},addMarkers:function(t){var i=this,o=[],a=[];t.forEach(function(t){if("markerPane"==t.options.pane&&t.options.icon){var e=t.getLatLng(),n=i._map.getBounds().contains(e),r=i._addMarker(t,e,n);!0===n&&o.push(r[0]),a.push(r[1])}else console.error("Layer isn't a marker")}),i._markers||(i._markers=new rbush),i._latlngMarkers||(i._latlngMarkers=new rbush,i._latlngMarkers.dirty=0,i._latlngMarkers.total=0),i._markers.load(o),i._latlngMarkers.load(a)},addMarker:function(t){var e=t.getLatLng(),n=this._map.getBounds().contains(e),r=this._addMarker(t,e,n);!0===n&&this._markers.insert(r[0]),this._latlngMarkers.insert(r[1])},addLayer:function(t){"markerPane"==t.options.pane&&t.options.icon?this.addMarker(t):console.error("Layer isn't a marker")},addLayers:function(t){this.addMarkers(t)},removeLayer:function(t){this.removeMarker(t,!0)},removeMarker:function(t,e){t.minX&&(t=t.data);var n=t.getLatLng(),r=this._map.getBounds().contains(n),i={minX:n.lng,minY:n.lat,maxX:n.lng,maxY:n.lat,data:t};this._latlngMarkers.remove(i,function(t,e){return t.data._leaflet_id===e.data._leaflet_id}),this._latlngMarkers.total--,this._latlngMarkers.dirty++,!0===r&&!0===e&&this._redraw(!0)},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.on("resize",this._reset,this),t.on("click",this._executeListeners,this),t.on("mousemove",this._executeListeners,this),t.on("contextmenu",this._executeListeners,this),t._zoomAnimated&&(t.on("zoomstart",this._startZoom,this),t.on("zoomend",this._endZoom,this))},onRemove:function(t){this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas),t.off("click",this._executeListeners,this),t.off("mousemove",this._executeListeners,this),t.off("contextmenu",this._executeListeners,this),t.off("moveend",this._reset,this),t.off("resize",this._reset,this),t._zoomAnimated&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_animateZoom:function(t){},_startZoom:function(t){this._canvas.style.visibility="hidden"},_endZoom:function(t){this._canvas.style.visibility="visible"},clearLayers:function(){this._latlngMarkers=null,this._markers=null,this._redraw(!0)},_addMarker:function(t,e,n){var r=this;t._map=r._map,r._markers||(r._markers=new rbush),r._latlngMarkers||(r._latlngMarkers=new rbush,r._latlngMarkers.dirty=0,r._latlngMarkers.total=0),u.Util.stamp(t);var i=r._map.latLngToContainerPoint(e),o=r._getMarkerIconSize(t),a=o[0]/2,s=o[1]/2,l=[{minX:i.x-a,minY:i.y-s,maxX:i.x+a,maxY:i.y+s,data:t},{minX:e.lng,minY:e.lat,maxX:e.lng,maxY:e.lat,data:t}];return r._latlngMarkers.dirty++,r._latlngMarkers.total++,!0===n&&r._drawMarker(t,i),l},_drawMarker:function(t,e){var n=this;if(this._imageLookup||(this._imageLookup={}),e||(e=n._map.latLngToContainerPoint(t.getLatLng())),t.options.extraIcon){var r=n._context,i=t.options.extraIcon;i.trueFontSize=2*Number(i.fontSize.replace("px","")),r.font="normal "+i.trueFontSize+"px "+i.className,r.lineWidth=i.strokeWidth,r.strokeStyle=n._hexToRGB(i.strokeColor,i.strokeOpacity),r.fillStyle=n._hexToRGB(i.fillColor,i.fillOpacity);var o=i.unicode.replace("&#x",""),a=String.fromCharCode(parseInt(o,16)),s=i.trueFontSize,l=s,u=e.x-s/2,c=e.y+l/2;i.strokeWidth&&r.strokeText(a,u,c),r.fillText(a,u,c)}else{var h=t.options.icon.options.iconUrl;if(t.canvas_img)n._drawImage(t,e);else if(n._imageLookup[h])t.canvas_img=n._imageLookup[h][0],!1===n._imageLookup[h][1]?n._imageLookup[h][2].push([t,e]):n._drawImage(t,e);else{var f=new Image;f.src=h,t.canvas_img=f,n._imageLookup[h]=[f,!1,[[t,e]]],f.onload=function(){n._imageLookup[h][1]=!0,n._imageLookup[h][2].forEach(function(t){n._drawImage(t[0],t[1])})}}}},_drawImage:function(t,e){var n=t.options.icon.options;this._context.drawImage(t.canvas_img,e.x-n.iconSize[0]/2,e.y-n.iconSize[1]/3,n.iconSize[0],n.iconSize[1])},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);u.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._canvas.width=e.x,this._canvas.height=e.y,this._redraw()},_redraw:function(t){var a=this;if(t&&this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._map&&this._latlngMarkers){var s=[];.1<=a._latlngMarkers.dirty/a._latlngMarkers.total&&(a._latlngMarkers.all().forEach(function(t){s.push(t)}),a._latlngMarkers.clear(),a._latlngMarkers.load(s),a._latlngMarkers.dirty=0,s=[]);var e=a._getLogicBound(a._map),n={minX:e.getWest(),minY:e.getSouth(),maxX:e.getEast(),maxY:e.getNorth()};a._latlngMarkers.search(n).forEach(function(t){var e=a._map.latLngToContainerPoint(t.data.getLatLng()),n=t.data.options.icon.options.iconSize,r=n[0]/2,i=n[1]/2,o={minX:e.x-r,minY:e.y-i,maxX:e.x+r,maxY:e.y+i,data:t.data};s.push(o),a._drawMarker(t.data,e)}),this._markers.clear(),this._markers.load(s)}},_initCanvas:function(){this._canvas=u.DomUtil.create("canvas","leaflet-canvas-icon-layer leaflet-layer");var t=this._map.getSize();this._canvas.width=t.x,this._canvas.height=t.y,this._context=this._canvas.getContext("2d");var e=this._map.options.zoomAnimation&&u.Browser.any3d;u.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(e?"animated":"hide"))},addOnClickListener:function(t){this._onClickListeners.push(t)},addOnHoverListener:function(t){this._onHoverListeners.push(t)},_executeListeners:function(e){if(this._markers){var t=e.containerPoint.x,n=e.containerPoint.y;this._openToolTip&&(this._openToolTip.closeTooltip(),delete this._openToolTip);var r=this._markers.search({minX:t,minY:n,maxX:t,maxY:n});r&&0<r.length?(this._map._container.style.cursor="pointer","contextmenu"===e.type&&0<r[0].data.options.contextmenuItems.length&&r[0].data._showContextMenu(e),"click"===e.type&&(r[0].data.getPopup()&&r[0].data.openPopup(),this._onClickListeners.forEach(function(t){t(e,r)})),"mousemove"===e.type&&(r[0].data.getTooltip()&&(this._openToolTip=r[0].data,r[0].data.openTooltip()),this._onHoverListeners.forEach(function(t){t(e,r)}))):this._map._container.style.cursor=""}},_getMarkerIconSize:function(t){var e=t.options.icon.options.iconSize;if(t.options.extraIcon){var n=t.options.extraIcon,r=n.trueFontSize?n.trueFontSize:n.fontSize.replace("px","");e=[r,r]}return e},_hexToRGB:function(t,e){var n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return void 0!==e||null!==e?"rgba("+n+", "+r+", "+i+", "+e+")":"rgb("+n+", "+r+", "+i+")"},_getLogicBound:function(t){var e=t.getSize(),n=t.getCenter(),r=t.project(n,t.getZoom()),i=t.getPixelWorldBounds(t.getZoom()),o=new u.Point(r.x-e.x/2,r.y-e.y/2),a=new u.Point(r.x+e.x/2,r.y+e.y/2);o.x<0&&(o.x=0),a.x>i.max.x&&(a.x=i.max.x);var s=t.unproject(o,t.zoom),l=t.unproject(a,t.zoom);return u.latLngBounds(s,l)},_getAllMarkers:function(){return this._latlngMarkers.all()}});u.canvasIconLayer=function(t){return new e(t)}}},{}],40:[function(t,e,n){"use strict";window,document,L.Control.Custom=L.Control.extend({version:"1.0.1",options:{position:"topright",id:"",title:"",classes:"",content:"",style:{},datas:{},events:{}},container:null,onAdd:function(t){for(var e in this.container=L.DomUtil.create("div"),this.container.id=this.options.id,this.container.title=this.options.title,this.container.className=this.options.classes,this.container.innerHTML=this.options.content,this.options.style)this.container.style[e]=this.options.style[e];for(var n in this.options.datas)this.container.dataset[n]=this.options.datas[n];for(var r in L.DomEvent.disableClickPropagation(this.container),L.DomEvent.on(this.container,"contextmenu",function(t){L.DomEvent.stopPropagation(t)}),L.DomEvent.disableScrollPropagation(this.container),this.options.events)L.DomEvent.on(this.container,r,this.options.events[r],this.container);return this.container},onRemove:function(t){for(var e in this.options.events)L.DomEvent.off(this.container,e,this.options.events[e],this.container)}}),L.control.custom=function(t){return new L.Control.Custom(t)}},{}],41:[function(t,e,n){"use strict";var r;r={animate:!1,reset:!0},L.Map=L.Map.extend({sync:function(t,e){return this._initSync(),e=L.extend({noInitialSync:!1,syncCursor:!1,syncCursorMarkerOptions:{radius:20,stroke:!1,opacity:.5,fill:!0,fillOpacity:.3,fillColor:"#dc2027"}},e),-1===this._syncMaps.indexOf(t)&&(this._syncMaps.push(t),e.noInitialSync||t.setView(this.getCenter(),this.getZoom(),r),e.syncCursor&&(t.cursor=L.circleMarker([0,0],e.syncCursorMarkerOptions).addTo(t),this._cursors.push(t.cursor),this.on("mousemove",this._cursorSyncMove,this),this.on("mouseout",this._cursorSyncOut,this))),this},_cursorSyncMove:function(e){this._cursors.forEach(function(t){t.setLatLng(e.latlng)})},_cursorSyncOut:function(t){this._cursors.forEach(function(t){t.setLatLng([0,0])})},unsync:function(n){var r=this;return r._syncMaps&&r._syncMaps.forEach(function(t,e){n===t&&(r._syncMaps.splice(e,1),n.cursor&&(r._cursors.forEach(function(t,e){n===t._map&&r._cursors.splice(e,1)}),n.cursor.removeFrom(n)))}),0===r._syncMaps.length&&(this.off("mousemove",this._cursorSyncMove,this),this.off("mouseout",this._cursorSyncOut,this)),this},unsyncSelf:function(){return this._cursors.forEach(function(t){t.remove()}),this._cursors=[],this._syncMaps=[],this.off("mousemove",this._cursorSyncMove,this),this.off("mouseout",this._cursorSyncOut,this),this},isSynced:function(){return this.hasOwnProperty("_syncMaps")&&0<Object.keys(this._syncMaps).length},_initSync:function(){if(!this._syncMaps){var i=this;this._syncMaps=[],this._cursors=[],L.extend(i,{setView:function(e,n,r,t){return t||i._syncMaps.forEach(function(t){t.setView(e,n,r,!0)}),L.Map.prototype.setView.call(this,e,n,r)},panBy:function(e,n,t){return t||i._syncMaps.forEach(function(t){t.panBy(e,n,!0)}),L.Map.prototype.panBy.call(this,e,n)},_onResize:function(e,t){return t||i._syncMaps.forEach(function(t){t._onResize(e,!0)}),L.Map.prototype._onResize.call(this,e)},_stop:function(t){return t||i._syncMaps.forEach(function(t){t._stop(!0)}),L.Map.prototype._stop.call(this)}}),i.on("zoomend",function(){i._syncMaps.forEach(function(t){t.setView(i.getCenter(),i.getZoom(),r)})},this),i.dragging._draggable._updatePosition=function(){L.Draggable.prototype._updatePosition.call(this);var e=this;i._syncMaps.forEach(function(t){L.DomUtil.setPosition(t.dragging._draggable._element,e._newPos),t.eachLayer(function(t){void 0!==t._google&&t._google.setCenter(i.getCenter())}),t.fire("moveend")})}}}})},{}],42:[function(n,r,t){"use strict";var e,i=n("../src/kq"),c=(e=i)&&e.__esModule?e:{default:e};!function(t){if("function"==typeof define&&define.amd)define(["leaflet"],t);else if(void 0!==r){var e=n("leaflet");e.WMS=e.wms=t(n("leaflet")),r.exports=e.wms}else{if(void 0===this.L)throw"Leaflet must be loaded first!";this.L.WMS=this.L.wms=t(this.L)}}(function(p){var r={};r.Source=p.Layer.extend({options:{untiled:!0,identify:!1},initialize:function(t,e){p.setOptions(this,e),this.options.tiled&&(this.options.untiled=!1),this._url=t,this._subLayers={},this._overlay=this.createOverlay(this.options.untiled),this._status="waiting"},createOverlay:function(t){var e={};for(var n in this.options)"untiled"!=n&&"identify"!=n&&(e[n]=this.options[n]);return t?r.overlay(this._url,e):r.tileLayer(this._url,e)},onAdd:function(){this.refreshOverlay()},getEvents:function(){return this.options.identify?{click:this.identify}:{}},setOpacity:function(t){this.options.opacity=t,this._overlay&&this._overlay.setOpacity(t)},getOpacity:function(){return this.options.opacity},bringToBack:function(){this.options.isBack=!0,this._overlay&&this._overlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._overlay&&this._overlay.bringToFront()},getLayer:function(t){return r.layer(this,t)},addSubLayer:function(t){this._subLayers[t]=!0,this.refreshOverlay()},removeSubLayer:function(t){delete this._subLayers[t],this.refreshOverlay()},refreshOverlay:function(){for(var t=[],e=this.options.layers,n=0;n<e.length;++n)this._subLayers.hasOwnProperty(e[n]._id)&&t.push(e[n]._id);t.reverse(),t=t.join(","),this._map&&(t?(this._overlay.setParams({layers:t}),this._overlay.addTo(this._map)):this._overlay.remove())},identify:function(t){var e=this.getIdentifyLayers();e.length&&this.getFeatureInfo(t.containerPoint,t.latlng,e,this.showFeatureInfo)},getFeatureInfo:function(t,n,e,r){var i=this.getFeatureInfoParams(t,e),o=this._url+p.Util.getParamString(i,this._url);this.showWaiting(),this.ajax(o,function(t){this.hideWaiting();var e=this.parseFeatureInfo(t,o);r.call(this,n,e)})},ajax:function(t,e){(function(t,e){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e.call(n,r.responseText):e.call(n,"error"))},r.open("GET",t),r.send()}).call(this,t,e)},getIdentifyLayers:function(){return this.options.identifyLayers?this.options.identifyLayers:Object.keys(this._subLayers)},getFeatureInfoParams:function(t,e){var n,r;this.options.untiled?n=this._overlay.wmsParams:((r=this.createOverlay(!0)).updateWmsParams(this._map),(n=r.wmsParams).layers=e.join(","));var i={request:"GetFeatureInfo",query_layers:e.join(","),X:Math.round(t.x),Y:Math.round(t.y)};return p.extend({},n,i)},parseFeatureInfo:function(t,e){return"error"==t&&(t="<iframe src='"+e+"' style='border:none'>"),t},showFeatureInfo:function(t,e){this._map&&this._map.openPopup(e,t)},showWaiting:function(){this._map&&(this._map._container.style.cursor="progress")},hideWaiting:function(){this._map&&(this._map._container.style.cursor="default")}}),r.source=function(t,e){return new r.Source(t,e)},r.Layer=p.Layer.extend({initialize:function(t,e,n){p.setOptions(this,n),t.addSubLayer||(t=r.getSourceForUrl(t,n)),this._source=t,this._name=e},onAdd:function(){this._source._map||this._source.addTo(this._map),this._source.addSubLayer(this._name)},onRemove:function(){this._source.removeSubLayer(this._name)},setOpacity:function(t){this._source.setOpacity(t)},getOpacity:function(){return this._source.getOpacity()},bringToBack:function(){this._source.bringToBack()},bringToFront:function(){this._source.bringToFront()}}),r.layer=function(t,e){return new r.Layer(t,e)};var n={};r.getSourceForUrl=function(t,e){return n[t]||(n[t]=r.source(t,e)),n[t]},r.TileLayer=p.TileLayer.WMS,r.tileLayer=p.tileLayer.wms;var i=void 0;return r.Overlay=p.Layer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},defaultKQMappingParams:{layers:"",format:"image/jpeg",level:"",x:"",y:"",size:""},options:{crs:null,uppercase:!1,attribution:"",opacity:1,isBack:!1,minZoom:0,maxZoom:18,serviceType:"wms"},initialize:function(t,e){this._url=t,this._timer=null,this._mode=null,e.mask?(i||(i=c.default.Common.CommonValues.maskPane_zIndex),this._zIndex=i--):this._zIndex=c.default.Common.PaneZIndexManager.getInstance().getNextZIndex();var n={};for(var r in e)r in this.options||(n[r]=e[r],delete e[r]);p.setOptions(this,e),this.wmsParams=p.extend({},this.defaultWmsParams,n)},setParams:function(t){p.extend(this.wmsParams,t),this.updateProxy()},getAttribution:function(){return this.options.attribution},onAdd:function(){this.updateProxy()},onRemove:function(t){if(this._currentOverlay)if(p.Util.isArray(this._currentOverlay))for(var e=0;e<this._currentOverlay.length;++e)t.removeLayer(this._currentOverlay[e]),delete this._currentOverlay[e];else t.removeLayer(this._currentOverlay),delete this._currentOverlay;this._currentUrl&&delete this._currentUrl},getEvents:function(){return{moveend:this.updateProxy}},updateProxy:function(){var t=this;t._timer||(t._timer=setTimeout(function(){c.default.Common.TaskManager.getInstance().addTask(t,t),clearTimeout(t._timer),t._timer=null},500))},update:function(){if(this._map){var r;null!=this._mode&&this._mode!=this._needCutImage()&&this.onRemove(this._map),this._mode=this._needCutImage(),this.updateWmsParams(),r="kqmapping"===this.options.serviceType?this.getKQMappingImageUrl():this.getImageUrl();var t=this.options.uppercase||!1,e=c.default.Map.MapView.getMapToken();if(p.Util.isArray(r))for(var n=0;n<r.length;++n)r[n]+=p.Util.getParamString(e,r[n],t);else r+=p.Util.getParamString(e,r,t);if(this._currentUrl!=r){this._currentUrl=r;var i=this.getProjectedLogisBound();if(this._needCutImage())for(var o=0;o<i.length;++o)!function(t,e){var n=new c.default.Struct.ImageOverlay(r[e],i[e],{opacity:0});n._currentBounds=i[e],t.setPane(n),n.addTo(t._map),n.once("load",function(){l(t,n,e)},t),n.once("error",function(){u(t,n,e)},t)}(this,o);else{var a=new c.default.Struct.ImageOverlay(r,i,{opacity:0}),s=this;a._currentBounds=i,this.setPane(a),a.addTo(s._map),a.once("load",function(){l(this,a)},s),a.once("error",function(){u(s,a)},s)}}else this.setStatusDone()}function l(t,e,n){var r=t;if(r.setStatusDone(),r._map){if(void 0===n){if(e._url!=r._currentUrl)return void r._map.removeLayer(e);r._currentOverlay&&r._map.removeLayer(r._currentOverlay),r._currentOverlay=e}else{if(e._url!=r._currentUrl[n])return void r._map.removeLayer(e);r._currentOverlay||(r._currentOverlay=[]),r._currentOverlay[n]&&r._map.removeLayer(r._currentOverlay[n]),r._currentOverlay[n]=e}var i=parseFloat(r.options.opacity);isNaN(i)?e.setOpacity(1):e.setOpacity(i)}else e&&e.remove()}function u(t,e,n){t.setStatusDone(),void 0===n?(t._currentOverlay?t._map.removeLayer(t._currentOverlay):t._map.removeLayer(e),t._currentOverlay=e):(t._currentOverlay[n]?t._map.removeLayer(t._currentOverlay[n]):t._map.removeLayer(e),t._currentOverlay[n]=e)}},getZoom:function(){return c.default.Map.MapConfig.getInstance().scaleIndexToID(this._map.getZoom())},setPane:function(t){var e=this._zIndex,n="pane"+e;this._map.getPane(n)||(this._map.createPane(n),this._map.getPane(n).style.zIndex=e,this._map.getPane(n).style.pointerEvents="none"),t.options.pane=n,t.desc="imageoverlay"},setOpacity:function(t){if(console.log("wms setOpacity"),this.options.opacity=t,this._currentOverlay)if(p.Util.isArray(this._currentOverlay))for(var e=0;e<this._currentOverlay.length;++e)this._currentOverlay[e].setOpacity(t);else this._currentOverlay.setOpacity(t)},bringToBack:function(){if(console.log("wms bringToBack"),this.options.isBack=!0,this._currentOverlay)if(p.Util.isArray(this._currentOverlay))for(var t=0;t<this._currentOverlay.length;++t)this._currentOverlay[t].bringToBack();else this._currentOverlay.bringToBack()},bringToFront:function(){if(console.log("wms bringToFront"),this.options.isBack=!1,this._currentOverlay)if(p.Util.isArray(this._currentOverlay))for(var t=0;t<this._currentOverlay.length;++t)this._currentOverlay[t].bringToFront();else this._currentOverlay.bringToFront()},_needCutImage:function(){var t=this._map.getSize();return"kqmapping"===this.options.serviceType&&(2048<t.x||2048<t.y)},updateWmsParams:function(t){t||(t=this._map);var e,n=t.getBounds(),r=t.getSize(),i=parseFloat(this.wmsParams.version),o=this.options.crs||t.options.crs,a=1.3<=i?"crs":"srs",s=o.project(n.getNorthWest()),l=o.project(n.getSouthEast()),u={width:r.x,height:r.y};(e=o&&o.options&&o.options.prj?o.options.prj:c.default.Map.MapConfig.getInstance().getPrj(!1))&&""!==e&&(u[a]=e),u.bbox=(1.3<=i&&o===p.CRS.EPSG4326?[l.y,s.x,s.y,l.x]:[s.x,l.y,l.x,s.y]).join(","),p.extend(this.wmsParams,u)},getImageUrl:function(){var t=this.options.uppercase||!1,e=p.Util.getParamString(this.wmsParams,this._url,t);return this._url+e},getKQMappingImageUrl:function(){for(var t in this.wmsParams)t in this.defaultKQMappingParams&&(this.defaultKQMappingParams[t]=this.wmsParams[t]);var e=this._map;this.defaultKQMappingParams.level=this.getZoom()+this.wmsParams.scale_offset,this.defaultKQMappingParams.where=this.wmsParams.where,this.wmsParams.mask?this.defaultKQMappingParams.mask=1:delete this.defaultKQMappingParams.mask;var n=this.options.uppercase||!1,r=this.options.crs||e.options.crs,i=e.getSize();if(this._needCutImage()){var o=[],a=[{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}];this.defaultKQMappingParams.size=Math.floor(i.x/2)+","+Math.floor(i.y/2);for(var s=0;s<a.length;++s){var l=e.getCenter(),u=this._map.project(l,this._map.zoom);u.x+=i.x/4*a[s].x,u.y+=i.y/4*a[s].y,l=this._map.unproject(u,this._map.zoom),l=r.project(l),this.defaultKQMappingParams.x=l.x,this.defaultKQMappingParams.y=l.y;var c=p.Util.getParamString(this.defaultKQMappingParams,this._url,n);o.push(this._url+"/MapServer/export"+c)}return o}var h=r.project(e.getCenter());this.defaultKQMappingParams.size=i.x+","+i.y,this.defaultKQMappingParams.x=h.x,this.defaultKQMappingParams.y=h.y;c=p.Util.getParamString(this.defaultKQMappingParams,this._url,n);return this._url+"/MapServer/export"+c},setStatusDone:function(){this._status="done",this.fire("done")},setStatusWaiting:function(){this._status="waiting"},setStatusWorking:function(){this._status="working"},isStatusDone:function(){return"done"===this._status},isWaiting:function(){return"waiting"===this._status},_pixelBoundsToProjectBounds:function(t){var e=this.options.crs||this._map.options.crs,n=this._map.getPixelWorldBounds().getSize(),r=e.getProjectedBounds(this._map.zoom).getSize(),i=r.x/n.x,o=r.y/n.y,a=t.min,s=t.max,l=e.options.origin,u=p.point(a.x*i+l[0],l[1]-a.y*o),c=p.point(s.x*i+l[0],l[1]-s.y*o);return p.bounds(u,c)},getProjectedLogisBound:function(){var t=this._map.getSize(),e=this._map.getCenter(),n=(this.options.crs||this._map.options.crs,this._map.project(e,this._map.getZoom()));if(this._needCutImage()){for(var r=[],i=[{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}],o=0;o<i.length;++o){var a={};a.x=n.x+t.x/4*i[o].x,a.y=n.y+t.y/4*i[o].y;var s=new p.Point(a.x-t.x/4,a.y-t.y/4),l=new p.Point(a.x+t.x/4,a.y+t.y/4);r.push(this._pixelBoundsToProjectBounds(p.bounds(s,l)))}return r}var u=new p.Point(n.x-t.x/2,n.y-t.y/2),c=new p.Point(n.x+t.x/2,n.y+t.y/2);return this._pixelBoundsToProjectBounds(p.bounds(u,c))},_getProjectedLogisBound:function(){for(var t=this._map.getPixelBounds().getSize(),e=this._map.getPixelWorldBounds().getSize(),n=this._map.options.crs.projection.bounds.getSize(),r=n.x/e.x,i=n.y/e.y,o=void 0,a=void 0,s=this._currentUrl.split("&"),l=0;l<s.length;l++){var u=s[l].split("x=");1<u.length&&(o=u[1]);var c=s[l].split("y=");1<c.length&&(a=c[1])}var h=[Number(o)-t.x/2*r,Number(a)-t.y/2*i],f=[Number(o)+t.x/2*r,Number(a)+t.y/2*i];return new p.Bounds(h,f)}}),r.overlay=function(t,e){return new r.Overlay(t,e)},r})},{"../src/kq":1075,leaflet:560}],43:[function(t,e,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=void 0,i=function(l){l.MapboxGL=l.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1},initialize:function(t){if(l.setOptions(this,t),!t.accessToken)throw new Error("You should provide a Mapbox GL access token as a token option.");window.mapboxgl.accessToken=t.accessToken,this._throttledUpdate=l.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(t){this._container||this._initContainer(),t.getPanes().tilePane.appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),t.options.zoomAnimation&&l.DomEvent.on(t._proxy,l.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(t){this._map._proxy&&this._map.options.zoomAnimation&&l.DomEvent.off(this._map._proxy,l.DomUtil.TRANSITION_END,this._transitionEnd,this),t.getPanes().tilePane.removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd}},getMapboxMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var t=this.getSize().multiplyBy(.5),e=this._map.latLngToContainerPoint(this._map.getCenter());return l.latLngBounds(this._map.containerPointToLatLng(e.subtract(t)),this._map.containerPointToLatLng(e.add(t)))},getContainer:function(){return this._container},_initContainer:function(){var t=this._container=l.DomUtil.create("div","leaflet-gl-layer"),e=this.getSize(),n=this._map.getSize().multiplyBy(this.options.padding);t.style.width=e.x+"px",t.style.height=e.y+"px";var r=this._map.containerPointToLayerPoint([0,0]).subtract(n);l.DomUtil.setPosition(t,r)},_initGL:function(){var t=this._map.getCenter(),e=l.extend({},this.options,{container:this._container,center:[t.lng,t.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new window.mapboxgl.Map(e),this._glMap.transform.latRange=null,this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var n=this._glMap._actualCanvas;l.DomUtil.addClass(n,"leaflet-image-layer"),l.DomUtil.addClass(n,"leaflet-zoom-animated"),this.options.interactive&&l.DomUtil.addClass(n,"leaflet-interactive"),this.options.className&&l.DomUtil.addClass(n,this.options.className)},_update:function(t){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var e=this.getSize(),n=this._container,r=this._glMap,i=this._map.getSize().multiplyBy(this.options.padding),o=this._map.containerPointToLayerPoint([0,0]).subtract(i);l.DomUtil.setPosition(n,o);var a=this._map.getCenter(),s=r.transform;s.center=window.mapboxgl.LngLat.convert([a.lng,a.lat]),s.zoom=this._map.getZoom()-1,r.transform.width!==e.x||r.transform.height!==e.y?(n.style.width=e.x+"px",n.style.height=e.y+"px",null!==r._resize&&void 0!==r._resize?r._resize():r.resize()):null!==r._update&&void 0!==r._update?r._update():r.update()}},_pinchZoom:function(t){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map.getSize().multiplyBy(this.options.padding*e),r=this.getSize()._divideBy(2),i=this._map.project(t.center,t.zoom)._subtract(r)._add(this._map._getMapPanePos().add(n))._round(),o=this._map.project(this._map.getBounds().getNorthWest(),t.zoom)._subtract(i);l.DomUtil.setTransform(this._glMap._actualCanvas,o.subtract(this._offset),e)},_zoomStart:function(t){this._zooming=!0},_zoomEnd:function(){var t=this._map.getZoomScale(this._map.getZoom()),e=this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),this._map.getZoom(),this._map.getCenter());l.DomUtil.setTransform(this._glMap._actualCanvas,e.subtract(this._offset),t),this._zooming=!1,this._update()},_transitionEnd:function(t){l.Util.requestAnimFrame(function(){var t=this._map.getZoom(),e=this._map.getCenter(),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());l.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",l.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:e,zoom:t-1})},this)}}),l.mapboxGL=function(t){return new l.MapboxGL(t)}},"function"==typeof define&&define.amd?define(["leaflet","mapbox-gl"],i):"object"===(void 0===n?"undefined":o(n))?e.exports=i(t("leaflet")):r.returnExports=i(window.L,window.mapboxgl)},{leaflet:560}],44:[function(t,e,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(t){var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,n=this._zoom;if(t.__parent)for(;e.__parent._zoom>=n;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):(t.getLatLng?this._map?t.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow())):(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t})):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t})),this)},addLayers:function(i,o){if(!L.Util.isArray(i))return this.addLayer(i);var a,s=this._featureGroup,l=this._nonPointGroup,u=this.options.chunkedLoading,c=this.options.chunkInterval,h=this.options.chunkProgress,f=i.length,p=0,d=!0;if(this._map){var g=(new Date).getTime(),m=L.bind(function(){for(var t=(new Date).getTime();p<f;p++){if(u&&0==p%200){var e=(new Date).getTime()-t;if(c<e)break}if((a=i[p])instanceof L.LayerGroup)d&&(i=i.slice(),d=!1),this._extractNonGroupLayers(a,i),f=i.length;else if(a.getLatLng){if(!this.hasLayer(a)&&(this._addLayer(a,this._maxZoom),o||this.fire("layeradd",{layer:a}),a.__parent&&2===a.__parent.getChildCount())){var n=a.__parent.getAllChildMarkers(),r=n[0]===a?n[1]:n[0];s.removeLayer(r)}}else l.addLayer(a),o||this.fire("layeradd",{layer:a})}h&&h(p,f,(new Date).getTime()-g),p===f?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var t=this._needsClustering;p<f;p++)(a=i[p])instanceof L.LayerGroup?(d&&(i=i.slice(),d=!1),this._extractNonGroupLayers(a,i),f=i.length):a.getLatLng?this.hasLayer(a)||t.push(a):l.addLayer(a);return this},removeLayers:function(t){var e,n,r=t.length,i=this._featureGroup,o=this._nonPointGroup,a=!0;if(!this._map){for(e=0;e<r;e++)(n=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(n,t),r=t.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=r;for(e=0;e<l;e++)(n=s[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,s),l=s.length):this._unspiderfyLayer(n)}for(e=0;e<r;e++)(n=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(n,t),r=t.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),i.hasLayer(n)&&(i.removeLayer(n),n.clusterShow&&n.clusterShow())):(o.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;0<=e;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var n,r,i,o=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),r=o.length-1;0<=r;r--){for(n=!0,i=a.length-1;0<=i;i--)if(a[i].layer===o[r]){n=!1;break}n&&t.call(e,o[r])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var n=null;return e=parseInt(e,10),this.eachLayer(function(t){L.stamp(t)===e&&(n=t)}),n},hasLayer:function(t){if(!t)return!1;var e,n=this._needsClustering;for(e=n.length-1;0<=e;e--)if(n[e]===t)return!0;for(e=(n=this._needsRemoving).length-1;0<=e;e--)if(n[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(e,n){"function"!=typeof n&&(n=function(){});var t=function t(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",t,this),this.off("animationend",t,this),e._icon?n():e.__parent._icon&&(this.once("spiderfied",n,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?n():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",t,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",t,this),this.on("animationend",t,this),e.__parent.zoomToBounds())},onAdd:function(t){var e,n,r;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,n=this._needsRemoving.length;e<n;e++)(r=this._needsRemoving[e]).newlatlng=r.layer._latlng,r.layer._latlng=r.latlng;for(e=0,n=this._needsRemoving.length;e<n;e++)r=this._needsRemoving[e],this._removeLayer(r.layer,!0),r.layer._latlng=r.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var n=t.length-1;0<=n;n--)if(t[n]===e)return t.splice(n,1),!0},_removeFromGridUnclustered:function(t,e){for(var n=this._map,r=this._gridUnclustered,i=Math.floor(this._map.getMinZoom());i<=e&&r[e].removeObject(t,n.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,n){t._latlng=e,this.removeLayer(t),t._latlng=n,this.addLayer(t)},_childMarkerDragEnd:function(t){t.target.__dragStart&&this._moveChild(t.target,t.target.__dragStart,t.target._latlng),delete t.target.__dragStart},_removeLayer:function(t,e,n){var r=this._gridClusters,i=this._gridUnclustered,o=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,u=t.__parent,c=u._markers;for(this._arraySplice(c,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<s));)e&&u._childCount<=1?(l=u._markers[0]===t?u._markers[1]:u._markers[0],r[u._zoom].removeObject(u,a.project(u._cLatLng,u._zoom)),i[u._zoom].addObject(l,a.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(o.removeLayer(u),n||o.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,n){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,n)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),n=" marker-cluster-";return n+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick;(e||r)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,n=e;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),2<t.layer.getChildCount()&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,r=this._map;(t||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,r=n;"function"!=typeof n&&(r=function(){return n}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var i=t;e<=i;i--)this._gridClusters[i]=new L.DistanceGrid(r(i)),this._gridUnclustered[i]=new L.DistanceGrid(r(i));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var n,r,i=this._gridClusters,o=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);a<=e;e--){n=this._map.project(t.getLatLng(),e);var s=i[e].getNearObject(n);if(s)return s._addChild(t),void(t.__parent=s);if(s=o[e].getNearObject(n)){var l=s.__parent;l&&this._removeLayer(s,!1);var u=new this._markerCluster(this,e,s,t);i[e].addObject(u,this._map.project(u._cLatLng,e)),s.__parent=u;var c=t.__parent=u;for(r=e-1;r>l._zoom;r--)c=new this._markerCluster(this,r,c),i[r].addObject(c,this._map.project(s.getLatLng(),r));return l._addChild(c),void this._removeFromGridUnclustered(s,e)}o[e].addObject(t,n)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var n=e.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var n,r=t.getLayers(),i=0;for(e=e||[];i<r.length;i++)(n=r[i])instanceof L.LayerGroup?this._extractNonGroupLayers(n,e):e.push(n);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,o){var a,s=this._getExpandedVisibleBounds(),l=this._featureGroup,t=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(s,i,t,function(t){var e,n=t._latlng,r=t._markers;for(s.contains(n)||(n=null),t._isSingleParent()&&i+1===o?(l.removeLayer(t),t._recursivelyAddChildrenToMap(null,o,s)):(t.clusterHide(),t._recursivelyAddChildrenToMap(n,o,s)),a=r.length-1;0<=a;a--)e=r[a],s.contains(e._latlng)||l.removeLayer(e)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,o),l.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(s,i,o,function(t){t._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,i,t,function(t){l.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var n=this,r=this._featureGroup;r.addLayer(t),e!==t&&(2<e._childCount?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){r.removeLayer(t),t.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,n,r){var i=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,o,n+1,r);var a=this;this._forceLayout(),e._recursivelyBecomeVisible(i,r),this._enqueue(function(){if(1===e._childCount){var t=e._markers[0];this._ignoreMove=!0,t.setLatLng(t.getLatLng()),this._ignoreMove=!1,t.clusterShow&&t.clusterShow()}else e._recursively(i,r,o,function(t){t._recursivelyRemoveChildrenFromMap(i,o,n+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,n,r){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),r&&this._addChild(r)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;0<=e;e--)this._childClusters[e].getAllChildMarkers(t);for(var n=this._markers.length-1;0<=n;n--)t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,n=this._childClusters.slice(),r=this._group._map,i=r.getBoundsZoom(this._bounds),o=this._zoom+1,a=r.getZoom();0<n.length&&o<i;){o++;var s=[];for(e=0;e<n.length;e++)s=s.concat(n[e]._childClusters);n=s}o<i?this._group._map.setView(this._latlng,o):i<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,n,r,i=this._markers,o=this._childClusters,a=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<i.length;t++)n=i[t]._latlng,this._bounds.extend(n),a+=n.lat,s+=n.lng;for(t=0;t<o.length;t++)(e=o[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),n=e._wLatLng,r=e._childCount,a+=n.lat*r,s+=n.lng*r;this._latlng=this._wLatLng=new L.LatLng(a/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,i,e){this._recursively(t,this._group._map.getMinZoom(),e-1,function(t){var e,n,r=t._markers;for(e=r.length-1;0<=e;e--)(n=r[e])._icon&&(n._setPos(i),n.clusterHide())},function(t){var e,n,r=t._childClusters;for(e=r.length-1;0<=e;e--)(n=r[e])._icon&&(n._setPos(i),n.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,n,r,i){this._recursively(e,i,n,function(t){t._recursivelyAnimateChildrenIn(e,t._group._map.latLngToLayerPoint(t.getLatLng()).round(),r),t._isSingleParent()&&r-1===i?(t.clusterShow(),t._recursivelyRemoveChildrenFromMap(e,n,r)):t.clusterHide(),t._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(r,i,o){this._recursively(o,this._group._map.getMinZoom()-1,i,function(t){if(i!==t._zoom)for(var e=t._markers.length-1;0<=e;e--){var n=t._markers[e];o.contains(n._latlng)&&(r&&(n._backupLatlng=n.getLatLng(),n.setLatLng(r),n.clusterHide&&n.clusterHide()),t._group._featureGroup.addLayer(n))}},function(t){t._addToMap(r)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;0<=e;e--){var n=this._markers[e];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(t-1===this._zoom)for(var r=this._childClusters.length-1;0<=r;r--)this._childClusters[r]._restorePosition();else for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,n,r){var i,o;this._recursively(t,e-1,n-1,function(t){for(o=t._markers.length-1;0<=o;o--)i=t._markers[o],r&&r.contains(i._latlng)||(t._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(t){for(o=t._childClusters.length-1;0<=o;o--)i=t._childClusters[o],r&&r.contains(i._latlng)||(t._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(t,e,n,r,i){var o,a,s=this._childClusters,l=this._zoom;if(e<=l&&(r&&r(this),i&&l===n&&i(this)),l<e||l<n)for(o=s.length-1;0<=o;o--)a=s[o],t.intersects(a._bounds)&&a._recursively(t,e,n,r,i)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var t=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,t}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var n=this._getCoord(e.x),r=this._getCoord(e.y),i=this._grid,o=i[r]=i[r]||{},a=o[n]=o[n]||[],s=L.Util.stamp(t);this._objectPoint[s]=e,a.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var n,r,i=this._getCoord(e.x),o=this._getCoord(e.y),a=this._grid,s=a[o]=a[o]||{},l=s[i]=s[i]||[];for(delete this._objectPoint[L.Util.stamp(t)],n=0,r=l.length;n<r;n++)if(l[n]===t)return l.splice(n,1),1===r&&delete s[i],!0},eachObject:function(t,e){var n,r,i,o,a,s,l=this._grid;for(n in l)for(r in a=l[n])for(i=0,o=(s=a[r]).length;i<o;i++)t.call(e,s[i])&&(i--,o--)},getNearObject:function(t){var e,n,r,i,o,a,s,l,u=this._getCoord(t.x),c=this._getCoord(t.y),h=this._objectPoint,f=this._sqCellSize,p=null;for(e=c-1;e<=c+1;e++)if(i=this._grid[e])for(n=u-1;n<=u+1;n++)if(o=i[n])for(r=0,a=o.length;r<a;r++)s=o[r],((l=this._sqDist(h[L.Util.stamp(s)],t))<f||l<=f&&null===p)&&(f=l,p=s);return p},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}},L.QuickHull={getDistant:function(t,e){var n=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+n*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var n,r,i,o=0,a=null,s=[];for(n=e.length-1;0<=n;n--)r=e[n],0<(i=this.getDistant(r,t))&&(s.push(r),o<i&&(o=i,a=r));return{maxPoint:a,newPoints:s}},buildConvexHull:function(t,e){var n=[],r=this.findMostDistantPointFromBaseLine(t,e);return r.maxPoint?n=(n=n.concat(this.buildConvexHull([t[0],r.maxPoint],r.newPoints))).concat(this.buildConvexHull([r.maxPoint,t[1]],r.newPoints)):[t[0]]},getConvexHull:function(t){var e,n=!1,r=!1,i=!1,o=!1,a=null,s=null,l=null,u=null,c=null,h=null;for(e=t.length-1;0<=e;e--){var f=t[e];(!1===n||f.lat>n)&&(n=(a=f).lat),(!1===r||f.lat<r)&&(r=(s=f).lat),(!1===i||f.lng>i)&&(i=(l=f).lng),(!1===o||f.lng<o)&&(o=(u=f).lng)}return r!==n?(h=s,c=a):(h=u,c=l),[].concat(this.buildConvexHull([h,c],t),this.buildConvexHull([c,h],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,n=this.getAllChildMarkers(),r=[];for(e=n.length-1;0<=e;e--)t=n[e].getLatLng(),r.push(t);return L.QuickHull.getConvexHull(r)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,n):(n.y+=10,t=this._generatePointsCircle(e.length,n)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var n,r,i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,o=this._2PI/t,a=[];for(i=Math.max(i,35),a.length=t,n=0;n<t;n++)r=this._circleStartAngle+n*o,a[n]=new L.Point(e.x+i*Math.cos(r),e.y+i*Math.sin(r))._round();return a},_generatePointsSpiral:function(t,e){var n,r=this._group.options.spiderfyDistanceMultiplier,i=r*this._spiralLengthStart,o=r*this._spiralFootSeparation,a=r*this._spiralLengthFactor*this._2PI,s=0,l=[];for(n=l.length=t;0<=n;n--)n<t&&(l[n]=new L.Point(e.x+i*Math.cos(s),e.y+i*Math.sin(s))._round()),i+=a/(s+=o/i+5e-4*n);return l},_noanimationUnspiderfy:function(){var t,e,n=this._group,r=n._map,i=n._featureGroup,o=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),e=o.length-1;0<=e;e--)t=o[e],i.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(r.removeLayer(t._spiderLeg),delete t._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var n,r,i,o,a=this._group,s=a._map,l=a._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,n=0;n<t.length;n++)o=s.layerPointToLatLng(e[n]),r=t[n],i=new L.Polyline([this._latlng,o],u),s.addLayer(i),r._spiderLeg=i,r._preSpiderfyLatlng=r._latlng,r.setLatLng(o),r.setZIndexOffset&&r.setZIndexOffset(1e6),l.addLayer(r);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var n,r,i,o,a,s,l=this,u=this._group,c=u._map,h=u._featureGroup,f=this._latlng,p=c.latLngToLayerPoint(f),d=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),m=g.opacity;for(void 0===m&&(m=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),d?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=m,u._ignoreMove=!0,n=0;n<t.length;n++)r=t[n],s=c.layerPointToLatLng(e[n]),i=new L.Polyline([f,s],g),c.addLayer(i),r._spiderLeg=i,d&&(a=(o=i._path).getTotalLength()+.1,o.style.strokeDasharray=a,o.style.strokeDashoffset=a),r.setZIndexOffset&&r.setZIndexOffset(1e6),r.clusterHide&&r.clusterHide(),h.addLayer(r),r._setPos&&r._setPos(p);for(u._forceLayout(),u._animationStart(),n=t.length-1;0<=n;n--)s=c.layerPointToLatLng(e[n]),(r=t[n])._preSpiderfyLatlng=r._latlng,r.setLatLng(s),r.clusterShow&&r.clusterShow(),d&&((o=(i=r._spiderLeg)._path).style.strokeDashoffset=0,i.setStyle({opacity:m}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:l,markers:t})},200)},_animationUnspiderfy:function(t){var e,n,r,i,o,a,s=this,l=this._group,u=l._map,c=l._featureGroup,h=t?u._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):u.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),n=f.length-1;0<=n;n--)(e=f[n])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,a=!0,e._setPos&&(e._setPos(h),a=!1),e.clusterHide&&(e.clusterHide(),a=!1),a&&c.removeLayer(e),p&&(o=(i=(r=e._spiderLeg)._path).getTotalLength()+.1,i.style.strokeDashoffset=o,r.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var t=0;for(n=f.length-1;0<=n;n--)(e=f[n])._spiderLeg&&t++;for(n=f.length-1;0<=n;n--)(e=f[n])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),1<t&&c.removeLayer(e),u.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,n;for(e in t)for(n=t[e].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,n;for(e in t)n=t[e],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(t,e){var n=this.options.icon;return L.setOptions(n,t),this.setIcon(n),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=n},"object"==((r=void 0)===n?"undefined":o(n))&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r.Leaflet=r.Leaflet||{},r.Leaflet.markercluster=r.Leaflet.markercluster||{}))},{}],45:[function(h,t,e){(function(n){"use strict";var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function o(a,s,l){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof h&&h;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return u(a[e][1][t]||t)},i,i.exports,o,a,s,l)}return s[e].exports}for(var c="function"==typeof h&&h,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){},{}],2:[function(t,e,n){function i(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s==a?e=0:r==s?e=(i-o)/l:i==s?e=2+(o-r)/l:o==s&&(e=4+(r-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s==a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]}function o(t){var e,n,r=t[0],i=t[1],o=t[2],a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return n=0==s?0:l/s*1e3/10,s==a?e=0:r==s?e=(i-o)/l:i==s?e=2+(o-r)/l:o==s&&(e=4+(r-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,n,s/255*1e3/10]}function a(t){var e=t[0],n=t[1],r=t[2];return[i(t)[0],1/255*Math.min(e,Math.min(n,r))*100,100*(r=1-1/255*Math.max(e,Math.max(n,r)))]}function s(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]}function l(t){return k[JSON.stringify(t)]}function u(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=.04045<r?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]}function c(t){var e=u(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=.008856<(n/=95.047)?Math.pow(n,1/3):7.787*n+16/116,[116*(r=.008856<r?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116))]}function h(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0==s)return[o=255*l,o,o];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,1<r&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[u]=255*o;return i}function f(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}}function p(t){var e,n,i,o,a=t[0]/360,s=t[1]/100,l=t[2]/100,u=s+l;switch(1<u&&(s/=u,l/=u),i=6*a-(e=Math.floor(6*a)),0!=(1&e)&&(i=1-i),o=s+i*((n=1-l)-s),e){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function d(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]}function m(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=.0031308<(e=3.2406*i+-1.5372*o+-.4986*a)?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]}function y(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=.008856<r?Math.pow(r,1/3):7.787*r+16/116))]}function _(t){var e,n,r,i,o=t[0],a=t[1],s=t[2];return o<=8?i=(n=100*o/903.3)/100*7.787+16/116:(n=100*Math.pow((o+16)/116,3),i=Math.pow(n/100,1/3)),[e=e/95.047<=.008856?e=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),n,r=r/108.883<=.008859?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function v(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]}function x(t){return m(_(t))}function w(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]}function L(t){return C[t]}e.exports={rgb2hsl:i,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:l,rgb2xyz:u,rgb2lab:c,rgb2lch:function(t){return v(c(t))},hsl2rgb:h,hsl2hsv:function(t){var e=t[0],n=t[1]/100,r=t[2]/100;return 0===r?[0,0,0]:[e,2*(n*=(r*=2)<=1?r:2-r)/(r+n)*100,(r+n)/2*100]},hsl2hwb:function(t){return a(h(t))},hsl2cmyk:function(t){return s(h(t))},hsl2keyword:function(t){return l(h(t))},hsv2rgb:f,hsv2hsl:function(t){var e,n,r=t[0],i=t[1]/100,o=t[2]/100;return e=i*o,[r,100*(e=(e/=(n=(2-i)*o)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(t){return a(f(t))},hsv2cmyk:function(t){return s(f(t))},hsv2keyword:function(t){return l(f(t))},hwb2rgb:p,hwb2hsl:function(t){return i(p(t))},hwb2hsv:function(t){return o(p(t))},hwb2cmyk:function(t){return s(p(t))},hwb2keyword:function(t){return l(p(t))},cmyk2rgb:d,cmyk2hsl:function(t){return i(d(t))},cmyk2hsv:function(t){return o(d(t))},cmyk2hwb:function(t){return a(d(t))},cmyk2keyword:function(t){return l(d(t))},keyword2rgb:L,keyword2hsl:function(t){return i(L(t))},keyword2hsv:function(t){return o(L(t))},keyword2hwb:function(t){return a(L(t))},keyword2cmyk:function(t){return s(L(t))},keyword2lab:function(t){return c(L(t))},keyword2xyz:function(t){return u(L(t))},xyz2rgb:m,xyz2lab:y,xyz2lch:function(t){return v(y(t))},lab2xyz:_,lab2rgb:x,lab2lch:v,lch2lab:w,lch2xyz:function(t){return _(w(t))},lch2rgb:function(t){return x(w(t))}};var C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},k={};for(var E in C)k[JSON.stringify(C[E])]=E},{}],3:[function(t,e,n){var i=t("./conversions"),o=function(){return new u};for(var r in i){o[r+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),i[e](t)}}(r);var a=/(\w+)2(\w+)/.exec(r),s=a[1],l=a[2];(o[s]=o[s]||{})[l]=o[r]=function(r){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var e=i[r](t);if("string"==typeof e||void 0===e)return e;for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]);return e}}(r)}var u=function(){this.convs={}};u.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},u.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},u.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,r=this.convs[n];e=o[n][t](r),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){u.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),e.exports=o},{"./conversions":2}],4:[function(t,e,n){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(t,e,n){var o=t("color-name");function r(t){if(t){var e=[0,0,0],n=1,r=t.match(/^#([a-fA-F0-9]{3})$/);if(r){r=r[1];for(var i=0;i<e.length;i++)e[i]=parseInt(r[i]+r[i],16)}else if(r=t.match(/^#([a-fA-F0-9]{6})$/))for(r=r[1],i=0;i<e.length;i++)e[i]=parseInt(r.slice(2*i,2*i+2),16);else if(r=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<e.length;i++)e[i]=parseInt(r[i+1]);n=parseFloat(r[4])}else if(r=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(i=0;i<e.length;i++)e[i]=Math.round(2.55*parseFloat(r[i+1]));n=parseFloat(r[4])}else if(r=t.match(/(\D+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(e=o[r[1]]))return}for(i=0;i<e.length;i++)e[i]=c(e[i],0,255);return n=n||0==n?c(n,0,1):1,e[3]=n,e}}function i(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[c(parseInt(e[1]),0,360),c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}}}function a(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[c(parseInt(e[1]),0,360),c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}}}function s(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function l(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function u(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function c(t,e,n){return Math.min(Math.max(e,t),n)}function h(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}e.exports={getRgba:r,getHsla:i,getRgb:function(t){var e=r(t);return e&&e.slice(0,3)},getHsl:function(t){var e=i(t);return e&&e.slice(0,3)},getHwb:a,getAlpha:function(t){var e=r(t);return e?e[3]:(e=i(t))?e[3]:(e=a(t))?e[3]:void 0},hexString:function(t){return"#"+h(t[0])+h(t[1])+h(t[2])},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?s(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:s,percentString:function(t,e){return e<1||t[3]&&t[3]<1?l(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:l,hslString:function(t,e){return e<1||t[3]&&t[3]<1?u(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:u,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return f[t.slice(0,3)]}};var f={};for(var p in o)f[o[p]]=p},{"color-name":4}],6:[function(t,e,n){var u=t("color-convert"),r=t("color-string"),i=function t(e){if(e instanceof t)return e;if(!(this instanceof t))return new t(e);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof e)if(n=r.getRgba(e))this.setValues("rgb",n);else if(n=r.getHsla(e))this.setValues("hsl",n);else{if(!(n=r.getHwb(e)))throw new Error('Unable to parse color from string "'+e+'"');this.setValues("hwb",n)}else if("object"==(void 0===e?"undefined":G(e))){var n;if(void 0!==(n=e).r||void 0!==n.red)this.setValues("rgb",n);else if(void 0!==n.l||void 0!==n.lightness)this.setValues("hsl",n);else if(void 0!==n.v||void 0!==n.value)this.setValues("hsv",n);else if(void 0!==n.w||void 0!==n.whiteness)this.setValues("hwb",n);else{if(void 0===n.c&&void 0===n.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(e));this.setValues("cmyk",n)}}};(i.prototype={rgb:function(t){return this.setSpace("rgb",arguments)},hsl:function(t){return this.setSpace("hsl",arguments)},hsv:function(t){return this.setSpace("hsv",arguments)},hwb:function(t){return this.setSpace("hwb",arguments)},cmyk:function(t){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){return this.values.rgb.concat([this.values.alpha])},hslaArray:function(){return this.values.hsl.concat([this.values.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return r.hexString(this.values.rgb)},rgbString:function(){return r.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return r.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return r.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return r.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return r.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return r.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return r.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return n<e?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return 7.1<=e?"AAA":4.5<=e?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){return this.values.hsl[2]+=this.values.hsl[2]*t,this.setValues("hsl",this.values.hsl),this},darken:function(t){return this.values.hsl[2]-=this.values.hsl[2]*t,this.setValues("hsl",this.values.hsl),this},saturate:function(t){return this.values.hsl[1]+=this.values.hsl[1]*t,this.setValues("hsl",this.values.hsl),this},desaturate:function(t){return this.values.hsl[1]-=this.values.hsl[1]*t,this.setValues("hsl",this.values.hsl),this},whiten:function(t){return this.values.hwb[1]+=this.values.hwb[1]*t,this.setValues("hwb",this.values.hwb),this},blacken:function(t){return this.values.hwb[2]+=this.values.hwb[2]*t,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){return this.setValues("alpha",this.values.alpha-this.values.alpha*t),this},opaquer:function(t){return this.setValues("alpha",this.values.alpha+this.values.alpha*t),this},rotate:function(t){var e=this.values.hsl[0];return e=(e=(e+t)%360)<0?360+e:e,this.values.hsl[0]=e,this.setValues("hsl",this.values.hsl),this},mix:function(t,e){for(var n=2*(e=1-(null==e?.5:e))-1,r=this.alpha()-t.alpha(),i=((n*r==-1?n:(n+r)/(1+n*r))+1)/2,o=1-i,a=this.rgbArray(),s=t.rgbArray(),l=0;l<a.length;l++)a[l]=a[l]*i+s[l]*o;this.setValues("rgb",a);var u=this.alpha()*e+t.alpha()*(1-e);return this.setValues("alpha",u),this},toJSON:function(){return this.rgb()},clone:function(){return new i(this.rgb())}}).getValues=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=this.values[t][n];return 1!=this.values.alpha&&(e.a=this.values.alpha),e},i.prototype.setValues=function(t,e){var n={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},r={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},i=1;if("alpha"==t)i=e;else if(e.length)this.values[t]=e.slice(0,t.length),i=e[t.length];else if(void 0!==e[t.charAt(0)]){for(var o=0;o<t.length;o++)this.values[t][o]=e[t.charAt(o)];i=e.a}else if(void 0!==e[n[t][0]]){var a=n[t];for(o=0;o<t.length;o++)this.values[t][o]=e[a[o]];i=e.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==i?i:this.values.alpha)),"alpha"!=t){for(o=0;o<t.length;o++){var s=Math.max(0,Math.min(r[t][o],this.values[t][o]));this.values[t][o]=Math.round(s)}for(var l in n)for(l!=t&&(this.values[l]=u[t][l](this.values[t])),o=0;o<l.length;o++)s=Math.max(0,Math.min(r[l][o],this.values[l][o])),this.values[l][o]=Math.round(s);return!0}},i.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},i.prototype.setChannel=function(t,e,n){return void 0===n?this.values[t][e]:(this.values[t][e]=n,this.setValues(t,this.values[t]),this)},e.exports=i},{"color-convert":3,"color-string":5}],7:[function(t,e,n){e.exports=t("./lib/geocrunch")},{"./lib/geocrunch":12}],8:[function(t,e,n){var r=t("underscore"),a=t("./constants").EARTHRADIUS,s=t("./units"),i=t("./flipcoords"),o={sqmeters:function(t){return t},sqmiles:function(t){return s.sqMeters.toSqMiles(t)},acres:function(t){return s.sqMeters.toAcres(t)}};e.exports={_internalAreaCalc:function(){this._calcedArea||(this._coords.length<3?this._calcedArea=0:this._calcedArea=function(t){var e,n,r,i,o=0;for(e=0,n=t.length;e<n;e+=1)r=t[e],i=t[(e+1)%t.length],o+=s.degrees.toRadians(i[0]-r[0])*(2+Math.sin(s.degrees.toRadians(r[1]))+Math.sin(s.degrees.toRadians(i[1])));return Math.abs(o*a*a/2)}(this._coords))},_internalCenterCalc:function(){!this._calcedCenter&&this._coords.length&&(this._calcedCenter=function(t){var e,n,r,i,o,a=t[0],s=0,l=0,u=0;if(1===t.length)return t[0];for(e=0,n=t.length;e<n;e+=1)r=t[e],i=t[(e+1)%t.length],s+=o=(r[1]-a[1])*(i[0]-a[0])-(i[1]-a[1])*(r[0]-a[0]),l+=(r[0]+i[0]-2*a[0])*o,u+=(r[1]+i[1]-2*a[1])*o;return[l/(o=3*s)+a[0],u/o+a[1]]}(this._coords))},area:function(t){var e=r.extend({units:"sqmeters"},t);if(this._internalAreaCalc(),r.isFunction(o[e.units]))return o[e.units](this._calcedArea)},center:function(){return this._internalCenterCalc(),!0===this._options.imBackwards?i(this._calcedCenter):this._calcedCenter}}},{"./constants":9,"./flipcoords":11,"./units":14,underscore:15}],9:[function(t,e,n){e.exports={EARTHRADIUS:6371e3}},{}],10:[function(t,e,n){var r=t("underscore"),f=t("./constants").EARTHRADIUS,p=t("./units"),i={meters:function(t){return t},kilometers:function(t){return p.meters.toKilometers(t)},feet:function(t){return p.meters.toFeet(t)},miles:function(t){return p.meters.toMiles(t)}};e.exports={_internalDistanceCalc:function(){var t,e,n,r,i,o,a,s,l,u,c,h=0;if(!this._calcedDistance){for(t=0,e=this._coords.length;t<e;t+=1)0<t&&(h+=(n=this._coords[t-1],r=this._coords[t],i=p.degrees.toRadians(n[0]-r[0]),o=p.degrees.toRadians(n[1]-r[1]),a=p.degrees.toRadians(n[1]),s=p.degrees.toRadians(r[1]),l=Math.sin(i/2),c=(u=Math.sin(o/2))*u+l*l*Math.cos(a)*Math.cos(s),2*f*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))));this._calcedDistance=h}},distance:function(t){var e=r.extend({units:"meters"},t);if(this._internalDistanceCalc(),r.isFunction(i[e.units]))return i[e.units](this._calcedDistance)}}},{"./constants":9,"./units":14,underscore:15}],11:[function(t,e,n){var r=t("underscore");e.exports=function(t){return r.map(t,function(t){return[t[1],t[0]]})}},{underscore:15}],12:[function(t,e,n){var r=t("underscore"),i=t("./path"),o=t("./distance"),a=t("./area");r.extend(i.prototype,o,a),n.path=function(t,e){return new i(t,e)}},{"./area":8,"./distance":10,"./path":13,underscore:15}],13:[function(t,e,n){var r=t("./flipcoords");e.exports=function(t,e){this._options=e||{},t=t||[],this._coords=!0===this._options.imBackwards?r(t):t}},{"./flipcoords":11}],14:[function(t,e,n){n.meters={toFeet:function(t){return 3.28084*t},toKilometers:function(t){return.001*t},toMiles:function(t){return 621371e-9*t}},n.sqMeters={toSqMiles:function(t){return 3.86102e-7*t},toAcres:function(t){return 247105e-9*t}},n.degrees={toRadians:function(t){return t*Math.PI/180}}},{}],15:[function(t,F,j){(function(){var t=this,e=t._,a={},i=Array.prototype,n=Object.prototype,r=Function.prototype,o=i.push,s=i.slice,l=i.concat,f=n.toString,u=n.hasOwnProperty,c=i.forEach,h=i.map,p=i.reduce,d=i.reduceRight,g=i.filter,m=i.every,y=i.some,_=i.indexOf,v=i.lastIndexOf,b=Array.isArray,x=Object.keys,w=r.bind,L=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};void 0!==j?(void 0!==F&&F.exports&&(j=F.exports=L),j._=L):t._=L,L.VERSION="1.5.2";var C=L.each=L.forEach=function(t,e,n){if(null!=t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t)===a)return}else{var o=L.keys(t);for(r=0,i=o.length;r<i;r++)if(e.call(n,t[o[r]],o[r],t)===a)return}};L.map=L.collect=function(t,r,i){var o=[];return null==t?o:h&&t.map===h?t.map(r,i):(C(t,function(t,e,n){o.push(r.call(i,t,e,n))}),o)};var k="Reduce of empty array with no initial value";L.reduce=L.foldl=L.inject=function(t,r,i,o){var a=2<arguments.length;if(null==t&&(t=[]),p&&t.reduce===p)return o&&(r=L.bind(r,o)),a?t.reduce(r,i):t.reduce(r);if(C(t,function(t,e,n){a?i=r.call(o,i,t,e,n):(i=t,a=!0)}),!a)throw new TypeError(k);return i},L.reduceRight=L.foldr=function(r,i,o,a){var s=2<arguments.length;if(null==r&&(r=[]),d&&r.reduceRight===d)return a&&(i=L.bind(i,a)),s?r.reduceRight(i,o):r.reduceRight(i);var l=r.length;if(l!==+l){var u=L.keys(r);l=u.length}if(C(r,function(t,e,n){e=u?u[--l]:--l,s?o=i.call(a,o,r[e],e,n):(o=r[e],s=!0)}),!s)throw new TypeError(k);return o},L.find=L.detect=function(t,r,i){var o;return E(t,function(t,e,n){if(r.call(i,t,e,n))return o=t,!0}),o},L.filter=L.select=function(t,r,i){var o=[];return null==t?o:g&&t.filter===g?t.filter(r,i):(C(t,function(t,e,n){r.call(i,t,e,n)&&o.push(t)}),o)},L.reject=function(t,r,i){return L.filter(t,function(t,e,n){return!r.call(i,t,e,n)},i)},L.every=L.all=function(t,r,i){r||(r=L.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(r,i):(C(t,function(t,e,n){if(!(o=o&&r.call(i,t,e,n)))return a}),!!o)};var E=L.some=L.any=function(t,r,i){r||(r=L.identity);var o=!1;return null==t?o:y&&t.some===y?t.some(r,i):(C(t,function(t,e,n){if(o||(o=r.call(i,t,e,n)))return a}),!!o)};L.contains=L.include=function(t,e){return null!=t&&(_&&t.indexOf===_?-1!=t.indexOf(e):E(t,function(t){return t===e}))},L.invoke=function(t,e){var n=s.call(arguments,2),r=L.isFunction(e);return L.map(t,function(t){return(r?e:t[e]).apply(t,n)})},L.pluck=function(t,e){return L.map(t,function(t){return t[e]})},L.where=function(t,n,e){return L.isEmpty(n)?e?void 0:[]:L[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},L.findWhere=function(t,e){return L.where(t,e,!0)},L.max=function(t,i,o){if(!i&&L.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!i&&L.isEmpty(t))return-1/0;var a={computed:-1/0,value:-1/0};return C(t,function(t,e,n){var r=i?i.call(o,t,e,n):t;r>a.computed&&(a={value:t,computed:r})}),a.value},L.min=function(t,i,o){if(!i&&L.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!i&&L.isEmpty(t))return 1/0;var a={computed:1/0,value:1/0};return C(t,function(t,e,n){var r=i?i.call(o,t,e,n):t;r<a.computed&&(a={value:t,computed:r})}),a.value},L.shuffle=function(t){var e,n=0,r=[];return C(t,function(t){e=L.random(n++),r[n-1]=r[e],r[e]=t}),r},L.sample=function(t,e,n){return arguments.length<2||n?t[L.random(t.length-1)]:L.shuffle(t).slice(0,Math.max(0,e))};var S=function(e){return L.isFunction(e)?e:function(t){return t[e]}};L.sortBy=function(t,e,r){var i=S(e);return L.pluck(L.map(t,function(t,e,n){return{value:t,index:e,criteria:i.call(r,t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var M=function(s){return function(r,t,i){var o={},a=null==t?L.identity:S(t);return C(r,function(t,e){var n=a.call(i,t,e,r);s(o,n,t)}),o}};L.groupBy=M(function(t,e,n){(L.has(t,e)?t[e]:t[e]=[]).push(n)}),L.indexBy=M(function(t,e,n){t[e]=n}),L.countBy=M(function(t,e){L.has(t,e)?t[e]++:t[e]=1}),L.sortedIndex=function(t,e,n,r){for(var i=(n=null==n?L.identity:S(n)).call(r,e),o=0,a=t.length;o<a;){var s=o+a>>>1;n.call(r,t[s])<i?o=s+1:a=s}return o},L.toArray=function(t){return t?L.isArray(t)?s.call(t):t.length===+t.length?L.map(t,L.identity):L.values(t):[]},L.size=function(t){return null==t?0:t.length===+t.length?t.length:L.keys(t).length},L.first=L.head=L.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:s.call(t,0,e)},L.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},L.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},L.rest=L.tail=L.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},L.compact=function(t){return L.filter(t,L.identity)};L.flatten=function(t,e){return function e(t,n,r){return n&&L.every(t,L.isArray)?l.apply(r,t):(C(t,function(t){L.isArray(t)||L.isArguments(t)?n?o.apply(r,t):e(t,n,r):r.push(t)}),r)}(t,e,[])},L.without=function(t){return L.difference(t,s.call(arguments,1))},L.uniq=L.unique=function(n,r,t,e){L.isFunction(r)&&(e=t,t=r,r=!1);var i=t?L.map(n,t,e):n,o=[],a=[];return C(i,function(t,e){(r?e&&a[a.length-1]===t:L.contains(a,t))||(a.push(t),o.push(n[e]))}),o},L.union=function(){return L.uniq(L.flatten(arguments,!0))},L.intersection=function(t){var n=s.call(arguments,1);return L.filter(L.uniq(t),function(e){return L.every(n,function(t){return 0<=L.indexOf(t,e)})})},L.difference=function(t){var e=l.apply(i,s.call(arguments,1));return L.filter(t,function(t){return!L.contains(e,t)})},L.zip=function(){for(var t=L.max(L.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=L.pluck(arguments,""+n);return e},L.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},L.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return t[r=L.sortedIndex(t,e)]===e?r:-1;r=n<0?Math.max(0,i+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;r<i;r++)if(t[r]===e)return r;return-1},L.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(v&&t.lastIndexOf===v)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},L.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);i<r;)o[i++]=t,t+=n;return o};var P=function(){};L.bind=function(n,r){var i,o;if(w&&n.bind===w)return w.apply(n,s.call(arguments,1));if(!L.isFunction(n))throw new TypeError;return i=s.call(arguments,2),o=function(){if(!(this instanceof o))return n.apply(r,i.concat(s.call(arguments)));P.prototype=n.prototype;var t=new P;P.prototype=null;var e=n.apply(t,i.concat(s.call(arguments)));return Object(e)===e?e:t}},L.partial=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},L.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=L.bind(e[t],e)}),e},L.memoize=function(e,n){var r={};return n||(n=L.identity),function(){var t=n.apply(this,arguments);return L.has(r,t)?r[t]:r[t]=e.apply(this,arguments)}},L.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},L.defer=function(t){return L.delay.apply(L,[t,1].concat(s.call(arguments,1)))},L.throttle=function(n,r,i){var o,a,s,l=null,u=0;i||(i={});var c=function(){u=!1===i.leading?0:new Date,l=null,s=n.apply(o,a)};return function(){var t=new Date;u||!1!==i.leading||(u=t);var e=r-(t-u);return o=this,a=arguments,e<=0?(clearTimeout(l),l=null,u=t,s=n.apply(o,a)):l||!1===i.trailing||(l=setTimeout(c,e)),s}},L.debounce=function(n,r,i){var o,a,s,l,u;return function(){s=this,a=arguments,l=new Date;var t=i&&!o;return o||(o=setTimeout(function t(){var e=new Date-l;e<r?o=setTimeout(t,r-e):(o=null,i||(u=n.apply(s,a)))},r)),t&&(u=n.apply(s,a)),u}},L.once=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}},L.wrap=function(e,n){return function(){var t=[e];return o.apply(t,arguments),n.apply(this,t)}},L.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length-1;0<=e;e--)t=[n[e].apply(this,t)];return t[0]}},L.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},L.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)L.has(t,n)&&e.push(n);return e},L.values=function(t){for(var e=L.keys(t),n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},L.pairs=function(t){for(var e=L.keys(t),n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},L.invert=function(t){for(var e={},n=L.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},L.functions=L.methods=function(t){var e=[];for(var n in t)L.isFunction(t[n])&&e.push(n);return e.sort()},L.extend=function(n){return C(s.call(arguments,1),function(t){if(t)for(var e in t)n[e]=t[e]}),n},L.pick=function(e){var n={},t=l.apply(i,s.call(arguments,1));return C(t,function(t){t in e&&(n[t]=e[t])}),n},L.omit=function(t){var e={},n=l.apply(i,s.call(arguments,1));for(var r in t)L.contains(n,r)||(e[r]=t[r]);return e},L.defaults=function(n){return C(s.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n},L.clone=function(t){return L.isObject(t)?L.isArray(t)?t.slice():L.extend({},t):t},L.tap=function(t,e){return e(t),t};L.isEqual=function(t,e){return function t(e,n,r,i){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;e instanceof L&&(e=e._wrapped),n instanceof L&&(n=n._wrapped);var o=f.call(e);if(o!=f.call(n))return!1;switch(o){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if("object"!=(void 0===e?"undefined":G(e))||"object"!=(void 0===n?"undefined":G(n)))return!1;for(var a=r.length;a--;)if(r[a]==e)return i[a]==n;var s=e.constructor,l=n.constructor;if(s!==l&&!(L.isFunction(s)&&s instanceof s&&L.isFunction(l)&&l instanceof l))return!1;r.push(e),i.push(n);var u=0,c=!0;if("[object Array]"==o){if(c=(u=e.length)==n.length)for(;u--&&(c=t(e[u],n[u],r,i)););}else{for(var h in e)if(L.has(e,h)&&(u++,!(c=L.has(n,h)&&t(e[h],n[h],r,i))))break;if(c){for(h in n)if(L.has(n,h)&&!u--)break;c=!u}}return r.pop(),i.pop(),c}(t,e,[],[])},L.isEmpty=function(t){if(null==t)return!0;if(L.isArray(t)||L.isString(t))return 0===t.length;for(var e in t)if(L.has(t,e))return!1;return!0},L.isElement=function(t){return!(!t||1!==t.nodeType)},L.isArray=b||function(t){return"[object Array]"==f.call(t)},L.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){L["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),L.isArguments(arguments)||(L.isArguments=function(t){return!(!t||!L.has(t,"callee"))}),"function"!=typeof/./&&(L.isFunction=function(t){return"function"==typeof t}),L.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},L.isNaN=function(t){return L.isNumber(t)&&t!=+t},L.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==f.call(t)},L.isNull=function(t){return null===t},L.isUndefined=function(t){return void 0===t},L.has=function(t,e){return u.call(t,e)},L.noConflict=function(){return t._=e,this},L.identity=function(t){return t},L.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;i<t;i++)r[i]=e.call(n,i);return r},L.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=L.invert(I.escape);var T={escape:new RegExp("["+L.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+L.keys(I.unescape).join("|")+")","g")};L.each(["escape","unescape"],function(e){L[e]=function(t){return null==t?"":(""+t).replace(T[e],function(t){return I[e][t]})}}),L.result=function(t,e){if(null!=t){var n=t[e];return L.isFunction(n)?n.call(t):n}},L.mixin=function(n){C(L.functions(n),function(t){var e=L[t]=n[t];L.prototype[t]=function(){var t=[this._wrapped];return o.apply(t,arguments),R.call(this,e.apply(L,t))}})};var O=0;L.uniqueId=function(t){var e=++O+"";return t?t+e:e},L.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\t|\u2028|\u2029/g;L.template=function(o,t,e){var n;e=L.defaults({},e,L.templateSettings);var r=new RegExp([(e.escape||N).source,(e.interpolate||N).source,(e.evaluate||N).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(r,function(t,e,n,r,i){return s+=o.slice(a,i).replace(A,function(t){return"\\"+D[t]}),e&&(s+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=i+t.length,t}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}if(t)return n(t,L);var i=function(t){return n.call(this,t,L)};return i.source="function("+(e.variable||"obj")+"){\n"+s+"}",i},L.chain=function(t){return L(t).chain()};var R=function(t){return this._chain?L(t).chain():t};L.mixin(L),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=i[e];L.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!=e&&"splice"!=e||0!==t.length||delete t[0],R.call(this,t)}}),C(["concat","join","slice"],function(t){var e=i[t];L.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),L.extend(L.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],16:[function(t,n,r){(function(){var t=this,e=t.humanize,h={};void 0!==r?(void 0!==n&&n.exports&&(r=n.exports=h),r.humanize=h):("function"==typeof define&&define.amd&&define("humanize",function(){return h}),t.humanize=h),h.noConflict=function(){return t.humanize=e,this},h.pad=function(t,e,n,r){if(t+="",n?1<n.length&&(n=n.charAt(0)):n=" ","right"==(r=void 0===r?"left":"right"))for(;t.length<e;)t+=n;else for(;t.length<e;)t=n+t;return t},h.time=function(){return(new Date).getTime()/1e3};var l=[0,0,31,59,90,120,151,181,212,243,273,304,334],u=[0,0,31,60,91,121,152,182,213,244,274,305,335];h.date=function(t,e){var r=void 0===e?new Date:e instanceof Date?new Date(e):new Date(1e3*e),n=/\\?([a-z])/gi,i=function(t,e){return s[t]?s[t]():e},o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],s={d:function(){return h.pad(s.j(),2,"0")},D:function(){return s.l().slice(0,3)},j:function(){return r.getDate()},l:function(){return o[s.w()]},N:function(){return s.w()||7},S:function(){var t=s.j();return 4<t&&t<21?"th":{1:"st",2:"nd",3:"rd"}[t%10]||"th"},w:function(){return r.getDay()},z:function(){return(s.L()?u[s.n()]:l[s.n()])+s.j()-1},W:function(){var t=s.z()-s.N()+1.5;return h.pad(1+Math.floor(Math.abs(t)/7)+(3.5<t%7?1:0),2,"0")},F:function(){return a[r.getMonth()]},m:function(){return h.pad(s.n(),2,"0")},M:function(){return s.F().slice(0,3)},n:function(){return r.getMonth()+1},t:function(){return new Date(s.Y(),s.n(),0).getDate()},L:function(){return 1===new Date(s.Y(),1,29).getMonth()?1:0},o:function(){var t=s.n(),e=s.W();return s.Y()+(12===t&&e<9?-1:1===t&&9<e)},Y:function(){return r.getFullYear()},y:function(){return String(s.Y()).slice(-2)},a:function(){return 11<r.getHours()?"pm":"am"},A:function(){return s.a().toUpperCase()},B:function(){var t=r.getTime()/1e3,e=t%86400+3600;e<0&&(e+=86400);var n=e/86.4%1e3;return t<0?Math.ceil(n):Math.floor(n)},g:function(){return s.G()%12||12},G:function(){return r.getHours()},h:function(){return h.pad(s.g(),2,"0")},H:function(){return h.pad(s.G(),2,"0")},i:function(){return h.pad(r.getMinutes(),2,"0")},s:function(){return h.pad(r.getSeconds(),2,"0")},u:function(){return h.pad(1e3*r.getMilliseconds(),6,"0")},O:function(){var t=r.getTimezoneOffset(),e=Math.abs(t);return(0<t?"-":"+")+h.pad(100*Math.floor(e/60)+e%60,4,"0")},P:function(){var t=s.O();return t.substr(0,3)+":"+t.substr(3,2)},Z:function(){return 60*-r.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(n,i)},r:function(){return"D, d M Y H:i:s O".replace(n,i)},U:function(){return r.getTime()/1e3||0}};return t.replace(n,i)},h.numberFormat=function(t,e,n,r){e=isNaN(e)?2:Math.abs(e),n=void 0===n?".":n,r=void 0===r?",":r;var i=t<0?"-":"";t=Math.abs(+t||0);var o=parseInt(t.toFixed(e),10)+"",a=3<o.length?o.length%3:0;return i+(a?o.substr(0,a)+r:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(e?n+Math.abs(t-o).toFixed(e).slice(2):"")},h.naturalDay=function(t,e){t=void 0===t?h.time():t,e=void 0===e?"Y-m-d":e;var n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()/1e3;return t<r&&r-86400<=t?"yesterday":r<=t&&t<r+86400?"today":r+86400<=t&&t<r+172800?"tomorrow":h.date(e,t)},h.relativeTime=function(t){t=void 0===t?h.time():t;var e=h.time(),n=e-t;if(n<2&&-2<n)return(0<=n?"just ":"")+"now";if(n<60&&-60<n)return 0<=n?Math.floor(n)+" seconds ago":"in "+Math.floor(-n)+" seconds";if(n<120&&-120<n)return 0<=n?"about a minute ago":"in about a minute";if(n<3600&&-3600<n)return 0<=n?Math.floor(n/60)+" minutes ago":"in "+Math.floor(-n/60)+" minutes";if(n<7200&&-7200<n)return 0<=n?"about an hour ago":"in about an hour";if(n<86400&&-86400<n)return 0<=n?Math.floor(n/3600)+" hours ago":"in "+Math.floor(-n/3600)+" hours";if(n<172800&&-172800<n)return 0<=n?"1 day ago":"in 1 day";if(n<2505600&&-2505600<n)return 0<=n?Math.floor(n/86400)+" days ago":"in "+Math.floor(-n/86400)+" days";if(n<5184e3&&-5184e3<n)return 0<=n?"about a month ago":"in about a month";var r=parseInt(h.date("Y",e),10),i=parseInt(h.date("Y",t),10),o=12*r+parseInt(h.date("n",e),10)-(12*i+parseInt(h.date("n",t),10));if(o<12&&-12<o)return 0<=o?o+" months ago":"in "+-o+" months";var a=r-i;return a<2&&-2<a?0<=a?"a year ago":"in a year":0<=a?a+" years ago":"in "+-a+" years"},h.ordinal=function(t){t=parseInt(t,10);var e=(t=isNaN(t)?0:t)<0?"-":"",n=(t=Math.abs(t))%100;return e+t+(4<n&&n<21?"th":{1:"st",2:"nd",3:"rd"}[t%10]||"th")},h.filesize=function(t,e,n,r,i,o){return t<=0?"0 bytes":(t<(e=void 0===e?1024:e)&&void 0===n&&(n=0),void 0===o&&(o=" "),h.intword(t,["bytes","KB","MB","GB","TB","PB"],e,n,r,i,o))},h.intword=function(t,e,n,r,i,o,a){var s,l;l=(e=e||["","K","M","B","T"]).length-1,n=n||1e3,r=isNaN(r)?2:Math.abs(r),i=i||".",o=o||",",a=a||"";for(var u=0;u<e.length;u++)if(t<Math.pow(n,u+1)){l=u;break}s=t/Math.pow(n,l);var c=e[l]?a+e[l]:"";return h.numberFormat(s,r,i,o)+c},h.linebreaks=function(t){return"<p>"+(t=(t=(t=(t=(t=t.replace(/^([\n|\r]*)/,"")).replace(/([\n|\r]*)$/,"")).replace(/(\r\n|\n|\r)/g,"\n")).replace(/(\n{2,})/g,"</p><p>")).replace(/\n/g,"<br />"))+"</p>"},h.nl2br=function(t){return t.replace(/(\r\n|\n|\r)/g,"<br />")},h.truncatechars=function(t,e){return t.length<=e?t:t.substr(0,e)+"…"},h.truncatewords=function(t,e){var n=t.split(" ");return n.length<e?t:n.slice(0,e).join(" ")+"…"}}).call(this)},{}],17:[function(t,n,e){(function(r){var l=t("sprintf").vsprintf,s=t("fs"),e=t("path");function i(t,e,n){return t.hasOwnProperty(e)?t[e]:"string"==typeof e?i(t,e.split("."),n):1===e.length&&void 0!==n?t[e[0]]=n:0===e.length?t:t.hasOwnProperty(e[0])?i(t[e[0]],e.slice(1),n):t[e.join(".")]=e.join(".")}var u=n.exports=function(t){var e=this;for(var n in this.devMode="production"!==r.env.NODE_ENV,t)this[n]=t[n];"object"==G(this.register)&&u.resMethods.forEach(function(t){e.register[t]=e[t].bind(e)}),t.locales&&t.locales.forEach&&(this.locales={},t.locales.forEach(function(t){e.readFile(t)}),this.defaultLocale=t.locales[0]),this.setLocale(this.defaultLocale),this.locales[this.defaultLocale]||console.error("Not a valid default locale."),this.request&&(this.subdomain&&this.setLocaleFromSubdomain(this.request),!1!==this.query&&this.setLocaleFromQuery(this.request),!1!==this.session&&this.setLocaleFromSessionVar(this.request),this.prefLocale=this.preferredLocale(),!1!==this.prefLocale&&this.prefLocale!==this.locale&&this.setLocale(this.prefLocale))};u.version="0.4.7",u.localeCache={},u.resMethods=["__","__n","getLocale","isPreferredLocale"],u.expressBind=function(t,r){t&&(t.use(function(t,e,n){(r.request=t).i18n=new u(r),e.locals&&u.registerMethods(e.locals,t),n()}),t.dynamicHelpers&&t.dynamicHelpers(u.registerMethods({})))},u.registerMethods=function(t,n){return u.resMethods.forEach(function(e){t[e]=n?n.i18n[e].bind(n.i18n):function(t){return t.i18n[e].bind(t.i18n)}}),t},u.prototype={defaultLocale:"en",extension:".js",directory:"./locales",cookieName:"lang",sessionVarName:"locale",indent:"\t",parse:JSON.parse,dump:function(t,e){return JSON.stringify(t,null,e)},__:function(){var t=this.translate(this.locale,arguments[0]);return 1<arguments.length&&(t=l(t,Array.prototype.slice.call(arguments,1))),t},__n:function(t,e,n){var r;if("number"==typeof e){var i=t,o=e;r=this.translate(this.locale,i),r=l(1<parseInt(o,10)?r.other:r.one,Array.prototype.slice.call(arguments,1))}else{var a=t,s=e;o=n,r=this.translate(this.locale,a,s),r=l(1<parseInt(o,10)?r.other:r.one,[o]),3<arguments.length&&(r=l(r,Array.prototype.slice.call(arguments,3)))}return r},setLocale:function(t){if(t)return this.locales[t]||(this.devMode&&console.warn("Locale ("+t+") not found."),t=this.defaultLocale),this.locale=t},getLocale:function(){return this.locale},isPreferredLocale:function(){return!this.prefLocale||this.prefLocale===this.getLocale()},setLocaleFromSessionVar:function(t){if((t=t||this.request)&&t.session&&t.session[this.sessionVarName]){var e=t.session[this.sessionVarName];this.locales[e]&&(this.devMode&&console.log("Overriding locale from query: "+e),this.setLocale(e))}},setLocaleFromQuery:function(t){if((t=t||this.request)&&t.query&&t.query.lang){var e=(t.query.lang+"").toLowerCase();this.locales[e]&&(this.devMode&&console.log("Overriding locale from query: "+e),this.setLocale(e))}},setLocaleFromSubdomain:function(t){(t=t||this.request)&&t.headers&&t.headers.host&&/^([^.]+)/.test(t.headers.host)&&this.locales[RegExp.$1]&&(this.devMode&&console.log("Overriding locale from host: "+RegExp.$1),this.setLocale(RegExp.$1))},setLocaleFromCookie:function(t){if((t=t||this.request)&&t.cookies&&this.cookieName&&t.cookies[this.cookieName]){var e=t.cookies[this.cookieName].toLowerCase();this.locales[e]&&(this.devMode&&console.log("Overriding locale from cookie: "+e),this.setLocale(e))}},setLocaleFromEnvironmentVariable:function(){if(r.env.LANG){var t=r.env.LANG.split("_")[0];this.locales[t]&&(this.devMode&&console.log("Overriding locale from environment variable: "+t),this.setLocale(t))}},preferredLocale:function(t){if((t=t||this.request)&&t.headers){for(var e,n=t.headers["accept-language"]||"",r=/(^|,\s*)([a-z0-9-]+)/gi;!e&&(match=r.exec(n));){var i=match[2].toLowerCase(),o=i.split("-");this.locales[i]?e=i:1<o.length&&this.locales[o[0]]&&(e=o[0])}return e||this.defaultLocale}},translate:function(t,e,n){return t&&this.locales[t]||(this.devMode&&console.warn("WARN: No locale found. Using the default ("+this.defaultLocale+") as current locale"),t=this.defaultLocale,this.initLocale(t,{})),this.locales[t][e]||this.devMode&&(i(this.locales[t],e,n?{one:e,other:n}:void 0),this.writeFile(t)),i(this.locales[t],e,n?{one:e,other:n}:void 0)},readFile:function(t){var e=this.locateFile(t);if(this.devMode||!u.localeCache[e])try{var n,r=s.readFileSync(e);if("function"==typeof this.base){var i;try{i=this.base(t)}catch(n){console.error("base function threw exception for locale %s",t,n)}if("string"==typeof i)try{n=this.parse(s.readFileSync(this.locateFile(i)))}catch(n){console.error("unable to read or parse base file %s for locale %s",i,t,n)}}try{var o=this.parse(r);if(n){for(var a in o)n[a]=o[a];o=n}this.initLocale(t,o)}catch(n){console.error("unable to parse locales from file (maybe "+e+" is empty or invalid "+this.extension+"?): ",n)}}catch(n){s.existsSync(e)||this.writeFile(t)}else this.initLocale(t,u.localeCache[e])},writeFile:function(t){if(this.devMode){try{s.lstatSync(this.directory)}catch(t){this.devMode&&console.log("creating locales dir in: "+this.directory),s.mkdirSync(this.directory,"0755")}this.initLocale(t,{});try{var e=this.locateFile(t),n=e+".tmp";s.writeFileSync(n,this.dump(this.locales[t],this.indent),"utf8"),s.statSync(n).isFile()?s.renameSync(n,e):console.error("unable to write locales to file (either "+n+" or "+e+" are not writeable?): ")}catch(t){console.error("unexpected error writing files (either "+n+" or "+e+" are not writeable?): ",t)}}else this.initLocale(t,{})},locateFile:function(t){return e.normalize(this.directory+"/"+t+this.extension)},initLocale:function(t,e){if(!this.locales[t]&&(this.locales[t]=e,!this.devMode)){var n=this.locateFile(t);u.localeCache[n]||(u.localeCache[n]=e)}}}}).call(this,t("_process"))},{_process:20,fs:1,path:19,sprintf:21}],18:[function(t,e,n){e.exports=t("./i18n")},{"./i18n":17}],19:[function(t,e,u){(function(i){function o(t,e){for(var n=0,r=t.length-1;0<=r;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return e.exec(t).slice(1)};function s(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}u.resolve=function(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){var r=0<=n?arguments[n]:i.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},u.normalize=function(t){var e=u.isAbsolute(t),n="/"===r(t,-1);return(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},u.isAbsolute=function(t){return"/"===t.charAt(0)},u.join=function(){var t=Array.prototype.slice.call(arguments,0);return u.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},u.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<e?[]:t.slice(e,n-e+1)}t=u.resolve(t).substr(1),e=u.resolve(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var l=[];for(s=a;s<r.length;s++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(t){var e=a(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(t,e){var n=a(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},u.extname=function(t){return a(t)[3]};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:20}],20:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],h=!1,f=-1;function p(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=l(p);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new g(t,e)),1!==c.length||h||l(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],21:[function(t,e,n){var m=function(){function p(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function d(t,e){for(var n=[];0<e;n[--e]=t);return n.join("")}var g=function t(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};return g.object_stringify=function(t,e,n,r){var i="";if(null!=t)switch(void 0===t?"undefined":G(t)){case"function":return"[Function"+(t.name?": "+t.name:"")+"]";case"object":if(t instanceof Error)return"["+t.toString()+"]";if(n<=e)return"[Object]";if(r&&(r=r.slice(0)).push(t),null!=t.length){i+="[";var o=[];for(var a in t)r&&0<=r.indexOf(t[a])?o.push("[Circular]"):o.push(g.object_stringify(t[a],e+1,n,r));i+=o.join(", ")+"]"}else{if("getMonth"in t)return"Date("+t+")";for(var s in i+="{",o=[],t)t.hasOwnProperty(s)&&(r&&0<=r.indexOf(t[s])?o.push(s+": [Circular]"):o.push(s+": "+g.object_stringify(t[s],e+1,n,r)));i+=o.join(", ")+"}"}return i;case"string":return'"'+t+'"'}return""+t},g.format=function(t,e){var n,r,i,o,a,s,l,u=1,c=t.length,h="",f=[];for(r=0;r<c;r++)if("string"===(h=p(t[r])))f.push(t[r]);else if("array"===h){if((o=t[r])[2])for(n=e[u],i=0;i<o[2].length;i++){if(!n.hasOwnProperty(o[2][i]))throw new Error(m('[sprintf] property "%s" does not exist',o[2][i]));n=n[o[2][i]]}else n=o[1]?e[o[1]]:e[u++];if(/[^sO]/.test(o[8])&&"number"!=p(n))throw new Error(m('[sprintf] expecting number but found %s "'+n+'"',p(n)));switch(o[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n,10);break;case"e":n=o[7]?n.toExponential(o[7]):n.toExponential();break;case"f":n=o[7]?parseFloat(n).toFixed(o[7]):parseFloat(n);break;case"O":n=g.object_stringify(n,0,parseInt(o[7])||5);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&o[7]?n.substring(0,o[7]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(o[8])&&o[3]&&0<=n?"+"+n:n,s=o[4]?"0"==o[4]?"0":o[4].charAt(1):" ",l=o[6]-String(n).length,a=o[6]?d(s,l):"",f.push(o[5]?n+a:a+n)}return f.join("")},g.cache={},g.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(e)))throw new Error("[sprintf] "+e);if(n[2]){i|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[sprintf] "+a);for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("[sprintf] "+a);o.push(s[1])}n[2]=o}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}e=e.substring(n[0].length)}return r},g}();((e.exports=m).sprintf=m).vsprintf=function(t,e){var n=e.slice();return n.unshift(t),m.apply(null,n)}},{}],22:[function(t,q,U){(function(){var t=this,e=t._,r=Array.prototype,a=Object.prototype,n=Function.prototype,i=r.push,l=r.slice,f=a.toString,o=a.hasOwnProperty,s=Array.isArray,u=Object.keys,c=n.bind,h=Object.create,p=function(){},d=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};void 0!==U?(void 0!==q&&q.exports&&(U=q.exports=d),U._=d):t._=d,d.VERSION="1.8.3";var g=function(i,o,t){if(void 0===o)return i;switch(null==t?3:t){case 1:return function(t){return i.call(o,t)};case 2:return function(t,e){return i.call(o,t,e)};case 3:return function(t,e,n){return i.call(o,t,e,n)};case 4:return function(t,e,n,r){return i.call(o,t,e,n,r)}}return function(){return i.apply(o,arguments)}},m=function(t,e,n){return null==t?d.identity:d.isFunction(t)?g(t,e,n):d.isObject(t)?d.matcher(t):d.property(t)};d.iteratee=function(t,e){return m(t,e,1/0)};var y=function(l,u){return function(t){var e=arguments.length;if(e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],i=l(r),o=i.length,a=0;a<o;a++){var s=i[a];u&&void 0!==t[s]||(t[s]=r[s])}return t}},_=function(t){if(!d.isObject(t))return{};if(h)return h(t);p.prototype=t;var e=new p;return p.prototype=null,e},v=function(e){return function(t){return null==t?void 0:t[e]}},b=Math.pow(2,53)-1,x=v("length"),w=function(t){var e=x(t);return"number"==typeof e&&0<=e&&e<=b};function L(s){return function(t,e,n,r){e=g(e,r,4);var i=!w(t)&&d.keys(t),o=(i||t).length,a=0<s?0:o-1;return arguments.length<3&&(n=t[i?i[a]:a],a+=s),function(t,e,n,r,i,o){for(;0<=i&&i<o;i+=s){var a=r?r[i]:i;n=e(n,t[a],a,t)}return n}(t,e,n,i,a,o)}}d.each=d.forEach=function(t,e,n){var r,i;if(e=g(e,n),w(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=d.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},d.map=d.collect=function(t,e,n){e=m(e,n);for(var r=!w(t)&&d.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},d.reduce=d.foldl=d.inject=L(1),d.reduceRight=d.foldr=L(-1),d.find=d.detect=function(t,e,n){var r;if(void 0!==(r=w(t)?d.findIndex(t,e,n):d.findKey(t,e,n))&&-1!==r)return t[r]},d.filter=d.select=function(t,r,e){var i=[];return r=m(r,e),d.each(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i},d.reject=function(t,e,n){return d.filter(t,d.negate(m(e)),n)},d.every=d.all=function(t,e,n){e=m(e,n);for(var r=!w(t)&&d.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},d.some=d.any=function(t,e,n){e=m(e,n);for(var r=!w(t)&&d.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n,r){return w(t)||(t=d.values(t)),("number"!=typeof n||r)&&(n=0),0<=d.indexOf(t,e,n)},d.invoke=function(t,n){var r=l.call(arguments,2),i=d.isFunction(n);return d.map(t,function(t){var e=i?n:t[n];return null==e?e:e.apply(t,r)})},d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,r,e){var n,i,o=-1/0,a=-1/0;if(null==r&&null!=t)for(var s=0,l=(t=w(t)?t:d.values(t)).length;s<l;s++)n=t[s],o<n&&(o=n);else r=m(r,e),d.each(t,function(t,e,n){i=r(t,e,n),(a<i||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},d.min=function(t,r,e){var n,i,o=1/0,a=1/0;if(null==r&&null!=t)for(var s=0,l=(t=w(t)?t:d.values(t)).length;s<l;s++)(n=t[s])<o&&(o=n);else r=m(r,e),d.each(t,function(t,e,n){((i=r(t,e,n))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},d.shuffle=function(t){for(var e,n=w(t)?t:d.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=d.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},d.sample=function(t,e,n){return null==e||n?(w(t)||(t=d.values(t)),t[d.random(t.length-1)]):d.shuffle(t).slice(0,Math.max(0,e))},d.sortBy=function(t,r,e){return r=m(r,e),d.pluck(d.map(t,function(t,e,n){return{value:t,index:e,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var C=function(a){return function(r,i,t){var o={};return i=m(i,t),d.each(r,function(t,e){var n=i(t,e,r);a(o,t,n)}),o}};d.groupBy=C(function(t,e,n){d.has(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=C(function(t,e,n){t[n]=e}),d.countBy=C(function(t,e,n){d.has(t,n)?t[n]++:t[n]=1}),d.toArray=function(t){return t?d.isArray(t)?l.call(t):w(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:w(t)?t.length:d.keys(t).length},d.partition=function(t,r,e){r=m(r,e);var i=[],o=[];return d.each(t,function(t,e,n){(r(t,e,n)?i:o).push(t)}),[i,o]},d.first=d.head=d.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var k=function t(e,n,r,i){for(var o=[],a=0,s=i||0,l=x(e);s<l;s++){var u=e[s];if(w(u)&&(d.isArray(u)||d.isArguments(u))){n||(u=t(u,n,r));var c=0,h=u.length;for(o.length+=h;c<h;)o[a++]=u[c++]}else r||(o[a++]=u)}return o};function E(o){return function(t,e,n){e=m(e,n);for(var r=x(t),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(e(t[i],i,t))return i;return-1}}function S(o,a,s){return function(t,e,n){var r=0,i=x(t);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(s&&n&&i)return t[n=s(t,e)]===e?n:-1;if(e!=e)return 0<=(n=a(l.call(t,r,i),d.isNaN))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(t[n]===e)return n;return-1}}d.flatten=function(t,e){return k(t,e,!1)},d.without=function(t){return d.difference(t,l.call(arguments,1))},d.uniq=d.unique=function(t,e,n,r){d.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=m(n,r));for(var i=[],o=[],a=0,s=x(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||i.push(l),o=u):n?d.contains(o,u)||(o.push(u),i.push(l)):d.contains(i,l)||i.push(l)}return i},d.union=function(){return d.uniq(k(arguments,!0,!0))},d.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=x(t);r<i;r++){var o=t[r];if(!d.contains(e,o)){for(var a=1;a<n&&d.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},d.difference=function(t){var e=k(arguments,!0,!0,1);return d.filter(t,function(t){return!d.contains(e,t)})},d.zip=function(){return d.unzip(arguments)},d.unzip=function(t){for(var e=t&&d.max(t,x).length||0,n=Array(e),r=0;r<e;r++)n[r]=d.pluck(t,r);return n},d.object=function(t,e){for(var n={},r=0,i=x(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},d.findIndex=E(1),d.findLastIndex=E(-1),d.sortedIndex=function(t,e,n,r){for(var i=(n=m(n,r,1))(e),o=0,a=x(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},d.indexOf=S(1,d.findIndex,d.sortedIndex),d.lastIndexOf=S(-1,d.findLastIndex),d.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var M=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=_(t.prototype),a=t.apply(o,i);return d.isObject(a)?a:o};d.bind=function(e,n){if(c&&e.bind===c)return c.apply(e,l.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2);return function t(){return M(e,t,n,this,r.concat(l.call(arguments)))}},d.partial=function(o){var a=l.call(arguments,1);return function t(){for(var e=0,n=a.length,r=Array(n),i=0;i<n;i++)r[i]=a[i]===d?arguments[e++]:a[i];for(;e<arguments.length;)r.push(arguments[e++]);return M(o,t,this,this,r)}},d.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=d.bind(t[n],t);return t},d.memoize=function(i,o){var t=function t(e){var n=t.cache,r=""+(o?o.apply(this,arguments):e);return d.has(n,r)||(n[r]=i.apply(this,arguments)),n[r]};return t.cache={},t},d.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},d.defer=d.partial(d.delay,d,1),d.throttle=function(n,r,i){var o,a,s,l=null,u=0;i||(i={});var c=function(){u=!1===i.leading?0:d.now(),l=null,s=n.apply(o,a),l||(o=a=null)};return function(){var t=d.now();u||!1!==i.leading||(u=t);var e=r-(t-u);return o=this,a=arguments,e<=0||r<e?(l&&(clearTimeout(l),l=null),u=t,s=n.apply(o,a),l||(o=a=null)):l||!1===i.trailing||(l=setTimeout(c,e)),s}},d.debounce=function(n,r,i){var o,a,s,l,u,e=function t(){var e=d.now()-l;e<r&&0<=e?o=setTimeout(t,r-e):(o=null,i||(u=n.apply(s,a),o||(s=a=null)))};return function(){s=this,a=arguments,l=d.now();var t=i&&!o;return o||(o=setTimeout(e,r)),t&&(u=n.apply(s,a),s=a=null),u}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function T(t,e){var n=I.length,r=t.constructor,i=d.isFunction(r)&&r.prototype||a,o="constructor";for(d.has(t,o)&&!d.contains(e,o)&&e.push(o);n--;)(o=I[n])in t&&t[o]!==i[o]&&!d.contains(e,o)&&e.push(o)}d.keys=function(t){if(!d.isObject(t))return[];if(u)return u(t);var e=[];for(var n in t)d.has(t,n)&&e.push(n);return P&&T(t,e),e},d.allKeys=function(t){if(!d.isObject(t))return[];var e=[];for(var n in t)e.push(n);return P&&T(t,e),e},d.values=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},d.mapObject=function(t,e,n){e=m(e,n);for(var r,i=d.keys(t),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=e(t[r],r,t);return a},d.pairs=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},d.invert=function(t){for(var e={},n=d.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()},d.extend=y(d.allKeys),d.extendOwn=d.assign=y(d.keys),d.findKey=function(t,e,n){e=m(e,n);for(var r,i=d.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r},d.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;d.isFunction(e)?(i=d.allKeys(a),r=g(e,n)):(i=k(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var u=i[s],c=a[u];r(c,u,a)&&(o[u]=c)}return o},d.omit=function(t,e,n){if(d.isFunction(e))e=d.negate(e);else{var r=d.map(k(arguments,!1,!1,1),String);e=function(t,e){return!d.contains(r,e)}}return d.pick(t,e,n)},d.defaults=y(d.allKeys,!0),d.create=function(t,e){var n=_(t);return e&&d.extendOwn(n,e),n},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};d.isEqual=function(t,e){return function t(e,n,r,i){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;e instanceof d&&(e=e._wrapped),n instanceof d&&(n=n._wrapped);var o=f.call(e);if(o!==f.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n}var a="[object Array]"===o;if(!a){if("object"!=(void 0===e?"undefined":G(e))||"object"!=(void 0===n?"undefined":G(n)))return!1;var s=e.constructor,l=n.constructor;if(s!==l&&!(d.isFunction(s)&&s instanceof s&&d.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in n)return!1}i=i||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return i[u]===n;if(r.push(e),i.push(n),a){if((u=e.length)!==n.length)return!1;for(;u--;)if(!t(e[u],n[u],r,i))return!1}else{var c,h=d.keys(e);if(u=h.length,d.keys(n).length!==u)return!1;for(;u--;)if(c=h[u],!d.has(n,c)||!t(e[c],n[c],r,i))return!1}return r.pop(),i.pop(),!0}(t,e)},d.isEmpty=function(t){return null==t||(w(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=s||function(t){return"[object Array]"===f.call(t)},d.isObject=function(t){var e=void 0===t?"undefined":G(t);return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){d["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":G(Int8Array))&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&o.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=v,d.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=d.invert(O),D=function(e){var n=function(t){return e[t]},t="(?:"+d.keys(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}};d.escape=D(O),d.unescape=D(N),d.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),d.isFunction(r)?r.call(t):r};var A=0;d.uniqueId=function(t){var e=++A+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+F[t]};d.template=function(o,t,e){!t&&e&&(t=e),t=d.defaults({},t,d.templateSettings);var n=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(n,function(t,e,n,r,i){return s+=o.slice(a,i).replace(j,B),a=i+t.length,e?s+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(t.variable||"obj","_",s)}catch(t){throw t.source=s,t}var i=function(t){return r.call(this,t,d)},l=t.variable||"obj";return i.source="function("+l+"){\n"+s+"}",i},d.chain=function(t){var e=d(t);return e._chain=!0,e};var z=function(t,e){return t._chain?d(e).chain():e};d.mixin=function(n){d.each(d.functions(n),function(t){var e=d[t]=n[t];d.prototype[t]=function(){var t=[this._wrapped];return i.apply(t,arguments),z(this,e.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];d.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],z(this,t)}}),d.each(["concat","join","slice"],function(t){var e=r[t];d.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this)},{}],23:[function(t,e,n){var o=t("underscore"),a=t("geocrunch"),l=function(t){return t<10?"0"+t.toString():t.toString()},s=function(t,e,n){var r=Math.abs(t),i=Math.floor(r),o=Math.floor(60*(r-i)),a=Math.round(3600*(r-i-o/60)*100)/100,s=r===t?e:n;return l(i)+"&deg; "+l(o)+"' "+l(a)+'" '+s};e.exports={measure:function(t){var e=o.last(t),n=a.path(o.map(t,function(t){return[t.lng,t.lat]})),r=n.distance({units:"meters"}),i=n.area({units:"sqmeters"});return{lastCoord:{dd:{x:e.lng,y:e.lat},dms:{x:s(e.lng,"E","W"),y:s(e.lat,"N","S")}},length:r,area:i}}}},{geocrunch:7,underscore:22}],24:[function(t,e,n){e.exports={$:function(t,e){return e||(e=document),e.querySelector(t)},$$:function(t,e){return e||(e=document),Array.prototype.slice.call(e.querySelectorAll(t))},hide:function(t){if(t)return t.setAttribute("style","display:none;"),t},show:function(t){if(t)return t.removeAttribute("style"),t}}},{}],25:[function(t,e,n){e.exports={measure:"Medir",measureDistancesAndAreas:"Medeix distancies i àreas",createNewMeasurement:"Crear nova medicio",startCreating:"Començi a crear la medicio afegint punts al mapa",finishMeasurement:"Acabar la medició",lastPoint:"Últim punt",area:"Área",perimeter:"Perómetre",pointLocation:"Localizació del punt",areaMeasurement:"Medició d'área",linearMeasurement:"Medició lineal",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en aquesta área",centerOnLine:"Centrar en aquesta línia",centerOnLocation:"Centrar en aquesta localizació",cancel:"Cancel·lar",delete:"Eliminar",acres:"Acres",feet:"Peus",kilometers:"Quilòmetres",hectares:"Hectàreas",meters:"Metros",miles:"Milles",sqfeet:"Peus cuadrats",sqmeters:"Metres cuadrats",sqmiles:"Milles cuadrades",decPoint:".",thousandsSep:" "}},{}],26:[function(t,e,n){e.exports={measure:"测量",measureDistancesAndAreas:"同时测量距离和面积",createNewMeasurement:"开始一次新的测量",startCreating:"点击地图加点以开始创建测量",finishMeasurement:"完成测量",lastPoint:"最后点的坐标",area:"面积",perimeter:"周长",pointLocation:"点的坐标",areaMeasurement:"面积测量",linearMeasurement:"距离测量",pathDistance:"路径长度",centerOnArea:"该面积居中",centerOnLine:"该线段居中",centerOnLocation:"该位置居中",cancel:"取消",delete:"删除",acres:"公亩",feet:"英尺",kilometers:"公里",hectares:"公顷",meters:"米",miles:"英里",sqfeet:"平方英尺",sqmeters:"平方米",sqmiles:"平方英里",decPoint:".",thousandsSep:",",sqkilometers:"平方公里"}},{}],27:[function(t,e,n){e.exports={measure:"Mål",measureDistancesAndAreas:"Mål afstande og arealer",createNewMeasurement:"Lav en ny måling",startCreating:"Begynd målingen ved at tilføje punkter på kortet",finishMeasurement:"Afslut måling",lastPoint:"Sidste punkt",area:"Areal",perimeter:"Omkreds",pointLocation:"Punkt",areaMeasurement:"Areal",linearMeasurement:"Linje",pathDistance:"Sti afstand",centerOnArea:"Centrér dette område",centerOnLine:"Centrér denne linje",centerOnLocation:"Centrér dette punkt",cancel:"Annuller",delete:"Slet",acres:"acre",feet:"fod",kilometers:"km",hectares:"ha",meters:"m",miles:"mil",sqfeet:"kvadratfod",sqmeters:"m²",sqmiles:"kvadratmil",decPoint:",",thousandsSep:"."}},{}],28:[function(t,e,n){e.exports={measure:"Messung",measureDistancesAndAreas:"Messung von Abständen und Flächen",createNewMeasurement:"Eine neue Messung durchführen",startCreating:"Führen Sie die Messung durch, indem Sie der Karte Punkte hinzufügen.",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fläche",perimeter:"Rand",pointLocation:"Lage des Punkts",areaMeasurement:"Gemessene Fläche",linearMeasurement:"Gemessener Abstand",pathDistance:"Abstand entlang des Pfads",centerOnArea:"Auf diese Fläche zentrieren",centerOnLine:"Auf diesen Linienzug zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Löschen",acres:"Morgen",feet:"Fuß",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfuß",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:",",thousandsSep:"."}},{}],29:[function(t,e,n){e.exports={measure:"Messung",measureDistancesAndAreas:"Abstände und Flächen messen",createNewMeasurement:"Eine neue Messung durchführen",startCreating:"Messen sie, indem Sie der Karte Punkte hinzufügen",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fläche",perimeter:"Umfang",pointLocation:"Lage des Punkts",areaMeasurement:"Fläche",linearMeasurement:"Abstand",pathDistance:"Umfang",centerOnArea:"Auf diese Fläche zentrieren",centerOnLine:"Auf diese Linie zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Löschen",acres:"Morgen",feet:"Fuß",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfuß",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:".",thousandsSep:"'"}},{}],30:[function(t,e,n){e.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Center on this area",centerOnLine:"Center on this line",centerOnLocation:"Center on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:",",sqkilometers:"Sq Kilometers"}},{}],31:[function(t,e,n){e.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Centre on this area",centerOnLine:"Centre on this line",centerOnLocation:"Centre on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometres",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:",",sqkilometers:"Sq Kilometers"}},{}],32:[function(t,e,n){e.exports={measure:"Medición",measureDistancesAndAreas:"Mida distancias y áreas",createNewMeasurement:"Crear nueva medición",startCreating:"Empiece a crear la medición añadiendo puntos al mapa",finishMeasurement:"Terminar medición",lastPoint:"Último punto",area:"Área",perimeter:"Perímetro",pointLocation:"Localización del punto",areaMeasurement:"Medición de área",linearMeasurement:"Medición linear",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en este área",centerOnLine:"Centrar en esta línea",centerOnLocation:"Centrar en esta localización",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pies",kilometers:"Kilómetros",hectares:"Hectáreas",meters:"Metros",miles:"Millas",sqfeet:"Pies cuadrados",sqmeters:"Metros cuadrados",sqmiles:"Millas cuadradas",decPoint:".",thousandsSep:" "}},{}],33:[function(t,e,n){e.exports={measure:"اندازه گیری",measureDistancesAndAreas:"اندازه گیری فاصله و مساحت",createNewMeasurement:"ثبت اندازه گیری جدید",startCreating:"برای ثبت اندازه گیری جدید نقاطی را به نقشه اضافه کنید.",finishMeasurement:"پایان اندازه گیری",lastPoint:"آخرین نقطه",area:"مساحت",perimeter:"محیط",pointLocation:"مکان نقطه",areaMeasurement:"اندازه گیری مساحت",linearMeasurement:"اندازه گیری خطی",pathDistance:"فاصله مسیر",centerOnArea:"مرکز این سطح",centerOnLine:"مرکز این خط",centerOnLocation:"مرکز این مکان",cancel:"لغو",delete:"حذف",acres:"ایکر",feet:"پا",kilometers:"کیلومتر",hectares:"هکتار",meters:"متر",miles:"مایل",sqfeet:"پا مربع",sqmeters:"متر مربع",sqmiles:"مایل مربع",decPoint:"/",thousandsSep:","}},{}],34:[function(t,e,n){e.exports={measure:"Sukat",measureDistancesAndAreas:"Kalkulahin ang tamang distansya at sukat",createNewMeasurement:"Lumikha ng isang bagong pagsukat",startCreating:"Simulan ang paglikha ng isang pagsukat sa pamamagitan ng pagdaragdag ng mga puntos sa mapa",finishMeasurement:"Tapusin ang pagsukat",lastPoint:"Huling punto sa mapa",area:"Sukat",perimeter:"Palibot",pointLocation:"Lokasyon ng punto",areaMeasurement:"Kabuuang sukat",linearMeasurement:"Pagsukat ng guhit",pathDistance:"Distansya ng daanan",centerOnArea:"I-sentro sa lugar na ito",centerOnLine:"I-sentro sa linya na ito",centerOnLocation:"I-sentro sa lokasyong ito",cancel:"Kanselahin",delete:"Tanggalin",acres:"Acres",feet:"Talampakan",kilometers:"Kilometro",hectares:"Hektarya",meters:"Metro",miles:"Milya",sqfeet:"Talampakang Kwadrado",sqmeters:"Metro Kwadrado",sqmiles:"Milya Kwadrado",decPoint:".",thousandsSep:","}},{}],35:[function(t,e,n){e.exports={measure:"Mesure",measureDistancesAndAreas:"Mesurer les distances et superficies",createNewMeasurement:"Créer une nouvelle mesure",startCreating:"Débuter la création d'une nouvelle mesure en ajoutant des points sur la carte",finishMeasurement:"Finir la mesure",lastPoint:"Dernier point",area:"Superficie",perimeter:"Périmètre",pointLocation:"Placement du point",areaMeasurement:"Mesure de superficie",linearMeasurement:"Mesure linéaire",pathDistance:"Distance du chemin",centerOnArea:"Centrer sur cette zone",centerOnLine:"Centrer sur cette ligne",centerOnLocation:"Centrer à cet endroit",cancel:"Annuler",delete:"Supprimer",acres:"Acres",feet:"Pieds",kilometers:"Kilomètres",hectares:"Hectares",meters:"Mètres",miles:"Miles",sqfeet:"Pieds carrés",sqmeters:"Mètres carrés",sqmiles:"Miles carrés",decPoint:",",thousandsSep:" "}},{}],36:[function(t,e,n){e.exports={measure:"Misura",measureDistancesAndAreas:"Misura distanze e aree",createNewMeasurement:"Crea una nuova misurazione",startCreating:"Comincia a creare una misurazione aggiungendo punti alla mappa",finishMeasurement:"Misurazione conclusa",lastPoint:"Ultimo punto",area:"Area",perimeter:"Perimetro",pointLocation:"Posizione punto",areaMeasurement:"Misura area",linearMeasurement:"Misura lineare",pathDistance:"Distanza percorso",centerOnArea:"Centra su questa area",centerOnLine:"Centra su questa linea",centerOnLocation:"Centra su questa posizione",cancel:"Annulla",delete:"Cancella",acres:"Acri",feet:"Piedi",kilometers:"Chilometri",hectares:"Ettari",meters:"Metri",miles:"Miglia",sqfeet:"Piedi quadri",sqmeters:"Metri quadri",sqmiles:"Miglia quadre",decPoint:".",thousandsSep:","}},{}],37:[function(t,e,n){e.exports={measure:"Meet",measureDistancesAndAreas:"Meet afstanden en oppervlakten",createNewMeasurement:"Maak een nieuwe meting",startCreating:"Begin een meting door punten toe te voegen aan de kaart",finishMeasurement:"Beëindig meting",lastPoint:"Laatste punt",area:"Oppervlakte",perimeter:"Omtrek",pointLocation:"Locatie punt",areaMeasurement:"Oppervlakte meting",linearMeasurement:"Gemeten afstand",pathDistance:"Afstand over de lijn",centerOnArea:"Centreer op dit gebied",centerOnLine:"Centreer op deze lijn",centerOnLocation:"Centreer op deze locatie",cancel:"Annuleer",delete:"Wis",acres:"are",feet:"Voet",kilometers:"km",hectares:"ha",meters:"m",miles:"Mijl",sqfeet:"Vierkante Feet",sqmeters:"m2",sqmiles:"Vierkante Mijl",decPoint:",",thousandsSep:"."}},{}],38:[function(t,e,n){e.exports={measure:"Pomiar",measureDistancesAndAreas:"Pomiar odległości i powierzchni",createNewMeasurement:"Utwórz nowy pomiar",startCreating:"Rozpocznij tworzenie nowego pomiaru poprzez dodanie punktów na mapie",finishMeasurement:"Zakończ pomiar",lastPoint:"Ostatni punkt",area:"Powierzchnia",perimeter:"Obwód",pointLocation:"Punkt lokalizacji",areaMeasurement:"Pomiar powierzchni",linearMeasurement:"Pomiar liniowy",pathDistance:"Długość ścieżki",centerOnArea:"Środek tego obszaru",centerOnLine:"Środek tej linii",centerOnLocation:"Środek w tej lokalizacji",cancel:"Anuluj",delete:"Skasuj",acres:"akrów",feet:"stóp",kilometers:"kilometrów",hectares:"hektarów",meters:"metrów",miles:"mil",sqfeet:"stóp kwadratowych",sqmeters:"metrów kwadratowych",sqmiles:"mil kwadratowych",decPoint:",",thousandsSep:"."}},{}],39:[function(t,e,n){e.exports={measure:"Medidas",measureDistancesAndAreas:"Mede distâncias e áreas",createNewMeasurement:"Criar nova medida",startCreating:"Comece criando uma medida, adicionando pontos no mapa",finishMeasurement:"Finalizar medida",lastPoint:"Último ponto",area:"Área",perimeter:"Perímetro",pointLocation:"Localização do ponto",areaMeasurement:"Medida de área",linearMeasurement:"Medida linear",pathDistance:"Distância",centerOnArea:"Centralizar nesta área",centerOnLine:"Centralizar nesta linha",centerOnLocation:"Centralizar nesta localização",cancel:"Cancelar",delete:"Excluir",acres:"Acres",feet:"Pés",kilometers:"Quilômetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Pés²",sqmeters:"Metros²",sqmiles:"Milhas²",decPoint:",",thousandsSep:"."}},{}],40:[function(t,e,n){e.exports={measure:"Medições",measureDistancesAndAreas:"Medir distâncias e áreas",createNewMeasurement:"Criar uma nova medição",startCreating:"Adicione pontos no mapa, para criar uma nova medição",finishMeasurement:"Finalizar medição",lastPoint:"Último ponto",area:"Área",perimeter:"Perímetro",pointLocation:"Localização do ponto",areaMeasurement:"Medição da área",linearMeasurement:"Medição linear",pathDistance:"Distância",centerOnArea:"Centrar nesta área",centerOnLine:"Centrar nesta linha",centerOnLocation:"Centrar nesta localização",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pés",kilometers:"Kilômetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Pés²",sqmeters:"Metros²",sqmiles:"Milhas²",decPoint:",",thousandsSep:"."}},{}],41:[function(t,e,n){e.exports={measure:"Измерение",measureDistancesAndAreas:"Измерение расстояний и площади",createNewMeasurement:"Создать новое измерение",startCreating:"Для начала измерения добавьте точку на карту",finishMeasurement:"Закончить измерение",lastPoint:"Последняя точка",area:"Область",perimeter:"Периметр",pointLocation:"Местоположение точки",areaMeasurement:"Измерение области",linearMeasurement:"Линейное измерение",pathDistance:"Расстояние",centerOnArea:"Сфокусироваться на данной области",centerOnLine:"Сфокусироваться на данной линии",centerOnLocation:"Сфокусироваться на данной местности",cancel:"Отменить",delete:"Удалить",acres:"акры",feet:"фут",kilometers:"км",hectares:"га",meters:"м",miles:"миль",sqfeet:"футов²",sqmeters:"м²",sqmiles:"миль²",decPoint:".",thousandsSep:","}},{}],42:[function(t,e,n){e.exports={measure:"Mäta",measureDistancesAndAreas:"Mäta avstånd och yta",createNewMeasurement:"Skapa ny mätning",startCreating:"Börja mätning genom att lägga till punkter på kartan",finishMeasurement:"Avsluta mätning",lastPoint:"Sista punkt",area:"Yta",perimeter:"Omkrets",pointLocation:"Punktens Läge",areaMeasurement:"Arealmätning",linearMeasurement:"Längdmätning",pathDistance:"Total linjelängd",centerOnArea:"Centrera på detta område",centerOnLine:"Centrera på denna linje",centerOnLocation:"Centrera på denna punkt",cancel:"Avbryt",delete:"Radera",acres:"Tunnland",feet:"Fot",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Miles",sqfeet:"Kvadratfot",sqmeters:"Kvadratmeter",sqmiles:"Kvadratmiles",decPoint:",",thousandsSep:" "}},{}],43:[function(t,e,n){e.exports={measure:"Hesapla",measureDistancesAndAreas:"Uzaklık ve alan hesapla",createNewMeasurement:"Yeni hesaplama",startCreating:"Yeni nokta ekleyerek hesaplamaya başla",finishMeasurement:"Hesaplamayı bitir",lastPoint:"Son nokta",area:"Alan",perimeter:"Çevre uzunluğu",pointLocation:"Nokta yeri",areaMeasurement:"Alan hesaplaması",linearMeasurement:"Doğrusal hesaplama",pathDistance:"Yol uzunluğu",centerOnArea:"Bu alana odaklan",centerOnLine:"Bu doğtuya odaklan",centerOnLocation:"Bu yere odaklan",cancel:"Çıkış",delete:"Sil",acres:"Dönüm",feet:"Feet",kilometers:"Kilometre",hectares:"Hektar",meters:"Metre",miles:"Mil",sqfeet:"Feet kare",sqmeters:"Metre kare",sqmiles:"Mil kare",decPoint:".",thousandsSep:","}},{}],44:[function(o,t,e){(function(t){var s=o("underscore"),l="undefined"!=typeof window?window.L:void 0!==t?t.L:null,u=o("humanize"),e=o("./units"),c=o("./calc"),n=o("./dom"),h=n.$,r=o("./mapsymbology"),f=s.template('<a class="<%= model.className %>-toggle js-toggle leaflet-bar" href="#" title="<%= i18n.__(\'measureDistancesAndAreas\') %>"><%= i18n.__(\'measure\') %></a>\n<div class="<%= model.className %>-interaction js-interaction">\n  <div class="js-startprompt startprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <ul class="tasks">\n      <a href="#" class="js-start start"><%= i18n.__(\'createNewMeasurement\') %></a>\n    </ul>\n  </div>\n  <div class="js-measuringprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <p class="js-starthelp"><%= i18n.__(\'startCreating\') %></p>\n    <div class="js-results results"></div>\n    <ul class="js-measuretasks tasks">\n      <li><a href="#" class="js-cancel cancel"><%= i18n.__(\'cancel\') %></a></li>\n      <li><a href="#" class="js-finish finish"><%= i18n.__(\'finishMeasurement\') %></a></li>\n    </ul>\n  </div>\n</div>'),i=s.template('<div class="group">\n<p class="lastpoint heading"><%= i18n.__(\'lastPoint\') %></p>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n</div>\n<% if (model.pointCount > 1) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'pathDistance\') %></span> <%= model.lengthDisplay %></p>\n</div>\n<% } %>\n<% if (model.pointCount > 2) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'area\') %></span> <%= model.areaDisplay %></p>\n</div>\n<% } %>'),p=s.template('<h3><%= i18n.__(\'pointLocation\') %></h3>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLocation\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),d=s.template('<h3><%= i18n.__(\'linearMeasurement\') %></h3>\n<p><%= model.lengthDisplay %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLine\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),g=s.template('<h3><%= i18n.__(\'areaMeasurement\') %></h3>\n<p><%= model.areaDisplay %></p>\n<p><%= model.lengthDisplay %> <%= i18n.__(\'perimeter\') %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnArea\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),m=new(o("i18n-2"))({devMode:!1,locales:{ca:o("./i18n/ca"),cn:o("./i18n/cn"),da:o("./i18n/da"),de:o("./i18n/de"),de_CH:o("./i18n/de_CH"),en:o("./i18n/en"),en_UK:o("./i18n/en_UK"),es:o("./i18n/es"),fa:o("./i18n/fa"),fil_PH:o("./i18n/fil_PH"),fr:o("./i18n/fr"),it:o("./i18n/it"),nl:o("./i18n/nl"),pl:o("./i18n/pl"),pt_BR:o("./i18n/pt_BR"),pt_PT:o("./i18n/pt_PT"),ru:o("./i18n/ru"),sv:o("./i18n/sv"),tr:o("./i18n/tr")}});l.Control.Measure=l.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(t){l.setOptions(this,t),this.options.units=l.extend({},e,this.options.units),this._symbols=new r(s.pick(this.options,"activeColor","completedColor")),m.setLocale(this.options.localization)},onAdd:function(t){return this._map=t,this._latlngs=[],this._initLayout(),t.on("click",this._collapse,this),this._layer=l.layerGroup().addTo(t),this._container},onRemove:function(t){t.off("click",this._collapse,this),t.removeLayer(this._layer)},_initLayout:function(){var t=this._className;l.Browser.touch&&(t+=" leaflet-touch");var e,n,r,i,o=this._className,a=this._container=l.DomUtil.create("div",t);a.innerHTML=f({model:{className:o},i18n:m}),a.setAttribute("aria-haspopup",!0),l.Browser.touch?l.DomEvent.on(a,"click",l.DomEvent.stopPropagation):(l.DomEvent.disableClickPropagation(a),l.DomEvent.disableScrollPropagation(a)),e=this.$toggle=h(".js-toggle",a),this.$interaction=h(".js-interaction",a),n=h(".js-start",a),r=h(".js-cancel",a),i=h(".js-finish",a),this.$startPrompt=h(".js-startprompt",a),this.$measuringPrompt=h(".js-measuringprompt",a),this.$startHelp=h(".js-starthelp",a),this.$results=h(".js-results",a),this.$measureTasks=h(".js-measuretasks",a),this._collapse(),this._updateMeasureNotStarted(),l.Browser.android||(l.DomEvent.on(a,"mouseenter",this._expand,this),l.DomEvent.on(a,"mouseleave",this._collapse,this)),l.DomEvent.on(e,"click",l.DomEvent.stop),l.Browser.touch?l.DomEvent.on(e,"click",this._expand,this):l.DomEvent.on(e,"focus",this._expand,this),l.DomEvent.on(n,"click",l.DomEvent.stop),l.DomEvent.on(n,"click",this._startMeasure,this),l.DomEvent.on(r,"click",l.DomEvent.stop),l.DomEvent.on(r,"click",this._finishMeasure,this),l.DomEvent.on(i,"click",l.DomEvent.stop),l.DomEvent.on(i,"click",this._handleMeasureDoubleClick,this)},_expand:function(){n.hide(this.$toggle),n.show(this.$interaction)},_collapse:function(){this._locked||(n.hide(this.$interaction),n.show(this.$toggle))},_updateMeasureNotStarted:function(){n.hide(this.$startHelp),n.hide(this.$results),n.hide(this.$measureTasks),n.hide(this.$measuringPrompt),n.show(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){n.hide(this.$results),n.show(this.$startHelp),n.show(this.$measureTasks),n.hide(this.$startPrompt),n.show(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){n.hide(this.$startHelp),n.show(this.$results),n.show(this.$measureTasks),n.hide(this.$startPrompt),n.show(this.$measuringPrompt)},_startMeasure:function(){KQ.Control.Manager.getInstance()._unselectAllControlsExcept("measure"),this._locked=!0,this._measureVertexes=l.featureGroup().addTo(this._layer),this._captureMarker=l.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),l.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){var t=s.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,l.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker&&this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._measureVertexes&&this._captureMarker&&(this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null),this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",t,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes&&this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(l.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(t){var a=this.options.units;return{lengthDisplay:e(t.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:e(t.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function e(t,e,n,r,i){var o;return e&&a[e]?(o=s(t,a[e],r,i),n&&a[n]&&(o=o+" ("+s(t,a[n],r,i)+")")):o=s(t,null,r,i),o}function s(t,e,n,r){return e&&e.factor&&e.display?u.numberFormat(t*e.factor,e.decimals||0,n||m.__("decPoint"),r||m.__("thousandsSep"))+" "+m.__([e.display])||e.display:u.numberFormat(t,0,n||m.__("decPoint"),r||m.__("thousandsSep"))}},_updateResults:function(){var t=c.measure(this._latlngs),e=this._resultsModel=s.extend({},t,this._getMeasurementDisplayStrings(t),{pointCount:this._latlngs.length});this.$results.innerHTML=i({model:e,humanize:u,i18n:m})},_handleMeasureMove:function(t){this._measureDrag?this._measureDrag.setLatLng(t.latlng):this._measureDrag=l.circleMarker(t.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var t,e,n,r,i,o,a=this._latlngs;this._finishMeasure(),a.length&&(2<a.length&&a.push(s.first(a)),t=c.measure(a),1===a.length?(e=l.circleMarker(a[0],this._symbols.getSymbol("resultPoint")),r=p({model:t,humanize:u,i18n:m})):2===a.length?(e=l.polyline(a,this._symbols.getSymbol("resultLine")),r=d({model:s.extend({},t,this._getMeasurementDisplayStrings(t)),humanize:u,i18n:m})):(e=l.polygon(a,this._symbols.getSymbol("resultArea")),r=g({model:s.extend({},t,this._getMeasurementDisplayStrings(t)),humanize:u,i18n:m})),(n=l.DomUtil.create("div","")).innerHTML=r,(i=h(".js-zoomto",n))&&(l.DomEvent.on(i,"click",l.DomEvent.stop),l.DomEvent.on(i,"click",function(){e.getBounds?this._map.fitBounds(e.getBounds(),{padding:[20,20],maxZoom:17}):e.getLatLng&&this._map.panTo(e.getLatLng())},this)),(o=h(".js-deletemarkup",n))&&(l.DomEvent.on(o,"click",l.DomEvent.stop),l.DomEvent.on(o,"click",function(){this._layer.removeLayer(e)},this)),e.addTo(this._layer),e.bindPopup(n,this.options.popupOptions),e.getBounds?e.openPopup(e.getBounds().getCenter()):e.getLatLng&&e.openPopup(e.getLatLng()))},_handleMeasureClick:function(t){var e=this._map.mouseEventToLatLng(t.originalEvent),n=s.last(this._latlngs),r=this._symbols.getSymbol("measureVertex");n&&e.equals(n)||(this._latlngs.push(e),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(t){t.setStyle(r),t.setStyle({className:"layer-measurevertex"})}),this._addNewVertex(e),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(t){l.circleMarker(t,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(t){t.length<3?this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null):this._measureArea?this._measureArea.setLatLngs(t):this._measureArea=l.polygon(t,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(t){t.length<2?this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null):this._measureBoundary?this._measureBoundary.setLatLngs(t):this._measureBoundary=l.polyline(t,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}}),l.Map.mergeOptions({measureControl:!1}),l.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=(new l.Control.Measure).addTo(this))}),l.control.measure=function(t){return new l.Control.Measure(t)}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./calc":23,"./dom":24,"./i18n/ca":25,"./i18n/cn":26,"./i18n/da":27,"./i18n/de":28,"./i18n/de_CH":29,"./i18n/en":30,"./i18n/en_UK":31,"./i18n/es":32,"./i18n/fa":33,"./i18n/fil_PH":34,"./i18n/fr":35,"./i18n/it":36,"./i18n/nl":37,"./i18n/pl":38,"./i18n/pt_BR":39,"./i18n/pt_PT":40,"./i18n/ru":41,"./i18n/sv":42,"./i18n/tr":43,"./mapsymbology":45,"./units":46,humanize:16,"i18n-2":18,underscore:22}],45:[function(t,e,n){var r=t("underscore"),i=t("color"),o=function(t){this.setOptions(t)};o.DEFAULTS={activeColor:"#ABE67E",completedColor:"#C8F2BE"},r.extend(o.prototype,{setOptions:function(t){return this._options=r.extend({},o.DEFAULTS,this._options,t),this},getSymbol:function(t){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:i(this._options.activeColor).darken(.15),fillOpacity:.7,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[t]}}),e.exports=o},{color:6,underscore:22}],46:[function(t,e,n){e.exports={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}}},{}]},{},[44])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(t,e,n){"use strict";var r,i=t("../../src/kq"),o=(r=i)&&r.__esModule?r:{default:r};L.Text=L.Layer.extend({includes:L.Mixin.Events,options:{autoPan:!0,offset:new L.Point(0,30),autoPanPadding:new L.Point(5,5),latlng:null,content:"",className:""},layerType:"textLayer",initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||this._initLayout(),t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),L.Browser.any3d&&t.on("zoomanim",this._zoomAnimation,this),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),t.off({viewreset:this._updatePosition,zoomanim:this._zoomAnimation},this),this._map=null},setLatLng:function(t){return this.options.latlng=L.latLng(t),this._updatePosition(),this},setContent:function(t){return this.options.content=t,this._updateContent(),this},_initLayout:function(){this._container=L.DomUtil.create("lable","imap-text "+this.options.className+" imap-zoom-animated"),this._contentNode=L.DomUtil.create("span","imap-text-content",this._container)},_update:function(){this._map&&(this._updateContent(),this._updatePosition())},_updateContent:function(){this.options.content&&("string"==typeof this.options.content?this._contentNode.innerHTML=this.options.content:(this._contentNode.innerHTML="",this._contentNode.appendChild(this.options.content)))},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this.options.latlng),e=L.Browser.any3d,n=this.options.offset;e&&L.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(t){t=this._map._latLngToNewLayerPoint(this.options.latlng,t.zoom,t.center),L.DomUtil.setPosition(this._container,t)}}),L.ComputeDist=L.Handler.extend({options:{toolbarIcon:{className:"leaflet-ComputeDist"}},_rad:Math.PI/180,initialize:function(t,e){this._map=t,this._map._distControl=this,L.setOptions(this,e)},addHooks:function(){this._onMouseClick()},_onMouseClick:function(){this._map._areaControl&&this._map._areaControl._startCompute&&this._map._areaControl._finishCompute(),this._startCompute?this._finishCompute():this._enableCompute()},_setPath:function(t){var e;e="cn"===o.default.Local.getCurrentLanguage()?"起点":"start point";var n=t.latlng||this._map.mouseEventToLatLng(t);if(this._startPath){if(!n.equals(this._lastPoint)){var r=this._currentDist._latlngs;r.push(n);var i=r.length;this._totalDist+=this._getDistance(r[i-2],r[i-1]),this._addMarker(n),this._addLable(n,this._getDistanceString(this._totalDist),"dist-point")}}else this._currentDist={_layers:[],_latlngs:[]},this._addPath(n),this._totalDist=0,this._startPath=!0,this._addMarker(n),this._addLable(n,e,"dist-start"),this._currentDist._latlngs.push(n);this._lastPoint=n,this._startMove=!1},_onMove:function(t){var e=t.latlng,n=t.containerPoint,r=this._map._cursorTip;r.style.left=n.x+7+"px",r.style.top=n.y+23+"px",r.style.display="",this._startPath&&(this._startMove?this._currentPath.setLatLngs(this._currentDist._latlngs.concat(e)):(this._currentPath.addLatLng(e),this._startMove=!0))},_finishCompute:function(t){this._startPath&&(1<this._currentDist._latlngs.length?((!t||"contextmenu"===t.type)&&this._currentPath.setLatLngs(this._currentDist._latlngs),this._addReomveMarker(this._lastPoint),this._currentDist.lastLable._container.style.display="none",this._addLable(this._lastPoint,this._getDistanceString(this._totalDist),"dist-end")):this._clearLayers.call(this._currentDist)),this._disableCompute()},_enableCompute:function(){var t=this._map;t.contextMenu&&t.contextMenu.disable(),this._startCompute=!0,t.on("click",this._setPath,this),t.on("dblclick contextmenu",this._finishCompute,this),t.doubleClickZoom.disable();var e=t._cursorTip=L.DomUtil.create("div","imap-cursorTip",t._container);e.style.cssText=" z-index: 1000;position:absolute;background-color:#fff;border:1px solid #f00;display:none;white-space:nowrap;border-radius: 5px;padding: 0px 5px;","cn"===o.default.Local.getCurrentLanguage()?e.innerHTML="单击确定地点，双击结束":e.innerHTML="click select the point, double click end",t.on("mousemove",this._onMove,this)},_disableCompute:function(){var t=this._map;t.contextMenu&&t.contextMenu.enable(),t._cursorTip&&(t._cursorTip.style.display="none"),t.off("click",this._setPath,this),t.off("dblclick contextmenu",this._finishCompute,this),t.off("mousemove",this._onMove,this),t.doubleClickZoom.enable(),this._startCompute=this._startMove=this._startPath=!1},_addMarker:function(t){var e=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[11,11],iconAnchor:[6,6],className:"md-icon"}),n=new L.Marker(t,{icon:e,clickable:!1});this._map.addLayer(n),this._currentDist._layers.push(n)},_addPath:function(t){var e=this._currentPath=new L.Polyline([t],{weight:2});this._map.addLayer(e),this._currentDist._layers.push(e),this._currentDist._map=this._map},_addLable:function(t,e,n){var r=this._currentDist.lastLable=new L.Text({latlng:t,content:e,className:n});this._map.addLayer(r),this._currentDist._layers.push(r)},_addReomveMarker:function(t){var e=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[12,12],iconAnchor:[-10,7],className:"md-remove-icon"}),n=new L.Marker(t,{icon:e});n.on("click",this._clearLayers,this._currentDist),this._map.addLayer(n),this._currentDist._layers.push(n)},_clearLayers:function(){var t,e,n=this._layers;for(t=0,e=n.length;t<e;t++)this._map.removeLayer(n[t])},_getDistanceString:function(t){return"cn"===o.default.Local.getCurrentLanguage()?t<1e3?t+"米":(t/1e3).toFixed(1)+"公里":t<1e3?t+" m":(t/1e3).toFixed(1)+" km"},_getDistance:function(t,e){var n=(i=this._rad)*t.lat,r=i*e.lat,i=2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-r)/2),2)+Math.cos(n)*Math.cos(r)*Math.pow(Math.sin((i*t.lng-i*e.lng)/2),2)));return Math.round(6378137*i)}}),L.ComputeArea=L.Handler.extend({options:{toolbarIcon:{className:"leaflet-ComputeDist"}},_rad:Math.PI/180,_deg:180/Math.PI,initialize:function(t,e){this._map=t,this._map._areaControl=this,L.setOptions(this,e)},addHooks:function(){this._onMouseClick()},_onMouseClick:function(){this._map._distControl&&this._map._distControl._startCompute&&this._map._distControl._finishCompute(),this._startCompute?this._finishCompute():this._enableCompute()},_setArea:function(t){var e=t.latlng||this._map.mouseEventToLatLng(t);this._startArea?e.equals(this._lastPoint)||(this._addMarker(e),this._compute._latlngs.push(e)):(this._compute={_layers:[],_latlngs:[]},this._addArea(e),this._map.on("mousemove",this._onMove,this),this._startArea=!0,this._addMarker(e),this._compute._latlngs.push(e)),this._lastPoint=e,this._startMove=!1},_onMove:function(t){var e=t.latlng,n=t.containerPoint,r=this._map._cursorTip;r.style.left=n.x+7+"px",r.style.top=n.y+23+"px",r.style.display="",this._startArea&&(this._startMove?this._area.setLatLngs(this._compute._latlngs.concat(e)):(this._area.addLatLng(e),this._startMove=!0))},_finishCompute:function(t){this._startArea&&(2<this._compute._latlngs.length?((!t||"contextmenu"===t.type)&&this._area.setLatLngs(this._compute._latlngs),this._addReomveMarker(this._lastPoint),this._addLable(this._lastPoint,this._getAreaString(this._compute._latlngs),"area-result")):this._clearLayers.call(this._compute)),this._disableCompute()},_enableCompute:function(){var t=this._map;t.contextMenu&&t.contextMenu.disable(),this._startCompute=!0,t.on("click",this._setArea,this),t.on("dblclick contextmenu",this._finishCompute,this),t.doubleClickZoom.disable();var e=t._cursorTip=L.DomUtil.create("div","imap-cursorTip",t._container);e.style.cssText=" z-index: 1000;position:absolute;background-color:#fff;border:1px solid #f00;display:none;white-space:nowrap;border-radius: 5px;padding: 0px 5px;","cn"===o.default.Local.getCurrentLanguage()?e.innerHTML="单击确定地点，双击结束":e.innerHTML="click select the point, double click end",t.on("mousemove",this._onMove,this)},_disableCompute:function(){var t=this._map;t.contextMenu&&t.contextMenu.enable(),t._cursorTip&&(t._cursorTip.style.display="none"),t.off("click",this._setArea,this),t.off("dblclick contextmenu",this._finishCompute,this),t.off("mousemove",this._onMove,this),t.doubleClickZoom.enable(),this._startCompute=this._startMove=this._startArea=!1},_addMarker:function(t){var e=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[11,11],iconAnchor:[6,6],className:"md-icon"}),n=new L.Marker(t,{icon:e,clickable:!1});this._map.addLayer(n),this._compute._layers.push(n)},_addArea:function(t){var e=this._area=new L.Polygon([t],{weight:2,clickable:!1});this._map.addLayer(e),this._compute._layers.push(e),this._compute._map=this._map},_addLable:function(t,e,n){var r=this._compute.lastLable=new L.Text({latlng:t,content:e,className:n});this._map.addLayer(r),this._compute._layers.push(r)},_addReomveMarker:function(t){var e=new L.Icon({iconUrl:"../../images/measure/transparent.png",iconSize:[12,12],iconAnchor:[-10,7],className:"md-remove-icon"}),n=new L.Marker(t,{icon:e});n.on("click",this._clearLayers,this._compute),this._map.addLayer(n),this._compute._layers.push(n)},_clearLayers:function(){for(var t=this._layers,e=0;e<t.length;e++)this._map.removeLayer(t[e])},_getAreaString:function(t){return t=Math.round(this._computeArea(t)),"cn"===o.default.Local.getCurrentLanguage()?t<1e6?t+"平方米":(t/1e6).toFixed(2)+"平方公里":t<1e6?t+" m²":(t/1e6).toFixed(2)+" km²"},_computeArea:function(t){var e,n,r,i=0,o=t.length;for(e=0;e<o;++e)n=(e+1)%o,r=(e+2)%o,i+=this._angle(t[e],t[n],t[r]);return 420<(e=i-(t=180*(o-2)))?e=360*o-i-t:300<e&&e<420&&(e=Math.abs(360-e)),e*this._rad*40680631590769},_angle:function(t,e,n){return(e=(t=this._bearing(e,t))-(e=this._bearing(e,n)))<0&&(e+=360),e},_bearing:function(t,e){var n=this._rad,r=t.lat*n,i=t.lng*n,o=e.lat*n,a=e.lng*n,s=-Math.atan2(Math.sin(i-a)*Math.cos(o),Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(i-a));return s<0&&(s+=2*Math.PI),s*=this._deg}})},{"../../src/kq":1075}],47:[function(t,e,n){"use strict";var r,i,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r="undefined"!=typeof window?window:void 0,i=function(y){var n,v=y.ss||{},e=/^\s+/,r=/\s+$/,t=/[xy]/g,i=/.*(\/|\\)/,o=/.*[.]/,a=/[\t\r\n]/g,s=0<Object.prototype.toString.call(y.HTMLElement).indexOf("Constructor"),l=-1!==navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("MSIE 1"),u=-1!==navigator.userAgent.indexOf("MSIE 7"),c=document.createElement("input");c.type="file",n="multiple"in c&&"undefined"!=typeof File&&void 0!==(new XMLHttpRequest).upload,v.obj2string=function(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=e?e+"["+r+"]":r,o=t[r];n.push("object"===(void 0===o?"undefined":p(o))?v.obj2string(o,i):encodeURIComponent(i)+"="+encodeURIComponent(o))}return n.join("&")},v.extendObj=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},v.addEvent=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n),function(){v.removeEvent(t,e,n)}},v.removeEvent=document.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var r="on"+e;void 0===t[r]&&(t[r]=null),t.detachEvent(r,n)},v.newXHR=function(){if("undefined"!=typeof XMLHttpRequest)return new y.XMLHttpRequest;if(y.ActiveXObject)try{return new y.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return!1}},v.encodeUTF8=function(t){return unescape(encodeURIComponent(t))},v.getIFrame=function(){var t,e=v.getUID();return u?t=document.createElement('<iframe src="javascript:false;" name="'+e+'">'):((t=document.createElement("iframe")).src="javascript:false;",t.name=e),t.style.display="none",t.id=e,t},v.getForm=function(t){var e=document.createElement("form");for(var n in e.encoding="multipart/form-data",e.enctype="multipart/form-data",e.style.display="none",t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},v.getHidden=function(t,e){var n=document.createElement("input");return n.type="hidden",n.name=t,n.value=e,n},v.parseJSON=function(t){if(!t)return!1;if(t=v.trim(t+""),y.JSON&&y.JSON.parse)try{return y.JSON.parse(t+"")}catch(t){return!1}var i,o=null;return!(!t||v.trim(t.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,function(t,e,n,r){return i&&e&&(o=0),0===o?t:(i=n||e,o+=!r-!n,"")})))&&Function("return "+t)()},v.getBox=function(t){var e,n,r=0,i=0;if(t.getBoundingClientRect)e=t.getBoundingClientRect(),n=document.documentElement,r=e.top+(y.pageYOffset||n.scrollTop)-(n.clientTop||0),i=e.left+(y.pageXOffset||n.scrollLeft)-(n.clientLeft||0);else for(;i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;);return{top:Math.round(r),left:Math.round(i)}},v.addStyles=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},v.copyLayout=function(t,e){var n=v.getBox(t);v.addStyles(e,{position:"absolute",left:n.left+"px",top:n.top+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"})},v.getUID=function(){return"axxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})};var h="".trim;v.trim=h&&!h.call("\ufeff ")?function(t){return null===t?"":h.call(t)}:function(t){return null===t?"":t.toString().replace(e,"").replace(r,"")};var f;return v.indexOf=[].indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},v.arrayDelete=function(t,e){var n=v.indexOf(t,e);-1<n&&t.splice(n,1)},v.getFilename=function(t){return t.replace(i,"")},v.getExt=function(t){return-1!==t.indexOf(".")?t.replace(o,""):""},v.isVisible=function(t){return!!t&&(1!==t.nodeType||t==document.body?!(t=null):t.parentNode&&(0<t.offsetWidth||0<t.offsetHeight||"none"!=v.getStyle(t,"display").toLowerCase())?v.isVisible(t.parentNode):(t=null,!1))},v.getStyle=function(t,e){return y.getComputedStyle?t.ownerDocument.defaultView.getComputedStyle(t,null).getPropertyValue(e):t.currentStyle&&t.currentStyle[e]?t.currentStyle[e]:void 0},v.getFormObj=function(t){for(var e,n=t.elements,r=["button","submit","image","reset"],i={},o=0,a=n.length;o<a;o++)if(e={},n[o].name&&!n[o].disabled&&-1===v.indexOf(r,n[o].type)){if(("checkbox"==n[o].type||"radio"==n[o].type)&&!n[o].checked)continue;e[n[o].name]=v.val(n[o]),v.extendObj(i,e)}return i},v.val=function(t){if(t){if("SELECT"==t.nodeName.toUpperCase()){for(var e,n=t.options,r=t.selectedIndex,i="select-one"===t.type||r<0,o=i?null:[],a=0,s=n.length;a<s;a++)if((n[a].selected||a===r)&&!n[a].disabled){if(e=n[a].value?n[a].value:n[a].text,i)return e;o.push(e)}return o}return t.value}},v.hasClass=function(t,e){return!(!t||!e)&&0<=(" "+t.className+" ").replace(a," ").indexOf(" "+e+" ")},v.addClass=function(t,e){if(!t||!e)return!1;v.hasClass(t,e)||(t.className+=" "+e)},v.removeClass=(f={},function(t,e){if(!t||!e)return!1;f[e]||(f[e]=new RegExp("(?:^|\\s)"+e+"(?!\\S)")),t.className=t.className.replace(f[e],"")}),v.purge=function(t){var e,n,r,i=t.attributes;if(i)for(e=i.length-1;0<=e;e-=1)"function"==typeof t[r=i[e].name]&&(t[r]=null);if(i=t.childNodes)for(n=i.length,e=0;e<n;e+=1)v.purge(t.childNodes[e])},v.remove=function(t){t&&t.parentNode&&(v.purge(t),t.parentNode.removeChild(t)),t=null},v.verifyElem=function(t){return"undefined"!=typeof jQuery&&t instanceof jQuery?t=t[0]:"string"==typeof t&&("#"==t.charAt(0)&&(t=t.substr(1)),t=document.getElementById(t)),!(!t||1!==t.nodeType)&&("A"==t.nodeName.toUpperCase()&&(t.style.cursor="pointer",v.addEvent(t,"click",function(t){t&&t.preventDefault?t.preventDefault():y.event&&(y.event.returnValue=!1)})),t)},v._options={},v.uploadSetup=function(t){v.extendObj(v._options,t)},v.SimpleUpload=function(t){if(this._opts={button:"",url:"",dropzone:"",dragClass:"",form:"",overrideSubmit:!0,cors:!1,withCredentials:!1,progressUrl:!1,sessionProgressUrl:!1,nginxProgressUrl:!1,multiple:!1,multipleSelect:!1,maxUploads:3,queue:!0,checkProgressInterval:500,keyParamName:"APC_UPLOAD_PROGRESS",sessionProgressName:"PHP_SESSION_UPLOAD_PROGRESS",nginxProgressHeader:"X-Progress-ID",customProgressHeaders:{},corsInputName:"XHR_CORS_TARGETORIGIN",allowedExtensions:[],accept:"",maxSize:!1,name:"",data:{},noParams:!0,autoSubmit:!0,multipart:!0,method:"POST",responseType:"",debug:!1,hoverClass:"",focusClass:"",disabledClass:"",customHeaders:{},encodeHeaders:!0,autoCalibrate:!0,onBlankSubmit:function(){},onAbort:function(t,e,n){},onChange:function(t,e,n,r,i){},onSubmit:function(t,e,n,r){},onProgress:function(t){},onUpdateFileSize:function(t){},onComplete:function(t,e,n,r){},onDone:function(t,e,n,r,i,o){},onAllDone:function(){},onExtError:function(t,e){},onSizeError:function(t,e){},onError:function(t,e,n,r,i,o,a){},startXHR:function(t,e,n){},endXHR:function(t,e,n){},startNonXHR:function(t,e){},endNonXHR:function(t,e){}},v.extendObj(this._opts,v._options),v.extendObj(this._opts,t),this._queue=[],this._active=0,this._disabled=!1,this._maxFails=10,this._progKeys={},this._sizeFlags={},this._btns=[],this.addButton(this._opts.button),delete this._opts.button,this._opts.button=t=null,!1===this._opts.multiple&&(this._opts.maxUploads=1),""!==this._opts.dropzone&&this.addDZ(this._opts.dropzone),""===this._opts.dropzone&&this._btns.length<1)throw new Error("Invalid upload button. Make sure the element you're passing exists.");""!==this._opts.form&&this.setForm(this._opts.form),this._createInput(),this._manDisabled=!1,this.enable(!0)},v.SimpleUpload.prototype={destroy:function(){for(var t=this._btns.length;t--;)this._btns[t].off&&this._btns[t].off(),v.removeClass(this._btns[t],this._opts.hoverClass),v.removeClass(this._btns[t],this._opts.focusClass),v.removeClass(this._btns[t],this._opts.disabledClass),this._btns[t].disabled=!1;this._killInput(),this._destroy=!0},log:function(t){this._opts&&this._opts.debug&&y.console&&y.console.log&&y.console.log("[Uploader] "+t)},setData:function(t){this._opts.data=t},setOptions:function(t){v.extendObj(this._opts,t)},addButton:function(t){var e;if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)!1!==(e=v.verifyElem(t[n]))?this._btns.push(this.rerouteClicks(e)):this.log("Button with array index "+n+" is invalid");else!1!==(e=v.verifyElem(t))&&this._btns.push(this.rerouteClicks(e))},addDZ:function(t){n&&((t=v.verifyElem(t))?this.addDropZone(t):this.log("Invalid or nonexistent element passed for drop zone"))},setProgressBar:function(t){this._progBar=v.verifyElem(t)},setPctBox:function(t){this._pctBox=v.verifyElem(t)},setFileSizeBox:function(t){this._sizeBox=v.verifyElem(t)},setProgressContainer:function(t){this._progBox=v.verifyElem(t)},setAbortBtn:function(t,e){this._abortBtn=v.verifyElem(t),this._removeAbort=!1,e&&(this._removeAbort=!0)},setForm:function(t){if(this._form=v.verifyElem(t),this._form&&"FORM"==this._form.nodeName.toUpperCase()){var e=this;this._opts.autoSubmit=!1,this._opts.overrideSubmit&&(v.addEvent(this._form,"submit",function(t){t.preventDefault?t.preventDefault():y.event&&(y.event.returnValue=!1),e._validateForm()&&e.submit()}),this._form.submit=function(){e._validateForm()&&e.submit()})}else this.log("Invalid or nonexistent element passed for form")},getQueueSize:function(){return this._queue.length},removeCurrent:function(t){if(t){for(var e=this._queue.length;e--;)if(this._queue[e].id===t){this._queue.splice(e,1);break}}else this._queue.splice(0,1);this._cycleQueue()},clearQueue:function(){this._queue.length=0},disable:function(t){var e,n=this._btns.length;for(this._manDisabled=!t||!0===this._manDisabled,this._disabled=!0;n--;)"INPUT"!=(e=this._btns[n].nodeName.toUpperCase())&&"BUTTON"!=e||(this._btns[n].disabled=!0),""!==this._opts.disabledClass&&v.addClass(this._btns[n],this._opts.disabledClass);this._input&&this._input.parentNode&&(this._input.parentNode.style.visibility="hidden")},enable:function(t){if(t||(this._manDisabled=!1),!0!==this._manDisabled){var e=this._btns.length;for(this._disabled=!1;e--;)v.removeClass(this._btns[e],this._opts.disabledClass),this._btns[e].disabled=!1}},updatePosition:function(t){(t=t||this._btns[0])&&this._input&&this._input.parentNode&&v.copyLayout(t,this._input.parentNode),t=null},rerouteClicks:function(e){var t,n,r=this;if(t=v.addEvent(e,"mouseover",function(){r._disabled||(r._input||r._createInput(),r._overBtn=e,v.copyLayout(e,r._input.parentNode),r._input.parentNode.style.visibility="visible")}),n=v.addEvent(e,"click",function(t){t&&t.preventDefault&&t.preventDefault(),r._disabled||(r._input||r._createInput(),r._overBtn=e,l||r._input.click())}),e.off=function(){t(),n()},r._opts.autoCalibrate&&!v.isVisible(e)){r.log("Upload button not visible");y.setTimeout(function t(){v.isVisible(e)?(r.log("Upload button now visible"),y.setTimeout(function(){r.updatePosition(e),1===r._btns.length&&(r._input.parentNode.style.visibility="hidden")},200)):y.setTimeout(t,500)},500)}return e},submit:function(t,e){!e&&this._queue.length<1?this._opts.onBlankSubmit.call(this):this._disabled||this._active>=this._opts.maxUploads||this._queue.length<1||this._checkFile(this._queue[0])&&(!1!==this._opts.onSubmit.call(this,this._queue[0].name,this._queue[0].ext,this._queue[0].btn,this._queue[0].size)?(this._active++,(!1===this._opts.multiple||!1===this._opts.queue&&this._active>=this._opts.maxUploads)&&this.disable(!0),this._initUpload(this._queue[0])):this.removeCurrent(this._queue[0].id))}},v.IframeUpload={_detachEvents:{},_detach:function(t){this._detachEvents[t]&&(this._detachEvents[t](),delete this._detachEvents[t])},_getHost:function(t){var e=document.createElement("a");return e.href=t,e.hostname?e.hostname.toLowerCase():t},_addFiles:function(t){var e=v.getFilename(t.value),n=v.getExt(e);return!1!==this._opts.onChange.call(this,e,n,this._overBtn,void 0,t)&&(this._queue.push({id:v.getUID(),file:t,name:e,ext:n,btn:this._overBtn,size:null}),!0)},_uploadIframe:function(e,n,r,i,o,a,s){var l,t,u,c=this,h=this._opts,f=v.getUID(),p=v.getIFrame(),d=!1,g=!1;if(t=!0===h.noParams?h.url:h.nginxProgressUrl?t+(-1<t.indexOf("?")?"&":"?")+encodeURIComponent(h.nginxProgressHeader)+"="+encodeURIComponent(f):h.url,l=v.getForm({action:t,target:p.name,method:h.method}),h.onProgress.call(this,0),o&&(o.innerHTML="0%"),i&&(i.style.width="0%"),h.cors){var m=v.getUID();c._detachEvents[m]=v.addEvent(y,"message",function(t){c._getHost(t.origin)==c._getHost(h.url)?(d=!0,c._detach(m),h.endNonXHR.call(c,e.name,e.btn),c._finish(e,"","",t.data,r,n,o,a,s)):c.log("Non-matching origin: "+t.origin)})}c._detachEvents[p.id]=v.addEvent(p,"load",function(){for(var t in c._detach(p.id),h.sessionProgressUrl?l.appendChild(v.getHidden(h.sessionProgressName,f)):h.progressUrl&&l.appendChild(v.getHidden(h.keyParamName,f)),c._form&&v.extendObj(h.data,v.getFormObj(c._form)),h.data)h.data.hasOwnProperty(t)&&l.appendChild(v.getHidden(t,h.data[t]));h.cors&&l.appendChild(v.getHidden(h.corsInputName,y.location.href)),l.appendChild(e.file),c._detachEvents[e.id]=v.addEvent(p,"load",function(){if(p&&p.parentNode&&!g)if(c._detach(e.id),g=!0,delete c._progKeys[f],delete c._sizeFlags[f],a&&v.removeEvent(a,"click",u),h.cors)y.setTimeout(function(){v.remove(p),d||c._errorFinish(e,"","",!1,"error",n,r,o,a,s),h=f=p=r=n=o=a=s=null},600);else{try{var t=(p.contentDocument?p.contentDocument:p.contentWindow.document).body.innerHTML;v.remove(p),p=null,h.endNonXHR.call(c,e.name,e.btn),c._finish(e,"","",t,r,n,o,a,s)}catch(t){c._errorFinish(e,"",t.message,!1,"error",n,r,o,a,s)}h=f=r=n=o=null}}),a&&(u=function(){if(v.removeEvent(a,"click",u),delete c._progKeys[f],delete c._sizeFlags[f],p){g=!0,c._detach(e.id);try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(t){}try{p.src="javascript".concat(":false;")}catch(t){}y.setTimeout(function(){v.remove(p),p=null},1)}c.log("Upload aborted"),h.onAbort.call(c,e.name,e.btn,e.size),c._last(r,n,o,a,s,e,"abort")},v.addEvent(a,"click",u)),c.log("Commencing upload using iframe"),l.submit(),y.setTimeout(function(){v.remove(l),l=null,c.removeCurrent(e.id)},1),c._hasProgUrl&&(c._progKeys[f]=1,y.setTimeout(function(){c._getProg(f,i,r,o,1),i=r=o=null},600))}),document.body.appendChild(l),document.body.appendChild(p)},_getProg:function(o,a,s,l,u){var c,t,h,f=this,p=this._opts,e=(new Date).getTime();if(o&&p)if(p.nginxProgressUrl?t=p.nginxProgressUrl+"?"+encodeURIComponent(p.nginxProgressHeader)+"="+encodeURIComponent(o)+"&_="+e:p.sessionProgressUrl?t=p.sessionProgressUrl:p.progressUrl&&(t=p.progressUrl+"?progresskey="+encodeURIComponent(o)+"&_="+e),h=function(){var t,e,n,r,i;try{if(h&&(p.cors||4===c.readyState)){h=void 0,c.onreadystatechange=function(){};try{i=c.statusText,r=c.status}catch(t){r=i=""}if(p.cors||200<=r&&r<300){if(!1===(t=v.parseJSON(c.responseText)))return void f.log("Error parsing progress response (expecting JSON)");if(p.nginxProgressUrl){if("uploading"==t.state)0<(e=parseInt(t.size,10))&&(n=Math.round(parseInt(t.received,10)/e*100),e=Math.round(e/1024));else if("done"==t.state)n=100;else if("error"==t.state)return void f.log("Error requesting upload progress: "+t.status)}else(p.sessionProgressUrl||p.progressUrl)&&!0===t.success&&(e=parseInt(t.size,10),n=parseInt(t.pct,10));if(n&&(l&&(l.innerHTML=n+"%"),a&&(a.style.width=n+"%"),p.onProgress.call(f,n)),e&&!f._sizeFlags[o]&&(s&&(s.innerHTML=e+"K"),f._sizeFlags[o]=1,p.onUpdateFileSize.call(f,e)),!n&&!e&&u>=f._maxFails)return u++,void f.log("Failed progress request limit reached. Count: "+u);n<100&&f._progKeys[o]&&y.setTimeout(function(){f._getProg(o,a,s,l,u),o=a=s=l=u=null},p.checkProgressInterval)}else delete f._progKeys[o],f.log("Error requesting upload progress: "+r+" "+i);c=e=n=r=i=t=null}}catch(t){f.log("Error requesting upload progress: "+t.message)}},p.cors&&!p.sessionProgressUrl){if(!y.XDomainRequest)return;(c=new y.XDomainRequest).open("GET",t,!0),c.onprogress=c.ontimeout=function(){},c.onload=h,c.onerror=function(){delete f._progKeys[o],o=null,f.log("Error requesting upload progress")}}else{var n,r=p.sessionProgressUrl?"POST":"GET",i={};for(var d in(c=v.newXHR()).onreadystatechange=h,c.open(r,t,!0),p.sessionProgressUrl&&(n=encodeURIComponent(p.sessionProgressName)+"="+encodeURIComponent(o),i["Content-Type"]="application/x-www-form-urlencoded"),p.nginxProgressUrl&&(i[p.nginxProgressHeader]=o),i["X-Requested-With"]="XMLHttpRequest",i.Accept="application/json, text/javascript, */*; q=0.01",v.extendObj(i,p.customProgressHeaders),i)i.hasOwnProperty(d)&&(p.encodeHeaders?c.setRequestHeader(d,v.encodeUTF8(i[d]+"")):c.setRequestHeader(d,i[d]+""));c.send(p.sessionProgressUrl&&n||null)}},_initUpload:function(t){if(!1===this._opts.startNonXHR.call(this,t.name,t.btn))return this._disabled&&this.enable(!0),void this._active--;this._hasProgUrl=!!(this._opts.progressUrl||this._opts.sessionProgressUrl||this._opts.nginxProgressUrl),this._uploadIframe(t,this._progBox,this._sizeBox,this._progBar,this._pctBox,this._abortBtn,this._removeAbort),t=this._progBox=this._sizeBox=this._progBar=this._pctBox=this._abortBtn=this._removeAbort=null}},v.XhrUpload={_addFiles:function(t){var e,n,r,i,o=t.length;for(this._opts.multiple||(o=1),i=0;i<o;i++){if(e=v.getFilename(t[i].name),n=v.getExt(e),r=Math.round(t[i].size/1024),!1===this._opts.onChange.call(this,e,n,this._overBtn,r,t[i]))return!1;this._queue.push({id:v.getUID(),file:t[i],name:e,ext:n,btn:this._overBtn,size:r})}return!0},_uploadXhr:function(r,t,e,n,i,o,a,s,l,u){var c,h,f=this,p=this._opts,d=v.newXHR();for(var g in i&&(i.innerHTML=r.size+"K"),s&&(s.innerHTML="0%"),o&&(o.style.width="0%"),c=function(t,e){var n;try{if(c&&(e||4===d.readyState))if(c=void 0,d.onreadystatechange=function(){},e)4!==d.readyState&&d.abort(),p.onAbort.call(f,r.name,r.btn,r.size),f._last(i,a,s,l,u,r,"abort");else{l&&v.removeEvent(l,"click",h);try{n=d.statusText}catch(t){n=""}200<=d.status&&d.status<300?(p.endXHR.call(f,r.name,r.size,r.btn),f._finish(r,d.status,n,d.responseText,i,a,s,l,u)):f._errorFinish(r,d.status,n,d.responseText,"error",a,i,s,l,u)}}catch(t){e||f._errorFinish(r,-1,t.message,!1,"error",a,i,s,l,u)}},l&&(h=function(){v.removeEvent(l,"click",h),c&&c(void 0,!0)},v.addEvent(l,"click",h)),d.onreadystatechange=c,d.open(p.method.toUpperCase(),t,!0),d.withCredentials=!!p.withCredentials,v.extendObj(n,p.customHeaders),n)n.hasOwnProperty(g)&&(p.encodeHeaders?d.setRequestHeader(g,v.encodeUTF8(n[g]+"")):d.setRequestHeader(g,n[g]+""));if(v.addEvent(d.upload,"progress",function(t){if(t.lengthComputable){var e=Math.round(t.loaded/t.total*100);p.onProgress.call(f,e),s&&(s.innerHTML=e+"%"),o&&(o.style.width=e+"%")}}),p.onProgress.call(this,0),!0===p.multipart){var m=new FormData,y=!1;for(var _ in e)e.hasOwnProperty(_)&&(_!==p.name||!0!==p.noParams||f._form||(y=!0),m.append(_,e[_]));y||m.append(p.name,r.file),this.log("Commencing upload using multipart form"),d.send(m)}else this.log("Commencing upload using binary stream"),d.send(r.file);this.removeCurrent(r.id)},_initUpload:function(t){var e,n={},r={};if(!1===this._opts.startXHR.call(this,t.name,t.size,t.btn))return this._disabled&&this.enable(!0),void this._active--;r["X-Requested-With"]="XMLHttpRequest",r["X-File-Name"]=v.encodeUTF8(t.name),"json"==this._opts.responseType.toLowerCase()&&(r.Accept="application/json, text/javascript, */*; q=0.01"),this._opts.multipart||(r["Content-Type"]="application/octet-stream"),this._form&&v.extendObj(n,v.getFormObj(this._form)),v.extendObj(n,this._opts.data),e=!0===this._opts.noParams?this._opts.url:this._opts.url+(-1<this._opts.url.indexOf("?")?"&":"?")+v.obj2string(n),this._uploadXhr(t,e,n,r,this._sizeBox,this._progBar,this._progBox,this._pctBox,this._abortBtn,this._removeAbort),this._sizeBox=this._progBar=this._progBox=this._pctBox=this._abortBtn=this._removeAbort=null}},v.DragAndDrop={_dragFileCheck:function(t){if(t.dataTransfer.types)for(var e=0;e<t.dataTransfer.types.length;e++)if("Files"==t.dataTransfer.types[e])return!0;return!1},addDropZone:function(t){var e=this,n=[];v.addStyles(t,{zIndex:16777271}),t.ondragenter=function(t){return t.stopPropagation(),t.preventDefault(),e._dragFileCheck(t)&&(0===n.length&&v.addClass(this,e._opts.dragClass),-1===v.indexOf(n,t.target)&&n.push(t.target)),!1},t.ondragover=function(t){return t.stopPropagation(),t.preventDefault(),e._dragFileCheck(t)&&(t.dataTransfer.dropEffect="copy"),!1},t.ondragend=function(){return v.removeClass(this,e._opts.dragClass),!1},t.ondragleave=function(t){return v.arrayDelete(n,t.target),0===n.length&&v.removeClass(this,e._opts.dragClass),!1},t.ondrop=function(t){t.stopPropagation(),t.preventDefault(),v.arrayDelete(n,t.target),0===n.length&&v.removeClass(this,e._opts.dragClass),e._dragFileCheck(t)&&!1!==e._addFiles(t.dataTransfer.files)&&e._cycleQueue()}}},v.extendObj(v.SimpleUpload.prototype,{_createInput:function(){var t=this,e=document.createElement("div");this._input=document.createElement("input"),this._input.type="file",this._input.name=this._opts.name,this._opts.title&&(this._input.title=this._opts.title),n&&!s&&this._opts.multipleSelect&&(this._input.multiple=!0),"accept"in this._input&&""!==this._opts.accept&&(this._input.accept=this._opts.accept),v.addStyles(e,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:16777270}),"0"!==e.style.opacity&&(e.style.filter="alpha(opacity=0)"),v.addStyles(this._input,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer",height:"100%",zIndex:16777270}),this._input.turnOff=v.addEvent(this._input,"change",function(){t._input&&""!==t._input.value&&!1!==t._addFiles(n?t._input.files:t._input)&&(v.removeClass(t._overBtn,t._opts.hoverClass),v.removeClass(t._overBtn,t._opts.focusClass),t._killInput(),t._createInput(),t._opts.autoSubmit&&t.submit())}),""!==t._opts.hoverClass&&(e.mouseOverOff=v.addEvent(e,"mouseover",function(){v.addClass(t._overBtn,t._opts.hoverClass)})),e.mouseOutOff=v.addEvent(e,"mouseout",function(){t._input.parentNode.style.visibility="hidden",""!==t._opts.hoverClass&&(v.removeClass(t._overBtn,t._opts.hoverClass),v.removeClass(t._overBtn,t._opts.focusClass))}),""!==t._opts.focusClass&&(this._input.focusOff=v.addEvent(this._input,"focus",function(){v.addClass(t._overBtn,t._opts.focusClass)}),this._input.blurOff=v.addEvent(this._input,"blur",function(){v.removeClass(t._overBtn,t._opts.focusClass)})),e.appendChild(this._input),document.body.appendChild(e),e=null},_last:function(t,e,n,r,i,o,a,s,l){if(t&&(t.innerHTML=""),n&&(n.innerHTML=""),r&&i&&v.remove(r),e&&v.remove(e),this._active--,t=e=n=r=i=null,this._disabled&&this.enable(!0),this._destroy&&0===this._queue.length&&0===this._active)for(var u in this)this.hasOwnProperty(u)&&delete this[u];else this._opts.onDone.call(this,o.name,s,a,l,o.btn,o.size),this._cycleQueue(),0===this._queue.length&&0===this._active&&this._opts.onAllDone.call(this);o=a=s=l=null},_errorFinish:function(t,e,n,r,i,o,a,s,l,u){this.log("Upload failed: "+e+" "+n),this._opts.onError.call(this,t.name,i,e,n,r,t.btn,t.size),this._last(a,o,s,l,u,t,"error",e,r),n=i=a=o=s=l=u=null},_finish:function(t,e,n,r,i,o,a,s,l){this.log("Server response: "+r),"json"!=this._opts.responseType.toLowerCase()||!1!==(r=v.parseJSON(r))?(this._opts.onComplete.call(this,t.name,r,t.btn,t.size),this._last(i,o,a,s,l,t,"success",e,r),n=i=o=a=s=l=null):this._errorFinish(t,e,n,!1,"parseerror",o,i,s,l)},_checkFile:function(t){var e=!1,n=this._opts.allowedExtensions.length;if(0<n){for(;n--;)if(this._opts.allowedExtensions[n].toLowerCase()==t.ext.toLowerCase()){e=!0;break}if(!e)return this.removeCurrent(t.id),this.log("File extension not permitted"),this._opts.onExtError.call(this,t.name,t.ext),!1}return t.size&&!1!==this._opts.maxSize&&t.size>this._opts.maxSize?(this.removeCurrent(t.id),this.log(t.name+" exceeds "+this._opts.maxSize+"K limit"),this._opts.onSizeError.call(this,t.name,t.size),!1):!(t=null)},_killInput:function(){this._input&&(this._input.turnOff&&this._input.turnOff(),this._input.focusOff&&this._input.focusOff(),this._input.blurOff&&this._input.blurOff(),this._input.parentNode.mouseOverOff&&this._input.parentNode.mouseOverOff(),v.remove(this._input.parentNode),delete this._input,this._input=null)},_cycleQueue:function(){0<this._queue.length&&this._opts.autoSubmit&&this.submit(void 0,!0)},_validateForm:function(){return!(this._form.checkValidity&&!this._form.checkValidity())}}),n?v.extendObj(v.SimpleUpload.prototype,v.XhrUpload):v.extendObj(v.SimpleUpload.prototype,v.IframeUpload),v.extendObj(v.SimpleUpload.prototype,v.DragAndDrop),v},"function"==typeof define&&define.amd?define(function(){return i(r)}):"object"===(void 0===e?"undefined":p(e))&&e.exports?e.exports=i(r):r.ss=i(r)},{}],48:[function(t,a,e){"use strict";var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function s(t,e,n,r,i,o){return h((a=h(h(e,t),h(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function f(t,e,n,r,i,o,a){return s(e&n|~e&r,t,e,i,o,a)}function p(t,e,n,r,i,o,a){return s(e&r|n&~r,t,e,i,o,a)}function d(t,e,n,r,i,o,a){return s(e^n^r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return s(n^(e|~r),t,e,i,o,a)}function l(t,e){var n,r,i,o,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,l=-271733879,u=-1732584194,c=271733878;for(n=0;n<t.length;n+=16)l=g(l=g(l=g(l=g(l=d(l=d(l=d(l=d(l=p(l=p(l=p(l=p(l=f(l=f(l=f(l=f(i=l,u=f(o=u,c=f(a=c,s=f(r=s,l,u,c,t[n],7,-680876936),l,u,t[n+1],12,-389564586),s,l,t[n+2],17,606105819),c,s,t[n+3],22,-1044525330),u=f(u,c=f(c,s=f(s,l,u,c,t[n+4],7,-176418897),l,u,t[n+5],12,1200080426),s,l,t[n+6],17,-1473231341),c,s,t[n+7],22,-45705983),u=f(u,c=f(c,s=f(s,l,u,c,t[n+8],7,1770035416),l,u,t[n+9],12,-1958414417),s,l,t[n+10],17,-42063),c,s,t[n+11],22,-1990404162),u=f(u,c=f(c,s=f(s,l,u,c,t[n+12],7,1804603682),l,u,t[n+13],12,-40341101),s,l,t[n+14],17,-1502002290),c,s,t[n+15],22,1236535329),u=p(u,c=p(c,s=p(s,l,u,c,t[n+1],5,-165796510),l,u,t[n+6],9,-1069501632),s,l,t[n+11],14,643717713),c,s,t[n],20,-373897302),u=p(u,c=p(c,s=p(s,l,u,c,t[n+5],5,-701558691),l,u,t[n+10],9,38016083),s,l,t[n+15],14,-660478335),c,s,t[n+4],20,-405537848),u=p(u,c=p(c,s=p(s,l,u,c,t[n+9],5,568446438),l,u,t[n+14],9,-1019803690),s,l,t[n+3],14,-187363961),c,s,t[n+8],20,1163531501),u=p(u,c=p(c,s=p(s,l,u,c,t[n+13],5,-1444681467),l,u,t[n+2],9,-51403784),s,l,t[n+7],14,1735328473),c,s,t[n+12],20,-1926607734),u=d(u,c=d(c,s=d(s,l,u,c,t[n+5],4,-378558),l,u,t[n+8],11,-2022574463),s,l,t[n+11],16,1839030562),c,s,t[n+14],23,-35309556),u=d(u,c=d(c,s=d(s,l,u,c,t[n+1],4,-1530992060),l,u,t[n+4],11,1272893353),s,l,t[n+7],16,-155497632),c,s,t[n+10],23,-1094730640),u=d(u,c=d(c,s=d(s,l,u,c,t[n+13],4,681279174),l,u,t[n],11,-358537222),s,l,t[n+3],16,-722521979),c,s,t[n+6],23,76029189),u=d(u,c=d(c,s=d(s,l,u,c,t[n+9],4,-640364487),l,u,t[n+12],11,-421815835),s,l,t[n+15],16,530742520),c,s,t[n+2],23,-995338651),u=g(u,c=g(c,s=g(s,l,u,c,t[n],6,-198630844),l,u,t[n+7],10,1126891415),s,l,t[n+14],15,-1416354905),c,s,t[n+5],21,-57434055),u=g(u,c=g(c,s=g(s,l,u,c,t[n+12],6,1700485571),l,u,t[n+3],10,-1894986606),s,l,t[n+10],15,-1051523),c,s,t[n+1],21,-2054922799),u=g(u,c=g(c,s=g(s,l,u,c,t[n+8],6,1873313359),l,u,t[n+15],10,-30611744),s,l,t[n+6],15,-1560198380),c,s,t[n+13],21,1309151649),u=g(u,c=g(c,s=g(s,l,u,c,t[n+4],6,-145523070),l,u,t[n+11],10,-1120210379),s,l,t[n+2],15,718787259),c,s,t[n+9],21,-343485551),s=h(s,r),l=h(l,i),u=h(u,o),c=h(c,a);return[s,l,u,c]}function u(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function c(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function r(t){var e,n,r="0123456789abcdef",i="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),i+=r.charAt(e>>>4&15)+r.charAt(15&e);return i}function n(t){return unescape(encodeURIComponent(t))}function i(t){return u(l(c(e=n(t)),8*e.length));var e}function o(t,e){return function(t,e){var n,r,i=c(t),o=[],a=[];for(o[15]=a[15]=void 0,16<i.length&&(i=l(i,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=l(o.concat(c(e)),512+8*e.length),u(l(a.concat(r),640))}(n(t),n(e))}function e(t,e,n){return e?n?o(e,t):r(o(e,t)):n?i(t):r(i(t))}"function"==typeof define&&define.amd?define(function(){return e}):"object"===(void 0===a?"undefined":m(a))&&a.exports?a.exports=e:t.md5=e}(void 0)},{}],49:[function(t,e,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=void 0,i=function(){return function(g){g=g||{},function(){void 0===g.escapeMode&&(g.escapeMode=!0);g.attributePrefix=g.attributePrefix||"_",g.arrayAccessForm=g.arrayAccessForm||"none",g.emptyNodeForm=g.emptyNodeForm||"text",void 0===g.enableToStringFunc&&(g.enableToStringFunc=!0);g.arrayAccessFormPaths=g.arrayAccessFormPaths||[],void 0===g.skipEmptyTextNodesForObj&&(g.skipEmptyTextNodesForObj=!0);void 0===g.stripWhitespaces&&(g.stripWhitespaces=!0);g.datetimeAccessFormPaths=g.datetimeAccessFormPaths||[],void 0===g.useDoubleQuotes&&(g.useDoubleQuotes=!1);g.xmlElementsFilter=g.xmlElementsFilter||[],g.jsonPropertiesFilter=g.jsonPropertiesFilter||[],void 0===g.keepCData&&(g.keepCData=!1)}();var m={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function y(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!=e||(e=t.nodeName),e}function l(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}function _(t,e,n,r){for(var i=0;i<t.length;i++){var o=t[i];if("string"==typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"==typeof o&&o(e,n,r))break}return i!=t.length}function v(t,e,n){switch(g.arrayAccessForm){case"property":t[e]instanceof Array?t[e+"_asArray"]=t[e]:t[e+"_asArray"]=[t[e]]}!(t[e]instanceof Array)&&0<g.arrayAccessFormPaths.length&&_(g.arrayAccessFormPaths,t,e,n)&&(t[e]=[t[e]])}function b(t){var e=t.split(/[-T:+Z]/g),n=new Date(e[0],e[1]-1,e[2]),r=e[5].split(".");if(n.setHours(e[3],e[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),e[6]&&e[7]){var i=60*e[6]+Number(e[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function x(t,e){if(t.nodeType==m.DOCUMENT_NODE){for(var n=new Object,r=t.childNodes,i=0;i<r.length;i++){if((o=r.item(i)).nodeType==m.ELEMENT_NODE)n[a=y(o)]=x(o,a)}return n}if(t.nodeType==m.ELEMENT_NODE){(n=new Object).__cnt=0;for(r=t.childNodes,i=0;i<r.length;i++){var o,a=y(o=r.item(i));if(o.nodeType!=m.COMMENT_NODE){var s=e+"."+a;h=n,f=o.nodeType,p=a,d=s,f==m.ELEMENT_NODE&&0<g.xmlElementsFilter.length&&!_(g.xmlElementsFilter,h,p,d)||(n.__cnt++,null==n[a]?(n[a]=x(o,s),v(n,a,s)):(null!=n[a]&&(n[a]instanceof Array||(n[a]=[n[a]],v(n,a,s))),n[a][n[a].length]=x(o,s)))}}for(var l=0;l<t.attributes.length;l++){var u=t.attributes.item(l);n.__cnt++,n[g.attributePrefix+u.name]=u.value}var c=t.prefix;return null!=c&&""!=c&&(n.__cnt++,n.__prefix=c),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),g.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==g.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(t,e,n){if(0<g.datetimeAccessFormPaths.length){var r=n.split(".#")[0];return _(g.datetimeAccessFormPaths,t,e,r)?b(t):t}return t}(n.__text,a,e+"."+a)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==g.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==g.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||g.keepCData?1<n.__cnt&&null!=n.__text&&g.skipEmptyTextNodesForObj&&(g.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!g.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(t.nodeType==m.TEXT_NODE||t.nodeType==m.CDATA_SECTION_NODE)return t.nodeValue;var h,f,p,d}function u(t,e,n,r){var i="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+e;if(null!=n)for(var o=0;o<n.length;o++){var a=n[o],s=t[a];g.escapeMode&&(s=l(s)),i+=" "+a.substr(g.attributePrefix.length)+"=",g.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+=r?"/>":">"}function c(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function h(t,e){return"property"==g.arrayAccessForm&&(n=e.toString(),r="_asArray",-1!==n.indexOf(r,n.length-r.length))||0==e.toString().indexOf(g.attributePrefix)||0==e.toString().indexOf("__")||t[e]instanceof Function;var n,r}function f(t){var e=0;if(t instanceof Object)for(var n in t)h(t,n)||e++;return e}function p(t){var e=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(g.attributePrefix)&&e.push(n);return e}function d(t){var e,n,r="";return t instanceof Object?r+=(n="",null!=(e=t).__cdata&&(n+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(g.escapeMode?n+=l(e.__text):n+=e.__text),n):null!=t&&(g.escapeMode?r+=l(t):r+=t),r}function w(t,e){return""===t?e:t+"."+e}function L(t,e,n,r){var i="";if(0==t.length)i+=u(t,e,n,!0);else for(var o=0;o<t.length;o++)i+=u(t[o],e,p(t[o]),!1),i+=C(t[o],w(r,e)),i+=c(t[o],e);return i}function C(t,e){var n,r,i,o="";if(0<f(t))for(var a in t)if(!h(t,a)&&(""==e||(n=t,i=w(e,r=a),0==g.jsonPropertiesFilter.length||""==i||_(g.jsonPropertiesFilter,n,r,i)))){var s=t[a],l=p(s);if(null==s||null==s)o+=u(s,a,l,!0);else if(s instanceof Object)if(s instanceof Array)o+=L(s,a,l,e);else if(s instanceof Date)o+=u(s,a,l,!1),o+=s.toISOString(),o+=c(s,a);else{0<f(s)||null!=s.__text||null!=s.__cdata?(o+=u(s,a,l,!1),o+=C(s,w(e,a)),o+=c(s,a)):o+=u(s,a,l,!0)}else o+=u(s,a,l,!1),o+=d(s),o+=c(s,a)}return o+=d(t)}this.parseXmlString=function(t){var e,n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===t)return null;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!n)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(t){i=null}try{e=r.parseFromString(t,"text/xml"),null!=i&&0<e.getElementsByTagNameNS(i,"parsererror").length&&(e=null)}catch(t){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t);return e},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?b(t):t},this.xml2json=function(t){return x(t)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return C(t,"")},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}},"function"==typeof define&&define.amd?define([],i):"object"===(void 0===n?"undefined":o(n))?e.exports=i():r.X2JS=i()},{}],50:[function(t,e,n){"use strict";L.Path.include({_transform:function(t){return this._renderer&&(t?this._renderer.transformPath(this,t):(this._renderer._resetTransformPath(this),this._update())),this},_onMouseClick:function(t){this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)}});var r={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},i={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"};function u(){return!0}L.Handler.PathDrag=L.Handler.extend({statics:{DRAGGING_CLS:"leaflet-path-draggable"},initialize:function(t){this._path=t,this._matrix=null,this._startPoint=null,this._dragStartPoint=null,this._mapDraggingWasEnabled=!1},addHooks:function(){this._path.on("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className?this._path.options.className+" "+L.Handler.PathDrag.DRAGGING_CLS:L.Handler.PathDrag.DRAGGING_CLS,this._path._path&&L.DomUtil.addClass(this._path._path,L.Handler.PathDrag.DRAGGING_CLS)},removeHooks:function(){this._path.off("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className.replace(new RegExp("\\s+"+L.Handler.PathDrag.DRAGGING_CLS),""),this._path._path&&L.DomUtil.removeClass(this._path._path,L.Handler.PathDrag.DRAGGING_CLS)},moved:function(){return this._path._dragMoved},_onDragStart:function(t){var e=t.originalEvent._simulated?"touchstart":t.originalEvent.type;this._mapDraggingWasEnabled=!1,this._startPoint=t.containerPoint.clone(),this._dragStartPoint=t.containerPoint.clone(),this._matrix=[1,0,0,1,0,0],L.DomEvent.stop(t.originalEvent),L.DomUtil.addClass(this._path._renderer._container,"leaflet-interactive"),L.DomEvent.on(document,i[e],this._onDrag,this).on(document,r[e],this._onDragEnd,this),this._path._map.dragging.enabled()&&(this._path._map.dragging.disable(),this._mapDraggingWasEnabled=!0),this._path._dragMoved=!1,this._path._popup&&this._path._popup._close(),this._replaceCoordGetters(t)},_onDrag:function(t){L.DomEvent.stop(t);var e=t.touches&&1<=t.touches.length?t.touches[0]:t,n=this._path._map.mouseEventToContainerPoint(e);if("touchmove"===t.type&&!this._path._dragMoved&&this._dragStartPoint.distanceTo(n)<=this._path._map.options.tapTolerance)return;var r=n.x,i=n.y,o=r-this._startPoint.x,a=i-this._startPoint.y;(o||a)&&(this._path._dragMoved||(this._path._dragMoved=!0,this._path.fire("dragstart",t),this._path.bringToFront()),this._matrix[4]+=o,this._matrix[5]+=a,this._startPoint.x=r,this._startPoint.y=i,this._path.fire("predrag",t),this._path._transform(this._matrix),this._path.fire("drag",t))},_onDragEnd:function(t){var e,n,r,i,o=this._path._map.mouseEventToContainerPoint(t),a=this.moved();if(a&&(this._transformPoints(this._matrix),this._path._updatePath(),this._path._project(),this._path._transform(null),L.DomEvent.stop(t)),L.DomEvent.off(document,"mousemove touchmove",this._onDrag,this),L.DomEvent.off(document,"mouseup touchend",this._onDragEnd,this),this._restoreCoordGetters(),a){this._path.fire("dragend",{distance:(e=this._dragStartPoint,n=o,r=e.x-n.x,i=e.y-n.y,Math.sqrt(r*r+i*i))});var s=this._path._containsPoint;this._path._containsPoint=L.Util.falseFn,L.Util.requestAnimFrame(function(){L.DomEvent.skipped({type:"click"}),this._path._containsPoint=s},this)}this._matrix=null,this._startPoint=null,this._dragStartPoint=null,this._path._dragMoved=!1,this._mapDraggingWasEnabled&&(a&&L.DomEvent.fakeStop({type:"click"}),this._path._map.dragging.enable())},_transformPoints:function(t,e){var n,r,i,o=this._path,a=L.point(t[4],t[5]),s=o._map.options.crs,l=s.transformation,u=s.scale(o._map.getZoom()),c=s.projection,h=l.untransform(a,u).subtract(l.untransform(L.point(0,0),u)),f=!e;if(o._bounds=new L.LatLngBounds,o._point)e=c.unproject(c.project(o._latlng)._add(h)),f&&(o._latlng=e,o._point._add(a));else if(o._rings||o._parts){var p=o._rings||o._parts,d=o._latlngs;for(e=e||d,L.Util.isArray(d[0])||(d=[d],e=[e]),n=0,r=p.length;n<r;n++){e[n]=e[n]||[];for(var g=0,m=p[n].length;g<m;g++)i=d[n][g],e[n][g]=c.unproject(c.project(i)._add(h)),f&&(o._bounds.extend(d[n][g]),p[n][g]._add(a))}}return e},_replaceCoordGetters:function(){this._path.getLatLng?(this._path.getLatLng_=this._path.getLatLng,this._path.getLatLng=L.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,{})},this._path)):this._path.getLatLngs&&(this._path.getLatLngs_=this._path.getLatLngs,this._path.getLatLngs=L.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,[])},this._path))},_restoreCoordGetters:function(){this._path.getLatLng_?(this._path.getLatLng=this._path.getLatLng_,delete this._path.getLatLng_):this._path.getLatLngs_&&(this._path.getLatLngs=this._path.getLatLngs_,delete this._path.getLatLngs_)}}),L.Handler.PathDrag.makeDraggable=function(t){return t.dragging=new L.Handler.PathDrag(t),t},L.Path.prototype.makeDraggable=function(){return L.Handler.PathDrag.makeDraggable(this)},L.Path.addInitHook(function(){this.options.draggable?(this.options.interactive=!0,this.dragging||L.Handler.PathDrag.makeDraggable(this),this.dragging.enable()):this.dragging&&this.dragging.disable()}),L.SVG.include({_resetTransformPath:function(t){t._path.setAttributeNS(null,"transform","")},transformPath:function(t,e){t._path.setAttributeNS(null,"transform","matrix("+e.join(" ")+")")}}),L.SVG.include(L.Browser.vml?{_resetTransformPath:function(t){t._skew&&(t._skew.on=!1,t._path.removeChild(t._skew),t._skew=null)},transformPath:function(t,e){var n=t._skew;n||(n=L.SVG.create("skew"),t._path.appendChild(n),n.style.behavior="url(#default#VML)",t._skew=n);var r=e[0].toFixed(8)+" "+e[1].toFixed(8)+" "+e[2].toFixed(8)+" "+e[3].toFixed(8)+" 0 0",i=Math.floor(e[4]).toFixed()+", "+Math.floor(e[5]).toFixed(),o=this._path.style,a=parseFloat(o.left),s=parseFloat(o.top),l=parseFloat(o.width),u=parseFloat(o.height);isNaN(a)&&(a=0),isNaN(s)&&(s=0),!isNaN(l)&&l||(l=1),!isNaN(u)&&u||(u=1);var c=(-a/l-.5).toFixed(8)+" "+(-s/u-.5).toFixed(8);n.on="f",n.matrix=r,n.origin=c,n.offset=i,n.on=!0}}:{}),L.Canvas.include({_resetTransformPath:function(t){this._containerCopy&&(delete this._containerCopy,t._containsPoint_&&(t._containsPoint=t._containsPoint_,delete t._containsPoint_,this._requestRedraw(t)))},transformPath:function(t,e){var n,r=this._containerCopy,i=this._ctx,o=L.Browser.retina?2:1,a=this._bounds,s=a.getSize(),l=a.min;r||(n=(r=this._containerCopy=document.createElement("canvas")).getContext("2d"),r.width=o*s.x,r.height=o*s.y,this._removePath(t),this._redraw(),n.translate(o*a.min.x,o*a.min.y),n.drawImage(this._container,0,0),this._initPath(t),t._containsPoint_=t._containsPoint,t._containsPoint=u),i.save(),i.clearRect(l.x,l.y,s.x*o,s.y*o),i.setTransform(1,0,0,1,0,0),i.restore(),i.save(),i.drawImage(this._containerCopy,0,0,s.x,s.y),i.transform.apply(i,e),this._drawing=!0,t._updatePath(),this._drawing=!1,i.restore()}})},{}],51:[function(t,e,n){"use strict";var r,i,Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(){var w=1,L=2,C=4,k=5,S=484813681109536e-20,M=Math.PI/2,E=.16666666666666666,P=.04722222222222222,I=.022156084656084655,T=1e-10,s=.017453292519943295,l=57.29577951308232,g=Math.PI/4,r=2*Math.PI,_=3.14159265359,u={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},c={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},a=/[\s_\-\/\(\)]/g;function O(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(a,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(a,"")===i)return t[n]}var i=function(t){var e,n,r,i={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*s},lat_1:function(t){i.lat1=t*s},lat_2:function(t){i.lat2=t*s},lat_ts:function(t){i.lat_ts=t*s},lon_0:function(t){i.long0=t*s},lon_1:function(t){i.long1=t*s},lon_2:function(t){i.long2=t*s},alpha:function(t){i.alpha=parseFloat(t)*s},lonc:function(t){i.longc=t*s},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=O(c,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*s},pm:function(t){var e=O(u,t);i.from_greenwich=(e||parseFloat(t))*s},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)n=o[e],e in a?"function"==typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},n=1,e=/\s/,o=/[A-Za-z]/,h=/[A-Za-z84]/,f=/[,\]]/,p=/[\d\.E\-\+]/;function d(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=n}function m(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(t,e){return y(e,t),t},r);e&&(t[e]=i)}function y(t,e){if(Array.isArray(t)){var n,r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void y(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r)switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&y(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&y(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void m(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return y(t,e[r]);return m(e,r,t)}else e[r]=t;else e[r]=!0}else e[t]=!0}d.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;e.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case n:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},d.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(f.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},d.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=n)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=n,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},d.prototype.number=function(t){if(!p.test(t)){if(f.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},d.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},d.prototype.keyword=function(t){if(h.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=n)}if(!f.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},d.prototype.neutral=function(t){if(o.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(p.test(t))return this.word=t,void(this.state=3);if(!f.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},d.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var v=.017453292519943295;function b(t){return t*v}var t,x=function(t){var e=new d(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return y(e,i),function(o){"GEOGCS"===o.type?o.projName="longlat":"LOCAL_CS"===o.type?(o.projName="identity",o.local=!0):"object"===Ge(o.PROJECTION)?o.projName=Object.keys(o.PROJECTION)[0]:o.projName=o.PROJECTION,o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),"metre"===o.units&&(o.units="meter"),o.UNIT.convert&&("GEOGCS"===o.type?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var t=o.GEOGCS;function e(t){return t*(o.to_meter||1)}"GEOGCS"===o.type&&(t=o),t&&(t.DATUM?o.datumCode=t.DATUM.name.toLowerCase():o.datumCode=t.name.toLowerCase(),"d_"===o.datumCode.slice(0,2)&&(o.datumCode=o.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==o.datumCode&&"new_zealand_1949"!==o.datumCode||(o.datumCode="nzgd49"),"wgs_1984"===o.datumCode&&("Mercator_Auxiliary_Sphere"===o.PROJECTION&&(o.sphere=!0),o.datumCode="wgs84"),"_ferro"===o.datumCode.slice(-6)&&(o.datumCode=o.datumCode.slice(0,-6)),"_jakarta"===o.datumCode.slice(-8)&&(o.datumCode=o.datumCode.slice(0,-8)),~o.datumCode.indexOf("belge")&&(o.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(o.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===o.ellps.toLowerCase().slice(0,13)&&(o.ellps="intl"),o.a=t.DATUM.SPHEROID.a,o.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),t.DATUM&&t.DATUM.TOWGS84&&(o.datum_params=t.DATUM.TOWGS84),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65"),"ch1903+"===o.datumCode&&(o.datumCode="ch1903"),~o.datumCode.indexOf("israel")&&(o.datumCode="isr93")),o.b&&!isFinite(o.b)&&(o.b=o.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]].forEach(function(t){return e=o,r=(n=t)[0],i=n[1],void(!(r in e)&&i in e&&(e[r]=e[i],3===n.length&&(e[r]=n[2](e[r]))));var e,n,r,i}),o.long0||!o.longc||"Albers_Conic_Equal_Area"!==o.projName&&"Lambert_Azimuthal_Equal_Area"!==o.projName||(o.long0=o.longc),o.lat_ts||!o.lat1||"Stereographic_South_Pole"!==o.projName&&"Polar Stereographic (variant B)"!==o.projName||(o.lat0=b(0<o.lat1?90:-90),o.lat_ts=o.lat1)}(i),i};function N(t){var e=this;if(2===arguments.length){var n=arguments[1];N[t]="string"==typeof n?"+"===n.charAt(0)?i(arguments[1]):x(arguments[1]):n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?N.apply(e,t):N(t)});if("string"==typeof t){if(t in N)return N[t]}else"EPSG"in t?N["EPSG:"+t.EPSG]=t:"ESRI"in t?N["ESRI:"+t.ESRI]=t:"IAU2000"in t?N["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(t=N)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"];var D=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var A=["3857","900913","3785","102113"];function R(t){if("string"!=typeof t)return t;if(t in N)return N[t];if(r=t,D.some(function(t){return-1<r.indexOf(t)})){var e=x(t);if(function(t){var e=O(t,"authority");if(e){var n=O(e,"epsg");return n&&-1<A.indexOf(n)}}(e))return N["EPSG:3857"];var n=function(t){var e=O(t,"extension");if(e)return O(e,"proj4")}(e);return n?i(n):e}return"+"===t[0]?i(t):void 0;var r}var F=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},j=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},B=function(t){return t<0?-1:1},z=function(t){return t},q=function(t){var e=t.lng;t.lng=Math.abs(e)<=_?e:e-B(e)*r},U=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(M-e))/r},G=function(t,e){for(var n,r,i=.5*t,o=M-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=M-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};function V(t){return t}var H=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(90<i*l&&i*l<-90&&180<r*l&&r*l<-180)return null;if(Math.abs(Math.abs(i)-M)<=T)return null;if(this.sphere)e=this.x0+this.a*this.k0*z(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(g+.5*i));else{var o=Math.sin(i),a=U(this.e,i,o);e=this.x0+this.a*this.k0*z(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=M-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=G(this.e,o)))return null}return e=z(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:V,inverse:V,names:["longlat","identity"]}],W={},X=[];function Y(t,e){var n=X.length;return t.names?((X[n]=t).names.forEach(function(t){W[t.toLowerCase()]=n}),this):(console.log(e),!0)}var $={start:function(){H.forEach(Y)},add:Y,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==W[e]&&X[W[e]]?X[W[e]]:void 0}},Z={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Q=Z.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Z.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var K={};function J(t,e){if(!(this instanceof J))return new J(t);e=e||function(t){if(t)throw t};var n=R(t);if("object"===(void 0===n?"undefined":Ge(n))){var r=J.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=O(K,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,a,s,l,u,c,h,f,p,d,g,m,y,_,v=function(t,e,n,r,i){if(!t){var o=O(Z,r);o||(o=Q),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<T)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),b=(o=v.a,a=v.b,v.rf,s=n.R_A,c=((l=o*o)-(u=a*a))/l,h=0,s?(l=(o*=1-c*(E+c*(P+c*I)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(l-u)/u}),x=n.datum||(f=n.datumCode,p=n.datum_params,d=v.a,g=v.b,m=b.es,y=b.ep2,(_={}).datum_type=void 0===f||"none"===f?k:C,p&&(_.datum_params=p.map(parseFloat),0===_.datum_params[0]&&0===_.datum_params[1]&&0===_.datum_params[2]||(_.datum_type=w),3<_.datum_params.length&&(0===_.datum_params[3]&&0===_.datum_params[4]&&0===_.datum_params[5]&&0===_.datum_params[6]||(_.datum_type=L,_.datum_params[3]*=S,_.datum_params[4]*=S,_.datum_params[5]*=S,_.datum_params[6]=_.datum_params[6]/1e6+1))),_.a=d,_.b=g,_.es=m,_.ep2=y,_);F(this,n),F(this,r),this.a=v.a,this.b=v.b,this.rf=v.rf,this.sphere=v.sphere,this.es=b.es,this.e=b.e,this.ep2=b.ep2,this.datum=x,this.init(),e(null,this)}else e(t)}else e(t)}function tt(t){return t===w||t===L}K.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},K.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},K.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},K.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},K.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},K.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},K.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},K.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},K.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},K.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},K.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},K.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},K.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},K.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},K.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},K.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},K.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},(J.projections=$).start();var et=function(t,e,n){return i=e,(r=t).datum_type===i.datum_type&&!(r.a!==i.a||5e-11<Math.abs(r.es-i.es))&&(r.datum_type===w?r.datum_params[0]===i.datum_params[0]&&r.datum_params[1]===i.datum_params[1]&&r.datum_params[2]===i.datum_params[2]:r.datum_type!==L||r.datum_params[0]===i.datum_params[0]&&r.datum_params[1]===i.datum_params[1]&&r.datum_params[2]===i.datum_params[2]&&r.datum_params[3]===i.datum_params[3]&&r.datum_params[4]===i.datum_params[4]&&r.datum_params[5]===i.datum_params[5]&&r.datum_params[6]===i.datum_params[6])?n:t.datum_type===k||e.datum_type===k?n:t.es!==e.es||t.a!==e.a||tt(t.datum_type)||tt(e.datum_type)?(n=function(t,e,n){var r,i,o,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-M&&-1.001*M<l)l=-M;else if(M<l&&l<1.001*M)l=M;else{if(l<-M)return{x:-1/0,y:-1/0,z:t.z};if(M<l)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-e)+u)*i}}(n,t.es,t.a),tt(t.datum_type)&&(n=function(t,e,n){if(e===w)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===L){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+s*t.z)+r,y:u*(l*t.x+t.y-a*t.z)+i,z:u*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),tt(e.datum_type)&&(n=function(t,e,n){if(e===w)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===L){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=(t.x-r)/u,h=(t.y-i)/u,f=(t.z-o)/u;return{x:c+l*h-s*f,y:-l*c+h+a*f,z:s*c-a*h+f}}}(n,e.datum_type,e.datum_params)),function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v=t.x,b=t.y,x=t.z?t.z:0;if(i=Math.sqrt(v*v+b*b),o=Math.sqrt(v*v+b*b+x*x),i/n<1e-12){if(y=0,o/n<1e-12)return _=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(b,v);for(a=x/o,h=(s=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*l,m=0;m++,u=e*(c=n/Math.sqrt(1-e*f*f))/(c+(_=i*h+x*f-c*(1-e*f*f))),g=(d=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*h-(p=s*(1-u)*l)*f,h=p,f=d,1e-24<g*g&&m<30;);return{x:y,y:Math.atan(d/Math.abs(p)),z:_}}(n,e.es,e.a,e.b)):n;var r,i},nt=function(t,e,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=l,i="z"),t.axis[o]){case"e":u[i]=r;break;case"w":u[i]=-r;break;case"n":u[i]=r;break;case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},rt=function(t){var e={x:t[0],y:t[1]};return 2<t.length&&(e.z=t[2]),3<t.length&&(e.m=t[3]),e},it=function(t){ot(t.x),ot(t.y)};function ot(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function at(t,e,n){var r,i,o;return Array.isArray(n)&&(n=rt(n)),it(n),t.datum&&e.datum&&(o=e,((i=t).datum.datum_type===w||i.datum.datum_type===L)&&"WGS84"!==o.datumCode||(o.datum.datum_type===w||o.datum.datum_type===L)&&"WGS84"!==i.datumCode)&&(n=at(t,r=new J("WGS84"),n),t=r),"enu"!==t.axis&&(n=nt(t,!1,n)),"longlat"===t.projName?n={x:n.x*s,y:n.y*s}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=et(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y}),"longlat"===e.projName?n={x:n.x*l,y:n.y*l}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter})),"enu"!==e.axis?nt(e,!0,n):n}var st=J("WGS84");function lt(t,e,n){var r,i,o;return q(n),Array.isArray(n)?(r=at(t,e,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):(i=at(t,e,n),2===(o=Object.keys(n)).length||o.forEach(function(t){"x"!==t&&"y"!==t&&(i[t]=n[t])}),i)}function ut(t){return t instanceof J?t:t.oProj?t.oProj:J(t)}function ct(e,n,t){e=ut(e);var r,i=!1;return void 0===n?(n=e,e=st,i=!0):(void 0!==n.x||Array.isArray(n))&&(t=n,n=e,e=st,i=!0),n=ut(n),t?lt(e,n,t):(r={forward:function(t){return lt(e,n,t)},inverse:function(t){return lt(n,e,t)}},i&&(r.oProj=n),r)}var ht=6,ft="AJSAJS",pt="AFAFAF",dt=65,gt=73,mt=79,yt=86,_t=90,vt={forward:bt,inverse:function(t){var e=Ct(Et(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:xt};function bt(t,e){return e=e||5,n=function(t){var e,n,r,i,o,a,s,l,u=t.lat,c=t.lon,h=.00669438,f=wt(u),p=wt(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);56<=u&&u<64&&3<=c&&c<12&&(l=32);72<=u&&u<84&&(0<=c&&c<9?l=31:9<=c&&c<21?l=33:21<=c&&c<33?l=35:33<=c&&c<42&&(l=37));s=wt(6*(l-1)-180+3),e=h/(1-h),n=6378137/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=e*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(p-s),a=6378137*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*h*h*h/3072*Math.sin(6*f));var d=.9996*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,g=.9996*(a+n*Math.tan(f)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));u<0&&(g+=1e7);return{northing:Math.round(g),easting:Math.round(d),zoneNumber:l,zoneLetter:function(t){var e="Z";t<=84&&72<=t?e="X":t<72&&64<=t?e="W":t<64&&56<=t?e="V":t<56&&48<=t?e="U":t<48&&40<=t?e="T":t<40&&32<=t?e="S":t<32&&24<=t?e="R":t<24&&16<=t?e="Q":t<16&&8<=t?e="P":t<8&&0<=t?e="N":t<0&&-8<=t?e="M":t<-8&&-16<=t?e="L":t<-16&&-24<=t?e="K":t<-24&&-32<=t?e="J":t<-32&&-40<=t?e="H":t<-40&&-48<=t?e="G":t<-48&&-56<=t?e="F":t<-56&&-64<=t?e="E":t<-64&&-72<=t?e="D":t<-72&&-80<=t&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),r=e,i="00000"+n.easting,o="00000"+n.northing,n.zoneNumber+n.zoneLetter+(d=n.easting,g=n.northing,m=n.zoneNumber,y=kt(m),_=Math.floor(d/1e5),v=Math.floor(g/1e5)%20,a=_,s=v,l=y-1,u=ft.charCodeAt(l),c=pt.charCodeAt(l),p=!1,_t<(h=u+a-1)&&(h=h-_t+dt-1,p=!0),(h===gt||u<gt&&gt<h||(gt<h||u<gt)&&p)&&h++,(h===mt||u<mt&&mt<h||(mt<h||u<mt)&&p)&&++h===gt&&h++,_t<h&&(h=h-_t+dt-1),yt<(f=c+s)?(f=f-yt+dt-1,p=!0):p=!1,(f===gt||c<gt&&gt<f||(gt<f||c<gt)&&p)&&f++,(f===mt||c<mt&&mt<f||(mt<f||c<mt)&&p)&&++f===gt&&f++,yt<f&&(f=f-yt+dt-1),String.fromCharCode(h)+String.fromCharCode(f))+i.substr(i.length-5,r)+o.substr(o.length-5,r);var n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v}function xt(t){var e=Ct(Et(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function wt(t){return t*(Math.PI/180)}function Lt(t){return t/Math.PI*180}function Ct(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||60<i)return null;var o,a,s,l,u,c,h,f,p,d=.00669438,g=(1-Math.sqrt(1-d))/(1+Math.sqrt(1-d)),m=n-5e5,y=e;r<"N"&&(y-=1e7),h=6*(i-1)-180+3,o=d/(1-d),p=(f=y/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*f)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*f)+151*g*g*g/96*Math.sin(6*f),a=6378137/Math.sqrt(1-d*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=6378137*(1-d)/Math.pow(1-d*Math.sin(p)*Math.sin(p),1.5),c=m/(.9996*a);var _=p-a*Math.tan(p)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-252*o-3*l*l)*c*c*c*c*c*c/720);_=Lt(_);var v,b=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(b=h+Lt(b),t.accuracy){var x=Ct({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:x.lat,right:x.lon,bottom:_,left:b}}else v={lat:_,lon:b};return v}function kt(t){var e=t%ht;return 0===e&&(e=ht),e}function Et(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||n<o+3)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var l=kt(a),u=function(t,e){var n=ft.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===gt&&n++,n===mt&&n++,_t<n){if(i)throw"Bad character: "+t;n=dt,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(t,e){if("V"<t)throw"MGRSPoint given invalid Northing "+t;var n=pt.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===gt&&n++,n===mt&&n++,yt<n){if(i)throw"Bad character: "+t;n=dt,i=!0}r+=1e5}return r}(r.charAt(1),l);c<St(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,m=0,y=0;return 0<g&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),m=parseFloat(p)*f,d=t.substring(o+g),y=parseFloat(d)*f),{easting:m+u,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function St(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(0<=e)return e;throw"Invalid zone letter: "+t}function Mt(t,e,n){if(!(this instanceof Mt))return new Mt(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===(void 0===t?"undefined":Ge(t)))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Mt.fromMGRS=function(t){return new Mt(xt(t))},Mt.prototype.toMGRS=function(t){return bt([this.x,this.y],t)};var Pt=.01068115234375,It=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Pt))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Pt)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},Tt=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},Ot=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(Tt(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<T)return i}return i};var Nt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=It(this.es),this.ml0=Tt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=z(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),p=Math.abs(l)>T?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var m=Tt(o,s,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*u/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var y=l*Math.sin(a);if(Math.abs(Math.abs(y)-1)<T)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),1<=(y=Math.abs(r))){if(T<y-1)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=Ot(e,this.es,this.en),Math.abs(n)<M){var s=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>T?Math.tan(n):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),f=Math.pow(u,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);r=n-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=z(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/l)}else r=M*B(a),i=0;else{var m=Math.exp(o/this.k0),y=.5*(m-1/m),_=this.lat0+a/this.k0,v=Math.cos(_);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(y,2))),r=Math.asin(e),a<0&&(r=-r),i=0===y&&0===v?0:z(Math.atan2(y,v)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Dt=function(t){var e=Math.exp(t);return e=(e-1/e)/2},At=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},Rt=function(t){var e,n,r,i=Math.abs(t);return e=i*(1+i/(At(1,i)+1)),i=0===(r=(n=1+e)-1)?e:e*Math.log(n)/r,t<0?-i:i},Ft=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;0<=--i;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},jt=function(t,e,n){for(var r,i,o,a,s=Math.sin(e),l=Math.cos(e),u=Dt(n),c=(r=n,i=((i=Math.exp(r))+1/i)/2),h=2*l*c,f=-2*s*u,p=t.length-1,d=t[p],g=0,m=0,y=0;0<=--p;)o=m,a=g,d=h*(m=d)-o-f*(g=y)+t[p],y=f*m-a+h*g;return[(h=s*c)*d-(f=l*u)*y,h*y+f*d]};var Bt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=Ft(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;0<=--i;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=z(t.x-this.long0),n=t.y;n=Ft(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,At(r,i*a)),e=Rt(Math.tan(e));var s,l,u=jt(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):l=s=1/0,t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=jt(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Dt(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(a*u,At(l,u*s)),r=Math.atan2(l,u*s),e=z(r+this.long0),n=Ft(this.cgb,i)}else n=e=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var zt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(z(e)+Math.PI)/Math.PI)+1)<0)return 0;if(60<t)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*s,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Bt.init.apply(this),this.forward=Bt.forward,this.inverse=Bt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},qt=function(t,e){return Math.pow((1-t)/(1+t),e)};var Ut={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+g)/(Math.pow(Math.tan(.5*this.lat0+g),this.C)*qt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+g),this.C)*qt(this.e*Math.sin(n),this.ratexp))-M,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+g)/this.K,1/this.C),i=20;0<i&&(n=2*Math.atan(r*qt(this.e*Math.sin(t.y),-.5*this.e))-M,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var Gt={init:function(){Ut.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=z(t.x-this.long0),Ut.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Ut.inverse.apply(this,[t]),t.x=z(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Vt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=T&&(this.k0=.5*(1+B(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=T&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=T&&(this.k0=.5*this.cons*j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/U(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=j(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-M,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=z(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=T&&Math.abs(l+this.lat0)<=T?(t.x=NaN,t.y=NaN):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0):(n=2*Math.atan(this.ssfn_(l,u,this.e))-M,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=T?(o=U(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0)):(Math.abs(this.sinlat0)<T?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0)),t},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=T||(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<T?0<this.lat0?z(this.long0+Math.atan2(t.x,-1*t.y)):z(this.long0+Math.atan2(t.x,t.y)):z(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s)))),t.x=e,t.y=n,t}if(Math.abs(this.coslat0)<=T){if(a<=T)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*G(this.e,r),e=this.con*z(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=T?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=z(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*G(this.e,Math.tan(.5*(M+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(M+t))*Math.pow((1-e)/(1+e),.5*n)}};var Ht={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;1e-7<Math.abs(u-c);){if(20<++h)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]};var Wt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=U(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=U(this.e,this.lat1,Math.sin(this.lat1)),l=U(this.e,this.lat2,Math.sin(this.lat2));0<=this.lat0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);i=.5*((r=this.el/u)-1/r);var h=(this.el*this.el-c*u)/(this.el*this.el+c*u),f=(c-u)/(c+u),p=z(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=z(this.long0);var d=z(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=0<=this.lat0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:0<=this.lat0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=z(i-this.long0);if(Math.abs(Math.abs(o)-M)<=T)r=0<o?-1:1,n=this.al/this.bl*Math.log(Math.tan(g+r*this.gamma0*.5)),e=-1*r*M*this.al/this.bl;else{var s=U(this.e,o,Math.sin(o)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),h=Math.sin(this.bl*a),f=(u*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=T?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=T?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<T?(t.x=this.long0,t.y=M):Math.abs(s+1)<T?(t.x=this.long0,t.y=-1*M):(t.y=G(this.e,l),t.x=z(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var Xt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<T)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=j(this.e,e,n),i=U(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=j(this.e,o,a),l=U(this.e,this.lat2,o),u=U(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>T?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=T&&(n=B(n)*(M-2*T));var r,i,o=Math.abs(Math.abs(n)-M);if(T<o)r=U(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*z(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;0<this.ns?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*a,n*s)),0!==e||0<this.ns){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=G(this.e,r)))return null}else i=-M;return o=z(l/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Yt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,l=t.x,u=t.y,c=z(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e;for(var u=s=0;t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1,0===s&&u<15;);return 15<=u?null:t},names:["Krovak","krovak"]},$t=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Zt=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Qt=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Kt=function(t){return.05859375*t*t*(1+.75*t)},Jt=function(t){return t*t*t*(35/3072)},te=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},ee=function(t){return Math.abs(t)<M?t:t-B(t)*Math.PI},ne=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var re={init:function(){this.sphere||(this.e0=Zt(this.es),this.e1=Qt(this.es),this.e2=Kt(this.es),this.e3=Jt(this.es),this.ml0=this.a*$t(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=z(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=te(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*a*a/(1-this.es);e=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=this.a*$t(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=ne(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-M)<=T)return t.x=this.long0,t.y=M,i<0&&(t.y*=-1),t;var l=te(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/l,f=h*h;e=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return t.x=z(n+this.long0),t.y=ee(e),t},names:["Cassini","Cassini_Soldner","cass"]},ie=function(t,e){var n;return 1e-7<t?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var oe=.3333333333333333,ae=.17222222222222222,se=.10257936507936508,le=.06388888888888888,ue=.0664021164021164,ce=.016415012942191543;var he={init:function(){var t,e,n,r,i=Math.abs(this.lat0);if(Math.abs(i-M)<T?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<T?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=ie(this.e,1),this.mmf=.5/(1-this.es),this.apa=(e=this.es,(r=[])[0]=e*oe,n=e*e,r[0]+=n*ae,r[1]=n*le,n*=e,r[0]+=n*se,r[1]+=n*ue,r[2]=n*ce,r),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ie(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,l,u,c,h=t.x,f=t.y;if(h=z(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=T)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.phi0)<T)return null;n=g-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(u=l=s=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=ie(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=M+f,a=this.qp-a;break;case this.S_POLE:u=f-M,a=this.qp+a}if(Math.abs(u)<T)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:0<=a?(e=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,l,u,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if(1<(n=.5*(p=Math.sqrt(h*h+f*f))))return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=T?0:Math.asin(f*g/p),h*=g,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=T?this.phi0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),h*=g*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=M-n;break;case this.S_POLE:n-=M}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(a=Math.sqrt(h*h+f*f))<T)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+f*i*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*r-f*this.sinb1*i):(s=f*i/a,o=this.qp*s,f=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(h,f),l=Math.asin(s),u=this.apa,c=l+l,n=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return t.x=z(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},fe=function(t){return 1<Math.abs(t)&&(t=1<t?1:-1),Math.asin(t)};var pe={init:function(){Math.abs(this.lat1+this.lat2)<T||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=j(this.e3,this.sin_po,this.cos_po),this.qs1=ie(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=j(this.e3,this.sin_po,this.cos_po),this.qs2=ie(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ie(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>T?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=ie(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*z(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,0<=this.ns0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),(i=0)!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=z(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=fe(.5*e);if(t<T)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};var de={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,l=t.x,u=t.y;return r=z(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),0<(o=this.sin_p14*e+this.cos_p14*n*i)||Math.abs(o)<=T?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=fe(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=z(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var ge={init:function(){this.sphere||(this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=z(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=ie(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=z(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*M:M;for(var r,i,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=z(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var me={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=z(e-this.long0),i=ee(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=z(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ee(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var ye={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zt(this.es),this.e1=Qt(this.es),this.e2=Kt(this.es),this.e3=Jt(this.es),this.ml0=this.a*$t(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=z(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=T?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(ee(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=T)e=this.a*a,n=-1*this.ml0;else{var s=te(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*$t(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,l,u;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=T)e=z(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=T){n=l;break}e=z(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=T)n=0,e=z(this.long0+r/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),f=this.a*$t(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*l)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=T){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=z(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var _e={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/S*1e-5,a=i,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var u,c=l,h=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)u=p*c+f*h,f=f*c-p*h,p=u,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)n=u*a+l*s,l=l*a-u*s,u=n,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,m=a,y=s;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,m+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),y+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var _=this.B_re[1],v=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,_+=e*(this.B_re[e]*d-this.B_im[e]*g),v+=e*(this.B_im[e]*d+this.B_re[e]*g);var b=_*_+v*v;c=(m*_+y*v)/b,h=(y*_-m*v)/b}var x=c,w=h,L=1,C=0;for(e=1;e<=9;e++)L*=x,C+=this.D[e]*L;var k=this.lat0+C*S*1e5,E=this.long0+w;return t.x=E,t.y=k,t},names:["New_Zealand_Map_Grid","nzmg"]};var ve={init:function(){},forward:function(t){var e=t.x,n=t.y,r=z(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=z(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var be={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=It(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=z(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<T)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*Tt(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=fe((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=fe(Math.sin(e)/this.n)),r=z(r+this.long0),e=ee(e)):(e=Ot(t.y/this.a,this.es,this.en),(i=Math.abs(e))<M?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=z(n)):i-T<M&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var xe={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=z(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<T)break}i/=2,Math.PI/2-Math.abs(n)<T&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),.999999999999<Math.abs(n)&&(n=.999999999999),e=Math.asin(n);var r=z(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,1<Math.abs(n)&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var we={init:function(){Math.abs(this.lat1+this.lat2)<T||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zt(this.es),this.e1=Qt(this.es),this.e2=Kt(this.es),this.e3=Jt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=j(this.e,this.sinphi,this.cosphi),this.ml1=$t(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<T?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=j(this.e,this.sinphi,this.cosphi),this.ml2=$t(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=$t(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=$t(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*z(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,0<=this.ns?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=z(this.long0+o/this.ns),r=ee(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=ne(a,this.e0,this.e1,this.e2,this.e3),i=z(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]};var Le={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=z(r-this.long0);Math.abs(i)<=T&&(e=this.x0+this.R*o,n=this.y0);var a=fe(2*Math.abs(i/Math.PI));(Math.abs(o)<=T||Math.abs(Math.abs(i)-M)<=T)&&(e=this.x0,n=0<=i?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),f=h*h,p=h*(2/u-1),d=p*p,g=Math.PI*this.R*(s*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(f-d)))/(d+l);o<0&&(g=-g),e=this.x0+g;var m=l+h;return g=Math.PI*this.R*(p*m-s*Math.sqrt((d+l)*(l+1)-m*m))/(d+l),n=0<=i?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,l,u,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),1<Math.abs(h)&&(h=0<=h?1:-1),f=Math.acos(h)/3,n=0<=t.y?(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<T?this.long0:z(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Ce={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w,L=t.x,C=t.y,k=Math.sin(t.y),E=Math.cos(t.y),S=z(L-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=T?(t.x=this.x0+this.a*(M-C)*Math.sin(S),t.y=this.y0-this.a*(M-C)*Math.cos(S)):Math.abs(this.sin_p12+1)<=T?(t.x=this.x0+this.a*(M+C)*Math.sin(S),t.y=this.y0+this.a*(M+C)*Math.cos(S)):(_=this.sin_p12*k+this.cos_p12*E*Math.cos(S),y=(m=Math.acos(_))/Math.sin(m),t.x=this.x0+this.a*y*E*Math.sin(S),t.y=this.y0+this.a*y*(this.cos_p12*k-this.sin_p12*E*Math.cos(S))):(e=Zt(this.es),n=Qt(this.es),r=Kt(this.es),i=Jt(this.es),Math.abs(this.sin_p12-1)<=T?(o=this.a*$t(e,n,r,i,M),a=this.a*$t(e,n,r,i,C),t.x=this.x0+(o-a)*Math.sin(S),t.y=this.y0-(o-a)*Math.cos(S)):Math.abs(this.sin_p12+1)<=T?(o=this.a*$t(e,n,r,i,M),a=this.a*$t(e,n,r,i,C),t.x=this.x0+(o+a)*Math.sin(S),t.y=this.y0+(o+a)*Math.cos(S)):(s=k/E,l=te(this.a,this.e,this.sin_p12),u=te(this.a,this.e,k),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*E)),v=0===(h=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=T?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(S)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*v*(1-(b=v*v)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(x=b*v)/8*(d=f*p)*(1-2*g)+(w=x*v)/120*(g*(4-7*g)-3*f*f*(1-7*g))-w*v/48*d),t.x=this.x0+m*Math.sin(h),t.y=this.y0+m*Math.cos(h))),t},inverse:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*M*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=T?a=this.lat0:(a=fe(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-M,o=Math.abs(s)<=T?0<=this.lat0?z(this.long0+Math.atan2(t.x,-t.y)):z(this.long0-Math.atan2(-t.x,t.y)):z(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return l=Zt(this.es),u=Qt(this.es),c=Kt(this.es),h=Jt(this.es),Math.abs(this.sin_p12-1)<=T?(f=this.a*$t(l,u,c,h,M),e=Math.sqrt(t.x*t.x+t.y*t.y),a=ne((f-e)/this.a,l,u,c,h),o=z(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=T?(f=this.a*$t(l,u,c,h,M),e=Math.sqrt(t.x*t.x+t.y*t.y),a=ne((e-f)/this.a,l,u,c,h),o=z(this.long0+Math.atan2(t.x,t.y))):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=te(this.a,this.e,this.sin_p12),m=Math.cos(g),_=-(y=this.e*this.cos_p12*m)*y/(1-this.es),v=3*this.es*(1-_)*this.sin_p12*this.cos_p12*m/(1-this.es),w=1-_*(x=(b=e/p)-_*(1+_)*Math.pow(b,3)/6-v*(1+3*_)*Math.pow(b,4)/24)*x/2-b*x*x*x/6,d=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*m),o=z(this.long0+Math.asin(Math.sin(g)*Math.sin(x)/Math.cos(d))),a=Math.atan((1-this.es*w*this.sin_p12/Math.sin(d))*Math.tan(d)/(1-this.es))),t.x=o,t.y=a,t},names:["Azimuthal_Equidistant","aeqd"]};var ke={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l=t.x,u=t.y;return r=z(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(0<(o=this.sin_p14*e+this.cos_p14*n*i)||Math.abs(o)<=T)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=fe(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=T?s=this.lat0:(s=fe(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-M,a=Math.abs(o)<=T?0<=this.lat0?z(this.long0+Math.atan2(t.x,-t.y)):z(this.long0-Math.atan2(-t.x,t.y)):z(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r))),t.x=a,t.y=s,t},names:["ortho"]},Ee=1,Se=2,Me=3,Pe=4,Ie=5,Te=6,Oe={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Ne(t,e,n,r){var i;return t<T?(r.value=Oe.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=g?r.value=Oe.AREA_0:g<i&&i<=M+g?(r.value=Oe.AREA_1,i-=M):M+g<i||i<=-(M+g)?(r.value=Oe.AREA_2,i=0<=i?i-_:i+_):(r.value=Oe.AREA_3,i+=M)),i}function De(t,e){var n=t+e;return n<-_?n+=r:+_<n&&(n-=r),n}var Ae={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=M-g/2?this.face=Ie:this.lat0<=-(M-g/2)?this.face=Te:Math.abs(this.long0)<=g?this.face=Ee:Math.abs(this.long0)<=M+g?this.face=0<this.long0?Se:Pe:this.face=Me,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Ie)i=M-e,g<=n&&n<=M+g?(l.value=Oe.AREA_0,r=n-M):M+g<n||n<=-(M+g)?(l.value=Oe.AREA_1,r=0<n?n-_:n+_):-(M+g)<n&&n<=-g?(l.value=Oe.AREA_2,r=n+M):(l.value=Oe.AREA_3,r=n);else if(this.face===Te)i=M+e,g<=n&&n<=M+g?(l.value=Oe.AREA_0,r=-n+M):n<g&&-g<=n?(l.value=Oe.AREA_1,r=-n):n<-g&&-(M+g)<=n?(l.value=Oe.AREA_2,r=-n-M):(l.value=Oe.AREA_3,r=0<n?-n+_:-n-_);else{var u,c,h,f,p,d;this.face===Se?n=De(n,+M):this.face===Me?n=De(n,+_):this.face===Pe&&(n=De(n,-M)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),u=p*Math.cos(n),c=p*d,h=f,this.face===Ee?r=Ne(i=Math.acos(u),h,c,l):this.face===Se?r=Ne(i=Math.acos(c),h,-u,l):this.face===Me?r=Ne(i=Math.acos(-u),h,-c,l):this.face===Pe?r=Ne(i=Math.acos(-c),h,u,l):(i=r=0,l.value=Oe.AREA_0)}return a=Math.atan(12/_*(r+Math.acos(Math.sin(r)*Math.cos(g))-M)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Oe.AREA_1?a+=M:l.value===Oe.AREA_2?a+=_:l.value===Oe.AREA_3&&(a+=1.5*_),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,l,u,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),0<=t.x&&t.x>=Math.abs(t.y)?d.value=Oe.AREA_0:0<=t.y&&t.y>=Math.abs(t.x)?(d.value=Oe.AREA_1,e-=M):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=Oe.AREA_2,e=e<0?e+_:e-_):(d.value=Oe.AREA_3,e+=M),u=_/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:1<s&&(s=1),this.face===Ie)l=Math.acos(s),p.phi=M-l,d.value===Oe.AREA_0?p.lam=a+M:d.value===Oe.AREA_1?p.lam=a<0?a+_:a-_:d.value===Oe.AREA_2?p.lam=a-M:p.lam=a;else if(this.face===Te)l=Math.acos(s),p.phi=l-M,d.value===Oe.AREA_0?p.lam=-a+M:d.value===Oe.AREA_1?p.lam=-a:d.value===Oe.AREA_2?p.lam=-a-M:p.lam=a<0?-a-_:-a+_;else{var g,m,y;u=(g=s)*g,m=1<=(u+=(y=1<=u?0:Math.sqrt(1-u)*Math.sin(a))*y)?0:Math.sqrt(1-u),d.value===Oe.AREA_1?(u=m,m=-y,y=u):d.value===Oe.AREA_2?(m=-m,y=-y):d.value===Oe.AREA_3&&(u=m,m=y,y=-u),this.face===Se?(u=g,g=-m,m=u):this.face===Me?(g=-g,m=-m):this.face===Pe&&(u=g,g=m,m=-u),p.phi=Math.acos(-y)-M,p.lam=Math.atan2(m,g),this.face===Se?p.lam=De(p.lam,-M):this.face===Me?p.lam=De(p.lam,-_):this.face===Pe&&(p.lam=De(p.lam,+M))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Re=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Fe=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],je=l/5,Be=1/je,ze=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var qe,Ue={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=z(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*je);r<0?r=0:18<=r&&(r=17);var i={x:ze(Re[r],n=l*(n-Be*r))*e,y:ze(Fe[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var r={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(1<=r.y)r.x/=Re[18][0],r.y=t.y<0?-M:M;else{var e=Math.floor(18*r.y);for(e<0?e=0:18<=e&&(e=17);;)if(Fe[e][0]>r.y)--e;else{if(!(Fe[e+1][0]<=r.y))break;++e}var i=Fe[e],n=5*(r.y-i[0])/(Fe[e+1][0]-i[0]);n=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}(function(t){return(ze(i,t)-r.y)/(n=t,(e=i)[1]+n*(2*e[2]+3*n*e[3]));var e,n},n,T,100),r.x/=ze(Re[e],n),r.y=(5*e+n)*s,t.y<0&&(r.y=-r.y)}return r.x=z(r.x+this.long0),r},names:["Robinson","robin"]};return ct.defaultDatum="WGS84",ct.Proj=J,ct.WGS84=new ct.Proj("WGS84"),ct.Point=Mt,ct.toPoint=rt,ct.defs=N,ct.transform=at,ct.mgrs=vt,ct.version="2.5.0",(qe=ct).Proj.projections.add(Nt),qe.Proj.projections.add(Bt),qe.Proj.projections.add(zt),qe.Proj.projections.add(Gt),qe.Proj.projections.add(Vt),qe.Proj.projections.add(Ht),qe.Proj.projections.add(Wt),qe.Proj.projections.add(Xt),qe.Proj.projections.add(Yt),qe.Proj.projections.add(re),qe.Proj.projections.add(he),qe.Proj.projections.add(pe),qe.Proj.projections.add(de),qe.Proj.projections.add(ge),qe.Proj.projections.add(me),qe.Proj.projections.add(ye),qe.Proj.projections.add(_e),qe.Proj.projections.add(ve),qe.Proj.projections.add(be),qe.Proj.projections.add(xe),qe.Proj.projections.add(we),qe.Proj.projections.add(Le),qe.Proj.projections.add(Ce),qe.Proj.projections.add(ke),qe.Proj.projections.add(Ae),qe.Proj.projections.add(Ue),ct},"object"===((r=void 0)===n?"undefined":Ge(n))&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):r.proj4=i()},{}],52:[function(r,i,t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e,n;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],t);else if("object"===(void 0===i?"undefined":o(i))&&"object"===o(i.exports))e=r("leaflet"),n=r("./proj4-src"),i.exports=t(e,n);else{if(void 0===window.L||void 0===window.proj4)throw"Leaflet and proj4 must be loaded first";t(window.L,window.proj4)}}(function(l,r){return r.__esModule&&r.default&&(r=r.default),l.Proj={},l.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},l.Proj.Projection=l.Class.extend({initialize:function(t,e,n){var r=l.Proj._isProj4Obj(t);this._proj=r?t:this._projFromCodeDef(t,e),this.bounds=r?e:n},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new l.Point(e[0],e[1])},unproject:function(t,e){var n=this._proj.inverse([t.x,t.y]);return new l.LatLng(n[1],n[0],e)},_projFromCodeDef:function(t,e){if(e)r.defs(t,e);else if(void 0===r.defs[t]){var n=t.split(":");if(3<n.length&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===r.defs[t])throw"No projection definition for code "+t}return r(t)}}),l.Proj.CRS=l.Class.extend({includes:l.CRS,options:{transformation:new l.Transformation(1,0,-1,0)},initialize:function(t,e,n){var r,i,o,a;if(l.Proj._isProj4Obj(t)?(r=(i=t).srsCode,a=e||{},this.projection=new l.Proj.Projection(i,a.bounds)):(r=t,o=e,a=n||{},this.projection=new l.Proj.Projection(r,o,a.bounds)),l.Util.setOptions(this,a),this.code=r,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new l.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var s=this.options.resolutions.length-1;0<=s;s--)this.options.resolutions[s]&&(this._scales[s]=1/this.options.resolutions[s])}this.infinite=!this.options.bounds},scale:function(t){var e,n=Math.floor(t);return t===n?this._scales[t]:(e=this._scales[n])+(this._scales[n+1]-e)*(t-n)},zoom:function(t){var e,n,r=this._closestElement(this._scales,t),i=this._scales.indexOf(r);return t===r?i:void 0===r?-1/0:(n=i+1,void 0===(e=this._scales[n])?1/0:(t-r)/(e-r)+i)},distance:l.CRS.Earth.distance,R:l.CRS.Earth.R,_closestElement:function(t,e){for(var n,r=t.length;r--;)t[r]<=e&&(void 0===n||n<t[r])&&(n=t[r]);return n}}),l.Proj.GeoJSON=l.GeoJSON.extend({initialize:function(t,e){this._callLevel=0,l.GeoJSON.prototype.initialize.call(this,t,e)},addData:function(t){var n;t&&(t.crs&&"name"===t.crs.type?n=new l.Proj.CRS(t.crs.properties.name):t.crs&&t.crs.type&&(n=new l.Proj.CRS(t.crs.type+":"+t.crs.properties.code)),void 0!==n&&(this.options.coordsToLatLng=function(t){var e=l.point(t[0],t[1]);return n.projection.unproject(e)})),this._callLevel++;try{l.GeoJSON.prototype.addData.call(this,t)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),l.Proj.geoJson=function(t,e){return new l.Proj.GeoJSON(t,e)},l.Proj.ImageOverlay=l.ImageOverlay.extend({initialize:function(t,e,n){l.ImageOverlay.prototype.initialize.call(this,t,null,n),this._projectedBounds=e},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=l.point(this._projectedBounds.min.x,this._projectedBounds.max.y),r=this._projectedToNewLayerPoint(n,t.zoom,t.center);l.DomUtil.setTransform(this._image,r,e)},_reset:function(){var t=this._map.getZoom(),e=this._map.getPixelOrigin(),n=l.bounds(this._transform(this._projectedBounds.min,t)._subtract(e),this._transform(this._projectedBounds.max,t)._subtract(e)),r=n.getSize();l.DomUtil.setPosition(this._image,n.min),this._image.style.width=r.x+"px",this._image.style.height=r.y+"px"},_projectedToNewLayerPoint:function(t,e,n){var r=this._map.getSize()._divideBy(2),i=this._map.project(n,e)._subtract(r)._round().add(this._map._getMapPanePos());return this._transform(t,e)._subtract(i)},_transform:function(t,e){var n=this._map.options.crs,r=n.transformation,i=n.scale(e);return r.transform(t,i)}}),l.Proj.imageOverlay=function(t,e,n){return new l.Proj.ImageOverlay(t,e,n)},l.Proj})},{"./proj4-src":51,leaflet:560}],53:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};L.ResponsivePopup=L.Popup.extend({options:{hasTip:!0},_initLayout:function(){var t="leaflet-popup",e=this._container=L.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=L.DomUtil.create("div",t+"-content-wrapper",e);if(this._contentNode=L.DomUtil.create("div",t+"-content",n),L.DomEvent.disableClickPropagation(n),L.DomEvent.disableScrollPropagation(this._contentNode),L.DomEvent.on(n,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",t+"-tip-container",e),this.options.hasTip||(this._tipContainer.style.visibility="hidden"),this._tip=L.DomUtil.create("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=L.DomUtil.create("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",L.DomEvent.on(r,"click",this._onCloseButtonClick,this)}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._map.layerPointToContainerPoint(t),n=this._container.offsetWidth,r=this._container.offsetHeight,i=L.point(this.options.autoPanPadding),o=L.point(this.options.autoPanPaddingTopLeft||i),a=L.point(this.options.autoPanPaddingBottomRight||i),s=this._map.getSize(),l=this._getAnchor(),u=L.point(this.options.offset),c=Math.abs(u.x),h=Math.abs(u.y);this.options.hasTip&&(c+=11,h+=11,L.DomUtil.removeClass(this._container,"leaflet-resp-popup-north"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-south"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-east"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-west"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-north-east"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-north-west"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-south-east"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-south-west"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-east-north"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-east-south"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-west-north"),L.DomUtil.removeClass(this._container,"leaflet-resp-popup-west-south"));var f=!0,p=!0,d=!0,g=!0,m=!1;e.y+l.y-h-r-Math.abs(o.y)<0&&(f=!1),e.y+l.y+h+r+Math.abs(a.y)>s.y&&(p=!1),e.x+l.x-c-n-Math.abs(o.x)<0&&(d=!1),e.x+l.x+c+n+Math.abs(a.x)>s.x&&(g=!1);var y=n/2-l.x,_=r/2-l.y;if(f||p){var v=e.x+l.x-n/2,b=e.x+l.x+n/2;v<Math.abs(o.x)&&(y=n/2-l.x-Math.abs(o.x)+v),b>s.x-Math.abs(a.x)&&(y=n/2-l.x+b-s.x+Math.abs(a.x))}if(d||g){var x=e.y+l.y-r/2,w=e.y+l.y+r/2;x<Math.abs(o.y)&&(_=r/2-l.y-Math.abs(o.y)+x),w>s.y-Math.abs(a.y)&&(_=r/2-l.y+w-s.y+Math.abs(a.y))}if(f)m=t.subtract(L.point(y,-l.y+r+h,!0)),this.options.hasTip&&(e.x+l.x<o.x+12+11?(m.x=t.x+l.x,L.DomUtil.addClass(this._container,"leaflet-resp-popup-north-east"),this._tipContainer.style.top=r+"px",this._tipContainer.style.left="0px"):e.x+l.x>s.x-a.x-12-11?(m.x=t.x+l.x-n,L.DomUtil.addClass(this._container,"leaflet-resp-popup-north-west"),this._tipContainer.style.top=r+"px",this._tipContainer.style.left=n+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-north"),this._tipContainer.style.top=r+"px",this._tipContainer.style.left=t.x+l.x-m.x+"px"));else if(d)m=t.subtract(L.point(-l.x+n+c,_,!0)),this.options.hasTip&&(e.y+l.y<o.y+12+11?(m.y=t.y+l.y,L.DomUtil.addClass(this._container,"leaflet-resp-popup-west-south"),this._tipContainer.style.top="0px"):e.y+l.y>s.y-a.y-12-11?(m.y=t.y+l.y-r,L.DomUtil.addClass(this._container,"leaflet-resp-popup-west-north"),this._tipContainer.style.top=r+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-west"),this._tipContainer.style.top=t.y+l.y-m.y+"px"),this._tipContainer.style.left=n+"px");else if(p)m=t.subtract(L.point(y,-l.y-h,!0)),this.options.hasTip&&(e.x+l.x<o.x+12+11?(m.x=t.x+l.x,L.DomUtil.addClass(this._container,"leaflet-resp-popup-south-east"),this._tipContainer.style.top="0px",this._tipContainer.style.left="0px"):e.x+l.x>s.x-a.x-12-11?(m.x=t.x+l.x-n,L.DomUtil.addClass(this._container,"leaflet-resp-popup-south-west"),this._tipContainer.style.top="0px",this._tipContainer.style.left=n+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-south"),this._tipContainer.style.top="0px",this._tipContainer.style.left=t.x+l.x-m.x+"px"));else if(g)m=t.subtract(L.point(-l.x-c,_,!0)),this.options.hasTip&&(e.y+l.y<o.y+12+11?(m.y=t.y+l.y,L.DomUtil.addClass(this._container,"leaflet-resp-popup-east-south"),this._tipContainer.style.top="0px"):e.y+l.y>s.y-a.y-12-11?(m.y=t.y+l.y-r,L.DomUtil.addClass(this._container,"leaflet-resp-popup-east-north"),this._tipContainer.style.top=r+"px"):(L.DomUtil.addClass(this._container,"leaflet-resp-popup-east"),this._tipContainer.style.top=t.y+l.y-m.y+"px"),this._tipContainer.style.left="0px");else{m=(t=this._map.latLngToLayerPoint(this._map.getCenter())).subtract(L.point(n/2,r/2)),this.options.hasTip}e.x<0||e.y<0||e.x>s.x||(e.y,s.y),n-Math.abs(o.x)-Math.abs(a.x)>s.x||(Math.abs(o.y),Math.abs(a.y),s.y),L.DomUtil.setPosition(this._container,m)}}}),L.responsivePopup=function(t,e){return new L.ResponsivePopup(t,e)},"object"===(void 0===n?"undefined":r(n))&&void 0!==e&&(n.responsivePopup=L.responsivePopup,n.ResponsivePopup=L.ResponsivePopup)},{}],54:[function(t,e,n){"use strict";var r,i,Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(t){function B(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&h(r),i&&m(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function e(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r,i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(i&&h(i),t){case"Point":r=z(e).geometry;break;case"LineString":r=U(e).geometry;break;case"Polygon":r=q(e).geometry;break;case"MultiPoint":r=o(e).geometry;break;case"MultiLineString":r=v(e).geometry;break;case"MultiPolygon":r=b(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(r.bbox=i),r}function z(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!V(t[0])||!V(t[1]))throw new Error("coordinates must contain numbers");return B({type:"Point",coordinates:t},e,n)}function n(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return G(t.map(function(t){return z(t,e)}),n)}function q(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!V(i[0][0])||!V(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return B({type:"Polygon",coordinates:t},e,n)}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return G(t.map(function(t){return q(t,e)}),n)}function U(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!V(t[0][1])||!V(t[0][1]))throw new Error("coordinates must contain numbers");return B({type:"LineString",coordinates:t},e,n)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return G(t.map(function(t){return U(t,e)}),n)}function G(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&h(n),r&&m(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function v(t,e,n){if(!t)throw new Error("coordinates is required");return B({type:"MultiLineString",coordinates:t},e,n)}function o(t,e,n){if(!t)throw new Error("coordinates is required");return B({type:"MultiPoint",coordinates:t},e,n)}function b(t,e,n){if(!t)throw new Error("coordinates is required");return B({type:"MultiPolygon",coordinates:t},e,n)}function a(t,e,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return B({type:"GeometryCollection",geometries:t},e,n)}function s(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=fo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function g(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=fo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function l(t,e){return p(g(t,e))}function f(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function p(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function _(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function u(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return d(g(t,e),n||"kilometers")}function c(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var r=go[e||"meters"];if(!r)throw new Error("invalid original units");var i=go[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function V(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function H(t){return!!t&&t.constructor===Object}function h(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!V(t))throw new Error("bbox must only contain numbers")})}function m(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(void 0===t?"undefined":Vp(t)))throw new Error("id must be a number or a string")}function w(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,m=d?t.features.length:1,y=0;y<m;y++){s=(c=!!(u=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<s;_++){var v=0,b=0;if(null!==(a=c?u.geometries[_]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(l,f,y,v,b),f++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++)e(l[r],f,y,v,b),f++,"MultiPoint"===x&&v++;"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++)e(l[r][i],f,y,v,b),f++;"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++)e(l[r][i][o],f,y,v,b),f++;b++}v++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)w(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function y(t,o,a,e){var s=a;return w(t,function(t,e,n,r,i){s=0===e&&void 0===a?t:o(s,t,e,n,r,i)},e),s}function x(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function L(t,n,r){var i=r;return x(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function C(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function k(t,n,r){var i=r;return C(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function E(t){var e=[];return w(t,function(t){e.push(t)}),e}function S(t,e){var n,r,i,o,a,s,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,f,u,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],f,u,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,u,c,h);f++}}function M(t,o,a){var s=a;return S(t,function(t,e,n,r,i){s=0===e&&void 0===a?t:o(s,t,e,n,r,i)}),s}function P(t,s){S(t,function(t,n,r,e,i){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return void s(B(t,r,{bbox:e,id:i}),n,0)}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,e){s(B({type:o,coordinates:t},r),n,e)})})}function I(t,r,i){var o=i;return P(t,function(t,e,n){o=0===e&&0===n&&void 0===i?t:r(o,t,e,n)}),o}function T(t,h){P(t,function(s,l,u){var c=0;if(s.geometry){var t=s.geometry.type;"Point"!==t&&"MultiPoint"!==t&&y(s,function(t,e,n,r,i,o){var a=U([t,e],s.properties);return h(a,l,u,o,c),c++,e})}})}function O(t,o,a){var s=a,l=!1;return T(t,function(t,e,n,r,i){s=!1===l&&void 0===a?t:o(s,t,e,n,r,i),l=!0}),s}function N(t,a){if(!t)throw new Error("geojson is required");P(t,function(t,e,n){if(null!==t.geometry){var r=t.geometry.type,i=t.geometry.coordinates;switch(r){case"LineString":a(t,e,n,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)a(U(i[o],t.properties),e,n,o)}}})}function D(t,i,o){var a=o;return N(t,function(t,e,n,r){a=0===e&&void 0===o?t:i(a,t,e,n,r)}),a}function W(t){var e=[1/0,1/0,-1/0,-1/0];return w(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function X(t){if(!t)throw new Error("obj is required");var e=A(t);if(1<e.length&&V(e[0])&&V(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function A(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return R(e),e;throw new Error("No valid coordinates")}function R(t){if(1<t.length&&V(t[0])&&V(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return R(t[0]);throw new Error("coordinates must only contain numbers")}function F(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function j(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Y(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function $(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function Q(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function K(t,e,n){n=n||{};for(var r=Object.keys(vo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=null!=a?a:vo[o],bo[o]=a}bo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var c,h,f,s=(c=function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,l=t[o+1][a],u=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){s|=e<=l?8:0,s|=e<=u?4:0,s|=e<=c?2:0;var f,p,d,g,m=!1;if(5==(s|=e<=h?1:0)||10===s){var y=(l+u+c+h)/4;5===s&&y<e?(s=10,m=!0):10===s&&y<e&&(s=5,m=!0)}if(0!==s&&15!==s)f=p=d=g=.5,1===s?(d=1-J(e,l,h),p=1-J(e,c,h)):2===s?(p=J(e,h,c),g=1-J(e,u,c)):3===s?(d=1-J(e,l,h),g=1-J(e,u,c)):4===s?(f=J(e,l,u),g=J(e,c,u)):5===s?(f=J(e,l,u),g=J(e,c,u),p=1-J(e,c,h),d=1-J(e,l,h)):6===s?(p=J(e,h,c),f=J(e,l,u)):7===s?(d=1-J(e,l,h),f=J(e,l,u)):8===s?(d=J(e,h,l),f=1-J(e,u,l)):9===s?(p=1-J(e,c,h),f=1-J(e,u,l)):10===s?(f=1-J(e,u,l),g=1-J(e,u,c),p=J(e,h,c),d=J(e,h,l)):11===s?(f=1-J(e,u,l),g=1-J(e,u,c)):12===s?(d=J(e,h,l),g=J(e,c,u)):13===s?(p=1-J(e,c,h),g=J(e,c,u)):14===s?(d=J(e,h,l),p=J(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:m,top:f,right:g,bottom:p,left:d}}}}return i}(t,e),h=[],f=0,c.rows,c.cols,c.cells.forEach(function(t,u){t.forEach(function(t,e){if(void 0!==t&&5!==(l=t).cval&&10!==l.cval&&!tt(t)){var n=function(t,e,n){var r,i,o,a=t.length,s=[],l=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),f=h.cval,p=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][f]);s.push([n+p[0],e+p[1]]),p=nt(h,o=c[f]),s.push([n+p[0],e+p[1]]),et(h);for(var d=n+l[f],g=e+u[f],m=f;0<=d&&0<=g&&g<a&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};o=c[f],r=l[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?(-1===u[m]?(o="left",r=-1):(o="right",r=1),i=0):-1===l[m]&&(o="bottom",r=0,i=-1):10===f&&(h.flipped?-1===l[m]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===u[m]&&(o="left",r=-1,i=0))),p=nt(h,o),s.push([d+p[0],g+p[1]]),et(h),d+=r,g+=i,m=f}return{path:s,info:"closed"}}(c.cells,u,e),r=!1;if("mergeable"===n.info)for(var i=n.path[n.path.length-1][0],o=n.path[n.path.length-1][1],a=f-1;0<=a;a--)if(Math.abs(h[a][0][0]-i)<=1e-7&&Math.abs(h[a][0][1]-o)<=1e-7){for(var s=n.path.length-2;0<=s;--s)h[a].unshift(n.path[s]);r=!0;break}r||(h[f++]=n.path)}var l})}),h);return"function"==typeof bo.successCallback&&bo.successCallback(s),s}function J(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function it(t,e){if(!(this instanceof it))return new it(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){at(t,0,t.children.length,e,t)}function at(t,e,n,r,i){i||(i=dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],st(i,t.leaf?r(o):o);return i}function st(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function lt(t,e){return t.minX-e.minX}function ut(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ft(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function pt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,xo(t,o,e,n,i),a.push(e,o,o,n))}function mt(t,e){return t(e={exports:{}},e.exports),e.exports}function yt(t,e){if(!(this instanceof yt))return new yt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:e<t?1:0},0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function _t(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],l=s.slice();for(o=0;o<t.length;o++)Oo(t[o],s)||l.push(t[o]);var u=function(r){var t=r.length;if(t<3){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return 2===t&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:e}var i=new Array(t);for(n=0;n<t;++n)i[n]=n;i.sort(function(t,e){var n=r[t][0]-r[e][0];return n||r[t][1]-r[e][1]});var o=[i[0],i[1]],a=[i[0],i[1]];for(n=2;n<t;++n){for(var s=i[n],l=r[s],u=o.length;1<u&&Po(r[o[u-2]],r[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(s),u=a.length;1<u&&0<=Po(r[a[u-2]],r[a[u-1]],l);)u-=1,a.pop();a.push(s)}e=new Array(a.length+o.length-2);for(var c=0,h=(n=0,o.length);n<h;++n)e[c++]=o[n];for(var f=a.length-2;0<f;--f)e[c++]=a[f];return e}(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=wo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var l=i[s];o.remove(l),r=Lt(l,r),a.push(r)}var u=wo(16);for(s=0;s<a.length;s++)u.insert(wt(a[s]));for(var c=e*e,h=n*n;a.length;){var f=a.shift(),p=f.p,d=f.next.p,g=Ct(p,d);if(!(g<h)){var m=g/c;(l=function(t,e,n,r,i,o,a){for(var s=new Io(null,vt),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?kt(c,n,r):function(t,e,n){if(bt(t,n)||bt(e,n))return 0;var r=Et(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Et(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Et(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Et(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,c);o<h||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),p=f.node,d=kt(p,e,n),g=kt(p,r,i);if(f.dist<d&&f.dist<g&&xt(n,p,a)&&xt(r,p,a))return p}(l=s.pop())&&(l=l.node)}return null}(o,f.prev.p,p,d,f.next.next.p,m,u))&&Math.min(Ct(l,p),Ct(l,d))<=m&&(a.push(f),a.push(Lt(l,f)),o.remove(l),u.remove(f),u.insert(wt(f)),u.insert(wt(f.next)))}}f=r;for(var y=[];y.push(f.p),(f=f.next)!==r;);return y.push(f.p),y}function vt(t,e){return t.dist-e.dist}function bt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function xt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),l=0;l<s.length;l++)if(u=s[l].p,c=s[l].next.p,h=t,u!==(f=e)&&c!==h&&0<No(u,c,h)!=0<No(u,c,f)&&0<No(h,f,u)!=0<No(h,f,c))return!1;var u,c,h,f;return!0}function wt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Lt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,(n.prev=e).next.prev=n,e.next=n):(n.prev=n).next=n,n}function Ct(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function kt(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);1<s?(r=n[0],i=n[1]):0<s&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function Et(t,e,n,r,i,o,a,s){var l,u,c,h,f=n-t,p=r-e,d=a-i,g=s-o,m=t-i,y=e-o,_=f*f+p*p,v=f*d+p*g,b=d*d+g*g,x=f*m+p*y,w=d*m+g*y,L=_*b-v*v,C=L,k=L;0===L?(u=0,C=1,h=w,k=b):(h=_*w-v*x,(u=v*w-b*x)<0?(u=0,h=w,k=b):C<u&&(u=C,h=w+v,k=b)),h<0?-x<(h=0)?u=0:_<-x?u=C:(u=-x,C=_):k<h&&(h=k,-x+v<0?u=0:_<-x+v?u=C:(u=-x+v,C=_));var E=(1-(c=0===h?0:h/k))*i+c*a-((1-(l=0===u?0:u/C))*t+l*n),S=(1-c)*o+c*s-((1-l)*e+l*r);return E*E+S*S}function St(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(w(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=Do(r,n);return 3<i.length?q([i]):null}function Mt(t,e,n){if("object"!=Vp(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i,o,a=X(t),s=A(e),l=e.geometry?e.geometry.type:e.type,u=e.bbox;if(u&&!1==(i=a,(o=u)[0]<=i[0]&&o[1]<=i[1]&&o[2]>=i[0]&&o[3]>=i[1]))return!1;"Polygon"===l&&(s=[s]);for(var c=0,h=!1;c<s.length&&!h;c++)if(Pt(a,s[c][0],r)){for(var f=!1,p=1;p<s[c].length&&!f;)Pt(a,s[c][p],!r)&&(f=!0),p++;f||(h=!0)}return h}function Pt(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(r=!r)}return r}function It(t,e){var n=[];return S(e,function(e){C(t,function(t){Mt(t,e)&&n.push(t)})}),G(n)}function Tt(t,n){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var o=!1;return G(function(t){if(t.length<3)return[];t.sort(Nt);for(var e,n,r,i,o,a,s=t.length-1,l=t[s].x,u=t[0].x,c=t[s].y,h=c;s--;)t[s].y<c&&(c=t[s].y),t[s].y>h&&(h=t[s].y);var f,p=u-l,d=h-c,g=d<p?p:d,m=.5*(u+l),y=.5*(h+c),_=[new Ot({x:m-20*g,y:y-g,__sentinel:!0},{x:m,y:y+20*g,__sentinel:!0},{x:m+20*g,y:y-g,__sentinel:!0})],v=[],b=[];for(s=t.length;s--;){for(b.length=0,f=_.length;f--;)0<(p=t[s].x-_[f].x)&&p*p>_[f].r?(v.push(_[f]),_.splice(f,1)):p*p+(d=t[s].y-_[f].y)*d>_[f].r||(b.push(_[f].a,_[f].b,_[f].b,_[f].c,_[f].c,_[f].a),_.splice(f,1));for(Dt(b),f=b.length;f;)n=b[--f],e=b[--f],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),1e-12<Math.abs(a)&&_.push(new Ot(e,n,r))}for(Array.prototype.push.apply(v,_),s=v.length;s--;)(v[s].a.__sentinel||v[s].b.__sentinel||v[s].c.__sentinel)&&v.splice(s,1);return v}(t.features.map(function(t){var e={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return n?e.z=t.properties[n]:3===t.geometry.coordinates.length&&(o=!0,e.z=t.geometry.coordinates[2]),e})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],r=[t.c.x,t.c.y],i={};return o?(e.push(t.a.z),n.push(t.b.z),r.push(t.c.z)):i={a:t.a.z,b:t.b.z,c:t.c.z},q([[e,n,r,e]],i)}))}function Ot(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(l*u-a*c)/h,this.y=(o*c-s*u)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Nt(t,e){return e.x-t.x}function Dt(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function At(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.units,i=X(t),o=X(e),a=_(o[1]-i[1]),s=_(o[0]-i[0]),l=_(i[1]),u=_(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(u);return d(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function Rt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ft(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return Ft(t)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return jt(t);default:throw new Error("unknown GeoJSON type")}var e,n}function Ft(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(r){var i={};return r&&Object.keys(r).forEach(function(t){var e=r[t];"object"==(void 0===e?"undefined":Vp(e))?null===e?i[t]=null:e.length?i[t]=e.map(function(t){return t}):i[t]=n(e):i[t]=e}),i}(e.properties),n.geometry=jt(e.geometry),n}function jt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return jt(t)}):e.coordinates=function e(t){return"object"!=Vp(t[0])?t.slice():t.map(function(t){return e(t)})}(t.coordinates),e}function Bt(t,e){function i(t,e){e.length&&e.pop();for(var n=u[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(l(n[r],r));t<0&&jo(e,i)}function o(t){return l(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function n(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(n)}var l=Fo(t.transform),u=t.arcs;return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=s(e.arcs);break;case"MultiPolygon":n=e.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(e)}function zt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function qt(t){var e,n=Ut(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ut(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ut)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Gt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Vt(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Ht(t){return t[0].toString()+","+t[1].toString()}function Wt(r,t){if(!H(t=t||{}))throw new Error("options is invalid");var e=t.mutate;if("FeatureCollection"!==Q(r))throw new Error("geojson must be a FeatureCollection");if(!r.features.length)throw new Error("geojson is empty");!1!==e&&void 0!==e||(r=Rt(r));var n=function(t){var e={};P(r,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}();if(!n)throw new Error("geojson must be homogenous");switch(n){case"LineString":return function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Rt(t));var r=[],i=D(t,function(u,t){return function(t,e){var n,r=u.geometry.coordinates,i=e.geometry.coordinates,o=Ht(r[0]),a=Ht(r[r.length-1]),s=Ht(i[0]),l=Ht(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(s===a)n=r.concat(i.slice(1));else if(o===s)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return U(n)}(0,t)||(r.push(u),t)});return i&&r.push(i),r.length?1===r.length?r[0]:v(r.map(function(t){return t.coordinates})):null}(r,t);case"Polygon":return function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Q(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Rt(t));var r=[];P(t,function(t){r.push(t.geometry)});var i=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var n=u.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),s<e&&(s=e),n<a&&(a=n),l<n&&(l=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,l=-1/0,u={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var c in t)e(t[c]);return o<=s&&a<=l?[o,a,s,l]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(qt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===n.type?qt:Ut)(n);return r}(t)),a=0<e&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-h)*p),Math.round((t[1]-f)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,l=0,u=t.length,c=new Array(u);++s<u;)n=t[s],o=Math.round((n[0]-h)*p),a=Math.round((n[1]-f)*d),o===r&&a===i||(c[l++]=[r=o,i=a]);for(c.length=l;l<e;)l=c.push([c[0][0],c[0][1]]);return c}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function l(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var h=e[0],f=e[1],u=e[2],c=e[3],p=u-h?(n-1)/(u-h):1,d=c-f?(n-1)/(c-f):1,g={GeometryCollection:function(t){t.geometries.forEach(l)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var m in t)l(t[m]);return{scale:[1/p,1/d],translate:[h,f]}}(t,o,e),s=function(t){function e(t){var e,n,r,i,o,a,s,l;if(r=p.get(e=h[t[0]]))for(s=0,l=r.length;s<l;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!zo(h[n],h[r]))return!1;return!0}(i=r[s],t))return t[0]=i[0],void(t[1]=i[1]);if(o=p.get(n=h[t[1]]))for(s=0,l=o.length;s<l;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!zo(h[n],h[o]))return!1;return!0}(a=o[s],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),d.push(t)}function a(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var o=c(t),a=c(e),s=0;s<i;++s)if(!zo(h[n+(s+o)%i],h[r+(s+a)%i]))return!1;return!0}function s(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],a=i-n;if(a!==o-r)return!1;for(var s=c(t),l=a-c(e),u=0;u<a;++u)if(!zo(h[n+(u+s)%a],h[o-(u+l)%a]))return!1;return!0}function c(t){for(var e=t[0],n=t[1],r=e,i=r,o=h[r];++r<n;){var a=h[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var n,r,i,o,h=t.coordinates,l=t.lines,u=t.rings,f=l.length+u.length;for(delete t.lines,delete t.rings,i=0,o=l.length;i<o;++i)for(n=l[i];n=n.next;)++f;for(i=0,o=u.length;i<o;++i)for(r=u[i];r=r.next;)++f;var p=Bo(2*f*1.4,Vo,zo),d=t.arcs=[];for(i=0,o=l.length;i<o;++i)for(n=l[i];e(n),n=n.next;);for(i=0,o=u.length;i<o;++i)if((r=u[i]).next)for(;e(r),r=r.next;);else!function(t){var e,n,r,i,o;if(n=p.get(e=h[t[0]]))for(i=0,o=n.length;i<o;++i){if(a(r=n[i],t))return t[0]=r[0],t[1]=r[1];if(s(r,t))return t[0]=r[1],t[1]=r[0]}if(n=p.get(e=h[t[0]+c(t)]))for(i=0,o=n.length;i<o;++i){if(a(r=n[i],t))return t[0]=r[0],t[1]=r[1];if(s(r,t))return t[0]=r[1],t[1]=r[0]}n?n.push(t):p.set(e,[t]),d.push(t)}(r);return t}(function(t){var e,n,r,i=function(t){function e(t,e,n,r){if(f[n]!==t){f[n]=t;var i=p[n];if(0<=i){var o=d[n];i===e&&o===r||i===r&&o===e||(++m,g[n]=1)}else p[n]=e,d[n]=r}}function i(t){return Vo(l[t])}function o(t,e){return zo(l[t],l[e])}var n,r,a,s,l=t.coordinates,u=t.lines,c=t.rings,h=function(){for(var t=Bo(1.4*l.length,i,o,Int32Array,-1,Int32Array),e=new Int32Array(l.length),n=0,r=l.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),f=new Int32Array(l.length),p=new Int32Array(l.length),d=new Int32Array(l.length),g=new Int8Array(l.length),m=0;for(n=0,r=l.length;n<r;++n)f[n]=p[n]=d[n]=-1;for(n=0,r=u.length;n<r;++n){var y=u[n],_=y[0],v=y[1];for(a=h[_],s=h[++_],++m,g[a]=1;++_<=v;)e(n,a,a=s,s=h[_]);++m,g[s]=1}for(n=0,r=l.length;n<r;++n)f[n]=-1;for(n=0,r=c.length;n<r;++n){var b=c[n],x=b[0]+1,w=b[1];for(e(n,h[w-1],a=h[x-1],s=h[x]);++x<=w;)e(n,a,a=s,s=h[x])}f=p=d=null;var L,C=function(i,o,a,t,s){3===arguments.length&&(t=Array,s=null);for(var l=new t(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),u=i-1,e=0;e<i;++e)l[e]=s;return{add:function(t){for(var e=o(t)&u,n=l[e],r=0;n!=s;){if(a(n,t))return!0;if(++r>=i)throw new Error("full hashset");n=l[e=e+1&u]}return l[e]=t,!0},has:function(t){for(var e=o(t)&u,n=l[e],r=0;n!=s;){if(a(n,t))return!0;if(++r>=i)break;n=l[e=e+1&u]}return!1},values:function(){for(var t=[],e=0,n=l.length;e<n;++e){var r=l[e];r!=s&&t.push(r)}return t}}}(1.4*m,Vo,zo);for(n=0,r=l.length;n<r;++n)g[L=h[n]]&&C.add(l[L]);return C}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var l=a[n],u=l[0],c=l[1];++u<c;)i.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(v=(_=d)-p,zt(m=o,y=f,_),zt(m,y,y+v),zt(m,y+v,_),o[d]=o[f],g=!0,p=f));var m,y,_,v;return t}(function(t){function e(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)l[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)l[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],l=[],u={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:l,lines:a,rings:s,objects:t}}(t))),l=s.coordinates,u=Bo(1.4*s.arcs.length,Gt,Vt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map(function(t,e){return u.set(t,e),l.slice(t[0],t[1]+1)}),delete s.coordinates,l=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,l=o.length,u=o[0],c=u[0],h=u[1];++a<l;)r=(u=o[a])[0],i=u[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s}({geoms:a(r).geometry});return function(t){return Bt(t,function(s,t){function n(e){e.forEach(function(t){t.forEach(function(t){(u[t=t<0?~t:t]||(u[t]=[])).push(e)})}),r.push(e)}function l(t){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Bt(s,{type:"Polygon",arcs:[t]}).coordinates[0])}var u={},r=[],i=[];return t.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),r.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(t){var e,n=[];if(t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].length<2&&n.push(t)})})}),1<(e=(n=function(f,i){function t(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){o[t<0?~t:t]=1}),a.push(r)}}var o={},p={},d={},a=[],s=-1;return i.forEach(function(t,e){var n,r=f.arcs[t<0?~t:t];r.length<3&&!r[1][0]&&!r[1][1]&&(n=i[++s],i[s]=t,i[e]=n)}),i.forEach(function(t){var e,n,r,i,o,a,s=(r=t,o=f.arcs[r<0?~r:r],a=o[0],f.transform?(i=[0,0],o.forEach(function(t){i[0]+=t[0],i[1]+=t[1]})):i=o[o.length-1],r<0?[i,a]:[a,i]),l=s[0],u=s[1];if(e=d[l])if(delete d[e.end],e.push(t),e.end=u,n=p[u]){delete p[n.start];var c=n===e?e:e.concat(n);p[c.start=e.start]=d[c.end=n.end]=c}else p[e.start]=d[e.end]=e;else if(e=p[u])if(delete p[e.start],e.unshift(t),e.start=l,n=d[l]){delete d[n.end];var h=n===e?e:n.concat(e);p[h.start=n.start]=d[h.end=e.end]=h}else p[e.start]=d[e.end]=e;else p[(e=[t]).start=l]=d[e.end=u]=e}),t(d,p),t(p,d),i.forEach(function(t){o[t<0?~t:t]||a.push([t])}),a}(s,n)).length))for(var r,i,o=1,a=l(n[0]);o<e;++o)(r=l(n[o]))>a&&(i=n[0],n[0]=n[o],n[o]=i,a=r);return n})}}.apply(this,arguments))}(i,i.objects.geoms.geometries)}(r,t);default:throw new Error(n+" is not supported")}}function Xt(t,e){var n="object"==(void 0===e?"undefined":Vp(e))?e.mutate:e;if(!t)throw new Error("geojson is required");var r=Q(t),i=[];switch(r){case"LineString":i=Yt(t);break;case"MultiLineString":case"Polygon":A(t).forEach(function(t){i.push(Yt(t))});break;case"MultiPolygon":A(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Yt(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};A(t).forEach(function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):B({type:r,coordinates:i},t.properties,t.bbox,t.id)}function Yt(t){var e,n,r=A(t);if(2===r.length&&(e=r[0],n=r[1],e[0]!==n[0]||e[1]!==n[1]))return r;var i,o,a,s,l,u,c,h,f,p,d,g,m,y,_=[],v=r.length-1;_.push(r[0]);for(var b=1;b<v;b++)i=r[b-1],o=r[b],s=i,l=a=r[b+1],void 0,c=(u=o)[0],h=u[1],f=s[0],p=s[1],d=l[0],g=l[1],(c-f)*(y=g-p)-(h-p)*(m=d-f)==0&&(Math.abs(m)>=Math.abs(y)?0<m?f<=c&&c<=d:d<=c&&c<=f:0<y?p<=h&&h<=g:g<=h&&h<=p)||_.push(o);return _.push(a),_}function $t(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);1<s?(r=n.x,i=n.y):0<s&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function Zt(t,e,n){if(t.length<=2)return t;var r,i,o,a,s=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)s=n=t[o],l=r,void 0,u=s.x-l.x,c=s.y-l.y,e<u*u+c*c&&(i.push(n),r=n);var s,l,u,c;return r!==n&&i.push(n),i}(t,s),i=s,o=(r=t).length-1,a=[r[0]],function t(e,n,r,i,o){for(var a,s=i,l=n+1;l<r;l++){var u=$t(e[l],e[n],e[r]);s<u&&(a=l,s=u)}i<s&&(1<a-n&&t(e,n,a,i,o),o.push(e[a]),1<r-a&&t(e,a,r,i,o))}(r,0,o,i,a),a.push(r[o]),a}function Qt(t,e,n){return Zt(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function Kt(t,i,o){return t.map(function(t){var e,n=t.map(function(t){return{x:t[0],y:t[1]}});if(n.length<4)throw new Error("invalid polygon");for(var r=Zt(n,i,o).map(function(t){return[t.x,t.y]});(e=r).length<3||3===e.length&&e[2][0]===e[0][0]&&e[2][1]===e[0][1];)r=Zt(n,i-=.01*i,o).map(function(t){return[t.x,t.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function Jt(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!V(n))throw new Error("resolution must be an number");if(!V(r))throw new Error("sharpness must be an number");for(var i=[],o=new Ho({points:$(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var s=o.pos(a);Math.floor(a/100)%2==0&&i.push([s.x,s.y])}return U(i,t.properties)}function te(t){h(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[e,n];return q([[o,[r,n],[r,i],[e,i],o]])}function ee(t){return te(W(t))}function ne(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(At(t.slice(0,2),[r,n])>=At(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function re(t,e,n,r){if(!H(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties,a=X(t),s=_(a[0]),l=_(a[1]),u=_(n),c=g(e,i),h=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(u));return z([p(s+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(h))),p(h)],o)}function ie(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=(void 0===n?"undefined":Vp(n)))throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var o=[],a=0;a<r;a++)o.push(re(t,e,-360*a/r,n).geometry.coordinates);return o.push(o[0]),q([o],i)}function oe(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return(oe(e,t)+180)%360;var r=X(t),i=X(e),o=_(r[0]),a=_(i[0]),s=_(r[1]),l=_(i[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return p(Math.atan2(u,c))}function ae(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=W(t);return z([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function se(t,e){var n=0,r=0,i=0;return w(t,function(t){n+=t[0],r+=t[1],i++},!0),z([n/i,r/i],e)}function le(e){var n=[];return"FeatureCollection"===e.type?C(e,function(e){w(e,function(t){n.push(z(t,e.properties))})}):w(e,function(t){n.push(z(t,e.properties))}),G(n)}function ue(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=ce(t,0,h,n,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=ce(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}(a));for(s.sort(fe),i=0;i<s.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&de(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&_e(r,t)&&(n=r,f=l),r=r.next;return n}(t,e)){var n=ve(e,t);he(n,n.next)}}(s[i],n),n=he(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return function h(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){for(var i=t;null===i.z&&(i.z=pe(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,o=t=null,a=0;n;){for(a++,r=n,e=s=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;0<s||0<l&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(1<a)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(0<=ge(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=pe(s,l,e,n,r),f=pe(u,c,e,n,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&de(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=ge(p.prev,p,p.next))return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&de(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=ge(p.prev,p,p.next))return!1;p=p.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(0<=ge(e,n,r))return!1;for(var i=t.next.next;i!==t.prev;){if(de(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=ge(i.prev,i,i.next))return!1;i=i.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),xe(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?h(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!me(i,o)&&ye(i,r,r.next,o)&&_e(i,o)&&_e(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),xe(r),xe(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===a&&function(t,e,n,r,i,o){var a,s,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ye(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(a,s)&&_e(a,s)&&_e(s,a)&&function(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}(a,s))){var c=ve(l,u);return l=he(l,l.next),c=he(c,c.next),h(l,e,n,r,i,o),h(c,e,n,r,i,o)}u=u.next}l=l.next}while(l!==t)}(t,e,n,r,i,o):h(he(t),e,n,r,i,o,1);break}}}(f,p,n,r,i,u),p}function ce(t,e,n,r,i){var o,a;if(i===0<Le(t,e,n,r))for(o=e;o<n;o+=r)a=be(o,t[o],t[o+1],a);else for(o=n-r;e<=o;o-=r)a=be(o,t[o],t[o+1],a);return a&&me(a,a.next)&&(xe(a),a=a.next),a}function he(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!me(r,r.next)&&0!==ge(r.prev,r,r.next))r=r.next;else{if(xe(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function fe(t,e){return t.x-e.x}function pe(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function de(t,e,n,r,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function ge(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function me(t,e){return t.x===e.x&&t.y===e.y}function ye(t,e,n,r){return!!(me(t,e)&&me(n,r)||me(t,r)&&me(n,e))||0<ge(t,e,n)!=0<ge(t,e,r)&&0<ge(n,r,t)!=0<ge(n,r,e)}function _e(t,e){return ge(t.prev,t,t.next)<0?0<=ge(t,e,t.next)&&0<=ge(t,t.prev,e):ge(t,e,t.prev)<0||ge(t,t.next,e)<0}function ve(t,e){var n=new we(t.i,t.x,t.y),r=new we(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function be(t,e,n,r){var i=new we(t,e,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function xe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function we(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Le(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Ce(t){var r=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),i=Wo(r.vertices,r.holes,2),e=[],o=[];i.forEach(function(t,e){var n=i[e];o.push([r.vertices[2*n],r.vertices[2*n+1]])});for(var n=0;n<o.length;n+=3){var a=o.slice(n,n+3);a.push(o[n]),e.push(q([a]))}return e}function ke(r,t){if(!r)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var i,o=1/0;return C(t,function(t,e){var n=At(r,t);n<o&&((i=Rt(t)).properties.featureIndex=e,i.properties.distanceToPoint=n,o=n)}),i}function Ee(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[n],f=r,p=i;for(Se(e,r,n),0<o(e[i],h)&&Se(e,r,i);f<p;){for(Se(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;0<o(e[p],h);)p--}0===o(e[r],h)?Se(e,r,p):Se(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:e<t?1:0})}function Se(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Me(t,e){if(!(this instanceof Me))return new Me(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pe(t,e){Ie(t,0,t.children.length,e,t)}function Ie(t,e,n,r,i){i||(i=je(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Te(i,t.leaf?r(o):o);return i}function Te(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Oe(t,e){return t.minX-e.minX}function Ne(t,e){return t.minY-e.minY}function De(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ae(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Re(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Fe(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function je(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Be(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(Ee(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function ze(t){var e=Me(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ue(t);return Me.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(t){var e=qe(t);e.bbox=t,n.push(e)}):C(t,function(t){t.bbox=t.bbox?t.bbox:Ue(t),n.push(t)}),Me.prototype.load.call(this,n)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}return Me.prototype.remove.call(this,t)},e.clear=function(){return Me.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Me.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Me.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Me.prototype.all.call(this)}},e.toJSON=function(){return Me.prototype.toJSON.call(this)},e.fromJSON=function(t){return Me.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ue(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function qe(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function Ue(t){var e=[1/0,1/0,-1/0,-1/0];return w(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Ge(t){if(!t)throw new Error("geojson is required");var e=[];return P(t,function(t){!function(n,r){var t=[],e=n.geometry;switch(e.type){case"Polygon":t=A(e);break;case"LineString":t=[A(e)]}t.forEach(function(t){var e,u,c;(e=t,u=n.properties,c=[],e.reduce(function(t,e){var n,r,i,o,a,s,l=U([t,e],u);return l.bbox=(r=e,i=(n=t)[0],o=n[1],a=r[0],s=r[1],[i<a?i:a,o<s?o:s,a<i?i:a,s<o?o:s]),c.push(l),e}),c).forEach(function(t){t.id=r.length,r.push(t)})})}(t,e)}),G(e)}function Ve(t,e){var i={},o=[];if("LineString"===t.type&&(t=B(t)),"LineString"===e.type&&(e=B(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=He(t,e);return n&&o.push(n),G(o)}var a=ze();return a.load(Ge(e)),C(Ge(t),function(r){C(a.search(r),function(t){var e=He(r,t);if(e){var n=A(e).join(",");i[n]||(i[n]=!0,o.push(e))}})}),G(o)}function He(t,e){var n=A(t),r=A(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],l=r[0][0],u=r[0][1],c=r[1][0],h=r[1][1],f=(h-u)*(a-i)-(c-l)*(s-o);if(0===f)return null;var p=((c-l)*(o-u)-(h-u)*(i-l))/f,d=((a-i)*(o-u)-(s-o)*(i-l))/f;return 0<=p&&p<=1&&0<=d&&d<=1?z([i+p*(a-i),o+p*(s-o)]):null}function We(t,f,p){if(!H(p=p||{}))throw new Error("options is invalid");var e=t.geometry?t.geometry.type:t.type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var d=z([1/0,1/0],{dist:1/0}),g=0;return P(t,function(t){for(var e=A(t),n=0;n<e.length-1;n++){var r=z(e[n]);r.properties.dist=At(f,r,p);var i=z(e[n+1]);i.properties.dist=At(f,i,p);var o=At(r,i,p),a=Math.max(r.properties.dist,i.properties.dist),s=oe(r,i),l=re(f,a,s+90,p),u=re(f,a,s-90,p),c=Ve(U([l.geometry.coordinates,u.geometry.coordinates]),U([r.geometry.coordinates,i.geometry.coordinates])),h=null;0<c.features.length&&((h=c.features[0]).properties.dist=At(f,h,p),h.properties.location=g+At(r,h,p)),r.properties.dist<d.properties.dist&&((d=r).properties.index=n,d.properties.location=g),i.properties.dist<d.properties.dist&&((d=i).properties.index=n+1,d.properties.location=g+o),h&&h.properties.dist<d.properties.dist&&((d=h).properties.index=n),g+=o}}),d}function Xe(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(r=i?Ye(X(e),X(t)):Ye(X(t),X(e)))?-(360-r):r}function Ye(t,e){var n=_(t[1]),r=_(e[1]),i=_(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(p(Math.atan2(i,o))+360)%360}function $e(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=X(t),o=X(e);return o[0]+=180<o[0]-i[0]?-360:180<i[0]-o[0]?360:0,u(function(t,e,n){var r=n=void 0===n?ho:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),u=1e-11<Math.abs(l)?a/l:Math.cos(i);return Math.sqrt(a*a+u*u*s*s)*r}(i,o),"meters",r)}function Ze(t,e){return Ke(t,"mercator",e)}function Qe(t,e){return Ke(t,"wgs84",e)}function Ke(t,n,e){if(!H(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&V(t[0])?t="mercator"===n?Je(t):tn(t):(!0!==r&&(t=Rt(t)),w(t,function(t){var e="mercator"===n?Je(t):tn(t);t[0]=e[0],t[1]=e[1]})),t}function Je(t){var e,n=Math.PI/180,r=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*(e=t[0],e<0?-1:0<e?1:0))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function tn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function en(t,e,i){if(!H(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=z(t):"Point"===t.type?t=B(t):j(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=U(e):"LineString"===e.type?e=B(e):j(e,"LineString","line");var o=1/0,a=t.geometry.coordinates;return T(e,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=function(t,e,n,r){var i=r.mercator,o=!0!==i?At(e,t,r):nn(e,t,r),a=f(!0!==i?oe(e,t):Xe(e,t)),s=f(!0!==i?oe(e,n):Xe(e,n)),l=Math.abs(a-s);if(90<l)return o;var u=(s+180)%360,c=f(!0!==i?oe(n,t):Xe(n,t)),h=Math.abs(c-u);return 180<h&&(h=Math.abs(h-360)),90<h?!0!==i?At(t,n,r):nn(t,n,r):!0!==i?o*Math.sin(_(l)):function(t,e,n,r){var i=0;(180<=Math.abs(t[0])||180<=Math.abs(e[0])||180<=Math.abs(n[0]))&&(i=0<t[0]||0<e[0]||0<n[0]?-180:180);var o,a,s,l,u,c,h,f,p=z(n),d=Ze([t[0]+i,t[1]]),g=Ze([e[0]+i,e[1]]),m=Ze([n[0]+i,n[1]]),y=Qe((a=g,s=m,l=(o=d)[0],u=o[1],c=a[0]-l,h=a[1]-u,f=((s[0]-l)*c+(s[1]-u)*h)/(c*c+h*h),[l+f*c,u+f*h]));return 0!==i&&(y[0]-=i),$e(p,y,r)}(e,n,t,r)}(a,e,n,i);r<o&&(o=r)}),o}function nn(t,e,n){var r=n.units,i=0;180<=Math.abs(t[0])&&(i=0<t[0]?-180:180),180<=Math.abs(e[0])&&(i=0<e[0]?-180:180);var o=Ze([t[0]+i,t[1]]),a=Ze([e[0]+i,e[1]]),s=function(t){return t*t},l=s(o[0]-a[0])+s(o[1]-a[1]);return u(Math.sqrt(l),"meters",r)}function rn(t){for(var e="FeatureCollection"!==(h=t).type?"Feature"!==h.type?G([B(h)]):G([h]):h,n=ae(e),r=!1,i=0;!r&&i<e.features.length;){var o,a=e.features[i].geometry,s=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(r=!0);else if("MultiPoint"===a.type){var l=!1;for(o=0;!l&&o<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[o][0]&&n.geometry.coordinates[1]===a.coordinates[o][1]&&(l=r=!0),o++}else if("LineString"===a.type)for(o=0;!s&&o<a.coordinates.length-1;)on(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(r=s=!0),o++;else if("MultiLineString"===a.type)for(var u=0;u<a.coordinates.length;){s=!1,o=0;for(var c=a.coordinates[u];!s&&o<c.length-1;)on(n.geometry.coordinates[0],n.geometry.coordinates[1],c[o][0],c[o][1],c[o+1][0],c[o+1][1])&&(r=s=!0),o++;u++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||Mt(n,a)&&(r=!0);i++}var h;if(r)return n;var f=G([]);for(i=0;i<e.features.length;i++)f.features=f.features.concat(le(e.features[i]).features);return z(ke(n,f).geometry.coordinates)}function on(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function an(t){return M(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return sn(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=sn(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}function sn(t){var e=0;if(t&&0<t.length){e+=Math.abs(ln(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ln(t[n]))}return e}function ln(t){var e,n,r,i,o,a,s=0,l=t.length;if(2<l){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(i=(r=a)+1,o=a+2),e=t[r],n=t[i],s+=(un(t[o][0])-un(e[0]))*Math.sin(un(n[1]));s=s*$o*$o/2}return s}function un(t){return t*Math.PI/180}function cn(t,r){if(!H(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return O(t,function(t,e){var n=e.geometry.coordinates;return t+At(n[0],n[1],r)},0)}function hn(t,e,n,r){if(!H(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,s,l,u=0,c=0;c<i.length&&!(u<=e&&c===i.length-1);c++){if(e<u&&0===o.length){if(!(a=e-u))return o.push(i[c]),U(o);s=oe(i[c],i[c-1])-180,l=re(i[c],a,s,r),o.push(l.geometry.coordinates)}if(n<=u)return(a=n-u)?(s=oe(i[c],i[c-1])-180,l=re(i[c],a,s,r),o.push(l.geometry.coordinates)):o.push(i[c]),U(o);if(e<=u&&o.push(i[c]),c===i.length-1)return U(o);u+=At(i[c],i[c+1],r)}return U(i[i.length-1])}function fn(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g=(n=n||{}).ignoreEndVertices;if(!H(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var m=X(t),y=A(e),_=0;_<y.length-1;_++){var v=!1;if(g&&(0===_&&(v="start"),_===y.length-2&&(v="end"),0===_&&_+1===y.length-1&&(v="both")),r=y[_],i=y[_+1],a=v,void 0,s=(o=m)[0],l=o[1],u=r[0],c=r[1],h=i[0],f=i[1],p=h-u,d=f-c,(o[0]-u)*d-(o[1]-c)*p==0&&(a?"start"===a?Math.abs(p)>=Math.abs(d)?0<p?u<s&&s<=h:h<=s&&s<u:0<d?c<l&&l<=f:f<=l&&l<c:"end"===a?Math.abs(p)>=Math.abs(d)?0<p?u<=s&&s<h:h<s&&s<=u:0<d?c<=l&&l<f:f<l&&l<=c:"both"===a?Math.abs(p)>=Math.abs(d)?0<p?u<s&&s<h:h<s&&s<u:0<d?c<l&&l<f:f<l&&l<c:void 0:Math.abs(p)>=Math.abs(d)?0<p?u<=s&&s<=h:h<=s&&s<=u:0<d?c<=l&&l<=f:f<=l&&l<=c))return!0}return!1}function pn(t,e){var n=Q(t),r=Q(e),i=$(t),o=$(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(gn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return fn(i,o,{ignoreEndVertices:!0});case"Polygon":return Mt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)gn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!fn(t.coordinates[r],e))return!1;n||(n=fn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Mt(t.coordinates[1],e);if(!i){n=!1;break}i=Mt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!fn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n,r;if(!dn(W(e),W(t)))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!Mt(t.coordinates[o],e))return!1;if(i||(i=Mt(t.coordinates[o],e,{ignoreBoundary:!0})),!i)i=Mt((n=t.coordinates[o],r=t.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2]),e,{ignoreBoundary:!0})}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=W(t);if(!dn(W(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Mt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function dn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]}function mn(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.mask,i=n.properties,o=[];if(null==e)throw new Error("cellSide is required");if(!V(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(Q(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],s=t[1],l=t[2],u=t[3],c=e/At([a,s],[l,s],n)*(l-a),h=e/At([a,s],[a,u],n)*(u-s),f=l-a,p=u-s,d=Math.floor(f/c),g=(p-Math.floor(p/h)*h)/2,m=a+(f-d*c)/2;m<=l;){for(var y=s+g;y<=u;){var _=z([m,y],i);r?pn(_,r)&&o.push(_):o.push(_),y+=h}m+=c}return G(o)}function yn(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return w(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function _n(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!_n(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function vn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return 0<=(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])==e}function bn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!bn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function xn(r,t){var i=[],o=ze();return P(t,function(t){if(i.forEach(function(t,e){t.id=e}),i.length){var e=o.search(t);if(e.features.length){var n=Ln(t,e);i=i.filter(function(t){return t.id!==n.id}),o.remove(n),C(wn(n,t),function(t){i.push(t),o.insert(t)})}}else(i=wn(r,t).features).forEach(function(t){t.bbox||(t.bbox=ne(W(t)))}),o.load(G(i))}),G(i)}function wn(t,o){var a=[],e=A(t)[0],n=A(t)[t.geometry.coordinates.length-1];if(Cn(e,X(o))||Cn(n,X(o)))return G([t]);var r=ze(),i=Ge(t);r.load(i);var s=r.search(o);if(!s.features.length)return G([t]);var l=Ln(o,s),u=k(i,function(t,e,n){var r=A(e)[1],i=X(o);return n===l.id?(t.push(i),a.push(U(t)),Cn(i,r)?[i]:[i,r]):(t.push(r),t)},[e]);return 1<u.length&&a.push(U(u)),G(a)}function Ln(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,i=1/0;return C(t,function(t){var e=We(t,n).properties.dist;e<i&&(r=t,i=e)}),r}function Cn(t,e){return t[0]===e[0]&&t[1]===e[1]}function kn(t,e,n,r,i){if(!H(i=i||{}))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=(void 0===i?"undefined":Vp(i)))throw new Error("options must be an object");o=o||64;var s=En(n),l=En(r),u=t.properties;if(s===l)return U(ie(t,e,i).geometry.coordinates[0],u);for(var c=s,h=s<l?l:l+360,f=c,p=[],d=0;f<h;)p.push(re(t,e,f,a).geometry.coordinates),f=c+360*++d/o;return h<f&&p.push(re(t,e,h,a).geometry.coordinates),U(p,u)}function En(t){var e=t%360;return e<0&&(e+=360),e}function Sn(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=Q(t),i=A(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Mn(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(Mn(t,n))}),G(o);default:throw new Error("geom "+r+" not supported")}}function Mn(t,e){return 1<t.length?v(t,e):U(t[0],e)}function Pn(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,Q(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(A(In(t,{},r,i)))}),b(o,n)}return In(t,n,r,i)}function In(t,e,s,l){e=e||t.properties||{};var n=A(t),r=Q(t);if(!n.length)throw new Error("line must contain coordinates");switch(r){case"LineString":return s&&(n=Tn(n)),q([n],e);case"MultiLineString":var u=[],c=0;return n.forEach(function(t){if(s&&(t=Tn(t)),l){var e=(n=W(U(t)),r=n[0],i=n[1],o=n[2],a=n[3],Math.abs(r-o)*Math.abs(i-a));c<e?(u.unshift(t),c=e):u.push(t)}else u.push(t);var n,r,i,o,a}),q(u,e);default:throw new Error("geometry type "+r+" is not supported")}}function Tn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function On(t,e,n){var r,i,o,a,s,l=t.length,u=Dn(t[0],e),c=[];for(n||(n=[]),r=1;r<l;r++){for(i=t[r-1],a=s=Dn(o=t[r],e);;){if(!(u|a)){c.push(i),a!==s?(c.push(o),r<l-1&&(n.push(c),c=[])):r===l-1&&c.push(o);break}if(u&a)break;u?u=Dn(i=Nn(i,o,u,e),e):a=Dn(o=Nn(i,o,a,e),e)}u=s}return c.length&&n.push(c),n}function Nn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Dn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function An(t,e){for(var n=[],r=0;r<t.length;r++){var i=oa.polygon(t[r],e);0<i.length&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),4<=i.length&&n.push(i))}return n}function Rn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Fn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=(void 0===t?"undefined":Vp(t))&&"object"!=(void 0===e?"undefined":Vp(e))?(n.strict,t===e):function(t,e,n){var r,i;if(jn(t)||jn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Rn(t))return!!Rn(e)&&Fn(t=aa.call(t),e=aa.call(e),n);if(Bn(t)){if(!Bn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;0<=r;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;0<=r;r--)if(!Fn(t[i=o[r]],e[i],n))return!1;return(void 0===t?"undefined":Vp(t))==(void 0===e?"undefined":Vp(e))}(t,e,n))}function jn(t){return null==t}function Bn(t){return!(!t||"object"!=(void 0===t?"undefined":Vp(t))||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||0<t.length&&"number"!=typeof t[0])}function zn(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var o,a=n.tolerance||0,s=[],l=ze();return l.load(Ge(t)),T(e,function(r){var i=!1;C(l.search(r),function(t){if(!1===i){var e=A(r).sort(),n=A(t).sort();Fn(e,n)?(i=!0,o=o?qn(o,r):r):(0===a?fn(e[0],t)&&fn(e[1],t):We(t,e[0]).properties.dist<=a&&We(t,e[1]).properties.dist<=a)?(i=!0,o=o?qn(o,r):r):(0===a?fn(n[0],r)&&fn(n[1],r):We(r,n[0]).properties.dist<=a&&We(r,n[1]).properties.dist<=a)&&(o=o?qn(o,t):t)}}),!1===i&&o&&(s.push(o),o=void 0)}),o&&s.push(o),G(s)}function qn(t,e){var n=A(e),r=A(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Fn(n[0],i)?a.unshift(n[1]):Fn(n[0],o)?a.push(n[1]):Fn(n[1],i)?a.unshift(n[0]):Fn(n[1],o)&&a.push(n[0]),t}function Un(t){var e=t%360;return e<0&&(e+=360),e}function Gn(t,e,n,r){if(!H(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");var f=u(e,i,"meters"),a=X(t),s=function(t,e,n,r){var i=f/(r=void 0===r?ho:Number(r)),o=t[0]*Math.PI/180,a=_(t[1]),s=_(n),l=i*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=0<u?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=1e-11<Math.abs(c)?l/c:Math.cos(a);return[(180*(o+i*Math.sin(s)/h)/Math.PI+540)%360-180,180*u/Math.PI]}(a,0,n);return s[0]+=180<s[0]-a[0]?-360:180<a[0]-s[0]?360:0,z(s,o)}function Vn(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],l=t[a+1];a===t.length-1&&(l=t[0]),r=Hn(s,l,e),n<=0&&0<r?Hn(e,s,i)<0||(i=s):0<n&&r<=0&&(0<Hn(e,s,o)||(o=s)),n=r}return[i,o]}function Hn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Wn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=A(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return 0<o}function Xn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return S(t,function(t){Xn(t,e)}),t;case"LineString":return Yn(A(t),e),t;case"Polygon":return $n(A(t),e),t;case"MultiLineString":return A(t).forEach(function(t){Yn(t,e)}),t;case"MultiPolygon":return A(t).forEach(function(t){$n(t,e)}),t;case"Point":case"MultiPoint":return t}}function Yn(t,e){Wn(t)===e&&t.reverse()}function $n(t,e){Wn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Wn(t[n])===e&&t[n].reverse()}function Zn(t,e,n,r){r=r||{};for(var i=Object.keys(sa),o=0;o<i.length;o++){var a=i[o],s=r[a];s=null!=s?s:sa[a],la[a]=s}la.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u,c,h=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var l=0;l<i;++l){var u=0,c=t[s+1][l],h=t[s+1][l+1],f=t[s][l+1],p=t[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){u|=c<e?0:a<c?128:64,u|=h<e?0:a<h?32:16,u|=f<e?0:a<f?8:4;var d=+(u|=p<e?0:a<p?2:1),g=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var m=(c+h+f+p)/4;g=a<m?2:m<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?0<g?(u=156,g=4):u=152:33===u?0<g?(u=139,g=4):u=137:72===u?0<g?(u=99,g=4):u=98:132===u&&(0<g?(u=39,g=4):u=38)}if(0!=u&&170!=u){var y,_,v,b,x,w,L,C;y=_=v=b=x=w=L=C=.5;var k=[];1===u?(v=1-Qn(e,f,p),C=1-Qn(e,c,p),k.push(Ya[u])):169===u?(v=Qn(a,p,f),C=Qn(a,p,c),k.push(Ya[u])):4===u?(w=1-Qn(e,h,f),b=Qn(e,p,f),k.push(Wa[u])):166===u?(w=Qn(a,f,h),b=1-Qn(a,f,p),k.push(Wa[u])):16===u?(x=Qn(e,f,h),_=Qn(e,c,h),k.push(Ha[u])):154===u?(x=1-Qn(a,h,f),_=1-Qn(a,h,c),k.push(Ha[u])):64===u?(L=Qn(e,p,c),y=1-Qn(e,h,c),k.push(Za[u])):106===u?(L=1-Qn(a,c,p),y=Qn(a,c,h),k.push(Za[u])):168===u?(b=Qn(a,p,f),v=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),k.push(Xa[u]),k.push(Ya[u])):2===u?(b=1-Qn(e,f,p),v=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),k.push(Xa[u]),k.push(Ya[u])):162===u?(x=Qn(a,f,h),w=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),k.push(Xa[u]),k.push(Ya[u])):8===u?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),k.push(Ha[u]),k.push(Wa[u])):138===u?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),y=1-Qn(a,h,c),_=1-Qn(e,h,c),k.push(Ha[u]),k.push(Wa[u])):32===u?(x=Qn(a,f,h),w=Qn(e,f,h),y=Qn(e,c,h),_=Qn(a,c,h),k.push(Ha[u]),k.push(Wa[u])):42===u?(C=1-Qn(a,c,p),L=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h),k.push($a[u]),k.push(Za[u])):128===u&&(C=Qn(e,p,c),L=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c),k.push($a[u]),k.push(Za[u])),5===u?(w=1-Qn(e,h,f),C=1-Qn(e,c,p),k.push(Wa[u])):165===u?(w=Qn(a,f,h),C=Qn(a,p,c),k.push(Wa[u])):20===u?(b=Qn(e,p,f),_=Qn(e,c,h),k.push(Xa[u])):150===u?(b=1-Qn(a,f,p),_=1-Qn(a,h,c),k.push(Xa[u])):80===u?(x=Qn(e,f,h),L=Qn(e,p,c),k.push(Ha[u])):90===u?(x=1-Qn(a,h,f),L=1-Qn(a,c,p),k.push(Ha[u])):65===u?(v=1-Qn(e,f,p),y=1-Qn(e,h,c),k.push(Ya[u])):105===u?(v=Qn(a,p,f),y=Qn(a,c,h),k.push(Ya[u])):160===u?(x=Qn(a,f,h),w=Qn(e,f,h),C=Qn(e,p,c),L=Qn(a,p,c),k.push(Ha[u]),k.push(Wa[u])):10===u?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),C=1-Qn(a,c,p),L=1-Qn(e,c,p),k.push(Ha[u]),k.push(Wa[u])):130===u?(b=1-Qn(e,f,p),v=1-Qn(a,f,p),y=1-Qn(a,h,c),_=1-Qn(e,h,c),k.push(Xa[u]),k.push(Ya[u])):40===u?(b=Qn(a,p,f),v=Qn(e,p,f),y=Qn(e,c,h),_=Qn(a,c,h),k.push(Xa[u]),k.push(Ya[u])):101===u?(w=Qn(a,f,h),y=Qn(a,c,h),k.push(Wa[u])):69===u?(w=1-Qn(e,h,f),y=1-Qn(e,h,c),k.push(Wa[u])):149===u?(C=Qn(a,p,c),_=1-Qn(a,h,c),k.push($a[u])):21===u?(C=1-Qn(e,c,p),_=Qn(e,c,h),k.push($a[u])):86===u?(b=1-Qn(a,f,p),L=1-Qn(a,c,p),k.push(Xa[u])):84===u?(b=Qn(e,p,f),L=Qn(e,p,c),k.push(Xa[u])):89===u?(x=1-Qn(a,h,f),v=Qn(a,p,f),k.push(Ya[u])):81===u?(x=Qn(e,f,h),v=1-Qn(e,f,p),k.push(Ya[u])):96===u?(x=Qn(a,f,h),w=Qn(e,f,h),L=Qn(e,p,c),y=Qn(a,c,h),k.push(Ha[u]),k.push(Wa[u])):74===u?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),L=1-Qn(a,c,p),y=1-Qn(e,h,c),k.push(Ha[u]),k.push(Wa[u])):24===u?(x=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),_=Qn(e,c,h),k.push(Ha[u]),k.push(Ya[u])):146===u?(x=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),_=1-Qn(a,h,c),k.push(Ha[u]),k.push(Ya[u])):6===u?(w=1-Qn(e,h,f),b=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),k.push(Wa[u]),k.push(Xa[u])):164===u?(w=Qn(a,f,h),b=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),k.push(Wa[u]),k.push(Xa[u])):129===u?(v=1-Qn(e,f,p),C=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c),k.push(Ya[u]),k.push($a[u])):41===u?(v=Qn(a,p,f),C=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h),k.push(Ya[u]),k.push($a[u])):66===u?(b=1-Qn(e,f,p),v=1-Qn(a,f,p),L=1-Qn(a,c,p),y=1-Qn(e,h,c),k.push(Xa[u]),k.push(Ya[u])):104===u?(b=Qn(a,p,f),v=Qn(e,p,f),L=Qn(e,p,c),y=Qn(a,c,h),k.push(Ya[u]),k.push(Qa[u])):144===u?(x=Qn(e,f,h),C=Qn(e,p,c),L=Qn(a,p,c),_=1-Qn(a,h,c),k.push(Ha[u]),k.push(Za[u])):26===u?(x=1-Qn(a,h,f),C=1-Qn(a,c,p),L=1-Qn(e,c,p),_=Qn(e,c,h),k.push(Ha[u]),k.push(Za[u])):36===u?(w=Qn(a,f,h),b=Qn(e,p,f),y=Qn(e,c,h),_=Qn(a,c,h),k.push(Wa[u]),k.push(Xa[u])):134===u?(w=1-Qn(e,h,f),b=1-Qn(a,f,p),y=1-Qn(a,h,c),_=1-Qn(e,h,c),k.push(Wa[u]),k.push(Xa[u])):9===u?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),v=Qn(a,p,f),C=1-Qn(e,c,p),k.push(Ha[u]),k.push(Wa[u])):161===u?(x=Qn(a,f,h),w=Qn(e,f,h),v=1-Qn(e,f,p),C=Qn(a,p,c),k.push(Ha[u]),k.push(Wa[u])):37===u?(w=Qn(a,f,h),C=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h),k.push(Wa[u]),k.push($a[u])):133===u?(w=1-Qn(e,h,f),C=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c),k.push(Wa[u]),k.push($a[u])):148===u?(b=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),_=1-Qn(a,h,c),k.push(Xa[u]),k.push(Za[u])):22===u?(b=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),_=Qn(e,c,h),k.push(Xa[u]),k.push(Za[u])):82===u?(x=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),L=1-Qn(a,c,p),k.push(Ha[u]),k.push(Ya[u])):88===u?(x=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),L=Qn(e,p,c),k.push(Ha[u]),k.push(Ya[u])):73===u?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),v=Qn(a,p,f),y=1-Qn(e,h,c),k.push(Ha[u]),k.push(Wa[u])):97===u?(x=Qn(a,f,h),w=Qn(e,f,h),v=1-Qn(e,f,p),y=Qn(a,c,h),k.push(Ha[u]),k.push(Wa[u])):145===u?(x=Qn(e,f,h),v=1-Qn(e,f,p),C=Qn(a,p,c),_=1-Qn(a,h,c),k.push(Ha[u]),k.push($a[u])):25===u?(x=1-Qn(a,h,f),v=Qn(a,p,f),C=1-Qn(e,c,p),_=Qn(e,c,h),k.push(Ha[u]),k.push($a[u])):70===u?(w=1-Qn(e,h,f),b=1-Qn(a,f,p),L=1-Qn(a,c,p),y=1-Qn(e,h,c),k.push(Wa[u]),k.push(Xa[u])):100===u?(w=Qn(a,f,h),b=Qn(e,p,f),L=Qn(e,p,c),y=Qn(a,c,h),k.push(Wa[u]),k.push(Xa[u])):34===u?(0===g?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)):(x=Qn(a,f,h),w=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)),k.push(Ha[u]),k.push(Wa[u]),k.push($a[u]),k.push(Za[u])):35===u?(4===g?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)):(x=Qn(a,f,h),w=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)),k.push(Ha[u]),k.push(Wa[u]),k.push(Ya[u]),k.push(Za[u])):136===u?(0===g?(x=Qn(a,f,h),w=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)):(x=1-Qn(e,h,f),w=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)),k.push(Ha[u]),k.push(Wa[u]),k.push($a[u]),k.push(Za[u])):153===u?(0===g?(x=Qn(e,f,h),v=1-Qn(e,f,p),C=1-Qn(e,c,p),_=Qn(e,c,h)):(x=1-Qn(a,h,f),v=Qn(a,p,f),C=Qn(a,p,c),_=1-Qn(a,h,c)),k.push(Ha[u]),k.push(Ya[u])):102===u?(0===g?(w=1-Qn(e,h,f),b=Qn(e,p,f),L=Qn(e,p,c),y=1-Qn(e,h,c)):(w=Qn(a,f,h),b=1-Qn(a,f,p),L=1-Qn(a,c,p),y=Qn(a,c,h)),k.push(Wa[u]),k.push(Za[u])):155===u?(4===g?(x=Qn(e,f,h),v=1-Qn(e,f,p),C=1-Qn(e,c,p),_=Qn(e,c,h)):(x=1-Qn(a,h,f),v=Qn(a,p,f),C=Qn(a,p,c),_=1-Qn(a,h,c)),k.push(Ha[u]),k.push($a[u])):103===u?(4===g?(w=1-Qn(e,h,f),b=Qn(e,p,f),L=Qn(e,p,c),y=1-Qn(e,h,c)):(w=Qn(a,f,h),b=1-Qn(a,f,p),L=1-Qn(a,c,p),y=Qn(a,c,h)),k.push(Wa[u]),k.push(Xa[u])):152===u?(0===g?(x=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),_=Qn(e,c,h)):(x=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),_=1-Qn(a,h,c)),k.push(Ha[u]),k.push(Xa[u]),k.push(Ya[u])):156===u?(4===g?(x=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),_=Qn(e,c,h)):(x=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),_=1-Qn(a,h,c)),k.push(Ha[u]),k.push(Ya[u]),k.push(Za[u])):137===u?(0===g?(x=Qn(a,f,h),w=Qn(e,f,h),v=1-Qn(e,f,p),C=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)):(x=1-Qn(e,h,f),w=1-Qn(a,h,f),v=Qn(a,p,f),C=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)),k.push(Ha[u]),k.push(Wa[u]),k.push(Ya[u])):139===u?(4===g?(x=Qn(a,f,h),w=Qn(e,f,h),v=1-Qn(e,f,p),C=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)):(x=1-Qn(e,h,f),w=1-Qn(a,h,f),v=Qn(a,p,f),C=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)),k.push(Ha[u]),k.push(Wa[u]),k.push($a[u])):98===u?(0===g?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),L=Qn(e,p,c),y=1-Qn(e,h,c)):(x=Qn(a,f,h),w=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),L=1-Qn(a,c,p),y=Qn(a,c,h)),k.push(Ha[u]),k.push(Wa[u]),k.push(Za[u])):99===u?(4===g?(x=1-Qn(e,h,f),w=1-Qn(a,h,f),b=Qn(a,p,f),v=Qn(e,p,f),L=Qn(e,p,c),y=1-Qn(e,h,c)):(x=Qn(a,f,h),w=Qn(e,f,h),b=1-Qn(e,f,p),v=1-Qn(a,f,p),L=1-Qn(a,c,p),y=Qn(a,c,h)),k.push(Ha[u]),k.push(Wa[u]),k.push(Ya[u])):38===u?(0===g?(w=1-Qn(e,h,f),b=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)):(w=Qn(a,f,h),b=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)),k.push(Wa[u]),k.push($a[u]),k.push(Za[u])):39===u?(4===g?(w=1-Qn(e,h,f),b=Qn(e,p,f),C=Qn(e,p,c),L=Qn(a,p,c),y=1-Qn(a,h,c),_=1-Qn(e,h,c)):(w=Qn(a,f,h),b=1-Qn(a,f,p),C=1-Qn(a,c,p),L=1-Qn(e,c,p),y=Qn(e,c,h),_=Qn(a,c,h)),k.push(Wa[u]),k.push(Xa[u]),k.push(Za[u])):85===u&&(y=C=v=w=0,_=L=b=x=1),(y<0||1<y||_<0||1<_||x<0||1<x||b<0||1<b||C<0||1<C||L<0||1<L)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+c+","+h+","+f+","+p+" "+g+" "+y+" "+_+" "+x+" "+w+" "+b+" "+v+" "+C+" "+L),o.cells[s][l]={cval:u,cval_real:d,flipped:g,topleft:y,topright:_,righttop:x,rightbottom:w,bottomright:b,bottomleft:v,leftbottom:C,lefttop:L,edges:k}}}}}return o}(t,e,n);return la.polygons?(la.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=[],c=0,h.cells.forEach(function(t,r){t.forEach(function(t,e){if(void 0!==t){var n=Ja[t.cval](t);"object"==(void 0===n?"undefined":Vp(n))&&Kn(n)?"object"==Vp(n[0])&&Kn(n[0])?"object"==Vp(n[0][0])&&Kn(n[0][0])?n.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=r}),u[c++]=t}):(n.forEach(function(t){t[0]+=e,t[1]+=r}),u[c++]=n):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),l=u):(la.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&0<t.cells[o][a].edges.length){var s=function(t){if(0<t.edges.length){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&ca?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&ha?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&fa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&ca?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&ha?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&fa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&fa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&fa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&ua?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&fa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&fa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&ua?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&ua?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&fa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&ua?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&ua?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&ca?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&ua?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&ca?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),l=null,u=a,c=o;null!==s&&i.push([s.p[0]+u,s.p[1]+c]);do{if(null===(l=function(t,e,n,r){var i,o,a,s,l,u=t.cval;switch(e){case-1:switch(r){case 0:i=Wa[u],a=wa[u],s=La[u],l=Ca[u];break;default:i=Ha[u],a=va[u],s=ba[u],l=xa[u]}break;case 1:switch(r){case 0:i=$a[u],a=Da[u],s=Aa[u],l=Ra[u];break;default:i=Za[u],a=Ta[u],s=Oa[u],l=Na[u]}break;default:switch(n){case-1:switch(r){case 0:i=Qa[u],a=pa[u],s=da[u],l=ga[u];break;default:i=Ka[u],a=ma[u],s=ya[u],l=_a[u]}break;case 1:switch(r){case 0:i=Ya[u],a=ka[u],s=Ea[u],l=Sa[u];break;default:i=Xa[u],a=Ma[u],s=Pa[u],l=Ia[u]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,i){case 0:u&ca?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:u&ha?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:u&ha?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:u&fa?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&ca?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:u&ha?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:u&ha?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:u&fa?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:u&ha?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:u&fa?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:u&fa?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&ua?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:u&ha?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:u&fa?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:u&fa?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&ua?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:u&ha?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&ua?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:u&fa?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&ua?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&ua?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&ca?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&ua?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&ca?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+l)),{p:[e,n],x:a,y:s,o:l}}(t.cells[c][u],s.x,s.y,s.o)))break;if(i.push([l.p[0]+u,l.p[1]+c]),u+=l.x,(c+=(s=l).y)<0||n<=c||u<0||r<=u||void 0===t.cells[c][u]){var h=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,l=e+r,u=n+i,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=i,l-=r,s=(a=t.cells[u][l]).cval_real,-1===i)if(0===o)if(s&fa)c.push([l,u]),r=-1,o=i=0;else{if(!(s&ha)){c.push([l+a.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l+1,u]),r=1,o=i=0}else{if(!(s&fa)){if(s&ha){c.push([l+a.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l+a.bottomleft,u]),i=1,h=!(o=r=0);break}c.push([l,u]),r=-1,o=i=0}else if(1===i)if(0===o){if(!(s&ca)){if(s&ua){c.push([l+a.topleft,u+1]),i=-1,h=!(o=r=0);break}c.push([l+a.topright,u+1]),i=-1,o=1,h=!(r=0);break}c.push([l+1,u+1]),i=0,o=r=1}else c.push([l+1,u+1]),i=0,o=r=1;else if(-1===r)if(0===o){if(!(s&ua)){if(s&fa){c.push([l,u+a.leftbottom]),r=1,h=!(o=i=0);break}c.push([l,u+a.lefttop]),o=r=1,h=!(i=0);break}c.push([l,u+1]),i=1,o=r=0}else{if(!(s&ua)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),i=1,o=r=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&ha)){c.push([l+1,u+a.rightbottom]),r=-1,h=!(o=i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}else{if(!(s&ha)){if(s&ca){c.push([l+1,u+a.righttop]),r=-1,i=0,o=1;break}c.push([l+1,u+a.rightbottom]),r=-1,h=!(o=i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}}else if(s=(a=t.cells[u][l]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])r=0,i=-1,o=1;else{if(!(s&fa)){c.push([l+a.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l,u])}else{if(!(s&ua)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])i=1,o=r=0;else{if(!(s&ca)){c.push([l+a.topleft,u+1]),i=-1,h=!(o=r=0);break}c.push([l+1,u+1]),i=0,o=r=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])i=0,o=r=1;else{if(!(s&ha)){c.push([l+1,u+a.righttop]),r=-1,o=1,h=!(i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])r=-1,o=i=0;else{if(!(s&ua)){c.push([l,u+a.leftbottom]),r=1,h=!(o=i=0);break}c.push([l,u+1]),i=1,o=r=0}}if(u+=i,(l+=r)===e&&u===n)break}return{path:c,i:l,j:u,x:r,y:i,o:o}}(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),u=h.i,c=h.j,s=h}}while(void 0!==t.cells[c][u]&&0<t.cells[c][u].edges.length);e.push(i),i=[],0<t.cells[o][a].edges.length&&a--}return e}(h)),"function"==typeof la.successCallback&&la.successCallback(l),l}function Qn(t,e,n){return(t-e)/(n-e)}function Kn(t){return-1<t.constructor.toString().indexOf("Array")}function Jn(t,i,e){if(!H(e=e||{}))throw new Error("options is invalid");var o=e.pivot,n=e.mutate;if(!t)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");return 0===i||(o||(o=se(t)),!1!==n&&void 0!==n||(t=Rt(t)),w(t,function(t){var e=Xe(o,t)+i,n=$e(o,t),r=A(Gn(o,n,e));t[0]=r[0],t[1]=r[1]})),t}function tr(n,r,t){if(!H(t=t||{}))throw new Error("options is invalid");var i=t.origin,e=t.mutate;if(!n)throw new Error("geojson required");if("number"!=typeof r||0===r)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==(void 0===i?"undefined":Vp(i));return!0!==e&&(n=Rt(n)),"FeatureCollection"!==n.type||o?er(n,r,i):(C(n,function(t,e){n.features[e]=er(t,r,i)}),n)}function er(t,i,o){var e="Point"===Q(t);return o=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==(void 0===e?"undefined":Vp(e)))return X(e);var n=t.bbox?t.bbox:W(t),r=n[0],i=n[1],o=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return z([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return z([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return z([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return z([o,a]);case"center":return ae(t);case void 0:case null:case"centroid":return se(t);default:throw new Error("invalid origin")}}(t,o),1===i||e||w(t,function(t){var e=$e(o,t),n=Xe(o,t),r=A(Gn(o,e*i,n));t[0]=r[0],t[1]=r[1],3===t.length&&(t[2]*=i)}),t}function nr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function rr(t,e){return t[0]*e[1]-e[0]*t[1]}function ir(t,e,n){var S=[],M=l(e,n),P=A(t),I=[];return P.forEach(function(t,e){if(e!==P.length-1){var n=(x=t,w=P[e+1],L=M,C=Math.sqrt((x[0]-w[0])*(x[0]-w[0])+(x[1]-w[1])*(x[1]-w[1])),k=x[0]+L*(w[1]-x[1])/C,E=w[0]+L*(w[1]-x[1])/C,[[k,x[1]+L*(x[0]-w[0])/C],[E,w[1]+L*(x[0]-w[0])/C]]);if(S.push(n),0<e){var r=S[e-1],i=(b=a=r,!(0===rr(nr(o=n),nr(b)))&&(l=a,g=(s=o)[0],m=nr(s),y=l[0],_=nr(l),v=rr(m,_),h=rr((d=u=g,[(p=y)[0]-d[0],p[1]-d[1]]),_)/v,c=[h*(f=m)[0],h*f[1]],[u[0]+c[0],u[1]+c[1]]));!1!==i&&(r[1]=i,n[0]=i),I.push(r[0]),e===P.length-2&&(I.push(n[0]),I.push(n[1]))}2===P.length&&(I.push(n[0]),I.push(n[1]))}var o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w,L,C,k,E}),U(I,t.properties)}function or(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(r*a-o*i)}function ar(e,t){return t.geometry.coordinates[0].every(function(t){return Mt(z(t),e)})}function sr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(r=t.coordinates[n],i=t.coordinates[n+1],o=e.coordinates,void 0,a=o[0]-r[0],s=o[1]-r[1],l=i[0]-r[0],u=i[1]-r[1],a*u-s*l==0&&(Math.abs(l)>=Math.abs(u)?0<l?r[0]<=o[0]&&o[0]<=i[0]:i[0]<=o[0]&&o[0]<=r[0]:0<u?r[1]<=o[1]&&o[1]<=i[1]:i[1]<=o[1]&&o[1]<=r[1]))return!0;var r,i,o,a,s,l,u;return!1}function lr(t,e){return 0<Ve(e,Sn(t)).features.length}function ur(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function cr(t,e){return t[0]===e[0]&&t[1]===e[1]}function hr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),dr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function fr(t,e){return 0<Ve(t,Sn(e)).features.length}function pr(t,e){for(var n=!1,r=!1,i=t.coordinates[0].length,o=0;o<i&&n&&r;)Mt(z(t.coordinates[0][o]),e)?n=!0:r=!0,o++;return r&&r}function dr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?0<a?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<s?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?0<a?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:0<s?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function gr(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function mr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function yr(t,e){return ss(t,e,{strict:!0})}function _r(t,n){if(!t)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");var e=Q(t);if(e!==Q(n))throw new Error("features must be of the same type");if("Point"===e)throw new Error("Point geometry not supported");if(new us({precision:6}).compare(t,n))return!1;var r=0;switch(e){case"MultiPoint":var i=E(t),o=E(n);i.forEach(function(e){o.forEach(function(t){e[0]===t[0]&&e[1]===t[1]&&r++})});break;case"LineString":case"MultiLineString":T(t,function(e){T(n,function(t){zn(e,t).features.length&&r++})});break;case"Polygon":case"MultiPolygon":T(t,function(e){T(n,function(t){Ve(e,t).features.length&&r++})})}return 0<r}function vr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function br(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function xr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function wr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Lr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Lr(t,e,n){this.x=t,this.y=e,this.weight=n}function Cr(t){this.content=[],this.scoreFunction=t}function kr(t){return t[0]}function Er(t){return t[1]}function Sr(){this._=null}function Mr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ir(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Tr(t){for(;t.L;)t=t.L;return t}function Or(t,e,n,r){var i=[null,null],o=Es.push(i)-1;return i.left=t,i.right=e,n&&Dr(i,t,e,n),r&&Dr(i,e,t,r),Cs[t.index].halfedges.push(o),Cs[e.index].halfedges.push(o),i}function Nr(t,e,n){var r=[e,n];return r.left=t,r}function Dr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Ar(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,f=s[0]-l,p=s[1]-u;if(o=e-l,f||!(0<o)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(0<f){if(h<o)return;c<o&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(h<o)return;c<o&&(c=o)}else if(0<f){if(o<c)return;o<h&&(h=o)}if(o=n-u,p||!(0<o)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(0<p){if(h<o)return;c<o&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(h<o)return;c<o&&(c=o)}else if(0<p){if(o<c)return;o<h&&(h=o)}return!(0<c||h<1)||(0<c&&(t[0]=[l+c*f,u+c*p]),h<1&&(t[1]=[l+h*f,u+h*p]),!0)}}}}}function Rr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],p=c[0],d=c[1],g=(h+p)/2,m=(f+d)/2;if(d===f){if(g<e||r<=g)return;if(p<h){if(l){if(l[1]>=i)return}else l=[g,n];o=[g,i]}else{if(l){if(l[1]<n)return}else l=[g,i];o=[g,n]}}else if(s=m-(a=(h-p)/(d-f))*g,a<-1||1<a)if(p<h){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Fr(t,e){return e[+(e.left!==t.site)]}function jr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(l*h-u*c);if(!(-Is<=f)){var p=l*l+u*u,d=c*c+h*h,g=(h*p-u*d)/f,m=(l*d-c*p)/f,y=Ss.pop()||new function(){Mr(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=i,y.x=g+a,y.y=(y.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=y;for(var _=null,v=ks._;v;)if(y.y<v.y||y.y===v.y&&y.x<=v.x){if(!v.L){_=v.P;break}v=v.L}else{if(!v.R){_=v;break}v=v.R}ks.insert(_,y),_||(ws=y)}}}}function Br(t){var e=t.circle;e&&(e.P||(ws=e.N),ks.remove(e),Ss.push(e),Mr(e),t.circle=null)}function zr(t){var e=Ms.pop()||new function(){Mr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function qr(t){Br(t),Ls.remove(t),Ms.push(t),Mr(t)}function Ur(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];qr(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Ps&&Math.abs(r-l.circle.cy)<Ps;)o=l.P,s.unshift(l),qr(l),l=o;s.unshift(l),Br(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Ps&&Math.abs(r-u.circle.cy)<Ps;)a=u.N,s.push(u),qr(u),u=a;s.push(u),Br(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Dr(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=Or(l.site,u.site,null,i),jr(l),jr(u)}function Gr(t){for(var e,n,r,i,o=t[0],a=t[1],s=Ls._;s;)if((r=Vr(s,a)-o)>Ps)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return Vr(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>Ps)){-Ps<r?(e=s.P,n=s):-Ps<i?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var l;Cs[(l=t).index]={site:l,halfedges:[]};var u=zr(t);if(Ls.insert(e,u),e||n){if(e===n)return Br(e),n=zr(e.site),Ls.insert(u,n),u.edge=n.edge=Or(e.site,u.site),jr(e),void jr(n);if(n){Br(e),Br(n);var c=e.site,h=c[0],f=c[1],p=t[0]-h,d=t[1]-f,g=n.site,m=g[0]-h,y=g[1]-f,_=2*(p*y-d*m),v=p*p+d*d,b=m*m+y*y,x=[(y*v-d*b)/_+h,(p*b-m*v)/_+f];Dr(n.edge,c,g,x),u.edge=Or(c,t,null,x),n.edge=Or(t,g,null,x),jr(e),jr(n)}else u.edge=Or(e.site,u.site)}}function Vr(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function Hr(t,e){return e[1]-t[1]||e[0]-t[0]}function Wr(t,e){var n,r,i,o=t.sort(Hr).pop();for(Es=[],Cs=new Array(t.length),Ls=new Sr,ks=new Sr;;)if(i=ws,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Gr(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Ur(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Cs.length;i<o;++i)if((t=Cs[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=(l=t,u=Es[e[n]],f=h=void 0,c=l.site,h=u.left,f=u.right,c===f&&(f=h,h=c),f?Math.atan2(f[1]-h[1],f[0]-h[0]):(c===h?(h=u[1],f=u[0]):(h=u[0],f=u[1]),Math.atan2(h[0]-f[0],f[1]-h[1])));for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}var l,u,c,h,f}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=Es.length;o--;)Rr(i=Es[o],t,e,n,r)&&Ar(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Ps||Math.abs(i[0][1]-i[1][1])>Ps)||delete Es[o]}(a,s,l,u),function(t,e,n,r){var i,o,a,s,l,u,c,h,f,p,d,g,m,y,_=Cs.length,v=!0;for(i=0;i<_;++i)if(o=Cs[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)Es[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)d=(m=o,y=Es[l[s]],p=y[+(y.left===m.site)])[0],g=p[1],h=(c=Fr(o,Es[l[++s%u]]))[0],f=c[1],(Math.abs(d-h)>Ps||Math.abs(g-f)>Ps)&&(l.splice(s,0,Es.push(Nr(a,p,Math.abs(d-t)<Ps&&Ps<r-g?[t,Math.abs(h-t)<Ps?f:r]:Math.abs(g-r)<Ps&&Ps<n-d?[Math.abs(f-r)<Ps?h:n,r]:Math.abs(d-n)<Ps&&Ps<g-e?[n,Math.abs(h-n)<Ps?f:e]:Math.abs(g-e)<Ps&&Ps<d-t?[Math.abs(f-e)<Ps?h:t,e]:null))-1),++u);u&&(v=!1)}if(v){var b,x,w,L=1/0;for(i=0,v=null;i<_;++i)(o=Cs[i])&&(w=(b=(a=o.site)[0]-t)*b+(x=a[1]-e)*x)<L&&(L=w,v=o);if(v){var C=[t,e],k=[t,r],E=[n,r],S=[n,e];v.halfedges.push(Es.push(Nr(a=v.site,C,k))-1,Es.push(Nr(a,k,E))-1,Es.push(Nr(a,E,S))-1,Es.push(Nr(a,S,C))-1)}}for(i=0;i<_;++i)(o=Cs[i])&&(o.halfedges.length||delete Cs[i])}(a,s,l,u)}this.edges=Es,this.cells=Cs,Ls=ks=Es=Cs=null}function Xr(t){return(t=t.slice()).push(t[0]),q([t])}function Yr(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!H(r))throw new Error("options must be an object");if(!V(i))throw new Error("steps must be a number");if(!V(a))throw new Error("angle must be a number");var u=X(t);if("degrees"===o)var c=_(a);else e=Gn(t,e,90,{units:o}),n=Gn(t,n,0,{units:o}),e=X(e)[0]-u[0],n=X(n)[1]-u[1];for(var h=[],f=0;f<i;f+=1){var p=-360*f/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow($r(p),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow($r(p),2));if(p<-90&&-270<=p&&(d=-d),p<-180&&-360<=p&&(g=-g),"degrees"===o){var m=d*Math.cos(c)+g*Math.sin(c),y=g*Math.cos(c)-d*Math.sin(c);d=m,g=y}h.push([d+u[0],g+u[1]])}return h.push(h[0]),"degrees"===o?q([h],l):Jn(q([h],l),a,{pivot:s})}function $r(t){var e=t*Math.PI/180;return Math.tan(e)}function Zr(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return S(t,function(t,e,n){var r=n[i];if(!V(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);0<(r=Number(r))&&w(t,function(t){o+=t[0]*r,a+=t[1]*r,s+=r})}),z([o/s,a/s],n)}function Qr(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Kr(t){if(H(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?(e=t,[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]):[360*ni(),180*ni()];var e}function Jr(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var r=[],i=0;i<t;i++)r.push(z(Kr(n)));return G(r)}function ti(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;null!=t||(t=1),V(r)||(r=10),V(i)||(i=10);for(var o=[],a=0;a<t;a++){var s=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach(function(t,e,n){n[e]=0<e?t+n[e-1]:t}),l.forEach(function(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();s.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),s[s.length-1]=s[0],s=s.map(function(e){return function(t){return[t[0]+e[0],t[1]+e[1]]}}(Kr(n))),o.push(q([s]))}return G(o)}function ei(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null!=t||(t=1),(!V(r)||r<2)&&(r=10),V(i)||(i=1e-4),V(o)||(o=Math.PI/8);for(var a=[],s=0;s<t;s++){for(var l=[Kr(n)],u=0;u<r-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;l.push([l[u][0]+h*Math.cos(c),l[u][1]+h*Math.sin(c)])}a.push(U(l))}return G(a)}function ni(){return Math.random()-.5}function ri(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return C(t,function(t){si(t.properties,e)&&n.push(t)}),G(n)}function ii(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=ai(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],l=[],u=0;u<s.length;u++)l.push(t.features[s[u]]);n(G(l),a,o)}}function oi(t,e,r,i){var o=i;return ii(t,e,function(t,e,n){o=0===n&&void 0===i?t:r(o,t,e,n)}),o}function ai(t,i){var o={};return C(t,function(t,e){var n=t.properties||{};if(n.hasOwnProperty(i)){var r=n[i];o.hasOwnProperty(r)?o[r].push(e):o[r]=[e]}}),o}function si(t,e){if(void 0===t)return!1;var n=void 0===e?"undefined":Vp(e);if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!si(t,e[r]))return!1;return!0}return li(t,e)}function li(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function ui(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function ci(){}function hi(t){this.message=t||""}function fi(t){this.message=t||""}function pi(){}function di(t){return null===t?Ql:t.color}function gi(t){return null===t?null:t.parent}function mi(t,e){null!==t&&(t.color=e)}function yi(t){return null===t?null:t.left}function _i(t){return null===t?null:t.right}function vi(){this.root_=null,this.size_=0}function bi(){}function xi(){this.array_=[],arguments[0]instanceof Rl&&this.addAll(arguments[0])}function wi(){}function Li(t){this.message=t||""}function Ci(){this.array_=[]}function ki(t){switch(t.type){case"Polygon":return 1<an(t)?t:null;case"MultiPolygon":var e=[];if(P(t,function(t){1<an(t)&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Ei(){this.reset()}function Si(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Mi(t){return 1<t?rp:t<-1?-rp:Math.asin(t)}function Pi(){}function Ii(t,e){t&&_p.hasOwnProperty(t.type)&&_p[t.type](t,e)}function Ti(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Oi(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ti(t[n],e,1);e.polygonEnd()}function Ni(t){return[cp(t[1],t[0]),Mi(t[2])]}function Di(t){var e=t[0],n=t[1],r=hp(n);return[r*hp(e),r*dp(e),dp(n)]}function Ai(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ri(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Fi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ji(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Bi(t){var e=gp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zi(t,e){return[np<t?t-op:t<-np?t+op:t,e]}function qi(t,e,n){return(t%=op)?e||n?bp(Gi(t),Vi(e,n)):Gi(t):e||n?Vi(e,n):zi}function Ui(n){return function(t,e){return[np<(t+=n)?t-op:t<-np?t+op:t,e]}}function Gi(t){var e=Ui(t);return e.invert=Ui(-t),e}function Vi(t,e){function n(t,e){var n=hp(e),r=hp(t)*n,i=dp(t)*n,o=dp(e),a=o*s+r*l;return[cp(i*u-a*c,r*s-o*l),Mi(a*u+i*c)]}var s=hp(t),l=dp(t),u=hp(e),c=dp(e);return n.invert=function(t,e){var n=hp(e),r=hp(t)*n,i=dp(t)*n,o=dp(e),a=o*u-i*c;return[cp(i*u+o*c,r*s+a*l),Mi(a*s-r*l)]},n}function Hi(t,e){(e=Di(e))[0]-=t,Bi(e);var n,r=1<(n=-e[1])?0:n<-1?np:Math.acos(n);return((-e[2]<0?-r:r)+op-ep)%op}function Wi(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Xi(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Yi(t){return 1<t.length}function $i(t,e){return((t=t.x)[0]<0?t[1]-rp-ep:rp-t[1])-((e=e.x)[0]<0?e[1]-rp-ep:rp-e[1])}function Zi(r){return function(t){var e=new Qi;for(var n in r)e[n]=r[n];return e.stream=t,e}}function Qi(){}function Ki(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),vp(n,t.stream(Fp));var a=Fp.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),l=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}function Ji(P){return function(t){function n(t){return[(t=u(t[0]*sp,t[1]*sp))[0]*g+a,s-t[1]*g]}function e(t,e){return[(t=o(t,e))[0]*g+a,s-t[1]*g]}function r(){u=bp(l=qi(b,x,w),o);var t=o(_,v);return a=m-t[0]*g,s=y+t[1]*g,i()}function i(){return p=d=null,n}var o,a,s,l,u,c,h,f,p,d,g=150,m=480,y=250,_=0,v=0,b=0,x=0,w=0,L=null,C=Bp,k=null,E=Op,S=.5,M=qp(e,S);return n.stream=function(t){return p&&d===t?p:p=Up(C(l,M(E(d=t))))},n.clipAngle=function(t){return arguments.length?(C=+t?function(i,o){function p(t,e){return hp(t)*hp(e)>E}function d(t,e,n){var r=[1,0,0],i=Ri(Di(t),Di(e)),o=Ai(i,i),a=i[0],s=o-a*a;if(!s)return!n&&t;var l=E*o/s,u=-E*a/s,c=Ri(r,i),h=ji(r,l);Fi(h,ji(i,u));var f=c,p=Ai(h,f),d=Ai(f,f),g=p*p-d*(Ai(h,h)-1);if(!(g<0)){var m=gp(g),y=ji(f,(-p-m)/d);if(Fi(y,h),y=Ni(y),!n)return y;var _,v=t[0],b=e[0],x=t[1],w=e[1];b<v&&(_=v,v=b,b=_);var L=b-v,C=lp(L-np)<ep;if(!C&&w<x&&(_=x,x=w,w=_),C||L<ep?C?0<x+w^y[1]<(lp(y[0]-v)<ep?x:w):x<=y[1]&&y[1]<=w:np<L^(v<=y[0]&&y[0]<=b)){var k=ji(f,(-p+m)/d);return Fi(k,h),[y,Ni(k)]}}}function g(t,e){var n=m?i:np-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}var E=hp(i),m=0<E,y=lp(E)>ep;return jp(p,function(s){var l,u,c,h,f;return{lineStart:function(){h=c=!1,f=1},point:function(t,e){var n,r=[t,e],i=p(t,e),o=m?i?0:g(t,e):i?g(t+(t<0?np:-np),e):0;if(!l&&(h=c=i)&&s.lineStart(),i!==c&&(!(n=d(l,r))||kp(l,n)||kp(r,n))&&(r[0]+=ep,r[1]+=ep,i=p(r[0],r[1])),i!==c)f=0,i?(s.lineStart(),n=d(r,l),s.point(n[0],n[1])):(n=d(l,r),s.point(n[0],n[1]),s.lineEnd()),l=n;else if(y&&l&&m^i){var a;o&u||!(a=d(r,l,!0))||(f=0,m?(s.lineStart(),s.point(a[0][0],a[0][1]),s.point(a[1][0],a[1][1]),s.lineEnd()):(s.point(a[1][0],a[1][1]),s.lineEnd(),s.lineStart(),s.point(a[0][0],a[0][1])))}!i||l&&kp(l,r)||s.point(r[0],r[1]),l=r,c=i,u=o},lineEnd:function(){c&&s.lineEnd(),l=null},clean:function(){return f|(h&&c)<<1}}},function(t,e,n,r){!function(t,e,n,r,i,o){if(n){var a=hp(e),s=dp(e),l=r*n;null==i?(i=e+r*op,o=e-l/2):(i=Hi(a,i),o=Hi(a,o),(0<r?i<o:o<i)&&(i+=r*op));for(var u,c=i;0<r?o<c:c<o;c-=l)u=Ni([a,-s*hp(c),-s*dp(c)]),t.point(u[0],u[1])}}(r,i,o,n,t,e)},m?[0,-i]:[-np,i-np])}(L=t*sp,6*sp):(L=null,Bp),i()):L*ap},n.clipExtent=function(t){return arguments.length?(E=null==t?(k=c=h=f=null,Op):function(y,_,v,b){function x(t,e){return y<=t&&t<=v&&_<=e&&e<=b}function w(t,e,n,r){var i=0,o=0;if(null==t||(i=a(t,n))!==(o=a(e,n))||s(t,e)<0^0<n)for(;r.point(0===i||3===i?y:v,1<i?b:_),(i=(i+n+4)%4)!==o;);else r.point(e[0],e[1])}function a(t,e){return lp(t[0]-y)<ep?0<e?0:3:lp(t[0]-v)<ep?0<e?2:1:lp(t[1]-_)<ep?0<e?1:0:0<e?3:2}function L(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){function t(t,e){x(t,e)&&g.point(t,e)}function e(t,e){var n=x(t,e);if(h&&o.push([t,e]),p)a=t,s=e,p=!1,(l=n)&&(g.lineStart(),g.point(t,e));else if(n&&f)g.point(t,e);else{var r=[u=Math.max(Ip,Math.min(Pp,u)),c=Math.max(Ip,Math.min(Pp,c))],i=[t=Math.max(Ip,Math.min(Pp,t)),e=Math.max(Ip,Math.min(Pp,e))];Cp(r,i,y,_,v,b)?(f||(g.lineStart(),g.point(r[0],r[1])),g.point(i[0],i[1]),n||g.lineEnd(),d=!1):n&&(g.lineStart(),g.point(t,e),d=!1)}u=t,c=e,f=n}var i,h,o,a,s,l,u,c,f,p,d,g=r,n=Lp(),m={point:t,lineStart:function(){m.point=e,h&&h.push(o=[]),f=!(p=!0),u=c=NaN},lineEnd:function(){i&&(e(a,s),l&&f&&n.rejoin(),i.push(n.result())),m.point=t,f&&g.lineEnd()},polygonStart:function(){g=n,i=[],h=[],d=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=h.length;e<n;++e)for(var r,i,o=h[e],a=1,s=o.length,l=o[0],u=l[0],c=l[1];a<s;++a)r=u,i=c,u=(l=o[a])[0],c=l[1],i<=b?b<c&&(c-i)*(y-r)<(u-r)*(b-i)&&++t:c<=b&&(u-r)*(b-i)<(c-i)*(y-r)&&--t;return t}(),e=d&&t,n=(i=Mp(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),n&&Ep(i,L,t,w,r),r.polygonEnd()),g=r,i=h=o=null}};return m}}(k=+t[0][0],c=+t[0][1],h=+t[1][0],f=+t[1][1]),i()):null==k?null:[[k,c],[h,f]]},n.scale=function(t){return arguments.length?(g=+t,r()):g},n.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],r()):[m,y]},n.center=function(t){return arguments.length?(_=t[0]%360*sp,v=t[1]%360*sp,r()):[_*ap,v*ap]},n.rotate=function(t){return arguments.length?(b=t[0]%360*sp,x=t[1]%360*sp,w=2<t.length?t[2]%360*sp:0,r()):[b*ap,x*ap,w*ap]},n.precision=function(t){return arguments.length?(M=qp(e,S=t*t),i()):gp(S)},n.fitExtent=function(t,e){return Ki(n,t,e)},n.fitSize=function(t,e){return Ki(n,[[0,0],t],e)},function(){return o=function(){return P}.apply(this,arguments),n.invert=o.invert&&function(t){return(t=u.invert((t[0]-a)/g,(s-t[1])/g))&&[t[0]*ap,t[1]*ap]},r()}}()()}function to(t,e){return[t,pp(mp((rp+e)/2))]}function eo(t,e){return[pp(mp((rp+e)/2)),-t]}function no(t,n,r,i){var e=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return S(t,function(t){var e=no(t,n,r,i);e&&a.push(e)}),G(a)}var s,l=W(t),u=50<l[1]&&50<l[3];s=u?{type:o.type,coordinates:function e(t,n){return"object"!=Vp(t[0])?n(t):t.map(function(t){return e(t,n)})}(o.coordinates,ro(o))}:Ze(o);var c,h=(new zu).read(s),f=d(g(n,r),"meters"),p=Th.bufferOp(h,f);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((p=(new qu).write(p)).coordinates))return(c=u?{type:p.type,coordinates:function e(t,n){return"object"!=Vp(t[0])?n.invert(t):t.map(function(t){return e(t,n)})}(p.coordinates,ro(o))}:Qe(p)).geometry?c:B(c,e)}function ro(t){var e=ae(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Gp().center(e).rotate(n).scale(ho)}function io(){for(var t=new zu,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Kf.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new qu).write(e),properties:arguments[0].properties}}function oo(t,e){var n=$(t),r=$(e);if(Xt(yn(r,{precision:4})).coordinates[0].length<4)return null;if(Xt(yn(n,{precision:4})).coordinates[0].length<4)return null;var i=new zu,o=i.read(yn(n)),a=i.read(yn(r)),s=Gf.intersection(o,a);return s.isEmpty()?null:B((new qu).write(s))}function ao(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,o=n.mask;if(null==e)throw new Error("cellSide is required");if(!V(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(o&&-1===["Polygon","MultiPolygon"].indexOf(Q(o)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],s=t[1],l=t[2],u=t[3],c=(s+u)/2,h=(a+l)/2,f=2*e/At([a,c],[l,c],n)*(l-a),p=2*e/At([h,s],[h,u],n)*(u-s),d=f/2,g=2*d,m=Math.sqrt(3)/2*p,y=l-a,_=u-s,v=.75*g,b=m,x=(y-g)/(g-d/2),w=Math.floor(x),L=(w*v-d/2-y)/2-d/2+v/2,C=Math.floor((_-m)/m),k=(_-C*m)/2,E=m/2<C*m-_;E&&(k-=m/4);for(var S=[],M=[],P=0;P<6;P++){var I=2*Math.PI/6*P;S.push(Math.cos(I)),M.push(Math.sin(I))}for(var T=[],O=0;O<=w;O++)for(var N=0;N<=C;N++){var D=O%2==1;if(!(0===N&&D||0===N&&E)){var A=O*v+a-L,R=N*b+s+k;if(D&&(R-=m/2),!0===i)(function(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=[];l.push(t),l.push([t[0]+e*i[s],t[1]+n*o[s]]),l.push([t[0]+e*i[(s+1)%6],t[1]+n*o[(s+1)%6]]),l.push(t),a.push(q([l],r))}return a})([A,R],f/2,p/2,r,S,M).forEach(function(t){o?oo(o,t)&&T.push(t):T.push(t)});else{var F=function(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var l=t[0]+e*i[s],u=t[1]+n*o[s];a.push([l,u])}return a.push(a[0].slice()),q([a],r)}([A,R],f/2,p/2,r,S,M);o?oo(o,F)&&T.push(F):T.push(F)}}}return G(T)}function so(t){if(t.features.length<=1)return t;var e,n,r,o=(e=t,n=wo(),r=[],P(e,function(t,e){var n=W(t);r.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],geojson:t,index:e})}),n.load(r),n),a=[],s={};return P(t,function(t,e){if(s[e])return!0;for(o.remove({index:e},lo),s[e]=!0;;){var n=W(t),r=o.search({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]});if(0<r.length){var i=r.map(function(t){return s[t.index]=!0,o.remove({index:t.index},lo),t.geojson});i.push(t),t=io.apply(this,i)}if(0===r.length)break}a.push(t)}),G(a)}function lo(t,e){return t.index===e.index}function uo(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==e)throw new Error("cellSide is required");if(!V(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Q(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],s=t[1],l=t[2],u=t[3],c=e/At([a,s],[l,s],n)*(l-a),h=e/At([a,s],[a,u],n)*(u-s),f=l-a,p=u-s,d=Math.floor(f/c),g=Math.floor(p/h),m=(p-g*h)/2,y=a+(f-d*c)/2,_=0;_<d;_++){for(var v=s+m,b=0;b<g;b++){var x=q([[[y,v],[y,v+h],[y+c,v+h],[y+c,v],[y,v]]],r);i?oo(i,x)&&o.push(x):o.push(x),v+=h}y+=c}return G(o)}function co(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==e)throw new Error("cellSide is required");if(!V(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Q(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/At([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),s=e/At([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,u=t[0];u<=t[2];){for(var c=0,h=t[1];h<=t[3];){var f=null,p=null;l%2==0&&c%2==0?(f=q([[[u,h],[u,h+s],[u+a,h],[u,h]]],r),p=q([[[u,h+s],[u+a,h+s],[u+a,h],[u,h+s]]],r)):l%2==0&&c%2==1?(f=q([[[u,h],[u+a,h+s],[u+a,h],[u,h]]],r),p=q([[[u,h],[u,h+s],[u+a,h+s],[u,h]]],r)):c%2==0&&l%2==1?(f=q([[[u,h],[u,h+s],[u+a,h+s],[u,h]]],r),p=q([[[u,h],[u+a,h+s],[u+a,h],[u,h]]],r)):c%2==1&&l%2==1&&(f=q([[[u,h],[u,h+s],[u+a,h],[u,h]]],r),p=q([[[u,h+s],[u+a,h+s],[u+a,h],[u,h+s]]],r)),i?(oo(i,f)&&o.push(f),oo(i,p)&&o.push(p)):(o.push(f),o.push(p)),h+=s,c++}l++,u+=a}return G(o)}var ho=6371008.8,fo={meters:ho,metres:ho,millimeters:1e3*ho,millimetres:1e3*ho,centimeters:100*ho,centimetres:100*ho,kilometers:ho/1e3,kilometres:ho/1e3,miles:ho/1609.344,nauticalmiles:ho/1852,inches:39.37*ho,yards:ho/1.0936,feet:3.28084*ho,radians:1,degrees:ho/111325},po={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/ho,degrees:1/111325},go={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},mo=Object.freeze({earthRadius:ho,factors:fo,unitsFactors:po,areaFactors:go,feature:B,geometry:e,point:z,points:n,polygon:q,polygons:r,lineString:U,lineStrings:i,featureCollection:G,multiLineString:v,multiPoint:o,multiPolygon:b,geometryCollection:a,round:s,radiansToLength:d,lengthToRadians:g,lengthToDegrees:l,bearingToAzimuth:f,radiansToDegrees:p,degreesToRadians:_,convertLength:u,convertArea:c,isNumber:V,isObject:H,validateBBox:h,validateId:m,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),yo=Object.freeze({coordEach:w,coordReduce:y,propEach:x,propReduce:L,featureEach:C,featureReduce:k,coordAll:E,geomEach:S,geomReduce:M,flattenEach:P,flattenReduce:I,segmentEach:T,segmentReduce:O,lineEach:N,lineReduce:D}),_o=Object.freeze({getCoord:X,getCoords:A,containsNumber:R,geojsonType:F,featureOf:j,collectionOf:Y,getGeom:$,getGeomType:Z,getType:Q}),vo={successCallback:null,verbose:!1},bo={},xo=function t(e,n,r,i,o){for(r=r||0,i=i||e.length-1,o=o||function(t,e){return t<e?-1:e<t?1:0};r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[n],f=r,p=i;for(rt(e,r,n),0<o(e[i],h)&&rt(e,r,i);f<p;){for(rt(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;0<o(e[p],h);)p--}0===o(e[r],h)?rt(e,r,p):rt(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}},wo=it;it.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!pt(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],pt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):ft(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!pt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],pt(t,a=e.leaf?n(o):o)){if(e.leaf||ft(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!ft(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,a=(r=a).children[0])}return this},toBBox:function(t){return t},compareMinX:lt,compareMinY:ut,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return ot(i=dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=dt([])).leaf=!1,i.height=r;var s,l,u,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(gt(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(gt(t,s,u=Math.min(s+f-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return ot(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=ct(a=e.children[i]),f=t,p=a,(u=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}var f,p;return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),st(a,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=dt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ot(n,this.toBBox),ot(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g,m;for(l=u=1/0,r=e;r<=n-e;r++)h=i=at(t,0,r,this.toBBox),f=o=at(t,r,n,this.toBBox),void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),g=Math.min(h.maxX,f.maxX),m=Math.min(h.maxY,f.maxY),a=Math.max(0,g-p)*Math.max(0,m-d),s=ct(i)+ct(o),a<l?(l=a,c=r,u=s<u?s:u):a===l&&s<u&&(u=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:lt,i=t.leaf?this.compareMinY:ut;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=at(t,0,e,a),l=at(t,n-e,n,a),u=ht(s)+ht(l);for(i=e;i<n-e;i++)o=t.children[i],st(s,t.leaf?a(o):o),u+=ht(s);for(i=n-e-1;e<=i;i--)o=t.children[i],st(l,t.leaf?a(o):o),u+=ht(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)st(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Lo=function(t,e,n){var r=t*e,i=Co*t,o=i-(i-t),a=t-o,s=Co*e,l=s-(s-e),u=e-l,c=a*u-(r-o*l-a*l-o*u);return n?(n[0]=c,n[1]=r,n):[c,r]},Co=+(Math.pow(2,27)+1),ko=function(t,e){var n,r,i,o,a,s=0|t.length,l=0|e.length;if(1===s&&1===l)return n=t[0],r=e[0],(a=n-((i=n+r)-(o=i-n))+(r-o))?[a,i]:[i];var u,c,h=new Array(s+l),f=0,p=0,d=0,g=Math.abs,m=t[p],y=g(m),_=e[d],v=g(_);y<v?(c=m,(p+=1)<s&&(y=g(m=t[p]))):(c=_,(d+=1)<l&&(v=g(_=e[d]))),p<s&&y<v||l<=d?(u=m,(p+=1)<s&&(y=g(m=t[p]))):(u=_,(d+=1)<l&&(v=g(_=e[d])));for(var b,x,w=u+c,L=w-u,C=c-L,k=C,E=w;p<s&&d<l;)y<v?(u=m,(p+=1)<s&&(y=g(m=t[p]))):(u=_,(d+=1)<l&&(v=g(_=e[d]))),(C=(c=k)-(L=(w=u+c)-u))&&(h[f++]=C),k=E-((b=E+w)-(x=b-E))+(w-x),E=b;for(;p<s;)(C=(c=k)-(L=(w=(u=m)+c)-u))&&(h[f++]=C),k=E-((b=E+w)-(x=b-E))+(w-x),E=b,(p+=1)<s&&(m=t[p]);for(;d<l;)(C=(c=k)-(L=(w=(u=_)+c)-u))&&(h[f++]=C),k=E-((b=E+w)-(x=b-E))+(w-x),E=b,(d+=1)<l&&(_=e[d]);return k&&(h[f++]=k),E&&(h[f++]=E),f||(h[f++]=0),h.length=f,h},Eo=function(t,e){var n=t.length;if(1===n){var r=Lo(t[0],e);return r[0]?r:[r[1]]}var i,o,a,s,l,u,c,h=new Array(2*n),f=[.1,.1],p=[.1,.1],d=0;Lo(t[0],e,f),f[0]&&(h[d++]=f[0]);for(var g=1;g<n;++g){Lo(t[g],e,p);var m=f[1];void 0,u=(o=p[0])-(l=(s=(i=m)+o)-i),c=i-(s-l),(a=f)&&(a[0]=c+u,a[1]=s),f[0]&&(h[d++]=f[0]);var y=p[1],_=f[1],v=y+_,b=_-(v-y);f[1]=v,b&&(h[d++]=b)}return f[1]&&(h[d++]=f[1]),0===d&&(h[d++]=0),h.length=d,h},So=function(t,e){var n,r,i,o,a,s=0|t.length,l=0|e.length;if(1===s&&1===l)return n=t[0],r=-e[0],(a=n-((i=n+r)-(o=i-n))+(r-o))?[a,i]:[i];var u,c,h=new Array(s+l),f=0,p=0,d=0,g=Math.abs,m=t[p],y=g(m),_=-e[d],v=g(_);y<v?(c=m,(p+=1)<s&&(y=g(m=t[p]))):(c=_,(d+=1)<l&&(v=g(_=-e[d]))),p<s&&y<v||l<=d?(u=m,(p+=1)<s&&(y=g(m=t[p]))):(u=_,(d+=1)<l&&(v=g(_=-e[d])));for(var b,x,w=u+c,L=w-u,C=c-L,k=C,E=w;p<s&&d<l;)y<v?(u=m,(p+=1)<s&&(y=g(m=t[p]))):(u=_,(d+=1)<l&&(v=g(_=-e[d]))),(C=(c=k)-(L=(w=u+c)-u))&&(h[f++]=C),k=E-((b=E+w)-(x=b-E))+(w-x),E=b;for(;p<s;)(C=(c=k)-(L=(w=(u=m)+c)-u))&&(h[f++]=C),k=E-((b=E+w)-(x=b-E))+(w-x),E=b,(p+=1)<s&&(m=t[p]);for(;d<l;)(C=(c=k)-(L=(w=(u=_)+c)-u))&&(h[f++]=C),k=E-((b=E+w)-(x=b-E))+(w-x),E=b,(d+=1)<l&&(_=-e[d]);return k&&(h[f++]=k),E&&(h[f++]=E),f||(h[f++]=0),h.length=f,h},Mo=mt(function(o){function c(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function h(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",h(t.slice(0,e)),",",h(t.slice(e)),")"].join("")}function f(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",h(f(c(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));var r;return e}function a(t){for(var e=[],n=[],r=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),i=[],o=0;o<t;++o)0==(1&o)?e.push.apply(e,f(c(r,o))):n.push.apply(n,f(c(r,o))),i.push("m"+o);var a=h(e),s=h(n),l="orientation"+t+"Exact",u=["function ",l,"(",i.join(),"){var p=",a,",n=",s,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",u)(ko,Lo,Eo,So)}var l=a(3),x=a(4),s=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(0<i){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(0<=o)return a;r=-(i+o)}var s=33306690738754716e-32*r;return s<=a||a<=-s?a:l(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],l=e[1]-r[1],u=n[1]-r[1],c=t[2]-r[2],h=e[2]-r[2],f=n[2]-r[2],p=o*u,d=a*l,g=a*s,m=i*u,y=i*l,_=o*s,v=c*(p-d)+h*(g-m)+f*(y-_),b=7771561172376103e-31*((Math.abs(p)+Math.abs(d))*Math.abs(c)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(_))*Math.abs(f));return b<v||b<-v?v:x(t,e,n,r)}];!function(){for(;s.length<=5;)s.push(a(s.length));for(var t=[],e=["slow"],n=0;n<=5;++n)t.push("a"+n),e.push("o"+n);var r=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(r.join(""));var i=Function.apply(void 0,e);for(o.exports=i.apply(void 0,[function(t){var e=s[t.length];return e||(e=s[t.length]=a(t.length)),e.apply(void 0,t)}].concat(s)),n=0;n<=5;++n)o.exports[n]=s[n]}()}),Po=Mo[3],Io=yt,To=yt;yt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(s=e[o=a]),0<=n(s,i))break;e[t]=s,t=o}e[t]=i}},Io.default=To;var Oo=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],l=e[o][1],u=e[a][0],c=e[a][1];r<l!=r<c&&n<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i},No=Mo[3],Do=_t,Ao=_t;Do.default=Ao;var Ro=function(t){return t},Fo=function(t){if(null==t)return Ro;var o,a,s=t.scale[0],l=t.scale[1],u=t.translate[0],c=t.translate[1];return function(t,e){e||(o=a=0);var n=2,r=t.length,i=new Array(r);for(i[0]=(o+=t[0])*s+u,i[1]=(a+=t[1])*l+c;n<r;)i[n]=t[n],++n;return i}},jo=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Bo=function(o,a,s,t,l,e){3===arguments.length&&(t=e=Array,l=null);for(var u=new t(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),c=new e(o),h=o-1,n=0;n<o;++n)u[n]=l;return{set:function(t,e){for(var n=a(t)&h,r=u[n],i=0;r!=l;){if(s(r,t))return c[n]=e;if(++i>=o)throw new Error("full hashmap");r=u[n=n+1&h]}return u[n]=t,c[n]=e},maybeSet:function(t,e){for(var n=a(t)&h,r=u[n],i=0;r!=l;){if(s(r,t))return c[n];if(++i>=o)throw new Error("full hashmap");r=u[n=n+1&h]}return u[n]=t,c[n]=e},get:function(t,e){for(var n=a(t)&h,r=u[n],i=0;r!=l;){if(s(r,t))return c[n];if(++i>=o)break;r=u[n=n+1&h]}return e},keys:function(){for(var t=[],e=0,n=u.length;e<n;++e){var r=u[e];r!=l&&t.push(r)}return t}}},zo=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qo=new ArrayBuffer(16),Uo=new Float64Array(qo),Go=new Uint32Array(qo),Vo=function(t){Uo[0]=t[0],Uo[1]=t[1];var e=Go[0]^Go[1];return 2147483647&(e<<5^e>>7^Go[2]^Go[3])},Ho=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ho.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Ho.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ho.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(1<=n)return this.points[this.length-1];var r,i,o,a,s,l,u,c=Math.floor((this.points.length-1)*n);return r=(this.length-1)*n-c,i=this.points[c],o=this.controls[c][1],a=this.controls[c+1][0],s=this.points[c+1],u=[(l=r*r)*r,3*l*(1-r),3*r*(1-r)*(1-r),(1-r)*(1-r)*(1-r)],{x:s.x*u[0]+a.x*u[1]+o.x*u[2]+i.x*u[3],y:s.y*u[0]+a.y*u[1]+o.y*u[2]+i.y*u[3],z:s.z*u[0]+a.z*u[1]+o.z*u[2]+i.z*u[3]}};var Wo=ue,Xo=ue;ue.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Le(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Le(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},ue.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},Wo.default=Xo,Me.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Fe(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],Fe(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Re(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Fe(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Fe(t,a=e.leaf?n(o):o)){if(e.leaf||Re(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=je([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!Re(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,a=(r=a).children[0])}return this},toBBox:function(t){return t},compareMinX:Oe,compareMinY:Ne,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return Pe(i=je(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=je([])).leaf=!1,i.height=r;var s,l,u,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(Be(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(Be(t,s,u=Math.min(s+f-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return Pe(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=De(a=e.children[i]),f=t,p=a,(u=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}var f,p;return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Te(a,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=je(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Pe(n,this.toBBox),Pe(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=je([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pe(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g,m;for(l=u=1/0,r=e;r<=n-e;r++)h=i=Ie(t,0,r,this.toBBox),f=o=Ie(t,r,n,this.toBBox),void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),g=Math.min(h.maxX,f.maxX),m=Math.min(h.maxY,f.maxY),a=Math.max(0,g-p)*Math.max(0,m-d),s=De(i)+De(o),a<l?(l=a,c=r,u=s<u?s:u):a===l&&s<u&&(u=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Oe,i=t.leaf?this.compareMinY:Ne;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=Ie(t,0,e,a),l=Ie(t,n-e,n,a),u=Ae(s)+Ae(l);for(i=e;i<n-e;i++)o=t.children[i],Te(s,t.leaf?a(o):o),u+=Ae(s);for(i=n-e-1;e<=i;i--)o=t.children[i],Te(l,t.leaf?a(o):o),u+=Ae(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)Te(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Pe(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Yo=Object.freeze({toMercator:Ze,toWgs84:Qe}),$o=6378137,Zo=function(t){function e(){for(var t=[],e=0;e<f.features.length;e++)-1==f.features[e].properties.parent&&t.push(e);if(1<t.length)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<f.features.length;r++)t[e]!=r&&Mt(f.features[t[e]].geometry.coordinates[0][0],f.features[r],{ignoreBoundary:!0})&&an(f.features[r])<1/0&&(n=r);f.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<f.features.length;t++)if(-1==f.features[t].properties.parent){var e=f.features[t].properties.winding;i(t,f.features[t].properties.netWinding=e)}}function i(t,e){for(var n=0;n<f.features.length;n++)if(f.features[n].properties.parent==t){var r=e+f.features[n].properties.winding;i(n,f.features[n].properties.netWinding=r)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=t.geometry.coordinates.length,o=[],a=0;a<r;a++){var s=t.geometry.coordinates[a];bn(s[0],s[s.length-1])||s.push(s[0]),o.push.apply(o,s.slice(0,s.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(o))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=o.length,u=function(t,p,e){function r(t,e,n,r){var i,o,a=d[t][e],s=d[t][e+1],l=d[n][r],u=d[n][r+1],c=function(t,e,n,r){if(_n(t,n)||_n(t,r)||_n(e,n)||_n(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],l=n[0],u=n[1],c=r[0],h=r[1],f=(i-a)*(u-h)-(o-s)*(l-c);return 0===f?null:[((i*s-o*a)*(l-c)-(i-a)*(l*h-u*c))/f,((i*s-o*a)*(u-h)-(o-s)*(l*h-u*c))/f]}(a,s,l,u);if(null!==c&&(i=s[0]!==a[0]?(c[0]-a[0])/(s[0]-a[0]):(c[1]-a[1])/(s[1]-a[1]),o=u[0]!==l[0]?(c[0]-l[0])/(u[0]-l[0]):(c[1]-l[1])/(u[1]-l[1]),!(1<=i||i<=0||1<=o||o<=0))){var h=c,f=!m[h];f&&(m[h]=!0),p?g.push(p(c,t,e,a,s,i,n,r,l,u,o,f)):g.push(c)}}function n(t,e){var n,r,i,o,a=d[t][e],s=d[t][e+1];return a[0]<s[0]?(n=a[0],r=s[0]):(n=s[0],r=a[0]),a[1]<s[1]?(i=a[1],o=s[1]):(i=s[1],o=a[1]),{minX:n,minY:i,maxX:r,maxY:o,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===e&&(e=1);var d=t.geometry.coordinates,g=[],m={};if(e){for(var i=[],o=0;o<d.length;o++)for(var a=0;a<d[o].length-1;a++)i.push(n(o,a));var s=wo();s.load(i)}for(var l=0;l<d.length;l++)for(var u=0;u<d[l].length-1;u++)if(e)s.search(n(l,u)).forEach(function(t){var e=t.ring,n=t.edge;r(l,u,e,n)});else for(var c=0;c<d.length;c++)for(var h=0;h<d[c].length-1;h++)r(l,u,c,h);return p||(g={type:"Feature",geometry:{type:"MultiPoint",coordinates:g}}),g}(t,function(t,e,n,r,i,o,a,s,l,u,c,h){return[t,e,n,r,i,o,a,s,l,u,c,h]}),c=u.length;if(0==c){var h=[];for(a=0;a<r;a++)h.push(q([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(vn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[a])}));var f=G(h);return e(),n(),f}var p=[],d=[];for(a=0;a<r;a++){p.push([]);for(var g=0;g<t.geometry.coordinates[a].length-1;g++)p[a].push([new Qo(t.geometry.coordinates[a][(g+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,g],[a,(g+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),d.push(new Ko(t.geometry.coordinates[a][g],[a,(g-1).modulo(t.geometry.coordinates[a].length-1)],[a,g],void 0,void 0,!1,!0))}for(a=0;a<c;a++)p[u[a][1]][u[a][2]].push(new Qo(u[a][0],u[a][5],[u[a][1],u[a][2]],[u[a][6],u[a][7]],void 0)),u[a][11]&&d.push(new Ko(u[a][0],[u[a][1],u[a][2]],[u[a][6],u[a][7]],void 0,void 0,!0,!0));var m=d.length;for(a=0;a<p.length;a++)for(g=0;g<p[a].length;g++)p[a][g].sort(function(t,e){return t.param<e.param?-1:1});var y=[];for(a=0;a<m;a++)y.push({minX:d[a].coord[0],minY:d[a].coord[1],maxX:d[a].coord[0],maxY:d[a].coord[1],index:a});var _=wo();for(_.load(y),a=0;a<p.length;a++)for(g=0;g<p[a].length;g++)for(var v=0;v<p[a][g].length;v++){x=v==p[a][g].length-1?p[a][(g+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:p[a][g][v+1].coord;var b=_.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0];p[a][g][v].nxtIsectAlongEdgeIn=b.index}for(a=0;a<p.length;a++)for(g=0;g<p[a].length;g++)for(v=0;v<p[a][g].length;v++){var x=p[a][g][v].coord,w=(b=_.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0]).index;w<l?d[w].nxtIsectAlongRingAndEdge2=p[a][g][v].nxtIsectAlongEdgeIn:bn(d[w].ringAndEdge1,p[a][g][v].ringAndEdgeIn)?d[w].nxtIsectAlongRingAndEdge1=p[a][g][v].nxtIsectAlongEdgeIn:d[w].nxtIsectAlongRingAndEdge2=p[a][g][v].nxtIsectAlongEdgeIn}var L=[];for(g=a=0;g<r;g++){var C=a;for(v=0;v<t.geometry.coordinates[g].length-1;v++)d[a].coord[0]<d[C].coord[0]&&(C=a),a++;var k=d[C].nxtIsectAlongRingAndEdge2;for(v=0;v<d.length;v++)if(d[v].nxtIsectAlongRingAndEdge1==C||d[v].nxtIsectAlongRingAndEdge2==C){var E=v;break}var S=vn([d[E].coord,d[C].coord,d[k].coord],!0)?1:-1;L.push({isect:C,parent:-1,winding:S})}for(L.sort(function(t,e){return d[t.isect].coord>d[e.isect].coord?-1:1}),h=[];0<L.length;){var M=L.pop(),P=M.isect,I=M.parent,T=M.winding,O=h.length,N=[d[P].coord],D=P;if(d[P].ringAndEdge1Walkable)var A=d[P].ringAndEdge1,R=d[P].nxtIsectAlongRingAndEdge1;else A=d[P].ringAndEdge2,R=d[P].nxtIsectAlongRingAndEdge2;for(;!bn(d[P].coord,d[R].coord);){N.push(d[R].coord);var F=void 0;for(a=0;a<L.length;a++)if(L[a].isect==R){F=a;break}if(null!=F&&L.splice(F,1),bn(A,d[R].ringAndEdge1)){if(A=d[R].ringAndEdge2,d[R].ringAndEdge2Walkable=!1,d[R].ringAndEdge1Walkable){var j={isect:R};vn([d[D].coord,d[R].coord,d[d[R].nxtIsectAlongRingAndEdge2].coord],1==T)?(j.parent=I,j.winding=-T):(j.parent=O,j.winding=T),L.push(j)}R=d[D=R].nxtIsectAlongRingAndEdge2}else A=d[R].ringAndEdge1,d[R].ringAndEdge1Walkable=!1,d[R].ringAndEdge2Walkable&&(j={isect:R},vn([d[D].coord,d[R].coord,d[d[R].nxtIsectAlongRingAndEdge1].coord],1==T)?(j.parent=I,j.winding=-T):(j.parent=O,j.winding=T),L.push(j)),R=d[D=R].nxtIsectAlongRingAndEdge1}N.push(d[R].coord),h.push(q([N],{index:O,parent:I,winding:T,netWinding:void 0}))}return f=G(h),e(),n(),f},Qo=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Ko=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var Jo=Math.PI/180,ta=180/Math.PI,ea=function(t,e){this.lon=t,this.lat=e,this.x=Jo*t,this.y=Jo*e};ea.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ea.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ea(e,t)};var na=function(){this.coords=[],this.length=0};na.prototype.move_to=function(t){this.length++,this.coords.push(t)};var ra=function(t){this.properties=t||{},this.geometries=[]};ra.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},ra.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var ia=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ea(t.x,t.y),this.end=new ea(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};ia.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ta*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[ta*Math.atan2(i,r),a]},ia.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,f=360-u,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],m=Math.abs(g-d);f<m&&(c<g&&d<h||c<d&&g<h)?s=!0:l<m&&(l=m)}var y=[];if(s&&l<u){var _=[];y.push(_);for(var v=0;v<n.length;++v){var b=parseFloat(n[v][0]);if(0<v&&Math.abs(b-n[v-1][0])>f){var x=parseFloat(n[v-1][0]),w=parseFloat(n[v-1][1]),L=parseFloat(n[v][0]),C=parseFloat(n[v][1]);if(-180<x&&x<h&&180===L&&v+1<n.length&&-180<n[v-1][0]&&n[v-1][0]<h){_.push([-180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(c<x&&x<180&&-180===L&&v+1<n.length&&n[v-1][0]>c&&n[v-1][0]<180){_.push([180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(x<h&&c<L){var k=x;x=L,L=k;var E=w;w=C,C=E}if(c<x&&L<h&&(L+=360),x<=180&&180<=L&&x<L){var S=(180-x)/(L-x),M=S*C+(1-S)*w;_.push([n[v-1][0]>c?180:-180,M]),(_=[]).push([n[v-1][0]>c?-180:180,M]),y.push(_)}else _=[],y.push(_);_.push([b,n[v][1]])}else _.push([n[v][0],n[v][1]])}}else{var P=[];y.push(P);for(var I=0;I<n.length;++I)P.push([n[I][0],n[I][1]])}for(var T=new ra(this.properties),O=0;O<y.length;++O){var N=new na;T.geometries.push(N);for(var D=y[O],A=0;A<D.length;++A)N.move_to(D[A])}return T};var oa=On;(On.polyline=On).polygon=function(t,e){var n,r,i,o,a,s,l;for(r=1;r<=8;r*=2){for(n=[],o=!(Dn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(l=!(Dn(s=t[a],e)&r))!==o&&n.push(Nn(i,s,r,e)),l&&n.push(s),i=s,o=l;if(!(t=n).length)break}return n};var aa=Array.prototype.slice,sa={successCallback:null,verbose:!1,polygons:!1},la={},ua=64,ca=16,ha=4,fa=1,pa=[],da=[],ga=[],ma=[],ya=[],_a=[],va=[],ba=[],xa=[],wa=[],La=[],Ca=[],ka=[],Ea=[],Sa=[],Ma=[],Pa=[],Ia=[],Ta=[],Oa=[],Na=[],Da=[],Aa=[],Ra=[];va[85]=wa[85]=-1,ba[85]=La[85]=0,xa[85]=Ca[85]=1,Ta[85]=Da[85]=1,Oa[85]=Aa[85]=0,Na[85]=Ra[85]=1,pa[85]=ma[85]=0,da[85]=ya[85]=-1,ga[85]=Sa[85]=0,Ma[85]=ka[85]=0,Pa[85]=Ea[85]=1,_a[85]=Ia[85]=1,Da[1]=Da[169]=0,Aa[1]=Aa[169]=-1,Ra[1]=Ra[169]=0,ka[1]=ka[169]=-1,Ea[1]=Ea[169]=0,Sa[1]=Sa[169]=0,wa[4]=wa[166]=0,La[4]=La[166]=-1,Ca[4]=Ca[166]=1,Ma[4]=Ma[166]=1,Pa[4]=Pa[166]=0,Ia[4]=Ia[166]=0,va[16]=va[154]=0,ba[16]=ba[154]=1,xa[16]=xa[154]=1,ma[16]=ma[154]=1,ya[16]=ya[154]=0,_a[16]=_a[154]=1,Ta[64]=Ta[106]=0,Oa[64]=Oa[106]=1,Na[64]=Na[106]=0,pa[64]=pa[106]=-1,da[64]=da[106]=0,ga[64]=ga[106]=1,Ta[2]=Ta[168]=0,Oa[2]=Oa[168]=-1,Na[2]=Na[168]=1,Da[2]=Da[168]=0,Aa[2]=Aa[168]=-1,Ra[2]=Ra[168]=0,ka[2]=ka[168]=-1,Ea[2]=Ea[168]=0,Sa[2]=Sa[168]=0,Ma[2]=Ma[168]=-1,Pa[2]=Pa[168]=0,Ia[2]=Ia[168]=1,va[8]=va[162]=0,ba[8]=ba[162]=-1,xa[8]=xa[162]=0,wa[8]=wa[162]=0,La[8]=La[162]=-1,Ca[8]=Ca[162]=1,ka[8]=ka[162]=1,Ea[8]=Ea[162]=0,Sa[8]=Sa[162]=1,Ma[8]=Ma[162]=1,Pa[8]=Pa[162]=0,Ia[8]=Ia[162]=0,va[32]=va[138]=0,ba[32]=ba[138]=1,xa[32]=xa[138]=1,wa[32]=wa[138]=0,La[32]=La[138]=1,Ca[32]=Ca[138]=0,pa[32]=pa[138]=1,da[32]=da[138]=0,ga[32]=ga[138]=0,ma[32]=ma[138]=1,ya[32]=ya[138]=0,_a[32]=_a[138]=1,Da[128]=Da[42]=0,Aa[128]=Aa[42]=1,Ra[128]=Ra[42]=1,Ta[128]=Ta[42]=0,Oa[128]=Oa[42]=1,Na[128]=Na[42]=0,pa[128]=pa[42]=-1,da[128]=da[42]=0,ga[128]=ga[42]=1,ma[128]=ma[42]=-1,ya[128]=ya[42]=0,_a[128]=_a[42]=0,wa[5]=wa[165]=-1,La[5]=La[165]=0,Ca[5]=Ca[165]=0,Da[5]=Da[165]=1,Aa[5]=Aa[165]=0,Ra[5]=Ra[165]=0,Ma[20]=Ma[150]=0,Pa[20]=Pa[150]=1,Ia[20]=Ia[150]=1,ma[20]=ma[150]=0,ya[20]=ya[150]=-1,_a[20]=_a[150]=1,va[80]=va[90]=-1,ba[80]=ba[90]=0,xa[80]=xa[90]=1,Ta[80]=Ta[90]=1,Oa[80]=Oa[90]=0,Na[80]=Na[90]=1,ka[65]=ka[105]=0,Ea[65]=Ea[105]=1,Sa[65]=Sa[105]=0,pa[65]=pa[105]=0,da[65]=da[105]=-1,ga[65]=ga[105]=0,va[160]=va[10]=-1,ba[160]=ba[10]=0,xa[160]=xa[10]=1,wa[160]=wa[10]=-1,La[160]=La[10]=0,Ca[160]=Ca[10]=0,Da[160]=Da[10]=1,Aa[160]=Aa[10]=0,Ra[160]=Ra[10]=0,Ta[160]=Ta[10]=1,Oa[160]=Oa[10]=0,Na[160]=Na[10]=1,Ma[130]=Ma[40]=0,Pa[130]=Pa[40]=1,Ia[130]=Ia[40]=1,ka[130]=ka[40]=0,Ea[130]=Ea[40]=1,Sa[130]=Sa[40]=0,pa[130]=pa[40]=0,da[130]=da[40]=-1,ga[130]=ga[40]=0,ma[130]=ma[40]=0,ya[130]=ya[40]=-1,_a[130]=_a[40]=1,wa[37]=wa[133]=0,La[37]=La[133]=1,Ca[37]=Ca[133]=1,Da[37]=Da[133]=0,Aa[37]=Aa[133]=1,Ra[37]=Ra[133]=0,pa[37]=pa[133]=-1,da[37]=da[133]=0,ga[37]=ga[133]=0,ma[37]=ma[133]=1,ya[37]=ya[133]=0,_a[37]=_a[133]=0,Ma[148]=Ma[22]=-1,Pa[148]=Pa[22]=0,Ia[148]=Ia[22]=0,Da[148]=Da[22]=0,Aa[148]=Aa[22]=-1,Ra[148]=Ra[22]=1,Ta[148]=Ta[22]=0,Oa[148]=Oa[22]=1,Na[148]=Na[22]=1,ma[148]=ma[22]=-1,ya[148]=ya[22]=0,_a[148]=_a[22]=1,va[82]=va[88]=0,ba[82]=ba[88]=-1,xa[82]=xa[88]=1,Ma[82]=Ma[88]=1,Pa[82]=Pa[88]=0,Ia[82]=Ia[88]=1,ka[82]=ka[88]=-1,Ea[82]=Ea[88]=0,Sa[82]=Sa[88]=1,Ta[82]=Ta[88]=0,Oa[82]=Oa[88]=-1,Na[82]=Na[88]=0,va[73]=va[97]=0,ba[73]=ba[97]=1,xa[73]=xa[97]=0,wa[73]=wa[97]=0,La[73]=La[97]=-1,Ca[73]=Ca[97]=0,ka[73]=ka[97]=1,Ea[73]=Ea[97]=0,Sa[73]=Sa[97]=0,pa[73]=pa[97]=1,da[73]=da[97]=0,ga[73]=ga[97]=1,va[145]=va[25]=0,ba[145]=ba[25]=-1,xa[145]=xa[25]=0,ka[145]=ka[25]=1,Ea[145]=Ea[25]=0,Sa[145]=Sa[25]=1,Da[145]=Da[25]=0,Aa[145]=Aa[25]=1,Ra[145]=Ra[25]=1,ma[145]=ma[25]=-1,ya[145]=ya[25]=0,_a[145]=_a[25]=0,wa[70]=wa[100]=0,La[70]=La[100]=1,Ca[70]=Ca[100]=0,Ma[70]=Ma[100]=-1,Pa[70]=Pa[100]=0,Ia[70]=Ia[100]=1,Ta[70]=Ta[100]=0,Oa[70]=Oa[100]=-1,Na[70]=Na[100]=1,pa[70]=pa[100]=1,da[70]=da[100]=0,ga[70]=ga[100]=0,wa[101]=wa[69]=0,La[101]=La[69]=1,Ca[101]=Ca[69]=0,pa[101]=pa[69]=1,da[101]=da[69]=0,ga[101]=ga[69]=0,Da[149]=Da[21]=0,Aa[149]=Aa[21]=1,Ra[149]=Ra[21]=1,ma[149]=ma[21]=-1,ya[149]=ya[21]=0,_a[149]=_a[21]=0,Ma[86]=Ma[84]=-1,Pa[86]=Pa[84]=0,Ia[86]=Ia[84]=1,Ta[86]=Ta[84]=0,Oa[86]=Oa[84]=-1,Na[86]=Na[84]=1,va[89]=va[81]=0,ba[89]=ba[81]=-1,xa[89]=xa[81]=0,ka[89]=ka[81]=1,Ea[89]=Ea[81]=0,Sa[89]=Sa[81]=1,va[96]=va[74]=0,ba[96]=ba[74]=1,xa[96]=xa[74]=0,wa[96]=wa[74]=-1,La[96]=La[74]=0,Ca[96]=Ca[74]=1,Ta[96]=Ta[74]=1,Oa[96]=Oa[74]=0,Na[96]=Na[74]=0,pa[96]=pa[74]=1,da[96]=da[74]=0,ga[96]=ga[74]=1,va[24]=va[146]=0,ba[24]=ba[146]=-1,xa[24]=xa[146]=1,Ma[24]=Ma[146]=1,Pa[24]=Pa[146]=0,Ia[24]=Ia[146]=1,ka[24]=ka[146]=0,Ea[24]=Ea[146]=1,Sa[24]=Sa[146]=1,ma[24]=ma[146]=0,ya[24]=ya[146]=-1,_a[24]=_a[146]=0,wa[6]=wa[164]=-1,La[6]=La[164]=0,Ca[6]=Ca[164]=1,Ma[6]=Ma[164]=-1,Pa[6]=Pa[164]=0,Ia[6]=Ia[164]=0,Da[6]=Da[164]=0,Aa[6]=Aa[164]=-1,Ra[6]=Ra[164]=1,Ta[6]=Ta[164]=1,Oa[6]=Oa[164]=0,Na[6]=Na[164]=0,ka[129]=ka[41]=0,Ea[129]=Ea[41]=1,Sa[129]=Sa[41]=1,Da[129]=Da[41]=0,Aa[129]=Aa[41]=1,Ra[129]=Ra[41]=0,pa[129]=pa[41]=-1,da[129]=da[41]=0,ga[129]=ga[41]=0,ma[129]=ma[41]=0,ya[129]=ya[41]=-1,_a[129]=_a[41]=0,Ma[66]=Ma[104]=0,Pa[66]=Pa[104]=1,Ia[66]=Ia[104]=0,ka[66]=ka[104]=-1,Ea[66]=Ea[104]=0,Sa[66]=Sa[104]=1,Ta[66]=Ta[104]=0,Oa[66]=Oa[104]=-1,Na[66]=Na[104]=0,pa[66]=pa[104]=0,da[66]=da[104]=-1,ga[66]=ga[104]=1,va[144]=va[26]=-1,ba[144]=ba[26]=0,xa[144]=xa[26]=0,Da[144]=Da[26]=1,Aa[144]=Aa[26]=0,Ra[144]=Ra[26]=1,Ta[144]=Ta[26]=0,Oa[144]=Oa[26]=1,Na[144]=Na[26]=1,ma[144]=ma[26]=-1,ya[144]=ya[26]=0,_a[144]=_a[26]=1,wa[36]=wa[134]=0,La[36]=La[134]=1,Ca[36]=Ca[134]=1,Ma[36]=Ma[134]=0,Pa[36]=Pa[134]=1,Ia[36]=Ia[134]=0,pa[36]=pa[134]=0,da[36]=da[134]=-1,ga[36]=ga[134]=1,ma[36]=ma[134]=1,ya[36]=ya[134]=0,_a[36]=_a[134]=0,va[9]=va[161]=-1,ba[9]=ba[161]=0,xa[9]=xa[161]=0,wa[9]=wa[161]=0,La[9]=La[161]=-1,Ca[9]=Ca[161]=0,ka[9]=ka[161]=1,Ea[9]=Ea[161]=0,Sa[9]=Sa[161]=0,Da[9]=Da[161]=1,Aa[9]=Aa[161]=0,Ra[9]=Ra[161]=1,va[136]=0,ba[136]=1,xa[136]=1,wa[136]=0,La[136]=1,Ca[136]=0,Ma[136]=-1,Pa[136]=0,Ia[136]=1,ka[136]=-1,Ea[136]=0,Sa[136]=0,Da[136]=0,Aa[136]=-1,Ra[136]=0,Ta[136]=0,Oa[136]=-1,Na[136]=1,pa[136]=1,da[136]=0,ga[136]=0,ma[136]=1,ya[136]=0,_a[136]=1,va[34]=0,ba[34]=-1,xa[34]=0,wa[34]=0,La[34]=-1,Ca[34]=1,Ma[34]=1,Pa[34]=0,Ia[34]=0,ka[34]=1,Ea[34]=0,Sa[34]=1,Da[34]=0,Aa[34]=1,Ra[34]=1,Ta[34]=0,Oa[34]=1,Na[34]=0,pa[34]=-1,da[34]=0,ga[34]=1,ma[34]=-1,ya[34]=0,_a[34]=0,va[35]=0,ba[35]=1,xa[35]=1,wa[35]=0,La[35]=-1,Ca[35]=1,Ma[35]=1,Pa[35]=0,Ia[35]=0,ka[35]=-1,Ea[35]=0,Sa[35]=0,Da[35]=0,Aa[35]=-1,Ra[35]=0,Ta[35]=0,Oa[35]=1,Na[35]=0,pa[35]=-1,da[35]=0,ga[35]=1,ma[35]=1,ya[35]=0,_a[35]=1,va[153]=0,ba[153]=1,xa[153]=1,ka[153]=-1,Ea[153]=0,Sa[153]=0,Da[153]=0,Aa[153]=-1,Ra[153]=0,ma[153]=1,ya[153]=0,_a[153]=1,wa[102]=0,La[102]=-1,Ca[102]=1,Ma[102]=1,Pa[102]=0,Ia[102]=0,Ta[102]=0,Oa[102]=1,Na[102]=0,pa[102]=-1,da[102]=0,ga[102]=1,va[155]=0,ba[155]=-1,xa[155]=0,ka[155]=1,Ea[155]=0,Sa[155]=1,Da[155]=0,Aa[155]=1,Ra[155]=1,ma[155]=-1,ya[155]=0,_a[155]=0,wa[103]=0,La[103]=1,Ca[103]=0,Ma[103]=-1,Pa[103]=0,Ia[103]=1,Ta[103]=0,Oa[103]=-1,Na[103]=1,pa[103]=1,da[103]=0,ga[103]=0,va[152]=0,ba[152]=1,xa[152]=1,Ma[152]=-1,Pa[152]=0,Ia[152]=1,ka[152]=-1,Ea[152]=0,Sa[152]=0,Da[152]=0,Aa[152]=-1,Ra[152]=0,Ta[152]=0,Oa[152]=-1,Na[152]=1,ma[152]=1,ya[152]=0,_a[152]=1,va[156]=0,ba[156]=-1,xa[156]=1,Ma[156]=1,Pa[156]=0,Ia[156]=1,ka[156]=-1,Ea[156]=0,Sa[156]=0,Da[156]=0,Aa[156]=-1,Ra[156]=0,Ta[156]=0,Oa[156]=1,Na[156]=1,ma[156]=-1,ya[156]=0,_a[156]=1,va[137]=0,ba[137]=1,xa[137]=1,wa[137]=0,La[137]=1,Ca[137]=0,ka[137]=-1,Ea[137]=0,Sa[137]=0,Da[137]=0,Aa[137]=-1,Ra[137]=0,pa[137]=1,da[137]=0,ga[137]=0,ma[137]=1,ya[137]=0,_a[137]=1,va[139]=0,ba[139]=1,xa[139]=1,wa[139]=0,La[139]=-1,Ca[139]=0,ka[139]=1,Ea[139]=0,Sa[139]=0,Da[139]=0,Aa[139]=1,Ra[139]=0,pa[139]=-1,da[139]=0,ga[139]=0,ma[139]=1,ya[139]=0,_a[139]=1,va[98]=0,ba[98]=-1,xa[98]=0,wa[98]=0,La[98]=-1,Ca[98]=1,Ma[98]=1,Pa[98]=0,Ia[98]=0,ka[98]=1,Ea[98]=0,Sa[98]=1,Ta[98]=0,Oa[98]=1,Na[98]=0,pa[98]=-1,da[98]=0,ga[98]=1,va[99]=0,ba[99]=1,xa[99]=0,wa[99]=0,La[99]=-1,Ca[99]=1,Ma[99]=1,Pa[99]=0,Ia[99]=0,ka[99]=-1,Ea[99]=0,Sa[99]=1,Ta[99]=0,Oa[99]=-1,Na[99]=0,pa[99]=1,da[99]=0,ga[99]=1,wa[38]=0,La[38]=-1,Ca[38]=1,Ma[38]=1,Pa[38]=0,Ia[38]=0,Da[38]=0,Aa[38]=1,Ra[38]=1,Ta[38]=0,Oa[38]=1,Na[38]=0,pa[38]=-1,da[38]=0,ga[38]=1,ma[38]=-1,ya[38]=0,_a[38]=0,wa[39]=0,La[39]=1,Ca[39]=1,Ma[39]=-1,Pa[39]=0,Ia[39]=0,Da[39]=0,Aa[39]=-1,Ra[39]=1,Ta[39]=0,Oa[39]=1,Na[39]=0,pa[39]=-1,da[39]=0,ga[39]=1,ma[39]=1,ya[39]=0,_a[39]=0;var Fa=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ja=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ba=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},za=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},qa=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ua=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ga=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Va=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ha=[],Wa=[],Xa=[],Ya=[],$a=[],Za=[],Qa=[],Ka=[];Ya[1]=$a[1]=18,Ya[169]=$a[169]=18,Xa[4]=Wa[4]=12,Xa[166]=Wa[166]=12,Ha[16]=Ka[16]=4,Ha[154]=Ka[154]=4,Za[64]=Qa[64]=22,Za[106]=Qa[106]=22,Xa[2]=Za[2]=17,Ya[2]=$a[2]=18,Xa[168]=Za[168]=17,Ya[168]=$a[168]=18,Ha[8]=Ya[8]=9,Wa[8]=Xa[8]=12,Ha[162]=Ya[162]=9,Wa[162]=Xa[162]=12,Ha[32]=Ka[32]=4,Wa[32]=Qa[32]=1,Ha[138]=Ka[138]=4,Wa[138]=Qa[138]=1,$a[128]=Ka[128]=21,Za[128]=Qa[128]=22,$a[42]=Ka[42]=21,Za[42]=Qa[42]=22,Wa[5]=$a[5]=14,Wa[165]=$a[165]=14,Xa[20]=Ka[20]=6,Xa[150]=Ka[150]=6,Ha[80]=Za[80]=11,Ha[90]=Za[90]=11,Ya[65]=Qa[65]=3,Ya[105]=Qa[105]=3,Ha[160]=Za[160]=11,Wa[160]=$a[160]=14,Ha[10]=Za[10]=11,Wa[10]=$a[10]=14,Xa[130]=Ka[130]=6,Ya[130]=Qa[130]=3,Xa[40]=Ka[40]=6,Ya[40]=Qa[40]=3,Wa[101]=Qa[101]=1,Wa[69]=Qa[69]=1,$a[149]=Ka[149]=21,$a[21]=Ka[21]=21,Xa[86]=Za[86]=17,Xa[84]=Za[84]=17,Ha[89]=Ya[89]=9,Ha[81]=Ya[81]=9,Ha[96]=Qa[96]=0,Wa[96]=Za[96]=15,Ha[74]=Qa[74]=0,Wa[74]=Za[74]=15,Ha[24]=Xa[24]=8,Ya[24]=Ka[24]=7,Ha[146]=Xa[146]=8,Ya[146]=Ka[146]=7,Wa[6]=Za[6]=15,Xa[6]=$a[6]=16,Wa[164]=Za[164]=15,Xa[164]=$a[164]=16,Ya[129]=Ka[129]=7,$a[129]=Qa[129]=20,Ya[41]=Ka[41]=7,$a[41]=Qa[41]=20,Xa[66]=Qa[66]=2,Ya[66]=Za[66]=19,Xa[104]=Qa[104]=2,Ya[104]=Za[104]=19,Ha[144]=$a[144]=10,Za[144]=Ka[144]=23,Ha[26]=$a[26]=10,Za[26]=Ka[26]=23,Wa[36]=Ka[36]=5,Xa[36]=Qa[36]=2,Wa[134]=Ka[134]=5,Xa[134]=Qa[134]=2,Ha[9]=$a[9]=10,Wa[9]=Ya[9]=13,Ha[161]=$a[161]=10,Wa[161]=Ya[161]=13,Wa[37]=Ka[37]=5,$a[37]=Qa[37]=20,Wa[133]=Ka[133]=5,$a[133]=Qa[133]=20,Xa[148]=$a[148]=16,Za[148]=Ka[148]=23,Xa[22]=$a[22]=16,Za[22]=Ka[22]=23,Ha[82]=Xa[82]=8,Ya[82]=Za[82]=19,Ha[88]=Xa[88]=8,Ya[88]=Za[88]=19,Ha[73]=Qa[73]=0,Wa[73]=Ya[73]=13,Ha[97]=Qa[97]=0,Wa[97]=Ya[97]=13,Ha[145]=Ya[145]=9,$a[145]=Ka[145]=21,Ha[25]=Ya[25]=9,$a[25]=Ka[25]=21,Wa[70]=Qa[70]=1,Xa[70]=Za[70]=17,Wa[100]=Qa[100]=1,Xa[100]=Za[100]=17,Ha[34]=Ya[34]=9,Wa[34]=Xa[34]=12,$a[34]=Ka[34]=21,Za[34]=Qa[34]=22,Ha[136]=Ka[136]=4,Wa[136]=Qa[136]=1,Xa[136]=Za[136]=17,Ya[136]=$a[136]=18,Ha[35]=Ka[35]=4,Wa[35]=Xa[35]=12,Ya[35]=$a[35]=18,Za[35]=Qa[35]=22,Ha[153]=Ka[153]=4,Ya[153]=$a[153]=18,Wa[102]=Xa[102]=12,Za[102]=Qa[102]=22,Ha[155]=Ya[155]=9,$a[155]=Ka[155]=23,Wa[103]=Qa[103]=1,Xa[103]=Za[103]=17,Ha[152]=Ka[152]=4,Xa[152]=Za[152]=17,Ya[152]=$a[152]=18,Ha[156]=Xa[156]=8,Ya[156]=$a[156]=18,Za[156]=Ka[156]=23,Ha[137]=Ka[137]=4,Wa[137]=Qa[137]=1,Ya[137]=$a[137]=18,Ha[139]=Ka[139]=4,Wa[139]=Ya[139]=13,$a[139]=Qa[139]=20,Ha[98]=Ya[98]=9,Wa[98]=Xa[98]=12,Za[98]=Qa[98]=22,Ha[99]=Qa[99]=0,Wa[99]=Xa[99]=12,Ya[99]=Za[99]=19,Wa[38]=Xa[38]=12,$a[38]=Ka[38]=21,Za[38]=Qa[38]=22,Wa[39]=Ka[39]=5,Xa[39]=$a[39]=16,Za[39]=Qa[39]=22;var Ja=[];Ja[1]=Ja[169]=Fa,Ja[4]=Ja[166]=ja,Ja[16]=Ja[154]=Ba,Ja[64]=Ja[106]=za,Ja[168]=Ja[2]=qa,Ja[162]=Ja[8]=Ua,Ja[138]=Ja[32]=Ga,Ja[42]=Ja[128]=Va,Ja[5]=Ja[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Ja[20]=Ja[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Ja[80]=Ja[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Ja[65]=Ja[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ja[160]=Ja[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Ja[130]=Ja[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Ja[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ja[101]=Ja[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Ja[149]=Ja[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Ja[86]=Ja[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Ja[89]=Ja[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Ja[96]=Ja[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Ja[24]=Ja[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Ja[6]=Ja[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Ja[129]=Ja[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Ja[66]=Ja[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ja[144]=Ja[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ja[36]=Ja[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Ja[9]=Ja[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ja[37]=Ja[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ja[148]=Ja[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ja[82]=Ja[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Ja[73]=Ja[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ja[145]=Ja[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ja[70]=Ja[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ja[34]=function(t){return[Va(t),Ua(t)]},Ja[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ja[136]=function(t){return[Ga(t),qa(t)]},Ja[153]=function(t){return[Ba(t),Fa(t)]},Ja[102]=function(t){return[ja(t),za(t)]},Ja[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ja[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ja[152]=function(t){return[Ba(t),qa(t)]},Ja[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ja[137]=function(t){return[Ga(t),Fa(t)]},Ja[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ja[98]=function(t){return[Ua(t),za(t)]},Ja[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ja[38]=function(t){return[ja(t),Va(t)]},Ja[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ts=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ts.buildId=function(t){return t.join(",")},ts.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},ts.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},ts.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ts.prototype.sortOuterEdges=function(){var o=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,e){var n=t.to,r=e.to;if(0<=n.coordinates[0]-o.coordinates[0]&&r.coordinates[0]-o.coordinates[0]<0)return 1;if(n.coordinates[0]-o.coordinates[0]<0&&0<=r.coordinates[0]-o.coordinates[0])return-1;if(n.coordinates[0]-o.coordinates[0]==0&&r.coordinates[0]-o.coordinates[0]==0)return 0<=n.coordinates[1]-o.coordinates[1]||0<=r.coordinates[1]-o.coordinates[1]?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var i=or(o.coordinates,n.coordinates,r.coordinates);return i<0?1:0<i?-1:Math.pow(n.coordinates[0]-o.coordinates[0],2)+Math.pow(n.coordinates[1]-o.coordinates[1],2)-(Math.pow(r.coordinates[0]-o.coordinates[0],2)+Math.pow(r.coordinates[1]-o.coordinates[1],2))}),this.outerEdgesSorted=!0)},ts.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ts.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ts.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var es=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};es.prototype.getSymetric=function(){return this.symetric||(this.symetric=new es(this.to,this.from),this.symetric.symetric=this),this.symetric},es.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},es.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},es.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},es.prototype.toLineString=function(){return U([this.from.coordinates,this.to.coordinates])},es.prototype.compareTo=function(t){return or(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var ns=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},rs={length:{configurable:!0}};ns.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},ns.prototype.get=function(t){return this.edges[t]},rs.length.get=function(){return this.edges.length},ns.prototype.forEach=function(t){this.edges.forEach(t)},ns.prototype.map=function(t){return this.edges.map(t)},ns.prototype.some=function(t){return this.edges.some(t)},ns.prototype.isValid=function(){return!0},ns.prototype.isHole=function(){var r=this,t=this.edges.reduce(function(t,e,n){return e.from.coordinates[1]>r.edges[t].from.coordinates[1]&&(t=n),t},0),e=(0===t?this.length:t)-1,n=(t+1)%this.length,i=or(this.edges[e].from.coordinates,this.edges[t].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[e].from.coordinates[0]>this.edges[n].from.coordinates[0]:0<i},ns.prototype.toMultiPoint=function(){return o(this.edges.map(function(t){return t.from.coordinates}))},ns.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=q([t])},ns.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ee(this.toPolygon())},ns.findEdgeRingContaining=function(u,t){var c,h,f=u.getEnvelope();return t.forEach(function(t){var e,n,r,i,o,a,s=t.getEnvelope();if(h&&(c=h.getEnvelope()),n=f,r=(e=s).geometry.coordinates.map(function(t){return t[0]}),i=e.geometry.coordinates.map(function(t){return t[1]}),o=n.geometry.coordinates.map(function(t){return t[0]}),a=n.geometry.coordinates.map(function(t){return t[1]}),(Math.max(null,r)!==Math.max(null,o)||Math.max(null,i)!==Math.max(null,a)||Math.min(null,r)!==Math.min(null,o)||Math.min(null,i)!==Math.min(null,a))&&ar(s,f)){var l=u.map(function(t){return t.from.coordinates}).find(function(r){return!t.some(function(t){return e=r,n=t.from.coordinates,e[0]===n[0]&&e[1]===n[1];var e,n})});l&&t.inside(z(l))&&(h&&!ar(c,s)||(h=t))}}),h},ns.prototype.inside=function(t){return Mt(t,this.toPolygon())},Object.defineProperties(ns.prototype,rs);var is=function(){this.edges=[],this.nodes={}};is.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var i=new is;return P(t,function(t){j(t,"LineString","Graph::fromGeoJson"),y(t,function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e);i.addEdge(n,r)}return e})}),i},is.prototype.getNode=function(t){var e=ts.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ts(t)),n},is.prototype.addEdge=function(t,e){var n=new es(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},is.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},is.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},is.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},is.prototype._computeNextCWEdges=function(n){var e=this;void 0===n?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):n.getOuterEdges().forEach(function(t,e){n.getOuterEdge((0===e?n.getOuterEdges().length:e)-1).symetric.next=t})},is.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;0<=o;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},is.prototype._findLabeledEdgeRings=function(){var n=[],r=0;return this.edges.forEach(function(t){if(!(0<=t.label)){n.push(t);for(var e=t;e.label=r,e=e.next,!t.isEqual(e););r++}}),n},is.prototype.getEdgeRings=function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){n._findIntersectionNodes(e).forEach(function(t){n._computeNextCCWEdges(t,e.label)})});var e=[];return this.edges.forEach(function(t){t.ring||e.push(n._findEdgeRing(t))}),e},is.prototype._findIntersectionNodes=function(n){for(var t=[],r=n,e=function(){var e=0;r.from.getOuterEdges().forEach(function(t){t.label===n.label&&++e}),1<e&&t.push(r.from),r=r.next};e(),!n.isEqual(r););return t},is.prototype._findEdgeRing=function(t){for(var e=t,n=new ns;n.push(e),e.ring=n,e=e.next,!t.isEqual(e););return n},is.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},is.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()};var os=mt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),as=(os.shim,mt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==(void 0===t?"undefined":Vp(t))&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r})),ss=(as.supported,as.unsupported,mt(function(t){function s(t){return null==t}function l(t){return!(!t||"object"!=(void 0===t?"undefined":Vp(t))||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||0<t.length&&"number"!=typeof t[0])}var u=Array.prototype.slice,c=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=(void 0===t?"undefined":Vp(t))&&"object"!=(void 0===e?"undefined":Vp(e))?n.strict?t===e:t==e:function(t,e,n){var r,i;if(s(t)||s(e))return!1;if(t.prototype!==e.prototype)return!1;if(as(t))return!!as(e)&&(t=u.call(t),e=u.call(e),c(t,e,n));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=os(t),a=os(e)}catch(t){return!1}if(o.length!=a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;0<=r;r--)if(o[r]!=a[r])return!1;for(r=o.length-1;0<=r;r--)if(i=o[r],!c(t[i],e[i],n))return!1;return(void 0===t?"undefined":Vp(t))==(void 0===e?"undefined":Vp(e))}(t,e,n))}})),ls=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:yr};ls.prototype.compare=function(t,e){if(t.type!==e.type||!mr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=gr(t),i=gr(e);return r.every(function(e){return this.some(function(t){return n.compare(e,t)})},i)}}return!1},ls.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},ls.prototype.compareLine=function(t,e,n,r){if(!mr(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},ls.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return 0<=r&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},ls.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},ls.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(e){return this.some(function(t){return i.compareLine(e,t,1,!0)})},r)}return!1},ls.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ls.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ls.prototype.removePseudo=function(t){return t};var us=ls,cs=mt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+(void 0===t?"undefined":Vp(t))+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),hs=mt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(0<s){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){for(var t,e,n=this.dataset.length-1;e=Math.round(Math.random()*n),t=this.dataset[e],0<=this.centroids.indexOf(t););return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),fs=mt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?i<e&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),ps=mt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var u=fs;e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0,o=this.dataset.length;i<o;i++)if(1!==this._processed[i]){this._processed[i]=1,this.clusters.push([i]);var a=this.clusters.length-1;this._orderedList.push(i);var s=new u(null,null,"asc"),l=this._regionQuery(i);void 0!==this._distanceToCore(i)&&(this._updateQueue(i,l,s),this._expandCluster(a,s))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+(void 0===t?"undefined":Vp(t))+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(r,t,i){var o=this;this._coreDistance=this._distanceToCore(r),t.forEach(function(t){if(void 0===o._processed[t]){var e=o.distance(o.dataset[r],o.dataset[t]),n=Math.max(o._coreDistance,e);void 0===o._reachability[t]?(o._reachability[t]=n,i.insert(t,n)):n<o._reachability[t]&&(o._reachability[t]=n,i.remove(t),i.insert(t,n))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),ds=mt(function(t){t.exports&&(t.exports={DBSCAN:cs,KMEANS:hs,OPTICS:ps,PriorityQueue:fs})}),gs=(ds.DBSCAN,ds.KMEANS,ds.OPTICS,ds.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i}),ms=gs,ys=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},_s=gs,vs=function(t,e,n,r){var i=[],o=[],a=[],s=[],l=!1,u=r||1e4,c=t.length,h=t[0].length,f=0<h,p=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=0<t[0].length;r.length<e&&0<i--;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?ms:ys,r=[],i=t.length,o=0<t[0].length,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],l=r.length,u=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<l;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}s[h]=f}for(var g=0;g<i;g++)u+=s[g];for(var m=0;m<i;m++)c[m]={i:m,v:t[m],pr:s[m]/u,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var y=1;y<i;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var _=Math.random(),v=0;v<i-1&&c[v++].cs<_;);r.push(c[v-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,i.push(t[g]))}do{vr(e,0,p);for(var m=0;m<c;m++){for(var y=1/0,_=0,v=0;v<e;v++)(s=f?_s(t[m],i[v]):Math.abs(t[m]-i[v]))<=y&&(y=s,_=v);p[a[m]=_]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?vr(h,0,b[x]):0,o[x]=i[x];if(f){for(var w=0;w<e;w++)i[w]=[];for(var L=0;L<c;L++)for(var C=b[a[L]],k=t[L],E=0;E<h;E++)C[E]+=k[E];l=!0;for(var S=0;S<e;S++){for(var M=i[S],P=b[S],I=o[S],T=p[S],O=0;O<h;O++)M[O]=P[O]/T||0;if(l)for(var N=0;N<h;N++)if(I[N]!=M[N]){l=!1;break}}}else{for(var D=0;D<c;D++)b[a[D]]+=t[D];for(var A=0;A<e;A++)i[A]=b[A]/p[A]||0;l=!0;for(var R=0;R<e;R++)if(o[R]!=i[R]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:e,idxs:a,centroids:i}},bs={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||bs.heuristics.manhattan,o=r.closest||!1,a=new Cr(function(t){return t.f}),s=e;for(e.h=i(e,n),a.push(e);0<a.size();){var l=a.pop();if(l===n)return xr(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var f=u[c];if(!f.closed&&!f.isWall()){var p=l.g+f.getCost(l),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?xr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};wr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)bs.cleanNode(this.nodes[t])},wr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)bs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},wr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},wr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},wr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Lr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Lr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Lr.prototype.isWall=function(){return 0===this.weight},Cr.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];0<t;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var xs=function(t){return function(){return t}};Sr.prototype={constructor:Sr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Tr(this._),e.P=null,(e.N=t).P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Pr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ir(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ir(this,n),n=(t=n).U),n.C=!1,r.C=!0,Pr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Tr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,((n.L=o).U=n)!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,(n.R=a).U=n):(n.U=i,t=(i=n).R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Pr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ir(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Pr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ir(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ir(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}};var ws,Ls,Cs,ks,Es,Ss=[],Ms=[],Ps=1e-6,Is=1e-12;Wr.prototype={constructor:Wr,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return Fr(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var f=[],p=this.edges;return this.cells.forEach(function(t,e){if(r=(n=t.halfedges).length)for(var n,r,i,o=t.site,a=-1,s=p[n[r-1]],l=s.left===o?s.right:s.left;++a<r;)i=l,l=(s=p[n[a]]).left===o?s.right:s.left,i&&l&&e<i.index&&e<l.index&&(c=i,h=l,((u=o)[0]-h[0])*(c[1]-u[1])-(u[0]-c[0])*(h[1]-u[1])<0)&&f.push([o.data,i.data,l.data]);var u,c,h}),f},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(a,s,t){for(var e,l,u=this,c=u._found||0,n=u.cells.length;!(l=u.cells[c]);)if(++c>=n)return null;for(var r=a-l.site[0],i=s-l.site[1],h=r*r+i*i;l=u.cells[e=c],c=null,l.halfedges.forEach(function(t){var e=u.edges[t],n=e.left;if(n!==l.site&&n||(n=e.right)){var r=a-n[0],i=s-n[1],o=r*r+i*i;o<h&&(h=o,c=n.index)}}),null!==c;);return u._found=e,null==t||h<=t*t?l.site:null}};var Ts=Object.freeze({randomPosition:Kr,randomPoint:Jr,randomPolygon:ti,randomLineString:ei}),Os=Object.freeze({getCluster:ri,clusterEach:ii,clusterReduce:oi,createBins:ai,applyFilter:si,propertiesContainsFilter:li,filterProperties:ui});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Ns=function(){};Ns.prototype.interfaces_=function(){return[]},Ns.prototype.getClass=function(){return Ns},Ns.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Ds=function(){},As=function(){},Rs={MAX_VALUE:{configurable:!0}};As.isNaN=function(t){return Number.isNaN(t)},As.doubleToLongBits=function(t){return t},As.longBitsToDouble=function(t){return t},As.isInfinite=function(t){return!Number.isFinite(t)},Rs.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(As,Rs);var Fs=function(){},js=function(){},Bs=function(){},zs=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},qs={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};zs.prototype.setOrdinate=function(t,e){switch(t){case zs.X:this.x=e;break;case zs.Y:this.y=e;break;case zs.Z:this.z=e;break;default:throw new Ds("Invalid ordinate index: "+t)}},zs.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Ns.equalsWithTolerance(this.x,e.x,n)&&!!Ns.equalsWithTolerance(this.y,e.y,n)}},zs.prototype.getOrdinate=function(t){switch(t){case zs.X:return this.x;case zs.Y:return this.y;case zs.Z:return this.z}throw new Ds("Invalid ordinate index: "+t)},zs.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||As.isNaN(this.z))&&As.isNaN(t.z)},zs.prototype.equals=function(t){return t instanceof zs&&this.equals2D(t)},zs.prototype.equalInZ=function(t,e){return Ns.equalsWithTolerance(this.z,t.z,e)},zs.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},zs.prototype.clone=function(){},zs.prototype.copy=function(){return new zs(this)},zs.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},zs.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},zs.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},zs.prototype.hashCode=function(){var t=17;return 37*(t=37*t+zs.hashCode(this.x))+zs.hashCode(this.y)},zs.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},zs.prototype.interfaces_=function(){return[Fs,js,ci]},zs.prototype.getClass=function(){return zs},zs.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=As.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},qs.DimensionalComparator.get=function(){return Us},qs.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},qs.NULL_ORDINATE.get=function(){return As.NaN},qs.X.get=function(){return 0},qs.Y.get=function(){return 1},qs.Z.get=function(){return 2},Object.defineProperties(zs,qs);var Us=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=t;if(2!==e&&3!==e)throw new Ds("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Us.prototype.compare=function(t,e){var n=t,r=e,i=Us.compare(n.x,r.x);if(0!==i)return i;var o=Us.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Us.compare(n.z,r.z)},Us.prototype.interfaces_=function(){return[Bs]},Us.prototype.getClass=function(){return Us},Us.compare=function(t,e){return t<e?-1:e<t?1:As.isNaN(t)?As.isNaN(e)?0:-1:As.isNaN(e)?1:0};var Gs=function(){};Gs.prototype.create=function(){},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs};var Vs=function(){},Hs={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Vs.prototype.interfaces_=function(){return[]},Vs.prototype.getClass=function(){return Vs},Vs.toLocationSymbol=function(t){switch(t){case Vs.EXTERIOR:return"e";case Vs.BOUNDARY:return"b";case Vs.INTERIOR:return"i";case Vs.NONE:return"-"}throw new Ds("Unknown location value: "+t)},Hs.INTERIOR.get=function(){return 0},Hs.BOUNDARY.get=function(){return 1},Hs.EXTERIOR.get=function(){return 2},Hs.NONE.get=function(){return-1},Object.defineProperties(Vs,Hs);var Ws=function(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)},Xs=function(){},Ys={LOG_10:{configurable:!0}};Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs},Xs.log10=function(t){var e=Math.log(t);return As.isInfinite(e)?e:As.isNaN(e)?e:e/Xs.LOG_10},Xs.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Xs.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},Xs.wrap=function(t,e){return t<0?e- -t%e:t%e},Xs.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return r<e&&(r=e),r<n&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=i;return l<o&&(l=o),l<a&&(l=a),l<s&&(l=s),l}},Xs.average=function(t,e){return(t+e)/2},Ys.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Xs,Ys);var $s=function(t){this.str=t};$s.prototype.append=function(t){this.str+=t},$s.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},$s.prototype.toString=function(t){return this.str};var Zs=function(t){this.value=t};Zs.prototype.intValue=function(){return this.value},Zs.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Zs.isNaN=function(t){return Number.isNaN(t)};var Qs=function(){};Qs.isWhitespace=function(t){return t<=32&&0<=t||127===t},Qs.toUpperCase=function(t){return t.toUpperCase()};var Ks=function t(){if(this._hi=0,(this._lo=0)===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Js={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Ks.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Ks.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Ks.magnitude(n._hi),i=Ks.TEN.pow(r);(n=n.divide(i)).gt(Ks.TEN)?(n=n.divide(Ks.TEN),r+=1):n.lt(Ks.ONE)&&(n=n.multiply(Ks.TEN),r-=1);for(var o=r+1,a=new $s,s=Ks.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;9<u?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(Ks.valueOf(u)).multiply(Ks.TEN),c&&n.selfAdd(Ks.TEN);var f=!0,p=Ks.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=r,a.toString()},Ks.prototype.sqr=function(){return this.multiply(this)},Ks.prototype.doubleValue=function(){return this._hi+this._lo},Ks.prototype.subtract=function(){if(arguments[0]instanceof Ks){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Ks.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Ks.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Ks.prototype.selfSubtract=function(){if(arguments[0]instanceof Ks){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Ks.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Ks.prototype.min=function(t){return this.le(t)?this:t},Ks.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Ks){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],l=null,u=null,c=null,h=null;return i=this._hi/a,h=(l=(c=Ks.SPLIT*i)-(l=c-i))*(u=(h=Ks.SPLIT*a)-(u=h-a))-(o=i*a)+l*(r=a-u)+(n=i-l)*u+n*r,h=i+(c=(this._hi-o-h+this._lo-i*s)/a),this._hi=h,this._lo=i-h+c,this}},Ks.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Ks.prototype.divide=function(){if(arguments[0]instanceof Ks){var t,e,n,r,i=arguments[0],o=null,a=null,s=null,l=null;return t=(n=this._hi/i._hi)-(o=(s=Ks.SPLIT*n)-(o=s-n)),l=o*(a=(l=Ks.SPLIT*i._hi)-(a=l-i._hi))-(r=n*i._hi)+o*(e=i._hi-a)+t*a+t*e,s=(this._hi-r-l+this._lo-n*i._lo)/i._hi,new Ks(l=n+s,n-l+s)}if("number"==typeof arguments[0]){var u=arguments[0];return As.isNaN(u)?Ks.createNaN():Ks.copy(this).selfDivide(u,0)}},Ks.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Ks.prototype.pow=function(t){if(0===t)return Ks.valueOf(1);var e=new Ks(this),n=Ks.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Ks.prototype.ceil=function(){if(this.isNaN())return Ks.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Ks(t,e)},Ks.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Ks.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Ks.prototype.setValue=function(){if(arguments[0]instanceof Ks){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Ks.prototype.max=function(t){return this.ge(t)?this:t},Ks.prototype.sqrt=function(){if(this.isZero())return Ks.valueOf(0);if(this.isNegative())return Ks.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Ks.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Ks.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Ks){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r,i,o,a=arguments[0],s=null;return s=(r=this._hi+a)-(i=r-this._hi),n=(o=(s=a-i+(this._hi-s))+this._lo)+(r-(e=r+o)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var l,u,c,h,f=arguments[0],p=arguments[1],d=null,g=null,m=null;c=this._hi+f,u=this._lo+p,g=c-(m=c-this._hi),d=u-(h=u-this._lo);var y=(l=c+(m=(g=f-m+(this._hi-g))+u))+(m=(d=p-h+(this._lo-d))+(m+(c-l))),_=m+(l-y);return this._hi=y,this._lo=_,this}},Ks.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Ks){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i=arguments[0],o=arguments[1],a=null,s=null,l=null,u=null;a=(l=Ks.SPLIT*this._hi)-this._hi,u=Ks.SPLIT*i,a=l-a,n=this._hi-a,s=u-i;var c=(l=this._hi*i)+(u=a*(s=u-s)-l+a*(r=i-s)+n*s+n*r+(this._hi*o+this._lo*i)),h=u+(a=l-c);return this._hi=c,this._lo=h,this}},Ks.prototype.selfSqr=function(){return this.selfMultiply(this)},Ks.prototype.floor=function(){if(this.isNaN())return Ks.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Ks(t,e)},Ks.prototype.negate=function(){return this.isNaN()?this:new Ks(-this._hi,-this._lo)},Ks.prototype.clone=function(){},Ks.prototype.multiply=function(){if(arguments[0]instanceof Ks){var t=arguments[0];return t.isNaN()?Ks.createNaN():Ks.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return As.isNaN(e)?Ks.createNaN():Ks.copy(this).selfMultiply(e,0)}},Ks.prototype.isNaN=function(){return As.isNaN(this._hi)},Ks.prototype.intValue=function(){return Math.trunc(this._hi)},Ks.prototype.toString=function(){var t=Ks.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},Ks.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Ks.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Ks.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Ks.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=Ks.SPLIT*n)-(i=a-n)),o=(s=Ks.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Ks(l,n-l+a)},Ks.prototype.toSciNotation=function(){if(this.isZero())return Ks.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Ks.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Ks.prototype.abs=function(){return this.isNaN()?Ks.NaN:this.isNegative()?this.negate():new Ks(this)},Ks.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},Ks.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Ks.prototype.add=function(){if(arguments[0]instanceof Ks){var t=arguments[0];return Ks.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ks.copy(this).selfAdd(e)}},Ks.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Ks){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Ks.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Ks.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Ks.prototype.trunc=function(){return this.isNaN()?Ks.NaN:this.isPositive()?this.floor():this.ceil()},Ks.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},Ks.prototype.interfaces_=function(){return[ci,Fs,js]},Ks.prototype.getClass=function(){return Ks},Ks.sqr=function(t){return Ks.valueOf(t).selfMultiply(t)},Ks.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Ks.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Ks(e)}},Ks.sqrt=function(t){return Ks.valueOf(t).sqrt()},Ks.parse=function(t){for(var e=0,n=t.length;Qs.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Ks,a=0,s=0,l=0;!(n<=e);){var u=t.charAt(e);if(e++,Qs.isDigit(u)){var c=u-"0";o.selfMultiply(Ks.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=Zs.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(0<p){var d=Ks.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=Ks.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},Ks.createNaN=function(){return new Ks(As.NaN,As.NaN)},Ks.copy=function(t){return new Ks(t)},Ks.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Ks.stringOfChar=function(t,e){for(var n=new $s,r=0;r<e;r++)n.append(t);return n.toString()},Js.PI.get=function(){return new Ks(3.141592653589793,12246467991473532e-32)},Js.TWO_PI.get=function(){return new Ks(6.283185307179586,24492935982947064e-32)},Js.PI_2.get=function(){return new Ks(1.5707963267948966,6123233995736766e-32)},Js.E.get=function(){return new Ks(2.718281828459045,14456468917292502e-32)},Js.NaN.get=function(){return new Ks(As.NaN,As.NaN)},Js.EPS.get=function(){return 123259516440783e-46},Js.SPLIT.get=function(){return 134217729},Js.MAX_PRINT_DIGITS.get=function(){return 32},Js.TEN.get=function(){return Ks.valueOf(10)},Js.ONE.get=function(){return Ks.valueOf(1)},Js.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Js.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Ks,Js);var tl=function(){},el={DP_SAFE_EPSILON:{configurable:!0}};tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.orientationIndex=function(t,e,n){var r=tl.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Ks.valueOf(e.x).selfAdd(-t.x),o=Ks.valueOf(e.y).selfAdd(-t.y),a=Ks.valueOf(n.x).selfAdd(-e.x),s=Ks.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},tl.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},tl.intersection=function(t,e,n,r){var i=Ks.valueOf(r.y).selfSubtract(n.y).selfMultiply(Ks.valueOf(e.x).selfSubtract(t.x)),o=Ks.valueOf(r.x).selfSubtract(n.x).selfMultiply(Ks.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Ks.valueOf(r.x).selfSubtract(n.x).selfMultiply(Ks.valueOf(t.y).selfSubtract(n.y)),l=Ks.valueOf(r.y).selfSubtract(n.y).selfMultiply(Ks.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=Ks.valueOf(t.x).selfAdd(Ks.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=Ks.valueOf(e.x).selfSubtract(t.x).selfMultiply(Ks.valueOf(t.y).selfSubtract(n.y)),f=Ks.valueOf(e.y).selfSubtract(t.y).selfMultiply(Ks.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=Ks.valueOf(n.y).selfAdd(Ks.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new zs(c,d)},tl.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(0<i){if(o<=0)return tl.signum(a);r=i+o}else{if(!(i<0))return tl.signum(a);if(0<=o)return tl.signum(a);r=-i-o}var s=tl.DP_SAFE_EPSILON*r;return s<=a||s<=-a?tl.signum(a):2},tl.signum=function(t){return 0<t?1:t<0?-1:0},el.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(tl,el);var nl=function(){},rl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};rl.X.get=function(){return 0},rl.Y.get=function(){return 1},rl.Z.get=function(){return 2},rl.M.get=function(){return 3},nl.prototype.setOrdinate=function(t,e,n){},nl.prototype.size=function(){},nl.prototype.getOrdinate=function(t,e){},nl.prototype.getCoordinate=function(){},nl.prototype.getCoordinateCopy=function(t){},nl.prototype.getDimension=function(){},nl.prototype.getX=function(t){},nl.prototype.clone=function(){},nl.prototype.expandEnvelope=function(t){},nl.prototype.copy=function(){},nl.prototype.getY=function(t){},nl.prototype.toCoordinateArray=function(){},nl.prototype.interfaces_=function(){return[js]},nl.prototype.getClass=function(){return nl},Object.defineProperties(nl,rl);var il=function(){},ol=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(il),al=function(){};al.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},al.getProperty=function(t){return{"line.separator":"\n"}[t]};var sl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof zs&&arguments[1]instanceof zs){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,m=f.x-h.x,y=h.x*f.y-f.x*h.y,_=p.y-d.y,v=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=m*b-v*y,this.y=_*y-g*b,this.w=g*v-_*m}};sl.prototype.getY=function(){var t=this.y/this.w;if(As.isNaN(t)||As.isInfinite(t))throw new ol;return t},sl.prototype.getX=function(){var t=this.x/this.w;if(As.isNaN(t)||As.isInfinite(t))throw new ol;return t},sl.prototype.getCoordinate=function(){var t=new zs;return t.x=this.getX(),t.y=this.getY(),t},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,f=(s*a-i*u)/c;if(As.isNaN(h)||As.isInfinite(h)||As.isNaN(f)||As.isInfinite(f))throw new ol;return new zs(h,f)};var ll=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof zs){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},ul={serialVersionUID:{configurable:!0}};ll.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ll.prototype.equals=function(t){if(!(t instanceof ll))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},ll.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new ll;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new ll(e,r,n,i)},ll.prototype.isNull=function(){return this._maxx<this._minx},ll.prototype.getMaxX=function(){return this._maxx},ll.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof zs){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof ll){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},ll.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof zs){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},ll.prototype.getMinY=function(){return this._miny},ll.prototype.getMinX=function(){return this._minx},ll.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof zs){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof ll){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},ll.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},ll.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ll.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},ll.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},ll.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ll.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ll.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ll.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},ll.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ll.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof zs){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},ll.prototype.centre=function(){return this.isNull()?null:new zs((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ll.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof zs){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof ll){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},ll.prototype.getMaxY=function(){return this._maxy},ll.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},ll.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+zs.hashCode(this._minx))+zs.hashCode(this._maxx))+zs.hashCode(this._miny))+zs.hashCode(this._maxy)},ll.prototype.interfaces_=function(){return[Fs,ci]},ll.prototype.getClass=function(){return ll},ll.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l<u||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l<u||c<s))}},ul.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(ll,ul);var cl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},hl=function(t){this.geometryFactory=t||new Du};hl.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=cl.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=cl.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],pl[n]&&(e=pl[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},hl.prototype.write=function(t){return this.extractGeometry(t)},hl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!fl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+fl[e].apply(this,[t])+")"};var fl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return fl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+fl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(fl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(fl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+fl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+fl.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+fl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+fl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},pl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(cl.spaces);return this.geometryFactory.createPoint(new zs(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(cl.trimParens,"$1"),r.push(pl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(cl.spaces),r.push(new zs(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(cl.spaces),r.push(new zs(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(cl.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(cl.trimParens,"$1"),r.push(pl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(cl.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(cl.trimParens,"$1"),n=pl.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(cl.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(cl.trimParens,"$1"),r.push(pl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},dl=function(t){this.parser=new hl(t)};dl.prototype.write=function(t){return this.parser.write(t)},dl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var gl=function(e){function t(t){e.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Error),ml=function(e){function t(){if(e.call(this),0===arguments.length)e.call(this);else if(1===arguments.length){var t=arguments[0];e.call(this,t)}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gl),yl=function(){};yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.shouldNeverReachHere=function(){if(0===arguments.length)yl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new ml("Should never reach here"+(null!==t?": "+t:""))}},yl.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],yl.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new ml:new ml(e)},yl.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],yl.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new ml("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var _l=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new zs,this._intPt[1]=new zs,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},vl={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};_l.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},_l.prototype.getTopologySummary=function(){var t=new $s;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},_l.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},_l.prototype.getIntersectionNum=function(){return this._result},_l.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},_l.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},_l.prototype.setPrecisionModel=function(t){this._precisionModel=t},_l.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},_l.prototype.getIntersection=function(t){return this._intPt[t]},_l.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},_l.prototype.hasIntersection=function(){return this._result!==_l.NO_INTERSECTION},_l.prototype.getEdgeDistance=function(t,e){return _l.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},_l.prototype.isCollinear=function(){return this._result===_l.COLLINEAR_INTERSECTION},_l.prototype.toString=function(){return dl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+dl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},_l.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},_l.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},_l.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l},_l.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i<r?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=i<r?a:s)||t.equals(e)||(o=Math.max(a,s))}return yl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},_l.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return yl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},vl.DONT_INTERSECT.get=function(){return 0},vl.DO_INTERSECT.get=function(){return 1},vl.COLLINEAR.get=function(){return 2},vl.NO_INTERSECTION.get=function(){return 0},vl.POINT_INTERSECTION.get=function(){return 1},vl.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(_l,vl);var bl=function(l){function a(){l.apply(this,arguments)}return l&&(a.__proto__=l),((a.prototype=Object.create(l&&l.prototype)).constructor=a).prototype.isInSegmentEnvelopes=function(t){var e=new ll(this._inputLines[0][0],this._inputLines[0][1]),n=new ll(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},a.prototype.computeIntersection=function(){if(3!==arguments.length)return l.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,ll.intersects(e,n,t)&&0===Ll.orientationIndex(e,n,t)&&0===Ll.orientationIndex(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=l.POINT_INTERSECTION,null;this._result=l.NO_INTERSECTION},a.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},a.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=sl.intersection(e,n,r,i)}catch(t){if(!(t instanceof ol))throw t;o=a.nearestEndpoint(e,n,r,i)}return o},a.prototype.intersection=function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new zs(a.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},a.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},a.prototype.checkDD=function(t,e,n,r,i){var o=tl.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);al.out.println("DD in env = "+a+"  --------------------- "+o),1e-4<i.distance(o)&&al.out.println("Distance = "+i.distance(o))},a.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new zs(t),o=new zs(e),a=new zs(n),s=new zs(r),l=new zs;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},a.prototype.computeCollinearIntersection=function(t,e,n,r){var i=ll.intersects(t,e,n),o=ll.intersects(t,e,r),a=ll.intersects(n,r,t),s=ll.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,l.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,l.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||s?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||a?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||s?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||a?l.COLLINEAR_INTERSECTION:l.POINT_INTERSECTION):l.NO_INTERSECTION},a.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((u<o?o:u)+(s<h?s:h))/2,d=((c<a?a:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},a.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!ll.intersects(t,e,n,r))return l.NO_INTERSECTION;var i=Ll.orientationIndex(t,e,n),o=Ll.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return l.NO_INTERSECTION;var a=Ll.orientationIndex(n,r,t),s=Ll.orientationIndex(n,r,e);return 0<a&&0<s||a<0&&s<0?l.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new zs(n):0===o?this._intPt[0]=new zs(r):0===a?this._intPt[0]=new zs(t):0===s&&(this._intPt[0]=new zs(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),l.POINT_INTERSECTION)},a.prototype.interfaces_=function(){return[]},a.prototype.getClass=function(){return a},a.nearestEndpoint=function(t,e,n,r){var i=t,o=Ll.distancePointLine(t,n,r),a=Ll.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=Ll.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=Ll.distancePointLine(r,t,e))<o&&(o=a,i=r),i},a}(_l),xl=function(){};xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl},xl.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return xl.signOfDet2x2(r,i,o,a)},xl.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:0<e?0<n?-i:i:0<n?i:-i;if(0===e||0===n)return 0<r?0<t?i:-i:0<t?-i:i;if(0<e?0<r?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):0<r?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):r<=e?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),0<t){if(!(0<n))return i;if(!(t<=n))return i}else{if(0<n)return-i;if(!(n<=t))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(e<r)return i;if((n-=a*t)+n<t){if(e<r+r)return i}else{if(r+r<e)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(r<e)return-i;if((t-=a*n)+t<n){if(r<e+e)return-i}else{if(e+e<r)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var wl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};wl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=xl.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),0<l&&this._crossingCount++}},wl.prototype.isPointInPolygon=function(){return this.getLocation()!==Vs.EXTERIOR},wl.prototype.getLocation=function(){return this._isPointOnSegment?Vs.BOUNDARY:this._crossingCount%2==1?Vs.INTERIOR:Vs.EXTERIOR},wl.prototype.isOnSegment=function(){return this._isPointOnSegment},wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl},wl.locatePointInRing=function(){if(arguments[0]instanceof zs&&Ws(arguments[1],nl)){for(var t=arguments[0],e=arguments[1],n=new wl(t),r=new zs,i=new zs,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof zs&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],l=new wl(a),u=1;u<s.length;u++){var c=s[u],h=s[u-1];if(l.countSegment(c,h),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var Ll=function(){},Cl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},Ll.orientationIndex=function(t,e,n){return tl.orientationIndex(t,e,n)},Ll.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Ws(arguments[0],nl)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new zs,u=new zs,c=new zs;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var f=0,p=1;p<s-1;p++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(p+1,c),c.x-=h,f+=u.x*(l.y-c.y);return f/2}},Ll.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Ll.distancePointLine(t,n,r);if(n.equals(r))return Ll.distancePointLine(r,t,e);var i=!1;if(ll.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||1<l||s<0||1<s)&&(i=!0)}}else i=!0;return i?Xs.min(Ll.distancePointLine(t,n,r),Ll.distancePointLine(e,n,r),Ll.distancePointLine(n,t,e),Ll.distancePointLine(r,t,e)):0},Ll.isPointInRing=function(t,e){return Ll.locatePointInRing(t,e)!==Vs.EXTERIOR},Ll.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new zs;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},Ll.isCCW=function(t){var e=t.length-1;if(e<3)throw new Ds("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var a=r;(a-=1)<0&&(a=e),t[a].equals2D(n)&&a!==r;);for(var s=r;t[s=(s+1)%e].equals2D(n)&&s!==r;);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=Ll.computeOrientation(l,n,u);return 0===c?l.x>u.x:0<c},Ll.locatePointInRing=function(t,e){return wl.locatePointInRing(t,e)},Ll.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Ll.computeOrientation=function(t,e,n){return Ll.orientationIndex(t,e,n)},Ll.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Ds("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Ll.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(1<=u)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},Ll.isOnLine=function(t,e){for(var n=new bl,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Cl.CLOCKWISE.get=function(){return-1},Cl.RIGHT.get=function(){return Ll.CLOCKWISE},Cl.COUNTERCLOCKWISE.get=function(){return 1},Cl.LEFT.get=function(){return Ll.COUNTERCLOCKWISE},Cl.COLLINEAR.get=function(){return 0},Cl.STRAIGHT.get=function(){return Ll.COLLINEAR},Object.defineProperties(Ll,Cl);var kl=function(){};kl.prototype.filter=function(t){},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl};var El=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Sl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};El.prototype.isGeometryCollection=function(){return this.getSortIndex()===El.SORTINDEX_GEOMETRYCOLLECTION},El.prototype.getFactory=function(){return this._factory},El.prototype.getGeometryN=function(t){return this},El.prototype.getArea=function(){return 0},El.prototype.isRectangle=function(){return!1},El.prototype.equals=function(){if(arguments[0]instanceof El){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof El))return!1;var n=e;return this.equalsExact(n)}},El.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},El.prototype.geometryChanged=function(){this.apply(El.geometryChangedFilter)},El.prototype.geometryChangedAction=function(){this._envelope=null},El.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},El.prototype.getLength=function(){return 0},El.prototype.getNumGeometries=function(){return 1},El.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},El.prototype.getUserData=function(){return this._userData},El.prototype.getSRID=function(){return this._SRID},El.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},El.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===El.SORTINDEX_GEOMETRYCOLLECTION)throw new Ds("This method does not support GeometryCollection arguments")},El.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},El.prototype.norm=function(){var t=this.copy();return t.normalize(),t},El.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},El.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new ll(this._envelope)},El.prototype.setSRID=function(t){this._SRID=t},El.prototype.setUserData=function(t){this._userData=t},El.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},El.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},El.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===El.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===El.SORTINDEX_MULTIPOINT||this.getSortIndex()===El.SORTINDEX_MULTILINESTRING||this.getSortIndex()===El.SORTINDEX_MULTIPOLYGON},El.prototype.interfaces_=function(){return[js,Fs,ci]},El.prototype.getClass=function(){return El},El.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},El.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Sl.serialVersionUID.get=function(){return 0x799ea46522854c00},Sl.SORTINDEX_POINT.get=function(){return 0},Sl.SORTINDEX_MULTIPOINT.get=function(){return 1},Sl.SORTINDEX_LINESTRING.get=function(){return 2},Sl.SORTINDEX_LINEARRING.get=function(){return 3},Sl.SORTINDEX_MULTILINESTRING.get=function(){return 4},Sl.SORTINDEX_POLYGON.get=function(){return 5},Sl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Sl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Sl.geometryChangedFilter.get=function(){return Ml},Object.defineProperties(El,Sl);var Ml=function(){};Ml.interfaces_=function(){return[kl]},Ml.filter=function(t){t.geometryChangedAction()};var Pl=function(){};Pl.prototype.filter=function(t){},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Il=function(){},Tl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Il.prototype.isInBoundary=function(t){},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il},Tl.Mod2BoundaryNodeRule.get=function(){return Ol},Tl.EndPointBoundaryNodeRule.get=function(){return Nl},Tl.MultiValentEndPointBoundaryNodeRule.get=function(){return Dl},Tl.MonoValentEndPointBoundaryNodeRule.get=function(){return Al},Tl.MOD2_BOUNDARY_RULE.get=function(){return new Ol},Tl.ENDPOINT_BOUNDARY_RULE.get=function(){return new Nl},Tl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Dl},Tl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Al},Tl.OGC_SFS_BOUNDARY_RULE.get=function(){return Il.MOD2_BOUNDARY_RULE},Object.defineProperties(Il,Tl);var Ol=function(){};Ol.prototype.isInBoundary=function(t){return t%2==1},Ol.prototype.interfaces_=function(){return[Il]},Ol.prototype.getClass=function(){return Ol};var Nl=function(){};Nl.prototype.isInBoundary=function(t){return 0<t},Nl.prototype.interfaces_=function(){return[Il]},Nl.prototype.getClass=function(){return Nl};var Dl=function(){};Dl.prototype.isInBoundary=function(t){return 1<t},Dl.prototype.interfaces_=function(){return[Il]},Dl.prototype.getClass=function(){return Dl};var Al=function(){};Al.prototype.isInBoundary=function(t){return 1===t},Al.prototype.interfaces_=function(){return[Il]},Al.prototype.getClass=function(){return Al};var Rl=function(){};Rl.prototype.add=function(){},Rl.prototype.addAll=function(){},Rl.prototype.isEmpty=function(){},Rl.prototype.iterator=function(){},Rl.prototype.size=function(){},Rl.prototype.toArray=function(){},Rl.prototype.remove=function(){};var Fl=function(e){function t(t){e.call(this),this.message=t||""}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(t,n),t}(Error),jl=function(){};jl.prototype.hasNext=function(){},jl.prototype.next=function(){},jl.prototype.remove=function(){};var Bl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Rl);(hi.prototype=new Error).name="NoSuchElementException";var zl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Rl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Rl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new ql(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Fl;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Bl),ql=function(e){function t(t){e.call(this),this.arrayList_=t,this.position_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new hi;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(jl),Ul=function(v){function t(){if(v.call(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}v&&(t.__proto__=v),(t.prototype=Object.create(v&&v.prototype)).constructor=t;var e={coordArrayType:{configurable:!0}};return e.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(t){return this.get(t)},t.prototype.addAll=function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return v.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var t=v.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];v.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof zs&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(r))return null;v.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],s);else for(var u=a.length-1;0<=u;u--)this.add(a[u],s);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof zs){var c=arguments[0],h=arguments[1];if(!arguments[2]){var f=this.size();if(0<f){if(0<c&&this.get(c-1).equals2D(h))return null;if(c<f&&this.get(c).equals2D(h))return null}}v.prototype.add.call(this,c,h)}}else if(4===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],m=arguments[3],y=1;m<g&&(y=-1);for(var _=g;_!==m;_+=y)this.add(p[_],d);return!0}},t.prototype.closeRing=function(){0<this.size()&&this.add(new zs(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,e),t}(zl),Gl=function(){},Vl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Vl.ForwardComparator.get=function(){return Hl},Vl.BidirectionalComparator.get=function(){return Wl},Vl.coordArrayType.get=function(){return new Array(0).fill(null)},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Gl.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Gl.indexOf(r,e)<0)return r}return null},Gl.scroll=function(t,e){var n=Gl.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);al.arraycopy(t,n,r,0,t.length-n),al.arraycopy(t,0,r,t.length-n,n),al.arraycopy(r,0,t,0,t.length)},Gl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Gl.intersection=function(t,e){for(var n=new Ul,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Gl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Gl.removeRepeatedPoints=function(t){return Gl.hasRepeatedPoints(t)?new Ul(t,!1).toCoordinateArray():t},Gl.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Gl.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Gl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new zs(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new zs(r[i+l])},Gl.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Gl.envelope=function(t){for(var e=new ll,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Gl.toCoordinateArray=function(t){return t.toArray(Gl.coordArrayType)},Gl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Gl.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Gl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Gl.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Gl.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},Gl.extract=function(t,e,n){e=Xs.clamp(e,0,t.length);var r=(n=Xs.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Gl,Vl);var Hl=function(){};Hl.prototype.compare=function(t,e){return Gl.compare(t,e)},Hl.prototype.interfaces_=function(){return[Bs]},Hl.prototype.getClass=function(){return Hl};var Wl=function(){};Wl.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Gl.compare(n,r);return Gl.isEqualReversed(n,r)?0:i},Wl.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Gl.increasingDirection(n),o=Gl.increasingDirection(r),a=0<i?0:n.length-1,s=0<o?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},Wl.prototype.interfaces_=function(){return[Bs]},Wl.prototype.getClass=function(){return Wl};var Xl=function(){};Xl.prototype.get=function(){},Xl.prototype.put=function(){},Xl.prototype.size=function(){},Xl.prototype.values=function(){},Xl.prototype.entrySet=function(){};var Yl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Xl);(fi.prototype=new Error).name="OperationNotSupported",(pi.prototype=new Rl).contains=function(){};var $l=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Rl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Zl(this)},e}(pi),Zl=function(e){function t(t){e.call(this),this.hashSet_=t,this.position_=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new hi;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new fi},t}(jl),Ql=0;(vi.prototype=new Yl).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},vi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ql,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Ql,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},vi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(gi(t)===yi(gi(gi(t)))){var e=_i(gi(gi(t)));1===di(e)?(mi(gi(t),Ql),mi(e,Ql),mi(gi(gi(t)),1),t=gi(gi(t))):(t===_i(gi(t))&&(t=gi(t),this.rotateLeft(t)),mi(gi(t),Ql),mi(gi(gi(t)),1),this.rotateRight(gi(gi(t))))}else{var n=yi(gi(gi(t)));1===di(n)?(mi(gi(t),Ql),mi(n,Ql),mi(gi(gi(t)),1),t=gi(gi(t))):(t===yi(gi(t))&&(t=gi(t),this.rotateRight(t)),mi(gi(t),Ql),mi(gi(gi(t)),1),this.rotateLeft(gi(gi(t))))}this.root_.color=Ql},vi.prototype.values=function(){var t=new zl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=vi.successor(e));)t.add(e.value);return t},vi.prototype.entrySet=function(){var t=new $l,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=vi.successor(e));)t.add(e);return t},vi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e}},vi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e}},vi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},vi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},vi.prototype.size=function(){return this.size_};var Kl=function(){};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl},bi.prototype=new pi,(xi.prototype=new bi).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},xi.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},xi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},xi.prototype.remove=function(t){throw new fi},xi.prototype.size=function(){return this.array_.length},xi.prototype.isEmpty=function(){return 0===this.array_.length},xi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},xi.prototype.iterator=function(){return new Jl(this)};var Jl=function(t){this.treeSet_=t,this.position_=0};Jl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new hi;return this.treeSet_.array_[this.position_++]},Jl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Jl.prototype.remove=function(){throw new fi};var tu=function(){};tu.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},tu.asList=function(t){for(var e=new zl,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var eu=function(){},nu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};nu.P.get=function(){return 0},nu.L.get=function(){return 1},nu.A.get=function(){return 2},nu.FALSE.get=function(){return-1},nu.TRUE.get=function(){return-2},nu.DONTCARE.get=function(){return-3},nu.SYM_FALSE.get=function(){return"F"},nu.SYM_TRUE.get=function(){return"T"},nu.SYM_DONTCARE.get=function(){return"*"},nu.SYM_P.get=function(){return"0"},nu.SYM_L.get=function(){return"1"},nu.SYM_A.get=function(){return"2"},eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu},eu.toDimensionSymbol=function(t){switch(t){case eu.FALSE:return eu.SYM_FALSE;case eu.TRUE:return eu.SYM_TRUE;case eu.DONTCARE:return eu.SYM_DONTCARE;case eu.P:return eu.SYM_P;case eu.L:return eu.SYM_L;case eu.A:return eu.SYM_A}throw new Ds("Unknown dimension value: "+t)},eu.toDimensionValue=function(t){switch(Qs.toUpperCase(t)){case eu.SYM_FALSE:return eu.FALSE;case eu.SYM_TRUE:return eu.TRUE;case eu.SYM_DONTCARE:return eu.DONTCARE;case eu.SYM_P:return eu.P;case eu.SYM_L:return eu.L;case eu.SYM_A:return eu.A}throw new Ds("Unknown dimension symbol: "+t)},Object.defineProperties(eu,nu);var ru=function(){};ru.prototype.filter=function(t){},ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru};var iu=function(){};iu.prototype.filter=function(t,e){},iu.prototype.isDone=function(){},iu.prototype.isGeometryChanged=function(){},iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu};var ou=function(i){function n(t,e){if(i.call(this,e),this._geometries=t||[],i.hasNullElements(this._geometries))throw new Ds("geometries must not contain null elements")}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var t=new ll,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},n.prototype.getGeometryN=function(t){return this._geometries[t]},n.prototype.getSortIndex=function(){return i.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},n.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},n.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0}return i.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();tu.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var t=eu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},n.prototype.getDimension=function(){for(var t=eu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},n.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},n.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new xi(tu.asList(this._geometries)),n=new xi(tu.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),l=0;l<a&&l<s;){var u=this.getGeometryN(l),c=o.getGeometryN(l),h=u.compareToSameClass(c,i);if(0!==h)return h;l++}return l<a?1:l<s?-1:0}},n.prototype.apply=function(){if(Ws(arguments[0],Pl))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Ws(arguments[0],iu)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Ws(arguments[0],ru)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Ws(arguments[0],kl)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),yl.shouldNeverReachHere(),null},n.prototype.clone=function(){var t=i.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)t._geometries[e]=this._geometries[e].clone();return t},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,t),n}(El),au=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return El.SORTINDEX_MULTILINESTRING},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)}return n.prototype.equalsExact.apply(this,arguments)},r.prototype.getBoundaryDimension=function(){return this.isClosed()?eu.FALSE:0},r.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},r.prototype.getDimension=function(){return 1},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},r.prototype.getBoundary=function(){return new su(this).getBoundary()},r.prototype.getGeometryType=function(){return"MultiLineString"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[Kl]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(r,t),r}(ou),su=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Il.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};su.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},su.prototype.getBoundary=function(){return this._geom instanceof fu?this.boundaryLineString(this._geom):this._geom instanceof au?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},su.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},su.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},su.prototype.computeBoundaryCoordinates=function(t){var e=new zl;this._endpointMap=new vi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Gl.toCoordinateArray(e)},su.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new lu,this._endpointMap.put(t,e)),e.count++},su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},su.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new su(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new su(e,n).getBoundary()}};var lu=function(){this.count=null};lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu};var uu=function(){},cu={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu},uu.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},uu.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(uu.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+uu.NEWLINE}catch(t){if(!(t instanceof wi))throw t;yl.shouldNeverReachHere()}return o}},uu.split=function(t,e){for(var n=e.length,r=new zl,i=""+t,o=i.indexOf(e);0<=o;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},uu.toString=function(){if(1===arguments.length){var t=arguments[0];return uu.SIMPLE_ORDINATE_FORMAT.format(t)}},uu.spaces=function(t){return uu.chars(" ",t)},cu.NEWLINE.get=function(){return al.getProperty("line.separator")},cu.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(uu,cu);var hu=function(){};hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu},hu.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},hu.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,nl.X)===t.getOrdinate(e-1,nl.X)&&t.getOrdinate(0,nl.Y)===t.getOrdinate(e-1,nl.Y)},hu.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||As.isNaN(a)&&As.isNaN(s)))return!1}return!0},hu.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(hu.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)hu.copy(e,i-1,r,o,1);return r},hu.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)hu.swap(t,r,e-r)},hu.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},hu.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)hu.copyCoord(t,e+o,n,r+o)},hu.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new $s;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(uu.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},hu.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?hu.createClosedRing(t,e,4):e.getOrdinate(0,nl.X)===e.getOrdinate(n-1,nl.X)&&e.getOrdinate(0,nl.Y)===e.getOrdinate(n-1,nl.Y)?e:hu.createClosedRing(t,e,n+1)},hu.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();hu.copy(e,0,r,0,i);for(var o=i;o<n;o++)hu.copy(e,0,r,o,1);return r};var fu=function(i){function e(t,e){i.call(this,e),this._points=null,this.init(t)}i&&(e.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ll:this._points.expandEnvelope(new ll)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return i.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0}return i.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&hu.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?eu.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Ll.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return hu.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Ws(arguments[0],Pl))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Ws(arguments[0],iu)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Ws(arguments[0],ru)?arguments[0].filter(this):Ws(arguments[0],kl)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new su(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var t=i.prototype.clone.call(this);return t._points=this._points.clone(),t},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Ds("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(El),pu=function(){};pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu};var du=function(n){function t(t,e){n.call(this,e),this._coordinates=t||null,this.init(this._coordinates)}n&&(t.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ll;var t=new ll;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return eu.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},t.prototype.apply=function(){if(Ws(arguments[0],Pl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Ws(arguments[0],iu)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Ws(arguments[0],ru)?arguments[0].filter(this):Ws(arguments[0],kl)&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),yl.isTrue(t.size()<=1),this._coordinates=t},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[pu]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,e),t}(El),gu=function(){};gu.prototype.interfaces_=function(){return[]},gu.prototype.getClass=function(){return gu};var mu=function(a){function r(t,e,n){if(a.call(this,n),this._shell=null,(this._holes=null)===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),a.hasNullElements(e))throw new Ds("holes must not contain null elements");if(t.isEmpty()&&a.hasNonEmptyElements(e))throw new Ds("shell is empty but holes are not");this._shell=t,this._holes=e}a&&(r.__proto__=a);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(a&&a.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return a.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},r.prototype.getArea=function(){var t=0;t+=Math.abs(Ll.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Ll.signedArea(this._holes[e].getCoordinateSequence()));return t},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,i=n._shell;if(!r.equalsExact(i,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],e))return!1;return!0}return a.prototype.equalsExact.apply(this,arguments)},r.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);tu.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);al.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Gl.minCoordinate(e.getCoordinates());Gl.scroll(r,i),al.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Ll.isCCW(e.getCoordinates())===n&&Gl.reverse(e.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},r.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},r.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,l=a.compareToSameClass(s,i);if(0!==l)return l;for(var u=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<u&&h<c;){var f=this.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,i);if(0!==d)return d;h++}return h<u?1:h<c?-1:0}},r.prototype.apply=function(t){if(Ws(t,Pl)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Ws(t,iu)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Ws(t,ru))t.filter(this);else if(Ws(t,kl)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},r.prototype.clone=function(){var t=a.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].clone();return t},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<e.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(t){return this._holes[t]},r.prototype.interfaces_=function(){return[gu]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,t),r}(El),yu=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return El.SORTINDEX_MULTIPOINT},r.prototype.isValid=function(){return!0},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)}return n.prototype.equalsExact.apply(this,arguments)},r.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._geometries[t].getCoordinate()}return n.prototype.getCoordinate.apply(this,arguments)},r.prototype.getBoundaryDimension=function(){return eu.FALSE},r.prototype.getDimension=function(){return 0},r.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},r.prototype.getGeometryType=function(){return"MultiPoint"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[pu]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(r,t),r}(ou),_u=function(n){function t(t,e){t instanceof zs&&e instanceof Du&&(t=e.getCoordinateSequenceFactory().create(t)),n.call(this,t,e),this.validateConstruction()}n&&(t.__proto__=n);var e={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getSortIndex=function(){return El.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return eu.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var t=this._points.copy();return hu.reverse(t),this.getFactory().createLinearRing(t)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new Ds("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new Ds("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},e.MINIMUM_VALID_SIZE.get=function(){return 4},e.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,e),t}(fu),vu=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return El.SORTINDEX_MULTIPOLYGON},r.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)}return n.prototype.equalsExact.apply(this,arguments)},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new zl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},r.prototype.getGeometryType=function(){return"MultiPolygon"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[gu]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(r,t),r}(ou),bu=function(t){this._factory=t||null,this._isUserDataCopied=!1},xu={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};bu.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},bu.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},bu.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ou?this.editGeometryCollection(t,e):t instanceof mu?this.editPolygon(t,e):t instanceof du?e.edit(t,this._factory):t instanceof fu?e.edit(t,this._factory):(yl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},bu.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new zl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===yu?this._factory.createMultiPoint(r.toArray([])):n.getClass()===au?this._factory.createMultiLineString(r.toArray([])):n.getClass()===vu?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},bu.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new zl,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.GeometryEditorOperation=function(){},xu.NoOpGeometryOperation.get=function(){return wu},xu.CoordinateOperation.get=function(){return Lu},xu.CoordinateSequenceOperation.get=function(){return Cu},Object.defineProperties(bu,xu);var wu=function(){};wu.prototype.edit=function(t,e){return t},wu.prototype.interfaces_=function(){return[bu.GeometryEditorOperation]},wu.prototype.getClass=function(){return wu};var Lu=function(){};Lu.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof _u?e.createLinearRing(n):t instanceof fu?e.createLineString(n):t instanceof du?0<n.length?e.createPoint(n[0]):e.createPoint():t},Lu.prototype.interfaces_=function(){return[bu.GeometryEditorOperation]},Lu.prototype.getClass=function(){return Lu};var Cu=function(){};Cu.prototype.edit=function(t,e){return t instanceof _u?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof fu?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof du?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Cu.prototype.interfaces_=function(){return[bu.GeometryEditorOperation]},Cu.prototype.getClass=function(){return Cu};var ku=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new zs}else if(Ws(arguments[0],nl)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new zs}},Eu={serialVersionUID:{configurable:!0}};ku.prototype.setOrdinate=function(t,e,n){switch(e){case nl.X:this._coordinates[t].x=n;break;case nl.Y:this._coordinates[t].y=n;break;case nl.Z:this._coordinates[t].z=n;break;default:throw new Ds("invalid ordinateIndex")}},ku.prototype.size=function(){return this._coordinates.length},ku.prototype.getOrdinate=function(t,e){switch(e){case nl.X:return this._coordinates[t].x;case nl.Y:return this._coordinates[t].y;case nl.Z:return this._coordinates[t].z}return As.NaN},ku.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ku.prototype.getCoordinateCopy=function(t){return new zs(this._coordinates[t])},ku.prototype.getDimension=function(){return this._dimension},ku.prototype.getX=function(t){return this._coordinates[t].x},ku.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ku(t,this._dimension)},ku.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ku.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ku(t,this._dimension)},ku.prototype.toString=function(){if(0<this._coordinates.length){var t=new $s(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ku.prototype.getY=function(t){return this._coordinates[t].y},ku.prototype.toCoordinateArray=function(){return this._coordinates},ku.prototype.interfaces_=function(){return[nl,ci]},ku.prototype.getClass=function(){return ku},Eu.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ku,Eu);var Su=function(){},Mu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Su.prototype.readResolve=function(){return Su.instance()},Su.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ku(t)}if(Ws(arguments[0],nl)){var e=arguments[0];return new ku(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return 3<r&&(r=3),r<2?new ku(n):new ku(n,r)}},Su.prototype.interfaces_=function(){return[Gs,ci]},Su.prototype.getClass=function(){return Su},Su.instance=function(){return Su.instanceObject},Mu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Mu.instanceObject.get=function(){return new Su},Object.defineProperties(Su,Mu);var Pu=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new zl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var e=new $l;return this.map_.entries().forEach(function(t){return e.add(t)}),e},e.prototype.size=function(){return this.map_.size()},e}(Xl),Iu=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ou){var e=arguments[0];(this._modelType=e)===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Tu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Iu.prototype.equals=function(t){if(!(t instanceof Iu))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Iu.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Zs(n).compareTo(new Zs(r))},Iu.prototype.getScale=function(){return this._scale},Iu.prototype.isFloating=function(){return this._modelType===Iu.FLOATING||this._modelType===Iu.FLOATING_SINGLE},Iu.prototype.getType=function(){return this._modelType},Iu.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Iu.FLOATING?t="Floating":this._modelType===Iu.FLOATING_SINGLE?t="Floating-Single":this._modelType===Iu.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Iu.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return As.isNaN(t)?t:this._modelType===Iu.FLOATING_SINGLE?t:this._modelType===Iu.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof zs){var e=arguments[0];if(this._modelType===Iu.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Iu.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Iu.FLOATING?t=16:this._modelType===Iu.FLOATING_SINGLE?t=6:this._modelType===Iu.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Iu.prototype.setScale=function(t){this._scale=Math.abs(t)},Iu.prototype.interfaces_=function(){return[ci,Fs]},Iu.prototype.getClass=function(){return Iu},Iu.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},Tu.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Tu.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Iu,Tu);var Ou=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Nu={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ou.prototype.readResolve=function(){return Ou.nameToTypeMap.get(this._name)},Ou.prototype.toString=function(){return this._name},Ou.prototype.interfaces_=function(){return[ci]},Ou.prototype.getClass=function(){return Ou},Nu.serialVersionUID.get=function(){return-552860263173159e4},Nu.nameToTypeMap.get=function(){return new Pu},Object.defineProperties(Ou,Nu),Iu.Type=Ou,Iu.FIXED=new Ou("FIXED"),Iu.FLOATING=new Ou("FLOATING"),Iu.FLOATING_SINGLE=new Ou("FLOATING SINGLE");var Du=function t(){this._precisionModel=new Iu,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Ws(arguments[0],Gs)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Iu&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Au={serialVersionUID:{configurable:!0}};Du.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new zs(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new zs(t.getMinX(),t.getMinY()),new zs(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new zs(t.getMinX(),t.getMinY()),new zs(t.getMinX(),t.getMaxY()),new zs(t.getMaxX(),t.getMaxY()),new zs(t.getMaxX(),t.getMinY()),new zs(t.getMinX(),t.getMinY())]),null)},Du.prototype.createLineString=function(t){return t?t instanceof Array?new fu(this.getCoordinateSequenceFactory().create(t),this):Ws(t,nl)?new fu(t,this):void 0:new fu(this.getCoordinateSequenceFactory().create([]),this)},Du.prototype.createMultiLineString=function(){if(0===arguments.length)return new au(null,this);if(1===arguments.length){var t=arguments[0];return new au(t,this)}},Du.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Du.toGeometryArray(t));var s=t.iterator().next();if(1<t.size()){if(s instanceof mu)return this.createMultiPolygon(Du.toPolygonArray(t));if(s instanceof fu)return this.createMultiLineString(Du.toLineStringArray(t));if(s instanceof du)return this.createMultiPoint(Du.toPointArray(t));yl.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},Du.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Du.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof zs){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ws(arguments[0],nl)){var e=arguments[0];return new du(e,this)}}},Du.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Du.prototype.createPolygon=function(){if(0===arguments.length)return new mu(null,null,this);if(1===arguments.length){if(Ws(arguments[0],nl)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof _u){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new mu(r,i,this)}},Du.prototype.getSRID=function(){return this._SRID},Du.prototype.createGeometryCollection=function(){if(0===arguments.length)return new ou(null,this);if(1===arguments.length){var t=arguments[0];return new ou(t,this)}},Du.prototype.createGeometry=function(t){return new bu(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Du.prototype.getPrecisionModel=function(){return this._precisionModel},Du.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ws(arguments[0],nl)){var e=arguments[0];return new _u(e,this)}}},Du.prototype.createMultiPolygon=function(){if(0===arguments.length)return new vu(null,this);if(1===arguments.length){var t=arguments[0];return new vu(t,this)}},Du.prototype.createMultiPoint=function(){if(0===arguments.length)return new yu(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new yu(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Ws(arguments[0],nl)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());hu.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},Du.prototype.interfaces_=function(){return[ci]},Du.prototype.getClass=function(){return Du},Du.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.getDefaultCoordinateSequenceFactory=function(){return Su.instance()},Du.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Du.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Au.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Du,Au);var Ru=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Fu=function(t){this.geometryFactory=t||new Du};Fu.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!ju[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ru.indexOf(n)?ju[n].apply(this,[e.coordinates]):"GeometryCollection"===n?ju[n].apply(this,[e.geometries]):ju[n].apply(this,[e])},Fu.prototype.write=function(t){var e=t.getGeometryType();if(!Bu[e])throw new Error("Geometry is not supported");return Bu[e].apply(this,[t])};var ju={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!ju[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ju.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new zs(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new zs(t[0],t[1]),new zs(t[2],t[1]),new zs(t[2],t[3]),new zs(t[0],t[3]),new zs(t[0],t[1])])},Point:function(t){var e=new zs(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ju.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ju.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ju.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ju.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=ju.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(ju.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Bu={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Bu.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Bu.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Bu.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Bu.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Bu.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Bu.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Bu.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Bu[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},zu=function(t){this.geometryFactory=t||new Du,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Fu(this.geometryFactory)};zu.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Iu.FIXED&&this.reducePrecision(e),e},zu.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var qu=function(){this.parser=new Fu(this.geometryFactory)};qu.prototype.write=function(t){return this.parser.write(t)};var Uu=function(){},Gu={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.opposite=function(t){return t===Uu.LEFT?Uu.RIGHT:t===Uu.RIGHT?Uu.LEFT:t},Gu.ON.get=function(){return 0},Gu.LEFT.get=function(){return 1},Gu.RIGHT.get=function(){return 2},Object.defineProperties(Uu,Gu),(Li.prototype=new Error).name="EmptyStackException",(Ci.prototype=new Bl).add=function(t){return this.array_.push(t),!0},Ci.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Ci.prototype.push=function(t){return this.array_.push(t),t},Ci.prototype.pop=function(t){if(0===this.array_.length)throw new Li;return this.array_.pop()},Ci.prototype.peek=function(){if(0===this.array_.length)throw new Li;return this.array_[this.array_.length-1]},Ci.prototype.empty=function(){return 0===this.array_.length},Ci.prototype.isEmpty=function(){return this.empty()},Ci.prototype.search=function(t){return this.array_.indexOf(t)},Ci.prototype.size=function(){return this.array_.length},Ci.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Vu=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Vu.prototype.getCoordinate=function(){return this._minCoord},Vu.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Vu.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();yl.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Ll.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Ll.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Ll.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Vu.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Uu.LEFT;return n[e].y<n[e+1].y&&(r=Uu.RIGHT),r},Vu.prototype.getEdge=function(){return this._orientedDe},Vu.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Vu.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Vu.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}yl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Uu.LEFT&&(this._orientedDe=this._minDe.getSym())},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu};var Hu=function(n){function r(t,e){n.call(this,r.msgWithCoord(t,e)),this.pt=e?new zs(e):null,this.name="TopologyException"}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getCoordinate=function(){return this.pt},r.prototype.interfaces_=function(){return[]},r.prototype.getClass=function(){return r},r.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},r}(gl),Wu=function(){this.array_=[]};Wu.prototype.addLast=function(t){this.array_.push(t)},Wu.prototype.removeFirst=function(){return this.array_.shift()},Wu.prototype.isEmpty=function(){return 0===this.array_.length};var Xu=function(){this._finder=null,this._dirEdgeList=new zl,this._nodes=new zl,this._rightMostCoord=null,this._env=null,this._finder=new Vu};Xu.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Xu.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Xu.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Hu("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Xu.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Uu.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Xu.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Xu.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Uu.RIGHT)&&e.getDepth(Uu.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Xu.prototype.computeDepths=function(t){var e=new $l,n=new Wu,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Xu.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Xu.prototype.getEnvelope=function(){if(null===this._env){for(var t=new ll,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Xu.prototype.addReachable=function(t){var e=new Ci;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Xu.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Uu.LEFT,t.getDepth(Uu.RIGHT)),e.setDepth(Uu.RIGHT,t.getDepth(Uu.LEFT))},Xu.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Xu.prototype.getNodes=function(){return this._nodes},Xu.prototype.getDirectedEdges=function(){return this._dirEdgeList},Xu.prototype.interfaces_=function(){return[Fs]},Xu.prototype.getClass=function(){return Xu};var Yu=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Uu.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Uu.ON]=o,this.location[Uu.LEFT]=a,this.location[Uu.RIGHT]=s}};Yu.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Yu.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Vs.NONE)return!1;return!0},Yu.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Vs.NONE&&(this.location[e]=t)},Yu.prototype.isLine=function(){return 1===this.location.length},Yu.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Uu.ON]=this.location[Uu.ON],e[Uu.LEFT]=Vs.NONE,e[Uu.RIGHT]=Vs.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Vs.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Yu.prototype.getLocations=function(){return this.location},Yu.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Uu.LEFT];this.location[Uu.LEFT]=this.location[Uu.RIGHT],this.location[Uu.RIGHT]=t},Yu.prototype.toString=function(){var t=new $s;return 1<this.location.length&&t.append(Vs.toLocationSymbol(this.location[Uu.LEFT])),t.append(Vs.toLocationSymbol(this.location[Uu.ON])),1<this.location.length&&t.append(Vs.toLocationSymbol(this.location[Uu.RIGHT])),t.toString()},Yu.prototype.setLocations=function(t,e,n){this.location[Uu.ON]=t,this.location[Uu.LEFT]=e,this.location[Uu.RIGHT]=n},Yu.prototype.get=function(t){return t<this.location.length?this.location[t]:Vs.NONE},Yu.prototype.isArea=function(){return 1<this.location.length},Yu.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Vs.NONE)return!0;return!1},Yu.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Uu.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Yu.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Vs.NONE)},Yu.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Yu.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var $u=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Yu(e),this.elt[1]=new Yu(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Yu(n.elt[0]),this.elt[1]=new Yu(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Yu(Vs.NONE),this.elt[1]=new Yu(Vs.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Yu(o,a,s),this.elt[1]=new Yu(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Yu(Vs.NONE,Vs.NONE,Vs.NONE),this.elt[1]=new Yu(Vs.NONE,Vs.NONE,Vs.NONE),this.elt[l].setLocations(u,c,h)}};$u.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},$u.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},$u.prototype.isNull=function(t){return this.elt[t].isNull()},$u.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},$u.prototype.isLine=function(t){return this.elt[t].isLine()},$u.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Yu(t.elt[e]):this.elt[e].merge(t.elt[e])},$u.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$u.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Uu.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},$u.prototype.toString=function(){var t=new $s;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},$u.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},$u.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},$u.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Uu.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},$u.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},$u.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},$u.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Yu(this.elt[t].location[0]))},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u},$u.toLineLabel=function(t){for(var e=new $u(Vs.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Zu=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new zl,this._pts=new zl,this._label=new $u(Vs.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new zl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Zu.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Ll.isCCW(this._ring.getCoordinates())},Zu.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Zu.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new Hu("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Hu("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();yl.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Zu.prototype.getLinearRing=function(){return this._ring},Zu.prototype.getCoordinate=function(t){return this._pts.get(t)},Zu.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Zu.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;0<=s;s--)this._pts.add(r[s])}},Zu.prototype.isHole=function(){return this._isHole},Zu.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this._startDe;);},Zu.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ll.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Zu.prototype.addHole=function(t){this._holes.add(t)},Zu.prototype.isShell=function(){return null===this._shell},Zu.prototype.getLabel=function(){return this._label},Zu.prototype.getEdges=function(){return this._edges},Zu.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Zu.prototype.getShell=function(){return this._shell},Zu.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Uu.RIGHT);if(r===Vs.NONE)return null;if(this._label.getLocation(n)===Vs.NONE)return this._label.setLocation(n,r),null}},Zu.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},Zu.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Zu.prototype.interfaces_=function(){return[]},Zu.prototype.getClass=function(){return Zu};var Qu=function(n){function t(){var t=arguments[0],e=arguments[1];n.call(this,t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},t.prototype.getNext=function(t){return t.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Zu),Ku=function(n){function t(){var t=arguments[0],e=arguments[1];n.call(this,t,e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.buildMinimalRings=function(){var t=new zl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Qu(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},t.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this._startDe;);},t.prototype.getNext=function(t){return t.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Zu),Ju=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Ju.prototype.setVisited=function(t){this._isVisited=t},Ju.prototype.setInResult=function(t){this._isInResult=t},Ju.prototype.isCovered=function(){return this._isCovered},Ju.prototype.isCoveredSet=function(){return this._isCoveredSet},Ju.prototype.setLabel=function(t){this._label=t},Ju.prototype.getLabel=function(){return this._label},Ju.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ju.prototype.updateIM=function(t){yl.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},Ju.prototype.isInResult=function(){return this._isInResult},Ju.prototype.isVisited=function(){return this._isVisited},Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju};var tc=function(n){function i(){n.call(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new $u(0,Vs.NONE)}return n&&(i.__proto__=n),((i.prototype=Object.create(n&&n.prototype)).constructor=i).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},i.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},i.prototype.getCoordinate=function(){return this._coord},i.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},i.prototype.computeIM=function(t){},i.prototype.computeMergedLocation=function(t,e){var n=Vs.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Vs.BOUNDARY&&(n=r)}return n},i.prototype.setLabel=function(){if(2!==arguments.length)return n.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new $u(t,e):this._label.setLocation(t,e)},i.prototype.getEdges=function(){return this._edges},i.prototype.mergeLabel=function(){if(arguments[0]instanceof i){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof $u)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===Vs.NONE&&this._label.setLocation(n,r)}},i.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},i.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Vs.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Vs.BOUNDARY:n=Vs.INTERIOR;break;case Vs.INTERIOR:default:n=Vs.BOUNDARY}this._label.setLocation(t,n)},i.prototype.interfaces_=function(){return[]},i.prototype.getClass=function(){return i},i}(Ju),ec=function(){this.nodeMap=new vi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ec.prototype.find=function(t){return this.nodeMap.get(t)},ec.prototype.addNode=function(){if(arguments[0]instanceof zs){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof tc){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},ec.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ec.prototype.iterator=function(){return this.nodeMap.values().iterator()},ec.prototype.values=function(){return this.nodeMap.values()},ec.prototype.getBoundaryNodes=function(t){for(var e=new zl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Vs.BOUNDARY&&e.add(r)}return e},ec.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec};var nc=function(){},rc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc},nc.isNorthern=function(t){return t===nc.NE||t===nc.NW},nc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},nc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},nc.isInHalfPlane=function(t,e){return e===nc.SE?t===nc.SE||t===nc.SW:t===e||t===e+1},nc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Ds("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?nc.NE:nc.SE:0<=e?nc.NW:nc.SW}if(arguments[0]instanceof zs&&arguments[1]instanceof zs){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Ds("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?nc.NE:nc.SE:r.y>=n.y?nc.NW:nc.SW}},rc.NE.get=function(){return 0},rc.NW.get=function(){return 1},rc.SW.get=function(){return 2},rc.SE.get=function(){return 3},Object.defineProperties(nc,rc);var ic=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};ic.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Ll.computeOrientation(t._p0,t._p1,this._p1)},ic.prototype.getDy=function(){return this._dy},ic.prototype.getCoordinate=function(){return this._p0},ic.prototype.setNode=function(t){this._node=t},ic.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},ic.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},ic.prototype.getDirectedCoordinate=function(){return this._p1},ic.prototype.getDx=function(){return this._dx},ic.prototype.getLabel=function(){return this._label},ic.prototype.getEdge=function(){return this._edge},ic.prototype.getQuadrant=function(){return this._quadrant},ic.prototype.getNode=function(){return this._node},ic.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},ic.prototype.computeLabel=function(t){},ic.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=nc.quadrant(this._dx,this._dy),yl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ic.prototype.interfaces_=function(){return[Fs]},ic.prototype.getClass=function(){return ic};var oc=function(r){function t(){var t=arguments[0],e=arguments[1];if(r.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(t){return this._depth[t]},t.prototype.setVisited=function(t){this._isVisited=t},t.prototype.computeDirectedLabel=function(){this._label=new $u(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Hu("assigned depths do not match",this.getCoordinate());this._depth[t]=e},t.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Uu.LEFT)===Vs.INTERIOR&&this._label.getLocation(e,Uu.RIGHT)===Vs.INTERIOR||(t=!1);return t},t.prototype.setNextMin=function(t){this._nextMin=t},t.prototype.print=function(t){r.prototype.print.call(this,t),t.print(" "+this._depth[Uu.LEFT]+"/"+this._depth[Uu.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},t.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Vs.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Vs.EXTERIOR);return t&&e&&n},t.prototype.setEdgeRing=function(t){this._edgeRing=t},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},t.prototype.setInResult=function(t){this._isInResult=t},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},t.prototype.setSym=function(t){this._sym=t},t.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},t.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Uu.LEFT&&(r=-1);var i=Uu.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(t){this._next=t},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(t,e){return t===Vs.EXTERIOR&&e===Vs.INTERIOR?1:t===Vs.INTERIOR&&e===Vs.EXTERIOR?-1:0},t}(ic),ac=function(){};ac.prototype.createNode=function(t){return new tc(t,null)},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var sc=function(){if(this._edges=new zl,this._nodes=null,this._edgeEndList=new zl,0===arguments.length)this._nodes=new ec(new ac);else if(1===arguments.length){var t=arguments[0];this._nodes=new ec(t)}};sc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},sc.prototype.find=function(t){return this._nodes.find(t)},sc.prototype.addNode=function(){if(arguments[0]instanceof tc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof zs){var e=arguments[0];return this._nodes.addNode(e)}},sc.prototype.getNodeIterator=function(){return this._nodes.iterator()},sc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},sc.prototype.debugPrintln=function(t){al.out.println(t)},sc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Vs.BOUNDARY},sc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},sc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Ll.computeOrientation(t,e,r)===Ll.COLLINEAR&&nc.quadrant(t,e)===nc.quadrant(n,r)},sc.prototype.getEdgeEnds=function(){return this._edgeEndList},sc.prototype.debugPrint=function(t){al.out.print(t)},sc.prototype.getEdgeIterator=function(){return this._edges.iterator()},sc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},sc.prototype.insertEdge=function(t){this._edges.add(t)},sc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},sc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new oc(n,!0),i=new oc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},sc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},sc.prototype.getNodes=function(){return this._nodes.values()},sc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var lc=function(){this._geometryFactory=null,this._shellList=new zl;var t=arguments[0];this._geometryFactory=t};lc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},lc.prototype.computePolygons=function(t){for(var e=new zl,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},lc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Hu("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},lc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new zl,i=t.iterator();i.hasNext();){var o=i.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},lc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},lc.prototype.buildMaximalEdgeRings=function(t){for(var e=new zl,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Ku(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},lc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},lc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},lc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Ll.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},lc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return yl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},lc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];sc.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new zl,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc};var uc=function(){};uc.prototype.getBounds=function(){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var cc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};cc.prototype.getItem=function(){return this._item},cc.prototype.getBounds=function(){return this._bounds},cc.prototype.interfaces_=function(){return[uc,ci]},cc.prototype.getClass=function(){return cc};var hc=function(){this._size=null,this._items=null,this._size=0,this._items=new zl,this._items.add(null)};hc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},hc.prototype.size=function(){return this._size},hc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},hc.prototype.clear=function(){this._size=0,this._items.clear()},hc.prototype.isEmpty=function(){return 0===this._size},hc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var fc=function(){};fc.prototype.visitItem=function(t){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var pc=function(){};pc.prototype.insert=function(t,e){},pc.prototype.remove=function(t,e){},pc.prototype.query=function(){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var dc=function(){if(this._childBoundables=new zl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},gc={serialVersionUID:{configurable:!0}};dc.prototype.getLevel=function(){return this._level},dc.prototype.size=function(){return this._childBoundables.size()},dc.prototype.getChildBoundables=function(){return this._childBoundables},dc.prototype.addChildBoundable=function(t){yl.isTrue(null===this._bounds),this._childBoundables.add(t)},dc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},dc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},dc.prototype.interfaces_=function(){return[uc,ci]},dc.prototype.getClass=function(){return dc},gc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(dc,gc);var mc=function(){};mc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},mc.min=function(t){return mc.sort(t),t.get(0)},mc.sort=function(t,e){var n=t.toArray();e?tu.sort(n,e):tu.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},mc.singletonList=function(t){var e=new zl;return e.add(t),e};var yc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};yc.prototype.expandToQueue=function(t,e){var n=yc.isComposite(this._boundable1),r=yc.isComposite(this._boundable2);if(n&&r)return yc.area(this._boundable1)>yc.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Ds("neither boundable is composite")},yc.prototype.isLeaves=function(){return!(yc.isComposite(this._boundable1)||yc.isComposite(this._boundable2))},yc.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},yc.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new yc(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},yc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},yc.prototype.getDistance=function(){return this._distance},yc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},yc.prototype.interfaces_=function(){return[Fs]},yc.prototype.getClass=function(){return yc},yc.area=function(t){return t.getBounds().getArea()},yc.isComposite=function(t){return t instanceof dc};var _c=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new zl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];yl.isTrue(1<n,"Node capacity must be greater than 1"),this._nodeCapacity=n}},vc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};_c.prototype.getNodeCapacity=function(){return this._nodeCapacity},_c.prototype.lastNode=function(t){return t.get(t.size()-1)},_c.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof dc?t+=this.size(n):n instanceof cc&&(t+=1)}return t}},_c.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof cc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},_c.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new zl:t}if(1===arguments.length){for(var e=arguments[0],n=new zl,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof dc){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof cc?n.add(i.getItem()):yl.shouldNeverReachHere()}return n.size()<=0?null:n}},_c.prototype.insert=function(t,e){yl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new cc(t,e))},_c.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new zl;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(yl.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof dc?this.boundablesAtLevel(n,a,i):(yl.isTrue(a instanceof cc),-1===n&&i.add(a))}return null}},_c.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new zl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Ws(arguments[2],fc)&&arguments[0]instanceof Object&&arguments[1]instanceof dc)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof dc?this.query(i,u,a):u instanceof cc?a.visitItem(u.getItem()):yl.shouldNeverReachHere())}else if(Ws(arguments[2],Bl)&&arguments[0]instanceof Object&&arguments[1]instanceof dc)for(var c=arguments[0],h=arguments[1],f=arguments[2],p=h.getChildBoundables(),d=0;d<p.size();d++){var g=p.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof dc?this.query(c,g,f):g instanceof cc?f.add(g.getItem()):yl.shouldNeverReachHere())}},_c.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},_c.prototype.getRoot=function(){return this.build(),this._root},_c.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof dc&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},_c.prototype.createHigherLevels=function(t,e){yl.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},_c.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof dc){var r=this.depth(n);t<r&&(t=r)}}return t+1}},_c.prototype.createParentBoundables=function(t,e){yl.isTrue(!t.isEmpty());var n=new zl;n.add(this.createNode(e));var r=new zl(t);mc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},_c.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},_c.prototype.interfaces_=function(){return[ci]},_c.prototype.getClass=function(){return _c},_c.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},vc.IntersectsOp.get=function(){return bc},vc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},vc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_c,vc);var bc=function(){},xc=function(){};xc.prototype.distance=function(t,e){},xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var wc=function(u){function y(t){t=t||y.DEFAULT_NODE_CAPACITY,u.call(this,t)}u&&(y.__proto__=u);var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((y.prototype=Object.create(u&&u.prototype)).constructor=y).prototype.createParentBoundablesFromVerticalSlices=function(t,e){yl.isTrue(0<t.length);for(var n=new zl,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},y.prototype.createNode=function(t){return new Lc(t)},y.prototype.size=function(){return 0===arguments.length?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},y.prototype.insert=function(){if(2!==arguments.length)return u.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;u.prototype.insert.call(this,t,e)},y.prototype.getIntersectsOp=function(){return y.intersectsOp},y.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new zl;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},y.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return u.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];u.prototype.query.call(this,e,n)}else if(3===arguments.length)if(Ws(arguments[2],fc)&&arguments[0]instanceof Object&&arguments[1]instanceof dc){var r=arguments[0],i=arguments[1],o=arguments[2];u.prototype.query.call(this,r,i,o)}else if(Ws(arguments[2],Bl)&&arguments[0]instanceof Object&&arguments[1]instanceof dc){var a=arguments[0],s=arguments[1],l=arguments[2];u.prototype.query.call(this,a,s,l)}},y.prototype.getComparator=function(){return y.yComparator},y.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return u.prototype.createParentBoundables.call(this,t,e)},y.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return u.prototype.remove.call(this,t,e)}return u.prototype.remove.apply(this,arguments)},y.prototype.depth=function(){return 0===arguments.length?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},y.prototype.createParentBoundables=function(t,e){yl.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new zl(t);mc.sort(r,y.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)},y.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Ws(arguments[0],xc)){var t=arguments[0],e=new yc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof yc){var n=arguments[0];return this.nearestNeighbour(n,As.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof y&&Ws(arguments[1],xc)){var r=arguments[0],i=arguments[1],o=new yc(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof yc&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=null,u=new hc;for(u.add(a);!u.isEmpty()&&0<s;){var c=u.poll(),h=c.getDistance();if(s<=h)break;c.isLeaves()?(s=h,l=c):c.expandToQueue(u,s)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],p=arguments[1],d=arguments[2],g=new cc(f,p),m=new yc(this.getRoot(),g,d);return this.nearestNeighbour(m)[0]}},y.prototype.interfaces_=function(){return[pc,ci]},y.prototype.getClass=function(){return y},y.centreX=function(t){return y.avg(t.getMinX(),t.getMaxX())},y.avg=function(t,e){return(t+e)/2},y.centreY=function(t){return y.avg(t.getMinY(),t.getMaxY())},t.STRtreeNode.get=function(){return Lc},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[Bs]},compare:function(t,e){return u.compareDoubles(y.centreX(t.getBounds()),y.centreX(e.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[Bs]},compare:function(t,e){return u.compareDoubles(y.centreY(t.getBounds()),y.centreY(e.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(y,t),y}(_c),Lc=function(e){function t(){var t=arguments[0];e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new ll(n.getBounds()):t.expandToInclude(n.getBounds())}return t},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dc),Cc=function(){};Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc},Cc.relativeSign=function(t,e){return t<e?-1:e<t?1:0},Cc.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Cc.relativeSign(e.x,n.x),i=Cc.relativeSign(e.y,n.y);switch(t){case 0:return Cc.compareValue(r,i);case 1:return Cc.compareValue(i,r);case 2:return Cc.compareValue(i,-r);case 3:return Cc.compareValue(-r,i);case 4:return Cc.compareValue(-r,-i);case 5:return Cc.compareValue(-i,-r);case 6:return Cc.compareValue(-i,r);case 7:return Cc.compareValue(r,-i)}return yl.shouldNeverReachHere("invalid octant value"),0},Cc.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0};var kc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new zs(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};kc.prototype.getCoordinate=function(){return this.coord},kc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},kc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Cc.compare(this._segmentOctant,this.coord,e.coord)},kc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},kc.prototype.isInterior=function(){return this._isInterior},kc.prototype.interfaces_=function(){return[Fs]},kc.prototype.getClass=function(){return kc};var Ec=function(){this._nodeMap=new vi,this._edge=null;var t=arguments[0];this._edge=t};Ec.prototype.getSplitCoordinates=function(){var t=new Ul;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Ec.prototype.addCollapsedNodes=function(){var t=new zl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Ec.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ec.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Zs(e+1))}},Ec.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new zs(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new zs(e.coord))},Ec.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ec.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Ec.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Ec.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Zs(e[0])),r=i}},Ec.prototype.getEdge=function(){return this._edge},Ec.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Ec.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new zs(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new zs(e.coord)),new Ic(o,this._edge.getData())},Ec.prototype.add=function(t,e){var n=new kc(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(yl.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Ec.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new gl("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new gl("bad split edge end point at "+i)},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec};var Sc=function(){};Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc},Sc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Ds("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof zs&&arguments[1]instanceof zs){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new Ds("Cannot compute the octant for two identical points "+i);return Sc.octant(a,s)}};var Mc=function(){};Mc.prototype.getCoordinates=function(){},Mc.prototype.size=function(){},Mc.prototype.getCoordinate=function(t){},Mc.prototype.isClosed=function(){},Mc.prototype.setData=function(t){},Mc.prototype.getData=function(){},Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc};var Pc=function(){};Pc.prototype.addIntersection=function(t,e){},Pc.prototype.interfaces_=function(){return[Mc]},Pc.prototype.getClass=function(){return Pc};var Ic=function(){this._nodeList=new Ec(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ic.prototype.getCoordinates=function(){return this._pts},Ic.prototype.size=function(){return this._pts.length},Ic.prototype.getCoordinate=function(t){return this._pts[t]},Ic.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ic.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Ic.prototype.setData=function(t){this._data=t},Ic.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Sc.octant(t,e)},Ic.prototype.getData=function(){return this._data},Ic.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new zs(n.getIntersection(i));this.addIntersection(o,r)}},Ic.prototype.toString=function(){return dl.toLineString(new ku(this._pts))},Ic.prototype.getNodeList=function(){return this._nodeList},Ic.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},Ic.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Ic.prototype.interfaces_=function(){return[Pc]},Ic.prototype.getClass=function(){return Ic},Ic.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new zl;return Ic.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var Tc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new zs,this.p1=new zs;else if(1===arguments.length){var t=arguments[0];this.p0=new zs(t.p0),this.p1=new zs(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new zs(e,n),this.p1=new zs(r,i)}},Oc={serialVersionUID:{configurable:!0}};Tc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Tc.prototype.orientationIndex=function(){if(arguments[0]instanceof Tc){var t=arguments[0],e=Ll.orientationIndex(this.p0,this.p1,t.p0),n=Ll.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof zs){var r=arguments[0];return Ll.orientationIndex(this.p0,this.p1,r)}},Tc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Tc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Tc.prototype.equals=function(t){if(!(t instanceof Tc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Tc.prototype.intersection=function(t){var e=new bl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Tc.prototype.project=function(){if(arguments[0]instanceof zs){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new zs(t);var e=this.projectionFactor(t),n=new zs;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Tc){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),1<i&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),1<o&&(s=this.p1),new Tc(a,s)}},Tc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Tc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Tc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Tc.prototype.distancePerpendicular=function(t){return Ll.distancePointLinePerpendicular(t,this.p0,this.p1)},Tc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Tc.prototype.midPoint=function(){return Tc.midPoint(this.p0,this.p1)},Tc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?As.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Tc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=As.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},Tc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Tc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Tc.prototype.getLength=function(){return this.p0.distance(this.p1)},Tc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Tc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Tc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Tc.prototype.lineIntersection=function(t){try{return sl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof ol))throw t}return null},Tc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Tc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new zs(n-l,r+s)},Tc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Tc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||As.isNaN(e))&&(e=1),e},Tc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Tc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Tc.prototype.distance=function(){if(arguments[0]instanceof Tc){var t=arguments[0];return Ll.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof zs){var e=arguments[0];return Ll.distancePointLine(e,this.p0,this.p1)}},Tc.prototype.pointAlong=function(t){var e=new zs;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Tc.prototype.hashCode=function(){var t=As.doubleToLongBits(this.p0.x);t^=31*As.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=As.doubleToLongBits(this.p1.x);return n^=31*As.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Tc.prototype.interfaces_=function(){return[Fs,ci]},Tc.prototype.getClass=function(){return Tc},Tc.midPoint=function(t,e){return new zs((t.x+e.x)/2,(t.y+e.y)/2)},Oc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Tc,Oc);var Nc=function(){this.tempEnv1=new ll,this.tempEnv2=new ll,this._overlapSeg1=new Tc,this._overlapSeg2=new Tc};Nc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc};var Dc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};Dc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Dc.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},Dc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Dc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Dc.prototype.setId=function(t){this._id=t},Dc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Dc.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new ll(t,e)}return this._env},Dc.prototype.getEndIndex=function(){return this._end},Dc.prototype.getStartIndex=function(){return this._start},Dc.prototype.getContext=function(){return this._context},Dc.prototype.getId=function(){return this._id},Dc.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.getChainStartIndices=function(t){var e=0,n=new zl;n.add(new Zs(e));do{var r=Ac.findChainEnd(t,e);n.add(new Zs(r)),e=r}while(e<t.length-1);return Ac.toIntArray(n)},Ac.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=nc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||nc.quadrant(t[i-1],t[i])===r);)i++;return i-1},Ac.getChains=function(){if(1===arguments.length){var t=arguments[0];return Ac.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new zl,i=Ac.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new Dc(e,i[o],i[o+1],n);r.add(a)}return r}},Ac.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Rc=function(){};Rc.prototype.computeNodes=function(t){},Rc.prototype.getNodedSubstrings=function(){},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Fc=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Fc.prototype.setSegmentIntersector=function(t){this._segInt=t},Fc.prototype.interfaces_=function(){return[Rc]},Fc.prototype.getClass=function(){return Fc};var jc=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new zl,this._index=new wc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e);var n={SegmentOverlapAction:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Ic.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(t){for(var e=Ac.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var t=new Bc(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return Bc},Object.defineProperties(t,n),t}(Fc),Bc=function(a){function t(){a.call(this),this._si=null;var t=arguments[0];this._si=t}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.overlap=function(){if(4!==arguments.length)return a.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],i=t.getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nc),zc=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},qc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};zc.prototype.getEndCapStyle=function(){return this._endCapStyle},zc.prototype.isSingleSided=function(){return this._isSingleSided},zc.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=zc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=zc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==zc.JOIN_ROUND&&(this._quadrantSegments=zc.DEFAULT_QUADRANT_SEGMENTS)},zc.prototype.getJoinStyle=function(){return this._joinStyle},zc.prototype.setJoinStyle=function(t){this._joinStyle=t},zc.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},zc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},zc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},zc.prototype.setEndCapStyle=function(t){this._endCapStyle=t},zc.prototype.getMitreLimit=function(){return this._mitreLimit},zc.prototype.setMitreLimit=function(t){this._mitreLimit=t},zc.prototype.setSingleSided=function(t){this._isSingleSided=t},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc},zc.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},qc.CAP_ROUND.get=function(){return 1},qc.CAP_FLAT.get=function(){return 2},qc.CAP_SQUARE.get=function(){return 3},qc.JOIN_ROUND.get=function(){return 1},qc.JOIN_MITRE.get=function(){return 2},qc.JOIN_BEVEL.get=function(){return 3},qc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},qc.DEFAULT_MITRE_LIMIT.get=function(){return 5},qc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(zc,qc);var Uc=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ll.COUNTERCLOCKWISE,this._inputLine=t||null},Gc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Uc.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Uc.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Uc.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Uc.prototype.isShallowConcavity=function(t,e,n,r){return Ll.computeOrientation(t,e,n)===this._angleOrientation&&Ll.distancePointLine(e,t,n)<r},Uc.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Uc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Uc.prototype.isConcave=function(t,e,n){return Ll.computeOrientation(t,e,n)===this._angleOrientation},Uc.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Ll.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},Uc.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Uc.DELETE;)e++;return e},Uc.prototype.isShallow=function(t,e,n,r){return Ll.distancePointLine(e,t,n)<r},Uc.prototype.collapseLine=function(){for(var t=new Ul,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Uc.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.simplify=function(t,e){return new Uc(t).simplify(e)},Gc.INIT.get=function(){return 0},Gc.DELETE.get=function(){return 1},Gc.KEEP.get=function(){return 1},Gc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Uc,Gc);var Vc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new zl},Hc={COORDINATE_ARRAY_TYPE:{configurable:!0}};Vc.prototype.getCoordinates=function(){return this._ptList.toArray(Vc.COORDINATE_ARRAY_TYPE)},Vc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Vc.prototype.addPt=function(t){var e=new zs(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Vc.prototype.revere=function(){},Vc.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},Vc.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Vc.prototype.toString=function(){return(new Du).createLineString(this.getCoordinates()).toString()},Vc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new zs(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Vc.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc},Hc.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Vc,Hc);var Wc=function(){},Xc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.toDegrees=function(t){return 180*t/Math.PI},Wc.normalize=function(t){for(;t>Math.PI;)t-=Wc.PI_TIMES_2;for(;t<=-Math.PI;)t+=Wc.PI_TIMES_2;return t},Wc.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Wc.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},Wc.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Wc.interiorAngle=function(t,e,n){var r=Wc.angle(e,t),i=Wc.angle(e,n);return Math.abs(i-r)},Wc.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Wc.PI_TIMES_2;Wc.PI_TIMES_2<=t&&(t=0)}else{for(;Wc.PI_TIMES_2<=t;)t-=Wc.PI_TIMES_2;t<0&&(t=0)}return t},Wc.angleBetween=function(t,e,n){var r=Wc.angle(e,t),i=Wc.angle(e,n);return Wc.diff(r,i)},Wc.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Wc.toRadians=function(t){return t*Math.PI/180},Wc.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?Wc.COUNTERCLOCKWISE:n<0?Wc.CLOCKWISE:Wc.NONE},Wc.angleBetweenOriented=function(t,e,n){var r=Wc.angle(e,t),i=Wc.angle(e,n)-r;return i<=-Math.PI?i+Wc.PI_TIMES_2:i>Math.PI?i-Wc.PI_TIMES_2:i},Xc.PI_TIMES_2.get=function(){return 2*Math.PI},Xc.PI_OVER_2.get=function(){return Math.PI/2},Xc.PI_OVER_4.get=function(){return Math.PI/4},Xc.COUNTERCLOCKWISE.get=function(){return Ll.COUNTERCLOCKWISE},Xc.CLOCKWISE.get=function(){return Ll.CLOCKWISE},Xc.NONE.get=function(){return Ll.COLLINEAR},Object.defineProperties(Wc,Xc);var Yc=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Tc,this._seg1=new Tc,this._offset0=new Tc,this._offset1=new Tc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new bl,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===zc.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},$c={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Yc.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Ll.computeOrientation(this._s0,this._s1,this._s2),r=n===Ll.CLOCKWISE&&this._side===Uu.LEFT||n===Ll.COUNTERCLOCKWISE&&this._side===Uu.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Yc.prototype.addLineEndCap=function(t,e){var n=new Tc(t,e),r=new Tc;this.computeOffsetSegment(n,Uu.LEFT,this._distance,r);var i=new Tc;this.computeOffsetSegment(n,Uu.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case zc.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,Ll.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case zc.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case zc.CAP_SQUARE:var l=new zs;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new zs(r.p1.x+l.x,r.p1.y+l.y),c=new zs(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Yc.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Yc.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=sl.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof ol))throw t;o=new zs(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Yc.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===Ll.CLOCKWISE?s<=c&&(s+=2*Math.PI):c<=s&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Yc.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Yc.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===zc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===zc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Yc.prototype.createSquare=function(t){this._segList.addPt(new zs(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new zs(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new zs(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new zs(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Yc.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Yc.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Yc.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Yc.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Yc.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Wc.angle(i,this._seg0.p0),a=Wc.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Wc.normalize(o+a),l=Wc.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),f=i.y+u*Math.sin(l),p=new zs(h,f),d=new Tc(i,p),g=d.pointAlongOffset(1,c),m=d.pointAlongOffset(1,-c);this._side===Uu.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Yc.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Uu.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Yc.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Ll.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new zs;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Yc.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Yc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor){var n=new zs((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new zs((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Yc.prototype.createCircle=function(t){var e=new zs(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Yc.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Yc.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Vc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Yc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Yc.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===zc.JOIN_BEVEL||this._bufParams.getJoinStyle()===zc.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Ll.CLOCKWISE,this._distance))},Yc.prototype.closeRing=function(){this._segList.closeRing()},Yc.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},$c.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},$c.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},$c.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},$c.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Yc,$c);var Zc=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Zc.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Gl.reverse(o),o},Zc.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Uc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Uu.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Uc.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Uu.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Zc.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Uu.RIGHT&&(r=-r);var i=Uc.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Zc.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Uc.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Uu.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Uc.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Uu.LEFT);for(var l=s-2;0<=l;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Zc.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case zc.CAP_ROUND:e.createCircle(t);break;case zc.CAP_SQUARE:e.createSquare(t)}},Zc.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Zc.prototype.getBufferParameters=function(){return this._bufParams},Zc.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Zc.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Zc.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Zc.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Uc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Uu.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{var s=Uc.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Uu.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Zc.prototype.getSegGen=function(t){return new Yc(this._precisionModel,this._bufParams,t)},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new zs(t[n]);return e};var Qc=function(){this._subgraphs=null,this._seg=new Tc,this._cga=new Ll;var t=arguments[0];this._subgraphs=t},Kc={DepthSegment:{configurable:!0}};Qc.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new zl,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Ws(arguments[2],Bl)&&arguments[0]instanceof zs&&arguments[1]instanceof oc){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Ll.computeOrientation(this._seg.p0,this._seg.p1,o)===Ll.RIGHT)){var c=a.getDepth(Uu.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Uu.RIGHT));var h=new Jc(this._seg,c);s.add(h)}}else if(Ws(arguments[2],Bl)&&arguments[0]instanceof zs&&Ws(arguments[1],Bl))for(var f=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(f,m,d)}},Qc.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:mc.min(e)._leftDepth},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},Kc.DepthSegment.get=function(){return Jc},Object.defineProperties(Qc,Kc);var Jc=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Tc(t),this._leftDepth=e};Jc.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Jc.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Jc.prototype.toString=function(){return this._upwardSeg.toString()},Jc.prototype.interfaces_=function(){return[Fs]},Jc.prototype.getClass=function(){return Jc};var th=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};th.prototype.area=function(){return th.area(this.p0,this.p1,this.p2)},th.prototype.signedArea=function(){return th.signedArea(this.p0,this.p1,this.p2)},th.prototype.interpolateZ=function(t){if(null===t)throw new Ds("Supplied point is null.");return th.interpolateZ(t,this.p0,this.p1,this.p2)},th.prototype.longestSideLength=function(){return th.longestSideLength(this.p0,this.p1,this.p2)},th.prototype.isAcute=function(){return th.isAcute(this.p0,this.p1,this.p2)},th.prototype.circumcentre=function(){return th.circumcentre(this.p0,this.p1,this.p2)},th.prototype.area3D=function(){return th.area3D(this.p0,this.p1,this.p2)},th.prototype.centroid=function(){return th.centroid(this.p0,this.p1,this.p2)},th.prototype.inCentre=function(){return th.inCentre(this.p0,this.p1,this.p2)},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},th.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},th.det=function(t,e,n,r){return t*r-e*n},th.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,f=t.y-o,p=(u*h-s*f)/c,d=(-l*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},th.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return a<i&&(a=i),a<o&&(a=o),a},th.isAcute=function(t,e,n){return!!Wc.isAcute(t,e,n)&&!!Wc.isAcute(e,n,t)&&!!Wc.isAcute(n,t,e)},th.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*th.det(o,a,s,l),c=th.det(a,o*o+a*a,l,s*s+l*l),h=th.det(o,o*o+a*a,s,s*s+l*l);return new zs(r-c/u,i+h/u)},th.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new sl(t.x+n/2,t.y+r/2,1),o=new sl(t.x-r+n/2,t.y+n+r/2,1);return new sl(i,o)},th.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new zs(t.x+i*o,t.y+i*a)},th.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=u*u+c*c+h*h;return Math.sqrt(f)/2},th.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new zs(r,i)},th.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new zs(s,l)};var eh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new zl;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};eh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Vs.EXTERIOR,Vs.INTERIOR)},eh.prototype.addPolygon=function(t){var e=this._distance,n=Uu.LEFT;this._distance<0&&(e=-this._distance,n=Uu.RIGHT);var r=t.getExteriorRing(),i=Gl.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Vs.EXTERIOR,Vs.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Gl.removeRepeatedPoints(a.getCoordinates());0<this._distance&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Uu.opposite(n),Vs.INTERIOR,Vs.EXTERIOR)}},eh.prototype.isTriangleErodedCompletely=function(t,e){var n=new th(t[0],t[1],t[2]),r=n.inCentre();return Ll.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},eh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Gl.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Vs.EXTERIOR,Vs.INTERIOR)},eh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Ic(t,new $u(0,Vs.BOUNDARY,e,n));this._curveList.add(r)},eh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},eh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<_u.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=_u.MINIMUM_VALID_SIZE&&Ll.isCCW(t)&&(o=i,a=r,n=Uu.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},eh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof mu?this.addPolygon(t):t instanceof fu?this.addLineString(t):t instanceof du?this.addPoint(t):t instanceof yu?this.addCollection(t):t instanceof au?this.addCollection(t):t instanceof vu?this.addCollection(t):t instanceof ou&&this.addCollection(t)},eh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},eh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh};var nh=function(){};nh.prototype.locate=function(t){},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh};var rh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};rh.prototype.next=function(){if(this._atStart)return this._atStart=!1,rh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new hi;var t=this._parent.getGeometryN(this._index++);return t instanceof ou?(this._subcollectionIterator=new rh(t),this._subcollectionIterator.next()):t},rh.prototype.remove=function(){throw new Error(this.getClass().getName())},rh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},rh.prototype.interfaces_=function(){return[jl]},rh.prototype.getClass=function(){return rh},rh.isAtomic=function(t){return!(t instanceof ou)};var ih=function(){this._geom=null;var t=arguments[0];this._geom=t};ih.prototype.locate=function(t){return ih.locate(t,this._geom)},ih.prototype.interfaces_=function(){return[nh]},ih.prototype.getClass=function(){return ih},ih.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Ll.isPointInRing(t,e.getCoordinates())},ih.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!ih.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(ih.isPointInRing(t,i))return!1}return!0},ih.containsPoint=function(t,e){if(e instanceof mu)return ih.containsPointInPolygon(t,e);if(e instanceof ou)for(var n=new rh(e);n.hasNext();){var r=n.next();if(r!==e&&ih.containsPoint(t,r))return!0}return!1},ih.locate=function(t,e){return e.isEmpty()?Vs.EXTERIOR:ih.containsPoint(t,e)?Vs.INTERIOR:Vs.EXTERIOR};var oh=function(){this._edgeMap=new vi,this._edgeList=null,this._ptInAreaLocation=[Vs.NONE,Vs.NONE]};oh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},oh.prototype.propagateSideLabels=function(t){for(var e=Vs.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Uu.LEFT)!==Vs.NONE&&(e=r.getLocation(t,Uu.LEFT))}if(e===Vs.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Uu.ON)===Vs.NONE&&s.setLocation(t,Uu.ON,i),s.isArea(t)){var l=s.getLocation(t,Uu.LEFT),u=s.getLocation(t,Uu.RIGHT);if(u!==Vs.NONE){if(u!==i)throw new Hu("side location conflict",a.getCoordinate());l===Vs.NONE&&yl.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else yl.isTrue(s.getLocation(t,Uu.LEFT)===Vs.NONE,"found single null side"),s.setLocation(t,Uu.RIGHT,i),s.setLocation(t,Uu.LEFT,i)}}},oh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},oh.prototype.print=function(t){al.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},oh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},oh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Uu.LEFT);yl.isTrue(r!==Vs.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();yl.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Uu.LEFT),l=a.getLocation(t,Uu.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},oh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},oh.prototype.iterator=function(){return this.getEdges().iterator()},oh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new zl(this._edgeMap.values())),this._edgeList},oh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Vs.NONE&&(this._ptInAreaLocation[t]=ih.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},oh.prototype.toString=function(){var t=new $s;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},oh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},oh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Vs.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=Vs.NONE;if(e[l])u=Vs.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},oh.prototype.getDegree=function(){return this._edgeMap.size()},oh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var ah=function(o){function t(){o.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Hu("no outgoing dirEdge found",this.getCoordinate());yl.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},t.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},t.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return nc.isNorthern(i)&&nc.isNorthern(o)?n:nc.isNorthern(i)||nc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(yl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},t.prototype.print=function(t){al.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},t.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new zl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},t.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Uu.LEFT),r=t.getDepth(Uu.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Hu("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=o;l<a;l++){var u=this._edgeList.get(l);u.setEdgeDepths(Uu.RIGHT,s),s=u.getDepth(Uu.LEFT)}return s}},t.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(yl.isTrue(null!==e,"found null for first outgoing dirEdge"),yl.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},t.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var t=Vs.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Vs.INTERIOR;break}if(r.isInResult()){t=Vs.EXTERIOR;break}}}if(t===Vs.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Vs.INTERIOR):(a.isInResult()&&(i=Vs.EXTERIOR),s.isInResult()&&(i=Vs.INTERIOR))}},t.prototype.computeLabelling=function(t){o.prototype.computeLabelling.call(this,t),this._label=new $u(Vs.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==Vs.INTERIOR&&i!==Vs.BOUNDARY||this._label.setLocation(r,Vs.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(oh),sh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createNode=function(t){return new tc(t,new ah)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ac),lh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};lh.prototype.compareTo=function(t){var e=t;return lh.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},lh.prototype.interfaces_=function(){return[Fs]},lh.prototype.getClass=function(){return lh},lh.orientation=function(t){return 1===Gl.increasingDirection(t)},lh.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var uh=function(){this._edges=new zl,this._ocaMap=new vi};uh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},uh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},uh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},uh.prototype.iterator=function(){return this._edges.iterator()},uh.prototype.getEdges=function(){return this._edges},uh.prototype.get=function(t){return this._edges.get(t)},uh.prototype.findEqualEdge=function(t){var e=new lh(t.getCoordinates());return this._ocaMap.get(e)},uh.prototype.add=function(t){this._edges.add(t);var e=new lh(t.getCoordinates());this._ocaMap.put(e,t)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var ch=function(){};ch.prototype.processIntersections=function(t,e,n,r){},ch.prototype.isDone=function(){},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var t=arguments[this.numTests=0];this._li=t};hh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(hh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},hh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},hh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},hh.prototype.getLineIntersector=function(){return this._li},hh.prototype.hasProperIntersection=function(){return this._hasProper},hh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},hh.prototype.hasIntersection=function(){return this._hasIntersection},hh.prototype.isDone=function(){return!1},hh.prototype.hasInteriorIntersection=function(){return this._hasInterior},hh.prototype.interfaces_=function(){return[ch]},hh.prototype.getClass=function(){return hh},hh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new zs(t),this.segmentIndex=e,this.dist=n};fh.prototype.getSegmentIndex=function(){return this.segmentIndex},fh.prototype.getCoordinate=function(){return this.coord},fh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},fh.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},fh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},fh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},fh.prototype.getDistance=function(){return this.dist},fh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},fh.prototype.interfaces_=function(){return[Fs]},fh.prototype.getClass=function(){return fh};var ph=function(){this._nodeMap=new vi,this.edge=null;var t=arguments[0];this.edge=t};ph.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ph.prototype.iterator=function(){return this._nodeMap.values().iterator()},ph.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ph.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},ph.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new zs(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new _h(o,new $u(this.edge._label))},ph.prototype.add=function(t,e,n){var r=new fh(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},ph.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph};var dh=function(){};dh.prototype.getChainStartIndices=function(t){var e=0,n=new zl;n.add(new Zs(e));do{var r=this.findChainEnd(t,e);n.add(new Zs(r)),e=r}while(e<t.length-1);return dh.toIntArray(n)},dh.prototype.findChainEnd=function(t,e){for(var n=nc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&nc.quadrant(t[r-1],t[r])===n;)r++;return r-1},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh},dh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var gh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ll,this.env2=new ll;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new dh;this.startIndex=e.getChainStartIndices(this.pts)};gh.prototype.getCoordinates=function(){return this.pts},gh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},gh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},gh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+l)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,u),g<l&&this.computeIntersectsForChain(i,d,a,g,l,u)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,u),g<l&&this.computeIntersectsForChain(d,o,a,g,l,u))}},gh.prototype.getStartIndexes=function(){return this.startIndex},gh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh};var mh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},yh={NULL_VALUE:{configurable:!0}};mh.prototype.getDepth=function(t,e){return this._depth[t][e]},mh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},mh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==mh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===mh.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===mh.NULL_VALUE}},mh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},mh.prototype.getDelta=function(t){return this._depth[t][Uu.RIGHT]-this._depth[t][Uu.LEFT]},mh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Vs.EXTERIOR:Vs.INTERIOR},mh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},mh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Vs.EXTERIOR&&r!==Vs.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=mh.depthAtLocation(r):this._depth[e][n]+=mh.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Vs.INTERIOR&&this._depth[i][o]++}},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.depthAtLocation=function(t){return t===Vs.EXTERIOR?0:t===Vs.INTERIOR?1:mh.NULL_VALUE},yh.NULL_VALUE.get=function(){return-1},Object.defineProperties(mh,yh);var _h=function(r){function a(){if(r.call(this),this.pts=null,this._env=null,this.eiList=new ph(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new mh,this._depthDelta=0,1===arguments.length){var t=arguments[0];a.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}return r&&(a.__proto__=r),((a.prototype=Object.create(r&&r.prototype)).constructor=a).prototype.getDepth=function(){return this._depth},a.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new a(t,$u.toLineLabel(this._label))},a.prototype.isIsolated=function(){return this._isIsolated},a.prototype.getCoordinates=function(){return this.pts},a.prototype.setIsolated=function(t){this._isIsolated=t},a.prototype.setName=function(t){this._name=t},a.prototype.equals=function(t){if(!(t instanceof a))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},a.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},a.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},a.prototype.computeIM=function(t){a.updateIM(this._label,t)},a.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},a.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},a.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},a.prototype.getDepthDelta=function(){return this._depthDelta},a.prototype.getNumPoints=function(){return this.pts.length},a.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},a.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new gh(this)),this._mce},a.prototype.getEnvelope=function(){if(null===this._env){this._env=new ll;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},a.prototype.addIntersection=function(t,e,n,r){var i=new zs(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},a.prototype.toString=function(){var t=new $s;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},a.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},a.prototype.setDepthDelta=function(t){this._depthDelta=t},a.prototype.getEdgeIntersectionList=function(){return this.eiList},a.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},a.prototype.interfaces_=function(){return[]},a.prototype.getClass=function(){return a},a.updateIM=function(){if(2!==arguments.length)return r.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Uu.ON),t.getLocation(1,Uu.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Uu.LEFT),t.getLocation(1,Uu.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Uu.RIGHT),t.getLocation(1,Uu.RIGHT),2))},a}(Ju),vh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new uh,this._bufParams=t||null};vh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},vh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $u(t.getLabel())).flip(),n.merge(r);var i=vh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(vh.depthDelta(t.getLabel()))},vh.prototype.buildSubgraphs=function(t,e){for(var n=new zl,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Qc(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},vh.prototype.createSubgraphs=function(t){for(var e=new zl,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Xu;i.create(r),e.add(i)}}return mc.sort(e,mc.reverseOrder()),e},vh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},vh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new jc,n=new bl;return n.setPrecisionModel(t),e.setSegmentIntersector(new hh(n)),e},vh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Zc(n,this._bufParams),i=new eh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new sc(new sh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new lc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},vh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new _h(i.getCoordinates(),new $u(a));this.insertUniqueEdge(s)}}},vh.prototype.setNoder=function(t){this._workingNoder=t},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.depthDelta=function(t){var e=t.getLocation(0,Uu.LEFT),n=t.getLocation(0,Uu.RIGHT);return e===Vs.INTERIOR&&n===Vs.EXTERIOR?1:e===Vs.EXTERIOR&&n===Vs.INTERIOR?-1:0},vh.convertSegStrings=function(t){for(var e=new Du,n=new zl;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var bh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};bh.prototype.rescale=function(){if(Ws(arguments[0],Rl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&al.out.println(n)}},bh.prototype.scale=function(){if(Ws(arguments[0],Rl)){for(var t=arguments[0],e=new zl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ic(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new zs(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Gl.removeRepeatedPoints(o)}},bh.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},bh.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},bh.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},bh.prototype.interfaces_=function(){return[Rc]},bh.prototype.getClass=function(){return bh};var xh=function(){this._li=new bl,this._segStrings=null;var t=arguments[0];this._segStrings=t},wh={fact:{configurable:!0}};xh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new gl("found endpt/interior pt intersection at index "+o+" :pt "+n)},xh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],m=f.getCoordinates()[p],y=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,y)))throw new gl("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+y)}},xh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},xh.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},xh.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},xh.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new gl("found non-noded collapse at "+xh.fact.createLineString([t,e,n]))},xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh},wh.fact.get=function(){return new Du},Object.defineProperties(xh,wh);var Lh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Ds("Scale factor must be non-zero");1!==e&&(this._pt=new zs(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new zs,this._p1Scaled=new zs),this.initCorners(this._pt)},Ch={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Lh.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return yl.isTrue(!(a&&s),"Found bad envelope test"),s},Lh.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new zs(this._maxx,this._maxy),this._corner[1]=new zs(this._minx,this._maxy),this._corner[2]=new zs(this._minx,this._miny),this._corner[3]=new zs(this._maxx,this._miny)},Lh.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Lh.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Lh.prototype.getCoordinate=function(){return this._originalPt},Lh.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Lh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Lh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ll(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Lh.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Lh.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Lh.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Ch.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Lh,Ch);var kh=function(){this.tempEnv1=new ll,this.selectedSegment=new Tc};kh.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Eh=function(){this._index=null;var t=arguments[0];this._index=t},Sh={HotPixelSnapAction:{configurable:!0}};Eh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Mh(e,n,r);return this._index.query(i,{interfaces_:function(){return[fc]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Sh.HotPixelSnapAction.get=function(){return Mh},Object.defineProperties(Eh,Sh);var Mh=function(r){function t(){r.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return r.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(kh),Ph=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new zl};Ph.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Ph.prototype.isDone=function(){return!1},Ph.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Ph.prototype.interfaces_=function(){return[ch]},Ph.prototype.getClass=function(){return Ph};var Ih=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new bl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Ih.prototype.checkCorrectness=function(t){var e=Ic.getNodedSubstrings(t),n=new xh(e);try{n.checkValid()}catch(t){if(!(t instanceof il))throw t;t.printStackTrace()}},Ih.prototype.getNodedSubstrings=function(){return Ic.getNodedSubstrings(this._nodedSegStrings)},Ih.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Ih.prototype.findInteriorIntersections=function(t,e){var n=new Ph(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Ih.prototype.computeVertexSnaps=function(){if(Ws(arguments[0],Rl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Ic)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Lh(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},Ih.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new jc,this._pointSnapper=new Eh(this._noder.getIndex()),this.snapRound(t,this._li)},Ih.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Lh(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},Ih.prototype.interfaces_=function(){return[Rc]},Ih.prototype.getClass=function(){return Ih};var Th=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new zc,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Oh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Th.prototype.bufferFixedPrecision=function(t){var e=new bh(new Ih(new Iu(1)),t.getScale()),n=new vh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Th.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Th.MAX_PRECISION_DIGITS;0<=e;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Hu))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Th.precisionScaleFactor(this._argGeom,this._distance,n),i=new Iu(r);this.bufferFixedPrecision(i)}},Th.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Iu.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Th.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Th.prototype.bufferOriginalPrecision=function(){try{var t=new vh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof gl))throw t;this._saveException=t}},Th.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Th.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},Th.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Th(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof El&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Th(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof zc&&arguments[0]instanceof El&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=arguments[2];return new Th(a,l).getResultGeometry(s)}}else if(4===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2],f=arguments[3],p=new Th(u);return p.setQuadrantSegments(h),p.setEndCapStyle(f),p.getResultGeometry(c)}},Th.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Xs.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Oh.CAP_ROUND.get=function(){return zc.CAP_ROUND},Oh.CAP_BUTT.get=function(){return zc.CAP_FLAT},Oh.CAP_FLAT.get=function(){return zc.CAP_FLAT},Oh.CAP_SQUARE.get=function(){return zc.CAP_SQUARE},Oh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Th,Oh);var Nh=function(){this._pt=[new zs,new zs],this._distance=As.NaN,this._isNull=!0};Nh.prototype.getCoordinates=function(){return this._pt},Nh.prototype.getCoordinate=function(t){return this._pt[t]},Nh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Nh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Nh.prototype.getDistance=function(){return this._distance},Nh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh};var Dh=function(){};Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.computeDistance=function(){if(arguments[2]instanceof Nh&&arguments[0]instanceof fu&&arguments[1]instanceof zs)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new Tc,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Nh&&arguments[0]instanceof mu&&arguments[1]instanceof zs){var s=arguments[0],l=arguments[1],u=arguments[2];Dh.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Dh.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Nh&&arguments[0]instanceof El&&arguments[1]instanceof zs){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof fu)Dh.computeDistance(h,f,p);else if(h instanceof mu)Dh.computeDistance(h,f,p);else if(h instanceof ou)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Dh.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Nh&&arguments[0]instanceof Tc&&arguments[1]instanceof zs){var y=arguments[0],_=arguments[1],v=arguments[2],b=y.closestPoint(_);v.setMinimum(b,_)}};var Ah=function(t){this._maxPtDist=new Nh,this._inputGeom=t||null},Rh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ah.prototype.computeMaxMidpointDistance=function(t){var e=new jh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ah.prototype.computeMaxVertexDistance=function(t){var e=new Fh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ah.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ah.prototype.getDistancePoints=function(){return this._maxPtDist},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Rh.MaxPointDistanceFilter.get=function(){return Fh},Rh.MaxMidpointDistanceFilter.get=function(){return jh},Object.defineProperties(Ah,Rh);var Fh=function(t){this._maxPtDist=new Nh,this._minPtDist=new Nh,this._geom=t||null};Fh.prototype.filter=function(t){this._minPtDist.initialize(),Dh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Fh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fh.prototype.interfaces_=function(){return[Pl]},Fh.prototype.getClass=function(){return Fh};var jh=function(t){this._maxPtDist=new Nh,this._minPtDist=new Nh,this._geom=t||null};jh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new zs((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Dh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},jh.prototype.isDone=function(){return!1},jh.prototype.isGeometryChanged=function(){return!1},jh.prototype.getMaxPointDistance=function(){return this._maxPtDist},jh.prototype.interfaces_=function(){return[iu]},jh.prototype.getClass=function(){return jh};var Bh=function(t){this._comps=t||null};Bh.prototype.filter=function(t){t instanceof mu&&this._comps.add(t)},Bh.prototype.interfaces_=function(){return[ru]},Bh.prototype.getClass=function(){return Bh},Bh.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Bh.getPolygons(t,new zl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof mu?n.add(e):e instanceof ou&&e.apply(new Bh(n)),n}};var zh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};zh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof _u){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof fu&&this._lines.add(t)},zh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},zh.prototype.interfaces_=function(){return[kl]},zh.prototype.getClass=function(){return zh},zh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(zh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(zh.getLines(e,n))}},zh.getLines=function(){if(1===arguments.length){var t=arguments[0];return zh.getLines(t,!1)}if(2===arguments.length){if(Ws(arguments[0],Rl)&&Ws(arguments[1],Rl)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();zh.getLines(i,n)}return n}if(arguments[0]instanceof El&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new zl;return o.apply(new zh(s,a)),s}if(arguments[0]instanceof El&&Ws(arguments[1],Rl)){var l=arguments[0],u=arguments[1];return l instanceof fu?u.add(l):l.apply(new zh(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Ws(arguments[0],Rl)&&Ws(arguments[1],Rl)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();zh.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof El&&Ws(arguments[1],Rl)){var g=arguments[0],m=arguments[1],y=arguments[2];return g.apply(new zh(m,y)),m}}};var qh=function(){if(this._boundaryRule=Il.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Ds("Rule must be non-null");this._boundaryRule=t}};qh.prototype.locateInternal=function(){if(arguments[0]instanceof zs&&arguments[1]instanceof mu){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Vs.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Vs.EXTERIOR)return Vs.EXTERIOR;if(r===Vs.BOUNDARY)return Vs.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===Vs.INTERIOR)return Vs.EXTERIOR;if(a===Vs.BOUNDARY)return Vs.BOUNDARY}return Vs.INTERIOR}if(arguments[0]instanceof zs&&arguments[1]instanceof fu){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return Vs.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?Ll.isOnLine(s,u)?Vs.INTERIOR:Vs.EXTERIOR:Vs.BOUNDARY}if(arguments[0]instanceof zs&&arguments[1]instanceof du){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Vs.INTERIOR:Vs.EXTERIOR}},qh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Ll.locatePointInRing(t,e.getCoordinates()):Vs.EXTERIOR},qh.prototype.intersects=function(t,e){return this.locate(t,e)!==Vs.EXTERIOR},qh.prototype.updateLocationInfo=function(t){t===Vs.INTERIOR&&(this._isIn=!0),t===Vs.BOUNDARY&&this._numBoundaries++},qh.prototype.computeLocation=function(t,e){if(e instanceof du&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof fu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof mu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof au)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof vu)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ou)for(var l=new rh(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},qh.prototype.locate=function(t,e){return e.isEmpty()?Vs.EXTERIOR:e instanceof fu?this.locateInternal(t,e):e instanceof mu?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Vs.BOUNDARY:0<this._numBoundaries||this._isIn?Vs.INTERIOR:Vs.EXTERIOR)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Uh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Gh={INSIDE_AREA:{configurable:!0}};Uh.prototype.isInsideArea=function(){return this._segIndex===Uh.INSIDE_AREA},Uh.prototype.getCoordinate=function(){return this._pt},Uh.prototype.getGeometryComponent=function(){return this._component},Uh.prototype.getSegmentIndex=function(){return this._segIndex},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Gh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Uh,Gh);var Vh=function(t){this._pts=t||null};Vh.prototype.filter=function(t){t instanceof du&&this._pts.add(t)},Vh.prototype.interfaces_=function(){return[ru]},Vh.prototype.getClass=function(){return Vh},Vh.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof du?mc.singletonList(t):Vh.getPoints(t,new zl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof du?n.add(e):e instanceof ou&&e.apply(new Vh(n)),n}};var Hh=function(){this._locations=null;var t=arguments[0];this._locations=t};Hh.prototype.filter=function(t){(t instanceof du||t instanceof fu||t instanceof mu)&&this._locations.add(new Uh(t,0,t.getCoordinate()))},Hh.prototype.interfaces_=function(){return[ru]},Hh.prototype.getClass=function(){return Hh},Hh.getLocations=function(t){var e=new zl;return t.apply(new Hh(e)),e};var Wh=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new qh,this._minDistanceLocation=null,this._minDistance=As.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Wh.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Bh.getPolygons(this._geom[e]);if(0<i.size()){var o=Hh.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Ws(arguments[0],Bl)&&Ws(arguments[1],Bl)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Uh&&arguments[1]instanceof mu){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(Vs.EXTERIOR!==this._ptLocator.locate(g,p))return d[this._minDistance=0]=f,d[1]=new Uh(p,g),null}},Wh.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Wh.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=zh.getLines(this._geom[0]),n=zh.getLines(this._geom[1]),r=Vh.getPoints(this._geom[0]),i=Vh.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Wh.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Wh.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Wh.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Wh.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof fu&&arguments[1]instanceof du){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=Ll.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new Tc(r[o],r[o+1]).closestPoint(i);n[0]=new Uh(t,o,s),n[1]=new Uh(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof fu&&arguments[1]instanceof fu){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),f=u.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var g=Ll.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new Tc(h[p],h[p+1]),y=new Tc(f[d],f[d+1]),_=m.closestPoints(y);c[0]=new Uh(l,p,_[0]),c[1]=new Uh(u,d,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},Wh.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Uh(i,0,i.getCoordinate()),n[1]=new Uh(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Wh.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Ds("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Wh.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Wh.distance=function(t,e){return new Wh(t,e).distance()},Wh.isWithinDistance=function(t,e,n){return new Wh(t,e,n).distance()<=n},Wh.nearestPoints=function(t,e){return new Wh(t,e).nearestPoints()};var Xh=function(){this._pt=[new zs,new zs],this._distance=As.NaN,this._isNull=!0};Xh.prototype.getCoordinates=function(){return this._pt},Xh.prototype.getCoordinate=function(t){return this._pt[t]},Xh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Xh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Xh.prototype.toString=function(){return dl.toLineString(this._pt[0],this._pt[1])},Xh.prototype.getDistance=function(){return this._distance},Xh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Yh=function(){};Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Yh.computeDistance=function(){if(arguments[2]instanceof Xh&&arguments[0]instanceof fu&&arguments[1]instanceof zs)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Tc,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Xh&&arguments[0]instanceof mu&&arguments[1]instanceof zs){var s=arguments[0],l=arguments[1],u=arguments[2];Yh.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Yh.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Xh&&arguments[0]instanceof El&&arguments[1]instanceof zs){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof fu)Yh.computeDistance(h,f,p);else if(h instanceof mu)Yh.computeDistance(h,f,p);else if(h instanceof ou)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Yh.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Xh&&arguments[0]instanceof Tc&&arguments[1]instanceof zs){var y=arguments[0],_=arguments[1],v=arguments[2],b=y.closestPoint(_);v.setMinimum(b,_)}};var $h=function(){this._g0=null,this._g1=null,this._ptDist=new Xh;var t=arguments[this._densifyFrac=0],e=arguments[1];this._g0=t,this._g1=e},Zh={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};$h.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},$h.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new Ds("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},$h.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},$h.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},$h.prototype.computeOrientedDistance=function(t,e,n){var r=new Qh(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac){var i=new Kh(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},$h.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},$h.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new $h(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new $h(n,r);return o.setDensifyFraction(i),o.distance()}},Zh.MaxPointDistanceFilter.get=function(){return Qh},Zh.MaxDensifiedByFractionDistanceFilter.get=function(){return Kh},Object.defineProperties($h,Zh);var Qh=function(){this._maxPtDist=new Xh,this._minPtDist=new Xh,this._euclideanDist=new Yh,this._geom=null;var t=arguments[0];this._geom=t};Qh.prototype.filter=function(t){this._minPtDist.initialize(),Yh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Qh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Qh.prototype.interfaces_=function(){return[Pl]},Qh.prototype.getClass=function(){return Qh};var Kh=function(){this._maxPtDist=new Xh,this._minPtDist=new Xh,this._geom=null;var t=arguments[this._numSubSegs=0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Kh.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,u=new zs(s,l);this._minPtDist.initialize(),Yh.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Kh.prototype.isDone=function(){return!1},Kh.prototype.isGeometryChanged=function(){return!1},Kh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Kh.prototype.interfaces_=function(){return[iu]},Kh.prototype.getClass=function(){return Kh};var Jh=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},tf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Jh.prototype.checkMaximumDistance=function(t,e,n){var r=new $h(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+dl.toLineString(i[0],i[1])+")"}},Jh.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Jh.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),Jh.VERBOSE&&al.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Jh.prototype.checkNegativeValid=function(){if(!(this._input instanceof mu||this._input instanceof vu||this._input instanceof ou))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Jh.prototype.getErrorIndicator=function(){return this._errorIndicator},Jh.prototype.checkMinimumDistance=function(t,e,n){var r=new Wh(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+dl.toLineString(i[0],i[1])+" )"}},Jh.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Jh.prototype.getErrorLocation=function(){return this._errorLocation},Jh.prototype.getPolygonLines=function(t){for(var e=new zl,n=new zh(e),r=Bh.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Jh.prototype.getErrorMessage=function(){return this._errMsg},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},tf.VERBOSE.get=function(){return!1},tf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Jh,tf);var ef=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},nf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ef.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},ef.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*ef.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new ll(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new ll(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},ef.prototype.checkDistance=function(){var t=new Jh(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},ef.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ef.prototype.checkPolygonal=function(){this._result instanceof mu||this._result instanceof vu||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ef.prototype.getErrorIndicator=function(){return this._errorIndicator},ef.prototype.getErrorLocation=function(){return this._errorLocation},ef.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()?null:0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ef.prototype.report=function(t){if(!ef.VERBOSE)return null;al.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},ef.prototype.getErrorMessage=function(){return this._errorMsg},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.isValidMsg=function(t,e,n){var r=new ef(t,e,n);return r.isValid()?null:r.getErrorMessage()},ef.isValid=function(t,e,n){return!!new ef(t,e,n).isValid()},nf.VERBOSE.get=function(){return!1},nf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ef,nf);var rf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};rf.prototype.getCoordinates=function(){return this._pts},rf.prototype.size=function(){return this._pts.length},rf.prototype.getCoordinate=function(t){return this._pts[t]},rf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},rf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Sc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},rf.prototype.setData=function(t){this._data=t},rf.prototype.getData=function(){return this._data},rf.prototype.toString=function(){return dl.toLineString(new ku(this._pts))},rf.prototype.interfaces_=function(){return[Mc]},rf.prototype.getClass=function(){return rf};var of=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new zl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};of.prototype.getInteriorIntersection=function(){return this._interiorIntersection},of.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},of.prototype.getIntersectionSegments=function(){return this._intSegments},of.prototype.count=function(){return this._intersectionCount},of.prototype.getIntersections=function(){return this._intersections},of.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},of.prototype.setKeepIntersections=function(t){this._keepIntersections=t},of.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},of.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},of.prototype.hasIntersection=function(){return null!==this._interiorIntersection},of.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},of.prototype.interfaces_=function(){return[ch]},of.prototype.getClass=function(){return of},of.createAllIntersectionsFinder=function(t){var e=new of(t);return e.setFindAllIntersections(!0),e},of.createAnyIntersectionFinder=function(t){return new of(t)},of.createIntersectionCounter=function(t){var e=new of(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var af=function(){this._li=new bl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};af.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},af.prototype.getIntersections=function(){return this._segInt.getIntersections()},af.prototype.isValid=function(){return this.execute(),this._isValid},af.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},af.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new of(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new jc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},af.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Hu(this.getErrorMessage(),this._segInt.getInteriorIntersection())},af.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+dl.toLineString(t[0],t[1])+" and "+dl.toLineString(t[2],t[3])},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},af.computeIntersections=function(t){var e=new af(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var sf=function t(){this._nv=null;var e=arguments[0];this._nv=new af(t.toSegmentStrings(e))};sf.prototype.checkValid=function(){this._nv.checkValid()},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.toSegmentStrings=function(t){for(var e=new zl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new rf(r.getCoordinates(),r))}return e},sf.checkValid=function(t){new sf(t).checkValid()};var lf=function(t){this._mapOp=t};lf.prototype.map=function(t){for(var e=new zl,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Du.toGeometryArray(e))},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},lf.map=function(t,e){return new lf(e).map(t)};var uf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new zl,this._resultLineList=new zl;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};uf.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},uf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},uf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},uf.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Gf.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},uf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},uf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},uf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},uf.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(yl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Gf.isResultOfOp(r,e)&&e===Gf.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var cf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new zl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};cf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},cf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Gf.INTERSECTION)){var r=n.getLabel();Gf.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},cf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var hf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};hf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},hf.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof _u&&!r.isEmpty()||(n=!1);for(var i=new zl,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof _u||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new zl;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},hf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},hf.prototype.getInputGeometry=function(){return this._inputGeom},hf.prototype.transformMultiLineString=function(t,e){for(var n=new zl,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},hf.prototype.transformCoordinates=function(t,e){return this.copy(t)},hf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},hf.prototype.transformMultiPoint=function(t,e){for(var n=new zl,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},hf.prototype.transformMultiPolygon=function(t,e){for(var n=new zl,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},hf.prototype.copy=function(t){return t.copy()},hf.prototype.transformGeometryCollection=function(t,e){for(var n=new zl,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Du.toGeometryArray(n)):this._factory.buildGeometry(n)},hf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof du)return this.transformPoint(t,null);if(t instanceof yu)return this.transformMultiPoint(t,null);if(t instanceof _u)return this.transformLinearRing(t,null);if(t instanceof fu)return this.transformLineString(t,null);if(t instanceof au)return this.transformMultiLineString(t,null);if(t instanceof mu)return this.transformPolygon(t,null);if(t instanceof vu)return this.transformMultiPolygon(t,null);if(t instanceof ou)return this.transformGeometryCollection(t,null);throw new Ds("Unknown Geometry subtype: "+t.getClass().getName())},hf.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf};var ff=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Tc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof fu&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};ff.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new zs(o)),0===r&&this._isClosed&&t.set(t.size()-1,new zs(o)))}},ff.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},ff.prototype.snapTo=function(t){var e=new Ul(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},ff.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new zs(i),!1)}},ff.prototype.findSegmentIndexToSnap=function(t,e){for(var n=As.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},ff.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var pf=function(t){this._srcGeom=t||null},df={SNAP_PRECISION_FACTOR:{configurable:!0}};pf.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new gf(e,n).transform(this._srcGeom)},pf.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new gf(t,n,!0).transform(this._srcGeom),i=r;return e&&Ws(i,gu)&&(i=r.buffer(0)),i},pf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},pf.prototype.extractTargetCoordinates=function(t){for(var e=new xi,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},pf.prototype.computeMinimumSegmentLength=function(t){for(var e=As.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},pf.snap=function(t,e,n){var r=new Array(2).fill(null),i=new pf(t);r[0]=i.snapTo(e,n);var o=new pf(e);return r[1]=o.snapTo(r[0],n),r},pf.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=pf.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Iu.FIXED){var r=1/n.getScale()*2/1.415;e<r&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(pf.computeOverlaySnapTolerance(i),pf.computeOverlaySnapTolerance(o))}},pf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*pf.SNAP_PRECISION_FACTOR},pf.snapToSelf=function(t,e,n){return new pf(t).snapToSelf(e,n)},df.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(pf,df);var gf=function(r){function t(t,e,n){r.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.snapLine=function(t,e){var n=new ff(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},t.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(hf),mf=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};mf.prototype.getCommon=function(){return As.longBitsToDouble(this._commonBits)},mf.prototype.add=function(t){var e=As.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=mf.signExpBits(this._commonBits),this._isFirst=!1,null):mf.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=mf.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=mf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},mf.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=As.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+As.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},mf.getBit=function(t,e){return 0!=(t&1<<e)?1:0},mf.signExpBits=function(t){return t>>52},mf.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},mf.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(mf.getBit(t,r)!==mf.getBit(e,r))return n;n++}return 52};var yf=function(){this._commonCoord=null,this._ccFilter=new vf},_f={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};yf.prototype.addCommonBits=function(t){var e=new bf(this._commonCoord);t.apply(e),t.geometryChanged()},yf.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new zs(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new bf(e);return t.apply(n),t.geometryChanged(),t},yf.prototype.getCommonCoordinate=function(){return this._commonCoord},yf.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},_f.CommonCoordinateFilter.get=function(){return vf},_f.Translater.get=function(){return bf},Object.defineProperties(yf,_f);var vf=function(){this._commonBitsX=new mf,this._commonBitsY=new mf};vf.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},vf.prototype.getCommonCoordinate=function(){return new zs(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},vf.prototype.interfaces_=function(){return[Pl]},vf.prototype.getClass=function(){return vf};var bf=function(){this.trans=null;var t=arguments[0];this.trans=t};bf.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},bf.prototype.isDone=function(){return!1},bf.prototype.isGeometryChanged=function(){return!0},bf.prototype.interfaces_=function(){return[iu]},bf.prototype.getClass=function(){return bf};var xf=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};xf.prototype.selfSnap=function(t){return new pf(t).snapTo(t,this._snapTolerance)},xf.prototype.removeCommonBits=function(t){this._cbr=new yf,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},xf.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},xf.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Gf.overlayOp(e[0],e[1],t);return this.prepareResult(n)},xf.prototype.checkValid=function(t){t.isValid()||al.out.println("Snapped geometry is invalid")},xf.prototype.computeSnapTolerance=function(){this._snapTolerance=pf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},xf.prototype.snap=function(t){var e=this.removeCommonBits(t);return pf.snap(e[0],e[1],this._snapTolerance)},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.overlayOp=function(t,e,n){return new xf(t,e).getResultGeometry(n)},xf.union=function(t,e){return xf.overlayOp(t,e,Gf.UNION)},xf.intersection=function(t,e){return xf.overlayOp(t,e,Gf.INTERSECTION)},xf.symDifference=function(t,e){return xf.overlayOp(t,e,Gf.SYMDIFFERENCE)},xf.difference=function(t,e){return xf.overlayOp(t,e,Gf.DIFFERENCE)};var wf=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};wf.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Gf.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof gl))throw t;r=t}if(!n)try{e=xf.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof gl?r:t}return e},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.overlayOp=function(t,e,n){return new wf(t,e).getResultGeometry(n)},wf.union=function(t,e){return wf.overlayOp(t,e,Gf.UNION)},wf.intersection=function(t,e){return wf.overlayOp(t,e,Gf.INTERSECTION)},wf.symDifference=function(t,e){return wf.overlayOp(t,e,Gf.SYMDIFFERENCE)},wf.difference=function(t,e){return wf.overlayOp(t,e,Gf.DIFFERENCE)};var Lf=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Lf.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};var Cf=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},kf={INSERT:{configurable:!0},DELETE:{configurable:!0}};Cf.prototype.isDelete=function(){return this._eventType===Cf.DELETE},Cf.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Cf.prototype.getObject=function(){return this._obj},Cf.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Cf.prototype.getInsertEvent=function(){return this._insertEvent},Cf.prototype.isInsert=function(){return this._eventType===Cf.INSERT},Cf.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Cf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Cf.prototype.interfaces_=function(){return[Fs]},Cf.prototype.getClass=function(){return Cf},kf.INSERT.get=function(){return 1},kf.DELETE.get=function(){return 2},Object.defineProperties(Cf,kf);var Ef=function(){};Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef};var Sf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Sf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Sf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Sf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Sf.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Sf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Sf.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Sf.prototype.hasProperIntersection=function(){return this._hasProper},Sf.prototype.hasIntersection=function(){return this._hasIntersection},Sf.prototype.isDone=function(){return this._isDone},Sf.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Sf.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Sf.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Mf=function(t){function e(){t.call(this),this.events=new zl,this.nOverlaps=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.prepareEvents=function(){mc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Sf&&Ws(arguments[0],Bl)&&Ws(arguments[1],Bl)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Ws(arguments[0],Bl)&&arguments[1]instanceof Sf){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Lf(n,i),a=new Cf(e,n.getMinX(i),o);this.events.add(a),this.events.add(new Cf(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ef),Pf=function(){this._min=As.POSITIVE_INFINITY,this._max=As.NEGATIVE_INFINITY},If={NodeComparator:{configurable:!0}};Pf.prototype.getMin=function(){return this._min},Pf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Pf.prototype.getMax=function(){return this._max},Pf.prototype.toString=function(){return dl.toLineString(new zs(this._min,0),new zs(this._max,0))},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},If.NodeComparator.get=function(){return Tf},Object.defineProperties(Pf,If);var Tf=function(){};Tf.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:o<i?1:0},Tf.prototype.interfaces_=function(){return[Bs]},Tf.prototype.getClass=function(){return Tf};var Of=function(r){function t(){r.call(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pf),Nf=function(n){function t(){n.call(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},t.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pf),Df=function(){this._leaves=new zl,this._root=null,this._level=0};Df.prototype.buildTree=function(){mc.sort(this._leaves,new Pf.NodeComparator);for(var t=this._leaves,e=null,n=new zl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Df.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Of(t,e,n))},Df.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Df.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Df.prototype.printNode=function(t){al.out.println(dl.toLineString(new zs(t._min,this._level),new zs(t._max,this._level)))},Df.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Df.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Nf(t.get(n),t.get(n+1));e.add(i)}}},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df};var Af=function(){this._items=new zl};Af.prototype.visitItem=function(t){this._items.add(t)},Af.prototype.getItems=function(){return this._items},Af.prototype.interfaces_=function(){return[fc]},Af.prototype.getClass=function(){return Af};var Rf=function(){this._index=null;var t=arguments[0];if(!Ws(t,gu))throw new Ds("Argument must be Polygonal");this._index=new Bf(t)},Ff={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Rf.prototype.locate=function(t){var e=new wl(t),n=new jf(e);return this._index.query(t.y,t.y,n),e.getLocation()},Rf.prototype.interfaces_=function(){return[nh]},Rf.prototype.getClass=function(){return Rf},Ff.SegmentVisitor.get=function(){return jf},Ff.IntervalIndexedGeometry.get=function(){return Bf},Object.defineProperties(Rf,Ff);var jf=function(){this._counter=null;var t=arguments[0];this._counter=t};jf.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},jf.prototype.interfaces_=function(){return[fc]},jf.prototype.getClass=function(){return jf};var Bf=function(){this._index=new Df;var t=arguments[0];this.init(t)};Bf.prototype.init=function(t){for(var e=zh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Bf.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Tc(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Bf.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Af;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var zf=function(a){function o(){if(a.call(this),this._parentGeom=null,this._lineEdgeMap=new Pu,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new qh,2===arguments.length){var t=arguments[0],e=arguments[1],n=Il.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i)}}return a&&(o.__proto__=a),((o.prototype=Object.create(a&&a.prototype)).constructor=o).prototype.insertBoundaryPoint=function(t,e){var n=this._nodes.addNode(e).getLabel(),r=1;n.getLocation(t,Uu.ON)===Vs.BOUNDARY&&r++;var i=o.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,i)},o.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Sf(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof _u||this._parentGeom instanceof mu||this._parentGeom instanceof vu,l=r||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},o.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},o.prototype.computeEdgeIntersections=function(t,e,n){var r=new Sf(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},o.prototype.getGeometry=function(){return this._parentGeom},o.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},o.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},o.prototype.addPoint=function(){if(arguments[0]instanceof du){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Vs.INTERIOR)}else if(arguments[0]instanceof zs){var e=arguments[0];this.insertPoint(this._argIndex,e,Vs.INTERIOR)}},o.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Vs.EXTERIOR,Vs.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Vs.INTERIOR,Vs.EXTERIOR)}},o.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Vs.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Vs.BOUNDARY)},o.prototype.addLineString=function(t){var e=Gl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new _h(e,new $u(this._argIndex,Vs.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),yl.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},o.prototype.getInvalidPoint=function(){return this._invalidPoint},o.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},o.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},o.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Vs.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},o.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Gl.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Ll.isCCW(r)&&(i=n,o=e);var a=new _h(r,new $u(this._argIndex,Vs.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Vs.BOUNDARY)},o.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new $u(t,n):i.setLocation(t,n)},o.prototype.createEdgeSetIntersector=function(){return new Mf},o.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},o.prototype.add=function(){if(1!==arguments.length)return a.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof vu&&(this._useBoundaryDeterminationRule=!1),t instanceof mu)this.addPolygon(t);else if(t instanceof fu)this.addLineString(t);else if(t instanceof du)this.addPoint(t);else if(t instanceof yu)this.addCollection(t);else if(t instanceof au)this.addCollection(t);else if(t instanceof vu)this.addCollection(t);else{if(!(t instanceof ou))throw new Error(t.getClass().getName());this.addCollection(t)}},o.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},o.prototype.locate=function(t){return Ws(this._parentGeom,gu)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new Rf(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},o.prototype.findEdge=function(){if(1===arguments.length){var t=arguments[0];return this._lineEdgeMap.get(t)}return a.prototype.findEdge.apply(this,arguments)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o.determineBoundary=function(t,e){return t.isInBoundary(e)?Vs.BOUNDARY:Vs.INTERIOR},o}(sc),qf=function(){if(this._li=new bl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new zf(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Il.OGC_SFS_BOUNDARY_RULE;0<=e.getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zf(0,e,r),this._arg[1]=new zf(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];0<=i.getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new zf(0,i,a),this._arg[1]=new zf(1,o,a)}};qf.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},qf.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Uf=function(){};Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.map=function(){if(arguments[0]instanceof El&&Ws(arguments[1],Uf.MapOp)){for(var t=arguments[0],e=arguments[1],n=new zl,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Ws(arguments[0],Rl)&&Ws(arguments[1],Uf.MapOp)){for(var o=arguments[0],a=arguments[1],s=new zl,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Uf.MapOp=function(){};var Gf=function(n){function o(){var t=arguments[0],e=arguments[1];n.call(this,t,e),this._ptLocator=new qh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new uh,this._resultPolyList=new zl,this._resultLineList=new zl,this._resultPointList=new zl,this._graph=new sc(new sh),this._geomFact=t.getFactory()}return n&&(o.__proto__=n),((o.prototype=Object.create(n&&n.prototype)).constructor=o).prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $u(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},o.prototype.getGraph=function(){return this._graph},o.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},o.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},o.prototype.computeGeometry=function(t,e,n,r){var i=new zl;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?o.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},o.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},o.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Vs.EXTERIOR)return!0}return!1},o.prototype.replaceCollapsedEdges=function(){for(var t=new zl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},o.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},o.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},o.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},o.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new zl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),sf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new lc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new uf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new cf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},o.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},o.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},o.prototype.findResultAreaEdges=function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&o.isResultOfOp(r.getLocation(0,Uu.RIGHT),r.getLocation(1,Uu.RIGHT),t)&&n.setInResult(!0)}},o.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(yl.isTrue(!r.isNull(i,Uu.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Uu.LEFT,r.getLocation(i,Uu.LEFT)),yl.isTrue(!r.isNull(i,Uu.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Uu.RIGHT,r.getLocation(i,Uu.RIGHT))))}}},o.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},o.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},o.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},o.prototype.interfaces_=function(){return[]},o.prototype.getClass=function(){return o},o}(qf);Gf.overlayOp=function(t,e,n){return new Gf(t,e).getResultGeometry(n)},Gf.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Gf.createEmptyResult(Gf.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return lf.map(t,{interfaces_:function(){return[Uf.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),wf.overlayOp(t,e,Gf.INTERSECTION)},Gf.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Gf.createEmptyResult(Gf.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),wf.overlayOp(t,e,Gf.SYMDIFFERENCE)},Gf.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Gf.INTERSECTION:o=Math.min(r,i);break;case Gf.UNION:o=Math.max(r,i);break;case Gf.DIFFERENCE:o=r;break;case Gf.SYMDIFFERENCE:o=Math.max(r,i)}return o},Gf.createEmptyResult=function(t,e,n,r){var i=null;switch(Gf.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Gf.difference=function(t,e){return t.isEmpty()?Gf.createEmptyResult(Gf.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),wf.overlayOp(t,e,Gf.DIFFERENCE))},Gf.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Gf.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Vs.BOUNDARY&&(i=Vs.INTERIOR),o===Vs.BOUNDARY&&(o=Vs.INTERIOR),a){case Gf.INTERSECTION:return i===Vs.INTERIOR&&o===Vs.INTERIOR;case Gf.UNION:return i===Vs.INTERIOR||o===Vs.INTERIOR;case Gf.DIFFERENCE:return i===Vs.INTERIOR&&o!==Vs.INTERIOR;case Gf.SYMDIFFERENCE:return i===Vs.INTERIOR&&o!==Vs.INTERIOR||i!==Vs.INTERIOR&&o===Vs.INTERIOR}return!1}},Gf.INTERSECTION=1,Gf.UNION=2,Gf.DIFFERENCE=3,Gf.SYMDIFFERENCE=4;var Vf=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new qh,this._seg=new Tc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Vf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Vf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Vs.BOUNDARY:this._ptLocator.locate(t,this._g)},Vf.prototype.extractLinework=function(t){var e=new Hf;t.apply(e);var n=e.getLinework(),r=Du.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Hf=function(){this._linework=null,this._linework=new zl};Hf.prototype.getLinework=function(){return this._linework},Hf.prototype.filter=function(t){if(t instanceof mu){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Hf.prototype.interfaces_=function(){return[ru]},Hf.prototype.getClass=function(){return Hf};var Wf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Wf.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Wf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Wf.prototype.getPoints=function(t){for(var e=new zl,n=zh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Wf.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new zs(u-l,c+s);r.add(h)}if(this._doRight){var f=new zs(u+l,c-s);r.add(f)}},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf};var Xf=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new zl;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Vf(this._geom[0],this._boundaryDistanceTolerance),new Vf(this._geom[1],this._boundaryDistanceTolerance),new Vf(this._geom[2],this._boundaryDistanceTolerance)]},Yf={TOLERANCE:{configurable:!0}};Xf.prototype.reportResult=function(t,e,n){al.out.println("Overlay result invalid - A:"+Vs.toLocationSymbol(e[0])+" B:"+Vs.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Vs.toLocationSymbol(e[2]))},Xf.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Xf.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Xf.hasLocation(this._location,Vs.BOUNDARY)||this.isValidResult(r,this._location)}},Xf.prototype.addTestPts=function(t){var e=new Wf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Xf.prototype.isValidResult=function(t,e){var n=Gf.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Vs.INTERIOR);return r||this.reportResult(t,e,n),r},Xf.prototype.getInvalidLocation=function(){return this._invalidLocation},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf},Xf.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Xf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(pf.computeSizeBasedSnapTolerance(t),pf.computeSizeBasedSnapTolerance(e))},Xf.isValid=function(t,e,n,r){return new Xf(t,e,r).isValid(n)},Yf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Xf,Yf);var $f=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};$f.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},$f.prototype.combine=function(){for(var t=new zl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f},$f.combine=function(){if(1===arguments.length){var t=arguments[0];return new $f(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new $f($f.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new $f($f.createList(r,i,o)).combine()}},$f.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},$f.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new zl;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new zl;return a.add(r),a.add(i),a.add(o),a}};var Zf=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new zl)},Qf={STRTREE_NODE_CAPACITY:{configurable:!0}};Zf.prototype.reduceToGeometries=function(t){for(var e=new zl,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Ws(r,Bl)?i=this.unionTree(r):r instanceof El&&(i=r),e.add(i)}return e},Zf.prototype.extractByEnvelope=function(t,e,n){for(var r=new zl,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Zf.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return $f.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Zf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new wc(Zf.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Zf.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Zf.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Zf.getGeometry(e,n),Zf.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Zf.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Zf.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Zf.prototype.unionActual=function(t,e){return Zf.restrictToPolygons(t.union(e))},Zf.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Zf.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new zl,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),$f.combine(r)},Zf.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.restrictToPolygons=function(t){if(Ws(t,gu))return t;var e=Bh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Du.toPolygonArray(e))},Zf.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Zf.union=function(t){return new Zf(t).union()},Qf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Zf,Qf);var Kf=function(){};Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Kf.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Gf.createEmptyResult(Gf.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),wf.overlayOp(t,e,Gf.UNION)};var Jf=function(){return new Ei};Ei.prototype={constructor:Ei,reset:function(){this.s=this.t=0},add:function(t){Si(tp,t,this.t),Si(this,tp.s,this.s),this.s?this.t+=tp.t:this.s=tp.t},valueOf:function(){return this.s}};var tp=new Ei,ep=1e-6,np=Math.PI,rp=np/2,ip=np/4,op=2*np,ap=180/np,sp=np/180,lp=Math.abs,up=Math.atan,cp=Math.atan2,hp=Math.cos,fp=Math.exp,pp=Math.log,dp=Math.sin,gp=Math.sqrt,mp=Math.tan,yp={Feature:function(t,e){Ii(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ii(n[r].geometry,e)}},_p={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ti(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ti(n[r],e,0)},Polygon:function(t,e){Oi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Oi(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ii(n[r],e)}},vp=function(t,e){t&&yp.hasOwnProperty(t.type)?yp[t.type](t,e):Ii(t,e)},bp=(Jf(),Jf(),Jf(),function(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t});zi.invert=zi;var xp,wp,Lp=function(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:Pi,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}},Cp=function(t,e,n,r,i,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,f=e[1]-l;if(a=n-s,h||!(0<a)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(0<h){if(c<a)return;u<a&&(u=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(c<a)return;u<a&&(u=a)}else if(0<h){if(a<u)return;a<c&&(c=a)}if(a=r-l,f||!(0<a)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(0<f){if(c<a)return;u<a&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(c<a)return;u<a&&(u=a)}else if(0<f){if(a<u)return;a<c&&(c=a)}return 0<u&&(t[0]=s+u*h,t[1]=l+u*f),c<1&&(e[0]=s+c*h,e[1]=l+c*f),!0}}}}},kp=function(t,e){return lp(t[0]-e[0])<ep&&lp(t[1]-e[1])<ep},Ep=function(t,e,n,r,o){var a,i,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(kp(r,i)){for(o.lineStart(),a=0;a<e;++a)o.point((r=t[a])[0],r[1]);o.lineEnd()}else s.push(n=new Wi(r,t,null,!0)),l.push(n.o=new Wi(r,null,n,!1)),s.push(n=new Wi(i,t,null,!1)),l.push(n.o=new Wi(i,null,n,!0))}}),s.length){for(l.sort(e),Xi(s),Xi(l),a=0,i=l.length;a<i;++a)l[a].e=n=!n;for(var u,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,i=u.length;a<i;++a)o.point((c=u[a])[0],c[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(p)for(u=f.p.z,a=u.length-1;0<=a;--a)o.point((c=u[a])[0],c[1]);else r(f.x,f.p.x,-1,o);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);o.lineEnd()}}},Sp=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},Mp=(1===(xp=Sp).length&&(wp=xp,xp=function(t,e){return Sp(wp(t),e)}),function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--a]=r[e];return n}),Pp=1e9,Ip=-Pp,Tp=Jf(),Op=(Jf(),function(t){return t}),Np=(Jf(),Jf(),1/0),Dp=Np,Ap=-Np,Rp=Ap,Fp={point:function(t,e){t<Np&&(Np=t),Ap<t&&(Ap=t),e<Dp&&(Dp=e),Rp<e&&(Rp=e)},lineStart:Pi,lineEnd:Pi,polygonStart:Pi,polygonEnd:Pi,result:function(){var t=[[Np,Dp],[Ap,Rp]];return Ap=Rp=-(Dp=Np=1/0),t}},jp=(Jf(),function(_,v,b,x){return function(r,s){function e(t,e){var n=r(t,e);_(t=n[0],e=n[1])&&s.point(t,e)}function t(t,e){var n=r(t,e);f.point(n[0],n[1])}function n(){y.point=t,f.lineStart()}function i(){y.point=e,f.lineEnd()}function l(t,e){h.push([t,e]);var n=r(t,e);g.point(n[0],n[1])}function o(){g.lineStart(),h=[]}function a(){l(h[0][0],h[0][1]),g.lineEnd();var t,e,n,r,i=g.clean(),o=d.result(),a=o.length;if(h.pop(),u.push(h),h=null,a)if(1&i){if(0<(e=(n=o[0]).length-1)){for(m||(s.polygonStart(),m=!0),s.lineStart(),t=0;t<e;++t)s.point((r=n[t])[0],r[1]);s.lineEnd()}}else 1<a&&2&i&&o.push(o.pop().concat(o.shift())),c.push(o.filter(Yi))}var u,c,h,f=v(s),p=r.invert(x[0],x[1]),d=Lp(),g=v(d),m=!1,y={point:e,lineStart:n,lineEnd:i,polygonStart:function(){y.point=l,y.lineStart=o,y.lineEnd=a,c=[],u=[]},polygonEnd:function(){y.point=e,y.lineStart=n,y.lineEnd=i,c=Mp(c);var t=function(t,e){var n=e[0],r=e[1],i=[dp(n),-hp(n),0],o=0,a=0;Tp.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,h=u[c-1],f=h[0],p=h[1]/2+ip,d=dp(p),g=hp(p),m=0;m<c;++m,f=_,d=b,g=x,h=y){var y=u[m],_=y[0],v=y[1]/2+ip,b=dp(v),x=hp(v),w=_-f,L=0<=w?1:-1,C=L*w,k=np<C,E=d*b;if(Tp.add(cp(E*L*dp(C),g*x+E*hp(C))),o+=k?w+L*op:w,k^n<=f^n<=_){var S=Ri(Di(h),Di(y));Bi(S);var M=Ri(i,S);Bi(M);var P=(k^0<=w?-1:1)*Mi(M[2]);(P<r||r===P&&(S[0]||S[1]))&&(a+=k^0<=w?1:-1)}}return(o<-ep||o<ep&&Tp<-ep)^1&a}(u,p);c.length?(m||(s.polygonStart(),m=!0),Ep(c,$i,t,b,s)):t&&(m||(s.polygonStart(),m=!0),s.lineStart(),b(null,null,1,s),s.lineEnd()),m&&(s.polygonEnd(),m=!1),c=u=null},sphere:function(){s.polygonStart(),s.lineStart(),b(null,null,1,s),s.lineEnd(),s.polygonEnd()}};return y}}),Bp=jp(function(){return!0},function(h){var f,p=NaN,d=NaN,g=NaN;return{lineStart:function(){h.lineStart(),f=1},point:function(t,e){var n,r,i,o,a,s,l,u=0<t?np:-np,c=lp(t-p);lp(c-np)<ep?(h.point(p,d=0<(d+e)/2?rp:-rp),h.point(g,d),h.lineEnd(),h.lineStart(),h.point(u,d),h.point(t,d),f=0):g!==u&&np<=c&&(lp(p-g)<ep&&(p-=g*ep),lp(t-u)<ep&&(t-=u*ep),r=d,o=e,l=dp((n=p)-(i=t)),d=lp(l)>ep?up((dp(r)*(s=hp(o))*dp(i)-dp(o)*(a=hp(r))*dp(n))/(a*s*l)):(r+o)/2,h.point(g,d),h.lineEnd(),h.lineStart(),h.point(u,d),f=0),h.point(p=t,d=e),g=u},lineEnd:function(){h.lineEnd(),p=d=NaN},clean:function(){return 2-f}}},function(t,e,n,r){var i;if(null==t)i=n*rp,r.point(-np,i),r.point(0,i),r.point(np,i),r.point(np,0),r.point(np,-i),r.point(0,-i),r.point(-np,-i),r.point(-np,0),r.point(-np,i);else if(lp(t[0]-e[0])>ep){var o=t[0]<e[0]?np:-np;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-np,-rp]);Qi.prototype={constructor:Qi,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var zp=hp(30*sp),qp=function(t,e){return+e?function(P,I){function T(t,e,n,r,i,o,a,s,l,u,c,h,f,p){var d=a-t,g=s-e,m=d*d+g*g;if(4*I<m&&f--){var y=r+u,_=i+c,v=o+h,b=gp(y*y+_*_+v*v),x=Mi(v/=b),w=lp(lp(v)-1)<ep||lp(n-l)<ep?(n+l)/2:cp(_,y),L=P(w,x),C=L[0],k=L[1],E=C-t,S=k-e,M=g*E-d*S;(I<M*M/m||.3<lp((d*E+g*S)/m-.5)||r*u+i*c+o*h<zp)&&(T(t,e,n,r,i,o,C,k,w,y/=b,_/=b,v,f,p),p.point(C,k),T(C,k,w,y,_,v,a,s,l,u,c,h,f,p))}}return function(i){function t(t,e){t=P(t,e),i.point(t[0],t[1])}function e(){g=NaN,b.point=n,i.lineStart()}function n(t,e){var n=Di([t,e]),r=P(t,e);T(g,m,d,y,_,v,g=r[0],m=r[1],d=t,y=n[0],_=n[1],v=n[2],16,i),i.point(g,m)}function r(){b.point=t,i.lineEnd()}function o(){e(),b.point=a,b.lineEnd=s}function a(t,e){n(l=t,e),u=g,c=m,h=y,f=_,p=v,b.point=n}function s(){T(g,m,d,y,_,v,u,c,l,h,f,p,16,i),(b.lineEnd=r)()}var l,u,c,h,f,p,d,g,m,y,_,v,b={point:t,lineStart:e,lineEnd:r,polygonStart:function(){i.polygonStart(),b.lineStart=o},polygonEnd:function(){i.polygonEnd(),b.lineStart=e}};return b}}(t,e):(n=t,Zi({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n},Up=Zi({point:function(t,e){this.stream.point(t*sp,e*sp)}});to.invert=function(t,e){return[t,2*up(fp(e))-rp]},eo.invert=function(t,e){return[-e,2*up(fp(t))-rp]};var Gp=function(){var t=function(n){function e(){var t=np*l(),e=a(function(e){function t(t){return(t=e(t[0]*sp,t[1]*sp))[0]*=ap,t[1]*=ap,t}return e=qi(e[0]*sp,e[1]*sp,2<e.length?e[2]*sp:0),t.invert=function(t){return(t=e.invert(t[0]*sp,t[1]*sp))[0]*=ap,t[1]*=ap,t},t}(a.rotate()).invert([0,0]));return c(null==h?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===to?[[Math.max(e[0]-t,h),r],[Math.min(e[0]+t,i),o]]:[[h,Math.max(e[1]-t,r)],[i,Math.min(e[1]+t,o)]])}var r,i,o,a=Ji(n),s=a.center,l=a.scale,u=a.translate,c=a.clipExtent,h=null;return a.scale=function(t){return arguments.length?(l(t),e()):l()},a.translate=function(t){return arguments.length?(u(t),e()):u()},a.center=function(t){return arguments.length?(s(t),e()):s()},a.clipExtent=function(t){return arguments.length?(null==t?h=r=i=o=null:(h=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),e()):null==h?null:[[h,r],[i,o]]},e()}(eo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=Yo,t.random=Ts,t.clusters=Os,t.helpers=mo,t.invariant=_o,t.meta=yo,t.isolines=function(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!H(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a,s,l,u,c,h,f,p,d,g,m,y,_=function(e,t){if(!H(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",r=t.flip,i=t.flags;Y(e,"Point","input must contain Points");for(var o=function(t,n){var r={};return C(e,function(t){var e=A(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return A(t)[0]-A(e)[0]})}).sort(function(t,e){return n?A(t[0])[1]-A(e[0])[1]:A(e[0])[1]-A(t[0])[1]})}(0,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(t,{zProperty:r,flip:!0});return G((a=function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],l=Object.assign({},r,i[a]),u=v(K(t,l[n]=s),l);o.push(u)}return o}(_,e,r,i,o),s=_,l=W(t),u=l[2]-l[0],c=l[3]-l[1],h=l[0],f=l[1],p=s[0].length-1,d=s.length-1,g=u/p,m=c/d,y=function(t){t[0]=t[0]*g+h,t[1]=t[1]*m+f},a.forEach(function(t){w(t,y)}),a))},t.convex=St,t.pointsWithinPolygon=It,t.concave=function(t,s){if(!H(s=s||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var l=s.maxEdge||1/0;if(!V(l))throw new Error("maxEdge is invalid");var n,r,e=Tt((n=[],r={},C(t,function(t){if(t.geometry){var e=t.geometry.coordinates.join("-");r.hasOwnProperty(e)||(n.push(t),r[e]=!0)}}),G(n)));if(e.features=e.features.filter(function(t){var e=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],r=t.geometry.coordinates[0][2],i=At(e,n,s),o=At(n,r,s),a=At(e,r,s);return i<=l&&o<=l&&a<=l}),e.features.length<1)return null;var i=Wt(e,s);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),B(i)},t.collect=function(t,e,n,r){var i=wo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(e){e.properties||(e.properties={});var t=W(e),n=[];i.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).forEach(function(t){Mt([t.minX,t.minY],e)&&n.push(t.property)}),e.properties[r]=n}),t},t.flip=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Rt(t)),w(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Rt(t)),S(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return;Xt(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Qt(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return Qt(t,e,n)});break;case"Polygon":t.coordinates=Kt(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return Kt(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=Jt,t.tag=function(t,n,r,i){return t=Rt(t),n=Rt(n),C(t,function(e){e.properties||(e.properties={}),C(n,function(t){void 0===e.properties[i]&&Mt(e,t)&&(e.properties[i]=t.properties[r])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return G(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=ee,t.square=ne,t.circle=ie,t.midpoint=function(t,e){return re(t,At(t,e)/2,oe(t,e))},t.center=ae,t.centerOfMass=function t(e,n){switch(Q(e)){case"Point":return e;case"Polygon":var r=[];w(e,function(t){r.push(t)});var i,o,a,s,l,u,c,h,f=se(e,n),p=f.geometry.coordinates,d=0,g=0,m=0,y=r.map(function(t){return[t[0]-p[0],t[1]-p[1]]});for(i=0;i<r.length-1;i++)s=(o=y[i])[0],u=o[1],l=(a=y[i+1])[0],m+=h=s*(c=a[1])-l*u,d+=(s+l)*h,g+=(u+c)*h;if(0===m)return f;var _=1/(.5*m*6);return z([p[0]+_*d,p[1]+_*g],n);default:var v=St(e);return v?t(v,n):se(e,n)}},t.centroid=se,t.combine=function(t){function e(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return C(t,function(t){t.geometry&&(r[t.geometry.type]?e(t,t.geometry.type,!0):n[t.geometry.type]&&e(t,n[t.geometry.type],!1))}),G(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return B({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=At,t.explode=le,t.bbox=W,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Ce(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Ce(t))}),e},t.bboxPolygon=te,t.booleanPointInPolygon=Mt,t.nearestPoint=ke,t.nearestPointOnLine=We,t.nearestPointToLine=function(t,n,e){if(!H(e=e||{}))throw new Error("options is invalid");var r=e.units,i=e.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return S(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==Q(n))throw new Error("line must be a LineString");var o=1/0,a=null;return C(t,function(t){var e=en(t,n,{units:r});e<o&&(o=e,a=t)}),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=X(t),r=$(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,l=n[0],u=n[1],c=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==a?a:r[1][2],m=r[2][0],y=r[2][1],_=void 0!==s?s:r[2][2];return(_*(l-c)*(u-d)+f*(l-p)*(u-y)+g*(l-m)*(u-h)-g*(l-c)*(u-y)-_*(l-p)*(u-h)-f*(l-m)*(u-d))/((l-c)*(u-d)+(l-p)*(u-y)+(l-m)*(u-h)-(l-c)*(u-y)-(l-p)*(u-h)-(l-m)*(u-d))},t.tin=Tt,t.bearing=oe,t.destination=re,t.kinks=function(t){var e,n,_={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(y){e.forEach(function(t){for(var e=0;e<y.length-1;e++)for(var n=e;n<t.length-1;n++){if(y===t){if(1===Math.abs(e-n))continue;if(0===e&&n===y.length-2&&y[e][0]===y[y.length-1][0]&&y[e][1]===y[y.length-1][1])continue}var r=(i=y[e][0],o=y[e][1],a=y[e+1][0],s=y[e+1][1],l=t[n][0],u=t[n][1],c=t[n+1][0],h=t[n+1][1],m=g=d=p=f=void 0,m={x:null,y:null,onLine1:!1,onLine2:!1},0==(f=(h-u)*(a-i)-(c-l)*(s-o))?null!==m.x&&null!==m.y&&m:(g=(a-i)*(p=o-u)-(s-o)*(d=i-l),p=((c-l)*p-(h-u)*d)/f,d=g/f,m.x=i+p*(a-i),m.y=o+p*(s-o),0<=p&&p<=1&&(m.onLine1=!0),0<=d&&d<=1&&(m.onLine2=!0),!(!m.onLine1||!m.onLine2)&&[m.x,m.y]));r&&_.features.push(z([r[0],r[1]]))}var i,o,a,s,l,u,c,h,f,p,d,g,m})}),_},t.pointOnFeature=rn,t.area=an,t.along=function(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!V(e))throw new Error("distance must be a number");for(var i=0,o=0;o<r.length&&!(i<=e&&o===r.length-1);o++){if(e<=i){var a=e-i;if(a){var s=oe(r[o],r[o-1])-180;return re(r[o],a,s,n)}return z(r[o])}i+=At(r[o],r[o+1],n)}return z(r[r.length-1])},t.length=cn,t.lineSlice=function(t,e,n){var r=A(n);if("LineString"!==Q(n))throw new Error("line must be a LineString");for(var i,o=We(n,t),a=We(n,e),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)s.push(r[l]);return s.push(i[1].geometry.coordinates),U(s,n.properties)},t.lineSliceAlong=hn,t.pointGrid=mn,t.truncate=yn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return P(t,function(t){e.push(t)}),G(e)},t.lineIntersect=Ve,t.lineChunk=function(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return P(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=cn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){r(hn(t,e*a,e*(a+1),{units:n}))}}(t,e,r,function(t){o.push(t)})}),G(o)},t.unkinkPolygon=function(t){var n=[];return P(t,function(e){"Polygon"===e.geometry.type&&C(Zo(e),function(t){n.push(q(t.geometry.coordinates,e.properties))})}),G(n)},t.greatCircle=function(t,e,n){if("object"!=Vp(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=X(t),e=X(e),r=r||{},i=i||100,o=o||10,new ia({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=Ge,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=Q(t),r=Q(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=yn(e,{precision:7});switch(r){case"Point":return wn(t,i);case"MultiPoint":return xn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return xn(t,Ve(t,i))}},t.lineArc=kn,t.polygonToLine=Sn,t.lineToPolygon=Pn,t.bboxClip=function(t,e){var n,r=(n=t).geometry?n.geometry.type:n.type,i=A(t),o=t.properties;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(i=[i]),i.forEach(function(t){oa(t,e,a)}),1===a.length?U(a[0],o):v(a,o);case"Polygon":return q(An(i,e),o);case"MultiPolygon":return b(i.map(function(t){return An(t,e)}),o);default:throw new Error("geometry "+r+" not supported")}},t.lineOverlap=zn,t.sector=function(t,e,n,r,i){if(!H(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=(void 0===i?"undefined":Vp(i)))throw new Error("options must be an object");if(Un(n)===Un(r))return ie(t,e,i);var o=A(t),a=[[o]];return w(kn(t,e,n,r,i),function(t){a[0].push(t)}),a[0].push(o),q(a)},t.rhumbBearing=Xe,t.rhumbDistance=$e,t.rhumbDestination=Gn,t.polygonTangents=function(t,e){var n,r,i,o=A(t),a=A(e);switch(Q(e)){case"Polygon":n=a[0][0],r=a[0][0],i=Hn(a[0][0],a[0][a[0].length-1],o);var s=Vn(a[0],o,i,void 0,n,r);n=s[0],r=s[1];break;case"MultiPolygon":n=a[0][0][0],r=a[0][0][0],i=Hn(a[0][0][0],a[0][0][a[0][0].length-1],o),a.forEach(function(t){var e=Vn(t[0],o,i,void 0,n,r);n=e[0],r=e[1]})}return G([z(n),z(r)])},t.rewind=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Rt(t));var i=[];switch(t.type){case"GeometryCollection":return S(t,function(t){Xn(t,n)}),t;case"FeatureCollection":return C(t,function(t){C(Xn(t,n),function(t){i.push(t)})}),G(i)}return Xn(t,n)},t.isobands=function(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!H(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a,s,l,u,c,h,f,p,d,g,m,y,_=function(e,t){if(!H(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",r=t.flip,i=t.flags;Y(e,"Point","input must contain Points");for(var o=function(t,n){var r={};return C(e,function(t){var e=A(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return A(t)[0]-A(e)[0]})}).sort(function(t,e){return n?A(t[0])[1]-A(e[0])[1]:A(e[0])[1]-A(t[0])[1]})}(0,r),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}(t,{zProperty:r,flip:!0}),v=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],a=+e[i],s=Zn(t,o,a-o),l=function(t){var n=[],r=[];s.forEach(function(t){var e=an(q([t]));r.push(e),n.push({ring:t,area:e})}),r.sort(function(t,e){return e-t});var i=[];return r.forEach(function(t){for(var e=0;e<n.length;e++)if(n[e].area===t){i.push(n[e].ring),n.splice(e,1);break}}),i}(),u=function(t){for(var e=l.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=q([e[r].lrCoordinates]),a=r+1;a<e.length;a++)if(!e[a].grouped){var s=q([e[a].lrCoordinates]);(function(t,e){for(var n=le(s),r=0;r<n.features.length;r++)if(!Mt(n.features[r],e))return!1;return!0})(0,o)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0)}n.push(i)}return n}(),c={};c.groupedRings=u,c[n]=o+"-"+a,r.push(c)}return r}(_,e,r);return G((a=v,s=_,l=W(t),u=l[2]-l[0],c=l[3]-l[1],h=l[0],f=l[1],p=s[0].length-1,d=s.length-1,g=u/p,m=c/d,y=function(t){t[0]=t[0]*g+h,t[1]=t[1]*m+f},a.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(y)})})}),v=a).map(function(t,e){if(o[e]&&!H(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,o[e]);return n[r]=t[r],b(t.groupedRings,n)}))},t.transformRotate=Jn,t.transformScale=tr,t.transformTranslate=function(t,n,r,e){if(!H(e=e||{}))throw new Error("options is invalid");var i=e.units,o=e.zTranslation,a=e.mutate;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===n&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return n<0&&(n=-n,r=-r),!1!==a&&void 0!==a||(t=Rt(t)),w(t,function(t){var e=A(Gn(t,n,r,{units:i}));t[0]=e[0],t[1]=e[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=Q(t),o=t.properties;switch(i){case"LineString":return ir(t,e,r);case"MultiLineString":var a=[];return P(t,function(t){a.push(ir(t,e,r).geometry.coordinates)}),v(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=is.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){ns.findEdgeRingContaining(t,r)&&r.push(t)}),G(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,n){var r;return P(t,function(e){P(n,function(t){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!sr(e,t);case"Polygon":return!Mt(t,e)}break;case"LineString":switch(e.type){case"Point":return!sr(t,e);case"LineString":return!(0<Ve(t,e).features.length);case"Polygon":return!lr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Mt(e,t);case"LineString":return!lr(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Mt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Mt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}var n,r}(e.geometry,t.geometry)})}),r},t.booleanContains=function(t,e){var n=Q(t),r=Q(e),i=$(t),o=$(e),a=A(t),s=A(e);switch(n){case"Point":switch(r){case"Point":return cr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(cr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(cr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return fn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(fn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!fn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(fn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!fn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Mt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n,r,i=!1,o=0;if(!ur(W(t),W(e)))return!1;for(;o<e.coordinates.length-1;o++){if(Mt({type:"Point",coordinates:(n=e.coordinates[o],r=e.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2])},t,{ignoreBoundary:!0})){i=!0;break}}return i}(i,o);case"Polygon":return function(t,e){if(!ur(W(t),W(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!Mt(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Mt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=Q(t),r=Q(e),i=$(t),o=$(e);switch(n){case"MultiPoint":switch(r){case"LineString":return hr(i,o);case"Polygon":return pr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return hr(o,i);case"LineString":return function(t,e){if(0<Ve(t,e).features.length)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),dr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return fr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return pr(o,i);case"LineString":return fr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Wn,t.booleanOverlap=_r,t.booleanPointOnLine=fn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return Q(t)===Q(e)&&new us({precision:6}).compare(Xt(t),Xt(e))},t.booleanWithin=pn,t.clone=Rt,t.cleanCoords=Xt,t.clustersDbscan=function(n,t,e){if("object"!=Vp(e=e||{}))throw new Error("options is invalid");var r=e.minPoints,i=e.units;if(Y(n,"Point","Input must contain Points"),null==t)throw new Error("maxDistance is required");if(!(0<Math.sign(t)))throw new Error("Invalid maxDistance");if(!(null==r||0<Math.sign(r)))throw new Error("Invalid minPoints");n=Rt(n),r=r||3;var o=new ds.DBSCAN,a=-1;return o.run(E(n),u(t,i),r,At).forEach(function(t){a++,t.forEach(function(t){var e=n.features[t];e.properties||(e.properties={}),e.properties.cluster=a,e.properties.dbscan="core"})}),o.noise.forEach(function(t){var e=n.features[t];e.properties||(e.properties={}),e.properties.cluster?e.properties.dbscan="edge":e.properties.dbscan="noise"}),n},t.clustersKmeans=function(t,e){if("object"!=Vp(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;Y(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Rt(t));var o=E(t),a=o.slice(0,n),s=vs(o,n,a),l={};return s.centroids.forEach(function(t,e){l[e]=t}),C(t,function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=l[n]}),t},t.pointToLineDistance=en,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==br(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==br(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Ge(Xt(t)).features,r=Ge(Xt(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(a=o,s=r[i].geometry.coordinates,f(Xe(a[0],a[1]))!==f(Xe(s[0],s[1])))return!1}var a,s;return!0},t.shortestPath=function(t,e,n){if(!H(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||G([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!V(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=X(t),s=X(e);switch(t=z(a),e=z(s),Q(o)){case"FeatureCollection":if(0===o.features.length)return U([a,s]);break;case"Polygon":o=G([B($(o))]);break;default:throw new Error("invalid obstacles")}var l=o;l.features.push(t),l.features.push(e);var u=W(tr(te(W(l)),1.15));r||(r=At([u[0],u[1]],[u[2],u[1]],n)/100),l.features.pop(),l.features.pop();for(var c=u[0],h=u[1],f=u[2],p=u[3],d=r/At([c,h],[f,h],n)*(f-c),g=r/At([c,h],[c,p],n)*(p-h),m=f-c,y=p-h,_=(m-Math.floor(m/d)*d)/2,v=[],b=[],x=[],w=[],L=1/0,C=1/0,k=p-(y-Math.floor(y/g)*g)/2,E=0;h<=k;){for(var S=[],M=[],P=c+_,I=0;P<=f;){var T=z([P,k]),O=function(t,e){for(var n=0;n<e.features.length;n++)if(Mt(t,e.features[n]))return!0;return!1}(T,o);S.push(O?0:1),M.push(P+"|"+k);var N=At(T,t);!O&&N<L&&(L=N,x={x:I,y:E});var D=At(T,e);!O&&D<C&&(C=D,w={x:I,y:E}),P+=d,I++}b.push(S),v.push(M),k-=g,E++}var A=new wr(b,{diagonal:!0}),R=A.grid[x.y][x.x],F=A.grid[w.y][w.x],j=[a];return bs.search(A,R,F).forEach(function(t){var e=v[t.x][t.y].split("|");j.push([+e[0],+e[1]])}),j.push(s),Xt(U(j))},t.voronoi=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Y(t,"Point","points"),G(function(){function e(r){return new Wr(r.map(function(t,e){var n=[Math.round(i(t,e,r)/Ps)*Ps,Math.round(o(t,e,r)/Ps)*Ps];return n.index=e,n.data=t,n}),n)}var i=kr,o=Er,n=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),e):i},e.y=function(t){return arguments.length?(o="function"==typeof t?t:xs(+t),e):o},e.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},e.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],e):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},e}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Xr))},t.ellipse=Yr,t.centerMean=Zr,t.centerMedian=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!V(n))throw new Error("counter must be a number");var r=e.weight,i=Zr(t,{weight:e.weight}),o=G([]);return C(t,function(t){o.features.push(se(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},function t(o,e,n,r){var i=n.properties.tolerance||.001,a=0,s=0,l=0,u=0;if(C(n,function(t){var e=t.properties.weight,n=null==e?1:e;if(!V(n=Number(n)))throw new Error("weight value must be a number");if(0<n){u+=1;var r=n*At(t,o);0===r&&(r=1);var i=n/r;a+=t.geometry.coordinates[0]*i,s+=t.geometry.coordinates[1]*i,l+=i}}),u<1)throw new Error("no features to measure");var c=a/l,h=s/l;return 1===u||0===r||Math.abs(c-e[0])<i&&Math.abs(h-e[1])<i?z([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),t([c,h],o,n,r-1))}(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!V(n))throw new Error("steps must be a number");if(!H(i))throw new Error("properties must be a number");var o=E(t).length,a=Zr(t,{weight:r}),s=0,l=0,u=0;C(t,function(t){var e=t.properties[r]||1,n=Qr(A(t),A(a));s+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,u+=n.x*n.y*e});var c=s-l,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),f=2*u,p=Math.atan((c+h)/f),d=180*p/Math.PI,g=0,m=0,y=0;C(t,function(t){var e=t.properties[r]||1,n=Qr(A(t),A(a));g+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,m+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,y+=e});var _=Math.sqrt(2*g/y),v=Math.sqrt(2*m/y),b=Yr(a,_,v,{units:"degrees",angle:d,steps:n,properties:i}),x=It(t,G([b])),w={meanCenterCoordinates:A(a),semiMajorAxis:_,semiMinorAxis:v,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*E(x).length/o};return b.properties.standardDeviationalEllipse=w,b},t.difference=function(t,e){var n=$(t),r=$(e),i=t.properties||{};if(n=ki(n),r=ki(r),!n)return null;if(!r)return B(n,i);var o=new zu,a=o.read(n),s=o.read(r),l=Gf.difference(a,s);return l.isEmpty()?null:B((new qu).write(l),i)},t.buffer=function(t,n,e){var r=(e=e||{}).units,i=e.steps||64;if(!t)throw new Error("geojson is required");if("object"!=(void 0===e?"undefined":Vp(e)))throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return S(t,function(t){var e=no(t,n,r,i);e&&o.push(e)}),G(o);case"FeatureCollection":return C(t,function(t){var e=no(t,n,r,i);e&&C(e,function(t){t&&o.push(t)})}),G(o)}return no(t,n,r,i)},t.union=io,t.intersect=oo,t.dissolve=function(t,e){if(!H(e=e||{}))throw new Error("options is invalid");var o=e.propertyName;Y(t,"Polygon","dissolve");var n=Rt(t),a=n.features,s=[];a.forEach(function(t,e){t.properties.origIndexPosition=e});var l=ze();for(var u in l.load(n),a){var c=a[u],h=!1;if(l.search(c).features.forEach(function(t){c=a[u];var e,n=t.properties.origIndexPosition;if(0<s.length&&0!==n)if(n>s[s.length-1])n-=s.length;else{var r=function(r,t,e){var i,o;if(!Array.isArray(t))throw new Error("Get closest expects an array as second argument");return t.forEach(function(t,e){var n=t-r;0<=n&&(void 0===o||n<o)&&(o=n,i=e)}),i}(n,s);0!==r&&(n-=r)}if(n!==+u){var i=a[n];i&&c&&(void 0!==o&&i.properties[o]!==c.properties[o]||_r(c,i)&&(e=i,0<Ve(U(E(c)),U(E(e))).features.length)&&(a[u]=io(c,i),s.push(t.properties.origIndexPosition),s.sort(function(t,e){return t-e}),l.remove(t),a.splice(n,1),c.properties.origIndexPosition=u,l.remove(c,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),h=!0))}}),h){if(!c)continue;c.properties.origIndexPosition=u,l.insert(c),u--}}return a.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),n},t.hexGrid=ao,t.mask=function(t,e){var i,o,n,r,a,s,l=q(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),u=(i=[],o=[],P(t,function(t){var e=t.geometry.coordinates,n=e[0],r=e.slice(1);i.push(q([n])),r.forEach(function(t){o.push(q([t]))})}),[G(i),G(o)]),c=u[0],h=u[1];return n=l,r=c=so(c),a=h=so(h),(s=[]).push(n.geometry.coordinates[0]),P(r,function(t){s.push(t.geometry.coordinates[0])}),P(a,function(t){s.push(t.geometry.coordinates[0])}),q(s)},t.squareGrid=uo,t.triangleGrid=co,t.interpolate=function(e,t,s){if("object"!=Vp(s=s||{}))throw new Error("options is invalid");var l=s.gridType,u=s.property,c=s.weight;if(!e)throw new Error("points is required");if(Y(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(void 0!==c&&"number"!=typeof c)throw new Error("weight must be a number");u=u||"elevation",l=l||"square",c=c||1;var n,r=W(e);switch(l){case"point":case"points":n=mn(r,t,s);break;case"square":case"squares":n=uo(r,t,s);break;case"hex":case"hexes":n=ao(r,t,s);break;case"triangle":case"triangles":n=co(r,t,s);break;default:throw new Error("invalid gridType")}var h=[];return C(n,function(i){var o=0,a=0;C(e,function(t){var e,n=At("point"===l?i:se(i),t,s);if(void 0!==u&&(e=t.properties[u]),void 0===e&&(e=t.geometry.coordinates[2]),void 0===e)throw new Error("zValue is missing");0===n&&(o=e);var r=1/Math.pow(n,c);a+=r,o+=r*e});var t=Rt(i);t.properties[u]=o/a,h.push(t)}),G(h)},t.pointOnSurface=rn,t.polygonToLineString=Sn,t.lineStringToPolygon=Pn,t.inside=Mt,t.within=It,t.bezier=Jt,t.nearest=ke,t.pointOnLine=We,t.lineDistance=cn,t.radians2degrees=p,t.degrees2radians=_,t.distanceToDegrees=l,t.distanceToRadians=g,t.radiansToDistance=d,t.bearingToAngle=f,t.convertDistance=u,t.toMercator=Ze,t.toWgs84=Qe,t.randomPosition=Kr,t.randomPoint=Jr,t.randomPolygon=ti,t.randomLineString=ei,t.getCluster=ri,t.clusterEach=ii,t.clusterReduce=oi,t.createBins=ai,t.applyFilter=si,t.propertiesContainsFilter=li,t.filterProperties=ui,t.earthRadius=ho,t.factors=fo,t.unitsFactors=po,t.areaFactors=go,t.feature=B,t.geometry=e,t.point=z,t.points=n,t.polygon=q,t.polygons=r,t.lineString=U,t.lineStrings=i,t.featureCollection=G,t.multiLineString=v,t.multiPoint=o,t.multiPolygon=b,t.geometryCollection=a,t.round=s,t.radiansToLength=d,t.lengthToRadians=g,t.lengthToDegrees=l,t.bearingToAzimuth=f,t.radiansToDegrees=p,t.degreesToRadians=_,t.convertLength=u,t.convertArea=c,t.isNumber=V,t.isObject=H,t.validateBBox=h,t.validateId=m,t.getCoord=X,t.getCoords=A,t.containsNumber=R,t.geojsonType=F,t.featureOf=j,t.collectionOf=Y,t.getGeom=$,t.getGeomType=Z,t.getType=Q,t.coordEach=w,t.coordReduce=y,t.propEach=x,t.propReduce=L,t.featureEach=C,t.featureReduce=k,t.coordAll=E,t.geomEach=S,t.geomReduce=M,t.flattenEach=P,t.flattenReduce=I,t.segmentEach=T,t.segmentReduce=O,t.lineEach=N,t.lineReduce=D,Object.defineProperty(t,"__esModule",{value:!0})},"object"==((r=void 0)===n?"undefined":Vp(n))&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.turf={})},{}],55:[function(t,e,n){"use strict";L.registerLocale("en",{"全屏模式":"Full screen","退出全屏":"Exit full screen","<strong>错误:</strong> 形状的边不能相交!":"<strong>Error:</strong> shape edges cannot cross!","保存":"Save","保存变化":"Save changes","删除图形":"Delete layers","删除最后一个点":"Delete last point","删除最后一个绘制的点":"Delete last point drawn","半径":"Radius","取消":"Cancel","取消绘制":"Cancel drawing","取消编辑, 放弃所有变化":"Cancel editing, discards all changes","完成":"Finish","完成绘制":"Finish drawing","拖动结点或标记编辑图形":"Drag handles, or marker to edit feature","松开鼠标完成绘制":"Release mouse to finish drawing","没有可删除图形":"No layers to delete","没有可编辑图形":"No layers to edit","清除所有":"Clear all","清除所有图形":"Clear all shapes","点击取消放弃变更":"Click cancel to undo changes","点击图形进行删除":"Click on a feature to remove","点击地图放置标记":"Click map to place marker","点击并且拖动绘制圆":"Click and drag to draw circle","点击并且拖动绘制矩形":"Click and drag to draw rectangle","点击开始绘制形状":"Click to start drawing shape","点击开始绘制线":"Click to start drawing line","点击最后一个点完成线":"Click last point to finish line","点击第一个点完成形状":"Click first point to close this shape","点击继续绘制形状":"Click to continue drawing shape","点击继续绘制线":"Click to continue drawing line","绘制一个圆":"Draw a circle","绘制一个多边形":"Draw a polygon","绘制一个标记":"Draw a marker","绘制一个矩形":"Draw a rectangle","绘制一条折线":"Draw a polyline","编辑图形":"Edit layers","样式编辑":"Edit style","图标":"Icon","填充透明度":"Fill Opacity","填充颜色":"Fill Color","线条样式":"Line Stroke","透明度":"Opacity","颜色":"Color","点击另一个需要定制样式的要素":"Choose another element you want to style","点击需要定制样式的要素":"Click on the feature you want to edit","尺寸":"Size","导入":"Import","导出":"Export","正在使用GeoJSON":"Using geoJSON","正在使用Shapefile":"Using shapefile","正在使用Excel":"Using excel","正在使用Txt":"Using txt","执行高级查询":"Execute advanced search","打开绘图面板，设置查询范围":"Open draw panel,set query area","请选择高级查询的图层":"Please select layer for advanced search","请填写查询条件或者绘制查询范围":"Please write query condition or set query area","获取数据图层树失败！":"Failed to get data layer tree!","高级查询记录数为空！":"Advanced search records is empty!","选择图层：":"Select Layer:","查询条件：":"Query Condition:","[字段信息]":"[Field Info]","添加到条件信息":"Add To Condition Info","[数值信息]":"[Value Info]","获取唯一值":"Get Unique Value","[条件信息]":"[Condition Info]","清除":"Clear","查询":"Query","范围":"Scope","历史":"History","前一视图":"Go back to previous extent","绘图面板":"Drawing panel","后一视图":"Go to next extent","全图浏览":"Full extent","信息查询":"Information query","地图漫游":"Pan","拉框选择":"Select features by rectangle","放大":"Zoom in","缩小":"Zoom out","拉框放大":"Zoom in","拉框缩小":"Zoom out","<p>请选择图层对比使用的模式<p>":"<p>Pelease select the mode of layer comparison<p>","两窗口":"2 Windows","使用主图":"Use Main Map","取消同步":"Cancel Sync","同步浏览":"Sync","四窗口":"4 Windows","图层对比":"Layer comparison","图层对比 ( 使用鼠标右键选择图层 )":"Layer Comparison ( Right-click on the map )","图层选择":"Select Layer","复制图层":"Copy Layer","对比模式":"Comparison mode","清空图层":"Clear Layer","粘贴图层":"Paste Layer","选择图层":"Select Layer","叠置分析":"Overlay Analysis","要素入库":"Feature Import","历史查看":"History View","书签":"Bookmark","设置":"Setting","高级查询":"Advanced Search","选择主题: ":"Select Theme: ","显示小地图":"Show MiniMap","隐藏小地图":"Hide MiniMap","图例":"Legend","缩放到图层":"Zoom to layer","清除所有选中项":"Clear selected","图例查询记录数为空！":"Legend query record number is empty!","导出Shapefile失败！":"Export shapefile failure!","导出Shapefile成功！":"Export shapefile success!","导入GeoJSON失败！":"Import GeoJSON failure!","导入文件成功！（最多导入数据条数：":"Import success！（Maximum count:","执行叠置分析":"Executive overlay analysis","打开绘图面板，设置分析范围":"Open the drawing panel and set the analysis extent","请绘制叠置分析图形！":"Please draw overlay analysis geometry!","叠置分析记录数为空！":"Overlay analysis record number is empty!","请选择叠置分析图层！":"Please select overlay analysis layer!","叠置分析选中的图层同时也会在图层树中选中！":"Overlay analysis selected layers and also selected in layer tree!","分析":"Analysis","选择":"Opt","设置分析图层：":"Set Analysis Layer:","统计结果过多,无法绘制统计图！":"Too many records to draw a chart!","统计字段为空或者错误,请设置正确的统计字段！":"The statistics field is empty or error,please set the correct statistics field!","统计图":"Statistics","统计字段: ":"Statistical field: ","因为点数过多，不能进入编辑模式！":"Data is too much, cannot enter edit mode!","导入文件失败！":"Failed import file!","导出GeoJSON成功！":"Export GeoJSON success!","无法导入文件！请选择shape文件的zip压缩包！":"Failed, Please select the zip package of shapefile!","没有可以导出的数据！":"There is no data that can be exported","叠置分析结果":"Overlay analysis results","搜索结果":"Search results","闪烁颜色: ":"Flicker color: ","导出 excel":"Export excel","统计值为空,无法绘制统计图！":"The statistic value is null, cannot draw statistics chart! ","图层":"Layer","图层树中选中的图层数不能超过: ":"Layers is over limit: ","重叠面积或长度":"Overlapping Area or Length","高级查询结果":"Advanced query results","GPS轨迹":"GPS Track","停止播放":"Stop Playing","播放轨迹":"Play Track","经纬度":"LatLng","<strong>请等待……</strong>":"<strong>Please wait</strong>","已经设置新主题，刷新页面将生效！":"New theme has been set and please refresh page!","图层树控件为空！":"Layer tree is empty!","请选择查询图层！":"Please select the query layer!","请点击并勾选需要查询的图层！":"Please click and tick the layer you want to query!","配置文件中无对应图层！":"There is no corresponding layer in the configuration file!","查询记录数为空！":"The number of query records is empty! ","字段":"Field","值":"Value","信息查询结果":"Information Query Results","内缓冲":"Inner","单位":"Unit","双缓冲":"Both","右缓冲":"Right","外缓冲":"Outer","将屏蔽部分操作，取消卷帘可恢复！":"It will block part of the operation, cancel the shutter can be restored!","左缓冲":"Left","已恢复屏蔽的操作！":"The blocked operation has been restored!","最多选择五个图层！":"Select at most five layers!","缓冲":"Buffer","缓冲类型":"Buffer Type","缓冲距离":"Buffer Length","缓冲距离最大长度:":"The buffer distance maximum length: ","至少选择两个图层！":"Select at least two layers!","关闭卷帘":"Close roller shutters","横向卷帘":"Horizontal roller shutters","纵向卷帘":"Vertical roller shutters","截图时显示UI":"Take screenshot with UI","截图时隐藏UI":"Take screenshot without UI","截图":"Screenshot","绘制一个圆标记":"Draw a circle marker","点击地图放置圆形标记":"Click map to place circle marker","置顶":"Stick","清除置顶":"Clear Stick","高级查询历史":"Advanced Search History","确定":"OK","打印地图":"Print Map","发送到打印机":"Send to Printer","保存为PDF":"Saved as PDF","保存为图片":"Saved as Image","文本":"Text","标记":"Mark","图表":"Chart","纸张":"Paper","像素/英寸":"Pixels/Inch","比例尺":"Scale","缩放按钮":"Zoom Button","指北针":"Compass","标题":"Title","一张图":"A Map","添加文字":"Add Text","添加标记":"Add Mark","添加":"Add","删除文字":"Delete Text","删除标记":"Delete Mark","清空":"Clear","关闭探照灯":"Close Search Light","将屏蔽部分操作，关闭探照灯可恢复！":"It will block part of the operation, close the search light can be restored!","探照灯":"Search Light","请在图层树勾选需要探照的图层":"Please check the search light layer in the layer tree","请在图层树选中需要探照的图层":"Please select the search light layer in the layer tree","横向":"Horizontal","纵向":"Vertical","微软雅黑":"Microsoft YaHei","新宋体":"NSimSun","楷体":"KaiTi","关闭滤镜":"Close filter","叠置分析选中的图层也会在图层树中选中！":"Layers selected in overlay analysis will also be selected in the layer manager!","图层树中同时选中的图层数不能超过: ":"Do not exceed the number of layers selected in the layer tree:","将屏蔽部分操作，退出功能后可恢复！":"Activated filter will block some operations, which will be recovered after exit filter!","属性查询":"Information query","属性查询结果":"Attribute Query Result","没有可清除图形":"No graphics can be removed","滤镜":"Filter","请在图层树勾选需要使用的图层":"Please select a layer as target in the layer manager","请在图层树选中单个图层（没有子节点）":"Please select a single layer (without sub-node) in the layer manager","请在图层树选中需要使用的图层":"Please select the layer you want to use on the layer tree","滤镜大小":"Filter size","中心点定位":"Central location","定位":"Location","定位失败！":"Location failed!","目标投影":"Target Projection","测量长度":"Measure Length","测量面积":"Measure Area","弧线":"Arc","曲线":"Curve","折线":"Polyline","闭合曲线":"Closed Curve","自由线":"Free Hand Line","圆":"Circle","椭圆":"Ellipse","弓形":"Lune","扇形":"Sector","矩形":"Rectangle","三角形":"Triangle","集结地":"Gathering Place","多边形":"Polygon","自由面":"Free Hand Polygon","钳击":"Double Arrow","直箭头":"Straight Arrow","细直箭头":"Fine Arrow","突击方向":"Assault Direction","进攻方向":"Attack Arrow","进攻方向（燕尾）":"Tailed Attack Arrow","分队战斗行动":"Squad Combat","分队战斗行动（燕尾）":"Tailed Squad Combat","线标":"Line Plot","面标":"Polygon Plot","箭头":"Arrow Plot","开始标绘":"Start Plotting","结束标绘":"End Plotting","删除":"Delete","正在使用DwgDxf":"Using Dwg,Dxf","请求超时！请确认选择合理有效的图层！":"Request timed out! Please make sure to select a reasonable and valid layer!","请在图层树勾选至少两个图层":"Please select at least two layers in the layer tree","三窗口":"3 Windows","五窗口":"5 Windows","六窗口":"6 Windows","无":"None","统计所有":"Statistics All","重置":"Reset","要素更新":"Feature Update","要素删除":"Feature Delete","是否确定删除此要素?":"Confirm to delete?","当前编辑的要素未入库，是否继续切换?":"Current feature has not import, continue switch?","该要素已经入库，是否重复入库?":"The feature has been imported, import repeat?","添加书签":"Add Bookmark","图层选择：":"Select Layer:","[选择图层]":"[Select Layer]","图形导入：":"Graphic Import：","图形导入":"Graphic Import","选项设置：":"Options：","[要素重叠]":"Feature Overlay","允许重叠":"Allow Overlay","属性录入":"Attribute Import","加载的图形与类型不匹配!":"Graphic no match the layer's type!","请先加载图形文件!":"Please import the graphic file!","无法读取投影坐标系统，请手动选择!":"Read the coordinate system failed, please fill in  manually!","请选择有效的图层!":"Please select a valid layer!","请导入图形！":"Please import graphic!","投影坐标不能为空！":"The coordinate system must not be none!","-要素录入成功!":"- Feature import success!","-要素录入失败!":"- Feature import fail!","-要素更新成功!":"- Feature update success!","-要素重叠!":"- Feature overlap!","-要素更新失败!":"- Feature update fail!","-要素删除成功!":"- Feature delete success!","-要素删除失败!":"- Feature delete fail!","请填写整型数据！":"Please fill in the integer data !","请填写小数！":"Please fill in the float data !","请填写正确的日期格式，如1900/12/12 12:00:00":"Please fill in the date date, e.g. 1900/12/12 12:00:00","读取书签失败!":"Read bookmark failed!","提交":"submit","书签名称:":"Name:","请输入书签名称!":"Please input bookmark name!","-书签删除成功!":"- Delete bookmark success!","-书签删除失败!":"- Delete bookmark failed!","-添加书签成功!":"- Add bookmark success!","-添加书签失败!":"- Add bookmark failed!","删除书签":"Delete bookmark","统计结果: ":"Statistical result","饼状图":"Pie chart","柱状图":"Bar chart","分类字段: ":"Summary field:","保留原图形":"Reserved graphics","单位换算":"Unit conversion","添加/删除历史图层":"update timeline","添加历史图层 - ":"Add history layer - ","导出到打印":"Export to printer","图表导出到打印成功!":"Chart export to printer success!","标题背景色":"Background Color","标题设置":"Title Setting","网络分析":"Network Analysis","选择类型：":"Select Type:","选择模式：":"Select Mode:","代数运算":"Algebra","函数运算":"Function","逻辑运算":"Logic","条件运算":"Condition","输入":"Input","输入1":"Input 1","输入2":"Input 2","输出栅格数据":"Output Raster Data","运算符":"Operator","选择条件":"Select Condition","关闭":"Close","函数":"Function","导出选中":"Export the selected","自由绘制":"Free draw","阴影":"Shadow ","显示标题":"Display title","以此为终点":"Ending point","以此为起点":"Starting point","以此为途经点":"Through point ","以此为障碍点":"Sticking Point","删除统计图":"Deletion chart","到下一个拐点":"To the next inflection point","向上回溯":"Back up","向下回溯":"Back down","回溯法":"Backtracking","方向":"Direction","旅行商分析":"Travel agent analysis","时间优先":"Time preference","最优路线分析":"Optimal route analysis","枚举法":"Enumeration method","移除":"Remove","移除所有点":"Clear points","移除所有面":"Clear polygons","米":"m","终":"E","绘制障碍面":"Obstacle surface","网络分析失败！":"Network analysis failure!","网络分析成功！":"Network analysis success!","贪心法":"Greedy method","起":"S","距离":"Distance","距离优先":"Distance first","路径图层":"The path layer","追溯分析":"Trace analysis","途":"M","隐藏统计图":"Hide chart","障":"B","栅格分析":"Raster image analysis","下载分析结果":"Download analysis results","代数运算成功！":"Algebra Operation Success","代数运算失败！":"Algebra Operation Failure","函数运算成功！":"Function Operation Success","函数运算失败！":"Function Operation Failure","逻辑运算成功！":"Logic Operation Success","逻辑运算失败！":"Logic Operation Failure","条件运算成功！":"Condition Operation Success","条件运算失败！":"Condition Operation Failure","分享":"Share","另存为":"Save as","折叠":"Collapse","创建缩略图":"Create thumb","创建缩略图失败":"Create thumb error","创建缩略图成功":"Create thumb success"})},{}],56:[function(t,e,n){var o=t("geojson-normalize"),r=t("geojson-stream"),i=t("fs");e.exports.merge=function(t){for(var e={type:"FeatureCollection",features:[]},n=0;n<t.length;n++)for(var r=o(t[n]),i=0;i<r.features.length;i++)e.features.push(r.features[i]);return e},e.exports.mergeFeatureCollectionStream=function(t){var e=r.stringify();return t.forEach(function(t){i.createReadStream(t).pipe(r.parse()).pipe(e)}),e}},{fs:88,"geojson-normalize":488,"geojson-stream":489}],57:[function(n,t,r){(function(e){"use strict";var t=n("jsonparse"),l=n("through");function m(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t||"object"==typeof t?t:"function"==typeof t&&t(e)}r.parse=function(h,f){var p,n,r=new t,d=l(function(t){"string"==typeof t&&(t=new e(t)),r.write(t)},function(t){t&&d.write(t),p&&d.emit("header",p),n&&d.emit("footer",n),d.queue(null)});"string"==typeof h&&(h=h.split(".").map(function(t){return"$*"===t?{emitKey:!0}:"*"===t||(""===t?{recurse:!0}:t)}));return h&&h.length||(h=null),r.onValue=function(t){if(this.root||(d.root=t),h){for(var e=0,n=0,r=!1,i=!1;e<h.length;){var o,a=h[e];if(n++,a&&!a.recurse){if(!(o=n===this.stack.length?this:this.stack[n]))return;if(!m(a,o.key))return void g(o.key,t);r=!!a.emitKey,i=!!a.emitPath,e++}else{var s=h[++e];if(!s)return;for(;;){if(!(o=n===this.stack.length?this:this.stack[n]))return;if(m(s,o.key)){e++,Object.isFrozen(this.stack[n])||(this.stack[n].value=null);break}g(o.key,t),n++}}}if(p&&(d.emit("header",p),p=!1),n===this.stack.length){0;var l=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),u=t;for(var c in null!=u&&null!=(u=f?f(u,l):u)&&((r||i)&&(u={value:u},r&&(u.key=this.key),i&&(u.path=l)),d.queue(u)),this.stack)Object.isFrozen(this.stack[c])||(this.stack[c].value=null)}}},r._onToken=r.onToken,r.onToken=function(t,e){r._onToken(t,e),0===this.stack.length&&d.root&&(h||d.queue(d.root),0,d.root=null)},r.onError=function(t){-1<t.message.indexOf("at position")&&(t.message="Invalid JSON ("+t.message+")"),d.emit("error",t)},d;function g(t,e){!1!==p&&((p=p||{})[t]=e),!1!==n&&!1===p&&((n=n||{})[t]=e)}},r.stringify=function(n,r,e,i){i=i||0,!1===n?(r="\n",e=n=""):null==n&&(n="[\n",r="\n,\n",e="\n]\n");var o,a=!0,s=!1;return o=l(function(t){s=!0;try{var e=JSON.stringify(t,null,i)}catch(t){return o.emit("error",t)}a?(a=!1,o.queue(n+e)):o.queue(r+e)},function(t){s||o.queue(n),o.queue(e),o.queue(null)})},r.stringifyObject=function(n,r,e,i){i=i||0,!1===n?(r="\n",e=n=""):null==n&&(n="{\n",r="\n,\n",e="\n}\n");var o=!0,a=!1;return l(function(t){a=!0;var e=JSON.stringify(t[0])+":"+JSON.stringify(t[1],null,i);o?(o=!1,this.queue(n+e)):this.queue(r+e)},function(t){a||this.queue(n),this.queue(e),this.queue(null)})}}).call(this,n("buffer").Buffer)},{buffer:89,jsonparse:498,through:917}],58:[function(t,e,n){e.exports=t("./lib/axios")},{"./lib/axios":60}],59:[function(b,t,e){(function(f){"use strict";var p=b("./../utils"),d=b("./../core/settle"),g=b("./../helpers/buildURL"),m=b("./../helpers/parseHeaders"),y=b("./../helpers/isURLSameOrigin"),_=b("../core/createError"),v="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||b("./../helpers/btoa");t.exports=function(h){return new Promise(function(n,r){var i=h.data,o=h.headers;p.isFormData(i)&&delete o["Content-Type"];var a=new XMLHttpRequest,t="onreadystatechange",s=!1;if("test"===f.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in a||y(h.url)||(a=new window.XDomainRequest,t="onload",s=!0,a.onprogress=function(){},a.ontimeout=function(){}),h.auth){var e=h.auth.username||"",l=h.auth.password||"";o.Authorization="Basic "+v(e+":"+l)}if(a.open(h.method.toUpperCase(),g(h.url,h.params,h.paramsSerializer),!0),a.timeout=h.timeout,a[t]=function(){if(a&&(4===a.readyState||s)&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in a?m(a.getAllResponseHeaders()):null,e={data:h.responseType&&"text"!==h.responseType?a.response:a.responseText,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:t,config:h,request:a};d(n,r,e),a=null}},a.onerror=function(){r(_("Network Error",h)),a=null},a.ontimeout=function(){r(_("timeout of "+h.timeout+"ms exceeded",h,"ECONNABORTED")),a=null},p.isStandardBrowserEnv()){var u=b("./../helpers/cookies"),c=(h.withCredentials||y(h.url))&&h.xsrfCookieName?u.read(h.xsrfCookieName):void 0;c&&(o[h.xsrfHeaderName]=c)}if("setRequestHeader"in a&&p.forEach(o,function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete o[e]:a.setRequestHeader(e,t)}),h.withCredentials&&(a.withCredentials=!0),h.responseType)try{a.responseType=h.responseType}catch(t){if("json"!==a.responseType)throw t}"function"==typeof h.onDownloadProgress&&a.addEventListener("progress",h.onDownloadProgress),"function"==typeof h.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(t){a&&(a.abort(),r(t),a=null)}),void 0===i&&(i=null),a.send(i)})}}).call(this,b("_process"))},{"../core/createError":66,"./../core/settle":69,"./../helpers/btoa":73,"./../helpers/buildURL":74,"./../helpers/cookies":76,"./../helpers/isURLSameOrigin":78,"./../helpers/parseHeaders":80,"./../utils":82,_process:580}],60:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./helpers/bind"),o=t("./core/Axios"),a=t("./defaults");function s(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var l=s(a);l.Axios=o,l.create=function(t){return s(r.merge(a,t))},l.Cancel=t("./cancel/Cancel"),l.CancelToken=t("./cancel/CancelToken"),l.isCancel=t("./cancel/isCancel"),l.all=function(t){return Promise.all(t)},l.spread=t("./helpers/spread"),e.exports=l,e.exports.default=l},{"./cancel/Cancel":61,"./cancel/CancelToken":62,"./cancel/isCancel":63,"./core/Axios":64,"./defaults":71,"./helpers/bind":72,"./helpers/spread":81,"./utils":82}],61:[function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},{}],62:[function(t,e,n){"use strict";var r=t("./Cancel");function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},{"./Cancel":61}],63:[function(t,e,n){"use strict";e.exports=function(t){return!(!t||!t.__CANCEL__)}},{}],64:[function(t,e,n){"use strict";var r=t("./../defaults"),i=t("./../utils"),o=t("./InterceptorManager"),a=t("./dispatchRequest"),s=t("./../helpers/isAbsoluteURL"),l=t("./../helpers/combineURLs");function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:t},arguments[1])),(t=i.merge(r,this.defaults,{method:"get"},t)).baseURL&&!s(t.url)&&(t.url=l(t.baseURL,t.url));var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head"],function(n){u.prototype[n]=function(t,e){return this.request(i.merge(e||{},{method:n,url:t}))}}),i.forEach(["post","put","patch"],function(r){u.prototype[r]=function(t,e,n){return this.request(i.merge(n||{},{method:r,url:t,data:e}))}}),e.exports=u},{"./../defaults":71,"./../helpers/combineURLs":75,"./../helpers/isAbsoluteURL":77,"./../utils":82,"./InterceptorManager":65,"./dispatchRequest":67}],65:[function(t,e,n){"use strict";var r=t("./../utils");function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},{"./../utils":82}],66:[function(t,e,n){"use strict";var o=t("./enhanceError");e.exports=function(t,e,n,r){var i=new Error(t);return o(i,e,n,r)}},{"./enhanceError":68}],67:[function(t,e,n){"use strict";var r=t("./../utils"),i=t("./transformData"),o=t("../cancel/isCancel"),a=t("../defaults");function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":63,"../defaults":71,"./../utils":82,"./transformData":70}],68:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){return t.config=e,n&&(t.code=n),t.response=r,t}},{}],69:[function(t,e,n){"use strict";var i=t("./createError");e.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n)):t(n)}},{"./createError":66}],70:[function(t,e,n){"use strict";var r=t("./../utils");e.exports=function(e,n,t){return r.forEach(t,function(t){e=t(e,n)}),e}},{"./../utils":82}],71:[function(l,u,t){(function(t){"use strict";var n=l("./utils"),r=l("./helpers/normalizeHeaderName"),e=/^\)\]\}',?\n/,i={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,s={adapter:("undefined"!=typeof XMLHttpRequest?a=l("./adapters/xhr"):void 0!==t&&(a=l("./adapters/http")),a),transformRequest:[function(t,e){return r(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(e,"");try{t=JSON.parse(t)}catch(t){}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(t){s.headers[t]={}}),n.forEach(["post","put","patch"],function(t){s.headers[t]=n.merge(i)}),u.exports=s}).call(this,l("_process"))},{"./adapters/http":59,"./adapters/xhr":59,"./helpers/normalizeHeaderName":79,"./utils":82,_process:580}],72:[function(t,e,n){"use strict";e.exports=function(n,r){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(r,t)}}},{}],73:[function(t,e,n){"use strict";function s(){this.message="String contains an invalid character"}(s.prototype=new Error).code=5,s.prototype.name="InvalidCharacterError",e.exports=function(t){for(var e,n,r=String(t),i="",o=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&e>>8-o%1*8)){if(255<(n=r.charCodeAt(o+=.75)))throw new s;e=e<<8|n}return i}},{}],74:[function(t,e,n){"use strict";var o=t("./../utils");function a(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(o.isURLSearchParams(e))r=e.toString();else{var i=[];o.forEach(e,function(t,e){null!=t&&(o.isArray(t)&&(e+="[]"),o.isArray(t)||(t=[t]),o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),i.push(a(e)+"="+a(t))}))}),r=i.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},{"./../utils":82}],75:[function(t,e,n){"use strict";e.exports=function(t,e){return t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}},{}],76:[function(t,e,n){"use strict";var s=t("./../utils");e.exports=s.isStandardBrowserEnv()?{write:function(t,e,n,r,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(r)&&a.push("path="+r),s.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":82}],77:[function(t,e,n){"use strict";e.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},{}],78:[function(t,e,n){"use strict";var a=t("./../utils");e.exports=a.isStandardBrowserEnv()?function(){var n,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(t){var e=t;return r&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return n=o(window.location.href),function(t){var e=a.isString(t)?o(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0}},{"./../utils":82}],79:[function(t,e,n){"use strict";var i=t("../utils");e.exports=function(n,r){i.forEach(n,function(t,e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=t,delete n[e])})}},{"../utils":82}],80:[function(t,e,n){"use strict";var o=t("./../utils");e.exports=function(t){var e,n,r,i={};return t&&o.forEach(t.split("\n"),function(t){r=t.indexOf(":"),e=o.trim(t.substr(0,r)).toLowerCase(),n=o.trim(t.substr(r+1)),e&&(i[e]=i[e]?i[e]+", "+n:n)}),i}},{"./../utils":82}],81:[function(t,e,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},{}],82:[function(t,e,n){"use strict";var i=t("./helpers/bind"),r=Object.prototype.toString;function o(t){return"[object Array]"===r.call(t)}function a(t){return null!==t&&"object"==typeof t}function s(t){return"[object Function]"===r.call(t)}function l(t,e){if(null!=t)if("object"==typeof t||o(t)||(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}e.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:s,isStream:function(t){return a(t)&&s(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement},forEach:l,merge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]=t}for(var e=0,i=arguments.length;e<i;e++)l(arguments[e],t);return r},extend:function(n,t,r){return l(t,function(t,e){n[e]=r&&"function"==typeof t?i(t,r):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},{"./helpers/bind":72}],83:[function(n,t,e){(function(t){"use strict";if(n("core-js/shim"),n("regenerator-runtime/runtime"),n("core-js/fn/regexp/escape"),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;function e(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":92,"core-js/shim":415,"regenerator-runtime/runtime":84}],84:[function(t,O,e){(function(t){!function(t){"use strict";var l,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof O,s=t.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=t.regeneratorRuntime=a?O.exports:{}).wrap=v;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",g={},c={};c[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==e&&u.call(y,i)&&(c=y);var _=L.prototype=x.prototype=Object.create(c);w.prototype=_.constructor=L,L.constructor=w,L[o]=w.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(_),t},s.awrap=function(t){return{__await:t}},C(k.prototype),k.prototype[r]=function(){return this},s.AsyncIterator=k,s.async=function(t,e,n,r){var i=new k(v(t,e,n,r));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},C(_),_[o]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),g}}}function v(t,e,n,r){var o,a,s,l,i=e&&e.prototype instanceof x?e:x,u=Object.create(i.prototype),c=new P(r||[]);return u._invoke=(o=t,a=n,s=c,l=h,function(t,e){if(l===p)throw new Error("Generator is already running");if(l===d){if("throw"===t)throw e;return T()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=E(n,s);if(r){if(r===g)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===h)throw l=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=p;var i=b(o,a,s);if("normal"===i.type){if(l=s.done?d:f,i.arg===g)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=d,s.method="throw",s.arg=i.arg)}}),u}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function w(){}function L(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(s){function l(t,e,n,r){var i=b(s[t],s,e);if("throw"!==i.type){var o=i.arg,a=o.value;return a&&"object"==typeof a&&u.call(a,"__await")?Promise.resolve(a.__await).then(function(t){l("next",t,n,r)},function(t){l("throw",t,n,r)}):Promise.resolve(a).then(function(t){o.value=t,n(o)},r)}r(i.arg)}var e;"object"==typeof t.process&&t.process.domain&&(l=t.process.domain.bind(l)),this._invoke=function(n,r){function t(){return new Promise(function(t,e){l(n,r,t,e)})}return e=e?e.then(t,t):t()}}function E(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,E(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:l,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],85:[function(t,e,n){"use strict";n.byteLength=function(t){var e=p(t),n=e[0],r=e[1];return 3*(n+r)/4-r},n.toByteArray=function(t){var e,n,r=p(t),i=r[0],o=r[1],a=new f((u=i,c=o,3*(u+c)/4-c)),s=0,l=0<o?i-4:i;var u,c;for(n=0;n<l;n+=4)e=h[t.charCodeAt(n)]<<18|h[t.charCodeAt(n+1)]<<12|h[t.charCodeAt(n+2)]<<6|h[t.charCodeAt(n+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;2===o&&(e=h[t.charCodeAt(n)]<<2|h[t.charCodeAt(n+1)]>>4,a[s++]=255&e);1===o&&(e=h[t.charCodeAt(n)]<<10|h[t.charCodeAt(n+1)]<<4|h[t.charCodeAt(n+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e);return a},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(l(t,o,a<o+16383?a:o+16383));1===r?(e=t[n-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return i.join("")};for(var s=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)s[i]=r[i],h[r.charCodeAt(i)]=i;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var r,i,o=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(s[(i=r)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],86:[function(t,e,n){},{}],87:[function(t,e,n){"use strict";var i=[],a=function(t,e){var n=document.head||document.getElementsByTagName("head")[0],r=i[i.length-1];if((e=e||{}).insertAt=e.insertAt||"bottom","top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),i.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}};e.exports={createLink:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("link");for(var i in r.href=t,r.rel="stylesheet",e)if(e.hasOwnProperty(i)){var o=e[i];r.setAttribute("data-"+i,o)}n.appendChild(r)},createStyle:function(t,e,n){n=n||{};var r=document.createElement("style");for(var i in r.type="text/css",e)if(e.hasOwnProperty(i)){var o=e[i];r.setAttribute("data-"+i,o)}r.sheet?(r.innerHTML=t,r.sheet.cssText=t,a(r,{insertAt:n.insertAt})):r.styleSheet?(a(r,{insertAt:n.insertAt}),r.styleSheet.cssText=t):(r.appendChild(document.createTextNode(t)),a(r,{insertAt:n.insertAt}))}}},{}],88:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{dup:86}],89:[function(R,t,F){(function(h){"use strict";var r=R("base64-js"),o=R("ieee754"),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;F.Buffer=h,F.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},F.INSPECT_MAX_BYTES=50;var n=2147483647;function a(t){if(n<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return i(t,e,n)}function i(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|f(t,e),r=a(n),i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return u(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(N(t,ArrayBuffer)||t&&N(t.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return Object.setPrototypeOf(r,h.prototype),r}(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return h.from(r,e,n);var i=function(t){if(h.isBuffer(t)){var e=0|c(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||D(t.length)?a(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return s(t),a(t<0?0:0|c(t))}function u(t){for(var e=t.length<0?0:0|c(t.length),n=a(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function c(t){if(n<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||N(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return T(t).length;default:if(i)return r?-1:I(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function d(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),D(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=a=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var h=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=e.length;o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(D(s))return a;t[n+a]=s}return a}function y(t,e,n,r){return O(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function v(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,h=239<u?4:223<u?3:191<u?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=b));return n}(r)}F.kMaxLength=n,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(t,e,n){return i(t,e,n)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,n){return i=e,o=n,s(r=t),r<=0?a(r):void 0!==i?"string"==typeof o?a(r).fill(i,o):a(r).fill(i):a(r);var r,i,o},h.allocUnsafe=function(t){return l(t)},h.allocUnsafeSlow=function(t){return l(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(N(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),N(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=h.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(N(o,Uint8Array)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?v(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return v(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return w(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=F.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},t&&(h.prototype[t]=h.prototype.inspect),h.prototype.compare=function(t,e,n,r,i){if(N(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=t.slice(e,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return d(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return d(this,t,e,n,!1)},h.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,s,l,u,c,h,f,p,d=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return f=e,p=n,O(I(t,(h=this).length-f),h,f,p);case"ascii":return y(this,t,e,n);case"latin1":case"binary":return y(this,t,e,n);case"base64":return l=this,u=e,c=n,O(T(t),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,s=n,O(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,(o=this).length-a),o,a,s);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function w(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function L(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=A[t[o]];return i}function C(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function E(t,e,n,r,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function S(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,i){return e=+e,n>>>=0,i||S(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,i){return e=+e,n>>>=0,i||S(t,0,n,8),o.write(t,e,n,r,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},h.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},h.prototype.readUInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||k(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){t>>>=0,e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||k(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||k(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||k(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||k(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||E(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||E(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);E(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},h.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);E(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},h.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=h.isBuffer(t)?t:h.from(t,r),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var e=/[^+/0-9A-Za-z-_]/g;function I(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function T(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(e,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function O(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function N(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function D(t){return t!=t}var A=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()}).call(this,R("buffer").Buffer)},{"base64-js":85,buffer:89,ieee754:491}],90:[function(t,T,e){!function(){"use strict";var t,x={},e=!1;if(void 0!==T&&T.exports?(T.exports=x,e=!0):("function"==typeof define&&define.amd&&define(x),"undefined"!=typeof document?window.ClipperLib=x:self.ClipperLib=x),e){n="chrome";t="Netscape"}else{var n=navigator.userAgent.toString().toLowerCase();t=navigator.appName}var r,i={};-1!=n.indexOf("chrome")&&-1==n.indexOf("chromium")?i.chrome=1:i.chrome=0,-1!=n.indexOf("chromium")?i.chromium=1:i.chromium=0,-1!=n.indexOf("safari")&&-1==n.indexOf("chrome")&&-1==n.indexOf("chromium")?i.safari=1:i.safari=0,-1!=n.indexOf("firefox")?i.firefox=1:i.firefox=0,-1!=n.indexOf("firefox/17")?i.firefox17=1:i.firefox17=0,-1!=n.indexOf("firefox/15")?i.firefox15=1:i.firefox15=0,-1!=n.indexOf("firefox/3")?i.firefox3=1:i.firefox3=0,-1!=n.indexOf("opera")?i.opera=1:i.opera=0,-1!=n.indexOf("msie 10")?i.msie10=1:i.msie10=0,-1!=n.indexOf("msie 9")?i.msie9=1:i.msie9=0,-1!=n.indexOf("msie 8")?i.msie8=1:i.msie8=0,-1!=n.indexOf("msie 7")?i.msie7=1:i.msie7=0,-1!=n.indexOf("msie ")?i.msie=1:i.msie=0;x.biginteger_used=null;function v(t,e,n){x.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function b(){return new v(null,void 0,void 0)}"Microsoft Internet Explorer"==t?(v.prototype.am=function(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;0<=--o;){var l=32767&this[t],u=this[t++]>>15,c=s*l+u*a;i=((l=a*l+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+s*u+(i>>>30),n[r++]=1073741823&l}return i},r=30):"Netscape"!=t?(v.prototype.am=function(t,e,n,r,i,o){for(;0<=--o;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},r=26):(v.prototype.am=function(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;0<=--o;){var l=16383&this[t],u=this[t++]>>14,c=s*l+u*a;i=((l=a*l+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+s*u,n[r++]=268435455&l}return i},r=28),v.prototype.DB=r,v.prototype.DM=(1<<r)-1,v.prototype.DV=1<<r;v.prototype.FV=Math.pow(2,52),v.prototype.F1=52-r,v.prototype.F2=2*r-52;var o,a,s="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array;for(o="0".charCodeAt(0),a=0;a<=9;++a)l[o++]=a;for(o="a".charCodeAt(0),a=10;a<36;++a)l[o++]=a;for(o="A".charCodeAt(0),a=10;a<36;++a)l[o++]=a;function u(t){return s.charAt(t)}function c(t,e){var n=l[t.charCodeAt(e)];return null==n?-1:n}function m(t){var e=b();return e.fromInt(t),e}function w(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function y(t){this.m=t}function _(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function h(t,e){return t&e}function f(t,e){return t|e}function p(t,e){return t^e}function d(t,e){return t&~e}function g(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function L(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function C(){}function k(t){return t}function E(t){this.r2=b(),this.q3=b(),v.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}y.prototype.convert=function(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t},y.prototype.revert=function(t){return t},y.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},y.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},_.prototype.convert=function(t){var e=b();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&0<e.compareTo(v.ZERO)&&this.m.subTo(e,e),e},_.prototype.revert=function(t){var e=b();return t.copyTo(e),this.reduce(e),e},_.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},_.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},_.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},v.prototype.copyTo=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s},v.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},v.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;0<=--r;){var a=8==n?255&t[r]:c(t,r);a<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,0<o&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&v.ZERO.subTo(this,this)},v.prototype.clamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},v.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;0<=n;--n)e[n+t]=this[n];for(n=t-1;0<=n;--n)e[n]=0;e.t=this.t+t,e.s=this.s},v.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},v.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;0<=n;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;0<=n;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},v.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;0<r&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},v.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:0<r&&(e[n++]=r),e.t=n,e.clamp()},v.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;0<=--i;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&v.ZERO.subTo(e,e)},v.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;0<=--n;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},v.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=b());var o=b(),a=this.s,s=t.s,l=this.DB-w(r[r.t-1]);0<l?(r.lShiftTo(l,o),i.lShiftTo(l,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var h=c*(1<<this.F1)+(1<u?o[u-2]>>this.F2:0),f=this.FV/h,p=(1<<this.F1)/h,d=1<<this.F2,g=n.t,m=g-u,y=null==e?b():e;for(o.dlShiftTo(m,y),0<=n.compareTo(y)&&(n[n.t++]=1,n.subTo(y,n)),v.ONE.dlShiftTo(u,y),y.subTo(o,o);o.t<u;)o[o.t++]=0;for(;0<=--m;){var _=n[--g]==c?this.DM:Math.floor(n[g]*f+(n[g-1]+d)*p);if((n[g]+=o.am(0,_,n,m,0,u))<_)for(o.dlShiftTo(m,y),n.subTo(y,n);n[g]<--_;)n.subTo(y,n)}null!=e&&(n.drShiftTo(u,e),a!=s&&v.ZERO.subTo(e,e)),n.t=u,n.clamp(),0<l&&n.rShiftTo(l,n),a<0&&v.ZERO.subTo(n,n)}}},v.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e},v.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},v.prototype.exp=function(t,e){if(4294967295<t||t<1)return v.ONE;var n=b(),r=b(),i=e.convert(this),o=w(t)-1;for(i.copyTo(n);0<=--o;)if(e.sqrTo(n,r),0<(t&1<<o))e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)},v.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(0<a--)for(s<this.DB&&0<(n=this[a]>>s)&&(i=!0,o=u(n));0<=a;)s<e?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,s<=0&&(s+=this.DB,--a)),0<n&&(i=!0),i&&(o+=u(n));return i?o:"0"},v.prototype.negate=function(){var t=b();return v.ZERO.subTo(this,t),t},v.prototype.abs=function(){return this.s<0?this.negate():this},v.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;0<=--n;)if(0!=(e=this[n]-t[n]))return e;return 0},v.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+w(this[this.t-1]^this.s&this.DM)},v.prototype.mod=function(t){var e=b();return this.abs().divRemTo(t,null,e),this.s<0&&0<e.compareTo(v.ZERO)&&t.subTo(e,e),e},v.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new y(e):new _(e),this.exp(t,n)},v.ZERO=m(0),v.ONE=m(1),C.prototype.convert=k,C.prototype.revert=k,C.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},C.prototype.sqrTo=function(t,e){t.squareTo(e)},E.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=b();return t.copyTo(e),this.reduce(e),e},E.prototype.revert=function(t){return t},E.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},E.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},E.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var S=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],M=(1<<26)/S[S.length-1];v.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},v.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||36<t)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=m(n),i=b(),o=b(),a="";for(this.divRemTo(r,i,o);0<i.signum();)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a},v.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,s=0;s<t.length;++s){var l=c(t,s);l<0?"-"==t.charAt(s)&&0==this.signum()&&(i=!0):(a=e*a+l,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),a=o=0))}0<o&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&v.ZERO.subTo(this,this)},v.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(v.ONE.shiftLeft(t-1),f,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(v.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),0<i?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},v.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},v.prototype.changeBit=function(t,e){var n=v.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},v.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,0<r?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},v.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},v.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},v.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;0<i;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},v.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;0<=--r;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},v.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(0<this.t)if(0==e)n=this[0]%t;else for(var r=this.t-1;0<=r;--r)n=(e*n+this[r])%t;return n},v.prototype.millerRabin=function(t){var e=this.subtract(v.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);S.length<(t=t+1>>1)&&(t=S.length);for(var i=b(),o=0;o<t;++o){i.fromInt(S[Math.floor(Math.random()*S.length)]);var a=i.modPow(r,this);if(0!=a.compareTo(v.ONE)&&0!=a.compareTo(e)){for(var s=1;s++<n&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(v.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0},v.prototype.clone=function(){var t=b();return this.copyTo(t),t},v.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},v.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},v.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},v.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},v.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(0<t--)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);0<=t;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(0<i||n!=this.s)&&(e[i++]=n);return e},v.prototype.equals=function(t){return 0==this.compareTo(t)},v.prototype.min=function(t){return this.compareTo(t)<0?this:t},v.prototype.max=function(t){return 0<this.compareTo(t)?this:t},v.prototype.and=function(t){var e=b();return this.bitwiseTo(t,h,e),e},v.prototype.or=function(t){var e=b();return this.bitwiseTo(t,f,e),e},v.prototype.xor=function(t){var e=b();return this.bitwiseTo(t,p,e),e},v.prototype.andNot=function(t){var e=b();return this.bitwiseTo(t,d,e),e},v.prototype.not=function(){for(var t=b(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},v.prototype.shiftLeft=function(t){var e=b();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},v.prototype.shiftRight=function(t){var e=b();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},v.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+g(this[t]);return this.s<0?this.t*this.DB:-1},v.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=L(this[n]^e);return t},v.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},v.prototype.setBit=function(t){return this.changeBit(t,f)},v.prototype.clearBit=function(t){return this.changeBit(t,d)},v.prototype.flipBit=function(t){return this.changeBit(t,p)},v.prototype.add=function(t){var e=b();return this.addTo(t,e),e},v.prototype.subtract=function(t){var e=b();return this.subTo(t,e),e},v.prototype.multiply=function(t){var e=b();return this.multiplyTo(t,e),e},v.prototype.divide=function(t){var e=b();return this.divRemTo(t,e,null),e},v.prototype.remainder=function(t){var e=b();return this.divRemTo(t,null,e),e},v.prototype.divideAndRemainder=function(t){var e=b(),n=b();return this.divRemTo(t,e,n),new Array(e,n)},v.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),o=m(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new y(e):e.isEven()?new E(e):new _(e);var a=new Array,s=3,l=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),1<n){var c=b();for(r.sqrTo(a[1],c);s<=u;)a[s]=b(),r.mulTo(c,a[s-2],a[s]),s+=2}var h,f,p=t.t-1,d=!0,g=b();for(i=w(t[p])-1;0<=p;){for(l<=i?h=t[p]>>i-l&u:(h=(t[p]&(1<<i+1)-1)<<l-i,0<p&&(h|=t[p-1]>>this.DB+i-l)),s=n;0==(1&h);)h>>=1,--s;if((i-=s)<0&&(i+=this.DB,--p),d)a[h].copyTo(o),d=!1;else{for(;1<s;)r.sqrTo(o,g),r.sqrTo(g,o),s-=2;0<s?r.sqrTo(o,g):(f=o,o=g,g=f),r.mulTo(g,a[h],o)}for(;0<=p&&0==(t[p]&1<<i);)r.sqrTo(o,g),f=o,o=g,g=f,--i<0&&(i=this.DB-1,--p)}return r.revert(o)},v.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return v.ZERO;for(var n=t.clone(),r=this.clone(),i=m(1),o=m(0),a=m(0),s=m(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(t,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);0<=n.compareTo(r)?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(s,o)):(r.subTo(n,r),e&&a.subTo(i,a),s.subTo(o,s))}return 0!=r.compareTo(v.ONE)?v.ZERO:0<=s.compareTo(t)?s.subtract(t):s.signum()<0?(s.addTo(t,s),s.signum()<0?s.add(t):s):s},v.prototype.pow=function(t){return this.exp(t,new C)},v.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),0<o&&(e.rShiftTo(o,e),n.rShiftTo(o,n));0<e.signum();)0<(i=e.getLowestSetBit())&&e.rShiftTo(i,e),0<(i=n.getLowestSetBit())&&n.rShiftTo(i,n),0<=e.compareTo(n)?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return 0<o&&n.lShiftTo(o,n),n},v.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=S[S.length-1]){for(e=0;e<S.length;++e)if(n[0]==S[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<S.length;){for(var r=S[e],i=e+1;i<S.length&&r<M;)r*=S[i++];for(r=n.modInt(r);e<i;)if(r%S[e++]==0)return!1}return n.millerRabin(t)},v.prototype.square=function(){var t=b();return this.squareTo(t),t};var P=v;P.prototype.IsNegative=function(){return-1==this.compareTo(P.ZERO)},P.op_Equality=function(t,e){return 0==t.compareTo(e)},P.op_Inequality=function(t,e){return 0!=t.compareTo(e)},P.op_GreaterThan=function(t,e){return 0<t.compareTo(e)},P.op_LessThan=function(t,e){return t.compareTo(e)<0},P.op_Addition=function(t,e){return new P(t).add(new P(e))},P.op_Subtraction=function(t,e){return new P(t).subtract(new P(e))},P.Int128Mul=function(t,e){return new P(t).multiply(new P(e))},P.op_Division=function(t,e){return t.divide(e)},P.prototype.ToDouble=function(){return parseFloat(this.toString())};var I=function(t,e){var n;if(void 0===Object.getOwnPropertyNames){for(n in e.prototype)void 0!==t.prototype[n]&&t.prototype[n]!=Object.prototype[n]||(t.prototype[n]=e.prototype[n]);for(n in e)void 0===t[n]&&(t[n]=e[n]);t.$baseCtor=e}else{for(var r=Object.getOwnPropertyNames(e.prototype),i=0;i<r.length;i++)void 0===Object.getOwnPropertyDescriptor(t.prototype,r[i])&&Object.defineProperty(t.prototype,r[i],Object.getOwnPropertyDescriptor(e.prototype,r[i]));for(n in e)void 0===t[n]&&(t[n]=e[n]);t.$baseCtor=e}};x.Path=function(){return[]},x.Paths=function(){return[]},x.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},x.DoublePoint0=function(){this.X=0,this.Y=0},x.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},x.DoublePoint2=function(t,e){this.X=t,this.Y=e},x.PolyNode=function(){this.m_Parent=null,this.m_polygon=new x.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},x.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},x.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},x.PolyNode.prototype.Contour=function(){return this.m_polygon},x.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},x.PolyNode.prototype.GetNext=function(){return 0<this.m_Childs.length?this.m_Childs[0]:this.GetNextSiblingUp()},x.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},x.PolyNode.prototype.Childs=function(){return this.m_Childs},x.PolyNode.prototype.Parent=function(){return this.m_Parent},x.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},x.PolyTree=function(){this.m_AllPolys=[],x.PolyNode.call(this)},x.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},x.PolyTree.prototype.GetFirst=function(){return 0<this.m_Childs.length?this.m_Childs[0]:null},x.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return 0<t&&this.m_Childs[0]!=this.m_AllPolys[0]&&t--,t},I(x.PolyTree,x.PolyNode),x.Math_Abs_Int64=x.Math_Abs_Int32=x.Math_Abs_Double=function(t){return Math.abs(t)},x.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},i.msie||i.opera||i.safari?x.Cast_Int32=function(t){return 0|t}:x.Cast_Int32=function(t){return~~t},i.chrome?x.Cast_Int64=function(t){return t<-2147483648||2147483647<t?t<0?Math.ceil(t):Math.floor(t):~~t}:i.firefox&&"function"==typeof Number.toInteger?x.Cast_Int64=function(t){return Number.toInteger(t)}:i.msie7||i.msie8?x.Cast_Int64=function(t){return parseInt(t,10)}:i.msie?x.Cast_Int64=function(t){return t<-2147483648||2147483647<t?t<0?Math.ceil(t):Math.floor(t):0|t}:x.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},x.Clear=function(t){t.length=0},x.PI=3.141592653589793,x.PI2=6.283185307179586,x.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof x.DoublePoint){var n=t[0];this.X=x.Clipper.Round(n.X),this.Y=x.Clipper.Round(n.Y)}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},x.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},x.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},x.IntPoint0=function(){this.X=0,this.Y=0},x.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},x.IntPoint1dp=function(t){this.X=x.Clipper.Round(t.X),this.Y=x.Clipper.Round(t.Y)},x.IntPoint2=function(t,e){this.X=t,this.Y=e},x.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},x.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},x.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},x.IntRect4=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},x.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},x.PolyType={ptSubject:0,ptClip:1},x.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},x.JoinType={jtSquare:0,jtRound:1,jtMiter:2},x.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},x.EdgeSide={esLeft:0,esRight:1},x.Direction={dRightToLeft:0,dLeftToRight:1},x.TEdge=function(){this.Bot=new x.IntPoint,this.Curr=new x.IntPoint,this.Top=new x.IntPoint,this.Delta=new x.IntPoint,this.Dx=0,this.PolyTyp=x.PolyType.ptSubject,this.Side=x.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},x.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new x.IntPoint},x.MyIntersectNodeSort=function(){},x.MyIntersectNodeSort.Compare=function(t,e){var n=e.Pt.Y-t.Pt.Y;return 0<n?1:n<0?-1:0},x.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},x.Scanbeam=function(){this.Y=0,this.Next=null},x.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},x.OutPt=function(){this.Idx=0,this.Pt=new x.IntPoint,this.Next=null,this.Prev=null},x.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new x.IntPoint},x.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},x.ClipperBase.horizontal=-9007199254740992,x.ClipperBase.Skip=-2,x.ClipperBase.Unassigned=-1,x.ClipperBase.tolerance=1e-20,x.ClipperBase.loRange=47453132,x.ClipperBase.hiRange=0xfffffffffffff,x.ClipperBase.near_zero=function(t){return t>-x.ClipperBase.tolerance&&t<x.ClipperBase.tolerance},x.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},x.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(x.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!=e);return!1},x.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,r){return r?t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&P.op_Equality(P.Int128Mul(t.X-e.X,n.Y-e.Y),P.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},x.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var r=e;;){if(this.PointOnLineSegment(t,r.Pt,r.Next.Pt,n))return!0;if((r=r.Next)==e)break}return!1},x.ClipperBase.prototype.SlopesEqual=x.ClipperBase.SlopesEqual=function(){var t,e,n,r,i,o,a=arguments,s=a.length;return 3==s?(t=a[0],e=a[1],a[2]?P.op_Equality(P.Int128Mul(t.Delta.Y,e.Delta.X),P.Int128Mul(t.Delta.X,e.Delta.Y)):x.Cast_Int64(t.Delta.Y*e.Delta.X)==x.Cast_Int64(t.Delta.X*e.Delta.Y)):4==s?(n=a[0],r=a[1],i=a[2],a[3]?P.op_Equality(P.Int128Mul(n.Y-r.Y,r.X-i.X),P.Int128Mul(n.X-r.X,r.Y-i.Y)):x.Cast_Int64((n.Y-r.Y)*(r.X-i.X))-x.Cast_Int64((n.X-r.X)*(r.Y-i.Y))==0):(n=a[0],r=a[1],i=a[2],o=a[3],a[4]?P.op_Equality(P.Int128Mul(n.Y-r.Y,i.X-o.X),P.Int128Mul(n.X-r.X,i.Y-o.Y)):x.Cast_Int64((n.Y-r.Y)*(i.X-o.X))-x.Cast_Int64((n.X-r.X)*(i.Y-o.Y))==0)},x.ClipperBase.SlopesEqual3=function(t,e,n){return n?P.op_Equality(P.Int128Mul(t.Delta.Y,e.Delta.X),P.Int128Mul(t.Delta.X,e.Delta.Y)):x.Cast_Int64(t.Delta.Y*e.Delta.X)==x.Cast_Int64(t.Delta.X*e.Delta.Y)},x.ClipperBase.SlopesEqual4=function(t,e,n,r){return r?P.op_Equality(P.Int128Mul(t.Y-e.Y,e.X-n.X),P.Int128Mul(t.X-e.X,e.Y-n.Y)):x.Cast_Int64((t.Y-e.Y)*(e.X-n.X))-x.Cast_Int64((t.X-e.X)*(e.Y-n.Y))==0},x.ClipperBase.SlopesEqual5=function(t,e,n,r,i){return i?P.op_Equality(P.Int128Mul(t.Y-e.Y,n.X-r.X),P.Int128Mul(t.X-e.X,n.Y-r.Y)):x.Cast_Int64((t.Y-e.Y)*(n.X-r.X))-x.Cast_Int64((t.X-e.X)*(n.Y-r.Y))==0},x.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var n=0,r=this.m_edges[t].length;n<r;++n)this.m_edges[t][n]=null;x.Clear(this.m_edges[t])}x.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},x.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},x.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>x.ClipperBase.hiRange||t.Y>x.ClipperBase.hiRange||-t.X>x.ClipperBase.hiRange||-t.Y>x.ClipperBase.hiRange)&&x.Error("Coordinate outside allowed range in RangeTest()."):(t.X>x.ClipperBase.loRange||t.Y>x.ClipperBase.loRange||-t.X>x.ClipperBase.loRange||-t.Y>x.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},x.ClipperBase.prototype.InitEdge=function(t,e,n,r){t.Next=e,t.Prev=n,t.Curr.X=r.X,t.Curr.Y=r.Y,t.OutIdx=-1},x.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},x.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;x.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||x.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=x.ClipperBase.horizontal&&t.Prev.Dx!=x.ClipperBase.horizontal)break;for(;t.Prev.Dx==x.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==x.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},x.ClipperBase.prototype.ProcessBound=function(t,e){var n,r,i=t;if(i.OutIdx==x.ClipperBase.Skip){if(t=i,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=i&&t.Dx==x.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=i&&t.Dx==x.ClipperBase.horizontal;)t=t.Next}if(t==i)i=e?t.Next:t.Prev;else{t=e?i.Next:i.Prev;var o=new x.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,(o.RightBound=t).WindDelta=0,i=this.ProcessBound(t,e),this.InsertLocalMinima(o)}return i}if(t.Dx==x.ClipperBase.horizontal&&(n=e?t.Prev:t.Next).OutIdx!=x.ClipperBase.Skip&&(n.Dx==x.ClipperBase.horizontal?n.Bot.X!=t.Bot.X&&n.Top.X!=t.Bot.X&&this.ReverseHorizontal(t):n.Bot.X!=t.Bot.X&&this.ReverseHorizontal(t)),n=t,e){for(;i.Top.Y==i.Next.Bot.Y&&i.Next.OutIdx!=x.ClipperBase.Skip;)i=i.Next;if(i.Dx==x.ClipperBase.horizontal&&i.Next.OutIdx!=x.ClipperBase.Skip){for(r=i;r.Prev.Dx==x.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X==i.Next.Top.X?e||(i=r.Prev):r.Prev.Top.X>i.Next.Top.X&&(i=r.Prev)}for(;t!=i;)t.NextInLML=t.Next,t.Dx==x.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==x.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),i=i.Next}else{for(;i.Top.Y==i.Prev.Bot.Y&&i.Prev.OutIdx!=x.ClipperBase.Skip;)i=i.Prev;if(i.Dx==x.ClipperBase.horizontal&&i.Prev.OutIdx!=x.ClipperBase.Skip){for(r=i;r.Next.Dx==x.ClipperBase.horizontal;)r=r.Next;r.Next.Top.X==i.Prev.Top.X?e||(i=r.Next):r.Next.Top.X>i.Prev.Top.X&&(i=r.Next)}for(;t!=i;)t.NextInLML=t.Prev,t.Dx==x.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==x.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),i=i.Prev}return i},x.ClipperBase.prototype.AddPath=function(t,e,n){n||e!=x.PolyType.ptClip||x.Error("AddPath: Open paths must be subject.");var r=t.length-1;if(n)for(;0<r&&x.IntPoint.op_Equality(t[r],t[0]);)--r;for(;0<r&&x.IntPoint.op_Equality(t[r],t[r-1]);)--r;if(n&&r<2||!n&&r<1)return!1;for(var i=new Array,o=0;o<=r;o++)i.push(new x.TEdge);var a=!0;i[1].Curr.X=t[1].X,i[1].Curr.Y=t[1].Y;var s={Value:this.m_UseFullRange};this.RangeTest(t[0],s),this.m_UseFullRange=s.Value,s.Value=this.m_UseFullRange,this.RangeTest(t[r],s),this.m_UseFullRange=s.Value,this.InitEdge(i[0],i[1],i[r],t[0]),this.InitEdge(i[r],i[0],i[r-1],t[r]);for(o=r-1;1<=o;--o)s.Value=this.m_UseFullRange,this.RangeTest(t[o],s),this.m_UseFullRange=s.Value,this.InitEdge(i[o],i[o+1],i[o-1],t[o]);for(var l,u=i[0],c=u,h=u;;)if(c.Curr!=c.Next.Curr||!n&&c.Next==u){if(c.Prev==c.Next)break;if(!n||!x.ClipperBase.SlopesEqual(c.Prev.Curr,c.Curr,c.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(c.Prev.Curr,c.Curr,c.Next.Curr)){if((c=c.Next)==h||!n&&c.Next==u)break}else c==u&&(u=c.Next),h=c=(c=this.RemoveEdge(c)).Prev}else{if(c==c.Next)break;c==u&&(u=c.Next),h=c=this.RemoveEdge(c)}if(!n&&c==c.Next||n&&c.Prev==c.Next)return!1;for(n||(this.m_HasOpenPaths=!0,u.Prev.OutIdx=x.ClipperBase.Skip),c=u;this.InitEdge2(c,e),c=c.Next,a&&c.Curr.Y!=u.Curr.Y&&(a=!1),c!=u;);if(a){if(n)return!1;for(c.Prev.OutIdx=x.ClipperBase.Skip,c.Prev.Bot.X<c.Prev.Top.X&&this.ReverseHorizontal(c.Prev),(p=new x.LocalMinima).Next=null,p.Y=c.Bot.Y,p.LeftBound=null,p.RightBound=c,p.RightBound.Side=x.EdgeSide.esRight,p.RightBound.WindDelta=0;c.Next.OutIdx!=x.ClipperBase.Skip;)c.NextInLML=c.Next,c.Bot.X!=c.Prev.Top.X&&this.ReverseHorizontal(c),c=c.Next;return this.InsertLocalMinima(p),this.m_edges.push(i),!0}this.m_edges.push(i);var f=null;for(x.IntPoint.op_Equality(c.Prev.Bot,c.Prev.Top)&&(c=c.Next);(c=this.FindNextLocMin(c))!=f;){var p;null==f&&(f=c),(p=new x.LocalMinima).Next=null,p.Y=c.Bot.Y,c.Dx<c.Prev.Dx?(p.LeftBound=c.Prev,p.RightBound=c,l=!1):(p.LeftBound=c,p.RightBound=c.Prev,l=!0),p.LeftBound.Side=x.EdgeSide.esLeft,p.RightBound.Side=x.EdgeSide.esRight,n?p.LeftBound.Next==p.RightBound?p.LeftBound.WindDelta=-1:p.LeftBound.WindDelta=1:p.LeftBound.WindDelta=0,p.RightBound.WindDelta=-p.LeftBound.WindDelta,(c=this.ProcessBound(p.LeftBound,l)).OutIdx==x.ClipperBase.Skip&&(c=this.ProcessBound(c,l));var d=this.ProcessBound(p.RightBound,!l);d.OutIdx==x.ClipperBase.Skip&&(d=this.ProcessBound(d,!l)),p.LeftBound.OutIdx==x.ClipperBase.Skip?p.LeftBound=null:p.RightBound.OutIdx==x.ClipperBase.Skip&&(p.RightBound=null),this.InsertLocalMinima(p),l||(c=d)}return!0},x.ClipperBase.prototype.AddPaths=function(t,e,n){for(var r=!1,i=0,o=t.length;i<o;++i)this.AddPath(t[i],e,n)&&(r=!0);return r},x.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,n){return!(x.IntPoint.op_Equality(t,n)||x.IntPoint.op_Equality(t,e)||x.IntPoint.op_Equality(n,e))&&(t.X!=n.X?e.X>t.X==e.X<n.X:e.Y>t.Y==e.Y<n.Y)},x.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},x.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=x.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},x.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},x.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},x.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e},x.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=x.EdgeSide.esLeft,e.OutIdx=x.ClipperBase.Unassigned),null!=(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=x.EdgeSide.esRight,e.OutIdx=x.ClipperBase.Unassigned),t=t.Next}},x.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=x.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=x.PolyFillType.pftEvenOdd,this.m_SubjFillType=x.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,x.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=x.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t)},x.Clipper.ioReverseSolution=1,x.Clipper.ioStrictlySimple=2,x.Clipper.ioPreserveCollinear=4,x.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),x.ClipperBase.prototype.Clear.call(this))},x.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},x.Clipper.prototype.Reset=function(){x.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},x.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new x.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){(n=new x.Scanbeam).Y=t,n.Next=this.m_Scanbeam,this.m_Scanbeam=n}else{for(var e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t==e.Y)return;var n;(n=new x.Scanbeam).Y=t,n.Next=e.Next,e.Next=n}},x.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,n=t[1]instanceof x.PolyTree;if(4==e&&!n){var r=t[0],i=t[1],o=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&x.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,x.Clear(i),this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{(l=this.ExecuteInternal())&&this.BuildResult(i)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(4==e&&n){r=t[0];var s=t[1];o=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var l;(l=this.ExecuteInternal())&&this.BuildResult2(s)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(2==e&&!n){r=t[0],i=t[1];return this.Execute(r,i,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}if(2==e&&n){r=t[0],s=t[1];return this.Execute(r,s,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}},x.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},x.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),x.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var n=0,r=this.m_PolyOuts.length;n<r;n++){null===(i=this.m_PolyOuts[n]).Pts||i.IsOpen||(i.IsHole^this.ReverseSolution)==0<this.Area(i)&&this.ReversePolyPtLinks(i.Pts)}this.JoinCommonEdges();for(n=0,r=this.m_PolyOuts.length;n<r;n++){var i;null===(i=this.m_PolyOuts[n]).Pts||i.IsOpen||this.FixupOutPolygon(i)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{x.Clear(this.m_Joins),x.Clear(this.m_GhostJoins)}},x.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam=this.m_Scanbeam.Next,t},x.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);x.Clear(this.m_PolyOuts)},x.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},x.Clipper.prototype.AddJoin=function(t,e,n){var r=new x.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=n.X,r.OffPt.Y=n.Y,this.m_Joins.push(r)},x.Clipper.prototype.AddGhostJoin=function(t,e){var n=new x.Join;n.OutPt1=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,this.m_GhostJoins.push(n)},x.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===e?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):(null==n?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot))):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,n,e.Bot))),this.InsertScanbeam(e.Top.Y)),null!=n&&(x.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),null!=e&&null!=n){if(null!==r&&x.ClipperBase.IsHorizontal(n)&&0<this.m_GhostJoins.length&&0!==n.WindDelta)for(var i=0,o=this.m_GhostJoins.length;i<o;i++){var a=this.m_GhostJoins[i];this.HorzSegmentsOverlap(a.OutPt1.Pt.X,a.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(a.OutPt1,r,a.OffPt)}if(0<=e.OutIdx&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&0<=e.PrevInAEL.OutIdx&&x.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var s=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,s,e.Top)}if(e.NextInAEL!=n){if(0<=n.OutIdx&&0<=n.PrevInAEL.OutIdx&&x.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta){s=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(r,s,n.Top)}var l=e.NextInAEL;if(null!==l)for(;l!=n;)this.IntersectEdges(n,l,e.Curr,!1),l=l.NextInAEL}}}},x.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),(t.PrevInAEL=e).NextInAEL=t}},x.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<x.Clipper.TopX(t,e.Top.Y):t.Top.X>x.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},x.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==x.PolyType.ptSubject?this.m_SubjFillType==x.PolyFillType.pftEvenOdd:this.m_ClipFillType==x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==x.PolyType.ptSubject?this.m_ClipFillType==x.PolyFillType.pftEvenOdd:this.m_SubjFillType==x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.PolyTyp==x.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case x.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case x.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case x.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case x.ClipType.ctIntersection:switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case x.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return t.WindCnt2<0}case x.ClipType.ctUnion:switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return 0===t.WindCnt2;case x.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return 0<=t.WindCnt2}case x.ClipType.ctDifference:if(t.PolyTyp==x.PolyType.ptSubject)switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return 0===t.WindCnt2;case x.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return 0<=t.WindCnt2}else switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case x.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return t.WindCnt2<0}case x.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(n){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return 0===t.WindCnt2;case x.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return 0<=t.WindCnt2}}return!0},x.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=x.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var n=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp==e.PolyTyp&&0!==r.WindDelta&&(n=!n),r=r.PrevInAEL;t.WindCnt=n?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?1<Math.abs(e.WindCnt)?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},x.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?((this.m_SortedEdges=t).PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},x.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},x.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e)null!==(n=e.NextInAEL)&&(n.PrevInAEL=t),null!==(r=t.PrevInAEL)&&(r.NextInAEL=e),e.PrevInAEL=r,(e.NextInAEL=t).PrevInAEL=e,t.NextInAEL=n;else if(e.NextInAEL==t){null!==(n=t.NextInAEL)&&(n.PrevInAEL=e),null!==(r=e.PrevInAEL)&&(r.NextInAEL=t),t.PrevInAEL=r,(t.NextInAEL=e).PrevInAEL=t,e.NextInAEL=n}else{var n=t.NextInAEL,r=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=n,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=r,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},x.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e)null!==(n=e.NextInSEL)&&(n.PrevInSEL=t),null!==(r=t.PrevInSEL)&&(r.NextInSEL=e),e.PrevInSEL=r,(e.NextInSEL=t).PrevInSEL=e,t.NextInSEL=n;else if(e.NextInSEL==t){null!==(n=t.NextInSEL)&&(n.PrevInSEL=e),null!==(r=e.PrevInSEL)&&(r.NextInSEL=t),t.PrevInSEL=r,(t.NextInSEL=e).PrevInSEL=t,e.NextInSEL=n}else{var n=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},x.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),0==e.WindDelta&&this.AddOutPt(e,n),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},x.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var r,i,o;if(x.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(r=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,t.Side=x.EdgeSide.esLeft,e.Side=x.EdgeSide.esRight,o=(i=t).PrevInAEL==e?e.PrevInAEL:i.PrevInAEL):(r=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,t.Side=x.EdgeSide.esRight,e.Side=x.EdgeSide.esLeft,o=(i=e).PrevInAEL==t?t.PrevInAEL:i.PrevInAEL),null!==o&&0<=o.OutIdx&&x.Clipper.TopX(o,n.Y)==x.Clipper.TopX(i,n.Y)&&x.ClipperBase.SlopesEqual(i,o,this.m_UseFullRange)&&0!==i.WindDelta&&0!==o.WindDelta){var a=this.AddOutPt(o,n);this.AddJoin(r,a,i.Top)}return r},x.Clipper.prototype.CreateOutRec=function(){var t=new x.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},x.Clipper.prototype.AddOutPt=function(t,e){var n=t.Side==x.EdgeSide.esLeft;if(t.OutIdx<0){(i=this.CreateOutRec()).IsOpen=0===t.WindDelta;var r=new x.OutPt;return(i.Pts=r).Idx=i.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,(r.Next=r).Prev=r,i.IsOpen||this.SetHoleState(t,i),t.OutIdx=i.Idx,r}var i,o=(i=this.m_PolyOuts[t.OutIdx]).Pts;return n&&x.IntPoint.op_Equality(e,o.Pt)?o:!n&&x.IntPoint.op_Equality(e,o.Prev.Pt)?o.Prev:((r=new x.OutPt).Idx=i.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,r.Next=o,r.Prev=o.Prev,r.Prev.Next=r,o.Prev=r,n&&(i.Pts=r),r)},x.Clipper.prototype.SwapPoints=function(t,e){var n=new x.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=n.X,e.Value.Y=n.Y},x.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,r){var i;return e<t&&(i=t,t=e,e=i),r<n&&(i=n,n=r,r=i),t<r&&n<e},x.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,r=t.PrevInAEL;null!==r;)0<=r.OutIdx&&0!=r.WindDelta&&(n=!n,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[r.OutIdx])),r=r.PrevInAEL;n&&(e.IsHole=!0)},x.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?x.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},x.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.Prev;x.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;var r=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;x.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;var i=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=e.Prev;x.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Prev;var o=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;x.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Next;var a=Math.abs(this.GetDx(e.Pt,n.Pt));return o<=r&&a<=r||o<=i&&a<=i},x.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.Next;n!=t;)n.Pt.Y>t.Pt.Y?(t=n,e=null):n.Pt.Y==t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(e=null,t=n):n.Next!=t&&n.Prev!=t&&(e=n)),n=n.Next;if(null!==e)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.Next;x.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},x.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,r=e.BottomPt;return n.Pt.Y>r.Pt.Y?t:n.Pt.Y<r.Pt.Y?e:n.Pt.X<r.Pt.X?t:n.Pt.X>r.Pt.X?e:n.Next==n?e:r.Next==r?t:this.FirstIsBottomPt(n,r)?t:e},x.Clipper.prototype.Param1RightOfParam2=function(t,e){do{if((t=t.FirstLeft)==e)return!0}while(null!==t);return!1},x.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},x.Clipper.prototype.AppendPolygon=function(t,e){var n,r=this.m_PolyOuts[t.OutIdx],i=this.m_PolyOuts[e.OutIdx];n=this.Param1RightOfParam2(r,i)?i:this.Param1RightOfParam2(i,r)?r:this.GetLowermostRec(r,i);var o,a=r.Pts,s=a.Prev,l=i.Pts,u=l.Prev;t.Side==x.EdgeSide.esLeft?(e.Side==x.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),(l.Next=a).Prev=l,(s.Next=u).Prev=s,r.Pts=u):((u.Next=a).Prev=u,(l.Prev=s).Next=l,r.Pts=l),o=x.EdgeSide.esLeft):(e.Side==x.EdgeSide.esRight?(this.ReversePolyPtLinks(l),(s.Next=u).Prev=s,(l.Next=a).Prev=l):((s.Next=l).Prev=s,(a.Prev=u).Next=a),o=x.EdgeSide.esRight),r.BottomPt=null,n==i&&(i.FirstLeft!=r&&(r.FirstLeft=i.FirstLeft),r.IsHole=i.IsHole),i.Pts=null,i.BottomPt=null,i.FirstLeft=r;var c=t.OutIdx,h=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var f=this.m_ActiveEdges;null!==f;){if(f.OutIdx==h){f.OutIdx=c,f.Side=o;break}f=f.NextInAEL}i.Idx=r.Idx},x.Clipper.prototype.ReversePolyPtLinks=function(t){var e,n;if(null!==t)for(e=t;n=e.Next,e.Next=e.Prev,e.Prev=n,(e=n)!=t;);},x.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},x.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},x.Clipper.prototype.IntersectEdges=function(t,e,n){var r=0<=t.OutIdx,i=0<=e.OutIdx;if(0!==t.WindDelta&&0!==e.WindDelta){if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=o}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var a,s,l,u,c,h;switch(t.PolyTyp==x.PolyType.ptSubject?(a=this.m_SubjFillType,l=this.m_ClipFillType):(a=this.m_ClipFillType,l=this.m_SubjFillType),e.PolyTyp==x.PolyType.ptSubject?(s=this.m_SubjFillType,u=this.m_ClipFillType):(s=this.m_ClipFillType,u=this.m_SubjFillType),a){case x.PolyFillType.pftPositive:c=t.WindCnt;break;case x.PolyFillType.pftNegative:c=-t.WindCnt;break;default:c=Math.abs(t.WindCnt)}switch(s){case x.PolyFillType.pftPositive:h=e.WindCnt;break;case x.PolyFillType.pftNegative:h=-e.WindCnt;break;default:h=Math.abs(e.WindCnt)}if(r&&i)0!=c&&1!=c||0!=h&&1!=h||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=x.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):(this.AddOutPt(t,n),this.AddOutPt(e,n),x.Clipper.SwapSides(t,e),x.Clipper.SwapPolyIndexes(t,e));else if(r)0!==h&&1!=h||(this.AddOutPt(t,n),x.Clipper.SwapSides(t,e),x.Clipper.SwapPolyIndexes(t,e));else if(i)0!==c&&1!=c||(this.AddOutPt(e,n),x.Clipper.SwapSides(t,e),x.Clipper.SwapPolyIndexes(t,e));else if(!(0!=c&&1!=c||0!=h&&1!=h)){var f,p;switch(l){case x.PolyFillType.pftPositive:f=t.WindCnt2;break;case x.PolyFillType.pftNegative:f=-t.WindCnt2;break;default:f=Math.abs(t.WindCnt2)}switch(u){case x.PolyFillType.pftPositive:p=e.WindCnt2;break;case x.PolyFillType.pftNegative:p=-e.WindCnt2;break;default:p=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,n);else if(1==c&&1==h)switch(this.m_ClipType){case x.ClipType.ctIntersection:0<f&&0<p&&this.AddLocalMinPoly(t,e,n);break;case x.ClipType.ctUnion:f<=0&&p<=0&&this.AddLocalMinPoly(t,e,n);break;case x.ClipType.ctDifference:(t.PolyTyp==x.PolyType.ptClip&&0<f&&0<p||t.PolyTyp==x.PolyType.ptSubject&&f<=0&&p<=0)&&this.AddLocalMinPoly(t,e,n);break;case x.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else x.Clipper.SwapSides(t,e)}}else{if(0==t.WindDelta&&0==e.WindDelta)return;t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==x.ClipType.ctUnion?0===t.WindDelta?i&&(this.AddOutPt(t,n),r&&(t.OutIdx=-1)):r&&(this.AddOutPt(e,n),i&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==x.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==x.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,n),i&&(e.OutIdx=-1)):(this.AddOutPt(t,n),r&&(t.OutIdx=-1)))}},x.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;null===e&&null===n&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},x.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;null===e&&null===n&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},x.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&x.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=n,x.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},x.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},x.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=x.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=x.Direction.dRightToLeft)},x.Clipper.prototype.ProcessHorizontal=function(t,e){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,n);for(var r=n.Dir,i=n.Left,o=n.Right,a=t,s=null;null!==a.NextInLML&&x.ClipperBase.IsHorizontal(a.NextInLML);)a=a.NextInLML;for(null===a.NextInLML&&(s=this.GetMaximaPair(a));;){for(var l=t==a,u=this.GetNextInAEL(t,r);null!==u&&!(u.Curr.X==t.Top.X&&null!==t.NextInLML&&u.Dx<t.NextInLML.Dx);){var c=this.GetNextInAEL(u,r);if(r==x.Direction.dLeftToRight&&u.Curr.X<=o||r==x.Direction.dRightToLeft&&u.Curr.X>=i){if(u==s&&l){if(0<=t.OutIdx){for(var h=this.AddOutPt(t,t.Top),f=this.m_SortedEdges;null!==f;){if(0<=f.OutIdx&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,f.Bot.X,f.Top.X)){var p=this.AddOutPt(f,f.Bot);this.AddJoin(p,h,f.Top)}f=f.NextInSEL}this.AddGhostJoin(h,t.Bot),this.AddLocalMaxPoly(t,s,t.Top)}return this.DeleteFromAEL(t),void this.DeleteFromAEL(s)}if(r==x.Direction.dLeftToRight){var d=new x.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(t,u,d)}else{d=new x.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(u,t,d)}this.SwapPositionsInAEL(t,u)}else if(r==x.Direction.dLeftToRight&&u.Curr.X>=o||r==x.Direction.dRightToLeft&&u.Curr.X<=i)break;u=c}if(null===t.NextInLML||!x.ClipperBase.IsHorizontal(t.NextInLML))break;0<=(t=this.UpdateEdgeIntoAEL(t)).OutIdx&&this.AddOutPt(t,t.Bot);n={Dir:r,Left:i,Right:o};this.GetHorzDirection(t,n),r=n.Dir,i=n.Left,o=n.Right}if(null!==t.NextInLML)if(0<=t.OutIdx){h=this.AddOutPt(t,t.Top);if(e&&this.AddGhostJoin(h,t.Bot),0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var g=t.PrevInAEL;c=t.NextInAEL;if(null!==g&&g.Curr.X==t.Bot.X&&g.Curr.Y==t.Bot.Y&&0!==g.WindDelta&&0<=g.OutIdx&&g.Curr.Y>g.Top.Y&&x.ClipperBase.SlopesEqual(t,g,this.m_UseFullRange)){p=this.AddOutPt(g,t.Bot);this.AddJoin(h,p,t.Top)}else if(null!==c&&c.Curr.X==t.Bot.X&&c.Curr.Y==t.Bot.Y&&0!==c.WindDelta&&0<=c.OutIdx&&c.Curr.Y>c.Top.Y&&x.ClipperBase.SlopesEqual(t,c,this.m_UseFullRange)){p=this.AddOutPt(c,t.Bot);this.AddJoin(h,p,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else 0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},x.Clipper.prototype.GetNextInAEL=function(t,e){return e==x.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},x.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},x.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},x.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},x.Clipper.prototype.GetMaximaPair=function(t){var e=null;return x.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:x.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||x.ClipperBase.IsHorizontal(e))?e:null},x.Clipper.prototype.ProcessIntersections=function(t){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,x.Error("ProcessIntersections error")}return!(this.m_SortedEdges=null)},x.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=x.Clipper.TopX(e,t),e=e.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var r=e.NextInSEL,i=new x.IntPoint;if(e.Curr.X>r.Curr.X){this.IntersectPoint(e,r,i);var o=new x.IntersectNode;o.Edge1=e,o.Edge2=r,o.Pt.X=i.X,o.Pt.Y=i.Y,this.m_IntersectList.push(o),this.SwapPositionsInSEL(e,r),n=!0}else e=r}if(null===e.PrevInSEL)break;e.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},x.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},x.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},x.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;n<t&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==t)return!1;var r=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=r}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},x.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0};i.msie?x.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.round(t)}:i.chromium?x.Clipper.Round=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)}:i.safari?x.Clipper.Round=function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:2147483647<(t+=.5)?Math.floor(t):0|t}:x.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},x.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+x.Clipper.Round(t.Dx*(e-t.Bot.Y))},x.Clipper.prototype.IntersectPoint=function(t,e,n){var r,i;if(n.X=0,n.Y=0,t.Dx==e.Dx)return n.Y=t.Curr.Y,void(n.X=x.Clipper.TopX(t,n.Y));if(0===t.Delta.X)n.X=t.Bot.X,x.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(i=e.Bot.Y-e.Bot.X/e.Dx,n.Y=x.Clipper.Round(n.X/e.Dx+i));else if(0===e.Delta.X)n.X=e.Bot.X,x.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,n.Y=x.Clipper.Round(n.X/t.Dx+r));else{r=t.Bot.X-t.Bot.Y*t.Dx;var o=((i=e.Bot.X-e.Bot.Y*e.Dx)-r)/(t.Dx-e.Dx);n.Y=x.Clipper.Round(o),Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=x.Clipper.Round(t.Dx*o+r):n.X=x.Clipper.Round(e.Dx*o+i)}if(n.Y<t.Top.Y||n.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return n.Y=t.Top.Y,n.X=x.Clipper.TopX(e,t.Top.Y),n.X<t.Top.X;n.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=x.Clipper.TopX(t,n.Y):n.X=x.Clipper.TopX(e,n.Y)}n.Y>t.Curr.Y&&(n.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(e.Dx)?n.X=x.Clipper.TopX(e,n.Y):n.X=x.Clipper.TopX(t,n.Y))},x.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var n=this.IsMaxima(e,t);if(n){var r=this.GetMaximaPair(e);n=null===r||!x.ClipperBase.IsHorizontal(r)}if(n){var i=e.PrevInAEL;this.DoMaxima(e),e=null===i?this.m_ActiveEdges:i.NextInAEL}else{if(this.IsIntermediate(e,t)&&x.ClipperBase.IsHorizontal(e.NextInLML)?(0<=(e=this.UpdateEdgeIntoAEL(e)).OutIdx&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=x.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){i=e.PrevInAEL;if(0<=e.OutIdx&&0!==e.WindDelta&&null!==i&&0<=i.OutIdx&&i.Curr.X==e.Curr.X&&0!==i.WindDelta){var o=new x.IntPoint(e.Curr);0;var a=this.AddOutPt(i,o),s=this.AddOutPt(e,o);this.AddJoin(a,s,o)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){a=null;0<=e.OutIdx&&(a=this.AddOutPt(e,e.Top));i=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var l=e.NextInAEL;if(null!==i&&i.Curr.X==e.Bot.X&&i.Curr.Y==e.Bot.Y&&null!==a&&0<=i.OutIdx&&i.Curr.Y>i.Top.Y&&x.ClipperBase.SlopesEqual(e,i,this.m_UseFullRange)&&0!==e.WindDelta&&0!==i.WindDelta){s=this.AddOutPt(i,e.Bot);this.AddJoin(a,s,e.Top)}else if(null!==l&&l.Curr.X==e.Bot.X&&l.Curr.Y==e.Bot.Y&&null!==a&&0<=l.OutIdx&&l.Curr.Y>l.Top.Y&&x.ClipperBase.SlopesEqual(e,l,this.m_UseFullRange)&&0!==e.WindDelta&&0!==l.WindDelta){s=this.AddOutPt(l,e.Bot);this.AddJoin(a,s,e.Top)}}e=e.NextInAEL}},x.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return 0<=t.OutIdx&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var n=t.NextInAEL;null!==n&&n!=e;)this.IntersectEdges(t,n,t.Top),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):0<=t.OutIdx&&0<=e.OutIdx?(0<=t.OutIdx&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):0===t.WindDelta?(0<=t.OutIdx&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),0<=e.OutIdx&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):x.Error("DoMaxima error")},x.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;e<n;e++)t[e].reverse()},x.Clipper.Orientation=function(t){return 0<=x.Clipper.Area(t)},x.Clipper.prototype.PointCount=function(t){if(null===t)return 0;for(var e=0,n=t;e++,(n=n.Next)!=t;);return e},x.Clipper.prototype.BuildResult=function(t){x.Clear(t);for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){var i=r.Pts.Prev,o=this.PointCount(i);if(!(o<2)){for(var a=new Array(o),s=0;s<o;s++)a[s]=i.Pt,i=i.Prev;t.push(a)}}}},x.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var r=this.m_PolyOuts[e],i=this.PointCount(r.Pts);if(!(r.IsOpen&&i<2||!r.IsOpen&&i<3)){this.FixHoleLinkage(r);var o=new x.PolyNode;t.m_AllPolys.push(o),(r.PolyNode=o).m_polygon.length=i;for(var a=r.Pts.Prev,s=0;s<i;s++)o.m_polygon[s]=a.Pt,a=a.Prev}}for(e=0,n=this.m_PolyOuts.length;e<n;e++){null!==(r=this.m_PolyOuts[e]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},x.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var n=t.Pts;;){if(n.Prev==n||n.Prev==n.Next)return void(t.Pts=null);if(x.IntPoint.op_Equality(n.Pt,n.Next.Pt)||x.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||x.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))e=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n==e)break;null===e&&(e=n),n=n.Next}}t.Pts=n},x.Clipper.prototype.DupOutPt=function(t,e){var n=new x.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,n.Idx=t.Idx,e?(n.Next=t.Next,(n.Prev=t).Next.Prev=n,t.Next=n):(n.Prev=t.Prev,(n.Next=t).Prev.Next=n,t.Prev=n),n},x.Clipper.prototype.GetOverlap=function(t,e,n,r,i){return t<e?n<r?(i.Left=Math.max(t,n),i.Right=Math.min(e,r)):(i.Left=Math.max(t,r),i.Right=Math.min(e,n)):n<r?(i.Left=Math.max(e,n),i.Right=Math.min(t,r)):(i.Left=Math.max(e,r),i.Right=Math.min(t,n)),i.Left<i.Right},x.Clipper.prototype.JoinHorz=function(t,e,n,r,i,o){var a=t.Pt.X>e.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight,s=n.Pt.X>r.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight;if(a==s)return!1;if(a==x.Direction.dLeftToRight){for(;t.Next.Pt.X<=i.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;o&&t.Pt.X!=i.X&&(t=t.Next),e=this.DupOutPt(t,!o),x.IntPoint.op_Inequality(e.Pt,i)&&((t=e).Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=i.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;o||t.Pt.X==i.X||(t=t.Next),e=this.DupOutPt(t,o),x.IntPoint.op_Inequality(e.Pt,i)&&((t=e).Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,o))}if(s==x.Direction.dLeftToRight){for(;n.Next.Pt.X<=i.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;o&&n.Pt.X!=i.X&&(n=n.Next),r=this.DupOutPt(n,!o),x.IntPoint.op_Inequality(r.Pt,i)&&((n=r).Pt.X=i.X,n.Pt.Y=i.Y,r=this.DupOutPt(n,!o))}else{for(;n.Next.Pt.X>=i.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;o||n.Pt.X==i.X||(n=n.Next),r=this.DupOutPt(n,o),x.IntPoint.op_Inequality(r.Pt,i)&&((n=r).Pt.X=i.X,n.Pt.Y=i.Y,r=this.DupOutPt(n,o))}return a==x.Direction.dLeftToRight==o?((t.Prev=n).Next=t,(e.Next=r).Prev=e):((t.Next=n).Prev=t,(e.Prev=r).Next=e),!0},x.Clipper.prototype.JoinPoints=function(t,e,n){var r=t.OutPt1,i=new x.OutPt,o=t.OutPt2,a=new x.OutPt,s=t.OutPt1.Pt.Y==t.OffPt.Y;if(s&&x.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&x.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!=n)return!1;for(i=t.OutPt1.Next;i!=r&&x.IntPoint.op_Equality(i.Pt,t.OffPt);)i=i.Next;var l=i.Pt.Y>t.OffPt.Y;for(a=t.OutPt2.Next;a!=o&&x.IntPoint.op_Equality(a.Pt,t.OffPt);)a=a.Next;return l!=a.Pt.Y>t.OffPt.Y&&(l?(i=this.DupOutPt(r,!1),a=this.DupOutPt(o,!0),(r.Prev=o).Next=r,(i.Next=a).Prev=i):(i=this.DupOutPt(r,!0),a=this.DupOutPt(o,!1),(r.Next=o).Prev=r,(i.Prev=a).Next=i),t.OutPt1=r,t.OutPt2=i,!0)}if(s){for(i=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=i&&r.Prev!=o;)r=r.Prev;for(;i.Next.Pt.Y==i.Pt.Y&&i.Next!=r&&i.Next!=o;)i=i.Next;if(i.Next==r||i.Next==o)return!1;for(a=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=a&&o.Prev!=i;)o=o.Prev;for(;a.Next.Pt.Y==a.Pt.Y&&a.Next!=o&&a.Next!=r;)a=a.Next;if(a.Next==o||a.Next==r)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,i.Pt.X,o.Pt.X,a.Pt.X,u))return!1;var c,h=u.Left,f=u.Right,p=new x.IntPoint;return r.Pt.X>=h&&r.Pt.X<=f?(p.X=r.Pt.X,p.Y=r.Pt.Y,c=r.Pt.X>i.Pt.X):o.Pt.X>=h&&o.Pt.X<=f?(p.X=o.Pt.X,p.Y=o.Pt.Y,c=o.Pt.X>a.Pt.X):i.Pt.X>=h&&i.Pt.X<=f?(p.X=i.Pt.X,p.Y=i.Pt.Y,c=i.Pt.X>r.Pt.X):(p.X=a.Pt.X,p.Y=a.Pt.Y,c=a.Pt.X>o.Pt.X),t.OutPt1=r,t.OutPt2=o,this.JoinHorz(r,i,o,a,p,c)}for(i=r.Next;x.IntPoint.op_Equality(i.Pt,r.Pt)&&i!=r;)i=i.Next;var d=i.Pt.Y>r.Pt.Y||!x.ClipperBase.SlopesEqual(r.Pt,i.Pt,t.OffPt,this.m_UseFullRange);if(d){for(i=r.Prev;x.IntPoint.op_Equality(i.Pt,r.Pt)&&i!=r;)i=i.Prev;if(i.Pt.Y>r.Pt.Y||!x.ClipperBase.SlopesEqual(r.Pt,i.Pt,t.OffPt,this.m_UseFullRange))return!1}for(a=o.Next;x.IntPoint.op_Equality(a.Pt,o.Pt)&&a!=o;)a=a.Next;var g=a.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual(o.Pt,a.Pt,t.OffPt,this.m_UseFullRange);if(g){for(a=o.Prev;x.IntPoint.op_Equality(a.Pt,o.Pt)&&a!=o;)a=a.Prev;if(a.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual(o.Pt,a.Pt,t.OffPt,this.m_UseFullRange))return!1}return i!=r&&a!=o&&i!=a&&(e!=n||d!=g)&&(d?(i=this.DupOutPt(r,!1),a=this.DupOutPt(o,!0),(r.Prev=o).Next=r,(i.Next=a).Prev=i):(i=this.DupOutPt(r,!0),a=this.DupOutPt(o,!1),(r.Next=o).Prev=r,(i.Prev=a).Next=i),t.OutPt1=r,t.OutPt2=i,!0)},x.Clipper.GetBounds=function(t){for(var e=0,n=t.length;e<n&&0==t[e].length;)e++;if(e==n)return new x.IntRect(0,0,0,0);var r=new x.IntRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;e<n;e++)for(var i=0,o=t[e].length;i<o;i++)t[e][i].X<r.left?r.left=t[e][i].X:t[e][i].X>r.right&&(r.right=t[e][i].X),t[e][i].Y<r.top?r.top=t[e][i].Y:t[e][i].Y>r.bottom&&(r.bottom=t[e][i].Y);return r},x.Clipper.prototype.GetBounds2=function(t){var e=t,n=new x.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},x.Clipper.PointInPolygon=function(t,e){var n=0,r=e.length;if(r<3)return 0;for(var i=e[0],o=1;o<=r;++o){var a=o==r?e[0]:e[o];if(a.Y==t.Y&&(a.X==t.X||i.Y==t.Y&&a.X>t.X==i.X<t.X))return-1;if(i.Y<t.Y!=a.Y<t.Y)if(i.X>=t.X)if(a.X>t.X)n=1-n;else{if(0==(s=(i.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(i.Y-t.Y)))return-1;0<s==a.Y>i.Y&&(n=1-n)}else if(a.X>t.X){var s;if(0==(s=(i.X-t.X)*(a.Y-t.Y)-(a.X-t.X)*(i.Y-t.Y)))return-1;0<s==a.Y>i.Y&&(n=1-n)}i=a}return n},x.Clipper.prototype.PointInPolygon=function(t,e){var n=0,r=e,i=t.X,o=t.Y,a=e.Pt.X,s=e.Pt.Y;do{var l=(e=e.Next).Pt.X,u=e.Pt.Y;if(u==o&&(l==i||s==o&&i<l==a<i))return-1;if(s<o!=u<o)if(i<=a)if(i<l)n=1-n;else{if(0==(c=(a-i)*(u-o)-(l-i)*(s-o)))return-1;0<c==s<u&&(n=1-n)}else if(i<l){var c;if(0==(c=(a-i)*(u-o)-(l-i)*(s-o)))return-1;0<c==s<u&&(n=1-n)}a=l,s=u}while(r!=e);return n},x.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var r=this.PointInPolygon(n.Pt,e);if(0<=r)return 0<r;n=n.Next}while(n!=t);return!0},x.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n=0,r=this.m_PolyOuts.length;n<r;n++){var i=this.m_PolyOuts[n];if(null!=i.Pts&&null!=i.FirstLeft)this.ParseFirstLeft(i.FirstLeft)==t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)}},x.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n=0,r=this.m_PolyOuts,i=r.length,o=r[n];n<i;o=r[++n])o.FirstLeft==t&&(o.FirstLeft=e)},x.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},x.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var n,r=this.m_Joins[t],i=this.GetOutRec(r.OutPt1.Idx),o=this.GetOutRec(r.OutPt2.Idx);if(null!=i.Pts&&null!=o.Pts)if(n=i==o?i:this.Param1RightOfParam2(i,o)?o:this.Param1RightOfParam2(o,i)?i:this.GetLowermostRec(i,o),this.JoinPoints(r,i,o))if(i==o){if(i.Pts=r.OutPt1,i.BottomPt=null,(o=this.CreateOutRec()).Pts=r.OutPt2,this.UpdateOutPtIdxs(o),this.m_UsingPolyTree)for(var a=0,s=this.m_PolyOuts.length;a<s-1;a++){var l=this.m_PolyOuts[a];null!=l.Pts&&x.Clipper.ParseFirstLeft(l.FirstLeft)==i&&l.IsHole!=i.IsHole&&(this.Poly2ContainsPoly1(l.Pts,r.OutPt2)&&(l.FirstLeft=o))}this.Poly2ContainsPoly1(o.Pts,i.Pts)?(o.IsHole=!i.IsHole,o.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,i),(o.IsHole^this.ReverseSolution)==0<this.Area(o)&&this.ReversePolyPtLinks(o.Pts)):this.Poly2ContainsPoly1(i.Pts,o.Pts)?(o.IsHole=i.IsHole,i.IsHole=!o.IsHole,o.FirstLeft=i.FirstLeft,i.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,o),(i.IsHole^this.ReverseSolution)==0<this.Area(i)&&this.ReversePolyPtLinks(i.Pts)):(o.IsHole=i.IsHole,o.FirstLeft=i.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(i,o))}else o.Pts=null,o.BottomPt=null,o.Idx=i.Idx,i.IsHole=n.IsHole,n==o&&(i.FirstLeft=o.FirstLeft),o.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,i)}},x.Clipper.prototype.UpdateOutPtIdxs=function(t){for(var e=t.Pts;e.Idx=t.Idx,(e=e.Prev)!=t.Pts;);},x.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],n=e.Pts;if(null!=n&&!e.IsOpen)do{for(var r=n.Next;r!=e.Pts;){if(x.IntPoint.op_Equality(n.Pt,r.Pt)&&r.Next!=n&&r.Prev!=n){var i=n.Prev,o=r.Prev;(n.Prev=o).Next=n,(r.Prev=i).Next=r,e.Pts=n;var a=this.CreateOutRec();a.Pts=r,this.UpdateOutPtIdxs(a),this.Poly2ContainsPoly1(a.Pts,e.Pts)?(a.IsHole=!e.IsHole,a.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,e)):this.Poly2ContainsPoly1(e.Pts,a.Pts)?(a.IsHole=e.IsHole,e.IsHole=!a.IsHole,a.FirstLeft=e.FirstLeft,e.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,a)):(a.IsHole=e.IsHole,a.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,a)),r=n}r=r.Next}n=n.Next}while(n!=e.Pts)}},x.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var n=0,r=0,i=e-1;r<e;++r)n+=(t[i].X+t[r].X)*(t[i].Y-t[r].Y),i=r;return.5*-n},x.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;for(var n=0;n+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),(e=e.Next)!=t.Pts;);return.5*n},x.Clipper.SimplifyPolygon=function(t,e){var n=new Array,r=new x.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,x.PolyType.ptSubject,!0),r.Execute(x.ClipType.ctUnion,n,e,e),n},x.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=x.PolyFillType.pftEvenOdd);var n=new Array,r=new x.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,x.PolyType.ptSubject,!0),r.Execute(x.ClipType.ctUnion,n,e,e),n},x.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r},x.Clipper.DistanceFromLineSqrd=function(t,e,n){var r=e.Y-n.Y,i=n.X-e.X,o=r*e.X+i*e.Y;return(o=r*t.X+i*t.Y-o)*o/(r*r+i*i)},x.Clipper.SlopesNearCollinear=function(t,e,n,r){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<n.X?x.Clipper.DistanceFromLineSqrd(t,e,n)<r:e.X>t.X==e.X<n.X?x.Clipper.DistanceFromLineSqrd(e,t,n)<r:x.Clipper.DistanceFromLineSqrd(n,t,e)<r:t.Y>e.Y==t.Y<n.Y?x.Clipper.DistanceFromLineSqrd(t,e,n)<r:e.Y>t.Y==e.Y<n.Y?x.Clipper.DistanceFromLineSqrd(e,t,n)<r:x.Clipper.DistanceFromLineSqrd(n,t,e)<r},x.Clipper.PointsAreClose=function(t,e,n){var r=t.X-e.X,i=t.Y-e.Y;return r*r+i*i<=n},x.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,(t.Next.Prev=e).Idx=0,e},x.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var n=t.length;if(0==n)return new Array;for(var r=new Array(n),i=0;i<n;++i)r[i]=new x.OutPt;for(i=0;i<n;++i)r[i].Pt=t[i],r[i].Next=r[(i+1)%n],r[i].Next.Prev=r[i],r[i].Idx=0;for(var o=e*e,a=r[0];0==a.Idx&&a.Next!=a.Prev;)x.Clipper.PointsAreClose(a.Pt,a.Prev.Pt,o)?(a=x.Clipper.ExcludeOp(a),n--):x.Clipper.PointsAreClose(a.Prev.Pt,a.Next.Pt,o)?(x.Clipper.ExcludeOp(a.Next),a=x.Clipper.ExcludeOp(a),n-=2):x.Clipper.SlopesNearCollinear(a.Prev.Pt,a.Pt,a.Next.Pt,o)?(a=x.Clipper.ExcludeOp(a),n--):(a.Idx=1,a=a.Next);n<3&&(n=0);var s=new Array(n);for(i=0;i<n;++i)s[i]=new x.IntPoint(a.Pt),a=a.Next;return r=null,s},x.Clipper.CleanPolygons=function(t,e){for(var n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=x.Clipper.CleanPolygon(t[r],e);return n},x.Clipper.Minkowski=function(t,e,n,r){var i=r?1:0,o=t.length,a=e.length,s=new Array;if(n)for(var l=0;l<a;l++){for(var u=new Array(o),c=0,h=t.length,f=t[c];c<h;f=t[++c])u[c]=new x.IntPoint(e[l].X+f.X,e[l].Y+f.Y);s.push(u)}else for(l=0;l<a;l++){for(u=new Array(o),c=0,h=t.length,f=t[c];c<h;f=t[++c])u[c]=new x.IntPoint(e[l].X-f.X,e[l].Y-f.Y);s.push(u)}var p=new Array;for(l=0;l<a-1+i;l++)for(c=0;c<o;c++){var d=new Array;d.push(s[l%a][c%o]),d.push(s[(l+1)%a][c%o]),d.push(s[(l+1)%a][(c+1)%o]),d.push(s[l%a][(c+1)%o]),x.Clipper.Orientation(d)||d.reverse(),p.push(d)}return p},x.Clipper.MinkowskiSum=function(t,e,n){if(e[0]instanceof Array){l=e;for(var r=new x.Paths,i=(a=new x.Clipper,0);i<l.length;++i){var o=x.Clipper.Minkowski(t,l[i],!0,n);if(a.AddPaths(o,x.PolyType.ptSubject,!0),n){s=x.Clipper.TranslatePath(l[i],t[0]);a.AddPath(s,x.PolyType.ptClip,!0)}}return a.Execute(x.ClipType.ctUnion,r,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),r}var a,s=e,l=x.Clipper.Minkowski(t,s,!0,n);return(a=new x.Clipper).AddPaths(l,x.PolyType.ptSubject,!0),a.Execute(x.ClipType.ctUnion,l,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),l},x.Clipper.TranslatePath=function(t,e){for(var n=new x.Path,r=0;r<t.length;r++)n.push(new x.IntPoint(t[r].X+e.X,t[r].Y+e.Y));return n},x.Clipper.MinkowskiDiff=function(t,e){var n=x.Clipper.Minkowski(t,e,!1,!0),r=new x.Clipper;return r.AddPaths(n,x.PolyType.ptSubject,!0),r.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),n},x.Clipper.PolyTreeToPaths=function(t){var e=new Array;return x.Clipper.AddPolyNodeToPaths(t,x.Clipper.NodeType.ntAny,e),e},x.Clipper.AddPolyNodeToPaths=function(t,e,n){var r=!0;switch(e){case x.Clipper.NodeType.ntOpen:return;case x.Clipper.NodeType.ntClosed:r=!t.IsOpen}0<t.m_polygon.length&&r&&n.push(t.m_polygon);for(var i=0,o=t.Childs(),a=o.length,s=o[i];i<a;s=o[++i])x.Clipper.AddPolyNodeToPaths(s,e,n)},x.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new x.Paths,n=0,r=t.ChildCount();n<r;n++)t.Childs()[n].IsOpen&&e.push(t.Childs()[n].m_polygon);return e},x.Clipper.ClosedPathsFromPolyTree=function(t){var e=new x.Paths;return x.Clipper.AddPolyNodeToPaths(t,x.Clipper.NodeType.ntClosed,e),e},I(x.Clipper,x.ClipperBase),x.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},x.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=x.ClipperOffset.def_arc_tolerance),this.m_destPolys=new x.Paths,this.m_srcPoly=new x.Path,this.m_destPoly=new x.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new x.IntPoint,this.m_polyNodes=new x.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},x.ClipperOffset.two_pi=6.28318530717959,x.ClipperOffset.def_arc_tolerance=.25,x.ClipperOffset.prototype.Clear=function(){x.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},x.ClipperOffset.Round=x.Clipper.Round,x.ClipperOffset.prototype.AddPath=function(t,e,n){var r=t.length-1;if(!(r<0)){var i=new x.PolyNode;if(i.m_jointype=e,(i.m_endtype=n)==x.EndType.etClosedLine||n==x.EndType.etClosedPolygon)for(;0<r&&x.IntPoint.op_Equality(t[0],t[r]);)r--;i.m_polygon.push(t[0]);for(var o=0,a=0,s=1;s<=r;s++)x.IntPoint.op_Inequality(i.m_polygon[o],t[s])&&(o++,i.m_polygon.push(t[s]),(t[s].Y>i.m_polygon[a].Y||t[s].Y==i.m_polygon[a].Y&&t[s].X<i.m_polygon[a].X)&&(a=o));if(!(n==x.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(i),n==x.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new x.IntPoint(this.m_polyNodes.ChildCount()-1,a);else{var l=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(i.m_polygon[a].Y>l.Y||i.m_polygon[a].Y==l.Y&&i.m_polygon[a].X<l.X)&&(this.m_lowest=new x.IntPoint(this.m_polyNodes.ChildCount()-1,a))}}},x.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var r=0,i=t.length;r<i;r++)this.AddPath(t[r],e,n)},x.ClipperOffset.prototype.FixOrientations=function(){if(0<=this.m_lowest.X&&!x.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((e=this.m_polyNodes.Childs()[t]).m_endtype==x.EndType.etClosedPolygon||e.m_endtype==x.EndType.etClosedLine&&x.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype!=x.EndType.etClosedLine||x.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},x.ClipperOffset.GetUnitNormal=function(t,e){var n=e.X-t.X,r=e.Y-t.Y;if(0==n&&0==r)return new x.DoublePoint(0,0);var i=1/Math.sqrt(n*n+r*r);return n*=i,r*=i,new x.DoublePoint(r,-n)},x.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,x.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){(i=this.m_polyNodes.Childs()[e]).m_endtype==x.EndType.etClosedPolygon&&this.m_destPolys.push(i.m_polygon)}else{var n;2<this.MiterLimit?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,n=this.ArcTolerance<=0?x.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*x.ClipperOffset.def_arc_tolerance?Math.abs(t)*x.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(t));this.m_sin=Math.sin(x.ClipperOffset.two_pi/r),this.m_cos=Math.cos(x.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/x.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];this.m_srcPoly=i.m_polygon;var o=this.m_srcPoly.length;if(!(0==o||t<=0&&(o<3||i.m_endtype!=x.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=o){for(h=this.m_normals.length=0;h<o-1;h++)this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(i.m_endtype==x.EndType.etClosedLine||i.m_endtype==x.EndType.etClosedPolygon?this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new x.DoublePoint(this.m_normals[o-2])),i.m_endtype==x.EndType.etClosedPolygon){var a=o-1;for(h=0;h<o;h++)a=this.OffsetPoint(h,a,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(i.m_endtype==x.EndType.etClosedLine){for(a=o-1,h=0;h<o;h++)a=this.OffsetPoint(h,a,i.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var s=this.m_normals[o-1];for(h=o-1;0<h;h--)this.m_normals[h]=new x.DoublePoint(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.DoublePoint(-s.X,-s.Y),a=0;for(h=o-1;0<=h;h--)a=this.OffsetPoint(h,a,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var l;for(a=0,h=1;h<o-1;++h)a=this.OffsetPoint(h,a,i.m_jointype);if(i.m_endtype==x.EndType.etOpenButt){h=o-1;l=new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[h].X+this.m_normals[h].X*t),x.ClipperOffset.Round(this.m_srcPoly[h].Y+this.m_normals[h].Y*t)),this.m_destPoly.push(l),l=new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[h].X-this.m_normals[h].X*t),x.ClipperOffset.Round(this.m_srcPoly[h].Y-this.m_normals[h].Y*t)),this.m_destPoly.push(l)}else{h=o-1;a=o-2,this.m_sinA=0,this.m_normals[h]=new x.DoublePoint(-this.m_normals[h].X,-this.m_normals[h].Y),i.m_endtype==x.EndType.etOpenSquare?this.DoSquare(h,a):this.DoRound(h,a)}for(h=o-1;0<h;h--)this.m_normals[h]=new x.DoublePoint(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);for(h=(a=o-1)-1;0<h;--h)a=this.OffsetPoint(h,a,i.m_jointype);i.m_endtype==x.EndType.etOpenButt?(l=new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),x.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(l),l=new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),x.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(l)):(a=1,this.m_sinA=0,i.m_endtype==x.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(i.m_jointype==x.JoinType.jtRound)for(var u=1,c=0,h=1;h<=r;h++){this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),x.ClipperOffset.Round(this.m_srcPoly[0].Y+c*t)));var f=u;u=u*this.m_cos-this.m_sin*c,c=f*this.m_sin+c*this.m_cos}else{u=-1,c=-1;for(var h=0;h<4;++h)this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),x.ClipperOffset.Round(this.m_srcPoly[0].Y+c*t))),u<0?u=1:c<0?c=1:u=-1}this.m_destPolys.push(this.m_destPoly)}}}},x.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof x.PolyTree){i=t[0],o=t[1];if(i.Clear(),this.FixOrientations(),this.DoOffset(o),(r=new x.Clipper(0)).AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),0<o)r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{s=x.Clipper.GetBounds(this.m_destPolys);if((a=new x.Path).push(new x.IntPoint(s.left-10,s.bottom+10)),a.push(new x.IntPoint(s.right+10,s.bottom+10)),a.push(new x.IntPoint(s.right+10,s.top-10)),a.push(new x.IntPoint(s.left-10,s.top-10)),r.AddPath(a,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),1==i.ChildCount()&&0<i.Childs()[0].ChildCount()){var e=i.Childs()[0];i.Childs()[0]=e.Childs()[0],i.Childs()[0].m_Parent=i;for(var n=1;n<e.ChildCount();n++)i.AddChild(e.Childs()[n])}else i.Clear()}}else{var r,i=t[0],o=t[1];if(x.Clear(i),this.FixOrientations(),this.DoOffset(o),(r=new x.Clipper(0)).AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),0<o)r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var a,s=x.Clipper.GetBounds(this.m_destPolys);(a=new x.Path).push(new x.IntPoint(s.left-10,s.bottom+10)),a.push(new x.IntPoint(s.right+10,s.bottom+10)),a.push(new x.IntPoint(s.right+10,s.top-10)),a.push(new x.IntPoint(s.left-10,s.top-10)),r.AddPath(a,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),0<i.length&&i.splice(0,1)}}},x.ClipperOffset.prototype.OffsetPoint=function(t,e,n){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,Math.abs(this.m_sinA*this.m_delta)<1){if(0<this.m_normals[e].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[e].Y)return this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),x.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),e}else 1<this.m_sinA?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),x.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new x.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),x.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case x.JoinType.jtMiter:var r=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case x.JoinType.jtSquare:this.DoSquare(t,e);break;case x.JoinType.jtRound:this.DoRound(t,e)}return e=t},x.ClipperOffset.prototype.DoSquare=function(t,e){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*n)),x.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*n)))),this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),x.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))))},x.ClipperOffset.prototype.DoMiter=function(t,e,n){var r=this.m_delta/n;this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*r),x.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*r)))},x.ClipperOffset.prototype.DoRound=function(t,e){for(var n,r=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),i=Math.max(x.Cast_Int32(x.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),1),o=this.m_normals[e].X,a=this.m_normals[e].Y,s=0;s<i;++s)this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+o*this.m_delta),x.ClipperOffset.Round(this.m_srcPoly[t].Y+a*this.m_delta))),o=(n=o)*this.m_cos-this.m_sin*a,a=n*this.m_sin+a*this.m_cos;this.m_destPoly.push(new x.IntPoint(x.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),x.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},x.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},x.JS={},x.JS.AreaOfPolygon=function(t,e){return e||(e=1),x.Clipper.Area(t)/(e*e)},x.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var n=0,r=0;r<t.length;r++)n+=x.Clipper.Area(t[r]);return n/(e*e)},x.JS.BoundsOfPath=function(t,e){return x.JS.BoundsOfPaths([t],e)},x.JS.BoundsOfPaths=function(t,e){e||(e=1);var n=x.Clipper.GetBounds(t);return n.left/=e,n.bottom/=e,n.right/=e,n.top/=e,n},x.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array;t=x.JS.Clone(t);if("number"!=typeof e||null===e)return x.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||e<0)return t;n||(t=[t]);for(var r,i,o,a,s,l,u,c=t.length,h=[],f=0;f<c;f++)if(0!==(r=(i=t[f]).length))if(r<3)o=i,h.push(o);else{for(a=e*e,s=(o=i)[0],u=l=1;u<r;u++)(i[u].X-s.X)*(i[u].X-s.X)+(i[u].Y-s.Y)*(i[u].Y-s.Y)<=a||(o[l]=i[u],s=i[u],l++);s=i[l-1],(i[0].X-s.X)*(i[0].X-s.X)+(i[0].Y-s.Y)*(i[0].Y-s.Y)<=a&&l--,l<r&&o.splice(l,r-l),o.length&&h.push(o)}return!n&&h.length?h=h[0]:n||0!==h.length?n&&0===h.length&&(h=[[]]):h=[],h},x.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,r,i,o,a=t.length,s=new Array(a);for(r=0;r<a;r++){for(n=t[r].length,o=new Array(n),i=0;i<n;i++)o[i]={X:t[r][i].X,Y:t[r][i].Y};s[r]=o}return e||(s=s[0]),s},x.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return x.Error("Tolerance is not a number in Lighten()."),x.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return x.JS.Clone(t);var n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y;t[0]instanceof Array||(t=[t]);var _=t.length,v=e*e,b=[];for(n=0;n<_;n++)if(0!=(s=(i=t[n]).length)){for(o=0;o<1e6;o++){for(a=[],i[(s=i.length)-1].X!=i[0].X||i[s-1].Y!=i[0].Y?(f=1,i.push({X:i[0].X,Y:i[0].Y}),s=i.length):f=0,h=[],r=0;r<s-2;r++)l=i[r],c=i[r+1],u=i[r+2],m=l.X,y=l.Y,p=u.X-m,d=u.Y-y,0===p&&0===d||(1<(g=((c.X-m)*p+(c.Y-y)*d)/(p*p+d*d))?(m=u.X,y=u.Y):0<g&&(m+=p*g,y+=d*g)),(p=c.X-m)*p+(d=c.Y-y)*d<=v&&(h[r+1]=1,r++);for(a.push({X:i[0].X,Y:i[0].Y}),r=1;r<s-1;r++)h[r]||a.push({X:i[r].X,Y:i[r].Y});if(a.push({X:i[s-1].X,Y:i[s-1].Y}),f&&i.pop(),!h.length)break;i=a}a[(s=a.length)-1].X==a[0].X&&a[s-1].Y==a[0].Y&&a.pop(),2<a.length&&b.push(a)}return t[0]instanceof Array||(b=b[0]),void 0===b&&(b=[[]]),b},x.JS.PerimeterOfPath=function(t,e,n){if(void 0===t)return 0;var r,i,o=Math.sqrt,a=0,s=0,l=0,u=0,c=0,h=t.length;if(h<2)return 0;for(e&&(t[h]=t[0],h++);--h;)s=(r=t[h]).X,l=r.Y,a+=o((s-(u=(i=t[h-1]).X))*(s-u)+(l-(c=i.Y))*(l-c));return e&&t.pop(),a/n},x.JS.PerimeterOfPaths=function(t,e,n){n||(n=1);for(var r=0,i=0;i<t.length;i++)r+=x.JS.PerimeterOfPath(t[i],e,n);return r},x.JS.ScaleDownPath=function(t,e){var n,r;for(e||(e=1),n=t.length;n--;)(r=t[n]).X=r.X/e,r.Y=r.Y/e},x.JS.ScaleDownPaths=function(t,e){var n,r,i;for(e||(e=1),n=t.length;n--;)for(r=t[n].length;r--;)(i=t[n][r]).X=i.X/e,i.Y=i.Y/e},x.JS.ScaleUpPath=function(t,e){var n,r,i=Math.round;for(e||(e=1),n=t.length;n--;)(r=t[n]).X=i(r.X*e),r.Y=i(r.Y*e)},x.JS.ScaleUpPaths=function(t,e){var n,r,i,o=Math.round;for(e||(e=1),n=t.length;n--;)for(r=t[n].length;r--;)(i=t[n][r]).X=o(i.X*e),i.Y=o(i.Y*e)},x.ExPolygons=function(){return[]},x.ExPolygon=function(){this.outer=null,this.holes=null},x.JS.AddOuterPolyNodeToExPolygons=function(t,e){var n=new x.ExPolygon;n.outer=t.Contour();var r,i,o,a,s,l,u=t.Childs(),c=u.length;for(n.holes=new Array(c),o=0;o<c;o++)for(r=u[o],n.holes[o]=r.Contour(),a=0,l=(s=r.Childs()).length;a<l;a++)i=s[a],x.JS.AddOuterPolyNodeToExPolygons(i,e);e.push(n)},x.JS.ExPolygonsToPaths=function(t){var e,n,r,i,o=new x.Paths;for(e=0,r=t.length;e<r;e++)for(o.push(t[e].outer),n=0,i=t[e].holes.length;n<i;n++)o.push(t[e].holes[n]);return o},x.JS.PolyTreeToExPolygons=function(t){var e,n,r,i,o=new x.ExPolygons;for(n=0,i=(r=t.Childs()).length;n<i;n++)e=r[n],x.JS.AddOuterPolyNodeToExPolygons(e,o);return o}}()},{}],91:[function(t,e,n){!function(c){"use strict";var t=function(t,e){var n=this.convertLatLngs(t);this.points=n.points,this.maxDistance=isFinite(e)?e:n.maxDistance+1};t.prototype={points:[],maxDistance:0,convertLatLngs:function(r){var i=0;return{points:r.map(function(t,e){if(t.x=t.lng,t.y=this.lat2y(t),r[e-1]){var n=this.distanceTo(t,r[e-1]);i<n&&(i=n)}return t}.bind(this)),maxDistance:i}},distanceTo:function(t,e){var n=c.PI/180,r=(e.lat-t.lat)*n,i=(e.lng-t.lng)*n,o=t.lat*n,a=e.lat*n,s=c.sin(r/2),l=c.sin(i/2),u=s*s+l*l*c.cos(o)*c.cos(a);return 12756274*c.atan2(c.sqrt(u),c.sqrt(1-u))},getLatLngs:function(){if(this.length<=3)return this.points;var t=[],e=this.points.slice().sort(function(t,e){return t.y-e.y})[0],n=e,r={x:n.x,y:n.y-1};t.push(e);for(var i,o=0,a=function(t,e){return this.getAngle(n,r,e)-this.getAngle(n,r,t)}.bind(this);;){o++;for(var s=this.points.slice().sort(a),l=0,u=s.length;l<u;l++)if(this.distanceTo(n,s[l])<this.maxDistance&&!this.isIntersecting(t,s[l])){i=s[l];break}if(!i)return this.points;if(i===n)return this.points;if(t.push(i),i===e)return t;if(r=n,n=i,i=void 0,1e3<o)return this.points}},isIntersecting:function(t,e){for(var n=1,r=t.length-1;n<r;n++)if(this.intersect(t[n-1],t[n],t[r],e))return!0;return!1},intersect:function(t,e,n,r){return!(t.x===n.x&&t.y===n.y||e.x===r.x&&e.y===r.y||t.x===r.x&&t.y===r.y||e.x===n.x&&e.y===n.y)&&(this.ccw(t,e,n)*this.ccw(t,e,r)<=0&&this.ccw(n,r,t)*this.ccw(n,r,e)<=0)},lat2y:function(t){return 180/c.PI*c.log(c.tan(c.PI/4+t.lat*(c.PI/180)/2))},ccw:function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,a=n.y-t.y,s=r*a-i*o;return 1e-13<s?1:s<-1e-13?-1:r*o<-1e-13||i*a<-1e-13?-1:r*r+i*i<o*o+a*a+1e-13?1:0},getAngle:function(t,e,n){if(n.x===t.x&&n.y===t.y)return-9e3;if(n.x===e.x&&n.y===e.y)return-360;var r,i=t.x-e.x,o=t.y-e.y,a=n.x-t.x,s=n.y-t.y,l=i*s-a*o,u=i*a+o*s;return 0===u?(0<l&&(r=90),l<0&&(r=-90)):(r=180*c.atan(l/u)/c.PI,u<0&&(0<=l&&(r+=180),l<0&&(r-=180))),360===r&&(r=0),180-r}},void 0!==e&&e.exports?e.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.ConcaveHull=t}(Math)},{}],92:[function(t,e,n){t("../../modules/core.regexp.escape"),e.exports=t("../../modules/_core").RegExp.escape},{"../../modules/_core":113,"../../modules/core.regexp.escape":218}],93:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],94:[function(t,e,n){var r=t("./_cof");e.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},{"./_cof":108}],95:[function(t,e,n){var r=t("./_wks")("unscopables"),i=Array.prototype;null==i[r]&&t("./_hide")(i,r,{}),e.exports=function(t){i[r][t]=!0}},{"./_hide":132,"./_wks":216}],96:[function(t,e,n){e.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},{}],97:[function(t,e,n){var r=t("./_is-object");e.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":141}],98:[function(t,e,n){"use strict";var u=t("./_to-object"),c=t("./_to-absolute-index"),h=t("./_to-length");e.exports=[].copyWithin||function(t,e){var n=u(this),r=h(n.length),i=c(t,r),o=c(e,r),a=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===a?r:c(a,r))-o,r-i),l=1;for(o<i&&i<o+s&&(l=-1,o+=s-1,i+=s-1);0<s--;)o in n?n[i]=n[o]:delete n[i],i+=l,o+=l;return n}},{"./_to-absolute-index":201,"./_to-length":205,"./_to-object":206}],99:[function(t,e,n){"use strict";var s=t("./_to-object"),l=t("./_to-absolute-index"),u=t("./_to-length");e.exports=function(t){for(var e=s(this),n=u(e.length),r=arguments.length,i=l(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:l(o,n);i<a;)e[i++]=t;return e}},{"./_to-absolute-index":201,"./_to-length":205,"./_to-object":206}],100:[function(t,e,n){var r=t("./_for-of");e.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},{"./_for-of":129}],101:[function(t,e,n){var l=t("./_to-iobject"),u=t("./_to-length"),c=t("./_to-absolute-index");e.exports=function(s){return function(t,e,n){var r,i=l(t),o=u(i.length),a=c(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}},{"./_to-absolute-index":201,"./_to-iobject":204,"./_to-length":205}],102:[function(t,e,n){var v=t("./_ctx"),b=t("./_iobject"),x=t("./_to-object"),w=t("./_to-length"),r=t("./_array-species-create");e.exports=function(h,t){var f=1==h,p=2==h,d=3==h,g=4==h,m=6==h,y=5==h||m,_=t||r;return function(t,e,n){for(var r,i,o=x(t),a=b(o),s=v(e,n,3),l=w(a.length),u=0,c=f?_(t,l):p?_(t,0):void 0;u<l;u++)if((y||u in a)&&(i=s(r=a[u],u,o),h))if(f)c[u]=i;else if(i)switch(h){case 3:return!0;case 5:return r;case 6:return u;case 2:c.push(r)}else if(g)return!1;return m?-1:d||g?g:c}}},{"./_array-species-create":105,"./_ctx":115,"./_iobject":137,"./_to-length":205,"./_to-object":206}],103:[function(t,e,n){var c=t("./_a-function"),h=t("./_to-object"),f=t("./_iobject"),p=t("./_to-length");e.exports=function(t,e,n,r,i){c(e);var o=h(t),a=f(o),s=p(o.length),l=i?s-1:0,u=i?-1:1;if(n<2)for(;;){if(l in a){r=a[l],l+=u;break}if(l+=u,i?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=l:l<s;l+=u)l in a&&(r=e(r,a[l],l,o));return r}},{"./_a-function":93,"./_iobject":137,"./_to-length":205,"./_to-object":206}],104:[function(t,e,n){var r=t("./_is-object"),i=t("./_is-array"),o=t("./_wks")("species");e.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},{"./_is-array":139,"./_is-object":141,"./_wks":216}],105:[function(t,e,n){var r=t("./_array-species-constructor");e.exports=function(t,e){return new(r(t))(e)}},{"./_array-species-constructor":104}],106:[function(t,e,n){"use strict";var o=t("./_a-function"),a=t("./_is-object"),s=t("./_invoke"),l=[].slice,u={};e.exports=Function.bind||function(e){var n=o(this),r=l.call(arguments,1),i=function(){var t=r.concat(l.call(arguments));return this instanceof i?function(t,e,n){if(!(e in u)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";u[e]=Function("F,a","return new F("+r.join(",")+")")}return u[e](t,n)}(n,t.length,t):s(n,t,e)};return a(n.prototype)&&(i.prototype=n.prototype),i}},{"./_a-function":93,"./_invoke":136,"./_is-object":141}],107:[function(t,e,n){var i=t("./_cof"),o=t("./_wks")("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},{"./_cof":108,"./_wks":216}],108:[function(t,e,n){var r={}.toString;e.exports=function(t){return r.call(t).slice(8,-1)}},{}],109:[function(t,e,n){"use strict";var a=t("./_object-dp").f,s=t("./_object-create"),l=t("./_redefine-all"),u=t("./_ctx"),c=t("./_an-instance"),h=t("./_for-of"),r=t("./_iter-define"),i=t("./_iter-step"),o=t("./_set-species"),f=t("./_descriptors"),p=t("./_meta").fastKey,d=t("./_validate-collection"),g=f?"_s":"size",m=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};e.exports={getConstructor:function(t,o,n,r){var i=t(function(t,e){c(t,i,o,"_i"),t._t=o,t._i=s(null),t._f=void 0,t._l=void 0,t[g]=0,null!=e&&h(e,n,t[r],t)});return l(i.prototype,{clear:function(){for(var t=d(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var e=d(this,o),n=m(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[g]--}return!!n},forEach:function(t){d(this,o);for(var e,n=u(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(d(this,o),t)}}),f&&a(i.prototype,"size",{get:function(){return d(this,o)[g]}}),i},def:function(t,e,n){var r,i,o=m(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,n,e){r(t,n,function(t,e){this._t=d(t,n),this._k=e,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?i(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,i(1))},e?"entries":"values",!e,!0),o(n)}}},{"./_an-instance":96,"./_ctx":115,"./_descriptors":119,"./_for-of":129,"./_iter-define":145,"./_iter-step":147,"./_meta":155,"./_object-create":160,"./_object-dp":161,"./_redefine-all":180,"./_set-species":187,"./_validate-collection":213}],110:[function(t,e,n){var r=t("./_classof"),i=t("./_array-from-iterable");e.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":100,"./_classof":107}],111:[function(t,e,n){"use strict";var a=t("./_redefine-all"),s=t("./_meta").getWeak,i=t("./_an-object"),l=t("./_is-object"),u=t("./_an-instance"),c=t("./_for-of"),r=t("./_array-methods"),h=t("./_has"),f=t("./_validate-collection"),o=r(5),p=r(6),d=0,g=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},y=function(t,e){return o(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(t,n,r,i){var o=t(function(t,e){u(t,o,n,"_i"),t._t=n,t._i=d++,t._l=void 0,null!=e&&c(e,r,t[i],t)});return a(o.prototype,{delete:function(t){if(!l(t))return!1;var e=s(t);return!0===e?g(f(this,n)).delete(t):e&&h(e,this._i)&&delete e[this._i]},has:function(t){if(!l(t))return!1;var e=s(t);return!0===e?g(f(this,n)).has(t):e&&h(e,this._i)}}),o},def:function(t,e,n){var r=s(i(e),!0);return!0===r?g(t).set(e,n):r[t._i]=n,t},ufstore:g}},{"./_an-instance":96,"./_an-object":97,"./_array-methods":102,"./_for-of":129,"./_has":131,"./_is-object":141,"./_meta":155,"./_redefine-all":180,"./_validate-collection":213}],112:[function(t,e,n){"use strict";var y=t("./_global"),_=t("./_export"),v=t("./_redefine"),b=t("./_redefine-all"),x=t("./_meta"),w=t("./_for-of"),L=t("./_an-instance"),C=t("./_is-object"),k=t("./_fails"),E=t("./_iter-detect"),S=t("./_set-to-string-tag"),M=t("./_inherit-if-required");e.exports=function(r,t,e,n,i,o){var a=y[r],s=a,l=i?"set":"add",u=s&&s.prototype,c={},h=function(t){var n=u[t];v(u,t,"delete"==t?function(t){return!(o&&!C(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!C(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!C(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof s&&(o||u.forEach&&!k(function(){(new s).entries().next()}))){var f=new s,p=f[l](o?{}:-0,1)!=f,d=k(function(){f.has(1)}),g=E(function(t){new s(t)}),m=!o&&k(function(){for(var t=new s,e=5;e--;)t[l](e,e);return!t.has(-0)});g||(((s=t(function(t,e){L(t,s,r);var n=M(new a,t,s);return null!=e&&w(e,i,n[l],n),n})).prototype=u).constructor=s),(d||m)&&(h("delete"),h("has"),i&&h("get")),(m||p)&&h(l),o&&u.clear&&delete u.clear}else s=n.getConstructor(t,r,i,l),b(s.prototype,e),x.NEED=!0;return S(s,r),c[r]=s,_(_.G+_.W+_.F*(s!=a),c),o||n.setStrong(s,r,i),s}},{"./_an-instance":96,"./_export":123,"./_fails":125,"./_for-of":129,"./_global":130,"./_inherit-if-required":135,"./_is-object":141,"./_iter-detect":146,"./_meta":155,"./_redefine":181,"./_redefine-all":180,"./_set-to-string-tag":188}],113:[function(t,e,n){var r=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},{}],114:[function(t,e,n){"use strict";var r=t("./_object-dp"),i=t("./_property-desc");e.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},{"./_object-dp":161,"./_property-desc":179}],115:[function(t,e,n){var o=t("./_a-function");e.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},{"./_a-function":93}],116:[function(t,e,n){"use strict";var r=t("./_fails"),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return 9<t?t:"0"+t};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":9999<t?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(99<e?e:"0"+a(e))+"Z"}:o},{"./_fails":125}],117:[function(t,e,n){"use strict";var r=t("./_an-object"),i=t("./_to-primitive");e.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},{"./_an-object":97,"./_to-primitive":207}],118:[function(t,e,n){e.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},{}],119:[function(t,e,n){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":125}],120:[function(t,e,n){var r=t("./_is-object"),i=t("./_global").document,o=r(i)&&r(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{"./_global":130,"./_is-object":141}],121:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],122:[function(t,e,n){var s=t("./_object-keys"),l=t("./_object-gops"),u=t("./_object-pie");e.exports=function(t){var e=s(t),n=l.f;if(n)for(var r,i=n(t),o=u.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}},{"./_object-gops":167,"./_object-keys":170,"./_object-pie":171}],123:[function(t,e,n){var g=t("./_global"),m=t("./_core"),y=t("./_hide"),_=t("./_redefine"),v=t("./_ctx"),b="prototype",x=function(t,e,n){var r,i,o,a,s=t&x.F,l=t&x.G,u=t&x.S,c=t&x.P,h=t&x.B,f=l?g:u?g[e]||(g[e]={}):(g[e]||{})[b],p=l?m:m[e]||(m[e]={}),d=p[b]||(p[b]={});for(r in l&&(n=e),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=h&&i?v(o,g):c&&"function"==typeof o?v(Function.call,o):o,f&&_(f,r,o,t&x.U),p[r]!=o&&y(p,r,a),c&&d[r]!=o&&(d[r]=o)};g.core=m,x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128,e.exports=x},{"./_core":113,"./_ctx":115,"./_global":130,"./_hide":132,"./_redefine":181}],124:[function(t,e,n){var r=t("./_wks")("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,!"/./"[e](n)}catch(t){}}return!0}},{"./_wks":216}],125:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],126:[function(t,e,n){"use strict";var s=t("./_hide"),l=t("./_redefine"),u=t("./_fails"),c=t("./_defined"),h=t("./_wks");e.exports=function(e,t,n){var r=h(e),i=n(c,r,""[e]),o=i[0],a=i[1];u(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})&&(l(String.prototype,e,o),s(RegExp.prototype,r,2==t?function(t,e){return a.call(t,this,e)}:function(t){return a.call(t,this)}))}},{"./_defined":118,"./_fails":125,"./_hide":132,"./_redefine":181,"./_wks":216}],127:[function(t,e,n){"use strict";var r=t("./_an-object");e.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},{"./_an-object":97}],128:[function(t,e,n){"use strict";var d=t("./_is-array"),g=t("./_is-object"),m=t("./_to-length"),y=t("./_ctx"),_=t("./_wks")("isConcatSpreadable");e.exports=function t(e,n,r,i,o,a,s,l){for(var u,c,h=o,f=0,p=!!s&&y(s,l,3);f<i;){if(f in r){if(u=p?p(r[f],f,n):r[f],c=!1,g(u)&&(c=void 0!==(c=u[_])?!!c:d(u)),c&&0<a)h=t(e,n,u,m(u.length),h,a-1)-1;else{if(9007199254740991<=h)throw TypeError();e[h]=u}h++}f++}return h}},{"./_ctx":115,"./_is-array":139,"./_is-object":141,"./_to-length":205,"./_wks":216}],129:[function(t,e,n){var f=t("./_ctx"),p=t("./_iter-call"),d=t("./_is-array-iter"),g=t("./_an-object"),m=t("./_to-length"),y=t("./core.get-iterator-method"),_={},v={};(n=e.exports=function(t,e,n,r,i){var o,a,s,l,u=i?function(){return t}:y(t),c=f(n,r,e?2:1),h=0;if("function"!=typeof u)throw TypeError(t+" is not iterable!");if(d(u)){for(o=m(t.length);h<o;h++)if((l=e?c(g(a=t[h])[0],a[1]):c(t[h]))===_||l===v)return l}else for(s=u.call(t);!(a=s.next()).done;)if((l=p(s,c,a.value,e))===_||l===v)return l}).BREAK=_,n.RETURN=v},{"./_an-object":97,"./_ctx":115,"./_is-array-iter":138,"./_iter-call":143,"./_to-length":205,"./core.get-iterator-method":217}],130:[function(t,e,n){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],131:[function(t,e,n){var r={}.hasOwnProperty;e.exports=function(t,e){return r.call(t,e)}},{}],132:[function(t,e,n){var r=t("./_object-dp"),i=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},{"./_descriptors":119,"./_object-dp":161,"./_property-desc":179}],133:[function(t,e,n){var r=t("./_global").document;e.exports=r&&r.documentElement},{"./_global":130}],134:[function(t,e,n){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":119,"./_dom-create":120,"./_fails":125}],135:[function(t,e,n){var o=t("./_is-object"),a=t("./_set-proto").set;e.exports=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&a&&a(t,r),t}},{"./_is-object":141,"./_set-proto":186}],136:[function(t,e,n){e.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],137:[function(t,e,n){var r=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},{"./_cof":108}],138:[function(t,e,n){var r=t("./_iterators"),i=t("./_wks")("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},{"./_iterators":148,"./_wks":216}],139:[function(t,e,n){var r=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==r(t)}},{"./_cof":108}],140:[function(t,e,n){var r=t("./_is-object"),i=Math.floor;e.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},{"./_is-object":141}],141:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],142:[function(t,e,n){var r=t("./_is-object"),i=t("./_cof"),o=t("./_wks")("match");e.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},{"./_cof":108,"./_is-object":141,"./_wks":216}],143:[function(t,e,n){var o=t("./_an-object");e.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},{"./_an-object":97}],144:[function(t,e,n){"use strict";var r=t("./_object-create"),i=t("./_property-desc"),o=t("./_set-to-string-tag"),a={};t("./_hide")(a,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},{"./_hide":132,"./_object-create":160,"./_property-desc":179,"./_set-to-string-tag":188,"./_wks":216}],145:[function(t,e,n){"use strict";var v=t("./_library"),b=t("./_export"),x=t("./_redefine"),w=t("./_hide"),L=t("./_iterators"),C=t("./_iter-create"),k=t("./_set-to-string-tag"),E=t("./_object-gpo"),S=t("./_wks")("iterator"),M=!([].keys&&"next"in[].keys()),P="values",I=function(){return this};e.exports=function(t,e,n,r,i,o,a){C(n,e,r);var s,l,u,c=function(t){if(!M&&t in d)return d[t];switch(t){case"keys":case P:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f=i==P,p=!1,d=t.prototype,g=d[S]||d["@@iterator"]||i&&d[i],m=g||c(i),y=i?f?c("entries"):m:void 0,_="Array"==e&&d.entries||g;if(_&&(u=E(_.call(new t)))!==Object.prototype&&u.next&&(k(u,h,!0),v||"function"==typeof u[S]||w(u,S,I)),f&&g&&g.name!==P&&(p=!0,m=function(){return g.call(this)}),v&&!a||!M&&!p&&d[S]||w(d,S,m),L[e]=m,L[h]=I,i)if(s={values:f?m:c(P),keys:o?m:c("keys"),entries:y},a)for(l in s)l in d||x(d,l,s[l]);else b(b.P+b.F*(M||p),e,s);return s}},{"./_export":123,"./_hide":132,"./_iter-create":144,"./_iterators":148,"./_library":149,"./_object-gpo":168,"./_redefine":181,"./_set-to-string-tag":188,"./_wks":216}],146:[function(t,e,n){var o=t("./_wks")("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},t(r)}catch(t){}return n}},{"./_wks":216}],147:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],148:[function(t,e,n){e.exports={}},{}],149:[function(t,e,n){e.exports=!1},{}],150:[function(t,e,n){var r=Math.expm1;e.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},{}],151:[function(t,e,n){var o=t("./_math-sign"),r=Math.pow,a=r(2,-52),s=r(2,-23),l=r(2,127)*(2-s),u=r(2,-126);e.exports=Math.fround||function(t){var e,n,r=Math.abs(t),i=o(t);return r<u?i*(r/u/s+1/a-1/a)*u*s:l<(n=(e=(1+s/a)*r)-(e-r))||n!=n?i*(1/0):i*n}},{"./_math-sign":154}],152:[function(t,e,n){e.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],153:[function(t,e,n){e.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},{}],154:[function(t,e,n){e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],155:[function(t,e,n){var r=t("./_uid")("meta"),i=t("./_is-object"),o=t("./_has"),a=t("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!t("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!o(t,r)&&c(t),t}}},{"./_fails":125,"./_has":131,"./_is-object":141,"./_object-dp":161,"./_uid":211}],156:[function(t,e,n){var o=t("./es6.map"),r=t("./_export"),i=t("./_shared")("metadata"),a=i.store||(i.store=new(t("./es6.weak-map"))),s=function(t,e,n){var r=a.get(t);if(!r){if(!n)return;a.set(t,r=new o)}var i=r.get(e);if(!i){if(!n)return;r.set(e,i=new o)}return i};e.exports={store:a,map:s,has:function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){s(n,r,!0).set(t,e)},keys:function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){r(r.S,"Reflect",t)}}},{"./_export":123,"./_shared":190,"./es6.map":248,"./es6.weak-map":354}],157:[function(t,e,n){var s=t("./_global"),l=t("./_task").set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,h=s.Promise,f="process"==t("./_cof")(c);e.exports=function(){var n,r,i,t=function(){var t,e;for(f&&(t=c.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(f)i=function(){c.nextTick(t)};else if(!u||s.navigator&&s.navigator.standalone)if(h&&h.resolve){var e=h.resolve(void 0);i=function(){e.then(t)}}else i=function(){l.call(s,t)};else{var o=!0,a=document.createTextNode("");new u(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}},{"./_cof":108,"./_global":130,"./_task":200}],158:[function(t,e,n){"use strict";var i=t("./_a-function");function r(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=i(n),this.reject=i(r)}e.exports.f=function(t){return new r(t)}},{"./_a-function":93}],159:[function(t,e,n){"use strict";var f=t("./_object-keys"),p=t("./_object-gops"),d=t("./_object-pie"),g=t("./_to-object"),m=t("./_iobject"),i=Object.assign;e.exports=!i||t("./_fails")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=i({},t)[n]||Object.keys(i({},e)).join("")!=r})?function(t,e){for(var n=g(t),r=arguments.length,i=1,o=p.f,a=d.f;i<r;)for(var s,l=m(arguments[i++]),u=o?f(l).concat(o(l)):f(l),c=u.length,h=0;h<c;)a.call(l,s=u[h++])&&(n[s]=l[s]);return n}:i},{"./_fails":125,"./_iobject":137,"./_object-gops":167,"./_object-keys":170,"./_object-pie":171,"./_to-object":206}],160:[function(r,t,e){var i=r("./_an-object"),o=r("./_object-dps"),a=r("./_enum-bug-keys"),s=r("./_shared-key")("IE_PROTO"),l=function(){},u="prototype",c=function(){var t,e=r("./_dom-create")("iframe"),n=a.length;for(e.style.display="none",r("./_html").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;n--;)delete c[u][a[n]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(l[u]=i(t),n=new l,l[u]=null,n[s]=t):n=c(),void 0===e?n:o(n,e)}},{"./_an-object":97,"./_dom-create":120,"./_enum-bug-keys":121,"./_html":133,"./_object-dps":162,"./_shared-key":189}],161:[function(t,e,n){var r=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),a=Object.defineProperty;n.f=t("./_descriptors")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{"./_an-object":97,"./_descriptors":119,"./_ie8-dom-define":134,"./_to-primitive":207}],162:[function(t,e,n){var a=t("./_object-dp"),s=t("./_an-object"),l=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){s(t);for(var n,r=l(e),i=r.length,o=0;o<i;)a.f(t,n=r[o++],e[n]);return t}},{"./_an-object":97,"./_descriptors":119,"./_object-dp":161,"./_object-keys":170}],163:[function(e,t,n){"use strict";t.exports=e("./_library")||!e("./_fails")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e("./_global")[t]})},{"./_fails":125,"./_global":130,"./_library":149}],164:[function(t,e,n){var r=t("./_object-pie"),i=t("./_property-desc"),o=t("./_to-iobject"),a=t("./_to-primitive"),s=t("./_has"),l=t("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=t("./_descriptors")?u:function(t,e){if(t=o(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},{"./_descriptors":119,"./_has":131,"./_ie8-dom-define":134,"./_object-pie":171,"./_property-desc":179,"./_to-iobject":204,"./_to-primitive":207}],165:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},{"./_object-gopn":166,"./_to-iobject":204}],166:[function(t,e,n){var r=t("./_object-keys-internal"),i=t("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},{"./_enum-bug-keys":121,"./_object-keys-internal":169}],167:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],168:[function(t,e,n){var r=t("./_has"),i=t("./_to-object"),o=t("./_shared-key")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},{"./_has":131,"./_shared-key":189,"./_to-object":206}],169:[function(t,e,n){var a=t("./_has"),s=t("./_to-iobject"),l=t("./_array-includes")(!1),u=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var n,r=s(t),i=0,o=[];for(n in r)n!=u&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~l(o,n)||o.push(n));return o}},{"./_array-includes":101,"./_has":131,"./_shared-key":189,"./_to-iobject":204}],170:[function(t,e,n){var r=t("./_object-keys-internal"),i=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return r(t,i)}},{"./_enum-bug-keys":121,"./_object-keys-internal":169}],171:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],172:[function(t,e,n){var i=t("./_export"),o=t("./_core"),a=t("./_fails");e.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],r={};r[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},{"./_core":113,"./_export":123,"./_fails":125}],173:[function(t,e,n){var l=t("./_object-keys"),u=t("./_to-iobject"),c=t("./_object-pie").f;e.exports=function(s){return function(t){for(var e,n=u(t),r=l(n),i=r.length,o=0,a=[];o<i;)c.call(n,e=r[o++])&&a.push(s?[e,n[e]]:n[e]);return a}}},{"./_object-keys":170,"./_object-pie":171,"./_to-iobject":204}],174:[function(t,e,n){var r=t("./_object-gopn"),i=t("./_object-gops"),o=t("./_an-object"),a=t("./_global").Reflect;e.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},{"./_an-object":97,"./_global":130,"./_object-gopn":166,"./_object-gops":167}],175:[function(t,e,n){var r=t("./_global").parseFloat,i=t("./_string-trim").trim;e.exports=1/r(t("./_string-ws")+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},{"./_global":130,"./_string-trim":198,"./_string-ws":199}],176:[function(t,e,n){var r=t("./_global").parseInt,i=t("./_string-trim").trim,o=t("./_string-ws"),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},{"./_global":130,"./_string-trim":198,"./_string-ws":199}],177:[function(t,e,n){e.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],178:[function(t,e,n){var r=t("./_an-object"),i=t("./_is-object"),o=t("./_new-promise-capability");e.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},{"./_an-object":97,"./_is-object":141,"./_new-promise-capability":158}],179:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],180:[function(t,e,n){var i=t("./_redefine");e.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},{"./_redefine":181}],181:[function(t,e,n){var o=t("./_global"),a=t("./_hide"),s=t("./_has"),l=t("./_uid")("src"),r="toString",i=Function[r],u=(""+i).split(r);t("./_core").inspectSource=function(t){return i.call(t)},(e.exports=function(t,e,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",e)),t[e]!==n&&(i&&(s(n,l)||a(n,l,t[e]?""+t[e]:u.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,r,function(){return"function"==typeof this&&this[l]||i.call(this)})},{"./_core":113,"./_global":130,"./_has":131,"./_hide":132,"./_uid":211}],182:[function(t,e,n){e.exports=function(e,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(t){return String(t).replace(e,r)}}},{}],183:[function(t,e,n){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},{}],184:[function(t,e,n){"use strict";var r=t("./_export"),a=t("./_a-function"),s=t("./_ctx"),l=t("./_for-of");e.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,i,o=arguments[1];return a(this),(e=void 0!==o)&&a(o),null==t?new this:(n=[],e?(r=0,i=s(o,arguments[2],2),l(t,!1,function(t){n.push(i(t,r++))})):l(t,!1,n.push,n),new this(n))}})}},{"./_a-function":93,"./_ctx":115,"./_export":123,"./_for-of":129}],185:[function(t,e,n){"use strict";var r=t("./_export");e.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},{"./_export":123}],186:[function(e,t,n){var r=e("./_is-object"),i=e("./_an-object"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},{"./_an-object":97,"./_ctx":115,"./_is-object":141,"./_object-gopd":164}],187:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_object-dp"),o=t("./_descriptors"),a=t("./_wks")("species");e.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},{"./_descriptors":119,"./_global":130,"./_object-dp":161,"./_wks":216}],188:[function(t,e,n){var r=t("./_object-dp").f,i=t("./_has"),o=t("./_wks")("toStringTag");e.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},{"./_has":131,"./_object-dp":161,"./_wks":216}],189:[function(t,e,n){var r=t("./_shared")("keys"),i=t("./_uid");e.exports=function(t){return r[t]||(r[t]=i(t))}},{"./_shared":190,"./_uid":211}],190:[function(t,e,n){var r=t("./_core"),i=t("./_global"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:t("./_library")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},{"./_core":113,"./_global":130,"./_library":149}],191:[function(t,e,n){var i=t("./_an-object"),o=t("./_a-function"),a=t("./_wks")("species");e.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||null==(n=i(r)[a])?e:o(n)}},{"./_a-function":93,"./_an-object":97,"./_wks":216}],192:[function(t,e,n){"use strict";var r=t("./_fails");e.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},{"./_fails":125}],193:[function(t,e,n){var l=t("./_to-integer"),u=t("./_defined");e.exports=function(s){return function(t,e){var n,r,i=String(u(t)),o=l(e),a=i.length;return o<0||a<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?s?i.charAt(o):n:s?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}},{"./_defined":118,"./_to-integer":203}],194:[function(t,e,n){var r=t("./_is-regexp"),i=t("./_defined");e.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},{"./_defined":118,"./_is-regexp":142}],195:[function(t,e,n){var r=t("./_export"),i=t("./_fails"),a=t("./_defined"),s=/"/g,o=function(t,e,n,r){var i=String(a(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+i+"</"+e+">"};e.exports=function(e,t){var n={};n[e]=t(o),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},{"./_defined":118,"./_export":123,"./_fails":125}],196:[function(t,e,n){var c=t("./_to-length"),h=t("./_string-repeat"),f=t("./_defined");e.exports=function(t,e,n,r){var i=String(f(t)),o=i.length,a=void 0===n?" ":String(n),s=c(e);if(s<=o||""==a)return i;var l=s-o,u=h.call(a,Math.ceil(l/a.length));return u.length>l&&(u=u.slice(0,l)),r?u+i:i+u}},{"./_defined":118,"./_string-repeat":197,"./_to-length":205}],197:[function(t,e,n){"use strict";var i=t("./_to-integer"),o=t("./_defined");e.exports=function(t){var e=String(o(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},{"./_defined":118,"./_to-integer":203}],198:[function(t,e,n){var a=t("./_export"),r=t("./_defined"),s=t("./_fails"),l=t("./_string-ws"),i="["+l+"]",o=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),c=function(t,e,n){var r={},i=s(function(){return!!l[t]()||"​"!="​"[t]()}),o=r[t]=i?e(h):l[t];n&&(r[n]=o),a(a.P+a.F*i,"String",r)},h=c.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(u,"")),t};e.exports=c},{"./_defined":118,"./_export":123,"./_fails":125,"./_string-ws":199}],199:[function(t,e,n){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],200:[function(t,e,n){var r,i,o,a=t("./_ctx"),s=t("./_invoke"),l=t("./_html"),u=t("./_dom-create"),c=t("./_global"),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=c.Dispatch,m=0,y={},_="onreadystatechange",v=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){v.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},p=function(t){delete y[t]},"process"==t("./_cof")(h)?r=function(t){h.nextTick(a(v,t,1))}:g&&g.now?r=function(t){g.now(a(v,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r=_ in u("script")?function(t){l.appendChild(u("script"))[_]=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(a(v,t,1),0)}),e.exports={set:f,clear:p}},{"./_cof":108,"./_ctx":115,"./_dom-create":120,"./_global":130,"./_html":133,"./_invoke":136}],201:[function(t,e,n){var r=t("./_to-integer"),i=Math.max,o=Math.min;e.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},{"./_to-integer":203}],202:[function(t,e,n){var r=t("./_to-integer"),i=t("./_to-length");e.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},{"./_to-integer":203,"./_to-length":205}],203:[function(t,e,n){var r=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(0<t?i:r)(t)}},{}],204:[function(t,e,n){var r=t("./_iobject"),i=t("./_defined");e.exports=function(t){return r(i(t))}},{"./_defined":118,"./_iobject":137}],205:[function(t,e,n){var r=t("./_to-integer"),i=Math.min;e.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},{"./_to-integer":203}],206:[function(t,e,n){var r=t("./_defined");e.exports=function(t){return Object(r(t))}},{"./_defined":118}],207:[function(t,e,n){var i=t("./_is-object");e.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":141}],208:[function(t,e,n){"use strict";if(t("./_descriptors")){var y=t("./_library"),_=t("./_global"),v=t("./_fails"),b=t("./_export"),x=t("./_typed"),r=t("./_typed-buffer"),f=t("./_ctx"),w=t("./_an-instance"),i=t("./_property-desc"),L=t("./_hide"),o=t("./_redefine-all"),a=t("./_to-integer"),C=t("./_to-length"),k=t("./_to-index"),s=t("./_to-absolute-index"),l=t("./_to-primitive"),u=t("./_has"),E=t("./_classof"),S=t("./_is-object"),p=t("./_to-object"),d=t("./_is-array-iter"),M=t("./_object-create"),P=t("./_object-gpo"),I=t("./_object-gopn").f,g=t("./core.get-iterator-method"),c=t("./_uid"),h=t("./_wks"),m=t("./_array-methods"),T=t("./_array-includes"),O=t("./_species-constructor"),N=t("./es6.array.iterator"),D=t("./_iterators"),A=t("./_iter-detect"),R=t("./_set-species"),F=t("./_array-fill"),j=t("./_array-copy-within"),B=t("./_object-dp"),z=t("./_object-gopd"),q=B.f,U=z.f,G=_.RangeError,V=_.TypeError,H=_.Uint8Array,W="ArrayBuffer",X="Shared"+W,Y="BYTES_PER_ELEMENT",$="prototype",Z=Array[$],Q=r.ArrayBuffer,K=r.DataView,J=m(0),tt=m(2),et=m(3),nt=m(4),rt=m(5),it=m(6),ot=T(!0),at=T(!1),st=N.values,lt=N.keys,ut=N.entries,ct=Z.lastIndexOf,ht=Z.reduce,ft=Z.reduceRight,pt=Z.join,dt=Z.sort,gt=Z.slice,mt=Z.toString,yt=Z.toLocaleString,_t=h("iterator"),vt=h("toStringTag"),bt=c("typed_constructor"),xt=c("def_constructor"),wt=x.CONSTR,Lt=x.TYPED,Ct=x.VIEW,kt="Wrong length!",Et=m(1,function(t,e){return Tt(O(t,t[xt]),e)}),St=v(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),Mt=!!H&&!!H[$].set&&v(function(){new H(1).set({})}),Pt=function(t,e){var n=a(t);if(n<0||n%e)throw G("Wrong offset!");return n},It=function(t){if(S(t)&&Lt in t)return t;throw V(t+" is not a typed array!")},Tt=function(t,e){if(!(S(t)&&bt in t))throw V("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return Nt(O(t,t[xt]),e)},Nt=function(t,e){for(var n=0,r=e.length,i=Tt(t,r);n<r;)i[n]=e[n++];return i},Dt=function(t,e,n){q(t,e,{get:function(){return this._d[n]}})},At=function(t){var e,n,r,i,o,a,s=p(t),l=arguments.length,u=1<l?arguments[1]:void 0,c=void 0!==u,h=g(s);if(null!=h&&!d(h)){for(a=h.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(c&&2<l&&(u=f(u,arguments[2],2)),e=0,n=C(s.length),i=Tt(this,n);e<n;e++)i[e]=c?u(s[e],e):s[e];return i},Rt=function(){for(var t=0,e=arguments.length,n=Tt(this,e);t<e;)n[t]=arguments[t++];return n},Ft=!!H&&v(function(){yt.call(new H(1))}),jt=function(){return yt.apply(Ft?gt.call(It(this)):It(this),arguments)},Bt={copyWithin:function(t,e){return j.call(It(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return nt(It(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return F.apply(It(this),arguments)},filter:function(t){return Ot(this,tt(It(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return rt(It(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(It(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){J(It(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return at(It(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(It(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return pt.apply(It(this),arguments)},lastIndexOf:function(t){return ct.apply(It(this),arguments)},map:function(t){return Et(It(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return ht.apply(It(this),arguments)},reduceRight:function(t){return ft.apply(It(this),arguments)},reverse:function(){for(var t,e=It(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return et(It(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return dt.call(It(this),t)},subarray:function(t,e){var n=It(this),r=n.length,i=s(t,r);return new(O(n,n[xt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,C((void 0===e?r:s(e,r))-i))}},zt=function(t,e){return Ot(this,gt.call(It(this),t,e))},qt=function(t){It(this);var e=Pt(arguments[1],1),n=this.length,r=p(t),i=C(r.length),o=0;if(n<i+e)throw G(kt);for(;o<i;)this[e+o]=r[o++]},Ut={entries:function(){return ut.call(It(this))},keys:function(){return lt.call(It(this))},values:function(){return st.call(It(this))}},Gt=function(t,e){return S(t)&&t[Lt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return Gt(t,e=l(e,!0))?i(2,t[e]):U(t,e)},Ht=function(t,e,n){return!(Gt(t,e=l(e,!0))&&S(n)&&u(n,"value"))||u(n,"get")||u(n,"set")||n.configurable||u(n,"writable")&&!n.writable||u(n,"enumerable")&&!n.enumerable?q(t,e,n):(t[e]=n.value,t)};wt||(z.f=Vt,B.f=Ht),b(b.S+b.F*!wt,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Ht}),v(function(){mt.call({})})&&(mt=yt=function(){return pt.call(this)});var Wt=o({},Bt);o(Wt,Ut),L(Wt,_t,Ut.values),o(Wt,{slice:zt,set:qt,constructor:function(){},toString:mt,toLocaleString:jt}),Dt(Wt,"buffer","b"),Dt(Wt,"byteOffset","o"),Dt(Wt,"byteLength","l"),Dt(Wt,"length","e"),q(Wt,vt,{get:function(){return this[Lt]}}),e.exports=function(t,h,e,o){var f=t+((o=!!o)?"Clamped":"")+"Array",n="get"+t,a="set"+t,p=_[f],s=p||{},r=p&&P(p),i=!p||!x.ABV,l={},u=p&&p[$],d=function(t,i){q(t,i,{get:function(){return t=i,(e=this._d).v[n](t*h+e.o,St);var t,e},set:function(t){return e=i,n=t,r=this._d,o&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),void r.v[a](e*h+r.o,n,St);var e,n,r},enumerable:!0})};i?(p=e(function(t,e,n,r){w(t,p,f,"_d");var i,o,a,s,l=0,u=0;if(S(e)){if(!(e instanceof Q||(s=E(e))==W||s==X))return Lt in e?Nt(p,e):At.call(p,e);i=e,u=Pt(n,h);var c=e.byteLength;if(void 0===r){if(c%h)throw G(kt);if((o=c-u)<0)throw G(kt)}else if(c<(o=C(r)*h)+u)throw G(kt);a=o/h}else a=k(e),i=new Q(o=a*h);for(L(t,"_d",{b:i,o:u,l:o,e:a,v:new K(i)});l<a;)d(t,l++)}),u=p[$]=M(Wt),L(u,"constructor",p)):v(function(){p(1)})&&v(function(){new p(-1)})&&A(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,n,r){var i;return w(t,p,f),S(e)?e instanceof Q||(i=E(e))==W||i==X?void 0!==r?new s(e,Pt(n,h),r):void 0!==n?new s(e,Pt(n,h)):new s(e):Lt in e?Nt(p,e):At.call(p,e):new s(k(e))}),J(r!==Function.prototype?I(s).concat(I(r)):I(s),function(t){t in p||L(p,t,s[t])}),p[$]=u,y||(u.constructor=p));var c=u[_t],g=!!c&&("values"==c.name||null==c.name),m=Ut.values;L(p,bt,!0),L(u,Lt,f),L(u,Ct,!0),L(u,xt,p),(o?new p(1)[vt]==f:vt in u)||q(u,vt,{get:function(){return f}}),l[f]=p,b(b.G+b.W+b.F*(p!=s),l),b(b.S,f,{BYTES_PER_ELEMENT:h}),b(b.S+b.F*v(function(){s.of.call(p,1)}),f,{from:At,of:Rt}),Y in u||L(u,Y,h),b(b.P,f,Bt),R(f),b(b.P+b.F*Mt,f,{set:qt}),b(b.P+b.F*!g,f,Ut),y||u.toString==mt||(u.toString=mt),b(b.P+b.F*v(function(){new p(1).slice()}),f,{slice:zt}),b(b.P+b.F*(v(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!v(function(){u.toLocaleString.call([1,2])})),f,{toLocaleString:jt}),D[f]=g?c:m,y||g||L(u,_t,m)}}else e.exports=function(){}},{"./_an-instance":96,"./_array-copy-within":98,"./_array-fill":99,"./_array-includes":101,"./_array-methods":102,"./_classof":107,"./_ctx":115,"./_descriptors":119,"./_export":123,"./_fails":125,"./_global":130,"./_has":131,"./_hide":132,"./_is-array-iter":138,"./_is-object":141,"./_iter-detect":146,"./_iterators":148,"./_library":149,"./_object-create":160,"./_object-dp":161,"./_object-gopd":164,"./_object-gopn":166,"./_object-gpo":168,"./_property-desc":179,"./_redefine-all":180,"./_set-species":187,"./_species-constructor":191,"./_to-absolute-index":201,"./_to-index":202,"./_to-integer":203,"./_to-length":205,"./_to-object":206,"./_to-primitive":207,"./_typed":210,"./_typed-buffer":209,"./_uid":211,"./_wks":216,"./core.get-iterator-method":217,"./es6.array.iterator":229}],209:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_descriptors"),o=t("./_library"),a=t("./_typed"),s=t("./_hide"),l=t("./_redefine-all"),u=t("./_fails"),c=t("./_an-instance"),h=t("./_to-integer"),f=t("./_to-length"),p=t("./_to-index"),d=t("./_object-gopn").f,g=t("./_object-dp").f,m=t("./_array-fill"),y=t("./_set-to-string-tag"),_="ArrayBuffer",v="DataView",b="prototype",x="Wrong index!",w=r[_],L=r[v],C=r.Math,k=r.RangeError,E=r.Infinity,S=w,M=C.abs,P=C.pow,I=C.floor,T=C.log,O=C.LN2,N="byteLength",D="byteOffset",A=i?"_b":"buffer",R=i?"_l":N,F=i?"_o":D;function j(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,l=(1<<s)-1,u=l>>1,c=23===e?P(2,-24)-P(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=M(t))!=t||t===E?(i=t!=t?1:0,r=l):(r=I(T(t)/O),t*(o=P(2,-r))<1&&(r--,o*=2),2<=(t+=1<=r+u?c/o:c*P(2,1-u))*o&&(r++,o/=2),l<=r+u?(i=0,r=l):1<=r+u?(i=(t*o-1)*P(2,e),r+=u):(i=t*P(2,u-1)*P(2,e),r=0));8<=e;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;0<s;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function B(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,l=n-1,u=t[l--],c=127&u;for(u>>=7;0<s;c=256*c+t[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=e;0<s;r=256*r+t[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-E:E;r+=P(2,e),c-=a}return(u?-1:1)*r*P(2,c-e)}function z(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function q(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function V(t){return j(t,52,8)}function H(t){return j(t,23,4)}function W(t,e,n){g(t[b],e,{get:function(){return this[n]}})}function X(t,e,n,r){var i=p(+n);if(i+e>t[R])throw k(x);var o=t[A]._b,a=i+t[F],s=o.slice(a,a+e);return r?s:s.reverse()}function Y(t,e,n,r,i,o){var a=p(+n);if(a+e>t[R])throw k(x);for(var s=t[A]._b,l=a+t[F],u=r(+i),c=0;c<e;c++)s[l+c]=u[o?c:e-c-1]}if(a.ABV){if(!u(function(){w(1)})||!u(function(){new w(-1)})||u(function(){return new w,new w(1.5),new w(NaN),w.name!=_})){for(var $,Z=(w=function(t){return c(this,w),new S(p(t))})[b]=S[b],Q=d(S),K=0;Q.length>K;)($=Q[K++])in w||s(w,$,S[$]);o||(Z.constructor=w)}var J=new L(new w(2)),tt=L[b].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||l(L[b],{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else w=function(t){c(this,w,_);var e=p(t);this._b=m.call(new Array(e),0),this[R]=e},L=function(t,e,n){c(this,L,v),c(t,w,v);var r=t[R],i=h(e);if(i<0||r<i)throw k("Wrong offset!");if(r<i+(n=void 0===n?r-i:f(n)))throw k("Wrong length!");this[A]=t,this[F]=i,this[R]=n},i&&(W(w,N,"_l"),W(L,"buffer","_b"),W(L,N,"_l"),W(L,D,"_o")),l(L[b],{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t){var e=X(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=X(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return z(X(this,4,t,arguments[1]))},getUint32:function(t){return z(X(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return B(X(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return B(X(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,q,e)},setUint8:function(t,e){Y(this,1,t,q,e)},setInt16:function(t,e){Y(this,2,t,U,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,U,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,G,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,G,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,H,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,V,e,arguments[2])}});y(w,_),y(L,v),s(L[b],a.VIEW,!0),n[_]=w,n[v]=L},{"./_an-instance":96,"./_array-fill":99,"./_descriptors":119,"./_fails":125,"./_global":130,"./_hide":132,"./_library":149,"./_object-dp":161,"./_object-gopn":166,"./_redefine-all":180,"./_set-to-string-tag":188,"./_to-index":202,"./_to-integer":203,"./_to-length":205,"./_typed":210}],210:[function(t,e,n){for(var r,i=t("./_global"),o=t("./_hide"),a=t("./_uid"),s=a("typed_array"),l=a("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},{"./_global":130,"./_hide":132,"./_uid":211}],211:[function(t,e,n){var r=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},{}],212:[function(t,e,n){var r=t("./_global").navigator;e.exports=r&&r.userAgent||""},{"./_global":130}],213:[function(t,e,n){var r=t("./_is-object");e.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},{"./_is-object":141}],214:[function(t,e,n){var r=t("./_global"),i=t("./_core"),o=t("./_library"),a=t("./_wks-ext"),s=t("./_object-dp").f;e.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},{"./_core":113,"./_global":130,"./_library":149,"./_object-dp":161,"./_wks-ext":215}],215:[function(t,e,n){n.f=t("./_wks")},{"./_wks":216}],216:[function(t,e,n){var r=t("./_shared")("wks"),i=t("./_uid"),o=t("./_global").Symbol,a="function"==typeof o;(e.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},{"./_global":130,"./_shared":190,"./_uid":211}],217:[function(t,e,n){var r=t("./_classof"),i=t("./_wks")("iterator"),o=t("./_iterators");e.exports=t("./_core").getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},{"./_classof":107,"./_core":113,"./_iterators":148,"./_wks":216}],218:[function(t,e,n){var r=t("./_export"),i=t("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},{"./_export":123,"./_replacer":182}],219:[function(t,e,n){var r=t("./_export");r(r.P,"Array",{copyWithin:t("./_array-copy-within")}),t("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":95,"./_array-copy-within":98,"./_export":123}],220:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(4);r(r.P+r.F*!t("./_strict-method")([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":102,"./_export":123,"./_strict-method":192}],221:[function(t,e,n){var r=t("./_export");r(r.P,"Array",{fill:t("./_array-fill")}),t("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":95,"./_array-fill":99,"./_export":123}],222:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(2);r(r.P+r.F*!t("./_strict-method")([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":102,"./_export":123,"./_strict-method":192}],223:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t("./_add-to-unscopables")(o)},{"./_add-to-unscopables":95,"./_array-methods":102,"./_export":123}],224:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t("./_add-to-unscopables")("find")},{"./_add-to-unscopables":95,"./_array-methods":102,"./_export":123}],225:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(0),o=t("./_strict-method")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":102,"./_export":123,"./_strict-method":192}],226:[function(t,e,n){"use strict";var f=t("./_ctx"),r=t("./_export"),p=t("./_to-object"),d=t("./_iter-call"),g=t("./_is-array-iter"),m=t("./_to-length"),y=t("./_create-property"),_=t("./core.get-iterator-method");r(r.S+r.F*!t("./_iter-detect")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,i,o=p(t),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,u=void 0!==l,c=0,h=_(o);if(u&&(l=f(l,2<s?arguments[2]:void 0,2)),null==h||a==Array&&g(h))for(n=new a(e=m(o.length));c<e;c++)y(n,c,u?l(o[c],c):o[c]);else for(i=h.call(o),n=new a;!(r=i.next()).done;c++)y(n,c,u?d(i,l,[r.value,c],!0):r.value);return n.length=c,n}})},{"./_create-property":114,"./_ctx":115,"./_export":123,"./_is-array-iter":138,"./_iter-call":143,"./_iter-detect":146,"./_to-length":205,"./_to-object":206,"./core.get-iterator-method":217}],227:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-includes")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!t("./_strict-method")(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},{"./_array-includes":101,"./_export":123,"./_strict-method":192}],228:[function(t,e,n){var r=t("./_export");r(r.S,"Array",{isArray:t("./_is-array")})},{"./_export":123,"./_is-array":139}],229:[function(t,e,n){"use strict";var r=t("./_add-to-unscopables"),i=t("./_iter-step"),o=t("./_iterators"),a=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":95,"./_iter-define":145,"./_iter-step":147,"./_iterators":148,"./_to-iobject":204}],230:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-iobject"),o=[].join;r(r.P+r.F*(t("./_iobject")!=Object||!t("./_strict-method")(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},{"./_export":123,"./_iobject":137,"./_strict-method":192,"./_to-iobject":204}],231:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-iobject"),o=t("./_to-integer"),a=t("./_to-length"),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!t("./_strict-method")(s)),"Array",{lastIndexOf:function(t){if(l)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(1<arguments.length&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in e&&e[r]===t)return r||0;return-1}})},{"./_export":123,"./_strict-method":192,"./_to-integer":203,"./_to-iobject":204,"./_to-length":205}],232:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(1);r(r.P+r.F*!t("./_strict-method")([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":102,"./_export":123,"./_strict-method":192}],233:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_create-property");r(r.S+r.F*t("./_fails")(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);t<e;)i(n,t,arguments[t++]);return n.length=e,n}})},{"./_create-property":114,"./_export":123,"./_fails":125}],234:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-reduce");r(r.P+r.F*!t("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},{"./_array-reduce":103,"./_export":123,"./_strict-method":192}],235:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-reduce");r(r.P+r.F*!t("./_strict-method")([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},{"./_array-reduce":103,"./_export":123,"./_strict-method":192}],236:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_html"),u=t("./_cof"),c=t("./_to-absolute-index"),h=t("./_to-length"),f=[].slice;r(r.P+r.F*t("./_fails")(function(){i&&f.call(i)}),"Array",{slice:function(t,e){var n=h(this.length),r=u(this);if(e=void 0===e?n:e,"Array"==r)return f.call(this,t,e);for(var i=c(t,n),o=c(e,n),a=h(o-i),s=new Array(a),l=0;l<a;l++)s[l]="String"==r?this.charAt(i+l):this[i+l];return s}})},{"./_cof":108,"./_export":123,"./_fails":125,"./_html":133,"./_to-absolute-index":201,"./_to-length":205}],237:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(3);r(r.P+r.F*!t("./_strict-method")([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":102,"./_export":123,"./_strict-method":192}],238:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_a-function"),o=t("./_to-object"),a=t("./_fails"),s=[].sort,l=[1,2,3];r(r.P+r.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!t("./_strict-method")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},{"./_a-function":93,"./_export":123,"./_fails":125,"./_strict-method":192,"./_to-object":206}],239:[function(t,e,n){t("./_set-species")("Array")},{"./_set-species":187}],240:[function(t,e,n){var r=t("./_export");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":123}],241:[function(t,e,n){var r=t("./_export"),i=t("./_date-to-iso-string");r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},{"./_date-to-iso-string":116,"./_export":123}],242:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_to-primitive");r(r.P+r.F*t("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},{"./_export":123,"./_fails":125,"./_to-object":206,"./_to-primitive":207}],243:[function(t,e,n){var r=t("./_wks")("toPrimitive"),i=Date.prototype;r in i||t("./_hide")(i,r,t("./_date-to-primitive"))},{"./_date-to-primitive":117,"./_hide":132,"./_wks":216}],244:[function(t,e,n){var r=Date.prototype,i="Invalid Date",o=r.toString,a=r.getTime;new Date(NaN)+""!=i&&t("./_redefine")(r,"toString",function(){var t=a.call(this);return t==t?o.call(this):i})},{"./_redefine":181}],245:[function(t,e,n){var r=t("./_export");r(r.P,"Function",{bind:t("./_bind")})},{"./_bind":106,"./_export":123}],246:[function(t,e,n){"use strict";var r=t("./_is-object"),i=t("./_object-gpo"),o=t("./_wks")("hasInstance"),a=Function.prototype;o in a||t("./_object-dp").f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},{"./_is-object":141,"./_object-dp":161,"./_object-gpo":168,"./_wks":216}],247:[function(t,e,n){var r=t("./_object-dp").f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||t("./_descriptors")&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},{"./_descriptors":119,"./_object-dp":161}],248:[function(t,e,n){"use strict";var r=t("./_collection-strong"),i=t("./_validate-collection");e.exports=t("./_collection")("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},{"./_collection":112,"./_collection-strong":109,"./_validate-collection":213}],249:[function(t,e,n){var r=t("./_export"),i=t("./_math-log1p"),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},{"./_export":123,"./_math-log1p":152}],250:[function(t,e,n){var r=t("./_export"),i=Math.asinh;r(r.S+r.F*!(i&&0<1/i(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},{"./_export":123}],251:[function(t,e,n){var r=t("./_export"),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{"./_export":123}],252:[function(t,e,n){var r=t("./_export"),i=t("./_math-sign");r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},{"./_export":123,"./_math-sign":154}],253:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{"./_export":123}],254:[function(t,e,n){var r=t("./_export"),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},{"./_export":123}],255:[function(t,e,n){var r=t("./_export"),i=t("./_math-expm1");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":123,"./_math-expm1":150}],256:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{fround:t("./_math-fround")})},{"./_export":123,"./_math-fround":151}],257:[function(t,e,n){var r=t("./_export"),l=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=l(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=0<n?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}})},{"./_export":123}],258:[function(t,e,n){var r=t("./_export"),i=Math.imul;r(r.S+r.F*t("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},{"./_export":123,"./_fails":125}],259:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},{"./_export":123}],260:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{log1p:t("./_math-log1p")})},{"./_export":123,"./_math-log1p":152}],261:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},{"./_export":123}],262:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{sign:t("./_math-sign")})},{"./_export":123,"./_math-sign":154}],263:[function(t,e,n){var r=t("./_export"),i=t("./_math-expm1"),o=Math.exp;r(r.S+r.F*t("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},{"./_export":123,"./_fails":125,"./_math-expm1":150}],264:[function(t,e,n){var r=t("./_export"),i=t("./_math-expm1"),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},{"./_export":123,"./_math-expm1":150}],265:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},{"./_export":123}],266:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_has"),o=t("./_cof"),a=t("./_inherit-if-required"),c=t("./_to-primitive"),s=t("./_fails"),l=t("./_object-gopn").f,u=t("./_object-gopd").f,h=t("./_object-dp").f,f=t("./_string-trim").trim,p="Number",d=r[p],g=d,m=d.prototype,y=o(t("./_object-create")(m))==p,_="trim"in String.prototype,v=function(t){var e=c(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,o=(e=_?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),l=0,u=s.length;l<u;l++)if((a=s.charCodeAt(l))<48||i<a)return NaN;return parseInt(s,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(y?s(function(){m.valueOf.call(n)}):o(n)!=p)?a(new g(v(e)),n,d):v(e)};for(var b,x=t("./_descriptors")?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(g,b=x[w])&&!i(d,b)&&h(d,b,u(g,b));(d.prototype=m).constructor=d,t("./_redefine")(r,p,d)}},{"./_cof":108,"./_descriptors":119,"./_fails":125,"./_global":130,"./_has":131,"./_inherit-if-required":135,"./_object-create":160,"./_object-dp":161,"./_object-gopd":164,"./_object-gopn":166,"./_redefine":181,"./_string-trim":198,"./_to-primitive":207}],267:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":123}],268:[function(t,e,n){var r=t("./_export"),i=t("./_global").isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},{"./_export":123,"./_global":130}],269:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{isInteger:t("./_is-integer")})},{"./_export":123,"./_is-integer":140}],270:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{isNaN:function(t){return t!=t}})},{"./_export":123}],271:[function(t,e,n){var r=t("./_export"),i=t("./_is-integer"),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},{"./_export":123,"./_is-integer":140}],272:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":123}],273:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":123}],274:[function(t,e,n){var r=t("./_export"),i=t("./_parse-float");r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":123,"./_parse-float":175}],275:[function(t,e,n){var r=t("./_export"),i=t("./_parse-int");r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":123,"./_parse-int":176}],276:[function(t,e,n){"use strict";var r=t("./_export"),u=t("./_to-integer"),c=t("./_a-number-value"),h=t("./_string-repeat"),i=1..toFixed,o=Math.floor,a=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",p=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*a[n],a[n]=r%1e7,r=o(r/1e7)},d=function(t){for(var e=6,n=0;0<=--e;)n+=a[e],a[e]=o(n/t),n=n%t*1e7},g=function(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==a[t]){var n=String(a[t]);e=""===e?n:e+h.call("0",7-n.length)+n}return e},m=function(t,e,n){return 0===e?n:e%2==1?m(t,e-1,n*t):m(t*t,e/2,n)};r(r.P+r.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t("./_fails")(function(){i.call({})})),"Number",{toFixed:function(t){var e,n,r,i,o=c(this,f),a=u(t),s="",l="0";if(a<0||20<a)throw RangeError(f);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(s="-",o=-o),1e-21<o)if(n=(e=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(o*m(2,69,1))-69)<0?o*m(2,-e,1):o/m(2,e,1),n*=4503599627370496,0<(e=52-e)){for(p(0,n),r=a;7<=r;)p(1e7,0),r-=7;for(p(m(10,r,1),0),r=e-1;23<=r;)d(1<<23),r-=23;d(1<<r),p(1,1),d(2),l=g()}else p(0,n),p(1<<-e,0),l=g()+h.call("0",a);return l=0<a?s+((i=l.length)<=a?"0."+h.call("0",a-i)+l:l.slice(0,i-a)+"."+l.slice(i-a)):s+l}})},{"./_a-number-value":94,"./_export":123,"./_fails":125,"./_string-repeat":197,"./_to-integer":203}],277:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_fails"),o=t("./_a-number-value"),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},{"./_a-number-value":94,"./_export":123,"./_fails":125}],278:[function(t,e,n){var r=t("./_export");r(r.S+r.F,"Object",{assign:t("./_object-assign")})},{"./_export":123,"./_object-assign":159}],279:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{create:t("./_object-create")})},{"./_export":123,"./_object-create":160}],280:[function(t,e,n){var r=t("./_export");r(r.S+r.F*!t("./_descriptors"),"Object",{defineProperties:t("./_object-dps")})},{"./_descriptors":119,"./_export":123,"./_object-dps":162}],281:[function(t,e,n){var r=t("./_export");r(r.S+r.F*!t("./_descriptors"),"Object",{defineProperty:t("./_object-dp").f})},{"./_descriptors":119,"./_export":123,"./_object-dp":161}],282:[function(t,e,n){var r=t("./_is-object"),i=t("./_meta").onFreeze;t("./_object-sap")("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},{"./_is-object":141,"./_meta":155,"./_object-sap":172}],283:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_object-gopd").f;t("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},{"./_object-gopd":164,"./_object-sap":172,"./_to-iobject":204}],284:[function(t,e,n){t("./_object-sap")("getOwnPropertyNames",function(){return t("./_object-gopn-ext").f})},{"./_object-gopn-ext":165,"./_object-sap":172}],285:[function(t,e,n){var r=t("./_to-object"),i=t("./_object-gpo");t("./_object-sap")("getPrototypeOf",function(){return function(t){return i(r(t))}})},{"./_object-gpo":168,"./_object-sap":172,"./_to-object":206}],286:[function(t,e,n){var r=t("./_is-object");t("./_object-sap")("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},{"./_is-object":141,"./_object-sap":172}],287:[function(t,e,n){var r=t("./_is-object");t("./_object-sap")("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},{"./_is-object":141,"./_object-sap":172}],288:[function(t,e,n){var r=t("./_is-object");t("./_object-sap")("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},{"./_is-object":141,"./_object-sap":172}],289:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{is:t("./_same-value")})},{"./_export":123,"./_same-value":183}],290:[function(t,e,n){var r=t("./_to-object"),i=t("./_object-keys");t("./_object-sap")("keys",function(){return function(t){return i(r(t))}})},{"./_object-keys":170,"./_object-sap":172,"./_to-object":206}],291:[function(t,e,n){var r=t("./_is-object"),i=t("./_meta").onFreeze;t("./_object-sap")("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},{"./_is-object":141,"./_meta":155,"./_object-sap":172}],292:[function(t,e,n){var r=t("./_is-object"),i=t("./_meta").onFreeze;t("./_object-sap")("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},{"./_is-object":141,"./_meta":155,"./_object-sap":172}],293:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{setPrototypeOf:t("./_set-proto").set})},{"./_export":123,"./_set-proto":186}],294:[function(t,e,n){"use strict";var r=t("./_classof"),i={};i[t("./_wks")("toStringTag")]="z",i+""!="[object z]"&&t("./_redefine")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},{"./_classof":107,"./_redefine":181,"./_wks":216}],295:[function(t,e,n){var r=t("./_export"),i=t("./_parse-float");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},{"./_export":123,"./_parse-float":175}],296:[function(t,e,n){var r=t("./_export"),i=t("./_parse-int");r(r.G+r.F*(parseInt!=i),{parseInt:i})},{"./_export":123,"./_parse-int":176}],297:[function(n,t,e){"use strict";var r,i,o,a,s=n("./_library"),l=n("./_global"),u=n("./_ctx"),c=n("./_classof"),h=n("./_export"),f=n("./_is-object"),p=n("./_a-function"),d=n("./_an-instance"),g=n("./_for-of"),m=n("./_species-constructor"),y=n("./_task").set,_=n("./_microtask")(),v=n("./_new-promise-capability"),b=n("./_perform"),x=n("./_user-agent"),w=n("./_promise-resolve"),L="Promise",C=l.TypeError,k=l.process,E=k&&k.versions,S=E&&E.v8||"",M=l[L],P="process"==c(k),I=function(){},T=i=v.f,O=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n("./_wks")("species")]=function(t){t(I,I)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e&&0!==S.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},D=function(c,n){if(!c._n){c._n=!0;var r=c._c;_(function(){for(var l=c._v,u=1==c._s,t=0,e=function(t){var e,n,r,i=u?t.ok:t.fail,o=t.resolve,a=t.reject,s=t.domain;try{i?(u||(2==c._h&&F(c),c._h=1),!0===i?e=l:(s&&s.enter(),e=i(l),s&&(s.exit(),r=!0)),e===t.promise?a(C("Promise-chain cycle")):(n=N(e))?n.call(e,o,a):o(e)):a(l)}catch(t){s&&!r&&s.exit(),a(t)}};r.length>t;)e(r[t++]);c._c=[],c._n=!1,n&&!c._h&&A(c)})}},A=function(o){y.call(l,function(){var t,e,n,r=o._v,i=R(o);if(i&&(t=b(function(){P?k.emit("unhandledRejection",r,o):(e=l.onunhandledrejection)?e({promise:o,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=P||R(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(e){y.call(l,function(){var t;P?k.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},B=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw C("Promise can't be resolved itself");(n=N(t))?_(function(){var e={_w:r,_d:!1};try{n.call(t,u(B,e,1),u(j,e,1))}catch(t){j.call(e,t)}}):(r._v=t,r._s=1,D(r,!1))}catch(t){j.call({_w:r,_d:!1},t)}}};O||(M=function(t){d(this,M,L,"_h"),p(t),r.call(this);try{t(u(B,this,1),u(j,this,1))}catch(t){j.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("./_redefine-all")(M.prototype,{then:function(t,e){var n=T(m(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=u(B,t,1),this.reject=u(j,t,1)},v.f=T=function(t){return t===M||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!O,{Promise:M}),n("./_set-to-string-tag")(M,L),n("./_set-species")(L),a=n("./_core")[L],h(h.S+h.F*!O,L,{reject:function(t){var e=T(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!O),L,{resolve:function(t){return w(s&&this===a?M:this,t)}}),h(h.S+h.F*!(O&&n("./_iter-detect")(function(t){M.all(t).catch(I)})),L,{all:function(t){var a=this,e=T(a),s=e.resolve,l=e.reject,n=b(function(){var r=[],i=0,o=1;g(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||s(r))},l)}),--o||s(r)});return n.e&&l(n.v),e.promise},race:function(t){var e=this,n=T(e),r=n.reject,i=b(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},{"./_a-function":93,"./_an-instance":96,"./_classof":107,"./_core":113,"./_ctx":115,"./_export":123,"./_for-of":129,"./_global":130,"./_is-object":141,"./_iter-detect":146,"./_library":149,"./_microtask":157,"./_new-promise-capability":158,"./_perform":177,"./_promise-resolve":178,"./_redefine-all":180,"./_set-species":187,"./_set-to-string-tag":188,"./_species-constructor":191,"./_task":200,"./_user-agent":212,"./_wks":216}],298:[function(t,e,n){var r=t("./_export"),o=t("./_a-function"),a=t("./_an-object"),s=(t("./_global").Reflect||{}).apply,l=Function.apply;r(r.S+r.F*!t("./_fails")(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var r=o(t),i=a(n);return s?s(r,e,i):l.call(r,e,i)}})},{"./_a-function":93,"./_an-object":97,"./_export":123,"./_fails":125,"./_global":130}],299:[function(t,e,n){var r=t("./_export"),s=t("./_object-create"),l=t("./_a-function"),u=t("./_an-object"),c=t("./_is-object"),i=t("./_fails"),h=t("./_bind"),f=(t("./_global").Reflect||{}).construct,p=i(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),d=!i(function(){f(function(){})});r(r.S+r.F*(p||d),"Reflect",{construct:function(t,e){l(t),u(e);var n=arguments.length<3?t:l(arguments[2]);if(d&&!p)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(h.apply(t,r))}var i=n.prototype,o=s(c(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return c(a)?a:o}})},{"./_a-function":93,"./_an-object":97,"./_bind":106,"./_export":123,"./_fails":125,"./_global":130,"./_is-object":141,"./_object-create":160}],300:[function(t,e,n){var r=t("./_object-dp"),i=t("./_export"),o=t("./_an-object"),a=t("./_to-primitive");i(i.S+i.F*t("./_fails")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},{"./_an-object":97,"./_export":123,"./_fails":125,"./_object-dp":161,"./_to-primitive":207}],301:[function(t,e,n){var r=t("./_export"),i=t("./_object-gopd").f,o=t("./_an-object");r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},{"./_an-object":97,"./_export":123,"./_object-gopd":164}],302:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_an-object"),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};t("./_iter-create")(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},{"./_an-object":97,"./_export":123,"./_iter-create":144}],303:[function(t,e,n){var r=t("./_object-gopd"),i=t("./_export"),o=t("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},{"./_an-object":97,"./_export":123,"./_object-gopd":164}],304:[function(t,e,n){var r=t("./_export"),i=t("./_object-gpo"),o=t("./_an-object");r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},{"./_an-object":97,"./_export":123,"./_object-gpo":168}],305:[function(t,e,n){var a=t("./_object-gopd"),s=t("./_object-gpo"),l=t("./_has"),r=t("./_export"),u=t("./_is-object"),c=t("./_an-object");r(r.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return c(e)===o?e[n]:(r=a.f(e,n))?l(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:u(i=s(e))?t(i,n,o):void 0}})},{"./_an-object":97,"./_export":123,"./_has":131,"./_is-object":141,"./_object-gopd":164,"./_object-gpo":168}],306:[function(t,e,n){var r=t("./_export");r(r.S,"Reflect",{has:function(t,e){return e in t}})},{"./_export":123}],307:[function(t,e,n){var r=t("./_export"),i=t("./_an-object"),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},{"./_an-object":97,"./_export":123}],308:[function(t,e,n){var r=t("./_export");r(r.S,"Reflect",{ownKeys:t("./_own-keys")})},{"./_export":123,"./_own-keys":174}],309:[function(t,e,n){var r=t("./_export"),i=t("./_an-object"),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},{"./_an-object":97,"./_export":123}],310:[function(t,e,n){var r=t("./_export"),i=t("./_set-proto");i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},{"./_export":123,"./_set-proto":186}],311:[function(t,e,n){var l=t("./_object-dp"),u=t("./_object-gopd"),c=t("./_object-gpo"),h=t("./_has"),r=t("./_export"),f=t("./_property-desc"),p=t("./_an-object"),d=t("./_is-object");r(r.S,"Reflect",{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],s=u.f(p(e),n);if(!s){if(d(o=c(e)))return t(o,n,r,a);s=f(0)}if(h(s,"value")){if(!1===s.writable||!d(a))return!1;if(i=u.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,l.f(a,n,i)}else l.f(a,n,f(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}})},{"./_an-object":97,"./_export":123,"./_has":131,"./_is-object":141,"./_object-dp":161,"./_object-gopd":164,"./_object-gpo":168,"./_property-desc":179}],312:[function(t,e,n){var r=t("./_global"),o=t("./_inherit-if-required"),i=t("./_object-dp").f,a=t("./_object-gopn").f,s=t("./_is-regexp"),l=t("./_flags"),u=r.RegExp,c=u,h=u.prototype,f=/a/g,p=/a/g,d=new u(f)!==f;if(t("./_descriptors")&&(!d||t("./_fails")(function(){return p[t("./_wks")("match")]=!1,u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")}))){u=function(t,e){var n=this instanceof u,r=s(t),i=void 0===e;return!n&&r&&t.constructor===u&&i?t:o(d?new c(r&&!i?t.source:t,e):c((r=t instanceof u)?t.source:t,r&&i?l.call(t):e),n?this:h,u)};for(var g=function(e){e in u||i(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},m=a(c),y=0;m.length>y;)g(m[y++]);(h.constructor=u).prototype=h,t("./_redefine")(r,"RegExp",u)}t("./_set-species")("RegExp")},{"./_descriptors":119,"./_fails":125,"./_flags":127,"./_global":130,"./_inherit-if-required":135,"./_is-regexp":142,"./_object-dp":161,"./_object-gopn":166,"./_redefine":181,"./_set-species":187,"./_wks":216}],313:[function(t,e,n){t("./_descriptors")&&"g"!=/./g.flags&&t("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:t("./_flags")})},{"./_descriptors":119,"./_flags":127,"./_object-dp":161}],314:[function(t,e,n){t("./_fix-re-wks")("match",1,function(r,i,t){return[function(t){"use strict";var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},t]})},{"./_fix-re-wks":126}],315:[function(t,e,n){t("./_fix-re-wks")("replace",2,function(i,o,a){return[function(t,e){"use strict";var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):a.call(String(n),t,e)},a]})},{"./_fix-re-wks":126}],316:[function(t,e,n){t("./_fix-re-wks")("search",1,function(r,i,t){return[function(t){"use strict";var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},t]})},{"./_fix-re-wks":126}],317:[function(e,t,n){e("./_fix-re-wks")("split",2,function(i,o,a){"use strict";var p=e("./_is-regexp"),d=a,g=[].push,t="split",m="length";if("c"=="abbc"[t](/(b)*/)[1]||4!="test"[t](/(?:)/,-1)[m]||2!="ab"[t](/(?:ab)*/)[m]||4!="."[t](/(.?)(.?)/)[m]||1<"."[t](/()()/)[m]||""[t](/.?/)[m]){var y=void 0===/()??/.exec("")[1];a=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!p(t))return d.call(n,t,e);var r,i,o,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,u+"g");for(y||(r=new RegExp("^"+f.source+"$(?!\\s)",u));(i=f.exec(n))&&!(c<(o=i.index+i[0][m])&&(l.push(n.slice(c,i.index)),!y&&1<i[m]&&i[0].replace(r,function(){for(s=1;s<arguments[m]-2;s++)void 0===arguments[s]&&(i[s]=void 0)}),1<i[m]&&i.index<n[m]&&g.apply(l,i.slice(1)),a=i[0][m],c=o,l[m]>=h));)f.lastIndex===i.index&&f.lastIndex++;return c===n[m]?!a&&f.test("")||l.push(""):l.push(n.slice(c)),l[m]>h?l.slice(0,h):l}}else"0"[t](void 0,0)[m]&&(a=function(t,e){return void 0===t&&0===e?[]:d.call(this,t,e)});return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):a.call(String(n),t,e)},a]})},{"./_fix-re-wks":126,"./_is-regexp":142}],318:[function(e,t,n){"use strict";e("./es6.regexp.flags");var r=e("./_an-object"),i=e("./_flags"),o=e("./_descriptors"),a="toString",s=/./[a],l=function(t){e("./_redefine")(RegExp.prototype,a,t,!0)};e("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):s.name!=a&&l(function(){return s.call(this)})},{"./_an-object":97,"./_descriptors":119,"./_fails":125,"./_flags":127,"./_redefine":181,"./es6.regexp.flags":313}],319:[function(t,e,n){"use strict";var r=t("./_collection-strong"),i=t("./_validate-collection");e.exports=t("./_collection")("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},{"./_collection":112,"./_collection-strong":109,"./_validate-collection":213}],320:[function(t,e,n){"use strict";t("./_string-html")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},{"./_string-html":195}],321:[function(t,e,n){"use strict";t("./_string-html")("big",function(t){return function(){return t(this,"big","","")}})},{"./_string-html":195}],322:[function(t,e,n){"use strict";t("./_string-html")("blink",function(t){return function(){return t(this,"blink","","")}})},{"./_string-html":195}],323:[function(t,e,n){"use strict";t("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}})},{"./_string-html":195}],324:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-at")(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},{"./_export":123,"./_string-at":193}],325:[function(t,e,n){"use strict";var r=t("./_export"),a=t("./_to-length"),s=t("./_string-context"),l="endsWith",u=""[l];r(r.P+r.F*t("./_fails-is-regexp")(l),"String",{endsWith:function(t){var e=s(this,t,l),n=1<arguments.length?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:Math.min(a(n),r),o=String(t);return u?u.call(e,o,i):e.slice(i-o.length,i)===o}})},{"./_export":123,"./_fails-is-regexp":124,"./_string-context":194,"./_to-length":205}],326:[function(t,e,n){"use strict";t("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}})},{"./_string-html":195}],327:[function(t,e,n){"use strict";t("./_string-html")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},{"./_string-html":195}],328:[function(t,e,n){"use strict";t("./_string-html")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},{"./_string-html":195}],329:[function(t,e,n){var r=t("./_export"),o=t("./_to-absolute-index"),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;i<r;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},{"./_export":123,"./_to-absolute-index":201}],330:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-context");r(r.P+r.F*t("./_fails-is-regexp")("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},{"./_export":123,"./_fails-is-regexp":124,"./_string-context":194}],331:[function(t,e,n){"use strict";t("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}})},{"./_string-html":195}],332:[function(t,e,n){"use strict";var r=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":145,"./_string-at":193}],333:[function(t,e,n){"use strict";t("./_string-html")("link",function(e){return function(t){return e(this,"a","href",t)}})},{"./_string-html":195}],334:[function(t,e,n){var r=t("./_export"),a=t("./_to-iobject"),s=t("./_to-length");r(r.S,"String",{raw:function(t){for(var e=a(t.raw),n=s(e.length),r=arguments.length,i=[],o=0;o<n;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}})},{"./_export":123,"./_to-iobject":204,"./_to-length":205}],335:[function(t,e,n){var r=t("./_export");r(r.P,"String",{repeat:t("./_string-repeat")})},{"./_export":123,"./_string-repeat":197}],336:[function(t,e,n){"use strict";t("./_string-html")("small",function(t){return function(){return t(this,"small","","")}})},{"./_string-html":195}],337:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-length"),o=t("./_string-context"),a="startsWith",s=""[a];r(r.P+r.F*t("./_fails-is-regexp")(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},{"./_export":123,"./_fails-is-regexp":124,"./_string-context":194,"./_to-length":205}],338:[function(t,e,n){"use strict";t("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}})},{"./_string-html":195}],339:[function(t,e,n){"use strict";t("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}})},{"./_string-html":195}],340:[function(t,e,n){"use strict";t("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}})},{"./_string-html":195}],341:[function(t,e,n){"use strict";t("./_string-trim")("trim",function(t){return function(){return t(this,3)}})},{"./_string-trim":198}],342:[function(t,e,n){"use strict";var r=t("./_global"),a=t("./_has"),i=t("./_descriptors"),o=t("./_export"),s=t("./_redefine"),l=t("./_meta").KEY,u=t("./_fails"),c=t("./_shared"),h=t("./_set-to-string-tag"),f=t("./_uid"),p=t("./_wks"),d=t("./_wks-ext"),g=t("./_wks-define"),m=t("./_enum-keys"),y=t("./_is-array"),_=t("./_an-object"),v=t("./_is-object"),b=t("./_to-iobject"),x=t("./_to-primitive"),w=t("./_property-desc"),L=t("./_object-create"),C=t("./_object-gopn-ext"),k=t("./_object-gopd"),E=t("./_object-dp"),S=t("./_object-keys"),M=k.f,P=E.f,I=C.f,T=r.Symbol,O=r.JSON,N=O&&O.stringify,D="prototype",A=p("_hidden"),R=p("toPrimitive"),F={}.propertyIsEnumerable,j=c("symbol-registry"),B=c("symbols"),z=c("op-symbols"),q=Object[D],U="function"==typeof T,G=r.QObject,V=!G||!G[D]||!G[D].findChild,H=i&&u(function(){return 7!=L(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(q,e);r&&delete q[e],P(t,e,n),r&&t!==q&&P(q,e,r)}:P,W=function(t){var e=B[t]=L(T[D]);return e._k=t,e},X=U&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},Y=function(t,e,n){return t===q&&Y(z,e,n),_(t),e=x(e,!0),_(n),a(B,e)?(n.enumerable?(a(t,A)&&t[A][e]&&(t[A][e]=!1),n=L(n,{enumerable:w(0,!1)})):(a(t,A)||P(t,A,w(1,{})),t[A][e]=!0),H(t,e,n)):P(t,e,n)},$=function(t,e){_(t);for(var n,r=m(e=b(e)),i=0,o=r.length;i<o;)Y(t,n=r[i++],e[n]);return t},Z=function(t){var e=F.call(this,t=x(t,!0));return!(this===q&&a(B,t)&&!a(z,t))&&(!(e||!a(this,t)||!a(B,t)||a(this,A)&&this[A][t])||e)},Q=function(t,e){if(t=b(t),e=x(e,!0),t!==q||!a(B,e)||a(z,e)){var n=M(t,e);return!n||!a(B,e)||a(t,A)&&t[A][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=I(b(t)),r=[],i=0;n.length>i;)a(B,e=n[i++])||e==A||e==l||r.push(e);return r},J=function(t){for(var e,n=t===q,r=I(n?z:b(t)),i=[],o=0;r.length>o;)!a(B,e=r[o++])||n&&!a(q,e)||i.push(B[e]);return i};U||(s((T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=f(0<arguments.length?arguments[0]:void 0),n=function(t){this===q&&n.call(z,t),a(this,A)&&a(this[A],e)&&(this[A][e]=!1),H(this,e,w(1,t))};return i&&V&&H(q,e,{configurable:!0,set:n}),W(e)})[D],"toString",function(){return this._k}),k.f=Q,E.f=Y,t("./_object-gopn").f=C.f=K,t("./_object-pie").f=Z,t("./_object-gops").f=J,i&&!t("./_library")&&s(q,"propertyIsEnumerable",Z,!0),d.f=function(t){return W(p(t))}),o(o.G+o.W+o.F*!U,{Symbol:T});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=S(p.store),rt=0;nt.length>rt;)g(nt[rt++]);o(o.S+o.F*!U,"Symbol",{for:function(t){return a(j,t+="")?j[t]:j[t]=T(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),o(o.S+o.F*!U,"Object",{create:function(t,e){return void 0===e?L(t):$(L(t),e)},defineProperty:Y,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:K,getOwnPropertySymbols:J}),O&&o(o.S+o.F*(!U||u(function(){var t=T();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(v(e)||void 0!==t)&&!X(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,N.apply(O,r)}}),T[D][R]||t("./_hide")(T[D],R,T[D].valueOf),h(T,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},{"./_an-object":97,"./_descriptors":119,"./_enum-keys":122,"./_export":123,"./_fails":125,"./_global":130,"./_has":131,"./_hide":132,"./_is-array":139,"./_is-object":141,"./_library":149,"./_meta":155,"./_object-create":160,"./_object-dp":161,"./_object-gopd":164,"./_object-gopn":166,"./_object-gopn-ext":165,"./_object-gops":167,"./_object-keys":170,"./_object-pie":171,"./_property-desc":179,"./_redefine":181,"./_set-to-string-tag":188,"./_shared":190,"./_to-iobject":204,"./_to-primitive":207,"./_uid":211,"./_wks":216,"./_wks-define":214,"./_wks-ext":215}],343:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_typed"),o=t("./_typed-buffer"),u=t("./_an-object"),c=t("./_to-absolute-index"),h=t("./_to-length"),a=t("./_is-object"),s=t("./_global").ArrayBuffer,f=t("./_species-constructor"),p=o.ArrayBuffer,d=o.DataView,l=i.ABV&&s.isView,g=p.prototype.slice,m=i.VIEW,y="ArrayBuffer";r(r.G+r.W+r.F*(s!==p),{ArrayBuffer:p}),r(r.S+r.F*!i.CONSTR,y,{isView:function(t){return l&&l(t)||a(t)&&m in t}}),r(r.P+r.U+r.F*t("./_fails")(function(){return!new p(2).slice(1,void 0).byteLength}),y,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(u(this),t);for(var n=u(this).byteLength,r=c(t,n),i=c(void 0===e?n:e,n),o=new(f(this,p))(h(i-r)),a=new d(this),s=new d(o),l=0;r<i;)s.setUint8(l++,a.getUint8(r++));return o}}),t("./_set-species")(y)},{"./_an-object":97,"./_export":123,"./_fails":125,"./_global":130,"./_is-object":141,"./_set-species":187,"./_species-constructor":191,"./_to-absolute-index":201,"./_to-length":205,"./_typed":210,"./_typed-buffer":209}],344:[function(t,e,n){var r=t("./_export");r(r.G+r.W+r.F*!t("./_typed").ABV,{DataView:t("./_typed-buffer").DataView})},{"./_export":123,"./_typed":210,"./_typed-buffer":209}],345:[function(t,e,n){t("./_typed-array")("Float32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],346:[function(t,e,n){t("./_typed-array")("Float64",8,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],347:[function(t,e,n){t("./_typed-array")("Int16",2,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],348:[function(t,e,n){t("./_typed-array")("Int32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],349:[function(t,e,n){t("./_typed-array")("Int8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],350:[function(t,e,n){t("./_typed-array")("Uint16",2,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],351:[function(t,e,n){t("./_typed-array")("Uint32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],352:[function(t,e,n){t("./_typed-array")("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},{"./_typed-array":208}],353:[function(t,e,n){t("./_typed-array")("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}},!0)},{"./_typed-array":208}],354:[function(t,e,n){"use strict";var o,r=t("./_array-methods")(0),a=t("./_redefine"),i=t("./_meta"),s=t("./_object-assign"),l=t("./_collection-weak"),u=t("./_is-object"),c=t("./_fails"),h=t("./_validate-collection"),f="WeakMap",p=i.getWeak,d=Object.isExtensible,g=l.ufstore,m={},y=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},_={get:function(t){if(u(t)){var e=p(t);return!0===e?g(h(this,f)).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(h(this,f),t,e)}},v=e.exports=t("./_collection")(f,y,_,l,!0,!0);c(function(){return 7!=(new v).set((Object.freeze||Object)(m),7).get(m)})&&(s((o=l.getConstructor(y,f)).prototype,_),i.NEED=!0,r(["delete","has","get","set"],function(r){var t=v.prototype,i=t[r];a(t,r,function(t,e){if(u(t)&&!d(t)){this._f||(this._f=new o);var n=this._f[r](t,e);return"set"==r?this:n}return i.call(this,t,e)})}))},{"./_array-methods":102,"./_collection":112,"./_collection-weak":111,"./_fails":125,"./_is-object":141,"./_meta":155,"./_object-assign":159,"./_redefine":181,"./_validate-collection":213}],355:[function(t,e,n){"use strict";var r=t("./_collection-weak"),i=t("./_validate-collection");t("./_collection")("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},{"./_collection":112,"./_collection-weak":111,"./_validate-collection":213}],356:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_flatten-into-array"),o=t("./_to-object"),a=t("./_to-length"),s=t("./_a-function"),l=t("./_array-species-create");r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=l(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),t("./_add-to-unscopables")("flatMap")},{"./_a-function":93,"./_add-to-unscopables":95,"./_array-species-create":105,"./_export":123,"./_flatten-into-array":128,"./_to-length":205,"./_to-object":206}],357:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_flatten-into-array"),o=t("./_to-object"),a=t("./_to-length"),s=t("./_to-integer"),l=t("./_array-species-create");r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=l(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),t("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":95,"./_array-species-create":105,"./_export":123,"./_flatten-into-array":128,"./_to-integer":203,"./_to-length":205,"./_to-object":206}],358:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-includes")(!0);r(r.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),t("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":95,"./_array-includes":101,"./_export":123}],359:[function(t,e,n){var r=t("./_export"),i=t("./_microtask")(),o=t("./_global").process,a="process"==t("./_cof")(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},{"./_cof":108,"./_export":123,"./_global":130,"./_microtask":157}],360:[function(t,e,n){var r=t("./_export"),i=t("./_cof");r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},{"./_cof":108,"./_export":123}],361:[function(t,e,n){var r=t("./_export");r(r.G,{global:t("./_global")})},{"./_export":123,"./_global":130}],362:[function(t,e,n){t("./_set-collection-from")("Map")},{"./_set-collection-from":184}],363:[function(t,e,n){t("./_set-collection-of")("Map")},{"./_set-collection-of":185}],364:[function(t,e,n){var r=t("./_export");r(r.P+r.R,"Map",{toJSON:t("./_collection-to-json")("Map")})},{"./_collection-to-json":110,"./_export":123}],365:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},{"./_export":123}],366:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":123}],367:[function(t,e,n){var r=t("./_export"),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},{"./_export":123}],368:[function(t,e,n){var r=t("./_export"),o=t("./_math-scale"),a=t("./_math-fround");r(r.S,"Math",{fscale:function(t,e,n,r,i){return a(o(t,e,n,r,i))}})},{"./_export":123,"./_math-fround":151,"./_math-scale":153}],369:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},{"./_export":123}],370:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},{"./_export":123}],371:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},{"./_export":123}],372:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":123}],373:[function(t,e,n){var r=t("./_export"),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},{"./_export":123}],374:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{scale:t("./_math-scale")})},{"./_export":123,"./_math-scale":153}],375:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},{"./_export":123}],376:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,l=(a*o>>>0)+(i*o>>>16);return a*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},{"./_export":123}],377:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_a-function"),a=t("./_object-dp");t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},{"./_a-function":93,"./_descriptors":119,"./_export":123,"./_object-dp":161,"./_object-forced-pam":163,"./_to-object":206}],378:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_a-function"),a=t("./_object-dp");t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},{"./_a-function":93,"./_descriptors":119,"./_export":123,"./_object-dp":161,"./_object-forced-pam":163,"./_to-object":206}],379:[function(t,e,n){var r=t("./_export"),i=t("./_object-to-array")(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},{"./_export":123,"./_object-to-array":173}],380:[function(t,e,n){var r=t("./_export"),l=t("./_own-keys"),u=t("./_to-iobject"),c=t("./_object-gopd"),h=t("./_create-property");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=u(t),i=c.f,o=l(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&h(a,e,n);return a}})},{"./_create-property":114,"./_export":123,"./_object-gopd":164,"./_own-keys":174,"./_to-iobject":204}],381:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_to-primitive"),a=t("./_object-gpo"),s=t("./_object-gopd").f;t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.get}while(n=a(n))}})},{"./_descriptors":119,"./_export":123,"./_object-forced-pam":163,"./_object-gopd":164,"./_object-gpo":168,"./_to-object":206,"./_to-primitive":207}],382:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_to-primitive"),a=t("./_object-gpo"),s=t("./_object-gopd").f;t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.set}while(n=a(n))}})},{"./_descriptors":119,"./_export":123,"./_object-forced-pam":163,"./_object-gopd":164,"./_object-gpo":168,"./_to-object":206,"./_to-primitive":207}],383:[function(t,e,n){var r=t("./_export"),i=t("./_object-to-array")(!1);r(r.S,"Object",{values:function(t){return i(t)}})},{"./_export":123,"./_object-to-array":173}],384:[function(t,e,n){"use strict";var r=t("./_export"),o=t("./_global"),a=t("./_core"),i=t("./_microtask")(),s=t("./_wks")("observable"),l=t("./_a-function"),u=t("./_an-object"),c=t("./_an-instance"),h=t("./_redefine-all"),f=t("./_hide"),p=t("./_for-of"),d=p.RETURN,g=function(t){return null==t?void 0:l(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},_=function(t){y(t)||(t._o=void 0,m(t))},v=function(e,t){u(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:l(n),this._c=n)}catch(t){return void e.error(t)}y(this)&&m(this)};v.prototype=h({},{unsubscribe:function(){_(this)}});var b=function(t){this._s=t};b.prototype=h({},{next:function(t){var e=this._s;if(!y(e)){var n=e._o;try{var r=g(n.next);if(r)return r.call(n,t)}catch(t){try{_(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var n=e._o;e._o=void 0;try{var r=g(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{m(e)}finally{throw t}}return m(e),t},complete:function(t){var e=this._s;if(!y(e)){var n=e._o;e._o=void 0;try{var r=g(n.complete);t=r?r.call(n,t):void 0}catch(t){try{m(e)}finally{throw t}}return m(e),t}}});var x=function(t){c(this,x,"Observable","_f")._f=l(t)};h(x.prototype,{subscribe:function(t){return new v(t,this._f)},forEach:function(r){var i=this;return new(a.Promise||o.Promise)(function(t,e){l(r);var n=i.subscribe({next:function(t){try{return r(t)}catch(t){e(t),n.unsubscribe()}},error:e,complete:t})})}}),h(x,{from:function(t){var e="function"==typeof this?this:x,n=g(u(t)[s]);if(n){var r=u(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return i(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:x)(function(e){var n=!1;return i(function(){if(!n){for(var t=0;t<r.length;++t)if(e.next(r[t]),n)return;e.complete()}}),function(){n=!0}})}}),f(x.prototype,s,function(){return this}),r(r.G,{Observable:x}),t("./_set-species")("Observable")},{"./_a-function":93,"./_an-instance":96,"./_an-object":97,"./_core":113,"./_export":123,"./_for-of":129,"./_global":130,"./_hide":132,"./_microtask":157,"./_redefine-all":180,"./_set-species":187,"./_wks":216}],385:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_core"),o=t("./_global"),a=t("./_species-constructor"),s=t("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(e){var n=a(this,i.Promise||o.Promise),t="function"==typeof e;return this.then(t?function(t){return s(n,e()).then(function(){return t})}:e,t?function(t){return s(n,e()).then(function(){throw t})}:e)}})},{"./_core":113,"./_export":123,"./_global":130,"./_promise-resolve":178,"./_species-constructor":191}],386:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_new-promise-capability"),o=t("./_perform");r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},{"./_export":123,"./_new-promise-capability":158,"./_perform":177}],387:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},{"./_an-object":97,"./_metadata":156}],388:[function(t,e,n){var r=t("./_metadata"),o=t("./_an-object"),a=r.key,s=r.map,l=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:a(arguments[2]),r=s(o(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var i=l.get(e);return i.delete(n),!!i.size||l.delete(e)}})},{"./_an-object":97,"./_metadata":156}],389:[function(t,e,n){var o=t("./es6.set"),a=t("./_array-from-iterable"),r=t("./_metadata"),i=t("./_an-object"),s=t("./_object-gpo"),l=r.keys,u=r.key,c=function(t,e){var n=l(t,e),r=s(t);if(null===r)return n;var i=c(r,e);return i.length?n.length?a(new o(n.concat(i))):i:n};r.exp({getMetadataKeys:function(t){return c(i(t),arguments.length<2?void 0:u(arguments[1]))}})},{"./_an-object":97,"./_array-from-iterable":100,"./_metadata":156,"./_object-gpo":168,"./es6.set":319}],390:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=t("./_object-gpo"),a=r.has,s=r.get,l=r.key,u=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?u(t,r,n):void 0};r.exp({getMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:l(arguments[2]))}})},{"./_an-object":97,"./_metadata":156,"./_object-gpo":168}],391:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},{"./_an-object":97,"./_metadata":156}],392:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":97,"./_metadata":156}],393:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=t("./_object-gpo"),a=r.has,s=r.key,l=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&l(t,r,n)};r.exp({hasMetadata:function(t,e){return l(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":97,"./_metadata":156,"./_object-gpo":168}],394:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":97,"./_metadata":156}],395:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=t("./_a-function"),a=r.key,s=r.set;r.exp({metadata:function(n,r){return function(t,e){s(n,r,(void 0!==e?i:o)(t),a(e))}}})},{"./_a-function":93,"./_an-object":97,"./_metadata":156}],396:[function(t,e,n){t("./_set-collection-from")("Set")},{"./_set-collection-from":184}],397:[function(t,e,n){t("./_set-collection-of")("Set")},{"./_set-collection-of":185}],398:[function(t,e,n){var r=t("./_export");r(r.P+r.R,"Set",{toJSON:t("./_collection-to-json")("Set")})},{"./_collection-to-json":110,"./_export":123}],399:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-at")(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},{"./_export":123,"./_string-at":193}],400:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_defined"),o=t("./_to-length"),a=t("./_is-regexp"),s=t("./_flags"),l=RegExp.prototype,u=function(t,e){this._r=t,this._s=e};t("./_iter-create")(u,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in l?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new u(r,e)}})},{"./_defined":118,"./_export":123,"./_flags":127,"./_is-regexp":142,"./_iter-create":144,"./_to-length":205}],401:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-pad"),o=t("./_user-agent");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},{"./_export":123,"./_string-pad":196,"./_user-agent":212}],402:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-pad"),o=t("./_user-agent");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},{"./_export":123,"./_string-pad":196,"./_user-agent":212}],403:[function(t,e,n){"use strict";t("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},{"./_string-trim":198}],404:[function(t,e,n){"use strict";t("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},{"./_string-trim":198}],405:[function(t,e,n){t("./_wks-define")("asyncIterator")},{"./_wks-define":214}],406:[function(t,e,n){t("./_wks-define")("observable")},{"./_wks-define":214}],407:[function(t,e,n){var r=t("./_export");r(r.S,"System",{global:t("./_global")})},{"./_export":123,"./_global":130}],408:[function(t,e,n){t("./_set-collection-from")("WeakMap")},{"./_set-collection-from":184}],409:[function(t,e,n){t("./_set-collection-of")("WeakMap")},{"./_set-collection-of":185}],410:[function(t,e,n){t("./_set-collection-from")("WeakSet")},{"./_set-collection-from":184}],411:[function(t,e,n){t("./_set-collection-of")("WeakSet")},{"./_set-collection-of":185}],412:[function(t,e,n){for(var r=t("./es6.array.iterator"),i=t("./_object-keys"),o=t("./_redefine"),a=t("./_global"),s=t("./_hide"),l=t("./_iterators"),u=t("./_wks"),c=u("iterator"),h=u("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),g=0;g<d.length;g++){var m,y=d[g],_=p[y],v=a[y],b=v&&v.prototype;if(b&&(b[c]||s(b,c,f),b[h]||s(b,h,y),l[y]=f,_))for(m in r)b[m]||o(b,m,r[m],!0)}},{"./_global":130,"./_hide":132,"./_iterators":148,"./_object-keys":170,"./_redefine":181,"./_wks":216,"./es6.array.iterator":229}],413:[function(t,e,n){var r=t("./_export"),i=t("./_task");r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":123,"./_task":200}],414:[function(t,e,n){var r=t("./_global"),i=t("./_export"),o=t("./_user-agent"),a=[].slice,s=/MSIE .\./.test(o),l=function(i){return function(t,e){var n=2<arguments.length,r=!!n&&a.call(arguments,2);return i(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,e)}};i(i.G+i.B+i.F*s,{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},{"./_export":123,"./_global":130,"./_user-agent":212}],415:[function(t,e,n){t("./modules/es6.symbol"),t("./modules/es6.object.create"),t("./modules/es6.object.define-property"),t("./modules/es6.object.define-properties"),t("./modules/es6.object.get-own-property-descriptor"),t("./modules/es6.object.get-prototype-of"),t("./modules/es6.object.keys"),t("./modules/es6.object.get-own-property-names"),t("./modules/es6.object.freeze"),t("./modules/es6.object.seal"),t("./modules/es6.object.prevent-extensions"),t("./modules/es6.object.is-frozen"),t("./modules/es6.object.is-sealed"),t("./modules/es6.object.is-extensible"),t("./modules/es6.object.assign"),t("./modules/es6.object.is"),t("./modules/es6.object.set-prototype-of"),t("./modules/es6.object.to-string"),t("./modules/es6.function.bind"),t("./modules/es6.function.name"),t("./modules/es6.function.has-instance"),t("./modules/es6.parse-int"),t("./modules/es6.parse-float"),t("./modules/es6.number.constructor"),t("./modules/es6.number.to-fixed"),t("./modules/es6.number.to-precision"),t("./modules/es6.number.epsilon"),t("./modules/es6.number.is-finite"),t("./modules/es6.number.is-integer"),t("./modules/es6.number.is-nan"),t("./modules/es6.number.is-safe-integer"),t("./modules/es6.number.max-safe-integer"),t("./modules/es6.number.min-safe-integer"),t("./modules/es6.number.parse-float"),t("./modules/es6.number.parse-int"),t("./modules/es6.math.acosh"),t("./modules/es6.math.asinh"),t("./modules/es6.math.atanh"),t("./modules/es6.math.cbrt"),t("./modules/es6.math.clz32"),t("./modules/es6.math.cosh"),t("./modules/es6.math.expm1"),t("./modules/es6.math.fround"),t("./modules/es6.math.hypot"),t("./modules/es6.math.imul"),t("./modules/es6.math.log10"),t("./modules/es6.math.log1p"),t("./modules/es6.math.log2"),t("./modules/es6.math.sign"),t("./modules/es6.math.sinh"),t("./modules/es6.math.tanh"),t("./modules/es6.math.trunc"),t("./modules/es6.string.from-code-point"),t("./modules/es6.string.raw"),t("./modules/es6.string.trim"),t("./modules/es6.string.iterator"),t("./modules/es6.string.code-point-at"),t("./modules/es6.string.ends-with"),t("./modules/es6.string.includes"),t("./modules/es6.string.repeat"),t("./modules/es6.string.starts-with"),t("./modules/es6.string.anchor"),t("./modules/es6.string.big"),t("./modules/es6.string.blink"),t("./modules/es6.string.bold"),t("./modules/es6.string.fixed"),t("./modules/es6.string.fontcolor"),t("./modules/es6.string.fontsize"),t("./modules/es6.string.italics"),t("./modules/es6.string.link"),t("./modules/es6.string.small"),t("./modules/es6.string.strike"),t("./modules/es6.string.sub"),t("./modules/es6.string.sup"),t("./modules/es6.date.now"),t("./modules/es6.date.to-json"),t("./modules/es6.date.to-iso-string"),t("./modules/es6.date.to-string"),t("./modules/es6.date.to-primitive"),t("./modules/es6.array.is-array"),t("./modules/es6.array.from"),t("./modules/es6.array.of"),t("./modules/es6.array.join"),t("./modules/es6.array.slice"),t("./modules/es6.array.sort"),t("./modules/es6.array.for-each"),t("./modules/es6.array.map"),t("./modules/es6.array.filter"),t("./modules/es6.array.some"),t("./modules/es6.array.every"),t("./modules/es6.array.reduce"),t("./modules/es6.array.reduce-right"),t("./modules/es6.array.index-of"),t("./modules/es6.array.last-index-of"),t("./modules/es6.array.copy-within"),t("./modules/es6.array.fill"),t("./modules/es6.array.find"),t("./modules/es6.array.find-index"),t("./modules/es6.array.species"),t("./modules/es6.array.iterator"),t("./modules/es6.regexp.constructor"),t("./modules/es6.regexp.to-string"),t("./modules/es6.regexp.flags"),t("./modules/es6.regexp.match"),t("./modules/es6.regexp.replace"),t("./modules/es6.regexp.search"),t("./modules/es6.regexp.split"),t("./modules/es6.promise"),t("./modules/es6.map"),t("./modules/es6.set"),t("./modules/es6.weak-map"),t("./modules/es6.weak-set"),t("./modules/es6.typed.array-buffer"),t("./modules/es6.typed.data-view"),t("./modules/es6.typed.int8-array"),t("./modules/es6.typed.uint8-array"),t("./modules/es6.typed.uint8-clamped-array"),t("./modules/es6.typed.int16-array"),t("./modules/es6.typed.uint16-array"),t("./modules/es6.typed.int32-array"),t("./modules/es6.typed.uint32-array"),t("./modules/es6.typed.float32-array"),t("./modules/es6.typed.float64-array"),t("./modules/es6.reflect.apply"),t("./modules/es6.reflect.construct"),t("./modules/es6.reflect.define-property"),t("./modules/es6.reflect.delete-property"),t("./modules/es6.reflect.enumerate"),t("./modules/es6.reflect.get"),t("./modules/es6.reflect.get-own-property-descriptor"),t("./modules/es6.reflect.get-prototype-of"),t("./modules/es6.reflect.has"),t("./modules/es6.reflect.is-extensible"),t("./modules/es6.reflect.own-keys"),t("./modules/es6.reflect.prevent-extensions"),t("./modules/es6.reflect.set"),t("./modules/es6.reflect.set-prototype-of"),t("./modules/es7.array.includes"),t("./modules/es7.array.flat-map"),t("./modules/es7.array.flatten"),t("./modules/es7.string.at"),t("./modules/es7.string.pad-start"),t("./modules/es7.string.pad-end"),t("./modules/es7.string.trim-left"),t("./modules/es7.string.trim-right"),t("./modules/es7.string.match-all"),t("./modules/es7.symbol.async-iterator"),t("./modules/es7.symbol.observable"),t("./modules/es7.object.get-own-property-descriptors"),t("./modules/es7.object.values"),t("./modules/es7.object.entries"),t("./modules/es7.object.define-getter"),t("./modules/es7.object.define-setter"),t("./modules/es7.object.lookup-getter"),t("./modules/es7.object.lookup-setter"),t("./modules/es7.map.to-json"),t("./modules/es7.set.to-json"),t("./modules/es7.map.of"),t("./modules/es7.set.of"),t("./modules/es7.weak-map.of"),t("./modules/es7.weak-set.of"),t("./modules/es7.map.from"),t("./modules/es7.set.from"),t("./modules/es7.weak-map.from"),t("./modules/es7.weak-set.from"),t("./modules/es7.global"),t("./modules/es7.system.global"),t("./modules/es7.error.is-error"),t("./modules/es7.math.clamp"),t("./modules/es7.math.deg-per-rad"),t("./modules/es7.math.degrees"),t("./modules/es7.math.fscale"),t("./modules/es7.math.iaddh"),t("./modules/es7.math.isubh"),t("./modules/es7.math.imulh"),t("./modules/es7.math.rad-per-deg"),t("./modules/es7.math.radians"),t("./modules/es7.math.scale"),t("./modules/es7.math.umulh"),t("./modules/es7.math.signbit"),t("./modules/es7.promise.finally"),t("./modules/es7.promise.try"),t("./modules/es7.reflect.define-metadata"),t("./modules/es7.reflect.delete-metadata"),t("./modules/es7.reflect.get-metadata"),t("./modules/es7.reflect.get-metadata-keys"),t("./modules/es7.reflect.get-own-metadata"),t("./modules/es7.reflect.get-own-metadata-keys"),t("./modules/es7.reflect.has-metadata"),t("./modules/es7.reflect.has-own-metadata"),t("./modules/es7.reflect.metadata"),t("./modules/es7.asap"),t("./modules/es7.observable"),t("./modules/web.timers"),t("./modules/web.immediate"),t("./modules/web.dom.iterable"),e.exports=t("./modules/_core")},{"./modules/_core":113,"./modules/es6.array.copy-within":219,"./modules/es6.array.every":220,"./modules/es6.array.fill":221,"./modules/es6.array.filter":222,"./modules/es6.array.find":224,"./modules/es6.array.find-index":223,"./modules/es6.array.for-each":225,"./modules/es6.array.from":226,"./modules/es6.array.index-of":227,"./modules/es6.array.is-array":228,"./modules/es6.array.iterator":229,"./modules/es6.array.join":230,"./modules/es6.array.last-index-of":231,"./modules/es6.array.map":232,"./modules/es6.array.of":233,"./modules/es6.array.reduce":235,"./modules/es6.array.reduce-right":234,"./modules/es6.array.slice":236,"./modules/es6.array.some":237,"./modules/es6.array.sort":238,"./modules/es6.array.species":239,"./modules/es6.date.now":240,"./modules/es6.date.to-iso-string":241,"./modules/es6.date.to-json":242,"./modules/es6.date.to-primitive":243,"./modules/es6.date.to-string":244,"./modules/es6.function.bind":245,"./modules/es6.function.has-instance":246,"./modules/es6.function.name":247,"./modules/es6.map":248,"./modules/es6.math.acosh":249,"./modules/es6.math.asinh":250,"./modules/es6.math.atanh":251,"./modules/es6.math.cbrt":252,"./modules/es6.math.clz32":253,"./modules/es6.math.cosh":254,"./modules/es6.math.expm1":255,"./modules/es6.math.fround":256,"./modules/es6.math.hypot":257,"./modules/es6.math.imul":258,"./modules/es6.math.log10":259,"./modules/es6.math.log1p":260,"./modules/es6.math.log2":261,"./modules/es6.math.sign":262,"./modules/es6.math.sinh":263,"./modules/es6.math.tanh":264,"./modules/es6.math.trunc":265,"./modules/es6.number.constructor":266,"./modules/es6.number.epsilon":267,"./modules/es6.number.is-finite":268,"./modules/es6.number.is-integer":269,"./modules/es6.number.is-nan":270,"./modules/es6.number.is-safe-integer":271,"./modules/es6.number.max-safe-integer":272,"./modules/es6.number.min-safe-integer":273,"./modules/es6.number.parse-float":274,"./modules/es6.number.parse-int":275,"./modules/es6.number.to-fixed":276,"./modules/es6.number.to-precision":277,"./modules/es6.object.assign":278,"./modules/es6.object.create":279,"./modules/es6.object.define-properties":280,"./modules/es6.object.define-property":281,"./modules/es6.object.freeze":282,"./modules/es6.object.get-own-property-descriptor":283,"./modules/es6.object.get-own-property-names":284,"./modules/es6.object.get-prototype-of":285,"./modules/es6.object.is":289,"./modules/es6.object.is-extensible":286,"./modules/es6.object.is-frozen":287,"./modules/es6.object.is-sealed":288,"./modules/es6.object.keys":290,"./modules/es6.object.prevent-extensions":291,"./modules/es6.object.seal":292,"./modules/es6.object.set-prototype-of":293,"./modules/es6.object.to-string":294,"./modules/es6.parse-float":295,"./modules/es6.parse-int":296,"./modules/es6.promise":297,"./modules/es6.reflect.apply":298,"./modules/es6.reflect.construct":299,"./modules/es6.reflect.define-property":300,"./modules/es6.reflect.delete-property":301,"./modules/es6.reflect.enumerate":302,"./modules/es6.reflect.get":305,"./modules/es6.reflect.get-own-property-descriptor":303,"./modules/es6.reflect.get-prototype-of":304,"./modules/es6.reflect.has":306,"./modules/es6.reflect.is-extensible":307,"./modules/es6.reflect.own-keys":308,"./modules/es6.reflect.prevent-extensions":309,"./modules/es6.reflect.set":311,"./modules/es6.reflect.set-prototype-of":310,"./modules/es6.regexp.constructor":312,"./modules/es6.regexp.flags":313,"./modules/es6.regexp.match":314,"./modules/es6.regexp.replace":315,"./modules/es6.regexp.search":316,"./modules/es6.regexp.split":317,"./modules/es6.regexp.to-string":318,"./modules/es6.set":319,"./modules/es6.string.anchor":320,"./modules/es6.string.big":321,"./modules/es6.string.blink":322,"./modules/es6.string.bold":323,"./modules/es6.string.code-point-at":324,"./modules/es6.string.ends-with":325,"./modules/es6.string.fixed":326,"./modules/es6.string.fontcolor":327,"./modules/es6.string.fontsize":328,"./modules/es6.string.from-code-point":329,"./modules/es6.string.includes":330,"./modules/es6.string.italics":331,"./modules/es6.string.iterator":332,"./modules/es6.string.link":333,"./modules/es6.string.raw":334,"./modules/es6.string.repeat":335,"./modules/es6.string.small":336,"./modules/es6.string.starts-with":337,"./modules/es6.string.strike":338,"./modules/es6.string.sub":339,"./modules/es6.string.sup":340,"./modules/es6.string.trim":341,"./modules/es6.symbol":342,"./modules/es6.typed.array-buffer":343,"./modules/es6.typed.data-view":344,"./modules/es6.typed.float32-array":345,"./modules/es6.typed.float64-array":346,"./modules/es6.typed.int16-array":347,"./modules/es6.typed.int32-array":348,"./modules/es6.typed.int8-array":349,"./modules/es6.typed.uint16-array":350,"./modules/es6.typed.uint32-array":351,"./modules/es6.typed.uint8-array":352,"./modules/es6.typed.uint8-clamped-array":353,"./modules/es6.weak-map":354,"./modules/es6.weak-set":355,"./modules/es7.array.flat-map":356,"./modules/es7.array.flatten":357,"./modules/es7.array.includes":358,"./modules/es7.asap":359,"./modules/es7.error.is-error":360,"./modules/es7.global":361,"./modules/es7.map.from":362,"./modules/es7.map.of":363,"./modules/es7.map.to-json":364,"./modules/es7.math.clamp":365,"./modules/es7.math.deg-per-rad":366,"./modules/es7.math.degrees":367,"./modules/es7.math.fscale":368,"./modules/es7.math.iaddh":369,"./modules/es7.math.imulh":370,"./modules/es7.math.isubh":371,"./modules/es7.math.rad-per-deg":372,"./modules/es7.math.radians":373,"./modules/es7.math.scale":374,"./modules/es7.math.signbit":375,"./modules/es7.math.umulh":376,"./modules/es7.object.define-getter":377,"./modules/es7.object.define-setter":378,"./modules/es7.object.entries":379,"./modules/es7.object.get-own-property-descriptors":380,"./modules/es7.object.lookup-getter":381,"./modules/es7.object.lookup-setter":382,"./modules/es7.object.values":383,"./modules/es7.observable":384,"./modules/es7.promise.finally":385,"./modules/es7.promise.try":386,"./modules/es7.reflect.define-metadata":387,"./modules/es7.reflect.delete-metadata":388,"./modules/es7.reflect.get-metadata":390,"./modules/es7.reflect.get-metadata-keys":389,"./modules/es7.reflect.get-own-metadata":392,"./modules/es7.reflect.get-own-metadata-keys":391,"./modules/es7.reflect.has-metadata":393,"./modules/es7.reflect.has-own-metadata":394,"./modules/es7.reflect.metadata":395,"./modules/es7.set.from":396,"./modules/es7.set.of":397,"./modules/es7.set.to-json":398,"./modules/es7.string.at":399,"./modules/es7.string.match-all":400,"./modules/es7.string.pad-end":401,"./modules/es7.string.pad-start":402,"./modules/es7.string.trim-left":403,"./modules/es7.string.trim-right":404,"./modules/es7.symbol.async-iterator":405,"./modules/es7.symbol.observable":406,"./modules/es7.system.global":407,"./modules/es7.weak-map.from":408,"./modules/es7.weak-map.of":409,"./modules/es7.weak-set.from":410,"./modules/es7.weak-set.of":411,"./modules/web.dom.iterable":412,"./modules/web.immediate":413,"./modules/web.timers":414}],416:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":494}],417:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var x=Math.PI,f=2*x,p=f-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}e.prototype=n.prototype={constructor:e,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,l=r-e,u=o-t,c=a-e,h=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(1e-6<h)if(1e-6<Math.abs(c*s-l*u)&&i){var f=n-o,p=r-a,d=s*s+l*l,g=f*f+p*p,m=Math.sqrt(d),y=Math.sqrt(h),_=i*Math.tan((x-Math.acos((d+h-g)/(2*m*y)))/2),v=_/y,b=_/m;1e-6<Math.abs(v-1)&&(this._+="L"+(t+v*u)+","+(e+v*c)),this._+="A"+i+","+i+",0,0,"+ +(u*p<c*f)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+a,u=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-u))&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%f+f),p<h?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):1e-6<h&&(this._+="A"+n+","+n+",0,"+ +(x<=h)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],418:[function(t,e,n){var r,i;r=this,i=function(o){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t}function s(t){var e=a(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===r&&t.documentElement.namespaceURI===r?t.createElement(n):t.createElementNS(e,n)}})(e)}function e(){}function h(t){return null==t?e:function(){return this.querySelector(t)}}function n(){return[]}function c(t){return null==t?n:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function t(t){return new Array(t.length)}function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var g="$";function w(t,e,n,r,i,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new d(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function L(t,e,n,r,i,o,a){var s,l,u,c={},h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(p[s]=u=g+a.call(l,l.__data__,s,e),u in c?i[s]=l:c[u]=l);for(s=0;s<f;++s)(l=c[u=g+a.call(t,o[s],s,o)])?((r[s]=l).__data__=o[s],c[u]=null):n[s]=new d(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&c[p[s]]===l&&(i[s]=l)}function p(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function l(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function u(t,e){return t.style.getPropertyValue(e)||l(t).getComputedStyle(t,null).getPropertyValue(e)}function m(t){return t.trim().split(/^|\s+/)}function y(t){return t.classList||new _(t)}function _(t){this._node=t,this._names=m(t.getAttribute("class")||"")}function v(t,e){for(var n=y(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function b(t,e){for(var n=y(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function x(){this.textContent=""}function C(){this.innerHTML=""}function k(){this.nextSibling&&this.parentNode.appendChild(this)}function E(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function S(){return null}function M(){var t=this.parentNode;t&&t.removeChild(this)}function P(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function I(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}_.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var T={};(o.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(T={mouseenter:"mouseover",mouseleave:"mouseout"}));function O(n,t,e){return n=N(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function N(n,r,i){return function(t){var e=o.event;o.event=t;try{n.call(this,this.__data__,r,i)}finally{o.event=e}}}function D(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function A(l,u,c){var h=T.hasOwnProperty(l.type)?O:N;return function(t,e,n){var r,i=this.__on,o=h(u,e,n);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=c),void(r.value=u);this.addEventListener(l.type,o,c),r={type:l.type,name:l.name,value:u,listener:o,capture:c},i?i.push(r):this.__on=[r]}}function R(t,e,n){var r=l(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var F=[null];function j(t,e){this._groups=t,this._parents=e}function B(){return new j([[document.documentElement]],F)}function z(t){return"string"==typeof t?new j([[document.querySelector(t)]],[document.documentElement]):new j([[t]],F)}j.prototype=B.prototype={constructor:j,select:function(t){"function"!=typeof t&&(t=h(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new j(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),i.push(a));return new j(r,i)},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new j(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n,r=e?L:w,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var h=i[c],f=o[c],p=f.length,d=t.call(h,h&&h.__data__,c,i),g=d.length,m=l[c]=new Array(g),y=s[c]=new Array(g);r(h,f,m,y,u[c]=new Array(p),d,e);for(var _,v,b=0,x=0;b<g;++b)if(_=m[b]){for(x<=b&&(x=b+1);!(v=y[x])&&++x<g;);_._next=v||null}}return(s=new j(s,i))._enter=l,s._exit=u,s},enter:function(){return new j(this._enter||this._groups.map(t),this._parents)},exit:function(){return new j(this._exit||this._groups.map(t),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(f[p]=l);for(;s<r;++s)a[s]=e[s];return new j(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=p);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new j(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=a(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):u(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=m(t+"");if(arguments.length<2){for(var r=y(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?v:b)(this,t)}}:e?function(t){return function(){v(this,t)}}:function(t){return function(){b(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?x:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?C:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(k)},lower:function(){return this.each(E)},append:function(t){var e="function"==typeof t?t:s(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:s(t),r=null==e?S:"function"==typeof e?e:h(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(M)},clone:function(t){return this.select(t?I:P)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(!(arguments.length<2)){for(s=e?A:D,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return R(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return R(this,t,e)}})(t,e))}};var q=0;function U(){return new G}function G(){this._="@"+(++q).toString(36)}function V(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function H(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}G.prototype=U.prototype={constructor:G,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},o.create=function(t){return z(s(t).call(document.documentElement))},o.creator=s,o.local=U,o.matcher=f,o.mouse=function(t){var e=V();return e.changedTouches&&(e=e.changedTouches[0]),H(t,e)},o.namespace=a,o.namespaces=i,o.clientPoint=H,o.select=z,o.selectAll=function(t){return"string"==typeof t?new j([document.querySelectorAll(t)],[document.documentElement]):new j([null==t?[]:t],F)},o.selection=B,o.selector=h,o.selectorAll=c,o.style=u,o.touch=function(t,e,n){arguments.length<3&&(n=e,e=V().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return H(t,r);return null},o.touches=function(t,e){null==e&&(e=V().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=H(t,e[n]);return i},o.window=l,o.customEvent=function(t,e,n,r){var i=o.event;t.sourceEvent=o.event,o.event=t;try{return e.apply(n,r)}finally{o.event=i}},Object.defineProperty(o,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],419:[function(t,e,n){var r,i;r=this,i=function(t,nt){"use strict";function b(t){return function(){return t}}var rt=Math.abs,it=Math.atan2,ot=Math.cos,O=Math.max,at=Math.min,st=Math.sin,lt=Math.sqrt,ut=1e-12,ct=Math.PI,ht=ct/2,ft=2*ct;function pt(t){return 1<=t?ht:t<=-1?-ht:Math.asin(t)}function n(t){return t.innerRadius}function r(t){return t.outerRadius}function i(t){return t.startAngle}function o(t){return t.endAngle}function a(t){return t&&t.padAngle}function dt(t,e,n,r,i,o,a){var s=t-n,l=e-r,u=(a?o:-o)/lt(s*s+l*l),c=u*l,h=-u*s,f=t+c,p=e+h,d=n+c,g=r+h,m=(f+d)/2,y=(p+g)/2,_=d-f,v=g-p,b=_*_+v*v,x=i-o,w=f*g-d*p,L=(v<0?-1:1)*lt(O(0,x*x*b-w*w)),C=(w*v-_*L)/b,k=(-w*_-v*L)/b,E=(w*v+_*L)/b,S=(-w*_+v*L)/b,M=C-m,P=k-y,I=E-m,T=S-y;return I*I+T*T<M*M+P*P&&(C=E,k=S),{cx:C,cy:k,x01:-c,y01:-h,x11:C*(i/x-1),y11:k*(i/x-1)}}function e(t){this._context=t}function _(t){return new e(t)}function v(t){return t[0]}function x(t){return t[1]}function s(){var a=v,s=x,l=b(!0),u=null,c=_,h=null;function e(t){var e,n,r,i=t.length,o=!1;for(null==u&&(h=c(r=nt.path())),e=0;e<=i;++e)!(e<i&&l(n=t[e],e,t))===o&&((o=!o)?h.lineStart():h.lineEnd()),o&&h.point(+a(n,e,t),+s(n,e,t));if(r)return h=null,r+""||null}return e.x=function(t){return arguments.length?(a="function"==typeof t?t:b(+t),e):a},e.y=function(t){return arguments.length?(s="function"==typeof t?t:b(+t),e):s},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:b(!!t),e):l},e.curve=function(t){return arguments.length?(c=t,null!=u&&(h=c(u)),e):c},e.context=function(t){return arguments.length?(null==t?u=h=null:h=c(u=t),e):u},e}function l(){var c=v,h=null,f=b(0),p=x,d=b(!0),g=null,m=_,y=null;function e(t){var e,n,r,i,o,a=t.length,s=!1,l=new Array(a),u=new Array(a);for(null==g&&(y=m(o=nt.path())),e=0;e<=a;++e){if(!(e<a&&d(i=t[e],e,t))===s)if(s=!s)n=e,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),r=e-1;n<=r;--r)y.point(l[r],u[r]);y.lineEnd(),y.areaEnd()}s&&(l[e]=+c(i,e,t),u[e]=+f(i,e,t),y.point(h?+h(i,e,t):l[e],p?+p(i,e,t):u[e]))}if(o)return y=null,o+""||null}function t(){return s().defined(d).curve(m).context(g)}return e.x=function(t){return arguments.length?(c="function"==typeof t?t:b(+t),h=null,e):c},e.x0=function(t){return arguments.length?(c="function"==typeof t?t:b(+t),e):c},e.x1=function(t){return arguments.length?(h=null==t?null:"function"==typeof t?t:b(+t),e):h},e.y=function(t){return arguments.length?(f="function"==typeof t?t:b(+t),p=null,e):f},e.y0=function(t){return arguments.length?(f="function"==typeof t?t:b(+t),e):f},e.y1=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:b(+t),e):p},e.lineX0=e.lineY0=function(){return t().x(c).y(f)},e.lineY1=function(){return t().x(c).y(p)},e.lineX1=function(){return t().x(h).y(f)},e.defined=function(t){return arguments.length?(d="function"==typeof t?t:b(!!t),e):d},e.curve=function(t){return arguments.length?(m=t,null!=g&&(y=m(g)),e):m},e.context=function(t){return arguments.length?(null==t?g=y=null:y=m(g=t),e):g},e}function u(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function c(t){return t}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var h=p(_);function f(t){this._curve=t}function p(e){function t(t){return new f(e(t))}return t._curve=e,t}function d(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(p(t)):e()._curve},t}function g(){return d(s().curve(h))}function m(){var t=l().curve(h),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return d(n())},delete t.lineX0,t.lineEndAngle=function(){return d(r())},delete t.lineX1,t.lineInnerRadius=function(){return d(i())},delete t.lineY0,t.lineOuterRadius=function(){return d(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(p(t)):e()._curve},t}function y(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}f.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var w=Array.prototype.slice;function L(t){return t.source}function C(t){return t.target}function k(i){var o=L,a=C,s=v,l=x,u=null;function e(){var t,e=w.call(arguments),n=o.apply(this,e),r=a.apply(this,e);if(u||(u=t=nt.path()),i(u,+s.apply(this,(e[0]=n,e)),+l.apply(this,e),+s.apply(this,(e[0]=r,e)),+l.apply(this,e)),t)return u=null,t+""||null}return e.source=function(t){return arguments.length?(o=t,e):o},e.target=function(t){return arguments.length?(a=t,e):a},e.x=function(t){return arguments.length?(s="function"==typeof t?t:b(+t),e):s},e.y=function(t){return arguments.length?(l="function"==typeof t?t:b(+t),e):l},e.context=function(t){return arguments.length?(u=null==t?null:t,e):u},e}function E(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function S(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function M(t,e,n,r,i){var o=y(e,n),a=y(e,n=(n+i)/2),s=y(r,n),l=y(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],l[0],l[1])}var P={draw:function(t,e){var n=Math.sqrt(e/ct);t.moveTo(n,0),t.arc(0,0,n,0,ft)}},I={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},T=Math.sqrt(1/3),N=2*T,D={draw:function(t,e){var n=Math.sqrt(e/N),r=n*T;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},A=Math.sin(ct/10)/Math.sin(7*ct/10),R=Math.sin(ft/10)*A,F=-Math.cos(ft/10)*A,j={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=R*n,i=F*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=ft*o/5,s=Math.cos(a),l=Math.sin(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},B={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},z=Math.sqrt(3),q={draw:function(t,e){var n=-Math.sqrt(e/(3*z));t.moveTo(0,2*n),t.lineTo(-z*n,-n),t.lineTo(z*n,-n),t.closePath()}},U=Math.sqrt(3)/2,G=1/Math.sqrt(12),V=3*(G/2+1),H={draw:function(t,e){var n=Math.sqrt(e/V),r=n/2,i=n*G,o=r,a=n*G+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(-.5*r-U*i,U*r+-.5*i),t.lineTo(-.5*o-U*a,U*o+-.5*a),t.lineTo(-.5*s-U*l,U*s+-.5*l),t.lineTo(-.5*r+U*i,-.5*i-U*r),t.lineTo(-.5*o+U*a,-.5*a-U*o),t.lineTo(-.5*s+U*l,-.5*l-U*s),t.closePath()}},W=[P,I,D,B,j,q,H];function X(){}function Y(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $(t){this._context=t}function Z(t){this._context=t}function Q(t){this._context=t}function K(t,e){this._basis=new $(t),this._beta=e}$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Y(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Y(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Z.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Y(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Y(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},K.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*a),this._beta*e[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var J=function e(n){function t(t){return 1===n?new $(t):new K(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function tt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function et(t,e){this._context=t,this._k=(1-e)/6}et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gt=function e(n){function t(t){return new et(t,n)}return t.tension=function(t){return e(+t)},t}(0);function mt(t,e){this._context=t,this._k=(1-e)/6}mt.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var yt=function e(n){function t(t){return new mt(t,n)}return t.tension=function(t){return e(+t)},t}(0);function _t(t,e){this._context=t,this._k=(1-e)/6}_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vt=function e(n){function t(t){return new _t(t,n)}return t.tension=function(t){return e(+t)},t}(0);function bt(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>ut){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ut){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function xt(t,e){this._context=t,this._alpha=e}xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:bt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var wt=function e(n){function t(t){return n?new xt(t,n):new et(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function Lt(t,e){this._context=t,this._alpha=e}Lt.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:bt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ct=function e(n){function t(t){return n?new Lt(t,n):new mt(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function kt(t,e){this._context=t,this._alpha=e}kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Et=function e(n){function t(t){return n?new kt(t,n):new _t(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function St(t){this._context=t}function Mt(t){return t<0?-1:1}function Pt(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Mt(o)+Mt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function It(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Tt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Ot(t){this._context=t}function Nt(t){this._context=new Dt(t)}function Dt(t){this._context=t}function At(t){this._context=t}function Rt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(o[i[0]=0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;0<=e;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Ft(t,e){this._context=t,this._t=e}function jt(t,e){if(1<(i=t.length))for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Bt(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function zt(t,e){return t[e]}function qt(t){var n=t.map(Ut);return Bt(t).sort(function(t,e){return n[t]-n[e]})}function Ut(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}St.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tt(this,this._t0,It(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Tt(this,It(this,n=Pt(this,t,e)),n);break;default:Tt(this,this._t0,n=Pt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Nt.prototype=Object.create(Ot.prototype)).point=function(t,e){Ot.prototype.point.call(this,e,t)},Dt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Rt(t),i=Rt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},t.arc=function(){var Y=n,$=r,Z=b(0),Q=null,K=i,J=o,tt=a,et=null;function e(){var t,e,n,r,i,o,a,s,l,u,c,h,f=+Y.apply(this,arguments),p=+$.apply(this,arguments),d=K.apply(this,arguments)-ht,g=J.apply(this,arguments)-ht,m=rt(g-d),y=d<g;if(et||(et=t=nt.path()),p<f&&(e=p,p=f,f=e),ut<p)if(ft-ut<m)et.moveTo(p*ot(d),p*st(d)),et.arc(0,0,p,d,g,!y),ut<f&&(et.moveTo(f*ot(g),f*st(g)),et.arc(0,0,f,g,d,y));else{var _,v,b=d,x=g,w=d,L=g,C=m,k=m,E=tt.apply(this,arguments)/2,S=ut<E&&(Q?+Q.apply(this,arguments):lt(f*f+p*p)),M=at(rt(p-f)/2,+Z.apply(this,arguments)),P=M,I=M;if(ut<S){var T=pt(S/f*st(E)),O=pt(S/p*st(E));(C-=2*T)>ut?(w+=T*=y?1:-1,L-=T):(C=0,w=L=(d+g)/2),(k-=2*O)>ut?(b+=O*=y?1:-1,x-=O):(k=0,b=x=(d+g)/2)}var N=p*ot(b),D=p*st(b),A=f*ot(L),R=f*st(L);if(ut<M){var F=p*ot(x),j=p*st(x),B=f*ot(w),z=f*st(w);if(m<ct){var q=ut<C?[(r=N)+(h=((u=A-(o=F))*((i=D)-(a=j))-(c=R-a)*(r-o))/(c*(s=B-r)-u*(l=z-i)))*s,i+h*l]:[A,R],U=N-q[0],G=D-q[1],V=F-q[0],H=j-q[1],W=1/st((1<(n=(U*V+G*H)/(lt(U*U+G*G)*lt(V*V+H*H)))?0:n<-1?ct:Math.acos(n))/2),X=lt(q[0]*q[0]+q[1]*q[1]);P=at(M,(f-X)/(W-1)),I=at(M,(p-X)/(W+1))}}ut<k?ut<I?(_=dt(B,z,N,D,p,I,y),v=dt(F,j,A,R,p,I,y),et.moveTo(_.cx+_.x01,_.cy+_.y01),I<M?et.arc(_.cx,_.cy,I,it(_.y01,_.x01),it(v.y01,v.x01),!y):(et.arc(_.cx,_.cy,I,it(_.y01,_.x01),it(_.y11,_.x11),!y),et.arc(0,0,p,it(_.cy+_.y11,_.cx+_.x11),it(v.cy+v.y11,v.cx+v.x11),!y),et.arc(v.cx,v.cy,I,it(v.y11,v.x11),it(v.y01,v.x01),!y))):(et.moveTo(N,D),et.arc(0,0,p,b,x,!y)):et.moveTo(N,D),ut<f&&ut<C?ut<P?(_=dt(A,R,F,j,f,-P,y),v=dt(N,D,B,z,f,-P,y),et.lineTo(_.cx+_.x01,_.cy+_.y01),P<M?et.arc(_.cx,_.cy,P,it(_.y01,_.x01),it(v.y01,v.x01),!y):(et.arc(_.cx,_.cy,P,it(_.y01,_.x01),it(_.y11,_.x11),!y),et.arc(0,0,f,it(_.cy+_.y11,_.cx+_.x11),it(v.cy+v.y11,v.cx+v.x11),y),et.arc(v.cx,v.cy,P,it(v.y11,v.x11),it(v.y01,v.x01),!y))):et.arc(0,0,f,L,w,y):et.lineTo(A,R)}else et.moveTo(0,0);if(et.closePath(),t)return et=null,t+""||null}return e.centroid=function(){var t=(+Y.apply(this,arguments)+ +$.apply(this,arguments))/2,e=(+K.apply(this,arguments)+ +J.apply(this,arguments))/2-ct/2;return[ot(e)*t,st(e)*t]},e.innerRadius=function(t){return arguments.length?(Y="function"==typeof t?t:b(+t),e):Y},e.outerRadius=function(t){return arguments.length?($="function"==typeof t?t:b(+t),e):$},e.cornerRadius=function(t){return arguments.length?(Z="function"==typeof t?t:b(+t),e):Z},e.padRadius=function(t){return arguments.length?(Q=null==t?null:"function"==typeof t?t:b(+t),e):Q},e.startAngle=function(t){return arguments.length?(K="function"==typeof t?t:b(+t),e):K},e.endAngle=function(t){return arguments.length?(J="function"==typeof t?t:b(+t),e):J},e.padAngle=function(t){return arguments.length?(tt="function"==typeof t?t:b(+t),e):tt},e.context=function(t){return arguments.length?(et=null==t?null:t,e):et},e},t.area=l,t.line=s,t.pie=function(){var d=c,g=u,m=null,y=b(0),_=b(ft),v=b(0);function e(n){var t,e,r,i,o,a=n.length,s=0,l=new Array(a),u=new Array(a),c=+y.apply(this,arguments),h=Math.min(ft,Math.max(-ft,_.apply(this,arguments)-c)),f=Math.min(Math.abs(h)/a,v.apply(this,arguments)),p=f*(h<0?-1:1);for(t=0;t<a;++t)0<(o=u[l[t]=t]=+d(n[t],t,n))&&(s+=o);for(null!=g?l.sort(function(t,e){return g(u[t],u[e])}):null!=m&&l.sort(function(t,e){return m(n[t],n[e])}),t=0,r=s?(h-a*p)/s:0;t<a;++t,c=i)e=l[t],i=c+(0<(o=u[e])?o*r:0)+p,u[e]={data:n[e],index:t,value:o,startAngle:c,endAngle:i,padAngle:f};return u}return e.value=function(t){return arguments.length?(d="function"==typeof t?t:b(+t),e):d},e.sortValues=function(t){return arguments.length?(g=t,m=null,e):g},e.sort=function(t){return arguments.length?(m=t,g=null,e):m},e.startAngle=function(t){return arguments.length?(y="function"==typeof t?t:b(+t),e):y},e.endAngle=function(t){return arguments.length?(_="function"==typeof t?t:b(+t),e):_},e.padAngle=function(t){return arguments.length?(v="function"==typeof t?t:b(+t),e):v},e},t.areaRadial=m,t.radialArea=m,t.lineRadial=g,t.radialLine=g,t.pointRadial=y,t.linkHorizontal=function(){return k(E)},t.linkVertical=function(){return k(S)},t.linkRadial=function(){var t=k(M);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var e=b(P),n=b(64),r=null;function i(){var t;if(r||(r=t=nt.path()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}return i.type=function(t){return arguments.length?(e="function"==typeof t?t:b(t),i):e},i.size=function(t){return arguments.length?(n="function"==typeof t?t:b(+t),i):n},i.context=function(t){return arguments.length?(r=null==t?null:t,i):r},i},t.symbols=W,t.symbolCircle=P,t.symbolCross=I,t.symbolDiamond=D,t.symbolSquare=B,t.symbolStar=j,t.symbolTriangle=q,t.symbolWye=H,t.curveBasisClosed=function(t){return new Z(t)},t.curveBasisOpen=function(t){return new Q(t)},t.curveBasis=function(t){return new $(t)},t.curveBundle=J,t.curveCardinalClosed=yt,t.curveCardinalOpen=vt,t.curveCardinal=gt,t.curveCatmullRomClosed=Ct,t.curveCatmullRomOpen=Et,t.curveCatmullRom=wt,t.curveLinearClosed=function(t){return new St(t)},t.curveLinear=_,t.curveMonotoneX=function(t){return new Ot(t)},t.curveMonotoneY=function(t){return new Nt(t)},t.curveNatural=function(t){return new At(t)},t.curveStep=function(t){return new Ft(t,.5)},t.curveStepAfter=function(t){return new Ft(t,1)},t.curveStepBefore=function(t){return new Ft(t,0)},t.stack=function(){var h=b([]),f=Bt,p=jt,d=zt;function e(t){var e,n,r=h.apply(this,arguments),i=t.length,o=r.length,a=new Array(o);for(e=0;e<o;++e){for(var s,l=r[e],u=a[e]=new Array(i),c=0;c<i;++c)u[c]=s=[0,+d(t[c],l,c,t)],s.data=t[c];u.key=l}for(e=0,n=f(a);e<o;++e)a[n[e]].index=e;return p(a,n),a}return e.keys=function(t){return arguments.length?(h="function"==typeof t?t:b(w.call(t)),e):h},e.value=function(t){return arguments.length?(d="function"==typeof t?t:b(+t),e):d},e.order=function(t){return arguments.length?(f=null==t?Bt:"function"==typeof t?t:b(w.call(t)),e):f},e.offset=function(t){return arguments.length?(p=null==t?jt:t,e):p},e},t.stackOffsetExpand=function(t,e){if(0<(r=t.length)){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}jt(t,e)}},t.stackOffsetDiverging=function(t,e){if(1<(s=t.length))for(var n,r,i,o,a,s,l=0,u=t[e[0]].length;l<u;++l)for(o=a=0,n=0;n<s;++n)0<=(i=(r=t[e[n]][l])[1]-r[0])?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=jt,t.stackOffsetSilhouette=function(t,e){if(0<(n=t.length)){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}jt(t,e)}},t.stackOffsetWiggle=function(t,e){if(0<(i=t.length)&&0<(r=(n=t[e[0]]).length)){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,u=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=(h-(c[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}l+=h,u+=f*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,jt(t,e)}},t.stackOrderAscending=qt,t.stackOrderDescending=function(t){return qt(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,i=t.map(Ut),o=Bt(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,l=[],u=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],l.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(l)},t.stackOrderNone=Bt,t.stackOrderReverse=function(t){return Bt(t).reverse()},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i(r.d3=r.d3||{},r.d3)},{"d3-path":417}],420:[function(t,e,n){"use strict";var r,o=t("es5-ext/object/copy"),i=t("es5-ext/object/normalize-options"),a=t("es5-ext/object/valid-callable"),s=t("es5-ext/object/map"),l=t("es5-ext/object/valid-callable"),u=t("es5-ext/object/valid-value"),c=Function.prototype.bind,h=Object.defineProperty,f=Object.prototype.hasOwnProperty;r=function(t,e,n){var r,i=u(e)&&l(e.value);return delete(r=o(e)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&f.call(this,t)?i:(e.value=c.call(i,n.resolveContext?n.resolveContext(this):this),h(this,t,e),this[t])},r},e.exports=function(t){var n=i(arguments[1]);return null!=n.resolveContext&&a(n.resolveContext),s(t,function(t,e){return r(e,t,n)})}},{"es5-ext/object/copy":443,"es5-ext/object/map":452,"es5-ext/object/normalize-options":453,"es5-ext/object/valid-callable":457,"es5-ext/object/valid-value":459}],421:[function(t,e,n){"use strict";var s=t("es5-ext/object/assign"),l=t("es5-ext/object/normalize-options"),u=t("es5-ext/object/is-callable"),c=t("es5-ext/string/#/contains");(e.exports=function(t,e){var n,r,i,o,a;return arguments.length<2||"string"!=typeof t?(o=e,e=t,t=null):o=arguments[2],null==t?(n=i=!0,r=!1):(n=c.call(t,"c"),r=c.call(t,"e"),i=c.call(t,"w")),a={value:e,configurable:n,enumerable:r,writable:i},o?s(l(o),a):a}).gs=function(t,e,n){var r,i,o,a;return"string"!=typeof t?(o=n,n=e,e=t,t=null):o=arguments[3],null==e?e=void 0:u(e)?null==n?n=void 0:u(n)||(o=n,n=void 0):(o=e,e=n=void 0),null==t?i=!(r=!0):(r=c.call(t,"c"),i=c.call(t,"e")),a={get:e,set:n,configurable:r,enumerable:i},o?s(l(o),a):a}},{"es5-ext/object/assign":440,"es5-ext/object/is-callable":446,"es5-ext/object/normalize-options":453,"es5-ext/string/#/contains":460}],422:[function(t,c,e){!function(t){"use strict";function e(i,o){return void 0===(t=o=o||{}).imagePlaceholder?u.impl.options.imagePlaceholder=l.imagePlaceholder:u.impl.options.imagePlaceholder=t.imagePlaceholder,void 0===t.cacheBust?u.impl.options.cacheBust=l.cacheBust:u.impl.options.cacheBust=t.cacheBust,Promise.resolve(i).then(function(t){return function o(e,n,t){function r(t,e,n){function r(e,t,n){var r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return o(t,n)}).then(function(t){t&&e.appendChild(t)})}),r}var i=t.childNodes;return 0===i.length?Promise.resolve(e):function r(e,t,n){var r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return function o(e,n,t){function r(t,e,n){function r(e,t,n){var r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return o(t,n)}).then(function(t){t&&e.appendChild(t)})}),r}var i=t.childNodes;return 0===i.length?Promise.resolve(e):r(e,p.asArray(i),n).then(function(){return e})}function i(h,f){return f instanceof Element?Promise.resolve().then(function(){t=window.getComputedStyle(h),e=f.style,t.cssText?e.cssText=t.cssText:(n=t,r=e,p.asArray(n).forEach(function(t){r.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}));var t,e,n,r}).then(function(){[":before",":after"].forEach(function(t){!function(t){var e=window.getComputedStyle(h,t),n=e.getPropertyValue("content");if(""!==n&&"none"!==n){var r=p.uid();f.className=f.className+" "+r;var i=document.createElement("style");i.appendChild((a="."+r+":"+t,s=(o=e).cssText?(c=(u=o).getPropertyValue("content"),u.cssText+" content: "+c+";"):(l=o,p.asArray(l).map(function(t){return t+": "+l.getPropertyValue(t)+(l.getPropertyPriority(t)?" !important":"")}).join("; ")+";"),document.createTextNode(a+"{"+s+"}"))),f.appendChild(i)}var o,a,s,l,u,c}(t)})}).then(function(){h instanceof HTMLTextAreaElement&&(f.innerHTML=h.value),h instanceof HTMLInputElement&&f.setAttribute("value",h.value)}).then(function(){f instanceof SVGElement&&(f.setAttribute("xmlns","http://www.w3.org/2000/svg"),f instanceof SVGRectElement&&["width","height"].forEach(function(t){var e=f.getAttribute(t);e&&f.style.setProperty(t,e)}))}).then(function(){return f}):f}return t||!n||n(e)?Promise.resolve(e).then(function(t){return t instanceof HTMLCanvasElement?p.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(t){return r(e,t,n)}).then(function(t){return i(e,t)}):Promise.resolve()}(t,n)}).then(function(t){t&&e.appendChild(t)})}),r}(e,p.asArray(i),n).then(function(){return e})}function i(h,f){return f instanceof Element?Promise.resolve().then(function(){t=window.getComputedStyle(h),e=f.style,t.cssText?e.cssText=t.cssText:(n=t,r=e,p.asArray(n).forEach(function(t){r.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}));var t,e,n,r}).then(function(){[":before",":after"].forEach(function(t){!function(t){var e=window.getComputedStyle(h,t),n=e.getPropertyValue("content");if(""!==n&&"none"!==n){var r=p.uid();f.className=f.className+" "+r;var i=document.createElement("style");i.appendChild((a="."+r+":"+t,s=(o=e).cssText?(c=(u=o).getPropertyValue("content"),u.cssText+" content: "+c+";"):(l=o,p.asArray(l).map(function(t){return t+": "+l.getPropertyValue(t)+(l.getPropertyPriority(t)?" !important":"")}).join("; ")+";"),document.createTextNode(a+"{"+s+"}"))),f.appendChild(i)}var o,a,s,l,u,c}(t)})}).then(function(){h instanceof HTMLTextAreaElement&&(f.innerHTML=h.value),h instanceof HTMLInputElement&&f.setAttribute("value",h.value)}).then(function(){f instanceof SVGElement&&(f.setAttribute("xmlns","http://www.w3.org/2000/svg"),f instanceof SVGRectElement&&["width","height"].forEach(function(t){var e=f.getAttribute(t);e&&f.style.setProperty(t,e)}))}).then(function(){return f}):f}return t||!n||n(e)?Promise.resolve(e).then(function(t){return t instanceof HTMLCanvasElement?p.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(t){return r(e,t,n)}).then(function(t){return i(e,t)}):Promise.resolve()}(t,o.filter,!0)}).then(r).then(a).then(function(e){return o.bgcolor&&(e.style.backgroundColor=o.bgcolor),o.width&&(e.style.width=o.width+"px"),o.height&&(e.style.height=o.height+"px"),o.style&&Object.keys(o.style).forEach(function(t){e.style[t]=o.style[t]}),e}).then(function(t){return e=t,n=o.width||p.width(i),r=o.height||p.height(i),Promise.resolve(e).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(p.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+r+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t});var e,n,r});var t}function n(n,r){return e(n,r).then(p.makeImage).then(p.delay(100)).then(function(t){var e=function(t){var e=document.createElement("canvas");if(e.width=r.width||p.width(t),e.height=r.height||p.height(t),r.bgcolor){var n=e.getContext("2d");n.fillStyle=r.bgcolor,n.fillRect(0,0,e.width,e.height)}return e}(n);return e.getContext("2d").drawImage(t,0,0),e})}function r(n){return i.resolveAll().then(function(t){var e=document.createElement("style");return n.appendChild(e),e.appendChild(document.createTextNode(t)),n})}function a(t){return s.inlineAll(t).then(function(){return t})}var p=function(){function i(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function r(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:i,mimeType:function(t){var e,n,r=i(t).toLowerCase();return(e="application/font-woff",n="image/jpeg",{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:n,jpeg:n,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[r]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise(function(t){e.toBlob(t)}):(o=e,new Promise(function(t){for(var e=window.atob(o.toDataURL().split(",")[1]),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);t(new Blob([r],{type:"image/png"}))}));var o},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var i=n.createElement("a");return n.body.appendChild(i),r.href=e,i.href=t,i.href},getAndEncode:function(o){return u.impl.options.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+(new Date).getTime()),new Promise(function(n){function t(t){console.error(t),n("")}var r,i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState){if(200!==i.status)return void(r?n(r):t("cannot fetch resource: "+o+", status: "+i.status));var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(i.response)}},i.ontimeout=function(){r?n(r):t("timeout of 30000ms occured while fetching resource: "+o)},i.responseType="blob",i.timeout=3e4,i.open("GET",o,!0),i.send(),u.impl.options.imagePlaceholder){var e=u.impl.options.imagePlaceholder.split(/,/);e&&e[1]&&(r=e[1])}})},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(n){return function(e){return new Promise(function(t){setTimeout(function(){t(e)},n)})}},asArray:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(r){return new Promise(function(t,e){var n=new Image;n.onload=function(){t(n)},n.onerror=e,n.src=r})},width:function(t){var e=r(t,"border-left-width"),n=r(t,"border-right-width");return t.scrollWidth+e+n},height:function(t){var e=r(t,"border-top-width"),n=r(t,"border-bottom-width");return t.scrollHeight+e+n}};var t}(),o=function(){function t(t){return-1!==t.search(r)}function n(t){for(var e,n=[];null!==(e=r.exec(t));)n.push(e[1]);return n.filter(function(t){return!p.isDataUrl(t)})}function o(n,r,e,t){return Promise.resolve(r).then(function(t){return e?p.resolveUrl(t,e):t}).then(t||p.getAndEncode).then(function(t){return p.dataAsUrl(t,p.mimeType(r))}).then(function(t){return n.replace((e=r,new RegExp("(url\\(['\"]?)("+p.escape(e)+")(['\"]?\\))","g")),"$1"+t+"$3");var e})}var r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,r,i){return t(e)?Promise.resolve(e).then(n).then(function(t){var n=Promise.resolve(e);return t.forEach(function(e){n=n.then(function(t){return o(t,e,r,i)})}),n}):Promise.resolve(e)},shouldProcess:t,impl:{readUrls:n,inline:o}}}(),i=function(){function t(){function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return o.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}return Promise.resolve(p.asArray(document.styleSheets)).then(function(t){var n=[];return t.forEach(function(e){try{p.asArray(e.cssRules||[]).forEach(n.push.bind(n))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}}),n}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return o.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(t){return t.map(e)})}return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}}}(),s=function(){function i(r){return{inline:function(t){return p.isDataUrl(r.src)?Promise.resolve():Promise.resolve(r.src).then(t||p.getAndEncode).then(function(t){return p.dataAsUrl(t,p.mimeType(r.src))}).then(function(n){return new Promise(function(t,e){r.onload=t,r.onerror=e,r.src=n})})}}}return{inlineAll:function e(t){return t instanceof Element?(n=t,r=n.style.getPropertyValue("background"),r?o.inlineAll(r).then(function(t){n.style.setProperty("background",t,n.style.getPropertyPriority("background"))}).then(function(){return n}):Promise.resolve(n)).then(function(){return t instanceof HTMLImageElement?i(t).inline():Promise.all(p.asArray(t.childNodes).map(function(t){return e(t)}))}):Promise.resolve(t);var n,r},impl:{newImage:i}}}(),l={imagePlaceholder:void 0,cacheBust:!1},u={toSvg:e,toPng:function(t,e){return n(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return n(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return n(t,e||{}).then(p.canvasToBlob)},toPixelData:function(e,t){return n(e,t||{}).then(function(t){return t.getContext("2d").getImageData(0,0,p.width(e),p.height(e)).data})},impl:{fontFaces:i,images:s,util:p,inliner:o,options:{}}};void 0!==c?c.exports=u:t.domtoimage=u}(this)},{}],423:[function(t,e,n){"use strict";var r=t("../../object/valid-value");e.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":459}],424:[function(t,e,n){"use strict";var o=t("../../number/is-nan"),a=t("../../number/to-pos-integer"),s=t("../../object/valid-value"),l=Array.prototype.indexOf,u=Object.prototype.hasOwnProperty,c=Math.abs,h=Math.floor;e.exports=function(t){var e,n,r,i;if(!o(t))return l.apply(this,arguments);for(n=a(s(this).length),r=arguments[1],e=r=isNaN(r)?0:0<=r?h(r):a(this.length)-h(c(r));e<n;++e)if(u.call(this,e)&&(i=this[e],o(i)))return e;return-1}},{"../../number/is-nan":434,"../../number/to-pos-integer":438,"../../object/valid-value":459}],425:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":426,"./shim":427}],426:[function(t,e,n){"use strict";e.exports=function(){var t,e,n=Array.from;return"function"==typeof n&&(e=n(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},{}],427:[function(t,e,n){"use strict";var p=t("es6-symbol").iterator,d=t("../../function/is-arguments"),g=t("../../function/is-function"),m=t("../../number/to-pos-integer"),y=t("../../object/valid-callable"),_=t("../../object/valid-value"),v=t("../../object/is-value"),b=t("../../string/is-string"),x=Array.isArray,w=Function.prototype.call,L={configurable:!0,enumerable:!0,writable:!0,value:null},C=Object.defineProperty;e.exports=function(t){var e,n,r,i,o,a,s,l,u,c,h=arguments[1],f=arguments[2];if(t=Object(_(t)),v(h)&&y(h),this&&this!==Array&&g(this))e=this;else{if(!h){if(d(t))return 1!==(o=t.length)?Array.apply(null,t):((i=new Array(1))[0]=t[0],i);if(x(t)){for(i=new Array(o=t.length),n=0;n<o;++n)i[n]=t[n];return i}}i=[]}if(!x(t))if(void 0!==(u=t[p])){for(s=y(u).call(t),e&&(i=new e),l=s.next(),n=0;!l.done;)c=h?w.call(h,f,l.value,n):l.value,e?(L.value=c,C(i,n,L)):i[n]=c,l=s.next(),++n;o=n}else if(b(t)){for(o=t.length,e&&(i=new e),r=n=0;n<o;++n)c=t[n],n+1<o&&55296<=(a=c.charCodeAt(0))&&a<=56319&&(c+=t[++n]),c=h?w.call(h,f,c,r):c,e?(L.value=c,C(i,r,L)):i[r]=c,++r;o=r}if(void 0===o)for(o=m(t.length),e&&(i=new e(o)),n=0;n<o;++n)c=h?w.call(h,f,t[n],n):t[n],e?(L.value=c,C(i,n,L)):i[n]=c;return e&&(L.value=null,i.length=o),i}},{"../../function/is-arguments":428,"../../function/is-function":429,"../../number/to-pos-integer":438,"../../object/is-value":448,"../../object/valid-callable":457,"../../object/valid-value":459,"../../string/is-string":463,"es6-symbol":477}],428:[function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(t){return r.call(t)===i}},{}],429:[function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call(t("./noop"));e.exports=function(t){return"function"==typeof t&&r.call(t)===i}},{"./noop":430}],430:[function(t,e,n){"use strict";e.exports=function(){}},{}],431:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":432,"./shim":433}],432:[function(t,e,n){"use strict";e.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))}},{}],433:[function(t,e,n){"use strict";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:0<t?1:-1}},{}],434:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Number.isNaN:t("./shim")},{"./is-implemented":435,"./shim":436}],435:[function(t,e,n){"use strict";e.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},{}],436:[function(t,e,n){"use strict";e.exports=function(t){return t!=t}},{}],437:[function(t,e,n){"use strict";var r=t("../math/sign"),i=Math.abs,o=Math.floor;e.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?r(t)*o(i(t)):t}},{"../math/sign":431}],438:[function(t,e,n){"use strict";var r=t("./to-integer"),i=Math.max;e.exports=function(t){return i(0,r(t))}},{"./to-integer":437}],439:[function(t,e,n){"use strict";var s=t("./valid-callable"),l=t("./valid-value"),u=Function.prototype.bind,c=Function.prototype.call,h=Object.keys,f=Object.prototype.propertyIsEnumerable;e.exports=function(o,a){return function(n,r){var t,i=arguments[2],e=arguments[3];return n=Object(l(n)),s(r),t=h(n),e&&t.sort("function"==typeof e?u.call(e,n):void 0),"function"!=typeof o&&(o=t[o]),c.call(o,t,function(t,e){return f.call(n,t)?c.call(r,i,n[t],t,n,e):a})}}},{"./valid-callable":457,"./valid-value":459}],440:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":441,"./shim":442}],441:[function(t,e,n){"use strict";e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],442:[function(t,e,n){"use strict";var a=t("../keys"),s=t("../valid-value"),l=Math.max;e.exports=function(e,n){var r,t,i,o=l(arguments.length,2);for(e=Object(s(e)),i=function(t){try{e[t]=n[t]}catch(t){r||(r=t)}},t=1;t<o;++t)n=arguments[t],a(n).forEach(i);if(void 0!==r)throw r;return e}},{"../keys":449,"../valid-value":459}],443:[function(t,e,n){"use strict";var o=t("../array/from"),a=t("./assign"),s=t("./valid-value");e.exports=function(e){var t=Object(s(e)),n=arguments[1],r=Object(arguments[2]);if(t!==e&&!n)return t;var i={};return n?o(n,function(t){(r.ensure||t in e)&&(i[t]=e[t])}):a(i,e),i}},{"../array/from":425,"./assign":440,"./valid-value":459}],444:[function(t,e,n){"use strict";var r,i,o,a,s=Object.create;t("./set-prototype-of/is-implemented")()||(r=t("./set-prototype-of/shim")),e.exports=r?1!==r.level?s:(a={configurable:(o={},!1),enumerable:(i={},!1),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){o[t]="__proto__"!==t?a:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(i,o),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(t,e){return s(null===t?i:t,e)}):s},{"./set-prototype-of/is-implemented":455,"./set-prototype-of/shim":456}],445:[function(t,e,n){"use strict";e.exports=t("./_iterate")("forEach")},{"./_iterate":439}],446:[function(t,e,n){"use strict";e.exports=function(t){return"function"==typeof t}},{}],447:[function(t,e,n){"use strict";var r=t("./is-value"),i={function:!0,object:!0};e.exports=function(t){return r(t)&&i[typeof t]||!1}},{"./is-value":448}],448:[function(t,e,n){"use strict";var r=t("../function/noop")();e.exports=function(t){return t!==r&&null!==t}},{"../function/noop":430}],449:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":450,"./shim":451}],450:[function(t,e,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],451:[function(t,e,n){"use strict";var r=t("../is-value"),i=Object.keys;e.exports=function(t){return i(r(t)?Object(t):t)}},{"../is-value":448}],452:[function(t,e,n){"use strict";var r=t("./valid-callable"),s=t("./for-each"),l=Function.prototype.call;e.exports=function(t,i){var o={},a=arguments[2];return r(i),s(t,function(t,e,n,r){o[e]=l.call(i,a,t,e,n,r)}),o}},{"./for-each":445,"./valid-callable":457}],453:[function(t,e,n){"use strict";var r=t("./is-value"),i=Array.prototype.forEach,o=Object.create;e.exports=function(t){var e=o(null);return i.call(arguments,function(t){r(t)&&function(t,e){var n;for(n in t)e[n]=t[n]}(Object(t),e)}),e}},{"./is-value":448}],454:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":455,"./shim":456}],455:[function(t,e,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||r;return"function"==typeof t&&i(t(e(null),o))===o}},{}],456:[function(t,e,n){"use strict";var i,r,o,a,s=t("../is-object"),l=t("../valid-value"),u=Object.prototype.isPrototypeOf,c=Object.defineProperty,h={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(t,e){if(l(t),null===e||s(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=(r=function(){var t,e=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(t=r.set).call(e,n)}catch(t){}if(Object.getPrototypeOf(e)===n)return{set:t,level:2}}return e.__proto__=n,Object.getPrototypeOf(e)===n?{level:2}:((e={}).__proto__=n,Object.getPrototypeOf(e)===n&&{level:1})}())?(2===r.level?r.set?(a=r.set,o=function(t,e){return a.call(i(t,e),e),t}):o=function(t,e){return i(t,e).__proto__=e,t}:o=function t(e,n){var r;return i(e,n),(r=u.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===n&&(n=t.nullPolyfill),e.__proto__=n,r&&c(t.nullPolyfill,"__proto__",h),e},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null,t("../create")},{"../create":444,"../is-object":447,"../valid-value":459}],457:[function(t,e,n){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],458:[function(t,e,n){"use strict";var r=t("./is-object");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not an Object");return t}},{"./is-object":447}],459:[function(t,e,n){"use strict";var r=t("./is-value");e.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":448}],460:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":461,"./shim":462}],461:[function(t,e,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},{}],462:[function(t,e,n){"use strict";var r=String.prototype.indexOf;e.exports=function(t){return-1<r.call(this,t,arguments[1])}},{}],463:[function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||r.call(t)===i)||!1}},{}],464:[function(t,e,n){"use strict";var r=Object.create(null),i=Math.random;e.exports=function(){for(var t;t=i().toString(36).slice(2),r[t];);return t}},{}],465:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/string/#/contains"),a=t("d"),s=t("es6-symbol"),l=t("./"),u=Object.defineProperty;r=e.exports=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");l.call(this,t),e=e?o.call(e,"key+value")?"key+value":o.call(e,"key")?"key":"value":"value",u(this,"__kind__",a("",e))},i&&i(r,l),delete r.prototype.constructor,r.prototype=Object.create(l.prototype,{_resolve:a(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),u(r.prototype,s.toStringTag,a("c","Array Iterator"))},{"./":468,d:421,"es5-ext/object/set-prototype-of":454,"es5-ext/string/#/contains":460,"es6-symbol":477}],466:[function(t,e,n){"use strict";var h=t("es5-ext/function/is-arguments"),f=t("es5-ext/object/valid-callable"),p=t("es5-ext/string/is-string"),d=t("./get"),g=Array.isArray,m=Function.prototype.call,y=Array.prototype.some;e.exports=function(t,e){var n,r,i,o,a,s,l,u,c=arguments[2];if(g(t)||h(t)?n="array":p(t)?n="string":t=d(t),f(e),i=function(){o=!0},"array"!==n)if("string"!==n)for(r=t.next();!r.done;){if(m.call(e,c,r.value,i),o)return;r=t.next()}else for(s=t.length,a=0;a<s&&(l=t[a],a+1<s&&55296<=(u=l.charCodeAt(0))&&u<=56319&&(l+=t[++a]),m.call(e,c,l,i),!o);++a);else y.call(t,function(t){return m.call(e,c,t,i),o})}},{"./get":467,"es5-ext/function/is-arguments":428,"es5-ext/object/valid-callable":457,"es5-ext/string/is-string":463}],467:[function(t,e,n){"use strict";var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/string/is-string"),o=t("./array"),a=t("./string"),s=t("./valid-iterable"),l=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof s(t)[l]?t[l]():r(t)?new o(t):i(t)?new a(t):new o(t)}},{"./array":465,"./string":470,"./valid-iterable":471,"es5-ext/function/is-arguments":428,"es5-ext/string/is-string":463,"es6-symbol":477}],468:[function(t,e,n){"use strict";var r,i=t("es5-ext/array/#/clear"),o=t("es5-ext/object/assign"),a=t("es5-ext/object/valid-callable"),s=t("es5-ext/object/valid-value"),l=t("d"),u=t("d/auto-bind"),c=t("es6-symbol"),h=Object.defineProperty,f=Object.defineProperties;e.exports=r=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");f(this,{__list__:l("w",s(t)),__context__:l("w",e),__nextIndex__:l("w",0)}),e&&(a(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete r.prototype.constructor,f(r.prototype,o({_next:l(function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:l(function(t){return this.__list__[t]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(t,e){n<=t&&(this.__redo__[e]=++t)},this),this.__redo__.push(n)):h(this,"__redo__",l("c",[n])))}),_onDelete:l(function(n){var t;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(n))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,e){n<t&&(this.__redo__[e]=--t)},this)))}),_onClear:l(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),h(r.prototype,c.iterator,l(function(){return this}))},{d:421,"d/auto-bind":420,"es5-ext/array/#/clear":423,"es5-ext/object/assign":440,"es5-ext/object/valid-callable":457,"es5-ext/object/valid-value":459,"es6-symbol":477}],469:[function(t,e,n){"use strict";var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/object/is-value"),o=t("es5-ext/string/is-string"),a=t("es6-symbol").iterator,s=Array.isArray;e.exports=function(t){return!!i(t)&&(!!s(t)||(!!o(t)||(!!r(t)||"function"==typeof t[a])))}},{"es5-ext/function/is-arguments":428,"es5-ext/object/is-value":448,"es5-ext/string/is-string":463,"es6-symbol":477}],470:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("d"),a=t("es6-symbol"),s=t("./"),l=Object.defineProperty;r=e.exports=function(t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");t=String(t),s.call(this,t),l(this,"__length__",o("",t.length))},i&&i(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(t){var e,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:55296<=(e=n.charCodeAt(0))&&e<=56319?n+this.__list__[this.__nextIndex__++]:n})}),l(r.prototype,a.toStringTag,o("c","String Iterator"))},{"./":468,d:421,"es5-ext/object/set-prototype-of":454,"es6-symbol":477}],471:[function(t,e,n){"use strict";var r=t("./is-iterable");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":469}],472:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Set:t("./polyfill")},{"./is-implemented":473,"./polyfill":476}],473:[function(t,e,n){"use strict";e.exports=function(){var t,e;return"function"==typeof Set&&(t=new Set(["raz","dwa","trzy"]),"[object Set]"===String(t)&&(3===t.size&&("function"==typeof t.add&&("function"==typeof t.clear&&("function"==typeof t.delete&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.values&&(!1===(e=t.values().next()).done&&"raz"===e.value)))))))))))}},{}],474:[function(t,e,n){"use strict";e.exports="undefined"!=typeof Set&&"[object Set]"===Object.prototype.toString.call(Set.prototype)},{}],475:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/string/#/contains"),a=t("d"),s=t("es6-iterator"),l=t("es6-symbol").toStringTag,u=Object.defineProperty;r=e.exports=function(t,e){if(!(this instanceof r))return new r(t,e);s.call(this,t.__setData__,t),e=e&&o.call(e,"key+value")?"key+value":"value",u(this,"__kind__",a("",e))},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:a(r),_resolve:a(function(t){return"value"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__list__[t]]}),toString:a(function(){return"[object Set Iterator]"})}),u(r.prototype,l,a("c","Set Iterator"))},{d:421,"es5-ext/object/set-prototype-of":454,"es5-ext/string/#/contains":460,"es6-iterator":468,"es6-symbol":477}],476:[function(t,e,n){"use strict";var r,i,o,a=t("es5-ext/array/#/clear"),s=t("es5-ext/array/#/e-index-of"),l=t("es5-ext/object/set-prototype-of"),u=t("es5-ext/object/valid-callable"),c=t("d"),h=t("event-emitter"),f=t("es6-symbol"),p=t("es6-iterator/valid-iterable"),d=t("es6-iterator/for-of"),g=t("./lib/iterator"),m=t("./is-native-implemented"),y=Function.prototype.call,_=Object.defineProperty,v=Object.getPrototypeOf;m&&(o=Set),e.exports=r=function(){var t,e=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return t=m&&l?l(new o,v(this)):this,null!=e&&p(e),_(t,"__setData__",c("c",[])),e&&d(e,function(t){-1===s.call(this,t)&&this.push(t)},t.__setData__),t},m&&(l&&l(r,o),r.prototype=Object.create(o.prototype,{constructor:c(r)})),h(Object.defineProperties(r.prototype,{add:c(function(t){return this.has(t)||this.emit("_add",this.__setData__.push(t)-1,t),this}),clear:c(function(){this.__setData__.length&&(a.call(this.__setData__),this.emit("_clear"))}),delete:c(function(t){var e=s.call(this.__setData__,t);return-1!==e&&(this.__setData__.splice(e,1),this.emit("_delete",e,t),!0)}),entries:c(function(){return new g(this,"key+value")}),forEach:c(function(t){var e,n,r,i=arguments[1];for(u(t),n=(e=this.values())._next();void 0!==n;)r=e._resolve(n),y.call(t,i,r,r,this),n=e._next()}),has:c(function(t){return-1!==s.call(this.__setData__,t)}),keys:c(i=function(){return this.values()}),size:c.gs(function(){return this.__setData__.length}),values:c(function(){return new g(this)}),toString:c(function(){return"[object Set]"})})),_(r.prototype,f.iterator,c(i)),_(r.prototype,f.toStringTag,c("c","Set"))},{"./is-native-implemented":474,"./lib/iterator":475,d:421,"es5-ext/array/#/clear":423,"es5-ext/array/#/e-index-of":424,"es5-ext/object/set-prototype-of":454,"es5-ext/object/valid-callable":457,"es6-iterator/for-of":466,"es6-iterator/valid-iterable":471,"es6-symbol":477,"event-emitter":486}],477:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Symbol:t("./polyfill")},{"./is-implemented":478,"./polyfill":480}],478:[function(t,e,n){"use strict";var r={object:!0,symbol:!0};e.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},{}],479:[function(t,e,n){"use strict";e.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},{}],480:[function(t,e,n){"use strict";var r,i,o,a,s=t("d"),l=t("./validate-symbol"),u=Object.create,c=Object.defineProperties,h=Object.defineProperty,f=Object.prototype,p=u(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),a=!0}catch(t){}}var d,g=(d=u(null),function(t){for(var e,n,r=0;d[t+(r||"")];)++r;return d[t+=r||""]=!0,h(f,e="@@"+t,s.gs(null,function(t){n||(n=!0,h(this,e,s(t)),n=!1)})),e});o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(t)},e.exports=i=function t(e){var n;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return a?r(e):(n=u(o.prototype),e=void 0===e?"":String(e),c(n,{__description__:s("",e),__name__:s("",g(e))}))},c(i,{for:s(function(t){return p[t]?p[t]:p[t]=i(String(t))}),keyFor:s(function(t){var e;for(e in l(t),p)if(p[e]===t)return e}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),c(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),c(i.prototype,{toString:s(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:s(function(){return l(this)})}),h(i.prototype,i.toPrimitive,s("",function(){var t=l(this);return"symbol"==typeof t?t:t.toString()})),h(i.prototype,i.toStringTag,s("c","Symbol")),h(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),h(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},{"./validate-symbol":481,d:421}],481:[function(t,e,n){"use strict";var r=t("./is-symbol");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":479}],482:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":483,"./polyfill":485}],483:[function(t,e,n){"use strict";e.exports=function(){var t,e;if("function"!=typeof WeakMap)return!1;try{t=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch(t){return!1}return"[object WeakMap]"===String(t)&&("function"==typeof t.set&&(t.set({},1)===t&&("function"==typeof t.delete&&("function"==typeof t.has&&"one"===t.get(e)))))}},{}],484:[function(t,e,n){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],485:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/object/valid-object"),a=t("es5-ext/object/valid-value"),s=t("es5-ext/string/random-uniq"),l=t("d"),u=t("es6-iterator/get"),c=t("es6-iterator/for-of"),h=t("es6-symbol").toStringTag,f=t("./is-native-implemented"),p=Array.isArray,d=Object.defineProperty,g=Object.prototype.hasOwnProperty,m=Object.getPrototypeOf;e.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=f&&i&&WeakMap!==r?i(new WeakMap,m(this)):this,null!=t&&(p(t)||(t=u(t))),d(e,"__weakMapData__",l("c","$weakMap$"+s())),t&&c(t,function(t){a(t),e.set(t[0],t[1])}),e},f&&(i&&i(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:l(r)})),Object.defineProperties(r.prototype,{delete:l(function(t){return!!g.call(o(t),this.__weakMapData__)&&(delete t[this.__weakMapData__],!0)}),get:l(function(t){if(g.call(o(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:l(function(t){return g.call(o(t),this.__weakMapData__)}),set:l(function(t,e){return d(o(t),this.__weakMapData__,l("c",e)),this}),toString:l(function(){return"[object WeakMap]"})}),d(r.prototype,h,l("c","WeakMap"))},{"./is-native-implemented":484,d:421,"es5-ext/object/set-prototype-of":454,"es5-ext/object/valid-object":458,"es5-ext/object/valid-value":459,"es5-ext/string/random-uniq":464,"es6-iterator/for-of":466,"es6-iterator/get":467,"es6-symbol":477}],486:[function(t,e,n){"use strict";var i,r,o,a,s,l,u,c=t("d"),h=t("es5-ext/object/valid-callable"),f=Function.prototype.apply,p=Function.prototype.call,d=Object.create,g=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var n,r;return h(e),i.call(r=this,t,n=function(){o.call(r,t,n),f.call(e,this,arguments)}),n.__eeOnceListener__=e,this},s={on:i=function(t,e){var n;return h(e),y.call(this,"__ee__")?n=this.__ee__:(n=_.value=d(null),g(this,"__ee__",_),_.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:r,off:o=function(t,e){var n,r,i,o;if(h(e),!y.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:a=function(t){var e,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)f.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];f.call(i,this,o)}}},l={on:c(i),once:c(r),off:c(o),emit:c(a)},u=m({},l),e.exports=n=function(t){return null==t?d(u):m(Object(t),l)},n.methods=s},{d:421,"es5-ext/object/valid-callable":457}],487:[function(t,e,n){var l=Object.create||function(t){var e=function(){};return e.prototype=t,new e},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,s=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),i=0===u.x}catch(t){i=!1}function c(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=l(null),t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=c(t))&&0<i&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[e]=n,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=o.call(f,r);return i.listener=n,r.wrapFn=i}function d(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length):[]}function g(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');s=t}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(t){var e,n,r,i,o,a,s="error"===t;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(e=arguments[1]),e instanceof Error)throw e;var l=new Error('Unhandled "error" event. ('+e+")");throw l.context=e,l}if(!(n=a[t]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=m(t,r),o=0;o<r;++o)i[o].call(n)}(n,u,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=m(t,i),a=0;a<i;++a)o[a].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=m(t,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=m(t,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=m(t,i),a=0;a<i;++a)o[a].apply(n,r)}(n,u,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=l(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=l(null):delete n[t]),this;if(0===arguments.length){var i,o=a(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},r.prototype.listenerCount=g,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],488:[function(t,e,n){e.exports=function(t){if(!t||!t.type)return null;var e=r[t.type];if(!e)return null;{if("geometry"===e)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===e)return{type:"FeatureCollection",features:[t]};if("featurecollection"===e)return t}};var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],489:[function(t,e,n){var r=t("JSONStream");e.exports.parse=function(){return r.parse("features.*")},e.exports.stringify=function(){return r.stringify('{"type":"FeatureCollection","features":[',"\n,\n","]}")}},{JSONStream:57}],490:[function(t,e,n){var r,i;r=this,i=function(){var t,h,e,l={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},u=(t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},h=l.defaultRadius,t.prototype={_organiseData:function(t,e){var n=t[this._xField],r=t[this._yField],i=this._radi,o=this._data,a=this._max,s=this._min,l=t[this._valueField]||1,u=t.radius||this._cfgRadius||h;o[n]||(o[n]=[],i[n]=[]),o[n][r]?o[n][r]+=l:(o[n][r]=l,i[n][r]=u);var c=o[n][r];return a<c?(e?this.setDataMax(c):this._max=c,!1):c<s?(e?this.setDataMin(c):this._min=c,!1):{x:n,y:r,value:l,radius:u,min:s,max:a}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var r in e)for(var i in e[r])t.push({x:r,y:i,radius:n[r][i],value:e[r][i]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(e[r],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t),n=function(){var o=function(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in e)i.addColorStop(o,e[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},g=function(t,e){var n=document.createElement("canvas"),r=n.getContext("2d"),i=t,o=t;if(n.width=n.height=2*t,1==e)r.beginPath(),r.arc(i,o,t,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var a=r.createRadialGradient(i,o,t*e,i,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=a,r.fillRect(0,0,2*t,2*t)}return n};function t(t){var e=t.container,n=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=t.canvas||document.createElement("canvas"),i=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});r.className="heatmap-canvas",this._width=r.width=n.width=t.width||+i.width.replace(/px/,""),this._height=r.height=n.height=t.height||+i.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",e.style.position="relative",e.appendChild(r),this._palette=o(t),this._templates={},this._setStyles(t)}return t.prototype={renderPartial:function(t){0<t.data.length&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),0<t.data.length&&(this._drawAlpha(function(t){for(var e=[],n=t.min,r=t.max,i=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),u=l.length;u--;){var c=l[u],h=t[s][c],f=i[s][c];e.push({x:s,y:c,value:h,radius:f})}return{min:n,max:r,data:e}}(t)),this._colorize())},_updateGradient:function(t){this._palette=o(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,n=this._max=t.max,r=(t=t.data||[]).length,i=1-this._blur;r--;){var o,a=t[r],s=a.x,l=a.y,u=a.radius,c=Math.min(a.value,n),h=s-u,f=l-u,p=this.shadowCtx;this._templates[u]?o=this._templates[u]:this._templates[u]=o=g(u,i);var d=(c-e)/(n-e);p.globalAlpha=d<.01?.01:d,p.drawImage(o,h,f),h<this._renderBoundaries[0]&&(this._renderBoundaries[0]=h),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),h+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=h+2*u),f+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*u)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,r=this._renderBoundaries[3]-e,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),i<t+n&&(n=i-t),o<e+r&&(r=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,r),h=c.data,f=h.length,p=this._palette,d=3;d<f;d+=4){var g,m=h[d],y=4*m;if(y)g=0<a?a:m<s?m<l?l:m:s,h[d-3]=p[y],h[d-2]=p[y+1],h[d-1]=p[y+2],h[d]=u?p[y+3]:g}c.data=h,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),c=(e=!1,"canvas2d"===l.defaultRenderer&&(e=n),e),f=function(){for(var t={},e=arguments.length,n=0;n<e;n++){var r=arguments[n];for(var i in r)t[i]=r[i]}return t},r=function(){var s=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,n){var r=this.cStore;r[t]||(r[t]=[]),r[t].push(function(t){return e.call(n,t)})},emit:function(t,e){var n=this.cStore;if(n[t])for(var r=n[t].length,i=0;i<r;i++){(0,n[t][i])(e)}}},t}();function t(){var e,t,n,r,i=this._config=f(l,arguments[0]||{});if(this._coordinator=new s,i.plugin){var o=i.plugin;if(!l.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var a=l.plugins[o];this._renderer=new a.renderer(i),this._store=new a.store(i)}else this._renderer=new c(i),this._store=new u(i);t=(e=this)._renderer,n=e._coordinator,r=e._store,n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),r.setCoordinator(n)}return t.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=f(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},t}();return{create:function(t){return new r(t)},register:function(t,e){l.plugins[t]=e}}},void 0!==e&&e.exports?e.exports=i():"function"==typeof define&&define.amd?define(i):r.h337=i()},{}],491:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?f/l:f*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*g}},{}],492:[function(t,c,e){(function(e){"use strict";var n,r,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var i=0,o=new t(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var s=new e.MessageChannel;s.port1.onmessage=u,n=function(){s.port2.postMessage(0)}}var l=[];function u(){var t,e;r=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}r=!1}c.exports=function(t){1!==l.push(t)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],493:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],494:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))||!!t._isBuffer);var e}},{}],495:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],496:[function(t,e,n){!function(x,v,w,b){"use strict";function L(t,e){t||(e=e?": "+e:"",x.error("Fancytree assertion failed"+e))}function e(t,e){var n,r,i=v.console?v.console[t]:null;if(i)try{i.apply(v.console,e)}catch(t){for(r="",n=0;n<e.length;n++)r+=e[n];i(r)}}function o(t,r,e,n,i){var o,a,s,l,u;return o=r[t],a=n[t],s=r.ext[i],l=function(){return o.apply(r,arguments)},u=function(t){return o.apply(r,t)},function(){var t=r._local,e=r._super,n=r._superApply;try{return r._local=s,r._super=l,r._superApply=u,a.apply(r,arguments)}finally{r._local=t,r._super=e,r._superApply=n}}}function a(t,e,n,r){for(var i in n)"function"==typeof n[i]?"function"==typeof t[i]?t[i]=o(i,t,0,n,r):"_"===i.charAt(0)?t.ext[r][i]=o(i,t,0,n,r):x.error("Could not override tree."+i+". Use prefix '_' to create tree."+r+"._"+i):"options"!==i&&(t.ext[r][i]=n[i])}function C(t,e){return t===b?x.Deferred(function(){this.resolve()}).promise():x.Deferred(function(){this.resolveWith(t,e)}).promise()}function d(t,e){return t===b?x.Deferred(function(){this.reject()}).promise():x.Deferred(function(){this.rejectWith(t,e)}).promise()}function g(t,e){return function(){t.resolveWith(e)}}function m(t){var e=x.extend({},t.data()),n=e.json;return delete e.fancytree,delete e.uiFancytree,n&&(delete e.json,e=x.extend(e,n)),e}function y(t){return(""+t).replace(r,function(t){return S[t]})}function t(e){return e=e.toLowerCase(),function(t){return 0<=t.title.toLowerCase().indexOf(e)}}function u(t,e){var n,r,i,o;for(this.parent=t,this.tree=t.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},n=0,r=T.length;n<r;n++)this[i=T[n]]=e[i];for(i in null==this.unselectableIgnore&&null==this.unselectableStatus||(this.unselectable=!0),e.hideCheckbox&&x.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),e.data&&x.extend(this.data,e.data),e)f[i]||x.isFunction(e[i])||p[i]||(this.data[i]=e[i]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),L(this.key,"defaultKey() must return a unique key")):this.key="_"+_._nextNodeKey++:this.key=""+this.key,e.active&&(L(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),e.selected&&(this.tree.lastSelectedNode=this),(o=e.children)?o.length?this._setChildren(o):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function s(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(x.isFunction(this.options.lazyload)&&!x.isFunction(this.options.lazyLoad)&&(this.options.lazyLoad=function(){return _.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),t.options.lazyload.apply(this,arguments)}),x.isFunction(this.options.loaderror)&&x.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),this.options.fx!==b&&_.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),this.options.removeNode!==b&&x.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.data=m(this.$div),this._id=x.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var e,n={tree:this};this.rootNode=new u(n,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,e=x("<ul>",{class:"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=e,this.rootNode.ul=e[0],null==this.options.debugLevel&&(this.options.debugLevel=_.debugLevel)}if(x.ui&&x.ui.fancytree)x.ui.fancytree.warn("Fancytree: ignored duplicate include");else{var l,n,_=null,k=new RegExp(/\.|\//),r=/[&<>"'\/]/g,E=/[<>"'\/]/g,c="$recursive_request",S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},i={16:!0,17:!0,18:!0},M={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={0:"",1:"left",2:"middle",3:"right"},P="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),I={},T="checkbox expanded extraClasses folder icon key lazy radiogroup refKey selected statusNodeType title tooltip unselectable unselectableIgnore unselectableStatus".split(" "),f={},O={},p={active:!0,children:!0,data:!0,focus:!0};for(l=0;l<P.length;l++)I[P[l]]=!0;for(l=0;l<T.length;l++)n=T[l],f[n]=!0,n!==n.toLowerCase()&&(O[n.toLowerCase()]=n);L(x.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),u.prototype={_findDirectChild:function(t){var e,n,r=this.children;if(r)if("string"==typeof t){for(e=0,n=r.length;e<n;e++)if(r[e].key===t)return r[e]}else{if("number"==typeof t)return this.children[t];if(t.parent===this)return t}return null},_setChildren:function(t){L(t&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var e=0,n=t.length;e<n;e++)this.children.push(new u(this,t[e]))},addChildren:function(t,e){var n,r,i,o,a=this.getFirstChild(),s=this.getLastChild(),l=[];for(x.isPlainObject(t)&&(t=[t]),this.children||(this.children=[]),n=0,r=t.length;n<r;n++)l.push(new u(this,t[n]));if(o=l[0],null==e?this.children=this.children.concat(l):(e=this._findDirectChild(e),L(0<=(i=x.inArray(e,this.children)),"insertBefore must be an existing child"),this.children.splice.apply(this.children,[i,0].concat(l))),a&&!e){for(n=0,r=l.length;n<r;n++)l[n].render();a!==this.getFirstChild()&&a.renderStatus(),s!==this.getLastChild()&&s.renderStatus()}else(!this.parent||this.parent.ul||this.tr)&&this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===l.length?l[0]:null),o},addClass:function(t){return this.toggleClass(t,!0)},addNode:function(t,e){switch(e!==b&&"over"!==e||(e="child"),e){case"after":return this.getParent().addChildren(t,this.getNextSibling());case"before":return this.getParent().addChildren(t,this);case"firstChild":var n=this.children?this.children[0]:null;return this.addChildren(t,n);case"child":case"over":return this.addChildren(t)}L(!1,"Invalid mode: "+e)},addPagingNode:function(t,e){var n,r;if(e=e||"child",!1!==t)return t=x.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,e);for(n=this.children.length-1;0<=n;n--)"paging"===(r=this.children[n]).statusNodeType&&this.removeChild(r);this.partload=!1},appendSibling:function(t){return this.addNode(t,"after")},applyPatch:function(t){if(null===t)return this.remove(),C(this);var e,n,r={children:!0,expanded:!0,parent:!0};for(e in t)n=t[e],r[e]||x.isFunction(n)||(f[e]?this[e]=n:this.data[e]=n);return t.hasOwnProperty("children")&&(this.removeChildren(),t.children&&this._setChildren(t.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),t.hasOwnProperty("expanded")?this.setExpanded(t.expanded):C(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(t,e,n){return t.addNode(this.toDict(!0,n),e)},countChildren:function(t){var e,n,r,i=this.children;if(!i)return 0;if(r=i.length,!1!==t)for(e=0,n=r;e<n;e++)r+=i[e].countChildren();return r},debug:function(t){2<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),e("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(t){var e=t?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(e,this)},findAll:function(e){e=x.isFunction(e)?e:t(e);var n=[];return this.visit(function(t){e(t)&&n.push(t)}),n},findFirst:function(e){e=x.isFunction(e)?e:t(e);var n=null;return this.visit(function(t){if(e(t))return n=t,!1}),n},_changeSelectStatusAttrs:function(t){var e=!1,n=this.tree.options,r=_.evalOption("unselectable",this,this,n,!1),i=_.evalOption("unselectableStatus",this,this,n,b);switch(r&&null!=i&&(t=i),t){case!1:e=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:e=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case b:e=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:L(!1,"invalid state: "+t)}return e&&this.renderStatus(),e},fixSelection3AfterClick:function(t){var e=this.isSelected();this.visit(function(t){t._changeSelectStatusAttrs(e)}),this.fixSelection3FromEndNodes(t)},fixSelection3FromEndNodes:function(t){var h=this.tree.options;L(3===h.selectMode,"expected selectMode 3"),function t(e){var n,r,i,o,a,s,l,u,c=e.children;if(c&&c.length){for(l=!(s=!0),n=0,r=c.length;n<r;n++)o=t(i=c[n]),_.evalOption("unselectableIgnore",i,i,h,!1)||(!1!==o&&(l=!0),!0!==o&&(s=!1));a=!!s||!!l&&b}else a=null==(u=_.evalOption("unselectableStatus",e,e,h,b))?!!e.selected:!!u;return e._changeSelectStatusAttrs(a),a}(this),this.visitParents(function(t){var e,n,r,i,o,a=t.children,s=!0,l=!1;for(e=0,n=a.length;e<n;e++)r=a[e],_.evalOption("unselectableIgnore",r,r,h,!1)||(((i=null==(o=_.evalOption("unselectableStatus",r,r,h,b))?!!r.selected:!!o)||r.partsel)&&(l=!0),i||(s=!1));i=!!s||!!l&&b,t._changeSelectStatusAttrs(i)})},fromDict:function(t){for(var e in t)f[e]?this[e]=t[e]:"data"===e?x.extend(this.data,t.data):x.isFunction(t[e])||p[e]||(this.data[e]=t[e]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){return this.hasChildren()===b?b:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return x.inArray(this,this.parent.children)},getIndexHier:function(t,n){t=t||".";var r,i=[];return x.each(this.getParentList(!1,!0),function(t,e){r=""+(e.getIndex()+1),n&&(r=("0000000"+r).substr(-n)),i.push(r)}),i.join(t)},getKeyPath:function(t){var e=[],n=this.tree.options.keyPathSeparator;return this.visitParents(function(t){t.parent&&e.unshift(t.key)},!t),n+e.join(n)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},getNextSibling:function(){if(this.parent){var t,e,n=this.parent.children;for(t=0,e=n.length-1;t<e;t++)if(n[t]===this)return n[t+1]}return null},getParent:function(){return this.parent},getParentList:function(t,e){for(var n=[],r=e?this:this.parent;r;)(t||r.parent)&&n.unshift(r),r=r.parent;return n},getPrevSibling:function(){if(this.parent){var t,e,n=this.parent.children;for(t=1,e=n.length;t<e;t++)if(n[t]===this)return n[t-1]}return null},getSelectedNodes:function(e){var n=[];return this.visit(function(t){if(t.selected&&(n.push(t),!0===e))return"skip"}),n},hasChildren:function(){return this.lazy?null==this.children?b:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode()||b):!(!this.children||!this.children.length)},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(t){1<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),e("info",arguments))},isActive:function(){return this.tree.activeNode===this},isChildOf:function(t){return this.parent&&this.parent===t},isDescendantOf:function(t){if(!t||t.tree!==this.tree)return!1;for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var t=this.parent;return!t||t.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var t=this.parent;return!t||t.children[t.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||this.hasChildren()!==b},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return this.hasChildren()===b},isVisible:function(){var t,e,n=this.getParentList(!1,!1);for(t=0,e=n.length;t<e;t++)if(!n[t].expanded)return!1;return!0},lazyLoad:function(t){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(t)},load:function(t){var e,n,r=this,i=this.isExpanded();return L(this.isLazy(),"load() requires a lazy node"),t||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),!1===(n=this.tree._triggerNodeEvent("lazyLoad",this))?C(this):(L("boolean"!=typeof n,"lazyLoad event must return source in data.result"),e=this.tree._callHook("nodeLoadChildren",this,n),i?(this.expanded=!0,e.always(function(){r.render()})):e.always(function(){r.renderStatus()}),e)):C(this)},makeVisible:function(t){var e,n=this,r=[],i=new x.Deferred,o=this.getParentList(!1,!1),a=o.length,s=!(t&&!0===t.noAnimation),l=!(t&&!1===t.scrollIntoView);for(e=a-1;0<=e;e--)r.push(o[e].setExpanded(!0,t));return x.when.apply(x,r).done(function(){l?n.scrollIntoView(s).done(function(){i.resolve()}):i.resolve()}),i.promise()},moveTo:function(e,t,n){t===b||"over"===t?t="child":"firstChild"===t&&(e.children&&e.children.length?(t="before",e=e.children[0]):t="child");var r,i=this.parent,o="child"===t?e:e.parent;if(this!==e){if(this.parent?o.isDescendantOf(this)&&x.error("Cannot move a node to its own descendant"):x.error("Cannot move system root"),o!==i&&i.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===o)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else L(0<=(r=x.inArray(this,this.parent.children)),"invalid source parent"),this.parent.children.splice(r,1);if((this.parent=o).hasChildren())switch(t){case"child":o.children.push(this);break;case"before":L(0<=(r=x.inArray(e,o.children)),"invalid target parent"),o.children.splice(r,0,this);break;case"after":L(0<=(r=x.inArray(e,o.children)),"invalid target parent"),o.children.splice(r+1,0,this);break;default:x.error("Invalid mode "+t)}else o.children=[this];n&&e.visit(n,!0),o===i?o.triggerModifyChild("move",this):o.triggerModifyChild("add",this),this.tree!==e.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(t){t.tree=e.tree},!0)),i.isDescendantOf(o)||i.render(),o.isDescendantOf(i)||o===i||o.render()}},navigate:function(e,n){function r(t){if(t){try{t.makeVisible({scrollIntoView:!1})}catch(t){}return x(t.span).is(":visible")?!1===n?t.setFocus():t.setActive():(t.debug("Navigate: skipping hidden node"),void t.navigate(e,n))}}var t,i,o,a=x.ui.keyCode,s=null;switch(e){case a.BACKSPACE:this.parent&&this.parent.parent&&(o=r(this.parent));break;case a.HOME:this.tree.visit(function(t){if(x(t.span).is(":visible"))return o=r(t),!1});break;case a.END:this.tree.visit(function(t){x(t.span).is(":visible")&&(o=t)}),o&&(o=r(o));break;case a.LEFT:this.expanded?(this.setExpanded(!1),o=r(this)):this.parent&&this.parent.parent&&(o=r(this.parent));break;case a.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&(o=r(this.children[0])):(this.setExpanded(),o=r(this));break;case a.UP:for(s=this.getPrevSibling();s&&!x(s.span).is(":visible");)s=s.getPrevSibling();for(;s&&s.expanded&&s.children&&s.children.length;)s=s.children[s.children.length-1];!s&&this.parent&&this.parent.parent&&(s=this.parent),o=r(s);break;case a.DOWN:if(this.expanded&&this.children&&this.children.length)s=this.children[0];else for(t=(i=this.getParentList(!1,!0)).length-1;0<=t;t--){for(s=i[t].getNextSibling();s&&!x(s.span).is(":visible");)s=s.getNextSibling();if(s)break}o=r(s);break;default:!1}return o||C()},remove:function(){return this.parent.removeChild(this)},removeChild:function(t){return this.tree._callHook("nodeRemoveChild",this,t)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(t){return this.toggleClass(t,!1)},render:function(t,e){return this.tree._callHook("nodeRender",this,t,e)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(t){var e,n=this.parent,r=x.inArray(this,n.children),i=this;return L(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(e=this.tree._callHook("nodeLoadChildren",this,t)).done(function(t){var e=i.children;for(l=0;l<e.length;l++)e[l].parent=n;n.children.splice.apply(n.children,[r+1,0].concat(e)),i.children=null,i.remove(),n.render()}).fail(function(){i.setExpanded()}),e},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=b,this.renderStatus()},scheduleAction:function(t,e){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var n=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger expand"),n.setExpanded(!0)},e);break;case"activate":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger activate"),n.setActive(!0)},e);break;default:x.error("Invalid mode "+t)}},scrollIntoView:function(t,e){var n;e!==b&&((n=e).tree&&n.statusNodeType!==b)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),e={topNode:e});var r,i,o,a=x.extend({effects:!0===t?{duration:200,queue:!1}:t,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},e),s=new x.Deferred,l=this,u=x(this.span).height(),c=x(a.scrollParent),h=a.scrollOfs.top||0,f=a.scrollOfs.bottom||0,p=c.height(),d=c.scrollTop(),g=c,m=c[0]===v,y=a.topNode||null,_=null;return x(this.span).is(":visible")?(m?(i=x(this.span).offset().top,r=y&&y.span?x(y.span).offset().top:0,g=x("html,body")):(L(c[0]!==w&&c[0]!==w.body,"scrollParent should be a simple element or `window`, not document or body."),o=c.offset().top,i=x(this.span).offset().top-o+d,r=y?x(y.span).offset().top-o+d:0,p-=Math.max(0,c.innerHeight()-c[0].clientHeight)),i<d+h?_=i-h:d+p-f<i+u&&(_=i+u-p+f,y&&(L(y.isRootNode()||x(y.span).is(":visible"),"topNode must be visible"),r<_&&(_=r-h))),null!==_?a.effects?(a.effects.complete=function(){s.resolveWith(l)},g.stop(!0).animate({scrollTop:_},a.effects)):(g[0].scrollTop=_,s.resolveWith(this)):s.resolveWith(this),s.promise()):(this.warn("scrollIntoView(): node is invisible."),C())},setActive:function(t,e){return this.tree._callHook("nodeSetActive",this,t,e)},setExpanded:function(t,e){return this.tree._callHook("nodeSetExpanded",this,t,e)},setFocus:function(t){return this.tree._callHook("nodeSetFocus",this,t)},setSelected:function(t,e){return this.tree._callHook("nodeSetSelected",this,t,e)},setStatus:function(t,e,n){return this.tree._callHook("nodeSetStatus",this,t,e,n)},setTitle:function(t){this.title=t,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(t,e){var n,r,i=this.children;if(i){if(t=t||function(t,e){var n=t.title.toLowerCase(),r=e.title.toLowerCase();return n===r?0:r<n?1:-1},i.sort(t),e)for(n=0,r=i.length;n<r;n++)i[n].children&&i[n].sortChildren(t,"$norender$");"$norender$"!==e&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,e){var n,r,i,o={},a=this;if(x.each(T,function(t,e){(a[e]||!1===a[e])&&(o[e]=a[e])}),x.isEmptyObject(this.data)||(o.data=x.extend({},this.data),x.isEmptyObject(o.data)&&delete o.data),e&&e(o,a),t&&this.hasChildren())for(o.children=[],n=0,r=this.children.length;n<r;n++)(i=this.children[n]).isStatusNode()||o.children.push(i.toDict(!0,e));return o},toggleClass:function(t,e){var n,r,i=t.match(/\S+/g)||[],o=0,a=!1,s=this[this.tree.statusClassPropName],l=" "+(this.extraClasses||"")+" ";for(s&&x(s).toggleClass(t,e);n=i[o++];)if(r=0<=l.indexOf(" "+n+" "),e=e===b?!r:!!e)r||(l+=n+" ",a=!0);else for(;-1<l.indexOf(" "+n+" ");)l=l.replace(" "+n+" "," ");return this.extraClasses=x.trim(l),a},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},triggerModifyChild:function(t,e,n){var r,i=this.tree.options.modifyChild;i&&(e&&e.parent!==this&&x.error("childNode "+e+" is not a child of "+this),r={node:this,tree:this.tree,operation:t,childNode:e||null},n&&x.extend(r,n),i({type:"modifyChild"},r))},triggerModify:function(t,e){this.parent.triggerModifyChild(t,this,e)},visit:function(t,e){var n,r,i=!0,o=this.children;if(!0===e&&(!1===(i=t(this))||"skip"===i))return i;if(o)for(n=0,r=o.length;n<r&&!1!==(i=o[n].visit(t,!0));n++);return i},visitAndLoad:function(n,t,e){var r,i,o,a=this;return n&&!0===t&&(!1===(i=n(a))||"skip"===i)?e?i:C():a.children||a.lazy?(r=new x.Deferred,o=[],a.load().done(function(){for(var t=0,e=a.children.length;t<e;t++){if(!1===(i=a.children[t].visitAndLoad(n,!0,!0))){r.reject();break}"skip"!==i&&o.push(i)}x.when.apply(this,o).then(function(){r.resolve()})}),r.promise()):C()},visitParents:function(t,e){if(e&&!1===t(this))return!1;for(var n=this.parent;n;){if(!1===t(n))return!1;n=n.parent}return!0},visitSiblings:function(t,e){var n,r,i,o=this.parent.children;for(n=0,r=o.length;n<r;n++)if(i=o[n],(e||i!==this)&&!1===t(i))return!1;return!0},warn:function(t){Array.prototype.unshift.call(arguments,this.toString()),e("warn",arguments)}},s.prototype={_makeHookContext:function(t,e,n){var r,i;return t.node!==b?(e&&t.originalEvent!==e&&x.error("invalid args"),r=t):t.tree?r={node:t,tree:i=t.tree,widget:i.widget,options:i.widget.options,originalEvent:e}:t.widget?r={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:e}:x.error("invalid args"),n&&x.extend(r,n),r},_callHook:function(t,e,n){var r=this._makeHookContext(e),i=this[t],o=Array.prototype.slice.call(arguments,2);return x.isFunction(i)||x.error("_callHook('"+t+"') is not a function"),o.unshift(r),i.apply(this,o)},_requireExtension:function(t,e,n,r){n=!!n;var i=this._local.name,o=this.options.extensions,a=x.inArray(t,o)<x.inArray(i,o),s=e&&null==this.ext[t],l=!s&&null!=n&&n!==a;return L(i&&i!==t,"invalid or same name"),!s&&!l||(r||(s||e?(r="'"+i+"' extension requires '"+t+"'",l&&(r+=" to be registered "+(n?"before":"after")+" itself")):r="If used together, `"+t+"` must be registered "+(n?"before":"after")+" `"+i+"`"),x.error(r),!1)},activateKey:function(t){var e=this.getNodeByKey(t);return e?e.setActive():this.activeNode&&this.activeNode.setActive(!1),e},addPagingNode:function(t,e){return this.rootNode.addPagingNode(t,e)},applyPatch:function(t){var e,n,r,i,o,a,s=t.length,l=[];for(n=0;n<s;n++)L(2===(r=t[n]).length,"patchList must be an array of length-2-arrays"),i=r[0],o=r[1],(a=null===i?this.rootNode:this.getNodeByKey(i))?(e=new x.Deferred,l.push(e),a.applyPatch(o).always(g(e,a))):this.warn("could not find node with key '"+i+"'");return x.when.apply(x,l).promise()},clear:function(t){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(t){2<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),e("log",arguments))},enableUpdate:function(t){return t=!1!==t,!!this._enableUpdate==!!t?t:((this._enableUpdate=t)?(this.debug("enableUpdate(true): redraw "),this.render()):this.debug("enableUpdate(false)..."),!t)},findAll:function(t){return this.rootNode.findAll(t)},findFirst:function(t){return this.rootNode.findFirst(t)},findNextNode:function(e,n,t){var r,i=null,o=n.parent.children,a=null,l=function(t,e,n){var r,i,o=t.children,a=o.length,s=o[e];if(s&&!1===n(s))return!1;if(s&&s.children&&s.expanded&&!1===l(s,0,n))return!1;for(r=e+1;r<a;r++)if(!1===l(t,r,n))return!1;return(i=t.parent)?l(i,i.children.indexOf(t)+1,n):l(t,0,n)};return e="string"==typeof e?(r=new RegExp("^"+e,"i"),function(t){return r.test(t.title)}):e,n=n||this.getFirstChild(),l(n.parent,o.indexOf(n),function(t){return t!==i&&(i=i||t,x(t.span).is(":visible")?(!e(t)||(a=t)===n)&&void 0:void t.debug("quicksearch: skipping hidden node"))}),a},generateFormElements:function(t,e,n){function r(t){l.append(x("<input>",{type:"checkbox",name:o,value:t.key,checked:!0}))}n=n||{};var i,o="string"==typeof t?t:"ft_"+this._id+"[]",a="string"==typeof e?e:"ft_"+this._id+"_active",s="fancytree_result_"+this._id,l=x("#"+s),u=3===this.options.selectMode&&!1!==n.stopOnParents;l.length?l.empty():l=x("<div>",{id:s}).hide().insertAfter(this.$container),!1!==e&&this.activeNode&&l.append(x("<input>",{type:"radio",name:a,value:this.activeNode.key,checked:!0})),n.filter?this.visit(function(t){var e=n.filter(t);return"skip"===e?e:void(!1!==e&&r(t))}):!1!==t&&(i=this.getSelectedNodes(u),x.each(i,function(t,e){r(e)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(e,t){var n,r;return!t&&(n=w.getElementById(this.options.idPrefix+e))?n.ftnode?n.ftnode:null:(t=t||this.rootNode,r=null,t.visit(function(t){if(t.key===e)return r=t,!1},!0),r)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(t){return this.rootNode.getSelectedNodes(t)},hasFocus:function(){return!!this._hasFocus},info:function(t){1<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),e("info",arguments))},loadKeyPath:function(t,i,e){function n(e,n,r){i.call(d,n,"loading"),n.load().done(function(){d.loadKeyPath.call(d,u[e],i,n).always(g(r,d))}).fail(function(t){d.warn("loadKeyPath: error loading: "+e+" (parent: "+h+")"),i.call(d,n,"error"),r.reject()})}var r,o,a,s,l,u,c,h,f,p=this.options.keyPathSeparator,d=this;for(i=i||x.noop,x.isArray(t)||(t=[t]),u={},a=0;a<t.length;a++)for(h=e||this.rootNode,(s=t[a]).charAt(0)===p&&(s=s.substr(1)),f=s.split(p);f.length;){if(l=f.shift(),!(c=h._findDirectChild(l))){this.warn("loadKeyPath: key not found: "+l+" (parent: "+h+")"),i.call(this,l,"error");break}if(0===f.length){i.call(this,c,"ok");break}if(c.lazy&&c.hasChildren()===b){i.call(this,c,"loaded"),u[l]?u[l].push(f.join(p)):u[l]=[f.join(p)];break}i.call(this,c,"loaded"),h=c}for(l in r=[],u)null==(c=h._findDirectChild(l))&&(c=d.getNodeByKey(l)),o=new x.Deferred,r.push(o),n(l,c,o);return x.when.apply(x,r).promise()},reactivate:function(t){var e,n=this.activeNode;return n?(this.activeNode=null,e=n.setActive(!0,{noFocus:!0}),t&&n.setFocus(),e):C()},reload:function(t){return this._callHook("treeClear",this),this._callHook("treeLoad",this,t)},render:function(t,e){return this.rootNode.render(t,e)},setFocus:function(t){return this._callHook("treeSetFocus",this,t)},toDict:function(t,e){var n=this.rootNode.toDict(!0,e);return t?n:n.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(t,e,n,r){var i=this._makeHookContext(e,n,r),o=this.widget._trigger(t,n,i);return!1!==o&&i.result!==b?i.result:o},_triggerTreeEvent:function(t,e,n){var r=this._makeHookContext(this,e,n),i=this.widget._trigger(t,e,r);return!1!==i&&r.result!==b?r.result:i},visit:function(t){return this.rootNode.visit(t,!1)},warn:function(t){Array.prototype.unshift.call(arguments,this.toString()),e("warn",arguments)}},x.extend(s.prototype,{nodeClick:function(t){var e,n,r=t.targetType,i=t.node;if("expander"===r){if(i.isLoading())return void i.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",t)}else if("checkbox"===r)this._callHook("nodeToggleSelected",t),t.options.focusOnSelect&&this._callHook("nodeSetFocus",t,!0);else{if(e=!(n=!1),i.folder)switch(t.options.clickFolderMode){case 2:e=!(n=!0);break;case 3:n=e=!0}e&&(this.nodeSetFocus(t),this._callHook("nodeSetActive",t,!0)),n&&this._callHook("nodeToggleExpanded",t)}},nodeCollapseSiblings:function(t,e){var n,r,i,o=t.node;if(o.parent)for(r=0,i=(n=o.parent.children).length;r<i;r++)n[r]!==o&&n[r].expanded&&this._callHook("nodeSetExpanded",n[r],!1,e)},nodeDblclick:function(t){"title"===t.targetType&&4===t.options.clickFolderMode&&this._callHook("nodeToggleExpanded",t),"title"===t.targetType&&t.originalEvent.preventDefault()},nodeKeydown:function(t){var e,n,r,i=t.originalEvent,o=t.node,a=t.tree,s=t.options,l=i.which,u=String.fromCharCode(l),c=!(i.altKey||i.ctrlKey||i.metaKey||i.shiftKey),h=x(i.target),f=!0,p=!(i.ctrlKey||!s.autoActivate);if(o||(r=this.getActiveNode()||this.getFirstChild())&&(r.setFocus(),(o=t.node=this.focusNode).debug("Keydown force focus on active node")),s.quicksearch&&c&&/\w/.test(u)&&!M[l]&&!h.is(":input:enabled"))return 500<(n=(new Date).getTime())-a.lastQuicksearchTime&&(a.lastQuicksearchTerm=""),a.lastQuicksearchTime=n,a.lastQuicksearchTerm+=u,(e=a.findNextNode(a.lastQuicksearchTerm,a.getActiveNode()))&&e.setActive(),void i.preventDefault();switch(_.eventToString(i)){case"+":case"=":a.nodeSetExpanded(t,!0);break;case"-":a.nodeSetExpanded(t,!1);break;case"space":o.isPagingNode()?a._triggerNodeEvent("clickPaging",t,i):s.checkbox?a.nodeToggleSelected(t):a.nodeSetActive(t,!0);break;case"return":a.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":o.navigate(i.which,p,!0);break;default:f=!1}f&&i.preventDefault()},nodeLoadChildren:function(o,a){var e,n,t,s=o.tree,l=o.node,u=(new Date).getTime();return x.isFunction(a)&&(a=a.call(s,{type:"source"},o),L(!x.isFunction(a),"source callback must not return another function")),a.url&&(l._requestId&&l.warn("Recursive load request #"+u+" while #"+l._requestId+" is pending."),e=x.extend({},o.options.ajax,a),l._requestId=u,e.debugDelay?(n=e.debugDelay,x.isArray(n)&&(n=n[0]+Math.random()*(n[1]-n[0])),l.warn("nodeLoadChildren waiting debugDelay "+Math.round(n)+" ms ..."),e.debugDelay=!1,t=x.Deferred(function(t){setTimeout(function(){x.ajax(e).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},n)})):t=x.ajax(e),a=new x.Deferred,t.done(function(t,e,n){var r,i;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof t||x.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),l._requestId&&l._requestId>u)a.rejectWith(this,[c]);else{if(o.options.postProcess){try{i=s._triggerNodeEvent("postProcess",o,o.originalEvent,{response:t,error:null,dataType:this.dataType})}catch(t){i={error:t,message:""+t,details:"postProcess failed"}}if(i.error)return r=x.isPlainObject(i.error)?i.error:{message:i.error},r=s._makeHookContext(l,null,r),void a.rejectWith(this,[r]);t=x.isArray(i)?i:t}else t&&t.hasOwnProperty("d")&&o.options.enableAspx&&(t="string"==typeof t.d?x.parseJSON(t.d):t.d);a.resolveWith(this,[t])}}).fail(function(t,e,n){var r=s._makeHookContext(l,null,{error:t,args:Array.prototype.slice.call(arguments),message:n,details:t.status+": "+n});a.rejectWith(this,[r])})),x.isFunction(a.then)&&x.isFunction(a.catch)&&(t=a,a=new x.Deferred,t.then(function(t){a.resolve(t)},function(t){a.reject(t)})),x.isFunction(a.promise)&&(s.nodeSetStatus(o,"loading"),a.done(function(t){s.nodeSetStatus(o,"ok"),l._requestId=null}).fail(function(t){var e;return t===c?void l.warn("Ignored response for obsolete load request #"+u+" (expected #"+l._requestId+")"):(t.node&&t.error&&t.message?e=t:"[object Object]"===(e=s._makeHookContext(l,null,{error:t,args:Array.prototype.slice.call(arguments),message:t?t.message||t.toString():""})).message&&(e.message=""),l.warn("Load children failed ("+e.message+")",e),void(!1!==s._triggerNodeEvent("loadError",e,null)&&s.nodeSetStatus(o,"error",e.message,e.details)))})),x.when(a).done(function(t){var e;x.isPlainObject(t)&&(L(l.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),L(x.isArray(t.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),t=(e=t).children,delete e.children,x.extend(s.data,e)),L(x.isArray(t),"expected array of children"),l._setChildren(t),s._triggerNodeEvent("loadChildren",l)})},nodeLoadKeyPath:function(t,e){},nodeRemoveChild:function(t,e){var n,r=t.node,i=x.extend({},t,{node:e}),o=r.children;return 1===o.length?(L(e===o[0],"invalid single child"),this.nodeRemoveChildren(t)):(this.activeNode&&(e===this.activeNode||this.activeNode.isDescendantOf(e))&&this.activeNode.setActive(!1),this.focusNode&&(e===this.focusNode||this.focusNode.isDescendantOf(e))&&(this.focusNode=null),this.nodeRemoveMarkup(i),this.nodeRemoveChildren(i),L(0<=(n=x.inArray(e,o)),"invalid child"),r.triggerModifyChild("remove",e),e.visit(function(t){t.parent=null},!0),this._callHook("treeRegisterNode",this,!1,e),void o.splice(n,1))},nodeRemoveChildMarkup:function(t){var e=t.node;e.ul&&(e.isRootNode()?x(e.ul).empty():(x(e.ul).remove(),e.ul=null),e.visit(function(t){t.li=t.ul=null}))},nodeRemoveChildren:function(t){var e=t.tree,n=t.node;n.children&&(this.activeNode&&this.activeNode.isDescendantOf(n)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(n)&&(this.focusNode=null),this.nodeRemoveChildMarkup(t),x.extend({},t),n.triggerModifyChild("remove",null),n.visit(function(t){t.parent=null,e._callHook("treeRegisterNode",e,!1,t)}),n.lazy?n.children=[]:n.children=null,n.isRootNode()||(n.expanded=!1),this.nodeRenderStatus(t))},nodeRemoveMarkup:function(t){var e=t.node;e.li&&(x(e.li).remove(),e.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(t,e,n,r,i){var o,a,s,l,u,c,h,f=t.node,p=t.tree,d=t.options,g=d.aria,m=!1,y=f.parent,_=!y,v=f.children,b=null;if(!1!==p._enableUpdate&&(_||y.ul)){if(L(_||y.ul,"parent UL must exist"),_||(f.li&&(e||f.li.parentNode!==f.parent.ul)&&(f.li.parentNode===f.parent.ul?b=f.li.nextSibling:this.debug("Unlinking "+f+" (must be child of "+f.parent+")"),this.nodeRemoveMarkup(t)),f.li?this.nodeRenderStatus(t):(m=!0,f.li=w.createElement("li"),(f.li.ftnode=f).key&&d.generateIds&&(f.li.id=d.idPrefix+f.key),f.span=w.createElement("span"),f.span.className="fancytree-node",g&&!f.tr&&x(f.li).attr("role","treeitem"),f.li.appendChild(f.span),this.nodeRenderTitle(t),d.createNode&&d.createNode.call(p,{type:"createNode"},t)),d.renderNode&&d.renderNode.call(p,{type:"renderNode"},t)),v){if(_||f.expanded||!0===n){for(f.ul||(f.ul=w.createElement("ul"),(!0!==r||i)&&f.expanded||(f.ul.style.display="none"),g&&x(f.ul).attr("role","group"),f.li?f.li.appendChild(f.ul):f.tree.$div.append(f.ul)),l=0,u=v.length;l<u;l++)h=x.extend({},t,{node:v[l]}),this.nodeRender(h,e,n,!1,!0);for(o=f.ul.firstChild;o;)(s=o.ftnode)&&s.parent!==f?(f.debug("_fixParent: remove missing "+s,o),c=o.nextSibling,o.parentNode.removeChild(o),o=c):o=o.nextSibling;for(o=f.ul.firstChild,l=0,u=v.length-1;l<u;l++)(a=v[l])!==(s=o.ftnode)?f.ul.insertBefore(a.li,s.li):o=o.nextSibling}}else f.ul&&(this.warn("remove child markup for "+f),this.nodeRemoveChildMarkup(t));_||m&&y.ul.insertBefore(f.li,b)}},nodeRenderTitle:function(t,e){var n,r,i,o,a,s,l=t.node,u=t.tree,c=t.options,h=c.aria,f=l.getLevel(),p=[];e!==b&&(l.title=e),l.span&&!1!==u._enableUpdate&&(a=h&&!1!==l.hasChildren()?" role='button'":"",f<c.minExpandLevel?(l.lazy||(l.expanded=!0),1<f&&p.push("<span "+a+" class='fancytree-expander fancytree-expander-fixed'></span>")):p.push("<span "+a+" class='fancytree-expander'></span>"),(n=_.evalOption("checkbox",l,l,c,!1))&&!l.isStatusNode()&&(a=h?" role='checkbox'":"",r="fancytree-checkbox",("radio"===n||l.parent&&l.parent.radiogroup)&&(r+=" fancytree-radio"),p.push("<span "+a+" class='"+r+"'></span>")),l.data.iconClass!==b&&(l.icon?x.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(l.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),l.icon=l.data.iconClass)),"boolean"!=typeof(i=_.evalOption("icon",l,l,c,!0))&&(i=""+i),!1!==i&&(a=h?" role='presentation'":"","string"==typeof i?k.test(i)?(i="/"===i.charAt(0)?i:(c.imagePath||"")+i,p.push("<img src='"+i+"' class='fancytree-icon' alt='' />")):p.push("<span "+a+" class='fancytree-custom-icon "+i+"'></span>"):p.push("<span "+a+" class='fancytree-icon'></span>")),o="",c.renderTitle&&(o=c.renderTitle.call(u,{type:"renderTitle"},t)||""),o||(!0===(s=_.evalOption("tooltip",l,l,c,null))&&(s=l.title),o="<span class='fancytree-title'"+(s=s?" title='"+(""+s).replace(E,function(t){return S[t]})+"'":"")+(c.titlesTabbable?" tabindex='0'":"")+">"+(c.escapeTitles?y(l.title):l.title)+"</span>"),p.push(o),l.span.innerHTML=p.join(""),this.nodeRenderStatus(t),c.enhanceTitle&&(t.$title=x(">span.fancytree-title",l.span),o=c.enhanceTitle.call(u,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var e,n=t.node,r=t.tree,i=t.options,o=n.hasChildren(),a=n.isLastSibling(),s=i.aria,l=i._classNames,u=[],c=n[r.statusClassPropName];c&&!1!==r._enableUpdate&&(s&&(e=x(n.tr||n.li)),u.push(l.node),r.activeNode===n&&u.push(l.active),r.focusNode===n&&u.push(l.focused),n.expanded&&u.push(l.expanded),s&&(!1!==o?e.attr("aria-expanded",Boolean(n.expanded)):e.removeAttr("aria-expanded")),n.folder&&u.push(l.folder),!1!==o&&u.push(l.hasChildren),a&&u.push(l.lastsib),n.lazy&&null==n.children&&u.push(l.lazy),n.partload&&u.push(l.partload),n.partsel&&u.push(l.partsel),_.evalOption("unselectable",n,n,i,!1)&&u.push(l.unselectable),n._isLoading&&u.push(l.loading),n._error&&u.push(l.error),n.statusNodeType&&u.push(l.statusNodePrefix+n.statusNodeType),n.selected?(u.push(l.selected),s&&e.attr("aria-selected",!0)):s&&e.attr("aria-selected",!1),n.extraClasses&&u.push(n.extraClasses),!1===o?u.push(l.combinedExpanderPrefix+"n"+(a?"l":"")):u.push(l.combinedExpanderPrefix+(n.expanded?"e":"c")+(n.lazy&&null==n.children?"d":"")+(a?"l":"")),u.push(l.combinedIconPrefix+(n.expanded?"e":"c")+(n.folder?"f":"")),c.className=u.join(" "),n.li&&x(n.li).toggleClass(l.lastsib,a))},nodeSetActive:function(t,e,n){n=n||{};var r,i=t.node,o=t.tree,a=t.options,s=!0===n.noEvents,l=!0===n.noFocus;return i===o.activeNode===(e=!1!==e)?C(i):e&&!s&&!1===this._triggerNodeEvent("beforeActivate",i,t.originalEvent)?d(i,["rejected"]):(e?(o.activeNode&&(L(o.activeNode!==i,"node was active (inconsistency)"),r=x.extend({},t,{node:o.activeNode}),o.nodeSetActive(r,!1),L(null===o.activeNode,"deactivate was out of sync?")),a.activeVisible&&i.makeVisible({scrollIntoView:l&&null==o.focusNode}),o.activeNode=i,o.nodeRenderStatus(t),l||o.nodeSetFocus(t),s||o._triggerNodeEvent("activate",i,t.originalEvent)):(L(o.activeNode===i,"node was not active (inconsistency)"),o.activeNode=null,this.nodeRenderStatus(t),s||t.tree._triggerNodeEvent("deactivate",i,t.originalEvent)),C(i))},nodeSetExpanded:function(r,i,t){t=t||{};var e,n,o,a,s,l,u=r.node,c=r.tree,h=r.options,f=!0===t.noAnimation,p=!0===t.noEvents;if(i=!1!==i,u.expanded&&i||!u.expanded&&!i)return C(u);if(i&&!u.lazy&&!u.hasChildren())return C(u);if(!i&&u.getLevel()<h.minExpandLevel)return d(u,["locked"]);if(!p&&!1===this._triggerNodeEvent("beforeExpand",u,r.originalEvent))return d(u,["rejected"]);if(f||u.isVisible()||(f=t.noAnimation=!0),n=new x.Deferred,i&&!u.expanded&&h.autoCollapse){s=u.getParentList(!1,!0),l=h.autoCollapse;try{for(h.autoCollapse=!1,o=0,a=s.length;o<a;o++)this._callHook("nodeCollapseSiblings",s[o],t)}finally{h.autoCollapse=l}}return n.done(function(){var t=u.getLastChild();i&&h.autoScroll&&!f&&t?t.scrollIntoView(!0,{topNode:u}).always(function(){p||r.tree._triggerNodeEvent(i?"expand":"collapse",r)}):p||r.tree._triggerNodeEvent(i?"expand":"collapse",r)}),e=function(t){var e=h._classNames,n=h.toggleEffect;if(u.expanded=i,c._callHook("nodeRender",r,!1,!1,!0),u.ul)if("none"!==u.ul.style.display===!!u.expanded)u.warn("nodeSetExpanded: UL.style.display already set");else{if(n&&!f)return x(u.li).addClass(e.animating),void x(u.ul).addClass(e.animating).toggle(n.effect,n.options,n.duration,function(){x(this).removeClass(e.animating),x(u.li).removeClass(e.animating),t()});u.ul.style.display=u.expanded||!parent?"":"none"}t()},i&&u.lazy&&u.hasChildren()===b?u.load().done(function(){n.notifyWith&&n.notifyWith(u,["loaded"]),e(function(){n.resolveWith(u)})}).fail(function(t){e(function(){n.rejectWith(u,["load failed ("+t+")"])})}):e(function(){n.resolveWith(u)}),n.promise()},nodeSetFocus:function(t,e){var n,r=t.tree,i=t.node,o=r.options,a=!!t.originalEvent&&x(t.originalEvent.target).is(":input");if(e=!1!==e,r.focusNode){if(r.focusNode===i&&e)return;n=x.extend({},t,{node:r.focusNode}),r.focusNode=null,this._triggerNodeEvent("blur",n),this._callHook("nodeRenderStatus",n)}e&&(this.hasFocus()||(i.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),i.makeVisible({scrollIntoView:!1}),r.focusNode=i,o.titlesTabbable?a||x(i.span).find(".fancytree-title").focus():0===x(w.activeElement).closest(".fancytree-container").length&&x(r.$container).focus(),o.aria&&x(r.$container).attr("aria-activedescendant",x(i.tr||i.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",t),o.autoScroll&&i.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(t,e,n){n=n||{};var r=t.node,i=t.tree,o=t.options,a=!0===n.noEvents,s=r.parent;if(e=!1!==e,!_.evalOption("unselectable",r,r,o,!1)){if(r._lastSelectIntent=e,!!r.selected===e&&(3!==o.selectMode||!r.partsel||e))return e;if(!a&&!1===this._triggerNodeEvent("beforeSelect",r,t.originalEvent))return!!r.selected;e&&1===o.selectMode?(i.lastSelectedNode&&i.lastSelectedNode.setSelected(!1),r.selected=e):3!==o.selectMode||!s||s.radiogroup||r.radiogroup?s&&s.radiogroup?r.visitSiblings(function(t){t._changeSelectStatusAttrs(e&&t===r)},!0):r.selected=e:(r.selected=e,r.fixSelection3AfterClick(n)),this.nodeRenderStatus(t),i.lastSelectedNode=e?r:null,a||i._triggerNodeEvent("select",t)}},nodeSetStatus:function(t,e,n,r){function i(t,e){var n=o.children?o.children[0]:null;return n&&n.isStatusNode()?(x.extend(n,t),n.statusNodeType=e,a._callHook("nodeRenderTitle",n)):(o._setChildren([t]),o.children[0].statusNodeType=e,a.render()),o.children[0]}var o=t.node,a=t.tree;switch(e){case"ok":(function(){var t=o.children?o.children[0]:null;if(t&&t.isStatusNode()){try{o.ul&&(o.ul.removeChild(t.li),t.li=null)}catch(t){}1===o.children.length?o.children=[]:o.children.shift()}})(),o._isLoading=!1,o._error=null,o.renderStatus();break;case"loading":o.parent||i({title:a.options.strings.loading+(n?" ("+n+")":""),checkbox:!1,tooltip:r},e),o._isLoading=!0,o._error=null,o.renderStatus();break;case"error":i({title:a.options.strings.loadError+(n?" ("+n+")":""),checkbox:!1,tooltip:r},e),o._isLoading=!1,o._error={message:n,details:r},o.renderStatus();break;case"nodata":i({title:a.options.strings.noData,checkbox:!1,tooltip:r},e),o._isLoading=!1,o._error=null,o.renderStatus();break;default:x.error("invalid node status "+e)}},nodeToggleExpanded:function(t){return this.nodeSetExpanded(t,!t.node.expanded)},nodeToggleSelected:function(t){var e=t.node,n=!e.selected;return e.partsel&&!e.selected&&!0===e._lastSelectIntent&&(n=!1,e.selected=!0),e._lastSelectIntent=n,this.nodeSetSelected(t,n)},treeClear:function(t){var e=t.tree;e.activeNode=null,e.focusNode=null,e.$div.find(">ul.fancytree-container").empty(),e.rootNode.children=null},treeCreate:function(t){},treeDestroy:function(t){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden")},treeInit:function(t){var e=t.tree,n=e.options;e.$container.attr("tabindex",n.tabindex),n.rtl?e.$container.attr("DIR","RTL").addClass("fancytree-rtl"):e.$container.removeAttr("DIR").removeClass("fancytree-rtl"),n.aria&&(e.$container.attr("role","tree"),1!==n.selectMode&&e.$container.attr("aria-multiselectable",!0)),this.treeLoad(t)},treeLoad:function(t,e){var n,r,i,o=t.tree,a=t.widget.element,s=x.extend({},t,{node:this.rootNode});if(o.rootNode.children&&this.treeClear(t),e=e||this.options.source)"string"==typeof e&&x.error("Not implemented");else switch(r=a.data("type")||"html"){case"html":(i=a.find(">ul:first")).addClass("ui-fancytree-source ui-helper-hidden"),e=x.ui.fancytree.parseHtml(i),this.data=x.extend(this.data,m(i));break;case"json":e=x.parseJSON(a.text()),a.contents().filter(function(){return 3===this.nodeType}).remove(),x.isPlainObject(e)&&(L(x.isArray(e.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),e=(n=e).children,delete n.children,x.extend(o.data,n));break;default:x.error("Invalid data-type: "+r)}return this.nodeLoadChildren(s,e).done(function(){o.render(),3===t.options.selectMode&&o.rootNode.fixSelection3FromEndNodes(),o.activeNode&&o.options.activeVisible&&o.activeNode.makeVisible(),o._triggerTreeEvent("init",null,{status:!0})}).fail(function(){o.render(),o._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(t,e,n){},treeSetFocus:function(t,e,n){var r;(e=!1!==e)!==this.hasFocus()&&(!(this._hasFocus=e)&&this.focusNode?this.focusNode.setFocus(!1):!e||n&&n.calledByNode||x(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",e),this._triggerTreeEvent(e?"focusTree":"blurTree"),e&&!this.activeNode&&((r=this._lastMousedownNode||this.getFirstChild())&&r.setFocus()))},treeSetOption:function(t,e,n){var r=t.tree,i=!0,o=!1;switch(e){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":r._callHook("treeCreate",r),o=!0;break;case"escapeTitles":case"tooltip":o=!0;break;case"rtl":!1===n?r.$container.removeAttr("DIR").removeClass("fancytree-rtl"):r.$container.attr("DIR","RTL").addClass("fancytree-rtl"),o=!0;break;case"source":i=!1,r._callHook("treeLoad",r,n),o=!0}r.debug("set option "+e+"="+n+" <"+typeof n+">"),i&&(this.widget._super?this.widget._super.call(this.widget,e,n):x.Widget.prototype._setOption.call(this.widget,e,n)),o&&r.render(!0,!1)}}),x.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,_classNames:{node:"fancytree-node",folder:"fancytree-folder",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new s(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var t,e,n,r=this.options,i=r.extensions;this.tree;for(n=0;n<i.length;n++)e=i[n],(t=x.ui.fancytree._extensions[e])||x.error("Could not apply extension '"+e+"' (it is not registered, did you forget to include it?)"),this.tree.options[e]=x.extend(!0,{},t.options,this.tree.options[e]),L(this.tree.ext[e]===b,"Extension name must not exist as Fancytree.ext attribute: '"+e+"'"),this.tree.ext[e]={},a(this.tree,0,t,e),t;r.icons!==b&&(!0!==r.icon?x.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),r.icon=r.icons)),r.iconClass!==b&&(r.icon?x.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),r.icon=r.iconClass)),r.tabbable!==b&&(r.tabindex=r.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+r.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(t,e){return this.tree._callHook("treeSetOption",this.tree,t,e)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),x.Widget.prototype.destroy.call(this)},_unbind:function(){var t=this.tree._ns;this.element.off(t),this.tree.$container.off(t),x(w).off(t)},_bind:function(){var a=this,s=this.options,o=this.tree,t=o._ns;this._unbind(),o.$container.on("focusin"+t+" focusout"+t,function(t){var e=_.getNode(t),n="focusin"===t.type;e?o._callHook("nodeSetFocus",o._makeHookContext(e,t),n):o._callHook("treeSetFocus",o,n)}).on("selectstart"+t,"span.fancytree-title",function(t){t.preventDefault()}).on("keydown"+t,function(t){if(s.disabled||!1===s.keyboard)return!0;var e,n=o.focusNode,r=o._makeHookContext(n||o,t),i=o.phase;try{return o.phase="userEvent","preventNav"===(e=n?o._triggerNodeEvent("keydown",n,t):o._triggerTreeEvent("keydown",t))?e=!0:!1!==e&&(e=o._callHook("nodeKeydown",r)),e}finally{o.phase=i}}).on("mousedown"+t,function(t){var e=_.getEventTarget(t);a.tree._lastMousedownNode=e?e.node:null}).on("click"+t+" dblclick"+t,function(t){if(s.disabled)return!0;var e,n=_.getEventTarget(t),r=n.node,i=a.tree,o=i.phase;if(!r)return!0;e=i._makeHookContext(r,t);try{switch(i.phase="userEvent",t.type){case"click":return e.targetType=n.type,r.isPagingNode()?!0===i._triggerNodeEvent("clickPaging",e,t):!1!==i._triggerNodeEvent("click",e,t)&&i._callHook("nodeClick",e);case"dblclick":return e.targetType=n.type,!1!==i._triggerNodeEvent("dblclick",e,t)&&i._callHook("nodeDblclick",e)}}finally{i.phase=o}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(t){return this.tree.getNodeByKey(t)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),_=x.ui.fancytree,x.extend(x.ui.fancytree,{version:"2.24.0",buildType:"production",debugLevel:1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:s,_FancytreeNodeClass:u,jquerySupports:{positionMyOfs:function(t,e,n,r){var i,o,a,s=x.map(x.trim(t).split("."),function(t){return parseInt(t,10)}),l=x.map(Array.prototype.slice.call(arguments,1),function(t){return parseInt(t,10)});for(i=0;i<l.length;i++)if((o=s[i]||0)!==(a=l[i]||0))return a<o;return!0}(x.ui.version,1,9)},assert:function(t,e){return L(t,e)},debounce:function(e,n,r,i){var o;return 3===arguments.length&&"boolean"!=typeof r&&(i=r,r=!1),function(){var t=arguments;i=i||this,r&&!o&&n.apply(i,t),clearTimeout(o),o=setTimeout(function(){r||n.apply(i,t),o=null},e)}},debug:function(t){2<=x.ui.fancytree.debugLevel&&e("log",arguments)},error:function(t){e("error",arguments)},escapeHtml:y,fixPositionOptions:function(t){if((t.offset||0<=(""+t.my+t.at).indexOf("%"))&&x.error("expected new position syntax (but '%' is not supported)"),!x.ui.fancytree.jquerySupports.positionMyOfs){var e=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),r=(e[2]?+e[2]:0)+(n[2]?+n[2]:0),i=(e[4]?+e[4]:0)+(n[4]?+n[4]:0);t=x.extend({},t,{my:e[1]+" "+e[3],at:n[1]+" "+n[3]}),(r||i)&&(t.offset=r+" "+i)}return t},getEventTargetType:function(t){return this.getEventTarget(t).type},getEventTarget:function(t){var e=t&&t.target?t.target.className:"",n={node:this.getNode(t.target),type:b};return/\bfancytree-title\b/.test(e)?n.type="title":/\bfancytree-expander\b/.test(e)?n.type=!1===n.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(e)?n.type="checkbox":/\bfancytree-icon\b/.test(e)?n.type="icon":/\bfancytree-node\b/.test(e)?n.type="title":t&&t.target&&x(t.target).closest(".fancytree-title").length&&(n.type="title"),n},getNode:function(t){if(t instanceof u)return t;for(t instanceof jQuery?t=t[0]:t.originalEvent!==b&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var e;return t instanceof s?t:(t===b&&(t=0),"number"==typeof t?t=x(".fancytree-container").eq(t):"string"==typeof t?t=x(t).eq(0):t.selector!==b?t=t.eq(0):t.originalEvent!==b&&(t=x(t.target)),(e=(t=t.closest(":ui-fancytree")).data("ui-fancytree")||t.data("fancytree"))?e.tree:null)},evalOption:function(t,e,n,r,i){var o,a,s=e.tree,l=r[t],u=n[t];return x.isFunction(l)?(o={node:e,tree:s,widget:s.widget,options:s.widget.options},null==(a=l.call(s,{type:t},o))&&(a=u)):a=null!=u?u:l,null==a&&(a=i),a},eventToString:function(t){var e=t.which,n=t.type,r=[];return t.altKey&&r.push("alt"),t.ctrlKey&&r.push("ctrl"),t.metaKey&&r.push("meta"),t.shiftKey&&r.push("shift"),"click"===n||"dblclick"===n?r.push(h[t.button]+n):i[e]||r.push(M[e]||String.fromCharCode(e).toLowerCase()),r.join("+")},info:function(t){1<=x.ui.fancytree.debugLevel&&e("info",arguments)},keyEventToString:function(t){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(t)},overrideMethod:function(t,e,n){var r,i=t[e]||x.noop;t[e]=function(){try{return r=this._super,this._super=i,n.apply(this,arguments)}finally{this._super=r}}},parseHtml:function(a){var s,l,u,c,h,f,p,d,t=a.find(">li"),g=[];return t.each(function(){var t,e,n=x(this),r=n.find(">span:first",this),i=r.length?null:n.find(">a:first"),o={tooltip:null,data:{}};for(r.length?o.title=r.html():i&&i.length?(o.title=i.html(),o.data.href=i.attr("href"),o.data.target=i.attr("target"),o.tooltip=i.attr("title")):(o.title=n.html(),0<=(h=o.title.search(/<ul/i))&&(o.title=o.title.substring(0,h))),o.title=x.trim(o.title),c=0,f=P.length;c<f;c++)o[P[c]]=b;for(s=this.className.split(" "),u=[],c=0,f=s.length;c<f;c++)l=s[c],I[l]?o[l]=!0:u.push(l);if(o.extraClasses=u.join(" "),(p=n.attr("title"))&&(o.tooltip=p),(p=n.attr("id"))&&(o.key=p),n.attr("hideCheckbox")&&(o.checkbox=!1),(t=m(n))&&!x.isEmptyObject(t)){for(e in O)t.hasOwnProperty(e)&&(t[O[e]]=t[e],delete t[e]);for(c=0,f=T.length;c<f;c++)p=T[c],null!=(d=t[p])&&(delete t[p],o[p]=d);x.extend(o.data,t)}(a=n.find(">ul:first")).length?o.children=x.ui.fancytree.parseHtml(a):o.children=o.lazy?b:null,g.push(o)}),g},registerExtension:function(t){L(null!=t.name,"extensions must have a `name` property."),L(null!=t.version,"extensions must have a `version` property."),x.ui.fancytree._extensions[t.name]=t},unescapeHtml:function(t){var e=w.createElement("div");return e.innerHTML=t,0===e.childNodes.length?"":e.childNodes[0].nodeValue},warn:function(t){e("warn",arguments)}})}}(jQuery,window,document)},{}],497:[function(t,e,n){var r,i;r="undefined"!=typeof window?window:this,i=function(L,t){var h=[],d=L.document,c=h.slice,g=h.concat,s=h.push,i=h.indexOf,n={},e=n.toString,m=n.hasOwnProperty,y={},C=function(t,e){return new C.fn.init(t,e)},r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,a=/-([\da-z])/gi,l=function(t,e){return e.toUpperCase()};function u(t){var e=!!t&&"length"in t&&t.length,n=C.type(t);return"function"!==n&&!C.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}C.fn=C.prototype={jquery:"1.12.4",constructor:C,selector:"",length:0,toArray:function(){return c.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:c.call(this)},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return C.each(this,t)},map:function(n){return this.pushStack(C.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:h.sort,splice:h.splice},C.extend=C.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||C.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(i=arguments[s]))for(r in i)t=a[r],a!==(n=i[r])&&(u&&n&&(C.isPlainObject(n)||(e=C.isArray(n)))?(e?(e=!1,o=t&&C.isArray(t)?t:[]):o=t&&C.isPlainObject(t)?t:{},a[r]=C.extend(u,o,n)):void 0!==n&&(a[r]=n));return a},C.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===C.type(t)},isArray:Array.isArray||function(t){return"array"===C.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!C.isArray(t)&&0<=e-parseFloat(e)+1},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==C.type(t)||t.nodeType||C.isWindow(t))return!1;try{if(t.constructor&&!m.call(t,"constructor")&&!m.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(!y.ownFirst)for(e in t)return m.call(t,e);for(e in t);return void 0===e||m.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[e.call(t)]||"object":typeof t},globalEval:function(t){t&&C.trim(t)&&(L.execScript||function(t){L.eval.call(L,t)})(t)},camelCase:function(t){return t.replace(o,"ms-").replace(a,l)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(u(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(r,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(u(Object(t))?C.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){var r;if(e){if(i)return i.call(e,t,n);for(r=e.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;)t[i++]=e[r++];if(n!=n)for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(u(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,proxy:function(t,e){var n,r,i;if("string"==typeof e&&(i=t[e],e=t,t=i),C.isFunction(t))return n=c.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(c.call(arguments)))}).guid=t.guid=t.guid||C.guid++,r},now:function(){return+new Date},support:y}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=h[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var f=function(n){var t,d,b,o,i,g,h,m,x,l,u,w,L,a,C,y,s,c,_,k="sizzle"+1*new Date,v=n.document,E=0,r=0,f=it(),p=it(),S=it(),M=function(t,e){return t===e&&(u=!0),0},P={}.hasOwnProperty,e=[],I=e.pop,T=e.push,O=e.push,N=e.slice,D=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},A="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+R+"*("+F+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+R+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",z=new RegExp(R+"+","g"),q=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),U=new RegExp("^"+R+"*,"+R+"*"),G=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),V=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),H=new RegExp(B),W=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+A+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,J=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),et=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},nt=function(){w()};try{O.apply(e=N.call(v.childNodes),v.childNodes),e[v.childNodes.length].nodeType}catch(t){O={apply:e.length?function(t,e){T.apply(t,N.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function rt(t,e,n,r){var i,o,a,s,l,u,c,h,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:v)!==L&&w(e),e=e||L,C)){if(11!==p&&(u=Q.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&_(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return O.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return O.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!S[t+" "]&&(!y||!y.test(t))){if(1!==p)f=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(J,"\\$&"):e.setAttribute("id",s=k),o=(c=g(t)).length,l=W.test(s)?"#"+s:"[id='"+s+"']";o--;)c[o]=l+" "+dt(c[o]);h=c.join(","),f=K.test(t)&&ft(e.parentNode)||e}if(h)try{return O.apply(n,f.querySelectorAll(h)),n}catch(t){}finally{s===k&&e.removeAttribute("id")}}}return m(t.replace(q,"$1"),e,n,r)}function it(){var r=[];return function t(e,n){return r.push(e+" ")>b.cacheLength&&delete t[r.shift()],t[e+" "]=n}}function ot(t){return t[k]=!0,t}function at(t){var e=L.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function st(t,e){for(var n=t.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ct(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function ht(a){return ot(function(o){return o=+o,ot(function(t,e){for(var n,r=a([],t.length,o),i=r.length;i--;)t[n=r[i]]&&(t[n]=!(e[n]=t[n]))})})}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=rt.support={},i=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},w=rt.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:v;return r!==L&&9===r.nodeType&&r.documentElement&&(a=(L=r).documentElement,C=!i(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",nt,!1):n.attachEvent&&n.attachEvent("onunload",nt)),d.attributes=at(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=at(function(t){return t.appendChild(L.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=Z.test(L.getElementsByClassName),d.getById=at(function(t){return a.appendChild(t).id=k,!L.getElementsByName||!L.getElementsByName(k).length}),d.getById?(b.find.ID=function(t,e){if(void 0!==e.getElementById&&C){var n=e.getElementById(t);return n?[n]:[]}},b.filter.ID=function(t){var e=t.replace(tt,et);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var n=t.replace(tt,et);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}}),b.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&C)return e.getElementsByClassName(t)},s=[],y=[],(d.qsa=Z.test(L.querySelectorAll))&&(at(function(t){a.appendChild(t).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||y.push("\\["+R+"*(?:value|"+A+")"),t.querySelectorAll("[id~="+k+"-]").length||y.push("~="),t.querySelectorAll(":checked").length||y.push(":checked"),t.querySelectorAll("a#"+k+"+*").length||y.push(".#.+[+~]")}),at(function(t){var e=L.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&y.push("name"+R+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")})),(d.matchesSelector=Z.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&at(function(t){d.disconnectedMatch=c.call(t,"div"),c.call(t,"[s!='']:x"),s.push("!=",B)}),y=y.length&&new RegExp(y.join("|")),s=s.length&&new RegExp(s.join("|")),e=Z.test(a.compareDocumentPosition),_=e||Z.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===n?t===L||t.ownerDocument===v&&_(v,t)?-1:e===L||e.ownerDocument===v&&_(v,e)?1:l?D(l,t)-D(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===L?-1:e===L?1:i?-1:o?1:l?D(l,t)-D(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?lt(a[r],s[r]):a[r]===v?-1:s[r]===v?1:0}),L},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==L&&w(t),e=e.replace(V,"='$1']"),d.matchesSelector&&C&&!S[e+" "]&&(!s||!s.test(e))&&(!y||!y.test(e)))try{var n=c.call(t,e);if(n||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<rt(e,L,null,[t]).length},rt.contains=function(t,e){return(t.ownerDocument||t)!==L&&w(t),_(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==L&&w(t);var n=b.attrHandle[e.toLowerCase()],r=n&&P.call(b.attrHandle,e.toLowerCase())?n(t,e,!C):void 0;return void 0!==r?r:d.attributes||!C?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,n=[],r=0,i=0;if(u=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(M),u){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return l=null,t},o=rt.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=o(e);return n},(b=rt.selectors={cacheLength:50,createPseudo:ot,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(tt,et),t[3]=(t[3]||t[4]||t[5]||"").replace(tt,et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&H.test(n)&&(e=g(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(tt,et).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=f[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&f(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(t){var e=rt.attr(t,n);return null==e?"!="===r:!r||(e+="","="===r?e===i:"!="===r?e!==i:"^="===r?i&&0===e.indexOf(i):"*="===r?i&&-1<e.indexOf(i):"$="===r?i&&e.slice(-i.length)===i:"~="===r?-1<(" "+e.replace(z," ")+" ").indexOf(i):"|="===r&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,t,e,g,m){var y="nth"!==d.slice(0,3),_="last"!==d.slice(-4),v="of-type"===t;return 1===g&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var r,i,o,a,s,l,u=y!==_?"nextSibling":"previousSibling",c=t.parentNode,h=v&&t.nodeName.toLowerCase(),f=!n&&!v,p=!1;if(c){if(y){for(;u;){for(a=t;a=a[u];)if(v?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;l=u="only"===d&&!l&&"nextSibling"}return!0}if(l=[_?c.firstChild:c.lastChild],_&&f){for(p=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[d]||[])[0]===E&&r[1])&&r[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(p=s=0)||l.pop();)if(1===a.nodeType&&++p&&a===t){i[d]=[E,s,p];break}}else if(f&&(p=s=(r=(i=(o=(a=t)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[d]||[])[0]===E&&r[1]),!1===p)for(;(a=++s&&a&&a[u]||(p=s=0)||l.pop())&&((v?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++p||(f&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[d]=[E,p]),a!==t)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(t,o){var e,a=b.pseudos[t]||b.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return a[k]?a(o):1<a.length?(e=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?ot(function(t,e){for(var n,r=a(t,o),i=r.length;i--;)t[n=D(t,r[i])]=!(e[n]=r[i])}):function(t){return a(t,0,e)}):a}},pseudos:{not:ot(function(t){var r=[],i=[],s=h(t.replace(q,"$1"));return s[k]?ot(function(t,e,n,r){for(var i,o=s(t,null,r,[]),a=t.length;a--;)(i=o[a])&&(t[a]=!(e[a]=i))}):function(t,e,n){return r[0]=t,s(r,null,n,i),r[0]=null,!i.pop()}}),has:ot(function(e){return function(t){return 0<rt(e,t).length}}),contains:ot(function(e){return e=e.replace(tt,et),function(t){return-1<(t.textContent||t.innerText||o(t)).indexOf(e)}}),lang:ot(function(n){return W.test(n||"")||rt.error("unsupported lang: "+n),n=n.replace(tt,et).toLowerCase(),function(t){var e;do{if(e=C?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ht(function(){return[0]}),last:ht(function(t,e){return[e-1]}),eq:ht(function(t,e,n){return[n<0?n+e:n]}),even:ht(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ht(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ht(function(t,e,n){for(var r=n<0?n+e:n;0<=--r;)t.push(r);return t}),gt:ht(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=ut(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=ct(t);function pt(){}function dt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function gt(s,t,e){var l=t.dir,u=e&&"parentNode"===l,c=r++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||u)return s(t,e,n)}:function(t,e,n){var r,i,o,a=[E,c];if(n){for(;t=t[l];)if((1===t.nodeType||u)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||u){if((r=(i=(o=t[k]||(t[k]={}))[t.uniqueID]||(o[t.uniqueID]={}))[l])&&r[0]===E&&r[1]===c)return a[2]=r[2];if((i[l]=a)[2]=s(t,e,n))return!0}}}function mt(i){return 1<i.length?function(t,e,n){for(var r=i.length;r--;)if(!i[r](t,e,n))return!1;return!0}:i[0]}function yt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function _t(p,d,g,m,y,t){return m&&!m[k]&&(m=_t(m)),y&&!y[k]&&(y=_t(y,t)),ot(function(t,e,n,r){var i,o,a,s=[],l=[],u=e.length,c=t||function(t,e,n){for(var r=0,i=e.length;r<i;r++)rt(t,e[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),h=!p||!t&&d?c:yt(c,s,p,n,r),f=g?y||(t?p:u||m)?[]:e:h;if(g&&g(h,f,n,r),m)for(i=yt(f,l),m(i,[],n,r),o=i.length;o--;)(a=i[o])&&(f[l[o]]=!(h[l[o]]=a));if(t){if(y||p){if(y){for(i=[],o=f.length;o--;)(a=f[o])&&i.push(h[o]=a);y(null,f=[],i,r)}for(o=f.length;o--;)(a=f[o])&&-1<(i=y?D(t,a):s[o])&&(t[i]=!(e[i]=a))}}else f=yt(f===e?f.splice(u,f.length):f),y?y(null,e,f,r):O.apply(e,f)})}function vt(t){for(var i,e,n,r=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],s=o?1:0,l=gt(function(t){return t===i},a,!0),u=gt(function(t){return-1<D(i,t)},a,!0),c=[function(t,e,n){var r=!o&&(n||e!==x)||((i=e).nodeType?l(t,e,n):u(t,e,n));return i=null,r}];s<r;s++)if(e=b.relative[t[s].type])c=[gt(mt(c),e)];else{if((e=b.filter[t[s].type].apply(null,t[s].matches))[k]){for(n=++s;n<r&&!b.relative[t[n].type];n++);return _t(1<s&&mt(c),1<s&&dt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(q,"$1"),e,s<n&&vt(t.slice(s,n)),n<r&&vt(t=t.slice(n)),n<r&&dt(t))}c.push(e)}return mt(c)}return pt.prototype=b.filters=b.pseudos,b.setFilters=new pt,g=rt.tokenize=function(t,e){var n,r,i,o,a,s,l,u=p[t+" "];if(u)return e?0:u.slice(0);for(a=t,s=[],l=b.preFilter;a;){for(o in n&&!(r=U.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=G.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(q," ")}),a=a.slice(n.length)),b.filter)!(r=X[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?rt.error(t):p(t,s).slice(0)},h=rt.compile=function(t,e){var n,m,y,_,v,r,i=[],o=[],a=S[t+" "];if(!a){for(e||(e=g(t)),n=e.length;n--;)(a=vt(e[n]))[k]?i.push(a):o.push(a);(a=S(t,(m=o,_=0<(y=i).length,v=0<m.length,r=function(t,e,n,r,i){var o,a,s,l=0,u="0",c=t&&[],h=[],f=x,p=t||v&&b.find.TAG("*",i),d=E+=null==f?1:Math.random()||.1,g=p.length;for(i&&(x=e===L||e||i);u!==g&&null!=(o=p[u]);u++){if(v&&o){for(a=0,e||o.ownerDocument===L||(w(o),n=!C);s=m[a++];)if(s(o,e||L,n)){r.push(o);break}i&&(E=d)}_&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=u,_&&u!==l){for(a=0;s=y[a++];)s(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=I.call(r));h=yt(h)}O.apply(r,h),i&&!t&&0<h.length&&1<l+y.length&&rt.uniqueSort(r)}return i&&(E=d,x=f),c},_?ot(r):r))).selector=t}return a},m=rt.select=function(t,e,n,r){var i,o,a,s,l,u="function"==typeof t&&t,c=!r&&g(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&d.getById&&9===e.nodeType&&C&&b.relative[o[1].type]){if(!(e=(b.find.ID(a.matches[0].replace(tt,et),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=X.needsContext.test(t)?0:o.length;i--&&(a=o[i],!b.relative[s=a.type]);)if((l=b.find[s])&&(r=l(a.matches[0].replace(tt,et),K.test(o[0].type)&&ft(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&dt(o)))return O.apply(n,r),n;break}}return(u||h(t,c))(r,e,!C,n,!e||K.test(t)&&ft(e.parentNode)||e),n},d.sortStable=k.split("").sort(M).join("")===k,d.detectDuplicates=!!u,w(),d.sortDetached=at(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),at(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||st("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&at(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||st("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),at(function(t){return null==t.getAttribute("disabled")})||st(A,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),rt}(L);C.find=f,C.expr=f.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=f.uniqueSort,C.text=f.getText,C.isXMLDoc=f.isXML,C.contains=f.contains;var p=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&C(t).is(n))break;r.push(t)}return r},_=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},v=C.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,x=/^.[^:#\[\.,]*$/;function w(t,n,r){if(C.isFunction(n))return C.grep(t,function(t,e){return!!n.call(t,e,t)!==r});if(n.nodeType)return C.grep(t,function(t){return t===n!==r});if("string"==typeof n){if(x.test(n))return C.filter(n,t,r);n=C.filter(n,t)}return C.grep(t,function(t){return-1<C.inArray(t,n)!==r})}C.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?C.find.matchesSelector(r,t)?[r]:[]:C.find.matches(t,C.grep(e,function(t){return 1===t.nodeType}))},C.fn.extend({find:function(t){var e,n=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(C(t).filter(function(){for(e=0;e<i;e++)if(C.contains(r[e],this))return!0}));for(e=0;e<i;e++)C.find(t,r[e],n);return(n=this.pushStack(1<i?C.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(w(this,t||[],!1))},not:function(t){return this.pushStack(w(this,t||[],!0))},is:function(t){return!!w(this,"string"==typeof t&&v.test(t)?C(t):t||[],!1).length}});var k,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||k,"string"==typeof t){if(!(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:E.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:d,!0)),b.test(r[1])&&C.isPlainObject(e))for(r in e)C.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}if((i=d.getElementById(r[2]))&&i.parentNode){if(i.id!==r[2])return k.find(t);this.length=1,this[0]=i}return this.context=d,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):C.isFunction(t)?void 0!==n.ready?n.ready(t):t(C):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),C.makeArray(t,this))}).prototype=C.fn,k=C(d);var S=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e,n=C(t,this),r=n.length;return this.filter(function(){for(e=0;e<r;e++)if(C.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=v.test(t)||"string"!=typeof t?C(t,e||this.context):0;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&C.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?C.inArray(this[0],C(t)):C.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(t,e,n){return p(t,"parentNode",n)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(t,e,n){return p(t,"nextSibling",n)},prevUntil:function(t,e,n){return p(t,"previousSibling",n)},siblings:function(t){return _((t.parentNode||{}).firstChild,t)},children:function(t){return _(t.firstChild)},contents:function(t){return C.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:C.merge([],t.childNodes)}},function(r,i){C.fn[r]=function(t,e){var n=C.map(this,i,t);return"Until"!==r.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=C.filter(e,n)),1<this.length&&(M[r]||(n=C.uniqueSort(n)),S.test(r)&&(n=n.reverse())),this.pushStack(n)}});var I,T,O=/\S+/g;function N(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",D),L.removeEventListener("load",D)):(d.detachEvent("onreadystatechange",D),L.detachEvent("onload",D))}function D(){(d.addEventListener||"load"===L.event.type||"complete"===d.readyState)&&(N(),C.ready())}for(T in C.Callbacks=function(r){var t,n;r="string"==typeof r?(t=r,n={},C.each(t.match(O)||[],function(t,e){n[e]=!0}),n):C.extend({},r);var i,e,o,a,s=[],l=[],u=-1,c=function(){for(a=r.once,o=i=!0;l.length;u=-1)for(e=l.shift();++u<s.length;)!1===s[u].apply(e[0],e[1])&&r.stopOnFalse&&(u=s.length,e=!1);r.memory||(e=!1),i=!1,a&&(s=e?[]:"")},h={add:function(){return s&&(e&&!i&&(u=s.length-1,l.push(e)),function n(t){C.each(t,function(t,e){C.isFunction(e)?r.unique&&h.has(e)||s.push(e):e&&e.length&&"string"!==C.type(e)&&n(e)})}(arguments),e&&!i&&c()),this},remove:function(){return C.each(arguments,function(t,e){for(var n;-1<(n=C.inArray(e,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<C.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=e="",this},disabled:function(){return!s},lock:function(){return a=!0,e||h.disable(),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),i||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},C.extend({Deferred:function(t){var o=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var i=arguments;return C.Deferred(function(r){C.each(o,function(t,e){var n=C.isFunction(i[t])&&i[t];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&C.isFunction(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[e[0]+"With"](this===a?r.promise():this,n?[t]:arguments)})}),i=null}).promise()},promise:function(t){return null!=t?C.extend(t,a):a}},s={};return a.pipe=a.then,C.each(o,function(t,e){var n=e[2],r=e[3];a[e[1]]=n.add,r&&n.add(function(){i=r},o[1^t][2].disable,o[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?a:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var i,e,n,r=0,o=c.call(arguments),a=o.length,s=1!==a||t&&C.isFunction(t.promise)?a:0,l=1===s?t:C.Deferred(),u=function(e,n,r){return function(t){n[e]=this,r[e]=1<arguments.length?c.call(arguments):t,r===i?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(1<a)for(i=new Array(a),e=new Array(a),n=new Array(a);r<a;r++)o[r]&&C.isFunction(o[r].promise)?o[r].promise().progress(u(r,e,i)).done(u(r,n,o)).fail(l.reject):--s;return s||l.resolveWith(n,o),l.promise()}}),C.fn.ready=function(t){return C.ready.promise().done(t),this},C.extend({isReady:!1,readyWait:1,holdReady:function(t){t?C.readyWait++:C.ready(!0)},ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0)!==t&&0<--C.readyWait||(I.resolveWith(d,[C]),C.fn.triggerHandler&&(C(d).triggerHandler("ready"),C(d).off("ready")))}}),C.ready.promise=function(t){if(!I)if(I=C.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)L.setTimeout(C.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",D),L.addEventListener("load",D);else{d.attachEvent("onreadystatechange",D),L.attachEvent("onload",D);var n=!1;try{n=null==L.frameElement&&d.documentElement}catch(t){}n&&n.doScroll&&function e(){if(!C.isReady){try{n.doScroll("left")}catch(t){return L.setTimeout(e,50)}N(),C.ready()}}()}return I.promise(t)},C.ready.promise(),C(y))break;y.ownFirst="0"===T,y.inlineBlockNeedsLayout=!1,C(function(){var t,e,n,r;(n=d.getElementsByTagName("body")[0])&&n.style&&(e=d.createElement("div"),(r=d.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(e),void 0!==e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",y.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(r))}),function(){var t=d.createElement("div");y.deleteExpando=!0;try{delete t.test}catch(t){y.deleteExpando=!1}t=null}();var A,R=function(t){var e=C.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/([A-Z])/g;function B(t,e,n){if(void 0===n&&1===t.nodeType){var r="data-"+e.replace(j,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:F.test(n)?C.parseJSON(n):n)}catch(t){}C.data(t,e,n)}else n=void 0}return n}function z(t){var e;for(e in t)if(("data"!==e||!C.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function q(t,e,n,r){if(R(t)){var i,o,a=C.expando,s=t.nodeType,l=s?C.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=h.pop()||C.guid++:a),l[u]||(l[u]=s?{}:{toJSON:C.noop}),"object"!=typeof e&&"function"!=typeof e||(r?l[u]=C.extend(l[u],e):l[u].data=C.extend(l[u].data,e)),o=l[u],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[C.camelCase(e)]=n),"string"==typeof e?null==(i=o[e])&&(i=o[C.camelCase(e)]):i=o,i}}function U(t,e,n){if(R(t)){var r,i,o=t.nodeType,a=o?C.cache:t,s=o?t[C.expando]:C.expando;if(a[s]){if(e&&(r=n?a[s]:a[s].data)){i=(e=C.isArray(e)?e.concat(C.map(e,C.camelCase)):e in r?[e]:(e=C.camelCase(e))in r?[e]:e.split(" ")).length;for(;i--;)delete r[e[i]];if(n?!z(r):!C.isEmptyObject(r))return}(n||(delete a[s].data,z(a[s])))&&(o?C.cleanData([t],!0):y.deleteExpando||a!=a.window?delete a[s]:a[s]=void 0)}}}C.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?C.cache[t[C.expando]]:t[C.expando])&&!z(t)},data:function(t,e,n){return q(t,e,n)},removeData:function(t,e){return U(t,e)},_data:function(t,e,n){return q(t,e,n,!0)},_removeData:function(t,e){return U(t,e,!0)}}),C.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=C.data(o),1===o.nodeType&&!C._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&B(o,r=C.camelCase(r.slice(5)),i[r]);C._data(o,"parsedAttrs",!0)}return i}return"object"==typeof t?this.each(function(){C.data(this,t)}):1<arguments.length?this.each(function(){C.data(this,t,e)}):o?B(o,t,C.data(o,t)):void 0},removeData:function(t){return this.each(function(){C.removeData(this,t)})}}),C.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=C._data(t,e),n&&(!r||C.isArray(n)?r=C._data(t,e,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=C.queue(t,e),r=n.length,i=n.shift(),o=C._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){C.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return C._data(t,n)||C._data(t,n,{empty:C.Callbacks("once memory").add(function(){C._removeData(t,e+"queue"),C._removeData(t,n)})})}}),C.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?C.queue(this[0],e):void 0===n?this:this.each(function(){var t=C.queue(this,e,n);C._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&C.dequeue(this,e)})},dequeue:function(t){return this.each(function(){C.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=C.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=C._data(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}}),y.shrinkWrapBlocks=function(){return null!=A?A:(A=!1,(e=d.getElementsByTagName("body")[0])&&e.style?(t=d.createElement("div"),(n=d.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(d.createElement("div")).style.width="5px",A=3!==t.offsetWidth),e.removeChild(n),A):void 0);var t,e,n};var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),H=["Top","Right","Bottom","Left"],W=function(t,e){return t=e||t,"none"===C.css(t,"display")||!C.contains(t.ownerDocument,t)};function X(t,e,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return C.css(t,e,"")},l=s(),u=n&&n[3]||(C.cssNumber[e]?"":"px"),c=(C.cssNumber[e]||"px"!==u&&+l)&&V.exec(C.css(t,e));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=o=o||".5",C.style(t,e,c+u),o!==(o=s()/l)&&1!==o&&--a;);return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var Y,$,Z,Q=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===C.type(n))for(s in i=!0,n)Q(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,C.isFunction(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(C(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},K=/^(?:checkbox|radio)$/i,J=/<([\w:-]+)/,tt=/^$|\/(?:java|ecma)script/i,et=/^\s+/,nt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function rt(t){var e=nt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}Y=d.createElement("div"),$=d.createDocumentFragment(),Z=d.createElement("input"),Y.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",y.leadingWhitespace=3===Y.firstChild.nodeType,y.tbody=!Y.getElementsByTagName("tbody").length,y.htmlSerialize=!!Y.getElementsByTagName("link").length,y.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,Z.type="checkbox",Z.checked=!0,$.appendChild(Z),y.appendChecked=Z.checked,Y.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!Y.cloneNode(!0).lastChild.defaultValue,$.appendChild(Y),(Z=d.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),Y.appendChild(Z),y.checkClone=Y.cloneNode(!0).cloneNode(!0).lastChild.checked,y.noCloneEvent=!!Y.addEventListener,Y[C.expando]=1,y.attributes=!Y.getAttribute(C.expando);var it={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};function ot(t,e){var n,r,i=0,o=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(r=n[i]);i++)!e||C.nodeName(r,e)?o.push(r):C.merge(o,ot(r,e));return void 0===e||e&&C.nodeName(t,e)?C.merge([t],o):o}function at(t,e){for(var n,r=0;null!=(n=t[r]);r++)C._data(n,"globalEval",!e||C._data(e[r],"globalEval"))}it.optgroup=it.option,it.tbody=it.tfoot=it.colgroup=it.caption=it.thead,it.th=it.td;var st=/<|&#?\w+;/,lt=/<tbody/i;function ut(t){K.test(t.type)&&(t.defaultChecked=t.checked)}function ct(t,e,n,r,i){for(var o,a,s,l,u,c,h,f=t.length,p=rt(e),d=[],g=0;g<f;g++)if((a=t[g])||0===a)if("object"===C.type(a))C.merge(d,a.nodeType?[a]:a);else if(st.test(a)){for(l=l||p.appendChild(e.createElement("div")),u=(J.exec(a)||["",""])[1].toLowerCase(),h=it[u]||it._default,l.innerHTML=h[1]+C.htmlPrefilter(a)+h[2],o=h[0];o--;)l=l.lastChild;if(!y.leadingWhitespace&&et.test(a)&&d.push(e.createTextNode(et.exec(a)[0])),!y.tbody)for(o=(a="table"!==u||lt.test(a)?"<table>"!==h[1]||lt.test(a)?0:l:l.firstChild)&&a.childNodes.length;o--;)C.nodeName(c=a.childNodes[o],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(C.merge(d,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=p.lastChild}else d.push(e.createTextNode(a));for(l&&p.removeChild(l),y.appendChecked||C.grep(ot(d,"input"),ut),g=0;a=d[g++];)if(r&&-1<C.inArray(a,r))i&&i.push(a);else if(s=C.contains(a.ownerDocument,a),l=ot(p.appendChild(a),"script"),s&&at(l),n)for(o=0;a=l[o++];)tt.test(a.type||"")&&n.push(a);return l=null,p}!function(){var t,e,n=d.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(y[t]=e in L)||(n.setAttribute(e,"t"),y[t]=!1===n.attributes[e].expando);n=null}();var ht=/^(?:input|select|textarea)$/i,ft=/^key/,pt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dt=/^(?:focusinfocus|focusoutblur)$/,gt=/^([^.]*)(?:\.(.+)|)/;function mt(){return!0}function yt(){return!1}function _t(){try{return d.activeElement}catch(t){}}function vt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)vt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=yt;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return C().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),t.each(function(){C.event.add(this,e,i,r,n)})}C.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,h,f,p,d,g,m=C._data(t);if(m){for(n.handler&&(n=(l=n).handler,i=l.selector),n.guid||(n.guid=C.guid++),(a=m.events)||(a=m.events={}),(c=m.handle)||((c=m.handle=function(t){return void 0===C||t&&C.event.triggered===t.type?void 0:C.event.dispatch.apply(c.elem,arguments)}).elem=t),s=(e=(e||"").match(O)||[""]).length;s--;)p=g=(o=gt.exec(e[s])||[])[1],d=(o[2]||"").split(".").sort(),p&&(u=C.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=C.event.special[p]||{},h=C.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:d.join(".")},l),(f=a[p])||((f=a[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,d,c)||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),C.event.global[p]=!0);t=null}},remove:function(t,e,n,r,i){var o,a,s,l,u,c,h,f,p,d,g,m=C.hasData(t)&&C._data(t);if(m&&(c=m.events)){for(u=(e=(e||"").match(O)||[""]).length;u--;)if(p=g=(s=gt.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),p){for(h=C.event.special[p]||{},f=c[p=(r?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,h.remove&&h.remove.call(t,a));l&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,d,m.handle)||C.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)C.event.remove(t,p+e[u],n,r,!0);C.isEmptyObject(c)&&(delete m.handle,C._removeData(t,"events"))}},trigger:function(t,e,n,r){var i,o,a,s,l,u,c,h=[n||d],f=m.call(t,"type")?t.type:t,p=m.call(t,"namespace")?t.namespace.split("."):[];if(a=u=n=n||d,3!==n.nodeType&&8!==n.nodeType&&!dt.test(f+C.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),o=f.indexOf(":")<0&&"on"+f,(t=t[C.expando]?t:new C.Event(f,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:C.makeArray(e,[t]),l=C.event.special[f]||{},r||!l.trigger||!1!==l.trigger.apply(n,e))){if(!r&&!l.noBubble&&!C.isWindow(n)){for(s=l.delegateType||f,dt.test(s+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(n.ownerDocument||d)&&h.push(u.defaultView||u.parentWindow||L)}for(c=0;(a=h[c++])&&!t.isPropagationStopped();)t.type=1<c?s:l.bindType||f,(i=(C._data(a,"events")||{})[t.type]&&C._data(a,"handle"))&&i.apply(a,e),(i=o&&a[o])&&i.apply&&R(a)&&(t.result=i.apply(a,e),!1===t.result&&t.preventDefault());if(t.type=f,!r&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(h.pop(),e))&&R(n)&&o&&n[f]&&!C.isWindow(n)){(u=n[o])&&(n[o]=null),C.event.triggered=f;try{n[f]()}catch(t){}C.event.triggered=void 0,u&&(n[o]=u)}return t.result}},dispatch:function(t){t=C.event.fix(t);var e,n,r,i,o,a,s=c.call(arguments),l=(C._data(this,"events")||{})[t.type]||[],u=C.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=C.event.handlers.call(this,t,l),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(r=[],n=0;n<s;n++)void 0===r[i=(o=e[n]).selector+" "]&&(r[i]=o.needsContext?-1<C(i,this).index(l):C.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[C.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=pt.test(i)?this.mouseHooks:ft.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new C.Event(o),e=r.length;e--;)t[n=r[e]]=o[n];return t.target||(t.target=o.srcElement||d),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=(r=t.target.ownerDocument||d).documentElement,n=r.body,t.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_t()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===_t()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(C.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return C.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var r=C.extend(new C.Event,n,{type:t,isSimulated:!0});C.event.trigger(r,null,e),r.isDefaultPrevented()&&n.preventDefault()}},C.removeEvent=d.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var r="on"+e;t.detachEvent&&(void 0===t[r]&&(t[r]=null),t.detachEvent(r,n))},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?mt:yt):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||C.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:yt,isPropagationStopped:yt,isImmediatePropagationStopped:yt,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=mt,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=mt,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=mt,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){C.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||C.contains(this,n))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=i),e}}}),y.submit||(C.event.special.submit={setup:function(){if(C.nodeName(this,"form"))return!1;C.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=C.nodeName(e,"input")||C.nodeName(e,"button")?C.prop(e,"form"):void 0;n&&!C._data(n,"submit")&&(C.event.add(n,"submit._submit",function(t){t._submitBubble=!0}),C._data(n,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&C.event.simulate("submit",this.parentNode,t))},teardown:function(){if(C.nodeName(this,"form"))return!1;C.event.remove(this,"._submit")}}),y.change||(C.event.special.change={setup:function(){if(ht.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(C.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),C.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),C.event.simulate("change",this,t)})),!1;C.event.add(this,"beforeactivate._change",function(t){var e=t.target;ht.test(e.nodeName)&&!C._data(e,"change")&&(C.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||C.event.simulate("change",this.parentNode,t)}),C._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return C.event.remove(this,"._change"),!ht.test(this.nodeName)}}),y.focusin||C.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(t){C.event.simulate(r,t.target,C.event.fix(t))};C.event.special[r]={setup:function(){var t=this.ownerDocument||this,e=C._data(t,r);e||t.addEventListener(n,i,!0),C._data(t,r,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=C._data(t,r)-1;e?C._data(t,r,e):(t.removeEventListener(n,i,!0),C._removeData(t,r))}}}),C.fn.extend({on:function(t,e,n,r){return vt(this,t,e,n,r)},one:function(t,e,n,r){return vt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,C(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=yt),this.each(function(){C.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return C.event.trigger(t,e,n,!0)}});var bt=/ jQuery\d+="(?:null|\d+)"/g,xt=new RegExp("<(?:"+nt+")[\\s/>]","i"),wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Lt=/<script|<style|<link/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^true\/(.*)/,Et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,St=rt(d).appendChild(d.createElement("div"));function Mt(t,e){return C.nodeName(t,"table")&&C.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function Pt(t){return t.type=(null!==C.find.attr(t,"type"))+"/"+t.type,t}function It(t){var e=kt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function Tt(t,e){if(1===e.nodeType&&C.hasData(t)){var n,r,i,o=C._data(t),a=C._data(e,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)C.event.add(e,n,s[n][r]);a.data&&(a.data=C.extend({},a.data))}}function Ot(t,e){var n,r,i;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!y.noCloneEvent&&e[C.expando]){for(r in(i=C._data(e)).events)C.removeEvent(e,r,i.handle);e.removeAttribute(C.expando)}"script"===n&&e.text!==t.text?(Pt(e).text=t.text,It(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),y.html5Clone&&t.innerHTML&&!C.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&K.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function Nt(n,r,i,o){r=g.apply([],r);var t,e,a,s,l,u,c=0,h=n.length,f=h-1,p=r[0],d=C.isFunction(p);if(d||1<h&&"string"==typeof p&&!y.checkClone&&Ct.test(p))return n.each(function(t){var e=n.eq(t);d&&(r[0]=p.call(this,t,e.html())),Nt(e,r,i,o)});if(h&&(t=(u=ct(r,n[0].ownerDocument,!1,n,o)).firstChild,1===u.childNodes.length&&(u=t),t||o)){for(a=(s=C.map(ot(u,"script"),Pt)).length;c<h;c++)e=u,c!==f&&(e=C.clone(e,!0,!0),a&&C.merge(s,ot(e,"script"))),i.call(n[c],e,c);if(a)for(l=s[s.length-1].ownerDocument,C.map(s,It),c=0;c<a;c++)e=s[c],tt.test(e.type||"")&&!C._data(e,"globalEval")&&C.contains(l,e)&&(e.src?C._evalUrl&&C._evalUrl(e.src):C.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Et,"")));u=t=null}return n}function Dt(t,e,n){for(var r,i=e?C.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(ot(r)),r.parentNode&&(n&&C.contains(r.ownerDocument,r)&&at(ot(r,"script")),r.parentNode.removeChild(r));return t}C.extend({htmlPrefilter:function(t){return t.replace(wt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,l=C.contains(t.ownerDocument,t);if(y.html5Clone||C.isXMLDoc(t)||!xt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(St.innerHTML=t.outerHTML,St.removeChild(o=St.firstChild)),!(y.noCloneEvent&&y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(r=ot(o),s=ot(t),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(e)if(n)for(s=s||ot(t),r=r||ot(o),a=0;null!=(i=s[a]);a++)Tt(i,r[a]);else Tt(t,o);return 0<(r=ot(o,"script")).length&&at(r,!l&&ot(t,"script")),r=s=i=null,o},cleanData:function(t,e){for(var n,r,i,o,a=0,s=C.expando,l=C.cache,u=y.attributes,c=C.event.special;null!=(n=t[a]);a++)if((e||R(n))&&(o=(i=n[s])&&l[i])){if(o.events)for(r in o.events)c[r]?C.event.remove(n,r):C.removeEvent(n,r,o.handle);l[i]&&(delete l[i],u||void 0===n.removeAttribute?n[s]=void 0:n.removeAttribute(s),h.push(i))}}}),C.fn.extend({domManip:Nt,detach:function(t){return Dt(this,t,!0)},remove:function(t){return Dt(this,t)},text:function(t){return Q(this,function(t){return void 0===t?C.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(t))},null,t,arguments.length)},append:function(){return Nt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)})},prepend:function(){return Nt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&C.cleanData(ot(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&C.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return C.clone(this,t,e)})},html:function(t){return Q(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(bt,""):void 0;if("string"==typeof t&&!Lt.test(t)&&(y.htmlSerialize||!xt.test(t))&&(y.leadingWhitespace||!et.test(t))&&!it[(J.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(C.cleanData(ot(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Nt(this,arguments,function(t){var e=this.parentNode;C.inArray(this,n)<0&&(C.cleanData(ot(this)),e&&e.replaceChild(t,this))},n)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){C.fn[t]=function(t){for(var e,n=0,r=[],i=C(t),o=i.length-1;n<=o;n++)e=n===o?this:this.clone(!0),C(i[n])[a](e),s.apply(r,e.get());return this.pushStack(r)}});var At,Rt={HTML:"block",BODY:"block"};function Ft(t,e){var n=C(e.createElement(t)).appendTo(e.body),r=C.css(n[0],"display");return n.detach(),r}function jt(t){var e=d,n=Rt[t];return n||("none"!==(n=Ft(t,e))&&n||((e=((At=(At||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||At[0].contentDocument).document).write(),e.close(),n=Ft(t,e),At.detach()),Rt[t]=n),n}var Bt=/^margin/,zt=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),qt=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i},Ut=d.documentElement;!function(){var r,i,o,a,s,l,u=d.createElement("div"),c=d.createElement("div");function t(){var t,e,n=d.documentElement;n.appendChild(u),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r=o=l=!1,i=s=!0,L.getComputedStyle&&(e=L.getComputedStyle(c),r="1%"!==(e||{}).top,l="2px"===(e||{}).marginLeft,o="4px"===(e||{width:"4px"}).width,c.style.marginRight="50%",i="4px"===(e||{marginRight:"4px"}).marginRight,(t=c.appendChild(d.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",c.style.width="1px",s=!parseFloat((L.getComputedStyle(t)||{}).marginRight),c.removeChild(t)),c.style.display="none",(a=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(t=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",a=0===t[0].offsetHeight)),n.removeChild(u)}c.style&&(c.style.cssText="float:left;opacity:.5",y.opacity="0.5"===c.style.opacity,y.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===c.style.backgroundClip,(u=d.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",u.appendChild(c),y.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,C.extend(y,{reliableHiddenOffsets:function(){return null==r&&t(),a},boxSizingReliable:function(){return null==r&&t(),o},pixelMarginRight:function(){return null==r&&t(),i},pixelPosition:function(){return null==r&&t(),r},reliableMarginRight:function(){return null==r&&t(),s},reliableMarginLeft:function(){return null==r&&t(),l}}))}();var Gt,Vt,Ht=/^(top|right|bottom|left)$/;function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}L.getComputedStyle?(Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=L),e.getComputedStyle(t)},Vt=function(t,e,n){var r,i,o,a,s=t.style;return""!==(a=(n=n||Gt(t))?n.getPropertyValue(e)||n[e]:void 0)&&void 0!==a||C.contains(t.ownerDocument,t)||(a=C.style(t,e)),n&&!y.pixelMarginRight()&&zt.test(a)&&Bt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0===a?a:a+""}):Ut.currentStyle&&(Gt=function(t){return t.currentStyle},Vt=function(t,e,n){var r,i,o,a,s=t.style;return null==(a=(n=n||Gt(t))?n[e]:void 0)&&s&&s[e]&&(a=s[e]),zt.test(a)&&!Ht.test(e)&&(r=s.left,(o=(i=t.runtimeStyle)&&i.left)&&(i.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"});var Xt=/alpha\([^)]*\)/i,Yt=/opacity\s*=\s*([^)]*)/i,$t=/^(none|table(?!-c[ea]).+)/,Zt=new RegExp("^("+G+")(.*)$","i"),Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","O","Moz","ms"],te=d.createElement("div").style;function ee(t){if(t in te)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=Jt.length;n--;)if((t=Jt[n]+e)in te)return t}function ne(t,e){for(var n,r,i,o=[],a=0,s=t.length;a<s;a++)(r=t[a]).style&&(o[a]=C._data(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&W(r)&&(o[a]=C._data(r,"olddisplay",jt(r.nodeName)))):(i=W(r),(n&&"none"!==n||!i)&&C._data(r,"olddisplay",i?n:C.css(r,"display"))));for(a=0;a<s;a++)(r=t[a]).style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function re(t,e,n){var r=Zt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function ie(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=C.css(t,n+H[o],!0,i)),r?("content"===n&&(a-=C.css(t,"padding"+H[o],!0,i)),"margin"!==n&&(a-=C.css(t,"border"+H[o]+"Width",!0,i))):(a+=C.css(t,"padding"+H[o],!0,i),"padding"!==n&&(a+=C.css(t,"border"+H[o]+"Width",!0,i)));return a}function oe(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Gt(t),a=y.boxSizing&&"border-box"===C.css(t,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Vt(t,e,o))<0||null==i)&&(i=t.style[e]),zt.test(i))return i;r=a&&(y.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+ie(t,e,n||(a?"border":"content"),r,o)+"px"}function ae(t,e,n,r,i){return new ae.prototype.init(t,e,n,r,i)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Vt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:y.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=C.camelCase(e),l=t.style;if(e=C.cssProps[s]||(C.cssProps[s]=ee(s)||s),a=C.cssHooks[e]||C.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];if("string"===(o=typeof n)&&(i=V.exec(n))&&i[1]&&(n=X(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(C.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,r)))))try{l[e]=n}catch(t){}}},css:function(t,e,n,r){var i,o,a,s=C.camelCase(e);return e=C.cssProps[s]||(C.cssProps[s]=ee(s)||s),(a=C.cssHooks[e]||C.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=Vt(t,e,r)),"normal"===o&&e in Kt&&(o=Kt[e]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),C.each(["height","width"],function(t,i){C.cssHooks[i]={get:function(t,e,n){if(e)return $t.test(C.css(t,"display"))&&0===t.offsetWidth?qt(t,Qt,function(){return oe(t,i,n)}):oe(t,i,n)},set:function(t,e,n){var r=n&&Gt(t);return re(0,e,n?ie(t,i,n,y.boxSizing&&"border-box"===C.css(t,"boxSizing",!1,r),r):0)}}}),y.opacity||(C.cssHooks.opacity={get:function(t,e){return Yt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,r=t.currentStyle,i=C.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=r&&r.filter||n.filter||"";((n.zoom=1)<=e||""===e)&&""===C.trim(o.replace(Xt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||r&&!r.filter)||(n.filter=Xt.test(o)?o.replace(Xt,i):o+" "+i)}}),C.cssHooks.marginRight=Wt(y.reliableMarginRight,function(t,e){if(e)return qt(t,{display:"inline-block"},Vt,[t,"marginRight"])}),C.cssHooks.marginLeft=Wt(y.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Vt(t,"marginLeft"))||(C.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(i,o){C.cssHooks[i+o]={expand:function(t){for(var e=0,n={},r="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+H[e]+o]=r[e]||r[e-2]||r[0];return n}},Bt.test(i)||(C.cssHooks[i+o].set=re)}),C.fn.extend({css:function(t,e){return Q(this,function(t,e,n){var r,i,o={},a=0;if(C.isArray(e)){for(r=Gt(t),i=e.length;a<i;a++)o[e[a]]=C.css(t,e[a],!1,r);return o}return void 0!==n?C.style(t,e,n):C.css(t,e)},t,e,1<arguments.length)},show:function(){return ne(this,!0)},hide:function(){return ne(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){W(this)?C(this).show():C(this).hide()})}}),((C.Tween=ae).prototype={constructor:ae,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var t=ae.propHooks[this.prop];return t&&t.get?t.get(this):ae.propHooks._default.get(this)},run:function(t){var e,n=ae.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ae.propHooks._default.set(this),this}}).init.prototype=ae.prototype,(ae.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[C.cssProps[t.prop]]&&!C.cssHooks[t.prop]?t.elem[t.prop]=t.now:C.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ae.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},C.fx=ae.prototype.init,C.fx.step={};var se,le,ue,ce,he,fe,pe,de=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function me(){return L.setTimeout(function(){se=void 0}),se=C.now()}function ye(t,e){var n,r={height:t},i=0;for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=H[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function _e(t,e,n){for(var r,i=(ve.tweeners[e]||[]).concat(ve.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function ve(o,t,e){var n,a,r=0,i=ve.prefilters.length,s=C.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=se||me(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return s.notifyWith(o,[u,n,e]),n<1&&i?e:(s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},e),originalProperties:t,originalOptions:e,startTime:se||me(),duration:e.duration,tweens:[],createTween:function(t,e){var n=C.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,t])):s.rejectWith(o,[u,t]),this}}),c=u.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=C.camelCase(n)],o=t[n],C.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=C.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);r<i;r++)if(n=ve.prefilters[r].call(u,o,c,u.opts))return C.isFunction(n.stop)&&(C._queueHooks(u.elem,u.opts.queue).stop=C.proxy(n.stop,n)),n;return C.map(c,_e,u),C.isFunction(u.opts.start)&&u.opts.start.call(o,u),C.fx.timer(C.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}C.Animation=C.extend(ve,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return X(n.elem,t,V.exec(e),n),n}]},tweener:function(t,e){C.isFunction(t)?(e=t,t=["*"]):t=t.match(O);for(var n,r=0,i=t.length;r<i;r++)n=t[r],ve.tweeners[n]=ve.tweeners[n]||[],ve.tweeners[n].unshift(e)},prefilters:[function(e,t,n){var r,i,o,a,s,l,u,c=this,h={},f=e.style,p=e.nodeType&&W(e),d=C._data(e,"fxshow");for(r in n.queue||(null==(s=C._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,C.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(u=C.css(e,"display"))?C._data(e,"olddisplay")||jt(e.nodeName):u)&&"none"===C.css(e,"float")&&(y.inlineBlockNeedsLayout&&"inline"!==jt(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",y.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),t)if(i=t[r],de.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;p=!0}h[r]=d&&d[r]||C.style(e,r)}else u=void 0;if(C.isEmptyObject(h))"inline"===("none"===u?jt(e.nodeName):u)&&(f.display=u);else for(r in d?"hidden"in d&&(p=d.hidden):d=C._data(e,"fxshow",{}),o&&(d.hidden=!p),p?C(e).show():c.done(function(){C(e).hide()}),c.done(function(){var t;for(t in C._removeData(e,"fxshow"),h)C.style(e,t,h[t])}),h)a=_e(p?d[r]:0,r,c),r in d||(d[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],prefilter:function(t,e){e?ve.prefilters.unshift(t):ve.prefilters.push(t)}}),C.speed=function(t,e,n){var r=t&&"object"==typeof t?C.extend({},t):{complete:n||!n&&e||C.isFunction(t)&&t,duration:t,easing:n&&e||e&&!C.isFunction(e)&&e};return r.duration=C.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in C.fx.speeds?C.fx.speeds[r.duration]:C.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){C.isFunction(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(t,e,n,r){return this.filter(W).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(e,t,n,r){var i=C.isEmptyObject(e),o=C.speed(t,n,r),a=function(){var t=ve(this,C.extend({},e),o);(i||C._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof i&&(o=t,t=i,i=void 0),t&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=C.timers,r=C._data(this);if(e)r[e]&&r[e].stop&&a(r[e]);else for(e in r)r[e]&&r[e].stop&&ge.test(e)&&a(r[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||C.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=C._data(this),n=e[a+"queue"],r=e[a+"queueHooks"],i=C.timers,o=n?n.length:0;for(e.finish=!0,C.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===a&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),C.each(["toggle","show","hide"],function(t,r){var i=C.fn[r];C.fn[r]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ye(r,!0),t,e,n)}}),C.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){C.fn[t]=function(t,e,n){return this.animate(r,t,e,n)}}),C.timers=[],C.fx.tick=function(){var t,e=C.timers,n=0;for(se=C.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||C.fx.stop(),se=void 0},C.fx.timer=function(t){C.timers.push(t),t()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){le||(le=L.setInterval(C.fx.tick,C.fx.interval))},C.fx.stop=function(){L.clearInterval(le),le=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(r,t){return r=C.fx&&C.fx.speeds[r]||r,t=t||"fx",this.queue(t,function(t,e){var n=L.setTimeout(t,r);e.stop=function(){L.clearTimeout(n)}})},ce=d.createElement("input"),he=d.createElement("div"),fe=d.createElement("select"),pe=fe.appendChild(d.createElement("option")),(he=d.createElement("div")).setAttribute("className","t"),he.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ue=he.getElementsByTagName("a")[0],ce.setAttribute("type","checkbox"),he.appendChild(ce),(ue=he.getElementsByTagName("a")[0]).style.cssText="top:1px",y.getSetAttribute="t"!==he.className,y.style=/top/.test(ue.getAttribute("style")),y.hrefNormalized="/a"===ue.getAttribute("href"),y.checkOn=!!ce.value,y.optSelected=pe.selected,y.enctype=!!d.createElement("form").enctype,fe.disabled=!0,y.optDisabled=!pe.disabled,(ce=d.createElement("input")).setAttribute("value",""),y.input=""===ce.getAttribute("value"),ce.value="t",ce.setAttribute("type","radio"),y.radioValue="t"===ce.value;var be=/\r/g,xe=/[\x20\t\r\n\f]+/g;C.fn.extend({val:function(n){var r,t,i,e=this[0];return arguments.length?(i=C.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=i?n.call(this,t,C(this).val()):n)?e="":"number"==typeof e?e+="":C.isArray(e)&&(e=C.map(e,function(t){return null==t?"":t+""})),(r=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value")||(this.value=e))})):e?(r=C.valHooks[e.type]||C.valHooks[e.nodeName.toLowerCase()])&&"get"in r&&void 0!==(t=r.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(be,""):null==t?"":t:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:C.trim(C.text(t)).replace(xe," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(y.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!C.nodeName(n.parentNode,"optgroup"))){if(e=C(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=C.makeArray(e),a=i.length;a--;)if(r=i[a],-1<C.inArray(C.valHooks.option.get(r),o))try{r.selected=n=!0}catch(t){r.scrollHeight}else r.selected=!1;return n||(t.selectedIndex=-1),i}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(t,e){if(C.isArray(e))return t.checked=-1<C.inArray(C(t).val(),e)}},y.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we,Le,Ce=C.expr.attrHandle,ke=/^(?:checked|selected)$/i,Ee=y.getSetAttribute,Se=y.input;C.fn.extend({attr:function(t,e){return Q(this,C.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){C.removeAttr(this,t)})}}),C.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?C.prop(t,e,n):(1===o&&C.isXMLDoc(t)||(e=e.toLowerCase(),i=C.attrHooks[e]||(C.expr.match.bool.test(e)?Le:we)),void 0!==n?null===n?void C.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=C.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!y.radioValue&&"radio"===e&&C.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(O);if(o&&1===t.nodeType)for(;n=o[i++];)r=C.propFix[n]||n,C.expr.match.bool.test(n)?Se&&Ee||!ke.test(n)?t[r]=!1:t[C.camelCase("default-"+n)]=t[r]=!1:C.attr(t,n,""),t.removeAttribute(Ee?n:r)}}),Le={set:function(t,e,n){return!1===e?C.removeAttr(t,n):Se&&Ee||!ke.test(n)?t.setAttribute(!Ee&&C.propFix[n]||n,n):t[C.camelCase("default-"+n)]=t[n]=!0,n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(t,e){var o=Ce[e]||C.find.attr;Se&&Ee||!ke.test(e)?Ce[e]=function(t,e,n){var r,i;return n||(i=Ce[e],Ce[e]=r,r=null!=o(t,e,n)?e.toLowerCase():null,Ce[e]=i),r}:Ce[e]=function(t,e,n){if(!n)return t[C.camelCase("default-"+e)]?e.toLowerCase():null}}),Se&&Ee||(C.attrHooks.value={set:function(t,e,n){if(!C.nodeName(t,"input"))return we&&we.set(t,e,n);t.defaultValue=e}}),Ee||(we={set:function(t,e,n){var r=t.getAttributeNode(n);if(r||t.setAttributeNode(r=t.ownerDocument.createAttribute(n)),r.value=e+="","value"===n||e===t.getAttribute(n))return e}},Ce.id=Ce.name=Ce.coords=function(t,e,n){var r;if(!n)return(r=t.getAttributeNode(e))&&""!==r.value?r.value:null},C.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:we.set},C.attrHooks.contenteditable={set:function(t,e,n){we.set(t,""!==e&&e,n)}},C.each(["width","height"],function(t,n){C.attrHooks[n]={set:function(t,e){if(""===e)return t.setAttribute(n,"auto"),e}}})),y.style||(C.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Me=/^(?:input|select|textarea|button|object)$/i,Pe=/^(?:a|area)$/i;C.fn.extend({prop:function(t,e){return Q(this,C.prop,t,e,1<arguments.length)},removeProp:function(t){return t=C.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),C.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(t)||(e=C.propFix[e]||e,i=C.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):Me.test(t.nodeName)||Pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.hrefNormalized||C.each(["href","src"],function(t,e){C.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),y.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),y.enctype||(C.propFix.enctype="encoding");var Ie=/[\t\r\n\f]/g;function Te(t){return C.attr(t,"class")||""}C.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(C.isFunction(e))return this.each(function(t){C(this).addClass(e.call(this,t,Te(this)))});if("string"==typeof e&&e)for(t=e.match(O)||[];n=this[l++];)if(i=Te(n),r=1===n.nodeType&&(" "+i+" ").replace(Ie," ")){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=C.trim(r))&&C.attr(n,"class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(C.isFunction(e))return this.each(function(t){C(this).removeClass(e.call(this,t,Te(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(O)||[];n=this[l++];)if(i=Te(n),r=1===n.nodeType&&(" "+i+" ").replace(Ie," ")){for(a=0;o=t[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=C.trim(r))&&C.attr(n,"class",s)}return this},toggleClass:function(i,e){var o=typeof i;return"boolean"==typeof e&&"string"===o?e?this.addClass(i):this.removeClass(i):C.isFunction(i)?this.each(function(t){C(this).toggleClass(i.call(this,t,Te(this),e),e)}):this.each(function(){var t,e,n,r;if("string"===o)for(e=0,n=C(this),r=i.match(O)||[];t=r[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!==o||((t=Te(this))&&C._data(this,"__className__",t),C.attr(this,"class",t||!1===i?"":C._data(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+Te(n)+" ").replace(Ie," ").indexOf(e))return!0;return!1}}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){C.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),C.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var Oe=L.location,Ne=C.now(),De=/\?/,Ae=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;C.parseJSON=function(t){if(L.JSON&&L.JSON.parse)return L.JSON.parse(t+"");var i,o=null,e=C.trim(t+"");return e&&!C.trim(e.replace(Ae,function(t,e,n,r){return i&&e&&(o=0),0===o?t:(i=n||e,o+=!r-!n,"")}))?Function("return "+e)():C.error("Invalid JSON: "+t)},C.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{L.DOMParser?e=(new L.DOMParser).parseFromString(t,"text/xml"):((e=new L.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+t),e};var Re=/#.*$/,Fe=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Be=/^(?:GET|HEAD)$/,ze=/^\/\//,qe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ue={},Ge={},Ve="*/".concat("*"),He=Oe.href,We=qe.exec(He.toLowerCase())||[];function Xe(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,r=0,i=t.toLowerCase().match(O)||[];if(C.isFunction(e))for(;n=i[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function Ye(e,i,o,a){var s={},l=e===Ge;function u(t){var r;return s[t]=!0,C.each(e[t]||[],function(t,e){var n=e(i,o,a);return"string"!=typeof n||l||s[n]?l?!(r=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),r}return u(i.dataTypes[0])||!s["*"]&&u("*")}function $e(t,e){var n,r,i=C.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&C.extend(!0,t,n),t}C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:He,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(We[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$e($e(t,C.ajaxSettings),e):$e(C.ajaxSettings,t)},ajaxPrefilter:Xe(Ue),ajaxTransport:Xe(Ge),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,c,h,f,p,d,i,g=C.ajaxSetup({},e),m=g.context||g,y=g.context&&(m.nodeType||m.jquery)?C(m):C.event,_=C.Deferred(),v=C.Callbacks("once memory"),b=g.statusCode||{},o={},a={},x=0,s="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!i)for(i={};e=je.exec(h);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?h:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=a[n]=a[n]||t,o[t]=e),this},overrideMimeType:function(t){return x||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(x<2)for(e in t)b[e]=[b[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||s;return d&&d.abort(e),l(0,e),this}};if(_.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,g.url=((t||g.url||He)+"").replace(Re,"").replace(ze,We[1]+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=C.trim(g.dataType||"*").toLowerCase().match(O)||[""],null==g.crossDomain&&(n=qe.exec(g.url.toLowerCase()),g.crossDomain=!(!n||n[1]===We[1]&&n[2]===We[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(We[3]||("http:"===We[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=C.param(g.data,g.traditional)),Ye(Ue,g,e,w),2===x)return w;for(r in(p=C.event&&g.global)&&0==C.active++&&C.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Be.test(g.type),c=g.url,g.hasContent||(g.data&&(c=g.url+=(De.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=Fe.test(c)?c.replace(Fe,"$1_="+Ne++):c+(De.test(c)?"&":"?")+"_="+Ne++)),g.ifModified&&(C.lastModified[c]&&w.setRequestHeader("If-Modified-Since",C.lastModified[c]),C.etag[c]&&w.setRequestHeader("If-None-Match",C.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ve+"; q=0.01":""):g.accepts["*"]),g.headers)w.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(m,w,g)||2===x))return w.abort();for(r in s="abort",{success:1,error:1,complete:1})w[r](g[r]);if(d=Ye(Ge,g,e,w)){if(w.readyState=1,p&&y.trigger("ajaxSend",[w,g]),2===x)return w;g.async&&0<g.timeout&&(f=L.setTimeout(function(){w.abort("timeout")},g.timeout));try{x=1,d.send(o,l)}catch(t){if(!(x<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,n,r){var i,o,a,s,l,u=e;2!==x&&(x=2,f&&L.clearTimeout(f),d=void 0,h=r||"",w.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,w,n)),s=function(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(g,s,w,i),i?(g.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(C.lastModified[c]=l),(l=w.getResponseHeader("etag"))&&(C.etag[c]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=s.state,o=s.data,i=!(a=s.error))):(a=u,!t&&u||(u="error",t<0&&(t=0))),w.status=t,w.statusText=(e||u)+"",i?_.resolveWith(m,[o,u,w]):_.rejectWith(m,[w,u,a]),w.statusCode(b),b=void 0,p&&y.trigger(i?"ajaxSuccess":"ajaxError",[w,g,i?o:a]),v.fireWith(m,[w,u]),p&&(y.trigger("ajaxComplete",[w,g]),--C.active||C.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,i){C[i]=function(t,e,n,r){return C.isFunction(e)&&(r=r||n,n=e,e=void 0),C.ajax(C.extend({url:t,type:i,dataType:r,data:e,success:n},C.isPlainObject(t)&&t))}}),C._evalUrl=function(t){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){if(C.isFunction(e))return this.each(function(t){C(this).wrapAll(e.call(this,t))});if(this[0]){var t=C(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(n){return C.isFunction(n)?this.each(function(t){C(this).wrapInner(n.call(this,t))}):this.each(function(){var t=C(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=C.isFunction(e);return this.each(function(t){C(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)}).end()}}),C.expr.filters.hidden=function(t){return y.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:function(t){if(!C.contains(t.ownerDocument||d,t))return!0;for(;t&&1===t.nodeType;){if("none"===((e=t).style&&e.style.display||C.css(e,"display"))||"hidden"===t.type)return!0;t=t.parentNode}var e;return!1}(t)},C.expr.filters.visible=function(t){return!C.expr.filters.hidden(t)};var Ze=/%20/g,Qe=/\[\]$/,Ke=/\r?\n/g,Je=/^(?:submit|button|image|reset|file)$/i,tn=/^(?:input|select|textarea|keygen)/i;function en(n,t,r,i){var e;if(C.isArray(t))C.each(t,function(t,e){r||Qe.test(n)?i(n,e):en(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,i)});else if(r||"object"!==C.type(t))i(n,t);else for(e in t)en(n+"["+e+"]",t[e],r,i)}C.param=function(t,e){var n,r=[],i=function(t,e){e=C.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){i(this.name,this.value)});else for(n in t)en(n,t[n],e,i);return r.join("&").replace(Ze,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&tn.test(this.nodeName)&&!Je.test(t)&&(this.checked||!K.test(t))}).map(function(t,e){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(t){return{name:e.name,value:t.replace(Ke,"\r\n")}}):{name:e.name,value:n.replace(Ke,"\r\n")}}).get()}}),C.ajaxSettings.xhr=void 0!==L.ActiveXObject?function(){return this.isLocal?sn():8<d.documentMode?an():/^(get|post|head|put|delete|options)$/i.test(this.type)&&an()||sn()}:an;var nn=0,rn={},on=C.ajaxSettings.xhr();function an(){try{return new L.XMLHttpRequest}catch(t){}}function sn(){try{return new L.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}L.attachEvent&&L.attachEvent("onunload",function(){for(var t in rn)rn[t](void 0,!0)}),y.cors=!!on&&"withCredentials"in on,(on=y.ajax=!!on)&&C.ajaxTransport(function(l){var u;if(!l.crossDomain||y.cors)return{send:function(t,o){var e,a=l.xhr(),s=++nn;if(a.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(e in l.xhrFields)a[e]=l.xhrFields[e];for(e in l.mimeType&&a.overrideMimeType&&a.overrideMimeType(l.mimeType),l.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)void 0!==t[e]&&a.setRequestHeader(e,t[e]+"");a.send(l.hasContent&&l.data||null),u=function(t,e){var n,r,i;if(u&&(e||4===a.readyState))if(delete rn[s],u=void 0,a.onreadystatechange=C.noop,e)4!==a.readyState&&a.abort();else{i={},n=a.status,"string"==typeof a.responseText&&(i.text=a.responseText);try{r=a.statusText}catch(t){r=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=i.text?200:404}i&&o(n,r,i,a.getAllResponseHeaders())},l.async?4===a.readyState?L.setTimeout(u):a.onreadystatechange=rn[s]=u:u()},abort:function(){u&&u(void 0,!0)}}}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),C.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=d.head||C("head")[0]||d.documentElement;return{send:function(t,n){(r=d.createElement("script")).async=!0,e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(t,e){(e||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),r=null,e||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(void 0,!0)}}}});var ln=[],un=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ln.pop()||C.expando+"_"+Ne++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(t,e,n){var r,i,o,a=!1!==t.jsonp&&(un.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&un.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=C.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(un,"$1"+r):!1!==t.jsonp&&(t.url+=(De.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||C.error(r+" was not called"),o[0]},t.dataTypes[0]="json",i=L[r],L[r]=function(){o=arguments},n.always(function(){void 0===i?C(L).removeProp(r):L[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,ln.push(r)),o&&C.isFunction(i)&&i(o[0]),o=i=void 0}),"script"}),C.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||d;var r=b.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=ct([t],e,i),i&&i.length&&C(i).remove(),C.merge([],r.childNodes))};var cn=C.fn.load;function hn(t){return C.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}C.fn.load=function(t,e,n){if("string"!=typeof t&&cn)return cn.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return-1<s&&(r=C.trim(t.slice(s,t.length)),t=t.slice(0,s)),C.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<a.length&&C.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?C("<div>").append(C.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}}),C.expr.filters.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length},C.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u=C.css(t,"position"),c=C(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=C.css(t,"top"),l=C.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<C.inArray("auto",[o,l])?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),C.isFunction(e)&&(e=e.call(t,n,C.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):c.css(h)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){C.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(t=o.documentElement,C.contains(t,i)?(void 0!==i.getBoundingClientRect&&(r=i.getBoundingClientRect()),n=hn(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},r=this[0];return"fixed"===C.css(r,"position")?e=r.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),C.nodeName(t[0],"html")||(n=t.offset()),n.top+=C.css(t[0],"borderTopWidth",!0),n.left+=C.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-C.css(r,"marginTop",!0),left:e.left-n.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!C.nodeName(t,"html")&&"static"===C.css(t,"position");)t=t.offsetParent;return t||Ut})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var o=/Y/.test(i);C.fn[e]=function(t){return Q(this,function(t,e,n){var r=hn(t);if(void 0===n)return r?i in r?r[i]:r.document.documentElement[e]:t[e];r?r.scrollTo(o?C(r).scrollLeft():n,o?n:C(r).scrollTop()):t[e]=n},e,t,arguments.length,null)}}),C.each(["top","left"],function(t,n){C.cssHooks[n]=Wt(y.pixelPosition,function(t,e){if(e)return e=Vt(t,n),zt.test(e)?C(t).position()[n]+"px":e})}),C.each({Height:"height",Width:"width"},function(o,a){C.each({padding:"inner"+o,content:a,"":"outer"+o},function(r,t){C.fn[t]=function(t,e){var n=arguments.length&&(r||"boolean"!=typeof t),i=r||(!0===t||!0===e?"margin":"border");return Q(this,function(t,e,n){var r;return C.isWindow(t)?t.document.documentElement["client"+o]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+o],r["scroll"+o],t.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?C.css(t,e,i):C.style(t,e,n,i)},a,n?t:void 0,n,null)}})}),C.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),C.fn.size=function(){return this.length},C.fn.andSelf=C.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var fn=L.jQuery,pn=L.$;return C.noConflict=function(t){return L.$===C&&(L.$=pn),t&&L.jQuery===C&&(L.jQuery=fn),C},t||(L.jQuery=L.$=C),C},"object"==typeof e&&"object"==typeof e.exports?e.exports=r.document?i(r,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(r)},{}],498:[function(t,e,n){(function(l){var o={},u=o.LEFT_BRACE=1,c=o.RIGHT_BRACE=2,h=o.LEFT_BRACKET=3,f=o.RIGHT_BRACKET=4,p=o.COLON=5,d=o.COMMA=6,g=o.TRUE=7,m=o.FALSE=8,y=o.NULL=9,_=o.STRING=10,v=o.NUMBER=11,b=o.START=17,n=o.STOP=18,x=o.TRUE1=33,w=o.TRUE2=34,L=o.TRUE3=35,C=o.FALSE1=49,k=o.FALSE2=50,E=o.FALSE3=51,S=o.FALSE4=52,M=o.NULL1=65,P=o.NULL2=66,I=o.NULL3=67,T=o.NUMBER1=81,O=o.NUMBER3=83,N=o.STRING1=97,D=o.STRING2=98,A=o.STRING3=99,R=o.STRING4=100,F=o.STRING5=101,j=o.STRING6=102,r=o.VALUE=113,i=o.KEY=114,a=o.OBJECT=129,s=o.ARRAY=130,B="\\".charCodeAt(0),z="/".charCodeAt(0),q="\b".charCodeAt(0),U="\f".charCodeAt(0),G="\n".charCodeAt(0),V="\r".charCodeAt(0),H="\t".charCodeAt(0);function W(){this.tState=b,this.value=void 0,this.string=void 0,this.stringBuffer=l.alloc?l.alloc(65536):new l(65536),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=r,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new l(2),3:new l(3),4:new l(4)},this.offset=-1}W.toknam=function(t){for(var e=Object.keys(o),n=0,r=e.length;n<r;n++){var i=e[n];if(o[i]===t)return i}return t&&"0x"+t.toString(16)};var t=W.prototype;t.onError=function(t){throw t},t.charError=function(t,e){this.tState=n,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+W.toknam(this.tState)))},t.appendStringChar=function(t){65536<=this.stringBufferOffset&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t},t.appendStringBuf=function(t,e,n){var r=t.length;"number"==typeof e&&(r="number"==typeof n?n<0?t.length-e+n:n-e:t.length-e),r<0&&(r=0),65536<this.stringBufferOffset+r&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,n),this.stringBufferOffset+=r},t.write=function(t){var e;"string"==typeof t&&(t=new l(t));for(var n=0,r=t.length;n<r;n++)if(this.tState===b){if(e=t[n],this.offset++,123===e)this.onToken(u,"{");else if(125===e)this.onToken(c,"}");else if(91===e)this.onToken(h,"[");else if(93===e)this.onToken(f,"]");else if(58===e)this.onToken(p,":");else if(44===e)this.onToken(d,",");else if(116===e)this.tState=x;else if(102===e)this.tState=C;else if(110===e)this.tState=M;else if(34===e)this.string="",this.stringBufferOffset=0,this.tState=N;else if(45===e)this.string="-",this.tState=T;else if(48<=e&&e<64)this.string=String.fromCharCode(e),this.tState=O;else if(32!==e&&9!==e&&10!==e&&13!==e)return this.charError(t,n)}else if(this.tState===N)if(e=t[n],0<this.bytes_remaining){for(var i=0;i<this.bytes_remaining;i++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+i]=t[i];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,n=n+i-1}else if(0===this.bytes_remaining&&128<=e){if(e<=193||244<e)return this.onError(new Error("Invalid UTF-8 character at position "+n+" in state "+W.toknam(this.tState)));if(194<=e&&e<=223&&(this.bytes_in_sequence=2),224<=e&&e<=239&&(this.bytes_in_sequence=3),240<=e&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>t.length){for(var o=0;o<=t.length-1-n;o++)this.temp_buffs[this.bytes_in_sequence][o]=t[n+o];this.bytes_remaining=n+this.bytes_in_sequence-t.length,n=t.length-1}else this.appendStringBuf(t,n,n+this.bytes_in_sequence),n=n+this.bytes_in_sequence-1}else if(34===e)this.tState=b,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(_,this.string),this.offset+=l.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===e)this.tState=D;else{if(!(32<=e))return this.charError(t,n);this.appendStringChar(e)}else if(this.tState===D)if(34===(e=t[n]))this.appendStringChar(e),this.tState=N;else if(92===e)this.appendStringChar(B),this.tState=N;else if(47===e)this.appendStringChar(z),this.tState=N;else if(98===e)this.appendStringChar(q),this.tState=N;else if(102===e)this.appendStringChar(U),this.tState=N;else if(110===e)this.appendStringChar(G),this.tState=N;else if(114===e)this.appendStringChar(V),this.tState=N;else if(116===e)this.appendStringChar(H),this.tState=N;else{if(117!==e)return this.charError(t,n);this.unicode="",this.tState=A}else if(this.tState===A||this.tState===R||this.tState===F||this.tState===j){if(!(48<=(e=t[n])&&e<64||64<e&&e<=70||96<e&&e<=102))return this.charError(t,n);if(this.unicode+=String.fromCharCode(e),this.tState++===j){var a=parseInt(this.unicode,16);(this.unicode=void 0)!==this.highSurrogate&&56320<=a&&a<57344?(this.appendStringBuf(new l(String.fromCharCode(this.highSurrogate,a))),this.highSurrogate=void 0):void 0===this.highSurrogate&&55296<=a&&a<56320?this.highSurrogate=a:(void 0!==this.highSurrogate&&(this.appendStringBuf(new l(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new l(String.fromCharCode(a)))),this.tState=N}}else if(this.tState===T||this.tState===O)switch(e=t[n]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(e),this.tState=O;break;default:this.tState=b;var s=Number(this.string);if(isNaN(s))return this.charError(t,n);this.string.match(/[0-9]+/)==this.string&&s.toString()!=this.string?this.onToken(_,this.string):this.onToken(v,s),this.offset+=this.string.length-1,this.string=void 0,n--}else if(this.tState===x){if(114!==t[n])return this.charError(t,n);this.tState=w}else if(this.tState===w){if(117!==t[n])return this.charError(t,n);this.tState=L}else if(this.tState===L){if(101!==t[n])return this.charError(t,n);this.tState=b,this.onToken(g,!0),this.offset+=3}else if(this.tState===C){if(97!==t[n])return this.charError(t,n);this.tState=k}else if(this.tState===k){if(108!==t[n])return this.charError(t,n);this.tState=E}else if(this.tState===E){if(115!==t[n])return this.charError(t,n);this.tState=S}else if(this.tState===S){if(101!==t[n])return this.charError(t,n);this.tState=b,this.onToken(m,!1),this.offset+=4}else if(this.tState===M){if(117!==t[n])return this.charError(t,n);this.tState=P}else if(this.tState===P){if(108!==t[n])return this.charError(t,n);this.tState=I}else if(this.tState===I){if(108!==t[n])return this.charError(t,n);this.tState=b,this.onToken(y,null),this.offset+=3}},t.onToken=function(t,e){},t.parseError=function(t,e){this.tState=n,this.onError(new Error("Unexpected "+W.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+W.toknam(this.state)))},t.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},t.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=r)},t.emit=function(t){this.mode&&(this.state=d),this.onValue(t)},t.onValue=function(t){},t.onToken=function(t,e){if(this.state===r)if(t===_||t===v||t===g||t===m||t===y)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===u)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=i,this.mode=a;else if(t===h)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=s,this.state=r;else if(t===c){if(this.mode!==a)return this.parseError(t,e);this.pop()}else{if(t!==f)return this.parseError(t,e);if(this.mode!==s)return this.parseError(t,e);this.pop()}else if(this.state===i)if(t===_)this.key=e,this.state=p;else{if(t!==c)return this.parseError(t,e);this.pop()}else if(this.state===p){if(t!==p)return this.parseError(t,e);this.state=r}else{if(this.state!==d)return this.parseError(t,e);if(t===d)this.mode===s?(this.key++,this.state=r):this.mode===a&&(this.state=i);else{if(!(t===f&&this.mode===s||t===c&&this.mode===a))return this.parseError(t,e);this.pop()}}},W.C=o,e.exports=W}).call(this,t("buffer").Buffer)},{buffer:89}],499:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function r(){}function h(){}function _(){}function n(){}function i(){}function o(){}function a(){}function v(t){this.message=t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function l(){if(0===arguments.length)v.call(this);else if(1===arguments.length){var t=arguments[0];v.call(this,t)}}function p(){}function b(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)b.call(this,0,0);else if(1===arguments.length){var t=arguments[0];b.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];b.call(this,e,n,b.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this.x=r,this.y=i,this.z=o}}function u(){if(this.dimensionsToTest=2,0===arguments.length)u.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new h("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function c(){}function m(){}function f(t){this.message=t||""}function y(){}function d(t){this.message=t||""}function g(t){this.message=t||""}function x(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function w(){if(x.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function L(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof b){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof L){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.init(i,o,a,s)}}function C(){}function k(){C.call(this,"Projective point not representable on the Cartesian plane.")}function E(){}function S(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function M(){}function P(t){this.str=t}function I(t){this.value=t}function T(){}function O(){if(this.hi=0,(this.lo=0)===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof O){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];O.call(this,O.parse(n))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}}function N(){}function D(){}function A(){}function R(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof R&&arguments[1]instanceof R){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof b&&arguments[1]instanceof b){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y}}else if(3===arguments.length){var s=arguments[0],l=arguments[1],u=arguments[2];this.x=s,this.y=l,this.w=u}else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3],d=c.y-h.y,g=h.x-c.x,m=c.x*h.y-h.x*c.y,y=f.y-p.y,_=p.x-f.x,v=f.x*p.y-p.x*f.y;this.x=g*v-_*m,this.y=y*m-d*v,this.w=d*_-y*g}}function F(){}function j(){}function B(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function z(){}function q(){}function U(){}function G(){}function V(){}function H(){}function W(){}function X(){}function Y(){}function $(){}function Z(){}function Q(){}function K(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function J(t){return null==t?jo:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function rt(t){return null==t?null:t.right}function it(){this.root_=null,this.size_=0}function ot(){}function at(){}function st(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function lt(){}function ut(){}function ct(){}function ht(){}function ft(){this.geometries=null;var t=arguments[0],e=arguments[1];if(B.call(this,e),null===t&&(t=[]),B.hasNullElements(t))throw new h("geometries must not contain null elements");this.geometries=t}function pt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function dt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];dt.call(this,t,q.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function gt(){this.count=null}function mt(){}function yt(){}function _t(){}function vt(){}function bt(){}function xt(){}function wt(){}function Lt(){this.points=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function Ct(){}function kt(){this.coordinates=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function Et(){}function St(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(B.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),B.hasNullElements(e))throw new h("holes must not contain null elements");if(t.isEmpty()&&B.hasNonEmptyElements(e))throw new h("shell is empty but holes are not");this.shell=t,this.holes=e}function Mt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Pt(){if(arguments[0]instanceof b&&arguments[1]instanceof Gt){var t=arguments[0],e=arguments[1];Pt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(S(arguments[0],D)&&arguments[1]instanceof Gt){var n=arguments[0],r=arguments[1];Lt.call(this,n,r),this.validateConstruction()}}function It(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Tt(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Ot(){}function Nt(){}function Dt(){}function At(){}function Rt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Rt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new b}else if(S(arguments[0],D)){var r=arguments[0];if(null===r)return this.coordinates=new Array(0).fill(null),null;this.dimension=r.getDimension(),this.coordinates=new Array(r.size()).fill(null);for(n=0;n<this.coordinates.length;n++)this.coordinates[n]=r.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this.coordinates=i,this.dimension=o,null===i&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this.coordinates=new Array(a).fill(null),this.dimension=s;for(n=0;n<a;n++)this.coordinates[n]=new b}}function Ft(){}function jt(n,r,i){var o=[0],a=!1;return n.push(o),{next:function(){var t,e=o[0];return!a&&e<r.length?(t=i?[r[e],i[e]]:r[e],o[0]++):(a=!0,n.splice(n.indexOf(o),1)),{done:a,value:t}}}}function Bt(){return this._values.length}function zt(){this.map_=new Go}function qt(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=qt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ut){var t=arguments[0];(this.modelType=t)===qt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=qt.FIXED,this.setScale(e)}else if(arguments[0]instanceof qt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function Ut(){this.name=null;var t=arguments[0];this.name=t,Ut.nameToTypeMap.put(t,this)}function Gt(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)Gt.call(this,new qt,0);else if(1===arguments.length){if(S(arguments[0],F)){var t=arguments[0];Gt.call(this,new qt,0,t)}else if(arguments[0]instanceof qt){var e=arguments[0];Gt.call(this,e,0,Gt.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];Gt.call(this,n,r,Gt.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.precisionModel=i,this.coordinateSequenceFactory=a,this.SRID=o}}function Vt(t){this.geometryFactory=t||new Gt}function Ht(t){this.parser=new Vt(t)}function Wt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new b,this.intPt[1]=new b,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Xt(){Wt.apply(this)}function Yt(){}function $t(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function Zt(){}function Qt(){if(this.p0=null,this.p1=null,0===arguments.length)Qt.call(this,new b,new b);else if(1===arguments.length){var t=arguments[0];Qt.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];Qt.call(this,new b(r,i),new b(o,a))}}function Kt(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ut.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];Kt.call(this),this.set(t)}else if(arguments[0]instanceof Kt){var e=arguments[0];Kt.call(this),this.matrix[E.INTERIOR][E.INTERIOR]=e.matrix[E.INTERIOR][E.INTERIOR],this.matrix[E.INTERIOR][E.BOUNDARY]=e.matrix[E.INTERIOR][E.BOUNDARY],this.matrix[E.INTERIOR][E.EXTERIOR]=e.matrix[E.INTERIOR][E.EXTERIOR],this.matrix[E.BOUNDARY][E.INTERIOR]=e.matrix[E.BOUNDARY][E.INTERIOR],this.matrix[E.BOUNDARY][E.BOUNDARY]=e.matrix[E.BOUNDARY][E.BOUNDARY],this.matrix[E.BOUNDARY][E.EXTERIOR]=e.matrix[E.BOUNDARY][E.EXTERIOR],this.matrix[E.EXTERIOR][E.INTERIOR]=e.matrix[E.EXTERIOR][E.INTERIOR],this.matrix[E.EXTERIOR][E.BOUNDARY]=e.matrix[E.EXTERIOR][E.BOUNDARY],this.matrix[E.EXTERIOR][E.EXTERIOR]=e.matrix[E.EXTERIOR][E.EXTERIOR]}}function Jt(){this.areaBasePt=null,this.triangleCent3=new b,this.areasum2=0,this.cg3=new b,this.lineCentSum=new b,this.totalLength=0,this.ptCount=0,this.ptCentSum=new b;var t=arguments[0];this.areaBasePt=null,this.add(t)}function te(t){this.message=t||""}function ee(){this.array_=[]}function ne(){this.treeSet=new st,this.list=new x}function re(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];re.call(this,re.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=ne.filterCoordinates(e),this.geomFactory=n}}function ie(){this.origin=null;var t=arguments[0];this.origin=t}function oe(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function ae(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new Qt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Lt&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];ae.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.srcPts=n,this._isClosed=ae.isClosed(n),this.snapTolerance=r}}function se(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function le(){if(oe.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.snapTolerance=n,this.snapPts=r,this.isSelfSnap=i}}function ue(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function ce(){this.commonCoord=null,this.ccFilter=new he}function he(){this.commonBitsX=new ue,this.commonBitsY=new ue}function fe(){this.trans=null;var t=arguments[0];this.trans=t}function pe(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function de(){if(this.boundaryRule=q.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new h("Rule must be non-null");this.boundaryRule=t}}function ge(){}function me(){}function ye(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function _e(){}function ve(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function be(){this._size=null,this.items=null,this._size=0,this.items=new x,this.items.add(null)}function xe(){}function we(){}function Le(){if(this.childBoundables=new x,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function Ce(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function ke(){if(this.root=null,this.built=!1,this.itemBoundables=new x,this.nodeCapacity=null,0===arguments.length)ke.call(this,ke.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];p.isTrue(1<t,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Ee(){}function Se(){if(0===arguments.length)Se.call(this,Se.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];ke.call(this,t)}}function Me(){var t=arguments[0];Le.call(this,t)}function Pe(){}function Ie(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.segString=t,this.coord=new b(e),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Te(){this.nodeMap=new it,this.edge=null;var t=arguments[0];this.edge=t}function Oe(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null;var t=arguments[this.currSegIndex=0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Ne(){}function De(){this.nodeList=new Te(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ae(){this.tempEnv1=new L,this.tempEnv2=new L,this.overlapSeg1=new Qt,this.overlapSeg2=new Qt}function Re(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=r}function Fe(){}function je(){}function Be(){}function ze(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function qe(){if(this.monoChains=new x,this.index=new Se,this.idCounter=0,this.nodedSegStrings=null,(this.nOverlaps=0)===arguments.length);else if(1===arguments.length){var t=arguments[0];ze.call(this,t)}}function Ue(){Ae.apply(this),this.si=null;var t=arguments[0];this.si=t}function Ge(){if(this.pt=null,1===arguments.length){var t=arguments[0];v.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];v.call(this,Ge.msgWithCoord(e,n)),this.pt=new b(n)}}function Ve(){}function He(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new x,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function We(){this.li=new Xt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function Xe(){this.nv=null;var t=arguments[0];this.nv=new We(Xe.toSegmentStrings(t))}function Ye(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function $e(){}function Ze(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[$e.ON]=e}else if(arguments[0]instanceof Ze){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[$e.ON]=i,this.location[$e.LEFT]=o,this.location[$e.RIGHT]=a}}function Qe(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ze(t),this.elt[1]=new Ze(t)}else if(arguments[0]instanceof Qe){var e=arguments[0];this.elt[0]=new Ze(e.elt[0]),this.elt[1]=new Ze(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new Ze(E.NONE),this.elt[1]=new Ze(E.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.elt[0]=new Ze(i,o,a),this.elt[1]=new Ze(i,o,a)}else if(4===arguments.length){var s=arguments[0],l=arguments[1],u=arguments[2],c=arguments[3];this.elt[0]=new Ze(E.NONE,E.NONE,E.NONE),this.elt[1]=new Ze(E.NONE,E.NONE,E.NONE),this.elt[s].setLocations(l,u,c)}}function Ke(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new x,this.pts=new x,this.label=new Qe(E.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new x,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Je(){var t=arguments[0],e=arguments[1];Ke.call(this,t,e)}function tn(){var t=arguments[0],e=arguments[1];Ke.call(this,t,e)}function en(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function nn(){en.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Qe(0,E.NONE)}function rn(){this.nodeMap=new it,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function on(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];on.call(this,e,n,r,null)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];on.call(this,i),this.init(o,a),this.label=s}}function an(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(on.call(this,t),this._isForward=e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function sn(){}function ln(){if(this.edges=new x,this.nodes=null,this.edgeEndList=new x,0===arguments.length)this.nodes=new rn(new sn);else if(1===arguments.length){var t=arguments[0];this.nodes=new rn(t)}}function un(){this.geometryFactory=null,this.shellList=new x;var t=arguments[0];this.geometryFactory=t}function cn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new x,this.resultLineList=new x;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function hn(){this.op=null,this.geometryFactory=null,this.resultPointList=new x;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function fn(){}function pn(){this.geom=null;var t=arguments[0];this.geom=t}function dn(){this.edgeMap=new it,this.edgeList=null,this.ptInAreaLocation=[E.NONE,E.NONE]}function gn(){dn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function mn(){sn.apply(this)}function yn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function _n(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=_n.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.eventType=_n.INSERT,this.label=n,this.xValue=r,this.obj=i}}function vn(){}function bn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function xn(){vn.apply(this),this.events=new x,this.nOverlaps=null}function wn(){this.min=_.POSITIVE_INFINITY,this.max=_.NEGATIVE_INFINITY}function Ln(){}function Cn(){wn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function kn(){wn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function En(){this.leaves=new x,this.root=null,this.level=0}function Sn(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Mn(){this.items=new x}function Pn(){this.index=null;var t=arguments[0];if(!S(t,Et))throw new h("Argument must be Polygonal");this.index=new Tn(t)}function In(){this.counter=null;var t=arguments[0];this.counter=t}function Tn(){this.index=new En;var t=arguments[0];this.init(t)}function On(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new b(t),this.segmentIndex=e,this.dist=n}function Nn(){this.nodeMap=new it,this.edge=null;var t=arguments[0];this.edge=t}function Dn(){}function An(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new L,this.env2=new L;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Dn;this.startIndex=e.getChainStartIndices(this.pts)}function Rn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=Rn.NULL_VALUE}function Fn(){if(en.apply(this),this.pts=null,this.env=null,this.eiList=new Nn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Rn,this.depthDelta=0,1===arguments.length){var t=arguments[0];Fn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function jn(){if(ln.apply(this),this.parentGeom=null,this.lineEdgeMap=new zt,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new de,2===arguments.length){var t=arguments[0],e=arguments[1];jn.call(this,t,e,q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.argIndex=n,this.parentGeom=r,this.boundaryNodeRule=i,null!==r&&this.add(r)}}function Bn(){if(this.li=new Xt,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new jn(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Bn.call(this,e,n,q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];0<=r.getPrecisionModel().compareTo(i.getPrecisionModel())?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new jn(0,r,o),this.arg[1]=new jn(1,i,o)}}function zn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=zn.orientation(t)}function qn(){this.edges=new x,this.ocaMap=new it}function Un(){this.ptLocator=new de,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new qn,this.resultPolyList=new x,this.resultLineList=new x,this.resultPointList=new x;var t=arguments[0],e=arguments[1];Bn.call(this,t,e),this.graph=new ln(new mn),this.geomFact=t.getFactory()}function Gn(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Vn(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Hn(){this.factory=null,this.interiorPoint=null;var t=arguments[this.maxWidth=0];this.factory=t.getFactory(),this.add(t)}function Wn(){this.poly=null,this.centreY=null,this.hiY=_.MAX_VALUE,this.loY=-_.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Hn.avg(this.loY,this.hiY)}function Xn(){this.centroid=null,this.minDistance=_.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function Yn(){this.centroid=null,this.minDistance=_.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function $n(){}function Zn(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Qn(){this.input=null,this.extremalPts=null,this.centre=null;var t=arguments[this.radius=0];this.input=t}function Kn(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Qt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];Kn.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Jn(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function tr(){oe.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function er(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function nr(){this._isMarked=!1;var t=arguments[0];er.call(this,t)}function rr(){this.vertexMap=new zt}function ir(){this._isStart=!1;var t=arguments[0];nr.call(this,t)}function or(){rr.apply(this)}function ar(){this.result=null,this.factory=null,this.graph=null,this.lines=new x,this.nodeEdgeStack=new ee,this.ringStartEdge=null,this.graph=new or}function sr(){this.items=new x,this.subnode=new Array(4).fill(null)}function lr(){}function ur(){this.pt=new b,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function cr(){sr.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function hr(){}function fr(){sr.apply(this)}function pr(){this.root=null,this.minExtent=1,this.root=new fr}function dr(t){this.geometryFactory=t||new Gt}function gr(t){this.geometryFactory=t||new Gt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new dr(this.geometryFactory)}function mr(){this.parser=new dr(this.geometryFactory)}function yr(t){this.geometryFactory=t||new Gt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Vt(this.geometryFactory)}function _r(t){return[t.x,t.y]}function vr(t){this.geometryFactory=t||new Gt}function br(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];br.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],r=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=r,this.isScaled=!this.isIntegerPrecision()}}function xr(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function wr(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Lr(){if(this.quadrantSegments=Lr.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Lr.CAP_ROUND,this.joinStyle=Lr.JOIN_ROUND,this.mitreLimit=Lr.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Lr.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(i),this.setJoinStyle(o),this.setMitreLimit(a)}}function Cr(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function kr(){this.array_=[]}function Er(){this.finder=null,this.dirEdgeList=new x,this.nodes=new x,this.rightMostCoord=null,this.env=null,this.finder=new Cr}function Sr(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Zt.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Mr(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new x}function Pr(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Qt,this.seg1=new Qt,this.offset0=new Qt,this.offset1=new Qt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Xt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),8<=e.getQuadrantSegments()&&e.getJoinStyle()===Lr.JOIN_ROUND&&(this.closingSegLengthFactor=Pr.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function Ir(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Tr(){this.subgraphs=null,this.seg=new Qt,this.cga=new Zt;var t=arguments[0];this.subgraphs=t}function Or(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new Qt(t),this.leftDepth=e}function Nr(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new x;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function Dr(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var t=arguments[this.numTests=0];this.li=t}function Ar(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new qn;var t=arguments[0];this.bufParams=t}function Rr(){this.li=new Xt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function Fr(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new h("Scale factor must be non-zero");1!==e&&(this.pt=new b(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new b,this.p1Scaled=new b),this.initCorners(this.pt)}function jr(){this.tempEnv1=new L,this.selectedSegment=new Qt}function Br(){this.index=null;var t=arguments[0];this.index=t}function zr(){jr.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function qr(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new x}function Ur(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Xt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function Gr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Lr,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function Vr(){this.comps=null;var t=arguments[0];this.comps=t}function Hr(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Hr.call(this,t,Hr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.component=n,this.segIndex=r,this.pt=i}}function Wr(){this.pts=null;var t=arguments[0];this.pts=t}function Xr(){this.locations=null;var t=arguments[0];this.locations=t}function Yr(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new de,this.minDistanceLocation=null,this.minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];Yr.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=i}}function $r(){this.factory=null,this.directedEdges=new x,this.coordinates=null;var t=arguments[0];this.factory=t}function Zr(){this._isMarked=!1,this._isVisited=!1,this.data=null}function Qr(){Zr.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.from=t,this.to=e,this.edgeDirection=r,this.p0=t.getCoordinate(),this.p1=n;var i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=Fe.quadrant(i,o),this.angle=Math.atan2(o,i)}function Kr(){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];Qr.call(this,t,e,n,r)}function Jr(){if(Zr.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function ti(){this.outEdges=new x,this.sorted=!1}function ei(){if(Zr.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];ei.call(this,t,new ti)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function ni(){Jr.apply(this),this.line=null;var t=arguments[0];this.line=t}function ri(){this.nodeMap=new it}function ii(){this.edges=new K,this.dirEdges=new K,this.nodeMap=new ri}function oi(){ii.apply(this)}function ai(){this.graph=new oi,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function si(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];Qr.call(this,t,e,n,r)}function li(){Jr.apply(this),this.line=null;var t=arguments[0];this.line=t}function ui(){this.factory=null,this.deList=new x,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function ci(){}function hi(){ii.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function fi(){if(this.lineStringAdder=new pi(this),this.graph=null,this.dangles=new x,this.cutEdges=new x,this.invalidRingLines=new x,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)fi.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function pi(){this.p=null;var t=arguments[0];this.p=t}function di(){}function gi(){if(this.edgeEnds=new x,1===arguments.length){var t=arguments[0];gi.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);on.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Qe(e.getLabel())),this.insert(e)}}function mi(){dn.apply(this)}function yi(){var t=arguments[0],e=arguments[1];nn.call(this,t,e)}function _i(){sn.apply(this)}function vi(){this.li=new Xt,this.ptLocator=new de,this.arg=null,this.nodes=new rn(new _i),this.im=null,this.isolatedEdges=new x,this.invalidPoint=null;var t=arguments[0];this.arg=t}function bi(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function xi(){this.li=new Xt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new b(t.getMinX(),t.getMinY()),this.diagUp1=new b(t.getMaxX(),t.getMaxY()),this.diagDown0=new b(t.getMinX(),t.getMaxY()),this.diagDown1=new b(t.getMaxX(),t.getMinY())}function wi(){this._isDone=!1}function Li(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Ci(){wi.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function ki(){wi.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Ei(){wi.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new b,this.p1=new b;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new xi(this.rectEnv)}function Si(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];Bn.call(this,t,e),this._relate=new vi(this.arg)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];Bn.call(this,n,r,i),this._relate=new vi(this.arg)}}function Mi(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=Mi.extractFactory(t),this.inputGeoms=t}function Pi(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Ii(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Ti(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new x)}function Oi(){if(this.polygons=new x,this.lines=new x,this.points=new x,this.geomFact=null,1===arguments.length){if(S(arguments[0],m)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof B){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.geomFact=r,this.extract(n)}}function Ni(){this.geometryFactory=new Gt,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Di(){this.items=new x,this.subnode=[null,null]}function Ai(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function Ri(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Fi(){Di.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function ji(){Di.apply(this)}function Bi(){this.root=null,this.minExtent=1,this.root=new ji}function zi(){}function qi(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new Ai;var t=arguments[0];this.ring=t,this.buildIndex()}function Ui(){jr.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function Gi(){this.nodes=new rn(new _i)}function Vi(){this.li=new Xt,this.geomGraph=null,this.nodeGraph=new Gi,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Hi(){this.graph=null,this.rings=new x,this.totalEnv=new L,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Wi(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Wi.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function Xi(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Yi(){Tt.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function $i(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Zi(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Qt;var t=arguments[0];this.pts=t}function Qi(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Ki(){oe.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function Ji(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];Ji.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];Qt.call(this,n,r),this.parent=i,this.index=o}}function to(){if(this.parentLine=null,this.segs=null,this.resultSegs=new x,this.minimumSize=null,1===arguments.length){var t=arguments[0];to.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function eo(){this.index=new pr}function no(){this.querySeg=null,this.items=new x;var t=arguments[0];this.querySeg=t}function ro(){this.li=new Xt,this.inputIndex=new eo,this.outputIndex=new eo,this.line=null,this.linePts=null;var t=arguments[this.distanceTolerance=0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function io(){this.inputIndex=new eo,this.outputIndex=new eo,this.distanceTolerance=0}function oo(){this.inputGeom=null,this.lineSimplifier=new io,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function ao(){oe.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function so(){this.tps=null;var t=arguments[0];this.tps=t}function lo(){this.seg=null,this.segLen=null,this.splitPt=null;var t=arguments[this.minimumLen=0];this.seg=t,this.segLen=t.getLength()}function uo(){}function co(){}function ho(){}function fo(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new b(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new b(e,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this.p=new b(r,i,o)}}function po(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];fo.call(this,t)}function go(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function mo(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=0<t.getTolerance()}function yo(){}function _o(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function vo(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];v.call(this,t)}else if(arguments[0]instanceof Qt){var e=arguments[0];v.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Qt(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];v.call(this,vo.msgWithSpatial(n,r)),this.seg=new Qt(r)}}function bo(){}function xo(){this.visitedKey=0,this.quadEdges=new x,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Qt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/xo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new _o(this)}function wo(){}function Lo(){this.triList=new x}function Co(){this.triList=new x}function ko(){this.coordList=new w,this.triCoords=new x}function Eo(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new Qt(t,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.ls=new Qt(n,r),this.data=i}else if(6===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3],u=arguments[4],c=arguments[5];Eo.call(this,new b(o,a,s),new b(l,u,c))}else if(7===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=arguments[4],m=arguments[5],y=arguments[6];Eo.call(this,new b(h,f,p),new b(d,g,m),y)}}function So(){}function Mo(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new b(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.p=new b(n,r),this.left=null,this.right=null,this.count=1,this.data=i}}function Po(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Po.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function Io(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function To(){this.initialVertices=null,this.segVertices=null,this.segments=new x,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new co,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new x(t),this.tolerance=e,this.kdt=new Po(e)}function Oo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function No(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new it}function Do(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Ao(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),r=arguments[1],i=parseInt(r,10)||0,o=i<0?Math.max(n+i,0):Math.min(i,n),a=arguments[2],s=void 0===a?n:parseInt(a,10)||0,l=s<0?Math.max(n+s,0):Math.min(s,n);o<l;o++)e[o]=t;return e}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},e(r.prototype,{interfaces_:function(){return[]},getClass:function(){return r}}),r.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},_.MAX_VALUE=Number.MAX_VALUE,s(l,v),e(l.prototype,{interfaces_:function(){return[]},getClass:function(){return l}}),e(p.prototype,{interfaces_:function(){return[]},getClass:function(){return p}}),p.shouldNeverReachHere=function(){if(0===arguments.length)p.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new l("Should never reach here"+(null!==t?": "+t:""))}},p.isTrue=function(){if(1===arguments.length){var t=arguments[0];p.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new l:new l(n)}},p.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];p.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(!r.equals(n))throw new l("Expected "+n+" but encountered "+r+(null!==i?": "+i:""))}},e(b.prototype,{setOrdinate:function(t,e){switch(t){case b.X:this.x=e;break;case b.Y:this.y=e;break;case b.Z:this.z=e;break;default:throw new h("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!r.equalsWithTolerance(this.x,e.x,n)&&!!r.equalsWithTolerance(this.y,e.y,n)}},getOrdinate:function(t){switch(t){case b.X:return this.x;case b.Y:return this.y;case b.Z:return this.z}throw new h("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z)&&_.isNaN(t.z))},equals:function(t){return t instanceof b&&this.equals2D(t)},equalInZ:function(t,e){return r.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return p.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new b(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return 37*(t=37*t+b.hashCode(this.x))+b.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[n,i,a]},getClass:function(){return b}}),b.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(u.prototype,{compare:function(t,e){var n=t,r=e,i=u.compare(n.x,r.x);if(0!==i)return i;var o=u.compare(n.y,r.y);return 0!==o?o:this.dimensionsToTest<=2?0:u.compare(n.z,r.z)},interfaces_:function(){return[o]},getClass:function(){return u}}),u.compare=function(t,e){return t<e?-1:e<t?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0},b.DimensionalComparator=u,b.serialVersionUID=0x5cbf2c235c7e5800,b.NULL_ORDINATE=_.NaN,b.X=0,b.Y=1,b.Z=2,c.prototype.hasNext=function(){},c.prototype.next=function(){},c.prototype.remove=function(){},m.prototype.add=function(){},m.prototype.addAll=function(){},m.prototype.isEmpty=function(){},m.prototype.iterator=function(){},m.prototype.size=function(){},m.prototype.toArray=function(){},m.prototype.remove=function(){},(f.prototype=new Error).name="IndexOutOfBoundsException",((y.prototype=Object.create(m.prototype)).constructor=y).prototype.get=function(){},y.prototype.set=function(){},y.prototype.isEmpty=function(){},(d.prototype=new Error).name="NoSuchElementException",(g.prototype=new Error).name="OperationNotSupported",((x.prototype=Object.create(y.prototype)).constructor=x).prototype.ensureCapacity=function(){},x.prototype.interfaces_=function(){return[y,m]},x.prototype.add=function(t){return this.array_.push(t),!0},x.prototype.clear=function(){this.array_=[]},x.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},x.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},x.prototype.iterator=function(){return new Ro(this)},x.prototype.get=function(t){if(t<0||t>=this.size())throw new f;return this.array_[t]},x.prototype.isEmpty=function(){return 0===this.array_.length},x.prototype.size=function(){return this.array_.length},x.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},x.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Ro=function(t){this.arrayList_=t,this.position_=0};Ro.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new d;return this.arrayList_.get(this.position_++)},Ro.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Ro.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Ro.prototype.remove=function(){throw new g},s(w,x),e(w.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return x.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=x.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(w.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];x.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof b&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&1<=this.size())if(this.get(this.size()-1).equals2D(r))return null;x.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],s);else for(l=a.length-1;0<=l;l--)this.add(a[l],s);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof b){var u=arguments[0],c=arguments[1];if(!arguments[2]){var h=this.size();if(0<h){if(0<u)if(this.get(u-1).equals2D(c))return null;if(u<h)if(this.get(u).equals2D(c))return null}}x.prototype.add.call(this,u,c)}}else if(4===arguments.length){var f=arguments[0],p=arguments[1],d=arguments[2],g=arguments[3],m=1;g<d&&(m=-1);for(l=d;l!==g;l+=m)this.add(f[l],p);return!0}},closeRing:function(){0<this.size()&&this.add(new b(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return w}}),w.coordArrayType=new Array(0).fill(null),e(L.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof L))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new L;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny;return new L(e,this.maxx<t.maxx?this.maxx:t.maxx,n,this.maxy<t.maxy?this.maxy:t.maxy)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof b){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof L){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&(n>=this.minx&&n<=this.maxx&&r>=this.miny&&r<=this.maxy)}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof b){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||r>this.maxy||r<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof b){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof L){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=r,this.maxy=r):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),r<this.miny&&(this.miny=r),r>this.maxy&&(this.maxy=r))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof b){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},centre:function(){return this.isNull()?null:new b((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof b){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof L){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this.minx=i,this.maxx=o):(this.minx=o,this.maxx=i),a<s?(this.miny=a,this.maxy=s):(this.miny=s,this.maxy=a)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+b.hashCode(this.minx))+b.hashCode(this.maxx))+b.hashCode(this.miny))+b.hashCode(this.maxy)},interfaces_:function(){return[n,a]},getClass:function(){return L}}),L.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l<u)&&(!(c<s)&&(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(l<u)&&!(c<s)))}},L.serialVersionUID=0x51845cd552189800,s(k,C),e(k.prototype,{interfaces_:function(){return[]},getClass:function(){return k}}),e(E.prototype,{interfaces_:function(){return[]},getClass:function(){return E}}),E.toLocationSymbol=function(t){switch(t){case E.EXTERIOR:return"e";case E.BOUNDARY:return"b";case E.INTERIOR:return"i";case E.NONE:return"-"}throw new h("Unknown location value: "+t)},E.INTERIOR=0,E.BOUNDARY=1,E.EXTERIOR=2,E.NONE=-1,e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),M.log10=function(t){var e=Math.log(t);return _.isInfinite(e)?e:_.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return(r=t)<e&&(r=e),r<n&&(r=n),r}if(4===arguments.length){var r,i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];return(r=i)<o&&(r=o),r<a&&(r=a),r<s&&(r=s),r}},M.average=function(t,e){return(t+e)/2},M.LOG_10=Math.log(10),P.prototype.append=function(t){this.str+=t},P.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},P.prototype.toString=function(t){return this.str},I.prototype.intValue=function(){return this.value},I.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},I.isNaN=function(t){return Number.isNaN(t)},T.isWhitespace=function(t){return t<=32&&0<=t||127==t},T.toUpperCase=function(t){return t.toUpperCase()},e(O.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),r=O.magnitude(n.hi),i=O.TEN.pow(r);(n=n.divide(i)).gt(O.TEN)?(n=n.divide(O.TEN),r+=1):n.lt(O.ONE)&&(n=n.multiply(O.TEN),r-=1);for(var o=r+1,a=new P,s=O.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n.hi);if(u<0)break;var c=!1,h=0;9<u?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(O.valueOf(u)).multiply(O.TEN),c&&n.selfAdd(O.TEN);var f=!0,p=O.magnitude(n.hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=r,a.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof O){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof O){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],l=null,u=null,c=null,h=null;return i=this.hi/a,h=(l=(c=O.SPLIT*i)-(l=c-i))*(u=(h=O.SPLIT*a)-(u=h-a))-(o=i*a)+l*(r=a-u)+(n=i-l)*u+n*r,h=i+(c=(this.hi-o-h+this.lo-i*s)/a),this.hi=h,this.lo=i-h+c,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof O){var t,e,n,r,i=arguments[0],o=null,a=null,s=null,l=null;return t=(n=this.hi/i.hi)-(o=(s=O.SPLIT*n)-(o=s-n)),l=o*(a=(l=O.SPLIT*i.hi)-(a=l-i.hi))-(r=n*i.hi)+o*(e=i.hi-a)+t*a+t*e,new O(l=n+(s=(this.hi-r-l+this.lo-n*i.lo)/i.hi),n-l+s)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?O.createNaN():O.copy(this).selfDivide(u,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return O.valueOf(1);var e=new O(this),n=O.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return O.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new O(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof O){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return O.valueOf(0);if(this.isNegative())return O.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=O.valueOf(e),r=this.subtract(n.sqr()).hi*(.5*t);return n.add(r)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this.hi+e)-(a=i-this.hi),r=(s=(o=e-a+(this.hi-o))+this.lo)+(i-(n=i+s)),this.hi=n+r,this.lo=r+(n-this.hi),this}}else if(2===arguments.length){var l,u=arguments[0],c=arguments[1],h=(n=null,r=null,null);i=null,o=null,a=null,s=null;i=this.hi+u,l=this.lo+c,o=i-(a=i-this.hi),h=l-(s=l-this.lo);var f=(n=i+(a=(o=u-a+(this.hi-o))+l))+(a=(h=c-s+(this.lo-h))+(r=a+(i-n))),p=a+(n-f);return this.hi=f,this.lo=p,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i=arguments[0],o=arguments[1],a=null,s=null,l=null,u=null;a=(l=O.SPLIT*this.hi)-this.hi,u=O.SPLIT*i,a=l-a,n=this.hi-a,s=u-i;var c=(l=this.hi*i)+(u=a*(s=u-s)-l+a*(r=i-s)+n*s+n*r+(this.hi*o+this.lo*i)),h=u+(a=l-c);return this.hi=c,this.lo=h,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return O.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new O(t,e)},negate:function(){return this.isNaN()?this:new O(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof O){var t=arguments[0];return t.isNaN()?O.createNaN():O.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?O.createNaN():O.copy(this).selfMultiply(e,0)}},isNaN:function(){return _.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=O.magnitude(this.hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+O.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+O.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},reciprocal:function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this.hi)-(i=(a=O.SPLIT*n)-(i=a-n)),o=(s=O.SPLIT*this.hi)-this.hi;var l=n+(a=(1-(r=n*this.hi)-(s=i*(o=s-o)-r+i*(e=this.hi-o)+t*o+t*e)-n*this.lo)/this.hi);return new O(l,n-l+a)},toSciNotation:function(){if(this.isZero())return O.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=O.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},abs:function(){return this.isNaN()?O.NaN:this.isNegative()?this.negate():new O(this)},isPositive:function(){return 0<this.hi||0===this.hi&&0<this.lo},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof O){var t=arguments[0];return O.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return O.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof O){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.hi=n,this.lo=r}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?O.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return 0<this.hi?1:this.hi<0?-1:0<this.lo?1:this.lo<0?-1:0},interfaces_:function(){return[a,n,i]},getClass:function(){return O}}),O.sqr=function(t){return O.valueOf(t).selfMultiply(t)},O.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return O.parse(t)}if("number"==typeof arguments[0])return new O(arguments[0])},O.sqrt=function(t){return O.valueOf(t).sqrt()},O.parse=function(t){for(var e=0,n=t.length;T.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new O,a=0,s=0,l=0;!(n<=e);){var u=t.charAt(e);if(e++,T.isDigit(u)){var c=u-"0";o.selfMultiply(O.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=I.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(0<p){var d=O.TEN.pow(p);f=o.divide(d)}else if(p<0){d=O.TEN.pow(-p);f=o.multiply(d)}return r?f.negate():f},O.createNaN=function(){return new O(_.NaN,_.NaN)},O.copy=function(t){return new O(t)},O.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},O.stringOfChar=function(t,e){for(var n=new P,r=0;r<e;r++)n.append(t);return n.toString()},O.PI=new O(3.141592653589793,12246467991473532e-32),O.TWO_PI=new O(6.283185307179586,24492935982947064e-32),O.PI_2=new O(1.5707963267948966,6123233995736766e-32),O.E=new O(2.718281828459045,14456468917292502e-32),O.NaN=new O(_.NaN,_.NaN),O.EPS=123259516440783e-46,O.SPLIT=134217729,O.MAX_PRINT_DIGITS=32,O.TEN=O.valueOf(10),O.ONE=O.valueOf(1),O.SCI_NOT_EXPONENT_CHAR="E",O.SCI_NOT_ZERO="0.0E0",e(N.prototype,{interfaces_:function(){return[]},getClass:function(){return N}}),N.orientationIndex=function(t,e,n){var r=N.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=O.valueOf(e.x).selfAdd(-t.x),o=O.valueOf(e.y).selfAdd(-t.y),a=O.valueOf(n.x).selfAdd(-e.x),s=O.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},N.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},N.intersection=function(t,e,n,r){var i=O.valueOf(r.y).selfSubtract(n.y).selfMultiply(O.valueOf(e.x).selfSubtract(t.x)),o=O.valueOf(r.x).selfSubtract(n.x).selfMultiply(O.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=O.valueOf(r.x).selfSubtract(n.x).selfMultiply(O.valueOf(t.y).selfSubtract(n.y)),l=O.valueOf(r.y).selfSubtract(n.y).selfMultiply(O.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=O.valueOf(t.x).selfAdd(O.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=O.valueOf(e.x).selfSubtract(t.x).selfMultiply(O.valueOf(t.y).selfSubtract(n.y)),f=O.valueOf(e.y).selfSubtract(t.y).selfMultiply(O.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue();return new b(c,O.valueOf(n.y).selfAdd(O.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue())},N.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(0<i){if(o<=0)return N.signum(a);r=i+o}else{if(!(i<0))return N.signum(a);if(0<=o)return N.signum(a);r=-i-o}var s=N.DP_SAFE_EPSILON*r;return s<=a||s<=-a?N.signum(a):2},N.signum=function(t){return 0<t?1:t<0?-1:0},N.DP_SAFE_EPSILON=1e-15,e(D.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[i]},getClass:function(){return D}}),D.X=0,D.Y=1,D.Z=2,D.M=3,A.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},A.getProperty=function(t){return{"line.separator":"\n"}[t]},e(R.prototype,{getY:function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new k;return t},getX:function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new k;return t},getCoordinate:function(){var t=new b;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return R}}),R.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,f=(s*a-i*u)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(f)||_.isInfinite(f))throw new k;return new b(h,f)},e(F.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:S(arguments[0],D)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return F}}),e(j.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return j}}),e(B.prototype,{isGeometryCollection:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof B))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(B.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION)throw new h("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new L(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===B.SORTINDEX_MULTIPOINT||this.getSortIndex()===B.SORTINDEX_MULTILINESTRING||this.getSortIndex()===B.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[i,n,a]},getClass:function(){return B}}),B.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},B.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},B.serialVersionUID=0x799ea46522854c00,B.SORTINDEX_POINT=0,B.SORTINDEX_MULTIPOINT=1,B.SORTINDEX_LINESTRING=2,B.SORTINDEX_LINEARRING=3,B.SORTINDEX_MULTILINESTRING=4,B.SORTINDEX_POLYGON=5,B.SORTINDEX_MULTIPOLYGON=6,B.SORTINDEX_GEOMETRYCOLLECTION=7,B.geometryChangedFilter={interfaces_:function(){return[j]},filter:function(t){t.geometryChangedAction()}},e(z.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return z}}),e(q.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return q}}),e(U.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[q]},getClass:function(){return U}}),e(G.prototype,{isInBoundary:function(t){return 0<t},interfaces_:function(){return[q]},getClass:function(){return G}}),e(V.prototype,{isInBoundary:function(t){return 1<t},interfaces_:function(){return[q]},getClass:function(){return V}}),e(H.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[q]},getClass:function(){return H}}),q.Mod2BoundaryNodeRule=U,q.EndPointBoundaryNodeRule=G,q.MultiValentEndPointBoundaryNodeRule=V,q.MonoValentEndPointBoundaryNodeRule=H,q.MOD2_BOUNDARY_RULE=new U,q.ENDPOINT_BOUNDARY_RULE=new G,q.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new V,q.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new H,q.OGC_SFS_BOUNDARY_RULE=q.MOD2_BOUNDARY_RULE,e(W.prototype,{interfaces_:function(){return[]},getClass:function(){return W}}),W.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},W.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(W.indexOf(r,e)<0)return r}return null},W.scroll=function(t,e){var n=W.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);A.arraycopy(t,n,r,0,t.length-n),A.arraycopy(t,0,r,t.length-n,n),A.arraycopy(r,0,t,0,t.length)},W.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(n=0;n<r.length;n++)if(0!==o.compare(r[n],i[n]))return!1;return!0}},W.intersection=function(t,e){for(var n=new w,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},W.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},W.removeRepeatedPoints=function(t){return W.hasRepeatedPoints(t)?new w(t,!1).toCoordinateArray():t},W.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},W.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;var i=0;for(n=0;n<t.length;n++)null!==t[n]&&(r[i++]=t[n]);return r},W.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new b(t[n]);return e}if(5===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4];for(n=0;n<s;n++)o[a+n]=new b(r[i+n])}},W.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},W.envelope=function(t){for(var e=new L,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},W.toCoordinateArray=function(t){return t.toArray(W.coordArrayType)},W.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},W.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},W.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},W.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},W.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},W.extract=function(t,e,n){e=M.clamp(e,0,t.length);var r=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},e(X.prototype,{compare:function(t,e){return W.compare(t,e)},interfaces_:function(){return[o]},getClass:function(){return X}}),e(Y.prototype,{compare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=W.compare(n,r);return W.isEqualReversed(n,r)?0:i},OLDcompare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=W.increasingDirection(n),o=W.increasingDirection(r),a=0<i?0:n.length-1,s=0<o?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},interfaces_:function(){return[o]},getClass:function(){return Y}}),W.ForwardComparator=X,W.BidirectionalComparator=Y,W.coordArrayType=new Array(0).fill(null),$.prototype.get=function(){},$.prototype.put=function(){},$.prototype.size=function(){},$.prototype.values=function(){},$.prototype.entrySet=function(){},Z.prototype=new $,(Q.prototype=new m).contains=function(){},(K.prototype=new Q).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},K.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},K.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},K.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},K.prototype.size=function(){return this.array_.length},K.prototype.isEmpty=function(){return 0===this.array_.length},K.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},K.prototype.iterator=function(){return new Fo(this)};var Fo=function(t){this.hashSet_=t,this.position_=0};Fo.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new d;return this.hashSet_.array_[this.position_++]},Fo.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Fo.prototype.remove=function(){throw new g};var jo=0;(it.prototype=new Z).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},it.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:jo,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:jo,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},it.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;)if(tt(t)==nt(tt(tt(t)))){1==J(e=rt(tt(tt(t))))?(et(tt(t),jo),et(e,jo),et(tt(tt(t)),1),t=tt(tt(t))):(t==rt(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),jo),et(tt(tt(t)),1),this.rotateRight(tt(tt(t))))}else{var e;1==J(e=nt(tt(tt(t))))?(et(tt(t),jo),et(e,jo),et(tt(tt(t)),1),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),jo),et(tt(tt(t)),1),this.rotateLeft(tt(tt(t))))}this.root_.color=jo},it.prototype.values=function(){var t=new x,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=it.successor(e));)t.add(e.value);return t},it.prototype.entrySet=function(){var t=new K,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=it.successor(e));)t.add(e);return t},it.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e}},it.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e}},it.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},it.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)e=(n=e).parent;return e},it.prototype.size=function(){return this.size_},e(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),at.prototype=new Q,(st.prototype=new at).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},st.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},st.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},st.prototype.remove=function(t){throw new g},st.prototype.size=function(){return this.array_.length},st.prototype.isEmpty=function(){return 0===this.array_.length},st.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},st.prototype.iterator=function(){return new Bo(this)};var Bo=function(t){this.treeSet_=t,this.position_=0};Bo.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new d;return this.treeSet_.array_[this.position_++]},Bo.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Bo.prototype.remove=function(){throw new g},lt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)return r=function(t,e){return t.compareTo(e)},void i.sort(r);if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else{if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}if(4===arguments.length){for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}}},lt.asList=function(t){for(var e=new x,n=0,r=t.length;n<r;n++)e.add(t[n]);return e},e(ut.prototype,{interfaces_:function(){return[]},getClass:function(){return ut}}),ut.toDimensionSymbol=function(t){switch(t){case ut.FALSE:return ut.SYM_FALSE;case ut.TRUE:return ut.SYM_TRUE;case ut.DONTCARE:return ut.SYM_DONTCARE;case ut.P:return ut.SYM_P;case ut.L:return ut.SYM_L;case ut.A:return ut.SYM_A}throw new h("Unknown dimension value: "+t)},ut.toDimensionValue=function(t){switch(T.toUpperCase(t)){case ut.SYM_FALSE:return ut.FALSE;case ut.SYM_TRUE:return ut.TRUE;case ut.SYM_DONTCARE:return ut.DONTCARE;case ut.SYM_P:return ut.P;case ut.SYM_L:return ut.L;case ut.SYM_A:return ut.A}throw new h("Unknown dimension symbol: "+t)},ut.P=0,ut.L=1,ut.A=2,ut.FALSE=-1,ut.TRUE=-2,ut.DONTCARE=-3,ut.SYM_FALSE="F",ut.SYM_TRUE="T",ut.SYM_DONTCARE="*",ut.SYM_P="0",ut.SYM_L="1",ut.SYM_A="2",e(ct.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ct}}),e(ht.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ht}}),s(ft,B),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new L,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return B.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var r=0;r<this.geometries.length;r++)if(!this.geometries[r].equalsExact(n.geometries[r],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();lt.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=ut.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=ut.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new st(lt.asList(this.geometries)),n=new st(lt.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),l=0;l<a&&l<s;){var u=this.getGeometryN(l),c=o.getGeometryN(l),h=u.compareToSameClass(c,i);if(0!==h)return h;l++}return l<a?1:l<s?-1:0}},apply:function(){if(S(arguments[0],z))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(S(arguments[0],ht)){var n=arguments[0];if(0===this.geometries.length)return null;for(e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(S(arguments[0],ct)){var r=arguments[0];r.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}else if(S(arguments[0],j)){var i=arguments[0];i.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}},getBoundary:function(){return this.checkNotGeometryCollection(this),p.shouldNeverReachHere(),null},clone:function(){var t=B.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,s(pt,ft),e(pt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?ut.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new dt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new pt(t,this.factory)},interfaces_:function(){return[ot]},getClass:function(){return pt}}),pt.serialVersionUID=0x7155d2ab4afa8000,e(dt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof Lt?this.boundaryLineString(this.geom):this.geom instanceof pt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){return this.geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint():this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new x;this.endpointMap=new it;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this.endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this.bnRule.isInBoundary(a)&&e.add(o.getKey())}return W.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new gt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.getBoundary=function(){return 1===arguments.length?new dt(arguments[0]).getBoundary():2===arguments.length?new dt(arguments[0],arguments[1]).getBoundary():void 0},e(gt.prototype,{interfaces_:function(){return[]},getClass:function(){return gt}}),e(xt.prototype,{interfaces_:function(){return[]},getClass:function(){return xt}}),xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return new String(n)},xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new _t,n=new mt(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new bt(new yt(xt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+xt.NEWLINE}catch(t){if(!(t instanceof vt))throw t;p.shouldNeverReachHere()}return o}},xt.split=function(t,e){for(var n=e.length,r=new x,i=""+t,o=i.indexOf(e);0<=o;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},xt.toString=function(){if(1===arguments.length){var t=arguments[0];return xt.SIMPLE_ORDINATE_FORMAT.format(t)}},xt.spaces=function(t){return xt.chars(" ",t)},xt.NEWLINE=A.getProperty("line.separator"),xt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),e(wt.prototype,{interfaces_:function(){return[]},getClass:function(){return wt}}),wt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,D.X)===t.getOrdinate(e-1,D.X)&&t.getOrdinate(0,D.Y)===t.getOrdinate(e-1,D.Y))},wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(a)&&_.isNaN(s)))return!1}return!0},wt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(wt.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)wt.copy(e,i-1,r,o,1);return r},wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)wt.swap(t,r,e-r)},wt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},wt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)wt.copyCoord(t,e+o,n,r+o)},wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new P;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},wt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?wt.createClosedRing(t,e,4):e.getOrdinate(0,D.X)===e.getOrdinate(n-1,D.X)&&e.getOrdinate(0,D.Y)===e.getOrdinate(n-1,D.Y)?e:wt.createClosedRing(t,e,n+1)},wt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();wt.copy(e,0,r,0,i);for(var o=i;o<n;o++)wt.copy(e,0,r,o,1);return r},s(Lt,B),e(Lt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new L:this.points.expandEnvelope(new L)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return B.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var r=0;r<this.points.size();r++)if(!this.equal(this.points.getCoordinate(r),n.points.getCoordinate(r),e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return 0<this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))&&wt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?ut.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Zt.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();return wt.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this.points.size()&&n<t.points.size();){var r=this.points.getCoordinate(e).compareTo(t.points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this.points.size()?1:n<t.points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.points,t.points)}},apply:function(){if(S(arguments[0],z))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(S(arguments[0],ht)){var n=arguments[0];if(0===this.points.size())return null;for(e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(S(arguments[0],ct)){arguments[0].filter(this)}else if(S(arguments[0],j)){arguments[0].filter(this)}},getBoundary:function(){return new dt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof Lt},clone:function(){var t=B.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new Lt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new h("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[ot]},getClass:function(){return Lt}}),Lt.serialVersionUID=0x2b2b51ba435c8e00,e(Ct.prototype,{interfaces_:function(){return[]},getClass:function(){return Ct}}),s(kt,B),e(kt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new L;var t=new L;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return B.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return ut.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.coordinates,t.coordinates)}},apply:function(){if(S(arguments[0],z)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(S(arguments[0],ht)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(S(arguments[0],ct)){arguments[0].filter(this)}else if(S(arguments[0],j)){arguments[0].filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=B.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new kt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),p.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Ct]},getClass:function(){return kt}}),kt.serialVersionUID=0x44077bad161cbc00,e(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),s(St,B),e(St.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return B.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this.holes.length;i++)for(var o=this.holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},getArea:function(){var t=0;t+=Math.abs(Zt.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(Zt.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){if((o=t.getX(n))!==e.getMinX()&&o!==e.getMaxX())return!1;if((a=t.getY(n))!==e.getMinY()&&a!==e.getMaxY())return!1}var r=t.getX(0),i=t.getY(0);for(n=1;n<=4;n++){var o,a;if((o=t.getX(n))!==r===((a=t.getY(n))!==i))return!1;r=o,i=a}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this.shell,i=n.shell;if(!r.equalsExact(i,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);lt.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);A.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=W.minCoordinate(e.getCoordinates());W.scroll(r,i),A.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Zt.isCCW(e.getCoordinates())===n&&W.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=(e=this.shell,n=o.shell,e.compareToSameClass(n,i));if(0!==a)return a;for(var s=this.getNumInteriorRing(),l=o.getNumInteriorRing(),u=0;u<s&&u<l;){var c=this.getInteriorRingN(u),h=o.getInteriorRingN(u),f=c.compareToSameClass(h,i);if(0!==f)return f;u++}return u<s?1:u<l?-1:0}},apply:function(){if(S(arguments[0],z)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(S(arguments[0],ht)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(S(arguments[0],ct)){arguments[0].filter(this)}else if(S(arguments[0],j)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(e=0;e<this.holes.length;e++)this.holes[e].apply(r)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=B.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new St(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Et]},getClass:function(){return St}}),St.serialVersionUID=-0x307ffefd8dc97200,s(Mt,ft),e(Mt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ft.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return ut.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Mt(t,this.factory)},interfaces_:function(){return[Ct]},getClass:function(){return Mt}}),Mt.serialVersionUID=-0x6fb1ed4162e0fc00,s(Pt,Lt),e(Pt.prototype,{getSortIndex:function(){return B.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return ut.FALSE},isClosed:function(){return!!this.isEmpty()||Lt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();return wt.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!Lt.prototype.isClosed.call(this))throw new h("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<Pt.MINIMUM_VALID_SIZE)throw new h("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Pt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.MINIMUM_VALID_SIZE=4,Pt.serialVersionUID=-0x3b229e262367a600,s(It,ft),e(It.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new x,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new It(t,this.factory)},interfaces_:function(){return[Et]},getClass:function(){return It}}),It.serialVersionUID=-0x7a5aa1369171980,e(Tt.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof St?this.editPolygon(t,e):t instanceof kt?e.edit(t,this.factory):t instanceof Lt?e.edit(t,this.factory):(p.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),r=new x,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Mt?this.factory.createMultiPoint(r.toArray([])):n.getClass()===pt?this.factory.createMultiLineString(r.toArray([])):n.getClass()===It?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this.factory.createPolygon();for(var i=new x,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this.factory.createPolygon(r,i.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Tt}}),Tt.GeometryEditorOperation=Ot,e(Nt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Ot]},getClass:function(){return Nt}}),e(Dt.prototype,{edit:function(t,e){if(t instanceof Pt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Lt)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof kt){var n=this.editCoordinates(t.getCoordinates(),t);return 0<n.length?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Ot]},getClass:function(){return Dt}}),e(At.prototype,{edit:function(t,e){return t instanceof Pt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Lt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Ot]},getClass:function(){return At}}),Tt.NoOpGeometryOperation=Nt,Tt.CoordinateOperation=Dt,Tt.CoordinateSequenceOperation=At,e(Rt.prototype,{setOrdinate:function(t,e,n){switch(e){case D.X:this.coordinates[t].x=n;break;case D.Y:this.coordinates[t].y=n;break;case D.Z:this.coordinates[t].z=n;break;default:throw new h("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case D.X:return this.coordinates[t].x;case D.Y:return this.coordinates[t].y;case D.Z:return this.coordinates[t].z}return _.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new b(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Rt(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Rt(t,this.dimension)},toString:function(){if(0<this.coordinates.length){var t=new P(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[D,a]},getClass:function(){return Rt}}),Rt.serialVersionUID=-0xcb44a778db18e00,e(Ft.prototype,{readResolve:function(){return Ft.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Rt(arguments[0]);if(S(arguments[0],D))return new Rt(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return 3<e&&(e=3),e<2?new Rt(t):new Rt(t,e)}},interfaces_:function(){return[F,a]},getClass:function(){return Ft}}),Ft.instance=function(){return Ft.instanceObject},Ft.serialVersionUID=-0x38e49fa6cf6f2e00,Ft.instanceObject=new Ft;var zo,qo=Object.defineProperty,Uo=function(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t))):new n(t)}return e||qo(t,"size",{get:Bt}),(t.constructor=n).prototype=t,n}({delete:function(t){return this.has(t)&&(this._keys.splice(zo,1),this._values.splice(zo,1),this._itp.forEach(function(t){zo<t[0]&&t[0]--})),-1<zo},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(zo=t.length;zo--&&(n=t[zo])!==(r=e)&&(n==n||r==r););else zo=t.indexOf(e);var n,r;return-1<zo}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[zo]:void 0},set:function(t,e){return this.has(t)?this._values[zo]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return jt(this._itp,this._keys)},values:function(){return jt(this._itp,this._values)},entries:function(){return jt(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}}),Go="undefined"!=typeof Map&&Map.prototype.values?Map:Uo;(zt.prototype=new $).get=function(t){return this.map_.get(t)||null},zt.prototype.put=function(t,e){return this.map_.set(t,e),e},zt.prototype.values=function(){for(var t=new x,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},zt.prototype.entrySet=function(){var e=new K;return this.map_.entries().forEach(function(t){return e.add(t)}),e},zt.prototype.size=function(){return this.map_.size()},e(qt.prototype,{equals:function(t){if(!(t instanceof qt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new I(n).compareTo(new I(r))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===qt.FLOATING||this.modelType===qt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===qt.FLOATING?t="Floating":this.modelType===qt.FLOATING_SINGLE?t="Floating-Single":this.modelType===qt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)?t:this.modelType===qt.FLOATING_SINGLE?t:this.modelType===qt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof b){var e=arguments[0];if(this.modelType===qt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===qt.FLOATING?t=16:this.modelType===qt.FLOATING_SINGLE?t=6:this.modelType===qt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[a,n]},getClass:function(){return qt}}),qt.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},e(Ut.prototype,{readResolve:function(){return Ut.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[a]},getClass:function(){return Ut}}),Ut.serialVersionUID=-552860263173159e4,Ut.nameToTypeMap=new zt,qt.Type=Ut,qt.serialVersionUID=0x6bee6404e9a25c00,qt.FIXED=new Ut("FIXED"),qt.FLOATING=new Ut("FLOATING"),qt.FLOATING_SINGLE=new Ut("FLOATING SINGLE"),qt.maximumPreciseValue=9007199254740992,e(Gt.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new b(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new b(t.getMinX(),t.getMinY()),new b(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new b(t.getMinX(),t.getMinY()),new b(t.getMinX(),t.getMaxY()),new b(t.getMaxX(),t.getMaxY()),new b(t.getMaxX(),t.getMinY()),new b(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(S(arguments[0],D))return new Lt(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new pt(null,this):1===arguments.length?new pt(arguments[0],this):void 0},buildGeometry:function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Gt.toGeometryArray(t));var s=t.iterator().next();if(1<t.size()){if(s instanceof St)return this.createMultiPolygon(Gt.toPolygonArray(t));if(s instanceof Lt)return this.createMultiLineString(Gt.toLineStringArray(t));if(s instanceof kt)return this.createMultiPoint(Gt.toPointArray(t));p.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof b){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(S(arguments[0],D))return new kt(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new St(null,null,this);if(1===arguments.length){if(S(arguments[0],D)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Pt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){return new St(arguments[0],arguments[1],this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){return 0===arguments.length?new ft(null,this):1===arguments.length?new ft(arguments[0],this):void 0},createGeometry:function(t){return new Tt(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(S(arguments[0],D))return new Pt(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new It(null,this):1===arguments.length?new It(arguments[0],this):void 0},createMultiPoint:function(){if(0===arguments.length)return new Mt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Mt(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(S(arguments[0],D)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());wt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},interfaces_:function(){return[a]},getClass:function(){return Gt}}),Gt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.getDefaultCoordinateSequenceFactory=function(){return Ft.instance()},Gt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Gt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Gt.serialVersionUID=-0x5ea75f2051eeb400;var Vo={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(Vt.prototype,{read:function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Vo.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Vo.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Wo[n]&&(e=Wo[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!Ho[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ho[e].apply(this,[t])+")"}});var Ho={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ho.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push("("+Ho.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;n<r;++n)e.push(Ho.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;n<r;++n)e.push(Ho.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push("("+Ho.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ho.linestring.apply(this,[t.shell])+")");for(var n=0,r=t.holes.length;n<r;++n)e.push("("+Ho.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push("("+Ho.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Wo={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Vo.spaces);return this.geometryFactory.createPoint(new b(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Vo.trimParens,"$1"),r.push(Wo.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Vo.spaces),r.push(new b(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Vo.spaces),r.push(new b(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Vo.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Vo.trimParens,"$1"),r.push(Wo.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Vo.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(Vo.trimParens,"$1"),n=Wo.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n.points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Vo.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Vo.trimParens,"$1"),r.push(Wo.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};e(Ht.prototype,{write:function(t){return this.parser.write(t)}}),e(Ht,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(Wt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new P;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,r){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(t,e,n,r)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0);this.getEdgeDistance(t,1)<e?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Wt.NO_INTERSECTION},getEdgeDistance:function(t,e){return Wt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},isCollinear:function(){return this.result===Wt.COLLINEAR_INTERSECTION},toString:function(){return Ht.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Ht.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return Wt}}),Wt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i<r?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=i<r?a:s)||t.equals(e)||(o=Math.max(a,s))}return p.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Wt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return p.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Wt.DONT_INTERSECT=0,Wt.DO_INTERSECT=1,Wt.COLLINEAR=2,Wt.NO_INTERSECTION=0,Wt.POINT_INTERSECTION=1,Wt.COLLINEAR_INTERSECTION=2,s(Xt,Wt),e(Xt.prototype,{isInSegmentEnvelopes:function(t){var e=new L(this.inputLines[0][0],this.inputLines[0][1]),n=new L(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return Wt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,L.intersects(e,n,t)&&0===Zt.orientationIndex(e,n,t)&&0===Zt.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=Wt.POINT_INTERSECTION,null):void(this.result=Wt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},safeHCoordinateIntersection:function(e,n,r,i){var o=null;try{o=R.intersection(e,n,r,i)}catch(t){if(!(t instanceof k))throw t;o=Xt.nearestEndpoint(e,n,r,i)}return o},intersection:function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new b(Xt.nearestEndpoint(t,e,n,r))),null!==this.precisionModel&&this.precisionModel.makePrecise(i),i},smallestInAbsValue:function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},checkDD:function(t,e,n,r,i){var o=N.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);A.out.println("DD in env = "+a+"  --------------------- "+o),1e-4<i.distance(o)&&A.out.println("Distance = "+i.distance(o))},intersectionWithNormalization:function(t,e,n,r){var i=new b(t),o=new b(e),a=new b(n),s=new b(r),l=new b;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},computeCollinearIntersection:function(t,e,n,r){var i=L.intersects(t,e,n),o=L.intersects(t,e,r),a=L.intersects(n,r,t),s=L.intersects(n,r,e);return i&&o?(this.intPt[0]=n,this.intPt[1]=r,Wt.COLLINEAR_INTERSECTION):a&&s?(this.intPt[0]=t,this.intPt[1]=e,Wt.COLLINEAR_INTERSECTION):i&&a?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||s?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):i&&s?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||a?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):o&&a?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||i||s?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):o&&s?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||i||a?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):Wt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((u<o?o:u)+(s<h?s:h))/2,d=((c<a?a:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},computeIntersect:function(t,e,n,r){if(this._isProper=!1,!L.intersects(t,e,n,r))return Wt.NO_INTERSECTION;var i=Zt.orientationIndex(t,e,n),o=Zt.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return Wt.NO_INTERSECTION;var a=Zt.orientationIndex(n,r,t),s=Zt.orientationIndex(n,r,e);return 0<a&&0<s||a<0&&s<0?Wt.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:0===i?this.intPt[0]=new b(n):0===o?this.intPt[0]=new b(r):0===a?this.intPt[0]=new b(t):0===s&&(this.intPt[0]=new b(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,r)),Wt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Xt}}),Xt.nearestEndpoint=function(t,e,n,r){var i=t,o=Zt.distancePointLine(t,n,r),a=Zt.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=Zt.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=Zt.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e(Yt.prototype,{interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return Yt.signOfDet2x2(r,i,o,a)},Yt.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:0<e?0<n?-i:i:0<n?i:-i;if(0===e||0===n)return 0<r?0<t?i:-i:0<t?-i:i;if(0<e?0<r?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):0<r?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):r<=e?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),0<t){if(!(0<n))return i;if(!(t<=n))return i}else{if(0<n)return-i;if(!(n<=t))return-i;i=-i,t=-t,n=-n}for(;;){if(1,(r-=(a=Math.floor(n/t))*e)<0)return-i;if(e<r)return i;if((n-=a*t)+n<t){if(e<r+r)return i}else{if(r+r<e)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(r<e)return-i;if((t-=a*n)+t<n){if(r<e+e)return-i}else{if(e+e<r)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}},e($t.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var i=t.x-this.p.x,o=t.y-this.p.y,a=e.x-this.p.x,s=e.y-this.p.y,l=Yt.signOfDet2x2(i,o,a,s);if(0===l)return this.isPointOnSegment=!0,null;s<o&&(l=-l),0<l&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==E.EXTERIOR},getLocation:function(){return this.isPointOnSegment?E.BOUNDARY:this.crossingCount%2==1?E.INTERIOR:E.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return $t}}),$t.locatePointInRing=function(){if(arguments[0]instanceof b&&S(arguments[1],D)){for(var t=arguments[0],e=arguments[1],n=new $t(t),r=new b,i=new b,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof b&&arguments[1]instanceof Array){var a=arguments[0],s=arguments[1];for(n=new $t(a),o=1;o<s.length;o++){r=s[o],i=s[o-1];if(n.countSegment(r,i),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(Zt.prototype,{interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.orientationIndex=function(t,e,n){return N.orientationIndex(t,e,n)},Zt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(S(arguments[0],D)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new b,u=new b,c=new b;a.getCoordinate(0,u),a.getCoordinate(1,c);n=u.x;c.x-=n;for(e=0,r=1;r<s-1;r++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(r+1,c),c.x-=n,e+=u.x*(l.y-c.y);return e/2}},Zt.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Zt.distancePointLine(t,n,r);if(n.equals(r))return Zt.distancePointLine(r,t,e);var i=!1;if(L.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||1<l||s<0||1<s)&&(i=!0)}}else i=!0;return i?M.min(Zt.distancePointLine(t,n,r),Zt.distancePointLine(e,n,r),Zt.distancePointLine(n,t,e),Zt.distancePointLine(r,t,e)):0},Zt.isPointInRing=function(t,e){return Zt.locatePointInRing(t,e)!==E.EXTERIOR},Zt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new b;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},Zt.isCCW=function(t){var e=t.length-1;if(e<3)throw new h("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var a=r;(a-=1)<0&&(a=e),t[a].equals2D(n)&&a!==r;);for(var s=r;t[s=(s+1)%e].equals2D(n)&&s!==r;);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=Zt.computeOrientation(l,n,u);return 0===c?l.x>u.x:0<c},Zt.locatePointInRing=function(t,e){return $t.locatePointInRing(t,e)},Zt.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Zt.computeOrientation=function(t,e,n){return Zt.orientationIndex(t,e,n)},Zt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new h("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Zt.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(1<=u)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},Zt.isOnLine=function(t,e){for(var n=new Xt,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Zt.RIGHT=Zt.CLOCKWISE=-1,Zt.LEFT=Zt.COUNTERCLOCKWISE=1,Zt.STRAIGHT=Zt.COLLINEAR=0,e(Qt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Qt){var t=arguments[0],e=Zt.orientationIndex(this.p0,this.p1,t.p0),n=Zt.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof b){var r=arguments[0];return Zt.orientationIndex(this.p0,this.p1,r)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof Qt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Xt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof b){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new b(t);var e=this.projectionFactor(t),n=new b;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Qt){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),1<i&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),1<o&&(s=this.p1),new Qt(a,s)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return Zt.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Qt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},closestPoint:function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return R.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof k))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new b(n-l,r+s)},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||_.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Qt){var t=arguments[0];return Zt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof b){var e=arguments[0];return Zt.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new b;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},interfaces_:function(){return[n,a]},getClass:function(){return Qt}}),Qt.midPoint=function(t,e){return new b((t.x+e.x)/2,(t.y+e.y)/2)},Qt.serialVersionUID=0x2d2172135f411c00,e(Kt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])||Kt.isTrue(this.matrix[E.INTERIOR][E.BOUNDARY])||Kt.isTrue(this.matrix[E.BOUNDARY][E.INTERIOR])||Kt.isTrue(this.matrix[E.BOUNDARY][E.BOUNDARY]))&&this.matrix[E.EXTERIOR][E.INTERIOR]===ut.FALSE&&this.matrix[E.EXTERIOR][E.BOUNDARY]===ut.FALSE},isCoveredBy:function(){return(Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])||Kt.isTrue(this.matrix[E.INTERIOR][E.BOUNDARY])||Kt.isTrue(this.matrix[E.BOUNDARY][E.INTERIOR])||Kt.isTrue(this.matrix[E.BOUNDARY][E.BOUNDARY]))&&this.matrix[E.INTERIOR][E.EXTERIOR]===ut.FALSE&&this.matrix[E.BOUNDARY][E.EXTERIOR]===ut.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.matrix[n][r]=ut.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.matrix[i][o]=a}},isContains:function(){return Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])&&this.matrix[E.EXTERIOR][E.INTERIOR]===ut.FALSE&&this.matrix[E.EXTERIOR][E.BOUNDARY]===ut.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,ut.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.matrix[i][o]<a&&(this.matrix[i][o]=a)}},setAtLeastIfValid:function(t,e,n){0<=t&&0<=e&&this.setAtLeast(t,e,n)},isWithin:function(){return Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])&&this.matrix[E.INTERIOR][E.EXTERIOR]===ut.FALSE&&this.matrix[E.BOUNDARY][E.EXTERIOR]===ut.FALSE},isTouches:function(t,e){return e<t?this.isTouches(e,t):(t===ut.A&&e===ut.A||t===ut.L&&e===ut.L||t===ut.L&&e===ut.A||t===ut.P&&e===ut.A||t===ut.P&&e===ut.L)&&(this.matrix[E.INTERIOR][E.INTERIOR]===ut.FALSE&&(Kt.isTrue(this.matrix[E.INTERIOR][E.BOUNDARY])||Kt.isTrue(this.matrix[E.BOUNDARY][E.INTERIOR])||Kt.isTrue(this.matrix[E.BOUNDARY][E.BOUNDARY])))},isOverlaps:function(t,e){return t===ut.P&&e===ut.P||t===ut.A&&e===ut.A?Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])&&Kt.isTrue(this.matrix[E.INTERIOR][E.EXTERIOR])&&Kt.isTrue(this.matrix[E.EXTERIOR][E.INTERIOR]):t===ut.L&&e===ut.L&&(1===this.matrix[E.INTERIOR][E.INTERIOR]&&Kt.isTrue(this.matrix[E.INTERIOR][E.EXTERIOR])&&Kt.isTrue(this.matrix[E.EXTERIOR][E.INTERIOR]))},isEquals:function(t,e){return t===e&&(Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])&&this.matrix[E.INTERIOR][E.EXTERIOR]===ut.FALSE&&this.matrix[E.BOUNDARY][E.EXTERIOR]===ut.FALSE&&this.matrix[E.EXTERIOR][E.INTERIOR]===ut.FALSE&&this.matrix[E.EXTERIOR][E.BOUNDARY]===ut.FALSE)},toString:function(){for(var t=new P("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,ut.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new h("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!Kt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[E.INTERIOR][E.INTERIOR]===ut.FALSE&&this.matrix[E.INTERIOR][E.BOUNDARY]===ut.FALSE&&this.matrix[E.BOUNDARY][E.INTERIOR]===ut.FALSE&&this.matrix[E.BOUNDARY][E.BOUNDARY]===ut.FALSE},isCrosses:function(t,e){return t===ut.P&&e===ut.L||t===ut.P&&e===ut.A||t===ut.L&&e===ut.A?Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])&&Kt.isTrue(this.matrix[E.INTERIOR][E.EXTERIOR]):t===ut.L&&e===ut.P||t===ut.A&&e===ut.P||t===ut.A&&e===ut.L?Kt.isTrue(this.matrix[E.INTERIOR][E.INTERIOR])&&Kt.isTrue(this.matrix[E.EXTERIOR][E.INTERIOR]):t===ut.L&&e===ut.L&&0===this.matrix[E.INTERIOR][E.INTERIOR]},interfaces_:function(){return[i]},getClass:function(){return Kt}}),Kt.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===ut.SYM_DONTCARE||(e===ut.SYM_TRUE&&(0<=t||t===ut.TRUE)||(e===ut.SYM_FALSE&&t===ut.FALSE||(e===ut.SYM_P&&t===ut.P||(e===ut.SYM_L&&t===ut.L||e===ut.SYM_A&&t===ut.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return new Kt(n).matches(r)}},Kt.isTrue=function(t){return 0<=t||t===ut.TRUE};var Xo=Object.freeze({Coordinate:b,CoordinateList:w,Envelope:L,LineSegment:Qt,GeometryFactory:Gt,Geometry:B,Point:kt,LineString:Lt,LinearRing:Pt,Polygon:St,GeometryCollection:ft,MultiPoint:Mt,MultiLineString:pt,MultiPolygon:It,Dimension:ut,IntersectionMatrix:Kt});e(Jt.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);if(0!==r){e+=r;var i=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=r*i;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=r*o}}this.totalLength+=e,0===e&&0<t.length&&this.addPoint(t[0])},addHole:function(t){for(var e=Zt.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new b;if(0<Math.abs(this.areasum2))t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(0<this.totalLength)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(0<this.ptCount))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){0<t.length&&this.setBasePoint(t[0]);for(var e=!Zt.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,r){var i=r?1:-1;Jt.centroid3(t,e,n,this.triangleCent3);var o=Jt.area2(t,e,n);this.cg3.x+=i*o*this.triangleCent3.x,this.cg3.y+=i*o*this.triangleCent3.y,this.areasum2+=i*o},add:function(){if(arguments[0]instanceof St){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof B){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof kt)this.addPoint(n.getCoordinate());else if(n instanceof Lt)this.addLineSegments(n.getCoordinates());else if(n instanceof St){var r=n;this.add(r)}else if(n instanceof ft){var i=n;for(e=0;e<i.getNumGeometries();e++)this.add(i.getGeometryN(e))}}},interfaces_:function(){return[]},getClass:function(){return Jt}}),Jt.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},Jt.centroid3=function(t,e,n,r){return r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y,null},Jt.getCentroid=function(t){return new Jt(t).getCentroid()},(te.prototype=new Error).name="EmptyStackException",(ee.prototype=new y).add=function(t){return this.array_.push(t),!0},ee.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ee.prototype.push=function(t){return this.array_.push(t),t},ee.prototype.pop=function(t){if(0===this.array_.length)throw new te;return this.array_.pop()},ee.prototype.peek=function(){if(0===this.array_.length)throw new te;return this.array_[this.array_.length-1]},ee.prototype.empty=function(){return 0===this.array_.length},ee.prototype.isEmpty=function(){return this.empty()},ee.prototype.search=function(t){return this.array_.indexOf(t)},ee.prototype.size=function(){return this.array_.length},ee.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e(ne.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[z]},getClass:function(){return ne}}),ne.filterCoordinates=function(t){for(var e=new ne,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(re.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return lt.sort(t,1,t.length,new ie(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new w;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){p.equals(t[0],t[t.length-1]);for(var e=new x,n=null,r=0;r<=t.length-2;r++){var i=t[r],o=t[r+1];i.equals(o)||null!==n&&this.isBetween(n,i,o)||(e.add(i),n=i)}e.add(t[t.length-1]);var a=new Array(e.size()).fill(null);return e.toArray(a)},isBetween:function(t,e,n){if(0!==Zt.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new st,r=0;r<e.length;r++)n.add(e[r]);for(r=0;r<t.length;r++)Zt.isPointInRing(t[r],e)||n.add(t[r]);var i=W.toCoordinateArray(n);return i.length<3?this.padArray3(i):i},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;50<this.inputPts.length&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var r=1;r<t.length;r++)t[r].x<e[0].x&&(e[0]=t[r]),t[r].x-t[r].y<e[1].x-e[1].y&&(e[1]=t[r]),t[r].y>e[2].y&&(e[2]=t[r]),t[r].x+t[r].y>e[3].x+e[3].y&&(e[3]=t[r]),t[r].x>e[4].x&&(e[4]=t[r]),t[r].x-t[r].y>e[5].x-e[5].y&&(e[5]=t[r]),t[r].y<e[6].y&&(e[6]=t[r]),t[r].x+t[r].y<e[7].x+e[7].y&&(e[7]=t[r]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=t.get(n);e[n]=r}return e},grahamScan:function(t){var e=null,n=new ee;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var r=3;r<t.length;r++){for(e=n.pop();!n.empty()&&0<Zt.computeOrientation(n.peek(),e,t[r]);)e=n.pop();e=n.push(e),e=n.push(t[r])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return re}}),re.extractCoordinates=function(t){var e=new ne;return t.apply(e),e.getCoordinates()},e(ie.prototype,{compare:function(t,e){var n=t,r=e;return ie.polarCompare(this.origin,n,r)},interfaces_:function(){return[o]},getClass:function(){return ie}}),ie.polarCompare=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,a=n.y-t.y,s=Zt.computeOrientation(t,e,n);if(s===Zt.COUNTERCLOCKWISE)return 1;if(s===Zt.CLOCKWISE)return-1;var l=r*r+i*i,u=o*o+a*a;return l<u?-1:u<l?1:0},re.RadialComparator=ie,e(oe.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof Pt&&!r.isEmpty()||(n=!1);for(var i=new x,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Pt||(n=!1),i.add(a))}if(n)return this.factory.createPolygon(r,i.toArray([]));var s=new x;return null!==r&&s.add(r),s.addAll(i),this.factory.buildGeometry(s)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new x,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new x,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new x,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new x,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this.pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(Gt.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof kt)return this.transformPoint(t,null);if(t instanceof Mt)return this.transformMultiPoint(t,null);if(t instanceof Pt)return this.transformLinearRing(t,null);if(t instanceof Lt)return this.transformLineString(t,null);if(t instanceof pt)return this.transformMultiLineString(t,null);if(t instanceof St)return this.transformPolygon(t,null);if(t instanceof It)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new h("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return oe}}),e(ae.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new b(o)),0===r&&this._isClosed&&t.set(t.size()-1,new b(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new w(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new b(i),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this.seg.p0=e.get(i),this.seg.p1=e.get(i+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var o=this.seg.distance(t);o<this.snapTolerance&&o<n&&(n=o,r=i)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return ae}}),ae.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(se.prototype,{snapTo:function(t,e){return new le(e,this.extractTargetCoordinates(t)).transform(this.srcGeom)},snapToSelf:function(t,e){var n=new le(t,this.extractTargetCoordinates(this.srcGeom),!0).transform(this.srcGeom),r=n;return e&&S(r,Et)&&(r=n.buffer(0)),r},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new st,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return se}}),se.snap=function(t,e,n){var r=new Array(2).fill(null),i=new se(t);r[0]=i.snapTo(e,n);var o=new se(e);return r[1]=o.snapTo(r[0],n),r},se.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=se.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===qt.FIXED){var r=1/n.getScale()*2/1.415;e<r&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(se.computeOverlaySnapTolerance(i),se.computeOverlaySnapTolerance(o))}},se.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*se.SNAP_PRECISION_FACTOR},se.snapToSelf=function(t,e,n){return new se(t).snapToSelf(e,n)},se.SNAP_PRECISION_FACTOR=1e-9,s(le,oe),e(le.prototype,{snapLine:function(t,e){var n=new ae(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)},interfaces_:function(){return[]},getClass:function(){return le}}),e(ue.prototype,{getCommon:function(){return _.longBitsToDouble(this.commonBits)},add:function(t){var e=_.doubleToLongBits(t);return this.isFirst?(this.commonBits=e,this.commonSignExp=ue.signExpBits(this.commonBits),this.isFirst=!1,null):ue.signExpBits(e)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=ue.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=ue.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Long.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return ue}}),ue.getBit=function(t,e){return 0!=(t&1<<e)?1:0},ue.signExpBits=function(t){return t>>52},ue.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},ue.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(ue.getBit(t,r)!==ue.getBit(e,r))return n;n++}return 52},e(ce.prototype,{addCommonBits:function(t){var e=new fe(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new b(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new fe(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return ce}}),e(he.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new b(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[z]},getClass:function(){return he}}),e(fe.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ht]},getClass:function(){return fe}}),ce.CommonCoordinateFilter=he,ce.Translater=fe,e(pe.prototype,{next:function(){if(this.atStart)return this.atStart=!1,pe.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new d;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new pe(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[c]},getClass:function(){return pe}}),pe.isAtomic=function(t){return!(t instanceof ft)},e(de.prototype,{locateInternal:function(){if(arguments[0]instanceof b&&arguments[1]instanceof St){var t=arguments[0],e=arguments[1];if(e.isEmpty())return E.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===E.EXTERIOR)return E.EXTERIOR;if(r===E.BOUNDARY)return E.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===E.INTERIOR)return E.EXTERIOR;if(a===E.BOUNDARY)return E.BOUNDARY}return E.INTERIOR}if(arguments[0]instanceof b&&arguments[1]instanceof Lt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return E.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?Zt.isOnLine(s,u)?E.INTERIOR:E.EXTERIOR:E.BOUNDARY}if(arguments[0]instanceof b&&arguments[1]instanceof kt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?E.INTERIOR:E.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?Zt.locatePointInRing(t,e.getCoordinates()):E.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==E.EXTERIOR},updateLocationInfo:function(t){t===E.INTERIOR&&(this.isIn=!0),t===E.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Lt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof St)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof pt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof It){var o=e;for(r=0;r<o.getNumGeometries();r++){var a=o.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,a))}}else if(e instanceof ft)for(var s=new pe(e);s.hasNext();){var l=s.next();l!==e&&this.computeLocation(t,l)}},locate:function(t,e){return e.isEmpty()?E.EXTERIOR:e instanceof Lt?this.locateInternal(t,e):e instanceof St?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?E.BOUNDARY:0<this.numBoundaries||this.isIn?E.INTERIOR:E.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return de}}),e(ge.prototype,{interfaces_:function(){return[]},getClass:function(){return ge}}),ge.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new h("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof b&&arguments[1]instanceof b){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new h("Cannot compute the octant for two identical points "+i);return ge.octant(a,s)}},e(me.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return me}}),e(ye.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:ge.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Ht.toLineString(new Rt(this.pts))},interfaces_:function(){return[me]},getClass:function(){return ye}}),e(_e.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return _e}}),e(ve.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[_e,a]},getClass:function(){return ve}}),e(be.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return be}}),e(xe.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return xe}}),e(we.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return we}}),e(Le.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){p.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[_e,a]},getClass:function(){return Le}}),Le.serialVersionUID=0x5a1e55ec41369800;var Yo={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Yo.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?lt.sort(n,e):lt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},singletonList:function(t){var e=new x;return e.add(t),e}};e(Ce.prototype,{expandToQueue:function(t,e){var n=Ce.isComposite(this.boundable1),r=Ce.isComposite(this.boundable2);if(n&&r)return Ce.area(this.boundable1)>Ce.area(this.boundable2)?this.expand(this.boundable1,this.boundable2,t,e):this.expand(this.boundable2,this.boundable1,t,e),null;if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new h("neither boundable is composite")},isLeaves:function(){return!(Ce.isComposite(this.boundable1)||Ce.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=new Ce(i.next(),e,this.itemDistance);o.getDistance()<r&&n.add(o)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[n]},getClass:function(){return Ce}}),Ce.area=function(t){return t.getBounds().getArea()},Ce.isComposite=function(t){return t instanceof Le},e(ke.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Le?t+=this.size(n):n instanceof ve&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof ve&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new x:t}if(1===arguments.length){for(var e=arguments[0],n=new x,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Le){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof ve?n.add(i.getItem()):p.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){p.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new ve(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new x;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(p.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Le?this.boundablesAtLevel(n,a,i):(p.isTrue(a instanceof ve),-1===n&&i.add(a))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new x;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,r)}else if(3===arguments.length)if(S(arguments[2],xe)&&arguments[0]instanceof Object&&arguments[1]instanceof Le)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Le?this.query(i,u,a):u instanceof ve?a.visitItem(u.getItem()):p.shouldNeverReachHere())}else if(S(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof Le){var c=arguments[0],h=arguments[1],f=arguments[2];for(s=h.getChildBoundables(),l=0;l<s.size();l++){u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),c)&&(u instanceof Le?this.query(c,u,f):u instanceof ve?f.add(u.getItem()):p.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Le&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},createHigherLevels:function(t,e){p.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Le){var r=this.depth(n);t<r&&(t=r)}}return t+1}},createParentBoundables:function(t,e){p.isTrue(!t.isEmpty());var n=new x;n.add(this.createNode(e));var r=new x(t);Yo.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[a]},getClass:function(){return ke}}),ke.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},ke.IntersectsOp=function(){},ke.serialVersionUID=-0x35ef64c82d4c5400,ke.DEFAULT_NODE_CAPACITY=10,e(Ee.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ee}}),s(Se,ke),e(Se.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){p.isTrue(0<t.length);for(var n=new x,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},createNode:function(t){return new Me(t)},size:function(){return 0===arguments.length?ke.prototype.size.call(this):ke.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return ke.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void ke.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Se.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new x;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},query:function(){if(1===arguments.length){var t=arguments[0];return ke.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];ke.prototype.query.call(this,e,n)}else if(3===arguments.length)if(S(arguments[2],xe)&&arguments[0]instanceof Object&&arguments[1]instanceof Le){var r=arguments[0],i=arguments[1],o=arguments[2];ke.prototype.query.call(this,r,i,o)}else if(S(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof Le){var a=arguments[0],s=arguments[1],l=arguments[2];ke.prototype.query.call(this,a,s,l)}},getComparator:function(){return Se.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return ke.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return ke.prototype.remove.call(this,t,e)}return ke.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?ke.prototype.depth.call(this):ke.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){p.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new x(t);Yo.sort(r,Se.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)},nearestNeighbour:function(){if(1===arguments.length){if(S(arguments[0],Ee)){var t=arguments[0],e=new Ce(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ce){var n=arguments[0];return this.nearestNeighbour(n,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Se&&S(arguments[1],Ee)){var r=arguments[0],i=arguments[1];e=new Ce(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ce&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=null,l=new be;for(l.add(o);!l.isEmpty()&&0<a;){var u=l.poll(),c=u.getDistance();if(a<=c)break;u.isLeaves()?(a=c,s=u):u.expandToQueue(l,a)}return[s.getBoundable(0).getItem(),s.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=new ve(h,f);e=new Ce(this.getRoot(),d,p);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[we,a]},getClass:function(){return Se}}),Se.centreX=function(t){return Se.avg(t.getMinX(),t.getMaxX())},Se.avg=function(t,e){return(t+e)/2},Se.centreY=function(t){return Se.avg(t.getMinY(),t.getMaxY())},s(Me,Le),e(Me.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new L(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Me}}),Se.STRtreeNode=Me,Se.serialVersionUID=0x39920f7d5f261e0,Se.xComparator={interfaces_:function(){return[o]},compare:function(t,e){return ke.compareDoubles(Se.centreX(t.getBounds()),Se.centreX(e.getBounds()))}},Se.yComparator={interfaces_:function(){return[o]},compare:function(t,e){return ke.compareDoubles(Se.centreY(t.getBounds()),Se.centreY(e.getBounds()))}},Se.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Se.DEFAULT_NODE_CAPACITY=10,e(Pe.prototype,{interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.relativeSign=function(t,e){return t<e?-1:e<t?1:0},Pe.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Pe.relativeSign(e.x,n.x),i=Pe.relativeSign(e.y,n.y);switch(t){case 0:return Pe.compareValue(r,i);case 1:return Pe.compareValue(i,r);case 2:return Pe.compareValue(i,-r);case 3:return Pe.compareValue(-r,i);case 4:return Pe.compareValue(-r,-i);case 5:return Pe.compareValue(-i,-r);case 6:return Pe.compareValue(-i,r);case 7:return Pe.compareValue(r,-i)}return p.shouldNeverReachHere("invalid octant value"),0},Pe.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0},e(Ie.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Pe.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[n]},getClass:function(){return Ie}}),e(Te.prototype,{getSplitCoordinates:function(){var t=new w;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new x;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),r=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(r)&&t.add(new I(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex,t.segmentIndex;var r=this.edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new b(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this.edge.getCoordinate(o));i&&n.add(new b(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new I(e[0])),r=i}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new b(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.getCoordinate(s);return i&&(o[a]=new b(e.coord)),new De(o,this.edge.getData())},add:function(t,e){var n=new Ie(this.edge,t,e,this.edge.getSegmentOctant(e)),r=this.nodeMap.get(n);return null!==r?(p.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new v("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new v("bad split edge end point at "+i)},interfaces_:function(){return[]},getClass:function(){return Te}}),e(Oe.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[c]},getClass:function(){return Oe}}),e(Ne.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[me]},getClass:function(){return Ne}}),e(De.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:ge.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=(arguments[2],arguments[3]),o=new b(n.getIntersection(i));this.addIntersection(o,r)}},toString:function(){return Ht.toLineString(new Rt(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,r=n+1;if(r<this.pts.length){var i=this.pts[r];t.equals2D(i)&&(n=r)}return this.nodeList.add(t,n)},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[Ne]},getClass:function(){return De}}),De.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new x;return De.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){i.next().getNodeList().addSplitEdges(r)}},e(Ae.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(r,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Ae}}),e(Re.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,r){var i=this.pts[e],o=this.pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new L(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,r,i,o){var a=this.pts[t],s=this.pts[e],l=n.pts[r],u=n.pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},interfaces_:function(){return[]},getClass:function(){return Re}}),e(Fe.prototype,{interfaces_:function(){return[]},getClass:function(){return Fe}}),Fe.isNorthern=function(t){return t===Fe.NE||t===Fe.NW},Fe.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Fe.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},Fe.isInHalfPlane=function(t,e){return e===Fe.SE?t===Fe.SE||t===Fe.SW:t===e||t===e+1},Fe.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new h("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?Fe.NE:Fe.SE:0<=e?Fe.NW:Fe.SW}if(arguments[0]instanceof b&&arguments[1]instanceof b){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new h("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Fe.NE:Fe.SE:r.y>=n.y?Fe.NW:Fe.SW}},Fe.NE=0,Fe.NW=1,Fe.SW=2,Fe.SE=3,e(je.prototype,{interfaces_:function(){return[]},getClass:function(){return je}}),je.getChainStartIndices=function(t){var e=0,n=new x;n.add(new I(e));do{var r=je.findChainEnd(t,e);n.add(new I(r)),e=r}while(e<t.length-1);return je.toIntArray(n)},je.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Fe.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(Fe.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},je.getChains=function(){if(1===arguments.length){var t=arguments[0];return je.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new x,i=je.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new Re(e,i[o],i[o+1],n);r.add(a)}return r}},je.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Be.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Be}}),e(ze.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Be]},getClass:function(){return ze}}),s(qe,ze),e(qe.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return De.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=je.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this.idCounter++),this.index.insert(n.getEnvelope(),n),this.monoChains.add(n)}},computeNodes:function(t){for(var e=(this.nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new Ue(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this.index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return qe}}),s(Ue,Ae),e(Ue.prototype,{overlap:function(){if(4!==arguments.length)return Ae.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],i=t.getContext(),o=n.getContext();this.si.processIntersections(i,e,o,r)},interfaces_:function(){return[]},getClass:function(){return Ue}}),qe.SegmentOverlapAction=Ue,s(Ge,v),e(Ge.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(Ve.prototype,{processIntersections:function(t,e,n,r){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Ve}}),e(He.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,r){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this.isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,r)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this.li.computeIntersection(i,o,a,s),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=i,this.intSegments[1]=o,this.intSegments[2]=a,this.intSegments[3]=s,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[Ve]},getClass:function(){return He}}),He.createAllIntersectionsFinder=function(t){var e=new He(t);return e.setFindAllIntersections(!0),e},He.createAnyIntersectionFinder=function(t){return new He(t)},He.createIntersectionCounter=function(t){var e=new He(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(We.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new He(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new qe;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new Ge(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Ht.toLineString(t[0],t[1])+" and "+Ht.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return We}}),We.computeIntersections=function(t){var e=new We(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(Xe.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return Xe}}),Xe.toSegmentStrings=function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next();e.add(new ye(r.getCoordinates(),r))}return e},Xe.checkValid=function(t){new Xe(t).checkValid()},e(Ye.prototype,{map:function(t){for(var e=new x,n=0;n<t.getNumGeometries();n++){var r=this.mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Gt.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.map=function(t,e){return new Ye(e).map(t)},e($e.prototype,{interfaces_:function(){return[]},getClass:function(){return $e}}),$e.opposite=function(t){return t===$e.LEFT?$e.RIGHT:t===$e.RIGHT?$e.LEFT:t},$e.ON=0,$e.LEFT=1,$e.RIGHT=2,e(Ze.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==E.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===E.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[$e.ON]=this.location[$e.ON],e[$e.LEFT]=E.NONE,e[$e.RIGHT]=E.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===E.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[$e.LEFT];this.location[$e.LEFT]=this.location[$e.RIGHT],this.location[$e.RIGHT]=t},toString:function(){var t=new P;return 1<this.location.length&&t.append(E.toLocationSymbol(this.location[$e.LEFT])),t.append(E.toLocationSymbol(this.location[$e.ON])),1<this.location.length&&t.append(E.toLocationSymbol(this.location[$e.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[$e.ON]=t,this.location[$e.LEFT]=e,this.location[$e.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:E.NONE},isArea:function(){return 1<this.location.length},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===E.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation($e.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(E.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Ze}}),e(Qe.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ze(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get($e.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new P;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation($e.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Ze(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.toLineLabel=function(t){for(var e=new Qe(E.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},e(Ke.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=Zt.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){var e=this.startDe=t,n=!0;do{if(null===e)throw new Ge("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ge("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var r=e.getLabel();p.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this.maxNodeDegree&&(this.maxNodeDegree=e),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this.pts.add(r[o])}else{i=r.length-2;n&&(i=r.length-1);for(o=i;0<=o;o--)this.pts.add(r[o])}},isHole:function(){return this._isHole},setInResult:function(){for(var t=this.startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this.startDe;);},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Zt.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this.holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,$e.RIGHT);if(r===E.NONE)return null;if(this.label.getLocation(n)===E.NONE)return this.label.setLocation(n,r),null}},setShell:function(t){null!==(this.shell=t)&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return Ke}}),s(Je,Ke),e(Je.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Je}}),s(tn,Ke),e(tn.prototype,{buildMinimalRings:function(){var t=new x,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new Je(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){p.isTrue(2<=this.label.getGeometryCount(),"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return en}}),s(nn,en),e(nn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=E.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==E.BOUNDARY&&(n=r)}return n},setLabel:function(){if(2!==arguments.length)return en.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new Qe(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof nn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Qe)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this.label.getLocation(n)===E.NONE&&this.label.setLocation(n,r)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=E.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case E.BOUNDARY:n=E.INTERIOR;break;case E.INTERIOR:n=E.BOUNDARY;break;default:n=E.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return nn}}),e(rn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof b){var t=arguments[0];return null===(e=this.nodeMap.get(t))&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof nn){var e,n=arguments[0];return null===(e=this.nodeMap.get(n.getCoordinate()))?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new x,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===E.BOUNDARY&&e.add(r)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return rn}}),e(on.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Zt.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Fe.quadrant(this.dx,this.dy),p.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[n]},getClass:function(){return on}}),s(an,on),e(an.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Qe(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new Ge("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,$e.LEFT)===E.INTERIOR&&this.label.getLocation(e,$e.RIGHT)===E.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){on.prototype.print.call(this,t),t.print(" "+this.depth[$e.LEFT]+"/"+this.depth[$e.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,E.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,E.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===$e.LEFT&&(r=-1);var i=$e.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return an}}),an.depthFactor=function(t,e){return t===E.EXTERIOR&&e===E.INTERIOR?1:t===E.INTERIOR&&e===E.EXTERIOR?-1:0},e(sn.prototype,{createNode:function(t){return new nn(t,null)},interfaces_:function(){return[]},getClass:function(){return sn}}),e(ln.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof nn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof b){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){A.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===E.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,r){return!!t.equals(n)&&(Zt.computeOrientation(t,e,r)===Zt.COLLINEAR&&Fe.quadrant(t,e)===Fe.quadrant(n,r))},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){A.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var r=new an(n,!0),i=new an(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},e(un.prototype,{sortShellsAndHoles:function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},computePolygons:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this.geometryFactory);e.add(r)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ge("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},buildMinimalEdgeRings:function(t,e,n){for(var r=new x,i=t.iterator();i.hasNext();){var o=i.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new tn(r,this.geometryFactory);e.add(i),i.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},getPolygons:function(){return this.computePolygons(this.shellList)},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Zt.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},findShell:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return p.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ln.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new x,o=this.buildMinimalEdgeRings(r,this.shellList,i);this.sortShellsAndHoles(o,this.shellList,i),this.placeFreeHoles(this.shellList,i)}},interfaces_:function(){return[]},getClass:function(){return un}}),e(cn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Un.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this.op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(p.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Un.isResultOfOp(r,e)&&e===Un.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return cn}}),e(hn.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Un.INTERSECTION)){var r=n.getLabel();Un.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return hn}}),e(fn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return fn}}),e(pn.prototype,{locate:function(t){return pn.locate(t,this.geom)},interfaces_:function(){return[fn]},getClass:function(){return pn}}),pn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Zt.isPointInRing(t,e.getCoordinates())},pn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!pn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(pn.isPointInRing(t,i))return!1}return!0},pn.containsPoint=function(t,e){if(e instanceof St)return pn.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new pe(e);n.hasNext();){var r=n.next();if(r!==e&&pn.containsPoint(t,r))return!0}return!1},pn.locate=function(t,e){return e.isEmpty()?E.EXTERIOR:pn.containsPoint(t,e)?E.INTERIOR:E.EXTERIOR},e(dn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=E.NONE,n=this.iterator();n.hasNext();){(o=(i=n.next()).getLabel()).isArea(t)&&o.getLocation(t,$e.LEFT)!==E.NONE&&(e=o.getLocation(t,$e.LEFT))}if(e===E.NONE)return null;var r=e;for(n=this.iterator();n.hasNext();){var i,o;if((o=(i=n.next()).getLabel()).getLocation(t,$e.ON)===E.NONE&&o.setLocation(t,$e.ON,r),o.isArea(t)){var a=o.getLocation(t,$e.LEFT),s=o.getLocation(t,$e.RIGHT);if(s!==E.NONE){if(s!==r)throw new Ge("side location conflict",i.getCoordinate());a===E.NONE&&p.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),r=a}else p.isTrue(o.getLocation(t,$e.LEFT)===E.NONE,"found single null side"),o.setLocation(t,$e.RIGHT,r),o.setLocation(t,$e.LEFT,r)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){A.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,$e.LEFT);p.isTrue(r!==E.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();p.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,$e.LEFT),l=a.getLocation(t,$e.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){if(this.edgeList.get(e)===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new x(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===E.NONE&&(this.ptInAreaLocation[t]=pn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new P;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=(o=n.next()).getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===E.BOUNDARY&&(e[i]=!0);for(n=this.iterator();n.hasNext();){var o;for(r=(o=n.next()).getLabel(),i=0;i<2;i++)if(r.isAnyNull(i)){var a=E.NONE;if(e[i])a=E.EXTERIOR;else{var s=o.getCoordinate();a=this.getLocation(i,s,t)}r.setAllLocationsIfNull(i,a)}}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return dn}}),s(gn,dn),e(gn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var i=this.resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new Ge("no outgoing dirEdge found",this.getCoordinate());p.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Fe.isNorthern(i)&&Fe.isNorthern(o)?n:Fe.isNorthern(i)||Fe.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(p.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},print:function(t){A.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new x;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;0<=n;n--){var r=this.edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth($e.LEFT)),r=t.getDepth($e.RIGHT),i=this.computeDepths(e+1,this.edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ge("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=o;l<a;l++){var u=this.edgeList.get(l);u.getLabel(),u.setEdgeDepths($e.RIGHT,s),s=u.getDepth($e.LEFT)}return s}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,r=this.SCANNING_FOR_INCOMING,i=this.resultAreaEdgeList.size()-1;0<=i;i--){var o=this.resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(p.isTrue(null!==e,"found null for first outgoing dirEdge"),p.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){var n=arguments[0];for(t=0,e=this.iterator();e.hasNext();){e.next().getEdgeRing()===n&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=E.NONE,e=this.iterator();e.hasNext();){var n=(i=e.next()).getSym();if(!i.isLineEdge()){if(i.isInResult()){t=E.INTERIOR;break}if(n.isInResult()){t=E.EXTERIOR;break}}}if(t===E.NONE)return null;var r=t;for(e=this.iterator();e.hasNext();){var i;n=(i=e.next()).getSym();i.isLineEdge()?i.getEdge().setCovered(r===E.INTERIOR):(i.isInResult()&&(r=E.EXTERIOR),n.isInResult()&&(r=E.INTERIOR))}},computeLabelling:function(t){dn.prototype.computeLabelling.call(this,t),this.label=new Qe(E.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==E.INTERIOR&&i!==E.BOUNDARY||this.label.setLocation(r,E.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return gn}}),s(mn,sn),e(mn.prototype,{createNode:function(t){return new nn(t,new gn)},interfaces_:function(){return[]},getClass:function(){return mn}}),e(yn.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return yn}}),e(_n.prototype,{isDelete:function(){return this.eventType===_n.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===_n.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[n]},getClass:function(){return _n}}),_n.INSERT=1,_n.DELETE=2,e(vn.prototype,{interfaces_:function(){return[]},getClass:function(){return vn}}),e(bn.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&1===this.li.getIntersectionNum()){if(bn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this.li.computeIntersection(i,o,a,s),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return bn}}),bn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},s(xn,vn),e(xn.prototype,{prepareEvents:function(){Yo.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof bn&&S(arguments[0],y)&&S(arguments[1],y)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&S(arguments[0],y)&&arguments[1]instanceof bn){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new yn(n,i),a=new _n(e,n.getMinX(i),o);this.events.add(a),this.events.add(new _n(n.getMaxX(i),a))}},processOverlaps:function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];for(t=n.iterator();t.hasNext();){e=t.next();this.addEdge(e,r)}}},interfaces_:function(){return[]},getClass:function(){return xn}}),e(wn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Ht.toLineString(new b(this.min,0),new b(this.max,0))},interfaces_:function(){return[]},getClass:function(){return wn}}),e(Ln.prototype,{compare:function(t,e){var n=t,r=e,i=(n.min+n.max)/2,o=(r.min+r.max)/2;return i<o?-1:o<i?1:0},interfaces_:function(){return[o]},getClass:function(){return Ln}}),wn.NodeComparator=Ln,s(Cn,wn),e(Cn.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Cn}}),s(kn,wn),e(kn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return kn}}),e(En.prototype,{buildTree:function(){Yo.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new x;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Cn(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){A.out.println(Ht.toLineString(new b(t.min,this.level),new b(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new kn(t.get(n),t.get(n+1));e.add(i)}}},interfaces_:function(){return[]},getClass:function(){return En}}),e(Sn.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Pt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof Lt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[j]},getClass:function(){return Sn}}),Sn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sn.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sn.getLines(e,n))}},Sn.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sn.getLines(t,!1)}if(2===arguments.length){if(S(arguments[0],m)&&S(arguments[1],m)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Sn.getLines(i,n)}return n}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new x;return o.apply(new Sn(s,a)),s}if(arguments[0]instanceof B&&S(arguments[1],m)){var l=arguments[0],u=arguments[1];return l instanceof Lt?u.add(l):l.apply(new Sn(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&S(arguments[0],m)&&S(arguments[1],m)){var c=arguments[0],h=arguments[1],f=arguments[2];for(r=c.iterator();r.hasNext();){i=r.next();Sn.getLines(i,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof B&&S(arguments[1],m)){var p=arguments[0],d=arguments[1],g=arguments[2];return p.apply(new Sn(d,g)),d}}},e(Mn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[xe]},getClass:function(){return Mn}}),e(Pn.prototype,{locate:function(t){var e=new $t(t),n=new In(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[fn]},getClass:function(){return Pn}}),e(In.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[xe]},getClass:function(){return In}}),e(Tn.prototype,{init:function(t){for(var e=Sn.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new Qt(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this.index.insert(r,i,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Mn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this.index.query(r,i,o)}},interfaces_:function(){return[]},getClass:function(){return Tn}}),Pn.SegmentVisitor=In,Pn.IntervalIndexedGeometry=Tn,e(On.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[n]},getClass:function(){return On}}),e(Nn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new b(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new Fn(o,new Qe(this.edge.label))},add:function(t,e,n){var r=new On(t,e,n),i=this.nodeMap.get(r);return null!==i?i:(this.nodeMap.put(r,r),r)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Nn}}),e(Dn.prototype,{getChainStartIndices:function(t){var e=0,n=new x;n.add(new I(e));do{var r=this.findChainEnd(t,e);n.add(new I(r)),e=r}while(e<t.length-1);return Dn.toIntArray(n)},findChainEnd:function(t,e){for(var n=Fe.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(Fe.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},interfaces_:function(){return[]},getClass:function(){return Dn}}),Dn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(An.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+l)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,u),g<l&&this.computeIntersectsForChain(i,d,a,g,l,u)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,u),g<l&&this.computeIntersectsForChain(d,o,a,g,l,u))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},interfaces_:function(){return[]},getClass:function(){return An}}),e(Rn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==Rn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Rn.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this.depth[r][i]===Rn.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this.depth[t][n]>e&&(r=1),this.depth[t][n]=r}}},getDelta:function(t){return this.depth[t][$e.RIGHT]-this.depth[t][$e.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?E.EXTERIOR:E.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==E.EXTERIOR&&r!==E.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Rn.depthAtLocation(r):this.depth[e][n]+=Rn.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===E.INTERIOR&&this.depth[i][o]++}},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.depthAtLocation=function(t){return t===E.EXTERIOR?0:t===E.INTERIOR?1:Rn.NULL_VALUE},Rn.NULL_VALUE=-1,s(Fn,en),e(Fn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Fn(t,Qe.toLineLabel(this.label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Fn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Fn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new An(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new L;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,r){var i=new b(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},toString:function(){var t=new P;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.updateIM=function(){if(2!==arguments.length)return en.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,$e.ON),t.getLocation(1,$e.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,$e.LEFT),t.getLocation(1,$e.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,$e.RIGHT),t.getLocation(1,$e.RIGHT),2))},s(jn,ln),e(jn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e).getLabel(),r=1;n.getLocation(t,$e.ON)===E.BOUNDARY&&r++;var i=jn.determineBoundary(this.boundaryNodeRule,r);n.setLocation(t,i)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new bn(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this.parentGeom instanceof Pt||this.parentGeom instanceof St||this.parentGeom instanceof It,l=r||!s;return a.computeIntersections(this.edges,o,l),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var r=new bn(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,r),r},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof kt){var t=arguments[0].getCoordinate();this.insertPoint(this.argIndex,t,E.INTERIOR)}else if(arguments[0]instanceof b){var e=arguments[0];this.insertPoint(this.argIndex,e,E.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),E.EXTERIOR,E.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,E.INTERIOR,E.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],E.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],E.BOUNDARY)},addLineString:function(t){var e=W.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Fn(e,new Qe(this.argIndex,E.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),p.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===E.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var r=W.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var i=e,o=n;Zt.isCCW(r)&&(i=n,o=e);var a=new Fn(r,new Qe(this.argIndex,E.BOUNDARY,i,o));this.lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this.argIndex,r[0],E.BOUNDARY)},insertPoint:function(t,e,n){var r=this.nodes.addNode(e),i=r.getLabel();null===i?r.label=new Qe(t,n):i.setLocation(t,n)},createEdgeSetIntersector:function(){return new xn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},add:function(){if(1!==arguments.length)return ln.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof It&&(this.useBoundaryDeterminationRule=!1),t instanceof St)this.addPolygon(t);else if(t instanceof Lt)this.addLineString(t);else if(t instanceof kt)this.addPoint(t);else if(t instanceof Mt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof It)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return S(this.parentGeom,Et)&&50<this.parentGeom.getNumGeometries()?(null===this.areaPtLocator&&(this.areaPtLocator=new Pn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return ln.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return jn}}),jn.determineBoundary=function(t,e){return t.isInBoundary(e)?E.BOUNDARY:E.INTERIOR},e(Bn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Bn}}),e(zn.prototype,{compareTo:function(t){var e=t;return zn.compareOriented(this.pts,this._orientation,e.pts,e._orientation)},interfaces_:function(){return[n]},getClass:function(){return zn}}),zn.orientation=function(t){return 1===W.increasingDirection(t)},zn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}},e(qn.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new zn(t.getCoordinates());return this.ocaMap.get(e)},add:function(t){this.edges.add(t);var e=new zn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return qn}}),s(Un,Bn),e(Un.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Qe(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,r){var i=new x;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?Un.createEmptyResult(r,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(i)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this.ptLocator.locate(t,r)!==E.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new x,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new x;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Xe.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new un(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new cn(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(t);var i=new hn(this,this.geomFact,this.ptLocator);this.resultPointList=i.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&Un.isResultOfOp(r.getLocation(0,$e.RIGHT),r.getLocation(1,$e.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(p.isTrue(!r.isNull(i,$e.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,$e.LEFT,r.getLocation(i,$e.LEFT)),p.isTrue(!r.isNull(i,$e.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,$e.RIGHT,r.getLocation(i,$e.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(0,n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return Un}}),Un.overlayOp=function(t,e,n){return new Un(t,e).getResultGeometry(n)},Un.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Un.createEmptyResult(Un.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Ye.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vn.overlayOp(t,e,Un.INTERSECTION)},Un.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Un.createEmptyResult(Un.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vn.overlayOp(t,e,Un.SYMDIFFERENCE)},Un.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Un.INTERSECTION:o=Math.min(r,i);break;case Un.UNION:o=Math.max(r,i);break;case Un.DIFFERENCE:o=r;break;case Un.SYMDIFFERENCE:o=Math.max(r,i)}return o},Un.createEmptyResult=function(t,e,n,r){var i=null;switch(Un.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Un.difference=function(t,e){return t.isEmpty()?Un.createEmptyResult(Un.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vn.overlayOp(t,e,Un.DIFFERENCE))},Un.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Un.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===E.BOUNDARY&&(i=E.INTERIOR),o===E.BOUNDARY&&(o=E.INTERIOR),a){case Un.INTERSECTION:return i===E.INTERIOR&&o===E.INTERIOR;case Un.UNION:return i===E.INTERIOR||o===E.INTERIOR;case Un.DIFFERENCE:return i===E.INTERIOR&&o!==E.INTERIOR;case Un.SYMDIFFERENCE:return i===E.INTERIOR&&o!==E.INTERIOR||i!==E.INTERIOR&&o===E.INTERIOR}return!1}},Un.INTERSECTION=1,Un.UNION=2,Un.DIFFERENCE=3,Un.SYMDIFFERENCE=4,e(Gn.prototype,{selfSnap:function(t){return new se(t).snapTo(t,this.snapTolerance)},removeCommonBits:function(t){this.cbr=new ce,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=Un.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||A.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=se.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t);return se.snap(e[0],e[1],this.snapTolerance)},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.overlayOp=function(t,e,n){return new Gn(t,e).getResultGeometry(n)},Gn.union=function(t,e){return Gn.overlayOp(t,e,Un.UNION)},Gn.intersection=function(t,e){return Gn.overlayOp(t,e,Un.INTERSECTION)},Gn.symDifference=function(t,e){return Gn.overlayOp(t,e,Un.SYMDIFFERENCE)},Gn.difference=function(t,e){return Gn.overlayOp(t,e,Un.DIFFERENCE)},e(Vn.prototype,{getResultGeometry:function(t){var e=null,n=!1,r=null;try{e=Un.overlayOp(this.geom[0],this.geom[1],t);n=!0}catch(t){if(!(t instanceof v))throw t;r=t}if(!n)try{e=Gn.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof v?r:t}return e},interfaces_:function(){return[]},getClass:function(){return Vn}}),Vn.overlayOp=function(t,e,n){return new Vn(t,e).getResultGeometry(n)},Vn.union=function(t,e){return Vn.overlayOp(t,e,Un.UNION)},Vn.intersection=function(t,e){return Vn.overlayOp(t,e,Un.INTERSECTION)},Vn.symDifference=function(t,e){return Vn.overlayOp(t,e,Un.SYMDIFFERENCE)},Vn.difference=function(t,e){return Vn.overlayOp(t,e,Un.DIFFERENCE)},e(Hn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,r=this.horizontalBisector(t);if(0===r.getLength())n=0,e=r.getCoordinate();else{var i=Vn.overlayOp(r,t,Un.INTERSECTION),o=this.widestGeometry(i);n=o.getEnvelopeInternal().getWidth(),e=Hn.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ft){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof B){var r=arguments[0];return r instanceof ft?this.widestGeometry(r):r}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=Wn.getBisectorY(t);return this.factory.createLineString([new b(e.getMinX(),n),new b(e.getMaxX(),n)])},add:function(t){if(t instanceof St)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Hn}}),Hn.centre=function(t){return new b(Hn.avg(t.getMinX(),t.getMaxX()),Hn.avg(t.getMinY(),t.getMaxY()))},Hn.avg=function(t,e){return(t+e)/2},e(Wn.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));return Hn.avg(this.hiY,this.loY)},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var r=e.getY(n);this.updateInterval(r)}},interfaces_:function(){return[]},getClass:function(){return Wn}}),Wn.getBisectorY=function(t){return new Wn(t).getBisectorY()},Hn.SafeBisectorFinder=Wn,e(Xn.prototype,{addEndpoints:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof Lt)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var r=arguments[0];this.add(r[0]),this.add(r[r.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof Lt)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var r=arguments[0];for(n=1;n<r.length-1;n++)this.add(r[n])}},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new b(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Xn}}),e(Yn.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof kt)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof b){var r=arguments[0],i=r.distance(this.centroid);i<this.minDistance&&(this.interiorPoint=new b(r),this.minDistance=i)}},interfaces_:function(){return[]},getClass:function(){return Yn}}),e($n.prototype,{interfaces_:function(){return[]},getClass:function(){return $n}}),$n.toDegrees=function(t){return 180*t/Math.PI},$n.normalize=function(t){for(;t>Math.PI;)t-=$n.PI_TIMES_2;for(;t<=-Math.PI;)t+=$n.PI_TIMES_2;return t},$n.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},$n.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},$n.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},$n.interiorAngle=function(t,e,n){var r=$n.angle(e,t),i=$n.angle(e,n);return Math.abs(i-r)},$n.normalizePositive=function(t){if(t<0){for(;t<0;)t+=$n.PI_TIMES_2;$n.PI_TIMES_2<=t&&(t=0)}else{for(;$n.PI_TIMES_2<=t;)t-=$n.PI_TIMES_2;t<0&&(t=0)}return t},$n.angleBetween=function(t,e,n){var r=$n.angle(e,t),i=$n.angle(e,n);return $n.diff(r,i)},$n.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},$n.toRadians=function(t){return t*Math.PI/180},$n.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?$n.COUNTERCLOCKWISE:n<0?$n.CLOCKWISE:$n.NONE},$n.angleBetweenOriented=function(t,e,n){var r=$n.angle(e,t),i=$n.angle(e,n)-r;return i<=-Math.PI?i+$n.PI_TIMES_2:i>Math.PI?i-$n.PI_TIMES_2:i},$n.PI_TIMES_2=2*Math.PI,$n.PI_OVER_2=Math.PI/2,$n.PI_OVER_4=Math.PI/4,$n.COUNTERCLOCKWISE=Zt.COUNTERCLOCKWISE,$n.CLOCKWISE=Zt.CLOCKWISE,$n.NONE=Zt.COLLINEAR,e(Zn.prototype,{area:function(){return Zn.area(this.p0,this.p1,this.p2)},signedArea:function(){return Zn.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new h("Supplied point is null.");return Zn.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Zn.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Zn.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Zn.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Zn.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Zn.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Zn.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Zn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Zn.det=function(t,e,n,r){return t*r-e*n},Zn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,f=t.y-o,p=(u*h-s*f)/c,d=(-l*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Zn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return a<i&&(a=i),a<o&&(a=o),a},Zn.isAcute=function(t,e,n){return!(!$n.isAcute(t,e,n)||!$n.isAcute(e,n,t))&&!!$n.isAcute(n,t,e)},Zn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*Zn.det(o,a,s,l);return new b(r-Zn.det(a,o*o+a*a,l,s*s+l*l)/u,i+Zn.det(o,o*o+a*a,s,s*s+l*l)/u)},Zn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y;return new R(new R(t.x+n/2,t.y+r/2,1),new R(t.x-r+n/2,t.y+n+r/2,1))},Zn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new b(t.x+i*o,t.y+i*a)},Zn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,f=u*u+c*c+h*h;return Math.sqrt(f)/2},Zn.centroid=function(t,e,n){return new b((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Zn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o;return new b((r*t.x+i*e.x+o*n.x)/a,(r*t.y+i*e.y+o*n.y)/a)},e(Qn.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new b(t[0])],null}var e=this.input.convexHull().getCoordinates();t=e;if(e[0].equals2D(e[e.length-1])&&(t=new Array(e.length-1).fill(null),W.copyDeep(e,0,t,0,e.length-1)),t.length<=2)return this.extremalPts=W.copyDeep(t),null;for(var n=Qn.lowestPoint(t),r=Qn.pointWitMinAngleWithX(t,n),i=0;i<t.length;i++){var o=Qn.pointWithMinAngleWithSegment(t,n,r);if($n.isObtuse(n,o,r))return this.extremalPts=[new b(n),new b(r)],null;if($n.isObtuse(o,n,r))n=o;else{if(!$n.isObtuse(o,r,n))return this.extremalPts=[new b(n),new b(r),new b(o)],null;r=o}}p.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new b((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Zn.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.pointWitMinAngleWithX=function(t,e){for(var n=_.MAX_VALUE,r=null,i=0;i<t.length;i++){var o=t[i];if(o!==e){var a=o.x-e.x,s=o.y-e.y;s<0&&(s=-s);var l=s/Math.sqrt(a*a+s*s);l<n&&(n=l,r=o)}}return r},Qn.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Qn.pointWithMinAngleWithSegment=function(t,e,n){for(var r=_.MAX_VALUE,i=null,o=0;o<t.length;o++){var a=t[o];if(a!==e&&a!==n){var s=$n.angleBetween(e,a,n);s<r&&(r=s,i=a)}}return i},e(Kn.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=t instanceof St?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=_.MAX_VALUE;for(var e=1,n=new Qt,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new re(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var r=e.distancePerpendicular(t[n]),i=r,o=n,a=o;r<=i;)r=i,a=Kn.nextIndex(t,o=a),i=e.distancePerpendicular(t[a]);return r<this.minWidth&&(this.minPtIndex=o,this.minWidth=r,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new Qt(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=_.MAX_VALUE,r=-_.MAX_VALUE,i=_.MAX_VALUE,o=-_.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var s=Kn.computeC(t,e,this.convexHullPts[a]);r<s&&(r=s),s<n&&(n=s);var l=Kn.computeC(-e,t,this.convexHullPts[a]);o<l&&(o=l),l<i&&(i=l)}var u=Kn.computeSegmentForLine(-t,-e,o),c=Kn.computeSegmentForLine(-t,-e,i),h=Kn.computeSegmentForLine(-e,t,r),f=Kn.computeSegmentForLine(-e,t,n),p=h.lineIntersection(u),d=f.lineIntersection(u),g=f.lineIntersection(c),m=h.lineIntersection(c),y=this.inputGeom.getFactory().createLinearRing([p,d,g,m,p]);return this.inputGeom.getFactory().createPolygon(y,null)},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},Kn.computeC=function(t,e,n){return t*n.y-e*n.x},Kn.getMinimumDiameter=function(t){return new Kn(t).getDiameter()},Kn.getMinimumRectangle=function(t){return new Kn(t).getMinimumRectangle()},Kn.computeSegmentForLine=function(t,e,n){var r=null,i=null;return Math.abs(e)>Math.abs(t)?(r=new b(0,n/e),i=new b(1,n/e-t/e)):(r=new b(n/t,0),i=new b(n/t-e/t,1)),new Qt(r,i)};var $o=Object.freeze({Centroid:Jt,CGAlgorithms:Zt,ConvexHull:re,InteriorPointArea:Hn,InteriorPointLine:Xn,InteriorPointPoint:Yn,RobustLineIntersector:Xt,MinimumBoundingCircle:Qn,MinimumDiameter:Kn});e(Jn.prototype,{getResultGeometry:function(){return new tr(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new h("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.densifyPoints=function(t,e,n){for(var r=new Qt,i=new w,o=0;o<t.length-1;o++){r.p0=t[o],r.p1=t[o+1],i.add(r.p0,!1);var a=r.getLength(),s=Math.trunc(a/e)+1;if(1<s)for(var l=a/s,u=1;u<s;u++){var c=u*l/a,h=r.pointAlong(c);n.makePrecise(h),i.add(h,!1)}}return i.add(t[t.length-1],!1),i.toCoordinateArray()},Jn.densify=function(t,e){var n=new Jn(t);return n.setDistanceTolerance(e),n.getResultGeometry()},s(tr,oe),e(tr.prototype,{transformMultiPolygon:function(t,e){var n=oe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=oe.prototype.transformPolygon.call(this,t,e);return e instanceof It?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=Jn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof Lt&&1===r.length&&(r=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(r)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return tr}}),Jn.DensifyTransformer=tr;var Zo=Object.freeze({Densifier:Jn});e(er.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var r=n.oNext();if(r.compareTo(t)!==e||r===this)return n.insertAfter(t),null;n=r}while(n!==this);p.shouldNeverReachHere()},insertAfter:function(t){p.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){for(var t=0,e=this;t++,(e=e.oNext())!==this;);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),r=t.deltaX(),i=t.deltaY();if(e===r&&n===i)return 0;var o=Fe.quadrant(e,n),a=Fe.quadrant(r,i);return a<o?1:o<a?-1:Zt.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t;return this.compareAngularDirection(e)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return er}}),er.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},er.create=function(t,e){var n=new er(t),r=new er(e);return n.init(r),n},s(nr,er),e(nr.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return nr}}),nr.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},nr.isMarked=function(t){return t.isMarked()},nr.setMark=function(t,e){t.setMark(e)},nr.markBoth=function(t){t.mark(),t.sym().mark()},nr.mark=function(t){t.mark()},e(rr.prototype,{insert:function(t,e,n){var r=this.create(t,e);null!==n?n.insert(r):this.vertexMap.put(t,r);var i=this.vertexMap.get(e);return null!==i?i.insert(r.sym()):this.vertexMap.put(e,r.sym()),r},create:function(t,e){var n=this.createEdge(t),r=this.createEdge(e);return er.init(n,r),n},createEdge:function(t){return new er(t)},addEdge:function(t,e){if(!rr.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),r=null;return null!==n&&(r=n.find(e)),null!==r?r:this.insert(t,e,n)},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.isValidEdge=function(t,e){return 0!==e.compareTo(t)},s(ir,nr),e(ir.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return ir}}),s(or,rr),e(or.prototype,{createEdge:function(t){return new ir(t)},interfaces_:function(){return[]},getClass:function(){return or}}),e(ar.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new w,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var r=n.next();if(r===t)break;e.add(r.orig().copy(),!1),n=r}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new w,n=t;for(this.ringStartEdge=null,nr.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var r=n.next();if(r===t)return this.buildRing(this.ringStartEdge),null;e.add(r.orig().copy(),!1),nr.markBoth(n=r)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){for(var e=t;nr.isMarked(e)||this.nodeEdgeStack.add(e),(e=e.oNext())!==t;);},computeResult:function(){for(var t=this.graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();nr.isMarked(e)||this.process(e)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();nr.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof B)arguments[0].apply({interfaces_:function(){return[j]},filter:function(t){t instanceof Lt&&this.add(t)}});else if(S(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof Lt){var n=arguments[0];null===this.factory&&(this.factory=n.getFactory());var r=n.getCoordinateSequence(),i=!1;for(t=1;t<r.size();t++){var o=this.graph.addEdge(r.getCoordinate(t-1),r.getCoordinate(t));null!==o&&(i||(o.setStart(),i=!0))}}},interfaces_:function(){return[]},getClass:function(){return ar}}),ar.dissolve=function(t){var e=new ar;return e.add(t),e.getResult()};var Qo=Object.freeze({LineDissolver:ar});e(sr.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;r<4;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();t<n&&(t=n)}return t+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[a]},getClass:function(){return sr}}),sr.getSubnodeIndex=function(t,e,n){var r=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(r=3),t.getMaxY()<=n&&(r=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(r=2),t.getMaxY()<=n&&(r=0)),r},lr.exponent=function(t){return function(t,e){var n,r,i,o,a={32:8,64:11}[t];if(o||(n=e<0||1/e<0,isFinite(e)||(o={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[t],n&&(o.d+=1<<t/4-1),r=Math.pow(2,a)-1,i=0)),!o){for(r={32:127,64:1023}[t],i=Math.abs(e);2<=i;)r++,i/=2;for(;i<1&&0<r;)r--,i*=2;r<=0&&(i/=2),32===t&&254<r&&(o={d:n?255:127,c:128,b:0,a:0},r=Math.pow(2,a)-1,i=0)}return r}(64,t)-1023},lr.powerOf2=function(t){return Math.pow(2,t)},e(ur.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=ur.computeQuadLevel(t),this.env=new L,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=lr.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/r)*r,this.pt.y=Math.floor(n.getMinY()/r)*r,this.env.init(this.pt.x,this.pt.x+r,this.pt.y,this.pt.y+r)}},getEnvelope:function(){return this.env},getCentre:function(){return new b((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight();return lr.exponent(n<e?e:n)+1},s(cr,sr),e(cr.prototype,{find:function(t){var e=sr.getSubnodeIndex(t,this.centrex,this.centrey);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=sr.getSubnodeIndex(t,this.centrex,this.centrey);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0,r=0,i=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,r=this.env.getMinY(),i=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),r=this.env.getMinY(),i=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,r=this.centrey,i=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),r=this.centrey,i=this.env.getMaxY()}return new cr(new L(e,n,r,i),this.level-1)},insertNode:function(t){p.isTrue(null===this.env||this.env.contains(t.env));var e=sr.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return cr}}),cr.createNode=function(t){var e=new ur(t);return new cr(e.getEnvelope(),e.getLevel())},cr.createExpanded=function(t,e){var n=new L(e);null!==t&&n.expandToInclude(t.env);var r=cr.createNode(n);return null!==t&&r.insertNode(t),r},e(hr.prototype,{interfaces_:function(){return[]},getClass:function(){return hr}}),hr.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var r=Math.max(Math.abs(t),Math.abs(e));return lr.exponent(n/r)<=hr.MIN_BINARY_EXPONENT},hr.MIN_BINARY_EXPONENT=-50,s(fr,sr),e(fr.prototype,{insert:function(t,e){var n=sr.getSubnodeIndex(t,fr.origin.x,fr.origin.y);if(-1===n)return this.add(e),null;var r=this.subnode[n];if(null===r||!r.getEnvelope().contains(t)){var i=cr.createExpanded(r,t);this.subnode[n]=i}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){p.isTrue(t.getEnvelope().contains(e));var r=hr.isZeroWidth(e.getMinX(),e.getMaxX()),i=hr.isZeroWidth(e.getMinY(),e.getMaxY());(r||i?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.origin=new b(0,0),e(pr.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=pr.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Mn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],r=arguments[1];this.root.visit(n,r)}},queryAll:function(){var t=new x;return this.root.addAllItems(t),t},remove:function(t,e){var n=pr.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&0<e&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&0<n&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[we,a]},getClass:function(){return pr}}),pr.ensureExtent=function(t,e){var n=t.getMinX(),r=t.getMaxX(),i=t.getMinY(),o=t.getMaxY();return n!==r&&i!==o?t:(n===r&&(r=(n-=e/2)+e/2),i===o&&(o=(i-=e/2)+e/2),new L(n,r,i,o))},pr.serialVersionUID=-0x678b60c967a25400;var Ko=Object.freeze({Quadtree:pr}),Jo=Object.freeze({STRtree:Se}),ta=Object.freeze({quadtree:Ko,strtree:Jo}),ea=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(dr.prototype,{read:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!na[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ea.indexOf(n)?na[n].apply(this,[e.coordinates]):"GeometryCollection"===n?na[n].apply(this,[e.geometries]):na[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!ra[e])throw new Error("Geometry is not supported");return ra[e].apply(this,[t])}});var na={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!na[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=na.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new b(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new b(t[0],t[1]),new b(t[2],t[1]),new b(t[2],t[3]),new b(t[0],t[3]),new b(t[0],t[1])])},Point:function(t){var e=new b(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(na.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=na.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(na.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=na.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=na.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(na.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},ra={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:ra.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],i=ra.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(ra.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],i=ra.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ra.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var r=0;r<t.holes.length;++r){var i=t.holes[r],o=ra.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],i=ra.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],i=r.getGeometryType();e.push(ra[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}};e(gr.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===qt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),e(mr.prototype,{write:function(t){return this.parser.write(t)}}),e(yr.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===qt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var r=0,i=t.geometries.length;r<i;r++)this.reducePrecision(t.geometries[r])}}),e(vr.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new b(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new b(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new b(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,r=[],i=0;i<e.length;i++){var o=this.convertFromLinearRing(e[i]);0===i?n=o:r.push(o)}return this.geometryFactory.createPolygon(n,r)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(_r);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(_r);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(_r)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(_r));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(_r))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var r=t.geometries[n];e.push(this.write(r))}return new ol.geom.GeometryCollection(e)}});var ia=Object.freeze({GeoJSONReader:gr,GeoJSONWriter:mr,OL3Parser:vr,WKTReader:yr,WKTWriter:Ht});e(br.prototype,{rescale:function(){if(S(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){var n=arguments[0];2===n.length&&(new b(n[0]),new b(n[1]));for(t=0;t<n.length;t++)n[t].x=n[t].x/this.scaleFactor+this.offsetX,n[t].y=n[t].y/this.scaleFactor+this.offsetY;2===n.length&&n[0].equals2D(n[1])&&A.out.println(n)}},scale:function(){if(S(arguments[0],m)){for(var t=arguments[0],e=new x,n=t.iterator();n.hasNext();){var r=n.next();e.add(new De(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){var i=arguments[0],o=new Array(i.length).fill(null);for(n=0;n<i.length;n++)o[n]=new b(Math.round((i[n].x-this.offsetX)*this.scaleFactor),Math.round((i[n].y-this.offsetY)*this.scaleFactor),i[n].z);return W.removeRepeatedPoints(o)}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Be]},getClass:function(){return br}});var oa=Object.freeze({MCIndexNoder:qe,ScaledNoder:br,SegmentString:me});e(xr.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new st,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n).getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r)}return!0},isSimplePolygonal:function(t){for(var e=Sn.getLines(t).iterator();e.hasNext();){var n=e.next();if(!this.isSimpleLinearGeometry(n))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new it,n=t.getEdgeIterator();n.hasNext();){var r=n.next(),i=(r.getMaximumSegmentIndex(),r.isClosed()),o=r.getCoordinate(0);this.addEndpoint(e,o,i);var a=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(e,a,i)}for(n=e.values().iterator();n.hasNext();){var s=n.next();if(s.isClosed&&2!==s.degree)return this.nonSimpleLocation=s.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new jn(0,t),n=new Xt,r=e.computeSelfNodes(n,!0);return!r.hasIntersection()||(r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getMaximumSegmentIndex(),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next();if(!o.isEndPoint(r))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var r=t.get(e);null===r&&(r=new wr(e),t.put(e,r)),r.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof Lt?this.isSimpleLinearGeometry(t):t instanceof pt?this.isSimpleLinearGeometry(t):t instanceof Mt?this.isSimpleMultiPoint(t):S(t,Et)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return xr}}),e(wr.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return wr}}),xr.EndpointInfo=wr,e(Lr.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Lr.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Lr.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Lr.JOIN_ROUND&&(this.quadrantSegments=Lr.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Lr.CAP_ROUND=1,Lr.CAP_FLAT=2,Lr.CAP_SQUARE=3,Lr.JOIN_ROUND=1,Lr.JOIN_MITRE=2,Lr.JOIN_BEVEL=3,Lr.DEFAULT_QUADRANT_SEGMENTS=8,Lr.DEFAULT_MITRE_LIMIT=5,Lr.DEFAULT_SIMPLIFY_FACTOR=.01,e(Cr.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();p.isTrue(0<this.minIndex&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],r=Zt.computeOrientation(this.minCoord,n,e),i=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&r===Zt.COUNTERCLOCKWISE?i=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&r===Zt.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=$e.LEFT;return n[e].y<n[e+1].y&&(r=$e.RIGHT),r},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode().getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}p.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===$e.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Cr}}),kr.prototype.addLast=function(t){this.array_.push(t)},kr.prototype.removeFirst=function(){return this.array_.shift()},kr.prototype.isEmpty=function(){return 0===this.array_.length},e(Er.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){if((r=n.next()).isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ge("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(n=t.getEdges().iterator();n.hasNext();){var r;(r=n.next()).setVisited(!0),this.copySymDepths(r)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths($e.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth($e.RIGHT)&&e.getDepth($e.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new K,n=new kr,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new L,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this.env=t}return this.env},addReachable:function(t){var e=new ee;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth($e.LEFT,t.getDepth($e.RIGHT)),e.setDepth($e.RIGHT,t.getDepth($e.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[n]},getClass:function(){return Er}}),e(Sr.prototype,{isDeletable:function(t,e,n,r){var i=this.inputLine[t],o=this.inputLine[e],a=this.inputLine[n];return!(!this.isConcave(i,o,a)||!this.isShallow(i,o,a,r))&&this.isShallowSampled(i,o,t,n,r)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),r=!1;n<this.inputLine.length;){var i=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Sr.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},isShallowConcavity:function(t,e,n,r){return Zt.computeOrientation(t,e,n)===this.angleOrientation&&Zt.distancePointLine(e,t,n)<r},isShallowSampled:function(t,e,n,r,i){var o=Math.trunc((r-n)/Sr.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this.inputLine[a],i))return!1;return!0},isConcave:function(t,e,n){var r=Zt.computeOrientation(t,e,n)===this.angleOrientation;return r},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=Zt.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Sr.DELETE;)e++;return e},isShallow:function(t,e,n,r){return Zt.distancePointLine(e,t,n)<r},collapseLine:function(){for(var t=new w,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Sr.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Sr}}),Sr.simplify=function(t,e){return new Sr(t).simplify(e)},Sr.INIT=0,Sr.DELETE=1,Sr.KEEP=1,Sr.NUM_PTS_TO_CHECK=10,e(Mr.prototype,{getCoordinates:function(){return this.ptList.toArray(Mr.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new b(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(n=t.length-1;0<=n;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance},toString:function(){return(new Gt).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new b(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return 2<=this.ptList.size()&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(Pr.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=Zt.computeOrientation(this.s0,this.s1,this.s2),r=n===Zt.CLOCKWISE&&this.side===$e.LEFT||n===Zt.COUNTERCLOCKWISE&&this.side===$e.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new Qt(t,e),r=new Qt;this.computeOffsetSegment(n,$e.LEFT,this.distance,r);var i=new Qt;this.computeOffsetSegment(n,$e.RIGHT,this.distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this.bufParams.getEndCapStyle()){case Lr.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,Zt.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case Lr.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(i.p1);break;case Lr.CAP_SQUARE:var l=new b;l.x=Math.abs(this.distance)*Math.cos(s),l.y=Math.abs(this.distance)*Math.sin(s);var u=new b(r.p1.x+l.x,r.p1.y+l.y),c=new b(i.p1.x+l.x,i.p1.y+l.y);this.segList.addPt(u),this.segList.addPt(c)}},getCoordinates:function(){return this.segList.getCoordinates()},addMitreJoin:function(t,e,n,r){var i=!0,o=null;try{o=R.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this.bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof k))throw t;o=new b(0,0),i=!1}i?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===Zt.CLOCKWISE?s<=c&&(s+=2*Math.PI):c<=s&&(s-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,s,c,r,i),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Pr.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Lr.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Lr.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new b(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new b(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new b(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new b(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,r){var i=this.seg0.p1,o=$n.angle(i,this.seg0.p0),a=($n.angle(i,this.seg1.p1),$n.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1))/2,s=$n.normalize(o+a),l=$n.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=new Qt(i,new b(i.x+u*Math.cos(l),i.y+u*Math.sin(l))),f=h.pointAlongOffset(1,c),p=h.pointAlongOffset(1,-c);this.side===$e.LEFT?(this.segList.addPt(f),this.segList.addPt(p)):(this.segList.addPt(p),this.segList.addPt(f))},computeOffsetSegment:function(t,e,n,r){var i=e===$e.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},addFilletArc:function(t,e,n,r,i){var o=r===Zt.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this.filletAngleQuantum+.5);if(s<1)return null;var l;l=a/s;for(var u=0,c=new b;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this.segList.addPt(c),u+=l}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Pr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),0<this.closingSegLengthFactor){var n=new b((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var r=new b((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new b(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Mr,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Pr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),2<=this.li.getIntersectionNum()&&(this.bufParams.getJoinStyle()===Lr.JOIN_BEVEL||this.bufParams.getJoinStyle()===Lr.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Zt.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Pr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Pr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Pr.MAX_CLOSING_SEG_LEN_FACTOR=80,e(Ir.prototype,{getOffsetCurve:function(t,e){if(0===(this.distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&W.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var i=Sr.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],$e.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Sr.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],$e.LEFT),n.addFirstSegment();for(a=2;a<=l;a++)n.addNextSegment(s[a],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);e===$e.RIGHT&&(r=-r);var i=Sr.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),r=Sr.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],$e.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Sr.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],$e.LEFT);for(o=s-2;0<=o;o--)e.addNextSegment(a[o],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Lr.CAP_ROUND:e.createCircle(t);break;case Lr.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if((this.distance=e)<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this.bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ir.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},computeOffsetCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){var i=Sr.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],$e.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{var s=Sr.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],$e.LEFT),n.addFirstSegment();for(a=2;a<=l;a++)n.addNextSegment(s[a],!0)}n.addLastSegment()},getSegGen:function(t){return new Pr(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new b(t[n]);return e},e(Tr.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,n=this.subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(S(arguments[2],y)&&arguments[0]instanceof b&&arguments[1]instanceof an){var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates();for(n=0;n<l.length-1;n++){if(this.seg.p0=l[n],this.seg.p1=l[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse(),!(Math.max(this.seg.p0.x,this.seg.p1.x)<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||Zt.computeOrientation(this.seg.p0,this.seg.p1,o)===Zt.RIGHT)){var u=a.getDepth($e.LEFT);this.seg.p0.equals(l[n])||(u=a.getDepth($e.RIGHT));var c=new Or(this.seg,u);s.add(c)}}}else if(S(arguments[2],y)&&arguments[0]instanceof b&&S(arguments[1],y)){var h=arguments[0],f=arguments[1],p=arguments[2];for(n=f.iterator();n.hasNext();){var d=n.next();d.isForward()&&this.findStabbedSegments(h,d,p)}}},getDepth:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Yo.min(e).leftDepth},interfaces_:function(){return[]},getClass:function(){return Tr}}),e(Or.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:0!==(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg))?n:this.upwardSeg.compareTo(e.upwardSeg)},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[n]},getClass:function(){return Or}}),Tr.DepthSegment=Or,e(Nr.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,E.EXTERIOR,E.INTERIOR)},addPolygon:function(t){var e=this.distance,n=$e.LEFT;this.distance<0&&(e=-this.distance,n=$e.RIGHT);var r=t.getExteriorRing(),i=W.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance))return null;if(this.distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,E.EXTERIOR,E.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=W.removeRepeatedPoints(a.getCoordinates());0<this.distance&&this.isErodedCompletely(a,-this.distance)||this.addPolygonRing(s,e,$e.opposite(n),E.INTERIOR,E.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Zn(t[0],t[1],t[2]),r=n.inCentre();return Zt.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=W.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,E.EXTERIOR,E.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var r=new De(t,new Qe(0,E.BOUNDARY,e,n));this.curveList.add(r)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,r,i){if(0===e&&t.length<Pt.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=Pt.MINIMUM_VALID_SIZE&&Zt.isCCW(t)&&(o=i,a=r,n=$e.opposite(n));var s=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},add:function(t){if(t.isEmpty())return null;if(t instanceof St)this.addPolygon(t);else if(t instanceof Lt)this.addLineString(t);else if(t instanceof kt)this.addPoint(t);else if(t instanceof Mt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof It)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Nr}}),e(Dr.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&1===this.li.getIntersectionNum()){if(Dr.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this.li.computeIntersection(i,o,a,s),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Ve]},getClass:function(){return Dr}}),Dr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(Ar.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Qe(t.getLabel())).flip(),n.merge(r);var i=Ar.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this.edgeList.add(t),t.setDepthDelta(Ar.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new x,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Tr(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},createSubgraphs:function(t){for(var e=new x,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Er;i.create(r),e.add(i)}}return Yo.sort(e,Yo.reverseOrder()),e},createEmptyResultGeometry:function(){return this.geomFact.createPolygon()},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new qe,n=new Xt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Dr(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var r=new Nr(t,e,new Ir(n,this.bufParams)).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this.graph=new ln(new mn),this.graph.addEdges(this.edgeList.getEdges());var i=this.createSubgraphs(this.graph),o=new un(this.geomFact);this.buildSubgraphs(i,o);var a=o.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(a)},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new Fn(i.getCoordinates(),new Qe(a));this.insertUniqueEdge(s)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.depthDelta=function(t){var e=t.getLocation(0,$e.LEFT),n=t.getLocation(0,$e.RIGHT);return e===E.INTERIOR&&n===E.EXTERIOR?1:e===E.EXTERIOR&&n===E.INTERIOR?-1:0},Ar.convertSegStrings=function(t){for(var e=new Gt,n=new x;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)},e(Rr.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this.segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this.segStrings)}else if(2===arguments.length){var n=arguments[0];for(t=arguments[1].iterator();t.hasNext();){e=t.next().getCoordinates();for(var r=1;r<e.length-1;r++)if(e[r].equals(n))throw new v("found endpt/interior pt intersection at index "+r+" :pt "+n)}}},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],m=f.getCoordinates()[p],y=f.getCoordinates()[p+1];if(this.li.computeIntersection(d,g,m,y),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,d,g)||this.hasInteriorIntersection(this.li,m,y)))throw new v("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+y)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length){var n=arguments[0].getCoordinates();for(t=0;t<n.length-2;t++)this.checkCollapse(n[t],n[t+1],n[t+2])}},hasInteriorIntersection:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new v("found non-noded collapse at "+Rr.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.fact=new Gt,e(Fr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this.maxx<n||this.minx>r||this.maxy<i||this.miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return p.isTrue(!(a&&s),"Found bad envelope test"),s},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new b(this.maxx,this.maxy),this.corner[1]=new b(this.minx,this.maxy),this.corner[2]=new b(this.minx,this.miny),this.corner[3]=new b(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=Fr.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new L(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,r=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!n||!r)||(!!t.equals(this.pt)||!!e.equals(this.pt))))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.SAFE_ENV_EXPANSION_FACTOR=.75,e(jr.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return jr}}),e(Br.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new zr(e,n,r);return this.index.query(i,{interfaces_:function(){return[xe]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Br}}),s(zr,jr),e(zr.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return jr.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return zr}}),Br.HotPixelSnapAction=zr,e(qr.prototype,{processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this.li.computeIntersection(i,o,a,s),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var l=0;l<this.li.getIntersectionNum();l++)this.interiorIntersections.add(this.li.getIntersection(l));t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Ve]},getClass:function(){return qr}}),e(Ur.prototype,{checkCorrectness:function(t){var e=new Rr(De.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof C))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return De.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new qr(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(S(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof De)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Fr(r[i],this.scaleFactor,this.li);this.pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new qe,this.pointSnapper=new Br(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=new Fr(e.next(),this.scaleFactor,this.li);this.pointSnapper.snap(n)}},interfaces_:function(){return[Be]},getClass:function(){return Ur}}),e(Gr.prototype,{bufferFixedPrecision:function(t){var e=new br(new Ur(new qt(1)),t.getScale()),n=new Ar(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=Gr.MAX_PRECISION_DIGITS;0<=t;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Ge))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=new qt(Gr.precisionScaleFactor(this.argGeom,this.distance,e));this.bufferFixedPrecision(n)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===qt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Ar(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof v))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Gr}}),Gr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Gr(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2];return(s=new Gr(n)).setQuadrantSegments(i),s.getResultGeometry(r)}if(arguments[2]instanceof Lr&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return(s=new Gr(o,arguments[2])).getResultGeometry(a)}}else if(4===arguments.length){var s,l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];return(s=new Gr(l)).setQuadrantSegments(c),s.setEndCapStyle(h),s.getResultGeometry(u)}},Gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=M.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Gr.CAP_ROUND=Lr.CAP_ROUND,Gr.CAP_BUTT=Lr.CAP_FLAT,Gr.CAP_FLAT=Lr.CAP_FLAT,Gr.CAP_SQUARE=Lr.CAP_SQUARE,Gr.MAX_PRECISION_DIGITS=12;var aa=Object.freeze({BufferOp:Gr,BufferParameters:Lr});e(Vr.prototype,{filter:function(t){t instanceof St&&this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return Vr}}),Vr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Vr.getPolygons(t,new x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof St?n.add(e):e instanceof ft&&e.apply(new Vr(n)),n}},e(Hr.prototype,{isInsideArea:function(){return this.segIndex===Hr.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return Hr}}),Hr.INSIDE_AREA=-1,e(Wr.prototype,{filter:function(t){t instanceof kt&&this.pts.add(t)},interfaces_:function(){return[ct]},getClass:function(){return Wr}}),Wr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof kt?Yo.singletonList(t):Wr.getPoints(t,new x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof kt?n.add(e):e instanceof ft&&e.apply(new Wr(n)),n}},e(Xr.prototype,{filter:function(t){(t instanceof kt||t instanceof Lt||t instanceof St)&&this.locations.add(new Hr(t,0,t.getCoordinate()))},interfaces_:function(){return[ct]},getClass:function(){return Xr}}),Xr.getLocations=function(t){var e=new x;return t.apply(new Xr(e)),e},e(Yr.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Vr.getPolygons(this.geom[e]);if(0<i.size()){var o=Xr.getLocations(this.geom[r]);if(this.computeContainmentDistance(o,i,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[r]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&S(arguments[0],y)&&S(arguments[1],y)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Hr&&arguments[1]instanceof St){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(E.EXTERIOR!==this.ptLocator.locate(g,p))return d[this.minDistance=0]=f,d[1]=new Hr(p,g),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=Sn.getLines(this.geom[0]),n=Sn.getLines(this.geom[1]),r=Wr.getPoints(this.geom[0]),i=Wr.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Lt&&arguments[1]instanceof kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){if((f=Zt.distancePointLine(i,r[o],r[o+1]))<this.minDistance){this.minDistance=f;var a=new Qt(r[o],r[o+1]).closestPoint(i);n[0]=new Hr(t,o,a),n[1]=new Hr(e,0,i)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Lt&&arguments[1]instanceof Lt){var s=arguments[0],l=arguments[1],u=arguments[2];if(s.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this.minDistance)return null;r=s.getCoordinates();var c=l.getCoordinates();for(o=0;o<r.length-1;o++)for(var h=0;h<c.length-1;h++){var f;if((f=Zt.distanceLineLine(r[o],r[o+1],c[h],c[h+1]))<this.minDistance){this.minDistance=f;var p=new Qt(r[o],r[o+1]),d=new Qt(c[h],c[h+1]),g=p.closestPoints(d);u[0]=new Hr(s,o,g[0]),u[1]=new Hr(l,h,g[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this.minDistance&&(this.minDistance=s,n[0]=new Hr(i,0,i.getCoordinate()),n[1]=new Hr(a,0,a.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new h("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.distance=function(t,e){return new Yr(t,e).distance()},Yr.isWithinDistance=function(t,e,n){return new Yr(t,e,n).distance()<=n},Yr.nearestPoints=function(t,e){return new Yr(t,e).nearestPoints()};var sa=Object.freeze({DistanceOp:Yr});e($r.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new w,r=this.directedEdges.iterator();r.hasNext();){var i=r.next();i.getEdgeDirection()?t++:e++,n.add(i.getEdge().getLine().getCoordinates(),!1,i.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),t<e&&W.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return $r}}),e(Zr.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Zr.setVisited=function(t,e){for(;t.hasNext();){t.next().setVisited(e)}},Zr.setMarked=function(t,e){for(;t.hasNext();){t.next().setMarked(e)}},s(Qr,Zr),e(Qr.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Zt.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[n]},getClass:function(){return Qr}}),Qr.toEdges=function(t){for(var e=new x,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},s(Kr,Qr),e(Kr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(p.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return Kr}}),s(Jr,Zr),e(Jr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof ei){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Jr}}),e(ti.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Yo.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Jr){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e).getEdge()===t)return e}return-1}if(arguments[0]instanceof Qr){var n=arguments[0];this.sortEdges();for(e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e)===n)return e}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0]%this.outEdges.size();return r<0&&(r+=this.outEdges.size()),r}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return ti}}),s(ei,Zr),e(ei.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return ei}}),ei.getEdgesBetween=function(t,e){var n=new K(Qr.toEdges(t.getOutEdges().getEdges())),r=Qr.toEdges(e.getOutEdges().getEdges());return n.retainAll(r),n},s(ni,Jr),e(ni.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return ni}}),e(ri.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return ri}}),e(ii.prototype,{findNodesOfDegree:function(t){for(var e=new x,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===t&&e.add(r)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Jr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof Qr){var e=arguments[0];null!==(i=e.getSym())&&i.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof ei){for(var n=arguments[0],r=n.getOutEdges().getEdges().iterator();r.hasNext();){var i,o=r.next();null!==(i=o.getSym())&&this.remove(i),this.dirEdges.remove(o);var a=o.getEdge();null!==a&&this.edges.remove(a)}this.nodeMap.remove(n.getCoordinate()),n.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Jr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof Qr){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof ei){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Jr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Qr){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return ii}}),s(oi,ii),e(oi.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=W.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],r=e[e.length-1],i=this.getNode(n),o=this.getNode(r),a=new Kr(i,o,e[1],!0),s=new Kr(o,i,e[e.length-2],!1),l=new ni(t);l.setDirectedEdges(a,s),this.add(l)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new ei(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return oi}}),e(ai.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(p.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;Zr.setMarked(this.graph.nodeIterator(),!1),Zr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new x,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new x;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){for(var e=new $r(this.factory),n=t;e.add(n),n.getEdge().setMarked(!0),null!==(n=n.getNext())&&n!==t;);return e},add:function(){if(arguments[0]instanceof B)arguments[0].apply({interfaces_:function(){return[j]},filter:function(t){t instanceof Lt&&this.add(t)}});else if(S(arguments[0],m)){var t=arguments[0];this.mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}}else if(arguments[0]instanceof Lt){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory()),this.graph.addEdge(r)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return ai}});var la=Object.freeze({LineMerger:ai}),ua=Object.freeze({OverlayOp:Un});s(si,Qr),e(si.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return si}}),s(li,Jr),e(li.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return li}}),e(ui.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new w,e=this.deList.iterator();e.hasNext();){var n=e.next(),r=n.getEdge();ui.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},build:function(t){for(var e=t;this.add(e),e.setRing(this),e=e.getNext(),p.isTrue(null!==e,"found null DE in ring"),p.isTrue(e===t||!e.isInRing(),"found DE already in ring"),e!==t;);},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Pt){var t=arguments[0];null===this.holes&&(this.holes=new x),this.holes.add(t)}else if(arguments[0]instanceof ui){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new x),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null},computeHole:function(){var t=this.getRing();this._isHole=Zt.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Ht.toLineString(new Rt(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&A.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof C))throw t;A.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return ui}}),ui.findDirEdgesInRing=function(t){for(var e=t,n=new x;n.add(e),e=e.getNext(),p.isTrue(null!==e,"found null DE in ring"),p.isTrue(e===t||!e.isInRing(),"found DE already in ring"),e!==t;);return n},ui.addEdge=function(t,e,n){if(e)for(var r=0;r<t.length;r++)n.add(t[r],!1);else for(r=t.length-1;0<=r;r--)n.add(t[r],!1)},ui.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getRing(),c=u.getEnvelopeInternal();if(!c.equals(r)&&c.contains(r)){i=W.ptNotInList(n.getCoordinates(),u.getCoordinates());var h=!1;Zt.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(a=(o=l).getRing().getEnvelopeInternal())}}return o},e(ci.prototype,{compare:function(t,e){var n=e;return t.getRing().getEnvelope().compareTo(n.getRing().getEnvelope())},interfaces_:function(){return[o]},getClass:function(){return ci}}),ui.EnvelopeComparator=ci,s(hi,ii),e(hi.prototype,{findEdgeRing:function(t){var e=new ui(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){return null}else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();hi.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=W.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],r=e[e.length-1],i=this.getNode(n),o=this.getNode(r),a=new si(i,o,e[1],!0),s=new si(o,i,e[e.length-2],!1),l=new li(t);l.setDirectedEdges(a,s),this.add(l)},deleteCutEdges:function(){this.computeNextCWEdges(),hi.findLabeledEdgeRings(this.dirEdges);for(var t=new x,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var r=n.getSym();if(n.getLabel()===r.getLabel()){n.setMarked(!0),r.setMarked(!0);var i=n.getEdge();t.add(i.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),hi.label(this.dirEdges,-1);var t=hi.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new x,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()&&!r.isInRing()){var i=this.findEdgeRing(r);e.add(i)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new ei(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel(),i=hi.findIntersectionNodes(n,r);if(null!==i)for(var o=i.iterator();o.hasNext();){var a=o.next();hi.computeNextCCWEdges(a,r)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new K,n=new ee,r=t.iterator();r.hasNext();)n.push(r.next());for(;!n.isEmpty();){var i=n.pop();hi.deleteAllEdges(i);for(r=i.getOutEdges().getEdges().iterator();r.hasNext();){var o=r.next();o.setMarked(!0);var a=o.getSym();null!==a&&a.setMarked(!0);var s=o.getEdge();e.add(s.getLine());var l=o.getToNode();1===hi.getDegreeNonDeleted(l)&&n.push(l)}}return e},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.findLabeledEdgeRings=function(t){for(var e=new x,n=1,r=t.iterator();r.hasNext();){var i=r.next();if(!(i.isMarked()||0<=i.getLabel())){e.add(i);var o=ui.findDirEdgesInRing(i);hi.label(o,n),n++}}return e},hi.getDegreeNonDeleted=function(t){for(var e=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();){n.next().isMarked()||e++}return e},hi.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var n=e.next();n.setMarked(!0);var r=n.getSym();null!==r&&r.setMarked(!0)}},hi.label=function(t,e){for(var n=t.iterator();n.hasNext();){n.next().setLabel(e)}},hi.computeNextCWEdges=function(t){for(var e=null,n=null,r=t.getOutEdges().getEdges().iterator();r.hasNext();){var i=r.next();if(!i.isMarked()){if(null===e&&(e=i),null!==n)n.getSym().setNext(i);n=i}}null!==n&&n.getSym().setNext(e)},hi.computeNextCCWEdges=function(t,e){for(var n=null,r=null,i=t.getOutEdges().getEdges(),o=i.size()-1;0<=o;o--){var a=i.get(o),s=a.getSym(),l=null;a.getLabel()===e&&(l=a);var u=null;s.getLabel()===e&&(u=s),null===l&&null===u||(null!==u&&(r=u),null!==l&&(null!==r&&(r.setNext(l),r=null),null===n&&(n=l)))}null!==r&&(p.isTrue(null!==n),r.setNext(n))},hi.getDegree=function(t,e){for(var n=0,r=t.getOutEdges().getEdges().iterator();r.hasNext();){r.next().getLabel()===e&&n++}return n},hi.findIntersectionNodes=function(t,e){var n=t,r=null;do{var i=n.getFromNode();1<hi.getDegree(i,e)&&(null===r&&(r=new x),r.add(i)),n=n.getNext(),p.isTrue(null!==n,"found null DE in ring"),p.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return r},e(fi.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new Gt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(Gt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isValid()?e.add(i):n.add(i.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new x,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new x;this.invalidRingLines=new x,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),fi.assignHolesToShells(this.holeList,this.shellList),Yo.sort(this.shellList,new ui.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(fi.findDisjointShells(this.shellList),n=!1),this.polyList=fi.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(S(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof Lt){var n=arguments[0];this.geomFactory=n.getFactory(),null===this.graph&&(this.graph=new hi(this.geomFactory)),this.graph.addEdge(n)}else if(arguments[0]instanceof B){arguments[0].apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new x,this.shellList=new x;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getOuterHole();null===r||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}},fi.extractPolygons=function(t,e){for(var n=new x,r=t.iterator();r.hasNext();){var i=r.next();(e||i.isIncluded())&&n.add(i.getPolygon())}return n},fi.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();fi.assignHoleToShell(r,e)}},fi.assignHoleToShell=function(t,e){var n=ui.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},fi.findDisjointShells=function(t){fi.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var r=n.next();r.isIncludedSet()||(r.updateIncluded(),r.isIncludedSet()||(e=!0))}}while(e)},e(pi.prototype,{filter:function(t){t instanceof Lt&&this.p.add(t)},interfaces_:function(){return[j]},getClass:function(){return pi}}),fi.LineStringAdder=pi;var ca=Object.freeze({Polygonizer:fi});e(di.prototype,{createEdgeEndForNext:function(t,e,n,r){var i=n.segmentIndex+1;if(i>=t.getNumPoints()&&null===r)return null;var o=t.getCoordinate(i);null!==r&&r.segmentIndex===n.segmentIndex&&(o=r.coord);var a=new on(t,n.coord,o,new Qe(t.getLabel()));e.add(a)},createEdgeEndForPrev:function(t,e,n,r){var i=n.segmentIndex;if(0===n.dist){if(0===i)return null;i--}var o=t.getCoordinate(i);null!==r&&r.segmentIndex>=i&&(o=r.coord);var a=new Qe(t.getLabel());a.flip();var s=new on(t,n.coord,o,a);e.add(s)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,n=t;n.hasNext();){var r=n.next();this.computeEdgeEnds(r,e)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i.getEdgeIntersectionList();a.addEndpoints();var s=a.iterator(),l=null,u=null;if(!s.hasNext())return null;for(var c=s.next();l=u,u=c,c=null,s.hasNext()&&(c=s.next()),null!==u&&(this.createEdgeEndForPrev(i,o,u,l),this.createEdgeEndForNext(i,o,u,c)),null!==u;);}},interfaces_:function(){return[]},getClass:function(){return di}}),s(gi,on),e(gi.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,r=!1,i=this.iterator();i.hasNext();){(o=i.next().getLabel().getLocation(t))===E.BOUNDARY&&n++,o===E.INTERIOR&&(r=!0)}var o=E.NONE;r&&(o=E.INTERIOR),0<n&&(o=jn.determineBoundary(e,n)),this.label.setLocation(t,o)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var i=r.getLabel().getLocation(t,e);if(i===E.INTERIOR)return this.label.setLocation(t,e,E.INTERIOR),null;i===E.EXTERIOR&&this.label.setLocation(t,e,E.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,$e.LEFT),this.computeLabelSide(t,$e.RIGHT)},updateIM:function(t){Fn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0)}this.label=e?new Qe(E.NONE,E.NONE,E.NONE):new Qe(E.NONE);for(var r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)},interfaces_:function(){return[]},getClass:function(){return gi}}),s(mi,dn),e(mi.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new gi(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return mi}}),s(yi,nn),e(yi.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return yi}}),s(_i,sn),e(_i.prototype,{createNode:function(t){return new yi(t,new mi)},interfaces_:function(){return[]},getClass:function(){return _i}}),e(vi.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===r?i&&e.setAtLeast("212101212"):2===n&&1===r?(i&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===r?(i&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===r&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this.arg[e].getGeometry()),this.isolatedEdges.add(r))}},labelIsolatedEdge:function(t,e,n){if(0<n.getDimension()){var r=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,r)}else t.getLabel().setAllLocations(e,E.EXTERIOR)},computeIM:function(){var t=new Kt;if(t.set(E.EXTERIOR,E.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new di,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var i=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this.nodes.find(o.coord);a.getLabel().isNull(t)&&(r===E.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,E.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this.nodes.addNode(o.coord);r===E.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,E.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();p.isTrue(0<n.getGeometryCount(),"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var n=this.nodes.iterator();n.hasNext();){var r=n.next();r.updateIM(t),r.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(E.INTERIOR,E.EXTERIOR,e.getDimension()),t.set(E.BOUNDARY,E.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(E.EXTERIOR,E.INTERIOR,n.getDimension()),t.set(E.EXTERIOR,E.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return vi}}),e(bi.prototype,{isContainedInBoundary:function(t){if(t instanceof St)return!1;if(t instanceof kt)return this.isPointContainedInBoundary(t);if(t instanceof Lt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new b,r=new b,i=0;i<e.size()-1;i++)if(e.getCoordinate(i,n),e.getCoordinate(i+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof kt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof b){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return bi}}),bi.contains=function(t,e){return new bi(t).contains(e)},e(xi.prototype,{intersects:function(t,e){var n=new L(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(0<t.compareTo(e)){var r=t;t=e,e=r}var i=!1;return e.y>t.y&&(i=!0),i?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return xi}}),e(wi.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return wi}}),e(Li.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Ci(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new ki(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var r=new Ei(this.rectangle);return r.applyTo(t),!!r.intersects()},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.intersects=function(t,e){return new Li(t).intersects(e)},s(Ci,wi),e(Ci.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Ci}}),s(ki,wi),e(ki.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof St))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new b,r=0;r<4;r++)if(this.rectSeq.getCoordinate(r,n),e.contains(n)&&pn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return ki}}),s(Ei,wi),e(Ei.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=Sn.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Ei}}),s(Si,Bn),e(Si.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Si.relate(t,e).isCovers())},Si.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Li.intersects(t,e):e.isRectangle()?Li.intersects(e,t):Si.relate(t,e).isIntersects())},Si.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Si.relate(t,e).isTouches(t.getDimension(),e.getDimension())},Si.within=function(t,e){return e.contains(t)},Si.coveredBy=function(t,e){return Si.covers(e,t)},Si.relate=function(){if(2===arguments.length)return new Si(arguments[0],arguments[1]).getIntersectionMatrix();if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof B&&arguments[1]instanceof B){var t=arguments[0],e=arguments[1],n=arguments[2];return Si.relateWithCheck(t,e).matches(n)}if(S(arguments[2],q)&&arguments[0]instanceof B&&arguments[1]instanceof B)return new Si(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}},Si.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Si.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},Si.disjoint=function(t,e){return!t.intersects(e)},Si.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Si.relate(t,e)},Si.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Si.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},Si.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?bi.contains(t,e):Si.relate(t,e).isContains())};var ha=Object.freeze({RelateOp:Si});e(Mi.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this.skipEmpty&&r.isEmpty()||e.add(r)}},combine:function(){for(var t=new x,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Mi}}),Mi.combine=function(){if(1===arguments.length)return new Mi(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Mi(Mi.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Mi(Mi.createList(n,r,i)).combine()}},Mi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(n=new x).add(t),n.add(e),n}if(3===arguments.length){var n,r=arguments[0],i=arguments[1],o=arguments[2];return(n=new x).add(r),n.add(i),n.add(o),n}},e(Pi.prototype,{union:function(){for(var t=new de,e=new st,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n).getCoordinate();t.locate(r,this.otherGeom)===E.EXTERIOR&&e.add(r)}if(0===e.size())return this.otherGeom;var i,o=W.toCoordinateArray(e);return i=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),Mi.combine(i,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.union=function(t,e){return new Pi(t,e).union()},e(Ii.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return Ii}}),Ii.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Ii.extract(t,e,new x)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return n.getSortIndex()===r?i.add(n):n instanceof ft&&n.apply(new Ii(r,i)),i}},e(Ti.prototype,{reduceToGeometries:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next(),i=null;S(r,y)?i=this.unionTree(r):r instanceof B&&(i=r),e.add(i)}return e},extractByEnvelope:function(t,e,n){for(var r=new x,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this.geomFactory.buildGeometry(r)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Se(Ti.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ti.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ti.getGeometry(e,n),Ti.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=(i=this.binaryUnion(e,n,o),this.binaryUnion(e,o,r));return this.unionSafe(i,a)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Ti.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},unionUsingEnvelopeIntersection:function(t,e,n){var r=new x,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Mi.combine(r)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.restrictToPolygons=function(t){if(S(t,Et))return t;var e=Vr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Gt.toPolygonArray(e))},Ti.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ti.union=function(t){return new Ti(t).union()},Ti.STRTREE_NODE_CAPACITY=4,e(Oi.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Vn.overlayOp(t,e,Un.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(S(arguments[0],m))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.extract(e)}else if(arguments[0]instanceof B){var n=arguments[0];null===this.geomFact&&(this.geomFact=n.getFactory()),Ii.extract(n,B.SORTINDEX_POLYGON,this.polygons),Ii.extract(n,B.SORTINDEX_LINESTRING,this.lines),Ii.extract(n,B.SORTINDEX_POINT,this.points)}},union:function(){if(null===this.geomFact)return null;var t=null;if(0<this.points.size()){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e)}var n=null;if(0<this.lines.size()){var r=this.geomFact.buildGeometry(this.lines);n=this.unionNoOpt(r)}var i=null;0<this.polygons.size()&&(i=Ti.union(this.polygons));var o=this.unionWithNull(n,i),a=null;return a=null===t?o:null===o?t:Pi.union(t,o),null===a?this.geomFact.createGeometryCollection():a},interfaces_:function(){return[]},getClass:function(){return Oi}}),Oi.union=function(){if(1===arguments.length){if(S(arguments[0],m))return new Oi(arguments[0]).union();if(arguments[0]instanceof B)return new Oi(arguments[0]).union()}else if(2===arguments.length){return new Oi(arguments[0],arguments[1]).union()}};var fa=Object.freeze({UnaryUnionOp:Oi});e(Ni.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),r=n[0],i=Ni.findDifferentPoint(n,r),o=e.findEdgeInSameDirection(r,i),a=e.findEdgeEnd(o),s=null;a.getLabel().getLocation(0,$e.RIGHT)===E.INTERIOR?s=a:a.getSym().getLabel().getLocation(0,$e.RIGHT)===E.INTERIOR&&(s=a.getSym()),p.isTrue(null!==s,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(s)},visitShellInteriors:function(t,e){if(t instanceof St){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof It)for(var r=t,i=0;i<r.getNumGeometries();i++){n=r.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,$e.RIGHT)===E.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){for(var e=t,n=t;p.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),(n=n.getNext())!==e;);},buildEdgeRings:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&null===r.getEdgeRing()){var i=new tn(r,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var o=i.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var r=n.getEdges(),i=r.get(0);if(i.getLabel().getLocation(0,$e.RIGHT)===E.INTERIOR)for(var o=0;o<r.size();o++)if(!(i=r.get(o)).isVisited())return this.disconnectedRingcoord=i.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new x;this.geomGraph.computeSplitEdges(t);var e=new ln(new mn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ni.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Di.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;r<2;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();t<n&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(Ai.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof Ai){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return n>=this.min&&r<=this.max}},init:function(t,e){this.min=t,(this.max=e)<t&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return Ai}}),e(Ri.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Ri.computeLevel(t),this.interval=new Ai,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=lr.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.computeLevel=function(t){var e=t.getWidth();return lr.exponent(e)+1},s(Fi,Di),e(Fi.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Di.getSubnodeIndex(t,this.centre);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},insert:function(t){p.isTrue(null===this.interval||this.interval.contains(t.interval));var e=Di.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Di.getSubnodeIndex(t,this.centre);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}return new Fi(new Ai(e,n),this.level-1)},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.createNode=function(t){var e=new Ri(t);return new Fi(e.getInterval(),e.getLevel())},Fi.createExpanded=function(t,e){var n=new Ai(e);null!==t&&n.expandToInclude(t.interval);var r=Fi.createNode(n);return null!==t&&r.insert(t),r},s(ji,Di),e(ji.prototype,{insert:function(t,e){var n=Di.getSubnodeIndex(t,ji.origin);if(-1===n)return this.add(e),null;var r=this.subnode[n];if(null===r||!r.getInterval().contains(t)){var i=Fi.createExpanded(r,t);this.subnode[n]=i}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){p.isTrue(t.getInterval().contains(e));(hr.isZeroWidth(e.getMin(),e.getMax())?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return ji}}),ji.origin=0,e(Bi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Bi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new Ai(t,t))}if(arguments[0]instanceof Ai){var e=arguments[0],n=new x;return this.query(e,n),n}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.root.addAllItemsFromOverlapping(r,i)}},iterator:function(){var t=new x;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=Bi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&0<e&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Bi}}),Bi.ensureExtent=function(t,e){var n=t.getMin(),r=t.getMax();return n!==r?t:(n===r&&(r=(n-=e/2)+e/2),new Ai(n,r))},e(zi.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return zi}}),e(qi.prototype,{testLineSegment:function(t,e){var n,r,i,o,a=e.p0,s=e.p1;n=a.x-t.x,r=a.y-t.y,i=s.x-t.x,o=s.y-t.y,(0<r&&o<=0||0<o&&r<=0)&&(0<Yt.signOfDet2x2(n,r,i,o)/(o-r)&&this.crossings++)},buildIndex:function(){this.tree=new Bi;for(var t=W.removeRepeatedPoints(this.ring.getCoordinates()),e=je.getChains(t),n=0;n<e.size();n++){var r=e.get(n),i=r.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,r)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new L(_.NEGATIVE_INFINITY,_.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new Ui(this,t),i=n.iterator();i.hasNext();){var o=i.next();this.testMonotoneChain(e,r,o)}return this.crossings%2==1},interfaces_:function(){return[zi]},getClass:function(){return qi}}),s(Ui,jr),e(Ui.prototype,{select:function(){if(1!==arguments.length)return jr.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return Ui}}),qi.MCSelecter=Ui,e(Gi.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var r=n.next();this.nodes.addNode(r.getCoordinate()).setLabel(e,r.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new di).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var r=n.next(),i=r.getLabel().getLocation(e),o=r.getEdgeIntersectionList().iterator();o.hasNext();){var a=o.next(),s=this.nodes.addNode(a.coord);i===E.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,E.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Gi}}),e(Vi.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var n=e.next();if(1<n.getEdgeEnds().size())return this.invalidPoint=n.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Vi}}),e(Hi.prototype,{buildIndex:function(){this.index=new Se;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),r=this.index.query(e.getEnvelopeInternal()),i=0;i<r.size();i++){var o=r.get(i),a=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var s=Xi.findPtNotNode(n,o,this.graph);if(null!==s)if(Zt.isPointInRing(s,a))return this.nestedPt=s,!1}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Hi}}),e(Wi.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Wi.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Wi}}),Wi.ERROR=0,Wi.REPEATED_POINT=1,Wi.HOLE_OUTSIDE_SHELL=2,Wi.NESTED_HOLES=3,Wi.DISCONNECTED_INTERIOR=4,Wi.SELF_INTERSECTION=5,Wi.RING_SELF_INTERSECTION=6,Wi.NESTED_SHELLS=7,Wi.DUPLICATE_RINGS=8,Wi.TOO_FEW_POINTS=9,Wi.INVALID_COORDINATE=10,Wi.RING_NOT_CLOSED=11,Wi.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(Xi.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Xi.isValid(t[e]))return this.validErr=new Wi(Wi.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof St){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new Hi(e),r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);n.add(i)}n.isNonNested()||(this.validErr=new Wi(Wi.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Vi(t);return e.isNodeConsistentArea()?void(e.hasDuplicateRings()&&(this.validErr=new Wi(Wi.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Wi(Wi.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var r=t.getCoordinates(),i=e.getCoordinates(),o=Xi.findPtNotNode(r,e,n);if(null!==o&&!Zt.isPointInRing(o,i))return o;var a=Xi.findPtNotNode(i,t,n);return null!==a?Zt.isPointInRing(a,r)?a:null:(p.shouldNeverReachHere("points in shell and hole appear to be equal"),null)},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Ni(t);e.isInteriorsConnected()||(this.validErr=new Wi(Wi.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new st,n=!0,r=t.iterator();r.hasNext();){var i=r.next();if(n)n=!1;else{if(e.contains(i.coord))return this.validErr=new Wi(Wi.RING_SELF_INTERSECTION,i.coord),null;e.add(i.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),r=new qi(n),i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i),a=Xi.findPtNotNode(o.getCoordinates(),n,e);if(null===a)return null;if(!r.isInside(a))return this.validErr=new Wi(Wi.HOLE_OUTSIDE_SHELL,a),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new Wi(Wi.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof kt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Mt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Pt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var r=new jn(0,n);if(this.checkTooFewPoints(r),null!==this.validErr)return null;var i=new Xt;r.computeSelfNodes(i,!0,!0),this.checkNoSelfIntersectingRings(r)}else if(arguments[0]instanceof Lt){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;r=new jn(0,o);this.checkTooFewPoints(r)}else if(arguments[0]instanceof St){var a=arguments[0];if(this.checkInvalidCoordinates(a),null!==this.validErr)return null;if(this.checkClosedRings(a),null!==this.validErr)return null;r=new jn(0,a);if(this.checkTooFewPoints(r),null!==this.validErr)return null;if(this.checkConsistentArea(r),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),null!==this.validErr))return null;if(this.checkHolesInShell(a,r),null!==this.validErr)return null;if(this.checkHolesNotNested(a,r),null!==this.validErr)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof It){for(var s=arguments[0],l=0;l<s.getNumGeometries();l++){var u=s.getGeometryN(l);if(this.checkInvalidCoordinates(u),null!==this.validErr)return null;if(this.checkClosedRings(u),null!==this.validErr)return null}r=new jn(0,s);if(this.checkTooFewPoints(r),null!==this.validErr)return null;if(this.checkConsistentArea(r),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),null!==this.validErr))return null;for(l=0;l<s.getNumGeometries();l++){u=s.getGeometryN(l);if(this.checkHolesInShell(u,r),null!==this.validErr)return null}for(l=0;l<s.getNumGeometries();l++){u=s.getGeometryN(l);if(this.checkHolesNotNested(u,r),null!==this.validErr)return null}if(this.checkShellsNotNested(s,r),null!==this.validErr)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof ft){var c=arguments[0];for(l=0;l<c.getNumGeometries();l++){var h=c.getGeometryN(l);if(this.checkValid(h),null!==this.validErr)return null}}else if(arguments[0]instanceof B){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof kt)this.checkValid(f);else if(f instanceof Mt)this.checkValid(f);else if(f instanceof Pt)this.checkValid(f);else if(f instanceof Lt)this.checkValid(f);else if(f instanceof St)this.checkValid(f);else if(f instanceof It)this.checkValid(f);else{if(!(f instanceof ft))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var r=t.getCoordinates(),i=e.getExteriorRing(),o=i.getCoordinates(),a=Xi.findPtNotNode(r,i,n);if(null===a)return null;if(!Zt.isPointInRing(a,o))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Wi(Wi.NESTED_SHELLS,a),null;for(var s=null,l=0;l<e.getNumInteriorRing();l++){var u=e.getInteriorRingN(l);if(null===(s=this.checkShellInsideHole(t,u,n)))return null}this.validErr=new Wi(Wi.NESTED_SHELLS,s)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;1<=t.getNumPoints()&&(e=t.getCoordinateN(0)),this.validErr=new Wi(Wi.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var r=t.getGeometryN(n).getExteriorRing(),i=0;i<t.getNumGeometries();i++)if(n!==i){var o=t.getGeometryN(i);if(this.checkShellNotNested(r,o,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.findPtNotNode=function(t,e,n){for(var r=n.findEdge(e).getEdgeIntersectionList(),i=0;i<t.length;i++){var o=t[i];if(!r.isIntersection(o))return o}return null},Xi.isValid=function(){if(arguments[0]instanceof B)return new Xi(arguments[0]).isValid();if(arguments[0]instanceof b){var t=arguments[0];return!_.isNaN(t.x)&&(!_.isInfinite(t.x)&&(!_.isNaN(t.y)&&!_.isInfinite(t.y)))}};var pa=Object.freeze({IsValidOp:Xi}),da=Object.freeze({BoundaryOp:dt,IsSimpleOp:xr,buffer:aa,distance:sa,linemerge:la,overlay:ua,polygonize:ca,relate:ha,union:fa,valid:pa});s(Yi,Tt.CoordinateOperation),e(Yi.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),r=0;r<t.length;r++){var i=new b(t[r]);this.targetPM.makePrecise(i),n[r]=i}var o=new w(n,!1).toCoordinateArray(),a=0;e instanceof Lt&&(a=2),e instanceof Pt&&(a=4);var s=n;return this.removeCollapsed&&(s=null),o.length<a?s:o},interfaces_:function(){return[]},getClass:function(){return Yi}}),e($i.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),r=n;return this.changePrecisionModel||(r=t.getFactory().createGeometry(n)),r},reducePointwise:function(t){var e=null;this.changePrecisionModel?e=new Tt(this.createFactory(t.getFactory(),this.targetPM)):e=new Tt;var n=this.removeCollapsed;return 2<=t.getDimension()&&(n=!0),e.edit(t,new Yi(this.targetPM,n))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Tt.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){return new Gt(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:S(e,Et)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Tt:new Tt(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.reduce=function(t,e){return new $i(e).reduce(t)},$i.reducePointwise=function(t,e){var n=new $i(e);return n.setPointwise(!0),n.reduce(t)};var ga=Object.freeze({GeometryPrecisionReducer:$i});e(Zi.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,r=t,i=t+1;i<e;i++){var o=this.seg.distance(this.pts[i]);n<o&&(n=o,r=i)}if(n<=this.distanceTolerance)for(i=t+1;i<e;i++)this.usePt[i]=!1;else this.simplifySection(t,r),this.simplifySection(r,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);var e=new w;for(t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new b(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Zi}}),Zi.simplify=function(t,e){var n=new Zi(t);return n.setDistanceTolerance(e),n.simplify()},e(Qi.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Ki(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new h("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.simplify=function(t,e){var n=new Qi(t);return n.setDistanceTolerance(e),n.getResultGeometry()},s(Ki,oe),e(Ki.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=oe.prototype.transformPolygon.call(this,t,e);return e instanceof It?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n,r=t.toCoordinateArray();return n=0===r.length?new Array(0).fill(null):Zi.simplify(r,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(n)},transformMultiPolygon:function(t,e){var n=oe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof St,r=oe.prototype.transformLinearRing.call(this,t,e);return!n||r instanceof Pt?r:null},interfaces_:function(){return[]},getClass:function(){return Ki}}),Qi.DPTransformer=Ki,s(Ji,Qt),e(Ji.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return Ji}}),e(to.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(to.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(to.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new Ji(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return to.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return to}}),to.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,r=0;r<t.size();r++)n=t.get(r),e[r]=n.p0;return e[e.length-1]=n.p1,e},e(eo.prototype,{remove:function(t){this.index.remove(new L(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof to)for(var t=arguments[0].getSegments(),e=0;e<t.length;e++){var n=t[e];this.add(n)}else if(arguments[0]instanceof Qt){var r=arguments[0];this.index.insert(new L(r.p0,r.p1),r)}},query:function(t){var e=new L(t.p0,t.p1),n=new no(t);return this.index.query(e,n),n.getItems()},interfaces_:function(){return[]},getClass:function(){return eo}}),e(no.prototype,{visitItem:function(t){var e=t;L.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[xe]},getClass:function(){return no}}),e(ro.prototype,{flatten:function(t,e){var n=new Qt(this.linePts[t],this.linePts[e]);return this.remove(this.line,t,e),this.outputIndex.add(n),n},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var r=new Array(2).fill(null);if(t+1===e){var i=this.line.getSegment(t);return this.line.addToResult(i),null}var o=!0;this.line.getResultSize()<this.line.getMinimumSize()&&(n+1<this.line.getMinimumSize()&&(o=!1));var a=new Array(1).fill(null),s=this.findFurthestPoint(this.linePts,t,e,a);a[0]>this.distanceTolerance&&(o=!1);var l=new Qt;if(l.p0=this.linePts[t],l.p1=this.linePts[e],r[0]=t,r[1]=e,this.hasBadIntersection(this.line,r,l)&&(o=!1),o){i=this.flatten(t,e);return this.line.addToResult(i),null}this.simplifySection(t,s,n),this.simplifySection(s,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t).iterator();e.hasNext();){var n=e.next();if(this.hasInteriorIntersection(n,t))return!0}return!1},findFurthestPoint:function(t,e,n,r){var i=new Qt;i.p0=t[e],i.p1=t[n];for(var o=-1,a=e,s=e+1;s<n;s++){var l=t[s],u=i.distance(l);o<u&&(o=u,a=s)}return r[0]=o,a},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var r=e;r<n;r++){var i=t.getSegment(r);this.inputIndex.remove(i)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var r=this.inputIndex.query(n).iterator();r.hasNext();){var i=r.next();if(this.hasInteriorIntersection(i,n)){if(ro.isInLineSection(t,e,i))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return ro}}),ro.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var r=n.getIndex();return r>=e[0]&&r<e[1]},e(io.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(e=t.iterator();e.hasNext();){var n=new ro(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return io}}),e(oo.prototype,{getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():(this.linestringMap=new zt,this.inputGeom.apply(new so(this)),this.lineSimplifier.simplify(this.linestringMap.values()),new ao(this.linestringMap).transform(this.inputGeom))},setDistanceTolerance:function(t){if(t<0)throw new h("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return oo}}),oo.simplify=function(t,e){var n=new oo(t);return n.setDistanceTolerance(e),n.getResultGeometry()},s(ao,oe),e(ao.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof Lt){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return oe.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return ao}}),e(so.prototype,{filter:function(t){if(t instanceof Lt){var e=t;if(e.isEmpty())return null;var n=new to(e,e.isClosed()?4:2);this.tps.linestringMap.put(e,n)}},interfaces_:function(){return[j]},getClass:function(){return so}}),oo.LineStringTransformer=ao,oo.LineStringMapBuilderFilter=so;var ma=Object.freeze({DouglasPeuckerSimplifier:Qi,TopologyPreservingSimplifier:oo});e(lo.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=lo.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=this.getConstrainedLength(n)/this.segLen;r.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(i):this.splitPt=lo.pointAlongReverse(this.seg,i)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return lo}}),lo.pointAlongReverse=function(t,e){var n=new b;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(uo.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return uo}}),e(co.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),r=n.getLength()/2,i=new lo(n),o=co.projectedSplitPoint(t,e),a=2*o.distance(e)*.8;return r<a&&(a=r),i.setMinimumLength(a),i.splitAt(o),i.getSplitPoint()},interfaces_:function(){return[uo]},getClass:function(){return co}}),co.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},e(ho.prototype,{interfaces_:function(){return[]},getClass:function(){return ho}}),ho.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},ho.isInCircleDDNormalized=function(t,e,n,r){var i=O.valueOf(t.x).selfSubtract(r.x),o=O.valueOf(t.y).selfSubtract(r.y),a=O.valueOf(e.x).selfSubtract(r.x),s=O.valueOf(e.y).selfSubtract(r.y),l=O.valueOf(n.x).selfSubtract(r.x),u=O.valueOf(n.y).selfSubtract(r.y),c=i.multiply(s).selfSubtract(a.multiply(o)),h=a.multiply(u).selfSubtract(l.multiply(s)),f=l.multiply(o).selfSubtract(i.multiply(u)),p=i.multiply(i).selfAdd(o.multiply(o)),d=a.multiply(a).selfAdd(s.multiply(s)),g=l.multiply(l).selfAdd(u.multiply(u));return 0<p.selfMultiply(h).selfAdd(d.selfMultiply(f)).selfAdd(g.selfMultiply(c)).doubleValue()},ho.checkRobustInCircle=function(t,e,n,r){var i=ho.isInCircleNonRobust(t,e,n,r),o=ho.isInCircleDDSlow(t,e,n,r),a=ho.isInCircleCC(t,e,n,r),s=Zn.circumcentre(t,e,n);A.out.println("p radius diff a = "+Math.abs(r.distance(s)-t.distance(s))/t.distance(s)),i===o&&i===a||(A.out.println("inCircle robustness failure (double result = "+i+", DD result = "+o+", CC result = "+a+")"),A.out.println(Ht.toLineString(new Rt([t,e,n,r]))),A.out.println("Circumcentre = "+Ht.toPoint(s)+" radius = "+t.distance(s)),A.out.println("p radius diff a = "+Math.abs(r.distance(s)/t.distance(s)-1)),A.out.println("p radius diff b = "+Math.abs(r.distance(s)/e.distance(s)-1)),A.out.println("p radius diff c = "+Math.abs(r.distance(s)/n.distance(s)-1)),A.out.println())},ho.isInCircleDDFast=function(t,e,n,r){var i=O.sqr(t.x).selfAdd(O.sqr(t.y)).selfMultiply(ho.triAreaDDFast(e,n,r)),o=O.sqr(e.x).selfAdd(O.sqr(e.y)).selfMultiply(ho.triAreaDDFast(t,n,r)),a=O.sqr(n.x).selfAdd(O.sqr(n.y)).selfMultiply(ho.triAreaDDFast(t,e,r)),s=O.sqr(r.x).selfAdd(O.sqr(r.y)).selfMultiply(ho.triAreaDDFast(t,e,n));return 0<i.selfSubtract(o).selfAdd(a).selfSubtract(s).doubleValue()},ho.isInCircleCC=function(t,e,n,r){var i=Zn.circumcentre(t,e,n),o=t.distance(i);return r.distance(i)-o<=0},ho.isInCircleNormalized=function(t,e,n,r){var i=t.x-r.x,o=t.y-r.y,a=e.x-r.x,s=e.y-r.y,l=n.x-r.x,u=n.y-r.y;return 0<(i*i+o*o)*(a*u-l*s)+(a*a+s*s)*(l*o-i*u)+(l*l+u*u)*(i*s-a*o)},ho.isInCircleDDSlow=function(t,e,n,r){var i=O.valueOf(r.x),o=O.valueOf(r.y),a=O.valueOf(t.x),s=O.valueOf(t.y),l=O.valueOf(e.x),u=O.valueOf(e.y),c=O.valueOf(n.x),h=O.valueOf(n.y),f=a.multiply(a).add(s.multiply(s)).multiply(ho.triAreaDDSlow(l,u,c,h,i,o)),p=l.multiply(l).add(u.multiply(u)).multiply(ho.triAreaDDSlow(a,s,c,h,i,o)),d=c.multiply(c).add(h.multiply(h)).multiply(ho.triAreaDDSlow(a,s,l,u,i,o)),g=i.multiply(i).add(o.multiply(o)).multiply(ho.triAreaDDSlow(a,s,l,u,c,h));return 0<f.subtract(p).add(d).subtract(g).doubleValue()},ho.isInCircleNonRobust=function(t,e,n,r){return 0<(t.x*t.x+t.y*t.y)*ho.triArea(e,n,r)-(e.x*e.x+e.y*e.y)*ho.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*ho.triArea(t,e,r)-(r.x*r.x+r.y*r.y)*ho.triArea(t,e,n)},ho.isInCircleRobust=function(t,e,n,r){return ho.isInCircleNormalized(t,e,n,r)},ho.triAreaDDSlow=function(t,e,n,r,i,o){return n.subtract(t).multiply(o.subtract(e)).subtract(r.subtract(e).multiply(i.subtract(t)))},ho.triAreaDDFast=function(t,e,n){var r=O.valueOf(e.x).selfSubtract(t.x).selfMultiply(O.valueOf(n.y).selfSubtract(t.y)),i=O.valueOf(e.y).selfSubtract(t.y).selfMultiply(O.valueOf(n.x).selfSubtract(t.x));return r.selfSubtract(i)},e(fo.prototype,{circleCenter:function(e,n){var r=new fo(this.getX(),this.getY()),t=new R(this.bisector(r,e),this.bisector(e,n)),i=null;try{i=new fo(t.getX(),t.getY())}catch(t){if(!(t instanceof k))throw t;A.err.println("a: "+r+"  b: "+e+"  c: "+n),A.err.println(t)}return i},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),r=e.getY()-t.getY();return new R(new R(t.getX()+n/2,t.getY()+r/2,1),new R(t.getX()-r+n/2,t.getY()+n+r/2,1))},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return ho.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var r=t.getX(),i=t.getY(),o=e.getX()-r,a=n.getX()-r,s=e.getY()-i,l=n.getY()-i,u=o*l-a*s,c=this.getX()-r,h=this.getY()-i,f=(l*c-a*h)/u,p=(-s*c+o*h)/u;return t.getZ()+f*(e.getZ()-t.getZ())+p*(n.getZ()-t.getZ())},midPoint:function(t){return new fo((this.p.x+t.getX())/2,(this.p.y+t.getY())/2,(this.p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return 0<(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new fo(t*this.p.x,t*this.p.y)},cross:function(){return new fo(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new fo(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=e.sub(t),r=this.sub(t),i=n.crossProduct(r);return 0<i?fo.LEFT:i<0?fo.RIGHT:n.getX()*r.getX()<0||n.getY()*r.getY()<0?fo.BEHIND:n.magn()<r.magn()?fo.BEYOND:t.equals(this)?fo.ORIGIN:e.equals(this)?fo.DESTINATION:fo.BETWEEN},sum:function(t){return new fo(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),r=this.distance(n,t),i=this.distance(this,t),o=this.distance(t,e);return o<i&&(i=o),(o=this.distance(e,this))<i&&(i=o),r/i},interfaces_:function(){return[]},getClass:function(){return fo}}),fo.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=e.distance(n),i=t.distance(e),o=n.z-e.z;return e.z+o*(i/r)}if(4===arguments.length){var a=arguments[0],s=arguments[1],l=arguments[2],u=arguments[3],c=s.x,h=s.y,f=l.x-c,p=u.x-c,d=l.y-h,g=u.y-h,m=f*g-p*d,y=a.x-c,_=a.y-h,v=(g*y-p*_)/m,b=(-d*y+f*_)/m;return s.z+v*(l.z-s.z)+b*(u.z-s.z)}},fo.LEFT=0,fo.RIGHT=1,fo.BEYOND=2,fo.BEHIND=3,fo.BETWEEN=4,fo.ORIGIN=5,fo.DESTINATION=6,s(po,fo),e(po.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return po}}),e(go.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new Qt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Ht.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return go}}),go.makeEdge=function(t,e){var n=new go,r=new go,i=new go,o=new go;((((n._rot=r)._rot=i)._rot=o)._rot=n).setNext(n),r.setNext(o),i.setNext(i),o.setNext(r);var a=n;return a.setOrig(t),a.setDest(e),a},go.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();go.splice(t,e),go.splice(t.sym(),n),go.splice(t,e.lNext()),go.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},go.splice=function(t,e){var n=t.oNext().rot(),r=e.oNext().rot(),i=e.oNext(),o=t.oNext(),a=r.oNext(),s=n.oNext();t.setNext(i),e.setNext(o),n.setNext(a),r.setNext(s)},go.connect=function(t,e){var n=go.makeEdge(t.dest(),e.orig());return go.splice(n,t.lNext()),go.splice(n.sym(),e),n},e(mo.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);go.splice(n,e);for(var r=n;(e=(n=this.subdiv.connect(e,n.sym())).oPrev()).lNext()!==r;);for(;;){var i=e.oPrev();if(i.dest().rightOf(e)&&t.isInCircle(e.orig(),i.dest(),e.dest()))go.swap(e),e=e.oPrev();else{if(e.oNext()===r)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return mo}}),e(yo.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return yo}}),e(_o.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e},findEdge:function(){return this.subdiv.getEdges().iterator().next()},interfaces_:function(){return[yo]},getClass:function(){return _o}}),s(vo,v),e(vo.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return vo}}),vo.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(bo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return bo}}),e(xo.prototype,{getTriangleVertices:function(t){var e=new Co;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||(!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2]))},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=go.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new x,r=t;do{var i=t.rot().orig().getCoordinate();n.add(i),t=t.oPrev()}while(t!==r);var o=new w;o.addAll(n,!1),o.closeRing(),o.size()<4&&(A.out.println(o),o.add(o.get(o.size()-1),!0));var a=o.toCoordinateArray(),s=e.createPolygon(e.createLinearRing(a),null),l=r.orig();return s.setUserData(l.getCoordinate()),s},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);go.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return go.splice(e.sym(),n),go.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);xo.getTriangleEdges(t,e);var n=new Array(3).fill(null);xo.getTriangleEdges(t.sym(),n);var r=t.lNext().dest();if(this.isFrameVertex(r))return!0;var i=t.sym().lNext().dest();return!!this.isFrameVertex(i)},makeEdge:function(t,e){var n=go.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new ee;n.push(this.startingEdge);for(var r=new K;!n.empty();){var i=n.pop();if(!r.contains(i)){var o=this.fetchTriangleToVisit(i,n,e,r);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},getEnvelope:function(){return new L(this.frameEnv)},createFrame:function(t){var e,n=t.getWidth(),r=t.getHeight();e=r<n?10*n:10*r,this.frameVertex[0]=new fo((t.getMaxX()+t.getMinX())/2,t.getMaxY()+e),this.frameVertex[1]=new fo(t.getMinX()-e,t.getMinY()-e),this.frameVertex[2]=new fo(t.getMaxX()+e,t.getMinY()-e),this.frameEnv=new L(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new ko;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new K,n=this.quadEdges.iterator();n.hasNext();){var r=n.next(),i=r.orig();!t&&this.isFrameVertex(i)||e.add(i);var o=r.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,r){var i=t,o=0,a=!1;do{this.triEdges[o]=i,this.isFrameEdge(i)&&(a=!0);var s=i.sym();r.contains(s)||e.push(s),r.add(i),o++,i=i.lNext()}while(i!==t);return a&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),r=0,i=e.iterator();i.hasNext();){var o=i.next();n[r++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new x,n=new K,r=this.quadEdges.iterator();r.hasNext();){var i=r.next(),o=i.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(i));var a=i.sym(),s=a.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(a))}return e},getTriangleEdges:function(t){var e=new Lo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new x,n=new ee;n.push(this.startingEdge);for(var r=new K;!n.empty();){var i=n.pop();if(!r.contains(i)){var o=i.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(i.oNext()),n.push(i.sym().oNext()),r.add(i),r.add(i.sym())}}return e},delete:function(t){go.splice(t,t.oPrev()),go.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),r=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(r),t.delete(),e.delete(),n.delete(),r.delete()},locateFromEdge:function(t,e){for(var n=0,r=this.quadEdges.size(),i=e;;){if(r<++n)throw new vo(i.toLineSegment());if(t.equals(i.orig())||t.equals(i.dest()))break;if(t.rightOf(i))i=i.sym();else if(t.rightOf(i.oNext())){if(t.rightOf(i.dPrev()))break;i=i.dPrev()}else i=i.oNext()}return i},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new wo,!0);for(var e=new x,n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){var r=n.next();e.add(this.getVoronoiCellPolygon(r,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(Gt.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),r=0,i=e.iterator();i.hasNext();){var o=i.next();n[r++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);go.splice(n,e);for(var r=n;(e=(n=this.connect(e,n.sym())).oPrev()).lNext()!==r;);return r},locate:function(){if(1===arguments.length){if(arguments[0]instanceof fo){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof b){var e=arguments[0];return this.locator.locate(new fo(e))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=this.locator.locate(new fo(n));if(null===i)return null;var o=i;i.dest().getCoordinate().equals2D(n)&&(o=i.sym());var a=o;do{if(a.dest().getCoordinate().equals2D(r))return a;a=a.oNext()}while(a!==o);return null}},interfaces_:function(){return[]},getClass:function(){return xo}}),xo.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new h("Edges do not form a triangle")},e(wo.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),i=new fo(Zn.circumcentre(e,n,r)),o=0;o<3;o++)t[o].rot().setOrig(i)},interfaces_:function(){return[bo]},getClass:function(){return wo}}),e(Lo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[bo]},getClass:function(){return Lo}}),e(Co.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[bo]},getClass:function(){return Co}}),e(ko.prototype,{checkTriangleSize:function(t){2<=t.length?Ht.toLineString(t[0],t[1]):1<=t.length&&Ht.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(0<this.coordList.size()){this.coordList.closeRing();var r=this.coordList.toCoordinateArray();if(4!==r.length)return null;this.triCoords.add(r)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[bo]},getClass:function(){return ko}}),xo.TriangleCircumcentreVisitor=wo,xo.TriangleEdgesListVisitor=Lo,xo.TriangleVertexListVisitor=Co,xo.TriangleCoordinatesVisitor=ko,xo.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Eo.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){return this.ls.getCoordinate(1).z},getStartZ:function(){return this.ls.getCoordinate(0).z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){return this.ls.getCoordinate(1).y},getStartX:function(){return this.ls.getCoordinate(0).x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this.ls.getCoordinate(0).y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){return this.ls.getCoordinate(1).x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Eo}}),e(So.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return So}}),e(Mo.prototype,{isRepeated:function(){return 1<this.count},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Mo}}),e(Po.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new Mo(e,n),this.root;if(0<this.tolerance){var r=this.findBestMatchNode(e);if(null!==r)return r.increment(),r}return this.insertExact(e,n)}},query:function(){var t,e,n=arguments,r=this;if(1===arguments.length){var i=arguments[0],o=new x;return this.query(i,o),o}if(2===arguments.length)if(arguments[0]instanceof L&&S(arguments[1],y))t=n[0],e=n[1],r.queryNode(r.root,t,!0,{interfaces_:function(){return[So]},visit:function(t){e.add(t)}});else if(arguments[0]instanceof L&&S(arguments[1],So)){var a=arguments[0],s=arguments[1];this.queryNode(this.root,a,!0,s)}},queryNode:function(t,e,n,r){if(null===t)return null;var i=null,o=null,a=null;n?(i=e.getMinX(),o=e.getMaxX(),a=t.getX()):(i=e.getMinY(),o=e.getMaxY(),a=t.getY());var s=a<=o;i<a&&this.queryNode(t.getLeft(),e,!n,r),e.contains(t.getCoordinate())&&r.visit(t),s&&this.queryNode(t.getRight(),e,!n,r)},findBestMatchNode:function(t){var e=new Io(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,r=this.root,i=!0,o=!0;null!==n;){if(null!==n)if(t.distance(n.getCoordinate())<=this.tolerance)return n.increment(),n;o=i?t.x<n.getX():t.y<n.getY(),r=n,n=o?n.getLeft():n.getRight(),i=!i}this.numberOfNodes=this.numberOfNodes+1;var a=new Mo(t,e);return o?r.setLeft(a):r.setRight(a),a},interfaces_:function(){return[]},getClass:function(){return Po}}),Po.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Po.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new w,i=e.iterator();i.hasNext();)for(var o=i.next(),a=n?o.getCount():1,s=0;s<a;s++)r.add(o.getCoordinate(),!0);return r.toCoordinateArray()}},e(Io.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate());if(!(e<=this.tolerance))return null;var n=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(n=!0),n&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new L(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[So]},getClass:function(){return Io}}),Po.BestMatchVisitor=Io,e(To.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();for(var t=0;0<this.enforceGabriel(this.segments)&&++t<To.MAX_SPLIT_ITER;);},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var r=n.next();t[e++]=r.getCoordinate()}for(var i=this.segVertices.iterator();i.hasNext();){r=i.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new Gt,e=new re(this.getPointArray(),t);this.convexHull=e.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),r=new b((e.x+n.x)/2,(e.y+n.y)/2),i=e.distance(r),o=new L(r);o.expandBy(i);for(var a=this.kdt.query(o),s=null,l=_.MAX_VALUE,u=a.iterator();u.hasNext();){var c=u.next().getCoordinate();if(!c.equals2D(e)&&!c.equals2D(n)){var h=r.distance(c);if(h<i){(null===s||h<l)&&(s=c,l=h)}}}return s},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new x,n=0,r=new x,i=t.iterator();i.hasNext();){var o=i.next(),a=this.findNonGabrielPoint(o);if(null!==a){this.splitPt=this.splitFinder.findSplitPoint(o,a);var s=this.createVertex(this.splitPt,o),l=(this.insertSite(s),new Eo(o.getStartX(),o.getStartY(),o.getStartZ(),s.getX(),s.getY(),s.getZ(),o.getData())),u=new Eo(s.getX(),s.getY(),s.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(l),e.add(u),r.add(o),n+=1}}return t.removeAll(r),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new po(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];e=null;return(e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,r):new po(n)).setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=To.computeVertexEnvelope(this.initialVertices),e=To.computeVertexEnvelope(this.segVertices),n=new L(t);n.expandToInclude(e);var r=.2*n.getWidth(),i=.2*n.getHeight(),o=Math.max(r,i);this.computeAreaEnv=new L(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new xo(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new _o(this.subdiv)),this.incDel=new mo(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof po){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof b){var r=arguments[0];this.insertSite(this.createVertex(r))}},interfaces_:function(){return[]},getClass:function(){return To}}),To.computeVertexEnvelope=function(t){for(var e=new L,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r.getCoordinate())}return e},To.MAX_SPLIT_ITER=99,e(Oo.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Oo.envelope(this.siteCoords),e=Oo.toVertices(this.siteCoords);this.subdiv=new xo(t,this.tolerance),new mo(this.subdiv).insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=Oo.extractUniqueCoordinates(t)}else if(S(arguments[0],m)){var e=arguments[0];this.siteCoords=Oo.unique(W.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Oo}}),Oo.extractUniqueCoordinates=function(t){if(null===t)return new w;var e=t.getCoordinates();return Oo.unique(e)},Oo.envelope=function(t){for(var e=new L,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r)}return e},Oo.unique=function(t){var e=W.copyDeep(t);return lt.sort(e),new w(e,!1)},Oo.toVertices=function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next();e.add(new fo(r))}return e},e(No.prototype,{createSiteVertices:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var r=n.next();this.constraintVertexMap.containsKey(r)||e.add(new po(r))}return e},create:function(){if(null!==this.subdiv)return null;var t=Oo.envelope(this.siteCoords),e=new x;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=No.createConstraintSegments(this.constraintLines));var n=new To(this.createSiteVertices(this.siteCoords),this.tolerance);n.setConstraints(e,new x(this.constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this.subdiv=n.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Oo.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var r=new po(e[n]);this.constraintVertexMap.put(e[n],r)}},interfaces_:function(){return[]},getClass:function(){return No}}),No.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=Sn.getLines(t),n=new x,r=e.iterator();r.hasNext();){var i=r.next();No.createConstraintSegments(i,n)}return n}if(2===arguments.length){var o=arguments[0],a=arguments[1],s=o.getCoordinates();for(r=1;r<s.length;r++)a.add(new Eo(s[r-1],s[r]))}},e(Do.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Oo.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Oo.toVertices(this.siteCoords);this.subdiv=new xo(t,this.tolerance),new mo(this.subdiv).insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Do.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=Oo.extractUniqueCoordinates(t)}else if(S(arguments[0],m)){var e=arguments[0];this.siteCoords=Oo.unique(W.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Do}}),Do.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),r=new x,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i),a=null;e.contains(o.getEnvelopeInternal())?a=o:e.intersects(o.getEnvelopeInternal())&&(a=n.intersection(o)).setUserData(o.getUserData()),null===a||a.isEmpty()||r.add(a)}return t.getFactory().createGeometryCollection(Gt.toGeometryArray(r))};var ya=Object.freeze({ConformingDelaunayTriangulationBuilder:No,DelaunayTriangulationBuilder:Oo,VoronoiDiagramBuilder:Do});e(Ao.prototype,{interfaces_:function(){return[]},getClass:function(){return Ao}}),Ao.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Un.createEmptyResult(Un.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vn.overlayOp(t,e,Un.UNION)},e(B.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Si.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return Oi.union(this);if(1===arguments.length){var t=arguments[0];return Ao.union(this,t)}},isValid:function(){return Xi.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return Un.createEmptyResult(Un.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Ye.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vn.overlayOp(this,t,Un.INTERSECTION)},covers:function(t){return Si.covers(this,t)},coveredBy:function(t){return Si.coveredBy(this,t)},touches:function(t){return Si.touches(this,t)},intersects:function(t){return Si.intersects(this,t)},within:function(t){return Si.within(this,t)},overlaps:function(t){return Si.overlaps(this,t)},disjoint:function(t){return Si.disjoint(this,t)},crosses:function(t){return Si.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return Gr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Gr.bufferOp(this,e,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return Gr.bufferOp(this,r,i,o)}},convexHull:function(){return new re(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Si.relate.apply(Si,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=Jt.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e)t=new Yn(this).getInteriorPoint();else if(1===e){t=new Xn(this).getInteriorPoint()}else{t=new Hn(this).getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return Un.createEmptyResult(Un.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vn.overlayOp(this,t,Un.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new Ht).write(this)},toString:function(){this.toText()},contains:function(t){return Si.contains(this,t)},difference:function(t){return this.isEmpty()?Un.createEmptyResult(Un.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vn.overlayOp(this,t,Un.DIFFERENCE))},isSimple:function(){return new xr(this).isSimple()},isWithinDistance:function(t,e){return!(e<this.getEnvelopeInternal().distance(t.getEnvelopeInternal()))&&Yr.isWithinDistance(this,t,e)},distance:function(t){return Yr.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});t.version="1.1.2 (248dab8)",t.algorithm=$o,t.densify=Zo,t.dissolve=Qo,t.geom=Xo,t.index=ta,t.io=ia,t.noding=oa,t.operation=da,t.precision=ga,t.simplify=ma,t.triangulate=ya},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.jsts=r.jsts||{})},{}],500:[function(t,e,n){"use strict";var a={};function r(){try{return new window.XMLHttpRequest}catch(t){}}a._getBinaryFromXHR=function(t){return t.response||t.responseText};var s=window.ActiveXObject?function(){return r()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:r;a.getBinaryContent=function(r,i){try{var o=s();o.open("GET",r,!0),"responseType"in o&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.onreadystatechange=function(t){var e,n;if(4===o.readyState)if(200===o.status||0===o.status){n=e=null;try{e=a._getBinaryFromXHR(o)}catch(t){n=new Error(t)}i(n,e)}else i(new Error("Ajax error for "+r+" : "+this.status+" "+this.statusText),null)},o.send()}catch(t){i(new Error(t),null)}},e.exports=a},{}],501:[function(t,e,n){"use strict";var p=t("./utils"),h=t("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,i,o,a,s,l=[],u=0,c=t.length,h=c,f="string"!==p.getTypeOf(t);u<t.length;)h=c-u,f?(e=t[u++],n=u<c?t[u++]:0,r=u<c?t[u++]:0):(e=t.charCodeAt(u++),n=u<c?t.charCodeAt(u++):0,r=u<c?t.charCodeAt(u++):0),i=e>>2,o=(3&e)<<4|n>>4,a=1<h?(15&n)<<2|r>>6:64,s=2<h?63&r:64,l.push(d.charAt(i)+d.charAt(o)+d.charAt(a)+d.charAt(s));return l.join("")},n.decode=function(t){var e,n,r,i,o,a,s=0,l=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var u,c=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===d.charAt(64)&&c--,t.charAt(t.length-2)===d.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=h.uint8array?new Uint8Array(0|c):new Array(0|c);s<t.length;)e=d.indexOf(t.charAt(s++))<<2|(i=d.indexOf(t.charAt(s++)))>>4,n=(15&i)<<4|(o=d.indexOf(t.charAt(s++)))>>2,r=(3&o)<<6|(a=d.indexOf(t.charAt(s++))),u[l++]=e,64!==o&&(u[l++]=n),64!==a&&(u[l++]=r);return u}},{"./support":530,"./utils":532}],502:[function(t,e,n){"use strict";var r=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/DataLengthProbe"),a=t("./stream/Crc32Probe");o=t("./stream/DataLengthProbe");function s(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var t=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,n){return t.pipe(new a).pipe(new o("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":506,"./stream/Crc32Probe":525,"./stream/DataLengthProbe":526,"./stream/DataWorker":527}],503:[function(t,e,n){"use strict";var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":507,"./stream/GenericWorker":528}],504:[function(t,e,n){"use strict";var r=t("./utils");var s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var i=s,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,r){var i=s,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":532}],505:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],506:[function(t,e,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:561}],507:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=r?"uint8array":"array";function l(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":528,"./utils":532,pako:563}],508:[function(t,e,n){"use strict";var T=t("../utils"),i=t("../stream/GenericWorker"),O=t("../utf8"),N=t("../crc32"),D=t("../signature"),A=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},o=function(t,e,n,r,i,o){var a,s,l=t.file,u=t.compression,c=o!==O.utf8encode,h=T.transformTo("string",o(l.name)),f=T.transformTo("string",O.utf8encode(l.name)),p=l.comment,d=T.transformTo("string",o(p)),g=T.transformTo("string",O.utf8encode(p)),m=f.length!==l.name.length,y=g.length!==p.length,_="",v="",b="",x=l.dir,w=l.date,L={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(L.crc32=t.crc32,L.compressedSize=t.compressedSize,L.uncompressedSize=t.uncompressedSize);var C=0;e&&(C|=8),c||!m&&!y||(C|=2048);var k,E,S,M=0,P=0;x&&(M|=16),"UNIX"===i?(P=798,M|=(k=l.unixPermissions,E=x,(S=k)||(S=E?16893:33204),(65535&S)<<16)):(P=20,M|=63&(l.dosPermissions||0)),a=w.getUTCHours(),a<<=6,a|=w.getUTCMinutes(),a<<=5,a|=w.getUTCSeconds()/2,s=w.getUTCFullYear()-1980,s<<=4,s|=w.getUTCMonth()+1,s<<=5,s|=w.getUTCDate(),m&&(v=A(1,1)+A(N(h),4)+f,_+="up"+A(v.length,2)+v),y&&(b=A(1,1)+A(N(d),4)+g,_+="uc"+A(b.length,2)+b);var I="";return I+="\n\0",I+=A(C,2),I+=u.magic,I+=A(a,2),I+=A(s,2),I+=A(L.crc32,4),I+=A(L.compressedSize,4),I+=A(L.uncompressedSize,4),I+=A(h.length,2),I+=A(_.length,2),{fileRecord:D.LOCAL_FILE_HEADER+I+h+_,dirRecord:D.CENTRAL_FILE_HEADER+A(P,2)+I+A(d.length,2)+"\0\0\0\0"+A(M,4)+A(r,4)+h+_+d}};function r(t,e,n,r){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}T.inherits(r,i),r.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,i.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},r.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=o(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(t){this.accumulate=!1;var e,n=this.streamFiles&&!t.file.dir,r=o(t,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),n)this.push({data:(e=t,D.DATA_DESCRIPTOR+A(e.crc32,4)+A(e.compressedSize,4)+A(e.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n,r,i,o,a,s,l=this.bytesWritten-t,u=(n=this.dirRecords.length,r=l,i=t,o=this.zipComment,a=this.encodeFileName,s=T.transformTo("string",a(o)),D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A(n,2)+A(n,2)+A(r,4)+A(i,4)+A(s.length,2)+s);this.push({data:u,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(t){var e=this._sources;if(!i.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},r.prototype.lock=function(){i.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=r},{"../crc32":504,"../signature":523,"../stream/GenericWorker":528,"../utf8":531,"../utils":532}],509:[function(t,e,n){"use strict";var u=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,a,e){var s=new r(a.streamFiles,e,a.platform,a.encodeFileName),l=0;try{t.forEach(function(t,e){l++;var n=function(t,e){var n=t||e,r=u[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(e.options.compression,a.compression),r=e.options.compressionOptions||a.compressionOptions||{},i=e.dir,o=e.date;e._compressWorker(n,r).withStreamInfo("file",{name:t,dir:i,date:o,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(s)}),s.entriesCount=l}catch(t){s.error(t)}return s}},{"../compressions":503,"./ZipFileWorker":508}],510:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.1.5",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":505,"./external":506,"./load":511,"./object":515,"./support":530}],511:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./external"),s=t("./utf8"),l=(r=t("./utils"),t("./zipEntries")),o=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function c(r){return new i.Promise(function(t,e){var n=r.decompressed.getContentWorker().pipe(new o);n.on("error",function(t){e(t)}).on("end",function(){n.streamInfo.crc32!==r.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}e.exports=function(t,o){var a=this;return o=r.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,o.optimizedBinaryString,o.base64).then(function(t){var e=new l(o);return e.load(t),e}).then(function(t){var e=[i.Promise.resolve(t)],n=t.files;if(o.checkCRC32)for(var r=0;r<n.length;r++)e.push(c(n[r]));return i.Promise.all(e)}).then(function(t){for(var e=t.shift(),n=e.files,r=0;r<n.length;r++){var i=n[r];a.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:o.createFolders})}return e.zipComment.length&&(a.comment=e.zipComment),a})}},{"./external":506,"./nodejsUtils":512,"./stream/Crc32Probe":525,"./utf8":531,"./utils":532,"./zipEntries":533}],512:[function(t,e,n){(function(n){"use strict";e.exports={isNode:void 0!==n,newBufferFrom:function(t,e){return new n(t,e)},allocBuffer:function(t){return n.alloc?n.alloc(t):new n(t)},isBuffer:function(t){return n.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(this,t("buffer").Buffer)},{buffer:89}],513:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(o,i),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":528,"../utils":532}],514:[function(t,e,n){"use strict";var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",function(t,e){r.push(t)||r._helper.pause(),n&&n(e)}).on("error",function(t){r.emit("error",t)}).on("end",function(){r.push(null)})}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":532,"readable-stream":516}],515:[function(t,e,n){"use strict";var i=t("./utf8"),u=t("./utils"),c=t("./stream/GenericWorker"),o=t("./stream/StreamHelper"),h=t("./defaults"),f=t("./compressedObject"),p=t("./zipObject"),a=t("./generate"),d=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),s=function(t,e,n){var r,i=u.getTypeOf(e),o=u.extend(n||{},h);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=y(t)),o.createFolders&&(r=m(t))&&_.call(this,r,!0);var a="string"===i&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!a),(e instanceof f&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",i="string");var s=null;s=e instanceof f||e instanceof c?e:d.isNode&&d.isStream(e)?new g(t,e):u.prepareContent(t,e,o.binary,o.optimizedBinaryString,o.base64);var l=new p(t,s,o);this.files[t]=l},m=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},y=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},_=function(t,e){return e=void 0!==e?e:h.createFolders,t=y(t),this.files[t]||s.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function l(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var r={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(n){var r=[];return this.forEach(function(t,e){n(t,e)&&r.push(e)}),r},file:function(t,e,n){if(1===arguments.length){if(l(t)){var r=t;return this.filter(function(t,e){return!e.dir&&r.test(t)})}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,s.call(this,t,e,n),this},folder:function(n){if(!n)return this;if(l(n))return this.filter(function(t,e){return e.dir&&n.test(t)});var t=this.root+n,e=_.call(this,t),r=this.clone();return r.root=e.name,r},remove:function(n){n=this.root+n;var t=this.files[n];if(t||("/"!==n.slice(-1)&&(n+="/"),t=this.files[n]),t&&!t.dir)delete this.files[n];else for(var e=this.filter(function(t,e){return e.name.slice(0,n.length)===n}),r=0;r<e.length;r++)delete this.files[e[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=u.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");u.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=a.generateWorker(this,n,r)}catch(t){(e=new c("error")).error(t)}return new o(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=r},{"./compressedObject":502,"./defaults":505,"./generate":509,"./nodejs/NodejsStreamInputAdapter":513,"./nodejsUtils":512,"./stream/GenericWorker":528,"./stream/StreamHelper":529,"./utf8":531,"./utils":532,"./zipObject":535}],516:[function(t,e,n){e.exports=t("stream")},{stream:915}],517:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":532,"./DataReader":518}],518:[function(t,e,n){"use strict";var r=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":532}],519:[function(t,e,n){"use strict";var r=t("./Uint8ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":532,"./Uint8ArrayReader":521}],520:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":532,"./DataReader":518}],521:[function(t,e,n){"use strict";var r=t("./ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":532,"./ArrayReader":517}],522:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new l(r.transformTo("uint8array",t)):new o(r.transformTo("array",t)):new a(t)}},{"../support":530,"../utils":532,"./ArrayReader":517,"./NodeBufferReader":519,"./StringReader":520,"./Uint8ArrayReader":521}],523:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],524:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../utils");function o(t){r.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,r),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":532,"./GenericWorker":528}],525:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":504,"../utils":532,"./GenericWorker":528}],526:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":532,"./GenericWorker":528}],527:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":532,"./GenericWorker":528}],528:[function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],529:[function(s,h,t){(function(l){"use strict";var u=s("../utils"),i=s("./ConvertWorker"),o=s("./GenericWorker"),c=s("../base64"),t=s("../support"),e=s("../external"),n=null;if(t.nodestream)try{n=s("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function r(t,s){return new e.Promise(function(e,n){var r=[],i=t._internalType,o=t._outputType,a=t._mimeType;t.on("data",function(t,e){r.push(t),s&&s(e)}).on("error",function(t){r=[],n(t)}).on("end",function(){try{var t=function(t,e,n){switch(t){case"blob":return u.newBlob(u.transformTo("arraybuffer",e),n);case"base64":return c.encode(e);default:return u.transformTo(t,e)}}(o,function(t,e){var n,r=0,i=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return l.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(i,r),a);e(t)}catch(t){n(t)}r=[]}).resume()})}function a(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,u.checkSupport(r),this._worker=t.pipe(new i(r)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}a.prototype={accumulate:function(t){return r(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,function(t){e.call(n,t.data,t.meta)}):this._worker.on(t,function(){u.delay(e,arguments,n)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(u.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new n(this,{objectMode:"nodebuffer"!==this._outputType},t)}},h.exports=a}).call(this,s("buffer").Buffer)},{"../base64":501,"../external":506,"../nodejs/NodejsStreamOutputAdapter":514,"../support":530,"../utils":532,"./ConvertWorker":524,"./GenericWorker":528,buffer:89}],530:[function(r,t,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(e),i.blob=0===n.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch(t){i.nodestream=!1}}).call(this,r("buffer").Buffer)},{buffer:89,"readable-stream":516}],531:[function(t,e,o){"use strict";for(var s=t("./utils"),l=t("./support"),n=t("./nodejsUtils"),r=t("./stream/GenericWorker"),u=new Array(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;u[254]=u[254]=1;function a(){r.call(this,"utf-8 decode"),this.leftOver=null}function c(){r.call(this,"utf-8 encode")}o.utf8encode=function(t){return l.nodebuffer?n.newBufferFrom(t,"utf-8"):function(t){var e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=l.uint8array?new Uint8Array(s):new Array(s),i=o=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e}(t)},o.utf8decode=function(t){return l.nodebuffer?s.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,i,o=t.length,a=new Array(2*o);for(e=n=0;e<o;)if((r=t[e++])<128)a[n++]=r;else if(4<(i=u[r]))a[n++]=65533,e+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&e<o;)r=r<<6|63&t[e++],i--;1<i?a[n++]=65533:r<65536?a[n++]=r:(r-=65536,a[n++]=55296|r>>10&1023,a[n++]=56320|1023&r)}return a.length!==n&&(a.subarray?a=a.subarray(0,n):a.length=n),s.applyFromCharCode(a)}(t=s.transformTo(l.uint8array?"uint8array":"array",t))},s.inherits(a,r),a.prototype.processChunk=function(t){var e=s.transformTo(l.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var n=e;(e=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),e.set(n,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var r=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+u[t[n]]>e?n:e}(e),i=e;r!==e.length&&(l.uint8array?(i=e.subarray(0,r),this.leftOver=e.subarray(r,e.length)):(i=e.slice(0,r),this.leftOver=e.slice(r,e.length))),this.push({data:o.utf8decode(i),meta:t.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=a,s.inherits(c,r),c.prototype.processChunk=function(t){this.push({data:o.utf8encode(t.data),meta:t.meta})},o.Utf8EncodeWorker=c},{"./nodejsUtils":512,"./stream/GenericWorker":528,"./support":530,"./utils":532}],532:[function(t,e,s){"use strict";var l=t("./support"),u=t("./base64"),n=t("./nodejsUtils"),r=t("core-js/library/fn/set-immediate"),c=t("./external");function i(t){return t}function h(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}s.newBlob=function(e,n){s.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var o={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&1===String.fromCharCode.apply(null,n.allocBuffer(1)).length}catch(t){return!1}}()}};function a(t){var e=65536,n=s.getTypeOf(t),r=!0;if("uint8array"===n?r=o.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=o.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return o.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return o.stringifyByChar(t)}function f(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}s.applyFromCharCode=a;var p={};p.string={string:i,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:function(t){return h(t,n.allocBuffer(t.length))}},p.array={string:a,array:i,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(t)}},p.arraybuffer={string:function(t){return a(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:i,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:a,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:i,nodebuffer:function(t){return n.newBufferFrom(t)}},p.nodebuffer={string:a,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:i},s.transformTo=function(t,e){if(e||(e=""),!t)return e;s.checkSupport(t);var n=s.getTypeOf(e);return p[n][t](e)},s.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":l.nodebuffer&&n.isBuffer(t)?"nodebuffer":l.uint8array&&t instanceof Uint8Array?"uint8array":l.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(t){if(!l[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},s.delay=function(t,e,n){r(function(){t.apply(n||null,e||[])})},s.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},s.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},s.prepareContent=function(r,t,i,o,a){return c.Promise.resolve(t).then(function(r){return l.blob&&(r instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(r)))&&"undefined"!=typeof FileReader?new c.Promise(function(e,n){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)},t.readAsArrayBuffer(r)}):r}).then(function(t){var e,n=s.getTypeOf(t);return n?("arraybuffer"===n?t=s.transformTo("uint8array",t):"string"===n&&(a?t=u.decode(t):i&&!0!==o&&(t=h(e=t,l.uint8array?new Uint8Array(e.length):new Array(e.length)))),t):c.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":501,"./external":506,"./nodejsUtils":512,"./support":530,"core-js/library/fn/set-immediate":536}],533:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",n=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(0<r)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":522,"./signature":523,"./support":530,"./utf8":531,"./utils":532,"./zipEntry":534}],534:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),l=t("./compressions"),u=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=o.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)?null:a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)?null:a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":502,"./compressions":503,"./crc32":504,"./reader/readerFor":522,"./support":530,"./utf8":531,"./utils":532}],535:[function(t,e,n){"use strict";var o=t("./stream/StreamHelper"),r=t("./stream/DataWorker"),a=t("./utf8"),i=t("./compressedObject"),s=t("./stream/GenericWorker"),l=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};l.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(e=e.pipe(new a.Utf8EncodeWorker)),!i&&r&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new s("error")).error(t)}return new o(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof i&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),i.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof i?this._data.getContentWorker():this._data instanceof s?this._data:new r(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)l.prototype[u[h]]=c;e.exports=l},{"./compressedObject":502,"./stream/DataWorker":527,"./stream/GenericWorker":528,"./stream/StreamHelper":529,"./utf8":531}],536:[function(t,e,n){t("../modules/web.immediate"),e.exports=t("../modules/_core").setImmediate},{"../modules/_core":540,"../modules/web.immediate":556}],537:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],538:[function(t,e,n){var r=t("./_is-object");e.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":551}],539:[function(t,e,n){var r={}.toString;e.exports=function(t){return r.call(t).slice(8,-1)}},{}],540:[function(t,e,n){var r=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=r)},{}],541:[function(t,e,n){var o=t("./_a-function");e.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},{"./_a-function":537}],542:[function(t,e,n){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":545}],543:[function(t,e,n){var r=t("./_is-object"),i=t("./_global").document,o=r(i)&&r(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{"./_global":546,"./_is-object":551}],544:[function(t,e,n){var g=t("./_global"),m=t("./_core"),y=t("./_ctx"),_=t("./_hide"),v="prototype",b=function(t,e,n){var r,i,o,a=t&b.F,s=t&b.G,l=t&b.S,u=t&b.P,c=t&b.B,h=t&b.W,f=s?m:m[e]||(m[e]={}),p=f[v],d=s?g:l?g[e]:(g[e]||{})[v];for(r in s&&(n=e),n)(i=!a&&d&&void 0!==d[r])&&r in f||(o=i?d[r]:n[r],f[r]=s&&"function"!=typeof d[r]?n[r]:c&&i?y(o,g):h&&d[r]==o?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[v]=r[v],t}(o):u&&"function"==typeof o?y(Function.call,o):o,u&&((f.virtual||(f.virtual={}))[r]=o,t&b.R&&p&&!p[r]&&_(p,r,o)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,e.exports=b},{"./_core":540,"./_ctx":541,"./_global":546,"./_hide":547}],545:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],546:[function(t,e,n){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],547:[function(t,e,n){var r=t("./_object-dp"),i=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},{"./_descriptors":542,"./_object-dp":552,"./_property-desc":553}],548:[function(t,e,n){e.exports=t("./_global").document&&document.documentElement},{"./_global":546}],549:[function(t,e,n){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":542,"./_dom-create":543,"./_fails":545}],550:[function(t,e,n){e.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],551:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],552:[function(t,e,n){var r=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),a=Object.defineProperty;n.f=t("./_descriptors")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{"./_an-object":538,"./_descriptors":542,"./_ie8-dom-define":549,"./_to-primitive":555}],553:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],554:[function(t,e,n){var r,i,o,a=t("./_ctx"),s=t("./_invoke"),l=t("./_html"),u=t("./_dom-create"),c=t("./_global"),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=0,m={},y="onreadystatechange",_=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},v=function(t){_.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},p=function(t){delete m[t]},"process"==t("./_cof")(h)?r=function(t){h.nextTick(a(_,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=v,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",v,!1)):r=y in u("script")?function(t){l.appendChild(u("script"))[y]=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),e.exports={set:f,clear:p}},{"./_cof":539,"./_ctx":541,"./_dom-create":543,"./_global":546,"./_html":548,"./_invoke":550}],555:[function(t,e,n){var i=t("./_is-object");e.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":551}],556:[function(t,e,n){var r=t("./_export"),i=t("./_task");r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":544,"./_task":554}],557:[function(t,e,n){var r,i;r=window,i=function(n){return function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=47)}([function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=n},function(t,e,n){var g=n(3),m=n(10),y=n(16),_=n(26),v=n(41),b=function(t,e,n){var r,i,o,a,s=t&b.F,l=t&b.G,u=t&b.S,c=t&b.P,h=t&b.B,f=l?g:u?g[e]||(g[e]={}):(g[e]||{}).prototype,p=l?m:m[e]||(m[e]={}),d=p.prototype||(p.prototype={});for(r in l&&(n=e),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=h&&i?v(o,g):c&&"function"==typeof o?v(Function.call,o):o,f&&_(f,r,o,t&b.U),p[r]!=o&&y(p,r,a),c&&d[r]!=o&&(d[r]=o)};g.core=m,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,t.exports=b},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(0),i=n(39),o=n(17),a=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){t.exports=n(19)},function(t,e,n){t.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(27)("wks"),i=n(14),o=n(3).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(34),i=n(13),o=n(15),a=n(17),s=n(5),l=n(39),u=Object.getOwnPropertyDescriptor;e.f=n(9)?u:function(t,e){if(t=o(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(53),i=n(45);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(6),i=n(13);t.exports=n(9)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(4);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(20),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(O,t){!function(t){"use strict";var l,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof O,s=t.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=t.regeneratorRuntime=a?O.exports:{}).wrap=v;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",g={},c={};c[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==e&&u.call(y,i)&&(c=y);var _=L.prototype=x.prototype=Object.create(c);w.prototype=_.constructor=L,L.constructor=w,L[o]=w.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(_),t},s.awrap=function(t){return{__await:t}},C(k.prototype),k.prototype[r]=function(){return this},s.AsyncIterator=k,s.async=function(t,e,n,r){var i=new k(v(t,e,n,r));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},C(_),_[o]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),g}}}function v(t,e,n,r){var o,a,s,l,i=e&&e.prototype instanceof x?e:x,u=Object.create(i.prototype),c=new P(r||[]);return u._invoke=(o=t,a=n,s=c,l=h,function(t,e){if(l===p)throw new Error("Generator is already running");if(l===d){if("throw"===t)throw e;return T()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=E(n,s);if(r){if(r===g)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===h)throw l=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=p;var i=b(o,a,s);if("normal"===i.type){if(l=s.done?d:f,i.arg===g)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=d,s.method="throw",s.arg=i.arg)}}),u}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function w(){}function L(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(l){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=b(l[t],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function E(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,E(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:l,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,n){var r=n(22);"string"==typeof r&&(r=[[t.i,r,""]]);n(24)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(23)(!1)).push([t.i,"@-webkit-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-moz-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-ms-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@-o-keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\n@keyframes leaflet-ant-path-animation {\n  from {\n    stroke-dashoffset: 100%; }\n  to {\n    stroke-dashoffset: 0%; } }\n\npath.leaflet-ant-path {\n  fill: none;\n  -webkit-animation: linear infinite leaflet-ant-path-animation;\n  -moz-animation: linear infinite leaflet-ant-path-animation;\n  -ms-animation: linear infinite leaflet-ant-path-animation;\n  -o-animation: linear infinite leaflet-ant-path-animation;\n  animation: linear infinite leaflet-ant-path-animation; }\n  path.leaflet-ant-path__hardware-acceleration {\n    -webkit-transform: translateZ(0);\n    -moz-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    -o-transform: translateZ(0);\n    transform: translateZ(0); }\n  path.leaflet-ant-path__reverse {\n    -webkit-animation-direction: reverse;\n    -moz-animation-direction: reverse;\n    -ms-animation-direction: reverse;\n    -o-animation-direction: reverse;\n    animation-direction: reverse; }\n",""])},function(t,e,n){"use strict";t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(n[i]=!0)}for(r=0;r<t.length;r++){var o=t[r];null!=o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,r){var n,i,o,l={},u=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),a=(o={},function(t,e){if("function"==typeof t)return t();if(void 0===o[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}o[t]=n}return o[t]}),c=null,h=0,s=[],f=r(25);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=l[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(v(r.parts[o],e))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(v(r.parts[o],e));l[r.id]={id:r.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function g(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),s.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertAt.before,n);n.insertBefore(e,i)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=s.indexOf(t);0<=e&&s.splice(e,1)}function y(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=r.nc;n&&(t.attrs.nonce=n)}return _(e,t.attrs),g(t,e),e}function _(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function v(e,t){var n,r,i,o,a,s;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var l=h++;n=c||(c=y(t)),r=w.bind(null,n,l,!1),i=w.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=t,s=document.createElement("link"),void 0===a.attrs.type&&(a.attrs.type="text/css"),a.attrs.rel="stylesheet",_(s,a.attrs),g(a,s),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=f(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n=s,t),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=u()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=d(t,a);return p(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var r=s[n];(i=l[r.id]).refs--,e.push(i)}for(t&&p(d(t,a),a),n=0;n<e.length;n++){var i;if(0===(i=e[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete l[i.id]}}}};var b,x=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){var o=n(3),a=n(16),s=n(5),l=n(14)("src"),r=Function.toString,u=(""+r).split("toString");n(10).inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",e)),t[e]!==n&&(i&&(s(n,l)||a(n,l,t[e]?""+t[e]:u.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[l]||r.call(this)})},function(t,e,n){var r=n(10),i=n(3),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(28)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,n){var r=n(44),i=n(32);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(27)("keys"),i=n(14);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var i=r(0),o=r(58),a=r(32),s=r(31)("IE_PROTO"),l=function(){},u=function(){var t,e=r(40)("iframe"),n=a.length;for(e.style.display="none",r(59).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[a[n]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=i(t),n=new l,l.prototype=null,n[s]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(44),i=n(32).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(5),i=n(73),o=n(31)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";n.r(e);var s=n(1),r=n(8),i=n.n(r);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={main:Symbol("main"),pulse:Symbol("pulse")},f=h.main,p=h.pulse,d=Symbol.species,g=Symbol.toStringTag,m=Symbol.iterator,a=function(t){function a(t){var e,n,r,i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this,c(l(l(e=!(n=(i=a,(Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(i)).call(this))||"object"!==(r=n,("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r))&&"function"!=typeof n?l(this):n)),f,null),c(l(l(e)),p,null),c(l(l(e)),"_map",null),c(l(l(e)),"_path",null),c(l(l(e)),"_animatedPathId",null),c(l(l(e)),"_animatedPathClass","leaflet-ant-path"),c(l(l(e)),"_reversePathClass","".concat(e._animatedPathClass,"__reverse")),c(l(l(e)),"_hardwareAccClass","hardware-acceleration"),c(l(l(e)),"_defaultOptions",{use:s.polyline,paused:!1,reverse:!1,hardwareAcceleration:!1,renderer:Object(s.svg)(),delay:400,dashArray:[10,20],weight:5,opacity:.5,color:"#0000FF",pulseColor:"#FFFFFF"}),s.Util.setOptions(l(l(e)),u({},e._defaultOptions,o)),e._path=t,e._animatedPathId="ant-path-".concat((new Date).getTime()),e._mount(),e}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");var n,r;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(n=t,r=e,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(n,r))}(a,s.FeatureGroup),e=a,r=[{key:d,get:function(){return this}}],n=[{key:"map",value:function(t){return new this.constructor[Symbol.species](this._path.map(t),u({},this.options))}},{key:m,value:i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._path,"t0",1);case 1:case"end":return t.stop()}},t,this)})},{key:"_processOptions",value:function(){var t=this.options,e=this._animatedPathClass,n=this._reversePathClass,r=this._hardwareAccClass,i=this._animatedPathId,o=t.reverse,a=t.hardwareAcceleration,s=u({},t),l=u({},t);return l.color=l.pulseColor||t.pulseColor,l.className=[e,i,o?n:"",a?"".concat(e,"__").concat(r):""].join(" "),delete s.dashArray,Array.isArray(l.dashArray)&&(l.dashArray=String(l.dashArray)),{pathOpts:s,pulseOpts:l}}},{key:"_mount",value:function(){var t=this._processOptions(),e=t.pathOpts,n=t.pulseOpts,r=this.options.use;this.addLayer(this[h.main]=r(this._path,e)),this.addLayer(this[h.pulse]=r(this._path,n))}},{key:"_calculateAnimationSpeed",value:function(){var t=this.options,e=this._map,n=this._animatedPathId;if(!t.paused&&e){var r=e.getZoom(),i=document.getElementsByClassName(n),o=1+t.delay/3/r+"s",a=["-webkit-","-moz-","-ms-","-o-",""].map(function(t){return"".concat(t,"animation-duration: ").concat(o)}).join(";");Array.from(i,function(t){t.style.cssText=a,t.setAttribute("data-animated","true")})}}},{key:"_pureReverse",value:function(){var t=this[h.pulse].getElement();t&&(this.options.reverse?t.classList.remove(this._reversePathClass):t.classList.add(this._reversePathClass))}},{key:"onAdd",value:function(t){return this._map=t,this._map.on("zoomend",this._calculateAnimationSpeed,this),this._mount(),this._calculateAnimationSpeed(),this}},{key:"onRemove",value:function(t){return this._map&&(this._map.off("zoomend",this._calculateAnimationSpeed,this),this._map=null),t&&t.removeLayer(this[h.main]).removeLayer(this[h.pulse]),this}},{key:"pause",value:function(){if(!this.options.paused){var t=this[h.pulse].getElement();return this.options.paused=!0,t&&(t.removeAttribute("style"),t.setAttribute("data-animated","true")),!0}return!1}},{key:"resume",value:function(){var t=this.options;return!!t.paused&&(t.paused=!1,this._calculateAnimationSpeed(),!0)}},{key:"bringToFront",value:function(){return this[h.main].bringToFront(),this[h.pulse].bringToFront(),this}},{key:"bringToBack",value:function(){return this[h.pulse].bringToBack(),this[h.main].bringToBack(),this}},{key:"removeFrom",value:function(t){return t&&t.hasLayer(this)&&t.removeLayer(this),this}},{key:"setStyle",value:function(t){var e=t.paused,n=t.delay,r=t.reverse;e?this.pause():this.resume(),n!==this.options.delay&&(this.options.delay=n||this._defaultOptions.delay,this._calculateAnimationSpeed()),void 0!==r&&r!==this.options.reverse&&this._pureReverse(),this.options=u({},this.options,t);var i=this._processOptions(),o=i.pathOpts,a=i.pulseOpts;return this[h.main].setStyle(o),this[h.pulse].setStyle(a),this}},{key:"reverse",value:function(){return this._pureReverse(),this.options.reverse=!this.options.reverse,this}},{key:"redraw",value:function(){return this[h.main].redraw(),this[h.pulse].redraw(),this}},{key:"addLatLng",value:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._path=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(o=this._path)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[r]),(t=this[h.main]).addLatLng.apply(t,r),(e=this[h.pulse]).addLatLng.apply(e,r),this;var o}},{key:"setLatLngs",value:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._path=r,(t=this[h.main]).setLatLngs.apply(t,r),(e=this[h.pulse]).setLatLngs.apply(e,r),this}},{key:"getLatLngs",value:function(){return this[h.main].getLatLngs()}},{key:"spliceLatLngs",value:function(){var t,e,n=(t=this[h.main]).spliceLatLngs.apply(t,arguments);return(e=this[h.pulse]).spliceLatLngs.apply(e,arguments),n}},{key:"getBounds",value:function(){return this[h.main].getBounds()}},{key:"toGeoJSON",value:function(){return this[h.main].toGeoJSON()}},{key:g,get:function(){return"L.Polyline.AntPath"}}],o(e.prototype,n),o(e,r),a}(),y=function(t,e){return Reflect.construct(a,[t,e])};n(21),n.d(e,"AntPath",function(){return _}),n.d(e,"antPath",function(){return v}),s.Polyline.AntPath=a,s.polyline.antPath=y;var _=a,v=y;e.default={AntPath:_,antPath:v}},function(t,e,n){t.exports=!n(9)&&!n(7)(function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(4),i=n(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var o=n(18);t.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},function(t,e,n){var r=n(6).f,i=n(5),o=n(11)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(11)},function(t,e,n){var a=n(5),s=n(15),l=n(54)(!1),u=n(31)("IE_PROTO");t.exports=function(t,e){var n,r=s(t),i=0,o=[];for(n in r)n!=u&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~l(o,n)||o.push(n));return o}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){n(48),n(63),t.exports=n(38)},function(t,e,n){n(49),n(61),t.exports=n(10).Symbol},function(t,e,n){"use strict";var r=n(3),a=n(5),i=n(9),o=n(2),s=n(26),l=n(50).KEY,u=n(7),c=n(27),h=n(42),f=n(14),p=n(11),d=n(43),g=n(51),m=n(52),y=n(57),_=n(0),v=n(4),b=n(15),x=n(17),w=n(13),L=n(35),C=n(60),k=n(12),E=n(6),S=n(29),M=k.f,P=E.f,I=C.f,T=r.Symbol,O=r.JSON,N=O&&O.stringify,D=p("_hidden"),A=p("toPrimitive"),R={}.propertyIsEnumerable,F=c("symbol-registry"),j=c("symbols"),B=c("op-symbols"),z=Object.prototype,q="function"==typeof T,U=r.QObject,G=!U||!U.prototype||!U.prototype.findChild,V=i&&u(function(){return 7!=L(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(z,e);r&&delete z[e],P(t,e,n),r&&t!==z&&P(z,e,r)}:P,H=function(t){var e=j[t]=L(T.prototype);return e._k=t,e},W=q&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},X=function(t,e,n){return t===z&&X(B,e,n),_(t),e=x(e,!0),_(n),a(j,e)?(n.enumerable?(a(t,D)&&t[D][e]&&(t[D][e]=!1),n=L(n,{enumerable:w(0,!1)})):(a(t,D)||P(t,D,w(1,{})),t[D][e]=!0),V(t,e,n)):P(t,e,n)},Y=function(t,e){_(t);for(var n,r=m(e=b(e)),i=0,o=r.length;i<o;)X(t,n=r[i++],e[n]);return t},$=function(t){var e=R.call(this,t=x(t,!0));return!(this===z&&a(j,t)&&!a(B,t))&&(!(e||!a(this,t)||!a(j,t)||a(this,D)&&this[D][t])||e)},Z=function(t,e){if(t=b(t),e=x(e,!0),t!==z||!a(j,e)||a(B,e)){var n=M(t,e);return!n||!a(j,e)||a(t,D)&&t[D][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=I(b(t)),r=[],i=0;n.length>i;)a(j,e=n[i++])||e==D||e==l||r.push(e);return r},K=function(t){for(var e,n=t===z,r=I(n?B:b(t)),i=[],o=0;r.length>o;)!a(j,e=r[o++])||n&&!a(z,e)||i.push(j[e]);return i};q||(s((T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=f(0<arguments.length?arguments[0]:void 0),n=function(t){this===z&&n.call(B,t),a(this,D)&&a(this[D],e)&&(this[D][e]=!1),V(this,e,w(1,t))};return i&&G&&V(z,e,{configurable:!0,set:n}),H(e)}).prototype,"toString",function(){return this._k}),k.f=Z,E.f=X,n(36).f=C.f=Q,n(34).f=$,n(33).f=K,i&&!n(28)&&s(z,"propertyIsEnumerable",$,!0),d.f=function(t){return H(p(t))}),o(o.G+o.W+o.F*!q,{Symbol:T});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)p(J[tt++]);for(var et=S(p.store),nt=0;et.length>nt;)g(et[nt++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return a(F,t+="")?F[t]:F[t]=T(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,e){return void 0===e?L(t):Y(L(t),e)},defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:K}),O&&o(o.S+o.F*(!q||u(function(){var t=T();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(v(e)||void 0!==t)&&!W(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,N.apply(O,r)}}),T.prototype[A]||n(16)(T.prototype,A,T.prototype.valueOf),h(T,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(14)("meta"),i=n(4),o=n(5),a=n(6).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(7)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){var r=n(3),i=n(10),o=n(28),a=n(43),s=n(6).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var s=n(29),l=n(33),u=n(34);t.exports=function(t){var e=s(t),n=l.f;if(n)for(var r,i=n(t),o=u.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}},function(t,e,n){var r=n(30);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var l=n(15),u=n(55),c=n(56);t.exports=function(s){return function(t,e,n){var r,i=l(t),o=u(i.length),a=c(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}},function(t,e,n){var r=n(46),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(46),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(30);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var a=n(6),s=n(0),l=n(29);t.exports=n(9)?Object.defineProperties:function(t,e){s(t);for(var n,r=l(e),i=r.length,o=0;o<i;)a.f(t,n=r[o++],e[n]);return t}},function(t,e,n){var r=n(3).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(15),i=n(36).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(62),i={};i[n(11)("toStringTag")]="z",i+""!="[object z]"&&n(26)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var i=n(30),o=n(11)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){n(64),n(65),n(68),n(69),n(70),n(72),n(74),n(75),n(76),n(77),n(78),n(80),n(81),n(82),t.exports=n(10).Reflect},function(t,e,n){var r=n(2),o=n(18),a=n(0),s=(n(3).Reflect||{}).apply,l=Function.apply;r(r.S+r.F*!n(7)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var r=o(t),i=a(n);return s?s(r,e,i):l.call(r,e,i)}})},function(t,e,n){var r=n(2),s=n(35),l=n(18),u=n(0),c=n(4),i=n(7),h=n(66),f=(n(3).Reflect||{}).construct,p=i(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),d=!i(function(){f(function(){})});r(r.S+r.F*(p||d),"Reflect",{construct:function(t,e){l(t),u(e);var n=arguments.length<3?t:l(arguments[2]);if(d&&!p)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(h.apply(t,r))}var i=n.prototype,o=s(c(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return c(a)?a:o}})},function(t,e,n){"use strict";var o=n(18),a=n(4),s=n(67),l=[].slice,u={};t.exports=Function.bind||function(e){var n=o(this),r=l.call(arguments,1),i=function(){var t=r.concat(l.call(arguments));return this instanceof i?function(t,e,n){if(!(e in u)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";u[e]=Function("F,a","return new F("+r.join(",")+")")}return u[e](t,n)}(n,t.length,t):s(n,t,e)};return a(n.prototype)&&(i.prototype=n.prototype),i}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(6),i=n(2),o=n(0),a=n(17);i(i.S+i.F*n(7)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(2),i=n(12).f,o=n(0);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(2),i=n(0),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(71)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){"use strict";var r=n(35),i=n(13),o=n(42),a={};n(16)(a,n(11)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var a=n(12),s=n(37),l=n(5),r=n(2),u=n(4),c=n(0);r(r.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return c(e)===o?e[n]:(r=a.f(e,n))?l(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:u(i=s(e))?t(i,n,o):void 0}})},function(t,e,n){var r=n(45);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(12),i=n(2),o=n(0);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(2),i=n(37),o=n(0);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(2);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(2),i=n(0),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(2);r(r.S,"Reflect",{ownKeys:n(79)})},function(t,e,n){var r=n(36),i=n(33),o=n(0),a=n(3).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(2),i=n(0),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var l=n(6),u=n(12),c=n(37),h=n(5),r=n(2),f=n(13),p=n(0),d=n(4);r(r.S,"Reflect",{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],s=u.f(p(e),n);if(!s){if(d(o=c(e)))return t(o,n,r,a);s=f(0)}if(h(s,"value")){if(!1===s.writable||!d(a))return!1;if(i=u.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,l.f(a,n,i)}else l.f(a,n,f(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}})},function(t,e,n){var r=n(2),i=n(83);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){var n=i(4),r=i(0),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=i(41)(Function.call,i(12).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}}])},"object"==typeof n&&"object"==typeof e?e.exports=i(t("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],i):"object"==typeof n?n["leaflet-ant-path"]=i(t("leaflet")):r["leaflet-ant-path"]=i(r.L)},{leaflet:560}],558:[function(n,r,t){!function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("object"==typeof r&&"object"==typeof r.exports)e=n("leaflet"),r.exports=t(e);else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");t(window.L)}}(function(c){c.Map.mergeOptions({contextmenuItems:[]}),c.Map.ContextMenu=c.Handler.extend({_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(t){c.Handler.prototype.initialize.call(this,t),this._items=[],this._visible=!1;var e=this._container=c.DomUtil.create("div",c.Map.ContextMenu.BASE_CLS,t._container);e.style.zIndex=1e4,e.style.position="absolute",t.options.contextmenuWidth&&(e.style.width=t.options.contextmenuWidth+"px"),this._createItems(),c.DomEvent.on(e,"click",c.DomEvent.stop).on(e,"mousedown",c.DomEvent.stop).on(e,"dblclick",c.DomEvent.stop).on(e,"contextmenu",c.DomEvent.stop)},addHooks:function(){var t=this._map.getContainer();c.DomEvent.on(t,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this),c.Browser.touch&&c.DomEvent.on(document,this._touchstart,this._hide,this),this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var t=this._map.getContainer();c.DomEvent.off(t,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this),c.Browser.touch&&c.DomEvent.off(document,this._touchstart,this._hide,this),this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(t,e){t instanceof c.LatLng&&(t=this._map.latLngToContainerPoint(t)),this._showAtPoint(t,e)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=void 0!==e?e:this._items.length;var n=this._createItem(this._container,t,e);return this._items.push(n),this._sizeChanged=!0,this._map.fire("contextmenu.additem",{contextmenu:this,el:n.el,index:e}),n.el},removeItem:function(t){var e=this._container;return isNaN(t)||(t=e.children[t]),t?(this._removeItem(c.Util.stamp(t)),this._sizeChanged=!0,this._map.fire("contextmenu.removeitem",{contextmenu:this,el:t}),t):null},removeAllItems:function(){for(var t,e=this._container.children;e.length;)t=e[0],this._removeItem(c.Util.stamp(t));return e},hideAllItems:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._items[t].el.style.display="none"},showAllItems:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._items[t].el.style.display=""},setDisabled:function(t,e){var n=this._container,r=c.Map.ContextMenu.BASE_CLS+"-item";isNaN(t)||(t=n.children[t]),t&&c.DomUtil.hasClass(t,r)&&(e?(c.DomUtil.addClass(t,r+"-disabled"),this._map.fire("contextmenu.disableitem",{contextmenu:this,el:t})):(c.DomUtil.removeClass(t,r+"-disabled"),this._map.fire("contextmenu.enableitem",{contextmenu:this,el:t})))},isVisible:function(){return this._visible},_createItems:function(){var t,e,n=this._map.options.contextmenuItems;for(t=0,e=n.length;t<e;t++)this._items.push(this._createItem(this._container,n[t]))},_createItem:function(t,e,n){if(e.separator||"-"===e)return this._createSeparator(t,n);var r=c.Map.ContextMenu.BASE_CLS+"-item",i=e.disabled?r+" "+r+"-disabled":r,o=this._insertElementAt("a",i,t,n),a=this._createEventHandler(o,e.callback,e.context,e.hideOnSelect),s=this._getIcon(e),l=this._getIconCls(e),u="";return s?u='<img class="'+c.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>':l&&(u='<span class="'+c.Map.ContextMenu.BASE_CLS+"-icon "+l+'"></span>'),o.innerHTML=u+e.text,o.href="#",c.DomEvent.on(o,"mouseover",this._onItemMouseOver,this).on(o,"mouseout",this._onItemMouseOut,this).on(o,"mousedown",c.DomEvent.stopPropagation).on(o,"click",a),c.Browser.touch&&c.DomEvent.on(o,this._touchstart,c.DomEvent.stopPropagation),c.Browser.pointer||c.DomEvent.on(o,"click",this._onItemMouseOut,this),{id:c.Util.stamp(o),el:o,callback:a}},_removeItem:function(t){var e,n,r,i,o;for(r=0,i=this._items.length;r<i;r++)if((e=this._items[r]).id===t)return n=e.el,(o=e.callback)&&(c.DomEvent.off(n,"mouseover",this._onItemMouseOver,this).off(n,"mouseover",this._onItemMouseOut,this).off(n,"mousedown",c.DomEvent.stopPropagation).off(n,"click",o),c.Browser.touch&&c.DomEvent.off(n,this._touchstart,c.DomEvent.stopPropagation),c.Browser.pointer||c.DomEvent.on(n,"click",this._onItemMouseOut,this)),this._container.removeChild(n),this._items.splice(r,1),e;return null},_createSeparator:function(t,e){var n=this._insertElementAt("div",c.Map.ContextMenu.BASE_CLS+"-separator",t,e);return{id:c.Util.stamp(n),el:n}},_createEventHandler:function(e,n,r,i){var o=this,a=this._map,s=c.Map.ContextMenu.BASE_CLS+"-item-disabled";i=void 0===i||i;return function(t){c.DomUtil.hasClass(e,s)||(i&&o._hide(),n&&n.call(r||a,o._showLocation),o._map.fire("contextmenu.select",{contextmenu:o,el:e}))}},_insertElementAt:function(t,e,n,r){var i,o=document.createElement(t);return o.className=e,void 0!==r&&(i=n.children[r]),i?n.insertBefore(o,i):n.appendChild(o),o},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(t,e){if(this._items.length){var n=this._map,r=n.containerPointToLayerPoint(t),i=n.layerPointToLatLng(r),o=c.extend(e||{},{contextmenu:this});this._showLocation={latlng:i,layerPoint:r,containerPoint:t},e&&e.relatedTarget&&(this._showLocation.relatedTarget=e.relatedTarget),this._setPosition(t),this._visible||(this._container.style.display="block",this._visible=!0),this._map.fire("contextmenu.show",o)}},_hide:function(){this._visible&&(this._visible=!1,this._container.style.display="none",this._map.fire("contextmenu.hide",{contextmenu:this}))},_getIcon:function(t){return c.Browser.retina&&t.retinaIcon||t.icon},_getIconCls:function(t){return c.Browser.retina&&t.retinaIconCls||t.iconCls},_setPosition:function(t){var e,n=this._map.getSize(),r=this._container,i=this._getElementSize(r);this._map.options.contextmenuAnchor&&(e=c.point(this._map.options.contextmenuAnchor),t=t.add(e)),(r._leaflet_pos=t).x+i.x>n.x?(r.style.left="auto",r.style.right=Math.min(Math.max(n.x-t.x,0),n.x-i.x-1)+"px"):(r.style.left=Math.max(t.x,0)+"px",r.style.right="auto"),t.y+i.y>n.y?(r.style.top="auto",r.style.bottom=Math.min(Math.max(n.y-t.y,0),n.y-i.y-1)+"px"):(r.style.top=Math.max(t.y,0)+"px",r.style.bottom="auto")},_getElementSize:function(t){var e=this._size,n=t.style.display;return e&&!this._sizeChanged||(e={},t.style.left="-999999px",t.style.right="auto",t.style.display="block",e.x=t.offsetWidth,e.y=t.offsetHeight,t.style.left="auto",t.style.display=n,this._sizeChanged=!1),e},_onKeyDown:function(t){27===t.keyCode&&this._hide()},_onItemMouseOver:function(t){c.DomUtil.addClass(t.target||t.srcElement,"over")},_onItemMouseOut:function(t){c.DomUtil.removeClass(t.target||t.srcElement,"over")}}),c.Map.addInitHook("addHandler","contextmenu",c.Map.ContextMenu),c.Mixin.ContextMenu={bindContextMenu:function(t){return c.setOptions(this,t),this._initContextMenu(),this},unbindContextMenu:function(){return this.off("contextmenu",this._showContextMenu,this),this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){for(var e=[],n=0;n<this.options.contextmenuItems.length;n++)this.options.contextmenuItems[n].index==t&&e.push(n);for(var r=e.pop();void 0!==r;)this.options.contextmenuItems.splice(r,1),r=e.pop()},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index),this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[],this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(t){var e,n,r,i,o;if(this._map.contextmenu){for(n=c.extend({relatedTarget:this},t),r=this._map.mouseEventToContainerPoint(t.originalEvent),this.options.contextmenuInheritItems||this._map.contextmenu.hideAllItems(),i=0,o=this.options.contextmenuItems.length;i<o;i++)e=this.options.contextmenuItems[i],this._items.push(this._map.contextmenu.insertItem(e,e.index));this._map.once("contextmenu.hide",this._hideContextMenu,this),this._map.contextmenu.showAt(r,n)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._map.contextmenu.removeItem(this._items[t]);this._items.length=0,this.options.contextmenuInheritItems||this._map.contextmenu.showAllItems()}};var t,e,n,r=[c.Marker,c.Path],i={contextmenu:!1,contextmenuItems:[],contextmenuInheritItems:!0};for(e=0,n=r.length;e<n;e++)(t=r[e]).prototype.options?t.mergeOptions(i):t.prototype.options=i,t.addInitHook(function(){this.options.contextmenu&&this._initContextMenu()}),t.include(c.Mixin.ContextMenu);return c.Map.ContextMenu})},{leaflet:560}],559:[function(t,e,n){L.locales={},L.locale=null,L.registerLocale=function(t,e){L.locales[t]=L.Util.extend({},L.locales[t],e)},L.setLocale=function(t){L.locale=t},L.i18n=L._=function(t,e){L.locale&&L.locales[L.locale]&&L.locales[L.locale][t]&&(t=L.locales[L.locale][t]);try{t=L.Util.template(t,e)}catch(t){}return t}},{}],560:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e=Object.freeze;function l(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var o=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function d(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var n=0;function u(t){return t._leaflet_id=t._leaflet_id||++n,t._leaflet_id}function r(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function i(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function s(){return!1}function a(t,e){return e=void 0===e?6:e,+(Math.round(t+"e+"+e)+"e-"+e)}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return c(t).split(/\s+/)}function f(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?o(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var g=/\{ *([\w_-]+) *\}/g;function m(t,r){return t.replace(g,function(t,e){var n=r[e];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(r)),n})}var y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var C=window.requestAnimationFrame||b("RequestAnimationFrame")||w,k=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||C!==w)return C.call(window,d(t,e));t.call(e)}function S(t){t&&k.call(window,t)}var M=(Object.freeze||Object)({freeze:e,extend:l,create:o,bind:d,lastId:n,stamp:u,throttle:r,wrapNum:i,falseFn:s,formatNum:a,trim:c,splitWords:h,setOptions:f,getParamString:p,template:m,isArray:y,indexOf:_,emptyImageUrl:v,requestFn:C,cancelFn:k,requestAnimFrame:E,cancelAnimFrame:S});function P(){}P.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,r=o(n);for(var i in(r.constructor=e).prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(e[i]=this[i]);return t.statics&&(l(e,t.statics),delete t.statics),t.includes&&(!function(t){if("undefined"==typeof L||!L||!L.Mixin)return;t=y(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(t.includes),l.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=l(o(r.options),t.options)),l(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},P.include=function(t){return l(this.prototype,t),this},P.mergeOptions=function(t){return l(this.prototype.options,t),this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var I={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=s,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=s;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var i=this._events[t];if(i){this._firingCount=this._firingCount+1||1;for(var o=0,a=i.length;o<a;o++){var s=i[o];s.fn.call(s.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var i=d(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[u(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[u(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var T=P.extend(I);function O(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof O?t:y(t)?new O(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,n)}function A(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function R(t,e){return!t||t instanceof A?t:new A(t,e)}function F(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(t,e){return t instanceof F?t:new F(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function z(t,e,n){return t instanceof B?t:y(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},A.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof O?D(t):R(t))instanceof A?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=R(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},F.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof B)n=e=t;else{if(!(t instanceof F))return t?this.extend(z(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new F(new B(e.lat-r,e.lng-i),new B(n.lat+r,n.lng+i))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?z(t):j(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof F?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var q,U={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new A(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!(B.prototype={equals:function(t,e){return!!t&&(t=z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return G.distance(this,z(t))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?i(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?i(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new F(new B(o.lat-r,o.lng-i),new B(a.lat-r,a.lng-i))}},G=l({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),V={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new O(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(q=6378137*Math.PI,new A([-q,-q],[q,q]))};function H(t,e,n,r){if(y(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function W(t,e,n,r){return new H(t,e,n,r)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X,Y=l({},G,{code:"EPSG:3857",projection:V,transformation:(X=.5/(Math.PI*V.R),W(X,.5,-X,.5))}),$=l({},Y,{code:"EPSG:900913"});function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var n,r,i,o,a,s,l="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)l+=(r?"L":"M")+(s=a[r]).x+" "+s.y;l+=e?Mt?"z":"x":""}return l||"M0 0"}var K=document.documentElement.style,J="ActiveXObject"in window,tt=J&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=It("webkit"),rt=It("android"),it=It("android 2")||It("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=rt&&It("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=It("chrome"),ut=It("gecko")&&!nt&&!st&&!J,ct=!lt&&It("safari"),ht=It("phantom"),ft="OTransition"in K,pt=0===navigator.platform.indexOf("Win"),dt=J&&"transition"in K,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in K,yt=!window.L_DISABLE_3D&&(dt||gt||mt)&&!ft&&!ht,_t="undefined"!=typeof orientation||It("mobile"),vt=_t&&nt,bt=_t&&gt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!xt),Lt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ct=_t&&st,kt=_t&&ut,Et=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),St=!!document.createElement("canvas").getContext,Mt=!(!document.createElementNS||!Z("svg").createSVGRect),Pt=!Mt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function It(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Tt=(Object.freeze||Object)({ie:J,ielt9:tt,edge:et,webkit:nt,android:rt,android23:it,androidStock:at,opera:st,chrome:lt,gecko:ut,safari:ct,phantom:ht,opera12:ft,win:pt,ie3d:dt,webkit3d:gt,gecko3d:mt,any3d:yt,mobile:_t,mobileWebkit:vt,mobileWebkit3d:bt,msPointer:xt,pointer:wt,touch:Lt,mobileOpera:Ct,mobileGecko:kt,retina:Et,canvas:St,svg:Mt,vml:Pt}),Ot=xt?"MSPointerDown":"pointerdown",Nt=xt?"MSPointerMove":"pointermove",Dt=xt?"MSPointerUp":"pointerup",At=xt?"MSPointerCancel":"pointercancel",Rt=["INPUT","SELECT","OPTION"],Ft={},jt=!1,Bt=0;function zt(t,e,n,r){var i,o,a,s,l,u,c,h,f,p;return"touchstart"===e?(c=t,h=n,f=r,p=d(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Rt.indexOf(t.target.tagName)<0))return;Fe(t)}Vt(t,h)}),c["_leaflet_touchstart"+f]=p,c.addEventListener(Ot,p,!1),jt||(document.documentElement.addEventListener(Ot,qt,!0),document.documentElement.addEventListener(Nt,Ut,!0),document.documentElement.addEventListener(Dt,Gt,!0),document.documentElement.addEventListener(At,Gt,!0),jt=!0)):"touchmove"===e?(l=n,u=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Vt(t,l)},(s=t)["_leaflet_touchmove"+r]=u,s.addEventListener(Nt,u,!1)):"touchend"===e&&(o=n,a=function(t){Vt(t,o)},(i=t)["_leaflet_touchend"+r]=a,i.addEventListener(Dt,a,!1),i.addEventListener(At,a,!1)),this}function qt(t){Ft[t.pointerId]=t,Bt++}function Ut(t){Ft[t.pointerId]&&(Ft[t.pointerId]=t)}function Gt(t){delete Ft[t.pointerId],Bt--}function Vt(t,e){for(var n in t.touches=[],Ft)t.touches.push(Ft[n]);t.changedTouches=[t],e(t)}var Ht=xt?"MSPointerDown":wt?"pointerdown":"touchstart",Wt=xt?"MSPointerUp":wt?"pointerup":"touchend",Xt="_leaflet_";function Yt(t,i,e){var o,a,s=!1;function n(t){var e;if(wt){if(!et||"mouse"===t.pointerType)return;e=Bt}else e=t.touches.length;if(!(1<e)){var n=Date.now(),r=n-(o||n);a=t.touches?t.touches[0]:t,s=0<r&&r<=250,o=n}}function r(t){if(s&&!a.cancelBubble){if(wt){if(!et||"mouse"===t.pointerType)return;var e,n,r={};for(n in a)e=a[n],r[n]=e&&e.bind?e.bind(a):e;a=r}a.type="dblclick",a.button=0,i(a),o=null}}return t[Xt+Ht+e]=n,t[Xt+Wt+e]=r,t[Xt+"dblclick"+e]=i,t.addEventListener(Ht,n,!1),t.addEventListener(Wt,r,!1),t.addEventListener("dblclick",i,!1),this}function $t(t,e){var n=t[Xt+Ht+e],r=t[Xt+Wt+e],i=t[Xt+"dblclick"+e];return t.removeEventListener(Ht,n,!1),t.removeEventListener(Wt,r,!1),et||t.removeEventListener("dblclick",i,!1),this}var Zt,Qt,Kt,Jt,te,ee=ye(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ye(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),re="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function ae(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ue(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ge(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function fe(t,e){if(void 0!==t.classList)for(var n=h(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!he(t,e)){var o=ge(t);de(t,(o?o+" ":"")+e)}}function pe(t,e){void 0!==t.classList?t.classList.remove(e):de(t,c((" "+ge(t)+" ").replace(" "+e+" "," ")))}function de(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ge(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function ye(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function _e(t,e,n){var r=e||new O(0,0);t.style[ee]=(dt?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function ve(t,e){t._leaflet_pos=e,yt?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function be(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document)Zt=function(){Pe(window,"selectstart",Fe)},Qt=function(){Te(window,"selectstart",Fe)};else{var xe=ye(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zt=function(){if(xe){var t=document.documentElement.style;Kt=t[xe],t[xe]="none"}},Qt=function(){xe&&(document.documentElement.style[xe]=Kt,Kt=void 0)}}function we(){Pe(window,"dragstart",Fe)}function Le(){Te(window,"dragstart",Fe)}function Ce(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ke(),te=(Jt=t).style.outline,t.style.outline="none",Pe(window,"keydown",ke))}function ke(){Jt&&(Jt.style.outline=te,te=Jt=void 0,Te(window,"keydown",ke))}function Ee(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Se(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Me=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:re,get:ie,getStyle:oe,create:ae,remove:se,empty:le,toFront:ue,toBack:ce,hasClass:he,addClass:fe,removeClass:pe,setClass:de,getClass:ge,setOpacity:me,testProp:ye,setTransform:_e,setPosition:ve,getPosition:be,disableTextSelection:Zt,enableTextSelection:Qt,disableImageDrag:we,enableImageDrag:Le,preventOutline:Ce,restoreOutline:ke,getSizedParentNode:Ee,getScale:Se});function Pe(t,e,n,r){if("object"==typeof e)for(var i in e)Oe(t,i,e[i],n);else for(var o=0,a=(e=h(e)).length;o<a;o++)Oe(t,e[o],n,r);return this}var Ie="_leaflet_events";function Te(t,e,n,r){if("object"==typeof e)for(var i in e)Ne(t,i,e[i],n);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)Ne(t,e[o],n,r);else{for(var s in t[Ie])Ne(t,s,t[Ie][s]);delete t[Ie]}return this}function Oe(e,t,n,r){var i=t+u(n)+(r?"_"+u(r):"");if(e[Ie]&&e[Ie][i])return this;var o=function(t){return n.call(r||e,t||window.event)},a=o;wt&&0===t.indexOf("touch")?zt(e,t,o,i):!Lt||"dblclick"!==t||wt&&lt?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,We(e,t)&&a(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):("click"===t&&rt&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=Ue&&n-Ue;if(r&&100<r&&r<500||t.target._simulatedClick&&!t._simulated)return je(t);Ue=n,e(t)}(t,a)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o):Yt(e,o,i),e[Ie]=e[Ie]||{},e[Ie][i]=o}function Ne(t,e,n,r){var i,o,a,s=e+u(n)+(r?"_"+u(r):""),l=t[Ie]&&t[Ie][s];if(!l)return this;wt&&0===e.indexOf("touch")?(a=(i=t)["_leaflet_"+(o=e)+s],"touchstart"===o?i.removeEventListener(Ot,a,!1):"touchmove"===o?i.removeEventListener(Nt,a,!1):"touchend"===o&&(i.removeEventListener(Dt,a,!1),i.removeEventListener(At,a,!1))):!Lt||"dblclick"!==e||wt&&lt?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",l,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,l,!1):"detachEvent"in t&&t.detachEvent("on"+e,l):$t(t,s),t[Ie][s]=null}function De(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Ae(t){return Oe(t,"mousewheel",De),this}function Re(t){return Pe(t,"mousedown touchstart dblclick",De),Oe(t,"click",Ve),this}function Fe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function je(t){return Fe(t),De(t),this}function Be(t,e){if(!e)return new O(t.clientX,t.clientY);var n=Se(e),r=n.boundingClientRect;return new O((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var ze=pt&&lt?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function qe(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ze:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ue,Ge={};function Ve(t){Ge[t.type]=!0}function He(t){var e=Ge[t.type];return Ge[t.type]=!1,e}function We(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Xe=(Object.freeze||Object)({on:Pe,off:Te,stopPropagation:De,disableScrollPropagation:Ae,disableClickPropagation:Re,preventDefault:Fe,stop:je,getMousePosition:Be,getWheelDelta:qe,fakeStop:Ve,skipped:He,isExternalTarget:We,addListener:Pe,removeListener:Te}),Ye=T.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=be(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ve(this._el,n),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),$e=T.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&yt&&!Ct&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,re,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(z(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n)&&(void 0!==n.animate&&(n.zoom=l({animate:n.animate},n.zoom),n.pan=l({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof O?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ye,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){fe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(o,a,t){if(!1===(t=t||{}).animate||!yt)return this.setView(o,a,t);this._stop();var s=this.project(this.getCenter()),l=this.project(o),e=this.getSize(),u=this._zoom;o=z(o),a=void 0===a?u:a;var c=Math.max(e.x,e.y),r=c*this.getZoomScale(u,a),h=l.distanceTo(s)||1,f=1.42,i=f*f;function n(t){var e=(r*r-c*c+(t?-1:1)*i*i*h*h)/(2*(t?r:c)*i*h),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var g=n(0);function m(t){return c*(d(g)*(p(e=g+f*t)/d(e))-p(g))/i;var e}var y=Date.now(),_=(n(1)-g)/f,v=t.duration?1e3*t.duration:1e3*_*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e,n,r=(Date.now()-y)/v,i=(e=r,(1-Math.pow(1-e,1.5))*_);r<=1?(this._flyToFrame=E(t,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(m(i)/h)),u),this.getScaleZoom(c/(n=i,c*(d(g)/d(g+f*n))),u),{flyTo:!0})):this._move(o,a)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,j(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),u=R([s.min.add(n),s.max.subtract(r)]);if(!u.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),h=D(a.x+c.x,a.y+c.y);(a.x<u.min.x||a.x>u.max.x)&&(h.x=o.x-c.x,0<c.x?h.x+=l.x-n.x:h.x-=l.x-r.x),(a.y<u.min.y||a.y>u.max.y)&&(h.y=o.y-c.y,0<c.y?h.y+=l.y-n.y:h.y-=l.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),i=n.divideBy(2).round(),o=r.subtract(i);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=d(this._handleGeolocationResponse,this),n=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new F(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=D(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=R(this.project(s,r),this.project(a,r)).getSize(),c=yt?this.options.zoomSnap:1,h=l.x/u.x,f=l.y/u.y,p=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(p,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new A(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(z(t),z(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(t)))},mouseEventToContainerPoint:function(t){return Be(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Pe(e,"scroll",this._onScroll,this),this._containerId=u(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,fe(t,"leaflet-container"+(Lt?" leaflet-touch":"")+(Et?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(t.markerPane,"leaflet-zoom-hide"),fe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ve(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ve(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Te:Pe;e((this._targets[u(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[u(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(i&&!We(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!We(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ce(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var r=l({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var i=n[0];"contextmenu"===e&&i.listens(e,!0)&&Fe(t);var o={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=i.getLatLng&&(!i._radius||i._radius<=10);o.containerPoint=a?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=a?i.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,o,!0),o.originalEvent._stopped||!1===n[s].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return be(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new A(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new A(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new O(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=yt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ee,n=this._proxy.style[e];_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(E(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E(function(){this._moveEnd(!0)},this))}});var Ze=P.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return fe(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Qe=function(t){return new Ze(t)};$e.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var r=this._controlCorners={},i="leaflet-",o=this._controlContainer=ae("div",i+"control-container",this._container);function t(t,e){var n=i+t+" "+i+e;r[t+e]=ae("div",n,o)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ke=Ze.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ze.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(u(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):pe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Re(e),Ae(e);var r=this._section=ae("section",t+"-list");n&&(this._map.on("click",this.collapse,this),rt||Pe(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ae("a",t+"-toggle",e);i.href="#",i.title="Layers",Lt?(Pe(i,"click",je),Pe(i,"click",this.expand,this)):Pe(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",r),this._separator=ae("div",t+"-separator",r),this._overlaysList=ae("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&u(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(d(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;le(this._baseLayersList),le(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<i,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(u(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+u(this),r),this._layerControlInputs.push(e),e.layerId=u(t.layer),Pe(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;0<=o;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;0<=i;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Ze.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=ae("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Re(o),Pe(o,"click",je),Pe(o,"click",i,this),Pe(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";pe(this._zoomInButton,e),pe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&fe(this._zoomInButton,e)}});$e.mergeOptions({zoomControl:!0}),$e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))});var tn=Ze.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ae("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;5280<i?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),en=Ze.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=ae("div","leaflet-control-attribution"),Re(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});$e.mergeOptions({attributionControl:!0}),$e.addInitHook(function(){this.options.attributionControl&&(new en).addTo(this)});Ze.Layers=Ke,Ze.Zoom=Je,Ze.Scale=tn,Ze.Attribution=en,Qe.layers=function(t,e,n){return new Ke(t,e,n)},Qe.zoom=function(t){return new Je(t)},Qe.scale=function(t){return new tn(t)},Qe.attribution=function(t){return new en(t)};var nn=P.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:I},an=Lt?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ln={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},un=T.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Pe(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(un._dragging===this&&this.finishDrag(),Te(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(un._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((un._dragging=this)._preventOutline&&Ce(this._element),we(),Zt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ee(this._element);this._startPoint=new O(e.clientX,e.clientY),this._parentScale=Se(n),Pe(document,ln[t.type],this._onMove,this),Pe(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new O(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Fe(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=be(this._element).subtract(n),fe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ve(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in pe(document.body,"leaflet-dragging"),this._lastTarget&&(pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ln)Te(document,ln[t],this._onMove,this),Te(document,sn[t],this._onUp,this);Le(),Qt(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,un._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,l,u=0;for(s=i+1;s<=o-1;s++)l=gn(e[s],e[i],e[o],!0),u<l&&(a=s,u=l);r<u&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)a=t[r],s=t[i],void 0,l=s.x-a.x,u=s.y-a.y,e<l*l+u*u&&(n.push(t[r]),i=r);var a,s,l,u;i<o-1&&n.push(t[o-1]);return n}(t,n),n)}function hn(t,e,n){return Math.sqrt(gn(t,e,n,!0))}function fn(t,e,n,r,i){var o,a,s,l=r?rn:dn(t,n),u=dn(e,n);for(rn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;s=dn(a=pn(t,e,o=l||u,n,i),n),o===l?(t=a,l=s):(e=a,u=s)}}function pn(t,e,n,r,i){var o,a,s=e.x-t.x,l=e.y-t.y,u=r.min,c=r.max;return 8&n?(o=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(o=t.x+s*(u.y-t.y)/l,a=u.y):2&n?(o=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(o=u.x,a=t.y+l*(u.x-t.x)/s),new O(o,a,i)}function dn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function gn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,l=n.y-a,u=s*s+l*l;return 0<u&&(1<(i=((t.x-o)*s+(t.y-a)*l)/u)?(o=n.x,a=n.y):0<i&&(o+=s*i,a+=l*i)),s=t.x-o,l=t.y-a,r?s*s+l*l:new O(o,a)}function mn(t){return!y(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function yn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(t)}var _n=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return gn(t,e,n)},clipSegment:fn,_getEdgeIntersection:pn,_getBitCode:dn,_sqClosestPointOnSegment:gn,isFlat:mn,_flat:yn});function vn(t,e,n){var r,i,o,a,s,l,u,c,h,f=[1,4,2,8];for(i=0,u=t.length;i<u;i++)t[i]._code=dn(t[i],e);for(a=0;a<4;a++){for(c=f[a],r=[],i=0,o=(u=t.length)-1;i<u;o=i++)s=t[i],l=t[o],s._code&c?l._code&c||((h=pn(l,s,c,e,n))._code=dn(h,e),r.push(h)):(l._code&c&&((h=pn(l,s,c,e,n))._code=dn(h,e),r.push(h)),r.push(s));t=r}return t}var bn,xn=(Object.freeze||Object)({clipPolygon:vn}),wn={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new A([-180,-90],[180,90])},Ln={R:6378137,R_MINOR:6356752.314245179,bounds:new A([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new O(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=u=Math.PI/2-2*Math.atan(a*e)-s;return new B(s*n,t.x*n/r)}},Cn=(Object.freeze||Object)({LonLat:wn,Mercator:Ln,SphericalMercator:V}),kn=l({},G,{code:"EPSG:3395",projection:Ln,transformation:(bn=.5/(Math.PI*Ln.R),W(bn,.5,-bn,.5))}),En=l({},G,{code:"EPSG:4326",projection:wn,transformation:W(1/180,1,-1/180,.5)}),Sn=l({},U,{projection:wn,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});U.Earth=G,U.EPSG3395=kn,U.EPSG3857=Y,U.EPSG900913=$,U.EPSG4326=En,U.Simple=Sn;var Mn=T.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[u(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[u(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});$e.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=u(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=u(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&u(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?y(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[u(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=u(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pn=Mn.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return u(t)}}),In=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Tn=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=D(r),o=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Et&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var On=Tn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+Tn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Nn=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new un(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=be(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=R(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!l.contains(o)){var u=D((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),ve(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=be(e._icon),i=e._map.layerPointToLatLng(r);n&&ve(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=Mn.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),fe(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(fe(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){ve(this._icon,t),this._shadow&&ve(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var An=Mn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Rn=An.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=z(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=z(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return An.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new A(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Fn=Rn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=l({},n,{radius:e})),f(this,e),this._latlng=z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:An.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===G.distance){var i=Math.PI/180,o=this._mRadius/G.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(u*i))/(Math.cos(e*i)*Math.cos(u*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});var jn=An.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=gn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){var h=o(t,e=l[u-1],n=l[u],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(r=t=0;t<l-1;t++)if(i=s[t],o=s[t+1],e<(r+=n=i.distanceTo(o)))return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=mn(t),r=0,i=t.length;r<i;r++)n?(e[r]=z(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new A;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new A([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof B,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,l=this._parts;for(r=e=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=fn(s[n],s[n+1],t,n,!0))&&(l[r]=l[r]||[],l[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&hn(t,s[i],s[r])<=l)return!0;return!1}});jn._flat=yn;var Bn=jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)n=u[t],r=u[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return l=0===o?u[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=jn.prototype._convertLatLngs.call(this,t),n=e.length;return 2<=n&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){jn.prototype._setLatLngs.call(this,t),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new O(e,e);if(t=new A(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=vn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(l=(e=this._parts[i]).length)-1;o<l;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||jn.prototype._containsPoint.call(this,t,!0)}});var zn=In.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=y(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=qn(t,o);return a?(a.feature=Xn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function qn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Un;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),u?u(t,n):new Dn(n);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),l.push(u?u(t,n):new Dn(n));return new In(l);case"LineString":case"MultiLineString":return r=Gn(s,"LineString"===a.type?0:1,c),new jn(r,e);case"Polygon":case"MultiPolygon":return r=Gn(s,"Polygon"===a.type?1:2,c),new Bn(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=qn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new In(l);default:throw new Error("Invalid GeoJSON object.")}}function Un(t){return new B(t[1],t[0],t[2])}function Gn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?Gn(t[o],e-1,n):(n||Un)(t[o]),i.push(r);return i}function Vn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Hn(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Hn(t[o],e-1,n,r):Vn(t[o],r));return!e&&n&&i.push(i[0]),i}function Wn(t,e){return t.feature?l({},t.feature,{geometry:e}):Xn(e)}function Xn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Yn={toGeoJSON:function(t){return Wn(this,{type:"Point",coordinates:Vn(this.getLatLng(),t)})}};function $n(t,e){return new zn(t,e)}Dn.include(Yn),Fn.include(Yn),Rn.include(Yn),jn.include({toGeoJSON:function(t){var e=!mn(this._latlngs);return Wn(this,{type:(e?"Multi":"")+"LineString",coordinates:Hn(this._latlngs,e?1:0,!1,t)})}}),Bn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=e&&!mn(this._latlngs[0]),r=Hn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Wn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Pn.include({toMultiPoint:function(e){var n=[];return this.eachLayer(function(t){n.push(t.toGeoJSON(e).geometry.coordinates)}),Wn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(r){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(r);var i="GeometryCollection"===t,o=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(r);if(i)o.push(e.geometry);else{var n=Xn(e);"FeatureCollection"===n.type?o.push.apply(o,n.features):o.push(n)}}}),i?Wn(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var Zn=$n,Qn=Mn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ue(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=s,e.onmousemove=s,e.onload=d(this.fire,this,"load"),e.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;_e(this._image,n,e)},_reset:function(){var t=this._image,e=new A(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ve(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Kn=Qn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),e.onselectstart=s,e.onmousemove=s,e.onloadeddata=d(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],i=0;i<n.length;i++)r.push(n[i].src);this._url=0<n.length?r:[e.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=ae("source");a.src=this._url[o],e.appendChild(a)}}}});var Jn=Qn.extend({_initImage:function(){var t=this._image=this._url;fe(t,"leaflet-image-layer"),this._zoomAnimated&&fe(t,"leaflet-zoom-animated"),t.onselectstart=s,t.onmousemove=s}});var tr=Mn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(d(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ue(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Mn||(n=e,e=t),e instanceof In)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?ve(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),er=tr.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){tr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof An||this._source.on("preclick",De))},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof An||this._source.off("preclick",De))},getEvents:function(){var t=tr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Re(n),Ae(this._contentNode),Pe(n,"contextmenu",De),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ae("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Pe(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&i<r?(e.height=i+"px",fe(t,o)):pe(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ve(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new O(this._containerLeft,-n-this._containerBottom);i._add(be(this._container));var o=t.layerPointToContainerPoint(i),a=D(this.options.autoPanPadding),s=D(this.options.autoPanPaddingTopLeft||a),l=D(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,h=0;o.x+r+l.x>u.x&&(c=o.x+r-u.x+l.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+l.y>u.y&&(h=o.y+n-u.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),je(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});$e.mergeOptions({closePopupOnClick:!0}),$e.include({openPopup:function(t,e,n){return t instanceof er||(t=new er(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Mn.include({bindPopup:function(t,e){return t instanceof er?(f(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new er(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(je(t),e instanceof An?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var nr=tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){tr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=tr.prototype.getEvents.call(this);return Lt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=D(this.options.offset),u=this._getAnchor();"top"===o?t=t.add(D(-a/2+l.x,-s+l.y+u.y,!0)):"bottom"===o?t=t.subtract(D(a/2-l.x,-l.y,!0)):"center"===o?t=t.subtract(D(a/2+l.x,s/2-u.y+l.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(D(l.x+u.x,u.y-s/2+l.y,!0))):(o="left",t=t.subtract(D(a+u.x-l.x,s/2-u.y-l.y,!0))),pe(n,"leaflet-tooltip-right"),pe(n,"leaflet-tooltip-left"),pe(n,"leaflet-tooltip-top"),pe(n,"leaflet-tooltip-bottom"),fe(n,"leaflet-tooltip-"+o),ve(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});$e.include({openTooltip:function(t,e,n){return t instanceof nr||(t=new nr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Mn.include({bindTooltip:function(t,e){return t instanceof nr?(f(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new nr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Lt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(pe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var rr=Tn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(le(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Tn.Default=On;var ir=Mn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);me(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(S(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r}},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new O(+i,+o);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),r<a&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new O(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();yt?_e(t.el,i,r):ve(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new A(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,l=new A(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new O(c.x,c.y))||(this._tiles[u].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var p=new O(f,h);if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:a.push(p)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new F(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new O(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){fe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s,t.onmousemove=s,tt&&this.options.opacity<1&&me(t,this.options.opacity),rt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),i=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(i),this.createTile.length<2&&E(d(this._tileReady,this,t,null,i)),ve(i,n),this._tiles[r]={el:i,coords:t,current:!0},e.appendChild(i),this.fire("tileloadstart",{tile:i,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),S(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(fe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?i(t.x,this._wrapX):t.x,this._wrapY?i(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new A(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var or=ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Et&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),rt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Pe(n,"load",d(this._tileOnLoad,this,e,n)),Pe(n,"error",d(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Et?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return m(this._url,l(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(d(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=s,e.onerror=s,e.complete||(e.src=v,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",v),ir.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==v))return ir.prototype._tileReady.call(this,t,e,n)}});function ar(t,e){return new or(t,e)}var sr=or.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=l({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);var i=(e=f(this,e)).detectRetina&&Et?2:1,o=this.getTileSize();n.width=o.x*i,n.height=o.y*i,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,or.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=R(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(1.3<=this._wmsVersion&&this._crs===En?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=or.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});or.WMS=sr,ar.wms=function(t,e){return new sr(t,e)};var lr=Mn.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=be(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);yt?_e(this._container,s,n):ve(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new A(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ur=lr.extend({getEvents:function(){var t=lr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Pe(t,"mousemove",r(this._onMouseMove,32,this),this),Pe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,se(this._container),Te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){lr.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=Et?2:1;ve(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Et&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[u(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[u(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new A,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ve(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(pe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(fe(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&((n.prev=r)?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&((r.next=n)?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function cr(t){return St?new ur(t):null}var hr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),fr={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(lr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hr("shape");fe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[u(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[u(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=hr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=y(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=hr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ue(t._container)},_bringToBack:function(t){ce(t._container)}},pr=Pt?hr:Z,dr=lr.extend({getEvents:function(){var t=lr.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){lr.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ve(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=pr("path");t.options.className&&fe(e,t.options.className),t.options.interactive&&fe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[u(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[u(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ue(t._path)},_bringToBack:function(t){ce(t._path)}});function gr(t){return Mt||Pt?new dr(t):null}Pt&&dr.include(fr),$e.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&cr(t)||gr(t)}});var mr=Bn.extend({initialize:function(t,e){Bn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});dr.create=pr,dr.pointsToPath=Q,zn.geometryToLayer=qn,zn.coordsToLatLng=Un,zn.coordsToLatLngs=Gn,zn.latLngToCoords=Vn,zn.latLngsToCoords=Hn,zn.getFeature=Wn,zn.asFeature=Xn,$e.mergeOptions({boxZoom:!0});var yr=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Zt(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Pe(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new A(this._point,this._startPoint),n=e.getSize();ve(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),pe(this._container,"leaflet-crosshair")),Qt(),Le(),Te(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});$e.addInitHook("addHandler","boxZoom",yr),$e.mergeOptions({doubleClickZoom:!0});var _r=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});$e.addInitHook("addHandler","doubleClickZoom",_r),$e.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vr=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new un(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pe(this._map._container,"leaflet-grab"),pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),h=u/(n.inertiaDeceleration*a),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),E(function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});$e.addInitHook("addHandler","dragging",vr),$e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var br=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Pe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}je(t)}}});$e.addInitHook("addHandler","keyboard",br),$e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xr=nn.extend({addHooks:function(){Pe(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Te(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),r),je(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(0<this._delta?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});$e.addInitHook("addHandler","scrollWheelZoom",xr),$e.mergeOptions({tap:!0,tapTolerance:15});var wr=nn.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Fe(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._holdTimeout=setTimeout(d(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Pe(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Te(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&pe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});Lt&&!wt&&$e.addInitHook("addHandler","tap",wr),$e.mergeOptions({touchZoom:Lt&&!it,bounceAtZoomLimits:!0});var Lr=nn.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend",this._onTouchEnd,this),Fe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&i<1||this._zoom>e.getMaxZoom()&&1<i)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var a=d(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(a,this,!0),Fe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Te(document,"touchmove",this._onTouchMove),Te(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});$e.addInitHook("addHandler","touchZoom",Lr),$e.BoxZoom=yr,$e.DoubleClickZoom=_r,$e.Drag=vr,$e.Keyboard=br,$e.ScrollWheelZoom=xr,$e.Tap=wr,$e.TouchZoom=Lr,Object.freeze=e,t.version="1.5.1+build.2e3e0ffb",t.Control=Ze,t.control=Qe,t.Browser=Tt,t.Evented=T,t.Mixin=on,t.Util=M,t.Class=P,t.Handler=nn,t.extend=l,t.bind=d,t.stamp=u,t.setOptions=f,t.DomEvent=Xe,t.DomUtil=Me,t.PosAnimation=Ye,t.Draggable=un,t.LineUtil=_n,t.PolyUtil=xn,t.Point=O,t.point=D,t.Bounds=A,t.bounds=R,t.Transformation=H,t.transformation=W,t.Projection=Cn,t.LatLng=B,t.latLng=z,t.LatLngBounds=F,t.latLngBounds=j,t.CRS=U,t.GeoJSON=zn,t.geoJSON=$n,t.geoJson=Zn,t.Layer=Mn,t.LayerGroup=Pn,t.layerGroup=function(t,e){return new Pn(t,e)},t.FeatureGroup=In,t.featureGroup=function(t){return new In(t)},t.ImageOverlay=Qn,t.imageOverlay=function(t,e,n){return new Qn(t,e,n)},t.VideoOverlay=Kn,t.videoOverlay=function(t,e,n){return new Kn(t,e,n)},t.SVGOverlay=Jn,t.svgOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=tr,t.Popup=er,t.popup=function(t,e){return new er(t,e)},t.Tooltip=nr,t.tooltip=function(t,e){return new nr(t,e)},t.Icon=Tn,t.icon=function(t){return new Tn(t)},t.DivIcon=rr,t.divIcon=function(t){return new rr(t)},t.Marker=Dn,t.marker=function(t,e){return new Dn(t,e)},t.TileLayer=or,t.tileLayer=ar,t.GridLayer=ir,t.gridLayer=function(t){return new ir(t)},t.SVG=dr,t.svg=gr,t.Renderer=lr,t.Canvas=ur,t.canvas=cr,t.Path=An,t.CircleMarker=Rn,t.circleMarker=function(t,e){return new Rn(t,e)},t.Circle=Fn,t.circle=function(t,e,n){return new Fn(t,e,n)},t.Polyline=jn,t.polyline=function(t,e){return new jn(t,e)},t.Polygon=Bn,t.polygon=function(t,e){return new Bn(t,e)},t.Rectangle=mr,t.rectangle=function(t,e){return new mr(t,e)},t.Map=$e,t.map=function(t,e){return new L.Map(t,e)};var Cr=window.L;t.noConflict=function(){return window.L=Cr,this},window.L=t},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.L={})},{}],561:[function(t,e,n){"use strict";var i=t("immediate");function u(){}var c={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,t!==u&&p(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,n,r){i(function(){var t;try{t=n(r)}catch(t){return c.reject(e,t)}t===e?c.reject(e,new TypeError("Cannot resolve promise with itself")):c.resolve(e,t)})}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,c.reject(e,t))}function i(t){n||(n=!0,c.resolve(e,t))}var o=d(function(){t(i,r)});"error"===o.status&&r(o.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=s).prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var n=new this.constructor(u);this.state!==r?h(n,this.state===a?t:e,this.outcome):this.queue.push(new l(n,t,e));return n},l.prototype.callFulfilled=function(t){c.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){c.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},c.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return c.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=a,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},c.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},s.resolve=function(t){if(t instanceof this)return t;return c.resolve(new this(u),t)},s.reject=function(t){var e=new this(u);return c.reject(e,t)},s.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,e=-1,s=new this(u);for(;++e<r;)l(t[e],e);return s;function l(t,e){n.resolve(t).then(function(t){o[e]=t,++a!==r||i||(i=!0,c.resolve(s,o))},function(t){i||(i=!0,c.reject(s,t))})}},s.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var i=-1,o=new this(u);for(;++i<n;)a=t[i],e.resolve(a).then(function(t){r||(r=!0,c.resolve(o,t))},function(t){r||(r=!0,c.reject(o,t))});var a;return o}},{immediate:492}],562:[function(h,e,n){(function(r){!function(t){if("object"==typeof n&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=t()}}(function(){return function o(a,s,l){function u(n,t){if(!s[n]){if(!a[n]){var e="function"==typeof h&&h;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(t){var e=a[n][1][t];return u(e||t)},i,i.exports,o,a,s,l)}return s[n].exports}for(var c="function"==typeof h&&h,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,c,e){(function(e){"use strict";var n,r,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var i=0,o=new t(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var s=new e.MessageChannel;s.port1.onmessage=u,n=function(){s.port2.postMessage(0)}}var l=[];function u(){var t,e;r=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}r=!1}c.exports=function(t){1!==l.push(t)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var i=t(1);function u(){}var c={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,t!==u&&p(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,n,r){i(function(){var t;try{t=n(r)}catch(t){return c.reject(e,t)}t===e?c.reject(e,new TypeError("Cannot resolve promise with itself")):c.resolve(e,t)})}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,c.reject(e,t))}function i(t){n||(n=!0,c.resolve(e,t))}var o=d(function(){t(i,r)});"error"===o.status&&r(o.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=s).prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var n=new this.constructor(u);this.state!==r?h(n,this.state===a?t:e,this.outcome):this.queue.push(new l(n,t,e));return n},l.prototype.callFulfilled=function(t){c.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){c.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},c.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return c.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=a,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},c.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},s.resolve=function(t){if(t instanceof this)return t;return c.resolve(new this(u),t)},s.reject=function(t){var e=new this(u);return c.reject(e,t)},s.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,e=-1,s=new this(u);for(;++e<r;)l(t[e],e);return s;function l(t,e){n.resolve(t).then(function(t){o[e]=t,++a!==r||i||(i=!0,c.resolve(s,o))},function(t){i||(i=!0,c.reject(s,t))})}},s.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var i=-1,o=new this(u);for(;++i<n;)a=t[i],e.resolve(a).then(function(t){r||(r=!0,c.resolve(o,t))},function(t){r||(r=!0,c.reject(o,t))});var a;return o}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var s=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function a(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if("TypeError"!==t.name)throw t;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&t(3);var h=Promise;function f(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function p(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function o(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",i=void 0,c={},d=Object.prototype.toString,g="readonly",m="readwrite";function y(t){return"boolean"==typeof i?h.resolve(i):(r=t,new h(function(n){var t=r.transaction(u,m),e=a([""]);t.objectStore(u).put(e,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),n(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);n(e||!t||43<=parseInt(t[1],10))}}).catch(function(){return!1})).then(function(t){return i=t});var r}function _(t){var e=c[t.name],n={};n.promise=new h(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function v(t){var e=c[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function b(t,e){var n=c[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function x(i,o){return new h(function(t,e){if(c[i.name]=c[i.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},i.db){if(!o)return t(i.db);_(i),i.db.close()}var n=[i.name];o&&n.push(i.version);var r=s.open.apply(s,n);o&&(r.onupgradeneeded=function(e){var t=r.result;try{t.createObjectStore(i.storeName),e.oldVersion<=1&&t.createObjectStore(u)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+i.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+i.storeName+'" already exists.')}}),r.onerror=function(t){t.preventDefault(),e(r.error)},r.onsuccess=function(){t(r.result),v(i)}})}function w(t){return x(t,!1)}function L(t){return x(t,!0)}function C(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function k(t){return a([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(atob(t.data))],{type:t.type})}function E(t){return t&&t.__local_forage_encoded_blob}function S(t){var e=this,n=e._initReady().then(function(){var t=c[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return l(n,t,t),n}function M(e,n,r,i){void 0===i&&(i=1);try{var t=e.db.transaction(e.storeName,n);r(null,t)}catch(t){if(0<i&&(!e.db||"InvalidStateError"===t.name||"NotFoundError"===t.name))return h.resolve().then(function(){if(!e.db||"NotFoundError"===t.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),L(e)}).then(function(){return function(n){_(n);for(var r=c[n.name],i=r.forages,t=0;t<i.length;t++){var e=i[t];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return n.db=null,w(n).then(function(t){return n.db=t,C(n)?L(n):t}).then(function(t){n.db=r.db=t;for(var e=0;e<i.length;e++)i[e]._dbInfo.db=t}).catch(function(t){throw b(n,t),t})}(e).then(function(){M(e,n,r,i-1)})}).catch(r);r(t)}}var P={_driver:"asyncStorage",_initStorage:function(t){var r=this,i={db:null};if(t)for(var e in t)i[e]=t[e];var o=c[i.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},c[i.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=S);var n=[];function a(){return h.resolve()}for(var s=0;s<o.forages.length;s++){var l=o.forages[s];l!==r&&n.push(l._initReady().catch(a))}var u=o.forages.slice(0);return h.all(n).then(function(){return i.db=o.db,w(i)}).then(function(t){return i.db=t,C(i,r._defaultConfig.version)?L(i):t}).then(function(t){i.db=o.db=t,r._dbInfo=i;for(var e=0;e<u.length;e++){var n=u[e];n!==r&&(n._dbInfo.db=i.db,n._dbInfo.version=i.version)}})},_support:function(){try{if(!s)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(a,t){var s=this,e=new h(function(o,n){s.ready().then(function(){M(s._dbInfo,g,function(t,e){if(t)return n(t);try{var r=e.objectStore(s._dbInfo.storeName).openCursor(),i=1;r.onsuccess=function(){var t=r.result;if(t){var e=t.value;E(e)&&(e=k(e));var n=a(e,t.key,i++);void 0!==n?o(n):t.continue()}else o()},r.onerror=function(){n(r.error)}}catch(t){n(t)}})}).catch(n)});return f(e,t),e},getItem:function(o,t){var a=this;o=p(o);var e=new h(function(r,i){a.ready().then(function(){M(a._dbInfo,g,function(t,e){if(t)return i(t);try{var n=e.objectStore(a._dbInfo.storeName).get(o);n.onsuccess=function(){var t=n.result;void 0===t&&(t=null),E(t)&&(t=k(t)),r(t)},n.onerror=function(){i(n.error)}}catch(t){i(t)}})}).catch(i)});return f(e,t),e},setItem:function(s,e,t){var l=this;s=p(s);var n=new h(function(o,a){var t;l.ready().then(function(){return t=l._dbInfo,"[object Blob]"===d.call(e)?y(t.db).then(function(t){return t?e:(r=e,new h(function(n,t){var e=new FileReader;e.onerror=t,e.onloadend=function(t){var e=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:e,type:r.type})},e.readAsBinaryString(r)}));var r}):e}).then(function(i){M(l._dbInfo,m,function(t,e){if(t)return a(t);try{var n=e.objectStore(l._dbInfo.storeName);null===i&&(i=void 0);var r=n.put(i,s);e.oncomplete=function(){void 0===i&&(i=null),o(i)},e.onabort=e.onerror=function(){var t=r.error?r.error:r.transaction.error;a(t)}}catch(t){a(t)}})}).catch(a)});return f(n,t),n},removeItem:function(o,t){var a=this;o=p(o);var e=new h(function(r,i){a.ready().then(function(){M(a._dbInfo,m,function(t,e){if(t)return i(t);try{var n=e.objectStore(a._dbInfo.storeName).delete(o);e.oncomplete=function(){r()},e.onerror=function(){i(n.error)},e.onabort=function(){var t=n.error?n.error:n.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return f(e,t),e},clear:function(t){var o=this,e=new h(function(r,i){o.ready().then(function(){M(o._dbInfo,m,function(t,e){if(t)return i(t);try{var n=e.objectStore(o._dbInfo.storeName).clear();e.oncomplete=function(){r()},e.onabort=e.onerror=function(){var t=n.error?n.error:n.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return f(e,t),e},length:function(t){var o=this,e=new h(function(r,i){o.ready().then(function(){M(o._dbInfo,g,function(t,e){if(t)return i(t);try{var n=e.objectStore(o._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){i(n.error)}}catch(t){i(t)}})}).catch(i)});return f(e,t),e},key:function(s,t){var l=this,e=new h(function(o,a){s<0?o(null):l.ready().then(function(){M(l._dbInfo,g,function(t,e){if(t)return a(t);try{var n=e.objectStore(l._dbInfo.storeName),r=!1,i=n.openCursor();i.onsuccess=function(){var t=i.result;t?0===s?o(t.key):r?o(t.key):(r=!0,t.advance(s)):o(null)},i.onerror=function(){a(i.error)}}catch(t){a(t)}})}).catch(a)});return f(e,t),e},keys:function(t){var a=this,e=new h(function(i,o){a.ready().then(function(){M(a._dbInfo,g,function(t,e){if(t)return o(t);try{var n=e.objectStore(a._dbInfo.storeName).openCursor(),r=[];n.onsuccess=function(){var t=n.result;t?(r.push(t.key),t.continue()):i(r)},n.onerror=function(){o(n.error)}}catch(t){o(t)}})}).catch(o)});return f(e,t),e},dropInstance:function(a,t){t=o.apply(this,arguments);var e,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db?h.resolve(this._dbInfo.db):w(a).then(function(t){var e=c[a.name],n=e.forages;e.db=t;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=t;return t});e=a.storeName?r.then(function(t){if(t.objectStoreNames.contains(a.storeName)){var i=t.version+1;_(a);var r=c[a.name],o=r.forages;t.close();for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=null,n._dbInfo.version=i}return new h(function(e,n){var r=s.open(a.name,i);r.onerror=function(t){r.result.close(),n(t)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}}).then(function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,v(n._dbInfo)}}).catch(function(t){throw(b(a,t)||h.resolve()).catch(function(){}),t})}}):r.then(function(t){_(a);var n=c[a.name],r=n.forages;t.close();for(var e=0;e<r.length;e++)r[e]._dbInfo.db=null;return new h(function(e,n){var r=s.deleteDatabase(a.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<r.length;e++)v(r[e]._dbInfo)}).catch(function(t){throw(b(a,t)||h.resolve()).catch(function(){}),t})})}else e=h.reject("Invalid arguments");return f(e,t),e}};var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",N=O.length,D=N+"arbf".length,A=Object.prototype.toString;function R(t){var e,n,r,i,o,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=I.indexOf(t[e]),r=I.indexOf(t[e+1]),i=I.indexOf(t[e+2]),o=I.indexOf(t[e+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}function F(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=I[n[e]>>2],r+=I[(3&n[e])<<4|n[e+1]>>4],r+=I[(15&n[e+1])<<2|n[e+2]>>6],r+=I[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var j={serialize:function(e,n){var t="";if(e&&(t=A.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===A.call(e.buffer))){var r,i=O;e instanceof ArrayBuffer?(r=e,i+="arbf"):(r=e.buffer,"[object Int8Array]"===t?i+="si08":"[object Uint8Array]"===t?i+="ui08":"[object Uint8ClampedArray]"===t?i+="uic8":"[object Int16Array]"===t?i+="si16":"[object Uint16Array]"===t?i+="ur16":"[object Int32Array]"===t?i+="si32":"[object Uint32Array]"===t?i+="ui32":"[object Float32Array]"===t?i+="fl32":"[object Float64Array]"===t?i+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(i+F(r))}else if("[object Blob]"===t){var o=new FileReader;o.onload=function(){var t="~~local_forage_type~"+e.type+"~"+F(this.result);n(O+"blob"+t)},o.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),n(null,t)}},deserialize:function(t){if(t.substring(0,N)!==O)return JSON.parse(t);var e,n=t.substring(D),r=t.substring(N,D);if("blob"===r&&T.test(n)){var i=n.match(T);e=i[1],n=n.substring(i[0].length)}var o=R(n);switch(r){case"arbf":return o;case"blob":return a([o],{type:e});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:R,bufferToString:F};function B(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function z(t,r,i,o,a,s){t.executeSql(i,o,a,function(t,n){n.code===n.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(t,e){e.rows.length?s(t,n):B(t,r,function(){t.executeSql(i,o,a,s)},s)},s):s(t,n)},s)}var q={_driver:"webSQLStorage",_initStorage:function(t){var r=this,i={db:null};if(t)for(var e in t)i[e]="string"!=typeof t[e]?t[e].toString():t[e];var n=new h(function(e,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(t){return n(t)}i.db.transaction(function(t){B(t,i,function(){r._dbInfo=i,e()},function(t,e){n(e)})},n)});return i.serializer=j,n},_support:"function"==typeof openDatabase,iterate:function(u,t){var e=this,n=new h(function(l,n){e.ready().then(function(){var s=e._dbInfo;s.db.transaction(function(t){z(t,s,"SELECT * FROM "+s.storeName,[],function(t,e){for(var n=e.rows,r=n.length,i=0;i<r;i++){var o=n.item(i),a=o.value;if(a&&(a=s.serializer.deserialize(a)),void 0!==(a=u(a,o.key,i+1)))return void l(a)}l()},function(t,e){n(e)})})}).catch(n)});return f(n,t),n},getItem:function(e,t){var o=this;e=p(e);var n=new h(function(i,n){o.ready().then(function(){var r=o._dbInfo;r.db.transaction(function(t){z(t,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],function(t,e){var n=e.rows.length?e.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),i(n)},function(t,e){n(e)})})}).catch(n)});return f(n,t),n},setItem:function(t,e,n){return function a(s,t,l,u){var c=this;s=p(s);var e=new h(function(i,o){c.ready().then(function(){void 0===t&&(t=null);var n=t,r=c._dbInfo;r.serializer.serialize(t,function(e,t){t?o(t):r.db.transaction(function(t){z(t,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[s,e],function(){i(n)},function(t,e){o(e)})},function(t){if(t.code===t.QUOTA_ERR){if(0<u)return void i(a.apply(c,[s,n,l,u-1]));o(t)}})})}).catch(o)});return f(e,l),e}.apply(this,[t,e,n,1])},removeItem:function(i,t){var o=this;i=p(i);var e=new h(function(n,r){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){z(t,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[i],function(){n()},function(t,e){r(e)})})}).catch(r)});return f(e,t),e},clear:function(t){var i=this,e=new h(function(n,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(t){z(t,e,"DELETE FROM "+e.storeName,[],function(){n()},function(t,e){r(e)})})}).catch(r)});return f(e,t),e},length:function(t){var i=this,e=new h(function(r,n){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(t){z(t,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],function(t,e){var n=e.rows.item(0).c;r(n)},function(t,e){n(e)})})}).catch(n)});return f(e,t),e},key:function(i,t){var o=this,e=new h(function(r,n){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){z(t,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[i+1],function(t,e){var n=e.rows.length?e.rows.item(0).key:null;r(n)},function(t,e){n(e)})})}).catch(n)});return f(e,t),e},keys:function(t){var r=this,e=new h(function(i,n){r.ready().then(function(){var e=r._dbInfo;e.db.transaction(function(t){z(t,e,"SELECT key FROM "+e.storeName,[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).key);i(n)},function(t,e){n(e)})})}).catch(n)});return f(e,t),e},dropInstance:function(n,t){t=o.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var e,i=this;return f(e=n.name?new h(function(t){var e,o;e=n.name===r.name?i._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?t({db:e,storeNames:[n.storeName]}):t((o=e,new h(function(i,n){o.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).name);i({db:o,storeNames:n})},function(t,e){n(e)})},function(t){n(t)})})))}).then(function(s){return new h(function(o,a){s.db.transaction(function(r){function t(e){return new h(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(t,e){n(e)})})}for(var e=[],n=0,i=s.storeNames.length;n<i;n++)e.push(t(s.storeNames[n]));h.all(e).then(function(){o()}).catch(function(t){a(t)})},function(t){a(t)})})}):h.reject("Invalid arguments"),t),e}};function U(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function G(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||0<localStorage.length}var V={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=U(t,this._defaultConfig),G()?((this._dbInfo=e).serializer=j,h.resolve()):h.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(l,t){var u=this,e=u.ready().then(function(){for(var t=u._dbInfo,e=t.keyPrefix,n=e.length,r=localStorage.length,i=1,o=0;o<r;o++){var a=localStorage.key(o);if(0===a.indexOf(e)){var s=localStorage.getItem(a);if(s&&(s=t.serializer.deserialize(s)),void 0!==(s=l(s,a.substring(n),i++)))return s}}});return f(e,t),e},getItem:function(n,t){var r=this;n=p(n);var e=r.ready().then(function(){var t=r._dbInfo,e=localStorage.getItem(t.keyPrefix+n);return e&&(e=t.serializer.deserialize(e)),e});return f(e,t),e},setItem:function(a,t,e){var s=this;a=p(a);var n=s.ready().then(function(){void 0===t&&(t=null);var o=t;return new h(function(n,r){var i=s._dbInfo;i.serializer.serialize(t,function(t,e){if(e)r(e);else try{localStorage.setItem(i.keyPrefix+a,t),n(o)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return f(n,e),n},removeItem:function(e,t){var n=this;e=p(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return f(r,t),r},clear:function(t){var r=this,e=r.ready().then(function(){for(var t=r._dbInfo.keyPrefix,e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}});return f(e,t),e},length:function(t){var e=this.keys().then(function(t){return t.length});return f(e,t),e},key:function(n,t){var r=this,e=r.ready().then(function(){var e,t=r._dbInfo;try{e=localStorage.key(n)}catch(t){e=null}return e&&(e=e.substring(t.keyPrefix.length)),e});return f(e,t),e},keys:function(t){var o=this,e=o.ready().then(function(){for(var t=o._dbInfo,e=localStorage.length,n=[],r=0;r<e;r++){var i=localStorage.key(r);0===i.indexOf(t.keyPrefix)&&n.push(i.substring(t.keyPrefix.length))}return n});return f(e,t),e},dropInstance:function(e,t){if(t=o.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return f(r=e.name?new h(function(t){e.storeName?t(U(e,i._defaultConfig)):t(e.name+"/")}).then(function(t){for(var e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):h.reject("Invalid arguments"),t),r}},H=function(t,e){for(var n,r,i=t.length,o=0;o<i;){if((n=t[o])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},W=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},X={},Y={},$={INDEXEDDB:P,WEBSQL:q,LOCALSTORAGE:V},Z=[$.INDEXEDDB._driver,$.WEBSQL._driver,$.LOCALSTORAGE._driver],Q=["dropInstance"],K=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Q),J={description:"",driver:Z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function tt(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function et(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(W(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var nt=new(function(){function i(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),$)if($.hasOwnProperty(e)){var n=$[e],r=n._driver;this[e]=r,X[r]||this.defineDriver(n)}this._defaultConfig=et({},J),this._config=et({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return i.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},i.prototype.defineDriver=function(u,t,e){var n=new h(function(e,n){try{var r=u._driver,t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void n(t);for(var i=K.concat("_initStorage"),o=0,a=i.length;o<a;o++){var s=i[o];if((!H(Q,s)||u[s])&&"function"!=typeof u[s])return void n(t)}!function(){for(var t=function(n){return function(){var t=new Error("Method "+n+" is not implemented by the current driver"),e=h.reject(t);return f(e,arguments[arguments.length-1]),e}},e=0,n=Q.length;e<n;e++){var r=Q[e];u[r]||(u[r]=t(r))}}();var l=function(t){X[r]&&console.info("Redefining LocalForage driver: "+r),X[r]=u,Y[r]=t,e()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(l,n):l(!!u._support):l(!0)}catch(t){n(t)}});return l(n,t,e),n},i.prototype.driver=function(){return this._driver||null},i.prototype.getDriver=function(t,e,n){var r=X[t]?h.resolve(X[t]):h.reject(new Error("Driver not found."));return l(r,e,n),r},i.prototype.getSerializer=function(t){var e=h.resolve(j);return l(e,t),e},i.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return l(n,t,t),n},i.prototype.setDriver=function(t,e,n){var o=this;W(t)||(t=[t]);var r=this._getSupportedDrivers(t);function a(){o._config.driver=o.driver()}function s(t){return o._extend(t),a(),o._ready=o._initStorage(o._config),o._ready}var i=null!==this._driverSet?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=i.then(function(){var t=r[0];return o._dbInfo=null,o._ready=null,o.getDriver(t).then(function(t){var i;o._driver=t._driver,a(),o._wrapLibraryMethodsWithReady(),o._initDriver=(i=r,function(){var r=0;return function t(){for(;r<i.length;){var e=i[r];return r++,o._dbInfo=null,o._ready=null,o.getDriver(e).then(s).catch(t)}a();var n=new Error("No available storage method found.");return o._driverSet=h.reject(n),o._driverSet}()})})}).catch(function(){a();var t=new Error("No available storage method found.");return o._driverSet=h.reject(t),o._driverSet}),l(this._driverSet,e,n),this._driverSet},i.prototype.supports=function(t){return!!Y[t]},i.prototype._extend=function(t){et(this,t)},i.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},i.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=K.length;t<e;t++)tt(this,K[t])},i.prototype.createInstance=function(t){return new i(t)},i}());e.exports=nt},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],563:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":564,"./lib/inflate":565,"./lib/utils/common":566,"./lib/zlib/constants":569}],564:[function(t,e,n){"use strict";var a=t("./zlib/deflate"),s=t("./utils/common"),l=t("./utils/strings"),i=t("./zlib/messages"),o=t("./zlib/zstream"),u=Object.prototype.toString,c=0,h=-1,f=0,p=8;function d(t){if(!(this instanceof d))return new d(t);this.options=s.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(i[n]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=a.deflateSetDictionary(this.strm,r))!==c)throw new Error(i[n]);this._dict_set=!0}}function r(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||i[n.err];return n.result}d.prototype.push=function(t,e){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=l.string2buf(t):"[object ArrayBuffer]"===u.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=a.deflate(i,r))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(i.output,i.next_out))):this.onData(s.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==n);return 4===r?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==r||(this.onEnd(c),!(i.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=d,n.deflate=r,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,r(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,r(t,e)}},{"./utils/common":566,"./utils/strings":567,"./zlib/deflate":571,"./zlib/messages":576,"./zlib/zstream":578}],565:[function(t,e,n){"use strict";var f=t("./zlib/inflate"),p=t("./utils/common"),d=t("./utils/strings"),g=t("./zlib/constants"),r=t("./zlib/messages"),i=t("./zlib/zstream"),o=t("./zlib/gzheader"),m=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var n=f.inflateInit2(this.strm,e.windowBits);if(n!==g.Z_OK)throw new Error(r[n]);this.header=new o,f.inflateGetHeader(this.strm,this.header)}function s(t,e){var n=new a(e);if(n.push(t,!0),n.err)throw n.msg||r[n.err];return n.result}a.prototype.push=function(t,e){var n,r,i,o,a,s,l=this.strm,u=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?g.Z_FINISH:g.Z_NO_FLUSH,"string"==typeof t?l.input=d.binstring2buf(t):"[object ArrayBuffer]"===m.call(t)?l.input=new Uint8Array(t):l.input=t,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new p.Buf8(u),l.next_out=0,l.avail_out=u),(n=f.inflate(l,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&c&&(s="string"==typeof c?d.string2buf(c):"[object ArrayBuffer]"===m.call(c)?new Uint8Array(c):c,n=f.inflateSetDictionary(this.strm,s)),n===g.Z_BUF_ERROR&&!0===h&&(n=g.Z_OK,h=!1),n!==g.Z_STREAM_END&&n!==g.Z_OK)return this.onEnd(n),!(this.ended=!0);l.next_out&&(0!==l.avail_out&&n!==g.Z_STREAM_END&&(0!==l.avail_in||r!==g.Z_FINISH&&r!==g.Z_SYNC_FLUSH)||("string"===this.options.to?(i=d.utf8border(l.output,l.next_out),o=l.next_out-i,a=d.buf2string(l.output,i),l.next_out=o,l.avail_out=u-o,o&&p.arraySet(l.output,l.output,i,o,0),this.onData(a)):this.onData(p.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(h=!0)}while((0<l.avail_in||0===l.avail_out)&&n!==g.Z_STREAM_END);return n===g.Z_STREAM_END&&(r=g.Z_FINISH),r===g.Z_FINISH?(n=f.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===g.Z_OK):r!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(l.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===g.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=a,n.inflate=s,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,s(t,e)},n.ungzip=s},{"./utils/common":566,"./utils/strings":567,"./zlib/constants":569,"./zlib/gzheader":572,"./zlib/inflate":574,"./zlib/messages":576,"./zlib/zstream":578}],566:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e,n,r=Array.prototype.slice.call(arguments,1);r.length;){var i=r.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var o in i)e=i,n=o,Object.prototype.hasOwnProperty.call(e,n)&&(t[o]=i[o])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),e=i=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],567:[function(t,e,n){"use strict";var l=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var u=new l.Buf8(256),r=0;r<256;r++)u[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function c(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}u[254]=u[254]=1,n.string2buf=function(t){var e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new l.Buf8(s),i=o=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e},n.buf2binstring=function(t){return c(t,t.length)},n.binstring2buf=function(t){for(var e=new l.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,i,o,a=e||t.length,s=new Array(2*a);for(n=r=0;n<a;)if((i=t[n++])<128)s[r++]=i;else if(4<(o=u[i]))s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<a;)i=i<<6|63&t[n++],o--;1<o?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return c(s,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+u[t[n]]>e?n:e}},{"./common":566}],568:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+e[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],569:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],570:[function(t,e,n){"use strict";var s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var i=s,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}},{}],571:[function(t,e,n){"use strict";var l,f=t("../utils/common"),u=t("./trees"),p=t("./adler32"),d=t("./crc32"),r=t("./messages"),c=0,h=4,g=0,m=-2,y=-1,_=4,i=2,v=8,b=9,o=286,a=30,s=19,x=2*o+1,w=15,L=3,C=258,k=C+L+1,E=42,S=113,M=1,P=2,I=3,T=4;function O(t,e){return t.msg=r[e],e}function N(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function A(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(f.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function R(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,A(t.strm)}function F(t,e){t.pending_buf[t.pending++]=e}function j(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function B(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-k?t.strstart-(t.w_size-k):0,u=t.window,c=t.w_mask,h=t.prev,f=t.strstart+C,p=u[o+a-1],d=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+a]===d&&u[n+a-1]===p&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=C-(f-o),o=f-C,a<r){if(t.match_start=e,s<=(a=r))break;p=u[o+a-1],d=u[o+a]}}}while((e=h[e&c])>l&&0!=--i);return a<=t.lookahead?a:t.lookahead}function z(t){var e,n,r,i,o,a,s,l,u,c,h=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-k)){for(f.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=n=t.hash_size;r=t.head[--e],t.head[e]=h<=r?r-h:0,--n;);for(e=n=h;r=t.prev[--e],t.prev[e]=h<=r?r-h:0,--n;);i+=h}if(0===t.strm.avail_in)break;if(a=t.strm,s=t.window,l=t.strstart+t.lookahead,u=i,c=void 0,c=a.avail_in,u<c&&(c=u),n=0===c?0:(a.avail_in-=c,f.arraySet(s,a.input,a.next_in,c,l),1===a.state.wrap?a.adler=p(a.adler,s,c,l):2===a.state.wrap&&(a.adler=d(a.adler,s,c,l)),a.next_in+=c,a.total_in+=c,c),t.lookahead+=n,t.lookahead+t.insert>=L)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+L-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<L)););}while(t.lookahead<k&&0!==t.strm.avail_in)}function q(t,e){for(var n,r;;){if(t.lookahead<k){if(z(t),t.lookahead<k&&e===c)return M;if(0===t.lookahead)break}if(n=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-k&&(t.match_length=B(t,n)),t.match_length>=L)if(r=u._tr_tally(t,t.strstart-t.match_start,t.match_length-L),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=L){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(R(t,!1),0===t.strm.avail_out))return M}return t.insert=t.strstart<L-1?t.strstart:L-1,e===h?(R(t,!0),0===t.strm.avail_out?I:T):t.last_lit&&(R(t,!1),0===t.strm.avail_out)?M:P}function U(t,e){for(var n,r,i;;){if(t.lookahead<k){if(z(t),t.lookahead<k&&e===c)return M;if(0===t.lookahead)break}if(n=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=L-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-k&&(t.match_length=B(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===L&&4096<t.strstart-t.match_start)&&(t.match_length=L-1)),t.prev_length>=L&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-L,r=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-L),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=L-1,t.strstart++,r&&(R(t,!1),0===t.strm.avail_out))return M}else if(t.match_available){if((r=u._tr_tally(t,0,t.window[t.strstart-1]))&&R(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return M}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<L-1?t.strstart:L-1,e===h?(R(t,!0),0===t.strm.avail_out?I:T):t.last_lit&&(R(t,!1),0===t.strm.avail_out)?M:P}function G(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*x),this.dyn_dtree=new f.Buf16(2*(2*a+1)),this.bl_tree=new f.Buf16(2*(2*s+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(w+1),this.heap=new f.Buf16(2*o+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*o+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=i,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?E:S,t.adler=2===e.wrap?0:1,e.last_flush=c,u._tr_init(e),g):O(t,m)}function W(t){var e,n=H(t);return n===g&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=L-1,e.match_available=0,e.ins_h=0),n}function X(t,e,n,r,i,o){if(!t)return m;var a=1;if(e===y&&(e=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||b<i||n!==v||r<8||15<r||e<0||9<e||o<0||_<o)return O(t,m);8===r&&(r=9);var s=new V;return(t.state=s).strm=t,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+L-1)/L),s.window=new f.Buf8(2*s.w_size),s.head=new f.Buf16(s.hash_size),s.prev=new f.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new f.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,W(t)}l=[new G(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(z(t),0===t.lookahead&&e===c)return M;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,R(t,!1),0===t.strm.avail_out))return M;if(t.strstart-t.block_start>=t.w_size-k&&(R(t,!1),0===t.strm.avail_out))return M}return t.insert=0,e===h?(R(t,!0),0===t.strm.avail_out?I:T):(t.strstart>t.block_start&&(R(t,!1),t.strm.avail_out),M)}),new G(4,4,8,4,q),new G(4,5,16,8,q),new G(4,6,32,32,q),new G(4,4,16,16,U),new G(8,16,32,32,U),new G(8,16,128,128,U),new G(8,32,128,256,U),new G(32,128,258,1024,U),new G(32,258,258,4096,U)],n.deflateInit=function(t,e){return X(t,e,v,15,8,0)},n.deflateInit2=X,n.deflateReset=W,n.deflateResetKeep=H,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?m:(t.state.gzhead=e,g):m},n.deflate=function(t,e){var n,r,i,o;if(!t||!t.state||5<e||e<0)return t?O(t,m):m;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==h)return O(t,0===t.avail_out?-5:m);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===E)if(2===r.wrap)t.adler=0,F(r,31),F(r,139),F(r,8),r.gzhead?(F(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),F(r,255&r.gzhead.time),F(r,r.gzhead.time>>8&255),F(r,r.gzhead.time>>16&255),F(r,r.gzhead.time>>24&255),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(F(r,255&r.gzhead.extra.length),F(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=d(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(F(r,0),F(r,0),F(r,0),F(r,0),F(r,0),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,3),r.status=S);else{var a=v+(r.w_bits-8<<4)<<8;a|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=S,j(r,a),0!==r.strstart&&(j(r,t.adler>>>16),j(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),A(t),i=r.pending,r.pending!==r.pending_buf_size));)F(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),A(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}F(r,o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),A(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}F(r,o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&A(t),r.pending+2<=r.pending_buf_size&&(F(r,255&t.adler),F(r,t.adler>>8&255),t.adler=0,r.status=S)):r.status=S),0!==r.pending){if(A(t),0===t.avail_out)return r.last_flush=-1,g}else if(0===t.avail_in&&N(e)<=N(n)&&e!==h)return O(t,-5);if(666===r.status&&0!==t.avail_in)return O(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==c&&666!==r.status){var s=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(z(t),0===t.lookahead)){if(e===c)return M;break}if(t.match_length=0,n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(R(t,!1),0===t.strm.avail_out))return M}return t.insert=0,e===h?(R(t,!0),0===t.strm.avail_out?I:T):t.last_lit&&(R(t,!1),0===t.strm.avail_out)?M:P}(r,e):3===r.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=C){if(z(t),t.lookahead<=C&&e===c)return M;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=L&&0<t.strstart&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+C;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=C-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=L?(n=u._tr_tally(t,1,t.match_length-L),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(R(t,!1),0===t.strm.avail_out))return M}return t.insert=0,e===h?(R(t,!0),0===t.strm.avail_out?I:T):t.last_lit&&(R(t,!1),0===t.strm.avail_out)?M:P}(r,e):l[r.level].func(r,e);if(s!==I&&s!==T||(r.status=666),s===M||s===I)return 0===t.avail_out&&(r.last_flush=-1),g;if(s===P&&(1===e?u._tr_align(r):5!==e&&(u._tr_stored_block(r,0,0,!1),3===e&&(D(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),A(t),0===t.avail_out))return r.last_flush=-1,g}return e!==h?g:r.wrap<=0?1:(2===r.wrap?(F(r,255&t.adler),F(r,t.adler>>8&255),F(r,t.adler>>16&255),F(r,t.adler>>24&255),F(r,255&t.total_in),F(r,t.total_in>>8&255),F(r,t.total_in>>16&255),F(r,t.total_in>>24&255)):(j(r,t.adler>>>16),j(r,65535&t.adler)),A(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?g:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==E&&69!==e&&73!==e&&91!==e&&103!==e&&e!==S&&666!==e?O(t,m):(t.state=null,e===S?O(t,-3):g):m},n.deflateSetDictionary=function(t,e){var n,r,i,o,a,s,l,u,c=e.length;if(!t||!t.state)return m;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==E||n.lookahead)return m;for(1===o&&(t.adler=p(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(D(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new f.Buf8(n.w_size),f.arraySet(u,e,c-n.w_size,n.w_size,0),e=u,c=n.w_size),a=t.avail_in,s=t.next_in,l=t.input,t.avail_in=c,t.next_in=0,t.input=e,z(n);n.lookahead>=L;){for(r=n.strstart,i=n.lookahead-(L-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+L-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=L-1,z(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=L-1,n.match_available=0,t.next_in=s,t.input=l,t.avail_in=a,n.wrap=o,g},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":566,"./adler32":568,"./crc32":570,"./messages":576,"./trees":577}],572:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],573:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w,L,C,k,E;n=t.state,r=t.next_in,k=t.input,i=r+(t.avail_in-5),o=t.next_out,E=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{d<15&&(p+=k[r++]<<d,d+=8,p+=k[r++]<<d,d+=8),v=g[p&y];e:for(;;){if(p>>>=b=v>>>24,d-=b,0===(b=v>>>16&255))E[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=g[(65535&v)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&v,(b&=15)&&(d<b&&(p+=k[r++]<<d,d+=8),x+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=k[r++]<<d,d+=8,p+=k[r++]<<d,d+=8),v=m[p&_];n:for(;;){if(p>>>=b=v>>>24,d-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=m[(65535&v)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&v,d<(b&=15)&&(p+=k[r++]<<d,(d+=8)<b&&(p+=k[r++]<<d,d+=8)),l<(w+=p&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,d-=b,(b=o-a)<w){if(c<(b=w-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(C=f,(L=0)===h){if(L+=u-b,b<x){for(x-=b;E[o++]=f[L++],--b;);L=o-w,C=E}}else if(h<b){if(L+=u+h-b,(b-=h)<x){for(x-=b;E[o++]=f[L++],--b;);if(L=0,h<x){for(x-=b=h;E[o++]=f[L++],--b;);L=o-w,C=E}}}else if(L+=h-b,b<x){for(x-=b;E[o++]=f[L++],--b;);L=o-w,C=E}for(;2<x;)E[o++]=C[L++],E[o++]=C[L++],E[o++]=C[L++],x-=3;x&&(E[o++]=C[L++],1<x&&(E[o++]=C[L++]))}else{for(L=o-w;E[o++]=E[L++],E[o++]=E[L++],E[o++]=E[L++],2<(x-=3););x&&(E[o++]=E[L++],1<x&&(E[o++]=E[L++]))}break}}break}}while(r<i&&o<s);r-=x=d>>3,p&=(1<<(d-=x<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},{}],574:[function(t,e,n){"use strict";var P=t("../utils/common"),I=t("./adler32"),T=t("./crc32"),O=t("./inffast"),N=t("./inftrees"),D=1,A=2,R=0,F=-2,j=1,r=852,i=592;function B(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new P.Buf16(320),this.work=new P.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=j,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new P.Buf32(r),e.distcode=e.distdyn=new P.Buf32(i),e.sane=1,e.back=-1,R):F}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):F}function l(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?F:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,s(t))):F}function u(t,e){var n,r;return t?(r=new o,(t.state=r).window=null,(n=l(t,e))!==R&&(t.state=null),n):F}var c,h,f=!0;function z(t){if(f){var e;for(c=new P.Buf32(512),h=new P.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(N(D,t.lens,0,288,c,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;N(A,t.lens,0,32,h,0,t.work,{bits:5}),f=!1}t.lencode=c,t.lenbits=9,t.distcode=h,t.distbits=5}function q(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new P.Buf8(o.wsize)),r>=o.wsize?(P.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(i=o.wsize-o.wnext)&&(i=r),P.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(P.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}n.inflateReset=s,n.inflateReset2=l,n.inflateResetKeep=a,n.inflateInit=function(t){return u(t,15)},n.inflateInit2=u,n.inflate=function(t,e){var n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b,x,w,L,C,k,E=0,S=new P.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return F;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,h=s,f=l,L=R;t:for(;;)switch(n.mode){case j:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===u){S[n.check=0]=255&u,S[1]=u>>>8&255,n.check=T(n.check,S,2,0),c=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){t.msg="unknown compression method",n.mode=30;break}if(c-=4,w=8+(15&(u>>>=4)),0===n.wbits)n.wbits=w;else if(w>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<w,t.adler=n.check=1,n.mode=512&u?10:12,c=u=0;break;case 2:for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(n.flags=u,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=T(n.check,S,2,0)),c=u=0,n.mode=3;case 3:for(;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=T(n.check,S,4,0)),c=u=0,n.mode=4;case 4:for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=T(n.check,S,2,0)),c=u=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=T(n.check,S,2,0)),c=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(s<(p=n.length)&&(p=s),p&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),P.arraySet(n.head.extra,r,o,p,w)),512&n.flags&&(n.check=T(n.check,r,p,o)),s-=p,o+=p,n.length-=p),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;for(p=0;w=r[o+p++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w)),w&&p<s;);if(512&n.flags&&(n.check=T(n.check,r,p,o)),s-=p,o+=p,w)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;for(p=0;w=r[o+p++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w)),w&&p<s;);if(512&n.flags&&(n.check=T(n.check,r,p,o)),s-=p,o+=p,w)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}t.adler=n.check=B(u),c=u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=c,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){u>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(z(n),n.mode=20,6===e){u>>>=2,c-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,c=u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(p=n.length){if(s<p&&(p=s),l<p&&(p=l),0===p)break t;P.arraySet(i,r,o,p,a),s-=p,o+=p,l-=p,a+=p,n.length-=p;break}n.mode=12;break;case 17:for(;c<14;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.lens[M[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},L=N(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,L){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;y=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,_=65535&E,!((m=E>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(_<16)u>>>=m,c-=m,n.lens[n.have++]=_;else{if(16===_){for(k=m+2;c<k;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(u>>>=m,c-=m,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}w=n.lens[n.have-1],p=3+(3&u),u>>>=2,c-=2}else if(17===_){for(k=m+3;c<k;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}c-=m,w=0,p=3+(7&(u>>>=m)),u>>>=3,c-=3}else{for(k=m+7;c<k;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}c-=m,w=0,p=11+(127&(u>>>=m)),u>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=w}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C={bits:n.lenbits},L=N(D,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,L){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},L=N(A,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,L){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=s&&258<=l){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=c,O(t,f),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;y=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,_=65535&E,!((m=E>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(y&&0==(240&y)){for(v=m,b=y,x=_;y=(E=n.lencode[x+((u&(1<<v+b)-1)>>v)])>>>16&255,_=65535&E,!(v+(m=E>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=m,c-=m,n.back+=m,n.length=_,0===y){n.mode=26;break}if(32&y){n.back=-1,n.mode=12;break}if(64&y){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&y,n.mode=22;case 22:if(n.extra){for(k=n.extra;c<k;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;y=(E=n.distcode[u&(1<<n.distbits)-1])>>>16&255,_=65535&E,!((m=E>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(0==(240&y)){for(v=m,b=y,x=_;y=(E=n.distcode[x+((u&(1<<v+b)-1)>>v)])>>>16&255,_=65535&E,!(v+(m=E>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=m,c-=m,n.back+=m,64&y){t.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&y,n.mode=24;case 24:if(n.extra){for(k=n.extra;c<k;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(p=f-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}p>n.wnext?(p-=n.wnext,d=n.wsize-p):d=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=i,d=a-n.offset,p=n.length;for(l<p&&(p=l),l-=p,n.length-=p;i[a++]=g[d++],--p;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break t;s--,u|=r[o++]<<c,c+=8}if(f-=l,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?T(n.check,i,f,a-f):I(n.check,i,f,a-f)),f=l,(n.flags?u:B(u))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}c=u=0}n.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return F}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=c,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&q(t,t.output,t.next_out,f-t.avail_out)?(n.mode=31,-4):(h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?T(n.check,i,f,t.next_out-f):I(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||4===e)&&L===R&&(L=-5),L)},n.inflateEnd=function(t){if(!t||!t.state)return F;var e=t.state;return e.window&&(e.window=null),t.state=null,R},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?F:((n.head=e).done=!1,R):F},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?F:11===n.mode&&I(1,e,r,0)!==n.check?-3:q(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,R):F},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":566,"./adler32":568,"./crc32":570,"./inffast":573,"./inftrees":575}],575:[function(t,e,n){"use strict";var D=t("../utils/common"),A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],R=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],j=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,r,i,o,a,s){var l,u,c,h,f,p,d,g,m,y=s.bits,_=0,v=0,b=0,x=0,w=0,L=0,C=0,k=0,E=0,S=0,M=null,P=0,I=new D.Buf16(16),T=new D.Buf16(16),O=null,N=0;for(_=0;_<=15;_++)I[_]=0;for(v=0;v<r;v++)I[e[n+v]]++;for(w=y,x=15;1<=x&&0===I[x];x--);if(x<w&&(w=x),0===x)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<x&&0===I[b];b++);for(w<b&&(w=b),_=k=1;_<=15;_++)if(k<<=1,(k-=I[_])<0)return-1;if(0<k&&(0===t||1!==x))return-1;for(T[1]=0,_=1;_<15;_++)T[_+1]=T[_]+I[_];for(v=0;v<r;v++)0!==e[n+v]&&(a[T[e[n+v]]++]=v);if(0===t?(M=O=a,p=19):1===t?(M=A,P-=257,O=R,N-=257,p=256):(M=F,O=j,p=-1),_=b,f=o,C=v=S=0,c=-1,h=(E=1<<(L=w))-1,1===t&&852<E||2===t&&592<E)return 1;for(;;){for(d=_-C,a[v]<p?(g=0,m=a[v]):a[v]>p?(g=O[N+a[v]],m=M[P+a[v]]):(g=96,m=0),l=1<<_-C,b=u=1<<L;i[f+(S>>C)+(u-=l)]=d<<24|g<<16|m|0,0!==u;);for(l=1<<_-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,v++,0==--I[_]){if(_===x)break;_=e[n+a[v]]}if(w<_&&(S&h)!==c){for(0===C&&(C=w),f+=b,k=1<<(L=_-C);L+C<x&&!((k-=I[L+C])<=0);)L++,k<<=1;if(E+=1<<L,1===t&&852<E||2===t&&592<E)return 1;i[c=S&h]=w<<24|L<<16|f-o|0}}return 0!==S&&(i[f+S]=_-C<<24|64<<16|0),s.bits=w,0}},{"../utils/common":566}],576:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],577:[function(t,e,n){"use strict";var l=t("../utils/common"),s=0,u=1;function r(t){for(var e=t.length;0<=--e;)t[e]=0}var c=0,a=29,h=256,f=h+1+a,p=30,d=19,m=2*f+1,y=15,i=16,g=7,_=256,v=16,b=17,x=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(f+2));r(E);var S=new Array(2*p);r(S);var M=new Array(512);r(M);var P=new Array(256);r(P);var I=new Array(a);r(I);var T,O,N,D=new Array(p);function A(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function R(t){return t<256?M[t]:M[256+(t>>>7)]}function F(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,n){t.bi_valid>i-n?(t.bi_buf|=e<<t.bi_valid&65535,F(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=n-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function B(t,e,n){j(t,n[2*e],n[2*e+1])}function z(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function q(t,e,n){var r,i,o=new Array(y+1),a=0;for(r=1;r<=y;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=z(o[s]++,s))}}function U(t){var e;for(e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<p;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*_]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){8<t.bi_valid?F(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function V(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function H(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&V(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!V(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function W(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?B(t,i,e):(B(t,(o=P[i])+h+1,e),0!==(a=w[o])&&j(t,i-=I[o],a),B(t,o=R(--r),n),0!==(a=L[o])&&j(t,r-=D[o],a)),s<t.last_lit;);B(t,_,e)}function X(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=m,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)H(t,o,n);for(i=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,H(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,g=0;for(o=0;o<=y;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<m;n++)d<(o=l[2*l[2*(r=t.heap[n])+1]+1]+1)&&(o=d,g++),l[2*r+1]=o,u<r||(t.bl_count[o]++,a=0,p<=r&&(a=f[r-p]),s=l[2*r],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==g){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,g-=2}while(0<g);for(o=d;0!==o;o--)for(r=t.bl_count[o];0!==r;)u<(i=t.heap[--n])||(l[2*i+1]!==o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(t,e),q(o,u,t.bl_count)}function Y(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<l&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*v]++):s<=10?t.bl_tree[2*b]++:t.bl_tree[2*x]++,o=i,(s=0)===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function $(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)for(;B(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(B(t,i,t.bl_tree),s--),B(t,v,t.bl_tree),j(t,s-3,2)):s<=10?(B(t,b,t.bl_tree),j(t,s-3,3)):(B(t,x,t.bl_tree),j(t,s-11,7));o=i,(s=0)===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}}r(D);var Z=!1;function Q(t,e,n,r){var i,o,a,s;j(t,(c<<1)+(r?1:0),3),o=e,a=n,s=!0,G(i=t),s&&(F(i,a),F(i,~a)),l.arraySet(i.pending_buf,i.window,o,a,i.pending),i.pending+=a}n._tr_init=function(t){Z||(function(){var t,e,n,r,i,o=new Array(y+1);for(r=n=0;r<a-1;r++)for(I[r]=n,t=0;t<1<<w[r];t++)P[n++]=r;for(P[n-1]=r,r=i=0;r<16;r++)for(D[r]=i,t=0;t<1<<L[r];t++)M[i++]=r;for(i>>=7;r<p;r++)for(D[r]=i<<7,t=0;t<1<<L[r]-7;t++)M[256+i++]=r;for(e=0;e<=y;e++)o[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,o[8]++;for(;t<=255;)E[2*t+1]=9,t++,o[9]++;for(;t<=279;)E[2*t+1]=7,t++,o[7]++;for(;t<=287;)E[2*t+1]=8,t++,o[8]++;for(q(E,f+1,o),t=0;t<p;t++)S[2*t+1]=5,S[2*t]=z(t,5);T=new A(E,w,h+1,f,y),O=new A(S,L,0,p,y),N=new A(new Array(0),C,0,d,g)}(),Z=!0),t.l_desc=new o(t.dyn_ltree,T),t.d_desc=new o(t.dyn_dtree,O),t.bl_desc=new o(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,U(t)},n._tr_stored_block=Q,n._tr_flush_block=function(t,e,n,r){var i,o,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return u;for(e=32;e<h;e++)if(0!==t.dyn_ltree[2*e])return u;return s}(t)),X(t,t.l_desc),X(t,t.d_desc),a=function(t){var e;for(Y(t,t.dyn_ltree,t.l_desc.max_code),Y(t,t.dyn_dtree,t.d_desc.max_code),X(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*k[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?Q(t,e,n,r):4===t.strategy||o===i?(j(t,2+(r?1:0),3),W(t,E,S)):(j(t,4+(r?1:0),3),function(t,e,n,r){var i;for(j(t,e-257,5),j(t,n-1,5),j(t,r-4,4),i=0;i<r;i++)j(t,t.bl_tree[2*k[i]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),W(t,t.dyn_ltree,t.dyn_dtree)),U(t),r&&G(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+h+1)]++,t.dyn_dtree[2*R(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){var e;j(t,2,3),B(t,_,E),16===(e=t).bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":566}],578:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],579:[function(t,e,n){(function(s){"use strict";!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?e.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(t);case 2:return s.nextTick(function(){t.call(null,e)});case 3:return s.nextTick(function(){t.call(null,e,n)});case 4:return s.nextTick(function(){t.call(null,e,n,r)});default:for(i=new Array(a-1),o=0;o<i.length;)i[o++]=arguments[o];return s.nextTick(function(){t.apply(null,i)})}}}:e.exports=s}).call(this,t("_process"))},{_process:580}],580:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],h=!1,f=-1;function p(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=l(p);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new g(t,e)),1!==c.length||h||l(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],581:[function(t,e,n){var r=t("./always")(!1);e.exports=r},{"./always":589}],582:[function(t,e,n){var r=t("./always")(!0);e.exports=r},{"./always":589}],583:[function(t,e,n){e.exports={"@@functional/placeholder":!0}},{}],584:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return Number(t)+Number(e)});e.exports=r},{"./internal/_curry2":686}],585:[function(t,e,n){var o=t("./internal/_concat"),r=t("./internal/_curry1"),a=t("./curryN"),i=r(function(i){return a(i.length,function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],t=Array.prototype.slice.call(arguments,0);return t[0]=function(){var t=n.apply(this,o(arguments,[e,r]));return e+=1,t},i.apply(this,t)})});e.exports=i},{"./curryN":622,"./internal/_concat":681,"./internal/_curry1":685}],586:[function(t,e,n){var o=t("./internal/_concat"),r=t("./internal/_curry3")(function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,i=o(n);return i[r]=t(n[r]),i});e.exports=r},{"./internal/_concat":681,"./internal/_curry3":687}],587:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")(["all"],t("./internal/_xall"),function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xall":723}],588:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./curryN"),o=t("./max"),a=t("./pluck"),s=t("./reduce"),l=r(function(n){return i(s(o,0,a("length",n)),function(){for(var t=0,e=n.length;t<e;){if(!n[t].apply(this,arguments))return!1;t+=1}return!0})});e.exports=l},{"./curryN":622,"./internal/_curry1":685,"./max":774,"./pluck":819,"./reduce":830}],589:[function(t,e,n){var r=t("./internal/_curry1")(function(t){return function(){return t}});e.exports=r},{"./internal/_curry1":685}],590:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t&&e});e.exports=r},{"./internal/_curry2":686}],591:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")(["any"],t("./internal/_xany"),function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xany":724}],592:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./curryN"),o=t("./max"),a=t("./pluck"),s=t("./reduce"),l=r(function(n){return i(s(o,0,a("length",n)),function(){for(var t=0,e=n.length;t<e;){if(n[t].apply(this,arguments))return!0;t+=1}return!1})});e.exports=l},{"./curryN":622,"./internal/_curry1":685,"./max":774,"./pluck":819,"./reduce":830}],593:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_curry2"),o=t("./internal/_reduce"),a=t("./map"),s=i(function(e,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(n):"function"==typeof e?function(t){return e(t)(n(t))}:o(function(t,e){return r(t,a(e,n))},[],e)});e.exports=s},{"./internal/_concat":681,"./internal/_curry2":686,"./internal/_reduce":718,"./map":768}],594:[function(t,e,n){var r=t("./internal/_aperture"),i=t("./internal/_curry2")(t("./internal/_dispatchable")([],t("./internal/_xaperture"),r));e.exports=i},{"./internal/_aperture":673,"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xaperture":725}],595:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_curry2")(function(t,e){return r(e,[t])});e.exports=i},{"./internal/_concat":681,"./internal/_curry2":686}],596:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t.apply(this,e)});e.exports=r},{"./internal/_curry2":686}],597:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./apply"),o=t("./curryN"),a=t("./map"),s=t("./max"),l=t("./pluck"),u=t("./reduce"),c=t("./values"),h=r(function e(t){return t=a(function(t){return"function"==typeof t?t:e(t)},t),o(u(s,0,l("length",c(t))),function(){var e=arguments;return a(function(t){return i(t,e)},t)})});e.exports=h},{"./apply":596,"./curryN":622,"./internal/_curry1":685,"./map":768,"./max":774,"./pluck":819,"./reduce":830,"./values":889}],598:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return e(t)});e.exports=r},{"./internal/_curry2":686}],599:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){var r=t(e),i=t(n);return r<i?-1:i<r?1:0});e.exports=r},{"./internal/_curry3":687}],600:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r});e.exports=r},{"./internal/_curry3":687}],601:[function(t,e,n){var r=t("./internal/_curry3"),s=t("./internal/_has"),l=t("./internal/_isArray"),u=t("./internal/_isInteger"),c=t("./assoc"),h=t("./isNil"),i=r(function t(e,n,r){if(0===e.length)return n;var i=e[0];if(1<e.length){var o=!h(r)&&s(i,r)?r[i]:u(e[1])?[]:{};n=t(Array.prototype.slice.call(e,1),n,o)}if(u(i)&&l(r)){var a=[].concat(r);return a[i]=n,a}return c(i,n,r)});e.exports=i},{"./assoc":600,"./internal/_curry3":687,"./internal/_has":697,"./internal/_isArray":701,"./internal/_isInteger":704,"./isNil":752}],602:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./nAry"),o=r(function(t){return i(2,t)});e.exports=o},{"./internal/_curry1":685,"./nAry":792}],603:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_curry2")(function(t,e){return r(t.length,function(){return t.apply(e,arguments)})});e.exports=i},{"./internal/_arity":674,"./internal/_curry2":686}],604:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isFunction"),o=t("./and"),a=t("./lift"),s=r(function(t,e){return i(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:a(o)(t,e)});e.exports=s},{"./and":590,"./internal/_curry2":686,"./internal/_isFunction":703,"./lift":764}],605:[function(t,e,n){var r=t("./curry")(function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))});e.exports=r},{"./curry":621}],606:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_makeFlat"),a=t("./internal/_xchain"),s=t("./map"),l=r(i(["fantasy-land/chain","chain"],a,function(e,n){return"function"==typeof n?function(t){return e(n(t))(t)}:o(!1)(s(e,n))}));e.exports=l},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_makeFlat":711,"./internal/_xchain":726,"./map":768}],607:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){if(e<t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:e<n?e:n});e.exports=r},{"./internal/_curry3":687}],608:[function(t,e,n){var r=t("./internal/_clone"),i=t("./internal/_curry1")(function(t){return null!=t&&"function"==typeof t.clone?t.clone():r(t,[],[],!0)});e.exports=i},{"./internal/_clone":678,"./internal/_curry1":685}],609:[function(t,e,n){var r=t("./internal/_curry1")(function(n){return function(t,e){return n(t,e)?-1:n(e,t)?1:0}});e.exports=r},{"./internal/_curry1":685}],610:[function(t,e,n){var r=t("./lift")(t("./not"));e.exports=r},{"./lift":764,"./not":795}],611:[function(t,e,n){var r=t("./pipe"),i=t("./reverse");e.exports=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return r.apply(this,i(arguments))}},{"./pipe":816,"./reverse":839}],612:[function(t,e,n){var r=t("./chain"),i=t("./compose"),o=t("./map");e.exports=function(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),e=t.pop();return i(i.apply(this,o(r,t)),e)}},{"./chain":606,"./compose":611,"./map":768}],613:[function(t,e,n){var r=t("./pipeP"),i=t("./reverse");e.exports=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return r.apply(this,i(arguments))}},{"./pipeP":818,"./reverse":839}],614:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isArray"),o=t("./internal/_isFunction"),a=t("./internal/_isString"),s=t("./toString"),l=r(function(t,e){if(i(t)){if(i(e))return t.concat(e);throw new TypeError(s(e)+" is not an array")}if(a(t)){if(a(e))return t+e;throw new TypeError(s(e)+" is not a string")}if(null!=t&&o(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&o(t.concat))return t.concat(e);throw new TypeError(s(t)+' does not have a method named "concat" or "fantasy-land/concat"')});e.exports=l},{"./internal/_curry2":686,"./internal/_isArray":701,"./internal/_isFunction":703,"./internal/_isString":709,"./toString":867}],615:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_curry1"),o=t("./map"),a=t("./max"),s=t("./reduce"),l=i(function(e){var t=s(a,0,o(function(t){return t[0].length},e));return r(t,function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})});e.exports=l},{"./internal/_arity":674,"./internal/_curry1":685,"./map":768,"./max":774,"./reduce":830}],616:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./constructN"),o=r(function(t){return i(t.length,t)});e.exports=o},{"./constructN":617,"./internal/_curry1":685}],617:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./curry"),o=t("./nAry"),a=r(function(t,c){if(10<t)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new c}:i(o(t,function(t,e,n,r,i,o,a,s,l,u){switch(arguments.length){case 1:return new c(t);case 2:return new c(t,e);case 3:return new c(t,e,n);case 4:return new c(t,e,n,r);case 5:return new c(t,e,n,r,i);case 6:return new c(t,e,n,r,i,o);case 7:return new c(t,e,n,r,i,o,a);case 8:return new c(t,e,n,r,i,o,a,s);case 9:return new c(t,e,n,r,i,o,a,s,l);case 10:return new c(t,e,n,r,i,o,a,s,l,u)}}))});e.exports=a},{"./curry":621,"./internal/_curry2":686,"./nAry":792}],618:[function(t,e,n){var r=t("./internal/_contains"),i=t("./internal/_curry2")(r);e.exports=i},{"./internal/_contains":682,"./internal/_curry2":686}],619:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_map"),o=t("./curryN"),a=t("./max"),s=t("./pluck"),l=t("./reduce"),u=r(function(t,r){return o(l(a,0,s("length",r)),function(){var e=arguments,n=this;return t.apply(n,i(function(t){return t.apply(n,e)},r))})});e.exports=u},{"./curryN":622,"./internal/_curry2":686,"./internal/_map":712,"./max":774,"./pluck":819,"./reduce":830}],620:[function(t,e,n){var r=t("./reduceBy")(function(t,e){return t+1},0);e.exports=r},{"./reduceBy":831}],621:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./curryN"),o=r(function(t){return i(t.length,t)});e.exports=o},{"./curryN":622,"./internal/_curry1":685}],622:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_curry1"),o=t("./internal/_curry2"),a=t("./internal/_curryN"),s=o(function(t,e){return 1===t?i(e):r(t,a(t,[],e))});e.exports=s},{"./internal/_arity":674,"./internal/_curry1":685,"./internal/_curry2":686,"./internal/_curryN":688}],623:[function(t,e,n){var r=t("./add")(-1);e.exports=r},{"./add":584}],624:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return null==e||e!=e?t:e});e.exports=r},{"./internal/_curry2":686}],625:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){var r=t(e),i=t(n);return i<r?-1:r<i?1:0});e.exports=r},{"./internal/_curry3":687}],626:[function(t,e,n){var o=t("./internal/_contains"),r=t("./internal/_curry2")(function(t,e){for(var n=[],r=0,i=t.length;r<i;)o(t[r],e)||o(t[r],n)||(n[n.length]=t[r]),r+=1;return n});e.exports=r},{"./internal/_contains":682,"./internal/_curry2":686}],627:[function(t,e,n){var a=t("./internal/_containsWith"),r=t("./internal/_curry3")(function(t,e,n){for(var r=[],i=0,o=e.length;i<o;)a(t,e[i],n)||a(t,e[i],r)||r.push(e[i]),i+=1;return r});e.exports=r},{"./internal/_containsWith":683,"./internal/_curry3":687}],628:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){var n={};for(var r in e)n[r]=e[r];return delete n[t],n});e.exports=r},{"./internal/_curry2":686}],629:[function(t,e,n){var r=t("./internal/_curry2"),o=t("./internal/_isInteger"),a=t("./assoc"),s=t("./dissoc"),l=t("./remove"),u=t("./update"),i=r(function t(e,n){switch(e.length){case 0:return n;case 1:return o(e[0])?l(e[0],1,n):s(e[0],n);default:var r=e[0],i=Array.prototype.slice.call(e,1);return null==n[r]?n:o(e[0])?u(r,t(i,n[r]),n):a(r,t(i,n[r]),n)}});e.exports=i},{"./assoc":600,"./dissoc":628,"./internal/_curry2":686,"./internal/_isInteger":704,"./remove":836,"./update":887}],630:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t/e});e.exports=r},{"./internal/_curry2":686}],631:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_xdrop"),a=t("./slice"),s=r(i(["drop"],o,function(t,e){return a(Math.max(0,t),1/0,e)}));e.exports=s},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xdrop":727,"./slice":843}],632:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_dropLast"),a=r(i([],t("./internal/_xdropLast"),o));e.exports=a},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_dropLast":690,"./internal/_xdropLast":728}],633:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_dropLastWhile"),a=r(i([],t("./internal/_xdropLastWhile"),o));e.exports=a},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_dropLastWhile":691,"./internal/_xdropLastWhile":729}],634:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./internal/_dispatchable"),o=t("./internal/_xdropRepeatsWith"),a=t("./dropRepeatsWith"),s=t("./equals"),l=r(i([],o(s),a(s)));e.exports=l},{"./dropRepeatsWith":635,"./equals":642,"./internal/_curry1":685,"./internal/_dispatchable":689,"./internal/_xdropRepeatsWith":730}],635:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_xdropRepeatsWith"),a=t("./last"),s=r(i([],o,function(t,e){var n=[],r=1,i=e.length;if(0!==i)for(n[0]=e[0];r<i;)t(a(n),e[r])||(n[n.length]=e[r]),r+=1;return n}));e.exports=s},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xdropRepeatsWith":730,"./last":757}],636:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_xdropWhile"),a=t("./slice"),s=r(i(["dropWhile"],o,function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return a(n,1/0,e)}));e.exports=s},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xdropWhile":731,"./slice":843}],637:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isFunction"),o=t("./lift"),a=t("./or"),s=r(function(t,e){return i(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:o(a)(t,e)});e.exports=s},{"./internal/_curry2":686,"./internal/_isFunction":703,"./lift":764,"./or":803}],638:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./internal/_isArguments"),o=t("./internal/_isArray"),a=t("./internal/_isObject"),s=t("./internal/_isString"),l=r(function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():o(t)?[]:s(t)?"":a(t)?{}:i(t)?function(){return arguments}():void 0});e.exports=l},{"./internal/_curry1":685,"./internal/_isArguments":700,"./internal/_isArray":701,"./internal/_isObject":706,"./internal/_isString":709}],639:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./equals"),o=t("./takeLast"),a=r(function(t,e){return i(o(t.length,e),t)});e.exports=a},{"./equals":642,"./internal/_curry2":686,"./takeLast":858}],640:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./equals"),o=r(function(t,e,n){return i(t(e),t(n))});e.exports=o},{"./equals":642,"./internal/_curry3":687}],641:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./equals"),o=r(function(t,e,n){return i(e[t],n[t])});e.exports=o},{"./equals":642,"./internal/_curry3":687}],642:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_equals"),o=r(function(t,e){return i(t,e,[],[])});e.exports=o},{"./internal/_curry2":686,"./internal/_equals":692}],643:[function(t,e,n){var r=t("./internal/_curry2")(function t(e,n){var r,i,o,a={};for(i in n)o=typeof(r=e[i]),a[i]="function"===o?r(n[i]):r&&"object"===o?t(r,n[i]):n[i];return a});e.exports=r},{"./internal/_curry2":686}],644:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_filter"),a=t("./internal/_isObject"),s=t("./internal/_reduce"),l=t("./internal/_xfilter"),u=t("./keys"),c=r(i(["filter"],l,function(n,r){return a(r)?s(function(t,e){return n(r[e])&&(t[e]=r[e]),t},{},u(r)):o(n,r)}));e.exports=c},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_filter":693,"./internal/_isObject":706,"./internal/_reduce":718,"./internal/_xfilter":733,"./keys":755}],645:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")(["find"],t("./internal/_xfind"),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xfind":734}],646:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")([],t("./internal/_xfindIndex"),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xfindIndex":735}],647:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")([],t("./internal/_xfindLast"),function(t,e){for(var n=e.length-1;0<=n;){if(t(e[n]))return e[n];n-=1}}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xfindLast":736}],648:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")([],t("./internal/_xfindLastIndex"),function(t,e){for(var n=e.length-1;0<=n;){if(t(e[n]))return n;n-=1}return-1}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xfindLastIndex":737}],649:[function(t,e,n){var r=t("./internal/_curry1")(t("./internal/_makeFlat")(!0));e.exports=r},{"./internal/_curry1":685,"./internal/_makeFlat":711}],650:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./curryN"),o=r(function(r){return i(r.length,function(t,e){var n=Array.prototype.slice.call(arguments,0);return n[0]=e,n[1]=t,r.apply(this,n)})});e.exports=o},{"./curryN":622,"./internal/_curry1":685}],651:[function(t,e,n){var r=t("./internal/_checkForMethod"),i=t("./internal/_curry2")(r("forEach",function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e}));e.exports=i},{"./internal/_checkForMethod":677,"./internal/_curry2":686}],652:[function(t,e,n){var r=t("./internal/_curry2"),o=t("./keys"),i=r(function(t,e){for(var n=o(e),r=0;r<n.length;){var i=n[r];t(e[i],i,e),r+=1}return e});e.exports=i},{"./internal/_curry2":686,"./keys":755}],653:[function(t,e,n){var r=t("./internal/_curry1")(function(t){for(var e={},n=0;n<t.length;)e[t[n][0]]=t[n][1],n+=1;return e});e.exports=r},{"./internal/_curry1":685}],654:[function(t,e,n){var r=t("./internal/_checkForMethod"),i=t("./internal/_curry2")(r("groupBy",t("./reduceBy")(function(t,e){return null==t&&(t=[]),t.push(e),t},null)));e.exports=i},{"./internal/_checkForMethod":677,"./internal/_curry2":686,"./reduceBy":831}],655:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=[],r=0,i=e.length;r<i;){for(var o=r+1;o<i&&t(e[o-1],e[o]);)o+=1;n.push(e.slice(r,o)),r=o}return n});e.exports=r},{"./internal/_curry2":686}],656:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return e<t});e.exports=r},{"./internal/_curry2":686}],657:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return e<=t});e.exports=r},{"./internal/_curry2":686}],658:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_has"));e.exports=r},{"./internal/_curry2":686,"./internal/_has":697}],659:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t in e});e.exports=r},{"./internal/_curry2":686}],660:[function(t,e,n){var r=t("./nth")(0);e.exports=r},{"./nth":796}],661:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e});e.exports=r},{"./internal/_curry2":686}],662:[function(t,e,n){var r=t("./internal/_curry1")(t("./internal/_identity"));e.exports=r},{"./internal/_curry1":685,"./internal/_identity":698}],663:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./curryN"),o=r(function(t,e,n){return i(Math.max(t.length,e.length,n.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)})});e.exports=o},{"./curryN":622,"./internal/_curry3":687}],664:[function(t,e,n){var r=t("./add")(1);e.exports=r},{"./add":584}],665:[function(t,e,n){e.exports={},e.exports.F=t("./F"),e.exports.T=t("./T"),e.exports.__=t("./__"),e.exports.add=t("./add"),e.exports.addIndex=t("./addIndex"),e.exports.adjust=t("./adjust"),e.exports.all=t("./all"),e.exports.allPass=t("./allPass"),e.exports.always=t("./always"),e.exports.and=t("./and"),e.exports.any=t("./any"),e.exports.anyPass=t("./anyPass"),e.exports.ap=t("./ap"),e.exports.aperture=t("./aperture"),e.exports.append=t("./append"),e.exports.apply=t("./apply"),e.exports.applySpec=t("./applySpec"),e.exports.applyTo=t("./applyTo"),e.exports.ascend=t("./ascend"),e.exports.assoc=t("./assoc"),e.exports.assocPath=t("./assocPath"),e.exports.binary=t("./binary"),e.exports.bind=t("./bind"),e.exports.both=t("./both"),e.exports.call=t("./call"),e.exports.chain=t("./chain"),e.exports.clamp=t("./clamp"),e.exports.clone=t("./clone"),e.exports.comparator=t("./comparator"),e.exports.complement=t("./complement"),e.exports.compose=t("./compose"),e.exports.composeK=t("./composeK"),e.exports.composeP=t("./composeP"),e.exports.concat=t("./concat"),e.exports.cond=t("./cond"),e.exports.construct=t("./construct"),e.exports.constructN=t("./constructN"),e.exports.contains=t("./contains"),e.exports.converge=t("./converge"),e.exports.countBy=t("./countBy"),e.exports.curry=t("./curry"),e.exports.curryN=t("./curryN"),e.exports.dec=t("./dec"),e.exports.defaultTo=t("./defaultTo"),e.exports.descend=t("./descend"),e.exports.difference=t("./difference"),e.exports.differenceWith=t("./differenceWith"),e.exports.dissoc=t("./dissoc"),e.exports.dissocPath=t("./dissocPath"),e.exports.divide=t("./divide"),e.exports.drop=t("./drop"),e.exports.dropLast=t("./dropLast"),e.exports.dropLastWhile=t("./dropLastWhile"),e.exports.dropRepeats=t("./dropRepeats"),e.exports.dropRepeatsWith=t("./dropRepeatsWith"),e.exports.dropWhile=t("./dropWhile"),e.exports.either=t("./either"),e.exports.empty=t("./empty"),e.exports.endsWith=t("./endsWith"),e.exports.eqBy=t("./eqBy"),e.exports.eqProps=t("./eqProps"),e.exports.equals=t("./equals"),e.exports.evolve=t("./evolve"),e.exports.filter=t("./filter"),e.exports.find=t("./find"),e.exports.findIndex=t("./findIndex"),e.exports.findLast=t("./findLast"),e.exports.findLastIndex=t("./findLastIndex"),e.exports.flatten=t("./flatten"),e.exports.flip=t("./flip"),e.exports.forEach=t("./forEach"),e.exports.forEachObjIndexed=t("./forEachObjIndexed"),e.exports.fromPairs=t("./fromPairs"),e.exports.groupBy=t("./groupBy"),e.exports.groupWith=t("./groupWith"),e.exports.gt=t("./gt"),e.exports.gte=t("./gte"),e.exports.has=t("./has"),e.exports.hasIn=t("./hasIn"),e.exports.head=t("./head"),e.exports.identical=t("./identical"),e.exports.identity=t("./identity"),e.exports.ifElse=t("./ifElse"),e.exports.inc=t("./inc"),e.exports.indexBy=t("./indexBy"),e.exports.indexOf=t("./indexOf"),e.exports.init=t("./init"),e.exports.innerJoin=t("./innerJoin"),e.exports.insert=t("./insert"),e.exports.insertAll=t("./insertAll"),e.exports.intersection=t("./intersection"),e.exports.intersperse=t("./intersperse"),e.exports.into=t("./into"),e.exports.invert=t("./invert"),e.exports.invertObj=t("./invertObj"),e.exports.invoker=t("./invoker"),e.exports.is=t("./is"),e.exports.isEmpty=t("./isEmpty"),e.exports.isNil=t("./isNil"),e.exports.join=t("./join"),e.exports.juxt=t("./juxt"),e.exports.keys=t("./keys"),e.exports.keysIn=t("./keysIn"),e.exports.last=t("./last"),e.exports.lastIndexOf=t("./lastIndexOf"),e.exports.length=t("./length"),e.exports.lens=t("./lens"),e.exports.lensIndex=t("./lensIndex"),e.exports.lensPath=t("./lensPath"),e.exports.lensProp=t("./lensProp"),e.exports.lift=t("./lift"),e.exports.liftN=t("./liftN"),e.exports.lt=t("./lt"),e.exports.lte=t("./lte"),e.exports.map=t("./map"),e.exports.mapAccum=t("./mapAccum"),e.exports.mapAccumRight=t("./mapAccumRight"),e.exports.mapObjIndexed=t("./mapObjIndexed"),e.exports.match=t("./match"),e.exports.mathMod=t("./mathMod"),e.exports.max=t("./max"),e.exports.maxBy=t("./maxBy"),e.exports.mean=t("./mean"),e.exports.median=t("./median"),e.exports.memoize=t("./memoize"),e.exports.memoizeWith=t("./memoizeWith"),e.exports.merge=t("./merge"),e.exports.mergeAll=t("./mergeAll"),e.exports.mergeDeepLeft=t("./mergeDeepLeft"),e.exports.mergeDeepRight=t("./mergeDeepRight"),e.exports.mergeDeepWith=t("./mergeDeepWith"),e.exports.mergeDeepWithKey=t("./mergeDeepWithKey"),e.exports.mergeWith=t("./mergeWith"),e.exports.mergeWithKey=t("./mergeWithKey"),e.exports.min=t("./min"),e.exports.minBy=t("./minBy"),e.exports.modulo=t("./modulo"),e.exports.multiply=t("./multiply"),e.exports.nAry=t("./nAry"),e.exports.negate=t("./negate"),e.exports.none=t("./none"),e.exports.not=t("./not"),e.exports.nth=t("./nth"),e.exports.nthArg=t("./nthArg"),e.exports.o=t("./o"),e.exports.objOf=t("./objOf"),e.exports.of=t("./of"),e.exports.omit=t("./omit"),e.exports.once=t("./once"),e.exports.or=t("./or"),e.exports.over=t("./over"),e.exports.pair=t("./pair"),e.exports.partial=t("./partial"),e.exports.partialRight=t("./partialRight"),e.exports.partition=t("./partition"),e.exports.path=t("./path"),e.exports.pathEq=t("./pathEq"),e.exports.pathOr=t("./pathOr"),e.exports.pathSatisfies=t("./pathSatisfies"),e.exports.pick=t("./pick"),e.exports.pickAll=t("./pickAll"),e.exports.pickBy=t("./pickBy"),e.exports.pipe=t("./pipe"),e.exports.pipeK=t("./pipeK"),e.exports.pipeP=t("./pipeP"),e.exports.pluck=t("./pluck"),e.exports.prepend=t("./prepend"),e.exports.product=t("./product"),e.exports.project=t("./project"),e.exports.prop=t("./prop"),e.exports.propEq=t("./propEq"),e.exports.propIs=t("./propIs"),e.exports.propOr=t("./propOr"),e.exports.propSatisfies=t("./propSatisfies"),e.exports.props=t("./props"),e.exports.range=t("./range"),e.exports.reduce=t("./reduce"),e.exports.reduceBy=t("./reduceBy"),e.exports.reduceRight=t("./reduceRight"),e.exports.reduceWhile=t("./reduceWhile"),e.exports.reduced=t("./reduced"),e.exports.reject=t("./reject"),e.exports.remove=t("./remove"),e.exports.repeat=t("./repeat"),e.exports.replace=t("./replace"),e.exports.reverse=t("./reverse"),e.exports.scan=t("./scan"),e.exports.sequence=t("./sequence"),e.exports.set=t("./set"),e.exports.slice=t("./slice"),e.exports.sort=t("./sort"),e.exports.sortBy=t("./sortBy"),e.exports.sortWith=t("./sortWith"),e.exports.split=t("./split"),e.exports.splitAt=t("./splitAt"),e.exports.splitEvery=t("./splitEvery"),e.exports.splitWhen=t("./splitWhen"),e.exports.startsWith=t("./startsWith"),e.exports.subtract=t("./subtract"),e.exports.sum=t("./sum"),e.exports.symmetricDifference=t("./symmetricDifference"),e.exports.symmetricDifferenceWith=t("./symmetricDifferenceWith"),e.exports.tail=t("./tail"),e.exports.take=t("./take"),e.exports.takeLast=t("./takeLast"),e.exports.takeLastWhile=t("./takeLastWhile"),e.exports.takeWhile=t("./takeWhile"),e.exports.tap=t("./tap"),e.exports.test=t("./test"),e.exports.times=t("./times"),e.exports.toLower=t("./toLower"),e.exports.toPairs=t("./toPairs"),e.exports.toPairsIn=t("./toPairsIn"),e.exports.toString=t("./toString"),e.exports.toUpper=t("./toUpper"),e.exports.transduce=t("./transduce"),e.exports.transpose=t("./transpose"),e.exports.traverse=t("./traverse"),e.exports.trim=t("./trim"),e.exports.tryCatch=t("./tryCatch"),e.exports.type=t("./type"),e.exports.unapply=t("./unapply"),e.exports.unary=t("./unary"),e.exports.uncurryN=t("./uncurryN"),e.exports.unfold=t("./unfold"),e.exports.union=t("./union"),e.exports.unionWith=t("./unionWith"),e.exports.uniq=t("./uniq"),e.exports.uniqBy=t("./uniqBy"),e.exports.uniqWith=t("./uniqWith"),e.exports.unless=t("./unless"),e.exports.unnest=t("./unnest"),e.exports.until=t("./until"),e.exports.update=t("./update"),e.exports.useWith=t("./useWith"),e.exports.values=t("./values"),e.exports.valuesIn=t("./valuesIn"),e.exports.view=t("./view"),e.exports.when=t("./when"),e.exports.where=t("./where"),e.exports.whereEq=t("./whereEq"),e.exports.without=t("./without"),e.exports.xprod=t("./xprod"),e.exports.zip=t("./zip"),e.exports.zipObj=t("./zipObj"),e.exports.zipWith=t("./zipWith")},{"./F":581,"./T":582,"./__":583,"./add":584,"./addIndex":585,"./adjust":586,"./all":587,"./allPass":588,"./always":589,"./and":590,"./any":591,"./anyPass":592,"./ap":593,"./aperture":594,"./append":595,"./apply":596,"./applySpec":597,"./applyTo":598,"./ascend":599,"./assoc":600,"./assocPath":601,"./binary":602,"./bind":603,"./both":604,"./call":605,"./chain":606,"./clamp":607,"./clone":608,"./comparator":609,"./complement":610,"./compose":611,"./composeK":612,"./composeP":613,"./concat":614,"./cond":615,"./construct":616,"./constructN":617,"./contains":618,"./converge":619,"./countBy":620,"./curry":621,"./curryN":622,"./dec":623,"./defaultTo":624,"./descend":625,"./difference":626,"./differenceWith":627,"./dissoc":628,"./dissocPath":629,"./divide":630,"./drop":631,"./dropLast":632,"./dropLastWhile":633,"./dropRepeats":634,"./dropRepeatsWith":635,"./dropWhile":636,"./either":637,"./empty":638,"./endsWith":639,"./eqBy":640,"./eqProps":641,"./equals":642,"./evolve":643,"./filter":644,"./find":645,"./findIndex":646,"./findLast":647,"./findLastIndex":648,"./flatten":649,"./flip":650,"./forEach":651,"./forEachObjIndexed":652,"./fromPairs":653,"./groupBy":654,"./groupWith":655,"./gt":656,"./gte":657,"./has":658,"./hasIn":659,"./head":660,"./identical":661,"./identity":662,"./ifElse":663,"./inc":664,"./indexBy":666,"./indexOf":667,"./init":668,"./innerJoin":669,"./insert":670,"./insertAll":671,"./intersection":744,"./intersperse":745,"./into":746,"./invert":747,"./invertObj":748,"./invoker":749,"./is":750,"./isEmpty":751,"./isNil":752,"./join":753,"./juxt":754,"./keys":755,"./keysIn":756,"./last":757,"./lastIndexOf":758,"./length":759,"./lens":760,"./lensIndex":761,"./lensPath":762,"./lensProp":763,"./lift":764,"./liftN":765,"./lt":766,"./lte":767,"./map":768,"./mapAccum":769,"./mapAccumRight":770,"./mapObjIndexed":771,"./match":772,"./mathMod":773,"./max":774,"./maxBy":775,"./mean":776,"./median":777,"./memoize":778,"./memoizeWith":779,"./merge":780,"./mergeAll":781,"./mergeDeepLeft":782,"./mergeDeepRight":783,"./mergeDeepWith":784,"./mergeDeepWithKey":785,"./mergeWith":786,"./mergeWithKey":787,"./min":788,"./minBy":789,"./modulo":790,"./multiply":791,"./nAry":792,"./negate":793,"./none":794,"./not":795,"./nth":796,"./nthArg":797,"./o":798,"./objOf":799,"./of":800,"./omit":801,"./once":802,"./or":803,"./over":804,"./pair":805,"./partial":806,"./partialRight":807,"./partition":808,"./path":809,"./pathEq":810,"./pathOr":811,"./pathSatisfies":812,"./pick":813,"./pickAll":814,"./pickBy":815,"./pipe":816,"./pipeK":817,"./pipeP":818,"./pluck":819,"./prepend":820,"./product":821,"./project":822,"./prop":823,"./propEq":824,"./propIs":825,"./propOr":826,"./propSatisfies":827,"./props":828,"./range":829,"./reduce":830,"./reduceBy":831,"./reduceRight":832,"./reduceWhile":833,"./reduced":834,"./reject":835,"./remove":836,"./repeat":837,"./replace":838,"./reverse":839,"./scan":840,"./sequence":841,"./set":842,"./slice":843,"./sort":844,"./sortBy":845,"./sortWith":846,"./split":847,"./splitAt":848,"./splitEvery":849,"./splitWhen":850,"./startsWith":851,"./subtract":852,"./sum":853,"./symmetricDifference":854,"./symmetricDifferenceWith":855,"./tail":856,"./take":857,"./takeLast":858,"./takeLastWhile":859,"./takeWhile":860,"./tap":861,"./test":862,"./times":863,"./toLower":864,"./toPairs":865,"./toPairsIn":866,"./toString":867,"./toUpper":868,"./transduce":869,"./transpose":870,"./traverse":871,"./trim":872,"./tryCatch":873,"./type":874,"./unapply":875,"./unary":876,"./uncurryN":877,"./unfold":878,"./union":879,"./unionWith":880,"./uniq":881,"./uniqBy":882,"./uniqWith":883,"./unless":884,"./unnest":885,"./until":886,"./update":887,"./useWith":888,"./values":889,"./valuesIn":890,"./view":891,"./when":892,"./where":893,"./whereEq":894,"./without":895,"./xprod":896,"./zip":897,"./zipObj":898,"./zipWith":899}],666:[function(t,e,n){var r=t("./reduceBy")(function(t,e){return e},null);e.exports=r},{"./reduceBy":831}],667:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_indexOf"),o=t("./internal/_isArray"),a=r(function(t,e){return"function"!=typeof e.indexOf||o(e)?i(e,t,0):e.indexOf(t)});e.exports=a},{"./internal/_curry2":686,"./internal/_indexOf":699,"./internal/_isArray":701}],668:[function(t,e,n){var r=t("./slice")(0,-1);e.exports=r},{"./slice":843}],669:[function(t,e,n){var r=t("./internal/_containsWith"),i=t("./internal/_curry3"),o=t("./internal/_filter"),a=i(function(e,t,n){return o(function(t){return r(e,t,n)},t)});e.exports=a},{"./internal/_containsWith":683,"./internal/_curry3":687,"./internal/_filter":693}],670:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){t=t<n.length&&0<=t?t:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(t,0,e),r});e.exports=r},{"./internal/_curry3":687}],671:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t=t<n.length&&0<=t?t:n.length,[].concat(Array.prototype.slice.call(n,0,t),e,Array.prototype.slice.call(n,t))});e.exports=r},{"./internal/_curry3":687}],672:[function(t,e,n){var a=t("./_contains"),r=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!i(t,!0,this)},t.prototype.has=function(t){return i(t,!1,this)},t}();function i(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?t in n._items[i]||(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var o=t?1:0;return!!n._items[i][o]||(e&&(n._items[i][o]=!0),!1)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?!!a(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return!!n._items[i]||(e&&(n._items[i]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in n._items?!!a(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}e.exports=r},{"./_contains":682}],673:[function(t,e,n){e.exports=function(t,e){for(var n=0,r=e.length-(t-1),i=new Array(0<=r?r:0);n<r;)i[n]=Array.prototype.slice.call(e,n,n+t),n+=1;return i}},{}],674:[function(t,e,n){e.exports=function(t,c){switch(t){case 0:return function(){return c.apply(this,arguments)};case 1:return function(t){return c.apply(this,arguments)};case 2:return function(t,e){return c.apply(this,arguments)};case 3:return function(t,e,n){return c.apply(this,arguments)};case 4:return function(t,e,n,r){return c.apply(this,arguments)};case 5:return function(t,e,n,r,i){return c.apply(this,arguments)};case 6:return function(t,e,n,r,i,o){return c.apply(this,arguments)};case 7:return function(t,e,n,r,i,o,a){return c.apply(this,arguments)};case 8:return function(t,e,n,r,i,o,a,s){return c.apply(this,arguments)};case 9:return function(t,e,n,r,i,o,a,s,l){return c.apply(this,arguments)};case 10:return function(t,e,n,r,i,o,a,s,l,u){return c.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},{}],675:[function(t,e,n){e.exports=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}},{}],676:[function(t,e,n){var r=t("./_objectAssign");e.exports="function"==typeof Object.assign?Object.assign:r},{"./_objectAssign":713}],677:[function(t,e,n){var i=t("./_isArray");e.exports=function(n,r){return function(){var t=arguments.length;if(0===t)return r();var e=arguments[t-1];return i(e)||"function"!=typeof e[n]?r.apply(this,arguments):e[n].apply(e,Array.prototype.slice.call(arguments,0,t-1))}}},{"./_isArray":701}],678:[function(t,e,n){var r=t("./_cloneRegExp"),u=t("../type");e.exports=function i(o,a,s,l){var t=function(t){for(var e=a.length,n=0;n<e;){if(o===a[n])return s[n];n+=1}for(var r in a[n+1]=o,s[n+1]=t,o)t[r]=l?i(o[r],a,s,!0):o[r];return t};switch(u(o)){case"Object":return t({});case"Array":return t([]);case"Date":return new Date(o.valueOf());case"RegExp":return r(o);default:return o}}},{"../type":874,"./_cloneRegExp":679}],679:[function(t,e,n){e.exports=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}},{}],680:[function(t,e,n){e.exports=function(t){return function(){return!t.apply(this,arguments)}}},{}],681:[function(t,e,n){e.exports=function(t,e){var n;e=e||[];var r=(t=t||[]).length,i=e.length,o=[];for(n=0;n<r;)o[o.length]=t[n],n+=1;for(n=0;n<i;)o[o.length]=e[n],n+=1;return o}},{}],682:[function(t,e,n){var r=t("./_indexOf");e.exports=function(t,e){return 0<=r(e,t,0)}},{"./_indexOf":699}],683:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1}},{}],684:[function(t,e,n){var r=t("./_arity"),i=t("./_curry2");e.exports=function(n){return i(function(t,e){return r(Math.max(0,t.length-e.length),function(){return t.apply(this,n(e,arguments))})})}},{"./_arity":674,"./_curry2":686}],685:[function(t,e,n){var r=t("./_isPlaceholder");e.exports=function(n){return function t(e){return 0===arguments.length||r(e)?t:n.apply(this,arguments)}}},{"./_isPlaceholder":707}],686:[function(t,e,n){var i=t("./_curry1"),o=t("./_isPlaceholder");e.exports=function(r){return function t(e,n){switch(arguments.length){case 0:return t;case 1:return o(e)?t:i(function(t){return r(e,t)});default:return o(e)&&o(n)?t:o(e)?i(function(t){return r(t,n)}):o(n)?i(function(t){return r(e,t)}):r(e,n)}}}},{"./_curry1":685,"./_isPlaceholder":707}],687:[function(t,e,n){var a=t("./_curry1"),s=t("./_curry2"),l=t("./_isPlaceholder");e.exports=function(o){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return l(n)?t:s(function(t,e){return o(n,t,e)});case 2:return l(n)&&l(r)?t:l(n)?s(function(t,e){return o(t,r,e)}):l(r)?s(function(t,e){return o(n,t,e)}):a(function(t){return o(n,r,t)});default:return l(n)&&l(r)&&l(i)?t:l(n)&&l(r)?s(function(t,e){return o(t,e,i)}):l(n)&&l(i)?s(function(t,e){return o(t,r,e)}):l(r)&&l(i)?s(function(t,e){return o(n,t,e)}):l(n)?a(function(t){return o(t,r,i)}):l(r)?a(function(t){return o(n,t,i)}):l(i)?a(function(t){return o(n,r,t)}):o(n,r,i)}}}},{"./_curry1":685,"./_curry2":686,"./_isPlaceholder":707}],688:[function(t,e,n){var u=t("./_arity"),c=t("./_isPlaceholder");e.exports=function o(a,s,l){return function(){for(var t=[],e=0,n=a,r=0;r<s.length||e<arguments.length;){var i;r<s.length&&(!c(s[r])||e>=arguments.length)?i=s[r]:(i=arguments[e],e+=1),t[r]=i,c(i)||(n-=1),r+=1}return n<=0?l.apply(this,t):u(n,o(a,t,l))}}},{"./_arity":674,"./_isPlaceholder":707}],689:[function(t,e,n){var a=t("./_isArray"),s=t("./_isTransformer");e.exports=function(r,i,o){return function(){if(0===arguments.length)return o();var t=Array.prototype.slice.call(arguments,0),e=t.pop();if(!a(e)){for(var n=0;n<r.length;){if("function"==typeof e[r[n]])return e[r[n]].apply(e,t);n+=1}if(s(e))return i.apply(null,t)(e)}return o.apply(this,arguments)}}},{"./_isArray":701,"./_isTransformer":710}],690:[function(t,e,n){var r=t("../take");e.exports=function(t,e){return r(t<e.length?e.length-t:0,e)}},{"../take":857}],691:[function(t,e,n){var r=t("../slice");e.exports=function(t,e){for(var n=e.length-1;0<=n&&t(e[n]);)n-=1;return r(0,n+1,e)}},{"../slice":843}],692:[function(t,e,n){var s=t("./_arrayFromIterator"),l=t("./_containsWith"),c=t("./_functionName"),h=t("./_has"),f=t("../identical"),p=t("../keys"),d=t("../type");function g(t,e,n,r){var i=s(t),o=s(e);function a(t,e){return m(t,e,n.slice(),r.slice())}return!l(function(t,e){return!l(a,e,t)},o,i)}function m(t,e,n,r){if(f(t,e))return!0;var i=d(t);if(i!==d(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===c(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!f(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!f(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var o=n.length-1;0<=o;){if(n[o]===t)return r[o]===e;o-=1}switch(i){case"Map":return t.size===e.size&&g(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&g(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=p(t);if(a.length!==p(e).length)return!1;var s=n.concat([t]),l=r.concat([e]);for(o=a.length-1;0<=o;){var u=a[o];if(!h(u,e)||!m(e[u],t[u],s,l))return!1;o-=1}return!0}e.exports=m},{"../identical":661,"../keys":755,"../type":874,"./_arrayFromIterator":675,"./_containsWith":683,"./_functionName":696,"./_has":697}],693:[function(t,e,n){e.exports=function(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i}},{}],694:[function(t,e,n){var i=t("./_forceReduced"),o=t("./_isArrayLike"),a=t("./_reduce"),s=t("./_xfBase");e.exports=function(t){var r,n=(r=t,{"@@transducer/init":s.init,"@@transducer/result":function(t){return r["@@transducer/result"](t)},"@@transducer/step":function(t,e){var n=r["@@transducer/step"](t,e);return n["@@transducer/reduced"]?i(n):n}});return{"@@transducer/init":s.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return o(e)?a(n,t,e):a(n,t,[e])}}}},{"./_forceReduced":695,"./_isArrayLike":702,"./_reduce":718,"./_xfBase":732}],695:[function(t,e,n){e.exports=function(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}},{}],696:[function(t,e,n){e.exports=function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}},{}],697:[function(t,e,n){e.exports=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)}},{}],698:[function(t,e,n){e.exports=function(t){return t}},{}],699:[function(t,e,n){var o=t("../equals");e.exports=function(t,e,n){var r,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(i=t[n])&&1/i===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(i=t[n])&&i!=i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(o(t[n],e))return n;n+=1}return-1}},{"../equals":642}],700:[function(t,e,n){var r=t("./_has"),i=Object.prototype.toString;e.exports=function(){return"[object Arguments]"===i.call(arguments)?function(t){return"[object Arguments]"===i.call(t)}:function(t){return r("callee",t)}}},{"./_has":697}],701:[function(t,e,n){e.exports=Array.isArray||function(t){return null!=t&&0<=t.length&&"[object Array]"===Object.prototype.toString.call(t)}},{}],702:[function(t,e,n){var r=t("./_curry1"),i=t("./_isArray"),o=t("./_isString"),a=r(function(t){return!!i(t)||!!t&&("object"==typeof t&&(!o(t)&&(1===t.nodeType?!!t.length:0===t.length||0<t.length&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))});e.exports=a},{"./_curry1":685,"./_isArray":701,"./_isString":709}],703:[function(t,e,n){e.exports=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],704:[function(t,e,n){e.exports=Number.isInteger||function(t){return t<<0===t}},{}],705:[function(t,e,n){e.exports=function(t){return"[object Number]"===Object.prototype.toString.call(t)}},{}],706:[function(t,e,n){e.exports=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},{}],707:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}},{}],708:[function(t,e,n){e.exports=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{}],709:[function(t,e,n){e.exports=function(t){return"[object String]"===Object.prototype.toString.call(t)}},{}],710:[function(t,e,n){e.exports=function(t){return"function"==typeof t["@@transducer/step"]}},{}],711:[function(t,e,n){var u=t("./_isArrayLike");e.exports=function(l){return function t(e){for(var n,r,i,o=[],a=0,s=e.length;a<s;){if(u(e[a]))for(i=0,r=(n=l?t(e[a]):e[a]).length;i<r;)o[o.length]=n[i],i+=1;else o[o.length]=e[a];a+=1}return o}}},{"./_isArrayLike":702}],712:[function(t,e,n){e.exports=function(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}},{}],713:[function(t,e,n){var a=t("./_has");e.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var o in i)a(o,i)&&(e[o]=i[o]);n+=1}return e}},{"./_has":697}],714:[function(t,e,n){e.exports=function(t){return[t]}},{}],715:[function(t,e,n){e.exports=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}}},{}],716:[function(t,e,n){e.exports=function(t,n){return function(){var e=this;return t.apply(e,arguments).then(function(t){return n.call(e,t)})}}},{}],717:[function(t,e,n){e.exports=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}},{}],718:[function(t,e,n){var r=t("./_isArrayLike"),i=t("./_xwrap"),o=t("../bind");function a(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function s(t,e,n,r){return t["@@transducer/result"](n[r](o(t["@@transducer/step"],t),e))}var l="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";e.exports=function(t,e,n){if("function"==typeof t&&(t=i(t)),r(n))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return s(t,e,n,"fantasy-land/reduce");if(null!=n[l])return a(t,e,n[l]());if("function"==typeof n.next)return a(t,e,n);if("function"==typeof n.reduce)return s(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}},{"../bind":603,"./_isArrayLike":702,"./_xwrap":743}],719:[function(t,e,n){e.exports=function(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}},{}],720:[function(t,e,n){var r=t("./_assign"),i=t("./_identity"),o=t("./_isArrayLike"),a=t("./_isTransformer"),s=t("../objOf"),l={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":i},u={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":i},c={"@@transducer/init":Object,"@@transducer/step":function(t,e){return r(t,o(e)?s(e[0],e[1]):e)},"@@transducer/result":i};e.exports=function(t){if(a(t))return t;if(o(t))return l;if("string"==typeof t)return u;if("object"==typeof t)return c;throw new Error("Cannot create transformer for "+t)}},{"../objOf":799,"./_assign":676,"./_identity":698,"./_isArrayLike":702,"./_isTransformer":710}],721:[function(t,e,n){var r=function(t){return(t<10?"0":"")+t},i="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+r(t.getUTCMonth()+1)+"-"+r(t.getUTCDate())+"T"+r(t.getUTCHours())+":"+r(t.getUTCMinutes())+":"+r(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};e.exports=i},{}],722:[function(t,e,n){var a=t("./_contains"),s=t("./_map"),l=t("./_quote"),u=t("./_toISOString"),c=t("../keys"),h=t("../reject");e.exports=function n(r,i){var o=function(t){var e=i.concat([r]);return a(t,e)?"<Circular>":n(t,e)},t=function(e,t){return s(function(t){return l(t)+": "+o(e[t])},t.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+s(o,r).join(", ")+"))";case"[object Array]":return"["+s(o,r).concat(t(r,h(function(t){return/^\d+$/.test(t)},c(r)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof r?"new Boolean("+o(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?o(NaN):l(u(r)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof r?"new Number("+o(r.valueOf())+")":1/r==-1/0?"-0":r.toString(10);case"[object String]":return"object"==typeof r?"new String("+o(r.valueOf())+")":l(r);case"[object Undefined]":return"undefined";default:if("function"==typeof r.toString){var e=r.toString();if("[object Object]"!==e)return e}return"{"+t(r,c(r)).join(", ")+"}"}}},{"../keys":755,"../reject":835,"./_contains":682,"./_map":712,"./_quote":717,"./_toISOString":721}],723:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduced"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=i(this.xf["@@transducer/step"](t,!1))),t},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduced":719,"./_xfBase":732}],724:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduced"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=i(this.xf["@@transducer/step"](t,!0))),t},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduced":719,"./_xfBase":732}],725:[function(t,e,n){var r=t("./_concat"),i=t("./_curry2"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return r(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}(),s=i(function(t,e){return new a(t,e)});e.exports=s},{"./_concat":681,"./_curry2":686,"./_xfBase":732}],726:[function(t,e,n){var r=t("./_curry2"),i=t("./_flatCat"),o=t("../map"),a=r(function(t,e){return o(t,i(e))});e.exports=a},{"../map":768,"./_curry2":686,"./_flatCat":694}],727:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){return 0<this.n?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],728:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],729:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduce"),o=t("./_xfBase"),a=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=i(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduce":718,"./_xfBase":732}],730:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],731:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],732:[function(t,e,n){e.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}}},{}],733:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],734:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduced"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=i(this.xf["@@transducer/step"](t,e))),t},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduced":719,"./_xfBase":732}],735:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduced"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=i(this.xf["@@transducer/step"](t,this.idx))),t},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduced":719,"./_xfBase":732}],736:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],737:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],738:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],739:[function(t,e,n){var r=t("./_curryN"),i=t("./_has"),o=t("./_xfBase"),a=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(i(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}(),s=r(4,[],function(t,e,n,r){return new a(t,e,n,r)});e.exports=s},{"./_curryN":688,"./_has":697,"./_xfBase":732}],740:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduced"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=o.result,t.prototype["@@transducer/step"]=function(t,e){this.i+=1;var n=0===this.n?t:this.xf["@@transducer/step"](t,e);return 0<=this.n&&this.i>=this.n?i(n):n},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduced":719,"./_xfBase":732}],741:[function(t,e,n){var r=t("./_curry2"),i=t("./_reduced"),o=t("./_xfBase"),a=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=o.init,t.prototype["@@transducer/result"]=o.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):i(t)},t}(),s=r(function(t,e){return new a(t,e)});e.exports=s},{"./_curry2":686,"./_reduced":719,"./_xfBase":732}],742:[function(t,e,n){var r=t("./_curry2"),i=t("./_xfBase"),o=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e),this.xf["@@transducer/step"](t,e)},t}(),a=r(function(t,e){return new o(t,e)});e.exports=a},{"./_curry2":686,"./_xfBase":732}],743:[function(t,e,n){var r=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();e.exports=function(t){return new r(t)}},{}],744:[function(t,e,n){var i=t("./internal/_contains"),r=t("./internal/_curry2"),o=t("./internal/_filter"),a=t("./flip"),s=t("./uniq"),l=r(function(t,e){var n,r;return t.length>e.length?(n=t,r=e):(n=e,r=t),s(o(a(i)(n),r))});e.exports=l},{"./flip":650,"./internal/_contains":682,"./internal/_curry2":686,"./internal/_filter":693,"./uniq":881}],745:[function(t,e,n){var r=t("./internal/_checkForMethod"),i=t("./internal/_curry2")(r("intersperse",function(t,e){for(var n=[],r=0,i=e.length;r<i;)r===i-1?n.push(e[r]):n.push(e[r],t),r+=1;return n}));e.exports=i},{"./internal/_checkForMethod":677,"./internal/_curry2":686}],746:[function(t,e,n){var r=t("./internal/_clone"),i=t("./internal/_curry3"),o=t("./internal/_isTransformer"),a=t("./internal/_reduce"),s=t("./internal/_stepCat"),l=i(function(t,e,n){return o(t)?a(e(t),t["@@transducer/init"](),n):a(e(s(t)),r(t,[],[],!1),n)});e.exports=l},{"./internal/_clone":678,"./internal/_curry3":687,"./internal/_isTransformer":710,"./internal/_reduce":718,"./internal/_stepCat":720}],747:[function(t,e,n){var r=t("./internal/_curry1"),l=t("./internal/_has"),u=t("./keys"),i=r(function(t){for(var e=u(t),n=e.length,r=0,i={};r<n;){var o=e[r],a=t[o],s=l(a,i)?i[a]:i[a]=[];s[s.length]=o,r+=1}return i});e.exports=i},{"./internal/_curry1":685,"./internal/_has":697,"./keys":755}],748:[function(t,e,n){var r=t("./internal/_curry1"),a=t("./keys"),i=r(function(t){for(var e=a(t),n=e.length,r=0,i={};r<n;){var o=e[r];i[t[o]]=o,r+=1}return i});e.exports=i},{"./internal/_curry1":685,"./keys":755}],749:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isFunction"),o=t("./curryN"),a=t("./toString"),s=r(function(e,n){return o(e+1,function(){var t=arguments[e];if(null!=t&&i(t[n]))return t[n].apply(t,Array.prototype.slice.call(arguments,0,e));throw new TypeError(a(t)+' does not have a method named "'+n+'"')})});e.exports=s},{"./curryN":622,"./internal/_curry2":686,"./internal/_isFunction":703,"./toString":867}],750:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return null!=e&&e.constructor===t||e instanceof t});e.exports=r},{"./internal/_curry2":686}],751:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./empty"),o=t("./equals"),a=r(function(t){return null!=t&&o(t,i(t))});e.exports=a},{"./empty":638,"./equals":642,"./internal/_curry1":685}],752:[function(t,e,n){var r=t("./internal/_curry1")(function(t){return null==t});e.exports=r},{"./internal/_curry1":685}],753:[function(t,e,n){var r=t("./invoker")(1,"join");e.exports=r},{"./invoker":749}],754:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./converge"),o=r(function(t){return i(function(){return Array.prototype.slice.call(arguments,0)},t)});e.exports=o},{"./converge":619,"./internal/_curry1":685}],755:[function(t,e,n){var r=t("./internal/_curry1"),o=t("./internal/_has"),a=t("./internal/_isArguments"),s=!{toString:null}.propertyIsEnumerable("toString"),l=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],u=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),c=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},i=r("function"!=typeof Object.keys||u?function(t){if(Object(t)!==t)return[];var e,n,r=[],i=u&&a(t);for(e in t)!o(e,t)||i&&"length"===e||(r[r.length]=e);if(s)for(n=l.length-1;0<=n;)o(e=l[n],t)&&!c(r,e)&&(r[r.length]=e),n-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)});e.exports=i},{"./internal/_curry1":685,"./internal/_has":697,"./internal/_isArguments":700}],756:[function(t,e,n){var r=t("./internal/_curry1")(function(t){var e,n=[];for(e in t)n[n.length]=e;return n});e.exports=r},{"./internal/_curry1":685}],757:[function(t,e,n){var r=t("./nth")(-1);e.exports=r},{"./nth":796}],758:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isArray"),o=t("./equals"),a=r(function(t,e){if("function"!=typeof e.lastIndexOf||i(e)){for(var n=e.length-1;0<=n;){if(o(e[n],t))return n;n-=1}return-1}return e.lastIndexOf(t)});e.exports=a},{"./equals":642,"./internal/_curry2":686,"./internal/_isArray":701}],759:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./internal/_isNumber"),o=r(function(t){return null!=t&&i(t.length)?t.length:NaN});e.exports=o},{"./internal/_curry1":685,"./internal/_isNumber":705}],760:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./map"),o=r(function(n,r){return function(t){return function(e){return i(function(t){return r(t,e)},t(n(e)))}}});e.exports=o},{"./internal/_curry2":686,"./map":768}],761:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./lens"),o=t("./nth"),a=t("./update"),s=r(function(t){return i(o(t),a(t))});e.exports=s},{"./internal/_curry1":685,"./lens":760,"./nth":796,"./update":887}],762:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./assocPath"),o=t("./lens"),a=t("./path"),s=r(function(t){return o(a(t),i(t))});e.exports=s},{"./assocPath":601,"./internal/_curry1":685,"./lens":760,"./path":809}],763:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./assoc"),o=t("./lens"),a=t("./prop"),s=r(function(t){return o(a(t),i(t))});e.exports=s},{"./assoc":600,"./internal/_curry1":685,"./lens":760,"./prop":823}],764:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./liftN"),o=r(function(t){return i(t.length,t)});e.exports=o},{"./internal/_curry1":685,"./liftN":765}],765:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_reduce"),o=t("./ap"),a=t("./curryN"),s=t("./map"),l=r(function(t,e){var n=a(t,e);return a(t,function(){return i(o,s(n,arguments[0]),Array.prototype.slice.call(arguments,1))})});e.exports=l},{"./ap":593,"./curryN":622,"./internal/_curry2":686,"./internal/_reduce":718,"./map":768}],766:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t<e});e.exports=r},{"./internal/_curry2":686}],767:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t<=e});e.exports=r},{"./internal/_curry2":686}],768:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_map"),a=t("./internal/_reduce"),s=t("./internal/_xmap"),l=t("./curryN"),u=t("./keys"),c=r(i(["fantasy-land/map","map"],s,function(n,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return l(r.length,function(){return n.call(this,r.apply(this,arguments))});case"[object Object]":return a(function(t,e){return t[e]=n(r[e]),t},{},u(r));default:return o(n,r)}}));e.exports=c},{"./curryN":622,"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_map":712,"./internal/_reduce":718,"./internal/_xmap":738,"./keys":755}],769:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){for(var r=0,i=n.length,o=[],a=[e];r<i;)a=t(a[0],n[r]),o[r]=a[1],r+=1;return[a[0],o]});e.exports=r},{"./internal/_curry3":687}],770:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){for(var r=n.length-1,i=[],o=[e];0<=r;)o=t(n[r],o[0]),i[r]=o[1],r-=1;return[i,o[0]]});e.exports=r},{"./internal/_curry3":687}],771:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_reduce"),o=t("./keys"),a=r(function(n,r){return i(function(t,e){return t[e]=n(r[e],e,r),t},{},o(r))});e.exports=a},{"./internal/_curry2":686,"./internal/_reduce":718,"./keys":755}],772:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return e.match(t)||[]});e.exports=r},{"./internal/_curry2":686}],773:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isInteger"),o=r(function(t,e){return i(t)?!i(e)||e<1?NaN:(t%e+e)%e:NaN});e.exports=o},{"./internal/_curry2":686,"./internal/_isInteger":704}],774:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t<e?e:t});e.exports=r},{"./internal/_curry2":686}],775:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t(n)>t(e)?n:e});e.exports=r},{"./internal/_curry3":687}],776:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./sum"),o=r(function(t){return i(t)/t.length});e.exports=o},{"./internal/_curry1":685,"./sum":853}],777:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./mean"),o=r(function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return i(Array.prototype.slice.call(t,0).sort(function(t,e){return t<e?-1:e<t?1:0}).slice(r,r+n))});e.exports=o},{"./internal/_curry1":685,"./mean":776}],778:[function(t,e,n){var r=t("./memoizeWith"),i=t("./toString"),o=r(function(){return i(arguments)});e.exports=o},{"./memoizeWith":779,"./toString":867}],779:[function(t,e,n){var i=t("./internal/_arity"),r=t("./internal/_curry2"),o=t("./internal/_has"),a=r(function(e,n){var r={};return i(n.length,function(){var t=e.apply(this,arguments);return o(t,r)||(r[t]=n.apply(this,arguments)),r[t]})});e.exports=a},{"./internal/_arity":674,"./internal/_curry2":686,"./internal/_has":697}],780:[function(t,e,n){var r=t("./internal/_assign"),i=t("./internal/_curry2")(function(t,e){return r({},t,e)});e.exports=i},{"./internal/_assign":676,"./internal/_curry2":686}],781:[function(t,e,n){var r=t("./internal/_assign"),i=t("./internal/_curry1")(function(t){return r.apply(null,[{}].concat(t))});e.exports=i},{"./internal/_assign":676,"./internal/_curry1":685}],782:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./mergeDeepWithKey"),o=r(function(t,e){return i(function(t,e,n){return e},t,e)});e.exports=o},{"./internal/_curry2":686,"./mergeDeepWithKey":785}],783:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./mergeDeepWithKey"),o=r(function(t,e){return i(function(t,e,n){return n},t,e)});e.exports=o},{"./internal/_curry2":686,"./mergeDeepWithKey":785}],784:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./mergeDeepWithKey"),o=r(function(r,t,e){return i(function(t,e,n){return r(e,n)},t,e)});e.exports=o},{"./internal/_curry3":687,"./mergeDeepWithKey":785}],785:[function(t,e,n){var r=t("./internal/_curry3"),o=t("./internal/_isObject"),a=t("./mergeWithKey"),i=r(function r(i,t,e){return a(function(t,e,n){return o(e)&&o(n)?r(i,e,n):i(t,e,n)},t,e)});e.exports=i},{"./internal/_curry3":687,"./internal/_isObject":706,"./mergeWithKey":787}],786:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./mergeWithKey"),o=r(function(r,t,e){return i(function(t,e,n){return r(e,n)},t,e)});e.exports=o},{"./internal/_curry3":687,"./mergeWithKey":787}],787:[function(t,e,n){var r=t("./internal/_curry3"),o=t("./internal/_has"),i=r(function(t,e,n){var r,i={};for(r in e)o(r,e)&&(i[r]=o(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)o(r,n)&&!o(r,i)&&(i[r]=n[r]);return i});e.exports=i},{"./internal/_curry3":687,"./internal/_has":697}],788:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return e<t?e:t});e.exports=r},{"./internal/_curry2":686}],789:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t(n)<t(e)?n:e});e.exports=r},{"./internal/_curry3":687}],790:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t%e});e.exports=r},{"./internal/_curry2":686}],791:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t*e});e.exports=r},{"./internal/_curry2":686}],792:[function(t,e,n){var r=t("./internal/_curry2")(function(t,c){switch(t){case 0:return function(){return c.call(this)};case 1:return function(t){return c.call(this,t)};case 2:return function(t,e){return c.call(this,t,e)};case 3:return function(t,e,n){return c.call(this,t,e,n)};case 4:return function(t,e,n,r){return c.call(this,t,e,n,r)};case 5:return function(t,e,n,r,i){return c.call(this,t,e,n,r,i)};case 6:return function(t,e,n,r,i,o){return c.call(this,t,e,n,r,i,o)};case 7:return function(t,e,n,r,i,o,a){return c.call(this,t,e,n,r,i,o,a)};case 8:return function(t,e,n,r,i,o,a,s){return c.call(this,t,e,n,r,i,o,a,s)};case 9:return function(t,e,n,r,i,o,a,s,l){return c.call(this,t,e,n,r,i,o,a,s,l)};case 10:return function(t,e,n,r,i,o,a,s,l,u){return c.call(this,t,e,n,r,i,o,a,s,l,u)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}});e.exports=r},{"./internal/_curry2":686}],793:[function(t,e,n){var r=t("./internal/_curry1")(function(t){return-t});e.exports=r},{"./internal/_curry1":685}],794:[function(t,e,n){var r=t("./internal/_complement"),i=t("./internal/_curry2")(r(t("./internal/_dispatchable")(["any"],t("./internal/_xany"),t("./any"))));e.exports=i},{"./any":591,"./internal/_complement":680,"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xany":724}],795:[function(t,e,n){var r=t("./internal/_curry1")(function(t){return!t});e.exports=r},{"./internal/_curry1":685}],796:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isString"),o=r(function(t,e){var n=t<0?e.length+t:t;return i(e)?e.charAt(n):e[n]});e.exports=o},{"./internal/_curry2":686,"./internal/_isString":709}],797:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./curryN"),o=t("./nth"),a=r(function(t){return i(t<0?1:t+1,function(){return o(t,arguments)})});e.exports=a},{"./curryN":622,"./internal/_curry1":685,"./nth":796}],798:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t(e(n))});e.exports=r},{"./internal/_curry3":687}],799:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){var n={};return n[t]=e,n});e.exports=r},{"./internal/_curry2":686}],800:[function(t,e,n){var r=t("./internal/_curry1")(t("./internal/_of"));e.exports=r},{"./internal/_curry1":685,"./internal/_of":714}],801:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n={},r={},i=0,o=t.length;i<o;)i+=r[t[i]]=1;for(var a in e)r.hasOwnProperty(a)||(n[a]=e[a]);return n});e.exports=r},{"./internal/_curry2":686}],802:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_curry1")(function(t){var e,n=!1;return r(t.length,function(){return n?e:(n=!0,e=t.apply(this,arguments))})});e.exports=i},{"./internal/_arity":674,"./internal/_curry1":685}],803:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return t||e});e.exports=r},{"./internal/_curry2":686}],804:[function(t,e,n){var r=function(e){return{value:e,map:function(t){return r(t(e))}}},i=t("./internal/_curry3")(function(t,e,n){return t(function(t){return r(e(t))})(n).value});e.exports=i},{"./internal/_curry3":687}],805:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return[t,e]});e.exports=r},{"./internal/_curry2":686}],806:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_createPartialApplicator")(r);e.exports=i},{"./internal/_concat":681,"./internal/_createPartialApplicator":684}],807:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_createPartialApplicator")(t("./flip")(r));e.exports=i},{"./flip":650,"./internal/_concat":681,"./internal/_createPartialApplicator":684}],808:[function(t,e,n){var r=t("./filter"),i=t("./juxt")([r,t("./reject")]);e.exports=i},{"./filter":644,"./juxt":754,"./reject":835}],809:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n});e.exports=r},{"./internal/_curry2":686}],810:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./equals"),o=t("./path"),a=r(function(t,e,n){return i(o(t,n),e)});e.exports=a},{"./equals":642,"./internal/_curry3":687,"./path":809}],811:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./defaultTo"),o=t("./path"),a=r(function(t,e,n){return i(t,o(e,n))});e.exports=a},{"./defaultTo":624,"./internal/_curry3":687,"./path":809}],812:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./path"),o=r(function(t,e,n){return 0<e.length&&t(i(e,n))});e.exports=o},{"./internal/_curry3":687,"./path":809}],813:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n});e.exports=r},{"./internal/_curry2":686}],814:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n={},r=0,i=t.length;r<i;){var o=t[r];n[o]=e[o],r+=1}return n});e.exports=r},{"./internal/_curry2":686}],815:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n});e.exports=r},{"./internal/_curry2":686}],816:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_pipe"),o=t("./reduce"),a=t("./tail");e.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return r(arguments[0].length,o(i,arguments[0],a(arguments)))}},{"./internal/_arity":674,"./internal/_pipe":715,"./reduce":830,"./tail":856}],817:[function(t,e,n){var r=t("./composeK"),i=t("./reverse");e.exports=function(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return r.apply(this,i(arguments))}},{"./composeK":612,"./reverse":839}],818:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_pipeP"),o=t("./reduce"),a=t("./tail");e.exports=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return r(arguments[0].length,o(i,arguments[0],a(arguments)))}},{"./internal/_arity":674,"./internal/_pipeP":716,"./reduce":830,"./tail":856}],819:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./map"),o=t("./prop"),a=r(function(t,e){return i(o(t),e)});e.exports=a},{"./internal/_curry2":686,"./map":768,"./prop":823}],820:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_curry2")(function(t,e){return r([t],e)});e.exports=i},{"./internal/_concat":681,"./internal/_curry2":686}],821:[function(t,e,n){var r=t("./multiply"),i=t("./reduce")(r,1);e.exports=i},{"./multiply":791,"./reduce":830}],822:[function(t,e,n){var r=t("./internal/_map"),i=t("./identity"),o=t("./pickAll"),a=t("./useWith")(r,[o,i]);e.exports=a},{"./identity":662,"./internal/_map":712,"./pickAll":814,"./useWith":888}],823:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./path"),o=r(function(t,e){return i([t],e)});e.exports=o},{"./internal/_curry2":686,"./path":809}],824:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./equals"),o=r(function(t,e,n){return i(e,n[t])});e.exports=o},{"./equals":642,"./internal/_curry3":687}],825:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./is"),o=r(function(t,e,n){return i(t,n[e])});e.exports=o},{"./internal/_curry3":687,"./is":750}],826:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./internal/_has"),o=r(function(t,e,n){return null!=n&&i(e,n)?n[e]:t});e.exports=o},{"./internal/_curry3":687,"./internal/_has":697}],827:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t(n[e])});e.exports=r},{"./internal/_curry3":687}],828:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r});e.exports=r},{"./internal/_curry2":686}],829:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_isNumber"),o=r(function(t,e){if(!i(t)||!i(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n});e.exports=o},{"./internal/_curry2":686,"./internal/_isNumber":705}],830:[function(t,e,n){var r=t("./internal/_curry3")(t("./internal/_reduce"));e.exports=r},{"./internal/_curry3":687,"./internal/_reduce":718}],831:[function(t,e,n){var r=t("./internal/_curryN"),i=t("./internal/_dispatchable"),a=t("./internal/_has"),s=t("./internal/_reduce"),o=r(4,[],i([],t("./internal/_xreduceBy"),function(r,i,o,t){return s(function(t,e){var n=o(e);return t[n]=r(a(n,t)?t[n]:i,e),t},{},t)}));e.exports=o},{"./internal/_curryN":688,"./internal/_dispatchable":689,"./internal/_has":697,"./internal/_reduce":718,"./internal/_xreduceBy":739}],832:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){for(var r=n.length-1;0<=r;)e=t(n[r],e),r-=1;return e});e.exports=r},{"./internal/_curry3":687}],833:[function(t,e,n){var r=t("./internal/_curryN"),i=t("./internal/_reduce"),o=t("./internal/_reduced"),a=r(4,[],function(n,r,t,e){return i(function(t,e){return n(t,e)?r(t,e):o(t)},t,e)});e.exports=a},{"./internal/_curryN":688,"./internal/_reduce":718,"./internal/_reduced":719}],834:[function(t,e,n){var r=t("./internal/_curry1")(t("./internal/_reduced"));e.exports=r},{"./internal/_curry1":685,"./internal/_reduced":719}],835:[function(t,e,n){var r=t("./internal/_complement"),i=t("./internal/_curry2"),o=t("./filter"),a=i(function(t,e){return o(r(t),e)});e.exports=a},{"./filter":644,"./internal/_complement":680,"./internal/_curry2":686}],836:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){var r=Array.prototype.slice.call(n,0);return r.splice(t,e),r});e.exports=r},{"./internal/_curry3":687}],837:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./always"),o=t("./times"),a=r(function(t,e){return o(i(t),e)});e.exports=a},{"./always":589,"./internal/_curry2":686,"./times":863}],838:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return n.replace(t,e)});e.exports=r},{"./internal/_curry3":687}],839:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./internal/_isString"),o=r(function(t){return i(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});e.exports=o},{"./internal/_curry1":685,"./internal/_isString":709}],840:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){for(var r=0,i=n.length,o=[e];r<i;)e=t(e,n[r]),o[r+1]=e,r+=1;return o});e.exports=r},{"./internal/_curry3":687}],841:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./ap"),o=t("./map"),a=t("./prepend"),s=t("./reduceRight"),l=r(function(t,e){return"function"==typeof e.sequence?e.sequence(t):s(function(t,e){return i(o(a,t),e)},t([]),e)});e.exports=l},{"./ap":593,"./internal/_curry2":686,"./map":768,"./prepend":820,"./reduceRight":832}],842:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./always"),o=t("./over"),a=r(function(t,e,n){return o(t,i(e),n)});e.exports=a},{"./always":589,"./internal/_curry3":687,"./over":804}],843:[function(t,e,n){var r=t("./internal/_checkForMethod"),i=t("./internal/_curry3")(r("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)}));e.exports=i},{"./internal/_checkForMethod":677,"./internal/_curry3":687}],844:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return Array.prototype.slice.call(e,0).sort(t)});e.exports=r},{"./internal/_curry2":686}],845:[function(t,e,n){var r=t("./internal/_curry2")(function(i,t){return Array.prototype.slice.call(t,0).sort(function(t,e){var n=i(t),r=i(e);return n<r?-1:r<n?1:0})});e.exports=r},{"./internal/_curry2":686}],846:[function(t,e,n){var r=t("./internal/_curry2")(function(i,t){return Array.prototype.slice.call(t,0).sort(function(t,e){for(var n=0,r=0;0===n&&r<i.length;)n=i[r](t,e),r+=1;return n})});e.exports=r},{"./internal/_curry2":686}],847:[function(t,e,n){var r=t("./invoker")(1,"split");e.exports=r},{"./invoker":749}],848:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./length"),o=t("./slice"),a=r(function(t,e){return[o(0,t,e),o(t,i(e),e)]});e.exports=a},{"./internal/_curry2":686,"./length":759,"./slice":843}],849:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./slice"),o=r(function(t,e){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(i(r,r+=t,e));return n});e.exports=o},{"./internal/_curry2":686,"./slice":843}],850:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=0,r=e.length,i=[];n<r&&!t(e[n]);)i.push(e[n]),n+=1;return[i,Array.prototype.slice.call(e,n)]});e.exports=r},{"./internal/_curry2":686}],851:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./equals"),o=t("./take"),a=r(function(t,e){return i(o(t.length,e),t)});e.exports=a},{"./equals":642,"./internal/_curry2":686,"./take":857}],852:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){return Number(t)-Number(e)});e.exports=r},{"./internal/_curry2":686}],853:[function(t,e,n){var r=t("./add"),i=t("./reduce")(r,0);e.exports=i},{"./add":584,"./reduce":830}],854:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./concat"),o=t("./difference"),a=r(function(t,e){return i(o(t,e),o(e,t))});e.exports=a},{"./concat":614,"./difference":626,"./internal/_curry2":686}],855:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./concat"),o=t("./differenceWith"),a=r(function(t,e,n){return i(o(t,e,n),o(t,n,e))});e.exports=a},{"./concat":614,"./differenceWith":627,"./internal/_curry3":687}],856:[function(t,e,n){var r=t("./internal/_checkForMethod"),i=t("./internal/_curry1")(r("tail",t("./slice")(1,1/0)));e.exports=i},{"./internal/_checkForMethod":677,"./internal/_curry1":685,"./slice":843}],857:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_xtake"),a=t("./slice"),s=r(i(["take"],o,function(t,e){return a(0,t<0?1/0:t,e)}));e.exports=s},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xtake":740,"./slice":843}],858:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./drop"),o=r(function(t,e){return i(0<=t?e.length-t:0,e)});e.exports=o},{"./drop":631,"./internal/_curry2":686}],859:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./slice"),o=r(function(t,e){for(var n=e.length-1;0<=n&&t(e[n]);)n-=1;return i(n+1,1/0,e)});e.exports=o},{"./internal/_curry2":686,"./slice":843}],860:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_dispatchable"),o=t("./internal/_xtakeWhile"),a=t("./slice"),s=r(i(["takeWhile"],o,function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return a(0,n,e)}));e.exports=s},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xtakeWhile":741,"./slice":843}],861:[function(t,e,n){var r=t("./internal/_curry2")(t("./internal/_dispatchable")([],t("./internal/_xtap"),function(t,e){return t(e),e}));e.exports=r},{"./internal/_curry2":686,"./internal/_dispatchable":689,"./internal/_xtap":742}],862:[function(t,e,n){var r=t("./internal/_cloneRegExp"),i=t("./internal/_curry2"),o=t("./internal/_isRegExp"),a=t("./toString"),s=i(function(t,e){if(!o(t))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+a(t));return r(t).test(e)});e.exports=s},{"./internal/_cloneRegExp":679,"./internal/_curry2":686,"./internal/_isRegExp":708,"./toString":867}],863:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){var n,r=Number(e),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=t(i),i+=1;return n});e.exports=r},{"./internal/_curry2":686}],864:[function(t,e,n){var r=t("./invoker")(0,"toLowerCase");e.exports=r},{"./invoker":749}],865:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./internal/_has"),o=r(function(t){var e=[];for(var n in t)i(n,t)&&(e[e.length]=[n,t[n]]);return e});e.exports=o},{"./internal/_curry1":685,"./internal/_has":697}],866:[function(t,e,n){var r=t("./internal/_curry1")(function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e});e.exports=r},{"./internal/_curry1":685}],867:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./internal/_toString"),o=r(function(t){return i(t,[])});e.exports=o},{"./internal/_curry1":685,"./internal/_toString":722}],868:[function(t,e,n){var r=t("./invoker")(0,"toUpperCase");e.exports=r},{"./invoker":749}],869:[function(t,e,n){var i=t("./internal/_reduce"),o=t("./internal/_xwrap"),r=t("./curryN")(4,function(t,e,n,r){return i(t("function"==typeof e?o(e):e),n,r)});e.exports=r},{"./curryN":622,"./internal/_reduce":718,"./internal/_xwrap":743}],870:[function(t,e,n){var r=t("./internal/_curry1")(function(t){for(var e=0,n=[];e<t.length;){for(var r=t[e],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;e+=1}return n});e.exports=r},{"./internal/_curry1":685}],871:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./map"),o=t("./sequence"),a=r(function(t,e,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](e,t):o(t,i(e,n))});e.exports=a},{"./internal/_curry3":687,"./map":768,"./sequence":841}],872:[function(t,e,n){var r="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",i=t("./internal/_curry1")("function"==typeof String.prototype.trim&&!r.trim()&&"​".trim()?function(t){return t.trim()}:function(t){var e=new RegExp("^["+r+"]["+r+"]*"),n=new RegExp("["+r+"]["+r+"]*$");return t.replace(e,"").replace(n,"")});e.exports=i},{"./internal/_curry1":685}],873:[function(t,e,n){var r=t("./internal/_arity"),i=t("./internal/_concat"),o=t("./internal/_curry2")(function(t,e){return r(t.length,function(){try{return t.apply(this,arguments)}catch(t){return e.apply(this,i([t],arguments))}})});e.exports=o},{"./internal/_arity":674,"./internal/_concat":681,"./internal/_curry2":686}],874:[function(t,e,n){var r=t("./internal/_curry1")(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});e.exports=r},{"./internal/_curry1":685}],875:[function(t,e,n){var r=t("./internal/_curry1")(function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}});e.exports=r},{"./internal/_curry1":685}],876:[function(t,e,n){var r=t("./internal/_curry1"),i=t("./nAry"),o=r(function(t){return i(1,t)});e.exports=o},{"./internal/_curry1":685,"./nAry":792}],877:[function(t,e,n){var r=t("./internal/_curry2"),a=t("./curryN"),i=r(function(i,o){return a(i,function(){for(var t,e=1,n=o,r=0;e<=i&&"function"==typeof n;)t=e===i?arguments.length:r+n.length,n=n.apply(this,Array.prototype.slice.call(arguments,r,t)),e+=1,r=t;return n})});e.exports=i},{"./curryN":622,"./internal/_curry2":686}],878:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r});e.exports=r},{"./internal/_curry2":686}],879:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_curry2")(t("./compose")(t("./uniq"),r));e.exports=i},{"./compose":611,"./internal/_concat":681,"./internal/_curry2":686,"./uniq":881}],880:[function(t,e,n){var r=t("./internal/_concat"),i=t("./internal/_curry3"),o=t("./uniqWith"),a=i(function(t,e,n){return o(t,r(e,n))});e.exports=a},{"./internal/_concat":681,"./internal/_curry3":687,"./uniqWith":883}],881:[function(t,e,n){var r=t("./identity"),i=t("./uniqBy")(r);e.exports=i},{"./identity":662,"./uniqBy":882}],882:[function(t,e,n){var s=t("./internal/_Set"),r=t("./internal/_curry2")(function(t,e){for(var n,r,i=new s,o=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&o.push(r),a+=1;return o});e.exports=r},{"./internal/_Set":672,"./internal/_curry2":686}],883:[function(t,e,n){var a=t("./internal/_containsWith"),r=t("./internal/_curry2")(function(t,e){for(var n,r=0,i=e.length,o=[];r<i;)n=e[r],a(t,n,o)||(o[o.length]=n),r+=1;return o});e.exports=r},{"./internal/_containsWith":683,"./internal/_curry2":686}],884:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t(n)?n:e(n)});e.exports=r},{"./internal/_curry3":687}],885:[function(t,e,n){var r=t("./internal/_identity"),i=t("./chain")(r);e.exports=i},{"./chain":606,"./internal/_identity":698}],886:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){for(var r=n;!t(r);)r=e(r);return r});e.exports=r},{"./internal/_curry3":687}],887:[function(t,e,n){var r=t("./internal/_curry3"),i=t("./adjust"),o=t("./always"),a=r(function(t,e,n){return i(o(e),t,n)});e.exports=a},{"./adjust":586,"./always":589,"./internal/_curry3":687}],888:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./curryN"),o=r(function(n,r){return i(r.length,function(){for(var t=[],e=0;e<r.length;)t.push(r[e].call(this,arguments[e])),e+=1;return n.apply(this,t.concat(Array.prototype.slice.call(arguments,r.length)))})});e.exports=o},{"./curryN":622,"./internal/_curry2":686}],889:[function(t,e,n){var r=t("./internal/_curry1"),o=t("./keys"),i=r(function(t){for(var e=o(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r});e.exports=i},{"./internal/_curry1":685,"./keys":755}],890:[function(t,e,n){var r=t("./internal/_curry1")(function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n});e.exports=r},{"./internal/_curry1":685}],891:[function(t,e,n){var r=function(t){return{value:t,"fantasy-land/map":function(){return this}}},i=t("./internal/_curry2")(function(t,e){return t(r)(e).value});e.exports=i},{"./internal/_curry2":686}],892:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){return t(n)?e(n):n});e.exports=r},{"./internal/_curry3":687}],893:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./internal/_has"),o=r(function(t,e){for(var n in t)if(i(n,t)&&!t[n](e[n]))return!1;return!0});e.exports=o},{"./internal/_curry2":686,"./internal/_has":697}],894:[function(t,e,n){var r=t("./internal/_curry2"),i=t("./equals"),o=t("./map"),a=t("./where"),s=r(function(t,e){return a(o(i,t),e)});e.exports=s},{"./equals":642,"./internal/_curry2":686,"./map":768,"./where":893}],895:[function(t,e,n){var r=t("./internal/_contains"),i=t("./internal/_curry2"),o=t("./flip"),a=t("./reject"),s=i(function(t,e){return a(o(r)(t),e)});e.exports=s},{"./flip":650,"./internal/_contains":682,"./internal/_curry2":686,"./reject":835}],896:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n,r=0,i=t.length,o=e.length,a=[];r<i;){for(n=0;n<o;)a[a.length]=[t[r],e[n]],n+=1;r+=1}return a});e.exports=r},{"./internal/_curry2":686}],897:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n});e.exports=r},{"./internal/_curry2":686}],898:[function(t,e,n){var r=t("./internal/_curry2")(function(t,e){for(var n=0,r=Math.min(t.length,e.length),i={};n<r;)i[t[n]]=e[n],n+=1;return i});e.exports=r},{"./internal/_curry2":686}],899:[function(t,e,n){var r=t("./internal/_curry3")(function(t,e,n){for(var r=[],i=0,o=Math.min(e.length,n.length);i<o;)r[i]=t(e[i],n[i]),i+=1;return r});e.exports=r},{"./internal/_curry3":687}],900:[function(t,e,n){var r,i;r=this,i=function(){"use strict";function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function u(t,e){return t<e?-1:e<t?1:0}var t=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function c(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function p(t,e){y(t,0,t.children.length,e,t)}function y(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];f(i,t.leaf?r(a):a)}return i}function f(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function a(t,e){return t.minY-e.minY}function _(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function g(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function l(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,r,i){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=r)){var a=e+Math.ceil((n-e)/r/2)*r;l=i,function t(e,n,r,i,o){for(;r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[n],f=r,p=i;for(d(e,r,n),0<o(e[i],h)&&d(e,r,i);f<p;){for(d(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;0<o(e[p],h);)p--}0===o(e[r],h)?d(e,r,p):d(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(s=t,a,e||0,n||s.length-1,l||u),o.push(e,a,a,n)}var s,l}return t.prototype.all=function(){return this._all(this.data,[])},t.prototype.search=function(t){var e=this.data,n=[];if(!l(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;l(t,s)&&(e.leaf?n.push(a):h(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},t.prototype.collides=function(t){var e=this.data;if(!l(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(l(t,o)){if(e.leaf||h(t,o))return!0;n.push(i)}}e=n.pop()}return!1},t.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},t.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},t.prototype.clear=function(){return this.data=m([]),this},t.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,o=this.data,a=this.toBBox(t),s=[],l=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],n=l.pop(),i=!0),o.leaf){var u=c(t,o.children,e);if(-1!==u)return o.children.splice(u,1),s.push(o),this._condense(s),this}i||o.leaf||!h(o,a)?r?(n++,o=r.children[n],i=!1):o=null:(s.push(o),l.push(n),n=0,o=(r=o).children[0])}return this},t.prototype.toBBox=function(t){return t},t.prototype.compareMinX=function(t,e){return t.minX-e.minX},t.prototype.compareMinY=function(t,e){return t.minY-e.minY},t.prototype.toJSON=function(){return this.data},t.prototype.fromJSON=function(t){return this.data=t,this},t.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},t.prototype._build=function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return p(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=m([])).leaf=!1,i.height=r;var s=Math.ceil(o/a),l=s*Math.ceil(Math.sqrt(a));v(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var c=Math.min(u+l-1,n);v(t,u,c,s,this.compareMinY);for(var h=u;h<=c;h+=s){var f=Math.min(h+s-1,c);i.children.push(this._build(t,h,f,r-1))}}return p(i,this.toBBox),i},t.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=_(l),c=(h=t,f=l,(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-u);c<o?(o=c,i=u<i?u:i,a=l):c===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var h,f;return e},t.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),f(o,r);0<=e&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},t.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=m(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,p(n,this.toBBox),p(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},t.prototype._splitRoot=function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},t.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,s,l,u,c=1/0,h=1/0,f=e;f<=n-e;f++){var p=y(t,0,f,this.toBBox),d=y(t,f,n,this.toBBox),g=(i=p,o=d,void 0,a=Math.max(i.minX,o.minX),s=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),u=Math.min(i.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,u-s)),m=_(p)+_(d);g<c?(c=g,r=f,h=m<h?m:h):g===c&&m<h&&(h=m,r=f)}return r||n-e},t.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:o,i=t.leaf?this.compareMinY:a;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},t.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=y(t,0,e,i),a=y(t,n-e,n,i),s=g(o)+g(a),l=e;l<n-e;l++){var u=t.children[l];f(o,t.leaf?i(u):u),s+=g(o)}for(var c=n-e-1;e<=c;c--){var h=t.children[c];f(a,t.leaf?i(h):h),s+=g(a)}return s},t.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;0<=r;r--)f(e[r],t)},t.prototype._condense=function(t){for(var e=t.length-1,n=void 0;0<=e;e--)0===t[e].children.length?0<e?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():p(t[e],this.toBBox)},t},"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):(r=r||self).RBush=i()},{}],901:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":902}],902:[function(t,e,n){"use strict";var r=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=h;var o=t("core-util-is");o.inherits=t("inherits");var a=t("./_stream_readable"),s=t("./_stream_writable");o.inherits(h,a);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},{"./_stream_readable":904,"./_stream_writable":906,"core-util-is":416,inherits:493,"process-nextick-args":579}],903:[function(t,e,n){"use strict";e.exports=o;var r=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=t("inherits"),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":905,"core-util-is":416,inherits:493}],904:[function(N,D,t){(function(m,t){"use strict";var y=N("process-nextick-args");D.exports=f;var a,_=N("isarray");f.ReadableState=o;N("events").EventEmitter;var v=function(t,e){return t.listeners(e).length},i=N("./internal/streams/stream"),u=N("safe-buffer").Buffer,c=t.Uint8Array||function(){};var e=N("core-util-is");e.inherits=N("inherits");var n=N("util"),b=void 0;b=n&&n.debuglog?n.debuglog("stream"):function(){};var s,l=N("./internal/streams/BufferList"),r=N("./internal/streams/destroy");e.inherits(f,i);var h=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var n=e instanceof(a=a||N("./_stream_duplex"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=N("string_decoder/").StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function f(t){if(a=a||N("./_stream_duplex"),!(this instanceof f))return new f(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function p(t,e,n,r,i){var o,a,s,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,w(t)}(t,l)):(i||(o=function(t,e){var n;r=e,u.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(l,e)),o?t.emit("error",o):l.objectMode||e&&0<e.length?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===u.prototype||(a=e,e=u.from(a)),r?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):d(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(e=l.decoder.write(e),l.objectMode||0!==e.length?d(t,l,e,!1):C(t,l)):d(t,l,e,!1))):r||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function d(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&w(t)),C(t,e)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),f.prototype.destroy=r.destroy,f.prototype._undestroy=r.undestroy,f.prototype._destroy=function(t,e){this.push(null),e(t)},f.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),n=!0),p(this,t,e,!1,n)},f.prototype.unshift=function(t){return p(this,t,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return s||(s=N("string_decoder/").StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var g=8388608;function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(g<=(n=t)?n=g:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(b("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?y.nextTick(L,t):L(t))}function L(t){b("emit readable"),t.emit("readable"),M(t)}function C(t,e){e.readingMore||(e.readingMore=!0,y.nextTick(k,t,e))}function k(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(b("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function E(t){b("readable nexttick read 0"),t.read(0)}function S(t,e){e.reading||(b("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(b("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(a);break}++r}return e.length-=r,i}(t,e):function(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=o.slice(a);break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function I(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,y.nextTick(T,e,t))}function T(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}f.prototype.read=function(t){b("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return b("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):w(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&I(this),null;var r,i=e.needReadable;return b("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&b("length less than watermark",i=!0),e.ended||e.reading?b("reading or ended",i=!1):i&&(b("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(n,e))),null===(r=0<t?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&I(this)),null!==r&&this.emit("data",r),r},f.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(n,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,b("pipe count=%d opts=%j",i.pipesCount,t);var e=(!t||!1!==t.end)&&n!==m.stdout&&n!==m.stderr?a:g;function o(t,e){b("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,b("cleanup"),n.removeListener("close",p),n.removeListener("finish",d),n.removeListener("drain",l),n.removeListener("error",f),n.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",h),u=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||l())}function a(){b("onend"),n.end()}i.endEmitted?y.nextTick(e):r.once("end",e),n.on("unpipe",o);var s,l=(s=r,function(){var t=s._readableState;b("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&v(s,"data")&&(t.flowing=!0,M(s))});n.on("drain",l);var u=!1;var c=!1;function h(t){b("ondata"),(c=!1)!==n.write(t)||c||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==O(i.pipes,n))&&!u&&(b("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function f(t){b("onerror",t),g(),n.removeListener("error",f),0===v(n,"error")&&n.emit("error",t)}function p(){n.removeListener("finish",d),g()}function d(){b("onfinish"),n.removeListener("close",p),g()}function g(){b("unpipe"),r.unpipe(n)}return r.on("data",h),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?_(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(n,"error",f),n.once("close",p),n.once("finish",d),n.emit("pipe",r),i.flowing||(b("pipe resume"),r.resume()),n},f.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=O(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},f.prototype.addListener=f.prototype.on=function(t,e){var n=i.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this):y.nextTick(E,this))}return n},f.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(b("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,y.nextTick(S,t,e))),this},f.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var n=this,r=this._readableState,i=!1;for(var t in e.on("end",function(){if(b("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),e.on("data",function(t){(b("wrapped data"),r.decoder&&(t=r.decoder.write(t)),r.objectMode&&null==t)||(r.objectMode||t&&t.length)&&(n.push(t)||(i=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<h.length;o++)e.on(h[o],this.emit.bind(this,h[o]));return this._read=function(t){b("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=P}).call(this,N("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":902,"./internal/streams/BufferList":907,"./internal/streams/destroy":908,"./internal/streams/stream":909,_process:580,"core-util-is":416,events:487,inherits:493,isarray:495,"process-nextick-args":579,"safe-buffer":914,"string_decoder/":916,util:86}],905:[function(t,e,n){"use strict";e.exports=o;var r=t("./_stream_duplex"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){s(n,t,e)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":902,"core-util-is":416,inherits:493}],906:[function(L,C,t){(function(t,e,n){"use strict";var y=L("process-nextick-args");function h(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}C.exports=c;var s,f=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?n:y.nextTick;c.WritableState=u;var r=L("core-util-is");r.inherits=L("inherits");var i={deprecate:L("util-deprecate")},o=L("./internal/streams/stream"),_=L("safe-buffer").Buffer,v=e.Uint8Array||function(){};var a,l=L("./internal/streams/destroy");function b(){}function u(t,e){s=s||L("./_stream_duplex"),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(h=n,h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0,e)a=t,s=n,l=r,u=e,c=i,--s.pendingcb,l?(y.nextTick(c,u),y.nextTick(w,a,s),a._writableState.errorEmitted=!0,a.emit("error",u)):(c(u),a._writableState.errorEmitted=!0,a.emit("error",u),w(a,s));else{var o=g(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||d(t,n),r?f(p,t,n,o,i):p(t,n,o,i)}var a,s,l,u,c;var h}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function c(t){if(s=s||L("./_stream_duplex"),!(a.call(c,this)||this instanceof s))return new c(t);this._writableState=new u(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function x(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function p(t,e,n,r){var i,o;n||(i=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),w(t,e)}function d(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)(i[a]=n).isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,x(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new h(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(x(t,e,!1,e.objectMode?1:l.length,l,u,c),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function g(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function m(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),w(e,n)})}function w(t,e){var n,r,i=g(e);return i&&(n=t,(r=e).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,y.nextTick(m,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}r.inherits(c,o),u.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(u.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!a.call(this,t)||this===c&&(t&&t._writableState instanceof u)}})):a=function(t){return t instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(t,e,n){var r,i,o,a,s,l,u,c,h,f,p,d=this._writableState,g=!1,m=!d.objectMode&&(r=t,_.isBuffer(r)||r instanceof v);return m&&!_.isBuffer(t)&&(i=t,t=_.from(i)),"function"==typeof e&&(n=e,e=null),m?e="buffer":e||(e=d.defaultEncoding),"function"!=typeof n&&(n=b),d.ended?(h=this,f=n,p=new Error("write after end"),h.emit("error",p),y.nextTick(f,p)):(m||(o=this,a=d,l=n,c=!(u=!0),null===(s=t)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),y.nextTick(l,c),u=!1),u))&&(d.pendingcb++,g=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=_.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else x(t,e,!1,s,r,i,o);return l}(this,d,m,t,e,n)),g},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||d(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,w(t,e),n&&(e.finished?y.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,L("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},L("timers").setImmediate)},{"./_stream_duplex":902,"./internal/streams/destroy":908,"./internal/streams/stream":909,_process:580,"core-util-is":416,inherits:493,"process-nextick-args":579,"safe-buffer":914,timers:918,"util-deprecate":921}],907:[function(t,e,n){"use strict";var s=t("safe-buffer").Buffer,r=t("util");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,i=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,n=i,r=a,e.copy(n,r),a+=o.data.length,o=o.next;return i},t}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":914,util:86}],908:[function(t,e,n){"use strict";var o=t("process-nextick-args");function a(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(a,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":579}],909:[function(t,e,n){e.exports=t("events").EventEmitter},{events:487}],910:[function(t,e,n){e.exports=t("./readable").PassThrough},{"./readable":911}],911:[function(t,e,n){(((n=e.exports=t("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":902,"./lib/_stream_passthrough.js":903,"./lib/_stream_readable.js":904,"./lib/_stream_transform.js":905,"./lib/_stream_writable.js":906}],912:[function(t,e,n){e.exports=t("./readable").Transform},{"./readable":911}],913:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":906}],914:[function(t,e,n){var r=t("buffer"),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,n),n.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},{buffer:89}],915:[function(t,e,n){e.exports=r;var c=t("events").EventEmitter;function r(){c.call(this)}t("inherits")(r,c),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),(r.Stream=r).prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,e.end())}function s(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(t){if(u(),0===c.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},{events:487,inherits:493,"readable-stream/duplex.js":901,"readable-stream/passthrough.js":910,"readable-stream/readable.js":911,"readable-stream/transform.js":912,"readable-stream/writable.js":913}],916:[function(t,e,n){"use strict";var r=t("safe-buffer").Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}(n.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(0<=i)return 0<i&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=a(e[r])))return 0<i&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=a(e[r])))return 0<i&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":914}],917:[function(e,n,t){(function(u){var c=e("stream");function t(e,n,t){e=e||function(t){this.queue(t)},n=n||function(){this.queue(null)};var r=!1,i=!1,o=[],a=!1,s=new c;function l(){for(;o.length&&!s.paused;){var t=o.shift();if(null===t)return s.emit("end");s.emit("data",t)}}return s.readable=s.writable=!0,s.paused=!1,s.autoDestroy=!(t&&!1===t.autoDestroy),s.write=function(t){return e.call(this,t),!s.paused},s.queue=s.push=function(t){return a||(null===t&&(a=!0),o.push(t),l()),s},s.on("end",function(){s.readable=!1,!s.writable&&s.autoDestroy&&u.nextTick(function(){s.destroy()})}),s.end=function(t){if(!r)return r=!0,arguments.length&&s.write(t),s.writable=!1,n.call(s),!s.readable&&s.autoDestroy&&s.destroy(),s},s.destroy=function(){if(!i)return r=i=!0,o.length=0,s.writable=s.readable=!1,s.emit("close"),s},s.pause=function(){if(!s.paused)return s.paused=!0,s},s.resume=function(){return s.paused&&(s.paused=!1,s.emit("resume")),l(),s.paused||s.emit("drain"),s},s}n.exports=t,t.through=t}).call(this,e("_process"))},{_process:580,stream:915}],918:[function(l,t,u){(function(t,e){var r=l("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function s(t,e){this._id=t,this._clearFn=e}u.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(t){t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},u.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},u._unrefActive=u.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},u.setImmediate="function"==typeof t?t:function(t){var e=a++,n=!(arguments.length<2)&&i.call(arguments,1);return o[e]=!0,r(function(){o[e]&&(n?t.apply(null,n):t.call(null),u.clearImmediate(e))}),e},u.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":580,timers:918}],919:[function(t,e,n){var l=t("jsts");e.exports=function(t,e){var n,r;n="Feature"===t.type?t.geometry:t,r="Feature"===e.type?e.geometry:e;var i=new l.io.GeoJSONReader,o=i.read(JSON.stringify(n)),a=i.read(JSON.stringify(r)),s=o.intersection(a);if(!s.isEmpty())return{type:"Feature",properties:{},geometry:(new l.io.GeoJSONWriter).write(s)}}},{jsts:499}],920:[function(t,e,n){e.exports=function(t,e){if(null===t)throw new Error("No coordinates passed");for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r[r.length-1].length;i++){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1][i]!==r[0][i])throw new Error("First and last Position are not equivalent.")}var o={type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:e};return o.properties||(o.properties={}),o}},{}],921:[function(t,e,n){(function(n){function r(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],922:[function(t,e,n){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);e.exports=function(t,e){var n=e||0,r=i;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}},{}],923:[function(t,e,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);e.exports=function(){return r(i),i}}else{var o=new Array(16);e.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},{}],924:[function(t,e,n){var a=t("./lib/rng"),s=t("./lib/bytesToUuid");e.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;++o)e[r+o]=i[o];return e||s(i)}},{"./lib/bytesToUuid":922,"./lib/rng":923}],925:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=x(t("./BuilderProject")),i=x(t("./BuilderCommon")),o=x(t("./BuilderLayer")),a=x(t("./BuilderLayerDatas")),s=x(t("./RenderShape")),l=x(t("./RenderShape_Point")),u=x(t("./RenderPointBasic")),c=x(t("./RenderLineBasic")),h=x(t("./RenderPolygonBasic")),f=x(t("./RenderPolygonSingle")),p=x(t("./RenderLineSingle")),d=x(t("./RenderPolygonSection")),g=x(t("./RenderLineSection")),m=x(t("./RenderPointSingle")),y=x(t("./RenderPointSection")),_=x(t("./RenderPointHeatmap")),v=x(t("./ui/BuilderUi")),b=x(t("./ProjectManager"));function x(t){return t&&t.__esModule?t:{default:t}}var w={BuilderProject:r.default,BuilderCommon:i.default,BuilderLayer:o.default,BuilderLayerDatas:a.default,RenderShape:s.default,RenderShape_Point:l.default,RenderPointBasic:u.default,RenderLineBasic:c.default,RenderPolygonBasic:h.default,RenderLineSingle:p.default,RenderPolygonSingle:f.default,RenderLineSection:g.default,RenderPolygonSection:d.default,RenderPointSingle:m.default,RenderPointSection:y.default,RenderPointHeatmap:_.default,BuilderUi:v.default,ProjectManager:b.default};n.default=w},{"./BuilderCommon":926,"./BuilderLayer":927,"./BuilderLayerDatas":928,"./BuilderProject":929,"./ProjectManager":930,"./RenderLineBasic":931,"./RenderLineSection":932,"./RenderLineSingle":933,"./RenderPointBasic":934,"./RenderPointHeatmap":935,"./RenderPointSection":936,"./RenderPointSingle":937,"./RenderPolygonBasic":938,"./RenderPolygonSection":939,"./RenderPolygonSingle":940,"./RenderShape":941,"./RenderShape_Point":942,"./ui/BuilderUi":943}],926:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=i(t("leaflet")),u=i(t("../kq"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return r(t,null,[{key:"bindPopup",value:function(t,e){var n="<ul>",r=t.properties;for(var i in r)n+="<li><span>"+i+"</span><span>"+r[i]+"</span></li>";n+="</ul>";var o=a.default.responsivePopup({maxHeight:400,minWidth:400,className:"property-popup",autoPan:!1}).setContent(n);e.bindPopup(o)}},{key:"createPopup",value:function(t,e,n){var r="<ul>",i=e.properties;for(var o in i)r+="<li><span>"+o+"</span><span>"+i[o]+"</span></li>";r+="</ul>";a.default.popup({maxHeight:400,minWidth:400,className:"property-popup"}).setLatLng(n).setContent(r).openOn(t)}},{key:"isValidGeojson",value:function(t){return t.type.toLowerCase()==="FeatureCollection".toLowerCase()}},{key:"addNewLayer",value:(e=regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.default.Builder.BuilderProject.getInstance(),r=n.mapView,u.default.Control.Waiting.show(r._getMap(),"pin","meter"),i=new u.default.Builder.BuilderLayer({dataSource:e},r._getMap()),t.prev=4,t.next=7,i.confirmDataSourceAsync();case 7:o=t.sent,u.default.Control.Waiting.show(r._getMap(),"pin","meter"),setTimeout(function(){try{if(o){u.default.Control.Notification.getInstance().showSuccess("数据请求成功！",0),n.addLayer(i);for(var t=n.setting.layers.getLayers(),e=0;e<t.length;++e)t[e].setPaneZIndex(e+1);i.getRender().addToMapView(r),u.default.Builder.BuilderCommon.refreshLayersContainer(),u.default.Builder.BuilderCommon.refreshAnalysisLayersControl()}else u.default.Control.Notification.getInstance().showError("数据请求失败！",0)}finally{u.default.Control.Waiting.close()}},0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),u.default.Control.Notification.getInstance().showError("数据请求失败！",0);case 15:return t.abrupt("return",i);case 16:case"end":return t.stop()}},t,this,[[4,12]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return n.apply(this,arguments)})},{key:"refreshLayersContainer",value:function(){var t=u.default.Builder.BuilderProject.getInstance(),e=t.layersContainer,n=[];t.setting.layers.eachLayer(function(t){var e={layer:t,name:t.options.name,type:t.options.featureType,index:n.length};n.push(e)}),n.reverse(),e.setDataSource(n)}},{key:"clearLayersContainer",value:function(){var e=u.default.Builder.BuilderProject.getInstance(),t=e.layersContainer;e.setting.layers.eachLayer(function(t){e.deleteLayer(t)}),t.clear()}},{key:"refreshAnalysisLayersControl",value:function(){var t=u.default.Builder.BuilderCommon.layersControlDataSource(),e=u.default.Builder.BuilderProject.getInstance(),n=e.setting.analysisCurrentPage;if(n&&e.analysis_controls){var r=e.analysis_controls.get(n+" src-layers");if(r){var i=r.select(),o=void 0;o=-1===i?0:i,r.setDataSource(t),r.select(o)}var a=e.analysis_controls.get(n+" dest-layers");if(a){var s=a.select(),l=void 0;l=-1===s?0:s,a.setDataSource(t),a.select(l)}}}},{key:"layersControlDataSource",value:function(){var n=[];return u.default.Builder.BuilderProject.getInstance().setting.layers.eachLayer(function(t){var e=t.options;n.push({name:e.name,value:e.guid})}),n}}]),t}();n.default=o},{"../kq":1075,leaflet:560}],927:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=o(t("leaflet")),f=o(t("../kq"));function o(t){return t&&t.__esModule?t:{default:t}}var a={visible:!0,guid:"",name:"",featureType:"",projection:"EPSG:4326",enableFields:[],dataSource:{type:"STATIC_DATA",url:"",name:""},render:{}},s=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=i.default.extend({},a,t),this.render=null,this.renderType="basic",this.options.guid=f.default.Common.ComputeTools.guid(),this.options.label_guid=f.default.Common.ComputeTools.guid(),e&&(e.createPane(this.options.guid),e.createPane(this.options.label_guid),this.pane=this.options.guid,this.label_pane=this.options.label_guid,e.getPane(this.options.guid).style.zIndex=f.default.Common.CommonValues.overlayPane_zIndex,e.getPane(this.options.label_guid).style.zIndex=f.default.Common.CommonValues.labelPane_zIndex,this.map=e)}var t,e;return r(n,[{key:"confirmDataSourceAsync",value:(t=regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=this).options.dataSource,r=new f.default.Data.DataManager,t.next=5,r.getData(n);case 5:if(i=t.sent,f.default.Builder.BuilderCommon.isValidGeojson(i)){t.next=8;break}return t.abrupt("return",!1);case 8:return e.options.featureType=f.default.Common.CommonTools._getGeoJSONType(i),e.options.name=n.name,f.default.Builder.BuilderLayerDatas.getInstance().setData(e.options.guid,i),e.initRender(),t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return e.apply(this,arguments)})},{key:"getRender",value:function(){return this.render.get(this.renderType)}},{key:"getRenderType",value:function(){return this.renderType}},{key:"setRenderType",value:function(t,e){var n=this.render.get(this.renderType),r=this.render.get(t);this.renderType=t,n.remove(),r.addToMapView(e)}},{key:"initRender",value:function(){var t=this,e=f.default.Builder.BuilderLayerDatas.getInstance().getData(t.options.guid);if(this.render=new Map,"point"===this.options.featureType){var n=new f.default.Builder.RenderPointBasic(e,t.pane,t.label_pane);n.setOptions();var r=new f.default.Builder.RenderPointSingle(e,t.pane,t.label_pane);r.setOptions();var i=new f.default.Builder.RenderPointSection(e,t.pane,t.label_pane);i.setOptions();var o=new f.default.Builder.RenderPointHeatmap(e,t.pane,t.label_pane);o.setOptions(),this.render.set("basic",n),this.render.set("single",r),this.render.set("section",i),this.render.set("heatmap",o)}else if("line"===this.options.featureType){var a=new f.default.Builder.RenderLineBasic(e,t.pane,t.label_pane);a.setOptions();var s=new f.default.Builder.RenderLineSingle(e,t.pane,t.label_pane);s.setOptions();var l=new f.default.Builder.RenderLineSection(e,t.pane,t.label_pane);l.setOptions(),this.render.set("basic",a),this.render.set("single",s),this.render.set("section",l)}else if("polygon"===this.options.featureType){var u=new f.default.Builder.RenderPolygonBasic(e,t.pane,t.label_pane);u.setOptions();var c=new f.default.Builder.RenderPolygonSingle(e,t.pane,t.label_pane);c.setOptions();var h=new f.default.Builder.RenderPolygonSection(e,t.pane,t.label_pane);h.setOptions(),this.render.set("basic",u),this.render.set("single",c),this.render.set("section",h)}}},{key:"setPaneZIndex",value:function(t){this.map.getPane(this.options.guid).style.zIndex=f.default.Common.CommonValues.overlayPane_zIndex+t,this.map.getPane(this.options.label_guid).style.zIndex=f.default.Common.CommonValues.labelPane_zIndex+t}},{key:"getPaneZIndex",value:function(){return this.map.getPane(this.options.guid).style.zIndex}},{key:"removePane",value:function(){this.map.getPane(this.options.guid).remove()}}]),n}();n.default=s},{"../kq":1075,leaflet:560}],928:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();i(t("leaflet")),i(t("../kq"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataMap=new Map}return r(t,[{key:"setData",value:function(t,e){this.dataMap.set(t,e)}},{key:"getData",value:function(t){return this.dataMap.get(t)}},{key:"delData",value:function(t){this.dataMap.delete(t)}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=o},{"../kq":1075,leaflet:560}],929:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("leaflet")),o=a(t("../kq"));a(t("../common/CommonValues"));function a(t){return t&&t.__esModule?t:{default:t}}var s={extent:{leftBottom:{x:-20037508.3427892,y:-20037508.3427892},rightTop:{x:-20037508.3427892,y:-20037508.3427892}},level:1,center:{x:12245143.987260092,y:4028802.0261344067},baseLayer:{layerType:"CLOUD",name:"高德地图"},layers:i.default.layerGroup(),description:"",projection:"EPSG:3857",title:"无标题",version:"1.0",name:"",layer:null,analysisCurrentPage:""},l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.infoMap=new Map,this.setting=s}return r(t,[{key:"setInfo",value:function(t,e){this.infoMap.set(t,e)}},{key:"getInfo",value:function(t){return this.infoMap.get(t)}},{key:"delInfo",value:function(t){this.infoMap.delete(t)}},{key:"addLayer",value:function(t){this.setting.layers.addLayer(t)}},{key:"removeLayer",value:function(t){t.getRender().remove(),this.setting.layers.removeLayer(t)}},{key:"deleteLayer",value:function(t){this.removeLayer(t),t.removePane()}},{key:"layers",value:function(){return this.setting.layers}},{key:"setPaneZIndexArray",value:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.getPane(r.layerid).style.zIndex=o.default.Common.CommonValues.overlayPane_zIndex+Number(r.zIndex)}}},{key:"load",value:function(t){}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=l},{"../common/CommonValues":952,"../kq":1075,leaflet:560}],930:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=o(t("./BuilderProject")),d=o(t("../kq"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.infoMap=new Map,this.builderProject=i.default.getInstance(),this.mapJson={},this.contentJson={},this.projectJson={}}var e,n;return r(t,[{key:"loadProject",value:(n=a(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.next=3,d.default.Common.NetworkTools.httpGetAsync(e);case 3:if("error"!==(r=t.sent)){t.next=8;break}return t.abrupt("return",null);case 8:t.prev=8,r=decodeURIComponent(r),n=JSON.parse(r),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(8),console.log("parse data failed! data:"+r),t.abrupt("return",null);case 17:console.log("mapJson: ",JSON.stringifyOnce(n));case 18:case"end":return t.stop()}},t,this,[[8,13]])})),function(t){return n.apply(this,arguments)})},{key:"saveProject",value:(e=a(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.builderProject.setting.layers._layers,n=$("#current-project-name")[0].innerText,r=d.default.Control.Notification.getInstance(),"{}"!=JSON.stringifyOnce(e)){t.next=6;break}return r.showError("工程下不包含图层，无法保存，请先添加图层！"),t.abrupt("return","empty");case 6:for(o in i=new Map,e)a=e[o].renderType,s=e[o].options.featureType,l=e[o].options.dataSource.url,u=e[o].options.dataSource.name,c=e[o].render.get(a),(h=new Object).renderType=a,h.featureType=s,h.options=c.options,h.url=l,h.name=u,c.options.thematicColors&&delete c.options.thematicColors,c.options.gradient&&delete c.options.gradient,i.set(o,h);return this.mapJson.center=this.builderProject.setting.center,this.mapJson.extent=this.builderProject.setting.extent,this.mapJson.level=this.builderProject.setting.level,this.mapJson.name=this.builderProject.setting.name,this.mapJson.projection=this.builderProject.setting.projection,this.mapJson.title=this.builderProject.setting.title,this.mapJson.version=this.builderProject.setting.version,this.mapJson.layers=i,this.mapJson.baseLayer=this.builderProject.setting.baseLayer,"http://172.16.0.8:8080/file/saveToFile",f={contentJson:this.mapJson,fileName:n,fileType:"prj"},t.next=21,d.default.Common.NetworkTools.uploadJsonToFileServer("http://172.16.0.8:8080/file/saveToFile",f);case 21:return"error"==(p=t.sent).result?r.showError("保存工程至服务器失败！"):r.showSuccess("保存工程成功！"),t.abrupt("return",p);case 24:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"saveAs",value:function(){}},{key:"share",value:function(){}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075,"./BuilderProject":929}],931:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=i(t("leaflet")),s=i(t("./RenderShape")),l=i(t("../kq"));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.defaultOptions=a.default.extend({},r.defaultOptions,{renderType:"basic",lineColor:"#4CC8A3",lineStyle:l.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:2,lineOpacity:1}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default),r(i,[{key:"setOptions",value:function(t){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,t)}},{key:"_render",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_render",this).call(this),console.log("RenderLineBasic _render!")}},{key:"getStyle",value:function(){if(this.options){var t=this.options;return{color:t.lineColor,dashArray:this._lineStyleToDashArray(t.lineStyle,t.lineWidth),weight:t.lineWidth,opacity:t.lineOpacity}}}}]),i}();n.default=u},{"../kq":1075,"./RenderShape":941,leaflet:560}],932:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),l=i(t("../kq")),u=i(t("./RenderShape"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function s(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,e,n)),i=r.geojsonObjectSectionFields(),o=Object.keys(i)[0],a=l.default.Common.CommonValues.classBreaksMethod.classBreaks_equidistant;return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"section",thematicField:o,sectionMethod:a,sectionCount:6,colorIndex:0,thematicColors:u.default.getThematicFieldColorsSection(t,o,0,a,6),lineStyle:l.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:2,lineOpacity:1}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,u.default),r(s,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(t){return{color:this._sectionFieldColor(this.options.thematicColors,t.properties[this.options.thematicField]),weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:this._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),s}();n.default=o},{"../kq":1075,"./RenderShape":941}],933:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),s=i(t("../kq")),l=i(t("./RenderShape"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function a(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,e,n)),i=r.geojsonObjectFields(),o=Object.keys(i)[0];return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"single",thematicField:o,colorIndex:0,thematicColors:l.default.getThematicFieldColorsSingle(t,o,0),lineStyle:s.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:2,lineOpacity:1}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,l.default),r(a,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(t){return{color:this.options.thematicColors.get(t.properties[this.options.thematicField]),weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:this._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),a}();n.default=o},{"../kq":1075,"./RenderShape":941}],934:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=i(t("leaflet")),a=i(t("./RenderShape_Point"));i(t("../kq"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.defaultOptions=o.default.extend({},r.defaultOptions,{renderType:"basic",pointSymbolType:"vector",vectorInfo:{fillColor:"#ff0000",fontSize:"12px",fillOpacity:.9,strokeColor:"#ffffff",strokeWidth:1,strokeOpacity:1,name:"1-1",unicode:"&#xe601",className:"iconfont"},imageInfo:{width:50,height:50,url:"url(./images/point_images/IMAGE1-2.png)",radius:.5}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,a.default),r(i,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(){}},{key:"render",value:function(){}}]),i}();n.default=s},{"../kq":1075,"./RenderShape_Point":942,leaflet:560}],935:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=i(t("../kq")),a=i(t("./RenderShape_Point"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.defaultOptions={renderType:"heatmap",colorIndex:0,radius:5,weightField:"",filter:"",gradient:o.default.Common.CommonValues.heatmapColorRamp[0]},r.pane=e,r.options={},r.mapGeoJSON=null,r.mapView=null,r.geojson_obj=t,r.currFilter="",r.currWeightField="",r.heatmapLayer=null,r.data=[],r.heatmapConfig={},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,a.default),r(i,[{key:"setOptions",value:function(t){var e=this;e.options=L.extend({},e.defaultOptions,e.options,t),!e.currFilter||!e.currWeightField||e.currFilter&&e.currFilter!==e.options.filter||e.currWeightField&&e.currWeightField!==e.options.weightField?(e.currFilter=e.options.filter,e.currWeightField=e.options.weightField,e._readdGeoJSON(!0)):e._readdGeoJSON(!1)}},{key:"_readdGeoJSON",value:function(t){this.mapView&&(t&&(this.data=[]),this.mapGeoJSON&&delete this.mapGeoJSON,this.mapGeoJSON=new o.default.Map.MapGeoJSON(this.geojson_obj,{onEachFeature:L.Util.bind(this.onEachFeature,this),filter:L.Util.bind(this.onFilter,this),isAddToDraw:!1}),this.heatmapConfig={radius:this.options.radius,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"value",gradient:this.options.gradient,pane:this.pane},this.heatmapLayer&&(this.heatmapLayer.remove(),delete this.heatmapLayer,this.mapView._getMap().off("click",this._onHeatmapLayerClick)),this.heatmapLayer=new o.default.Layer.LayerHeatmap(this.heatmapConfig),this.mapView._getMap().on("click",this._onHeatmapLayerClick,this),this.heatmapLayer.setData(this.data),this.heatmapLayer.addToMapView(this.mapView))}},{key:"_onHeatmapLayerClick",value:function(t){console.log("_onHeatmapLayerClick");for(var e=this.mapView._getMap(),n=e.latLngToLayerPoint(t.latlng),r=0;r<this.data.length;r++){var i=e.latLngToLayerPoint(this.data[r]);if(Math.abs(i.x-n.x)<5&&Math.abs(i.y-n.y)<5)return void o.default.Builder.BuilderCommon.createPopup(this.mapView._getMap(),this.data[r].feature,t.latlng)}}},{key:"getStyle",value:function(t){return{}}},{key:"addToMapView",value:function(t){t&&(this.mapView=t,this._readdGeoJSON(!1))}},{key:"remove",value:function(){return this.mapGeoJSON&&(delete this.mapGeoJSON,this.data=[]),this.heatmapLayer&&this.heatmapLayer.remove(),this.mapView}},{key:"onFilter",value:function(t){if(!this.currFilter)return!0;var e=this.currFilter;for(var n in t.properties)e=e.replace(RegExp(n,"g"),"feature.properties."+n);return new Function("feature","return "+e)(t)}},{key:"onEachFeature",value:function(t,e){var n={lng:t.geometry.coordinates[0],lat:t.geometry.coordinates[1],value:t.properties[this.options.currWeightField],feature:t};this.data.push(n)}},{key:"moveToCenter",value:function(){this.mapGeoJSON&&this.mapView&&this.mapView.panTo(this.mapGeoJSON.getBounds().getCenter())}},{key:"flyToBounds",value:function(){if(this.mapGeoJSON&&this.mapView){var t=this.mapGeoJSON.getBounds();this.geoFitBounds(t)}}},{key:"geoFitBounds",value:function(t){var e=this.mapView._getMap(),n=L.latLngBounds(t),r=e.getBoundsZoom(n,!1),i=n.getCenter();e.setView(i,r)}}]),i}();n.default=s},{"../kq":1075,"./RenderShape_Point":942}],936:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),l=o(t("../kq")),u=o(t("./RenderShape")),i=o(t("./RenderShape_Point"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function s(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,e,n)),i=r.geojsonObjectSectionFields(),o=Object.keys(i)[0],a=l.default.Common.CommonValues.classBreaksMethod.classBreaks_equidistant;return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"section",pointSymbolType:"vector",vectorInfo:{thematicField:o,sectionMethod:a,sectionCount:6,colorIndex:0,thematicColors:u.default.getThematicFieldColorsSection(t,o,0,a,6),fillColor:"#0000FF",fontSize:"5px",fillOpacity:.9,strokeColor:"#FFFFFF",strokeWidth:1,strokeOpacity:1,name:"1-1",unicode:"&#xe601",className:"iconfont"}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,i.default),r(s,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOptions",this).call(this,t)}},{key:"updateFillColor",value:function(t){var e=this.options.vectorInfo;e.fillColor=this._sectionFieldColor(e.thematicColors,t.properties[e.thematicField])}},{key:"getStyle",value:function(t){return{fillColor:this._sectionFieldColor(this.options.thematicColors,t.properties[this.options.thematicField]),fontSize:this.options.fontSize,pointOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity}}}]),s}();n.default=a},{"../kq":1075,"./RenderShape":941,"./RenderShape_Point":942}],937:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),s=(o(t("../kq")),o(t("./RenderShape"))),i=o(t("./RenderShape_Point"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function a(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,e,n)),i=r.geojsonObjectFields(),o=Object.keys(i)[0];return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"single",pointSymbolType:"vector",vectorInfo:{thematicField:o,thematicColors:s.default.getThematicFieldColorsSingle(t,o,0),colorIndex:0,fillColor:"#00ff00",fontSize:"5px",fillOpacity:.9,strokeColor:"#FF00FF",strokeWidth:1,strokeOpacity:1,name:"1-1",unicode:"&#xe601",className:"iconfont"}}),r.defaultOptions.pointSymbolType="vector",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i.default),r(a,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(t){return{}}},{key:"updateFillColor",value:function(t){var e=this.options.vectorInfo;e.fillColor=e.thematicColors.get(t.properties[e.thematicField])}}]),a}();n.default=a},{"../kq":1075,"./RenderShape":941,"./RenderShape_Point":942}],938:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=i(t("leaflet")),a=i(t("./RenderShape"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.defaultOptions=o.default.extend({},r.defaultOptions,{renderType:"basic",fillColor:"#8D7AC0",fillOpacity:.9,lineColor:"#FFFFFF",lineStyle:KQ.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:1,lineOpacity:1}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,a.default),r(i,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(){return{fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:this._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),i}();n.default=s},{"./RenderShape":941,leaflet:560}],939:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),l=i(t("./RenderShape")),u=i(t("../kq"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function s(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,e,n)),i=r.geojsonObjectSectionFields(),o=Object.keys(i)[0],a=u.default.Common.CommonValues.classBreaksMethod.classBreaks_equidistant;return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"section",thematicField:o,sectionMethod:a,sectionCount:6,colorIndex:0,fillOpacity:.9,thematicColors:l.default.getThematicFieldColorsSection(t,o,0,a,6),lineColor:"#FFFFFF",lineStyle:u.default.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:1,lineOpacity:1}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,l.default),r(s,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(t){return{fillColor:this._sectionFieldColor(this.options.thematicColors,t.properties[this.options.thematicField]),fillOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:this._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),s}();n.default=o},{"../kq":1075,"./RenderShape":941}],940:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./RenderShape"),s=(r=o)&&r.__esModule?r:{default:r};var a=function(t){function a(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,e,n)),i=r.geojsonObjectFields(),o=Object.keys(i)[0];return r.defaultOptions=L.extend({},r.defaultOptions,{renderType:"single",thematicField:o,colorIndex:0,thematicColors:s.default.getThematicFieldColorsSingle(t,o,0),fillOpacity:.9,lineColor:"#FFFFFF",lineStyle:KQ.Common.CommonValues.lineStyle.lineStyle_simple_line,lineWidth:1,lineOpacity:1}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,s.default),i(a,[{key:"setOptions",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setOptions",this).call(this,t)}},{key:"getStyle",value:function(t){return{fillColor:this.options.thematicColors.get(t.properties[this.options.thematicField]),fillOpacity:this.options.fillOpacity,color:this.options.lineColor,weight:this.options.lineWidth,opacity:this.options.lineOpacity,dashArray:this._lineStyleToDashArray(this.options.lineStyle,this.options.lineWidth)}}}]),a}();n.default=a},{"./RenderShape":941}],941:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),p=r(t("leaflet")),d=r(t("../kq")),o=r(t("../common/CommonValues"));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.defaultOptions={filter:"",labelField:"",labelColor:"#000000",labelFontName:d.default.Common.CommonValues.labelFontName.fangSong,labelSize:"12",labelWeight:"normal",labelStyle:"normal",collisionFlg:!0,labelBorderColor:"white",labelBorderWidth:"4.0",labelPosition:"mid",labelMarkerPadding:"4",labelMarkerWidth:0,labelMarkerHeight:0},this.pane=e,this.options={},this.mapGeoJSON=null,this.labelLayers=p.default.featureGroup(),this.mapView=null,this.limitedRender=p.default.Util.throttle(this._render,200,this),this.geojson_obj=t,this.currFilter="",this.currLabelOptions="",this.labelTextCollision=new p.default.LabelTextCollision({pane:n}),this.ciLayer=null}return i(r,[{key:"setOptions",value:function(t){var e=this;e.options=p.default.extend({},e.defaultOptions,e.options,t),e.labelTextCollision._setOptions({collisionFlg:e.options.collisionFlg,labelField:e.options.labelField,fontName:e.options.labelFontName,fontSize:e.options.labelSize,fontWeight:e.options.labelWeight,fontStyle:e.options.labelStyle,textColor:e.options.labelColor,borderColor:e.options.labelBorderColor,borderWidth:e.options.labelBorderWidth}),e.limitedRender()}},{key:"_renderLabel",value:function(t){var e=this.labelTextCollision.getString();if(this.currFilter!=this.options.filter||this.currLabelOptions!=e||t){this.currFilter=this.options.filter,this.currLabelOptions=this.labelTextCollision.getString(),this.labelLayers.clearLayers();var n=this.mapView._getMap();""!=this.labelTextCollision.options.labelField?this.addToMapView(this.mapView):(this.labelTextCollision.removeTextCanvas(),this.labelTextCollision.remove()),n.panTo(n.getCenter())}}},{key:"_render",value:function(){this.mapView&&this.mapGeoJSON&&(console.log("RenderShape _render!"),this._renderLabel(!1),this.mapGeoJSON.setStyle(p.default.bind(this.getStyle,this)))}},{key:"addToMapView",value:function(t){this.mapView=t;var e=this.mapView._getMap();e.hasLayer(this.mapGeoJSON)&&(e.removeLayer(this.mapGeoJSON),delete this.mapGeoJSON);var n=[];turf.flattenEach(this.geojson_obj,function(t){n.push(t)}),this.geojson_obj.features=n,this.mapGeoJSON=new d.default.Map.MapGeoJSON(this.geojson_obj,{onEachFeature:p.default.Util.bind(this.onEachFeature,this),filter:p.default.Util.bind(this.onFilter,this),style:p.default.Util.bind(this.getStyle,this),isAddToDraw:!1,pane:this.pane}),e.addLayer(this.mapGeoJSON),e.hasLayer(this.labelLayers)||(this.labelLayers.addTo(e),e.on("zoomend",this._endZoom,this)),this.limitedRender()}},{key:"_readdGeoJSON",value:function(t){if(t){this.data=[];var e=this.mapView._getMap();e.hasLayer(this.mapGeoJSON)&&(e.removeLayer(this.mapGeoJSON),delete this.mapGeoJSON)}this.mapGeoJSON=new d.default.Map.MapGeoJSON(this.geojson_obj,{onEachFeature:p.default.Util.bind(this.onEachFeature,this),filter:p.default.Util.bind(this.onFilter,this),style:p.default.Util.bind(this.getStyle,this),isAddToDraw:!1,pane:this.pane}),this.mapView&&(this.heatmapConfig={radius:this.options.radius,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!1,latField:"lat",lngField:"lng",valueField:"value",gradient:this.options.gradient},this.heatmapLayer&&(this.heatmapLayer.remove(),delete this.heatmapLayer,this.mapView._getMap().off("click",this._onHeatmapLayerClick)),this.heatmapLayer=new d.default.Layer.LayerHeatmap(this.heatmapConfig),this.mapView._getMap().on("click",this._onHeatmapLayerClick,this),this.heatmapLayer.setData(this.data),this.heatmapLayer.addToMapView(this.mapView))}},{key:"remove",value:function(){if(this.ciLayer&&(this.ciLayer.remove(),this.ciLayer.clearLayers()),!this.mapView)return null;var t=this.mapView._getMap();return t.hasLayer(this.mapGeoJSON)&&(t.removeLayer(this.mapGeoJSON),delete this.mapGeoJSON),this.mapGeoJSON&&(this.mapGeoJSON.remove(),delete this.mapGeoJSON),this.labelLayers.remove(),this.labelLayers.clearLayers(),this.mapView.panTo(this.mapView.getCenter()),this.mapView}},{key:"moveToCenter",value:function(){this.mapGeoJSON&&this.mapView&&this.mapView.panTo(this.mapGeoJSON.getBounds().getCenter())}},{key:"flyToBounds",value:function(){this.mapGeoJSON&&this.mapView&&this.mapView.flyToBounds(this.mapGeoJSON.getBounds())}},{key:"getBounds",value:function(){return this.mapGeoJSON.getBounds()}},{key:"_lineStyleToDashArray",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=d.default.Common.CommonValues.lineStyle,r=null;switch(t){case n.lineStyle_simple_line:return null;case n.lineStyle_dot_line:r=[2,1];break;case n.lineStyle_short_dash_line:r=[8,4];break;case n.lineStyle_short_dash_dot_line:r=[6,3,2,3];break;case n.lineStyle_long_dash_line:r=[11,5];break;case n.lineStyle_long_dash_dot_line:r=[11,5,2,5]}return r.map(function(t){return t*e})}},{key:"getStyle",value:function(){}},{key:"getStyleColor",value:function(t){var e,n,r="#ffffff",i=(e=this.options.thematicColors,"string"===(n=Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase())&&"object"===(void 0===e?"undefined":a(e))?"object":null===e?"null":void 0===e?"undefined":n);try{if("array"==i){var o=this.options.thematicColors;r=new Map(o.map(function(t){return[t[0],t[1]]})).get(t.properties[this.options.thematicField])}else r="map"==i?this.options.thematicColors.get(t.properties[this.options.thematicField]):function(t){var e=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.set(t[s][0],t[s][1])}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}(this.options.thematicColors).get(t.properties[this.options.thematicField])}catch(t){console.log("options: ",this.options),console.log("e: ",t)}return r}},{key:"_sectionFieldColor",value:function(t,e){for(var n=t.colors,r=t.breaksData,i=0;i<r.length-1;i++)if(e>=r[i]&&e<r[i+1])return n[i];return n[n.length-1]}},{key:"onFilter",value:function(t){if(!this.currFilter)return!0;var e=this.currFilter;for(var n in t.properties)e=e.replace(RegExp(n,"ig"),"feature.properties."+n);return e===this.currFilter||new Function("feature","return "+e)(t)}},{key:"onEachFeature",value:function(t,e){if(this.mapView)for(var n=turf.flatten(t),r=0;r<n.features.length;r++){var i=n.features[r],o=i.properties[this.options.labelField];if(null!=o){var a=turf.pointOnFeature(i),s=f(a.geometry.coordinates,2),l=s[0],u=s[1],c=p.default.latLng(u,l),h=p.default.circleMarker(c,{weight:0,fill:!1,text:o,renderer:this.labelTextCollision});this.labelLayers.addLayer(h)}}d.default.Builder.BuilderCommon.bindPopup(t,e)}},{key:"geojsonObjectFields",value:function(){var t={};return this.geojson_obj&&0<this.geojson_obj.features.length&&(t=this.geojson_obj.features[0].properties),t}},{key:"geojsonObjectSectionFields",value:function(){var t={},e=this.geojsonObjectFields();for(var n in e){"number"==typeof this.geojson_obj.features[0].properties[n]&&(t[n]=!0)}return t}},{key:"getGeojsonObject",value:function(){return this.geojson_obj}},{key:"_endZoom",value:function(){console.log("_endZoom")}}],[{key:"getThematicFieldColorsSingle",value:function(t,e,n){var r=new Map,i=[];t.features.forEach(function(t){i.push(t.properties[e])}),"number"==typeof(i=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(i))))[0]?i.sort(function(t,e){return t-e}):"string"==typeof i[0]&&i.sort();for(var o=this._scaleColors(d.default.Common.CommonValues.singleColorRamp[n],i.length),a=0;a<i.length;++a)r.set(i[a],o[a]);return r}},{key:"getThematicFieldColorsSection",value:function(t,e,n,r,i){var o=[];t.features.forEach(function(t){o.push(t.properties[e])});var a=this._breaksData(o,r,i);return{breaksData:a,colors:this._scaleColors(d.default.Common.CommonValues.singleColorRamp[n],a.length-1)}}},{key:"_scaleColors",value:function(t,e){return chroma.scale(t).colors(e)}},{key:"_breaksData",value:function(t,e,n){switch(e){case o.default.classBreaksMethod.classBreaks_equidistant:e="e";break;case o.default.classBreaksMethod.classBreaks_quantile:e="q";break;case o.default.classBreaksMethod.classBreaks_logarithmic:e="l";break;case o.default.classBreaksMethod.classBreaks_k_means:e="k"}return chroma.limits(t,e,n)}}]),r}();n.default=s},{"../common/CommonValues":952,"../kq":1075,leaflet:560}],942:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),s=i(t("leaflet")),o=i(t("./RenderShape")),l=i(t("../kq"));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.defaultOptions.labelPosition="down",r.defaultOptions.labelMarkerPadding="4",r.defaultOptions.labelMarkerWidth=0,r.defaultOptions.labelMarkerHeight=0,r.ciLayer=s.default.canvasIconLayer({pane:r.pane}),r.ciLayerMarkers=[],r.ciLayer.addLayers(r.ciLayerMarkers),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),r(i,[{key:"setOptions",value:function(t){var e=this;e.options=s.default.extend({},e.defaultOptions,e.options,t);var n={collisionFlg:e.options.collisionFlg,labelField:e.options.labelField,fontName:e.options.labelFontName,fontSize:e.options.labelSize,fontWeight:e.options.labelWeight,fontStyle:e.options.labelStyle,textColor:e.options.labelColor,borderColor:e.options.labelBorderColor,borderWidth:e.options.labelBorderWidth,position:e.options.labelPosition,markerPadding:e.options.labelMarkerPadding},r=this.options.vectorInfo.fontSize.replace("px","");r=Number(r)+2*this.options.vectorInfo.strokeWidth,n.markerWidth=r,n.markerHeight=r,e.labelTextCollision._setOptions(n),e.limitedRender()}},{key:"_render",value:function(){this.mapView&&(console.log("RenderShape_Point _render!"),this._renderLabel(!1),this.ciLayer.clearLayers(),this.mapGeoJSON&&(this.mapGeoJSON.remove(),delete this.mapGeoJSON),this.mapGeoJSON=new l.default.Map.MapGeoJSON(this.geojson_obj,{pointToLayer:s.default.Util.bind(this.pointToLayer,this),onEachFeature:s.default.Util.bind(this.onEachFeature,this),filter:s.default.Util.bind(this.onFilter,this),style:s.default.Util.bind(this.getStyle,this),isAddToDraw:!1,pane:this.pane}),this.mapView._getMap().panTo(this.mapView._getMap().getCenter()))}},{key:"addToMapView",value:function(t){console.log("RenderShape_Point addToMapView!");this.mapView=t;var e=this.mapView._getMap();this.ciLayer.addTo(e),e.hasLayer(this.labelLayers)||(this.labelLayers.addTo(e),e.on("zoomend",this._endZoom,this)),this._render()}},{key:"pointToLayer",value:function(t,e){var n=void 0;if("vector"===this.options.pointSymbolType){this.updateFillColor(t);var r=s.default.extend({},this.options.vectorInfo);n=new l.default.Map.MapMarker(e,{extraIcon:r})}else if("image"===this.options.pointSymbolType){var i=this.options.imageInfo,o=[20*i.radius,20*i.radius];this.options.imageInfo.width=o[0],this.options.imageInfo.height=o[1];var a=s.default.icon({iconUrl:this.imageUrl(i.url),iconSize:o});n=new l.default.Map.MapMarker(e,{icon:a})}else n=s.default.marker(e);return this.ciLayer.addLayer(n),n}},{key:"moveToCenter",value:function(){var t=this;t.mapGeoJSON&&t.mapView&&setTimeout(function(){t.mapView.panTo(t.mapGeoJSON.getBounds().getCenter())},300)}},{key:"remove",value:function(){return this.mapView?(this.mapView._getMap().off("zoomend",this._endZoom,this),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"remove",this).call(this)):null}},{key:"imageUrl",value:function(t){return t.replace(/^url\(/,"").replace(/\)$/,"")}},{key:"updateFillColor",value:function(t){}}]),i}();n.default=a},{"../kq":1075,"./RenderShape":941,leaflet:560}],943:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=s(t("./LayerListBox")),i=s(t("./FileLoadDialog")),o=s(t("./DatabaseLoadDialog")),a=s(t("./ProjectLoadDialog"));function s(t){return t&&t.__esModule?t:{default:t}}var l={LayerListBox:r.default,FileLoadDialog:i.default,DatabaseLoadDialog:o.default,ProjectLoadDialog:a.default};n.default=l},{"./DatabaseLoadDialog":945,"./FileLoadDialog":946,"./LayerListBox":947,"./ProjectLoadDialog":948}],944:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={title:""},i=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=n;return r._id=t,r._options=L.extend({},o,e),r._createWindow(),r._createGrid(),r._createUploadWidget(),r._refreshData(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,L.Evented),r(i,[{key:"_createWindow",value:function(){var t=this,e=$(t._id).kendoWindow({width:700,content:{template:t._windowContentTemplate()},open:function(){t._refreshData()}}).data("kendoWindow"),n='<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">'+t._options.title+"</span>";e.wrapper.find(".k-window-title").html(n)}},{key:"_createGrid",value:function(){var r=this;$(r._id+" .layer-data-download").kendoGrid({width:640,height:300,toolbar:[{template:kendo.template('<button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>')}],columns:r._columns().concat({command:[{text:"加载",click:function(t){var e=this.items().index($(t.currentTarget).closest("tr")),n=this.dataSource.options.data[e];r.fire("load",{dataSourceInfo:n.dataSourceInfo})}},{text:"删除",click:function(t){var e=this.items().index($(t.cuurentTarget).closest("tr")),n=this.dataSource.options.data[e];r.fire("delete",{dataSourceInfo:n.dataSource()})}}]})}).data("kendoGrid"),$(r._id+" .layer-data-download .refresh-data").kendoButton({click:function(){r._refreshData()}})}},{key:"_createUploadWidget",value:function(){}},{key:"_windowContentTemplate",value:function(){}},{key:"_uploadTemplate",value:function(){}},{key:"_refreshData",value:function(){}},{key:"_columns",value:function(){}},{key:"_formatFileSize",value:function(t){return(Math.ceil(t/1024)||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+" KB"}}]),i}();n.default=i},{}],945:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("./DataLoadDialog")),o=a(t("../../kq"));function a(t){return t&&t.__esModule?t:{default:t}}var s={title:"加载数据库图层"},l=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=L.extend({},s,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,i.default),r(n,[{key:"_windowContentTemplate",value:function(){return"\n        <div class='layer-data-download'></div>"}},{key:"_refreshData",value:function(){for(var t=this,e=(new o.default.Data.DataManager).getDBFileDataSourceInfos(),n=[],r=0;r<e.length;++r){var i=e[r];n.push({name:i.name,type:"database",dataSourceInfo:i})}setTimeout(function(){$(t._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:n}))},0)}},{key:"_columns",value:function(){return[{field:"name",title:"名称"},{field:"type",title:"类型"}]}}]),n}();n.default=l},{"../../kq":1075,"./DataLoadDialog":944}],946:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("./DataLoadDialog")),o=a(t("../../kq"));function a(t){return t&&t.__esModule?t:{default:t}}var s={title:"加载远程文件图层"},l=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=L.extend({},s,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,i.default),r(n,[{key:"_createUploadWidget",value:function(){$(this._id+" .layer-data-upload").kendoUpload({async:{saveUrl:"http://172.16.0.8:8080/file/sliceFileUpload?chunkSize=10485760",removeUrl:"remove",autoUpload:!1,chunkSize:10485760},success:function(t){var e=t.files[0];o.default.Data.DataManager.getInstance().addWebFileDataSourceInfo({type:"STATIC_DATA",url:"http://172.16.0.8:8080/file/download/"+e.uid,name:e.name.replace(e.extension,"")})},multiple:!1,template:kendo.template(this._uploadTemplate()),localization:{select:"文件上传",headerStatusUploading:"上传中",headerStatusUploaded:"上传完成"}})}},{key:"_windowContentTemplate",value:function(){return"\n        <div class='layer-data-download'></div>\n        <input type='file' name='files' class='layer-data-upload'/>"}},{key:"_uploadTemplate",value:function(){return"\n        <div class=\"layer-data-upload-template\">\n            <span class='k-progress'></span>\n            <div class='file-wrapper'>\n                <span class='file-icon'></span> \n                <h4 class='file-heading file-name-heading'>Name: #=name#</h4>\n                <h4 class='file-heading file-size-heading'>Size: #=size# bytes</h4>\n                <strong class=\"k-upload-status\">\n                    <button type='button' class='k-upload-action'></button>\n                    <button type='button' class='k-upload-action'></button>\n                </strong>\n            </div>\n        </div>"}},{key:"_refreshData",value:function(){for(var t=this,e=o.default.Data.DataManager.getInstance().getWebFileDataSourceInfos(),n=[],r=0;r<e.length;++r){var i=e[r];n.push({name:i.name,type:"geojson",dataSourceInfo:i})}setTimeout(function(){$(t._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:n}))},0)}},{key:"_columns",value:function(){return[{field:"name",title:"名称"},{field:"type",title:"类型"}]}}]),n}();n.default=l},{"../../kq":1075,"./DataLoadDialog":944}],947:[function(t,e,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i={},n=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},i,e);this._id=t,$("#"+this._id).addClass("builder-container"),n.template=kendo.template(this._template()),n.draggable={placeholder:this._customPlaceholder.bind(this)},this._initGlobalFunction(),$("#"+t).kendoListBox(n),this._listbox=$("#"+t).data("kendoListBox")}return e(r,[{key:"setDataSource",value:function(t){var e=new kendo.data.DataSource({data:t});this._listbox.setDataSource(e),this._createTooltip()}},{key:"onmouseenterHandle",value:function(t){$(t).parent().addClass("largeSize"),$(t).children(".secound-line").css("display","block")}},{key:"_template",value:function(){return'<div onclick="triggerEventHandleBuilder(\'select\', this, event)" onmouseenter="onmouseenterHandleBuilder(this)" onmouseleave="onmouseleaveHandleBuilder(this)" style="height: 100%; width: 100%">\n            <div class="first-line">\n                <div class="layer-icon">\n                    <span class="icon iconfont icon-shape-#:data.type#"></span>\n                </div>\n                \n                <span class="editable-span title" title=#:data.name#>\n                    <span style="display: inline-block;">#:name#</span>\n                    <input value=#:data.name# style="display: none;">\n                </span>\n                \n                <span class="fa fa-eye" style="opacity: 0;" onclick="toggleLayerVisible(this, event)"></span>\n            </div>\n\n            <div class="secound-line" style="display: none;">\n                <span class="fa fa-arrows" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_full_map\', this, event)"></span>\n               \n                <span>\n                    <span class="fa fa-arrow-down" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_export\', this, event)"></span>\n                    <span class="fa fa-table" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_attribute_table\', this, event)"></span>\n                    <span class="fa fa-bar-chart" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_legend\', this, event)"></span>\n                    <span class="fa fa-trash" style="display: inline-block;" onclick="triggerEventHandleBuilder(\'builder_layer_delete\', this, event)"></span>\n                </span>\n                \n                <span tabindex="-1">\n                    <span class="fa fa-ellipsis-v" style="cursor: pointer;" onclick="popupMenuHandleBuilder(\'builder_popup\', this, event)"></span>\n                \n                    <div class="lists" style="display: none;">\n                        <div>\n                            <span class="fa fa-pencil-square-o" onclick="triggerEventHandleBuilder(\'builder_rename\', this, event)">重命名</span>\n                        </div>\n                        \n                        <div>\n                            <span class="fa fa-star-half-o" onclick="triggerEventHandleBuilder(\'builder_opacity\', this, event)">不透明度</span>\n                            <div></div>\n                        </div>\n                        \n                        <div>\n                            <span class="fa fa-object-group" onclick="triggerEventHandleBuilder(\'builder_layer_style\', this, event)">图层样式</span>\n                        </div>\n                    \n                        <div>\n                            <span class="fa fa-info-circle" onclick="triggerEventHandleBuilder(\'builder_layer_attribute\', this, event)">图层属性</span>\n                        </div>\n                    </div>\n                </span>\n            </div>\n        <div>'}},{key:"_initGlobalFunction",value:function(){var i=this;t.onmouseenterHandleBuilder=t.onmouseenterHandleBuilder||function(t){$(t).parent().addClass("largeSize"),$(t).children(".secound-line").css("display","block"),$(t).find(".fa-eye").css("opacity","1")},t.onmouseleaveHandleBuilder=t.onmouseleaveHandleBuilder||function(t){$(t).parent().removeClass("largeSize"),$(t).children(".secound-line").css("display","none"),$(t).find(".fa-eye").css("opacity","0")},t.popupMenuHandleBuilder=t.popupMenuHandleBuilder||function(t,e,n){n.stopPropagation(),$(e).siblings(".lists").toggle()},t.toggleLayerVisible=t.toggleLayerVisible||function(t,e){e.stopPropagation();var n="",r=$(t).closest("li");$(t).hasClass("fa-eye")?($(t).removeClass("fa-eye"),$(t).addClass("fa-eye-slash"),i._listbox.enable(r,!1),$(t).css("pointer-events","auto"),n="builder_layer_invisible"):($(t).addClass("fa-eye"),$(t).removeClass("fa-eye-slash"),i._listbox.enable(r,!0),n="builder_layer_visible"),$("#"+i._id).trigger(n,i.getDataFromListItem(r))},t.triggerEventHandleBuilder=t.triggerEventHandleBuilder||function(t,e,n){n.stopPropagation(),e=$(e).closest("li"),$("#"+i._id).trigger(t,[i.getDataFromListItem(e),e])}}},{key:"getDataFromListItem",value:function(t){var e=this._listbox.dataItem(t).index,n=this._listbox.dataSource.options.data.length-1-e;return this._listbox.dataSource.options.data[n]}},{key:"remove",value:function(t){this._listbox.remove(t)}},{key:"clear",value:function(){this._listbox.remove(this._listbox.items())}},{key:"_customPlaceholder",value:function(t){return t.clone().addClass("custom-placeholder").removeClass("k-ghost")}},{key:"_createTooltip",value:function(){var e={".fa-arrows":"全图",".fa-arrow-down":"导出",".fa-table":"属性表",".fa-bar-chart":"图例",".fa-trash":"删除"},t=function(t){$(t).kendoTooltip({animation:!1,callout:!1,width:60,position:"bottom",content:function(){return e[t]},show:function(t){t.sender.popup.element.css("margin-top","6px"),t.sender.popup.element.css("margin-left","35px")}})};for(var n in e)t(n)}}]),r}();r.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],948:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=r(t("./DataLoadDialog")),l=r(t("../../kq"));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}var e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.default),i(n,[{key:"_createUploadWidget",value:function(){}},{key:"_windowContentTemplate",value:function(){return"\n        <div class='layer-data-download'></div>"}},{key:"_uploadTemplate",value:function(){}},{key:"_refreshData",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n=[],"http://172.16.0.8:8080/file/getFilesList",t.prev=3,t.next=6,l.default.Common.NetworkTools.httpGetAsync("http://172.16.0.8:8080/file/getFilesList");case 6:r=t.sent,"success"==(i=JSON.parse(r)).result?n=i.list:l.default.Control.Notification.showWarning("读取工程列表失败！"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),l.default.Control.Notification.showError("请求工程列表失败！");case 14:for(o=[],a=0;a<n.length;++a)"prj"==(s=n[a]).FILE_TYPE&&o.push({name:s.FILE_NAME,time:s.UPLOAD_END_TIME,type:s.FILE_TYPE,dataSourceInfo:s});setTimeout(function(){$(e._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:o}))},0);case 17:case"end":return t.stop()}},t,this,[[3,11]])}),r=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return r.apply(this,arguments)})},{key:"_columns",value:function(){return[{field:"name",title:"名称"},{field:"time",title:"上传日期"},{field:"type",title:"类型"}]}}]),n}();n.default=a},{"../../kq":1075,"./DataLoadDialog":944}],949:[function(t,e,n){"use strict";var r,i=t("../../kq"),a=(r=i)&&r.__esModule?r:{default:r};$(function(){var i,o,t,n,e;i=jQuery,o=window.kendo,t=o.ui,n=t.Widget,e=n.extend({init:function(t,e){n.fn.init.call(this,t,e),this._create()},options:{name:"SaveToolBar",onSelect:function(t){var e=i(t.item).data("type");switch(console.log("Selected: "+e),e){case"save":console.log("do save!");break;case"saveas":console.log("do saveas!");break;case"transmit":console.log("do transmit!");break;case"fold":console.log("do fold!"),this.options.sidebar&&this.options.sidebar.close()}}},_create:function(){var t=a.default.Local.Builder.saveToolBar.save(),e=a.default.Local.Builder.saveToolBar.saveAs(),n=(a.default.Local.Builder.saveToolBar.transmit(),a.default.Local.Builder.saveToolBar.colouddown()),r=a.default.Local.Builder.saveToolBar.menuFold();this.element.append('\n        <ul class="save-toolbar">\n          <li><span class="iconfont icon-save"></span>\n            <ul>\n                <li data-type="save">'+t+'</li>\n                <li data-type="saveas">'+e+'</li>\n            </ul>\n          </li>\n          \x3c!--<li data-type="transmit"><span class="iconfont icon-transmit"></span></li>--\x3e\n          <li data-type="clouddown"><span class="iconfont icon-clouddown"></span></li>\n          <li data-type="fold"><span class="iconfont icon-menu-fold"></span></li>\n        </ul>\n        '),o.bind(this.element,this.options),i(".save-toolbar").kendoMenu({select:this.options.onSelect.bind(this)}),i(".iconfont.icon-clouddown").kendoTooltip({position:"bottom",content:function(){return n}}).data("kendoTooltip"),i(".iconfont.icon-menu-fold").kendoTooltip({position:"bottom",content:function(){return r}}).data("kendoTooltip")}}),t.plugin(e)})},{"../../kq":1075}],950:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=g(t("./CommonValues")),i=g(t("./CommonTools")),o=g(t("./ComputeTools")),a=g(t("./NetworkTools")),s=g(t("./TaskManager")),l=g(t("./ExportShape")),u=g(t("./ThemeManager")),c=g(t("./LoadJSCSS")),h=g(t("./MaskLayerManager")),f=g(t("./PaneZIndexManager")),p=g(t("./QueryInfoManager")),d=g(t("./FileUpload"));function g(t){return t&&t.__esModule?t:{default:t}}var m={CommonValues:r.default,CommonTools:i.default,ComputeTools:o.default,NetworkTools:a.default,TaskManager:s.default,ExportShape:l.default,ThemeManager:u.default,LoadJSCSS:c.default,MaskLayerManager:h.default,PaneZIndexManager:f.default,QueryInfoManager:p.default,FileUpload:d.default};n.default=m},{"./CommonTools":951,"./CommonValues":952,"./ComputeTools":953,"./ExportShape":954,"./FileUpload":955,"./LoadJSCSS":956,"./MaskLayerManager":957,"./NetworkTools":958,"./PaneZIndexManager":959,"./QueryInfoManager":960,"./TaskManager":961,"./ThemeManager":962}],951:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function s(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s)}return i(s,null,[{key:"_promiseWrap",value:function(e){return function(){var t=[].slice.call(arguments);return new Promise(function(n,r){e.apply(null,t.concat(function(t,e){t?r(t):n(e)}))})}}},{key:"_promiseWrap_0",value:function(r){return function(){var t=[].slice.call(arguments);return new Promise(function(e,n){r.apply(null,t.concat(function(t){err?n(err):e(t)}))})}}},{key:"stringTrim",value:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")}},{key:"stringLTrim",value:function(t){return t.replace(/(^\s*)/g,"")}},{key:"stringRTrim",value:function(t){return t.replace(/(\s*$)/g,"")}},{key:"stringRemoveBlank",value:function(t){return t.replace(/\s+/g,"")}},{key:"clearFromCache",value:function(t){var e=arguments[5];for(var n in e)if(e[n].exports==t)return void delete e[n];throw"could not clear instance from module cache"}},{key:"_exportData_old",value:function(t,e,n){var r=document,i=arguments,o=r.createElement("a"),a=(i[0],i[1]);i[2];if(n=n||"text/plain",o.href="data:"+n+"charset=utf-8,"+escape(t),window.MSBlobBuilder){var s=new MSBlobBuilder;return s.append(t),navigator.msSaveBlob(s,e)}if("download"in o)return o.setAttribute("download",a),o.innerHTML="",r.body.appendChild(o),setTimeout(function(){var t=r.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(t),r.body.removeChild(o)},1e4),!0;var l=r.createElement("iframe");return r.body.appendChild(l),l.src="data:"+(i[2]?i[2]:"application/octet-stream")+(window.btoa?";base64":"")+","+(window.btoa?window.btoa:escape)(t),setTimeout(function(){r.body.removeChild(l)},333),!0}},{key:"exportData",value:function(t,e,n){var r=new Blob([t],{type:n||"application/json"});s._exportBlob(r,e)}},{key:"_exportBlob",value:function(t,e){var n=e||"download.txt";if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,n);else{var r=document.createElement("a");document.body.appendChild(r),r.setAttribute("type","hidden"),r.href=window.URL.createObjectURL(t),r.download=n,r.click(),window.URL.revokeObjectURL(r.href)}}},{key:"exportBase64UrlToImage",value:function(t,e){for(var n=window.atob(t.split(",")[1]),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);var a=new Blob([r],{type:"image/jpeg"});s._exportBlob(a,e)}},{key:"downloadFromUrl",value:function(t,e){if(t&&""!==t){t=encodeURI(t);var n=e||"download.txt",r=document.createElement("a");document.body.appendChild(r),r.setAttribute("type","hidden"),r.href=t,r.download=n,r.click(),window.URL.revokeObjectURL(r.href)}}},{key:"geoJsonFromGeometry",value:function(t,e){return e=e||{},new a.default.Map.MapGeoJSON(t,{style:e,pointToLayer:function(t,e){var n=void 0;if(t.properties&&t.properties.options){var r=t.properties.options;if(t.properties.isCircleMarker)n=L.circleMarker(e,r);else n=r.icon&&r.icon.options.iconUrl?new a.default.Map.MapMarker(e,{icon:L.icon(r.icon.options)}):new a.default.Map.MapMarker(e)}else n=new a.default.Map.MapMarker(e);return n}})}},{key:"geoJsonFCToGC",value:function(t){if(!t||"FeatureCollection"!==t.type||!t.features)return null;var e={type:"GeometryCollection",geometries:[]};return t.features.forEach(function(t){t.geometry&&(t.geometry.geometries?e.geometries=e.geometries.concat(t.geometry.geometries):e.geometries.push(t.geometry))}),e}},{key:"geoJsonToGC",value:function(t){if(!t)return null;var e={type:"GeometryCollection",geometries:[]};return t.geometry&&e.geometries.push(t.geometry),e}},{key:"_getGeoJSONGeometryType",value:function(t){if(t){if("Point"===t.type||"MultiPoint"===t.type)return"point";if("LineString"===t.type||"MultiLineString"===t.type)return"line";if("Polygon"===t.type||"MultiPolygon"===t.type)return"polygon"}return"unknown"}},{key:"_getGeoJSONType",value:function(t){if(!t)return"unknown";if("FeatureCollection"===t.type){if(0<t.features.length)return s._getGeoJSONType(t.features[0].geometry)}else{if("GeometryCollection"!==t.type)return"Feature"===t.type?s._getGeoJSONGeometryType(t.geometry):s._getGeoJSONGeometryType(t);if(0<t.geometries.length)return s._getGeoJSONType(t.geometries[0])}return"unknown"}},{key:"_geoJSONLatLngToDestProj",value:function(t,a,s){if(t.geometry)if("Point"===t.geometry.type)if(s){var e=L.point(t.geometry.coordinates[0],t.geometry.coordinates[1]),n=a.options.crs.unproject(e);t.geometry.coordinates=[n.lng,n.lat]}else{var r=L.latLng(t.geometry.coordinates[1],t.geometry.coordinates[0]),i=a.options.crs.project(r);t.geometry.coordinates=[i.x,i.y]}else if("LineString"===t.geometry.type){var o=[];t.geometry.coordinates.forEach(function(t){if(s){var e=L.point(t[0],t[1]),n=a.options.crs.unproject(e);o.push([n.lng,n.lat])}else{var r=L.latLng(t[1],t[0]),i=a.options.crs.project(r);o.push([i.x,i.y])}}),t.geometry.coordinates=o}else if("Polygon"===t.geometry.type){var l=[];t.geometry.coordinates.forEach(function(t){var o=[];t.forEach(function(t){if(s){var e=L.point(t[0],t[1]),n=a.options.crs.unproject(e);o.push([n.lng,n.lat])}else{var r=L.latLng(t[1],t[0]),i=a.options.crs.project(r);o.push([i.x,i.y])}}),l.push(o)}),t.geometry.coordinates=l}}},{key:"_loadKendoAndRun",value:function(t){t&&t()}},{key:"loadUiLib",value:function(t){a.default.Common.CommonTools._loadKendoAndRun(t)}},{key:"_getMapAbsoluteLeftTop",value:function(){var t="#"+a.default.Common.CommonValues.mapContainerID;return[$(t).offset().left,$(t).offset().top]}},{key:"_getMapAbsoluteRightBottom",value:function(){var t="#"+a.default.Common.CommonValues.mapContainerID,e=$(t).offset().left,n=$(t).offset().top;return[e+$(t).width(),n+$(t).height()]}},{key:"_getMapAbsoluteCenter",value:function(){var t="#"+a.default.Common.CommonValues.mapContainerID,e=$(t).offset().left,n=$(t).offset().top;return[e+$(t).width()/2,n+$(t).height()/2]}},{key:"_isGoogleScale",value:function(t){for(var e=[1/591658710.90913,1/295829355.454565,1/147914677.7272825,1/73957338.86364125,1/36978669.43182062,1/18489334.71591031,1/9244667.357955156,1/4622333.678977578,1/2311166.839488789,8.653637486605612e-7,1/577791.7098721972,1/288895.8549360986,1/144447.9274680493,1/72223.9637340247,1/36111.9818670123,1/18055.9909335062,1/9027.9954667531,1/4513.9977333765,1/2256.9988666883,1/1128.4994333441,1/564.2497166721,1/282.124858336,1/141.062429168,1/70.531214584,1/35.265607292],n=0;n<t.length;n++){for(var r=t[n],i=!1,o=0;o<e.length;o++){var a=e[o];if(Math.abs(a-r)/a<.01){i=!0;break}}if(!i)return!1}return!0}},{key:"_sleep",value:function(t){for(var e=(new Date).getTime();(new Date).getTime()<e+t;);}},{key:"_escapeSpecialTags",value:function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"_getIPPortFromUrl",value:function(t){for(var e=t.split("/"),n=0;n<e.length;n++){var r=e[n].indexOf(":");if(-1<r&&parseInt(e[n].substring(r+1)))return e[n]}}},{key:"_findTooltipFromSourceNameLayerId",value:function(t,e){var n=a.default.Map.MapConfig.getInstance(),r=n.findLayer(t,e);if(null!==r){var i=n.getLayerTooltip(r);return i||(i=n.getLayerLabel(r)),i}return null}},{key:"_hideLoading",value:function(){$(".kqmaploadingtxt").remove(),$("#map").removeClass("loading")}},{key:"stopDomEvent",value:function(t){L.DomEvent.stop(t)}},{key:"getShapeType",value:function(t){var e=a.default.Common.CommonValues.shapeTypes.point,n=t;return n instanceof L.Polygon||n instanceof L.LayerGroup||n instanceof L.Circle?e=a.default.Common.CommonValues.shapeTypes.fill:n instanceof L.Polyline&&(e=a.default.Common.CommonValues.shapeTypes.line),e}},{key:"getCoords",value:function(t){var e=a.default.Common.CommonTools.getShapeType(t);return e===a.default.Common.CommonValues.shapeTypes.point?[t.getLatLng()]:e===a.default.Common.CommonValues.shapeTypes.line?t.getLatLngs():e===a.default.Common.CommonValues.shapeTypes.fill?t instanceof L.Circle?[a.default.Control.Draw._circleToPolygon(t)]:t.getLatLngs():[]}},{key:"_addExtraLibs",value:function(){$("head").append('<script src="../../dist/cropper.min.js"><\/script>'),$("head").append('<script src="../../dist/rangeslider.min.js"><\/script>'),$("head").append('<script src="../../dist/building.min.js"><\/script>'),$("head").append('<script src="../../dist/wec.min.js"><\/script>'),$("head").append('<script src="../../dist/plot.dist.js"><\/script>')}},{key:"toDataURL",value:function(t,e){var n=new XMLHttpRequest;n.onload=function(){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n.response)},n.open("GET",t),n.responseType="blob",n.send()}},{key:"getUrlname",value:function(t){var e=(t=t.split("?")[0]).split("/");return e[e.length-1].toLowerCase()}},{key:"hexToRGB",value:function(t,e){var n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return e?"rgba("+n+", "+r+", "+i+", "+e+")":"rgb("+n+", "+r+", "+i+")"}},{key:"pickObject",value:function(n,t){return t.reduce(function(t,e){return e in n&&(t[e]=n[e]),t},{})}},{key:"getGeomFromFeatureCollection",value:function(t){var e=[];return turf.featureEach(t,function(t){e.push(turf.getGeom(t))}),turf.getGeom(turf.geometryCollection(e))}}]),s}();n.default=s},{"../kq":1075}],952:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};r.defaltProj4_EPSG4326="+proj=longlat +datum=WGS84 +no_defs",r.defaltPrj_EPSG4326='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433],AUTHORITY["EPSG",4326]]',r.defaltProj4_EPSG3857="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",r.defaltPrj_EPSG3857='PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_1SP"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["latitude_of_origin",0.0],UNIT["Meter",1.0]]',r.mapContainerID="map",r.insideMapID="KqMapID",r.defaultTheme="default-blue",r.basemapPane_zIndex=1e5,r.tilePane_zIndex=2e5,r.overlayPane_zIndex=4e5,r.labelPane_zIndex=45e4,r.shadowPane_zIndex=5e5,r.markerPane_zIndex=6e5,r.maskPane_zIndex=649e3,r.tooltipPane_zIndex=65e4,r.popupPane_zIndex=7e5,r.kqwebmapPath="../../",r.distPath="../../dist/",r.configFilePath="./",r.maskPath="../../mask/",r.showAfterInMsec=2e3,r.treeSelectMaxCount=12,r.flickerColor="#74A402",r.shapeTypes={point:0,line:1,fill:2},r.bufferTypes={outer:0,inner:1,left:2,right:3,both:4},r.bufferUnit={m:0,km:1},r.networkAnalysisTypes={optimal_path:0,trace_back:1,traveling_salesman_problem:2},r.networkAnalysisOptimalPathTypes={distance_first:0,time_first:1},r.networkAnalysisTracebackTypes={up:0,down:1},r.networkAnalysisTSPTypes={greed:0,trace_back:1,enumeration:2},r.rasterAnalysisTypes={function:0,algebra:1,logic:2,condition_select:3},r.rasterAnalysisFunctionTypes={abs:1,negate:2,square:3,sqrt:4,int:5,float:6,rounddown:7,roundup:8},r.rasterAnalysisAlgebraTypes={plus:1,minus:2,multiply:3,divide:4},r.rasterAnalysisLogicTypes={or:5,and:6,xor:7,diff:8,equal:9,not_equal:10,less_than:11,less_than_equal:12,greater_than:13,greater_than_equal:14,over:15},r.pointSymbolType={vector:"vector",image:"image"},r.labelFontName={fangSong:"FangSong",song:"SimSun",yaHei:"Microsoft YaHei"},r.lineStyle={lineStyle_simple_line:0,lineStyle_dot_line:1,lineStyle_short_dash_line:2,lineStyle_short_dash_dot_line:3,lineStyle_long_dash_line:4,lineStyle_long_dash_dot_line:5},r.singleColorRamp=[["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],["#009b9e","#42b7b9","#a7d3d4","#f1f1f1","#e4c1d9","#d691c1","#c75dab"],["#a16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"],["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],["#762a83","#af8dc3","#e7d4e8","#f5f5f5","#d9f0d3","#7fbf7b","#1b7837"],["#c51b7d","#e9a3c9","#fde0ef","#f5f5f5","#e6f5d0","#a1d76a","#4d9221"],["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],["#e9f013","#b3b3b3","#408000","#000080","#0d3069","#ababab","#fffcff"],["#b1e086","#1777b6","#9ccbd5","#fd9997","#ffc068","#ff7f00","#cab1d7"],["#ffffaf","#beb9db","#fd7f6f","#7eb0d5","#b2e061","#fdcce5","#d9d9d9"],["#b2cde4","#cbecc4","#decae5","#ffdaa3","#e5d8bc","#fedaec","#f2f2f2"],["#f53b44","#ff7a45","#ffc872","#b7eb8f","#5cdbd3","#2f54eb","#531dab"],["#d9af6b","#736f4c","#526a83","#68855c","#a06177","#8c785d","#7c7c7c"],["#11a579","#f2b701","#e73f74","#e68310","#cf1c90","#f97b72","#a5aa99"],["#f6cf71","#dcb0f2","#87c55f","#fe88b1","#8be0a4","#b497e7","#b3b3b3"],["#1d6996","#0f8554","#73af48","#e17c05","#94346e","#6f4070","#666666"],["#cc6677","#117733","#332288","#44aa99","#882255","#661100","#888888"]],r.heatmapColorRamp=[{0:"#000cff",.1:"#0070ff",.2:"#00d5ff",.3:"#00ffc5",.4:"#00ff61",.5:"#03ff00",.6:"#68ff00",.7:"#ccff00",.8:"#ffcd00",.9:"#ff6800",1:"#ff0400"},{0:"#7efdff",.1:"#6eebfc",.2:"#5edafa",.3:"#4dc9f7",.4:"#3eb8f5",.5:"#2da5f1",.6:"#2585d6",.7:"#1b64ba",.8:"#1343a0",.9:"#092284",1:"#000169"},{0:"#999dff",.1:"#99baff",.2:"#99d9ff",.3:"#99f7ff",.4:"#afe9e9",.5:"#cdcaca",.6:"#ebadad",.7:"#ffa399",.8:"#ffc299",.9:"#ffdf99",1:"#fffe99"},{0:"#9969be",.1:"#ad85b7",.2:"#c1a1b0",.3:"#c4adb8",.4:"#bdadcb",.5:"#b4addd",.6:"#a7abdd",.7:"#99a9dd",.8:"#8da9de",.9:"#80a9df",1:"#75a9e1"},{0:"#f0ebb3",.1:"#ecd594",.2:"#e9c177",.3:"#e6ac59",.4:"#e3973c",.5:"#df821e",.6:"#d06a1b",.7:"#c05216",.8:"#b13a12",.9:"#a1220d",1:"#920a09"},{0:"#8149aa",.1:"#8132a2",.2:"#821d9b",.3:"#941b85",.4:"#b62866",.5:"#d53648",.6:"#e57846",.7:"#f5b844",.8:"#fee169",.9:"#feefb2",1:"#fffffc"},{0:"#6069e9",.1:"#4349e0",.2:"#272ad9",.3:"#401cb6",.4:"#801d81",.5:"#be1d4e",.6:"#d54d69",.7:"#eb7b82",.8:"#f9a89c",.9:"#fbd2b3",1:"#fffdcb"},{0:"#83c785",.1:"#a8b7b7",.2:"#ceb3c1",.3:"#f3bd92",.4:"#fedb8e",.5:"#fafb99",.6:"#85a5a7",.7:"#4356a6",.8:"#651889",.9:"#8e2456",1:"#bd5919"},{0:"#9dc8e0",.1:"#4d95c4",.2:"#4492aa",.3:"#9ace90",.4:"#7bc462",.5:"#379f2e",.6:"#ae9c6f",.7:"#f28183",.8:"#db3a43",.9:"#e25e46",1:"#fcbc6e"},{0:"#d82127",.1:"#725c82",.2:"#3d8a9d",.3:"#49a75b",.4:"#6e8571",.5:"#9a4f9f",.6:"#d76c3f",.7:"#ff990a",.8:"#ffe529",.9:"#dcbd2e",1:"#a85a28"},{0:"#da362b",.1:"#ef6d48",.2:"#fda266",.3:"#fdd283",.4:"#ffeea2",.5:"#fefebd",.6:"#e8f59f",.7:"#cae882",.8:"#a0d669",.9:"#63b959",1:"#1d9950"},{0:"#d84450",.1:"#ee7255",.2:"#fda266",.3:"#fdd283",.4:"#ffeea2",.5:"#fefebe",.6:"#f0f9a7",.7:"#d6ee97",.8:"#a9dc95",.9:"#71b7a3",1:"#348abc"},{0:"#da362b",.1:"#ef6d48",.2:"#fda267",.3:"#fdd287",.4:"#ffeea4",.5:"#fefec0",.6:"#ecf8e2",.7:"#cfe8f2",.8:"#a1cae1",.9:"#73a2cc",1:"#4777b5"},{0:"#b6202f",.1:"#da634f",.2:"#f39e7b",.3:"#faceb7",.4:"#feebdf",.5:"#fefefe",.6:"#ececec",.7:"#d1d1d1",.8:"#a8a8a8",.9:"#7b7b7b",1:"#4f4f4f"},{0:"#e5ec1e",.1:"#c5c77c",.2:"#96a686",.3:"#52881c",.4:"#244937",.5:"#00017f",.6:"#081e72",.7:"#2d4976",.8:"#8b929e",.9:"#cbcacb",1:"#fdfafd"},{0:"#a0a0b7",.1:"#1515f5",.2:"#006fff",.3:"#00ce8b",.4:"#00ff3e",.5:"#07f7f7",.6:"#d12e2e",.7:"#ff6400",.8:"#ff6565",.9:"#d000ff",1:"#0800ff"},{0:"#4f23b2",.1:"#2f53ea",.2:"#3e9ffd",.3:"#55cfdd",.4:"#97e5a7",.5:"#dde78f",.6:"#ffd67f",.7:"#ffaa5e",.8:"#fd6e45",.9:"#ef3640",1:"#ab091c"},{0:"#b00c1e",.1:"#f43a43",.2:"#fe7245",.3:"#ffaf60",.4:"#ffd882",.5:"#d8e88f",.6:"#91e4ac",.7:"#53cbe0",.8:"#3d99fb",.9:"#314fe6",1:"#521fad"}],r.classBreaksMethod={classBreaks_equidistant:0,classBreaks_quantile:1,classBreaks_logarithmic:2,classBreaks_k_means:3},n.default=r},{}],953:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var u=8993220293e-15,a=1/u,s=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}return i(r,null,[{key:"stdScalesToResolutions",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:96,r=[];if(t instanceof Array){var i=!0,o=!1,a=void 0;try{for(var s,l=t.values()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=1/(s.value*n*39.37)*e;r.push(u)}}catch(t){o=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}return r}},{key:"getToMetersFromProj4",value:function(t){var e=l.default.Common.CommonTools;if(-1!==t.indexOf("longlat")||-1!==t.indexOf("latlong"))return u;if(-1!==t.indexOf("+to_meter")){for(var n=t.split("+"),r=0;r<n.length;r++)if(-1!==n[r].indexOf("to_meter")){var i=n[r];return i=(i=e.stringRemoveBlank(i)).replace(/to_meter=/,"")}}else if(-1!==t.indexOf("+units"))for(var o=t.split("+"),a=0;a<o.length;a++)if(-1!==o[a].indexOf("units")){var s=o[a];if("us-ft"===(s=(s=e.stringRemoveBlank(s)).replace(/units=/,"")))return.304800609601219;if("m"===s)return 1}return 1}},{key:"getUnitFromProj4",value:function(t){var e=l.default.Common.CommonTools;if(-1!==t.indexOf("longlat")||-1!==t.indexOf("latlong"))return"degree";if(-1!==t.indexOf("+units")){for(var n=t.split("+"),r=0;r<n.length;r++)if(-1!==n[r].indexOf("units")){var i=n[r];if("us-ft"===(i=(i=e.stringRemoveBlank(i)).replace(/units=/,"")))return"us-ft";if("m"===i)return"meter"}}else if(-1!==t.indexOf("+to_meter"))return"other";return"other"}},{key:"degreeToMeters",value:function(t){return a*t}},{key:"meterToDegrees",value:function(t){return 1/a*t}},{key:"scrollBarWidth",value:function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var r=t.offsetWidth;return n==r&&(r=e.clientWidth),document.body.removeChild(e),n-r}},{key:"_rgbToHex",value:function(t){var e=Number(t).toString(16);return e.length<2&&(e="0"+e),e}},{key:"fullColorHex",value:function(t,e,n){return"#"+r._rgbToHex(t)+r._rgbToHex(e)+r._rgbToHex(n)}},{key:"_S4",value:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)}},{key:"guid",value:function(){return r._S4()+r._S4()+"-"+r._S4()+"-"+r._S4()+"-"+r._S4()+"-"+r._S4()+r._S4()+r._S4()}}]),r}();n.default=s},{"../kq":1075}],954:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isLastError=!1,this._data=""}return i(t,[{key:"_getRequestUrl",value:function(t){var e=l.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/exportshp";return e+="?data="+t+"&format=filestream"}},{key:"exportShapeAsync",value:function(t){var o=this;o._isLastError=!1;var e=l.default.Common.CommonTools.geoJsonFCToGC(t),n=void 0;n=""!==t.prj?"ESRI:"+t.prj:"PROJ4:"+t.proj4;var r={data:JSON.stringify(e),geoSRS:n},a=l.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/exportshp",s=l.default.Local.Other.exportShapeAsync;return $.ajax({type:"POST",url:a,data:r,success:function(t,e,n){console.log("ExportShape success");var r=JSON.parse(t);if("success"!==r.resultcode)o._isLastError=!0,l.default.Control.Notification.getInstance().showSuccess(s.fail());else{o._data=r;var i="http://"+l.default.Common.CommonTools._getIPPortFromUrl(a)+"/"+o._data.filename;console.log("download_url:"+i),l.default.Common.CommonTools.downloadFromUrl(i,"shapefile.zip","application/zip"),l.default.Control.Notification.getInstance().showSuccess(s.success())}},error:function(t,e,n){console.log("ExportShape error"),l.default.Control.Notification.getInstance().showError(s.fail())}})}},{key:"data",value:function(){return this._data}},{key:"isLastError",value:function(){return this._isLastError}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],955:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.url=t.url,e.file=null,e.registeInfo=null,e.chunkIndex=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Evented),r(n,[{key:"registeFile",value:function(t){var e=this;e.file=t,$.ajax({encoding:"UTF-8",url:e.url+"/registe",type:"POST",dataType:"json",data:{fileName:e.file.name,fileSize:e.file.size},success:function(t){"success"==t.result?(e.chunkIndex=1,e.registeInfo=t,e.fire("registe_success",e.registeInfo)):e.fire("registe_failed",t.errorInfo)},error:function(t){e.fire("registe_failed",t.responseText)}})}},{key:"uploadFile",value:function(){var e=this,t=e._blob(),n=e.registeInfo.taskId,r=new FormData;r.append("taskId",n),r.append("chunkIndex",e.chunkIndex),r.append("sliceFile",t,e.file.name),$.ajax({url:e.url+"/sliceUpload",type:"POST",dataType:"json",data:r,cache:!1,contentType:!1,processData:!1,success:function(t){"success"==t.result?1==t.taskIsOver?e.fire("file_upload_finish"):e.fire("file_upload_success"):e.fire("file_upload_failed")},error:function(){e.fire("file_upload_failed")}})}},{key:"updateProgress",value:function(){var e=this,t=e.registeInfo.taskId;$.ajax({url:this.url+"/getProgress",type:"POST",dataType:"json",data:{taskId:t},success:function(t){"success"==t.result?t.taskLog?e.fire("update_progress_success",100):e.fire("update_progress_success",{progress:t.progress}):e.fire("update_progress_failed")},error:function(){e.fire("update_progress_failed")}})}},{key:"nextChunkIndex",value:function(){++this.chunkIndex}},{key:"currentChunkIndex",value:function(){return this.chunkIndex}},{key:"_blob",value:function(){var t=this.registeInfo.chunkSize,e=(this.chunkIndex-1)*t,n=this.chunkIndex*t;return this.file.slice(e,n)}}]),n}();n.default=i},{}],956:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l)}return r(l,null,[{key:"loadJsCssFile",value:function(t,e){if("js"==e)(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",t);else if("css"==e){var n;(n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t)}void 0!==n&&document.getElementsByTagName("head")[0].appendChild(n)}},{key:"createJsCssFile",value:function(t,e){if("js"==e)(n=document.createElement("script")).setAttribute("type","text/javascript"),n.setAttribute("src",t);else if("css"==e){var n;(n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t)}return n}},{key:"removeJsCssFile",value:function(t,e){for(var n="js"==e?"script":"css"==e?"link":"none",r="js"==e?"src":"css"==e?"href":"none",i=document.getElementsByTagName(n),o=i.length;0<=o;o--)i[o]&&null!=i[o].getAttribute(r)&&-1!=i[o].getAttribute(r).indexOf(t)&&i[o].parentNode.removeChild(i[o])}},{key:"replaceJsCssFile",value:function(t,e,n){for(var r="js"==n?"script":"css"==n?"link":"none",i="js"==n?"src":"css"==n?"href":"none",o=document.getElementsByTagName(r),a=o.length;0<=a;a--)if(o[a]&&null!=o[a].getAttribute(i)&&-1!=o[a].getAttribute(i).indexOf(t)){var s=l.createJsCssFile(e,n);o[a].parentNode.replaceChild(s,o[a])}}}]),l}();n.default=i},{}],957:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),l=(r=o)&&r.__esModule?r:{default:r};var a=t("leaflet"),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._maskLayers=[],this._maskSources={},this._maskGroup=a.layerGroup([]),this._mapLayerManager=l.default.Map.MapLayerManager.getInstance().cloneManagerObject(),this._init()}return i(t,[{key:"_init",value:function(){this._initLayers(),this._initSources(),l.default.Control.Manager.getInstance()._getMap().addLayer(this._maskGroup)}},{key:"_initLayers",value:function(){for(var t=l.default.Map.MapConfig.getInstance(),e=t.maskLayers(),n=0;n<e.length;++n){var r=e[n],i=t.getLayerID(r),o=t.getLayerSourceName(r),a=l.default.Map.MapCommon.getKeyFromSourceNameLayerId(o,i),s=t.getLayerLabel(r);this._maskLayers.unshift({key:a,label:s})}}},{key:"_initSources",value:function(){this._maskSources=this._mapLayerManager._getMaskSources()}},{key:"layers",value:function(){return this._maskLayers}},{key:"addLayer",value:function(t){var e=this._getLayerFromKey(t);e&&this._maskGroup.addLayer(e)}},{key:"removeLayer",value:function(t){var e=this._getLayerFromKey(t);e&&this._maskGroup.removeLayer(e)}},{key:"_getLayerFromKey",value:function(t){var e=null,n=l.default.Map.MapCommon.getSourceNameLayerIdFromKey(t),r=n.sourceName,i=n.layerId,o=null;if(this._maskSources[r]&&(o=this._maskSources[r].layers),o)for(var a=0;a<o.length;++a)if(o[a].layerId===i){e=o[a].layer;break}return e}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075,leaflet:560}],958:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=t("axios");window.JSZip=t("jszip");var l=t("jszip-utils"),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return i(t,null,[{key:"ajax",value:function(t,e){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(console.log(200),e.call(n,null,r.responseText)):e.call(n,"error",null))},r.open("GET",t),r.send()}},{key:"httpGetAsync",value:function(e){return s.get(encodeURI(e)).then(function(t){return t.request.response}).catch(function(t){return console.log("httpGetAsync: url:"+e+" error:"+t),"error"})}},{key:"httpPostAsync",value:function(e,t){return s.post(encodeURI(e),t).then(function(t){return t.request.response}).catch(function(t){return console.log("httpPostAsync: url:"+e+" error:"+t),"error"})}},{key:"loadZipFileAsync",value:function(t,r){return new Promise(function(e,n){a.default.Common.CommonTools._promiseWrap(l.getBinaryContent)(t).then(function(t){return JSZip.loadAsync(t)}).then(function(t){return t.file(r).async("string")}).then(function(t){e(t)}).catch(function(t){n(t)})})}},{key:"getParamString",value:function(t,e,n){var r=[];for(var i in t)r.push(encodeURI(n?i.toUpperCase():i)+"="+encodeURI(t[i]));return e?(-1===e.indexOf("?")?"?":"&")+r.join("&"):r.join("&")}},{key:"uploadJsonToFileServer",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e=null,1===i.length?(e="http://172.16.0.8:8080/file/saveToFile",n=i[0]):(e=i[0],n=i[1]),n.contentJson=JSON.stringify(n.contentJson),"prj"===n.fileType&&(n.contentJson=encodeURIComponent(n.contentJson)),t.next=7,a.default.Common.NetworkTools.httpPostAsync(e,a.default.Common.NetworkTools.getParamString(n));case 7:if("error"!==(r=t.sent)){t.next=12;break}return t.abrupt("return",{result:"error"});case 12:(r=JSON.parse(r)).downloadPath=e.replace("/file/saveToFile","/file/download/")+r.taskId;case 14:return t.abrupt("return",r);case 15:case"end":return t.stop()}},t,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})}]),t}();n.default=u},{"../kq":1075,axios:58,jszip:510,"jszip-utils":500}],959:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._zIndex=a.default.Common.CommonValues.overlayPane_zIndex}return i(t,[{key:"getNextZIndex",value:function(){return--this._zIndex}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],960:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._task=new Map,this._currentContext=null,this._intervalID=0}return i(t,[{key:"_tree",value:function(){return a.default.Control.Manager.getInstance().getControl("tree")}},{key:"_checkedLayers",value:function(){var t=this._tree();return t?t.getCheckedLayers():[]}},{key:"_mapConfig",value:function(){return a.default.Map.MapConfig.getInstance()}},{key:"_infoQueryConfig",value:function(){return a.default.Query.InfoQueryConfig.getInstance()}},{key:"_buildingQueryConfig",value:function(){return a.default.Query.BuildingQueryConfig.getInstance()}},{key:"_getOriginSourceName",value:function(t){var e=this._mapConfig(),n=e.getSourceByName(t,!1);return e.getOriginSourceName(n)}},{key:"_getConfigLayerInfo",value:function(t){var e=t.sourceName,n=t.layerId;return{originSourceName:this._getOriginSourceName(e),layerId:n}}},{key:"_findMapConfigLayer",value:function(t){var e=this._mapConfig(),n=this._getConfigLayerInfo(t);return e.findLayer(n.originSourceName,n.layerId)}},{key:"_findInfoQueryConfigLayer",value:function(t){var e=this._infoQueryConfig(),n=this._getConfigLayerInfo(t);return e.findLayer(n.layerId,n.originSourceName)}},{key:"_findBuildingQueryConfigLayers",value:function(t){var e=this._buildingQueryConfig(),n=this._getConfigLayerInfo(t);return e.findAllLayer(n.layerId,n.originSourceName)}},{key:"_getUrl",value:function(t){var e=this._mapConfig(),n=this._findMapConfigLayer(t),r=e.getLayerProperty(n,"src_name"),i=e.getSourceByName(r,!1);return e.getSourceUrl(i)}},{key:"_getInfoQueryOptions",value:function(t){var e=this._infoQueryConfig(),n=this._findInfoQueryConfigLayer(t);return{fields:e.getLayerFields(n)+",#length#,#area#",layerId:e.getLayerQueryID(n),url:this._getUrl(t)}}},{key:"_getBuildingQueryOptions",value:function(t){for(var e=this._buildingQueryConfig(),n=this._findBuildingQueryConfigLayers(t),r=[],i=this._getUrl(t),o=0;o<n.length;++o){var a=e.getLayerFields(n[o])+",#length#,#area#",s=e.getLayerBuildingID(n[o]);r.push({fields:a,layerId:s,url:i})}return r}},{key:"_LatLngBoundsToGeometry",value:function(t){var e=t.getNorthEast(),n=t.getSouthEast(),r=t.getSouthWest(),i=t.getNorthWest();return{type:"PolyGon",coordinates:[[[e.lng,e.lat],[n.lng,n.lat],[r.lng,r.lat],[i.lng,i.lat],[e.lng,e.lat]]]}}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],961:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._task=new Map,this._currentContext=null,this._intervalID=0}return r(t,[{key:"addTask",value:function(t,e){e.setStatusWaiting(),console.log("TaskManager addWork"),this._task.set(t,e)}},{key:"deleteTask",value:function(t){this._task.delete(t)}},{key:"doTask",value:function(){if(null===this._currentContext||null!=this._currentContext&&(this._currentContext.isStatusDone()||this._currentContext.isWaiting())||null!=this._currentContext&&null===this._currentContext._map){var t=this._findTask(),e=u(t,2),n=e[0],r=e[1];if(void 0===n)return;this._currentContext=r,this._currentContext.setStatusWorking(),console.log("TaskManager doTask"),this.deleteTask(n),this._currentContext.update()}}},{key:"start",value:function(){console.log("TaskManager start");var t=this;this._intervalID=setInterval(function(){t.doTask()},50)}},{key:"stop",value:function(){clearInterval(this._intervalID)}},{key:"isAllDone",value:function(){var t=!0;return this._currentContext&&(t=this._currentContext.isStatusDone()),console.log("isAllDone:"+t),t}},{key:"_findTask",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=!0,n=!1,r=void 0;try{for(var i,o=this._task[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=u(i.value,2),s=a[0],l=a[1];if(s._currentUrl&&-1!==s._currentUrl.lastIndexOf("mask=1"))return[s,l]}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return t?[this._task.keys().next().value,this._task.values().next().value]:this._findTask(!0)}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=i},{}],962:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();function o(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var a="kq-webmap-theme",r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._currentTheme=null,$("body").prepend('<div style="display: none; " class="kq-maincolor"/>')}var e,n,r;return i(t,[{key:"loadInitTheme",value:(r=o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getInitThemeName();case 2:return e=t.sent,t.next=5,this._load(e);case 5:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_load",value:(n=o(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("load theme:"+e),t.prev=1,t.next=4,$.ajax(KQ.Common.CommonValues.distPath+"kqcss-"+e+".js");case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}},t,this,[[1,6]])})),function(t){return n.apply(this,arguments)})},{key:"getInitThemeName",value:(e=o(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=KQ.Map.MapConfig.getInstance(),n=e.themeName(),t.next=4,this.getSavedThemeName();case 4:return(r=t.sent)&&(n=r),t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"getSavedThemeName",value:function(){return localforage.getItem(a).then(function(t){return t}).catch(function(t){console.log("getSavedThemeName error:"+t)})}},{key:"setSavedThemeName",value:function(t){return localforage.setItem(a,t).then(function(){}).catch(function(t){console.log("setSavedThemeName error:"+t)})}},{key:"mainColor",value:function(){return $(".kq-maincolor").css("color")}},{key:"getThemeList",value:function(){return["default-blue","default-red","black-black","blueopal-blue","bootstrap-blue","fiori-blue","flat-black","highcontrast-purple","material-blue","materialblack-black","metro-green","metroblack-black","moonlight-black","nova-red","office365-blue","silver-blue","uniform-gray"]}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=r},{}],963:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),v=r(t("../kq")),b=r(t("./AdvancedSearchResultDialog")),h=r(t("./AdvancedSearchHistoryDialog")),f=r(t("./Manager")),p=r(t("leaflet"));function r(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var g="kq-webmap-query-history",i=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._config=t,this._div=e,this._data=[],this._currentLayerFieldList=[],this._currentLayerFieldAliasList=[],this._create(),this._html=v.default.Local.Control.advancedSearch.html}var t,e,r,i,o,a,s,l,u;return c(n,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__select-layer__",this._html.selectLayer()).replace("__query-condition__",this._html.queryCondition()).replace("__field-label__",this._html.fieldLabel()).replace("__add-to-condition-info__",this._html.addToConditionInfo()).replace("__value-info__",this._html.valueInfo()).replace("__value-add-to-condition-info__",this._html.addToConditionInfo()).replace("__get-only-value__",this._html.getOnlyValue()).replace("__condition-info__",this._html.conditionInfo()).replace("__clear__",this._html.clear()).replace("__query__",this._html.query()).replace("__scope__",this._html.scope())}},{key:"_initHtml",value:(u=d(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._container=p.default.DomUtil.get(e._div),e._container||(e._container=p.default.DomUtil.create("div")),t.next=5,v.default.Common.NetworkTools.httpGetAsync(v.default.Common.CommonValues.kqwebmapPath+"query/advanced_search.html");case 5:if("error"!==(n=t.sent)){t.next=9;break}return console.log("load advanced_search_html error!"),t.abrupt("return",!1);case 9:n=e._translateHtmlChineseEnglish(n),$(e._container).append(n),$("#advanced-dropdownlist").kendoDropDownList({dataSource:{data:e._getConfigLayersLabels()},animation:!1,cascade:e._onLayerChange.bind(e)}).data("kendoDropDownList").wrapper.kendoTooltip({filter:"span:first-child:not(:empty)",position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,width:124,content:function(t){return t.target.text()},show:function(t){this.content.text()!=this.target().text()&&this.refresh()}}).data("kendoTooltip"),$("#advanced-search-history-button").kendoButton({icon:"clock",click:function(t){console.log("query-history-button clicked!"),e._openQueryHistoryDialog()}}),$("#advanced-search-history-button").kendoTooltip({position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,content:function(){return v.default.Local.Control.AdvancedSearchHistoryDialog.AdvancedSearchHistory()}}).data("kendoTooltip"),$("#field-listView").kendoListView({dataSource:{data:e._getCurrentLayerFieldData()},template:"<div>#:name#</div>",selectable:!0,dataBound:e._setFieldListViewEvent.bind(e)}),(r=$("#field-listView").data("kendoListView")).select(r.element.children().first()),$("#field-add-condition-button").kendoButton({click:function(t){e._addSelectFieldToQueryCondition()}}),$("#equal-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" =",$("#condition-textarea").val(e),console.log("equal-button clicked!")}}),$("#less-than-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" <",$("#condition-textarea").val(e),console.log("less-than-button clicked!")}}),$("#greater-than-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" >",$("#condition-textarea").val(e),console.log("greater-than-button clicked!")}}),$("#greater-or-equal-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" >=",$("#condition-textarea").val(e),console.log("greater-or-equal-button clicked!")}}),$("#less-or-equal-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" <=",$("#condition-textarea").val(e),console.log("less-or-equal-button clicked!")}}),$("#greater-or-less-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" <>",$("#condition-textarea").val(e),console.log("greater-or-less-button clicked!")}}),$("#like-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" LIKE",$("#condition-textarea").val(e),console.log("like-button clicked!")}}),$("#or-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" OR",$("#condition-textarea").val(e),console.log("or-button clicked!")}}),$("#and-button").kendoButton({click:function(t){var e=$("#condition-textarea").val();e+=" AND",$("#condition-textarea").val(e),console.log("and-button clicked!")}}),$("#value-info-listView").kendoListView({dataSource:{data:[]},template:"<div>#:name#</div>",selectable:!0,dataBound:e._setValueInfoListViewEvent.bind(e)}),$("#value-add-condition-button").kendoButton({click:function(t){e._addSelectValueInfoToQueryCondition()}}),$("#get-only-value-button").kendoButton({click:function(t){console.log("get-only-value-button clicked!"),e._getQueryFields()}}),$("#clear-button").kendoButton({click:function(t){console.log("clear"),$("#condition-textarea").val("")}}),$("#search-button").kendoButton({click:function(t){console.log("advanced-search-button clicked!"),e._executeAdvancedSearch(),e._saveQueryConditionToHistory()},type:"submit"}),$("#search-button").kendoTooltip({position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,content:function(){return v.default.Local.Control.advancedSearch.searchButton.tooltip()}}).data("kendoTooltip"),$("#control-panel-button").kendoButton({click:function(t){console.log("control-panel-button clicked!"),e._toggleDrawingPanel()}}),$("#control-panel-button").kendoTooltip({position:"bottom",showAfter:v.default.Common.CommonValues.showAfterInMsec,content:function(){return v.default.Local.Control.advancedSearch.controlPanelButton.tooltip()}}).data("kendoTooltip"),p.default.Browser.mobile?($("#field-add-condition-button").show(),$("#value-add-condition-button").show()):($("#field-add-condition-button").hide(),$("#value-add-condition-button").hide());case 37:case"end":return t.stop()}},t,this)})),function(){return u.apply(this,arguments)})},{key:"addTo",value:function(t){this._map=t}},{key:"_create",value:function(){this._initHtml()}},{key:"_toggleDrawingPanel",value:function(){f.default.getInstance()._toggleDrawPane()}},{key:"_openQueryHistoryDialog",value:(l=d(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,console.log("Function _openQueryHistoryDialog exec() !"),t.next=4,e.getSavedAdvancedSearchHistory();case 4:(n=t.sent)||(n=[]),h.default.getInstance().open(n);case 7:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)})},{key:"_saveQueryConditionToHistory",value:(s=d(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n=null,!(i=(e=this)._getSelectedConfigLayer())){t.next=13;break}if(null!==(o=e._getConfigLayer(i))){t.next=10;break}return t.abrupt("return");case 10:a=v.default.Query.AdvancedSearchConfig.getInstance(),n=a.getLayerQueryID(o),r=a.getLayerLabel(o);case 13:return s=$("#condition-textarea").val(),l=$("#advanced-dropdownlist").data("kendoDropDownList").select(),u=n+","+r+","+l+","+s,t.next=18,e.getSavedAdvancedSearchHistory();case 18:return(c=t.sent)||(c=[]),c.push({name:u}),t.next=23,e.setSavedAdvancedSearchHistory(c);case 23:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"getSavedAdvancedSearchHistory",value:(a=d(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",localforage.getItem(g).then(function(t){return t}).catch(function(t){console.log("getSavedAdvancedSearchHistory error:"+t)}));case 1:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"setSavedAdvancedSearchHistory",value:(o=d(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",localforage.setItem(g,e).then(function(){}).catch(function(t){console.log("setSavedAdvancedSearchHistory error:"+t)}));case 1:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"_getSource",value:function(t){return v.default.Map.MapConfig.getInstance().getSourceByName(t,!0)}},{key:"_getQueryUrl",value:function(t){return v.default.Map.MapConfig.getInstance().getSourceUrl(this._getSource(t))}},{key:"_getOriginSourceName",value:function(t){var e=this._getSource(t);return v.default.Map.MapConfig.getInstance().getOriginSourceName(e)}},{key:"_getConfigLayer",value:function(t){var e=v.default.Query.AdvancedSearchConfig.getInstance(),n=e.getLayerID(t),r=e.getLayerSourceName(t);return e.findLayer(n,r)}},{key:"_getConfigLayersLabels",value:function(){var i=v.default.Query.AdvancedSearchConfig.getInstance(),o=v.default.Map.MapConfig.getInstance(),a=[];return i.layers().forEach(function(t){if(t){var e=i.getLayerSourceName(t),n=i.getLayerID(t),r=o.findLayer(e,n);if(null!==r)!0===o.isLayerHasPermission(r)&&a.push(t)}}),[].concat(a.map(function(t){return i.getLayerLabel(t)}))}},{key:"_getCurrentLayerFieldData",value:function(){var n=this,t=v.default.Query.AdvancedSearchConfig.getInstance();n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[];var e=this._getSelectedConfigLayer();if(e){var r=t.getLayerListFieldsAlias(e).split(",");t.getLayerListFields(e).split(",").map(function(t,e){"shape"!==t.toLowerCase()&&(n._currentLayerFieldList.push({name:t}),n._currentLayerFieldAliasList.push({name:r[e]}))})}return n._currentLayerFieldAliasList}},{key:"_getListViewCurrentIndex",value:function(t){var e=$(t).data("kendoListView"),n=e.items(),r=e.select();return n.index(r[0])}},{key:"_getSelectedListViewText",value:function(t){var e=this._getListViewCurrentIndex(t);return-1==e?"":$(t).data("kendoListView").items()[e].textContent}},{key:"_onLayerChange",value:function(){this._getCurrentLayerFieldData(),$("#field-listView").kendoListView({dataSource:this._currentLayerFieldAliasList,template:"<div>#:name#</div>",selectable:!0});var t=$("#field-listView").data("kendoListView");t.select(t.element.children().first()),$("#value-info-listView").kendoListView({dataSource:{data:[]},template:"<div>#:name#</div>",selectable:!0}),$("#condition-textarea").val("")}},{key:"_getFieldListViewSelectField",value:function(){var t=this._getListViewCurrentIndex("#field-listView");return t<0?"":this._currentLayerFieldList[t].name}},{key:"_addSelectFieldToQueryCondition",value:function(){var t=$("#condition-textarea").val();t+=" "+this._getFieldListViewSelectField(),$("#condition-textarea").val(t)}},{key:"_setFieldListViewEvent",value:function(){var n=this;$("#field-listView").on("dblclick",function(t,e){n._addSelectFieldToQueryCondition()})}},{key:"_addSelectValueInfoToQueryCondition",value:function(){var t=$("#condition-textarea").val();t+=" "+this._getSelectedListViewText("#value-info-listView"),$("#condition-textarea").val(t)}},{key:"_setValueInfoListViewEvent",value:function(){var n=this;$("#value-info-listView").on("dblclick",function(t,e){n._addSelectValueInfoToQueryCondition()})}},{key:"_getQueryFields",value:(i=d(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e=this)._getFieldListViewSelectField(),!(r=e._getSelectedConfigLayer())){t.next=27;break}return i=v.default.Query.AdvancedSearchConfig.getInstance().getLayerQueryID(r),o=v.default.Query.AdvancedSearchConfig.getInstance().getLayerSourceName(r),a=e._getQueryUrl(o),s=new Date,l=s.toLocaleString()+"."+s.getMilliseconds(),u={url:a,sql:"select distinct "+n+" from $$"+i+"$$ ORDER BY "+n,reqcount:1e3,currentTime:l},c=[],t.prev=11,v.default.Control.Waiting.show(v.default.Control.Manager.getInstance()._getMap()),t.next=15,e._getSqlQueryData(u);case 15:c=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),v.default.Control.Waiting.close();case 21:return t.prev=21,v.default.Control.Waiting.close(),t.finish(21);case 24:h=[],$.each(c,function(t,e){h.push({name:e.properties[n]})}),$("#value-info-listView").kendoListView({dataSource:{data:h},template:"<div>#:name#</div>",selectable:!0});case 27:case"end":return t.stop()}},t,this,[[11,18,21,24]])})),function(){return i.apply(this,arguments)})},{key:"_stringMatchNumberValue",value:function(t){var e=new RegExp("\\s*([A-Za-z0-9_\\u4E00-\\u9FFF]+)\\s*=\\s*([-+]?\\d+(\\.\\d+)?)\\s*","ig");return t.match(e)}},{key:"_stringReplaceEqualToBetween",value:function(t){var e=v.default.Common.CommonTools.stringRemoveBlank(t).split("="),n=e[0],r=e[1],i=parseFloat(r);return" ( "+n+" * 1.0 > "+(i-1e-7)+" AND "+n+" * 1.0 < "+(i+1e-7)+" ) "}},{key:"_parseSqlNumberCondition",value:function(t){var e=this._stringMatchNumberValue(t),n=t;if(null!==e)for(var r=0;r<e.length;++r){var i=this._stringReplaceEqualToBetween(e[r]);n=n.replace(e[r],i)}return n}},{key:"_getQueryOptions",value:function(t){var e=t;if(null===e)return null;var n=v.default.Query.AdvancedSearchConfig.getInstance(),r=n.getLayerQueryID(e),i=n.getLayerFields(e),o=n.getLayerSourceName(e),a=this._getQueryUrl(o),s=n.getLayerRequestCount(e),l=$("#condition-textarea").val();return{url:a,layerId:r,fields:i,where:this._parseSqlNumberCondition(l),geometry:this._getGeometry(),reqcount:s}}},{key:"_getSqlQueryData",value:(r=d(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.default.Query.SqlQuery.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_getGeoInfoQueryData",value:(e=d(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.default.Query.InfoQuery.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_getSelectedConfigLayer",value:function(){var t=$("#advanced-dropdownlist").data("kendoDropDownList").select();return v.default.Query.AdvancedSearchConfig.getInstance().layers()[t]}},{key:"_getKey",value:function(t,e){return v.default.Map.MapCommon.getKeyFromSourceNameLayerId(t,e)}},{key:"_getLayerFields",value:function(t){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerFields(t)}},{key:"_getLayerChartFields",value:function(t){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerChartField(t)}},{key:"_getLayerLabel",value:function(t){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerLabel(t)}},{key:"_getLayerFieldsAlias",value:function(t){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerFieldsAlias(t)}},{key:"_getLayerSummaryField",value:function(t){return v.default.Query.AdvancedSearchConfig.getInstance().getLayerSummaryField(t)}},{key:"_getGeometry",value:function(){var t=v.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!1);return t?JSON.stringify(v.default.Common.CommonTools.geoJsonFCToGC(t)):null}},{key:"_organizeQueryData",value:function(t,e){for(var n=[],r=0;r<t.length;++r){var i=t[r],o={},a=i.properties;o.geometry=i.geometry;for(var s=0;s<e.length;++s){var l=e[s];a.hasOwnProperty(l)&&(o[l]=a[l])}n.push(o)}return n}},{key:"_executeAdvancedSearch",value:(t=d(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,n=v.default.Query.AdvancedSearchConfig.getInstance(),!(r=e._getSelectedConfigLayer())){t.next=36;break}if(i={sourceName:n.getLayerSourceName(r),layerId:n.getLayerID(r)},null!==(o=e._getQueryOptions(r))){t.next=11;break}return v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.optionError()),t.abrupt("return");case 11:if(""!==o.where||null!==o.geometry){t.next=14;break}return v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.conditionError()),t.abrupt("return");case 14:if(a=[],s=[],l=v.default.Control.Manager.getInstance().getControl("tree")){t.next=21;break}v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.layerTreeError()),t.next=36;break;case 21:return l.setQueryLayersChecked([i]),t.prev=22,v.default.Control.Waiting.show(v.default.Control.Manager.getInstance()._getMap()),t.next=26,e._getGeoInfoQueryData(o);case 26:s=t.sent,t.next=32;break;case 29:t.prev=29,t.t0=t.catch(22),v.default.Control.Waiting.close();case 32:return t.prev=32,v.default.Control.Waiting.close(),t.finish(32);case 35:v.default.Query.QueryIDManager.isDataArrayCanceled(s)?console.log("query canceled, data come!"):0===s.length?v.default.Control.Notification.getInstance().showError(v.default.Local.Control.advancedSearch.executeQuery.queryRecordError()):(u=e._getLayerLabel(r),c=e._getLayerFields(r),h=v.default.Query.AdvancedSearchConfig.getInstance().getLayerID(r),f=v.default.Query.AdvancedSearchConfig.getInstance().getLayerQueryID(r),p=v.default.Query.AdvancedSearchConfig.getInstance().getLayerSourceName(r),d=v.default.Common.CommonTools._findTooltipFromSourceNameLayerId(p,h),g=[],(m=v.default.Query.AdvancedSearchConfig.getInstance()).getLayerChartField(r)&&(g=m.getLayerChartField(r).split("|")),y=[],m.getLayerSummaryField(r)&&(y=m.getLayerSummaryField(r).split("|")),0==y.length&&(y[0]="areaLength"),a.push({sourceName:p,layerId:h,queryId:f,label:u,toolTip:d,fields:c.split(","),titles:e._getLayerFieldsAlias(r).split(","),records:e._organizeQueryData(s,c.split(",")),summaryField:y,chartFields:g}),(_=b.default.getInstance()).setTitle(v.default.Local.Control.advancedSearchResultDialog.title()),_.open(a));case 36:case"end":return t.stop()}},t,this,[[22,29,32,35]])})),function(){return t.apply(this,arguments)})},{key:"toString",value:function(){return"AdvancedSearch"}}]),n}();n.default=i},{"../kq":1075,"./AdvancedSearchHistoryDialog":964,"./AdvancedSearchResultDialog":965,"./Manager":985,leaflet:560}],964:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./Window"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._historyDialog=null,this._isFirstOpen=!0,this._historyListView=null,this._historyListData=[],this._init()}return i(t,[{key:"open",value:function(t){this._historyListData=t,this._historyListView.setDataSource(new kendo.data.DataSource({data:t})),this._historyListView.select(this._historyListView.element.children().first()),this._isFirstOpen?(this._isFirstOpen=!1,this._historyDialog.center().open()):this._historyDialog.open()}},{key:"_init",value:function(){this._initHtml(),this._initHistoryDialog()}},{key:"_initHtml",value:function(){var e=this,t='<div id="query-history-dialog" ><div id="query-history-list" style="overflow: auto; line-height: 1.6em; clear:both; height: 280px;"></div><button id="query-history-dialog-ok-button" type="button" style="float:right; margin: 15px 50px 15px 20px;" >'+KQ.Local.Control.AdvancedSearchHistoryDialog.HistoryOkButton()+"</button></div>",n=KQ.Common.CommonValues.mapContainerID;$("#"+n).append($(t)),$("#query-history-dialog-ok-button").kendoButton({click:function(t){console.log("query-history-dialog-ok-button clicked!"),e._addSelectStatementToAdvancedSearch()}})}},{key:"_initHistoryDialog",value:function(){var t=this,e={title:KQ.Local.Control.AdvancedSearchHistoryDialog.AdvancedSearchHistory(),minWidth:"350px",minHeight:"350px",scrollable:!1,actions:["Close"]},n=new a.default(t._getHistoryDialogId(),e);n.initAsync(function(){t._historyDialog=n._object()}),t._initHistoryListView()}},{key:"_initHistoryListView",value:function(){this._historyListView=$("#"+this._getQueryHistoryListViewId()).kendoListView({template:kendo.template("<div>#:name#</div>"),selectable:!0}).data("kendoListView")}},{key:"_getHistoryDialogId",value:function(){return"query-history-dialog"}},{key:"_getQueryHistoryListViewId",value:function(){return"query-history-list"}},{key:"_addSelectStatementToAdvancedSearch",value:function(){console.log("### -> Function _addSelectStatementToAdvancedSearch exec() !");var t=this._getHistoryListViewSelectStatement().split(",");4===t.length&&($("#advanced-dropdownlist").data("kendoDropDownList").select(parseInt(t[2])),$("#condition-textarea").val(t[3]))}},{key:"_getHistoryListViewSelectStatement",value:function(){var t=$("#"+this._getQueryHistoryListViewId()).data("kendoListView"),e=t.items(),n=t.select(),r=e.index(n[0]);return r<0?"":this._historyListData[r].name}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"./Window":1034}],965:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=o(t("./QueryResultDialog")),d=o(t("./FeatureUpdateAttributeDialog"));function o(t){return t&&t.__esModule?t:{default:t}}function g(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var a=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=t;return e._desc="advanced-search-",e._title=KQ.Local.Control.advancedSearchResultDialog.title(),e._init(),e._addOrRemoveFeatureUpdateDelete(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,i.default),r(n,[{key:"_initHtml",value:function(){var t=KQ.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="advanced-search-result-dialog"><div id="advanced-search-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"advanced-search-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"advanced-search-layer-name-tabs"}},{key:"_addOrRemoveFeatureUpdateDelete",value:function(){var o=this,a=KQ.Map.MapConfig.getInstance();a.controls().forEach(function(t){var e=a.getControlType(t);if(a.isControlHasPermission(t)){if("sidebar"===e){var n=a.getSubControl(t,"featureImport"),r=a.getControlProperty(n,"is_update"),i=a.getControlProperty(n,"is_delete");n&&a.isControlHasPermission(n)&&o._initRecordListContextMenu(r,i)}}else;})}},{key:"_getFeatureUpdateDeleteMenuItems",value:function(t,e){var n=[];return"1"===t&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureUpdateMenu(),cmd:"featureUpdate",uiIcon:"ui-icon custom-icon-transparency"}),"1"===e&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureDeleteMenu(),cmd:"featureDelete",uiIcon:"ui-icon custom-icon-clearall"}),n}},{key:"_initRecordListContextMenu",value:function(t,e){var n,p=this;($("div#advanced-search-result-dialog").bind("contextmenu",function(t){t.preventDefault()}),"0"!==t||"0"!==e)&&((t||e)&&$("#advanced-search-result-dialog").contextmenu({delegate:"tbody > tr.k-state-selected",menu:p._getFeatureUpdateDeleteMenuItems(t,e),select:(n=g(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p._dataSource.length<1)){t.next=2;break}return t.abrupt("return");case 2:if(r=p._dataSource[0].sourceName,i=p._dataSource[0].layerId,o=p._dataSource[0].records,a=KQ.Query.FeatureImportConfig.getInstance(),s=a.findLayer(i,r),p._currentSelectDataItem){t.next=9;break}return t.abrupt("return");case 9:l=a.getLayerPrimaryKey(s),u=""+p._currentSelectDataItem[l],p._isBlankText(u)&&(u="blank"),c=p._currentSelectDataItem[l],h=l+"="+c,t.t0=n.cmd,t.next="featureUpdate"===t.t0?17:"featureDelete"===t.t0?21:28;break;case 17:return console.log("FeatureUpdate: "),p._featureUpdateAttributeDialog=d.default.getInstance(),p._featureUpdateAttributeDialog.initFeatureUpdateDialog(s,p._currentSelectDataItem,u),t.abrupt("break",28);case 21:return console.log("FeatureDelete: "),f=KQ.Common.CommonValues.mapContainerID,$("#"+f).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),p._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: medium;'>"+KQ.Local.Control.FeatureImport.ContextMenu.ConfirmToDelete()+"</b>",messages:{okText:KQ.Local.Control.FeatureImport.ContextMenu.okText(),cancel:KQ.Local.Control.FeatureImport.ContextMenu.cancelText()}}).data("kendoConfirm"),p._confirmDialog.result.done(g(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("准备删除要素!"),p._featureUpdateAttributeDialog=d.default.getInstance(),t.next=4,p._featureUpdateAttributeDialog.featureDeleteFunction(i,h,u);case 4:if(e=t.sent,n=-1,console.log("Feature delete is success @@@ ---\x3e"+e),!e){t.next=18;break}r=0;case 9:if(!(r<o.length)){t.next=17;break}if(o[r][l]!==c){t.next=14;break}return n=r,t.abrupt("break",17);case 14:++r,t.next=9;break;case 17:-1!=n&&(p._dataSource[0].records.splice(n,1),p.open(p._dataSource),setTimeout(function(){KQ.Control.Manager.getInstance()._getMap().panBy([-150,-150])},1e3));case 18:case"end":return t.stop()}},t,this)}))).fail(function(){console.log("取消要素删除操作!")}),p._confirmDialog.open(),t.abrupt("break",28);case 28:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})}))}},{key:"_isBlankText",value:function(t){return!t||"string"==typeof t&&0===(t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).length}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=a},{"./FeatureUpdateAttributeDialog":977,"./QueryResultDialog":1009}],966:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("leaflet"),a=(r=o)&&r.__esModule?r:{default:r};var s={width:300,height:200,keepAspectRatio:!0},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=a.default.extend({},s,t);this._areaSelect=new a.default.AreaSelect(e)}return i(n,[{key:"addTo",value:function(t){this._areaSelect.addTo(t)}},{key:"addToMapView",value:function(t){t.addControl(this._areaSelect)}},{key:"remove",value:function(){this._areaSelect.remove()}},{key:"getBounds",value:function(){return this._areaSelect.getBounds()}}]),n}();n.default=l},{leaflet:560}],967:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),c=r(t("../kq")),a=r(t("./BookmarkAddDialog"));function r(t){return t&&t.__esModule?t:{default:t}}function h(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._div_id=t,this._local_bookmark=c.default.Local.Control.Bookmark,this._bookmarkAddDialog=null,this._bookmarkRecordGrid=null,this._bookmarkMenu=null,this._bookmarkRecordList=[],this._currentBookmarkIndex=-1,this._init()}var t,n,r,i;return o(e,[{key:"addTo",value:function(t){self._map=t}},{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__add-bookmark__",this._local_bookmark.addBookmarkButton())}},{key:"_initHtml",value:(i=h(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._container=L.DomUtil.get(e._div_id),e._container||(e._container=L.DomUtil.create("div")),t.next=5,c.default.Common.NetworkTools.httpGetAsync(c.default.Common.CommonValues.kqwebmapPath+"query/bookmark.html");case 5:if("error"!==(n=t.sent)){t.next=9;break}return console.log("load bookmark_html error!"),t.abrupt("return",!1);case 9:n=e._translateHtmlChineseEnglish(n),$(e._container).append(n),console.log("load bookmark_html success");case 12:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_init",value:(r=h(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=this,t.next=3,s._initHtml();case 3:return $("#bookmark-add-button").kendoButton({click:function(){console.log("bookmark-add-button clicked!"),s._bookmarkAddDialog=a.default.getInstance(),s._bookmarkAddDialog.open()}}),s._bookmarkRecordGrid=$("#bookmark-record-grid").kendoGrid({height:"calc(100% - 55px)",selectable:!0,resizable:!0,scrollable:!0,columns:[{field:"bookmarkField",title:s._local_bookmark.bookmark(),editable:function(t){return!1}}],dataSource:{data:[]},change:function(t){var e=$("#bookmark-record-grid").data("kendoGrid").select(),n=$(e).closest("tr").index(),r=s._bookmarkRecordList[n];s._currentBookmarkIndex=n,console.log("@@@ position: ",r);var i=c.default.Control.Manager.getInstance().getMapView(),o=r.coordinates.split(","),a=[];a.push(parseFloat(o[1])),a.push(parseFloat(o[0])),i.flyTo(a,parseInt(r.scalelevel))}}).data("kendoGrid"),$(window).resize(function(){s._bookmarkRecordGrid.resize()}),console.log("123456 -add-button clicked!"),t.next=9,s.readBookmarkList();case 9:s._initBookmarkListContextMenu();case 10:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"readBookmarkList",value:(n=h(regeneratorRuntime.mark(function t(){var e,n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n=c.default.Query.BookmarkRead.getInstance(),r=c.default.Control.Notification.getInstance(),t.prev=3,i=c.default.Map.MapConfig.getInstance(),console.log("-> bookmark query properties: "),o={url:i.getSourceUrl(),type:"read"},t.next=9,n.queryAsync(o,function(){console.log("Bookmark read query_good");var t=n.response();console.log("Bookmark read response: "),console.log(t),t&&"success"===t.resultcode&&t.result?e.resetMarkListDataSource(t.result):e._bookmarkMenu&&r.showError(c.default.Local.Control.Bookmark.readFail())},function(){console.log("Bookmark add query_error"),e._bookmarkMenu&&r.showError(c.default.Local.Control.Bookmark.readFail())});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log("Bookmark add error:"+t.t0);case 14:case"end":return t.stop()}},t,this,[[3,11]])})),function(){return n.apply(this,arguments)})},{key:"deleteBookmarkFunction",value:(t=h(regeneratorRuntime.mark(function t(){var n,e,r,i,o,a,s,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=(n=this)._currentBookmarkIndex,r=n._bookmarkRecordList[e].title,i=n._bookmarkRecordList[e].coordinates,o=n._bookmarkRecordList[e].id,a=c.default.Query.BookmarkDelete.getInstance(),s=c.default.Control.Notification.getInstance(),t.prev=7,l=c.default.Map.MapConfig.getInstance(),console.log("-> bookmark delete properties: "),u={url:l.getSourceUrl(),coordinates:i,title:r,id:o,type:"del"},t.next=13,a.queryAsync(u,function(){var t=h(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Bookmark delete query_good"),e=a.response(),console.log("Bookmark delete response: "),console.log(e),!e||"success"!==e.resultcode){t.next=10;break}return s.showSuccess(decodeURIComponent(r)+c.default.Local.Control.Bookmark.deleteOk()),t.next=8,n.readBookmarkList();case 8:t.next=11;break;case 10:s.showError(decodeURIComponent(r)+c.default.Local.Control.Bookmark.deleteFail());case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),function(){console.log("Bookmark add query_error"),s.showError(decodeURIComponent(r)+c.default.Local.Control.Bookmark.deleteFail())});case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),console.log("Bookmark delete error:"+t.t0);case 18:case"end":return t.stop()}},t,this,[[7,15]])})),function(){return t.apply(this,arguments)})},{key:"_initBookmarkListContextMenu",value:function(){var n,r=this;$("div#bookmark-div").bind("contextmenu",function(t){t.preventDefault()}),r._bookmarkMenu=$("#bookmark-div").contextmenu({delegate:"div.k-grid tr.k-state-selected",menu:[{title:r._local_bookmark.deleteBookmark(),cmd:"bookmarkDelete",uiIcon:"ui-icon custom-icon-clearall"}],select:(n=h(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.cmd,t.next="bookmarkDelete"===t.t0?3:7;break;case 3:return console.log("bookmarkDelete: "),t.next=6,r.deleteBookmarkFunction();case 6:return t.abrupt("break",7);case 7:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})})}},{key:"resetMarkListDataSource",value:function(t){this._bookmarkRecordList=t;for(var e=[],n=0;n<t.length;n++){var r=t[n].title,i=decodeURIComponent(r);e.push({bookmarkField:i})}var o=new kendo.data.DataSource({data:e});this._bookmarkRecordGrid.setDataSource(o),this._currentBookmarkIndex=-1,console.log("datasource ---\x3e"),console.log(e)}}],[{key:"getInstance",value:function(t){return e._instance||(e._instance=new e(t)),e._instance}}]),e}();n.default=i},{"../kq":1075,"./BookmarkAddDialog":968}],968:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),d=r(t("../kq")),o=r(t("./Window"));function r(t){return t&&t.__esModule?t:{default:t}}function g(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._bookmarkAddDialog=null,this._isFirstOpen=!0,this._html=d.default.Local.Control.Bookmark.html}var e,n,r;return i(t,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__bookmark-name__",this._html.bookmarkName()).replace("__submit__",this._html.submit())}},{key:"open",value:(r=g(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initBookmarkAddWindow();case 3:e._initBookmarkAddHtml(),e._bookmarkAddDialog&&e._bookmarkAddDialog.open();case 5:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_init",value:(n=g(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initBookmarkAddWindow();case 3:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initBookmarkAddWindow",value:(e=g(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n={title:d.default.Local.Control.Bookmark.addBookmark(),width:"350px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:["Close"],close:function(){console.log("Bookmark Add Dialog on close!"),e.remove()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new o.default(e._getBookmarkAddDialogId(),n),t.next=5,r.initAsync(function(){e._bookmarkAddDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initBookmarkAddHtml",value:function(){var e,p=this;$("#bookmark-add-confirm-button").kendoButton({click:(e=g(regeneratorRuntime.mark(function t(e){var r,n,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("bookmark-add-button clicked!"),r=d.default.Control.Notification.getInstance(),$("#bookmark-add-title-input").val()){t.next=7;break}r.showError(d.default.Local.Control.Bookmark.bookmarkNone()),t.next=27;break;case 7:return n=d.default.Control.Manager.getInstance().getMapView(),i=n.getBounds(),o=i.getSouthWest(),a=i.getNorthEast(),o.lat+","+o.lng+","+a.lat+","+a.lng,s=n.getCenter(),l=n.getZoom(),u=$("#bookmark-add-title-input").val(),c=d.default.Query.BookmarkAdd.getInstance(),t.prev=16,h=d.default.Map.MapConfig.getInstance(),console.log("-> bookmark add properties: "),f={url:h.getSourceUrl(),coordinates:s.lng+","+s.lat,title:encodeURIComponent($("#bookmark-add-title-input").val()),scalelevel:l,type:"ADD"},t.next=22,c.queryAsync(f,function(){var t=g(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Bookmark add query_good"),e=c.response(),console.log("Bookmark add response: "),console.log(e),!e||"success"!==e.resultcode){t.next=11;break}return r.showSuccess(u+d.default.Local.Control.Bookmark.addOk()),n=d.default.Control.Manager.getInstance().getControl("bookmark"),t.next=9,n.readBookmarkList();case 9:t.next=12;break;case 11:r.showError(u+d.default.Local.Control.Bookmark.addFail());case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),function(){console.log("Bookmark add query_error"),r.showError(u+d.default.Local.Control.Bookmark.addFail())});case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(16),console.log("Bookmark add error:"+t.t0);case 27:setTimeout(function(){p._bookmarkAddDialog.close()},150);case 28:case"end":return t.stop()}},t,this,[[16,24]])})),function(t){return e.apply(this,arguments)})})}},{key:"remove",value:function(){this._bookmarkAddDialog&&(t._instance=null,this._bookmarkAddDialog.destroy())}},{key:"_getBookmarkAddDialogId",value:function(){return"bookmark-add-dialog"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075,"./Window":1034}],969:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return i(t,[{key:"_getMap",value:function(){return a.default.Control.Manager.getInstance()._getMap()}},{key:"_getMapView",value:function(){return a.default.Control.Manager.getInstance().getMapView()}},{key:"_getBuilding",value:function(){var n=this,r=a.default.Map.MapBuilding.getInstance();return r.setOnClick(function(t){var e=r.getData(t.feature).properties;$("#popup_properties").length&&$("#popup_properties").remove(),L.popup({minWidth:240}).setLatLng([t.lat,t.lon]).setContent('<div id="popup_properties"></div>').openOn(n._getMap()),$("#popup_properties").kendoGrid({selectable:"row",allowCopy:!0,columns:[{field:"Field",title:a.default.Local.Control.infoQueryDialog.columns.field()},{field:"Value",title:a.default.Local.Control.infoQueryDialog.columns.value()}],dataSource:e}),$("#popup_properties .k-grid-content").css("max-height","200px")}),r}},{key:"_getQueryInfoManager",value:function(){return a.default.Common.QueryInfoManager.getInstance()}},{key:"_isDisplayZoom",value:function(){var t=this._getMap(),e=this._getBuilding(),n=t.getZoom();return e.minZoom()<=n}},{key:"_isBuildingLayer",value:function(t){var e=this._getQueryInfoManager(),n=e._findMapConfigLayer(t);return"1"===e._mapConfig().getLayerProperty(n,"is_building")}},{key:"_getBuildingHeightField",value:function(t){var e=this._getQueryInfoManager(),n=e._findMapConfigLayer(t);return e._mapConfig().getLayerProperty(n,"building_height_field")}},{key:"_getQueryOptions",value:function(t){for(var e=this._getQueryInfoManager(),n=e._getBuildingQueryOptions(t),r=0;r<n.length;++r)n[r].geometry=JSON.stringify(e._LatLngBoundsToGeometry(this._getMap().getBounds())),n[r].reqcount=1e3;return n}},{key:"_getData",value:(r=s(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._queryData(e);case 2:return n=t.sent,r=e.fields.split(","),t.abrupt("return",this._organizeData(n,r));case 5:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_queryData",value:(n=s(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.default.Query.InfoQuery.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"_organizeData",value:function(t,e){for(var n=0;n<t.length;++n){var r=[],i=t[n].properties;for(var o in i)-1<$.inArray(o,e)&&r.push({Field:o,Value:i[o]});t[n].properties=r}return t}},{key:"_addDataToBuilding",value:function(t,e){for(var n=this._getBuilding(),r=0;r<t.length;++r){var i=t[r],o=a.default.Common.CommonTools.geoJsonFromGeometry(i.geometry,{}).toGeoJSON();o.features[0].properties=i.properties,n.addData(o,{buildingHeightField:e})}}},{key:"_getCheckedLayer",value:function(){return a.default.Common.QueryInfoManager.getInstance()._checkedLayers()}},{key:"_addToMapView",value:function(){this._getBuilding().addToMapView(this._getMapView())}},{key:"load",value:(e=s(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this._getCheckedLayer(),n=!1,r=0;case 3:if(!(r<e.length)){t.next=21;break}if(i=e[r],!this._isBuildingLayer(i)){t.next=18;break}n||(n=!0,this._addToMapView()),o=this._getQueryOptions(i),a=this._getBuildingHeightField(i),s=0;case 10:if(!(s<o.length)){t.next=18;break}return t.next=13,this._getData(o[s]);case 13:l=t.sent,this._addDataToBuilding(l,a);case 15:++s,t.next=10;break;case 18:++r,t.next=3;break;case 21:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"remove",value:function(){this._getBuilding().remove()}},{key:"clearData",value:function(){this._getBuilding().clearData()}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=l},{"../kq":1075}],970:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),v=(r=o)&&r.__esModule?r:{default:r};function b(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var x={parentID:"map",basemapType:null,position:"topleft",isShowCursor:!0,cursorOpacity:.5,cursorColor:"#dc2027",cursorRadius:20,isEnable2Win:!0,isEnable3Win:!1,isEnable4Win:!0,isEnable5Win:!1,isEnable6Win:!1},y={title:"",modal:!0,actions:["Close"],visible:!1,width:300,height:400},a=12,u=a/2,h=Math.floor(a/3),p=Math.floor(a/4),g=Math.floor(a/5),w=Math.floor(a/6),C="",s=function(){function _(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),this.local=v.default.Local.Control.compare,y.title=this.local.window.treeTitle(),C=this.local.window.title(),this.options=L.extend({},x,t),this.options.maxSelectedNumber&&(a=this.options.maxSelectedNumber,u=a/2,h=Math.floor(a/3),p=Math.floor(a/4),g=Math.floor(a/5),w=Math.floor(a/6))}var e;return i(_,[{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"initAsync",value:(e=b(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],(n=this).options.isEnable2Win&&r.push({text:this.local.dialog.actionsText2(),primary:!0,action:n._twoWindowCompare}),n.options.isEnable3Win&&r.push({text:this.local.dialog.actionsText3(),action:n._threeWindowCompare}),n.options.isEnable4Win&&r.push({text:this.local.dialog.actionsText4(),action:n._fourWindowCompare}),n.options.isEnable5Win&&r.push({text:this.local.dialog.actionsText5(),action:n._fiveWindowCompare}),n.options.isEnable6Win&&r.push({text:this.local.dialog.actionsText6(),action:n._sixWindowCompare}),i=new v.default.Control.Dialog({parentID:n.options.parentID,id:"compare-dialog",title:this.local.dialog.title(),width:"300",closable:!0,modal:!0,content:this.local.dialog.content(),self:n,actions:r,close:function(){console.log("on close!")}}),t.next=10,i.initAsync(function(){n.button=new v.default.Control.MapButton("iconfont icon-layer-compare",function(t,e){i.open()},n.local.button.title(),"kq-compare"),n.buttonBar=new v.default.Control.MapButtonBar([n.button],{position:n.options.position}),n.buttonBar.setAttribute("id","compare-buttonbar")});case 10:return e&&e(),t.abrupt("return",!0);case 12:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_twoWindowCompare",value:function(t){console.log("compare-dialog 2 window!");var o=t.sender.options.self,a=o._getContextMenuWidth(),s=null,l=new v.default.Control.Window("compare-2win",{parentID:o.options.parentID,title:C,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-2win on close!"),l._remove()}});l.initAsync(function(){l._object().maximize(),l.open(),$("#splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-left").kendoWindow(y),$("#window-tree-right").kendoWindow(y);var t=null,e=null,n=null,r=null,i=v.default.Map.MapConfig.getInstance();i.initAsync("",!1,function(){(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:a,contextmenuItems:[{text:o.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&n.setCheckedLayers(t.getCheckedLayers())}},"-",{text:o.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-left").data("kendoWindow").center().open()}},{text:o.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){n.clearSelectedLayers()}},{text:o.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){s=n.getCheckedLayers()}},{text:o.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){s&&(n.clearSelectedLayers(),n.setCheckedLayers(s))}},"-",{text:o.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){o._setIsSync(t,!0),o._sync([t,e])}},{text:o.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){o._setIsSync(t,!1),o._unsync(t,[e])}}]},o.options.basemapType))._customInitAsync("map-left",function(){(n=new v.default.Control.LayerTree).createTree(i,"map-control-tree-left"),n.setMaxLayerSelectedNumber(u),n.selectedLayers(o.options.selectedLayers),n.setMap(t._getMap()),n.addTo(t._getMap())}),(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:a,contextmenuItems:[{text:o.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&r.setCheckedLayers(t.getCheckedLayers())}},"-",{text:o.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-right").data("kendoWindow").center().open()}},{text:o.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){r.clearSelectedLayers()}},{text:o.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){s=r.getCheckedLayers()}},{text:o.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){s&&(r.clearSelectedLayers(),r.setCheckedLayers(s))}},"-",{text:o.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){o._setIsSync(e,!0),o._sync([t,e])}},{text:o.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){o._setIsSync(e,!1),o._unsync(e,[t])}}]},o.options.basemapType))._customInitAsync("map-right",function(){(r=new v.default.Control.LayerTree).createTree(i,"map-control-tree-right"),r.setMaxLayerSelectedNumber(u),r.selectedLayers(o.options.selectedLayers),r.setMap(e._getMap()),r.addTo(e._getMap())}),o._sync([t,e])})})}},{key:"_threeWindowCompare",value:function(t){console.log("compare-dialog 3 window!");var s=t.sender.options.self,l=s._getContextMenuWidth(),u=null,c=new v.default.Control.Window("compare-3win",{parentID:s.options.parentID,title:C,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-3win on close!"),c._remove()}});c.initAsync(function(){c._object().maximize(),c.open(),$("#splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-left").kendoWindow(y),$("#window-tree-mid").kendoWindow(y),$("#window-tree-right").kendoWindow(y);var t=null,e=null,n=null,r=null,i=null,o=null,a=v.default.Map.MapConfig.getInstance();a.initAsync("",!1,function(){(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:l,contextmenuItems:[{text:s.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&r.setCheckedLayers(t.getCheckedLayers())}},"-",{text:s.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-left").data("kendoWindow").center().open()}},{text:s.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){r.clearSelectedLayers()}},{text:s.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){u=r.getCheckedLayers()}},{text:s.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){u&&(r.clearSelectedLayers(),r.setCheckedLayers(u))}},"-",{text:s.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){s._setIsSync(t,!0),s._sync([t,e,n])}},{text:s.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){s._setIsSync(t,!1),s._unsync(t,[e,n])}}]},s.options.basemapType))._customInitAsync("map-left",function(){(r=new v.default.Control.LayerTree).createTree(a,"map-control-tree-left"),r.setMaxLayerSelectedNumber(h),r.selectedLayers(s.options.selectedLayers),r.setMap(t._getMap()),r.addTo(t._getMap())}),(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:l,contextmenuItems:[{text:s.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&i.setCheckedLayers(t.getCheckedLayers())}},"-",{text:s.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-mid").data("kendoWindow").center().open()}},{text:s.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){i.clearSelectedLayers()}},{text:s.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){u=i.getCheckedLayers()}},{text:s.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){u&&(i.clearSelectedLayers(),i.setCheckedLayers(u))}},"-",{text:s.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){s._setIsSync(e,!0),s._sync([t,e,n])}},{text:s.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){s._setIsSync(e,!1),s._unsync(e,[t,n])}}]},s.options.basemapType))._customInitAsync("map-mid",function(){(i=new v.default.Control.LayerTree).createTree(a,"map-control-tree-mid"),i.setMaxLayerSelectedNumber(h),i.selectedLayers(s.options.selectedLayers),i.setMap(e._getMap()),i.addTo(e._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:l,contextmenuItems:[{text:s.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&o.setCheckedLayers(t.getCheckedLayers())}},"-",{text:s.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-right").data("kendoWindow").center().open()}},{text:s.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){o.clearSelectedLayers()}},{text:s.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){u=o.getCheckedLayers()}},{text:s.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){u&&(o.clearSelectedLayers(),o.setCheckedLayers(u))}},"-",{text:s.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){s._setIsSync(n,!0),s._sync([t,e,n])}},{text:s.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){s._setIsSync(n,!1),s._unsync(n,[t,e])}}]},s.options.basemapType))._customInitAsync("map-right",function(){(o=new v.default.Control.LayerTree).createTree(a,"map-control-tree-right"),o.setMaxLayerSelectedNumber(h),o.selectedLayers(s.options.selectedLayers),o.setMap(n._getMap()),o.addTo(n._getMap())}),s._sync([t,e,n])})})}},{key:"_fourWindowCompare",value:function(t){console.log("compare-dialog 4 window!");var u=t.sender.options.self,c=u._getContextMenuWidth(),h=null,f=new v.default.Control.Window("compare-4win",{parentID:u.options.parentID,title:C,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-4win on close!"),f._remove()}});f.initAsync(function(){f._object().maximize(),f.open(),$("#vertical-splitter").kendoSplitter({orientation:"vertical",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line0").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line1").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-line0-0").kendoWindow(y),$("#window-tree-line0-1").kendoWindow(y),$("#window-tree-line1-0").kendoWindow(y),$("#window-tree-line1-1").kendoWindow(y);var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=v.default.Map.MapConfig.getInstance();l.initAsync("",!1,function(){(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&i.setCheckedLayers(t.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-0").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){i.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=i.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(i.clearSelectedLayers(),i.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(t,!0),u._sync([t,e,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(t,!1),u._unsync(t,[e,n,r])}}]},u.options.basemapType))._customInitAsync("map-line0-0",function(){(i=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line0-0"),i.setMaxLayerSelectedNumber(p),i.selectedLayers(u.options.selectedLayers),i.setMap(t._getMap()),i.addTo(t._getMap())}),(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&o.setCheckedLayers(t.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-1").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),o.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=o.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(o.clearSelectedLayers(),o.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(e,!0),u._sync([t,e,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(e,!1),u._unsync(e,[t,n,r])}}]},u.options.basemapType))._customInitAsync("map-line0-1",function(){(o=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line0-1"),o.setMaxLayerSelectedNumber(p),o.selectedLayers(u.options.selectedLayers),o.setMap(e._getMap()),o.addTo(e._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&a.setCheckedLayers(t.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-0").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){a.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=a.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(a.clearSelectedLayers(),a.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(n,!0),u._sync([t,e,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(n,!1),u._unsync(n,[t,e,r])}}]},u.options.basemapType))._customInitAsync("map-line1-0",function(){(a=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line1-0"),a.setMaxLayerSelectedNumber(p),a.selectedLayers(u.options.selectedLayers),a.setMap(n._getMap()),a.addTo(n._getMap())}),(r=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:c,contextmenuItems:[{text:u.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&s.setCheckedLayers(t.getCheckedLayers())}},"-",{text:u.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-1").data("kendoWindow").center().open()}},{text:u.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),s.clearSelectedLayers()}},{text:u.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){h=s.getCheckedLayers()}},{text:u.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){h&&(s.clearSelectedLayers(),s.setCheckedLayers(h))}},"-",{text:u.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){u._setIsSync(r,!0),u._sync([t,e,n,r])}},{text:u.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){u._setIsSync(r,!1),u._unsync(r,[t,e,n])}}]},u.options.basemapType))._customInitAsync("map-line1-1",function(){(s=new v.default.Control.LayerTree).createTree(l,"map-control-tree-line1-1"),s.setMaxLayerSelectedNumber(p),s.selectedLayers(u.options.selectedLayers),s.setMap(r._getMap()),s.addTo(r._getMap())}),u._sync([t,e,n,r])})})}},{key:"_fiveWindowCompare",value:function(t){console.log("compare-dialog 5 window!");var h=t.sender.options.self,f=h._getContextMenuWidth(),p=null,d=new v.default.Control.Window("compare-5win",{parentID:h.options.parentID,title:C,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-5win on close!"),d._remove()}});d.initAsync(function(){d._object().maximize(),d.open(),$("#vertical-splitter").kendoSplitter({orientation:"vertical",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line0").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line1").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-line0-0").kendoWindow(y),$("#window-tree-line0-1").kendoWindow(y),$("#window-tree-line1-0").kendoWindow(y),$("#window-tree-line1-1").kendoWindow(y),$("#window-tree-line1-2").kendoWindow(y);var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null,c=v.default.Map.MapConfig.getInstance();c.initAsync("",!1,function(){(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&o.setCheckedLayers(t.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-0").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){o.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){p=o.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){p&&(o.clearSelectedLayers(),o.setCheckedLayers(p))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(t,!0),h._sync([t,e,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(t,!1),h._unsync(t,[e,n,r,i])}}]},h.options.basemapType))._customInitAsync("map-line0-0",function(){(o=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line0-0"),o.setMaxLayerSelectedNumber(g),o.selectedLayers(h.options.selectedLayers),o.setMap(t._getMap()),o.addTo(t._getMap())}),(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&a.setCheckedLayers(t.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-1").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),a.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){p=a.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){p&&(a.clearSelectedLayers(),a.setCheckedLayers(p))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(e,!0),h._sync([t,e,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(e,!1),h._unsync(e,[t,n,r,i])}}]},h.options.basemapType))._customInitAsync("map-line0-1",function(){(a=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line0-1"),a.setMaxLayerSelectedNumber(g),a.selectedLayers(h.options.selectedLayers),a.setMap(e._getMap()),a.addTo(e._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&s.setCheckedLayers(t.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-0").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){s.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){p=s.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){p&&(s.clearSelectedLayers(),s.setCheckedLayers(p))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(n,!0),h._sync([t,e,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(n,!1),h._unsync(n,[t,e,r,i])}}]},h.options.basemapType))._customInitAsync("map-line1-0",function(){(s=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line1-0"),s.setMaxLayerSelectedNumber(g),s.selectedLayers(h.options.selectedLayers),s.setMap(n._getMap()),s.addTo(n._getMap())}),(r=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&l.setCheckedLayers(t.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-1").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),l.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){p=l.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){p&&(l.clearSelectedLayers(),l.setCheckedLayers(p))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(r,!0),h._sync([t,e,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(r,!1),h._unsync(r,[t,e,n,i])}}]},h.options.basemapType))._customInitAsync("map-line1-1",function(){(l=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line1-1"),l.setMaxLayerSelectedNumber(g),l.selectedLayers(h.options.selectedLayers),l.setMap(r._getMap()),l.addTo(r._getMap())}),(i=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:f,contextmenuItems:[{text:h.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&u.setCheckedLayers(t.getCheckedLayers())}},"-",{text:h.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-2").data("kendoWindow").center().open()}},{text:h.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),u.clearSelectedLayers()}},{text:h.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){p=u.getCheckedLayers()}},{text:h.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){p&&(u.clearSelectedLayers(),u.setCheckedLayers(p))}},"-",{text:h.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){h._setIsSync(i,!0),h._sync([t,e,n,r,i])}},{text:h.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){h._setIsSync(i,!1),h._unsync(i,[t,e,n,r])}}]},h.options.basemapType))._customInitAsync("map-line1-2",function(){(u=new v.default.Control.LayerTree).createTree(c,"map-control-tree-line1-2"),u.setMaxLayerSelectedNumber(g),u.selectedLayers(h.options.selectedLayers),u.setMap(i._getMap()),u.addTo(i._getMap())}),h._sync([t,e,n,r,i])})})}},{key:"_sixWindowCompare",value:function(t){console.log("compare-dialog 6 window!");var p=t.sender.options.self,d=p._getContextMenuWidth(),g=null,m=new v.default.Control.Window("compare-6win",{parentID:p.options.parentID,title:C,draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("compare-6win on close!"),m._remove()}});m.initAsync(function(){m._object().maximize(),m.open(),$("#vertical-splitter").kendoSplitter({orientation:"vertical",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line0").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#h-splitter-line1").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]}),$("#window-tree-line0-0").kendoWindow(y),$("#window-tree-line0-1").kendoWindow(y),$("#window-tree-line0-2").kendoWindow(y),$("#window-tree-line1-0").kendoWindow(y),$("#window-tree-line1-1").kendoWindow(y),$("#window-tree-line1-2").kendoWindow(y);var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null,f=v.default.Map.MapConfig.getInstance();f.initAsync("",!1,function(){(t=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:d,contextmenuItems:[{text:p.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&a.setCheckedLayers(t.getCheckedLayers())}},"-",{text:p.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-0").data("kendoWindow").center().open()}},{text:p.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){a.clearSelectedLayers()}},{text:p.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){g=a.getCheckedLayers()}},{text:p.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){g&&(a.clearSelectedLayers(),a.setCheckedLayers(g))}},"-",{text:p.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){p._setIsSync(t,!0),p._sync([t,e,n,r,i,o])}},{text:p.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){p._setIsSync(t,!1),p._unsync(t,[e,n,r,i,o])}}]},p.options.basemapType))._customInitAsync("map-line0-0",function(){(a=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line0-0"),a.setMaxLayerSelectedNumber(w),a.selectedLayers(p.options.selectedLayers),a.setMap(t._getMap()),a.addTo(t._getMap())}),(e=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:d,contextmenuItems:[{text:p.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&s.setCheckedLayers(t.getCheckedLayers())}},"-",{text:p.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-1").data("kendoWindow").center().open()}},{text:p.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),s.clearSelectedLayers()}},{text:p.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){g=s.getCheckedLayers()}},{text:p.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){g&&(s.clearSelectedLayers(),s.setCheckedLayers(g))}},"-",{text:p.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){p._setIsSync(e,!0),p._sync([t,e,n,r,i,o])}},{text:p.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){p._setIsSync(e,!1),p._unsync(e,[t,n,r,i,o])}}]},p.options.basemapType))._customInitAsync("map-line0-1",function(){(s=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line0-1"),s.setMaxLayerSelectedNumber(w),s.selectedLayers(p.options.selectedLayers),s.setMap(e._getMap()),s.addTo(e._getMap())}),(n=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:d,contextmenuItems:[{text:p.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&l.setCheckedLayers(t.getCheckedLayers())}},"-",{text:p.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line0-2").data("kendoWindow").center().open()}},{text:p.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),l.clearSelectedLayers()}},{text:p.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){g=l.getCheckedLayers()}},{text:p.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){g&&(l.clearSelectedLayers(),l.setCheckedLayers(g))}},"-",{text:p.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){p._setIsSync(n,!0),p._sync([t,e,n,r,i,o])}},{text:p.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){p._setIsSync(n,!1),p._unsync(n,[t,e,r,i,o])}}]},p.options.basemapType))._customInitAsync("map-line0-2",function(){(l=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line0-2"),l.setMaxLayerSelectedNumber(w),l.selectedLayers(p.options.selectedLayers),l.setMap(n._getMap()),l.addTo(n._getMap())}),(r=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:d,contextmenuItems:[{text:p.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&u.setCheckedLayers(t.getCheckedLayers())}},"-",{text:p.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-0").data("kendoWindow").center().open()}},{text:p.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){u.clearSelectedLayers()}},{text:p.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){g=u.getCheckedLayers()}},{text:p.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){g&&(u.clearSelectedLayers(),u.setCheckedLayers(g))}},"-",{text:p.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){p._setIsSync(r,!0),p._sync([t,e,n,r,i,o])}},{text:p.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){p._setIsSync(r,!1),p._unsync(r,[t,e,n,i,o])}}]},p.options.basemapType))._customInitAsync("map-line1-0",function(){(u=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line1-0"),u.setMaxLayerSelectedNumber(w),u.selectedLayers(p.options.selectedLayers),u.setMap(r._getMap()),u.addTo(r._getMap())}),(i=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:d,contextmenuItems:[{text:p.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&c.setCheckedLayers(t.getCheckedLayers())}},"-",{text:p.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-1").data("kendoWindow").center().open()}},{text:p.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),c.clearSelectedLayers()}},{text:p.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){g=c.getCheckedLayers()}},{text:p.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){g&&(c.clearSelectedLayers(),c.setCheckedLayers(g))}},"-",{text:p.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){p._setIsSync(i,!0),p._sync([t,e,n,r,i,o])}},{text:p.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){p._setIsSync(i,!1),p._unsync(i,[t,e,n,r,o])}}]},p.options.basemapType))._customInitAsync("map-line1-1",function(){(c=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line1-1"),c.setMaxLayerSelectedNumber(w),c.selectedLayers(p.options.selectedLayers),c.setMap(i._getMap()),c.addTo(i._getMap())}),(o=new v.default.Map.MapView({is_sync:!0,contextmenu:!0,contextmenuWidth:d,contextmenuItems:[{text:p.local.contextMenu.useMainMap(),iconCls:"iconfont icon-main-map",callback:function(){var t=v.default.Control.Manager.getInstance().getControl("tree");t&&h.setCheckedLayers(t.getCheckedLayers())}},"-",{text:p.local.contextMenu.selectLayer(),iconCls:"iconfont icon-layers",callback:function(){$("#window-tree-line1-2").data("kendoWindow").center().open()}},{text:p.local.contextMenu.clearLayer(),iconCls:"iconfont icon-clear",callback:function(){console.log("清空图层"),h.clearSelectedLayers()}},{text:p.local.contextMenu.copyLayer(),iconCls:"iconfont icon-copy",callback:function(){g=h.getCheckedLayers()}},{text:p.local.contextMenu.pasteLayer(),iconCls:"iconfont icon-paste",callback:function(){g&&(h.clearSelectedLayers(),h.setCheckedLayers(g))}},"-",{text:p.local.contextMenu.sync(),iconCls:"iconfont icon-sync",callback:function(){p._setIsSync(o,!0),p._sync([t,e,n,r,i,o])}},{text:p.local.contextMenu.syncCancel(),iconCls:"iconfont icon-sync-disabled",callback:function(){p._setIsSync(o,!1),p._unsync(o,[t,e,n,r,i])}}]},p.options.basemapType))._customInitAsync("map-line1-2",function(){(h=new v.default.Control.LayerTree).createTree(f,"map-control-tree-line1-2"),h.setMaxLayerSelectedNumber(w),h.selectedLayers(p.options.selectedLayers),h.setMap(o._getMap()),h.addTo(o._getMap())}),p._sync([t,e,n,r,i,o])})})}},{key:"_getContextMenuWidth",value:function(){return"en"===v.default.Local.getCurrentLanguage()?160:100}},{key:"_sync",value:function(t){_._staticSync(t,this.options)}},{key:"_unsync",value:function(e,t){e._getMap().unsyncSelf(),t.forEach(function(t){e!==t&&t._getMap().unsync(e._getMap())})}},{key:"_setIsSync",value:function(t,e){t._getMap().options.is_sync=e}}],[{key:"compareTwoMap",value:function(o,a){var n,t=(n=b(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.default.Common.NetworkTools.httpGetAsync(v.default.Common.CommonValues.kqwebmapPath+"window/compare-two-map.html");case 2:if("error"!==(r=t.sent)){t.next=7;break}return console.log("compare-two-map load html error!"),n&&n(),t.abrupt("return",!1);case 7:if(console.log("compare-two-map load html successfully！"),!((i=$("#"+s)).length<=0)){t.next=13;break}return console.log("compare-two-map: "+s+" was not found!"),n&&n(),t.abrupt("return",!1);case 13:return i.resize(function(){console.log("compareTwoMap parentdiv resize!")}),i.append(r),e&&e(),t.abrupt("return",!0);case 17:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)});console.log("compare-two-map!");var s=o.parentID,l=_._getCheckedLayerKeys(o.leftLayerInfos),u=_._getCheckedLayerKeys(o.rightLayerInfos),c=o.leftGeoJSON,h=o.rightGeoJSON,f=null,p=null,d=o.zoom,g=o.center,m=o.leftQueryLayerInfo,y=o.rightQueryLayerInfo;t(function(){console.log("_loadHtml success!"),$("#ctm-splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]});var r=null,i=null;v.default.Map.MapConfig.getInstance().initAsync("",!1,function(){(f=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-left",function(){r=new v.default.Map.MapLayerManager;for(var t=0;t<l.length;t++){r.getLayerFromKey(l[t]).addTo(f._getMap())}c&&c.addTo(f._getMap()),o.left_layerManager=r,o.mapView_left=f}),(p=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-right",function(){i=new v.default.Map.MapLayerManager;for(var t=0;t<u.length;t++){i.getLayerFromKey(u[t]).addTo(p._getMap())}h&&h.addTo(p._getMap()),o.right_layerManager=i,o.mapView_right=p}),g&&(f._getMap().panTo(g),p._getMap().panTo(g)),d&&(f._getMap().setZoom(d),p._getMap().setZoom(d));var t=new v.default.Control.InfoQueryDialog({html:'<div id="left-info-query-dialog"><ul id="left-info-query-record-list"></ul><div id="left-info-query-property-grid"></div></div>',map:f._getMap(),parent:"ctm-map-left"}),e=new v.default.Control.InfoQueryDialog({html:'<div id="right-info-query-dialog"><ul id="right-info-query-record-list"></ul><div id="right-info-query-property-grid"></div></div>',map:p._getMap(),parent:"ctm-map-right"});m&&y&&(new v.default.Control.ToolBar({position:"bottomright",subControls:[{type:"roaming",options:{}},{type:"custom_info-query",options:{sourceName:m.src_name,layerId:m.id,dialog:t}}]}).addTo(f._getMap()),new v.default.Control.ToolBar({position:"bottomright",subControls:[{type:"roaming",options:{}},{type:"custom_info-query",options:{sourceName:y.src_name,layerId:y.id,dialog:e}}]}).addTo(p._getMap()));if(_._staticSync([f,p],x),o.win){var n=o.win._getKendoObject();n.bind("resize",function(){f._getMap().invalidateSize(),p._getMap().invalidateSize()}),n.bind("close",function(){o.win._remove()})}a._compareMapViewList=[],a._compareMapViewList.push(f),a._compareMapViewList.push(p)})},function(){console.log("_loadHtml error!")})}},{key:"compareThreeMap",value:function(i,o){var n,t=(n=b(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.default.Common.NetworkTools.httpGetAsync(v.default.Common.CommonValues.kqwebmapPath+"window/compare-three-map.html");case 2:if("error"!==(r=t.sent)){t.next=7;break}return console.log("compare-three-map load html error!"),n&&n(),t.abrupt("return",!1);case 7:if(console.log("compare-three-map load html successfully！"),!((i=$("#"+a)).length<=0)){t.next=13;break}return console.log("compare-three-map: "+a+" was not found!"),n&&n(),t.abrupt("return",!1);case 13:return i.resize(function(){console.log("compare-three-map: parentdiv resize!")}),i.append(r),e&&e(),t.abrupt("return",!0);case 17:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)});console.log("compare-three-map!");var a=i.parentID,s=_._getCheckedLayerKeys(i.leftLayerInfos),l=_._getCheckedLayerKeys(i.rightLayerInfos),u=_._getCheckedLayerKeys(i.midLayerInfos),c=null,h=null,f=null,p=i.zoom,d=i.center;t(function(){console.log("_loadHtml success!"),$("#ctm-splitter").kendoSplitter({orientation:"horizontal",panes:[{resizable:!1},{resizable:!1}]});var e=null,n=null,r=null;v.default.Map.MapConfig.getInstance().initAsync("",!1,function(){if((c=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-left",function(){e=new v.default.Map.MapLayerManager;for(var t=0;t<s.length;t++){e.getLayerFromKey(s[t]).addTo(c._getMap())}i.left_layerManager=e,i.mapView_left=c}),(h=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-right",function(){n=new v.default.Map.MapLayerManager;for(var t=0;t<l.length;t++){n.getLayerFromKey(l[t]).addTo(h._getMap())}i.right_layerManager=n,i.mapView_right=h}),(f=new v.default.Map.MapView({is_sync:!0}))._customInitAsync("ctm-map-mid",function(){r=new v.default.Map.MapLayerManager;for(var t=0;t<u.length;t++){r.getLayerFromKey(u[t]).addTo(f._getMap())}i.mid_layerManager=r,i.mapView_mid=f}),d&&(c._getMap().panTo(d),h._getMap().panTo(d),f._getMap().panTo(d)),p&&(c._getMap().setZoom(p),h._getMap().setZoom(p),f._getMap().setZoom(p)),_._staticSync([c,h,f],x),i.win){var t=i.win._getKendoObject();t.bind("resize",function(){c._getMap().invalidateSize(),h._getMap().invalidateSize(),f._getMap().invalidateSize()}),t.bind("close",function(){i.win._remove()})}o._compareMapViewList=[],o._compareMapViewList.push(c),o._compareMapViewList.push(h),o._compareMapViewList.push(f)})},function(){console.log("_loadHtml error!")})}},{key:"_staticSync",value:function(t,e){for(var n={fillOpacity:e.cursorOpacity,fillColor:e.cursorColor,radius:e.cursorRadius,stroke:!1,pane:"tooltipPane"},r=0;r<t.length;r++)for(var i=t[r]._getMap(),o=0;o<t.length;o++){var a=t[o]._getMap();i!==a&&i.options.is_sync&&a.options.is_sync&&(console.log("["+r+", "+o+"] "),i.sync(a,{syncCursor:e.isShowCursor,syncCursorMarkerOptions:n}))}}},{key:"_getCheckedLayerKeys",value:function(t){console.log("layerInfos:"+t);var e=[];if(t&&t instanceof Array)for(var n=v.default.Map.MapConfig.getInstance(),r=0;r<t.length;r++){var i=n._getOptimizedSourceByOriginLayerInfo(t[r]),o=v.default.Map.MapCommon.getKeyFromSourceNameLayerId(i._name,t[r].id);e.push(o)}return e}}]),_}();n.default=s},{"../kq":1075}],971:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=ct(t("./Sidebar")),i=ct(t("./LayerTree")),o=ct(t("./MapLayerTree")),a=ct(t("./Draw")),s=ct(t("./OverlayAnalysis")),l=ct(t("./toolbar/ToolBar")),u=ct(t("./Manager")),c=ct(t("./Window")),h=ct(t("./MapButton")),f=ct(t("./MapButtonBar")),p=ct(t("./Waiting")),d=ct(t("./Notification")),g=ct(t("./AdvancedSearch")),m=ct(t("./FeatureImport")),y=ct(t("./Bookmark")),_=ct(t("./SimpleSidebar")),v=ct(t("./Dialog")),b=ct(t("./Compare")),x=ct(t("./SimplePrint")),w=ct(t("./MapPrint")),L=ct(t("./Upload")),C=ct(t("./Coordinates")),k=ct(t("./MapBaseLayer")),E=ct(t("./Scale")),S=ct(t("./AdvancedSearchResultDialog")),M=ct(t("./OverlayAnalysisResultDialog")),P=ct(t("./AdvancedSearchHistoryDialog")),I=ct(t("./SearchBarResultDialog")),T=ct(t("./BookmarkAddDialog")),O=ct(t("./MapInput")),N=ct(t("./Setting")),D=ct(t("./Playback")),A=ct(t("./toolbar/InfoQueryDialog")),R=ct(t("./RubberBand")),F=ct(t("./SideBySide")),j=ct(t("./ScreenShot")),B=ct(t("./MapSearchLight")),z=ct(t("./toolbar/OperatorToolButton")),q=ct(t("./SearchLightSizeDialog")),U=ct(t("./Measure")),G=ct(t("./SetLocation")),V=ct(t("./LocationDialog")),H=ct(t("./BuildingLoading")),W=ct(t("./Panorama")),X=ct(t("./MeasureSeparate")),Y=ct(t("./Plotting")),$=ct(t("./RubberBandSelect")),Z=ct(t("./OverlayAnalysisTree")),Q=ct(t("./custom/Custom")),K=ct(t("./custom/MainMenu")),J=ct(t("./custom/AdvMenu")),tt=ct(t("./custom/DrawMenu")),et=ct(t("./LegendQuery")),nt=ct(t("./MarkerCluster")),rt=ct(t("../free_draw/FreeDraw")),it=ct(t("./TimelineLayers")),ot=ct(t("./HistoryView")),at=ct(t("./HistoryCompare")),st=ct(t("./NetworkAnalysisDialog")),lt=ct(t("./SearchBar")),ut=ct(t("./AreaSelect"));function ct(t){return t&&t.__esModule?t:{default:t}}var ht={Sidebar:r.default,LayerTree:i.default,MapLayerTree:o.default,Draw:a.default,OverlayAnalysis:s.default,ToolBar:l.default,Manager:u.default,Window:c.default,MapButton:h.default,MapButtonBar:f.default,Waiting:p.default,Notification:d.default,AdvancedSearch:g.default,FeatureImport:m.default,Bookmark:y.default,SimpleSidebar:_.default,Dialog:v.default,Compare:b.default,SimplePrint:x.default,MapPrint:w.default,Upload:L.default,Coordinates:C.default,MapBaseLayer:k.default,Scale:E.default,AdvancedSearchResultDialog:S.default,OverlayAnalysisResultDialog:M.default,SearchBarResultDialog:I.default,AdvancedSearchHistoryDialog:P.default,BookmarkAddDialog:T.default,MapInput:O.default,Setting:N.default,Playback:D.default,InfoQueryDialog:A.default,RubberBand:R.default,SideBySide:F.default,ScreenShot:j.default,MapSearchLight:B.default,OperatorToolButton:z.default,SearchLightSizeDialog:q.default,Measure:U.default,SetLocation:G.default,LocationDialog:V.default,BuildingLoading:H.default,Panorama:W.default,MeasureSeparate:X.default,Plotting:Y.default,RubberBandSelect:$.default,OverlayAnalysisTree:Z.default,Custom:Q.default,MainMenu:K.default,AdvMenu:J.default,DrawMenu:tt.default,MarkerCluster:nt.default,LegendQuery:et.default,FreeDraw:rt.default,TimelineLayers:it.default,HistoryView:ot.default,HistoryCompare:at.default,NetworkAnalysisDialog:st.default,SearchBar:lt.default,AreaSelect:ut.default};n.default=ht},{"../free_draw/FreeDraw":1067,"./AdvancedSearch":963,"./AdvancedSearchHistoryDialog":964,"./AdvancedSearchResultDialog":965,"./AreaSelect":966,"./Bookmark":967,"./BookmarkAddDialog":968,"./BuildingLoading":969,"./Compare":970,"./Coordinates":972,"./Dialog":973,"./Draw":974,"./FeatureImport":975,"./HistoryCompare":978,"./HistoryView":979,"./LayerTree":981,"./LegendQuery":982,"./LocationDialog":984,"./Manager":985,"./MapBaseLayer":986,"./MapButton":987,"./MapButtonBar":988,"./MapInput":989,"./MapLayerTree":990,"./MapPrint":991,"./MapSearchLight":995,"./MarkerCluster":996,"./Measure":997,"./MeasureSeparate":998,"./NetworkAnalysisDialog":999,"./Notification":1e3,"./OverlayAnalysis":1001,"./OverlayAnalysisResultDialog":1003,"./OverlayAnalysisTree":1004,"./Panorama":1005,"./Playback":1006,"./Plotting":1007,"./RubberBand":1016,"./RubberBandSelect":1017,"./Scale":1018,"./ScreenShot":1019,"./SearchBar":1020,"./SearchBarResultDialog":1021,"./SearchLightSizeDialog":1022,"./SetLocation":1023,"./Setting":1024,"./SideBySide":1025,"./Sidebar":1026,"./SimplePrint":1027,"./SimpleSidebar":1028,"./TimelineLayers":1031,"./Upload":1032,"./Waiting":1033,"./Window":1034,"./custom/AdvMenu":1035,"./custom/Custom":1036,"./custom/DrawMenu":1037,"./custom/MainMenu":1038,"./toolbar/InfoQueryDialog":1049,"./toolbar/OperatorToolButton":1054,"./toolbar/ToolBar":1059}],972:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i={position:"bottomleft",decimals:2,label_x:"X",label_y:"Y",decimalSeperator:".",enableUserInput:!1,isProject:!1,isShowScaleIndex:!1,label_scale:"Scale"},o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L.extend({},i,t)}return r(e,[{key:"addTo",value:function(t){var o=this;o._map=t,o.options.labelTemplateLat=o.options.label_y+": {y}",o.options.labelTemplateLng=o.options.label_x+": {x}",o.options.customLabelFcn=function(t,e){var n=void 0;if(o.options.isProject){var r=o._map.options.crs;if(r){var i=r.project(t);n=o.options.label_x+": "+Number(i.x).toFixed(o.options.decimals)+" "+o.options.label_y+": "+Number(i.y).toFixed(o.options.decimals)}}else n=o.options.label_x+": "+Number(t.lng).toFixed(o.options.decimals)+" "+o.options.label_y+": "+Number(t.lat).toFixed(o.options.decimals);return o.options.isShowScaleIndex&&(n+=" "+o.options.label_scale+": "+o._map.getZoom()),n},o._coordinates=L.control.coordinates(o.options),o._coordinates.addTo(t)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}]),e}();n.default=o},{}],973:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i={parentID:"map",id:"dialog",title:"Window",width:"400",visible:!1,closable:!0,modal:!0,content:"<p>这里弹出你想要的<strong>内容</strong>. 是否可以?<p>",actions:[{text:"确定",primary:!0,action:function(t){console.log("dialog ok!")}},{text:"取消",action:function(t){console.log("dialog cancel!")}}],close:function(){console.log("on close!")}},o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L.extend({},i,t)}var t,n;return r(e,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,KQ.Map.MapConfig.getInstance(),0<(r=$("#"+n.options.id)).length&&r.remove(),i="<div id='"+n.options.id+"'></div>",(o=$("#"+n.options.parentID)).length<=0&&console.log("Dialog.initAsync: "+n.options.parentID+" was not found!"),o.append(i),r=$("#"+n.options.id),KQ.Common.CommonTools._loadKendoAndRun(function(){r.kendoDialog(n.options),n._dialog=r.data("kendoDialog")}),e&&e(),t.abrupt("return",!0);case 12:case"end":return t.stop()}},t,this)}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return n.apply(this,arguments)})},{key:"open",value:function(){this._dialog.open()}},{key:"close",value:function(){this._dialog.close()}},{key:"_remove",value:function(){this._dialog.destroy()}}]),e}();n.default=o},{}],974:[function(r,t,i){(function(d){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t,e=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),n=r("../kq"),g=(t=n)&&t.__esModule?t:{default:t};var o=r("@mapbox/geojson-merge"),m={position:"topleft",importExport:"1",importEncoding:"gbk",importMaxFeatureCount:1e3,maxEditPointCount:2e3,dataFormatList:["G","S"],importTxtFunction:function(t){console.log("importTxt!!!"+t.name)},exportTxtFunction:function(){console.log("exportTxt!!!")},importExcelFunction:function(t){console.log("importExcel!!!"+t.name)},exportExcelFunction:function(){console.log("exportExcel!!!")},importDwgDxfFunction:function(t){console.log("importDwgDxf!!!"+t.name)},exportDwgDxfFunction:function(){console.log("exportDwgDxf!!!")},onImportedFunction:function(t){console.log("onImported!")}};d.kqImportGeoJSON=function(t){console.log("kqImportGeoJSON:"+t.files[0].name);var i=g.default.Control.Manager.getInstance()._getMap(),o=g.default.Control.Manager.getInstance().getControl("draw");if(o){o.fire("import.loading"),g.default.Control.Waiting.show(i);var e=new FileReader;e.onloadend=function(t){var e=t.target.result,n=null;try{var r=JSON.parse(e);o._removeRedundantFeatures(r),n=new g.default.Map.MapGeoJSON(r),o.loadFromGeoJSON(n),n.getBounds().isValid()&&g.default.Map.MapCommon.fitBoundsLayer(n,i),g.default.Control.Waiting.close(),g.default.Control.Notification.getInstance().showSuccess(g.default.Local.Control.drawControl.import.success()+m.importMaxFeatureCount+"）",500),o.fire("import.done")}catch(t){console.log("kqImportGeoJSON exception:"+t),g.default.Control.Notification.getInstance().showError(g.default.Local.Control.drawControl.import.fail(),500),g.default.Control.Waiting.close()}finally{a._resetImportFileHtml(),n&&d._kqonImportedFunction(n)}},e.readAsText(t.files[0],o.options.importEncoding)}},d.kqImportTxt=function(t){console.log("kqImportTxt!"),d._kqimportTxtFunction(t.files[0])},d.kqImportExcel=function(t){console.log("kqImportExcel!"),d._kqimportExcelFunction(t.files[0])},d.kqImportDwgDxf=function(t){console.log("kqImportDwgDxf!"),d._kqimportDwgDxfFunction(t.files[0])};var a=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.options=L.extend({},m,t),e._drawnItems=L.featureGroup(),e._drawnItems.desc="_drawnItems",e.on("import.loading",function(){console.log("import.loading")}),e.on("import.done",function(){console.log("import done")}),d._kqimportTxtFunction=e.options.importTxtFunction,d._kqimportExcelFunction=e.options.importExcelFunction,d._kqimportDwgDxfFunction=e.options.importDwgDxfFunction,d._kqonImportedFunction=e.options.onImportedFunction,n._resetImportFileHtml(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Evented),e(n,[{key:"_getDefaultOption",value:function(t){return{position:this.options.position,edit:{featureGroup:this._drawnItems,poly:{allowIntersection:!1},maxEditPointCount:this.options.maxEditPointCount},draw:{polyline:{allowIntersection:!1,metric:!0,feet:!1,shapeOptions:{color:t}},polygon:{allowIntersection:!1,showArea:!0,metric:!0,shapeOptions:{color:t}},rectangle:{showArea:!0,shapeOptions:{color:t}},circle:{feet:!1,shapeOptions:{color:t}},marker:{icon:new g.default.Struct.Icon({iconUrl:"../../images/marker-icon.png",iconSize:[25,41],iconAnchor:[13,40],shadowUrl:"../../images/marker-shadow.png",shadowSize:[25,41],shadowAnchor:[8,40]})},circlemarker:{color:t}}}}},{key:"addTo",value:function(h){var f=this,p=this;if(!p._map){p._map=h,this._drawnItems.addTo(p._map);var t,n,e=g.default.Map.MapConfig.getInstance(),r=e.getDrawOption().drawDefaultColor?e.getDrawOption().drawDefaultColor:"#3388ff",i=p._getDefaultOption(r);if(p._draw=new L.Control.Draw(i),p._draw.addTo(p._map),$(".leaflet-draw-draw-polyline").append('<i class="icon iconfont icon-draw-polyline"></i>'),$(".leaflet-draw-draw-polygon").append('<i class="icon iconfont icon-draw-polygon"></i>'),$(".leaflet-draw-draw-rectangle").append('<i class="icon iconfont icon-draw-rectangle"></i>'),$(".leaflet-draw-draw-circle").append('<i class="icon iconfont icon-draw-circle"></i>'),$(".leaflet-draw-draw-marker").append('<i class="icon iconfont icon-draw-marker"></i>'),$(".leaflet-draw-draw-circlemarker").append('<i class="icon iconfont icon-draw-circlemarker"></i>'),$(".leaflet-draw-edit-edit").append('<i class="icon iconfont icon-draw-edit"></i>'),$(".leaflet-draw-edit-remove").append('<i class="icon iconfont icon-draw-remove"></i>'),p._map.on("draw:created",function(t){console.log("draw:created event!");t.layerType;var e=t.layer;p._drawnItems.addLayer(e),g.default.Control.Manager.getInstance().getMapView().fire("draw:created",t)}),p._map.on("draw:deleted",function(t){console.log("draw:deleted event!")}),p._map.on("draw:error",function(t){console.log("draw:error event!"),g.default.Control.Notification.getInstance().showError(g.default.Local.Control.drawControl.addTo.drawError())}),p._boundToolbarClickEvent(),"1"===p.options.importExport){for(var l=[],o=function(t){var e=p.options.dataFormatList[t],n=t===p.options.dataFormatList.length-1,r=void 0;r=n?p.options.dataFormatList[0]:p.options.dataFormatList[t+1];var i=p._getIOMode(e),o=(p._getBtnState(e),p._getIOMode(r)),a=p._getBtnState(r);0===t&&(p._iomode=i);var s=p._getDataState(e);s.onClick=function(t,e){"S"!==r?(p.importOtherButton.show(),p.importShapeButton.hide()):(p.importOtherButton.hide(),p.importShapeButton.show()),p._iomode=o,t.state(a)},l.push(s)},a=0;a<p.options.dataFormatList.length;a++)o(a);var s=p.options.dataFormatList[0],u=new g.default.Control.MapButton({states:l}),c=new g.default.Control.MapButton("icon iconfont icon-export",function(t,e){p._exportDraw()},g.default.Local.Control.draw.io.export());p.importOtherButton=new g.default.Control.MapButton("icon iconfont icon-import",function(t,e){p._importDraw()},g.default.Local.Control.draw.io.import()),p.importShapeButton=new g.default.Control.MapButton("icon iconfont icon-import",function(t,e){console.log("$('#shapeuploadbutton').click();!"),$("#shapeuploadbutton")[0].click()},g.default.Local.Control.draw.io.import(),"kq-importshape"),"S"!==s?p.importShapeButton.hide():p.importOtherButton.hide(),p._iobar=new g.default.Control.MapButtonBar([u,p.importOtherButton,p.importShapeButton,c],{position:p.options.position}),p._iobar.setAttribute("id","importexport-buttonbar"),p._iobar.addTo(h);p._getImportShapeUrl();p.upload_options={onComplete:(t=regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&"success"===n.resultcode){t.next=5;break}g.default.Control.Notification.getInstance().showError(g.default.Local.Control.drawControl.addTo.needZip(),500),n.message&&console.log(n.message),t.next=36;break;case 5:if(!n.result){t.next=36;break}console.log(JSON.stringify(n.result)),r=p._getPrjConvertUrl(),t.prev=8,i=g.default.Control.Manager.getInstance().getControl("draw"),o=null,a=0;case 12:if(!(a<n.result.length)){t.next=28;break}return t.next=15,g.default.Common.NetworkTools.httpGetAsync(r+n.result[a].prj);case 15:s=t.sent,l=JSON.parse(s),u=null,"success"===l.resultcode&&(u=l.result),n.result[a].prj=u,console.log("prj:"+n.result[a].prj),c=new g.default.Map.MapGeoJSON(n.result[a]),i.loadFromGeoJSON(c),d._kqonImportedFunction(c),c.getBounds().isValid()&&(o?o.extend(c.getBounds()):o=c.getBounds());case 25:a++,t.next=12;break;case 28:g.default.Map.MapCommon.fitBound(o,h),g.default.Control.Notification.getInstance().showSuccess(g.default.Local.Control.drawControl.import.success()+m.importMaxFeatureCount+"）",500),t.next=36;break;case 32:t.prev=32,t.t0=t.catch(8),console.log(t.t0),g.default.Control.Notification.getInstance().showError(g.default.Local.Control.drawControl.addTo.fail(),500);case 36:g.default.Control.Waiting.close();case 37:case"end":return t.stop()}},t,f,[[8,32]])}),n=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t,e){return n.apply(this,arguments)}),onError:function(){console.log("Unable to upload file"),g.default.Control.Notification.getInstance().showError(g.default.Local.Control.drawControl.addTo.fail(),500),g.default.Control.Waiting.close()},onSubmit:function(){console.log("onSubmit file!"),g.default.Control.Waiting.show(h)}},L.Browser.ie&&(upload_options.accept=".zip"),p.upload=new g.default.Control.Upload,p.upload.attachToHtmlButton($("#shapeuploadbutton")[0],p._getImportShapeUrl(),p.upload_options)}}}},{key:"remove",value:function(){this._map.removeControl(this._draw)}},{key:"_boundToolbarClickEvent",value:function(){for(var t=this._draw._toolbars.draw._toolbarContainer.children,e=0;e<t.length;e++)L.DomEvent.on(t[e],"click",function(){g.default.Control.Manager.getInstance()._unselectAllControlsExcept("draw")},this);for(var n=this._draw._toolbars.edit._toolbarContainer.children,r=0;r<n.length;r++)L.DomEvent.on(n[r],"click",function(){g.default.Control.Manager.getInstance()._unselectAllControlsExcept("draw")},this);var i=g.default.Control.Manager.getInstance().getControl("styleeditor");i&&i.on("enabled",function(){console.log("style editor enabled!!!"),g.default.Control.Manager.getInstance()._unselectAllControlsExcept("styleeditor")})}},{key:"_unselectDraw",value:function(){this._draw&&(this._draw._toolbars.draw.disable(),this._draw._toolbars.edit.disable())}},{key:"_unselectStyleEditor",value:function(){var t=g.default.Control.Manager.getInstance().getControl("styleeditor");t&&t.isEnabled()&&(t.options.enabled=!1,L.DomUtil.removeClass(t.options.controlUI,"enabled"),t.disable())}},{key:"toGeoJSON",value:function(n){var r=this,i=[];if(0===r._drawnItems.getLayers().length)return null;r._drawnItems.eachLayer(function(t){console.log(r._getShapeType(t));var e=void 0;"circle"===r._getShapeType(t)?e=new L.Polygon(g.default.Control.Draw._circleToPolygon(t)).toGeoJSON(8):e=t.toGeoJSON(8);"circlemarker"===r._getShapeType(t)&&(e.properties.isCircleMarker=!0),n&&g.default.Common.CommonTools._geoJSONLatLngToDestProj(e,r._map),e.properties||(e.properties={}),e.properties.options=t.options,i.push(e)});var t=o.merge(i);if(n){var e=g.default.Map.MapConfig.getInstance();t.proj4=e.getProj4(),t.prj=e.getPrj()}else t.proj4=g.default.Common.CommonValues.defaltProj4_EPSG4326,t.prj=g.default.Common.CommonValues.defaltPrj_EPSG4326;return t}},{key:"loadFromGeoJSON",value:function(t){console.log("loadFromGeoJSON");for(var e=t.getLayers(),n=0;n<e.length;n++)e[n].addTo(this._map),this._drawnItems.addLayer(e[n])}},{key:"removeGeoJSON",value:function(t){console.log("removeGeoJSON");if(t.getLayers)for(var e=t.getLayers(),n=0;n<e.length;n++)this._drawnItems.removeLayer(e[n]),e[n].remove();else{var r=t;this._drawnItems.removeLayer(r),r.remove()}}},{key:"clear",value:function(){console.log("clear layers");for(var t=this._drawnItems.getLayers(),e=0;e<t.length;e++)this._drawnItems.removeLayer(t[e]),t[e].remove()}},{key:"_getShapeType",value:function(t){return t instanceof L.Circle?"circle":t instanceof L.Icon?"icon":t instanceof L.Marker?"marker":t instanceof L.Polyline&&!(t instanceof L.Polygon)?"polyline":t instanceof L.Polygon&&!(t instanceof L.Rectangle)?"polygon":t instanceof L.Rectangle?"rectangle":t instanceof L.CircleMarker?"circlemarker":"unknown"}},{key:"_exportDraw",value:function(){console.log("_exportDraw:"+this._iomode);var t=g.default.Map.MapConfig.getInstance()._isDestProjection(),e=this.toGeoJSON(t);if(null!==e)if("geojson"===this._iomode){var n=JSON.stringify(e);g.default.Common.CommonTools.exportData(n,"exportdata.geojson"),g.default.Control.Notification.getInstance().showSuccess(g.default.Local.Control.drawControl.exportDraw.success())}else"shapefile"===this._iomode?g.default.Common.ExportShape.getInstance().exportShapeAsync(e):"txt"===this._iomode?this.options.exportTxtFunction():"excel"===this._iomode?this.options.exportExcelFunction():"dwgdxf"===this._iomode&&this.options.exportDwgDxfFunction();else g.default.Control.Notification.getInstance().showInfo(g.default.Local.Control.drawControl.exportDraw.noData())}},{key:"_importDraw",value:function(){console.log("_importDraw:"+this._iomode),"geojson"===this._iomode?$("#kqimportgeojson").click():"txt"===this._iomode?$("#kqimporttxt").click():"excel"===this._iomode?$("#kqimportexcel").click():"dwgdxf"===this._iomode&&$("#kqimportdwgdxf").click()}},{key:"_removeRedundantFeatures",value:function(t){t.features.length>this.options.importMaxFeatureCount&&t.features.splice(0,t.features.length-this.options.importMaxFeatureCount)}},{key:"_toggle",value:function(t){t=t||500,this._draw&&$(this._draw._container).toggle(t),this._iobar&&$(this._iobar._bar._container).toggle(t)}},{key:"_hide",value:function(){this._draw&&$(this._draw._container).hide(),this._iobar&&$(this._iobar._bar._container).hide()}},{key:"_getImportShapeUrl",value:function(){return g.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/shpparser"}},{key:"_getPrjConvertUrl",value:function(){return g.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/projectsystem?destType=wkt&prj="}},{key:"_getProj4ConvertUrl",value:function(){return g.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/projectsystem?destType=proj4&prj="}},{key:"_addDrawnLayer",value:function(t){this._drawnItems.addLayer(t)}},{key:"_getIOMode",value:function(t){return"G"===t?"geojson":"S"===t?"shapefile":"D"===t?"dwgdxf":"T"===t?"txt":"E"===t?"excel":void 0}},{key:"_getBtnState",value:function(t){return"G"===t?"mode-geojson":"S"===t?"mode-shapefile":"D"===t?"mode-dwgdxf":"T"===t?"mode-txt":"E"===t?"mode-excel":void 0}},{key:"_getDataState",value:function(t){return"G"===t?{stateName:"mode-geojson",icon:"icon iconfont icon-g",title:g.default.Local.Control.draw.io.usingGeoJSON()}:"S"===t?{stateName:"mode-shapefile",icon:"icon iconfont icon-s",title:g.default.Local.Control.draw.io.usingShapefile()}:"D"===t?{stateName:"mode-dwgdxf",icon:"icon iconfont icon-d",title:g.default.Local.Control.draw.io.usingDwgDxf()}:"T"===t?{stateName:"mode-txt",icon:"icon iconfont icon-t",title:g.default.Local.Control.draw.io.usingTxt()}:"E"===t?{stateName:"mode-excel",icon:"icon iconfont icon-e",title:g.default.Local.Control.draw.io.usingExcel()}:void 0}},{key:"customImportDraw",value:function(t){"shapefile"===(this._iomode=t)?$("#kq-importshape").click():this._importDraw()}},{key:"customExportDraw",value:function(t){this._iomode=t,this._exportDraw()}}],[{key:"_circleToPolygon",value:function(t,e,n){if(!(n=n||t._map))throw Error("Can't figure out points without adding the feature to the map");var r,i,o,a,s,l=[],u=n.options.crs,c=2*Math.PI,h=0;u===L.CRS.EPSG3857?(a=n.latLngToLayerPoint.bind(n),s=n.layerPointToLatLng.bind(n),i=t._radius):(a=u.projection.project.bind(u.projection),s=u.projection.unproject.bind(u.projection),i=t._mRadius),r=a(t._latlng),e=e||64;for(var f=0;f<e-1;f++)h-=c/e,o=new L.Point(r.x+i*Math.cos(h),r.y+i*Math.sin(h)),0<f&&o.equals(l[f-1])||l.push(s(o));return l}},{key:"_resetImportFileHtml",value:function(t){console.log("_resetImportFileHtml !!!!!!"),$("#kqimportgeojson").remove(),$("#kqimporttxt").remove(),$("#kqimportexcel").remove(),$("#kqimportdwgdxf").remove(),$("body").prepend('<input type="file" id=\'kqimportgeojson\' onchange="kqImportGeoJSON(this)" accept=\'.geojson\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<input type="file" id=\'kqimporttxt\' onchange="kqImportTxt(this)" accept=\'.txt\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<input type="file" id=\'kqimportexcel\' onchange="kqImportExcel(this)" accept=\'.xls,.xlsx\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<input type="file" id=\'kqimportdwgdxf\' onchange="kqImportDwgDxf(this)" accept=\'.dwg,.dxf\' style="visibility:hidden; width: 0; height: 0; float: left;"/>'),$("body").prepend('<button style="display: none; " id="shapeuploadbutton" title="Import"/>');var e=g.default.Control.Manager.getInstance().getControl("draw");e&&e.upload&&e.upload.attachToHtmlButton($("#shapeuploadbutton")[0],e._getImportShapeUrl(),e.upload_options)}}]),n}();i.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":1075,"@mapbox/geojson-merge":56}],975:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),h=r(t("../kq")),o=r(t("./Manager")),a=r(t("leaflet")),s=r(t("./FeatureImportAttributeDialog"));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=this;n._config=t,n._div=e,n._data=[],n._featureImportAttributeDialog=null,n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[],n._dataSourceLayer=[],n._create(),n._html=h.default.Local.Control.FeatureImport.html,n._language=h.default.Local.getCurrentLanguage()}var t,e;return i(r,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__layer-select__",this._html.layerSelect()).replace("__select-layer__",this._html.selectLayer()).replace("__layer-import__",this._html.graphicImport()).replace("__import-layer__",this._html.graphicImport_()).replace("__options__",this._html.options()).replace("__feature-overlay__",this._html.featureOverlay()).replace("__allow-overlay__",this._html.allowOverlay()).replace("__attribute-import__",this._html.attributeImport())}},{key:"_initHtml",value:(t=regeneratorRuntime.mark(function t(){var c,r,e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){var t=h.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON(),e=h.default.Query.FeatureImportConfig.getInstance().getLayerGeoType(c._getSelectedConfigLayer()),n=t.type,r=jQuery.makeArray({point:["Point","MultiPoint"],line:["LineString","MultiLineString"],polygon:["Polygon","MultiPolygon"]}[e]);if("FeatureCollection"==n){for(var i=t.features,o=!1,a=0;a<i.length;a++)if(-1!=jQuery.inArray(i[a].geometry.type,r)){o=!0;break}if(0==o)return!1}else if("GeometryCollection"==n){for(var s=t.geometries,l=!1,u=0;u<s.length;u++)if(-1!=jQuery.inArray(s[u].type,r)){l=!0;break}if(0==l)return!1}return!0},c=this,e=h.default.Query.FeatureImportConfig.getInstance(),c._dataSourceLayer=e.layers(),c._container=a.default.DomUtil.get(c._div),c._container||(c._container=a.default.DomUtil.create("div")),t.next=8,h.default.Common.NetworkTools.httpGetAsync(h.default.Common.CommonValues.kqwebmapPath+"query/feature_import.html");case 8:if("error"!==(n=t.sent)){t.next=12;break}return console.log("load feature_import_html error!"),t.abrupt("return",!1);case 12:n=c._translateHtmlChineseEnglish(n),$(c._container).append(n),$("#feature-import-layer-dropdownlist").kendoDropDownList({valueTemplate:'<span class= "k-state-default feature-import-layer-icon" style="background-image: url(\'../../ftree/#:data.iconType#.png\')"></span><span class="k-state-default"><p class="feature-import-layer-text" style="width: 100%; display: inline">#: data.value #</p></span>',template:'<span class= "k-state-default feature-import-layer-icon" style="background-image: url(\'../../ftree/#:data.iconType#.png\')"></span><span class="k-state-default"><p class="feature-import-layer-text" style="width: 100%; display: inline">#: data.value #</p></span>',dataSource:{data:c._getDataSource()},height:200}).data("kendoDropDownList"),$("#graphics-import-btn").kendoButton({click:function(){console.log("graphics-import-btn clicked!"),c._toggleDrawingPanel(),h.default.Control.Manager.getInstance().getControl("draw").on("import.done",function(t){var e=h.default.Control.Notification.getInstance();0==r()&&e.showError(h.default.Local.Control.FeatureImport.import.typeUnmatch());var n=h.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON();if(null!=n)if(null!=n.proj4)$("#feature-coord-custom").click(),console.log(n.proj4),$("#feature-coord-textarea").prop("value","PROJ4:"+n.proj4);else{if(null==n.prj)return void e.showError(h.default.Local.Control.FeatureImport.import.manualImportCoord());$("#feature-coord-custom").click(),console.log(n.proj4),$("#feature-coord-textarea").prop("value","prj:"+n.prj)}else e.showError(h.default.Local.Control.FeatureImport.import.noGraphic())})}}),$("#attribute-import-btn").kendoButton({click:function(){console.log("attribute-import-btn clicked!");var t=h.default.Control.Notification.getInstance(),e=c._getSelectedConfigLayer();void 0!==e?null!=h.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON()?0!=r()?""!=$("#feature-coord-textarea").val()?(c._featureImportAttributeDialog=s.default.getInstance(),c._featureImportAttributeDialog.initFeatureImportDialog(e)):t.showError(h.default.Local.Control.FeatureImport.import.coordNone()):t.showError(h.default.Local.Control.FeatureImport.import.typeUnmatch()):t.showError(h.default.Local.Control.FeatureImport.import.importLayer()):t.showError(h.default.Local.Control.FeatureImport.import.invalidLayer())}}),$("#feature-coord-4326").click(function(){$("#feature-coord-textarea").prop("value","EPSG:4326"),$("#feature-coord-textarea").attr("readonly","readonly")}),$("#feature-coord-3857").click(function(){$("#feature-coord-textarea").prop("value","EPSG:3857"),$("#feature-coord-textarea").attr("readonly","readonly")}),$("#feature-coord-target").click(function(){var t=h.default.Map.MapConfig.getInstance().getProj4();$("#feature-coord-textarea").prop("value","PROJ4:"+t),$("#feature-coord-textarea").attr("readonly","readonly")}),$("#feature-coord-custom").click(function(){$("#feature-coord-textarea").removeAttr("readonly"),$("#feature-coord-textarea").attr("value","")});case 21:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return e.apply(this,arguments)})},{key:"_getDataSource",value:function(){var l=h.default.Query.FeatureImportConfig.getInstance(),u=h.default.Map.MapConfig.getInstance(),t=l.layers(),c=[];return t.forEach(function(t){if(t){var e=l.getLayerSourceName(t),n=l.getLayerID(t),r=l.getLayerLabel(t),i=u.findLayer(e,n);if(null!==i){var o=u.isLayerHasPermission(i),a=l.getLayerGeoType(t);if(!0===o){var s={};s.value=r,"point"===a.toLowerCase()?s.iconType="point":"line"===a.toLowerCase()?s.iconType="line":"polygon"===a.toLowerCase()?s.iconType="polygon":s.iconType="unknown",c.push(s)}}}}),c}},{key:"_getLayerLabels",value:function(){var e=h.default.Query.FeatureImportConfig.getInstance();return[].concat(this._dataSourceLayer.map(function(t){return e.getLayerLabel(t)}))}},{key:"_create",value:function(){this._initHtml()}},{key:"_toggleDrawingPanel",value:function(){o.default.getInstance()._toggleDrawPane()}},{key:"_getSource",value:function(t){return h.default.Map.MapConfig.getInstance().getSourceByName(t,!0)}},{key:"_getQueryUrl",value:function(t){return h.default.Map.MapConfig.getInstance().getSourceUrl(this._getSource(t))}},{key:"_getConfigLayer",value:function(t){var e=h.default.Query.FeatureImportConfig.getInstance(),n=e.getLayerID(t),r=e.getLayerSourceName(t);return e.findLayer(n,r)}},{key:"_getSelectedConfigLayer",value:function(){var t=$("#feature-import-layer-dropdownlist").data("kendoDropDownList").select();return this._dataSourceLayer[t]}},{key:"_getGeometry",value:function(){var t=h.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!1);return t?JSON.stringify(h.default.Common.CommonTools.geoJsonFCToGC(t)):null}},{key:"toString",value:function(){return"FeatureImport"}}]),r}();n.default=l},{"../kq":1075,"./FeatureImportAttributeDialog":976,"./Manager":985,leaflet:560}],976:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),d=r(t("../kq")),c=r(t("./Window"));function r(t){return t&&t.__esModule?t:{default:t}}function h(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var f=t("axios"),i=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;t._layer=null,t._attributeImportDialog=null,t._featureRecordList=null,t._featurePropertyGrid=null,t._confirmDialog=null,t._featureImportCurrentLayer=null,t._currentLayerFieldList=[],t._currentLayerFieldAliasList=[],t._currentFeatureIndex=0,t._geojsonFeatureImportPropertiesArray=[],t._local=d.default.Local.Control.FeatureImportDialog}var n,t,r,i,o,a,s,l;return u(e,[{key:"initFeatureImportDialog",value:(l=h(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this)._geojsonFeatureImportPropertiesArray=n._getFeatureImportPropertyValue(),n._featureImportCurrentLayer=e,n._getCurrentLayerFieldData(e),t.next=6,n._initWindow();case 6:return t.next=8,n._initRecordList();case 8:return t.next=10,n._initPropertyGrid();case 10:n._attributeImportDialog.open();case 11:case"end":return t.stop()}},t,this)})),function(t){return l.apply(this,arguments)})},{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__feature-import__",this._local.featureImportButton()).replace("__feature-reset__",this._local.featureImportResetButton())}},{key:"_featureImportFunction",value:function(){var l=this;console.log("__FUNCTION _featureImportFunction() ! ");var t=d.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON();if(t){var e=$("#feature-import-property-grid").data("kendoGrid").dataSource.data(),n={},u=d.default.Query.FeatureImportConfig.getInstance(),r=u.getLayerID(l._featureImportCurrentLayer);e.forEach(function(t){n[t.layerField]=t.layerFieldValue});var c=d.default.Query.FeatureImport.getInstance();try{console.log("-----\x3e options :  ");var i=d.default.Map.MapConfig.getInstance();console.log("json data: "),console.log("-> drawGeoJSON geometry: "),console.log(t.features[l._currentFeatureIndex].geometry),console.log("-> properties: "),console.log(n);var o={type:"Feature",ID:"Feature1",geometry:t.features[l._currentFeatureIndex].geometry,properties:n};console.log("-> json_data: "),console.log(o);var a=d.default.Map.MapConfig.getInstance().getSourceByName(l._featureImportCurrentLayer._src_name,!0),h={url:i.getSourceUrl(a),layerId:r,forceImport:$("#feature-cover-force-checkbox").is(":checked"),data:JSON.stringify(o),geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},f=l._geojsonFeatureImportPropertiesArray[l._currentFeatureIndex].text,p=d.default.Control.Notification.getInstance();c.queryAsync(h,function(){console.log("query_good");var t=c.response();if(t&&"success"===t.resultcode){l._geojsonFeatureImportPropertiesArray[l._currentFeatureIndex].spriteCssClass="fa fa-check-square-o";var e=u.getLayerLabel(l._featureImportCurrentLayer);l._featureRecordList.setDataSource([{text:e,items:l._geojsonFeatureImportPropertiesArray,type:"layer"}]),l._featureRecordList.expand($("#feature-import-record-list .k-item:eq(0)"),!1),l._featureRecordList.select($("#feature-import-record-list .k-group .k-item:eq("+l._currentFeatureIndex+")"));var n=t.result[0];if(1==h.forceImport)if(!n||"success"!=n.status&&"overlap"!=n.status)p.showError(f+d.default.Local.Control.FeatureImport.dialog.importFail());else{p.showSuccess(f+d.default.Local.Control.FeatureImport.dialog.importOk());var r=d.default.Control.Manager.getInstance()._getMap();setTimeout(function(){r.panBy([-150,-150])},1e3)}else if(n&&"success"==n.status){p.showSuccess(f+d.default.Local.Control.FeatureImport.dialog.importOk());var i=d.default.Control.Manager.getInstance()._getMap();setTimeout(function(){i.panBy([-150,-150])},1e3)}else if(n&&"overlap"==n.status){p.showError(f+d.default.Local.Control.FeatureImport.dialog.overlap());var o=t.result[0].overlap.features[0].geometry,a=d.default.Common.CommonTools.geoJsonFromGeometry(o,{color:"#F00",fillColor:"#F00"}),s=d.default.Control.Manager.getInstance()._getMap();$("#feature-import-attribute-dialog").parent().hide(),setTimeout(function(){$("#feature-import-attribute-dialog").parent().show();var t=d.default.Control.Manager.getInstance();if(t){var e=t._getMap();d.default.Map.MapCommon.clearFlickerLayer(e)}},3e3),d.default.Map.MapCommon.flickerLayer(a,s)}else p.showError(f+d.default.Local.Control.FeatureImport.dialog.importFail())}},function(){p.showError(f+d.default.Local.Control.FeatureImport.dialog.importFail())})}catch(t){console.log("catch error:"+t)}}else{d.default.Control.Notification.getInstance().showInfo(d.default.Local.Control.FeatureImport.dialog.importLayer())}}},{key:"_featureImportResetFunction",value:(s=h(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,console.log("__FUNCTION _featureImportResetFunction() ! "),t.next=4,e._getFeatureImportPropertyGridDataArray();case 4:n=t.sent,r=new kendo.data.DataSource({data:n,schema:{model:{id:"layerField"}}}),e._featurePropertyGrid.setDataSource(r);case 7:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"_initWindow",value:(a=h(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n="#"+d.default.Common.CommonValues.mapContainerID,r={title:e._local.featureImport(),width:"720px",height:"600px",actions:["Close"],scrollable:!0,resizable:!0,appendTo:n,modal:!0,close:function(){console.log("Feature import attribute dialog on close!"),d.default.Control.Manager.getInstance().getControl("draw").clear(),i._remove()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},i=new c.default("feature-import-attribute-dialog",r),t.next=6,i.initAsync(function(){e._attributeImportDialog=i._object()});case 6:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"_initRecordList",value:(o=h(regeneratorRuntime.mark(function t(){var r,e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this,function(t){console.log("select index  "+$(t.item).index())},e=d.default.Query.FeatureImportConfig.getInstance(),n=e.getLayerLabel(r._featureImportCurrentLayer),r._featureRecordList=$("#feature-import-record-list").kendoPanelBar({select:function(){var e=h(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=r._geojsonFeatureImportPropertiesArray[r._currentFeatureIndex].spriteCssClass.indexOf("fa-check-square-o")||!r._featurePropertyGrid.dataSource.hasChanges()){t.next=8;break}n=d.default.Common.CommonValues.mapContainerID,$("#"+n).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),r._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: large;'>"+r._local.currentFeatureSwitch()+"</b>",messages:{okText:r._local.okText(),cancel:r._local.cancelText()}}).data("kendoConfirm"),r._confirmDialog.result.done(h(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r._currentFeatureIndex=$(e.item).index(),t.next=3,r._refreshPropertyGrid();case 3:case"end":return t.stop()}},t,this)}))).fail(function(){r._featureRecordList.clearSelection(),r._featureRecordList.select($("#feature-import-record-list .k-panel .k-item:eq("+r._currentFeatureIndex+")"))}),t.next=12;break;case 8:return console.log("select index  "+$(e.item).index()),r._currentFeatureIndex=$(e.item).index(),t.next=12,r._refreshPropertyGrid();case 12:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),collapse:function(t){t.preventDefault()}}).data("kendoPanelBar"),r._featureRecordList.setDataSource([{text:n,items:r._geojsonFeatureImportPropertiesArray,type:"layer"}]),r._selectFirstItem();case 7:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"_GetToolbarTemplate",value:function(){return'<a class="k-button k-primary" id="featureImportButton" href="\\#" >'+this._local.featureImport()+'</a><a class="k-button" id="featureImportResetButton" href="\\#" >'+this._local.featureImportReset()+"</a>"}},{key:"_initPropertyGrid",value:(i=h(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,e){console.log("@# options ----\x3e ",e);var n=e.model.layerValueType,r=e.model.layerFieldValue,i=d.default.Control.Notification.getInstance();"integer"==n.toLowerCase()?$('<input name= "'+e.field+'"/>').appendTo(t).kendoNumericTextBox({change:function(t){if(!/^\d+$/.test(t.sender.value())&&null!=t.sender.value())return i.showError(d.default.Local.Control.FeatureImport.dialog.fillInt()),void e.model.set("layerFieldValue",r);e.model.set("layerFieldValue",t.sender.value())}}):"float"==n.toLowerCase()||"double"==n.toLowerCase()?$('<input name= "'+e.field+'"/>').appendTo(t).kendoNumericTextBox({change:function(t){if(!/^[+|-]?\d*.?\d*$/.test(t.sender.value())&&null!=t.sender.value())return i.showError(d.default.Local.Control.FeatureImport.dialog.fillFloat()),void e.model.set("layerFieldValue",r);e.model.set("layerFieldValue",t.sender.value())}}):"date"==n.toLowerCase()?$('<input name= "'+e.field+'"/>').appendTo(t).kendoDateTimePicker({format:"yyyy/MM/dd HH:mm:ss",change:function(t){if(!/^[1-9]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/.test(t.sender._oldText)&&null!=t.sender.value())return i.showError(d.default.Local.Control.FeatureImport.dialog.fillDate()),void e.model.set("layerFieldValue",r);e.model.set("layerFieldValue",t.sender._oldText)}}):$('<input name= "'+e.field+'"/>').addClass("k-input k-textbox").appendTo(t).change(function(t){e.model.set("layerFieldValue",t.originalEvent.target.value)})},(n=this)._featurePropertyGrid=$("#feature-import-property-grid").kendoGrid({selectable:"row",allowCopy:!0,editable:!0,scrollable:!0,columns:[{field:"layerFieldAlias",title:d.default.Local.Control.infoQueryDialog.columns.field(),editable:function(t){return!1}},{field:"layerFieldValue",title:d.default.Local.Control.infoQueryDialog.columns.value(),editor:e}],dataBound:function(t){}}).data("kendoGrid"),$("#featureImportButton").click(function(t){if(console.log("FUNCTION Feature Import: -> "),-1!=n._geojsonFeatureImportPropertiesArray[n._currentFeatureIndex].spriteCssClass.indexOf("fa-check-square-o")){var e=d.default.Common.CommonValues.mapContainerID;$("#"+e).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),n._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: large;'>"+n._local.featureImportRepeat()+"</b>",messages:{okText:n._local.okText(),cancel:n._local.cancelText()}}).data("kendoConfirm"),n._confirmDialog.result.done(function(){n._featureImportFunction()}).fail(function(){console.log("Cancel import!")}),n._confirmDialog.open()}else n._featureImportFunction();return!1}),$("#featureImportResetButton").click(function(){var e=h(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("FUNCTION Feature Import Reset -> "),t.next=3,n._featureImportResetFunction();case 3:return t.abrupt("return",!1);case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()),t.next=7,n._refreshPropertyGrid();case 7:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_selectFirstItem",value:function(){this._featureRecordList.expand($("#feature-import-record-list .k-item:eq(0)"),!1),this._featureRecordList.select($("#feature-import-record-list .k-group .k-item:eq(0)")),this._currentFeatureIndex=0}},{key:"_getFeatureImportPropertyGridDataArray",value:(r=h(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n=[],r=d.default.Query.FeatureImportConfig.getInstance(),i=r.getLayerID(e._featureImportCurrentLayer),o=d.default.Map.MapConfig.getInstance().getSourceByName(e._featureImportCurrentLayer._src_name,!0),t.next=7,e.getFieldJSON(i,o);case 7:a=t.sent,s=a.result.fields,l=0;case 10:if(!(l<e._currentLayerFieldAliasList.length)){t.next=26;break}u=e._currentLayerFieldAliasList[l].name,c=e._currentLayerFieldList[l].name,h="",f=0;case 15:if(!(f<s.length)){t.next=22;break}if(s[f].name!==c){t.next=19;break}return h=s[f].type,t.abrupt("break",22);case 19:++f,t.next=15;break;case 22:e._geojsonFeatureImportPropertiesArray[e._currentFeatureIndex].properties.hasOwnProperty(c)?n.push({layerFieldAlias:u,layerField:c,layerFieldValue:e._geojsonFeatureImportPropertiesArray[e._currentFeatureIndex].properties[c],layerValueType:h}):n.push({layerFieldAlias:u,layerField:c,layerFieldValue:"",layerValueType:h});case 23:++l,t.next=10;break;case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_refreshPropertyGrid",value:(t=h(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._getFeatureImportPropertyGridDataArray();case 3:n=t.sent,r=new kendo.data.DataSource({data:n,schema:{model:{id:"layerField"}}}),e._featurePropertyGrid.setDataSource(r);case 6:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_getFeatureImportPropertyValue",value:function(){this._geojsonFeatureImportPropertiesArray=[];var t=d.default.Control.Notification.getInstance(),e=d.default.Control.Manager.getInstance().getMapView().getDrawGeoJSON();if(null!=e){if("FeatureCollection"==e.type)for(var n=e.features,r=0;r<n.length;++r){var i=n[r].properties,o="Feature "+(r+1);this._geojsonFeatureImportPropertiesArray.push({text:o,spriteCssClass:"fa fa-square-o",properties:i})}return this._geojsonFeatureImportPropertiesArray}t.showError(d.default.Local.Control.FeatureImport.dialog.importLayer())}},{key:"_getCurrentLayerFieldData",value:function(t){var n=this,e=d.default.Query.FeatureImportConfig.getInstance();if(n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[],t){var r=e.getLayerFilterFieldsAlias(t).split(",");e.getLayerFilterFields(t).split(",").map(function(t,e){n._currentLayerFieldList.push({name:t}),n._currentLayerFieldAliasList.push({name:r[e]})})}return n._currentLayerFieldAliasList}},{key:"getFieldJSON",value:(n=h(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.default.Map.MapConfig.getInstance().getSourceUrl(n),i=r+"/queryserver/fields?layerid="+e,t.next=4,f.get(i).then(function(t){return console.log("-----\x3eresponse: "),console.log(t),console.log("-----\x3eresponse.data: "),console.log(t.data),t.data}).catch(function(t){return console.log("httpGetAsync: url:"+r+" error:"+t),"error"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{"../kq":1075,"./Window":1034,axios:58}],977:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),y=r(t("../kq")),f=r(t("./Window"));function r(t){return t&&t.__esModule?t:{default:t}}function p(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var d=t("axios"),i=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;t._layer=null,t._attributeUpdateDialog=null,t._featureRecordList=null,t._featurePropertyGrid=null,t._featureUpdateCurrentLayer=null,t._currentLayerFieldList=[],t._currentLayerFieldAliasList=[],t._currentFeatureIndex=0,t._inputFeatureUpdateRecord=null,t._featureUpdateRecordName=null,t._local=y.default.Local.Control.FeatureUpdateDialog}var n,t,r,i,o,a,s,l,u,c;return h(e,[{key:"initFeatureUpdateDialog",value:(c=p(regeneratorRuntime.mark(function t(e,n,r){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(i=this)._inputFeatureUpdateRecord=n,i._featureUpdateRecordName=r,i._featureUpdateCurrentLayer=e,i._getCurrentLayerFieldData(e),t.next=7,i._initWindow();case 7:return t.next=9,i._initRecordList();case 9:return t.next=11,i._initPropertyGrid();case 11:i._attributeUpdateDialog.open();case 12:case"end":return t.stop()}},t,this)})),function(t,e,n){return c.apply(this,arguments)})},{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__feature-update__",this._local.featureUpdateButton()).replace("__feature-reset__",this._local.featureUpdateResetButton())}},{key:"_featureUpdateResetFunction",value:(u=p(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,console.log("__FUNCTION _featureUpdateResetFunction() ! "),t.next=4,e._refreshPropertyGrid();case 4:case"end":return t.stop()}},t,this)})),function(){return u.apply(this,arguments)})},{key:"_featureUpdateFunction",value:(l=p(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,console.log("__FUNCTION _featureUpdateFunction() ! "),n=$("#feature-update-property-grid").data("kendoGrid"),r=n.dataSource.data(),i={},o=y.default.Query.FeatureImportConfig.getInstance(),a=o.getLayerID(e._featureUpdateCurrentLayer),r.forEach(function(t){i[t.layerField]=t.layerFieldValue}),s=o.getLayerPrimaryKey(e._featureUpdateCurrentLayer),l=e._inputFeatureUpdateRecord[s],u=s+"="+l,c=e._inputFeatureUpdateRecord.geometry,h=y.default.Query.FeatureUpdate.getInstance(),t.prev=13,f=y.default.Map.MapConfig.getInstance(),console.log("-> feature update properties: "),console.log(i),p={type:"Feature",ID:"Feature1",where:u,geometry:c,properties:i},console.log("-> json_data: "),console.log(p),d=y.default.Map.MapConfig.getInstance().getSourceByName(e._featureUpdateCurrentLayer._src_name,!0),g={url:f.getSourceUrl(d),layerId:a,forceImport:!0,data:JSON.stringify(p),geoSRS:"EPSG:4326"},m=y.default.Control.Notification.getInstance(),t.next=25,h.queryAsync(g,function(){console.log("query_good");var t=h.response();console.log("Feature Delete response: "),console.log(t),t&&"success"===t.resultcode?m.showSuccess(e._featureUpdateRecordName+y.default.Local.Control.FeatureImport.dialog.updateOk()):m.showError(e._featureUpdateRecordName+y.default.Local.Control.FeatureImport.dialog.updateFail())},function(){console.log("query_error"),m.showError(e._featureUpdateRecordName+y.default.Local.Control.FeatureImport.dialog.updateFail())});case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(13),console.log("Feature update error:"+t.t0);case 30:case"end":return t.stop()}},t,this,[[13,27]])})),function(){return l.apply(this,arguments)})},{key:"featureDeleteFunction",value:(s=p(regeneratorRuntime.mark(function t(e,n,r,i){var o,a,s,l,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this,o=!1,a=y.default.Map.MapConfig.getInstance(),s=y.default.Query.FeatureDelete.getInstance(),l=y.default.Map.MapConfig.getInstance().getSourceByName(i,!0),t.prev=5,u={url:a.getSourceUrl(l),layerId:e,where:n},c=y.default.Control.Notification.getInstance(),t.next=10,s.queryAsync(u,function(){console.log("Feature delete query_good");var t=s.response();console.log("Feature Delete response: "),console.log(t),t&&"success"===t.resultcode?(c.showSuccess(r+y.default.Local.Control.FeatureImport.dialog.deleteOk()),o=!0):(c.showError(r+y.default.Local.Control.FeatureImport.dialog.deleteFail()),o=!1)},function(){console.log("query_error"),c.showError(r+y.default.Local.Control.FeatureImport.dialog.deleteFail()),o=!1});case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("Feature delete error:"+t.t0),o=!1;case 16:return t.abrupt("return",o);case 17:case"end":return t.stop()}},t,this,[[5,12]])})),function(t,e,n,r){return s.apply(this,arguments)})},{key:"_initWindow",value:(a=p(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n="#"+y.default.Common.CommonValues.mapContainerID,r={title:e._local.featureUpdate(),width:"720px",height:"600px",actions:["Close"],scrollable:!0,resizable:!0,appendTo:n,modal:!0,close:function(){console.log("Feature update attribute dialog on close!"),i._remove()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},i=new f.default("feature-update-attribute-dialog",r),t.next=6,i.initAsync(function(){e._attributeUpdateDialog=i._object()});case 6:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"_initRecordList",value:(o=p(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this,function(t){console.log("select index  "+$(t.item).index())},e=y.default.Query.FeatureImportConfig.getInstance(),e.getLayerLabel(n._featureUpdateCurrentLayer),n._featureRecordList=$("#feature-update-record-list").kendoPanelBar({select:function(){var e=p(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("select index  "+$(e.item).index()),n._currentFeatureIndex=$(e.item).index(),t.next=4,n._refreshPropertyGrid();case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),collapse:function(t){t.preventDefault()}}).data("kendoPanelBar"),n._featureRecordList.setDataSource(n._getFeatureUpdateRecordListDataSource()),n._selectFirstItem();case 7:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"_GetToolbarTemplate",value:function(){return'<a class="k-button k-primary" id="featureUpdateButton" href="\\#" >'+this._local.featureUpdate()+'</a><a class="k-button" id="featureUpdateResetButton" href="\\#" >'+this._local.featureUpdateReset()+"</a>"}},{key:"_initPropertyGrid",value:(i=p(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,e){console.log("@# options ----\x3e ",e);var n=e.model.layerValueType,r=e.model.layerFieldValue,i=y.default.Control.Notification.getInstance();console.log("@# type -------\x3e ",n),"integer"==n.toLowerCase()?$('<input name= "'+e.field+'"/>').appendTo(t).kendoNumericTextBox({change:function(t){if(!/^\d+$/.test(t.sender.value())&&null!=t.sender.value())return i.showError(y.default.Local.Control.FeatureImport.dialog.fillInt()),void e.model.set("layerFieldValue",r);e.model.set("layerFieldValue",t.sender.value())}}):"float"==n.toLowerCase()||"double"==n.toLowerCase()?$('<input name= "'+e.field+'"/>').appendTo(t).kendoNumericTextBox({change:function(t){if(!/^[+|-]?\d*.?\d*$/.test(t.sender.value())&&null!=t.sender.value())return i.showError(y.default.Local.Control.FeatureImport.dialog.fillFloat()),void e.model.set("layerFieldValue",r);e.model.set("layerFieldValue",t.sender.value())}}):"date"==n.toLowerCase()?$('<input name= "'+e.field+'"/>').appendTo(t).kendoDateTimePicker({format:"yyyy/MM/dd HH:mm:ss",change:function(t){if(!/^[1-9]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/.test(t.sender._oldText)&&null!=t.sender.value())return i.showError(y.default.Local.Control.FeatureImport.dialog.fillDate()),void e.model.set("layerFieldValue",r);e.model.set("layerFieldValue",t.sender._oldText)}}):$('<input name= "'+e.field+'"/>').addClass("k-input k-textbox").appendTo(t).change(function(t){e.model.set("layerFieldValue",t.originalEvent.target.value)})},(n=this)._featurePropertyGrid=$("#feature-update-property-grid").kendoGrid({selectable:"row",allowCopy:!0,editable:!0,scrollable:!0,columns:[{field:"layerFieldAlias",title:y.default.Local.Control.infoQueryDialog.columns.field(),editable:function(t){return!1}},{field:"layerFieldValue",title:y.default.Local.Control.infoQueryDialog.columns.value(),editor:e}]}).data("kendoGrid"),$("#featureUpdateButton").click(function(){var e=p(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("FUNCTION Feature Update: -> "),t.next=3,n._featureUpdateFunction();case 3:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()),$("#featureUpdateResetButton").click(function(){var e=p(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("FUNCTION Feature Update Reset -> "),n._featureUpdateResetFunction();case 2:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()),t.next=7,n._refreshPropertyGrid();case 7:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_selectFirstItem",value:function(){this._featureRecordList.expand($("#feature-update-record-list .k-item:eq(0)"),!1),this._featureRecordList.select($("#feature-update-record-list .k-group .k-item:eq(0)")),this._currentFeatureIndex=0}},{key:"_getFeatureUpdateRecordListDataSource",value:function(){var t=[],e=[],n=y.default.Query.FeatureImportConfig.getInstance().getLayerLabel(this._featureUpdateCurrentLayer);return e.push({text:this._featureUpdateRecordName,type:"item"}),t.push({text:n,items:e,type:"layer"}),t}},{key:"_getFeatureUpdatePropertyGridDataSource",value:(r=p(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n=[],r=y.default.Query.FeatureImportConfig.getInstance(),i=r.getLayerID(e._featureUpdateCurrentLayer),o=y.default.Map.MapConfig.getInstance().getSourceByName(e._featureUpdateCurrentLayer._src_name,!0),t.next=7,e.getFieldJSON(i,o);case 7:a=t.sent,s=a.result.fields,l=0;case 10:if(!(l<e._currentLayerFieldList.length)){t.next=26;break}u=e._currentLayerFieldList[l].name,c=e._currentLayerFieldAliasList[l].name,h="",f=0;case 15:if(!(f<s.length)){t.next=22;break}if(s[f].name!==u){t.next=19;break}return h=s[f].type,t.abrupt("break",22);case 19:f++,t.next=15;break;case 22:e._inputFeatureUpdateRecord.hasOwnProperty(u)&&n.push({layerFieldAlias:c,layerField:u,layerFieldValue:e._inputFeatureUpdateRecord[u],layerValueType:h});case 23:++l,t.next=10;break;case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_refreshPropertyGrid",value:(t=p(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._getFeatureUpdatePropertyGridDataSource();case 3:n=t.sent,e._featurePropertyGrid.setOptions({dataSource:n});case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_getCurrentLayerFieldData",value:function(t){var n=this,e=y.default.Query.FeatureImportConfig.getInstance();if(n._currentLayerFieldList=[],n._currentLayerFieldAliasList=[],t){var r=e.getLayerFilterFieldsAlias(t).split(",");e.getLayerFilterFields(t).split(",").map(function(t,e){n._currentLayerFieldList.push({name:t}),n._currentLayerFieldAliasList.push({name:r[e]})})}return n._currentLayerFieldAliasList}},{key:"getFieldJSON",value:(n=p(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=y.default.Map.MapConfig.getInstance().getSourceUrl(n),i=r+"/queryserver/fields?layerid="+e,t.next=4,d.get(i).then(function(t){return console.log("-----\x3eresponse: "),console.log(t),console.log("-----\x3eresponse.data: "),console.log(t.data),t.data}).catch(function(t){return console.log("httpGetAsync: url:"+r+" error:"+t),"error"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=i},{"../kq":1075,"./Window":1034,axios:58}],978:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=this;e._div_id=t,e._local_historyCompare=a.default.Local.Control.HistoryCompare,e._historyCompareDataSourceList=[],e._historyLayerGroup=null,e._bookmarkAddDialog=null,e._historyCompareRecordGrid=null,e._bookmarkRecordList=[],e._currentBookmarkIndex=-1,e._init(),e._local_history_compare=a.default.Local.Control.HistoryCompare}var t,e;return i(n,[{key:"addTo",value:function(t){self._map=t}},{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__add-bookmark__",this._local_bookmark.addBookmarkButton())}},{key:"_initHtml",value:(e=s(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._container=L.DomUtil.get(e._div_id),e._container||(e._container=L.DomUtil.create("div")),t.next=5,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"query/history_compare.html");case 5:if("error"!==(n=t.sent)){t.next=9;break}return console.log("load history_compare_html error!"),t.abrupt("return",!1);case 9:$(e._container).append(n),console.log("load history_compare_html success");case 11:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_init",value:(t=s(regeneratorRuntime.mark(function t(){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=this,t.next=3,o._initHtml();case 3:o._historyCompareRecordGrid=$("#history-compare-record-grid").kendoGrid({height:"calc(100% - 55px)",selectable:!0,resizable:!0,scrollable:!0,columns:[{field:"historyLayerTitle",title:o._local_history_compare.HistoryView(),editable:function(t){return!1}}],dataSource:{data:[]},change:function(t){var e=$("#history-compare-record-grid").data("kendoGrid");console.log("_historyCompareRecordGrid changed!");var n=e.select();console.log("_historyCompareRecordGrid select index: "+n);var r=$(n).closest("tr").index(),i=o._historyCompareDataSourceList[r].mapLayerObject;o._updateHistoryLayerGroup(i)}}).data("kendoGrid"),$(window).resize(function(){o._historyCompareRecordGrid.resize()});case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_updateHistoryLayerGroup",value:function(t){this._historyLayerGroup?this._historyLayerGroup.clearLayers():this._historyLayerGroup=L.layerGroup([]),this._historyLayerGroup.addLayer(t);var e=a.default.Control.Manager.getInstance().getMapView();this._historyLayerGroup.addTo(e._getMap())}},{key:"resetMarkListDataSource",value:function(t){this._bookmarkRecordList=t;for(var e=[],n=0;n<t.length;n++){var r=t[n].title,i=decodeURIComponent(r);e.push({bookmarkField:i})}var o=new kendo.data.DataSource({data:e});this._historyCompareRecordGrid.setDataSource(o),this._currentBookmarkIndex=-1,console.log("datasource ---\x3e"),console.log(e)}},{key:"addHistoryCompareLayer",value:function(t,e){var n=this._getMapLayerFromLayerKey(t);console.log("FUNCTION addHistoryCompareLayer layerTitle ---\x3e "+e),this._historyCompareDataSourceList.push({historyLayerTitle:e,mapLayerObject:n});var r=new kendo.data.DataSource({data:this._historyCompareDataSourceList});this._historyCompareRecordGrid.setDataSource(r)}},{key:"_getMapLayerFromLayerKey",value:function(t){return this._mapLayerManager||(this._mapLayerManager=a.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.getLayerFromKey(t)}}],[{key:"getInstance",value:function(t){return n._instance||(n._instance=new n(t)),n._instance}}]),n}();n.default=l},{"../kq":1075}],979:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=i(t("../kq")),a=i(t("./Window")),s=i(t("leaflet"));function i(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}t("./TimelineLayers.js");var u={position:"topright"},c=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this.options=s.default.extend({},u,t),this._local=o.default.Local.Control.HistoryView,this._map=null}var t,n;return r(e,[{key:"initAsync",value:function(t){var n,r=this;r.button=new o.default.Control.MapButton("icon-font icon-search",(n=l(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._initDialog();case 2:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)}),"History View","kq-history"),r.buttonBar=new o.default.Control.MapButtonBar([r.button],{position:r.options.position}),r.buttonBar.setAttribute("id","historyview-buttonbar"),t&&t()}},{key:"_initHtml",value:(n=l(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this;case 1:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initDialog",value:(t=l(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,n="#"+o.default.Common.CommonValues.mapContainerID,parseInt($(n).css("width")),parseInt($(n).css("height")),r={animation:!1,title:"History View",actions:["Close"],draggable:!1,scrollable:!1,appendTo:n,minWidth:300,resizable:!0,close:function(){console.log("history view dialog closed!"),i._remove()},updateHtml:function(t){return t}},(i=new a.default("history-view-win",r)).initAsync(function(){i._object().maximize(),e._initHtml(),o.default.Map.MapConfig.getInstance().initAsync("",!1,function(){e._map=new o.default.Map.MapView({renderer:s.default.svg()}),e._map._customInitAsync("history-map",function(){o.default.Control.TimelineLayers.getInstance().addTo(e._map._getMap())})}),i.open()});case 7:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}],[{key:"getInstance",value:function(t){return e._instance||(e._instance=new e(t)),e._instance}}]),e}();n.default=c},{"../kq":1075,"./TimelineLayers.js":1031,"./Window":1034,leaflet:560}],980:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=o(t("../kq")),i=o(t("./Window"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._layer=null,this._opacitySettingDialog=null,this._opacitySettingSlider=null,this._init()}var e,n;return r(t,[{key:"executeOpacitySetting",value:(e=regeneratorRuntime.mark(function t(e,n){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(r=this)._layer=e,r._opacitySettingSlider.value(r._getOpacity()),i=parseInt($("#sidebar").css("width"))+20+"px",o=parseInt($("#sidebar").css("top"))+"px",r._opacitySettingDialog.setOptions({position:{top:o,left:i},title:a.default.Local.Control.layerOpacitySettingDialog.title()+"--"+n}),r._opacitySettingDialog.open();case 7:case"end":return t.stop()}},t,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t,e){return n.apply(this,arguments)})},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var t=a.default.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="layer-opacity-setting-dialog"><input id="layer-opacity-setting-slider"></div>'))}},{key:"_initUi",value:function(){this._initOpacitySettingDialog(),this._initOpacitySettingSlider()}},{key:"_initOpacitySettingDialog",value:function(){var t=this,e={width:"216px",height:"50px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+a.default.Common.CommonValues.mapContainerID},n=new i.default(t._getOpacitySettingDialogId(),e);n.initAsync(function(){t._opacitySettingDialog=n._object()})}},{key:"_initOpacitySettingSlider",value:function(){var e=this;e._opacitySettingSlider=$(e._getOpacitySettingSliderId()).kendoSlider({precision:1,smallStep:.1,largeStep:.1,min:0,max:1,tickPlacement:"none",value:0,change:function(t){e._setOpacity(t.value)}}).data("kendoSlider")}},{key:"_setOpacity",value:function(t){a.default.Control.Manager.getInstance().getControl("tree")._getMapLayerFromKey(this._layer).setOpacity(t)}},{key:"_getOpacity",value:function(){var t=a.default.Control.Manager.getInstance().getControl("tree")._getMapLayerFromKey(this._layer),e=parseFloat(t.getOpacity());return isNaN(e)?1:e}},{key:"_getOpacitySettingDialogId",value:function(){return"layer-opacity-setting-dialog"}},{key:"_getOpacitySettingSliderId",value:function(){return"#layer-opacity-setting-slider"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075,"./Window":1034}],981:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),c=i(t("../kq")),l=i(t("./LegendQuery")),u=i(t("./LayerOpacitySettingDialog"));function i(t){return t&&t.__esModule?t:{default:t}}var h=t("leaflet"),o={hasMenu:!1,maxSelectedLayerNumber:20},a=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=t;return e._checkedLayers=[],e._options=h.extend({},o),e._isLayerNumberLimit=!1,e._customFuns={},e._mapLayerManager=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,h.Evented),r(n,[{key:"clearSelectedLayers",value:function(){this.setCheckedLayers([])}},{key:"selectedLayers",value:function(t){this.setQueryLayersChecked(t)}},{key:"getMaxLayerSelectedNumber",value:function(){return this._options.maxSelectedLayerNumber}},{key:"setMaxLayerSelectedNumber",value:function(t){t&&"number"==typeof t&&0<t&&(this._options.maxSelectedLayerNumber=t)}},{key:"setOpacity",value:function(t,e){var n=c.default.Map.MapConfig.getInstance(),r=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t),i=r.sourceName,o=r.layerId,a=n.getLayerKey(n.findLayer(i,o));this._updateLayerGroup(this._mapLayerManager.resetSourceFromKey(a)),this._getMapLayerFromKey(a).setOpacity(e)}},{key:"prepareSideBySide",value:function(){for(var t=this._getSelectedLayerNodes(),e=0;e<t.length;e++)this._updateLayerGroup(this._mapLayerManager.resetSourceFromKey(t[e].key))}},{key:"_getSelectedLayerNodes",value:function(){for(var t=[],e=$(this._container).fancytree("getTree").getSelectedNodes(),n=0;n<e.length;++n)e[n].isFolder()||t.push(e[n]);return t}},{key:"_getNodesSourceNumber",value:function(t){for(var e={},n=0;n<t.length;++n){var r=this._mapLayerManager._getActualSourceNameFromKey(t[n].key);r in e||(e[r]=!0)}return Object.keys(e).length}},{key:"addToMapView",value:function(t){this.setMap(t._getMap())}},{key:"addTo",value:function(t){this.setMap(t)}},{key:"setMap",value:function(t){this._map=t,this._createTopPane(),this._refreshMap(),this._bindEvent()}},{key:"_createTopPane",value:function(){var t=c.default.Common.PaneZIndexManager.getInstance().getNextZIndex(),e="pane"+t;this._map.getPane(e)||(this._map.createPane(e),this._map.getPane(e).style.zIndex=t,this._map.getPane(e).style.pointerEvents="none",this._topPaneData={zIndex:t,layerKey:"",layerZIndex:""})}},{key:"createTree",value:function(t,e,n){var s=this;s._div=e,s._config=t,s._options=h.extend(s._options,n),s._initContainer();var r=2;n&&n.minExpandLevel&&(r=n.minExpandLevel),$(s._container).fancytree({selectMode:3,checkbox:!0,tooltip:!0,iconPath:c.default.Common.CommonValues.kqwebmapPath+"ftree/",imagePath:c.default.Common.CommonValues.kqwebmapPath+"ftree/",autoScroll:!0,minExpandLevel:r,source:s._getAllNodeData()}),n&&n.expandSelectedLayers&&s._expandSelectedNodes();var i=null;s._options.hasMenu&&(i=[{title:c.default.Local.Control.layerTree.menu.stick(),cmd:"stick",uiIcon:"ui-icon custom-icon-stick"},{title:c.default.Local.Control.layerTree.menu.clearStick(),cmd:"clearStick",uiIcon:"ui-icon custom-icon-clearStick"},{title:c.default.Local.Control.layerTree.menu.legend(),cmd:"legend",uiIcon:"ui-icon custom-icon-legend"},{title:c.default.Local.Control.layerTree.menu.opacity(),cmd:"opacity",uiIcon:"ui-icon custom-icon-transparency"},{title:c.default.Local.Control.layerTree.menu.zoomToLayer(),cmd:"zoomToLayer",uiIcon:"ui-icon custom-icon-zoomToLayer"},{title:c.default.Local.Control.layerTree.menu.clearAllSelected(),cmd:"clearAllSelected",uiIcon:"ui-icon custom-icon-clearall"}]),$(s._container).contextmenu({delegate:"span.fancytree-node",menu:i,select:function(t,e){var i=$.ui.fancytree.getNode(e.target);switch(e.cmd){case"stick":s._customFuns.stick?s._customFuns.stick(i.key):s._stick(i.key);break;case"clearStick":s._customFuns.clearStick?s._customFuns.clearStick(i.key):s._clearStick();break;case"legend":s._customFuns.legend?s._customFuns.legend(i.key):l.default.getInstance().executeLegendQuery(i.key);break;case"opacity":s._customFuns.opacity?s._customFuns.opacity(i.key):(s._updateLayerGroup(s._mapLayerManager.resetSourceFromKey(i.key)),u.default.getInstance().executeOpacitySetting(i.key,i.title));break;case"zoomToLayer":if(s._customFuns.zoomToLayer)s._customFuns.zoomToLayer(i.key);else if(i.getParent().isRootNode()){c.default.Control.Manager.getInstance().getMapView().zoomToMap()}else{var n=i.data.layerExtent.split(" ");if(4==n.length){var r=s._map.options.crs,o=r.unproject(h.point(n[0],n[1])),a=r.unproject(h.point(n[2],n[3]));s._map.fitBounds(h.latLngBounds(a,o))}setTimeout(function(){for(var t=c.default.Map.MapConfig.getInstance().scales(),e=Number(i.data.minStandardScale),n=c.default.Control.Manager.getInstance().getMapView(),r=t.length-1;0<=r;--r)if(e>Number(t[r].__text)){n.zoom(r+1);break}},500)}break;case"clearAllSelected":s._customFuns.clearAllSelected?s._customFuns.clearAllSelected(i.key):$(s._container).fancytree("getTree").visit(function(t){t.isSelected()&&t.setSelected(!1)})}},beforeOpen:function(t,e){var i=$.ui.fancytree.getNode(e.target);$(s._container).contextmenu("enableEntry","stick",!i.isFolder()&&i.isSelected()),$(s._container).contextmenu("enableEntry","legend",function(){var t=s._mapLayerManager._getConfigLayerFromKey(i.key);if(t){var e=c.default.Map.MapConfig.getInstance(),n=e.getLayerProperty(t,"id");if(e.getLayerProperty(t,"map_src_name")||"0"===n)return!1;var r=e.getLayerIcon(t);if(!i.isFolder()&&"image.png"!==r)return!0}return!1}()),$(s._container).contextmenu("enableEntry","opacity",!i.isFolder()),i.setActive()}})}},{key:"setHorizontalScroll",value:function(){$("#"+this._div+" .ui-fancytree").css("overflow-x","auto")}},{key:"layerCount",value:function(){var e=0;return $(this._container).fancytree("getTree").visit(function(t){t.isFolder()||++e}),e}},{key:"_stick",value:function(t){var e=this;if(e._topPaneData.layerKey!==t){e._clearStick(),e._updateLayerGroup(e._mapLayerManager.resetSourceFromKey(t));var n=e._getMapLayerFromKey(t);e._topPaneData.layerKey=t,e._topPaneData.layerZIndex=n._source._overlay._zIndex,e._resetLayerZIndex(n,e._topPaneData.zIndex),e._setNodeTitleColor(e._getNodeFromKey(t),"red")}}},{key:"_clearStick",value:function(){var t=this._topPaneData.layerKey;if(t){var e=this._getMapLayerFromKey(t);this._resetLayerZIndex(e,this._topPaneData.layerZIndex),this._topPaneData.layerZIndex="",this._topPaneData.layerKey="",this._setNodeTitleColor(this._getNodeFromKey(t),"black")}}},{key:"_setNodeTitleColor",value:function(t,e){$(t.span).find(".fancytree-title").css("color",e)}},{key:"_getNodeFromKey",value:function(t){return $(this._container).fancytree("getTree").getNodeByKey(t)}},{key:"_resetLayerZIndex",value:function(t,e){this.layerGroup.hasLayer(t)?(this.layerGroup.removeLayer(t),t._source._overlay._zIndex=e,this.layerGroup.addLayer(t)):t._source._overlay._zIndex=e}},{key:"getActiveNode",value:function(){return $(this._container).fancytree("getTree").getActiveNode()}},{key:"getNodeByLabel",value:function(e){var n=void 0;return $(this._container).fancytree("getTree").visit(function(t){t.title==e&&(n=t)}),n}},{key:"getActiveLayerKey",value:function(){var t=$(this._container).fancytree("getTree").getActiveNode();return t?t.key:""}},{key:"_initContainer",value:function(){this._container=h.DomUtil.get(this._div),this._container||(this._container=h.DomUtil.create("div"))}},{key:"getCheckedLayers",value:function(){var r=this;return r._checkedLayers=[],$(r._container).fancytree("getTree").visit(function(t){if(!t.isFolder()&&t.selected){var e=t.key,n=r._getSourceNameLayerIdFromKey(e);n.originSourceName=r.getOriginSourceNameFromKey(e),r._checkedLayers.push(n)}}),r._checkedLayers}},{key:"setCheckedLayers",value:function(t){for(var e={},n=0;n<t.length;++n){var r=t[n],i=this._getKeyFromSourceNameLayerId(r.sourceName,r.layerId);e[i]=i}$(this._container).fancytree("getTree").visit(function(t){t.isFolder()||t.setSelected(e.hasOwnProperty(t.key))})}},{key:"unselectedLayers",value:function(t){for(var l=this,u={},e=0;e<t.length;++e){var n=t[e],r=l._getKeyFromSourceNameLayerId(n.sourceName,n.layerId);u[r]=r}$(l._container).fancytree("getTree").visit(function(t){if(!t.isFolder()&&t.isSelected()){var e=l._getSourceNameLayerIdFromKey(t.key),n=e.sourceName,r=e.layerId,i=c.default.Map.MapConfig.getInstance(),o=i.getSourceByName(n),a=i.getOriginSourceName(o),s=l._getKeyFromSourceNameLayerId(a,r);u.hasOwnProperty(s)&&t.setSelected(!1)}})}},{key:"addCheckedLayer",value:function(e){$(this._container).fancytree("getTree").visit(function(t){t.key===e.key&&t.setSelected(e.selected)})}},{key:"activeNode",value:function(t){return $(this._container).fancytree("getTree").activateKey(t)}},{key:"moveLayerToTop",value:function(t){this._stick(t)}},{key:"setLayerOpacity",value:function(t,e){this._updateLayerGroup(this._mapLayerManager.resetSourceFromKey(t)),u.default.getInstance().executeOpacitySetting(t,e)}},{key:"clearTopLayer",value:function(){this._clearStick()}},{key:"setQueryLayersChecked",value:function(t){for(var l=this,u={},e=0;e<t.length;++e){var n=t[e],r=l._getKeyFromSourceNameLayerId(n.sourceName,n.layerId);u[r]=r}return l._isLayerNumberLimit=!1,$(l._container).fancytree("getTree").visit(function(t){if(l._isLayerNumberLimit)return!1;if(!t.isFolder()&&!t.isSelected()){var e=l._getSourceNameLayerIdFromKey(t.key),n=e.sourceName,r=e.layerId,i=c.default.Map.MapConfig.getInstance(),o=i.getSourceByName(n),a=i.getOriginSourceName(o),s=l._getKeyFromSourceNameLayerId(a,r);t.setSelected(u.hasOwnProperty(s))}}),!l._isLayerNumberLimit}},{key:"_bindEvent",value:function(){var n=this;$(n._container).off("fancytreeselect"),$(n._container).off("fancytreebeforeselect"),$(n._container).off("fancytreeclick"),$(n._container).off("fancytreeactivate"),$(n._container).on("fancytreeselect",n._onFancyTreeSelect.bind(n)),$(n._container).on("fancytreebeforeselect",n._onFancyTreeBeforeSelect.bind(n)),$(n._container).on("fancytreeclick",function(t,e){n.fire("click",{event:t,data:e})}),$(n._container).on("fancytreeactivate",function(t,e){n.fire("activate",{event:t,data:e})})}},{key:"_onFancyTreeSelect",value:function(t,e){var n=e.node;this._refreshMap(),this.fire("select",{key:n.key,selected:n.selected}),n.selected?(this._map.fire("checkedLayer",{key:n.key}),n.setActive(!0)):this._map.fire("uncheckedLayer",{key:n.key})}},{key:"_onFancyTreeBeforeSelect",value:function(t,e){for(var n={},r=e.node.selected,i=0;i<this._checkedLayers.length;++i){var o=this._checkedLayers[i],a=this._getKeyFromSourceNameLayerId(o.sourceName,o.layerId);n[a]=!0}e.node.visit(function(t){t.isFolder()||(n[t.key]=!r)},!0);var s=0;for(var l in n)n[l]&&(s+=1);return!(s>this._options.maxSelectedLayerNumber)||(this._isLayerNumberLimit=!0,c.default.Control.Notification.getInstance().showInfo(c.default.Local.Control.layerTree.notification.layerOverLimit()+this._options.maxSelectedLayerNumber+" !"),!1)}},{key:"getOriginSourceNameFromKey",value:function(t){var e=this._getSourceNameLayerIdFromKey(t),n=this._config.getSourceByName(e.sourceName);return this._config.getOriginSourceName(n)}},{key:"setContextmenuCustomFunction",value:function(t){this._customFuns=t}},{key:"_refreshMap",value:function(){var i=this,o=[];i._checkedLayers=[],$(i._container).fancytree("getTree").visit(function(t){if(!t.isFolder()){var e=t.key,n=i._getMapLayerFromKey(e);if(t.selected){var r=i._getSourceNameLayerIdFromKey(e);r.originSourceName=i.getOriginSourceNameFromKey(e),i._checkedLayers.push(r)}n&&o.unshift({layer:n,checked:t.selected})}}),i._updateLayerGroup(o)}},{key:"_updateLayerGroup",value:function(t){if(t){this.layerGroup||(this.layerGroup=h.layerGroup([]),this.layerGroup.desc="_treeLayerGroup",this._map?this._map.addLayer(this.layerGroup):console.log("map is null can't loading map!"));for(var e=0;e<t.length;e++){var n=t[e];n.checked?this.layerGroup.addLayer(n.layer):this.layerGroup.removeLayer(n.layer)}}}},{key:"_getAllNodeData",value:function(){for(var t=[],e=this._config.layers(),n=0;n<e.length;++n)this._config.isLayerHasPermission(e[n])&&(this._config.isLayerGroup(e[n])?t.push(this._getNodeGroupData(e[n])):t.push(this._getNodeData(e[n])));return this._config.isHideTreeLabel()?t:[].concat({title:this._config.treeLabel(),icon:this._config.treeIcon(),children:t,folder:!0})}},{key:"_getNodeGroupData",value:function(t){for(var e=[],n=this._config.getLayerSubLayer(t),r=0;r<n.length;++r)this._config.isLayerHasPermission(n[r])&&(this._config.isLayerGroup(n[r])?e.push(this._getNodeGroupData(n[r])):e.push(this._getNodeData(n[r])));return{title:this._config.getLayerLabel(t),children:e,folder:!0,icon:this._config.getLayerIcon(t),layerExtent:this._config.getLayerProperty(t,"layer_extent"),minStandardScale:this._config.getLayerProperty(t,"min_standard_scale")}}},{key:"_getNodeData",value:function(t){return{folder:!1,title:this._config.getLayerLabel(t),key:this._config.getLayerKey(t),icon:this._config.getLayerIcon(t),selected:this._config.isLayerVisible(t),layerExtent:this._config.getLayerProperty(t,"layer_extent"),minStandardScale:this._config.getLayerProperty(t,"min_standard_scale")}}},{key:"_getKeyFromSourceNameLayerId",value:function(t,e){return c.default.Map.MapCommon.getKeyFromSourceNameLayerId(t,e)}},{key:"_getSourceNameLayerIdFromKey",value:function(t){return c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t)}},{key:"_getMapLayerFromKey",value:function(t){return null===this._mapLayerManager&&(this._mapLayerManager=c.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.getLayerFromKey(t)}},{key:"appendLayer",value:function(t,e){$(this._container).fancytree("getTree").getRootNode().getFirstChild().addNode({folder:!1,title:e.title,key:t.name+"@@"+e.id,icon:e.icon+".png",layerExtent:e.extent,tooltip:e.tooltip}),null===this._mapLayerManager&&(this._mapLayerManager=c.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.appendLayer(t,e)}},{key:"_expandSelectedNodes",value:function(){for(var t=this._getSelectedLayerNodes(),e=0;e<t.length;++e)for(var n=t[e].getParent();null!=n&&!n.isExpanded();)n.setExpanded(),n=n.getParent()}},{key:"getSource",value:function(){return $(this._container).fancytree("getTree").options.source}}]),n}();n.default=a},{"../kq":1075,"./LayerOpacitySettingDialog":980,"./LegendQuery":982,leaflet:560}],982:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),l=r(t("../kq")),o=r(t("./LegendQueryResultDialog"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return i(t,[{key:"executeLegendQuery",value:(r=a(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.next=3,n._getQueryData(e);case 3:r=t.sent,l.default.Query.QueryIDManager.isDataArrayCanceled(r)?console.log("query canceled, data come!"):0===r.length?l.default.Control.Notification.getInstance().showError(l.default.Local.Control.legendQuery.legendEmpty()):(i=n._organizeQueryData(r),o.default.getInstance().open(i));case 5:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_getQueryData",value:(n=a(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],!(i=(n=this)._getQueryOptions(e))){t.next=17;break}return t.prev=4,l.default.Control.Waiting.show(l.default.Control.Manager.getInstance()._getMap()),t.next=8,n._queryData(i);case 8:r=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),l.default.Control.Waiting.close();case 14:return t.prev=14,l.default.Control.Waiting.close(),t.finish(14);case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}},t,this,[[4,11,14,17]])})),function(t){return n.apply(this,arguments)})},{key:"_organizeQueryData",value:function(t){for(var e={},n=0;n<t.length;++n){e[t[n].name]=this._getLegends(t[n].legend)}return e}},{key:"_getLegends",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n].label,i=r,o="data:image/png;base64,"+t[n].imageData,a=r.lastIndexOf("("),s=r.lastIndexOf(")");if(-1<a&&-1<s)"1"==l.default.Map.MapConfig.getInstance().legendLabelMode()?(r=r.slice(0,a),i=i.slice(a+1,s)):(r=r.slice(a+1,s),i=i.slice(0,a));"default"!==r&&"默认"!==r||("cn"===l.default.Local.getCurrentLanguage()?(r="默认",i="default"):"en"===l.default.Local.getCurrentLanguage()&&(i=r="default")),e.push({label:r,legend:o,tooltip:i})}return e}},{key:"_getQueryOptions",value:function(t){var e=l.default.Map.MapCommon.getSourceNameLayerIdFromKey(t),n=e.sourceName,r=e.layerId;return n&&r?{url:this._getQueryUrl(n),layerId:r}:null}},{key:"_getQueryUrl",value:function(t){var e=this._getSourceByName(t);return l.default.Map.MapConfig.getInstance().getSourceUrl(e)}},{key:"_getSourceByName",value:function(t){return l.default.Map.MapConfig.getInstance().getSourceByName(t)}},{key:"_queryData",value:(e=a(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.default.Query.LegendQuery.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075,"./LegendQueryResultDialog":983}],983:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=t("../kq"),a=(r=i)&&r.__esModule?r:{default:r};function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._sideBar=null,this._iconListView=null,this._isFirstOpen=!0}var e,n,r,i;return o(t,[{key:"open",value:(i=s(regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r=null,!(n=this)._isFirstOpen){t.next=7;break}return n._isFirstOpen=!1,t.next=7,n._init();case 7:for(o in e)i=e[r=o];$("#legend-side-bar").append($(".leaflet-sidebar-s a").remove()),$("#legend-side-bar").parent().css("z-index","9999"),$("#legend-side-bar-header .title").html(r),n._iconListView.setDataSource(new kendo.data.DataSource({data:i})),n._sideBar.show();case 13:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"_init",value:(r=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initUi();case 3:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_initUi",value:(n=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initSideBar();case 3:e._initIconListView();case 4:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initSideBar",value:(e=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._sideBar=new a.default.Control.SimpleSidebar({id:"legend-side-bar",fileName:"legendsidebar.html"}),t.next=4,e._sideBar.initAsync();case 4:e._sideBar.addTo(a.default.Control.Manager.getInstance()._getMap());case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initIconListView",value:function(){var e=this;e._iconListView=$(e._getIconListViewId()).kendoListView({template:kendo.template('<div class="legend"><img src="#= legend #" alt="#= label #" /><p>#:label#</p></div>')}).data("kendoListView"),$(e._getIconListViewId()).kendoTooltip({width:120,filter:"p",position:"top",showAfter:a.default.Common.CommonValues.showAfterInMsec,content:function(t){return e._iconListView.dataItem(t.target).tooltip}}).data("kendoTooltip")}},{key:"_getIconListViewId",value:function(){return"#legend-query-legend-list"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=l},{"../kq":1075}],984:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("../kq")),o=a(t("./Window"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._dialog=null;var t=i.default.Control.Manager.getInstance()._getMap();this._currentCoord=t.getCenter(),this._init()}return r(e,[{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var t=i.default.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="location-dialog"><div id="wgs84_btn"></div><div id="target_btn"></div><input id="coordinate_text" /><br><button id="location_btn" type="button">'+i.default.Local.Control.locationDialog.location()+"</button></div>"))}},{key:"_coordinateToText",value:function(t){return this._btn1.checked()?t.lng.toFixed(4)+" "+t.lat.toFixed(4):(t=i.default.Control.Manager.getInstance()._getMap().options.crs.project(t)).x.toFixed(4)+" "+t.y.toFixed(4)}},{key:"_textToCoordinate",value:function(t){if(2==(t=t.split(/[,]|\s+/)).length)return this._btn1.checked()?L.latLng(t[1],t[0]):i.default.Control.Manager.getInstance()._getMap().options.crs.unproject(L.point(t[0],t[1]))}},{key:"_initUi",value:function(){var r=this;r._mark=L.marker(),r._initDialog(),r._btn1=new i.default.ui.RadioButton("wgs84_btn",{label:"WGS84",name:"coordinate_type",checked:!0}),r._btn2=new i.default.ui.RadioButton("target_btn",{label:i.default.Local.Control.locationDialog.targetProjection(),name:"coordinate_type"}),r._coordinate=new i.default.ui.MaskedTextBox("coordinate_text",{value:r._coordinateToText(r._currentCoord)}),$("#wgs84_btn").on("click",function(){r._coordinate.value(r._coordinateToText(r._currentCoord))}),$("#target_btn").on("click",function(){r._coordinate.value(r._coordinateToText(r._currentCoord))}),r._location_btn=new i.default.ui.Button("location_btn",{click:function(){try{var t=i.default.Control.Manager.getInstance()._getMap(),e=t.getZoom(),n=r._textToCoordinate(r._coordinate.value());t.setView(n,e),r._mark.setLatLng(n).addTo(t),r._currentCoord=n}catch(t){i.default.Control.Notification.getInstance().showError(i.default.Local.Control.locationDialog.locationFailed())}}})}},{key:"_initDialog",value:function(){var e=this,t={width:"240px",height:"130px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+i.default.Common.CommonValues.mapContainerID,close:function(t){i.default.Control.Manager.getInstance()._getMap().removeLayer(e._mark)}},n=new o.default(e._getDialogId(),t);n.initAsync(function(){e._dialog=n._object()})}},{key:"_getDialogId",value:function(){return"location-dialog"}},{key:"open",value:function(){var t=parseInt($("#sidebar").css("width"))+20+"px";this._dialog.setOptions({position:{top:"10px",left:t},title:i.default.Local.Control.setlocation.title()}),this._dialog.open()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=s},{"../kq":1075,"./Window":1034}],985:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),Wt=i(t("../kq")),Xt=i(t("leaflet"));function i(t){return t&&t.__esModule?t:{default:t}}function Yt(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var o=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._controls=new Map,this._mapview=null}var n;return r(e,[{key:"addToAcync",value:(n=Yt(regeneratorRuntime.mark(function t(e){var n,r,i,o,a,s,l,u,c,h,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this,r=e._getMap(),n._mapview=e,i=Wt.default.Map.MapConfig.getInstance(),o=i.controls(),a=0;case 6:if(!(a<o.length)){t.next=22;break}if(s=o[a],l=i.getControlType(s),u=n.getControl(l)){t.next=12;break}return t.abrupt("continue",19);case 12:if("compare"!==l){t.next=18;break}return t.next=15,u.initAsync();case 15:u.addTo(r),t.next=19;break;case 18:"zoom"===l?(u.addTo(r),r.zoomControl=u,(c="1"===(c=i.getControlProperty(s,"fullscreen"))||"true"===c)&&n.getControl("fullscreen").addTo(r),u.getContainer().setAttribute("id","zoom-buttonbar")):"styleeditor"===l?(u.addTo(r),$(".leaflet-control-styleeditor-interior").append('<i class="icon iconfont icon-edit"></i>')):"basemap"===l?(u.addTo(r),$(".leaflet-control-layers-toggle").attr("class","leaflet-control-layers-toggle icon iconfont icon-layers-line")):"timelineLayers"===l?(u.addTo(r),$(".leaflet-control-layers-toggle").attr("class","leaflet-control-layers-toggle icon iconfont icon-layers-line")):u.addTo(r);case 19:a++,t.next=6;break;case 22:(h=n.getControl("tree"))&&h.addTo(r),(f=n.getControl("draw"))&&(f.addTo(r),f._hide()),(p=this.getControl("styleeditor"))&&($(p._container).hide(),p._container.setAttribute("id","kq-styleeditor")),h&&h.on("select",function(){this._mapview._getMap().fire("layerSelect")},this),n._customHideControls();case 30:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"getControls",value:function(){return e._instance._controls}},{key:"getControl",value:function(t){return e._instance._controls.get(t)}},{key:"getMapView",value:function(){return e._instance._mapview}},{key:"_getMap",value:function(){return e._instance._mapview?e._instance._mapview._getMap():null}},{key:"_toggleDrawPane",value:function(){var t=this.getControl("draw");t&&t._toggle(500);var e=this.getControl("styleeditor");e&&$(e._container).toggle(500)}},{key:"_unselectAllControlsExcept",value:function(t){if("toolbar"!==t){var e=this.getControl("toolbar");e&&e._unselect()}var n=this.getControl("draw");if("draw"!==t&&n&&n._unselectDraw(),"styleeditor"!==t&&n&&n._unselectStyleEditor(),"sidebyside"!==t){var r=this.getControl("sidebyside");r&&r._stop(r)}if("searchlight"!==t){var i=this.getControl("searchlight");i&&i._stop(i)}if("measure"!==t){var o=this.getControl("measure");o&&o.measure._finishMeasure()}if("measureseparate"!==t){var a=this.getControl("measureseparate");a&&a.disable()}if("plotting"!==t){var s=this.getControl("plotting");s&&(s.stopDraw(),s._stop())}}},{key:"_customHideControls",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=Wt.default.Map.MapConfig.getInstance();if(t||e.isControlsCustom())for(var n=["#kq-toolbar","#zoom-buttonbar","#compare-buttonbar","#searchlight-buttonbar","#sidebyside-buttonbar","#screenshot-buttonbar","#print-buttonbar","#measureseparate-buttonbar","#setlocation-buttonbar",".leaflet-control-attribution",".leaflet-control-layers"],r=0;r<n.length;r++){var i=$(n[r]);0<i.length&&(i.css("position","absolute"),i.css("left",1e5))}}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e,e._init(e._instance)),e._instance}},{key:"_init",value:function(Ut){var Gt=this,Vt=Wt.default.Map.MapConfig.getInstance();Wt.default.Control.Notification._insertNotificationHtml();var Ht=!1;if(Vt.controls().forEach(function(t){var e=Vt.getControlType(t),n=null;if(Vt.isControlHasPermission(t)){if("tree"===e){var r=Vt.getControlPosition(t),i=Vt.getTreeSelectMaxCount();r=r||"topleft",n=new Wt.default.Control.MapLayerTree(Vt,{position:r,maxSelectedLayerNumber:i})}else if("zoom"===e){var o=Vt.getControlPosition(t),a=Vt.getControlProperty(t,"fullscreen");if(o=o||"topright",n=Xt.default.control.zoom({position:o,zoomInTitle:Wt.default.Local.Control.zoom.zoomInTitle(),zoomOutTitle:Wt.default.Local.Control.zoom.zoomOutTitle()}),a="1"===a||"true"===a){var s=Wt.default.Local.Control.fullscreen,l=Xt.default.control.fullscreen({position:o,title:s.title(),titleCancel:s.titleCancel(),content:null,forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1});Ut._controls.set("fullscreen",l)}}else if("zoomslider"===e){var u=Vt.getControlPosition(t);u=u||"topleft",n=new Xt.default.Control.Zoomslider({position:u,zoomInTitle:Wt.default.Local.Control.zoom.zoomInTitle(),zoomOutTitle:Wt.default.Local.Control.zoom.zoomOutTitle(),stepHeight:8,knobHeight:6})}else if("attribution"===e){var c=Vt.getControlPosition(t),h=Vt.getControlProperty(t,"tooltip"),f=Vt.getControlProperty(t,"url"),p=Vt.getControlProperty(t,"label"),d=Vt.getControlProperty(t,"img"),g=Vt.getControlProperty(t,"imgWidth"),m=Vt.getControlProperty(t,"imgHeight");c=c||"bottomright",h=h||"苍穹数码",f=f||"http://www.kanq.com.cn",p=p||"Kanq",d=d||Wt.default.Common.CommonValues.kqwebmapPath+"images/logo.png",g=g||24,m=m||36,n=Xt.default.control.condensedAttribution({emblem:'<div class="emblem-wrap" style="width: '+g+"px; height: "+m+'px"><img src='+d+"></div>",prefix:"<a href="+f+" title="+h+' target="_blank">'+p+"</a>",position:c})}else if("coordinates"===e){var y=Vt.getControlPosition(t),_=Vt.getControlProperty(t,"decimals"),v=Vt.getControlProperty(t,"label_x"),b=Vt.getControlProperty(t,"label_y"),x=Vt.getControlProperty(t,"is_project"),w=Vt.getControlProperty(t,"is_show_scale_index"),L=Vt.getControlProperty(t,"label_scale");y=y||"bottomleft",_=_||2,v=v||"Lng",b=b||"Lat",x="1"===x,w="1"===w,L=L||"Scale",n=new Wt.default.Control.Coordinates({position:y,decimals:_,label_x:v,label_y:b,enableUserInput:!1,isProject:x,isShowScaleIndex:w,label_scale:L})}else if("scale"===e){var C=Vt.getControlPosition(t),k=Vt.getControlProperty(t,"fill"),E=Vt.getControlProperty(t,"doubleLine"),S=Vt.getControlProperty(t,"showSubunits"),M=Vt.getControlProperty(t,"labelPlacement");C=C||"bottomleft",k=k||"hollow",E=E||!1,S=S||!0,M=M||"auto",n=new Wt.default.Control.Scale({position:C,fill:k,doubleLine:E,showSubunits:S,labelPlacement:M})}else if("input"===e){var P=Vt.getControlPosition(t),I=Vt.getControlProperty(t,"width"),T=Vt.getControlProperty(t,"icon");P=P||"topleft",I=I||"200px",T=T||"search",n=new Wt.default.Control.MapInput({position:P,width:I,icon:T})}else if("measure"===e){var O=Vt.getControlPosition(t);O=O||"topleft",n=new Wt.default.Control.Measure({position:O})}else if("measureseparate"===e){var N=Vt.getControlPosition(t);N=N||"topleft",n=new Wt.default.Control.MeasureSeparate({position:N})}else if("setlocation"===e){var D=Vt.getControlPosition(t);D=D||"topright",n=new Wt.default.Control.SetLocation({position:D})}else if("panorama"===e){var A=Vt.getControlPosition(t);A=A||"topright",n=new Wt.default.Control.Panorama({position:A})}else if("plotting"===e){var R=Vt.getControlPosition(t);R=R||"topleft",n=new Wt.default.Control.Plotting({position:R})}else if("searchbar"===e){var F=Vt.getControlPosition(t);F=F||"topleft",n=new Wt.default.Control.SearchBar({position:F})}else if("draw"===e){var j=Vt.getControlPosition(t),B=Vt.getControlProperty(t,"import_export");j=j||"topleft",B=B||"1";var z=Xt.default.extend({},{position:j,importExport:B},Vt.getDrawOption());n=new Wt.default.Control.Draw(z),Ht=!0}else if("styleeditor"===e){var q=Vt.getControlPosition(t),U=Vt.getControlProperty(t,"is_use_marker_icon");q=q||"topleft",U="0"!==U,n=Xt.default.control.styleEditor({position:q,useGrouping:!1,tooltipCallback:function(t){Wt.default.Control.Notification.getInstance().showInfo(Xt.default.styleEditorLocal.tooltip+"!")},errorCallback:function(t){Wt.default.Control.Notification.getInstance().showError(t)},bufferCallback:Wt.default.Query.BufferAnalysis.getInstance()._bufferCallback,is_use_marker_icon:U})}else if("compare"===e){var G=Vt.getControlPosition(t),V=Number(Vt.getControlProperty(t,"max_selected_number")),H=[],W=Vt.getControlProperty(t,"checked_layers");if(W){W=W.split("##");for(var X=0;X<W.length;++X)H.push(Wt.default.Map.MapCommon.getSourceNameLayerIdFromKey(W[X]))}var Y=Vt.getControlProperty(t,"is_show_cursor"),Z=Vt.getControlProperty(t,"cursor_opacity"),Q=Vt.getControlProperty(t,"cursor_color"),K=Vt.getControlProperty(t,"cursor_radius"),J=Vt.getControlProperty(t,"is_enable_2win"),tt=Vt.getControlProperty(t,"is_enable_3win"),et=Vt.getControlProperty(t,"is_enable_4win"),nt=Vt.getControlProperty(t,"is_enable_5win"),rt=Vt.getControlProperty(t,"is_enable_6win");G=G||"topleft",Y="0"!==Y,Z=Z||.5,Q=Q||"#dc2027",K=K||20,J="0"!==J,tt="1"===tt,et="0"!==et,nt="1"===nt,rt="1"===rt,n=new Wt.default.Control.Compare({position:G,maxSelectedNumber:V,selectedLayers:H,isShowCursor:Y,cursorOpacity:Z,cursorColor:Q,cursorRadius:K,isEnable2Win:J,isEnable3Win:tt,isEnable4Win:et,isEnable5Win:nt,isEnable6Win:rt})}else if("sidebyside"===e){var it=Vt.getControlPosition(t);it=it||"topleft",n=new Wt.default.Control.SideBySide({position:it})}else if("searchlight"===e){var ot=Vt.getControlPosition(t),at=Vt.getControlProperty(t,"light_size");ot=ot||"topleft",at=at?Number(at):256,n=new Wt.default.Control.MapSearchLight({position:ot,light_size:at})}else if("screenshot"===e){var st=Vt.getControlPosition(t);st=st||"topleft",n=new Wt.default.Control.ScreenShot({position:st})}else if("basemap"===e){console.log("basemap!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");var lt=Vt.getControlPosition(t),ut=Vt.getControlProperty(t,"visible"),ct=Vt.getSubControls(t);lt=lt||"topleft",ut="1"===ut,n=new Wt.default.Control.MapBaseLayer(lt,ut);for(var ht=0;ht<ct.length;ht++){var ft=ct[ht],pt=Vt.getControlProperty(ft,"name"),dt=Vt.getControlProperty(ft,"maptype"),gt=Vt.getControlProperty(ft,"subtype"),mt=Vt.getControlProperty(ft,"is_selected"),yt=Vt.getControlProperty(ft,"key");mt="1"===mt,n.addSubLayer(pt,dt,gt,mt,yt)}}else if("print"===e){var _t=Vt.getControlPosition(t);_t=_t||"topleft",(n=new Wt.default.Control.MapPrint.getInstance({position:_t})).initAsync()}else if("historyview"===e){var vt=Vt.getControlPosition(t);vt=vt||"topleft",(n=new Wt.default.Control.HistoryView.getInstance({position:vt})).initAsync()}else if("timelineLayers"===e){var bt=Vt.getControlPosition(t);bt=bt||"bottomright"}else if("mini"===e){var xt=Vt.getControlPosition(t),wt=Vt.getControlProperty(t,"basemap"),Lt=Vt.getControlProperty(t,"basemaptype"),Ct=Vt.getControlProperty(t,"minimized");xt=xt||"bottomright",Lt=Lt||"vector",Ct="1"===Ct;var kt=Wt.default.Map.MapLayerManager.getInstance().getMiniLayers(),Et=[];wt&&(Et=Wt.default.Control.MapBaseLayer.getLayers(wt,Lt));var St=Xt.default.layerGroup(Et.concat(kt));n=new Xt.default.Control.MiniMap(St,{position:xt,aimingRectOptions:{color:"#64a0dc",weight:1,clickable:!1},toggleDisplay:!0,minimized:Ct,strings:{hideText:Wt.default.Local.Control.mini.hideText(),showText:Wt.default.Local.Control.mini.showText()}})}else if("toolbar"===e){var Mt=[],Pt=Vt.getSubControls(t),It=Vt.getControlPosition(t);It=It||"topright";for(var Tt=0;Tt<Pt.length;++Tt)if(Vt.isControlHasPermission(Pt[Tt])){var Ot=Vt.getControlProperty(Pt[Tt],"type"),Nt=Vt.getControlProperty(Pt[Tt],"icon"),Dt=Vt.getControlProperty(Pt[Tt],"tips"),At={};if(Nt&&(At.icon=Nt),Dt&&(At.tips=Dt),"rubber-band"===Ot){var Rt=Vt.getRubberBandOption();$.isEmptyObject(Rt)||(At=Xt.default.extend(At,Rt))}Mt.push({type:Ot,options:At})}0<Mt.length&&(n=new Wt.default.Control.ToolBar({position:It,subControls:Mt}))}else if("sidebar"===e){var Ft=Vt.getControlPosition(t),jt=Vt.getControlProperty(t,"init_open_id");Ft="left"===Ft||"right"===Ft?Ft:"left",jt=jt||"",n=new Wt.default.Control.Sidebar({position:Ft,init_open_id:jt,id:"sidebar"}),Gt._addSubControlsToSidebar(Vt,t,Ut,n)}else if("sidebar-left"===e){var Bt=Vt.getControlProperty(t,"init_open_id");Bt=Bt||"",n=new Wt.default.Control.Sidebar({position:"left",init_open_id:Bt,id:"sidebar-left"}),Gt._addSubControlsToSidebar(Vt,t,Ut,n)}else if("sidebar-right"===e){var zt=Vt.getControlProperty(t,"init_open_id");zt=zt||"",n=new Wt.default.Control.Sidebar({position:"right",init_open_id:zt,id:"sidebar-right"}),Gt._addSubControlsToSidebar(Vt,t,Ut,n)}else if("mainmenu"===e)setTimeout(Yt(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Wt.default.Local.getCurrentLanguage(),n="","en"!==e){t.next=8;break}return t.next=5,Wt.default.Common.NetworkTools.httpGetAsync(Wt.default.Common.CommonValues.configFilePath+"../../custom/custommenu_en.html");case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,Wt.default.Common.NetworkTools.httpGetAsync(Wt.default.Common.CommonValues.configFilePath+"../../custom/custommenu.html");case 10:n=t.sent;case 11:if("error"!==n){t.next=14;break}return console.log("load mainmenu_html error!"),t.abrupt("return",!1);case 14:console.log("load mainmenu_html successfully！"),r=Wt.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("mainmenu_html.initAsync: mapdiv was not found!"),i.append(n);case 19:case"end":return t.stop()}},t,this)})),1e3);else if("drawmenu"===e){var qt=new Wt.default.Control.DrawMenu({});Ut._controls.set("drawmenu",qt)}}else;n&&Ut._controls.set(e,n)}),!Ht){var t="topleft",e="1";t=t||"topleft",e=e||"1";var n=Xt.default.extend({},{position:t,importExport:e},Vt.getDrawOption()),r=new Wt.default.Control.Draw(n);Ut._controls.set("draw",r)}}},{key:"_addTreeControlToSidebar",value:function(t,e,n,r){var i=t.getSubControl(e,"tree");if(i&&t.isControlHasPermission(i)){var o=t.getControlProperty(i,"id"),a=t.getTreeSelectMaxCount(),s=t._minExpandLevel(),l=t._expandSelectedLayers(),u=new Wt.default.Control.LayerTree;u.createTree(t,o,{hasMenu:!0,maxSelectedLayerNumber:a,minExpandLevel:s,expandSelectedLayers:l}),n._controls.set("tree",u)}else r.removeTab("tab_layers")}},{key:"_addAdvancedControlToSidebar",value:function(n,t,r,e){var i=n.getSubControl(t,"advanced");i&&n.isControlHasPermission(i)?Wt.default.Common.CommonTools._loadKendoAndRun(function(){var t=n.getControlProperty(i,"id"),e=new Wt.default.Control.AdvancedSearch(n,t);r._controls.set("advancedSearch",e)}):e.removeTab("tab_advanced")}},{key:"_addOverlayControlToSidebar",value:function(n,t,r,e){var i=n.getSubControl(t,"overlay");i&&n.isControlHasPermission(i)?Wt.default.Common.CommonTools._loadKendoAndRun(function(){var t=n.getControlProperty(i,"id"),e=new Wt.default.Control.OverlayAnalysis(t);r._controls.set("overlayAnalysis",e)}):e.removeTab("tab_overlay")}},{key:"_addFeatureControlToSidebar",value:function(n,t,r,e){var i=n.getSubControl(t,"featureImport"),o=n.getControlProperty(i,"is_add");i&&n.isControlHasPermission(i)&&"1"===o?Wt.default.Common.CommonTools._loadKendoAndRun(function(){var t=n.getControlProperty(i,"id"),e=new Wt.default.Control.FeatureImport(n,t);r._controls.set("feature",e)}):e.removeTab("tab_featureImport")}},{key:"_addHistoryCompareControlToSidebar",value:function(n,t,r,e){var i=n.getSubControl(t,"historyCompare");i&&n.isControlHasPermission(i)?Wt.default.Common.CommonTools._loadKendoAndRun(function(){var t=n.getControlProperty(i,"id"),e=new Wt.default.Control.HistoryCompare(t);r._controls.set("historyCompare",e)}):e.removeTab("tab_historyCompare")}},{key:"_addBookmarkControlToSidebar",value:function(n,t,r,e){var i=n.getSubControl(t,"bookmark");i&&n.isControlHasPermission(i)?Wt.default.Common.CommonTools._loadKendoAndRun(function(){var t=n.getControlProperty(i,"id"),e=new Wt.default.Control.Bookmark(t);r._controls.set("bookmark",e)}):e.removeTab("tab_bookmark")}},{key:"_addSettingControlToSidebar",value:function(n,t,r,e){var i=n.getSubControl(t,"setting");i&&n.isControlHasPermission(i)?Wt.default.Common.CommonTools._loadKendoAndRun(function(){var t=n.getControlProperty(i,"id"),e=new Wt.default.Control.Setting(t);r._controls.set("setting",e)}):e.removeTab("tab_setting")}},{key:"_addSubControlsToSidebar",value:function(t,e,n,r){this._addTreeControlToSidebar(t,e,n,r),this._addAdvancedControlToSidebar(t,e,n,r),this._addOverlayControlToSidebar(t,e,n,r),this._addFeatureControlToSidebar(t,e,n,r),this._addHistoryCompareControlToSidebar(t,e,n,r),this._addBookmarkControlToSidebar(t,e,n,r),this._addSettingControlToSidebar(t,e,n,r)}}]),e}();n.default=o},{"../kq":1075,leaflet:560}],986:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var m={pane:"basemapPane"},a=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.position=t,this.visible=e,this.init_selected_layergroup=null,this.baseLayers={},this.overlays={};var n=L.layerGroup();n.desc="baselayer_noneLayerGroup",this.baseLayers[s.default.Local.Control.basemap.layerTypeNode()]=n,this.init_selected_layergroup=n}return i(r,null,[{key:"getLayers",value:function(t,e,n){return"osm"===t?this._getOSM(e):"gaode"===t?this._getGaode(e):"tianditu"===t?this._getTianditu(e,n):"google"===t?this._getGoogle(e):"googleen"===t?this._getGoogleEn(e):"geoq"===t?this._getGeoq(e):"baidu"===t?this._getBaidu(e):"custom-tms"===t?this._getTMS(e):[]}}]),i(r,[{key:"addSubLayer",value:function(t,e,n,r,i){var o=s.default.Control.MapBaseLayer.getLayers(e,n,i),a=L.layerGroup(o);"realtime"===n?this.overlays[t]=a:0<o.length&&(this.baseLayers[t]=a,r&&(this.init_selected_layergroup=a))}},{key:"addTo",value:function(t){this.init_selected_layergroup&&(this.init_selected_layergroup.getLayers().forEach(function(t){t.pane="basemapPane"}),this.init_selected_layergroup.setZIndex(-1),this.init_selected_layergroup.desc="baselayer_init_selected_layergroup",this.init_selected_layergroup.addTo(t)),this.control=L.control.layers(this.baseLayers,this.overlays,{position:this.position}),this.visible&&this.control.addTo(t)}},{key:"remove",value:function(){this.control.remove()}}],[{key:"_isGoogleScale",value:function(t){return!0}},{key:"_getOSM",value:function(t){if(t&&"vector"!==t)return[];var e=L.extend({},m,{subdomains:["a","b","c"]}),n=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",e);return this._setDesc(n),[n]}},{key:"_getGaode",value:function(t){if("vector"===t){var e=L.tileLayer.chinaProvider("GaoDe.Normal.Map",m);return this._setDesc(e),[e]}if("image"===t){var n=L.tileLayer.chinaProvider("GaoDe.Satellite.Map",m),r=L.tileLayer.chinaProvider("GaoDe.Satellite.Annotion",m);return this._setDesc(n),this._setDesc(r),[n,r]}return[]}},{key:"_getBaidu",value:function(t){if("vector"===t){var e=L.tileLayer.chinaProvider("BaiDu.Normal.Map",m);return this._setDesc(e),[e]}if("dark"===t){var n=L.tileLayer.chinaProvider("BaiDu.Normal.Dark",m);return this._setDesc(n),[n]}if("midnight"===t){var r=L.tileLayer.chinaProvider("BaiDu.Normal.Midnight",m);return this._setDesc(r),[r]}if("grayscale"===t){var i=L.tileLayer.chinaProvider("BaiDu.Normal.Grayscale",m);return this._setDesc(i),[i]}if("hardedge"===t){var o=L.tileLayer.chinaProvider("BaiDu.Normal.Hardedge",m);return this._setDesc(o),[o]}if("light"===t){var a=L.tileLayer.chinaProvider("BaiDu.Normal.Light",m);return this._setDesc(a),[a]}if("redalert"===t){var s=L.tileLayer.chinaProvider("BaiDu.Normal.Redalert",m);return this._setDesc(s),[s]}if("googlelite"===t){var l=L.tileLayer.chinaProvider("BaiDu.Normal.Googlelite",m);return this._setDesc(l),[l]}if("grassgreen"===t){var u=L.tileLayer.chinaProvider("BaiDu.Normal.Grassgreen",m);return this._setDesc(u),[u]}if("pink"===t){var c=L.tileLayer.chinaProvider("BaiDu.Normal.Pink",m);return this._setDesc(c),[c]}if("darkgreen"===t){var h=L.tileLayer.chinaProvider("BaiDu.Normal.Darkgreen",m);return this._setDesc(h),[h]}if("bluish"===t){var f=L.tileLayer.chinaProvider("BaiDu.Normal.Bluish",m);return this._setDesc(f),[f]}if("image"===t){var p=L.tileLayer.chinaProvider("BaiDu.Satellite.Map",m),d=L.tileLayer.chinaProvider("BaiDu.Satellite.Annotion",m);return this._setDesc(p),this._setDesc(d),[p,d]}if("realtime"===t){var g=L.tileLayer.chinaProvider("BaiDu.Realtime.Map",m);return this._setDesc(g),[g]}return[]}},{key:"_getTianditu",value:function(t,e){if("vector"===t){var n=JSON.parse(JSON.stringify(m));""!==e&&(n.key=e);var r=L.tileLayer.chinaProvider("TianDiTu.Normal.Map",n),i=L.tileLayer.chinaProvider("TianDiTu.Normal.Annotion",n);return this._setDesc(r),this._setDesc(i),[r,i]}if("image"===t){var o=L.tileLayer.chinaProvider("TianDiTu.Satellite.Map",m),a=L.tileLayer.chinaProvider("TianDiTu.Satellite.Annotion",m);return this._setDesc(o),this._setDesc(a),[o,a]}if("terrain"===t){var s=L.tileLayer.chinaProvider("TianDiTu.Terrain.Map",m),l=L.tileLayer.chinaProvider("TianDiTu.Terrain.Annotion",m);return this._setDesc(s),this._setDesc(l),[s,l]}return[]}},{key:"_getGoogle",value:function(t){if("vector"===t){var e=L.tileLayer.chinaProvider("Google.Normal.Map",m);return this._setDesc(e),[e]}if("image"===t){var n=L.tileLayer.chinaProvider("Google.Satellite.Map",m);return this._setDesc(n),[n]}if("terrain"===t){var r=L.tileLayer.chinaProvider("Google.Terrain.Map",m);return this._setDesc(r),[r]}return[]}},{key:"_getGoogleEn",value:function(t){if("vector"===t){var e=L.tileLayer.chinaProvider("GoogleEn.Normal.Map",m);return this._setDesc(e),[e]}if("image"===t){var n=L.tileLayer.chinaProvider("GoogleEn.Satellite.Map",m);return this._setDesc(n),[n]}if("terrain"===t){var r=L.tileLayer.chinaProvider("GoogleEn.Terrain.Map",m);return this._setDesc(r),[r]}return[]}},{key:"_getGeoq",value:function(t){if("vector"===t){var e=L.tileLayer.chinaProvider("Geoq.Normal.Map",m);return this._setDesc(e),[e]}if("blue"===t){var n=L.tileLayer.chinaProvider("Geoq.Normal.PurplishBlue",m);return this._setDesc(n),[n]}if("gray"===t){var r=L.tileLayer.chinaProvider("Geoq.Normal.Gray",m);return this._setDesc(r),[r]}if("warm"===t){var i=L.tileLayer.chinaProvider("Geoq.Normal.Warm",m);return this._setDesc(i),[i]}if("cold"===t){var o=L.tileLayer.chinaProvider("Geoq.Normal.Cold",m);return this._setDesc(o),[o]}return[]}},{key:"_getTMS",value:function(t){var e=L.tileLayer(t);return this._setDesc(e),[e]}},{key:"_setDesc",value:function(t){t.desc="baselayer"}}]),r}();n.default=a},{"../kq":1075}],987:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function i(t,e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._button=r?L.easyButton(t,e,n,r):n?L.easyButton(t,e,n):e?L.easyButton(t,e):L.easyButton(t),this._enabled=!1}return r(i,[{key:"addTo",value:function(t,e){e&&(this._button.options.position=e),this._button.addTo(t)}},{key:"addToMapView",value:function(t,e){e&&(this._button.options.position=e),this._button.addTo(t._map)}},{key:"hide",value:function(){return L.DomUtil.addClass(this._button.button,"kqhidden"),this}},{key:"show",value:function(){return L.DomUtil.removeClass(this._button.button,"kqhidden"),this}},{key:"remove",value:function(){this._button.remove()}},{key:"setPosition",value:function(t){this._button.setPosition(t)}},{key:"setEnabled",value:function(t){t?L.DomUtil.addClass(this._button.button,"btn-enabled"):L.DomUtil.removeClass(this._button.button,"btn-enabled"),this._enabled=t}},{key:"enabled",value:function(){return this._enabled}},{key:"setTitle",value:function(t){this._button._states[0].title=t,this._button._currentState.title=t,this._button.button.title=t}}]),i}();n.default=i},{}],988:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../libs/controls/easybutton/easy-button");(r=o)&&r.__esModule;var a=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=[];t.forEach(function(t){n.push(t._button)}),this._bar=L.easyBar(n,e)}return i(r,[{key:"addTo",value:function(t){this._bar.addTo(t)}},{key:"addToMapView",value:function(t){this._bar.addTo(t._map)}},{key:"hide",value:function(){return L.DomUtil.addClass(this._bar.container,"kqhidden"),this}},{key:"show",value:function(){return L.DomUtil.removeClass(this._bar.container,"kqhidden"),this}},{key:"remove",value:function(){this._bar.remove()}},{key:"setPosition",value:function(t){this._bar.setPosition(t)}},{key:"setAttribute",value:function(t,e){this._bar.container.setAttribute(t,e)}}]),r}();n.default=a},{"../../libs/controls/easybutton/easy-button":13}],989:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};t("../extend/L.Control.MapInput");var l=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Control.MapInput),i(e,[{key:"addToMapView",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addTo",this).call(this,t._getMap())}},{key:"remove",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"value",value:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this)}},{key:"dropdownValue",value:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dropdownValue",this).call(this)}},{key:"setOnClick",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOnClick",this).call(this,t)}}]),e}();n.default=l},{"../extend/L.Control.MapInput":1066,leaflet:560}],990:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=(i(t("../kq")),i(t("./LayerTree")));function i(t){return t&&t.__esModule?t:{default:t}}var a=t("leaflet"),s=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.setOptions(r,e),r.createTree(t,n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),r(i,[{key:"onAdd",value:function(t){return this.setMap(t),this._container}},{key:"onRemove",value:function(){this.removeEvent()}},{key:"addTo",value:function(t){a.Control.prototype.addTo.call(this,t);var e=parseInt($(this._map.getContainer()).css("height")),n=parseInt($(this._container).css("margin-top")),r=parseInt($(this._container).css("margin-bottom")),i=e-2*Math.max(n,r);return $(this._container).css("height",i),this}}]),i}();n.default=s},{"../kq":1075,"./LayerTree":981,leaflet:560}],991:[function(n,t,r){(function(u){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),x=t(n("../kq")),f=t(n("./Window")),w=t(n("leaflet")),L=t(n("./LegendQuery")),p=t(n("./MapPrintAddTextDialog")),d=t(n("./MapPrintAddHtmlDialog")),g=t(n("./MapPrintTitleSettingDialog"));function t(t){return t&&t.__esModule?t:{default:t}}function m(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var y={position:"topleft"},_={A2:[1512,2169],A3:[1047,1512],A4:[718,1047],A5:[484,718],A6:[321,484]},e=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=e;return r._mapPrintDialogObject=null,r._mapPrintAddTextDialog=null,r._mapPrintTitleSettingDialog=null,r.options=w.default.extend({},y,t),r._div=null,r._mapDialog=null,r._map_tree=null,r._baseMapLayer=null,r._printMapView=null,r._printDrawGeoJSON=null,r._control_zoom=null,r._control_scale=null,r._local=x.default.Local.Control.MapPrint,r._isPrintMarker=!0,r._queryResultChartArray=[],r._output_image_name="KQMap.jpg",$("#"+x.default.Common.CommonValues.mapContainerID).bind("export_image_to_printer",function(t,e){var n={};n.item_uuid=u.uuid(),n.item_data=e,r._queryResultChartArray.push(n),console.log("MapPrint export_image_to_printer success"),x.default.Control.Notification.getInstance().showSuccess(x.default.Local.Control.MapPrint.ChartExportPrintSuccess())}),e}var e,r,i,o,a,s,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,w.default.Evented),h(n,[{key:"_translateHtmlChineseEnglish",value:function(t){var e=this;return t.replace("__send-to-printer__",e._local.SendToPrinter()).replace("__select-layer__",e._local.SelectLayer()).replace("__saved-as-image__",e._local.SavedAsImage()).replace("__clear__",e._local.Clear()).replace("__text__",e._local.Text()).replace("__mark__",e._local.Mark()).replace("__paper__",e._local.Paper()).replace("__pixels-per-inch__",e._local.PixelsPerInch()).replace("__scale__",e._local.Scale()).replace("__zoom-button__",e._local.ZoomButton()).replace("__compass__",e._local.Compass()).replace("__legend__",e._local.Legend()).replace("__a-map__",e._local.AMap()).replace("__title__",e._local.Title()).replace("__chart__",e._local.Chart()).replace("__title-background-color__",e._local.TitleBackgroundColor())}},{key:"initAsync",value:function(t){var n,r=this;r.button=new x.default.Control.MapButton("iconfont icon-print",(n=m(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("src_control_mapprint : map print!"),console.log("@@@ -----\x3e my map print!"),t.next=4,r.openMapPrintDialog();case 4:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)}),r._local.PrintMap(),"kq-print"),r.buttonBar=new x.default.Control.MapButtonBar([r.button],{position:r.options.position}),r.buttonBar.setAttribute("id","print-buttonbar"),t&&t()}},{key:"openMapPrintDialog",value:(l=m(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._mapPrintDialogObject&&e._mapPrintDialogObject.close(),t.next=4,e._initMapDialog();case 4:e._initHtml(),e.fire("beforeOpen"),e._mapPrintDialogObject.open(),n=$("#map-to-print-outside").css("padding-top").replace("px",""),$("#print-map-box").scrollTop(n);case 9:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)})},{key:"getPrintMap",value:function(){var t=null;return this._printMapView&&(t=this._printMapView._getMap()),t}},{key:"getPrintMapView",value:function(){var t=null;return this._printMapView&&(t=this._printMapView),t}},{key:"setPrintDirection",value:function(t){var e=$("#paper-direction-dropdownlist").data("kendoDropDownList");"vertical"===t?e.select(1):e.select(0)}},{key:"removeMapPrintDialog",value:function(){this._mapPrintDialogObject&&this._mapPrintDialogObject.destroy()}},{key:"setNotPrintMarker",value:function(){this._isPrintMarker=!1}},{key:"setPrintMarker",value:function(){this._isPrintMarker=!0}},{key:"_initHtml",value:(s=m(regeneratorRuntime.mark(function t(){var e,n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(function(t,e){var n=$("#ruler");return n.css("font",t),n.text(e),n[0]}),function(t){var e={canvas:document.getElementById("map-print-title"),drawStartX:0,drawStartY:40,lineHeight:40,drawWidth:120,color:"#000000",backgroundColor:"#FFFFFF"};if(t&&"object"===(void 0===t?"undefined":c(t)))for(var n in t)e[n]=t[n];var r=e.canvas,i=r.getContext("2d");i.fillStyle="rgba(255, 255, 255, 0)",i.fillRect(0,0,r.width,r.height),i.font=e.fontSize+"px "+e.font,i.fillStyle=e.color;var o=0,a=[];for(n=0;n<e.text.length;n++)i.measureText(e.text.substr(o,n-o)).width>e.drawWidth&&(judgePunctuationMarks(e.text[n-1])?(a.push(e.text.substr(o,n-o)),o=n):(a.push(e.text.substr(o,n-o-1)),o=n-1)),n===e.text.length-1&&a.push(e.text.substr(o,n-o+1));r.style.height=a.length*e.lineHeight+e.drawStartY,i.font=e.fontSize+e.font,i.fillStyle=e.color;for(n=0;n<a.length;n++)i.fillText(a[n],e.drawStartX,e.drawStartY+n*e.lineHeight);return r.toDataURL()},e=this,$("#sender-to-printer-button").kendoButton({click:function(t){e._printDrawGeoJSON&&e._printDrawGeoJSON.eachLayer(function(t){t instanceof w.default.Path&&(t.remove(),t.setStyle({renderer:w.default.svg()}),t.addTo(e._printMapView._getMap()))}),console.log("sender-to-printer-button clicked!"),console.log($("#map-to-print").width(),$("#map-to-print").height()),e._control_zoom.remove(),x.default.Control.Waiting.show(x.default.Control.Manager.getInstance()._getMap());$("#print-area").print({globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:$.Deferred().done(function(){x.default.Control.Waiting.close()}),timeout:3e4,title:null,doctype:"<!doctype html>"}),i.is(":checked")&&e._control_zoom.addTo(e._printMapView._getMap()),e._printDrawGeoJSON&&e._printDrawGeoJSON.eachLayer(function(t){t instanceof w.default.Path&&(t.remove(),t.setStyle({renderer:w.default.canvas()}),t.addTo(e._printMapView._getMap()))})}}),$("#choose-print-layer-button").kendoButton({click:function(t){console.log("choose-print-layer-button clicked!");var e=$("#choose-print-layer-button").offset().top+$("#choose-print-layer-button").outerHeight(),n=$("#choose-print-layer-button").offset().left;$("#print-map-control-tree").data("kendoWindow").setOptions({position:{top:e,left:n}}),$("#print-map-control-tree").data("kendoWindow").open()}}),$("#save-print-image-button").kendoButton({click:function(t){console.log("save-print-image-button clicked!"),e._control_zoom.remove(),kendo.drawing.drawDOM($("#print-area")).then(function(t){return kendo.drawing.exportImage(t)}).done(function(t){console.log("map print save as image data:  "+t),x.default.Common.CommonTools.exportBase64UrlToImage(t,e._output_image_name),i.is(":checked")&&e._control_zoom.addTo(e._printMapView._getMap())})}}),$("#clear-print-button").kendoButton({click:function(t){console.log("clear-print-button clicked!"),e._map_tree.clearSelectedLayers(),$(".print-custom-text")&&$(".print-custom-text").remove(),$(".print-custom-html")&&$(".print-custom-html").remove(),$(".print-query-result-chart")&&$(".print-query-result-chart").remove(),e._printDrawGeoJSON&&(e._printDrawGeoJSON.remove(),e._printDrawGeoJSON=null)}}),$("#text-print-button").kendoButton({click:function(t){console.log("text-print-button clicked!"),e._mapPrintAddTextDialog=p.default.getInstance(),e._mapPrintAddTextDialog.open()}}),$("#map-print-html-button").kendoButton({click:function(t){console.log("map-print-html-button clicked!"),e._mapPrintAddTextDialog=d.default.getInstance(),e._mapPrintAddTextDialog.open()}}),$("#map-print-title-button").kendoButton({click:function(t){console.log("map-print-title-button clicked!"),e._mapPrintTitleSettingDialog=g.default.getInstance(),e._mapPrintTitleSettingDialog.open()}}),$("#map-print-chart-button").kendoButton({click:function(t){console.log("map-print-chart-button clicked!"),e._addQueryResultChart()}}),$("#paper-size-dropdownlist").kendoDropDownList({dataSource:["A2","A3","A4","A5","A6"],animation:!1,index:2,change:function(t){e._changePrintPaperSize()}}).data("kendoDropDownList"),$("#paper-direction-dropdownlist").kendoDropDownList({dataSource:[e._local.Horizontal(),e._local.Vertical()],animation:!1,cascade:function(t){e._changePrintPaperSize()}}).data("kendoDropDownList"),$("#pixel-dropdownlist").kendoDropDownList({dataSource:["96"],animation:!1,enable:!1}).data("kendoDropDownList"),(n=$("#display-compass-checkbox")).change(function(){n.is(":checked")?$("#map-print-compass").show():$("#map-print-compass").hide()}),(r=$("#display-scale-checkbox")).change(function(){r.is(":checked")?e._control_scale.addTo(e._printMapView._getMap()):e._control_scale.remove()}),(i=$("#operate-zoom-checkbox")).change(function(){i.is(":checked")?e._control_zoom.addTo(e._printMapView._getMap()):e._control_zoom.remove()}),(o=$("#display-legend-checkbox")).change(function(){o.is(":checked")?e._diaplayPrintLegendWithLayerName():$("#map-print-legend-div").hide()});case 22:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"_addQueryResultChart",value:function(){var r=this;r._queryResultChartArray.forEach(function(t,e){var n=document.getElementById("map-to-print");r.query_result_chart_img=w.default.DomUtil.create("img","print-query-result-chart",n),r.query_result_chart_img.setAttribute("style","position: absolute; z-index: 40100; "),r.query_result_chart_img.src=t.item_data,r.query_result_chart_img.style.left=50*e+"px",r.query_result_chart_img.setAttribute("chart_uuid",t.item_uuid),new w.default.Draggable(r.query_result_chart_img).enable()}),$("#map-to-print").contextmenu({delegate:".print-query-result-chart",menu:[{title:r._local.HideStatisticalChart(),cmd:"hideQueryChart",uiIcon:"ui-icon custom-icon-transparency"},{title:"----"},{title:r._local.DeleteStatisticalChart(),cmd:"deleteQueryChart",uiIcon:"ui-icon custom-icon-clearall"}],select:function(t,e){e.target;e.target.remove();var n=e.target.attr("chart_uuid");switch(console.log("select chart uuid value +---\x3e "+n),e.cmd){case"hideQueryChart":console.log("hideQueryChart chart uuid value +---\x3e "+n);break;case"deleteQueryChart":console.log("deleteQueryChart chart uuid +---\x3e "+n),r._deleteQueryResultChart(n)}}})}},{key:"_deleteQueryResultChart",value:function(t){for(var e=-1,n=0;n<this._queryResultChartArray.length;++n){if(this._queryResultChartArray[n].item_uuid===t){e=n;break}}-1!=e&&this._queryResultChartArray.splice(e,1)}},{key:"openMapDialog",value:(a=m(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this;case 1:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"_init",value:(o=m(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this;case 1:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"_initMapDialog",value:(i=m(regeneratorRuntime.mark(function t(){var s,e,n,r,i,o,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=this,e="#"+x.default.Common.CommonValues.mapContainerID,n=parseInt($(e).css("width")),n-10,r=parseInt($(e).css("height")),r-40,i={animation:!1,title:s._local.PrintMap(),actions:["Close"],draggable:!1,scrollable:!1,appendTo:e,minWidth:300,resizable:!1,close:function(){console.log("print map on close!"),l._remove(),$("#print-map-control-tree").data("kendoWindow").destroy(),s._mapPrintAddTextDialog&&s._mapPrintAddTextDialog.remove(),s._mapPrintTitleSettingDialog&&s._mapPrintTitleSettingDialog.remove(),s.removeMapPrintDialog()},updateHtml:function(t){return t=s._translateHtmlChineseEnglish(t)}},o={title:s._local.SelectLayer(),modal:!1,actions:["Close"],animation:!1,visible:!1,draggable:!1,resizable:!1,width:300,height:450,position:{top:78,left:136}},l=new f.default("map-print-win",i),t.next=12,l.initAsync(function(){s._mapPrintDialogObject=l._object(),l._object().maximize();$("#print-map-control-tree").kendoWindow(o).data("kendoWindow");var a=x.default.Map.MapConfig.getInstance();a.initAsync("",!1,function(){s._printMapView=new x.default.Map.MapView({renderer:w.default.canvas()}),s._printMapView._customInitAsync("map-to-print",function(){s._map_tree=new x.default.Control.LayerTree,s._map_tree.createTree(a,"print-map-tree"),s._map_tree.setMaxLayerSelectedNumber(x.default.Map.MapConfig.getInstance().getTreeSelectMaxCount()),s._map_tree.setMap(s._printMapView._getMap()),s._map_tree.addTo(s._printMapView._getMap()),$("#map-print-compass").attr("src","../../images/compass.png");var t=document.getElementById("map-print-compass");new w.default.Draggable(t).enable();var e=document.getElementById("map-print-title");new w.default.Draggable(e).enable();var n=document.getElementById("map-print-info-div");new w.default.Draggable(n).enable(),s._control_zoom=w.default.control.zoom({position:"topright",zoomInTitle:x.default.Local.Control.zoom.zoomInTitle(),zoomOutTitle:x.default.Local.Control.zoom.zoomOutTitle()}),s._control_zoom.addTo(s._printMapView._getMap()),s._addPrintScale();var r=x.default.Control.Manager.getInstance().getControl("tree");r&&s._map_tree.setCheckedLayers(r.getCheckedLayers());var i=x.default.Control.Manager.getInstance().getControl("draw");if(i){var o=i.toGeoJSON();o&&(s._printDrawGeoJSON=new x.default.Map.MapGeoJSON(o,{isAddToDraw:!1}),s._isPrintMarker||s._printDrawGeoJSON.eachLayer(function(t){t instanceof w.default.Marker&&s._printDrawGeoJSON.removeLayer(t)}),s._printDrawGeoJSON.addTo(s._printMapView._getMap()))}})})});case 12:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_changePrintPaperSize",value:function(){var t=this,e=$("#paper-direction-dropdownlist").data("kendoDropDownList").select(),n=$("#paper-size-dropdownlist").data("kendoDropDownList").value(),r=0,i=0;$("#map-print-title").width();0==e?(r=_[n][0],i=_[n][1]):1==e&&(r=_[n][1],i=_[n][0]);$("#map-to-print-outside").css({width:i,height:r});var o=$("#map-to-print-outside").css("padding-left").replace("px",""),a=$("#map-to-print-outside").css("padding-right").replace("px",""),s=$("#map-to-print-outside").css("padding-top").replace("px",""),l=$("#map-to-print-outside").css("padding-bottom").replace("px","");$("#map-to-print").css({width:i-o-a,height:r-s-l}),setTimeout(function(){t._printMapView._getMap().invalidateSize()},400)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_hideAllControls",value:function(){$(".leaflet-control-container").addClass("no-print")}},{key:"_createCompassMarker",value:function(){var t=w.default.icon({iconUrl:"../../images/compass.png"});w.default.marker(this._printMapView._getMap().getBounds().getNorthWest(),{icon:t,draggable:!0}).addTo(this._printMapView._getMap())}},{key:"_printElem",value:function(t){var e=document.getElementById(t).innerHTML,n=window.open("","Print","height=600,width=800");n.document.write("<html><head><title>Print</title>"),n.document.write("</head><body >"),n.document.write(e),n.document.write("</body></html>"),n.document.close(),n.focus(),n.print(),n.close()}},{key:"_printMyElement",value:function(){var t=document.getElementById("map-to-print"),e=document.getElementById("ifmcontentstoprint").contentWindow;e.document.open(),e.document.write(t.innerHTML),e.document.close(),e.focus(),e.print()}},{key:"_printElement",value:function(t){var e=document.createElement("iframe");e.style="height: 0px; width: 0px; position: absolute",document.body.appendChild(e),$(t).clone().appendTo(e.contentDocument.body),e.contentWindow.print(),e.parentElement.removeChild(e)}},{key:"_addPrintScale",value:function(){this._control_scale=new x.default.Control.Scale({position:"bottomleft",fill:"nofill",doubleLine:!1,showSubunits:!0,labelPlacement:"auto"}),this._control_scale.addTo(this._printMapView._getMap())}},{key:"_diaplayPrintLegend",value:(r=m(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this._map_tree.getCheckedLayers(),n=[],r=0;case 4:if(!(r<e.length)){t.next=14;break}return i=e[r],o=x.default.Map.MapCommon.getKeyFromSourceNameLayerId(i.sourceName,i.layerId),t.next=9,L.default.getInstance()._getQueryData(o);case 9:for(a=t.sent,s=0;s<a.length;++s)n.push(a[s]);case 11:++r,t.next=4;break;case 14:for(l=[],u=0;u<n.length;++u)-1===l.indexOf(n[u])&&l.push(n[u]);if(x.default.Query.QueryIDManager.isDataArrayCanceled(l))console.log("query canceled, data come!");else if(0===l.length)x.default.Control.Notification.getInstance().showError(x.default.Local.Control.legendQuery.legendEmpty());else{for(d in c=L.default.getInstance()._organizeQueryData(l),h=null,f=[],p={},c)for(h=c[d],g=0;g<h.length;++g)p[h[g].label]||(f.push(h[g]),p[h[g].label]=1);m=640<(m=(m=16*Math.ceil(f.length/3))<48?48:m)?640:m,$("#map-print-legend-div").height(m),$("#map-print-legend-div").kendoListView({dataSource:new kendo.data.DataSource({data:f}),template:kendo.template('<div class="print-legend"> <img style="float:left;" src="#= legend #" alt="#= label #" /><p style="float:left;" >#:label#</p> </div>')}).data("kendoListView"),y=$("#map-to-print").offset(),_=y.top,v=y.left,$("#map-print-legend-div").css({top:20-_+122+"px",left:10-v+2+"px"}),$("#map-print-legend-div").show(),b=document.getElementById("map-print-legend-div"),new w.default.Draggable(b).enable()}case 17:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_diaplayPrintLegendWithLayerName",value:(e=m(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g,m,y,_,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this._map_tree.getCheckedLayers(),n=[],r=0;case 4:if(!(r<e.length)){t.next=14;break}return i=e[r],o=x.default.Map.MapCommon.getKeyFromSourceNameLayerId(i.sourceName,i.layerId),t.next=9,L.default.getInstance()._getQueryData(o);case 9:for(a=t.sent,s=0;s<a.length;++s)n.push(a[s]);case 11:++r,t.next=4;break;case 14:if(x.default.Query.QueryIDManager.isDataArrayCanceled(n))console.log("query canceled, data come!");else if(0===n.length)x.default.Control.Notification.getInstance().showError(x.default.Local.Control.legendQuery.legendEmpty());else{for(f in l=L.default.getInstance()._organizeQueryData(n),c=u=null,h=[],l)c=l[u=f],h.push({layerName:u,legendList:c});for(d=p=0;d<h.length;++d)p+=16,g=h[d].legendList,p+=16*Math.ceil(g.length/3);p=640<(p=p<64?64:p)?640:p,$("#map-print-legend-div").height(p),$("#map-print-legend-div").kendoListView({dataSource:new kendo.data.DataSource({data:h}),template:kendo.template($("#print-legend-template").html())}).data("kendoListView"),m=$("#map-to-print").offset(),y=m.top,_=m.left,$("#map-print-legend-div").css({top:20-y+122+"px",left:10-_+2+"px"}),$("#map-print-legend-div").show(),v=document.getElementById("map-print-legend-div"),new w.default.Draggable(v).enable()}case 15:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"setInfoDivHtml",value:function(t){$("#map-print-info-div").empty(),$("#map-print-info-div").append(t)}},{key:"setInfoDivCSSstyle",value:function(t){$("#map-print-info-div").css(t)}},{key:"disableSaveImagebutton",value:function(){$("#save-print-image-button").attr("disabled",!0)}},{key:"enableSaveImagebutton",value:function(){$("#save-print-image-button").attr("disabled",!1)}},{key:"appendSummaryText",value:function(){var t=document.getElementById("map-to-print");this.custom_text=w.default.DomUtil.create("p","print-custom-text",t),this.custom_text.setAttribute("style","position: relative; z-index: 901; font-size: 30px; color: blue; float: left; background-color: yellow; display: inline-block; "),this.custom_text.style.fontFamily=this._local.Italics(),this.custom_text.innerHTML="原始 Label 内容  <br> 换行内容01  <br> 换行内容02",new w.default.Draggable(this.custom_text).enable()}},{key:"changePaperDirectionVertical",value:function(){$("#paper-direction-dropdownlist").data("kendoDropDownList").select(1),this._changePrintPaperSize()}},{key:"changePaperDirectionHorizontal",value:function(){$("#paper-direction-dropdownlist").data("kendoDropDownList").select(0),this._changePrintPaperSize()}},{key:"changePrintPaperSizeIndex",value:function(t){$("#paper-size-dropdownlist").data("kendoDropDownList").select(t),this._changePrintPaperSize()}},{key:"setOutputImageName",value:function(t){t&&(this._output_image_name=t)}}],[{key:"getInstance",value:function(t){return n._instance||(n._instance=new n(t)),n._instance}}]),n}();r.default=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":1075,"./LegendQuery":982,"./MapPrintAddHtmlDialog":992,"./MapPrintAddTextDialog":993,"./MapPrintTitleSettingDialog":994,"./Window":1034,leaflet:560}],992:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),s=r(t("../kq")),o=r(t("./Window"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._printAddHtmlDialog=null,this._local=s.default.Local.Control.MapPrint,this._add_html_id_number=0,this._add_html_template_list=[]}var e,n,r;return i(t,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__import_html__",this._local.ImportHtml()).replace("__add-text__",this._local.AddText()).replace("__clear-text__",this._local.ClearText())}},{key:"open",value:(r=a(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._printAddHtmlDialog&&e._printAddHtmlDialog.close(),t.next=4,e._initAddHtmlDialog();case 4:return t.next=6,e._initHtml();case 6:e._printAddHtmlDialog.open();case 7:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this._printAddHtmlDialog.close()}},{key:"_initAddHtmlDialog",value:(n=a(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={title:(e=this)._local.AddHtmlTitle(),minWidth:"441px",minHeight:"150px",width:"450px",height:"285px",scrollable:!1,actions:["Close"],modal:!1,draggable:!0,resizable:!0,position:{top:200,left:"25%"},appendTo:"#map-print-win",close:function(){console.log("Map print add html dialog on close!"),r._remove()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new o.default(e._getMapPrintHtmlDialogId(),n),t.next=5,r.initAsync(function(){e._printAddHtmlDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initHtml",value:(e=a(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,$("#print-import-file-button").kendoButton({click:function(t){console.log("print-import-file-button clicked!"),$("#print-add-html-template-files").click()}}),(n=document.getElementById("print-add-html-template-files")).accept="text/html",n.addEventListener("change",function(t){console.log("html_template_file change! ");var e=t.target.files[0];if(e){var n=new FileReader;n.readAsText(e,"GBK"),n.onload=function(t){console.log("Load html template success! "),$("#print-add-html-textarea").data("kendoEditor").value(t.target.result)}}}),r=[],t.next=8,s.default.Common.NetworkTools.httpGetAsync(s.default.Common.CommonValues.kqwebmapPath+("en"===s.default.Local.getCurrentLanguage()?"template/template-add-print-en.html":"template/template-add-print.html"));case 8:if("error"===(i=t.sent))console.log("Load template_add_print_html error!"),e._add_html_template_list=[],r=[];else for(console.log("Load template_add_print_html success! "),o=$(i).get(0),e._add_html_template_list=o.getElementsByClassName("template-print"),a=0;a<e._add_html_template_list.length;++a)r.push(e._add_html_template_list[a].title);$("#print-html-template-dropdownlist").kendoDropDownList({dataSource:{data:r},animation:!1,change:e._onTemplateChange.bind(e)}),$("#print-add-html-button").kendoButton({click:function(t){console.log("print-add-text-button clicked!"),e.appendCustomHtml()}}),$("#print-delete-html-button").kendoButton({click:function(t){console.log("print-delete-html-button clicked!"),$(".print-custom-html")&&$(".print-custom-html").remove()}}),$("#print-add-html-textarea").kendoEditor({tools:["bold","italic","underline",{name:"fontSize",items:[{text:"72px",value:"72px"},{text:"48px",value:"48px"},{text:"36px",value:"36px"},{text:"28px",value:"28px"},{text:"26px",value:"26px"},{text:"24px",value:"24px"},{text:"22px",value:"22px"},{text:"20px",value:"20px"},{text:"18px",value:"18px"},{text:"16px",value:"16px"},{text:"14px",value:"14px"},{text:"12px",value:"12px"},{text:"11px",value:"11px"}]},"foreColor","justifyLeft","justifyCenter","justifyRight"]}),$(".k-editor").height("calc(100% - 47px)");case 15:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_onTemplateChange",value:function(){var t=$("#print-html-template-dropdownlist").data("kendoDropDownList").select();if(this._add_html_template_list){var e=this._add_html_template_list[t];$("#print-add-html-textarea").data("kendoEditor").value($(e).html())}}},{key:"_getMapPrintHtmlDialogId",value:function(){return"map-print-add-html-dialog"}},{key:"remove",value:function(){this._printAddHtmlDialog&&(t._instance=null,this._add_html_id_number=0,this._printAddHtmlDialog.destroy())}},{key:"appendCustomHtml",value:function(){var t=document.getElementById("map-to-print");this.custom_html=L.DomUtil.create("div","print-custom-html",t),this._add_html_id_number+=1;var e="print-add-custom-html-"+this._add_html_id_number;this.custom_html.id=e,this.custom_html.setAttribute("style","position: relative; z-index: 901; float: left; display：inline-block; ");var n=$("#print-add-html-textarea").data("kendoEditor");this.custom_html.innerHTML=n.value(),new L.Draggable(this.custom_html).enable(),$("#map-to-print").contextmenu({delegate:".print-custom-html",menu:[{title:this._local.DeleteMark(),cmd:"deleteCustomHtml",uiIcon:"ui-icon custom-icon-clearall"}],select:function(t,e){e.target.closest(".print-custom-html").css("visibility","hidden")}})}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=l},{"../kq":1075,"./Window":1034}],993:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=r(t("../kq")),a=r(t("./Window"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._printAddTextDialog=null,this._local=o.default.Local.Control.MapPrint,this._add_text_id_number=0}var e,n,r;return i(t,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__add-text__",this._local.AddText()).replace("__clear-text__",this._local.ClearText())}},{key:"open",value:(r=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._printAddTextDialog&&e._printAddTextDialog.close(),t.next=4,e._initAddTextDialog();case 4:e._initHtml(),e._printAddTextDialog.open();case 6:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this._printAddTextDialog.close()}},{key:"_init",value:(n=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initAddTextDialog();case 3:e._initHtml();case 4:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initAddTextDialog",value:(e=s(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={title:(e=this)._local.AddTextTitle(),minWidth:"400px",minHeight:"150px",width:"450px",height:"285px",scrollable:!1,actions:["Close"],modal:!1,draggable:!0,resizable:!0,position:{top:200,left:"25%"},appendTo:"#map-print-win",close:function(){console.log("Map print add text dialog on close!"),r._remove()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new a.default(e._getMapPrintTextDialogId(),n),t.next=5,r.initAsync(function(){e._printAddTextDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initHtml",value:function(){var e=this;$("#print-text-font-family-dropdownlist").kendoDropDownList({dataSource:{data:[e._local.MicrosoftYaHei(),e._local.SimsunFont(),e._local.Italics(),"Helvetica","Garamond"]},animation:!1,index:1,change:function(){console.log("font family change!!!");var t=$("#print-text-font-family-dropdownlist").val();$("#print-add-text-textarea").css("font-family",t)}}).data("kendoDropDownList"),$("#print-text-font-size-dropdownlist").kendoDropDownList({autoWidth:!0,dataSource:["40","36","32","28","26","24","22","20","18","16","14","12"],animation:!1,index:5,change:function(){var t=$("#print-text-font-size-dropdownlist").val();$("#print-add-text-textarea").css("font-size",t+"px")}}).data("kendoDropDownList"),$("#print-text-font-color-picker").kendoColorPicker({buttons:!1,value:"#000000",select:function(t){$("#print-text-font-color-picker").data("kendoColorPicker").value(t.value);var e=$("#print-text-font-color-picker").data("kendoColorPicker").value();$("#print-add-text-textarea").css("color",e)}}),$("#print-add-text-button").kendoButton({click:function(t){console.log("print-add-text-button clicked!"),e.appendSummaryText()}}),$("#print-delete-text-button").kendoButton({click:function(t){console.log("print-delete-text-button clicked!"),$(".print-custom-text")&&$(".print-custom-text").remove()}}),e._initTextAreaFontStyle()}},{key:"_initTextAreaFontStyle",value:function(){var t=$("#print-text-font-family-dropdownlist").val();$("#print-add-text-textarea").css("font-family",t);var e=$("#print-text-font-size-dropdownlist").val();$("#print-add-text-textarea").css("font-size",e+"px");var n=$("#print-text-font-color-picker").data("kendoColorPicker").value();$("#print-add-text-textarea").css("color",n)}},{key:"_getMapPrintTextDialogId",value:function(){return"map-print-add-text-dialog"}},{key:"remove",value:function(){this._printAddTextDialog&&(t._instance=null,this._add_text_id_number=0,this._printAddTextDialog.destroy())}},{key:"appendSummaryText",value:function(){var t=this,e=$("#print-text-font-family-dropdownlist").val(),n=$("#print-text-font-size-dropdownlist").val(),r=$("#print-text-font-color-picker").data("kendoColorPicker").value(),i=document.getElementById("map-to-print");t.custom_text=L.DomUtil.create("div","print-custom-text",i),t._add_text_id_number+=1;var o="print-add-custom-text-"+t._add_text_id_number;t.custom_text.id=o,t.custom_text.setAttribute("style","position: relative; z-index: 901; float: left; display: inline-block; "),t.custom_text.style.fontFamily=e,t.custom_text.style.fontSize=n+"px",t.custom_text.style.color=r;var a=$("#print-add-text-textarea").width();t.custom_text.style.width=a+"px";var s=$("#print-add-text-textarea").val().replace(/\n/g,"<br/>");s=s.replace(/\s/g,"&ensp;"),t.custom_text.innerHTML=s,new L.Draggable(t.custom_text).enable(),$("#map-to-print").contextmenu({delegate:".print-custom-text",menu:[{title:t._local.DeleteText(),cmd:"deleteCustomText",uiIcon:"ui-icon custom-icon-clearall"}],select:function(t,e){e.target.css("visibility","hidden"),console.log(e.target)}})}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=l},{"../kq":1075,"./Window":1034}],994:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=r(t("../kq")),a=r(t("./Window"));r(t("./MapPrint"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._printTitleSettingDialog=null,this._local=o.default.Local.Control.MapPrint,this._titleBoxShadowValue="5px 2px 6px #000"}var e,n,r;return i(t,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__title__",this._local.Title()).replace("__a-map__",this._local.AMap()).replace("__title-background-color__",this._local.TitleBackgroundColor()).replace("__title-box-shadow__",this._local.TitleBoxShadow()).replace("__display-title__",this._local.DisplayTitle())}},{key:"open",value:(r=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._printTitleSettingDialog&&e._printTitleSettingDialog.close(),t.next=4,e._initTitleSettingDialog();case 4:e._initHtml(),e._printTitleSettingDialog.open();case 6:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this._printTitleSettingDialog.close()}},{key:"_init",value:(n=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initTitleSettingDialog();case 3:e._initHtml();case 4:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initTitleSettingDialog",value:(e=s(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={title:(e=this)._local.TitleSetting(),minWidth:"350px",minHeight:"150px",width:"355px",height:"155px",scrollable:!1,actions:["Close"],modal:!1,draggable:!0,resizable:!1,position:{top:180,left:70},appendTo:"#map-print-win",close:function(){console.log("Map print title setting dialog on close!"),r._remove()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new a.default(e._getPrintTitleSettingDialogId(),n),t.next=5,r.initAsync(function(){e._printTitleSettingDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initHtml",value:function(){var e=this,t=$("#print-title-input-textbox").kendoMaskedTextBox({change:function(){e._refreshMapPrintTitle()}}).data("kendoMaskedTextBox");$("#print-title-input-textbox").keyup(function(){t&&t.trigger("change")}),$("#print-title-font-family-dropdownlist").kendoDropDownList({dataSource:{data:[e._local.MicrosoftYaHei(),e._local.SimsunFont(),e._local.Italics(),"Helvetica","Garamond"]},animation:!1,index:1,change:function(){console.log("Setting font family change!!!"),e._refreshMapPrintTitle()}}).data("kendoDropDownList"),$("#print-title-font-size-dropdownlist").kendoDropDownList({autoWidth:!0,dataSource:["40","36","32","28","26","24","22","20","18","16","14","12"],animation:!1,index:0,change:function(){e._refreshMapPrintTitle()}}).data("kendoDropDownList"),$("#print-title-font-color-picker").kendoColorPicker({buttons:!1,value:"#000000",select:function(t){$("#print-title-font-color-picker").data("kendoColorPicker").value(t.value),e._refreshMapPrintTitle()}});var n=$("#title-background-color-picker").kendoColorPicker({buttons:!1,value:"rgba(135, 206, 250, 0.72)",opacity:!0,select:function(t){n.value(t.value),e._refreshMapPrintTitle()}}).data("kendoColorPicker"),r=$("#display-title-box-shadow");r.change(function(){r.is(":checked")?$("#map-print-title").css("box-shadow",e._titleBoxShadowValue):$("#map-print-title").css("box-shadow","none")});var i=$("#display-title-checkbox");i.change(function(){i.is(":checked")?$("#map-print-title").show():$("#map-print-title").hide()}),e._refreshMapPrintTitle()}},{key:"_getPrintTitleSettingDialogId",value:function(){return"map-print-title-setting-dialog"}},{key:"remove",value:function(){this._printTitleSettingDialog&&(t._instance=null,this._printTitleSettingDialog.destroy())}},{key:"_refreshMapPrintTitle",value:function(){console.log("_refreshMapPrintTitle FUNCTION Refresh Map Print Title");var t=$("#print-title-input-textbox").val();t?$("#map-print-title").show():$("#map-print-title").hide(),$("#map-print-title").text(t);var e=$("#print-title-font-family-dropdownlist").data("kendoDropDownList").select(),n=[this._local.MicrosoftYaHei(),this._local.SimsunFont(),this._local.Italics(),"Helvetica","Garamond"][e];$("#map-print-title").css("font-family",n);var r=parseInt($("#print-title-font-size-dropdownlist").val());$("#map-print-title").css("font-size",r+"px");var i=$("#print-title-font-color-picker").data("kendoColorPicker");if(i){var o=i.value();$("#map-print-title").css("color",o)}var a=$("#title-background-color-picker").data("kendoColorPicker");if(a){var s=a.value();$("#map-print-title").css("background-color",s)}$("#display-title-box-shadow").is(":checked")?$("#map-print-title").css("box-shadow",this._titleBoxShadowValue):$("#map-print-title").css("box-shadow","none"),$("#display-title-checkbox").is(":checked")?$("#map-print-title").show():$("#map-print-title").hide()}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=l},{"../kq":1075,"./MapPrint":991,"./Window":1034}],995:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("leaflet"),u=(r=o)&&r.__esModule?r:{default:r};var a={position:"topleft",pane:"shadowPane",zIndex:5e4,light_size:256},s=void 0,l=void 0,c=void 0,h=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;n.options=u.default.extend({},a,t),s=KQ.Local.Control.searchlight.title(),l=KQ.Local.Control.searchlight.titleCancel(),c=KQ.Local.Control.searchlight.length(),n.mask=new Image,n.mask.onload=function(){},n.mask.src="../../images/mask.png",n.maskHalo=new Image,n.maskHalo.onload=function(){},n.maskHalo.src="../../images/mask-halo.png",n.button=new KQ.Control.MapButton("icon iconfont icon-search-light",function(t){n.button.enabled()?n._stop(n):n._start(n)},s,"kq-searchlight"),n.buttonLength=new KQ.Control.MapButton("icon iconfont icon-search-light-length",function(t){var e=KQ.Control.SearchLightSizeDialog.getInstance();console.log(n.options.light_size),e.value(n.options.light_size),e.open(),e.on("change",function(t){n.options.light_size=t.value})},c,"kq-searchlight-length"),n.buttonBar=new KQ.Control.MapButtonBar([n.button,n.buttonLength],{position:n.options.position}),n.buttonBar.setAttribute("id","searchlight-buttonbar"),n.canUpdate=!0}return i(e,[{key:"addTo",value:function(t){var e=this;e.map=t,e.buttonBar.addTo(t),e.map.on("mousemove",function(t){e.button.enabled()&&e.options.layer&&"layerwmts"!==e.options.layer.desc&&(e.containerPoint=t.containerPoint,e.isMouseDown||e.isImgValid&&e._updatePosition([e.containerPoint.x,e.containerPoint.y]))}),e.map.on("mousedown",function(t){e.button.enabled()&&e.options.layer&&"layerwmts"!==e.options.layer.desc&&(e.isMouseDown=!0,e.isMouseDownPos=t.containerPoint)}),e.map.on("mouseup",function(t){e.button.enabled()&&e.options.layer&&"layerwmts"!==e.options.layer.desc&&e.isMouseDown&&(e.isMouseDown=!1,e.isMouseDownPos.equals(t.containerPoint)||(e.isImgValid=!1))}),e.map.on("zoom",function(t){e.button.enabled()&&e.options.layer&&"layerwmts"!==e.options.layer.desc&&(e.isImgValid=!1)}),e.map.on("resize",function(t){e.button.enabled()&&e.options.layer&&"layerwmts"!==e.options.layer.desc&&(e._updateCanvasSize(),e.isImgValid=!1)})}},{key:"_updateImage",value:function(){var e=this,t=e.map.getSize(),n=t.x,r=t.y,i=e.options.layer._source._overlay._currentUrl,o=e.map.getBounds(),a=e.map.getZoom(),s=(e.map.options.crs.project(o.getNorthWest(),a),e.map.options.crs.project(o.getSouthEast(),a),e._getProjectedLogicBound(e.map));console.log("url:"+i),console.log("bound:"+s.min.toString()+" "+s.max.toString()),e.new_img=new Image,e.new_img.setAttribute("crossOrigin","anonymous"),e.new_img.onload=function(){console.log("img onload !!!!!!!!!!"),e.img&&(delete e.img,e.isImgValid=!1),e.img=e.new_img,e.isImgValid=!0,e.new_img=null;var t=e.containerPoint?e.containerPoint:[n/2,r/2];e._updatePosition([t.x,t.y],s)},e.new_img.onerror=function(){console.log("img onerror !!!!!!!!!!")},e.new_img.src=i,e.bound=s}},{key:"_updatePosition",value:function(t,e){var n=this,r=n.map.getSize(),i=r.x,o=r.y;if(n.cacheCanvas.width===i&&n.cacheCanvas.height===o&&n.isImgValid&&n.img){n._imageOverlay&&e&&(n._imageOverlay.remove(),delete n._imageOverlay,n._imageOverlay=null),e=e||this.bound;var a=n.options.light_size;if(n._imageOverlay){if(n.canUpdate){n.canUpdate=!1,setTimeout(function(){n.canUpdate=!0},60),n.cacheCtx.save(),n.cacheCtx.clearRect(0,0,n.cacheCanvas.width,n.cacheCanvas.height),n.cacheCtx.drawImage(n.mask,t[0]-a/2,t[1]-a/2,a,a),n.cacheCtx.globalCompositeOperation="source-in",n.cacheCtx.drawImage(n.img,0,0),n.cacheCtx.restore();var s=n.cacheCanvas.toDataURL("png");n._imageOverlay._image.src=s}}else{n.cacheCtx.save(),n.cacheCtx.clearRect(0,0,n.cacheCanvas.width,n.cacheCanvas.height),n.cacheCtx.drawImage(n.mask,t[0]-a/2,t[1]-a/2,a,a),n.cacheCtx.globalCompositeOperation="source-in",n.cacheCtx.drawImage(n.img,0,0),n.cacheCtx.restore();var l=n.cacheCanvas.toDataURL("png");n._imageOverlay=new KQ.Struct.ImageOverlay(l,e),n._imageOverlay.addTo(n.map)}}}},{key:"_updateCanvasSize",value:function(){var t=this.map.getSize(),e=t.x,n=t.y;this.cacheCanvas?this.cacheCanvas.width===e&&this.cacheCanvas.height===n||(delete this.cacheCtx,delete this.cacheCanvas,this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d"),this.cacheCanvas.width=e,this.cacheCanvas.height=n):(this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d"),this.cacheCanvas.width=e,this.cacheCanvas.height=n)}},{key:"_start",value:function(n){var r=KQ.Control.Manager.getInstance().getMapView(),t=r.getTree(),i=r.getTree().getActiveLayerKey();if(!i||i<0)KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.mustSelectLayer());else if(t.getCheckedLayers().length<2)KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.atLeastCheckTwoLayers());else{n.isImgValid=!1;var e=t._mapLayerManager.resetSourceFromKey(i);e?(t._updateLayerGroup(e),KQ.Control.Waiting.show(KQ.Control.Manager.getInstance()._getMap()),setTimeout(function(){var t=r.getTree()._getMapLayerFromKey(i);if(t){if(t.wmtsParams){var e=n.options.light_size;n.wmtsLayer=new KQ.Map.MapLayerWMTSMask(t._url,{maskSize:e,style:t.options.style,layer:t.options.layer,tilematrixSet:t.options.tilematrixSet,format:t.options.format},n.options.zIndex),n.wmtsLayer.addTo(n.map),n.button.setTitle(l),n.button.setEnabled(!n.button.enabled()),$("#sidebar").css("pointer-events","none"),$("#sidebyside-buttonbar").css("pointer-events","none"),$("#screenshot-buttonbar").css("pointer-events","none"),$(".kq-advmenu-btn-side-by-side").css("pointer-events","none"),$(".kq-advmenu-btn-screenshot").css("pointer-events","none"),KQ.Control.Notification.getInstance().showInfo(KQ.Local.Control.searchlight.maskStart()),KQ.Control.Manager.getInstance()._unselectAllControlsExcept("searchlight")}else{if(!t._source._overlay._currentUrl)return KQ.Control.Waiting.close(),void KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.mustCheckLayer());n.button.setTitle(l),n.button.setEnabled(!n.button.enabled()),$("#sidebar").css("pointer-events","none"),$("#sidebyside-buttonbar").css("pointer-events","none"),$("#screenshot-buttonbar").css("pointer-events","none"),$(".kq-advmenu-btn-side-by-side").css("pointer-events","none"),$(".kq-advmenu-btn-screenshot").css("pointer-events","none"),KQ.Control.Notification.getInstance().showInfo(KQ.Local.Control.searchlight.maskStart()),KQ.Control.Manager.getInstance()._unselectAllControlsExcept("searchlight"),n.options.layer=t,r._getMap().dragging.enable(),n.options.layer._source._overlay.on("done",n._onLayerDone,n),n._updateCanvasSize(),n._updateImage()}KQ.Control.Waiting.close()}else KQ.Control.Waiting.close()},2e3)):KQ.Control.Notification.getInstance().showError(KQ.Local.Control.searchlight.mustSelectLeafLayer())}}},{key:"_stop",value:function(t){t.button.enabled()&&(t.button.setTitle(s),t.button.setEnabled(!t.button.enabled()),$("#sidebar").css("pointer-events","auto"),$("#sidebyside-buttonbar").css("pointer-events","auto"),$("#screenshot-buttonbar").css("pointer-events","auto"),$(".kq-advmenu-btn-side-by-side").css("pointer-events","auto"),$(".kq-advmenu-btn-screenshot").css("pointer-events","auto"),KQ.Control.Notification.getInstance().showSuccess(KQ.Local.Control.searchlight.maskRestore()),t.options.layer&&t.options.layer._source&&t.options.layer._source._overlay.off("done",t._onLayerDone,t),t._imageOverlay&&(t._imageOverlay.remove(),delete t._imageOverlay,t._imageOverlay=null),t.img&&(delete t.img,t.img=null,t.isImgValid=!1),t.wmtsLayer&&(t.wmtsLayer.remove(),delete t.wmtsLayer,t.wmtsLayer=null))}},{key:"_onLayerDone",value:function(){this.button.enabled()&&this._updateImage()}},{key:"_getProjectedLogicBound",value:function(t){var e=t.getSize(),n=t.getCenter(),r=this.options.crs||t.options.crs,i=t.project(n,t.getZoom()),o=new u.default.Point(i.x-e.x/2,i.y-e.y/2),a=new u.default.Point(i.x+e.x/2,i.y+e.y/2),s=t.unproject(o,t.zoom),l=t.unproject(a,t.zoom);return new u.default.Bounds(r.project(s),r.project(l))}},{key:"remove",value:function(){this.map.removeControl(this.buttonBar)}}]),e}();n.default=h},{leaflet:560}],996:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._markers=L.markerClusterGroup()}return r(t,[{key:"addToMapView",value:function(t){t._getMap().addLayer(this._markers)}},{key:"addLayers",value:function(t){this._markers.addLayers(t)}},{key:"addLayer",value:function(t){this._markers.addLayer(t)}},{key:"removeLayer",value:function(t){this._markers.removeLayer(t)}},{key:"clearLayers",value:function(){this._markers.clearLayers()}}]),t}();n.default=i},{}],997:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i={position:"topleft",localization:"cn",primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"sqmeters",secondaryAreaUnit:"sqkilometers",activeColor:"#74A402",completedColor:"#B82832",units:{sqkilometers:{factor:1e-6,display:"sqkilometers",decimals:3}},onMeasureStart:function(t){console.log("onMeasureStart!")},onMeasureFinish:function(t){console.log("onMeasureFinish!")}},o=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.localization=KQ.Local.getCurrentLanguage(),e.options=L.extend({},i,t),e.measure=new L.Control.Measure(e.options),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Evented),r(n,[{key:"addTo",value:function(t){this._map=t,this._map.on("measurestart",this.options.onMeasureStart),this._map.on("measurefinish",this.options.onMeasureFinish),this.measure.addTo(t)}},{key:"remove",value:function(){this._map.off("measurestart",this.options.onMeasureStart),this._map.off("measurefinish",this.options.onMeasureFinish),this._map.removeControl(this.measure)}}]),n}();n.default=o},{}],998:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("../kq")),o=a(t("leaflet"));function a(t){return t&&t.__esModule?t:{default:t}}var s={position:"topleft"},l=void 0,u=void 0,c=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=o.default.extend({},s,t)}return r(e,[{key:"addTo",value:function(t){var e=this;e._map=t,l=i.default.Local.Control.measureSeparate.titleMeasureLength(),u=i.default.Local.Control.measureSeparate.titleMeasureArea(),e.buttonLength=new i.default.Control.MapButton("iconfont icon-measure-length",function(t){i.default.Control.Manager.getInstance()._unselectAllControlsExcept("measureseparate"),e._stopPreviousMeasure(),e._map._distControl&&(e._map._distControl._disableCompute(),e._map._distControl._enableCompute())},l,"kq-measureseparate-length"),e.buttonArea=new i.default.Control.MapButton("iconfont icon-measure-area",function(t){i.default.Control.Manager.getInstance()._unselectAllControlsExcept("measureseparate"),e._stopPreviousMeasure(),e._map._areaControl&&(e._map._areaControl._disableCompute(),e._map._areaControl._enableCompute())},u,"kq-measureseparate-area"),e.buttonBar=new i.default.Control.MapButtonBar([e.buttonLength,e.buttonArea],{position:e.options.position}),e.buttonBar.setAttribute("id","measureseparate-buttonbar"),this.buttonBar.addTo(this._map)}},{key:"addToMapView",value:function(t){this.addTo(t._getMap())}},{key:"disable",value:function(){this._map._distControl&&(this._map._distControl._finishCompute(),this._map._areaControl._finishCompute())}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_stopPreviousMeasure",value:function(){this._map._distControl&&this._map._distControl._finishCompute(),this._map._areaControl&&this._map._areaControl._finishCompute()}}]),e}();n.default=c},{"../kq":1075,leaflet:560}],999:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),g=r(t("../kq")),m=r(t("leaflet")),s=r(t("./Window")),y=r(t("../common/CommonValues")),_=r(t("./toolbar/NetworkAnalysisMenu")),v=t("leaflet-ant-path");function r(t){return t&&t.__esModule?t:{default:t}}function b(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function l(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._networkAnalysisDialog=null,this._isFirstOpen=!0,this._routeGroup=null,this._html=g.default.Local.Control.NetworkAnalysisDialog.html,this._networkAnalysisTypes=g.default.Local.Control.NetworkAnalysisDialog.networkAnalysisTypes,this._other=g.default.Local.Control.NetworkAnalysisDialog.other}var e,n,r,i,o;return a(t,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__select-type__",this._html.selectType()).replace("__select-mode__",this._html.selectMode()).replace("__select-layer__",this._html.selectLayer()).replace("__analysis__",this._html.analysis()).replace("__clear__",this._html.clear())}},{key:"isOpen",value:function(){return null!=this._networkAnalysisDialog&&!this._networkAnalysisDialog.element.is(":hidden")}},{key:"open",value:(o=l(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initNetworkAnalysisWindow();case 3:e._initNetworkAnalysisHtml(),e._networkAnalysisDialog&&(e._initLayerGroup(),e._networkAnalysisDialog.open());case 5:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"_init",value:(i=l(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initNetworkAnalysisWindow();case 3:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_initNetworkAnalysisWindow",value:(r=l(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n={title:g.default.Local.Control.NetworkAnalysisDialog.networkAnalysis(),width:"270px",height:"265px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:["Close"],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){e.close(),_.default.getInstance().exitNetworkAnalysisMode()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new s.default("network-analysis-dialog",n),t.next=5,r.initAsync(function(){e._networkAnalysisDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_initNetworkAnalysisHtml",value:function(){var t,d=this,e=[{text:this._networkAnalysisTypes.optimal_path(),value:y.default.networkAnalysisTypes.optimal_path},{text:this._networkAnalysisTypes.traveling_salesman_problem(),value:y.default.networkAnalysisTypes.traveling_salesman_problem},{text:this._networkAnalysisTypes.trace_back(),value:y.default.networkAnalysisTypes.trace_back}];$("#network-analysis-type-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:e,animation:!1,change:function(){var t=parseInt($("#network-analysis-type-dropdownlist").val());$("#"+y.default.mapContainerID).trigger("network-analysis_type_changed",t),$("#network-analysis-mode-dropdownlist").data("kendoDropDownList").setDataSource(d._getModeDataSourceByType(t))}}).data("kendoDropDownList"),$("#network-analysis-mode-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:d._getModeDataSourceByType(y.default.networkAnalysisTypes.optimal_path),animation:!1}).data("kendoDropDownList"),$("#network-analysis-layer-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:d._getNetworkAnalysisDataSource(),animation:!1}).data("kendoDropDownList"),$("#network-analysis-execute-btn").kendoButton({click:(t=l(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d._clearLayerGroup(),e=d._getQueryOptions(),t.next=5,d._getQueryData(e);case 5:if(0!==(n=t.sent).length){if(r=d._formatResultData(n),$("#network-analysis-type-dropdownlist").val()==y.default.networkAnalysisTypes.trace_back)for(i=0;i<r.length;++i)o=r[i],a=(0,v.antPath)(o,d._tracebackPathOptions()),d._routeGroup.addLayer(a),a.on("contextmenu",function(){});else{for(s=[],l=0;l<r.length;++l)s.push.apply(s,b(r[l]));u=m.default.polyline(s),d._routeGroup.addLayer(u),u.snakeIn(),u.on("contextmenu",function(){})}for(g.default.Control.Notification.getInstance().showSuccess(d._other.networkAnalysisSuccess()),c={minWidth:"100",closeButton:!1},h=d._getNodeData(n),_.default.getInstance().getStartPointLayer().bindPopup(d._popupTemplateHtml(h[0].direction,h[0].distance),c),f=m.default.icon({iconUrl:g.default.Common.CommonValues.kqwebmapPath+"images/node.png",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-6]}),p=1;p<h.length;++p)d._routeGroup.addLayer(m.default.marker(h[p].coordinate,{icon:f}).bindPopup(d._popupTemplateHtml(h[p].direction,h[p].distance),c))}else g.default.Control.Notification.getInstance().showError(d._other.networkAnalysisFailed());t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),g.default.Control.Notification.getInstance().showError(d._other.networkAnalysisFailed());case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return t.apply(this,arguments)})}),$("#network-analysis-clear-btn").kendoButton({click:function(){d._clearLayerGroup()}})}},{key:"close",value:function(){this._networkAnalysisDialog&&(this._clearLayerGroup(),t._instance=null,this._networkAnalysisDialog.destroy())}},{key:"_getNetworkAnalysisDialogId",value:function(){return"network-analysis-dialog"}},{key:"_getNetworkAnalysisDataSource",value:function(){for(var t=g.default.Map.MapConfig.getInstance(),e=t.getAllNetworkAnalysisLayers(),n=[],r=0;r<e.length;++r){var i=e[r];n.push({text:t.getLayerProperty(i,"label"),value:t.getLayerProperty(i,"src_name")+"@@"+t.getLayerProperty(i,"id")})}return n}},{key:"_formatLatLng",value:function(t){return t.lng+","+t.lat}},{key:"_formatLatLngArray",value:function(t){for(var e="",n=0;n<t.length-1;++n)e+=this._formatLatLng(t[n])+",";return 0<=t.length-1&&(e+=this._formatLatLng(t[t.length-1])),e}},{key:"_initLayerGroup",value:function(){if(!this._routeGroup){this._routeGroup=m.default.layerGroup([]),this._routeGroup.desc=this._other.pathLayer();var t=g.default.Control.Manager.getInstance()._getMap();t?t.addLayer(this._routeGroup):console.log("map is null can't loading map!")}}},{key:"_clearLayerGroup",value:function(){this._routeGroup.clearLayers()}},{key:"_getModeDataSourceByType",value:function(t){var e=void 0;switch(t){case y.default.networkAnalysisTypes.optimal_path:e=[{text:this._networkAnalysisTypes.distance_first(),value:y.default.networkAnalysisOptimalPathTypes.distance_first},{text:this._networkAnalysisTypes.time_first(),value:y.default.networkAnalysisOptimalPathTypes.time_first}];break;case y.default.networkAnalysisTypes.traveling_salesman_problem:e=[{text:this._networkAnalysisTypes.greed_method(),value:y.default.networkAnalysisTSPTypes.greed},{text:this._networkAnalysisTypes.trace_back_method(),value:y.default.networkAnalysisTSPTypes.trace_back},{text:this._networkAnalysisTypes.enumeration_method(),value:y.default.networkAnalysisTSPTypes.enumeration}];break;case y.default.networkAnalysisTypes.trace_back:e=[{text:this._networkAnalysisTypes.up(),value:y.default.networkAnalysisTracebackTypes.up},{text:this._networkAnalysisTypes.down(),value:y.default.networkAnalysisTracebackTypes.down}]}return e}},{key:"_getQueryOptions",value:function(){var t=$("#network-analysis-layer-dropdownlist").data("kendoDropDownList").value().split("@@"),e=d(t,2),n=e[0],r=e[1],i=g.default.Map.MapConfig.getInstance().getUrlFromSourceName(n,!1),o=_.default.getInstance().getData(),a=this._formatLatLngArray(o.startPoint),s=this._formatLatLngArray(o.endPoint),l=this._formatLatLngArray(o.impassePoint),u=$("#network-analysis-type-dropdownlist").val(),c=$("#network-analysis-mode-dropdownlist").val(),h="";u!=y.default.networkAnalysisTypes.optimal_path&&u!=y.default.networkAnalysisTypes.traveling_salesman_problem||(h=this._formatLatLngArray(o.wayPoint)),u==y.default.networkAnalysisTypes.traveling_salesman_problem&&(s=this._formatLatLng(o.wayPoint.pop()),h=this._formatLatLngArray(o.wayPoint));var f="";if(0!==o.impasseArea.length){f+="[";for(var p=0;p<o.impasseArea.length-1;++p)f+=JSON.stringify(o.impasseArea[p].toGeoJSON().geometry)+",";f+=JSON.stringify(o.impasseArea[o.impasseArea.length-1].toGeoJSON().geometry)+"]"}return{url:i,layerId:r,origin:a,destination:s,middlepoint:h,barrierpoints:l,avoidareas:f,querytype:u,mode:c}}},{key:"_getQueryData",value:(n=l(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,r=[],t.prev=2,g.default.Control.Waiting.show(g.default.Control.Manager.getInstance()._getMap()),t.next=6,n._queryData(e);case 6:r=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),g.default.Control.Waiting.close();case 12:return t.prev=12,g.default.Control.Waiting.close(),t.finish(12);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},t,this,[[2,9,12,15]])})),function(t){return n.apply(this,arguments)})},{key:"_queryData",value:(e=l(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.default.Query.NetworkAnalysis.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_tracebackPathOptions",value:function(){return{delay:400,dashArray:[10,20],weight:5,color:"#0000FF",pulseColor:"#FFFFFF",paused:!1,reverse:!1,hardwareAccelerated:!0}}},{key:"_formatResultData",value:function(t){for(var e=[],n=$("#network-analysis-type-dropdownlist").val(),r=t[0].segments.features,i=0;i<r.length;++i){for(var o=[],a=r[i].geometry.coordinates,s=0;s<a.length;++s)n==y.default.networkAnalysisTypes.trace_back?o.push([a[s][1],a[s][0]]):o.push(new m.default.LatLng(a[s][1],a[s][0]));e.push(o)}return e}},{key:"_getNodeData",value:function(t){for(var e=[],n=t[0].segments.features,r=0;r<n.length;++r){var i=n[r];e.push({coordinate:[i.geometry.coordinates[0][1],i.geometry.coordinates[0][0]],direction:i.properties.direction,distance:Number(i.properties.length).toFixed(2)})}return e}},{key:"_popupTemplateHtml",value:function(t,e){return"<div>"+("<div style='font-weight: bold; font-size: 13px; margin-bottom: 4px'>"+this._other.toNextInflexion()+"</div>")+("<div style='margin-bottom: 4px'>"+this._other.direction()+": "+t+"</div>")+("<div>"+this._other.distance()+": "+e+this._other.meter()+"</div>")+"</div>"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=i},{"../common/CommonValues":952,"../kq":1075,"./Window":1034,"./toolbar/NetworkAnalysisMenu":1053,leaflet:560,"leaflet-ant-path":557}],1e3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i={right:10,bottom:10},o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L.extend({},i,t),this.parent_id=KQ.Common.CommonValues.mapContainerID,this.notification=$("#notification").kendoNotification({position:{pinned:!0,right:this.options.right,bottom:this.options.bottom},autoHideAfter:5e3,stacking:"default",templates:[{type:"kq-success-s",template:$("#successTemplate_s").html()},{type:"kq-success-m",template:$("#successTemplate_m").html()},{type:"kq-success-l",template:$("#successTemplate_l").html()},{type:"kq-info-s",template:$("#infoTemplate_s").html()},{type:"kq-info-m",template:$("#infoTemplate_m").html()},{type:"kq-info-l",template:$("#infoTemplate_l").html()},{type:"kq-error-s",template:$("#errorTemplate_s").html()},{type:"kq-error-m",template:$("#errorTemplate_m").html()},{type:"kq-error-l",template:$("#errorTemplate_l").html()}]}).data("kendoNotification"),$(document).one("kendo:pageUnload",function(){this.notification&&this.notification.hide()})}return r(e,[{key:"setOptions",value:function(t){this.options=L.extend({},this.options,t)}},{key:"showInfo",value:function(t,e){var n=this,r=n._getMsgVisualLength(t),i="kq-info-l";r<210?i="kq-info-s":210<r&&r<320&&(i="kq-info-m"),t=n._cutMsg(t,500),n._resetPosition(),e=e||100,setTimeout(function(){n.notification.show({message:t},i)},e)}},{key:"showError",value:function(t,e){var n=this,r=n._getMsgVisualLength(t),i="kq-error-l";r<210?i="kq-error-s":210<r&&r<320&&(i="kq-error-m"),t=n._cutMsg(t,500),n._resetPosition(),e=e||100,setTimeout(function(){n.notification.show({message:t},i)},e)}},{key:"showSuccess",value:function(t,e){var n=this,r=n._getMsgVisualLength(t),i="kq-success-l";r<210?i="kq-success-s":210<r&&r<320&&(i="kq-success-m"),t=n._cutMsg(t,500),n._resetPosition(),e=e||100,setTimeout(function(){n.notification.show({message:t},i)},e)}},{key:"_cutMsg",value:function(t,e){var n=t;if(this._getMsgVisualLength(n)>e)for(n+="...";this._getMsgVisualLength(n)>e;)n=n.substring(0,n.length-4)+"...";return n}},{key:"_resetPosition",value:function(){var t=KQ.Common.CommonTools._getMapAbsoluteRightBottom(),e=$(window).width()-t[0]+this.options.right,n=$(window).height()-t[1]+this.options.bottom;this.notification.options.position.right=e,this.notification.options.position.bottom=n}},{key:"_getMsgVisualLength",value:function(t){var e=$("#kq-n-text-test");return e.text(t),e.outerWidth()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"_insertNotificationHtml",value:function(){console.log("_insertNotificationHtml !!!!!!");var t=KQ.Common.CommonValues.mapContainerID;$("#"+t).prepend('\n      <span id="kq-n-text-test"></span>\n      <span id="notification" style="display:none;"></span>\n      \n      <script id="successTemplate_s" type="text/x-kendo-template">\n          <div class="kq-success kq-notification-s">\n              <img src="../../images/notification/success-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="successTemplate_m" type="text/x-kendo-template">\n          <div class="kq-success kq-notification-m">\n              <img src="../../images/notification/success-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="successTemplate_l" type="text/x-kendo-template">\n          <div class="kq-success kq-notification-l">\n              <img src="../../images/notification/success-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>\n      \n      <script id="infoTemplate_s" type="text/x-kendo-template">\n          <div class="kq-info kq-notification-s">\n              <img src="../../images/notification/info-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="infoTemplate_m" type="text/x-kendo-template">\n          <div class="kq-info kq-notification-m">\n              <img src="../../images/notification/info-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>         \n      <script id="infoTemplate_l" type="text/x-kendo-template">\n          <div class="kq-info kq-notification-l">\n              <img src="../../images/notification/info-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>\n      \n      <script id="errorTemplate_s" type="text/x-kendo-template">\n          <div class="kq-error kq-notification-s">\n              <img src="../../images/notification/error-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>     \n      <script id="errorTemplate_m" type="text/x-kendo-template">\n          <div class="kq-error kq-notification-m">\n              <img src="../../images/notification/error-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>    \n      <script id="errorTemplate_l" type="text/x-kendo-template">\n          <div class="kq-error kq-notification-l">\n              <img src="../../images/notification/error-icon.png" />\n              <h3>#= message #</h3>\n          </div>\n      <\/script>\n      ')}}]),e}();n.default=o},{}],1001:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),k=r(t("../kq")),s=r(t("./OverlayAnalysisResultDialog")),l=r(t("./OverlayAnalysisTree")),u=r(t("./Manager"));function r(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._div=t,this._layerTree=null,this._config=k.default.Query.OverlayAnalysisConfig.getInstance(),this._prevWindowHeight=null,this._init()}var n,r,t,i,o;return a(e,[{key:"addTo",value:function(t){this._map=t}},{key:"_initHtml",value:(o=c(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._container=L.DomUtil.get(e._div),e._container||(e._container=L.DomUtil.create("div")),t.next=5,k.default.Common.NetworkTools.httpGetAsync(k.default.Common.CommonValues.kqwebmapPath+"query/overlay_analysis.html");case 5:"error"===(n=t.sent)?console.log("overlay_analysis.html error"):(n=(n=(n=n.replace("__analysis__",k.default.Local.Control.overlayAnalysis.html.analysis())).replace("__extent__",k.default.Local.Control.overlayAnalysis.html.extent())).replace("__setAnalysisLayer__",k.default.Local.Control.overlayAnalysis.html.setAnalysisLayer()),$(e._container).append(n),console.log("overlay_analysis.html success"));case 7:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"_init",value:(i=c(regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this,t.next=3,i._initHtml();case 3:i._layerTree=new l.default("overlayAnalysisLayerTree"),$("#overlay-analysis-execute").kendoButton({click:function(){i._executeOverlayAnalysis()}}),$("#overlay-analysis-execute").kendoTooltip({position:"top",showAfter:k.default.Common.CommonValues.showAfterInMsec,content:function(t){return k.default.Local.Control.overlayAnalysis.executeAnalysis()}}).data("kendoTooltip"),$("#overlay-analysis-draw").kendoButton({click:function(){i._toggleDrawingPanel()}}),$("#overlay-analysis-draw").kendoTooltip({position:"top",showAfter:k.default.Common.CommonValues.showAfterInMsec,content:function(t){return k.default.Local.Control.overlayAnalysis.setAnalysisExtent()}}).data("kendoTooltip"),i._prevWindowHeight=window.innerHeight,$(window).resize(function(t){var e=t.target.innerHeight,n=e-i._prevWindowHeight,r=$("#overlayAnalysisLayerTree .k-grid-content").height()+n;$("#overlayAnalysisLayerTree .k-grid-content").height(r),i._prevWindowHeight=e});case 10:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_toggleDrawingPanel",value:function(){u.default.getInstance()._toggleDrawPane()}},{key:"_executeOverlayAnalysis",value:(t=c(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=(e=this)._getAnalysisLayers()).length){t.next=6;break}return t.abrupt("return");case 6:if(r=k.default.Control.Manager.getInstance().getControl("tree")){t.next=11;break}k.default.Control.Notification.getInstance().showError(k.default.Local.Control.overlayAnalysis.notification.getLayerTreeFailed()),t.next=34;break;case 11:if(i=e._getGeometry(),k.default.Control.Notification.getInstance().showInfo(k.default.Local.Control.overlayAnalysis.notification.selectInLayerTree()),r.setQueryLayersChecked(n)){t.next=15;break}return t.abrupt("return");case 15:if(null!==i){t.next=19;break}k.default.Control.Notification.getInstance().showError(k.default.Local.Control.overlayAnalysis.notification.drawAnalysisGeometry()),t.next=34;break;case 19:return o=[],t.prev=20,k.default.Control.Waiting.show(k.default.Control.Manager.getInstance()._getMap()),t.next=24,e._getQueryData(n,i);case 24:o=t.sent,t.next=30;break;case 27:t.prev=27,t.t0=t.catch(20),k.default.Control.Waiting.close();case 30:return t.prev=30,k.default.Control.Waiting.close(),t.finish(30);case 33:k.default.Query.QueryIDManager.isDataArrayCanceled(o,!0)?console.log("query canceled, data come!"):0===o.length?k.default.Control.Notification.getInstance().showError(k.default.Local.Control.overlayAnalysis.notification.analysisRecordEmpty()):(a=e._organizeQueryData(o),s.default.getInstance().open(a));case 34:case"end":return t.stop()}},t,this,[[20,27,30,33]])})),function(){return t.apply(this,arguments)})},{key:"_getAnalysisLayers",value:function(){var t=[],e=this._layerTree.getCheckedLayers();if(0===e.length)k.default.Control.Notification.getInstance().showError(k.default.Local.Control.overlayAnalysis.notification.selectAnalysisLayer());else for(var n=0;n<e.length;++n){var r=k.default.Map.MapCommon.getSourceNameLayerIdFromKey(e[n].key);r.queryId=e[n].queryId,t.push(r)}return t}},{key:"_getQueryData",value:(r=c(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this,i=[],o=0;case 3:if(!(o<e.length)){t.next=16;break}if(a=e[o],s=r._getExactConfigLayer(a),l=a.sourceName,null===(u=r._getQueryOptions(s,l,n))){t.next=13;break}return t.next=11,r._queryData(u);case 11:0<(c=t.sent).length&&i.push({sourceName:a.sourceName,layerId:a.layerId,queryId:u.layerId,records:c});case 13:++o,t.next=3;break;case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"_organizeQueryData",value:function(t){for(var e=[],n=this._config,r=0;r<t.length;++r){var i=[],o=t[r],a=o.sourceName,s=o.layerId,l=o.queryId,u=o.records,c=this._getExactConfigLayer({layerId:s,queryId:l,sourceName:a}),h=n.getLayerLabel(c),f=c._flicker_color,p=n.getLayerFields(c).split(","),d=n.getLayerFieldsAlias(c).split(","),g=[];n.getLayerChartField(c)&&(g=n.getLayerChartField(c).split("|"));var m=[];n.getLayerSummaryField(c)&&(m=n.getLayerSummaryField(c).split("|")),0==m.length&&(m[0]="areaLength");for(var y=0;y<m.length;++y)"OBJECTID"===m[y]&&(m[y]="areaLength");for(var _=k.default.Common.CommonTools._findTooltipFromSourceNameLayerId(a,s),v=0;v<u.length;++v){var b=u[v],x={},w=b.properties;x.geometry=b.geometry,x.areaLength=w.AreaLength2,"1"===c.type&&(x.areaLength=1);for(var L=0;L<p.length;++L){var C=p[L];w.hasOwnProperty(C)&&(x[C]=w[C])}i.push(x)}e.push({sourceName:a,layerId:s,queryId:l,flickerColor:f,label:h,toolTip:_,fields:p,titles:d,chartFields:g,records:i,summaryField:m})}return e}},{key:"_getExactConfigLayer",value:function(t){var e=t.layerId,n=t.queryId,r=t.sourceName;return this._config.findExactLayer(e,n,r)}},{key:"_getSourceFromName",value:function(t,e){return k.default.Map.MapConfig.getInstance().getSourceByName(t,e)}},{key:"_getQueryUrl",value:function(t){return k.default.Map.MapConfig.getInstance().getSourceUrl(this._getSourceFromName(t,!0))}},{key:"_getQueryOptions",value:function(t,e,n){var r=this._config,i=r.getLayerQueryID(t),o=r.getLayerFields(t),a=r.getLayerRequestCount(t),s=r.getLayerQueryPrecision(t);return{url:this._getQueryUrl(e),layerId:i,fields:o,geometry:n=this._formatGeometry(n,s),reqcount:a}}},{key:"_formatGeometry",value:function(t,e){for(var n=$.parseJSON(t),r=n.geometries,i=0;i<r.length;++i){var o=r[i].coordinates;this._formatCoordinates(o,e)}return JSON.stringify(n)}},{key:"_formatCoordinates",value:function(t,e){for(var n=0;n<t.length;++n){if("number"!=typeof t[n])return this._formatCoordinates(t[n],e);t[n]=Number(t[n].toFixed(e))}}},{key:"_getGeometry",value:function(){var t=k.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!1);return t?JSON.stringify(k.default.Common.CommonTools.geoJsonFCToGC(t)):null}},{key:"_queryData",value:(n=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=k.default.Query.OverlayAnalysis.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})}]),e}();n.default=i},{"../kq":1075,"./Manager":985,"./OverlayAnalysisResultDialog":1003,"./OverlayAnalysisTree":1004}],1002:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=(a(t("./Window")),a(t("./QueryResultChart")));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.default),r(n,[{key:"open",value:function(t,e){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_mergeOptions",this).call(this,e),i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"open",this).call(this,t)}},{key:"_getCatalogKey",value:function(t){for(var e="",n=this._currentChartField,r=0;r<n.length;++r)e+=t[n[r]]+this._options.chartFieldSeparator;return e}},{key:"_getEachCatalogValue",value:function(t){for(var e={},n=this._currentSummaryField,r=0;r<t.length;++r){var i=t[r],o=this._getCatalogKey(i);e[o]||(e[o]=0),e[o]+=Number(i[n])}return e}},{key:"_getChartDataSource",value:function(t){var e=[],n=this._getEachCatalogValue(t),r=this._currentSummaryField;this._total=KQ.Map.MapCommon._totalStatisticsByField(t,r);var i=0,o=this._options.colors;for(var a in n){var s=o[i++%o.length],l=Number(n[a]/this._total),u=a.split(this._options.chartFieldSeparator).join(" ");e.push({color:s,value:l,value1:n[a],category:u})}for(var c=1,h=0;h<e.length-1;++h)c-=e[h].value;return e[e.length-1].value=c,e}},{key:"_isRightData",value:function(t){var e=this._currentChartField;return this._isRightChartFields(e)?!(t.length>this._options.maxTotalNumber)||(KQ.Control.Notification.getInstance().showError(KQ.Local.Control.queryResultChart.notification.limitStatisticalResult()),!1):(KQ.Control.Notification.getInstance().showError(KQ.Local.Control.queryResultChart.notification.setCorrectField()),!1)}},{key:"_isRightChartFields",value:function(t){return t&&L.Util.isArray(t)&&0<t.length}},{key:"_getChartDialogId",value:function(){return"overlay-query-result-chart-dialog"}},{key:"_getChartId",value:function(){return"overlay-query-result-chart"}},{key:"_getChartPieId",value:function(){return"chartPie_overlay"}},{key:"_getChartBarId",value:function(){return"chartBar_overlay"}},{key:"_exportImageButtonId",value:function(){return"exportImage_overlay"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultChart":1008,"./Window":1034}],1003:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./QueryResultDialog"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=t;return e._desc="overlay-analysis-",e._title=KQ.Local.Control.overlayAnalysisResultDialog.title(),e._init(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default),i(n,[{key:"_initHtml",value:function(){var t=KQ.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="overlay-analysis-result-dialog"><div id="overlay-analysis-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"overlay-analysis-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"overlay-analysis-layer-name-tabs"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultDialog":1009}],1004:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),b=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._div=t,this._layerTree=null,this._config=b.default.Query.OverlayAnalysisConfig.getInstance(),this._defaultCheckedLayers={},this._init()}return i(e,[{key:"_init",value:function(){this._initUi(),this._bindEvent()}},{key:"_initUi",value:function(){var r=this;$(r._getLayerTreeId()).closest(".sidebar-pane").addClass("active"),r._layerTree=$(r._getLayerTreeId()).kendoTreeList({height:"calc(100% - 26px)",columns:[{field:"field",title:b.default.Local.Control.overlayAnalysisTree.columns.layer()},{field:"field",title:b.default.Local.Control.overlayAnalysisTree.columns.analysis(),template:"<input type='checkbox' class='checkbox'/>",attributes:{style:"text-align: center;"},width:40}],dataSource:r._getDataSource()}).data("kendoTreeList"),$(r._getLayerTreeId()).kendoTooltip({filter:"td:first-child:not(:empty)",position:"top",showAfter:1e3,width:165,content:function(t){var e=t.target,n=r._layerTree.dataItem($(e)).layer_tooltip;return void 0===n||""===n?e.text():n}}).data("kendoTooltip"),"1"!=$(r._getLayerTreeId()).attr("data-collapse")&&setTimeout(function(){r._layerTree&&(r._layerTree.expand($(r._getLayerTreeId()+" tbody>tr:eq(0)")),r._setDefaultCheckedLayers())},1200),$(r._getLayerTreeId()).closest(".sidebar-pane").removeClass("active")}},{key:"_setDefaultCheckedLayers",value:function(){for(var t=this._layerTree.items(),e=0;e<t.length;++e){var n=this._layerTree.dataItem(t[e]);this._defaultCheckedLayers[n.id]&&$(t[e]).find(".checkbox").trigger("click")}}},{key:"_bindEvent",value:function(){var t=this;$(t._getLayerTreeId()+" tbody [role='row'] .checkbox").each(function(){this.onclick=t._checkedLayerChanged.bind(t)})}},{key:"_getLayerTreeId",value:function(){return"#"+this._div}},{key:"_checkedLayerChanged",value:function(t){var e=this._getItemFromColumn(t.target);this._updateChildItemsStatus(e,t.target.checked),this._updateParentItemStatus(e)}},{key:"_updateChildItemsStatus",value:function(t,e){for(var n=this._getChildItems(t),r=0;r<n.length;++r)$(n[r]).find(".checkbox").each(function(){$(this).prop("checked",e)})}},{key:"_updateParentItemStatus",value:function(t){var i=this,o=i._getParentItem(t);o&&function(){for(var t=0,e=i._getChildItems(o),n=0;n<e.length;++n)$(e[n]).find(".checkbox").each(function(){this.checked&&++t});var r=t===e.length;$(o).find(".checkbox").prop("checked",r)}()}},{key:"_isLayerGroup",value:function(t){return null===t.parentId}},{key:"getCheckedLayers",value:function(){var e=this,n=[];return $(e._getLayerTreeId()+" tbody [type='checkbox']:checked").each(function(){var t=e._getDataFromItem(e._getItemFromColumn(this));e._isLayerGroup(t)||n.push(t)}),n}},{key:"_getDataSource",value:function(){for(var t=[],e=1e6,n=2e6,r=this._config,i=r.groups(),o=b.default.Map.MapConfig.getInstance(),a=0;a<i.length;++a){for(var s=i[a],l=r.getGroupChildrenLayers(s),u=0;u<l.length;++u){var c=l[u];if(c){var h=this._config.getLayerSourceName(c),f=this._config.getLayerID(c),p=o.findLayer(h,f);if(null!==p&&o.isLayerHasPermission(p)){var d=n++,g=this._getLayerKey(c),m=b.default.Common.CommonTools._findTooltipFromSourceNameLayerId(h,f);"1"===c._visible&&(this._defaultCheckedLayers[d]=!0);for(var y=this._findLayerFromDisplayLayer(c),_=0;_<y.length;++_){var v=y[_];t.push({key:g,id:d,parentId:e,queryId:this._config.getLayerQueryID(v),field:this._config.getLayerLabel(v),layer_tooltip:m})}}}}t.push({id:e++,parentId:null,field:r.getGroupName(s),layer_tooltip:r.getGroupName(s)})}return t}},{key:"_getLayerKey",value:function(t){var e=this._config.getLayerID(t),n=this._config.getLayerSourceName(t);return b.default.Map.MapCommon.getKeyFromSourceNameLayerId(n,e)}},{key:"_findLayerFromDisplayLayer",value:function(t){var e=this._config.getLayerID(t),n=this._config.getLayerSourceName(t);return this._config.findAllLayer(e,n)}},{key:"_getDataFromItem",value:function(t){return this._layerTree.dataItem(t)}},{key:"_getItemId",value:function(t){return this._getDataFromItem(t).id}},{key:"_getItemParentId",value:function(t){return this._getDataFromItem(t).parentId}},{key:"_getAllItems",value:function(){return $(this._getLayerTreeId()+" tbody [role='row']")}},{key:"_getChildItems",value:function(t){for(var e=[],n=this._getItemId(t),r=this._getAllItems(),i=0;i<r.length;++i)n===this._getItemParentId(r[i])&&e.push(r[i]);return e}},{key:"_getParentItem",value:function(t){for(var e=null,n=this._getItemParentId(t),r=this._getAllItems(),i=0;i<r.length;++i)n===this._getItemId(r[i])&&(e=r[i]);return e}},{key:"_getItemFromColumn",value:function(t){return $(t).closest("tr")}}]),e}();n.default=a},{"../kq":1075}],1005:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./Window"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(t){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=e;return n.options=L.extend({},s,t),n._markers=L.markerClusterGroup({chunkedLoading:!0}),n._initPanoramaButton(),n.urls=["https://pannellum.org/images/alma.jpg","https://pannellum.org/images/jfk.jpg","https://pannellum.org/images/cerro-toco-0.jpg","https://i.imgur.com/G7t9QD9.jpg","https://pannellum.org/images/tocopilla.jpg","https://pannellum.org/images/alma-correlator-facility.jpg"],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,L.Evented),i(r,[{key:"_initPanoramaButton",value:function(){var t=this;t.button=new KQ.Control.MapButton("icon iconfont icon-camera",function(){t.button.enabled()?t._stop(t):t._start(t)},"全景图"),t.buttonBar=new KQ.Control.MapButtonBar([t.button],{position:t.options.position})}},{key:"_initDialog",value:function(){var t=this,e=new a.default("panorama",{scrollable:!1,actions:["Close"],title:"全景图",width:900,height:700,appendTo:"#map"});e.initAsync(function(){t._resultDialog=e._object()})}},{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t),$("#map").append('<div id="panorama"></div>'),this._initDialog()}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_start",value:function(){this.button.setTitle("取消全景图"),this.button.setEnabled(!this.button.enabled()),this._addPanoramaMarkers()}},{key:"_stop",value:function(){this.button.setTitle("全景图"),this.button.setEnabled(!this.button.enabled()),this._removePanoramaMarkers()}},{key:"_removePanoramaMarkers",value:function(){var t=KQ.Control.Manager.getInstance()._getMap();this._markers.clearLayers(),t.removeLayer(this._markers)}},{key:"_addPanoramaMarkers",value:function(){for(var t=KQ.Control.Manager.getInstance()._getMap(),e=t.getCenter(),n=0;n<1e3;++n){var r=L.latLng(e.lat+.1*Math.random(),e.lng+.1*Math.random()),i=this._createMarker(r);this._bindMarkerEvent(i),this._markers.addLayer(i)}t.addLayer(this._markers)}},{key:"_createMarker",value:function(t){return new KQ.Map.MapMarker(t,{extraIcon:{icon:"icon iconfont icon-camera",markerColor:"blue",shape:"circle",prefix:"fa"},url:this.urls[parseInt(997*Math.random())%6]})}},{key:"_bindMarkerEvent",value:function(t){var e=this;t.on("click",function(){0<$("#panorama .pnlm-render-container").length&&$("#panorama .pnlm-render-container").remove(),pannellum.viewer("panorama",{type:"equirectangular",panorama:this.options.url,autoLoad:!0,compass:!0}),e._resultDialog.open()})}}]),r}();n.default=l},{"./Window":1034}],1006:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var l=new Map,i={tickLen:250,speed:10,maxInterpolationTime:3e5,tracksLayer:!0,playControl:!0,dateControl:!0,sliderControl:!0,tracksLayerPosition:"bottomleft",playControlPosition:"bottomleft",dateControlPosition:"bottomleft",sliderControlPosition:"bottomleft",geojson:null,onPlaybackTimeChange:null,popups:!0,popups_autoClose:!0,tooltips:!1,orientIcons:!1,label_play:"",label_stop:"",label_gpsTrack:"",label_latlng:"",layer:{pointToLayer:function(t,e){var n=l.get(t);n||(n=0);var r=KQ.Common.ThemeManager.getInstance().mainColor(),i={radius:5,stroke:!0,color:r,weight:1,opacity:.8,fill:!0,fillColor:r,fillOpacity:.4,clickable:!0};t.properties&&t.properties.style&&(i=t.properties.style);var o="";if(t.properties&&t.properties.time){var a=t.properties.time[n];o=(a=L.Playback.Util.DateStr(a)+" "+L.Playback.Util.TimeStr(a))+"<br>"+e.lng+", "+e.lat}else o=e.lng+", "+e.lat;var s=new L.CircleMarker(e,i);return s.bindTooltip(o),n++,l.set(t,n),s}},marker:function(t){var e={};t.properties&&t.properties.extraIcon?e.icon=L.ExtraMarkers.icon(t.properties.extraIcon):t.properties&&t.properties.icon?e.icon=L.icon(t.properties.icon):e.icon=L.ExtraMarkers.icon({icon:"fa-coffee",markerColor:"blue",shape:"square",prefix:"fa"});var n=null,r=null,i="";return t&&t.properties&&t.properties.popup_label&&(n='\n        <label class="playback-marker-popup-label">\n          <strong>'+t.properties.popup_label+"</strong>\n        </label>\n      "),t&&t.properties&&t.properties.popup_img&&(r='<img class="playback-marker-popup-img" src='+t.properties.popup_img+' alt="">'),(n||r)&&(i='<div class="playback-marker-popup-container">        \n        '+n+"\n        "+r+"\n      </div>",e.getPopup=function(){return i}),t&&t.properties&&t.properties.is_init_popup&&(e.is_init_popup=t.properties.is_init_popup),e}},o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i.label_play=KQ.Local.Control.playback.label_play(),i.label_stop=KQ.Local.Control.playback.label_stop(),i.label_gpsTrack=KQ.Local.Control.playback.label_gpsTrack(),i.label_latlng=KQ.Local.Control.playback.label_latlng(),this.options=L.extend({},i,t)}return r(e,[{key:"addToMapView",value:function(t){this.playback=new L.Playback(t._getMap(),this.options.geojson,this.options.onPlaybackTimeChange,this.options)}},{key:"remove",value:function(){this.playback.destroy()}},{key:"toggle",value:function(){this.playback.toggle()}},{key:"clearData",value:function(){this.playback.clearData()}},{key:"setData",value:function(t){this.checkData(t),this.playback.setData(t)}},{key:"start",value:function(){this.playback.start()}},{key:"stop",value:function(){this.playback.stop()}},{key:"getSpeed",value:function(){return this.playback.getSpeed()}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"setSpeed",value:function(t){this.playback.setSpeed(t)}},{key:"setCursor",value:function(t){this.playback.setCursor(t)}},{key:"getTime",value:function(){return this.playback.getTime()}},{key:"getStartTime",value:function(){return this.playback.getStartTime()}},{key:"getEndTime",value:function(){return this.playback.getEndTime()}},{key:"getTickLen",value:function(){return this.playback.getTickLen()}}]),e}();n.default=o},{}],1007:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft",content:'<div id="plotting"></div>',classes:"",orientation:"vertical",style:{position:"absolute"}},l=function(t){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=e;return n.options=L.extend({},s,t),n._plotTypes={},n._plotTypes[a.default.Local.Control.plot.types.arc()]=P.PlotTypes.ARC,n._plotTypes[a.default.Local.Control.plot.types.curve()]=P.PlotTypes.CURVE,n._plotTypes[a.default.Local.Control.plot.types.polyline()]=P.PlotTypes.POLYLINE,n._plotTypes[a.default.Local.Control.plot.types.closedCurve()]=P.PlotTypes.CLOSED_CURVE,n._plotTypes[a.default.Local.Control.plot.types.freeHandLine()]=P.PlotTypes.FREEHAND_LINE,n._plotTypes[a.default.Local.Control.plot.types.circle()]=P.PlotTypes.CIRCLE,n._plotTypes[a.default.Local.Control.plot.types.ellipse()]=P.PlotTypes.ELLIPSE,n._plotTypes[a.default.Local.Control.plot.types.lune()]=P.PlotTypes.LUNE,n._plotTypes[a.default.Local.Control.plot.types.sector()]=P.PlotTypes.SECTOR,n._plotTypes[a.default.Local.Control.plot.types.rectangle()]=P.PlotTypes.RECTANGLE,n._plotTypes[a.default.Local.Control.plot.types.triangle()]=P.PlotTypes.TRIANGLE,n._plotTypes[a.default.Local.Control.plot.types.gatheringPlace()]=P.PlotTypes.GATHERING_PLACE,n._plotTypes[a.default.Local.Control.plot.types.polygon()]=P.PlotTypes.POLYGON,n._plotTypes[a.default.Local.Control.plot.types.freeHandPolygon()]=P.PlotTypes.FREEHAND_POLYGON,n._plotTypes[a.default.Local.Control.plot.types.doubleArrow()]=P.PlotTypes.DOUBLE_ARROW,n._plotTypes[a.default.Local.Control.plot.types.straightArrow()]=P.PlotTypes.FINE_ARROW,n._plotTypes[a.default.Local.Control.plot.types.fineArrow()]=P.PlotTypes.STRAIGHT_ARROW,n._plotTypes[a.default.Local.Control.plot.types.assaultDirection()]=P.PlotTypes.ASSAULT_DIRECTION,n._plotTypes[a.default.Local.Control.plot.types.attackArrow()]=P.PlotTypes.ATTACK_ARROW,n._plotTypes[a.default.Local.Control.plot.types.tailedAttackArrow()]=P.PlotTypes.TAILED_ATTACK_ARROW,n._plotTypes[a.default.Local.Control.plot.types.squadCombat()]=P.PlotTypes.SQUAD_COMBAT,n._plotTypes[a.default.Local.Control.plot.types.tailedSquadCombat()]=P.PlotTypes.TAILED_SQUAD_COMBAT,n._initPlottingButton(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,L.Evented),i(r,[{key:"_initPlottingButton",value:function(){var t=this;t.button=new a.default.Control.MapButton("icon iconfont icon-plot",function(){t.button.enabled()?t._stop(t):t._start(t)},a.default.Local.Control.plot.startTitle()),t.buttonBar=new a.default.Control.MapButtonBar([t.button],{position:t.options.position}),t.buttonBar.setAttribute("id","plotting-buttonbar")}},{key:"addTo",value:function(t){var e=this;e._map=t,e.buttonBar.addTo(t),e._mapPlot=a.default.Map.MapPlot.getInstance(),e._mapPlot.addTo(t),-1!==e.options.position.indexOf("left")?(e.options.style.top=$(".icon-plot").offset().top-15+"px",e.options.style.left="42px"):(e.options.style.top=$(".icon-plot").offset().top-15+"px",e.options.style.right="42px"),e._advmenu=new a.default.Control.Custom(e.options),e._advmenu.addTo(e._map),e._createPlottingPanel(),$("#plotting").hide()}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_start",value:function(){this.button.setTitle(a.default.Local.Control.plot.endTitle()),this.button.setEnabled(!0),this.showPanelBar(),a.default.Control.Manager.getInstance()._unselectAllControlsExcept("plotting")}},{key:"_stop",value:function(){this.button.setTitle(a.default.Local.Control.plot.startTitle()),this.button.setEnabled(!1),this.hidePanelBar()}},{key:"hidePanelBar",value:function(){$("#plotting").slideUp()}},{key:"showPanelBar",value:function(){$("#plotting").slideDown()}},{key:"_createPlottingPanel",value:function(){var i=this,t=[{text:a.default.Local.Control.plot.linePlot(),spriteCssClass:"icon iconfont icon-plot-line",items:[{text:a.default.Local.Control.plot.types.arc()},{text:a.default.Local.Control.plot.types.curve()},{text:a.default.Local.Control.plot.types.polyline()}]},{text:a.default.Local.Control.plot.polygonPlot(),spriteCssClass:"icon iconfont icon-plot-fill",items:[{text:a.default.Local.Control.plot.types.circle()},{text:a.default.Local.Control.plot.types.ellipse()},{text:a.default.Local.Control.plot.types.lune()},{text:a.default.Local.Control.plot.types.sector()},{text:a.default.Local.Control.plot.types.rectangle()},{text:a.default.Local.Control.plot.types.gatheringPlace()},{text:a.default.Local.Control.plot.types.polygon()},{text:a.default.Local.Control.plot.types.closedCurve()}]},{text:a.default.Local.Control.plot.arrowPlot(),spriteCssClass:"icon iconfont icon-plot-arrow-up",items:[{text:a.default.Local.Control.plot.types.doubleArrow()},{text:a.default.Local.Control.plot.types.straightArrow()},{text:a.default.Local.Control.plot.types.fineArrow()},{text:a.default.Local.Control.plot.types.assaultDirection()},{text:a.default.Local.Control.plot.types.attackArrow()},{text:a.default.Local.Control.plot.types.tailedAttackArrow()},{text:a.default.Local.Control.plot.types.squadCombat()},{text:a.default.Local.Control.plot.types.tailedSquadCombat()}]}];$("#plotting").kendoPanelBar({dataSource:{data:t},select:function(t){var e=$(t.item).find("> .k-link").text(),n=i._plotTypes[e];if(n){a.default.Control.Manager.getInstance()._unselectAllControlsExcept("plotting");var r=a.default.Map.MapPlot.getInstance();i._mapPlot.setPlotType(n),r.startDraw(),i._map.doubleClickZoom.disable()}}}),$("#plotting").css("z-index",1e4),$("#plotting").css("width","200px"),$("#plotting .k-link>.k-sprite").css({width:"24px",height:"24px","font-size":"24px","line-height":"24px",float:"left","margin-top":"2px","margin-right":"6px","vertical-align":"middle"})}},{key:"stopDraw",value:function(){this._mapPlot.stopDraw()}}]),r}();n.default=l},{"../kq":1075}],1008:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=s(t("./Window")),o=s(t("../kq")),a=s(t("../common/CommonValues"));function s(t){return t&&t.__esModule?t:{default:t}}var l={chartFieldSeparator:"@@",summaryField:"",maxTotalNumber:20,chartFields:[],precision:3,colors:["#7acdc9","#093a76","#74a502","#c14000","#4295d1","#fcaf5c","#d9d56e","#0c686a","#b92832","#ffc30e","#99d9ec","#093a76","#eb6018","#00a99d","#8d6138","#fff568","#0076a3","#c7b399","#563e7e","#c5df9b","#fff568","#ffdfed","#74a502","#d9cfe5","#83cb9d","#d95070","#85871c","#a187bf"]},u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._options=l,this._chart=null,this._chartDialog=null,this._isFirstOpen=!0,this._currentChartField=null,this._currentSummaryField=null,this._total=0,this._init()}return r(t,[{key:"_adjustPopupPosition",value:function(){this._isFirstOpen?(this._isFirstOpen=!1,this._chartDialog.center().open()):(this._chartDialog.open(),this._chart.refresh())}},{key:"_getChartSelect",value:function(){return $("#"+this._getChartDialogId()+" select:eq(0)")}},{key:"_getSummarySelect",value:function(){return $("#"+this._getChartDialogId()+" select:eq(1)")}},{key:"_initChartFiledDropDownList",value:function(){var t=this,e=t._getChartSelect(),n=t._getSummarySelect();e.kendoDropDownList({dataSource:t._options.chartFields,change:function(){n.data("kendoDropDownList").select(e.data("kendoDropDownList").select()),t._updateChartFieldAndSummaryField(),t._open()}}),n.kendoDropDownList({dataSource:t._options.summaryField,enable:!1})}},{key:"open",value:function(t){this._dataSource=t,this._initChartFiledDropDownList(),this._updateChartFieldAndSummaryField(),$("#"+this._getChartPieId()).click(),this._open(),this._adjustPopupPosition()}},{key:"_updateChartFieldAndSummaryField",value:function(){var t=this._getChartSelect(),e=this._getSummarySelect();this._currentChartField=t.data("kendoDropDownList").text().split(","),this._currentSummaryField=e.data("kendoDropDownList").text()}},{key:"_open",value:function(){var t=this._getChartDataSource(this._dataSource);this._isRightData(t)&&this._chart.setOptions({title:{text:o.default.Local.Control.queryResultChart.statisticalResult()},seriesDefaults:{labels:{visible:!0,template:this._getLabelTemplate()}},tooltip:{visible:!0,template:this._getTooltipTemplate()},dataSource:t})}},{key:"_init",value:function(){this._initHtml(),this._initChartDialog()}},{key:"_mergeOptions",value:function(t){this._options=L.extend({},l,t)}},{key:"_getChartTypeHtml",value:function(){return'<ul class="chartTypes"><li><input type="radio" name="chart" id="'+this._getChartPieId()+'" class="k-radio" checked="checked"><label class="k-radio-label" for="'+this._getChartPieId()+'">'+o.default.Local.Control.queryResultChart.pieChart()+'</label></li><li> <input type="radio" name="chart" id="'+this._getChartBarId()+'" class="k-radio"><label class="k-radio-label" for="'+this._getChartBarId()+'">'+o.default.Local.Control.queryResultChart.barChart()+'</label></li><li> <button id="'+this._exportImageButtonId()+'">'+o.default.Local.Control.queryResultChart.exportToPrint()+"</button></li></ul>"}},{key:"_getChartFieldHtml",value:function(){return'<div class="chartStatisticsField"><div> <span>'+o.default.Local.Control.queryResultChart.summarylField()+'</span><select class="fieldSelect" style="width: 150px"></select></div><div> <span>'+o.default.Local.Control.queryResultChart.statisticalField()+'</span><select class="fieldSelect" style="width: 150px"></select></div></div>'}},{key:"_getChartHtml",value:function(){return'<div class="chartContainer" id="'+this._getChartId()+'"></div>'}},{key:"_initHtml",value:function(){var t=this._getChartDialogId();$("#"+o.default.Common.CommonValues.mapContainerID).append($('<div id="'+t+'">'+this._getChartTypeHtml()+this._getChartFieldHtml()+this._getChartHtml()+"</div>"))}},{key:"_getDataPrecision",value:function(){return this._options?this._options.precision:3}},{key:"_getLabelTemplate",value:function(){var t=this._getDataPrecision();return $("#"+this._getChartBarId()).prop("checked")?"#= kendo.format('{0:p"+t+"}', value)#":"#=category#: #=kendo.format('{0:p"+t+"}', value)#"}},{key:"_getTooltipTemplate",value:function(){var t=this._getDataPrecision();return"Total: "+kendo.format("{0:n"+t+"}",this._total)+"<br/>#= category #: #=kendo.format('{0:n"+t+"}', dataItem.value1)#"}},{key:"_initChartTypeButton",value:function(){var e=this;$("#"+this._getChartPieId()).click(function(){$("#"+e._getChartId()).data("kendoChart").setOptions({seriesDefaults:{type:"pie",labels:{template:e._getLabelTemplate()},tooltip:{visible:!0,template:e._getTooltipTemplate()}}})}),$("#"+this._getChartBarId()).click(function(){$("#"+e._getChartId()).data("kendoChart").setOptions({seriesDefaults:{type:"column",labels:{template:e._getLabelTemplate()},tooltip:{visible:!0,template:e._getTooltipTemplate()}}})}),$("#"+this._exportImageButtonId()).kendoButton({click:function(t){$("#"+e._getChartId()).data("kendoChart").exportImage().done(function(t){$("#"+a.default.mapContainerID).trigger("export_image_to_printer",t)})}})}},{key:"_initChartDialog",value:function(){var t=this,e={title:o.default.Local.Control.queryResultChart.statisticalChart(),minWidth:"500px",width:"700px",height:"400px",scrollable:!1,actions:["Close"]},n=new i.default(t._getChartDialogId(),e);n.initAsync(function(){t._chartDialog=n._object()}),t._initChartTypeButton(),t._initChart()}},{key:"_initChart",value:function(){this._chart=$("#"+this._getChartId()).kendoChart({chartArea:{opacity:.75},renderAs:"canvas",legend:{position:"left"},title:{margin:{bottom:20,left:60}},seriesDefaults:{type:"pie"},series:[{field:"value",startAngle:150,categoryField:"category"}]}).data("kendoChart")}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=u},{"../common/CommonValues":952,"../kq":1075,"./Window":1034}],1009:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),L=s(t("../kq")),i=s(t("./Window")),o=s(t("./OverlayAnalysisChart")),a=s(t("./SummaryAnalysis"));function s(t){return t&&t.__esModule?t:{default:t}}var l=t("leaflet"),u=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=t;return e._color="",e._fillColor="",e._dataSource=[],e._resultDialog=null,e._layerNameTabs=null,e._desc="",e._title="",e._chartFields=null,e._useDefaultFlicker=!0,e._unitConversionOptions=null,e._layerManager={},e._displayCheckbox=!1,e._checkedIds={},e._defaultFlickerColor=null,e._currentFlickerLayerGuid=null,e._currentSelectDataItem=null,e._checkedAll=!1,e._exportChecked=null,e._showExportCheckedRecord=!1,e._exportMode="all",e._chartFn=function(t,e,n){if(e&&n){var r=t.records;0===L.default.Map.MapCommon._totalStatisticsByField(r,n[0])?L.default.Control.Notification.getInstance().showError(L.default.Local.Control.queryResultDialog.notification.statisticValueIsNull()):o.default.getInstance().open(r,{chartFields:e,summaryField:n})}},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,l.Evented),r(n,[{key:"setChartFields",value:function(t){this._chartFields=t}},{key:"resetChartFields",value:function(){this._chartFields=null}},{key:"open",value:function(t,e){t&&(this._dataSource=t),this._dataProcessingFunc&&this._dataProcessingFunc(this._dataSource);var n=this._getDialogWidth(),r=this._getDialogHeight(),i=this._getDialogPosition(),o={width:n,height:r,showChart:!0,showChartAll:!1,position:{top:i.top,left:i.left}};e=l.extend({},this._options,e),this._options=l.extend({},o,e),this._updateUi(),this._openResultDialog()}},{key:"addDataProcessingFunc",value:function(t){this._dataProcessingFunc=t}},{key:"removeDataProcessingFunc",value:function(){delete this._dataProcessingFunc}},{key:"close",value:function(){this._resultDialog.close()}},{key:"clearFlickerLayer",value:function(){var t=L.default.Control.Manager.getInstance();if(t){var e=t._getMap();L.default.Map.MapCommon.clearFlickerLayer(e)}}},{key:"flickerLayer",value:function(t){var e=L.default.Control.Manager.getInstance()._getMap();L.default.Map.MapCommon.fitBoundsLayer(t,e),L.default.Map.MapCommon.flickerLayer(t,e)}},{key:"setUseDefaultFlicker",value:function(t){this._useDefaultFlicker=t}},{key:"setDisplayCheckbox",value:function(t){this._displayCheckbox=t,this._displayCheckbox||(this._checkedAll=!1)}},{key:"setExportCheckedRecordButton",value:function(t){this._showExportCheckedRecord=t}},{key:"setTitle",value:function(t){this._resultDialog.setOptions({title:t})}},{key:"setOptions",value:function(t){this._options=l.extend({},this._options,t)}},{key:"_openResultDialog",value:function(){this._resultDialog.setOptions(this._options),this._resizeTabsAndGrid(),this._resultDialog.open()}},{key:"_init",value:function(){this._initHtml(),this._initResultDialog(),this._initLayerNameTabs();var t=$("#"+this._getLayerNameTabsId());t.addClass("expend-k-tabstrip"),t.parent().addClass("expend-k-tabstrip")}},{key:"_getMapContainer",value:function(){return"#"+L.default.Common.CommonValues.mapContainerID}},{key:"_getMapContainerWidth",value:function(){var t=this._getMapContainer();return parseInt($(t).css("width"))}},{key:"_getMapContainerHeight",value:function(){var t=this._getMapContainer();return parseInt($(t).css("height"))}},{key:"_getSiderBarContainerWidth",value:function(){var t=parseInt($("#sidebar").css("width"));return t||0}},{key:"_getLeafletControlMargin",value:function(){return 10}},{key:"_getDialogLeftMargin",value:function(){var t=this._getLeafletControlMargin();return this._getSiderBarContainerWidth()+2*t}},{key:"_getDialogWidth",value:function(){return this._getMapContainerWidth()-this._getDialogLeftMargin()-this._getLeafletControlMargin()}},{key:"_getDialogHeight",value:function(){return 280}},{key:"_getDialogOuterHeight",value:function(){return $("#"+this._getResultDialogId()).closest(".k-window").outerHeight()}},{key:"_getDialogPosition",value:function(){return{top:this._getMapContainerHeight()-this._getDialogOuterHeight()-this._getLeafletControlMargin(),left:this._getDialogLeftMargin()}}},{key:"_initResultDialog",value:function(){var n=this,t={animation:!1,scrollable:!1,actions:["Minimize","Close"],title:n._title,height:n._getDialogHeight(),appendTo:n._getMapContainer(),close:function(){n.fire("close",{}),n._useDefaultFlicker&&n.clearFlickerLayer(),n._clearCheckedLayers()},activate:function(){n._resizeTabsAndGrid(),console.log("Window was activate")},resize:function(){n._resizeTabsAndGrid()},minimize:function(t){n._prevPosition=l.extend({},t.sender.options.position),n._setMinimizePosition()}},e=new i.default(n._getResultDialogId(),t);e.initAsync(function(){n._resultDialog=e._object()}),e._object().wrapper.on("click",".k-window-action",function(t){var e=$(t.target);(e.is(".k-i-window-restore")||e.children(".k-i-window-restore")[0])&&n._resultDialog.setOptions({position:n._prevPosition})})}},{key:"_setMinimizePosition",value:function(){var t=this._getDialogLeftMargin(),e=this._getMapContainerHeight()-this._getLeafletControlMargin()-30;$("#"+this._getResultDialogId()).parent().css({left:t,top:e})}},{key:"_initLayerNameTabs",value:function(){this._layerNameTabs=$("#"+this._getLayerNameTabsId()).kendoTabStrip({animation:!1}).data("kendoTabStrip"),this._setLayerNameTabsTooltip()}},{key:"_resizeTabsAndGrid",value:function(){var t=$("#"+this._getLayerNameTabsId()),e=t.children(".k-content"),n=e.filter(":visible");e.height(t.innerHeight()-t.children(".k-tabstrip-items").outerHeight()-parseFloat(n.css("padding-top"))-parseFloat(n.css("padding-bottom"))-parseFloat(n.css("border-top-width"))-parseFloat(n.css("border-bottom-width"))-parseFloat(n.css("margin-bottom")));var r=$("#"+this._getLayerNameTabsId()+">.k-state-active>.expend-k-tabstrip").data("kendoGrid");r&&r.resize()}},{key:"_setLayerNameTabsTooltip",value:function(){var n=this;$("#"+n._getLayerNameTabsId()).kendoTooltip({filter:"li:not(:empty)",position:"top",showAfter:L.default.Common.CommonValues.showAfterInMsec,content:function(t){var e=t.target.index();return 0<=e?n._dataSource[e].toolTip:""}}).data("kendoTooltip")}},{key:"_updateUi",value:function(){this._clearContents(),this._createContents(),this._layerNameTabs.select(0)}},{key:"_clearContents",value:function(){this._layerNameTabs.remove("li")}},{key:"_createContents",value:function(){this._createEachLayerTab(),this._createEachLayersGrid()}},{key:"_createEachLayerTab",value:function(){for(var t=[],e=0;e<this._dataSource.length;++e){var n=this._dataSource[e].label,r="<div id="+this._getLayerGridId(e)+"></div>";t.push({text:n,content:r})}this._layerNameTabs.append(t)}},{key:"_createEachLayersGrid",value:function(){var e=this;$("#"+e._getLayerNameTabsId()).find(".k-content").each(function(t){$(this).append(e._createOneLayerGrid(t))})}},{key:"_createOneLayerGrid",value:function(a){var g=this,s=g._dataSource[a],t=$("#"+g._getLayerGridId(a)),e=g._dataSource[a],n=e.summaryField;e.chartFields||(e.chartFields=[]);var r=e.chartFields.join(""),i=g._options.showChart,o=g._options.showChartAll,l=g._showExportCheckedRecord;n&&r||(o=i=!1),g._checkedIds[a]={};for(var u=0;u<s.records.length;++u)s.records[u].GUID=L.default.Common.ComputeTools.guid();var c=g._getChartButttonId(a),h=g._getChartAllButttonId(a),f=g._getExportCheckedButttonId(a),p=g._getFlickerColorButtonId(a),d='<button style="margin-left: 6px" id="'+c+'"><span class="k-icon k-i-file-excel"></span>'+L.default.Local.Control.queryResultDialog.button.statisticalChart()+"</button>",m='<button style="margin-left: 6px" id="'+h+'"><span class="k-icon k-i-file-excel"></span>'+L.default.Local.Control.queryResultDialog.button.statisticalAllChart()+"</button>",y='<button style="margin-left: 6px" id="'+f+'"><span class="k-icon k-i-file-excel"></span>'+L.default.Local.Control.queryResultDialog.button.exportChecked()+"</button>",_='<div style="float: right; margin-right: 10px"><label>'+L.default.Local.Control.queryResultDialog.button.flickerColor()+'</label><button id="'+p+'"></button></div>',v=[{name:"excel"}];i&&v.push({template:kendo.template(d)}),o&&v.push({template:kendo.template(m)}),l&&v.push({template:kendo.template(y)}),v.push({template:kendo.template(_)}),g._needUnitConversion()&&v.push({template:g._getUnitConversionTemplate(a)}),g._options.detail&&v.push({template:g._getDetailButtonTemplate(a)});var b={resizable:!0,sortable:!0,pageable:!0,selectable:"row",excel:{allPages:!0},toolbar:v,excelExport:function(t){t.workbook.fileName=g._getExcelFileName();var e=t.workbook.sheets[0],n=x.dataSource.data(),r=x.columns,i=r.map(function(t){return{value:t.title?t.title:t.field,autoWidth:!0,background:"#7a7a7a",color:"#fff"}}),o=[{cells:i,type:"header"}];if("select"===g._exportMode)for(var a=this.select(),s=0;s<a.length;++s){for(var l=[],u=this.dataItem(a[s]),c=0;c<i.length;++c)l.push({value:u[i[c].value]});o.push({cells:l,type:"data"})}else for(var h=0;h<n.length;h++){for(var f=[],p=0;p<r.length;p++){var d=n[h][r[p].field];f.push({value:d})}o.push({cells:f,type:"data"})}e.rows=o},messages:{commands:{excel:L.default.Local.Control.queryResultDialog.button.exportExcel()}},columns:g._getLayerColumnInfo(s),dataSource:{data:s.records,pageSize:10},change:function(){if(g._currentSelectDataItem=this.dataItem(this.select()[0]),g._currentSelectDataItem){var t=g._currentSelectDataItem.geometry;if(t&&g._useDefaultFlicker){var e=g._currentSelectDataItem.GUID;if(e===g._currentFlickerLayerGuid)g.clearFlickerLayer(),g._currentFlickerLayerGuid=null;else{g._currentFlickerLayerGuid=e;var n=g._getFlickerLayerStyle(this),r=L.default.Common.CommonTools.geoJsonFromGeometry(t,n);g.flickerLayer(r),g.fire("select",{item:g._currentSelectDataItem,layer:r})}}else g.fire("select",{item:g._currentSelectDataItem})}},dataBound:function(){for(var t=this.dataSource.view(),e=0;e<t.length;e++)g._checkedIds[a][t[e].GUID]&&this.tbody.find("tr[data-uid='"+t[e].uid+"']").find(".chkbx").attr("checked","checked")}},x=t.kendoGrid(b).data("kendoGrid");$("#"+g._getLayerGridId(a)+" .k-grid-content").on("click","input.chkbx",function(t){var e=x.dataItem($(t.target).closest("tr"));g._dataItemStateChanged(e,this.checked,a);var n=0;for(var r in g._checkedIds[a])g._checkedIds[a][r]&&n++;s.records.length===n?$("#"+g._getLayerGridId(a)+" .k-grid-header input.chkbx").prop("checked",!0):$("#"+g._getLayerGridId(a)+" .k-grid-header input.chkbx").prop("checked",!1);for(var i=g._dataSource[a].records,o=0;o<i.length;++o)i[o].GUID==e.GUID&&(i[o].state=this.checked)});var w=function(t){for(var e=s.records,n=0;n<e.length;++n)g._dataItemStateChanged(e[n],t,a),e[n].state=t;x.refresh()};return $("#"+g._getLayerGridId(a)+" .k-grid-header").on("change","input.chkbx",function(t){w(this.checked)}),g._checkedAll&&w(!0),i&&g._createChartButton(c),o&&g._createChartAllButton(h),l&&g._createExportCheckedButton(f),g._needUnitConversion()&&g._createUnitConversionUi(g._getUnitConversionComboboxId(a),x,s),g._options.detail&&g._createDetailButton(g._getDetailButttonId(a)),g._createFlickerColorButton(p,s.flickerColor),g._setLayerGridCss(t),g._setLayerGridTooltip(t),g._setLayerGridButtonIcon(t),t}},{key:"_createUnitConversionUi",value:function(t,i,o){var a=this;$("#"+t).kendoComboBox({dataSource:{data:a._getUnitConversionTypes()},index:0,select:function(t){var e=t.item.text(),n=a._unitConversionOptions.rules[e],r=new kendo.data.DataSource({data:a._getUnitConversionData(o,n),pageSize:10});i.setDataSource(r)}})}},{key:"_getUnitConversionData",value:function(t,e){for(var n=[],r=this._unitConversionOptions.field,i=0;i<t.records.length;++i)n.push(l.extend({},t.records[i]));for(var o=0;o<n.length;++o)n[o][r]=e(n[o][r]);return n}},{key:"_getUnitConversionTypes",value:function(){var t=[],e=this._unitConversionOptions.rules;for(var n in e)t.push(n);return t}},{key:"_getUnitConversionTemplate",value:function(t){var e=this._getUnitConversionComboboxId(t);return kendo.template('<div style="float: right; margin-right: 10px"><label style="margin-right: 10px">'+L.default.Local.Control.queryResultDialog.label.unitConversion()+'</label><input id="'+e+'" /></div>')}},{key:"_getDetailButtonTemplate",value:function(t){var e=this._options.detail.title,n=this._getDetailButttonId(t);return kendo.template('<button style="margin-left: 6px" id="'+n+'"><span></span>'+e+"</button>")}},{key:"_needUnitConversion",value:function(){return this._unitConversionOptions}},{key:"setUnitConversionOptions",value:function(t){this._unitConversionOptions=t}},{key:"removeUnitConversionOptions",value:function(){this._unitConversionOptions=null}},{key:"_getcChartFields",value:function(t){var e=this._chartFields?this._chartFields:t.chartFields;return e||(L.default.Control.Notification.getInstance().showError(L.default.Local.Control.queryResultDialog.notification.statisticFieldError()),null)}},{key:"_getSummaryField",value:function(t){var e=t.summaryField;return e&&0!=e.length?e:(L.default.Control.Notification.getInstance().showError("统计字段没有设置"),null)}},{key:"_createChartButton",value:function(t){var r=this;$("#"+t).kendoButton({click:function(){var t=r._dataSource[r._layerNameTabs.select().index()],e=r._getcChartFields(t),n=r._getSummaryField(t);r._chartFn(t,e,n)}})}},{key:"_createChartAllButton",value:function(t){var r=this;$("#"+t).kendoButton({click:function(){var t=r._dataSource[r._layerNameTabs.select().index()],e=r._getcChartFields(t),n=r._getSummaryField(t);e&&n&&new a.default({sourceName:t.sourceName,layerId:t.layerId,queryId:t.queryId})._executeSummaryAnalysis({chartFields:e,summaryField:n})}})}},{key:"_createExportCheckedButton",value:function(t){var e=this;$("#"+t).kendoButton({click:function(){var t=e._dataSource[e._layerNameTabs.select().index()].records;"function"==typeof e._exportChecked&&e._exportChecked(t)}})}},{key:"setExportCheckedRecordFun",value:function(t){this._exportChecked=t}},{key:"setChartFunction",value:function(t){this._chartFn=t}},{key:"_createDetailButton",value:function(t){var e=this;$("#"+t).kendoButton({click:function(){e._options.detail.callback()}})}},{key:"_createFlickerColorButton",value:function(t,e){var n=e||this._defaultFlickerColor||"#36cf1b";$("#"+t).kendoColorPicker({value:n})}},{key:"_setLayerGridCss",value:function(t){t.addClass("expend-k-tabstrip")}},{key:"_setLayerGridTooltip",value:function(t){t.kendoTooltip({filter:"td.hasTooltip:not(:empty)",position:"top",showAfter:L.default.Common.CommonValues.showAfterInMsec,content:function(t){return t.target.text()}}).data("kendoTooltip")}},{key:"_setLayerGridButtonIcon",value:function(t){t.find(".k-grid-toolbar span:eq(0)").removeClass("k-i-file-excel").addClass("icon iconfont icon-excel"),t.find(".k-grid-toolbar button:eq(0)").addClass("k-button-icontext"),t.find(".k-grid-toolbar button:eq(1)").addClass("k-button-icontext"),t.find(".k-grid-toolbar [id*='chart-overlay-analysis'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),t.find(".k-grid-toolbar [id*='chart-all-overlay-analysis'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),t.find(".k-grid-toolbar [id*='chart-advanced-search'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),t.find(".k-grid-toolbar [id*='chart-all-advanced-search'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-pie"),t.find(".k-grid-toolbar [id*='export-checked'] span").removeClass("k-i-file-excel").addClass("icon iconfont icon-export")}},{key:"_getFlickerLayerStyle",value:function(t){var e=$(t.element).find("[data-role='colorpicker']").data("kendoColorPicker").value();return{color:e,fillColor:e}}},{key:"_getLayerGridId",value:function(t){return"tab-"+this._desc+t}},{key:"_getChartButttonId",value:function(t){return"chart-"+this._desc+t}},{key:"_getChartAllButttonId",value:function(t){return"chart-all-"+this._desc+t}},{key:"_getExportCheckedButttonId",value:function(t){return"export-checked-"+this._desc+t}},{key:"_getDetailButttonId",value:function(t){return"detail-"+this._desc+t}},{key:"_getFlickerColorButtonId",value:function(t){return"flicker-"+this._desc+t}},{key:"_getUnitConversionComboboxId",value:function(t){return"unit-"+this._desc+t}},{key:"_getExcelFileName",value:function(){return $(this._layerNameTabs.select()).find("> .k-link").text()+".xlsx"}},{key:"_getLayerColumnInfo",value:function(t){var e=[];return this._fillColumnsFieldInfo(e,t),this._fillColumnsWidthInfo(e),e.push({field:"hidden",title:" "}),this._displayCheckbox&&(this._checkedAll?e.unshift({width:60,title:"<input type='checkbox' class='chkbx' checked='checked' />全选",template:"<input type='checkbox' class='chkbx'/>",attributes:{style:"white-space: nowrap;text-align: center;"}}):e.unshift({width:60,title:"<input type='checkbox' class='chkbx'/>全选",template:"<input type='checkbox' class='chkbx'/>",attributes:{style:"white-space: nowrap;text-align: center;"}})),e}},{key:"_fillColumnsFieldInfo",value:function(t,e){this._replaceShapeField(e);for(var n=0;n<e.fields.length;++n)t.push({field:e.fields[n],title:e.titles[n],attributes:{class:"hasTooltip",style:"white-space: nowrap;text-align: center;"}});if(e.templates)for(var r=0;r<e.templates.length;++r){var i=e.templates[r];i&&(t[r].template=i)}}},{key:"_replaceShapeField",value:function(t){for(var e=0;e<t.fields.length;++e)if("SHAPE"===t.fields[e].toUpperCase()){0!==L.default.Map.MapCommon._totalStatisticsByField(t.records,"areaLength")?(t.fields[e]="areaLength",t.titles[e]=L.default.Local.Control.queryResultDialog.columns.overlappingArea()):(t.fields.splice(e,1),t.titles.splice(e,1));break}}},{key:"_fillColumnsWidthInfo",value:function(t){for(var e=0;e<t.length;++e)t[e].width=this._getEstimateColumnWidth(t[e].title);for(var n=0,r=0;r<t.length;++r)n+=t[r].width;var i=this._getDialogWidth()-60;if(n<i)for(var o=i/n,a=0;a<t.length;++a)t[a].width*=o}},{key:"_getEstimateColumnWidth",value:function(t){var e=$('<span class="k-widget">'+t+"</span>").hide().appendTo("body"),n=$(e).width();return e.remove(),Math.max(80,2*n)}},{key:"_getChartFiledsAlias",value:function(t,e){for(var n=[],r=e.titles,i=e.fields,o=0;o<t.length;++o)for(var a=0;a<i.length;++a)if(t[o]===i[a]){n.push(r[a]);break}return n}},{key:"_closeColorPicker",value:function(){var t=$("#"+this._getLayerNameTabsId()+">.k-state-active").find("[id^='flicker-']").data("kendoColorPicker");t&&t.close()}},{key:"_clearCheckedLayers",value:function(){for(var t in this._layerManager){this._layerManager[t].remove(),delete this._layerManager[t]}}},{key:"_dataItemStateChanged",value:function(t,e,n){if(t){var r=t.GUID;if(this._checkedIds[n][r]=e,this._checkedIds[n][r]){var i=L.default.Control.Manager.getInstance()._getMap(),o=L.default.Common.CommonTools.geoJsonFromGeometry(t.geometry);this._layerManager[r]||(o.addTo(i),this._layerManager[r]=o)}else{var a=this._layerManager[r];a&&(a.remove(),delete this._layerManager[r])}}}},{key:"setDefaultFlickerColor",value:function(t){this._defaultFlickerColor=t}},{key:"setDefaultCheckedAll",value:function(t){this._checkedAll=t,this._displayCheckbox=t}},{key:"setExportMode",value:function(t){this._exportMode=t}}]),n}();n.default=u},{"../kq":1075,"./OverlayAnalysisChart":1002,"./SummaryAnalysis":1029,"./Window":1034,leaflet:560}],1010:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),h=o(t("../kq")),i=o(t("./Window")),f=o(t("../common/CommonValues")),p=o(t("./RasterImageAnalysisDialog"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var s=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);this._rasterImageAlgebraDialog=null,this._html=h.default.Local.Control.RasterImageAnalysisDialog.html}var t,e;return r(n,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__input-1__",this._html.input_1()).replace("__input-2__",this._html.input_2()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__operator__",this._html.operator()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(e=a(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initRasterImageAlgebraWindow();case 3:e._initRasterImageAlgebraHtml(),e._rasterImageAlgebraDialog&&e._rasterImageAlgebraDialog.open();case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageAlgebraWindow",value:(t=a(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n={title:h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperation(),width:"270px",height:"340px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){e.close()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new i.default("raster-image-algebra-dialog",n),t.next=5,r.initAsync(function(){e._rasterImageAlgebraDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageAlgebraHtml",value:function(){var i=this;$("#raster-image-algebra-input-1-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:p.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList"),$("#raster-image-algebra-input-2-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:p.default.getInstance()._getRasterAnalysisDataSource(),animation:!1}).data("kendoDropDownList");var t,e=[{text:"Plus (+)",value:f.default.rasterAnalysisAlgebraTypes.plus},{text:"Minus (-)",value:f.default.rasterAnalysisAlgebraTypes.minus},{text:"Multiply (*)",value:f.default.rasterAnalysisAlgebraTypes.multiply},{text:"Divide (/)",value:f.default.rasterAnalysisAlgebraTypes.divide}];$("#raster-image-algebra-operator-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:e,animation:!1}).data("kendoDropDownList"),$("#raster-image-algebra-execute-btn").kendoButton({click:(t=a(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,$("#raster-image-algebra-output-data").attr("href","javascript:void(0)"),$("#raster-image-algebra-output-data").hide(),e=i._getQueryOptions(),0!==Object.keys(e).length){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,p.default.getInstance()._getQueryData(e);case 8:0!==(n=t.sent).length?(r=p.default.getInstance()._getDownloadUrl(e.url,n.join("")),$("#raster-image-algebra-output-data").attr("href",r),$("#raster-image-algebra-output-data").show(),h.default.Control.Notification.getInstance().showSuccess(h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperationSuccess())):h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperationFailure()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.AlgebraOperationFailure());case 15:case"end":return t.stop()}},t,this,[[0,12]])})),function(){return t.apply(this,arguments)})}),$("#raster-image-algebra-close-btn").kendoButton({click:function(){n.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageAlgebraDialog&&(n._instance=null,this._rasterImageAlgebraDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-algebra-output-data").val()}},{key:"_getQueryOptions",value:function(){var t=$("#raster-image-algebra-input-1-dropdownlist").data("kendoDropDownList").value(),e=p.default.getInstance()._getUrlAndLayerIdFromText(t),n=c(e,2),r=n[0],i=n[1],o=$("#raster-image-algebra-input-2-dropdownlist").data("kendoDropDownList").value(),a=p.default.getInstance()._getUrlAndLayerIdFromText(o),s=c(a,2),l=s[0],u=s[1];return r!==l?(h.default.Control.Notification.getInstance().showError("代数运算失败，栅格数据来自不同数据源！"),{}):{url:r,layerId1:i,layerId2:u,type:$("#raster-image-algebra-operator-dropdownlist").val(),querytype:f.default.rasterAnalysisTypes.algebra}}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"../common/CommonValues":952,"../kq":1075,"./RasterImageAnalysisDialog":1011,"./Window":1034}],1011:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=t("../kq"),s=(r=a)&&r.__esModule?r:{default:r};function l(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return i(t,[{key:"_getRasterAnalysisDataSource",value:function(){for(var t=s.default.Map.MapConfig.getInstance(),e=t.getAllRasterAnalysisLayers(),n=[],r=0;r<e.length;++r){var i=e[r];n.push({text:t.getLayerProperty(i,"label"),value:t.getLayerProperty(i,"src_name")+"@@"+t.getLayerProperty(i,"id")})}return n}},{key:"_getUrlAndLayerIdFromText",value:function(t){var e=t.split("@@"),n=o(e,2),r=n[0],i=n[1];return[s.default.Map.MapConfig.getInstance().getUrlFromSourceName(r,!1),i]}},{key:"_getDownloadUrl",value:function(t,e){return t.match(/(\S*)\/KQGis/)[1]+e}},{key:"_getQueryData",value:(n=l(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,r=[],t.prev=2,s.default.Control.Waiting.show(s.default.Control.Manager.getInstance()._getMap()),t.next=6,n._queryData(e);case 6:r=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),s.default.Control.Waiting.close();case 12:return t.prev=12,s.default.Control.Waiting.close(),t.finish(12);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},t,this,[[2,9,12,15]])})),function(t){return n.apply(this,arguments)})},{key:"_queryData",value:(e=l(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.default.Query.RasterAnalysis.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=u},{"../kq":1075}],1012:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=u(t("../kq")),i=u(t("./RasterImageAlgebraDialog")),a=u(t("./RasterImageFunctionDialog")),s=u(t("./RasterImageLogicDialog")),l=u(t("./RasterImageConditionDialog"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var h={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",orientation:"vertical",style:{}},f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._rasterMenuOptions=h,this._rasterImageAnalysisMenu=null,this._local=o.default.Local.Control.RasterImageAnalysisDialog}var e,n;return r(t,[{key:"initAsync",value:(n=c(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,o.default.Common.NetworkTools.httpGetAsync(o.default.Common.CommonValues.kqwebmapPath+"window/raster-image-analysis-menu.html");case 3:if("error"!==(n=t.sent)){t.next=7;break}return console.log("load raster_image_menu_html error!"),t.abrupt("return",!1);case 7:return e._raster_image_menu_html=e._translateHtmlChineseEnglish(n),console.log("load raster_image_menu_html successfully！"),r="#"+o.default.Common.CommonValues.mapContainerID,(i=$(r)).length<=0&&console.log("RasterImageAnalysisMenu.initAsync: map_container_id was not found!"),i.append(e._raster_image_menu_html),e._initRasterImageAnalysisMenuHtml(),$("#kq-raster-image-analysis-menu").hide(),t.abrupt("return",!0);case 16:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__algebra-operation__",this._local.AlgebraOperation()).replace("__function-operation__",this._local.FunctionOperation()).replace("__logic-operation__",this._local.LogicOperation()).replace("__condition-operation__",this._local.ConditionOperation())}},{key:"_initRasterImageAnalysisMenu",value:(e=c(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n="#"+o.default.Common.CommonValues.mapContainerID,(r=$(n)).length<=0&&console.log("RasterImageAnalysisMenu.initAsync: map_container_id was not found!"),t.next=6,o.default.Common.NetworkTools.httpGetAsync(o.default.Common.CommonValues.kqwebmapPath+"window/raster-image-analysis-menu.html");case 6:i=t.sent,i=e._translateHtmlChineseEnglish(i),r.append(i);case 9:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageAnalysisMenuHtml",value:function(){this._rasterImageAnalysisMenu=$("#kq-raster-image-analysis-menu").kendoMenu({select:this._onRasterImageAnalysisMenuSelect.bind(this),orientation:"vertical"}).data("kendoMenu")}},{key:"_onRasterImageAnalysisMenuSelect",value:function(t){console.log("Selected: "+$(t.item).children(".k-link").text());var e=$(t.item);e.hasClass("kq-rastermenu-btn-algebra")?($("#kq-raster-image-analysis-menu").hide(),i.default.getInstance().open()):e.hasClass("kq-rastermenu-btn-function")?($("#kq-raster-image-analysis-menu").hide(),a.default.getInstance().open()):e.hasClass("kq-rastermenu-btn-logic")?($("#kq-raster-image-analysis-menu").hide(),s.default.getInstance().open()):e.hasClass("kq-rastermenu-btn-condition")&&($("#kq-raster-image-analysis-menu").hide(),l.default.getInstance().open())}},{key:"remove",value:function(){$("#kq-raster-image-analysis-menu").remove()}},{key:"show",value:function(){$("#kq-raster-image-analysis-menu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-raster-image-analysis-menu").hide()}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=f},{"../kq":1075,"./RasterImageAlgebraDialog":1010,"./RasterImageConditionDialog":1013,"./RasterImageFunctionDialog":1014,"./RasterImageLogicDialog":1015}],1013:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=u(t("../kq")),a=u(t("./Window")),s=u(t("./RasterImageAnalysisDialog")),l=u(t("../common/CommonValues"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var h=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._rasterImageConditionDialog=null,this._html=o.default.Local.Control.RasterImageAnalysisDialog.html}var t,n;return i(e,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__input__",this._html.input()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__select-condition__",this._html.selectCondition()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(n=c(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initRasterImageConditionWindow();case 3:e._initRasterImageConditionHtml(),e._rasterImageConditionDialog&&e._rasterImageConditionDialog.open();case 5:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_initRasterImageConditionWindow",value:(t=c(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n={title:o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperation(),width:"270px",height:"265px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){e.close()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new a.default("raster-image-condition-dialog",n),t.next=5,r.initAsync(function(){e._rasterImageConditionDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageConditionHtml",value:function(){var t,i=this;$("#raster-image-condition-input-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:s.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList"),$("#raster-image-condition-execute-btn").kendoButton({click:(t=c(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,$("#raster-image-condition-output-data").attr("href","javascript:void(0)"),$("#raster-image-condition-output-data").hide(),e=i._getQueryOptions(),t.next=6,s.default.getInstance()._getQueryData(e);case 6:0!==(n=t.sent).length?(r=s.default.getInstance()._getDownloadUrl(e.url,n.join("")),$("#raster-image-condition-output-data").attr("href",r),$("#raster-image-condition-output-data").show(),o.default.Control.Notification.getInstance().showSuccess(o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperationSuccess())):o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperationFailure()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.ConditionOperationFailure());case 13:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return t.apply(this,arguments)})}),$("#raster-image-condition-close-btn").kendoButton({click:function(){e.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageConditionDialog&&(e._instance=null,this._rasterImageConditionDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-condition-output-data").val()}},{key:"_getConditionStatement",value:function(){return $("#raster-image-condition-select-input").val()}},{key:"_getQueryOptions",value:function(){var t=$("#raster-image-condition-input-dropdownlist").data("kendoDropDownList").value(),e=s.default.getInstance()._getUrlAndLayerIdFromText(t),n=r(e,2);return{url:n[0],layerId1:n[1],condition:$("#raster-image-condition-select-input").val(),querytype:l.default.rasterAnalysisTypes.condition_select}}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=h},{"../common/CommonValues":952,"../kq":1075,"./RasterImageAnalysisDialog":1011,"./Window":1034}],1014:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=u(t("../kq")),a=u(t("./Window")),s=u(t("../common/CommonValues")),l=u(t("./RasterImageAnalysisDialog"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var h=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);this._rasterImageFunctionDialog=null,this._html=o.default.Local.Control.RasterImageAnalysisDialog.html}var t,e;return i(n,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__input__",this._html.input()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__function__",this._html.function()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(e=c(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initRasterImageFunctionWindow();case 3:e._initRasterImageFunctionHtml(),e._rasterImageFunctionDialog&&e._rasterImageFunctionDialog.open();case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageFunctionWindow",value:(t=c(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n={title:o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperation(),width:"270px",height:"265px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){e.close()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new a.default("raster-image-function-dialog",n),t.next=5,r.initAsync(function(){e._rasterImageFunctionDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageFunctionHtml",value:function(){var i=this;$("#raster-image-function-input-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:l.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList");var t,e=[{text:"Abs",value:s.default.rasterAnalysisFunctionTypes.abs},{text:"Negate",value:s.default.rasterAnalysisFunctionTypes.negate},{text:"Square",value:s.default.rasterAnalysisFunctionTypes.square},{text:"Square root",value:s.default.rasterAnalysisFunctionTypes.sqrt},{text:"Int",value:s.default.rasterAnalysisFunctionTypes.int},{text:"Float",value:s.default.rasterAnalysisFunctionTypes.float},{text:"Round down",value:s.default.rasterAnalysisFunctionTypes.rounddown},{text:"Round up",value:s.default.rasterAnalysisFunctionTypes.roundup}];$("#raster-image-function-select-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:e,animation:!1}).data("kendoDropDownList"),$("#raster-image-function-execute-btn").kendoButton({click:(t=c(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,$("#raster-image-function-output-data").attr("href","javascript:void(0)"),$("#raster-image-function-output-data").hide(),e=i._getQueryOptions(),t.next=6,l.default.getInstance()._getQueryData(e);case 6:0!==(n=t.sent).length?(r=l.default.getInstance()._getDownloadUrl(e.url,n.join("")),$("#raster-image-function-output-data").attr("href",r),$("#raster-image-function-output-data").show(),o.default.Control.Notification.getInstance().showSuccess(o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperationSuccess())):o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperationFailure()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),o.default.Control.Notification.getInstance().showError(o.default.Local.Control.RasterImageAnalysisDialog.FunctionOperationFailure());case 13:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return t.apply(this,arguments)})}),$("#raster-image-function-close-btn").kendoButton({click:function(){n.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageFunctionDialog&&(n._instance=null,this._rasterImageFunctionDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-function-output-data").val()}},{key:"_getQueryOptions",value:function(){var t=$("#raster-image-function-input-dropdownlist").data("kendoDropDownList").value(),e=l.default.getInstance()._getUrlAndLayerIdFromText(t),n=r(e,2);return{url:n[0],layerId1:n[1],type:$("#raster-image-function-select-dropdownlist").val(),querytype:s.default.rasterAnalysisTypes.function}}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=h},{"../common/CommonValues":952,"../kq":1075,"./RasterImageAnalysisDialog":1011,"./Window":1034}],1015:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),h=o(t("../kq")),i=o(t("./Window")),f=o(t("../common/CommonValues")),p=o(t("./RasterImageAnalysisDialog"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var s=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);this._rasterImageLogicDialog=null,this._html=h.default.Local.Control.RasterImageAnalysisDialog.html}var t,e;return r(n,[{key:"_translateHtmlChineseEnglish",value:function(t){return t.replace("__input-1__",this._html.input_1()).replace("__input-2__",this._html.input_2()).replace("__output-raster-data__",this._html.outputRasterData()).replace("__operator__",this._html.operator()).replace("__confirm__",this._html.confirm()).replace("__close__",this._html.close()).replace("__download-analysis-results__",this._html.downloadAnalysisResults())}},{key:"open",value:(e=a(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initRasterImageLogicWindow();case 3:e._initRasterImageLogicHtml(),e._rasterImageLogicDialog&&e._rasterImageLogicDialog.open();case 5:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_initRasterImageLogicWindow",value:(t=a(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n={title:h.default.Local.Control.RasterImageAnalysisDialog.LogicOperation(),width:"270px",height:"340px",minWidth:"150px",minHeight:"150px",scrollable:!1,actions:[],resizable:!1,draggable:!1,position:{top:54,left:"calc(100% - 323px)"},close:function(){e.close()},updateHtml:function(t){return t=e._translateHtmlChineseEnglish(t)}},r=new i.default("raster-image-logic-dialog",n),t.next=5,r.initAsync(function(){e._rasterImageLogicDialog=r._object()});case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_initRasterImageLogicHtml",value:function(){var i=this;$("#raster-image-logic-input-1-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:p.default.getInstance()._getRasterAnalysisDataSource(),animation:!1,change:function(){}}).data("kendoDropDownList"),$("#raster-image-logic-input-2-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:p.default.getInstance()._getRasterAnalysisDataSource(),animation:!1}).data("kendoDropDownList");var t,e=[{text:"Or (|)",value:f.default.rasterAnalysisLogicTypes.or},{text:"And (&)",value:f.default.rasterAnalysisLogicTypes.and},{text:"Xor (^)",value:f.default.rasterAnalysisLogicTypes.xor},{text:"Diff",value:f.default.rasterAnalysisLogicTypes.diff},{text:"Equal",value:f.default.rasterAnalysisLogicTypes.equal},{text:"Less than",value:f.default.rasterAnalysisLogicTypes.less_than},{text:"Equal or less than",value:f.default.rasterAnalysisLogicTypes.less_than_equal},{text:"Greater than",value:f.default.rasterAnalysisLogicTypes.greater_than},{text:"Equal or greater than",value:f.default.rasterAnalysisLogicTypes.greater_than_equal},{text:"Over",value:f.default.rasterAnalysisLogicTypes.over}];$("#raster-image-logic-operator-dropdownlist").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:e,animation:!1}).data("kendoDropDownList"),$("#raster-image-logic-execute-btn").kendoButton({click:(t=a(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,$("#raster-image-logic-output-data").attr("href","javascript:void(0)"),$("#raster-image-logic-output-data").hide(),e=i._getQueryOptions(),0!==Object.keys(e).length){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,p.default.getInstance()._getQueryData(e);case 8:0!==(n=t.sent).length?(r=p.default.getInstance()._getDownloadUrl(e.url,n.join("")),$("#raster-image-logic-output-data").attr("href",r),$("#raster-image-logic-output-data").show(),h.default.Control.Notification.getInstance().showSuccess(h.default.Local.Control.RasterImageAnalysisDialog.LogicOperationSuccess())):h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.LogicOperationFailure()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),h.default.Control.Notification.getInstance().showError(h.default.Local.Control.RasterImageAnalysisDialog.LogicOperationFailure());case 15:case"end":return t.stop()}},t,this,[[0,12]])})),function(){return t.apply(this,arguments)})}),$("#raster-image-logic-close-btn").kendoButton({click:function(){n.getInstance().close()}})}},{key:"close",value:function(){this._rasterImageLogicDialog&&(n._instance=null,this._rasterImageLogicDialog.destroy())}},{key:"_getOutputRasterData",value:function(){return $("#raster-image-logic-output-data").val()}},{key:"_getQueryOptions",value:function(){var t=$("#raster-image-logic-input-1-dropdownlist").data("kendoDropDownList").value(),e=p.default.getInstance()._getUrlAndLayerIdFromText(t),n=c(e,2),r=n[0],i=n[1],o=$("#raster-image-logic-input-2-dropdownlist").data("kendoDropDownList").value(),a=p.default.getInstance()._getUrlAndLayerIdFromText(o),s=c(a,2),l=s[0],u=s[1];if(r===l)return{url:r,layerId1:i,layerId2:u,type:$("#raster-image-logic-operator-dropdownlist").val(),querytype:f.default.rasterAnalysisTypes.logic};h.default.Control.Notification.getInstance().showError("逻辑运算失败，栅格数据来自不同数据源！")}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"../common/CommonValues":952,"../kq":1075,"./RasterImageAnalysisDialog":1011,"./Window":1034}],1016:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./toolbar/BoxZoom"),a=(r=o)&&r.__esModule?r:{default:r};var s=t("leaflet"),l=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._map=t,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default),i(n,[{key:"addHooks",value:function(){this._map.dragging.disable(),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addHooks",this).call(this)}},{key:"onMouseDown",value:function(t){this.addHooks(),2!==t.originalEvent.button&&this._onMouseDown.call(this,{clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY,which:1,shiftKey:!0})}},{key:"_onMouseUp",value:function(t){var e=this;if(1===t.which||1===t.button){if(e._finish(),!e._moved||e._startPoint.x==e._point.x&&e._startPoint.y==e._point.y){e._point=s.point(e._startPoint.x,e._startPoint.y),e._startPoint.x-=5,e._startPoint.y-=5,e._point.x+=5,e._point.y+=5}setTimeout(s.bind(e._resetState,e),0);var n=new s.LatLngBounds(e._map.containerPointToLatLng(e._startPoint),e._map.containerPointToLatLng(e._point));e._map.fire("boundend",n)}}}]),n}();n.default=l},{"./toolbar/BoxZoom":1040,leaflet:560}],1017:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./RubberBand"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=e;return n._map=t,n._boxZoom=new a.default(n._map),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,L.Evented),i(r,[{key:"bindEvent",value:function(){this._boxZoom.addHooks(),this._map.on("mousedown",this._handleMouseDown,this),this._map.on("boundend",this._handBoundEnd,this)}},{key:"removeEvent",value:function(){this._map.off("mousedown",this._handleMouseDown,this),this._map.off("boundend",this._handBoundEnd,this),this._map.dragging.enable(),this._boxZoom.removeHooks()}},{key:"_handleMouseDown",value:function(t){this._boxZoom.onMouseDown(t)}},{key:"_handBoundEnd",value:function(t){this.fire("boundend",t)}}],[{key:"getInstance",value:function(t){return r._instance||(r._instance=new r(t)),r._instance}}]),r}();n.default=s},{"./RubberBand":1016}],1018:[function(s,t,l){(function(t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var e,n=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),r=s("../kq"),i=(e=r)&&e.__esModule?e:{default:e};var o={position:"bottomleft",fill:"hollow",doubleLine:!1,showSubunits:!0,maxUnitsWidth:120,isUseLabel:!0},a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L.extend({},o,t),this._scale=L.control.graphicScale(this.options),this.labelText=L.DomUtil.create("div","scaleText")}return n(e,[{key:"addTo",value:function(e){var n=this;n._scale.addTo(e),n.options.isUseLabel&&(e.on("zoomend",function(t){n._updateLabel(e)}),n._scale._container.firstChild.style.marginBottom=0,t.insertAfter(n.labelText,n._scale._container.firstChild),n._updateLabel(e))}},{key:"remove",value:function(){this._scale.remove()}},{key:"_updateLabel",value:function(t){var e=i.default.Map.MapConfig.getInstance().scales()[t.getZoom()],n='<p style="text-align: center">1:'+Number(1/e).toFixed()+"</p>";this.labelText.innerHTML=n}}]),e}();l.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../kq":1075}],1019:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.options=L.extend({},s,t);var e=this;e.local=a.default.Local.Control.compare,e.button=new a.default.Control.MapButton("iconfont icon-screen-shot",function(t){a.default.Control.AdvancedSearchResultDialog.getInstance()._closeColorPicker(),a.default.Control.OverlayAnalysisResultDialog.getInstance()._closeColorPicker(),e.buttonClicked||(e.buttonClicked=!0,setTimeout(function(){e.buttonClicked=!1},1e3),setTimeout(function(){e._doScreenShot(e)},500))},a.default.Local.Control.screenshot.title(),"kq-screenshot"),e.buttonClicked=!1,e.isShowUI=!0,e.showButton=new a.default.Control.MapButton({id:"kq-screenshot-show",states:[{stateName:"show",icon:"iconfont icon-show",title:a.default.Local.Control.screenshot.showui(),onClick:function(t){t.state("not-show"),e.isShowUI=!1}},{stateName:"not-show",icon:"iconfont icon-not-show",title:a.default.Local.Control.screenshot.hideui(),onClick:function(t){t.state("show"),e.isShowUI=!0}}]});var n=[this.button,this.showButton];L.Browser.ie&&(e.isShowUI=!1,n=[this.button]),e.buttonBar=new a.default.Control.MapButtonBar(n,{position:this.options.position}),e.buttonBar.setAttribute("id","screenshot-buttonbar")}return i(r,[{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_toBlobCallback",value:function(t){var e=(new Date).Format("yyyyMMddhhmmss");console.log(e),a.default.Common.CommonTools.exportData(t,e+".png")}},{key:"_clipCanvas",value:function(t){var n=this,e=new a.default.Control.Window("screen-shot",{parentID:"map",title:a.default.Local.Control.screenshot.title(),draggable:!1,resizable:!1,scrollable:!1,close:function(){console.log("screen-shot on close!"),e._remove()}});e.initAsync(function(){$("#screen-shot-button").text(a.default.Local.Control.screenshot.title()),e._object().maximize(),e.open(),$("#screen-shot-container").append(t),$("#screen-shot-button").kendoButton({type:"submit",click:function(t){console.log("screen-shot-button clicked!");var e=$("#screen-shot canvas");L.Browser.ie?n._toBlobCallback(e.cropper("getCroppedCanvas").msToBlob()):e.cropper("getCroppedCanvas").toBlob(n._toBlobCallback)}}),$("#screen-shot canvas").cropper({autoCrop:!1,ready:function(){$(this).cropper("moveTo",0,0),$(this).cropper("crop")}})})}},{key:"_doScreenShot",value:function(){console.log("_doScreenShot!");var e=this;console.log("self.isShowUI:"+e.isShowUI),e.isShowUI||e._hideUI(),e._doSpecialDeal(),html2canvas(document.body,{logging:!1,useCORS:!0}).then(function(t){e._clipCanvas(t),e._undoSpecialDeal()}),e.isShowUI||e._showUI()}},{key:"doRectScreenShot",value:function(n,r,i,o,a){console.log("_doRectScreenShot!");var s=this;s._hideUI(!0),s._doSpecialDeal(),html2canvas(document.body,{logging:!1,useCORS:!0}).then(function(t){var e=document.createElement("canvas");e.width=i,e.height=o,e.getContext("2d").drawImage(t,n,r,i,o,0,0,i,o),a||(a=s._toBlobCallback),L.Browser.ie?a(e.msToBlob()):e.toBlob(a),s._undoSpecialDeal()}),s._showUI()}},{key:"_hideUI",value:function(t){$("#sidebar").hide(),$(".leaflet-control-container").hide(),$(".k-widget.k-window").each(function(t,e){e.isShow=!1,$(this).is(":hidden")||(e.isShow=!0,$(this).hide())}),t||$(".leaflet-pane.leaflet-popup-pane").hide(),$(".kq-ui").hide()}},{key:"_showUI",value:function(){$("#sidebar").show(),$(".leaflet-control-container").show(),$(".k-widget.k-window").each(function(t,e){e.isShow&&$(this).show()}),$(".leaflet-pane.leaflet-popup-pane").show(),$(".kq-ui").show()}},{key:"_doSpecialDeal",value:function(){$(".ui-contextmenu.ui-menu").each(function(t,e){$(self).hide()});var t=$(".leaflet-map-pane")[0],e=t.style.transform.replace("translate3d(","").split(","),n=parseFloat(e[0].replace("px","")),r=parseFloat(e[1].replace("px",""));t.transform_origin=t.style.transform,t.style.transform="translate3d(0px,0px,0px)";for(var i=$("div.leaflet-tile-container"),o=0;o<i.length;o++){var a=i[o].style.transform,s=a.replace("translate3d(","").split(","),l=parseFloat(s[0].replace("px","")),u=parseFloat(s[1].replace("px",""));i[o].transform_origin=a,i[o].style.transform="translate3d(0px,0px,0px)";for(var c=$("div.leaflet-tile-container:eq("+o+")").children(),h=0;h<c.length;h++){var f=c[h].style.transform.replace("translate3d(","").split(","),p=parseFloat(f[0].replace("px","")),d=parseFloat(f[1].replace("px",""));c[h].style.left=n+l+p+"px",c[h].style.top=r+u+d+"px",c[h].transform_origin=c[h].style.transform,c[h].style.transform="translate3d(0px,0px,0px)"}}for(var g=$("img.leaflet-image-layer"),m=0;m<g.length;m++)g[m].transform_origin=g[m].style.transform,g[m].style.transform="translate3d(0px,0px,0px)";var y=$(".leaflet-overlay-pane canvas");if(L.Browser.ie)y.hide();else for(var _=0;_<y.length;_++){var v=y[_].style.transform.replace("translate3d(","").split(","),b=parseFloat(v[0].replace("px","")),x=parseFloat(v[1].replace("px",""));y[_].style.left=n+b+"px",y[_].style.top=r+x+"px",y[_].transform_origin=y[_].style.transform,y[_].style.transform="translate3d(0px,0px,0px)"}for(var w=$(".leaflet-marker-icon,.leaflet-marker-shadow"),C=0;C<w.length;C++){var k=parseFloat(w[C].style.marginLeft.replace("px","")),E=parseFloat(w[C].style.marginTop.replace("px","")),S=w[C].style.transform.replace("translate3d(","").split(","),M=parseFloat(S[0].replace("px","")),P=parseFloat(S[1].replace("px",""));w[C].transform_origin=w[C].style.transform,w[C].marginLeft_origin=w[C].style.marginLeft,w[C].marginTop_origin=w[C].style.marginTop,w[C].style.transform="translate3d(0px, 0px, 0px)",w[C].style.marginLeft=n+M+k+"px",w[C].style.marginTop=r+P+E+"px"}for(var I=$(".leaflet-popup"),T=0;T<I.length;T++){var O=parseFloat(I[T].style.left.replace("px","")),N=parseFloat(I[T].style.bottom.replace("px","")),D=I[T].style.transform.replace("translate3d(","").split(","),A=parseFloat(D[0].replace("px","")),R=parseFloat(D[1].replace("px",""));I[T].transform_origin=I[T].style.transform,I[T].left_origin=I[T].style.left,I[T].bottom_origin=I[T].style.bottom,I[T].style.transform="translate3d(0px, 0px, 0px)",I[T].style.left=n+A+O+"px",I[T].style.bottom=-r-R-N+"px"}$("#field-listView,#value-info-listView").css("overflow","hidden"),$("#legend-query-legend-list").css("overflow","hidden"),$(".k-grid-content.k-auto-scrollable").css("overflow","hidden"),$(".sidebar-content-content").css("overflow","hidden");for(var F=$(".imap-text.imap-zoom-animated"),j=0;j<F.length;j++){var B=F[j].style.transform.replace("translate3d(","").split(","),z=parseFloat(B[0].replace("px","")),q=parseFloat(B[1].replace("px",""));F[j].transform_origin=F[j].style.transform,F[j].marginLeft_origin=F[j].style.marginLeft,F[j].style.transform="translate3d(0px, 0px, 0px)",F[j].style.marginLeft=n+z+0+"px",F[j].style.bottom=-(r+q+0+30)+"px"}}},{key:"_undoSpecialDeal",value:function(){var t=$(".leaflet-map-pane")[0];t.style.transform=t.transform_origin;for(var e=$("div.leaflet-tile-container"),n=0;n<e.length;n++){e[n].style.transform=e[n].transform_origin;for(var r=$("div.leaflet-tile-container:eq("+n+")").children(),i=0;i<r.length;i++)r[i].style.left="",r[i].style.top="",r[i].style.transform=r[i].transform_origin}var o=$(".leaflet-overlay-pane canvas");if(L.Browser.ie)o.show();else for(var a=0;a<o.length;a++)o[a].style.left="",o[a].style.top="",o[a].style.transform=o[a].transform_origin;for(var s=$("img.leaflet-image-layer"),l=0;l<s.length;l++)s[l].style.transform=s[l].transform_origin;for(var u=$(".leaflet-marker-icon,.leaflet-marker-shadow"),c=0;c<u.length;c++)u[c].style.transform=u[c].transform_origin,u[c].style.marginLeft=u[c].marginLeft_origin,u[c].style.marginTop=u[c].marginTop_origin;for(var h=$(".leaflet-popup"),f=0;f<h.length;f++)h[f].style.transform=h[f].transform_origin,h[f].style.left=h[f].left_origin,h[f].style.bottom=h[f].bottom_origin;for(var p=$(".imap-text.imap-zoom-animated"),d=0;d<p.length;d++)p[d].style.transform=p[d].transform_origin,p[d].style.marginLeft=p[d].marginLeft_origin,p[d].style.bottom="-30px";$("#field-listView,#value-info-listView").css("overflow-y","scroll"),$("#legend-query-legend-list").css("overflow-y","scroll"),$(".k-grid-content.k-auto-scrollable").css("overflow-y","scroll"),$(".sidebar-content-content").css("overflow-y","scroll")}}]),r}();n.default=l},{"../kq":1075}],1020:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),_=(r=o)&&r.__esModule?r:{default:r};var a={content:'<div id="search" style="margin:0px auto; z-index: 999999; width: 330px; position: absolute;display: none;">\n    <div class="search_box">\n        <div class="search">\n            <div id="pt1" class="select">\x3c!--选择框--\x3e\n                <a id="s0"></a>\n                <div style="display:none;" id="pt2" class="part">\x3c!--隐藏选择框--\x3e\n                </div>\n            </div>\n            <input id="catid" name="catid" type="hidden" value="0">\x3c!--隐藏的数据存储框--\x3e\n            <div id="pt3" class="search1">\n                <input id="q" class="enter" name="infos"  placeholder="请输入查询条件">\x3c!--条件输入框--\x3e\n            </div>\n            <input id="qBtn" class="sb" name="Input" type="button">\x3c!--搜索按钮--\x3e\n        </div>\n    </div>\n</div>',classes:"",orientation:"vertical",style:{position:"absolute"},position:"topleft"},s=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.options=L.extend({},a,t),e._searchLayers=[],e._initSearchBarButton(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Evented),i(n,[{key:"_initSearchLayers",value:function(){for(var t=_.default.Query.SearchBarConfig.getInstance(),e=t.layers(),n=0;n<e.length;++n){var r=e[n];this._searchLayers.push({label:t.getLayerProperty(r,"label"),layerId:t.getLayerProperty(r,"query_id"),source:t.getLayerProperty(r,"src_name"),filterWhere:t.getLayerChildNode(r,"filterWhere"),fields:t.getLayerChildNode(r,"fields"),fields_alias:t.getLayerChildNode(r,"fields_alias"),chart_field:t.getLayerChildNode(r,"chart_field"),summary_field:t.getLayerChildNode(r,"summary_field"),server_type:t.getLayerChildNode(r,"server_type"),tooltip:t.getLayerChildNode(r,"tooltip")})}}},{key:"_createSearchLayersElement",value:function(){for(var e=this,t="<p>",n=0;n<e._searchLayers.length;n++)t+='<a id="s'+(n+1)+'">'+e._searchLayers[n].label+"</a>";t+="</p>";var r=$(t);$("#pt2").append(r);for(var i=function(t){$("#s"+(t+1)).click(function(){e._aOnClick(t)})},o=0;o<e._searchLayers.length;o++)i(o)}},{key:"_loadSearchXml",value:function(){this._initSearchLayers(),this._aOnClick(0),this._createSearchLayersElement(),this._bindEvents()}},{key:"_bindEvents",value:function(){var y=this;$("#pt1").mouseover(function(){$("#pt2").css("display",""),$("#pt1").attr("class","select select_hover")}),$("#pt1").mouseout(function(){$("#pt2").css("display","none"),$("#pt1").attr("class","select")}),$("#pt3").mouseout(function(){$("#pt4").css("display","none")}),$(".sb").click(function(){var o=_.default.Control.Notification.getInstance(),t=$("#q").val();if("…"!==t&&""!==t){var e=$("#catid").attr("value"),n=y._searchLayers[e],a=n.label,r=n.filterWhere,i=n.layerId,s=n.source,l=n.fields,u=n.fields_alias,c=n.chart_field.split("|"),h=n.summary_field.split("|");t=t.split(","),r=r.split("'%[VALUE]%'");for(var f="",p=0;p<t.length;++p)f+=r[p]+"'%"+t[p]+"%'";r=f;var d=_.default.Map.MapConfig.getInstance().getSourceByName(s,!0)._url,g=_.default.Query.InfoQuery.getInstance(),m={url:d,layerId:i,reqcount:2e3,where:r};_.default.Control.Waiting.show(_.default.Control.Manager.getInstance()._getMap()),g.queryAsync(m,function(){_.default.Control.Waiting.close();var t=g.data();if(t&&0!==t.length)if(-1!==t[0]){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r].properties;i.geometry=t[r].geometry,n.push(i)}e.push({label:a,fields:l.split(","),titles:u.split(","),records:n,chartFields:c,summaryField:h}),_.default.Control.SearchBarResultDialog.getInstance().open(e)}else console.log("查询被停止或者其他错误");else o.showInfo("未查到任何数据")},function(){_.default.Control.Waiting.close()})}else o.showError("请输入查询条件！")})}},{key:"_aOnClick",value:function(t){var e=$("#q");0!==this._searchLayers.length&&(e[0].placeholder=this._searchLayers[t].tooltip,$("#s0").html(this._searchLayers[t].label)),$("#pt2").css("display","none"),$("#catid").attr("value",t),e.focus()}},{key:"show",value:function(){$("#search").css("display","block")}},{key:"hidden",value:function(){$("#search").css("display","none")}},{key:"_initSearchBarButton",value:function(){var t=this;t.button=new _.default.Control.MapButton("icon iconfont icon-search",function(){t.button.enabled()?t._stop(t):t._start(t)},"展开搜索栏"),t.buttonBar=new _.default.Control.MapButtonBar([t.button],{position:t.options.position}),t.buttonBar.setAttribute("id","searchbar-buttonbar")}},{key:"addTo",value:function(t){var e=this;e._map=t,e.buttonBar.addTo(t),-1!==e.options.position.indexOf("left")?(e.options.style.top=$(".icon-search").offset().top-15+"px",e.options.style.left="42px"):(e.options.style.top=$(".icon-search").offset().top-15+"px",e.options.style.right="42px"),e._advmenu=new _.default.Control.Custom(e.options),e._advmenu.addTo(e._map),e._loadSearchXml()}},{key:"_start",value:function(){this.button.setTitle("折叠搜索栏"),this.button.setEnabled(!0),this.show()}},{key:"_stop",value:function(){this.button.setTitle("展开搜索栏"),this.button.setEnabled(!1),this.hidden()}}]),n}();n.default=s},{"../kq":1075}],1021:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./QueryResultDialog"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=t;return e._desc="search-bar-",e._title=KQ.Local.Control.searchBarResultDialog.title(),e._init(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default),i(n,[{key:"_initHtml",value:function(){var t=KQ.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="search-bar-result-dialog"><div id="search-bar-layer-name-tabs"></div></div>'))}},{key:"_getResultDialogId",value:function(){return"search-bar-result-dialog"}},{key:"_getLayerNameTabsId",value:function(){return"search-bar-layer-name-tabs"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"./QueryResultDialog":1009}],1022:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("../kq")),o=a(t("./Window"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e=t;return e._dialog=null,e._slider=null,e._init(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Evented),r(n,[{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){var t=i.default.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="search-light-size-dialog"><input id="search-light-size-slider"></div>'))}},{key:"_initUi",value:function(){this._initDialog(),this._initSlider()}},{key:"_initDialog",value:function(){var t=this,e={width:"216px",height:"50px",actions:["Close"],scrollable:!1,resizable:!1,appendTo:"#"+i.default.Common.CommonValues.mapContainerID},n=new o.default(t._getDialogId(),e);n.initAsync(function(){t._dialog=n._object()})}},{key:"_initSlider",value:function(){var e=this;e._slider=$(e._getSliderId()).kendoSlider({precision:1,smallStep:1,largeStep:32,min:32,max:512,tickPlacement:"none",value:0,change:function(t){e.fire("change",t)}}).data("kendoSlider")}},{key:"_getDialogId",value:function(){return"search-light-size-dialog"}},{key:"_getSliderId",value:function(){return"#search-light-size-slider"}},{key:"open",value:function(){var t=parseInt($("#sidebar").css("width"))+20+"px";this._dialog.setOptions({position:{top:"10px",left:t},title:i.default.Local.Control.searchLightSizeDialog.title()}),this._dialog.open()}},{key:"value",value:function(t){return this._slider.value(t)}},{key:"min",value:function(t){return this._slider.min(t)}},{key:"max",value:function(t){return this._slider.max(t)}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=s},{"../kq":1075,"./Window":1034}],1023:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={position:"topleft"},r=function(t){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));o.localization=KQ.Local.getCurrentLanguage(),e.options=L.extend({},o,t);var n=e;return n.button=new KQ.Control.MapButton("iconfont icon-set-location",function(t){KQ.Control.LocationDialog.getInstance().open()},KQ.Local.Control.setlocation.title(),"kq-setlocation"),n.buttonBar=new KQ.Control.MapButtonBar([n.button],{position:e.options.position}),n.buttonBar.setAttribute("id","setlocation-buttonbar"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,L.Evented),i(r,[{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}}]),r}();n.default=r},{}],1024:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._div=t,this._init()}var t,n,r;return i(e,[{key:"addTo",value:function(t){this._map=t}},{key:"_initHtml",value:(r=s(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this)._container=L.DomUtil.get(e._div),e._container||(e._container=L.DomUtil.create("div")),t.next=5,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"sidebar/setting.html");case 5:"error"===(n=t.sent)?console.log("get setting.html error"):(n=n.replaceAll("_selectTheme_",a.default.Local.Control.sidebar.content.setting.selectTheme()),$(e._container).append(n),console.log("get setting.html success"));case 7:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_init",value:(n=s(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,e._initHtml();case 3:return n=a.default.Common.ThemeManager.getInstance(),t.next=6,n.getInitThemeName();case 6:r=t.sent,this.themeDropdownList=$("#theme-dropdownlist").kendoDropDownList({dataSource:{data:n.getThemeList()},value:r,animation:!1,change:e._onThemeChange.bind(e)}).data("kendoDropDownList");case 8:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_onThemeChange",value:(t=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.default.Common.ThemeManager.getInstance(),t.next=3,e.setSavedThemeName(this.themeDropdownList.value());case 3:a.default.Control.Notification.getInstance().showInfo(a.default.Local.Control.setting.onThemeChange());case 4:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}();n.default=l},{"../kq":1075}],1025:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var a={position:"topleft",orientation:"horizontal"},l=void 0,u=void 0,c=void 0,h=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=L.extend({},a,t),l=s.default.Local.Control.sidebyside.title(),u=s.default.Local.Control.sidebyside.titleVertical(),c=s.default.Local.Control.sidebyside.titleCancel();var e=this;e.button=new s.default.Control.MapButton("iconfont icon-side-by-side",function(t){e.buttonVertical.enabled()&&(e.startSwitch=!0),e.button.enabled()?e._stop(e):(e.options.orientation="horizontal",e._stop(e),e._start(e))},l,"kq-sidebyside-h"),e.buttonVertical=new s.default.Control.MapButton("iconfont icon-side-by-side-vertical",function(t){e.button.enabled()&&(e.startSwitch=!0),e.buttonVertical.enabled()?e._stop(e):(e.options.orientation="vertical",e._stop(e),e._start(e))},u,"kq-sidebyside-v"),e.buttonBar=new s.default.Control.MapButtonBar([e.button,e.buttonVertical],{position:e.options.position}),e.buttonBar.setAttribute("id","sidebyside-buttonbar")}return i(n,[{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"remove",value:function(){this._releaseLayers(this),this._map.removeControl(this.buttonBar)}},{key:"_bindLayers",value:function(o,i){if(o.sidebyside)return s.default.Control.Waiting.close(),!1;var a=s.default.Map.MapCommon._getActualLayers(o._map);return setTimeout(function(){for(var t=[],e=[],n=0;n<a.length;n++)0===n?e.push(a[n]):t.push(a[n]);var r={init_value:i};"vertical"===o.options.orientation&&(r.orientation="vertical"),o.sidebyside=L.control.sideBySide(e,t,r),o.sidebyside.on("needbind",function(){var i=setInterval(function(){var t=s.default.Map.MapCommon._getActualLayers(o._map);if(!(t.length<2)){clearInterval(i);for(var e=[],n=[],r=0;r<t.length;r++)0===r?n.push(t[r]):e.push(t[r]);o.sidebyside.setLeftLayers(n),o.sidebyside.setRightLayers(e)}},500)}),o.sidebyside.addTo(o._map),s.default.Control.Waiting.close()},100),!0}},{key:"_releaseLayers",value:function(t){t.sidebyside&&(t.sidebyside.remove(),t.sidebyside=void 0)}},{key:"on_moveend",value:function(){console.log("map moveend!");var t=this;if(t._isValid()){s.default.Control.Waiting.showNoClose();var e=t.sidebyside._range.value;t._releaseLayers(t),t._waitImageOverlay(this.sourceCount,function(){t._bindLayers(t,e)})}}},{key:"_isAllLayersDone",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("imageoverlay"===n.desc&&void 0!==n._loaded&&!1===n._loaded)return!1}return!0}},{key:"_isValid",value:function(){return!(!this.sidebyside||!this.sidebyside._range)}},{key:"_waitImageOverlay",value:function(n,r){var i=0,o=this,a=setInterval(function(){if(console.log("_waitImageOverlay ..."),6e4<(i+=1e3))return console.log("_waitImageOverlay timeout ..."),clearInterval(a),s.default.Control.Notification.getInstance().showError(s.default.Local.Control.sidebyside.timeout()),s.default.Control.Waiting.close(),void o._stop(o);var t=s.default.Control.Manager.getInstance().getMapView(),e=s.default.Map.MapCommon._getActualLayers(t._getMap());e.length===n?(console.log("_waitImageOverlay done ..."),clearInterval(a),r()):e.length>n&&(console.log("_waitImageOverlay bigger ..."),clearInterval(a),s.default.Control.Waiting.close())},1e3)}},{key:"_start",value:function(t){var e=s.default.Control.Manager.getInstance().getMapView().getTree();e._clearStick(),e.prepareSideBySide();var n=e._getSelectedLayerNodes(),r=n.length;return r<2?(s.default.Control.Notification.getInstance().showError(s.default.Local.Control.sidebyside.least2()),!1):5<r?(s.default.Control.Notification.getInstance().showError(s.default.Local.Control.sidebyside.most5()),!1):(this.sourceCount=e._getNodesSourceNumber(n),"vertical"===t.options.orientation?(t.buttonVertical.setTitle(c),t.buttonVertical.setEnabled(!t.buttonVertical.enabled())):(t.button.setTitle(c),t.button.setEnabled(!t.button.enabled())),$("#sidebar").css("pointer-events","none"),$("#searchlight-buttonbar").css("pointer-events","none"),$("#screenshot-buttonbar").css("pointer-events","none"),$(".kq-advmenu-btn-search-light").css("pointer-events","none"),$(".kq-advmenu-btn-screenshot").css("pointer-events","none"),t.startSwitch||s.default.Control.Notification.getInstance().showInfo(s.default.Local.Control.sidebyside.maskStart()),s.default.Control.Waiting.showNoClose(),t._waitImageOverlay(this.sourceCount,function(){t._bindLayers(t)}),s.default.Control.Manager.getInstance()._unselectAllControlsExcept("sidebyside"),t._map.on("moveend",this.on_moveend,this),void(t.startSwitch=!1))}},{key:"_stop",value:function(t){t.button.enabled()&&(t.button.setTitle(l),t.button.setEnabled(!t.button.enabled()),t._releaseLayers(t),$("#sidebar").css("pointer-events","auto"),$("#searchlight-buttonbar").css("pointer-events","auto"),$("#screenshot-buttonbar").css("pointer-events","auto"),$(".kq-advmenu-btn-search-light").css("pointer-events","auto"),$(".kq-advmenu-btn-screenshot").css("pointer-events","auto"),t.startSwitch||s.default.Control.Notification.getInstance().showSuccess(s.default.Local.Control.sidebyside.maskRestore()),t.buttonVertical._button._container.style["pointer-events"]="auto",t._map.off("moveend",this.on_moveend,this)),t.buttonVertical.enabled()&&(t.buttonVertical.setTitle(u),t.buttonVertical.setEnabled(!t.buttonVertical.enabled()),t._releaseLayers(t),$("#sidebar").css("pointer-events","auto"),$("#searchlight-buttonbar").css("pointer-events","auto"),$("#screenshot-buttonbar").css("pointer-events","auto"),$(".kq-advmenu-btn-search-light").css("pointer-events","auto"),$(".kq-advmenu-btn-screenshot").css("pointer-events","auto"),t.startSwitch||s.default.Control.Notification.getInstance().showSuccess(s.default.Local.Control.sidebyside.maskRestore()),t.button._button._container.style["pointer-events"]="auto",t._map.off("moveend",this.on_moveend,this))}}]),n}();n.default=h},{"../kq":1075}],1026:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"left",init_open_id:""},l=function(t){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.options=L.extend({},s,t),e}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,L.Evented),i(o,[{key:"addTo",value:function(t){var e=this;e._map=t,e._sidebar=L.control.sidebar(e.options.id,e.options),e._sidebar.addTo(e._map),e._sidebar.on("content",function(t){e.fire("content",t)}),e.options.init_open_id&&""!==e.options.init_open_id&&setTimeout(function(){e._sidebar.open(e.options.init_open_id),e._updateCloseButtonIcon()},1e3)}},{key:"remove",value:function(){this._sidebar.remove(),$("#sidebar").remove()}},{key:"open",value:function(t){this._sidebar.open(t)}},{key:"removeTab",value:function(t){$("#"+this.options.id+" #"+t).remove()}},{key:"removeContent",value:function(t){$("#"+t+".sidebar-pane").remove()}},{key:"show",value:function(){$("#sidebar").attr("disabled",!0)}},{key:"hide",value:function(){$("#sidebar").hide()}},{key:"close",value:function(){this._sidebar.close()}},{key:"_updateCloseButtonIcon",value:function(){var t=$("#"+this.options.id+" .sidebar-close i"),e="left"===this.options.position?"fa fa-caret-left":"fa fa-caret-right";t.removeClass().addClass(e)}}],[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.local=a.default.Local.Control.sidebar,t.next=3,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"sidebar/"+e);case 3:if("error"!==(n=t.sent)){t.next=7;break}return console.log("load sidebar_html error!"),t.abrupt("return",!1);case 7:return n=o._localHtml(n),r=a.default.Common.CommonValues.mapContainerID,console.log("load sidebar_html successfully！"),(i=$("#"+r)).length<=0&&console.log("sidebar.initAsync: mapdiv was not found!"),i.css("width","100%"),i.css("height","100%"),i.append(n),sidebar_init&&sidebar_init(),t.abrupt("return",!0);case 17:case"end":return t.stop()}},t,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return n.apply(this,arguments)})},{key:"_localHtml",value:function(t){return t.replaceAll("_layers_",o.local.layers()).replaceAll("_advancedSearch_",o.local.advancedSearch()).replaceAll("_overlayAnalysis_",o.local.overlayAnalysis()).replaceAll("_featureImport_",o.local.featureImport()).replaceAll("_historyCompare_",o.local.historyCompare()).replaceAll("_bookmark_",o.local.bookmark()).replaceAll("_settings_",o.local.settings())}}]),o}();n.default=l},{"../kq":1075}],1027:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topleft"},l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L.extend({},s,t)}return i(e,[{key:"initAsync",value:function(t){var n=this;n.button=new a.default.Control.MapButton("iconfont icon-print",function(t,e){console.log("print!"),n._hideAllControls(),$("#"+a.default.Common.CommonValues.insideMapID).print({globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:$.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"})},"打印地图"),n.buttonBar=new a.default.Control.MapButtonBar([n.button],{position:n.options.position}),t&&t()}},{key:"addTo",value:function(t){this._map=t,this.buttonBar.addTo(t)}},{key:"remove",value:function(){this._map.removeControl(this.buttonBar)}},{key:"_hideAllControls",value:function(){$(".leaflet-control-container").addClass("no-print")}}]),e}();n.default=l},{"../kq":1075}],1028:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={id:"simplesidebar",fileName:"simplesidebar.html",closeButton:!0,position:"right",autoPan:!1,type:"s"},l=function(){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=s,n=a.default.Map.MapConfig.getInstance(),r=n.getControl("simplesidebar");if(r){var i=n.getControlPosition(r);i&&(e.position=i)}this.options=L.extend({},e,t)}var t,e;return i(o,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"sidebar/"+this.options.fileName);case 2:if("error"!==(n=t.sent)){t.next=6;break}return console.log("load simple_sidebar_html error!"),t.abrupt("return",!1);case 6:return r=a.default.Common.CommonValues.mapContainerID,console.log("load simple_sidebar_html successfully！"),(i=$("#"+r)).length<=0&&console.log("sidebar.initAsync: mapdiv was not found!"),i.css("width","100%"),i.css("height","100%"),i.append(n),e&&e(),t.abrupt("return",!0);case 15:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})},{key:"addTo",value:function(t){this._map=t,this._sidebar=L.control.sidebar_v0(this.options.id,this.options),this._sidebar.addTo(this._map)}},{key:"remove",value:function(){this._sidebar.remove()}},{key:"show",value:function(){var t=this;setTimeout(function(){t._sidebar.show()},100)}},{key:"hide",value:function(){var t=this;setTimeout(function(){t._sidebar.hide()},100)}}]),o}();n.default=l},{"../kq":1075}],1029:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),u=r(t("../kq")),o=r(t("./SummaryAnalysisChart"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this._config=u.default.Query.OverlayAnalysisConfig.getInstance()}var n,t,r;return i(e,[{key:"_executeSummaryAnalysis",value:(r=a(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._geometry=this._getGeometry(),null!==this._geometry){t.next=5;break}u.default.Control.Notification.getInstance().showError(u.default.Local.Control.overlayAnalysis.notification.drawAnalysisGeometry()),t.next=20;break;case 5:return n=[],t.prev=6,u.default.Control.Waiting.show(u.default.Control.Manager.getInstance()._getMap()),t.next=10,this._getQueryData();case 10:n=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),u.default.Control.Waiting.close();case 16:return t.prev=16,u.default.Control.Waiting.close(),t.finish(16);case 19:u.default.Query.QueryIDManager.isDataArrayCanceled(n,!0)||(0===n.length?u.default.Control.Notification.getInstance().showError("汇总分析记录数为空!"):(this._options=L.extend({},this._options,e),o.default.getInstance().open(n[0],this._options)));case 20:case"end":return t.stop()}},t,this,[[6,13,16,19]])})),function(t){return r.apply(this,arguments)})},{key:"_getQueryData",value:(t=a(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=this)._getQueryOptions(),t.next=4,e._queryData(n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_getQueryOptions",value:function(){var t=this._config,e=this._getExactConfigLayer(),n=this._getQueryUrl(),r=t.getLayerQueryID(e),i="PROJ4: "+u.default.Map.MapConfig.getInstance().getProj4(),o=this._geometry,a=t.getLayerChartField(e),s=t.getLayerSummaryField(e),l="sum";return"1"==e.type?l="count":s&&"OBJECTID"!==s||(s="$area$,$length$"),this._options={chartFiledsAlias:this._getChartFiledsAlias(e),summarytypes:l},{url:n,layerId:r,geoSRS:i,geometry:o,groupfields:a,summaryfields:s,summarytypes:l}}},{key:"_getExactConfigLayer",value:function(){var t=this._options,e=t.layerId,n=t.queryId,r=t.sourceName;return this._config.findExactLayer(e,n,r)}},{key:"_getSourceFromName",value:function(){var t=this._options.sourceName;return u.default.Map.MapConfig.getInstance().getSourceByName(t,!0)}},{key:"_getQueryUrl",value:function(){var t=this._getSourceFromName();return u.default.Map.MapConfig.getInstance().getSourceUrl(t)}},{key:"_getGeometry",value:function(){var t=u.default.Control.Manager.getInstance().getControl("draw").toGeoJSON(!0);return t?JSON.stringify(u.default.Common.CommonTools.geoJsonFCToGC(t)):null}},{key:"_queryData",value:(n=a(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.default.Query.SummaryAnalysis.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"_getChartFiledsAlias",value:function(t){for(var e=[],n=this._config,r=n.getLayerFields(t).split(","),i=n.getLayerFieldsAlias(t).split(","),o=n.getLayerChartField(t).split(","),a={},s=0;s<r.length;++s)a[r[s]]=i[s];for(var l=0;l<o.length;++l)a[o[l]]&&e.push(a[o[l]]);return e}}]),e}();n.default=s},{"../kq":1075,"./SummaryAnalysisChart":1030}],1030:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("./QueryResultChart"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,s.default),i(n,[{key:"open",value:function(t,e){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_mergeOptions",this).call(this,e),o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"open",this).call(this,t)}},{key:"_isRightData",value:function(t){return!(t.length>this._options.maxTotalNumber)||(KQ.Control.Notification.getInstance().showError(KQ.Local.Control.queryResultChart.notification.limitStatisticalResult()),!1)}},{key:"_getChartDataSource",value:function(t){for(var e=t.items,n=t.itemcount,r=this._options.colors,i=[],o=0,a=0;a<n;++a)e[a].values?o+=e[a].values[0].sum:o+=e[a].count;for(var s=0;s<n;++s){var l=r[s%r.length],u=void 0;u=e[s].values?Number(e[s].values[0].sum/o):Number(e[s].count/o);var c=e[s].name.split("+").join(" ");i.push({color:l,value:u,category:c})}for(var h=1,f=0;f<i.length-1;++f)h-=i[f].value;return i[i.length-1].value=h,i}},{key:"_getChartDialogId",value:function(){return"summary-query-result-chart-dialog"}},{key:"_getChartId",value:function(){return"summary-query-result-chart"}},{key:"_getChartPieId",value:function(){return"chartPie_summary"}},{key:"_getChartBarId",value:function(){return"chartBar_summary"}},{key:"_exportImageButtonId",value:function(){return"exportImage_summary"}}],[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}]),n}();n.default=l},{"./QueryResultChart":1008}],1031:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topright",collapsed:!0},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);this._options=L.extend({},s,t),this._instance=null,this._map=null,this._baseLayers={},this._mapLayerManager=null;var e=a.default.Map.MapConfig.getInstance().getAllLayerList(!0);e[0],e[1];console.log("all_layers 0: "+e[0]),this._baseLayers={none:L.layerGroup()}}return i(n,[{key:"addTo",value:function(t){this._map=t,this._timelineLayers=L.control.layers(this._baseLayers,{},this._options),this._timelineLayers.addTo(t)}},{key:"remove",value:function(){this._timelineLayers.remove()}},{key:"addTimelineLayer",value:function(t,e){var n=this._getMapLayerFromLayerKey(t);this._baseLayers[e]=n,this._map&&(this.remove(),this.addTo(this._map),$(".leaflet-control-layers-toggle").attr("class","leaflet-control-layers-toggle icon iconfont icon-layers-line"))}},{key:"updateTimelineLayers",value:function(t,e){var n=a.default.Control.Notification.getInstance();this._baseLayers[e]?(n.showSuccess(a.default.Local.Control.TimelineLayers.delete()+e),delete this._baseLayers[e]):(n.showSuccess(a.default.Local.Control.TimelineLayers.add()+e),this.addTimelineLayer(t,e))}},{key:"getBaseLayers",value:function(){return this._baseLayers}},{key:"_getMapLayerFromLayerKey",value:function(t){return this._mapLayerManager||(this._mapLayerManager=a.default.Map.MapLayerManager.getInstance().cloneManagerObject()),this._mapLayerManager.getLayerFromKey(t)}}],[{key:"getInstance",value:function(t){return n._instance||(n._instance=new n(t)),n._instance}}]),n}();n.default=l},{"../kq":1075}],1032:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=(i(t("../kq")),i(t("../../libs/other/SimpleAjaxUploader")));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"attachToMapButton",value:function(t,e,n){var r=t._button.button;this.attachToHtmlButton(r,e,n)}},{key:"attachToHtmlButton",value:function(t,e,n){var r={button:t,title:t.title,url:e,name:"kquploadfile",responseType:"json",cors:!0},i=L.extend({},n,r);this.uploader=new o.default.SimpleUpload(i)}}]),t}();n.default=a},{"../../libs/other/SimpleAjaxUploader":47,"../kq":1075}],1033:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),u=(r=o)&&r.__esModule?r:{default:r};var c="",a=["round","balls","bubble","flip","skeleton","eclipse","boxes","meter"],h=null,f=0,s=function(){function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c=u.default.Local.Control.waitting.defaultText()}return i(l,null,[{key:"show",value:function(t,e,n,r,i){if(t||(t=u.default.Control.Manager.getInstance()._getMap()),r||(r=!1),h||(h=L.control.window(t,{content:c,modal:!0,closeButton:!r,className:"control-window waiting-window "+i}),L.DomEvent.on(h,"hide",function(){console.log("waiting dialog hide !!!")}),L.DomEvent.on(h,"close",function(){console.log("waiting dialog close !!!")}),L.DomEvent.on(h,"closeButtonClicked",function(){console.log("waiting dialog closeButtonClicked !!!"),u.default.Query.QueryIDManager.getInstance().cancelCurrentQuery()}),console.log("waiting dialog open !!!")),u.default.Query.QueryIDManager.getInstance().toNextID(),e||(e="pin"),"pin"===e){var o=l._getNextPinType();n&&(o=n),h.content(l._getPinTemplate(o))}else if("text"===e){var a=c;n&&(a=n),h.content(a)}var s=new Date;f=s.getTime(),h.show()}},{key:"showNoClose",value:function(){l.show(null,null,null,!0)}},{key:"close",value:function(){if(h){var t=(new Date).getTime()-f;t<1e3&&u.default.Common.CommonTools._sleep(1e3-t),f=0,h.close(),h=null}}},{key:"hide",value:function(){h&&h.hide()}},{key:"_getPinTemplate",value:function(t){return'<div class="content-to-center" style="width: 220px; height: 60px"><div class="cp-spinner cp-'+t+'"></div></div>'}},{key:"_getNextPinType",value:function(){var t=Math.floor(Math.random()*a.length);return a[t]}}]),l}();n.default=s},{"../kq":1075}],1034:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={parentID:"map",title:"Window",width:"600px",action:["Close"],close:function(t){console.log("on close!")},dragend:function(){var t,e=this.wrapper.position(),n=a.default.Common.ComputeTools.scrollBarWidth(),r=$("body").height()-this.wrapper.height()-2*n-4,i=$("body").width()-this.wrapper.width()-4;e.left<0&&(t={left:0},$(this.wrapper).css(t)),e.top<0&&(t={top:0},$(this.wrapper).css(t)),e.left>i&&(t={left:i},$(this.wrapper).css(t)),e.top>r&&(t={top:r},$(this.wrapper).css(t))},updateHtml:function(t){return t}},l=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=L.extend({},s,e),this.options.template_name=t,this.options.visible=!1,this.obj=null}var t,e;return i(n,[{key:"initAsync",value:(t=regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,a.default.Map.MapConfig.getInstance(),!(0<(r=$("#"+n.options.template_name)).length)){t.next=6;break}t.next=18;break;case 6:return t.next=8,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"window/"+n.options.template_name+".html");case 8:if("error"!==(i=t.sent)){t.next=12;break}return console.log("load html error!"),t.abrupt("return",!1);case 12:console.log("load html successfully！"),(o=$("#"+n.options.parentID)).length<=0&&console.log("Window.initAsync: "+n.options.parentID+" was not found!"),i=n.options.updateHtml(i),o.append(i),r=$("#"+n.options.template_name);case 18:return n.obj=r.kendoWindow(n.options).data("kendoWindow"),n.options.position||n.obj.center(),e&&e(),t.abrupt("return",!0);case 22:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})},{key:"_object",value:function(){return this.obj}},{key:"_remove",value:function(){this.obj.destroy()}},{key:"open",value:function(){this.obj.open()}},{key:"close",value:function(){this.obj.close()}},{key:"center",value:function(){this.obj.center()}},{key:"setOptions",value:function(t){this.obj.setOptions(t)}},{key:"_getKendoObject",value:function(){return $("#"+this.options.template_name).data("kendoWindow")}},{key:"maximize",value:function(){this.obj.maximize()}}]),n}();n.default=l},{"../kq":1075}],1035:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",orientation:"vertical",style:{}},l=function(t){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.options=L.extend({},s,t),e}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,L.Evented),i(o,[{key:"addTo",value:function(t){this._map=t,this.options.content=o.advmenu_html,this._advmenu=new a.default.Control.Custom(this.options),this._advmenu.addTo(this._map),$("#kq-advmenu").kendoMenu({select:onAdvMenuSelect,orientation:this.options.orientation}),$("#kq-advmenu").hide(),advmenu_init&&advmenu_init()}},{key:"remove",value:function(){this._sidebar.remove(),$("#kq-advmenu").remove()}},{key:"show",value:function(){$("#kq-advmenu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-advmenu").hide()}}],[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/advmenu.html");case 2:if("error"!==(e=t.sent)){t.next=6;break}return console.log("load advmenu_html error!"),t.abrupt("return",!1);case 6:return o.advmenu_html=o._localHtml(e),console.log("load advmenu_html successfully！"),t.next=10,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/advmenu_script.html");case 10:if("error"!==(n=t.sent)){t.next=14;break}return console.log("load advmenu_script error!"),t.abrupt("return",!1);case 14:return r=a.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("advmenu_html.initAsync: mapdiv was not found!"),i.append(n),t.abrupt("return",!0);case 19:case"end":return t.stop()}},t,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"_localHtml",value:function(t){return t}}]),o}();n.default=l},{"../../kq":1075}],1036:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../kq");(r=o)&&r.__esModule;var a={position:"topright",id:"",title:"",classes:"",content:"",style:{},datas:{},events:{}},s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=L.extend({},a,t),this._control=L.control.custom(this.options)}return i(e,[{key:"addTo",value:function(t){this._control.addTo(t)}},{key:"remove",value:function(){this._control.remove()}}]),e}();n.default=s},{"../../kq":1075}],1037:[function(o,t,l){(function(r){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),e=o("../../kq"),a=(t=e)&&t.__esModule?t:{default:t};var s={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",orientation:"vertical",style:{}},n=function(t){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.options=L.extend({},s,t),e}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,L.Evented),i(o,[{key:"addTo",value:function(t){this._map=t,this.options.content=o.drawmenu_html,this._drawmenu=new a.default.Control.Custom(this.options),this._drawmenu.addTo(this._map),$("#kq-drawmenu").kendoMenu({select:onAdvMenuSelect,orientation:this.options.orientation}),$("#kq-drawmenu").hide(),r.drawmenu_init&&r.drawmenu_init()}},{key:"remove",value:function(){this._sidebar.remove(),$("#kq-drawmenu").remove()}},{key:"show",value:function(){$("#kq-drawmenu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-drawmenu").hide()}}],[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/drawmenu.html");case 2:if("error"!==(e=t.sent)){t.next=6;break}return console.log("load drawmenu_html error!"),t.abrupt("return",!1);case 6:return o.drawmenu_html=o._localHtml(e),console.log("load drawmenu_html successfully！"),t.next=10,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/drawmenu_script.html");case 10:if("error"!==(n=t.sent)){t.next=14;break}return console.log("load drawmenu_script error!"),t.abrupt("return",!1);case 14:return r=a.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("drawmenu_html.initAsync: mapdiv was not found!"),i.append(n),t.abrupt("return",!0);case 19:case"end":return t.stop()}},t,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"_localHtml",value:function(t){return t}}]),o}();l.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../kq":1075}],1038:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={position:"topright",content:"<div>ABCDEFGHIJK</div>",classes:"",style:{}},l=function(t){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.options=L.extend({},s,t),e}var e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,L.Evented),i(o,[{key:"addTo",value:function(t){this._map=t,this.options.content=o.mainmenu_html,this._mainmenu=new a.default.Control.Custom(this.options),this._mainmenu.addTo(this._map);var e=$("#kq-mainmenu");e.css("opacity",0),e.kendoMenu({select:onMainMenuSelect}),setTimeout(function(){var t=0;e.children("li").each(function(){t+=$(this)[0].getBoundingClientRect().width}),console.log("total_width:"+t),e.css("width",t+0),e.hide(),e.css("opacity",1),e.fadeIn("normal")},500),mainmenu_init&&mainmenu_init()}},{key:"remove",value:function(){this._sidebar.remove(),$("#kq-mainmenu").remove()}},{key:"show",value:function(){$("#kq-mainmenu").attr("disabled",!0)}},{key:"hide",value:function(){$("#kq-mainmenu").hide()}}],[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/mainmenu.html");case 2:if("error"!==(e=t.sent)){t.next=6;break}return console.log("load mainmenu_html error!"),t.abrupt("return",!1);case 6:return o.mainmenu_html=o._localHtml(e),console.log("load mainmenu_html successfully！"),t.next=10,a.default.Common.NetworkTools.httpGetAsync(a.default.Common.CommonValues.kqwebmapPath+"custom/mainmenu_script.html");case 10:if("error"!==(n=t.sent)){t.next=14;break}return console.log("load mainmenu_script error!"),t.abrupt("return",!1);case 14:return r=a.default.Common.CommonValues.mapContainerID,(i=$("#"+r)).length<=0&&console.log("mainmenu_html.initAsync: mapdiv was not found!"),i.append(n),t.abrupt("return",!0);case 19:case"end":return t.stop()}},t,this)}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"_localHtml",value:function(t){return t}}]),o}();n.default=l},{"../../kq":1075}],1039:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../../kq")),o=r(t("./OperatorToolButton"));function r(t){return t&&t.__esModule?t:{default:t}}t("./History");var a=o.default.extend({options:{type:"backward-map",icon:"icon iconfont icon-arrow-left"},initialize:function(t,e,n){var r=this;return r.options.tips=i.default.Local.Control.toolButton.backwardButton.tips(),r.options=L.extend(r.options,n),o.default.prototype.initialize.call(r,t,e),$(r._container).addClass("leaflet-disabled"),t.on("historybackdisabled",function(){$(r._container).addClass("leaflet-disabled")}).on("historybackenabled",function(){$(r._container).removeClass("leaflet-disabled")}),r},executeOperator:function(){L.HistoryControl.getInstance(this._map).goBack()}});n.default=a},{"../../kq":1075,"./History":1048,"./OperatorToolButton":1054}],1040:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=t("leaflet"),a=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Map.BoxZoom),r(e,[{key:"addHooks",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addHooks",this).call(this)}},{key:"removeHooks",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeHooks",this).call(this)}},{key:"moved",value:function(){return i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moved",this).call(this)}},{key:"_resetState",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetState",this).call(this)}},{key:"_onMouseDown",value:function(t){console.log("_onMouseDown"),o.Browser.mobile&&document.addEventListener("touchstart",o.DomEvent.preventDefault,{passive:!1}),i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onMouseDown",this).call(this,t),o.Browser.mobile&&o.DomEvent.on(document,{touchmove:this._onMouseMove,touchend:this._onMouseUp},this)}},{key:"_onMouseMove",value:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onMouseMove",this).call(this,t)}},{key:"_finish",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_finish",this).call(this),o.Browser.mobile&&(o.DomEvent.off(document,{touchmove:this._onMouseMove,touchend:this._onMouseUp},this),document.removeEventListener("touchstart",o.DomEvent.preventDefault))}},{key:"_onMouseUp",value:function(t){console.log("_onMouseUp"),i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onMouseUp",this).call(this,t)}},{key:"_onKeyDown",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onKeyDown",this).call(this)}}]),e}();n.default=a},{leaflet:560}],1041:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./BoxZoom"),a=(r=o)&&r.__esModule?r:{default:r};var s=t("leaflet"),l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_onMouseUp",value:function(t){var e=this;if((1===t.which||1===t.button)&&(e._finish(),e._moved)){setTimeout(s.bind(e._resetState,e),0);var n=new s.LatLngBounds(e._map.containerPointToLatLng(e._startPoint),e._map.containerPointToLatLng(e._point));e._map.setView(n.getCenter(),e._map.getZoom()-1).fire("boxzoomend",{boxZoomBounds:n})}}}]),e}();n.default=l},{"./BoxZoom":1040,leaflet:560}],1042:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});i(t("../../kq"));var r=i(t("./OperatorToolbutton"));function i(t){return t&&t.__esModule?t:{default:t}}var o=r.default.extend({options:{type:"custom"},initialize:function(t,e,n){return this.options=L.extend({},this.options,n),r.default.prototype.initialize.call(this,t,e),this},executeOperator:function(){this._map.fire("custom_button_clicked")}});n.default=o},{"../../kq":1075,"./OperatorToolbutton":1055}],1043:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./InformationButton")),i=o(t("../../kq"));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.extend({options:{type:"custom_info-query",icon:"icon iconfont icon-info-query"},_getConfigLayer:function(){var t=this.options.layerId,e=this.options.sourceName;return i.default.Query.InfoQueryConfig.getInstance().findAllLayer(t,e)},_openQueryDialog:function(t){this.options.dialog.open(t)}});n.default=a},{"../../kq":1075,"./InformationButton":1050}],1044:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./OperatorToolButton")),i=o(t("../Manager"));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.extend({options:{type:"drawing",icon:"icon iconfont icon-draw"},initialize:function(t,e,n){return this.options.tips=KQ.Local.Control.toolButton.drawButton.tips(),this.options=L.extend(this.options,n),r.default.prototype.initialize.call(this,t,e),this},executeOperator:function(){console.log("draw button executeOperator"),i.default.getInstance()._toggleDrawPane()}});n.default=a},{"../Manager":985,"./OperatorToolButton":1054}],1045:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("./OperatorToolButton"),o=(r=i)&&r.__esModule?r:{default:r};t("./History");var a=o.default.extend({options:{type:"forward-map",icon:"icon iconfont icon-arrow-right"},initialize:function(t,e,n){var r=this;return r.options.tips=KQ.Local.Control.toolButton.forwardButton.tips(),r.options=L.extend(r.options,n),o.default.prototype.initialize.call(r,t,e),$(r._container).addClass("leaflet-disabled"),t.on("historyforwarddisabled",function(){$(r._container).addClass("leaflet-disabled")}).on("historyforwardenabled",function(){$(r._container).removeClass("leaflet-disabled")}),r},executeOperator:function(){L.HistoryControl.getInstance(this._map).goForward()}});n.default=a},{"./History":1048,"./OperatorToolButton":1054}],1046:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("../../kq")),i=o(t("./ModeToolButton"));function o(t){return t&&t.__esModule?t:{default:t}}var a=i.default.extend({options:{type:"free-draw",icon:"icon iconfont icon-freedraw-0"},initialize:function(t,e,n){return this.options.tips=r.default.Local.Control.toolButton.freeDrawButton.tips(),this.options=L.extend({},this.options,n),i.default.prototype.initialize.call(this,t,e),this},bindEvent:function(){this._map.fire("start_free_draw")},removeEvent:function(){this._map.fire("stop_free_draw")}});n.default=a},{"../../kq":1075,"./ModeToolButton":1051}],1047:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("./OperatorToolButton"));i(t("../../map/MapConfig"));function i(t){return t&&t.__esModule?t:{default:t}}var o=r.default.extend({options:{type:"full-map",icon:"icon iconfont icon-full-map"},initialize:function(t,e,n){return this.options.tips=KQ.Local.Control.toolButton.globeButton.tips(),this.options=L.extend(this.options,n),r.default.prototype.initialize.call(this,t,e),this},executeOperator:function(){KQ.Control.Manager.getInstance().getMapView().zoomToMap()}});n.default=o},{"../../map/MapConfig":1089,"./OperatorToolButton":1054}],1048:[function(t,e,n){"use strict";L.HistoryControl=L.Control.extend({options:{maxMovesToSave:20,shouldSaveMoveInHistory:function(t){return!0}},initialize:function(t,e){L.Util.setOptions(this,e),this._map=t,this._shouldSave=!0,this._state.maxMovesToSave=this.options.maxMovesToSave,this._updateDisabled()},onRemove:function(t){t.off("movestart")},performActionWithoutTriggeringEvent:function(t){var e=this._state.ignoringEvents;this._state.ignoringEvents=!0,$.isFunction(t)&&t(),this._state.ignoringEvents=e},moveWithoutTriggeringEvent:function(t){var e=this;this.performActionWithoutTriggeringEvent(function(){e._map.setView(t.centerPoint,t.zoom)})},goBack:function(){return this._invokeBackOrForward("historyback",this._state.history,this._state.future)},goForward:function(){return this._invokeBackOrForward("historyforward",this._state.future,this._state.history)},clearHistory:function(){this._state.history.items=[],this._updateDisabled()},clearFuture:function(){this._state.future.items=[],this._updateDisabled()},_map:null,_state:{backDisabled:null,forwardDisabled:null,ignoringEvents:!1,maxMovesToSave:0,history:{items:[]},future:{items:[]}},_updateDisabled:function(){var t=0===this._state.history.items.length,e=0===this._state.future.items.length;t!==this._state.backDisabled&&(this._state.backDisabled=t,this._map.fire("historyback"+(t?"disabled":"enabled"))),e!==this._state.forwardDisabled&&(this._state.forwardDisabled=e,this._map.fire("historyforward"+(e?"disabled":"enabled"))),this.options.useExternalControls||(this._setButtonDisabled(this._backButton,t),this._setButtonDisabled(this._forwardButton,e))},_setButtonDisabled:function(t,e){var n=$(t),r="leaflet-disabled";e?n.addClass(r):n.removeClass(r)},_pop:function(t){if(t=t.items,$.isArray(t)&&0<t.length)return t.splice(t.length-1,1)[0]},_push:function(t,e){var n=this._state.maxMovesToSave;t=t.items,$.isArray(t)&&(t.push(e),0<n&&t.length>n&&t.splice(0,1))},_invokeBackOrForward:function(t,e,n){var r=this;r._shouldSave=!1,setTimeout(function(){r._shouldSave=!0},200);var i=this._popStackAndUseLocation(e,n);return!!i&&(this._map.fire(t,i),!0)},_popStackAndUseLocation:function(t,e){if($.isArray(t.items)&&0<t.items.length){var n=this._buildZoomCenterObjectFromCurrent(this._map),r=this._pop(t);return this._push(e,n),this.moveWithoutTriggeringEvent(r),{previousLocation:r,currentLocation:n}}},_buildZoomCenterObjectFromCurrent:function(t){return new L.ZoomCenter(t.getZoom(),t.getCenter())},addMapListeners:function(){var n=this;this._map.on("movestart",function(t){if(!n._state.ignoringEvents){var e=n._buildZoomCenterObjectFromCurrent(t.target);n.options.shouldSaveMoveInHistory(e)&&n._shouldSave&&(n._state.future.items=[],n._push(n._state.history,e))}n._updateDisabled()})}}),L.ZoomCenter=L.Class.extend({initialize:function(t,e){this.zoom=t,this.centerPoint=e}}),L.HistoryControl.getInstance=function(t,e){return L.HistoryControl.instance||(L.HistoryControl.instance=new L.HistoryControl(t,e)),L.HistoryControl.instance}},{}],1049:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=r(t("../Window")),_=r(t("../FeatureUpdateAttributeDialog"));function r(t){return t&&t.__esModule?t:{default:t}}function v(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var a=t("leaflet"),s=function(t){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),n=e;return n._dataSource=null,n._queryDialog=null,n._recordList=null,n._propertyGrid=null,n._confirmDialog=null,n._options=t,n._defaultFlickerColor=null,n._currentFlickerLayerGuid=null,n._selectLayerAndRecordIndexObj=null,n._element=$('<div id="info-query-dialog"><ul id="info-query-record-list"></ul><div><div id="info-query-property-grid"></div></div></div>'),n._map=KQ.Control.Manager.getInstance()._getMap(),n._parent=$("body"),n._selectLayerKey="",t&&(t.html&&(n._element=$(t.html)),t.map&&(n._map=t.map),t.parent&&(n._parent=$("#"+t.parent))),n._init(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,a.Evented),i(r,[{key:"getGridData",value:function(){return this._propertyGrid.dataSource.options.data}},{key:"open",value:function(t){var e=this;for(var n in e._dataSource=t,e._dataProcessingFunc&&e._dataProcessingFunc(e._dataSource),e._dataSource)for(var r=e._dataSource[n].records,i=0;i<r.length;++i)r[i].GUID=KQ.Common.ComputeTools.guid();for(var o in e._recordList.setDataSource(e._getRecordListDataSource()),setTimeout(function(){e._selectFirstItem()},100),e._queryDialog.open(),e._dataSource)for(var a=e._dataSource[o].records,s=0;s<a.length;++s){var l=a[s].geometry;if(l)KQ.Common.CommonTools.geoJsonFromGeometry(l)}e._addOrRemoveFeatureUpdateDelete()}},{key:"addDataProcessingFunc",value:function(t){this._dataProcessingFunc=t}},{key:"removeDataProcessingFunc",value:function(){delete this._dataProcessingFunc}},{key:"close",value:function(){this._queryDialog.close()}},{key:"_init",value:function(){this._initHtml(),this._initUi()}},{key:"_initHtml",value:function(){$("body").append(this._element)}},{key:"_initUi",value:function(){this._initQueryDialog(),this._initRecordList(),this._initPropertyGrid()}},{key:"_addOrRemoveFeatureUpdateDelete",value:function(){var o=this,a=KQ.Map.MapConfig.getInstance();a.controls().forEach(function(t){var e=a.getControlType(t);if(a.isControlHasPermission(t)){if("sidebar"===e){var n=a.getSubControl(t,"featureImport"),r=a.getControlProperty(n,"is_update"),i=a.getControlProperty(n,"is_delete");n&&a.isControlHasPermission(n)&&o._initRecordListContextMenu(r,i)}}else;})}},{key:"_getFeatureUpdateDeleteMenuItems",value:function(t,e){var n=[];return"1"===t&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureUpdateMenu(),cmd:"featureUpdate",uiIcon:"ui-icon custom-icon-transparency"}),"1"===e&&n.push({title:KQ.Local.Control.FeatureImport.ContextMenu.featureDeleteMenu(),cmd:"featureDelete",uiIcon:"ui-icon custom-icon-clearall"}),n}},{key:"_initRecordListContextMenu",value:function(t,e){var n,y=this;($("div#info-query-dialog > ul#info-query-record-list").bind("contextmenu",function(t){t.preventDefault()}),"0"!==t||"0"!==e)&&((t||e)&&$("#info-query-dialog").contextmenu({delegate:"ul.k-group span.k-state-selected",menu:y._getFeatureUpdateDeleteMenuItems(t,e),select:(n=v(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,l,u,c,h,f,p,d,g,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=y._selectLayerAndRecordIndexObj.layer,i=y._selectLayerAndRecordIndexObj.index,o=r.split("@@"),a=o[0],s=o[1],l=KQ.Query.FeatureImportConfig.getInstance(),u=l.findLayer(s,a),c=y._dataSource[r].records[i],h=y._dataSource[r].showName,f=""+c[h],y._isBlankText(f)&&(f="blank"),p=l.getLayerPrimaryKey(u),d=c[p],g=p+"="+d,t.t0=n.cmd,t.next="featureUpdate"===t.t0?17:"featureDelete"===t.t0?21:28;break;case 17:return console.log("FeatureUpdate: "),y._featureUpdateAttributeDialog=_.default.getInstance(),y._featureUpdateAttributeDialog.initFeatureUpdateDialog(u,c,f),t.abrupt("break",28);case 21:return console.log("FeatureDelete: "),m=KQ.Common.CommonValues.mapContainerID,$("#"+m).append($('<div id="feature-confirm-dialog" class="feature-confirm-dialog"></div>')),y._confirmDialog=$(".feature-confirm-dialog").kendoConfirm({title:!1,content:"<b style= 'font-size: medium;'>"+KQ.Local.Control.FeatureImport.ContextMenu.ConfirmToDelete()+"</b>",messages:{okText:KQ.Local.Control.FeatureImport.ContextMenu.okText(),cancel:KQ.Local.Control.FeatureImport.ContextMenu.cancelText()}}).data("kendoConfirm"),y._confirmDialog.result.done(v(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("准备删除要素!"),y._featureUpdateAttributeDialog=_.default.getInstance(),1==(e=y._selectLayerKey.split("@@")).length&&console.log("获取sourceName失败, _selectLayerKey：",y._selectLayerKey),t.next=6,y._featureUpdateAttributeDialog.featureDeleteFunction(s,g,f,e[0]);case 6:n=t.sent,console.log("Feature delete is success @@@ ---\x3e"+n),n&&(console.log("$$ --\x3e dataSource: ",y._dataSource),y._dataSource[r].records.splice(i,1),y.open(y._dataSource),setTimeout(function(){y._map.panBy([-150,-150])},1e3));case 9:case"end":return t.stop()}},t,this)}))).fail(function(){console.log("取消要素删除操作!")}),y._confirmDialog.open(),t.abrupt("break",28);case 28:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})}))}},{key:"_featureDeleteFunction",value:function(t){var e="",n="";if(this._selectLayerAndRecordIndexObj){var r=this._selectLayerAndRecordIndexObj,i=r.layer,o=r.index,a=this._dataSource[i].showName,s=this._dataSource[i].records[o];e=""+s[a],this._isBlankText(e)&&(e="blank"),n=s.OBJECTID}var l=KQ.Map.MapConfig.getInstance(),u=KQ.Query.FeatureDelete.getInstance();try{var c={url:l.getSourceUrl(),layerId:t,where:"objectid="+n},h=KQ.Control.Notification.getInstance();u.queryAsync(c,function(){console.log("Feature delete query_good");var t=u.data();console.log("feature delete data.length:"+t.length),t.forEach(function(t){console.log("Feature delete query ID: "+t.ID)}),h.showSuccess(e+" 要素删除成功!")},function(){console.log("query_error"),h.showError(e+" 要素删除失败!")})}catch(t){console.log("Feature delete error:"+t)}}},{key:"_initQueryDialog",value:function(){var e=this,t={title:KQ.Local.Control.infoQueryDialog.title(),width:"600px",height:"400px",actions:["Minimize","Close"],scrollable:!1,close:function(t){KQ.Map.MapCommon.clearFlickerLayer(e._map)}};e._options&&e._options.parent&&(t.appendTo="#"+e._options.parent,t.position={top:0,left:0},t.draggable=!1,t.resizable=!1);var n=new o.default(e._getQueryDialogId(),t);n.initAsync(function(){e._queryDialog=n._object()}),e._options&&$("#"+e._getQueryDialogId()).closest(".k-window").bind("mousedown mousewheel DOMMouseScroll dblclick",function(t){t.stopPropagation()})}},{key:"_initRecordList",value:function(){var n=this;n._recordList=$(n._getRecordListId()).kendoPanelBar({select:function(t){n._onSelectChanged(t.item)},activate:function(t){var e=$(n._getRecordListId()+" .k-state-selected").siblings(".k-group").children(":first");0!==e.length&&(n._recordList.select(e),n._onSelectChanged(n._recordList.select()[0]))}}).data("kendoPanelBar")}},{key:"_initPropertyGrid",value:function(){this._propertyGrid=$(this._getPropertyGridId()).kendoGrid({selectable:"row",allowCopy:!0,columns:[{field:"Field",title:KQ.Local.Control.infoQueryDialog.columns.field()},{field:"Value",title:KQ.Local.Control.infoQueryDialog.columns.value()}]}).data("kendoGrid")}},{key:"_getQueryDialogId",value:function(){return this._element.attr("id")}},{key:"_getRecordListId",value:function(){return"#"+this._element.children("ul").attr("id")}},{key:"_getPropertyGridId",value:function(){return"#"+this._element.find("div[id*='grid']").attr("id")}},{key:"_onSelectChanged",value:function(t){var e=this;if(e._selectLayerAndRecordIndexObj=e._getLayerAndIndexFromItem($(t)),e._selectLayerAndRecordIndexObj){var n=e._selectLayerAndRecordIndexObj,r=n.layer,i=n.index;e._refreshPropertyGrid(r,i),e._flickerSelectedItem(r,i),e.fire("select",e._getSelectData(r,i)),e._selectLayerKey!==r&&(e._selectLayerKey=r,e.fire("layerKeyChanged",{key:r}))}}},{key:"_getRecordListDataSource",value:function(){var t=[];for(var e in this._dataSource){for(var n=[],r=this._dataSource[e].label,i=this._dataSource[e].showName,o=this._dataSource[e].records,a=0;a<o.length;++a){var s=""+o[a][i];this._isBlankText(s)&&(s="blank"),n.push({text:s,layer:e,type:"item"})}t.push({text:r,items:n,type:"layer"})}return t}},{key:"_getPropertyGridDataSource",value:function(t,e){for(var n=[],r=this._dataSource[t].fields,i=this._dataSource[t].titles,o=this._dataSource[t].records[e],a=0;a<r.length;++a){var s=r[a],l=i[a];o.hasOwnProperty(s)&&n.push({Field:l,Value:o[s]})}return n}},{key:"_getSelectData",value:function(t,e){for(var n={},r=this._dataSource[t].fields,i=this._dataSource[t].records[e],o=0;o<r.length;++o){var a=r[o];i.hasOwnProperty(a)&&(n[a]=i[a])}return i&&i.geometry&&(i.geometry.hasOwnProperty("Length")&&(n.Geometry_Length=i.geometry.Length),i.geometry.hasOwnProperty("Area")&&(n.Geometry_Area=i.geometry.Area)),n}},{key:"_getLayerAndIndexFromItem",value:function(t){var e=t.closest(".k-panelbar"),n=this._recordList.options.dataSource,r=t.parentsUntil(e,".k-item").map(function(){return $(this).index()}).get().reverse();r.push(t.index());for(var i=-1,o=r.length;++i<o;)n=n[r[i]],n=i<o-1?n.items:n;return n&&"item"===n.type?{index:t.index(),layer:n.layer}:null}},{key:"_refreshPropertyGrid",value:function(t,e){this._propertyGrid.setOptions({dataSource:this._getPropertyGridDataSource(t,e)})}},{key:"_flickerSelectedItem",value:function(t,e){var n=this._dataSource[t].records[e].geometry;if(n){var r=this._dataSource[t].records[e].GUID;if(r===this._currentFlickerLayerGuid)KQ.Map.MapCommon.clearFlickerLayer(this._map),this._currentFlickerLayerGuid=null;else{this._currentFlickerLayerGuid=r;var i=this._map,o=this._dataSource[t].flickerColor||this._defaultFlickerColor,a={};o&&(a={color:o,fillColor:o});var s=KQ.Common.CommonTools.geoJsonFromGeometry(n,a);KQ.Map.MapCommon.fitBoundsLayer(s,i),KQ.Map.MapCommon.flickerLayer(s,i)}}}},{key:"_selectFirstItem",value:function(){this._recordList.expand($(this._getRecordListId()+" .k-item:eq(0)")),this._recordList.select($(this._getRecordListId()+" .k-group .k-item:eq(0)")),this._onSelectChanged(this._recordList.select()[0])}},{key:"_isBlankText",value:function(t){return!t||"string"==typeof t&&0===(t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).length}},{key:"setDefaultFlickerColor",value:function(t){this._defaultFlickerColor=t}}],[{key:"getInstance",value:function(){return r._instance||(r._instance=new r),r._instance}}]),r}();n.default=s},{"../FeatureUpdateAttributeDialog":977,"../Window":1034,leaflet:560}],1050:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=a(t("../../kq")),r=a(t("./ModeToolButton")),i=a(t("../RubberBand")),o=a(t("./InfoQueryDialog"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var l,u,c,h=r.default.extend({options:{type:"info-query",icon:"icon iconfont icon-info-query"},initialize:function(t,e,n){return this.options.tips=d.default.Local.Control.toolButton.informationButton.tips(),this.options=L.extend({},this.options,n),r.default.prototype.initialize.call(this,t,e),this._bounds=null,this._boxZoom=new i.default(t),this._config=d.default.Query.InfoQueryConfig.getInstance(),this},bindEvent:function(){var t=this;t._boxZoom.addHooks(),L.Browser.mobile?t._map.on("touchstart",t._handleMouseDown,t):t._map.on("mousedown",t._handleMouseDown,t),t._map.on("boundend",t._executeInfoQuery,t)},removeEvent:function(){var t=this;L.Browser.mobile?t._map.off("touchstart",t._handleMouseDown,t):t._map.off("mousedown",t._handleMouseDown,t),t._map.off("boundend",t._executeInfoQuery,t),t._map.dragging.enable(),t._boxZoom.removeHooks()},_handleMouseDown:function(t){this._boxZoom.onMouseDown(t)},_getLayersTree:function(){var t=d.default.Control.Manager.getInstance().getControl("tree");return t||(d.default.Control.Notification.getInstance().showError(d.default.Local.Control.toolButton.informationButton.notification.layerTreeEmpty()),null)},_getCheckedLayers:function(){var t=this._getLayersTree();if(!t)return[];var e=t.getCheckedLayers();return 0===e.length&&d.default.Control.Notification.getInstance().showError(d.default.Local.Control.toolButton.informationButton.notification.selectLayer()),e},_getQueryLayers:function(){return"single"===this._config.queryMode()?this._getQueryLayersSingleMode():this._getQueryLayersMultiMode()},_getQueryLayersSingleMode:function(){var t=this._getCheckedLayers(),e=[];if(0==t.length)return e;for(var n=d.default.Control.Manager.getInstance().getControl("tree").getActiveNode(),r=0;r<t.length;++r){var i=t[r];if(n&&n.key===d.default.Map.MapCommon.getKeyFromSourceNameLayerId(i.sourceName,i.layerId)){e.push(i);break}}return 0===e.length&&d.default.Control.Notification.getInstance().showError(d.default.Local.Control.toolButton.informationButton.notification.selectQueryLayer()),e},_getQueryLayersMultiMode:function(){return this._getCheckedLayers()},_getConfigLayer:function(){for(var t=[],e=this._getQueryLayers(),n=0;n<e.length;++n){var r=e[n],i=this._getOriginSourceName(r.sourceName);t=t.concat(this._config.findAllLayer(r.layerId,i))}return t},_executeInfoQuery:(c=s(regeneratorRuntime.mark(function t(e){var n,r,i,o,a,s,l,u,c,h,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this)._bounds=e,0!==(r=n._getConfigLayer()).length){t.next=5;break}return t.abrupt("return");case 5:i={},o=0;case 7:if(!(o<r.length)){t.next=30;break}if(a=r[o],null!==(s=n._getQueryOptions(a,n._getGeometry()))){t.next=13;break}return d.default.Control.Notification.getInstance().showError(d.default.Local.Control.toolButton.informationButton.notification.layerNotInConfigFile()),t.abrupt("return");case 13:return t.next=15,n._getQueryData(s);case 15:if(l=t.sent,!d.default.Query.QueryIDManager.isDataCanceled(l)){t.next=19;break}return console.log("query canceled, data come!"),t.abrupt("return");case 19:if(0!==l.length){t.next=21;break}return t.abrupt("continue",27);case 21:u={configLayer:a,records:l},c=n._config.getLayerSourceName(a),h=n._config.getLayerID(a),f=n._config.getLayerQueryID(a),p=[c,h,f].join("@@"),i[p]=n._organizeQueryData(u);case 27:++o,t.next=7;break;case 30:0===Object.keys(i).length?d.default.Control.Notification.getInstance().showError(d.default.Local.Control.toolButton.informationButton.notification.queryRecordEmpty()):n._openQueryDialog(i);case 31:case"end":return t.stop()}},t,this)})),function(t){return c.apply(this,arguments)}),_openQueryDialog:function(t){o.default.getInstance().open(t)},_getQueryData:(u=s(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,r=[],t.prev=2,d.default.Control.Waiting.show(d.default.Control.Manager.getInstance()._getMap()),t.next=6,n._queryData(e);case 6:r=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),d.default.Control.Waiting.close();case 12:return t.prev=12,d.default.Control.Waiting.close(),t.finish(12);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},t,this,[[2,9,12,15]])})),function(t){return u.apply(this,arguments)}),_organizeQueryData:function(t){for(var e=t.configLayer,n=t.records,r=e.fields.split(","),i=[],o=this._config.getLayerLabel(e),a=e._flicker_color,s=this._config.getLayerShowName(e),l=this._config.getLayerFieldsAlias(e).split(","),u=0;u<n.length;++u){var c=n[u],h={},f=c.properties;h.geometry=c.geometry;for(var p=0;p<r.length;++p){var d=r[p];f.hasOwnProperty(d)&&(h[d]=f[d])}i.push(h)}return{label:o,showName:s,records:i,fields:r,titles:l,flickerColor:a}},_queryData:(l=s(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.default.Query.InfoQuery.getInstance(),t.next=3,n.queryAsync(e);case 3:return t.abrupt("return",n.data());case 4:case"end":return t.stop()}},t,this)})),function(t){return l.apply(this,arguments)}),_getGeometry:function(){var t=this._bounds,e=t.getNorthEast(),n=t.getSouthEast(),r=t.getSouthWest(),i=t.getNorthWest();return{type:"PolyGon",coordinates:[[[e.lng,e.lat],[n.lng,n.lat],[r.lng,r.lat],[i.lng,i.lat],[e.lng,e.lat]]]}},_getOriginSourceName:function(t){var e=this._getSourceByName(t);return d.default.Map.MapConfig.getInstance().getOriginSourceName(e)},_getSourceByName:function(t,e){return d.default.Map.MapConfig.getInstance().getSourceByName(t,e)},_getQueryUrl:function(t){var e=this._getSourceByName(t,!0);return d.default.Map.MapConfig.getInstance().getSourceUrl(e)},_getQueryOptions:function(t,e){if(null===t)return null;var n=this._config,r=n.getLayerFields(t),i=n.getLayerQueryID(t),o=n.getLayerRequestCount(t);return{fields:r+=",#length#,#area#",layerId:i,geometry:JSON.stringify(e),url:this._getQueryUrl(t._src_name),reqcount:o}}});n.default=h},{"../../kq":1075,"../RubberBand":1016,"./InfoQueryDialog":1049,"./ModeToolButton":1051}],1051:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("./ToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{mode:"mode"},initialize:function(t,e){return o.default.prototype.initialize.call(this,t,e),this},bindEvent:function(){},removeEvent:function(){}});n.default=a},{"./ToolButton":1060}],1052:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(t("./ModeToolButton")),i=a(t("./NetworkAnalysisMenu")),o=a(t("../NetworkAnalysisDialog"));function a(t){return t&&t.__esModule?t:{default:t}}var s=r.default.extend({options:{type:"network-analysis",icon:"icon iconfont icon-my-path"},initialize:function(t,e,n){return this.options.tips=KQ.Local.Control.NetworkAnalysisDialog.networkAnalysis(),this.options=L.extend({},this.options,n),r.default.prototype.initialize.call(this,t,e),this},bindEvent:function(){o.default.getInstance().isOpen()||(o.default.getInstance().open(),i.default.getInstance().enterNetworkAnalysisMode(this._map)),i.default.getInstance().createContextMenu(this._map),this._map.dragging.disable(),$(".leaflet-container").css("cursor","crosshair"),$(".leaflet-pane.leaflet-overlay-pane").on("mouseover",function(){$(".leaflet-overlay-pane .leaflet-zoom-animated").css("cursor","crosshair")})},removeEvent:function(){i.default.getInstance().resetToDefaultContextMenu(),this._map&&this._map.dragging.enable(),$(".leaflet-container").css("cursor",""),$(".leaflet-pane.leaflet-overlay-pane").on("mouseover",function(){$(".leaflet-overlay-pane .leaflet-zoom-animated").css("cursor","")})}});n.default=s},{"../NetworkAnalysisDialog":999,"./ModeToolButton":1051,"./NetworkAnalysisMenu":1053}],1053:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=i(t("../../kq")),s=i(t("../../common/CommonValues"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;t._startPointLayers=[],t._endPointLayers=[],t._wayPointLayers=[],t._impassePointLayers=[],t._impasseAreaLayers=[],t._startPointLayerGroup=null,t._endPointLayerGroup=null,t._wayPointLayerGroup=null,t._impassePointLayerGroup=null,t._impasseAreaLayerGroup=null,t._networkAnalysisTypes=null,t._wayPointSeq=1,t._impassePointSeq=1,t._local=a.default.Local.Control.NetworkAnalysisMenu}return r(e,[{key:"enterNetworkAnalysisMode",value:function(t){var n=this;n._map=t,n._initLayerGroups(),n._networkAnalysisTypes=s.default.networkAnalysisTypes.optimal_path,n._wayPointSeq=1,n._impassePointSeq=1,$("#"+s.default.mapContainerID).bind("network-analysis_type_changed",function(t,e){n._clearLayersByType(),n._networkAnalysisTypes=Number(e),n._addMenuItems(),n._updateLayersByType(),0!==n._startPointLayers.length&&(n._startPointLayers[0].options.contextmenuItems=n._getStartPointContextMenuItems(n._startPointLayers[0]))});var e=a.default.Control.Manager.getInstance().getMapView();e&&(e.on("draw:created",n._addImpasseArea,n),e.setDrawingOptions({polygon:{shapeOptions:{color:"#ff3366",FillColor:"#ff3366"}}}))}},{key:"exitNetworkAnalysisMode",value:function(){this._clearData(),this._clearLayers(),this._resetToDefaultContextMenu(),this._networkAnalysisTypes=null;var t=a.default.Control.Manager.getInstance().getMapView();if(t){t.off("draw:created",this._addImpasseArea,this);var e=a.default.Map.MapConfig.getInstance(),n=e.getDrawOption().drawDefaultColor?e.getDrawOption().drawDefaultColor:"#3388ff";t.setDrawingOptions({polygon:{shapeOptions:{color:n,FillColor:n}}})}}},{key:"resetToDefaultContextMenu",value:function(){this._resetToDefaultContextMenu(),this._map&&this._map.off("contextmenu",this._addMenuItems,this)}},{key:"createContextMenu",value:function(t){t.on("contextmenu",this._addMenuItems,this),t.fire("contextmenu")}},{key:"_startingPointMenu",value:function(){var o=this;return{text:o._local.asStartingPoint(),iconCls:"iconfont icon-main-map",disabled:!o._isLayerGroupEmpty(o._startPointLayerGroup),callback:function(t){var e={icon:"fa-number",markerColor:"green",shape:"square",prefix:"fa",number:o._local.startPointMark()},n=t.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:e}),i=[o._removeMarkerMenu(o._removeMarkerFromStartPoint,r)];o._networkAnalysisTypes===s.default.networkAnalysisTypes.optimal_path&&i.push(o._setStartPointToEndPointMenu()),r.bindContextMenu({contextmenuItems:i,contextmenuInheritItems:!1}),o._startPointLayers.push(r),o._startPointLayerGroup.addLayer(r)}}}},{key:"_endingPointMenu",value:function(){var o=this;return{text:o._local.asEndingPoint(),iconCls:"iconfont icon-main-map",disabled:!o._isLayerGroupEmpty(o._endPointLayerGroup),callback:function(t){var e={icon:"fa-number",markerColor:"blue",shape:"square",prefix:"fa",number:o._local.endPointMark()},n=t.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:e}),i=[o._removeMarkerMenu(o._removeMarkerFromEndPoint,r)];o._networkAnalysisTypes===s.default.networkAnalysisTypes.optimal_path&&i.push(o._setEndPointToStartPointMenu()),r.bindContextMenu({contextmenuItems:i,contextmenuInheritItems:!1}),o._endPointLayers.push(r),o._endPointLayerGroup.addLayer(r)}}}},{key:"_wayPointMenu",value:function(){var i=this;return{text:i._local.asMiddlePoint(),iconCls:"iconfont icon-main-map",callback:function(t){var e={icon:"fa-number",markerColor:"blue",shape:"square",prefix:"fa",number:i._local.middlePointMark()+i._wayPointSeq++},n=t.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:e});r.bindContextMenu({contextmenuItems:i._getWayPointContextMenuItems(r),contextmenuInheritItems:!1}),i._wayPointLayers.push(r),i._wayPointLayerGroup.addLayer(r)}}}},{key:"_impassePointMenu",value:function(){var o=this;return{text:o._local.asStickingPoint(),iconCls:"iconfont icon-main-map",callback:function(t){var e={icon:"fa-number",markerColor:"red",shape:"square",prefix:"fa",number:o._local.stickingPointMark()+o._impassePointSeq++},n=t.latlng,r=new a.default.Map.MapMarker([n.lat,n.lng],{extraIcon:e}),i=[o._removeMarkerMenu(o._removeMarkerFromImpassePoint,r)];r.bindContextMenu({contextmenuItems:i,contextmenuInheritItems:!1}),o._impassePointLayers.push(r),o._impassePointLayerGroup.addLayer(r)}}}},{key:"_impasseAreaMenu",value:function(){return{text:this._local.drawStickingPolygon(),iconCls:"iconfont icon-main-map",callback:function(){a.default.Control.Manager.getInstance().getMapView().callApi("draw-polygon"),a.default.Control.Manager.getInstance().getControl("toolbar").toggleMode("network-analysis")}}}},{key:"_addImpasseArea",value:function(t){this._impasseAreaLayers.push(t.layer),this._impasseAreaLayerGroup.addLayer(t.layer),t.layer.on("contextmenu",function(){})}},{key:"_setStartPointToEndPointMenu",value:function(){var e=this;return{text:e._local.asEndingPoint(),iconCls:"iconfont icon-main-map",callback:function(t){e._swapStartPointEndPoint()}}}},{key:"_setEndPointToStartPointMenu",value:function(){var e=this;return{text:e._local.asStartingPoint(),iconCls:"iconfont icon-main-map",disabled:e._isLayerGroupEmpty(e._startPointLayerGroup),callback:function(t){e._swapStartPointEndPoint()}}}},{key:"_setWayPointToStartPointMenu",value:function(e){var n=this;return{text:n._local.asStartingPoint(),iconCls:"iconfont icon-main-map",callback:function(t){n._setWayPointToStartPoint(e)}}}},{key:"_setWayPointToStartPoint",value:function(t){var e=this;e._wayPointLayerGroup.hasLayer(t)&&e._wayPointLayerGroup.removeLayer(t);for(var n=0;n<e._wayPointLayers.length;++n)if(e._wayPointLayers[n]===t){if(e._wayPointLayers.splice(n,1),0!=e._startPointLayers.length){var r=e._startPointLayers[0];e._markerText(r,e._markerText(t)),e._markerColor(r,"blue"),r.options.contextmenuItems=e._getWayPointContextMenuItems(r),e._wayPointLayers.splice(n,0,r)}break}e._markerText(t,e._local.startPointMark()),e._markerColor(t,"green"),t.options.contextmenuItems=e._getStartPointContextMenuItems(t),e._startPointLayers=[t],e._updateStartPointLayers(),e._updateWayPointLayers()}},{key:"_updateLayers",value:function(t,e){t.clearLayers();for(var n=0;n<e.length;++n)t.addLayer(e[n])}},{key:"_updateStartPointLayers",value:function(){this._updateLayers(this._startPointLayerGroup,this._startPointLayers)}},{key:"_updateEndPointLayers",value:function(){this._updateLayers(this._endPointLayerGroup,this._endPointLayers)}},{key:"_updateWayPointLayers",value:function(){this._updateLayers(this._wayPointLayerGroup,this._wayPointLayers)}},{key:"_updateImpassePointLayers",value:function(){this._updateLayers(this._impassePointLayerGroup,this._impassePointLayers)}},{key:"_updateImpasseAreaLayers",value:function(){this._updateLayers(this._impasseAreaLayerGroup,this._impasseAreaLayers)}},{key:"_updateLayersByType",value:function(){var t=this;switch(t._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:t._updateStartPointLayers(),t._updateEndPointLayers(),t._updateWayPointLayers(),t._updateImpassePointLayers(),t._updateImpasseAreaLayers();break;case s.default.networkAnalysisTypes.traveling_salesman_problem:t._updateStartPointLayers(),t._updateWayPointLayers(),t._updateImpassePointLayers(),t._updateImpasseAreaLayers();break;case s.default.networkAnalysisTypes.trace_back:t._updateStartPointLayers(),t._updateImpassePointLayers(),t._updateImpasseAreaLayers()}}},{key:"_markerText",value:function(t,e){return e&&(t.options.icon.options.number=e),t.options.icon.options.number}},{key:"_markerColor",value:function(t,e){return e&&(t.options.icon.options.markerColor=e),t.options.icon.options.markerColor}},{key:"_getStartPointContextMenuItems",value:function(t){var e=[],n=this._removeMarkerMenu(this._removeMarkerFromStartPoint,t);if(e.push(n),this._networkAnalysisTypes===s.default.networkAnalysisTypes.optimal_path){var r=this._setEndPointToStartPointMenu();e.push(r)}return e}},{key:"_getWayPointContextMenuItems",value:function(t){var e=[],n=this._removeMarkerMenu(this._removeMarkerFromWayPoint,t);if(e.push(n),this._networkAnalysisTypes===s.default.networkAnalysisTypes.traveling_salesman_problem){var r=this._setWayPointToStartPointMenu(t);e.push(r)}return e}},{key:"_swapStartPointEndPoint",value:function(){var t=this;if(0!=t._startPointLayers.length&&0!=t._endPointLayers.length){var e=this._startPointLayers[0]._latlng;t._startPointLayers[0]._latlng=t._endPointLayers[0]._latlng,t._endPointLayers[0]._latlng=e,t._startPointLayerGroup.clearLayers(),t._endPointLayerGroup.clearLayers(),t._startPointLayerGroup.addLayer(t._startPointLayers[0]),t._endPointLayerGroup.addLayer(t._endPointLayers[0])}}},{key:"_removeMarkerFromStartPoint",value:function(t){this._removeMarker(this._startPointLayerGroup,this._startPointLayers,t)}},{key:"_removeMarkerFromEndPoint",value:function(t){this._removeMarker(this._endPointLayerGroup,this._endPointLayers,t)}},{key:"_removeMarkerFromWayPoint",value:function(t){this._removeMarker(this._wayPointLayerGroup,this._wayPointLayers,t)}},{key:"_removeMarkerFromImpassePoint",value:function(t){this._removeMarker(this._impassePointLayerGroup,this._impassePointLayers,t)}},{key:"_removeMarkerMenu",value:function(e,n){var r=this;return{text:r._local.remove(),iconCls:"iconfont icon-main-map",callback:function(t){e.call(r,n)}}}},{key:"_removeAllPointLayerMenu",value:function(){var e=this;return{text:e._local.removeAllPoints(),iconCls:"iconfont icon-main-map",callback:function(t){e._clearPointData(),e._clearPointLayers()}}}},{key:"_removeAllPolygonLayerMenu",value:function(){var e=this;return{text:e._local.removeAllPolygon(),iconCls:"iconfont icon-main-map",callback:function(t){e._clearPolygonData(),e._clearPolygonLayers()}}}},{key:"_removeMarker",value:function(t,e,n){t.hasLayer(n)&&t.removeLayer(n);for(var r=0;r<e.length;++r)e[r]===n&&e.splice(r,1)}},{key:"_addMenuItems",value:function(){var t=this;if(null!==t._networkAnalysisTypes){var e=t._map.contextmenu;switch(e.removeAllItems(),t._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:e.addItem(t._startingPointMenu()),e.addItem(t._endingPointMenu()),e.addItem(t._wayPointMenu()),e.addItem("-"),e.addItem(t._impassePointMenu()),e.addItem(t._impasseAreaMenu()),e.addItem("-"),e.addItem(t._removeAllPointLayerMenu()),e.addItem(t._removeAllPolygonLayerMenu());break;case s.default.networkAnalysisTypes.traveling_salesman_problem:e.addItem(t._startingPointMenu()),e.addItem(t._wayPointMenu()),e.addItem("-"),e.addItem(t._impassePointMenu()),e.addItem(t._impasseAreaMenu()),e.addItem("-"),e.addItem(t._removeAllPointLayerMenu()),e.addItem(t._removeAllPolygonLayerMenu());break;case s.default.networkAnalysisTypes.trace_back:e.addItem(t._startingPointMenu()),e.addItem("-"),e.addItem(t._impassePointMenu()),e.addItem(t._impasseAreaMenu()),e.addItem("-"),e.addItem(t._removeAllPointLayerMenu()),e.addItem(t._removeAllPolygonLayerMenu())}}}},{key:"_resetToDefaultContextMenu",value:function(){if(this._map){var t=this._map.contextmenu;t.hide(),t.removeAllItems()}}},{key:"_clearPointData",value:function(){this._startPointLayers=[],this._endPointLayers=[],this._wayPointLayers=[],this._impassePointLayers=[]}},{key:"_clearPolygonData",value:function(){for(var t=a.default.Control.Manager.getInstance().getControl("draw")._drawnItems,e=0;e<this._impasseAreaLayers.length;++e){var n=this._impasseAreaLayers[e];t.hasLayer(this._impasseAreaLayers[e])&&t.removeLayer(n)}this._impasseAreaLayers=[]}},{key:"_clearPointLayers",value:function(){this._startPointLayerGroup&&(this._startPointLayerGroup.clearLayers(),this._endPointLayerGroup.clearLayers(),this._wayPointLayerGroup.clearLayers(),this._impassePointLayerGroup.clearLayers())}},{key:"_clearPolygonLayers",value:function(){this._impasseAreaLayerGroup&&this._impasseAreaLayerGroup.clearLayers()}},{key:"_clearData",value:function(){this._clearPointData(),this._clearPolygonData()}},{key:"_clearLayers",value:function(){this._clearPointLayers(),this._clearPolygonLayers()}},{key:"_clearDataByType",value:function(){var t=this;switch(t._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:t._startPointLayers=[],t._endPointLayers=[],t._wayPointLayers=[],t._impassePointLayers=[],t._impasseAreaLayers=[];break;case s.default.networkAnalysisTypes.traveling_salesman_problem:t._startPointLayers=[],t._wayPointLayers=[],t._impassePointLayers=[],t._impasseAreaLayers=[];break;case s.default.networkAnalysisTypes.trace_back:t._startPointLayers=[],t._impassePointLayers=[],t._impasseAreaLayers=[]}}},{key:"_clearLayersByType",value:function(){var t=this;switch(t._networkAnalysisTypes){case s.default.networkAnalysisTypes.optimal_path:t._startPointLayerGroup.clearLayers(),t._endPointLayerGroup.clearLayers(),t._wayPointLayerGroup.clearLayers(),t._impassePointLayerGroup.clearLayers(),t._impasseAreaLayerGroup.clearLayers();break;case s.default.networkAnalysisTypes.traveling_salesman_problem:t._startPointLayerGroup.clearLayers(),t._wayPointLayerGroup.clearLayers(),t._impassePointLayerGroup.clearLayers(),t._impasseAreaLayerGroup.clearLayers();break;case s.default.networkAnalysisTypes.trace_back:t._startPointLayerGroup.clearLayers(),t._impassePointLayerGroup.clearLayers(),t._impasseAreaLayerGroup.clearLayers()}}},{key:"_initLayerGroups",value:function(){var t=this;t._startPointLayerGroup=t._initLayerGroup(t._startPointLayerGroup,"start_point_group"),t._endPointLayerGroup=t._initLayerGroup(t._endPointLayerGroup,"end_point_group"),t._wayPointLayerGroup=t._initLayerGroup(t._wayPointLayerGroup,"way_point_group"),t._impassePointLayerGroup=t._initLayerGroup(t._impassePointLayerGroup,"impasse_point_group"),t._impasseAreaLayerGroup=t._initLayerGroup(t._impasseAreaLayerGroup,"impasse_area_group")}},{key:"_initLayerGroup",value:function(t,e){return t||((t=L.layerGroup([])).desc=e,this._map?this._map.addLayer(t):console.log("map is null can't loading map!")),t}},{key:"_isLayerGroupEmpty",value:function(t){return 0==t.getLayers().length}},{key:"getData",value:function(){return{startPoint:this._getData(this._startPointLayers),endPoint:this._getData(this._endPointLayers),wayPoint:this._getData(this._wayPointLayers),impassePoint:this._getData(this._impassePointLayers),impasseArea:this._impasseAreaLayers}}},{key:"_getData",value:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t[n]._latlng);return e}},{key:"getStartPointLayer",value:function(){return this._startPointLayerGroup&&!this._isLayerGroupEmpty(this._startPointLayerGroup)?this._startPointLayerGroup.getLayers()[0]:null}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=o},{"../../common/CommonValues":952,"../../kq":1075}],1054:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("./ToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{mode:"operator"},initialize:function(t,e){return o.default.prototype.initialize.call(this,t,e),this},executeOperator:function(){}});n.default=a},{"./ToolButton":1060}],1055:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("./ToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{mode:"operator"},initialize:function(t,e){return o.default.prototype.initialize.call(this,t,e),this},executeOperator:function(){}});n.default=a},{"./ToolButton":1060}],1056:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=r(t("./ModeToolButton")),s=(r(t("../RasterImageAlgebraDialog")),r(t("../RasterImageFunctionDialog")),r(t("../RasterImageLogicDialog")),r(t("../RasterImageConditionDialog")),r(t("../RasterImageAnalysisMenu")));function r(t){return t&&t.__esModule?t:{default:t}}var i,o,l=a.default.extend({options:{type:"raster-image-analysis",icon:"icon iconfont icon-main-map"},initialize:(i=regeneratorRuntime.mark(function t(e,n,r){var i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(i=this).options.tips=KQ.Local.Control.RasterImageAnalysisDialog.RasterImageAnalysis(),i.options=L.extend({},i.options,r),a.default.prototype.initialize.call(i,e,n),o=new s.default.getInstance,t.next=7,o.initAsync();case 7:return t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}),o=function(){var s=i.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t,e,n){return o.apply(this,arguments)}),bindEvent:function(){$("#kq-raster-image-analysis-menu").toggle("fast")},removeEvent:function(){$("#kq-raster-image-analysis-menu").hide()}});n.default=l},{"../RasterImageAlgebraDialog":1010,"../RasterImageAnalysisMenu":1012,"../RasterImageConditionDialog":1013,"../RasterImageFunctionDialog":1014,"../RasterImageLogicDialog":1015,"./ModeToolButton":1051}],1057:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("./ModeToolButton"),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.extend({options:{type:"roaming",icon:"icon iconfont icon-hand"},initialize:function(t,e,n){return this.options.tips=KQ.Local.Control.toolButton.roamingButton.tips(),this.options=L.extend(this.options,n),o.default.prototype.initialize.call(this,t,e),this}});n.default=a},{"./ModeToolButton":1051}],1058:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(t("../../kq")),i=a(t("./ModeToolButton")),o=a(t("../RubberBand"));function a(t){return t&&t.__esModule?t:{default:t}}var s=i.default.extend({options:{type:"rubber-band",icon:"icon iconfont icon-region",rubberBandFunction:function(){console.log("this is a rubber band default function")}},initialize:function(t,e,n){return this.options.tips=r.default.Local.Control.toolButton.rubberBandButton.tips(),this.options=L.extend(this.options,n),i.default.prototype.initialize.call(this,t,e),this._bounds=null,this._boxZoom=new o.default(t),this},bindEvent:function(){var t=this;t._boxZoom.addHooks(),t._boxZoom.addHooks(),L.Browser.mobile?t._map.on("touchstart",t._handleMouseDown,t):t._map.on("mousedown",t._handleMouseDown,t),t._map.on("boundend",t.options.rubberBandFunction,t)},removeEvent:function(){var t=this;L.Browser.mobile?t._map.off("touchstart",t._handleMouseDown,t):t._map.off("mousedown",t._handleMouseDown,t),t._map.off("boundend",t.options.rubberBandFunction,t),t._map.dragging.enable(),t._boxZoom.removeHooks()},_handleMouseDown:function(t){this._boxZoom.onMouseDown(t)}});n.default=s},{"../../kq":1075,"../RubberBand":1016,"./ModeToolButton":1051}],1059:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});r(t("../../kq"));var i=r(t("./ZoomInButton")),o=r(t("./ZoomOutButton")),a=r(t("./RoamingButton")),s=r(t("./BackwardButton")),l=r(t("./ForwardButton")),u=r(t("./GlobeButton")),c=r(t("./DrawButton")),h=r(t("./InformationButton")),f=r(t("./RubberBandButton")),p=r(t("./CustomInformationButton")),d=r(t("./FreeDrawButton")),g=r(t("./CustomButton")),m=r(t("./NetworkAnalysisButton")),y=r(t("./RasterImageAnalysisButton"));function r(t){return t&&t.__esModule?t:{default:t}}var _=t("leaflet"),v=_.Control.extend({onAdd:function(t){return this._map=t,this._modeButtons={},this._operatorButtons={},this._container=null,this._init(),this._container},_init:function(){this._container=_.DomUtil.create("div","leaflet-bar tool-bar"),this._container.setAttribute("id","kq-toolbar"),this._initToolButtons(),this._toggleToDefaultMode()},_initToolButtons:function(){for(var t=this.options.subControls,e=0;e<t.length;++e){var n=t[e],r=this._createToolButton(n.type,n.options);this.addButton(r)}},addButton:function(t){t&&("operator"===t.getMode()?(this._operatorButtons[t.getType()]=t).handleClickEvent(this._operatorToggle,this):(this._modeButtons[t.getType()]=t).handleClickEvent(this._modeToggle,this))},_modeToggle:function(t){t&&(this._clearEvent(),t.bindEvent(),$(t.getContainer()).addClass("currentMode").siblings().removeClass("currentMode"))},_operatorToggle:function(t){t.executeOperator()},_clearEvent:function(){for(var t in this._modeButtons)this._modeButtons[t].removeEvent()},_createToolButton:function(t,e){var n=this._map,r=this._container;return"zoom_in"===t?new i.default(n,r,e):"zoom_out"===t?new o.default(n,r,e):"roaming"===t?new a.default(n,r,e):"forward-map"===t?new s.default(n,r,e):"backward-map"===t?new l.default(n,r,e):"full-map"===t?new u.default(n,r,e):"drawing"===t?new c.default(n,r,e):"free-draw"===t?new d.default(n,r,e):"info-query"===t?new h.default(n,r,e):"custom_info-query"===t?new p.default(n,r,e):"rubber-band"===t?new f.default(n,r,e):"network-analysis"===t?new m.default(n,r,e):"raster-image-analysis"===t?new y.default(n,r,e):"custom"===t?new g.default(n,r,e):null},_unselect:function(){var t=this._map.dragging.enabled();this._toggleToDefaultMode(),t?this._map.dragging.enable():this._map.dragging.disable()},_toggleToDefaultMode:function(){this._modeToggle(this._modeButtons.roaming)},toggleMode:function(t){this._modeToggle(this._modeButtons[t])},getContainer:function(t){var e=this._modeButtons[t]||this._operatorButtons[t];return e?e.getContainer():this._container}});n.default=v},{"../../kq":1075,"./BackwardButton":1039,"./CustomButton":1042,"./CustomInformationButton":1043,"./DrawButton":1044,"./ForwardButton":1045,"./FreeDrawButton":1046,"./GlobeButton":1047,"./InformationButton":1050,"./NetworkAnalysisButton":1052,"./RasterImageAnalysisButton":1056,"./RoamingButton":1057,"./RubberBandButton":1058,"./ZoomInButton":1061,"./ZoomOutButton":1062,leaflet:560}],1060:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("leaflet"),i=r.Class.extend({options:{type:"",icon:"",tips:"",mode:""},initialize:function(t,e){this._map=t,this._parent=e,this._container=this._initContainer()},getContainer:function(){return this._container},getMode:function(){return this.options.mode},getType:function(){return this.options.type},handleClickEvent:function(t,e){var n=this;r.DomEvent.on(n._container,"mousedown dblclick touchstart",r.DomEvent.stopPropagation).on(n._container,"click",r.DomEvent.stop).on(n._container,"click",function(){KQ.Control.Manager.getInstance()._unselectAllControlsExcept("toolbar"),t.call(e,n)})},_initContainer:function(){var t=r.DomUtil.create("a",this.options.icon,this._parent);return t.href="#",t.title=this.options.tips,t.style.float="left",t.id="kq-"+this.options.type,t}});n.default=i},{leaflet:560}],1061:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./ModeToolButton")),i=o(t("./BoxZoom"));function o(t){return t&&t.__esModule?t:{default:t}}var a=r.default.extend({options:{type:"zoom_in",icon:"icon iconfont icon-zoom-in"},initialize:function(t,e,n){return this.options.tips=KQ.Local.Control.toolButton.zoomInButton.tips(),this.options=L.extend(this.options,n),r.default.prototype.initialize.call(this,t,e),this._boxzoom=new i.default(t),this},bindEvent:function(){this._map.dragging.disable(),this._boxzoom.addHooks(),L.Browser.mobile?this._map.on("touchstart",this._handleMouseDown,this):this._map.on("mousedown",this._handleMouseDown,this)},removeEvent:function(){L.Browser.mobile?this._map.off("touchstart",this._handleMouseDown,this):this._map.off("mousedown",this._handleMouseDown,this),this._map.dragging.enable(),this._boxzoom.removeHooks()},_handleMouseDown:function(t){2!==t.originalEvent.button&&this._boxzoom._onMouseDown.call(this._boxzoom,{clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY,which:1,shiftKey:!0})}});n.default=a},{"./BoxZoom":1040,"./ModeToolButton":1051}],1062:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./BoxZoomOut")),i=o(t("./ModeToolButton"));function o(t){return t&&t.__esModule?t:{default:t}}var a=i.default.extend({options:{type:"zoom_out",icon:"icon iconfont icon-zoom-out"},initialize:function(t,e,n){return this._boxZoom=new r.default(t),this.options.tips=KQ.Local.Control.toolButton.zoomOutButton.tips(),this.options=L.extend(this.options,n),i.default.prototype.initialize.call(this,t,e),this},bindEvent:function(){this._map.dragging.disable(),this._boxZoom.addHooks(),L.Browser.mobile?this._map.on("touchstart",this._handleMouseDown,this):this._map.on("mousedown",this._handleMouseDown,this)},removeEvent:function(){L.Browser.mobile?this._map.off("touchstart",this._handleMouseDown,this):this._map.off("mousedown",this._handleMouseDown,this),this._map.dragging.enable(),this._boxZoom.removeHooks()},_handleMouseDown:function(t){2!==t.originalEvent.button&&this._boxZoom._onMouseDown.call(this._boxZoom,{clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY,which:1,shiftKey:!0})}});n.default=a},{"./BoxZoomOut":1041,"./ModeToolButton":1051}],1063:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./DataCommon")),i=o(t("./DataManager"));function o(t){return t&&t.__esModule?t:{default:t}}var a={DataCommon:r.default,DataManager:i.default};n.default=a},{"./DataCommon":1064,"./DataManager":1065}],1064:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq");(r=o)&&r.__esModule;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"hello",value:function(){console.log("hello DataCommon!")}}]),t}();n.default=a},{"../kq":1075}],1065:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=i(t("../kq"));i(t("../map/MapConfig"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.file_list=[{type:"STATIC_DATA",url:"http://127.0.0.1:8080/point.geojson",name:"point"},{type:"STATIC_DATA",url:"http://127.0.0.1:8080/line.geojson",name:"line"},{type:"STATIC_DATA",url:"http://127.0.0.1:8080/ne_110m_admin_1_states_provinces_shp.geojson",name:"ne_110m_admin_1_states_provinces_shp"}]}var e,n;return r(t,[{key:"getWebFileDataSourceInfos",value:function(){return this.file_list}},{key:"addWebFileDataSourceInfo",value:function(t){this.file_list.push(t)}},{key:"getDBFileDataSourceInfos",value:function(){for(var t={type:"DB_DATA",url:"172.16.0.5",port:"8699",dbname:"172.16.0.5/orcl",username:"KQorcl",password:"KQorcl"},e=[{featureclassname:"JQLXDW",name:"JQLXDW"},{featureclassname:"JQXZDW",name:"JQXZDW"},{featureclassname:"JQDLTB",name:"JQDLTB"}],n=[],r=0;r<e.length;r++)n.push(L.Util.extend({},t,e[r]));return n}},{key:"getDataSourceInfos",value:function(){return this.getDBFileDataSourceInfos().concat(this.getWebFileDataSourceInfos())}},{key:"getData",value:(e=regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("getData:"+JSON.stringify(e)),r=n=null,"DB_DATA"!==e.type){t.next=28;break}return i=new a.default.ServiceTool.ServiceToolCatalog(e),t.next=7,i.getFeature(e);case 7:if("error"!==(r=t.sent)){t.next=12;break}return t.abrupt("return",null);case 12:if(t.prev=12,"success"!==(o=JSON.parse(r)).resultcode){t.next=18;break}return t.abrupt("return",o.result);case 18:return console.log("getData return error:"+o.message),t.abrupt("return",null);case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(12),console.log("parse data failed! data:"+r),t.abrupt("return",null);case 26:t.next=47;break;case 28:if("STATIC_DATA"!==e.type){t.next=46;break}return t.next=31,a.default.Common.NetworkTools.httpGetAsync(e.url);case 31:if("error"!==(r=t.sent)){t.next=36;break}return t.abrupt("return",null);case 36:t.prev=36,n=JSON.parse(r),t.next=44;break;case 40:return t.prev=40,t.t1=t.catch(36),console.log("parse data failed! data:"+r),t.abrupt("return",null);case 44:t.next=47;break;case 46:return t.abrupt("return",null);case 47:return t.abrupt("return",n);case 48:case"end":return t.stop()}},t,this,[[12,22],[36,40]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return n.apply(this,arguments)})}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=o},{"../kq":1075,"../map/MapConfig":1089}],1066:[function(t,e,n){"use strict";L.Control.MapInput=L.Control.extend({defaultOptions:{position:"topleft",iconType:"search",inputWidth:150,isHasDropdown:!0,dropdownWidth:100,dropdownMargin:6,onClick:function(t){L.DomEvent.stop(t),console.log(JSON.stringify(t)),console.log("onclick!!!"),console.log(this.value())}},initialize:function(t){this._options=L.extend({},this.defaultOptions,t),this.setPosition(this._options.position)},onAdd:function(t){var e=this._options.inputWidth;return this._options.isHasDropdown&&(e+=this._options.dropdownWidth+this._options.dropdownMargin),this._parent=L.DomUtil.create("span","kq-mapinput-container"),this._parent.setAttribute("style","width: "+e+"px"),this._options.isHasDropdown&&(this._dropdown=L.DomUtil.create("input","",this._parent),this._dropdown.setAttribute("id","kq-input-dropdownlist"),this._dropdown.setAttribute("style","width: "+this._options.dropdownWidth+"px; margin-right:"+this._options.dropdownMargin+"px")),this._span=L.DomUtil.create("span","kq-mapinput k-textbox k-space-right",this._parent),this._span.setAttribute("style","width: "+this._options.inputWidth+"px"),this._input=L.DomUtil.create("input","k-textbox k-space-right kq-noradius",this._span),this._input.setAttribute("type","text"),this._a=L.DomUtil.create("a","k-icon k-i-"+this._options.iconType+" kq-color",this._span),L.DomEvent.addListener(this._span,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this._a,"click",this._options.onClick,this),this._parent},onRemove:function(t){},addTo:function(t){var e=this;L.Control.prototype.addTo.call(e,t),this._options.isHasDropdown&&KQ.Common.CommonTools.loadUiLib(function(){e._dropdownControl=new KQ.ui.DropdownList("kq-input-dropdownlist",{})})},value:function(){return this._input.value},dropdownValue:function(){return this._dropdownControl?this._dropdownControl.value():null},setOnClick:function(t){L.DomEvent.removeListener(this._a,"click",this._options.onClick,this),this._options.onClick=t,L.DomEvent.addListener(this._a,"click",this._options.onClick,this)},setDropdownData:function(t){this._dropdownControl&&this._dropdownControl.setDataSource(t)}}),L.control.mapinput=function(t){return new L.Control.MapInput(t)}},{}],1067:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ALL=n.NONE=n.EDIT_APPEND=n.APPEND=n.DELETE=n.EDIT=n.CREATE=n.freeDraw=n.edgesKey=n.notifyDeferredKey=n.modesKey=n.instanceKey=n.defaultOptions=n.polygons=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),c=t("./helpers/Flags");Object.defineProperty(n,"CREATE",{enumerable:!0,get:function(){return c.CREATE}}),Object.defineProperty(n,"EDIT",{enumerable:!0,get:function(){return c.EDIT}}),Object.defineProperty(n,"DELETE",{enumerable:!0,get:function(){return c.DELETE}}),Object.defineProperty(n,"APPEND",{enumerable:!0,get:function(){return c.APPEND}}),Object.defineProperty(n,"EDIT_APPEND",{enumerable:!0,get:function(){return c.EDIT_APPEND}}),Object.defineProperty(n,"NONE",{enumerable:!0,get:function(){return c.NONE}}),Object.defineProperty(n,"ALL",{enumerable:!0,get:function(){return c.ALL}});var h=t("leaflet"),o=t("d3-selection"),l=t("d3-shape"),f=g(t("es6-set")),a=g(t("es6-weak-map")),s=g(t("es6-symbol")),p=t("./helpers/Layer"),d=t("./helpers/Polygon"),u=g(t("./helpers/Simplify"));function g(t){return t&&t.__esModule?t:{default:t}}var m=n.polygons=new a.default,y=n.defaultOptions={mode:c.ALL,smoothFactor:.3,elbowDistance:10,simplifyFactor:1.1,mergePolygons:!0,concavePolygon:!0,maximumPolygons:1/0,notifyAfterEditExit:!1,leaveModeAfterCreate:!1,strokeWidth:2},_=n.instanceKey=(0,s.default)("freedraw/instance"),v=n.modesKey=(0,s.default)("freedraw/modes"),b=n.notifyDeferredKey=(0,s.default)("freedraw/notify-deferred"),x=(n.edgesKey=(0,s.default)("freedraw/edges"),(0,s.default)("freedraw/cancel")),w=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.options=r({},y,t),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,h.FeatureGroup),i(n,[{key:"onAdd",value:function(t){(this.map=t)[x]=function(){},t[_]=this,t[b]=function(){},t.simplifyPolygon=u.default,m.set(t,new f.default),(0,c.modeFor)(t,this.options.mode,this.options);var e=this.svg=(0,o.select)(t._container).append("svg").classed("free-draw",!0).attr("width","100%").attr("height","100%").style("pointer-events","none").style("z-index","1001").style("position","relative");this.listenForEvents(t,e,this.options)}},{key:"onRemove",value:function(t){m.delete(t),this.svg.remove(),delete t[x],delete t[_],delete t.simplifyPolygon}},{key:"create",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{concavePolygon:!1},n=(0,d.createFor)(this.map,t,r({},this.options,e));return(0,p.updateFor)(this.map,"create"),n}},{key:"remove",value:function(t){t?(0,d.removeFor)(this.map,t):function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"remove",this).call(this),(0,p.updateFor)(this.map,"remove")}},{key:"clear",value:function(){(0,d.clearFor)(this.map),(0,p.updateFor)(this.map,"clear")}},{key:"mode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return"number"==typeof t&&(0,c.modeFor)(this.map,t,this.options),this.map[v]}},{key:"size",value:function(){return m.get(this.map).size}},{key:"all",value:function(){return Array.from(m.get(this.map))}},{key:"cancel",value:function(){this.map[x]()}},{key:"listenForEvents",value:function(a,s,l){var u=this;a.on("mousedown touchstart",function(t){if(a[v]&c.CREATE){var r=new f.default,i=u.createPath(a,s,a.latLngToContainerPoint(t.latlng),l.strokeWidth);i.next();var o=function(t){var e=a.mouseEventToContainerPoint(t.originalEvent);r.add(a.containerPointToLatLng(e)),i.next(new h.Point(e.x,e.y))};a.on("mousemove touchmove",o);var e=function t(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];a[x]=function(){},a.off("mouseup",t),a.off("mousemove",o),"body"in document&&document.body.removeEventListener("mouseleave",t),s.selectAll("*").remove(),i.return(),n&&(r.size&&(0,d.createFor)(a,Array.from(r),l),(0,p.updateFor)(a,"create"),l.leaveModeAfterCreate&&u.mode(u.mode()^c.CREATE))};a.on("mouseup touchend",e),"body"in document&&document.body.addEventListener("mouseleave",e),a[x]=function(){return e({},!1)}}})}},{key:"createPath",value:regeneratorRuntime.mark(function t(e,n,r,i){var o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,l.line)().curve(l.curveMonotoneX).x(function(t){return t.x}).y(function(t){return t.y}),t.next=3,r;case 3:return a=t.sent,s=[r,a],n.append("path").classed("leaflet-line",!0).attr("d",o(s)).attr("fill","none").attr("stroke","black").attr("stroke-width",i),t.delegateYield(this.createPath(e,n,a,i),"t0",7);case 7:case"end":return t.stop()}},t,this)})}]),n}();n.default=w;n.freeDraw=function(t){return new w(t)};"undefined"!=typeof window&&((window.FreeDraw=w).CREATE=c.CREATE,w.EDIT=c.EDIT,w.DELETE=c.DELETE,w.APPEND=c.APPEND,w.EDIT_APPEND=c.EDIT_APPEND,w.NONE=c.NONE,w.ALL=c.ALL)},{"./helpers/Flags":1070,"./helpers/Layer":1071,"./helpers/Polygon":1073,"./helpers/Simplify":1074,"d3-selection":418,"d3-shape":419,"es6-set":472,"es6-symbol":477,"es6-weak-map":482,leaflet:560}],1068:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("concavehull"),o=(r=i)&&r.__esModule?r:{default:r};n.default=function(t,e){return new o.default([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e),[e[0]])).getLatLngs()}},{concavehull:91}],1069:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,a,s){var l=(t=a,t.getLatLngs()[0].map(function(t){return o.latLngToLayerPoint(t)})).map(function(t){var e=o[c.modesKey],n=new u.DivIcon({className:("leaflet-edge "+(e&f.EDIT?"":"disabled")).trim()}),r=o.layerPointToLatLng(t),i=new u.Marker(r,{icon:n}).addTo(o);return u.DomEvent.disableClickPropagation(i),i.on("mousedown",function e(){if(o[c.modesKey]&f.EDIT){o.dragging.disable();var n=function(t){var e=o.latLngToContainerPoint(t.latlng),n=o.containerPointToLatLng(e);i.setLatLng(n);var r=l.map(function(t){return t.getLatLng()});a.setLatLngs(r),a.redraw()};o.on("mousemove",n),o.on("mouseup",r),i.on("mouseup",r)}else o.off("mousedown",e);function r(){o[c.modesKey]&f.CREATE||o.dragging.enable(),o.off("mouseup",r),o.off("mousedown",e),o.off("mousemove",n),(0,p.fillPolygon)(o,a,s);var t=function(){return(0,d.default)(o,Array.from(c.polygons.get(o)),s)};s.mergePolygons&&t()&&t(),s.notifyAfterEditExit?o[c.notifyDeferredKey]=function(){return(0,h.updateFor)(o,"edit")}:(0,h.updateFor)(o,"edit")}}),i});var t;return l};var r,u=t("leaflet"),c=t("../FreeDraw"),h=t("./Layer"),f=t("./Flags"),p=t("./Merge"),d=(r=p)&&r.__esModule?r:{default:r}},{"../FreeDraw":1067,"./Flags":1070,"./Layer":1071,"./Merge":1072,leaflet:560}],1070:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.modeFor=n.ALL=n.EDIT_APPEND=n.APPEND=n.DELETE=n.EDIT=n.CREATE=n.NONE=void 0;var r=t("leaflet"),i=t("../FreeDraw"),o=t("./Layer"),a=(n.NONE=0,n.CREATE=1),s=n.EDIT=2,l=n.DELETE=4,u=n.APPEND=8;n.EDIT_APPEND=s|u,n.ALL=a|s|l|u,n.modeFor=function(t,e,n){return t[i.modesKey]=e,t[i.instanceKey].fire("mode",{mode:e}),e&a?t.dragging.disable():t.dragging.enable(),Array.from(i.polygons.get(t)).forEach(function(t){t[i.edgesKey].forEach(function(t){e&s?r.DomUtil.removeClass(t._icon,"disabled"):r.DomUtil.addClass(t._icon,"disabled")})}),(0,o.classesFor)(t,e),n.notifyAfterEditExit&&t[i.notifyDeferredKey](),t[i.notifyDeferredKey]=function(){},e}},{"../FreeDraw":1067,"./Layer":1071,leaflet:560}],1071:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.classesFor=n.updateFor=void 0;var a=t("leaflet"),r=t("../FreeDraw"),s=t("./Flags");function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.updateFor=function(t,e){var n=Array.from(r.polygons.get(t)).map(function(t){var e=t.getLatLngs();return[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e[0]),[e[0][0]])});t[r.instanceKey].fire("markers",{latLngs:n,eventType:e})},n.classesFor=function(r,i){var t,o=(l(t={},s.NONE,"mode-none"),l(t,s.CREATE,"mode-create"),l(t,s.EDIT,"mode-edit"),l(t,s.DELETE,"mode-delete"),l(t,s.APPEND,"mode-append"),t);Object.keys(o).forEach(function(t){var e=o[t],n=i&t;a.DomUtil.removeClass(r._container,e),n&&a.DomUtil.addClass(r._container,e),0===i&&a.DomUtil.addClass(r._container,o[s.NONE])})}},{"../FreeDraw":1067,"./Flags":1070,leaflet:560}],1072:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.fillPolygon=function(e,t,n){var r=(0,d.latLngsToClipperPoints)(e,t.getLatLngs()[0]);a.Clipper.SimplifyPolygon(r,a.PolyFillType.pftNonZero),(0,s.removeFor)(e,t);var i=r.map(function(t){return e.layerPointToLatLng(new o.Point(t.X,t.Y))});(0,s.createFor)(e,i,n,!0)};var o=t("leaflet"),f=t("ramda"),a=t("clipper-lib"),r=i(t("turf-polygon")),p=i(t("turf-intersect")),s=t("./Polygon"),d=t("./Simplify");function i(t){return t&&t.__esModule?t:{default:t}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function y(t){return t.map(function(t){return[t.lat,t.lng]})}n.default=function(l,u,n){var c=(0,f.compose)(r.default,function(t){return[t]},function(t){return[].concat(m(t),[(0,f.head)(t)])},y),t=u.reduce(function(t,e){var n,r=e.getLatLngs()[0],i=(0,d.latLngsToClipperPoints)(l,e.getLatLngs()[0]),o=c(r),a=u.filter((0,f.complement)((0,f.identical)(e))).some(function(t){return Boolean((0,p.default)(o,c(t.getLatLngs()[0])))}),s=a?"intersecting":"rest";return h({},t,(g(n={},s,[].concat(m(t[s]),[a?i:r])),g(n,"intersectingPolygons",a?[].concat(m(t.intersectingPolygons),[e]):t.intersectingPolygons),n))},{intersecting:[],rest:[],intersectingPolygons:[]}),e=a.Clipper.SimplifyPolygons(t.intersecting,a.PolyFillType.pftNonZero);return t.intersectingPolygons.forEach(function(t){return(0,s.removeFor)(l,t)}),(0,f.flatten)(e.map(function(t){var e=t.map(function(t){return l.layerPointToLatLng(new o.Point(t.X,t.Y))});return(0,s.createFor)(l,e,n,!0)}))}},{"./Polygon":1073,"./Simplify":1074,"clipper-lib":90,leaflet:560,ramda:665,"turf-intersect":919,"turf-polygon":920}],1073:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clearFor=n.removeFor=n.createFor=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=t("leaflet"),y=t("../FreeDraw"),_=t("./Layer"),v=r(t("./Edges")),b=t("./Flags"),u=r(t("./Polygon")),c=r(t("./Concave")),h=r(t("./Merge"));function r(t){return t&&t.__esModule?t:{default:t}}function x(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n.createFor=function(n,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:y.defaultOptions,e=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=y.polygons.get(n).size===r.maximumPolygons,o=!e&&r.concavePolygon?(0,c.default)(n,t):t,a=i?[]:n.simplifyPolygon(n,o,r).map(function(t){var e=new m.Polygon(t,l({},y.defaultOptions,r,{className:"leaflet-polygon"})).addTo(n);return e[y.edgesKey]=(0,v.default)(n,e,r),m.DomEvent.disableClickPropagation(e),e.off("click"),e.on("click",(0,u.default)(n,e,r)),e});if(a.forEach(function(t){return y.polygons.get(n).add(t)}),!i&&!e&&1<y.polygons.get(n).size&&r.mergePolygons){var s=(0,h.default)(n,Array.from(y.polygons.get(n)),r);return s.forEach(function(t){return y.polygons.get(n).add(t)}),s}return a};var w=n.removeFor=function(e,t){e.removeLayer(t),y.edgesKey in t&&t[y.edgesKey].map(function(t){return e.removeLayer(t)}),y.polygons.get(e).delete(t)};n.clearFor=function(e){Array.from(y.polygons.get(e).values()).forEach(function(t){return w(e,t)})};n.default=function(p,d,g){return function(t){var u=p.mouseEventToContainerPoint("originalEvent"in t?t.originalEvent:t),c=d.getLatLngs()[0].map(function(t){return p.latLngToContainerPoint(t)}),e=c.reduce(function(t,e,n){var r=e,i=c[n+1]||c[0],o=m.LineUtil.pointToSegmentDistance(u,r,i);return o<t.lowestDistance?{lowestDistance:o,startPoint:r,endPoint:i}:t},{lowestDistance:1/0,startPoint:new m.Point,endPoint:new m.Point}),h=e.startPoint,f=e.endPoint,n=e.lowestDistance,r=p[y.modesKey],i=Boolean(r&b.DELETE),o=Boolean(r&b.APPEND),a=function(){return w(p,d)},s=function(){return i=p,t=d,e=g,o=(n={parts:c,newPoint:u,startPoint:h,endPoint:f}).parts,a=n.newPoint,s=n.startPoint,l=n.endPoint,r=o.reduce(function(t,e,n){var r=o[n+1]||o[0];return[].concat(x(t),e===s&&r===l?[i.containerPointToLatLng(e),i.containerPointToLatLng(a)]:[i.containerPointToLatLng(e)])},[]),t.setLatLngs(r),t[y.edgesKey].map(function(t){return i.removeLayer(t)}),void(t[y.edgesKey]=(0,v.default)(i,t,e));var i,t,e,n,o,a,s,l,r};switch(!0){case Boolean(r&b.DELETE&&r&b.APPEND):n>g.elbowDistance?a():s();break;case i:a();break;case o:s()}(i||o)&&(0,_.updateFor)(p,i?"remove":"append")}}},{"../FreeDraw":1067,"./Concave":1068,"./Edges":1069,"./Flags":1070,"./Layer":1071,"./Merge":1072,"./Polygon":1073,leaflet:560}],1074:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.latLngsToClipperPoints=void 0;var a=t("leaflet"),s=t("clipper-lib"),l=n.latLngsToClipperPoints=function(n,t){return t.map(function(t){var e=n.latLngToLayerPoint(t);return{X:e.x,Y:e.y}})};n.default=function(t,e,n){var r,i=s.Clipper.CleanPolygon(l(t,e),n.simplifyFactor),o=s.Clipper.SimplifyPolygon(i,s.PolyFillType.pftNonZero);return r=t,o.map(function(t){return t.map(function(t){var e=new a.Point(t.X,t.Y);return r.layerPointToLatLng(e)})})}},{"clipper-lib":90,leaflet:560}],1075:[function(_,t,v){(function(t){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};_("babel-polyfill");var e=g(_("./map/Map")),n=g(_("./control/Control")),r=g(_("./common/Common")),i=g(_("./projection/Projection")),o=g(_("./struct/Struct")),a=g(_("./layer/Layer")),s=g(_("./local/Local")),u=g(_("./query/Query")),c=g(_("./ui/ui")),h=g(_("./vector/Vector")),f=g(_("./builder/Builder")),p=g(_("./data/Data")),d=g(_("./servicetool/ServiceTool"));function g(t){return t&&t.__esModule?t:{default:t}}t.mixin=function(n){var t=Array.prototype.slice.call(arguments,1),e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n),e}(),r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;for(var u in l)e.prototype[u]=l[u]}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return e},t.localforage=_("../node_modules/localforage"),_("../node_modules/leaflet"),_("../node_modules/jquery.fancytree/dist/jquery.fancytree.min"),_("../node_modules/leaflet-i18n/Leaflet.i18n"),_("../node_modules/leaflet-contextmenu/dist/leaflet.contextmenu.min"),_("../node_modules/leaflet-ant-path/dist/leaflet-ant-path"),t.domtoimage=_("../node_modules/dom-to-image/dist/dom-to-image.min"),t.uuid=_("../node_modules/uuid/v4"),t.X2JS=_("../libs/other/x2js/xml2json"),_("../libs/leaflet.wms"),_("../libs/leaflet-tilelayer-wmts-src"),_("../libs/leaflet.sync"),_("../libs/Leaflet.Marker.SlideTo"),_("../libs/controls/sidebyside/leaflet-sidebyside"),_("../libs/jquery.ui-contextmenu.min"),_("../libs/jquery.ui.ipad"),_("../libs/other/SimpleAjaxUploader"),_("../libs/leaflet.ChineseTmsProviders"),_("../libs/controls/draw/leaflet.draw-custom-src"),_("../libs/controls/draw/customization"),_("../libs/controls/fullscreen/Control.fullscreen"),_("../libs/controls/attribution/leaflet-control-condended-attribution"),_("../libs/controls/control-window/L.Control.Window"),_("../libs/controls/sidebar/leaflet-sidebar_v0"),_("../libs/controls/sidebar/leaflet-sidebar"),_("../libs/controls/coordinates/Leaflet.Coordinates-0.1.5.src"),_("../libs/controls/print/jQuery.print"),_("../libs/controls/mini/Control.MiniMap"),_("../libs/controls/scale/Leaflet.GraphicScale"),_("../libs/controls/easybutton/easy-button"),_("../libs/controls/playback/LeafletPlayback"),_("../libs/controls/extramarker/leaflet.extra-markers.min"),t.html2canvas=_("../libs/html2canvas/html2canvas"),_("../libs/measure/leaflet-measure.min"),_("../libs/measure/leaflet-measureAction"),_("../libs/path-drag/L.Path.Drag-src"),_("../libs/controls/zoomslider/L.Control.Zoomslider"),_("../libs/leaflet.control.custom"),_("../libs/markercluster/leaflet.markercluster.js"),_("../libs/controls/rangeslider/rangeslider.js"),_("../libs/L.Polyline.SnakeAnim"),t.md5=_("../libs/other/md5"),t.turf=_("../libs/turf/turf.min"),t.chroma=_("../libs/chroma/chroma.min"),_("../libs/L.LabelTextCollision");var m=_("../libs/leaflet.canvas-markers-src");window.L.CanvasIconLayer=m(L),window.rbush=_("rbush"),_("../libs/eviltransform/transform"),_("../libs/controls/areaselect/leaflet-areaselect"),_("../libs/mapbox-gl/leaflet-mapbox-gl"),_("../libs/leaflet-event-forwarder"),_("../libs/responsive-popup/leaflet.responsive.popup"),_("./builder/ui/SaveToolBar.js");var y={Map:e.default,Control:n.default,Common:r.default,Projection:i.default,Struct:o.default,Layer:a.default,Local:s.default,Query:u.default,ui:c.default,Vector:h.default,Builder:f.default,Data:p.default,ServiceTool:d.default};t.KQ=y,L.Browser.touch_origin=L.Browser.touch,L.Browser.touch=L.Browser.mobile,L.Map.prototype.__proto__.getScaleZoom_old=L.Map.prototype.__proto__.getScaleZoom,L.Map.prototype.__proto__.getScaleZoom=function(t,e){console.log("my getScaleZoom!!!!!");var n=L.Map.prototype.__proto__.getScaleZoom_old(t,e);if(n===1/0){var r=this.getMinZoom(),i=this.getMaxZoom();return Math.max(r,i)}return n},Promise.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},t.insertAfter=function(t,e){var n=e.parentNode;n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling)},t.__DEV__=!1,t.CLOSURE_NO_DEPS=!0,JSON.stringifyOnce=function(i,o,t){var a=[],s=[];return JSON.stringify(i,function(t,n){if(2e3<a.length)return"object too long";var r=!1;if(a.forEach(function(t,e){t===n&&(r=e)}),""==t)return a.push(i),s.push("root"),n;if(r+""!="false"&&"object"==(void 0===n?"undefined":l(n)))return"root"==s[r]?"(pointer to root)":"(see "+(n&&n.constructor?n.constructor.name.toLowerCase():void 0===n?"undefined":l(n))+" with key "+s[r]+")";var e=t||"(empty key)";return a.push(n),s.push(e),o?o(t,n):n},t)},v.default=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../libs/L.LabelTextCollision":1,"../libs/L.Polyline.SnakeAnim":2,"../libs/Leaflet.Marker.SlideTo":4,"../libs/chroma/chroma.min":5,"../libs/controls/areaselect/leaflet-areaselect":6,"../libs/controls/attribution/leaflet-control-condended-attribution":7,"../libs/controls/control-window/L.Control.Window":8,"../libs/controls/coordinates/Leaflet.Coordinates-0.1.5.src":9,"../libs/controls/draw/customization":10,"../libs/controls/draw/leaflet.draw-custom-src":11,"../libs/controls/easybutton/easy-button":13,"../libs/controls/extramarker/leaflet.extra-markers.min":14,"../libs/controls/fullscreen/Control.fullscreen":15,"../libs/controls/mini/Control.MiniMap":16,"../libs/controls/playback/LeafletPlayback":17,"../libs/controls/print/jQuery.print":18,"../libs/controls/rangeslider/rangeslider.js":19,"../libs/controls/scale/Leaflet.GraphicScale":20,"../libs/controls/sidebar/leaflet-sidebar":21,"../libs/controls/sidebar/leaflet-sidebar_v0":22,"../libs/controls/sidebyside/leaflet-sidebyside":24,"../libs/controls/zoomslider/L.Control.Zoomslider":27,"../libs/eviltransform/transform":28,"../libs/html2canvas/html2canvas":31,"../libs/jquery.ui-contextmenu.min":32,"../libs/jquery.ui.ipad":33,"../libs/leaflet-event-forwarder":36,"../libs/leaflet-tilelayer-wmts-src":37,"../libs/leaflet.ChineseTmsProviders":38,"../libs/leaflet.canvas-markers-src":39,"../libs/leaflet.control.custom":40,"../libs/leaflet.sync":41,"../libs/leaflet.wms":42,"../libs/mapbox-gl/leaflet-mapbox-gl":43,"../libs/markercluster/leaflet.markercluster.js":44,"../libs/measure/leaflet-measure.min":45,"../libs/measure/leaflet-measureAction":46,"../libs/other/SimpleAjaxUploader":47,"../libs/other/md5":48,"../libs/other/x2js/xml2json":49,"../libs/path-drag/L.Path.Drag-src":50,"../libs/responsive-popup/leaflet.responsive.popup":53,"../libs/turf/turf.min":54,"../node_modules/dom-to-image/dist/dom-to-image.min":422,"../node_modules/jquery.fancytree/dist/jquery.fancytree.min":496,"../node_modules/leaflet":560,"../node_modules/leaflet-ant-path/dist/leaflet-ant-path":557,"../node_modules/leaflet-contextmenu/dist/leaflet.contextmenu.min":558,"../node_modules/leaflet-i18n/Leaflet.i18n":559,"../node_modules/localforage":562,"../node_modules/uuid/v4":924,"./builder/Builder":925,"./builder/ui/SaveToolBar.js":949,"./common/Common":950,"./control/Control":971,"./data/Data":1063,"./layer/Layer":1077,"./local/Local":1084,"./map/Map":1086,"./projection/Projection":1108,"./query/Query":1129,"./servicetool/ServiceTool":1135,"./struct/Struct":1158,"./ui/ui":1175,"./vector/Vector":1180,"babel-polyfill":83,rbush:900}],1076:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o=t("leaflet"),i={featureStyle:{weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.8},highlightFeatureStyle:{weight:2,color:"#666",dashArray:"",fillOpacity:.8}},a=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);return this._mergeOptions(e),this._getChoropleth(t)}return r(n,[{key:"_mergeOptions",value:function(t){t.featureStyle=o.extend(i.featureStyle,t.featureStyle),t.highlightFeatureStyle=o.extend(i.highlightFeatureStyle,t.highlightFeatureStyle),this._opts=o.extend(i,t),this._opts.style=this._opts.featureStyle,this._opts.onEachFeature=this._onEachFeature.bind(this)}},{key:"_getChoropleth",value:function(t){return this._geojson=o.choropleth(t,this._opts),this._fillColors(),this._resetFeatureFillColor(),this._geojson.on({add:this.addToMap.bind(this)}),this._geojson}},{key:"_onEachFeature",value:function(t,e){e.on({mouseover:this._highlightFeature.bind(this),mouseout:this._resetHighlight.bind(this),click:this._zoomToFeature.bind(this)})}},{key:"_highlightFeature",value:function(t){o.Browser.ie||o.Browser.opera||o.Browser.edge||layer.bringToFront()}},{key:"_resetHighlight",value:function(t){this._geojson.resetStyle(t.target)}},{key:"_zoomToFeature",value:function(t){this._map.fitBounds(t.target.getBounds())}},{key:"_resetFeatureFillColor",value:function(){var n=this;n._geojson.setStyle(function(t){var e=n._opts.style;return e.fillColor=n._fillColors[t.properties[n._opts.valueProperty]],e})}},{key:"addToMap",value:function(t){this._map=t.target._map,this._createLegend()}},{key:"_createLegend",value:function(){var i=this,t=o.control({position:"bottomright"});t.onAdd=function(t){for(var e=o.DomUtil.create("div","panel panel-primary"),n='<div class="panel-body text-left" style="height:225px;overflow-y:scroll;"><table><tbody>',r=0;r<i._keys.length;++r)n+='<tr> <td class="legendItemHeader">'+i._keys[r]+'</td> <td class="legendItemValue" style="background: '+i._fillColors[i._keys[r]]+'"></td></tr>';return n+="</tbody></table></div>",$(e).append('<div class="panel-heading"><h5 class="panel-title text-center">图例</h5></div>'),$(e).append(n),e},t.addTo(i._map)}},{key:"_fillColors",value:function(){var t=this;t._fillColors={};var e=t._opts.fillColors;if(t._keys=[],"continuous"===t._opts.type)for(var n=t._opts.limits,r=t._opts.colors,i=0;i<n.length;++i)t._fillColors[n[i]]=r[i],t._keys.push(n[i]);else for(var o=0;o<e.length;++o){var a=e[o];for(var s in a)t._keys.push(s),t._fillColors[s]=a[s]}}}]),n}();n.default=a},{leaflet:560}],1077:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=l(t("./LayerTile")),i=l(t("./LayerWMS")),o=l(t("./LayerWMTS")),a=l(t("./Choropleth")),s=l(t("./LayerHeatmap"));function l(t){return t&&t.__esModule?t:{default:t}}var u={LayerTile:r.default,LayerWMS:i.default,LayerWMTS:o.default,Choropleth:a.default,LayerHeatmap:s.default};n.default=u},{"./Choropleth":1076,"./LayerHeatmap":1078,"./LayerTile":1079,"./LayerWMS":1080,"./LayerWMTS":1081}],1078:[function(r,t,a){(function(t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=r("leaflet");r("../../libs/heatmap/heatmap"),t.HeatmapOverlay=r("../../libs/heatmap/leaflet-heatmap");var o={radius:2,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count"},n=function(t){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=i.extend({},o,e);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,HeatmapOverlay),e(r,[{key:"setData",value:function(t){t.data||(t.data=t),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setData",this).call(this,t)}},{key:"addToMapView",value:function(t){t._getMap().addLayer(this)}}]),r}();a.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../libs/heatmap/heatmap":29,"../../libs/heatmap/leaflet-heatmap":30,leaflet:560}],1079:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=t("leaflet"),a=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.TileLayer),r(n,[{key:"onAdd",value:function(t){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAdd",this).call(this,t)}},{key:"getTileUrl",value:function(t){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getTileUrl",this).call(this,t)}},{key:"setParams",value:function(t,e){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setParams",this).call(this,t,e)}},{key:"toString",value:function(){return"LayerTile"}}]),n}();n.default=a},{leaflet:560}],1080:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o=t("leaflet"),a={version:"1.3.0",layers:"",styles:"default",format:"image/png",transparent:!0,CRS:"EPSG:3857"},i=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=o.extend({},a,e);this._layer=o.wms.source(t,{format:r.format,transparent:r.transparent,attribution:"KQWebMap",info_format:"text/html",serviceType:"wms",layers:[{_id:r.id}],scale_offset:0,version:r.version,mask:0}).getLayer(r.id),this._zIndex=n}return r(i,[{key:"addToMapView",value:function(t){this._layer.addTo(t._getMap()),this._map=t._getMap()}},{key:"removeFromMapView",value:function(){this._map.removeLayer(this._layer)}}]),i}();n.default=i},{leaflet:560}],1081:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var a=t("leaflet");t("../../libs/leaflet-tilelayer-wmts-src");var s={layer:"",style:"default",tilematrixSet:"default",format:"png",opacity:1},i=function(t){function o(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=a.extend({},s,e),i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,r));return i._zIndex=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a.TileLayer.WMTS),r(o,[{key:"addToMapView",value:function(t){this._mapview=t,this._setPane(t._getMap()),t._getMap().addLayer(this)}},{key:"_setPane",value:function(t){var e=this._zIndex,n="pane"+e;t.getPane(n)||(t.createPane(n),t.getPane(n).style.zIndex=e,t.getPane(n).style.pointerEvents="none"),this.options.pane=n,this.desc="layerwmts"}},{key:"onAdd",value:function(t){this._setPane(t),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onAdd",this).call(this,t)}},{key:"getOpacity",value:function(){return this.options.opacity}}]),o}();n.default=i},{"../../libs/leaflet-tilelayer-wmts-src":37,leaflet:560}],1082:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("leaflet-i18n");var r={saveToolBar:{save:function(){return L._("保存")},saveAs:function(){return L._("另存为")},transmit:function(){return L._("分享")},colouddown:function(){return L._("拉取")},menuFold:function(){return L._("折叠")}}};n.default=r},{"leaflet-i18n":559}],1083:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("leaflet-i18n");var r={fullscreen:{title:function(){return L._("全屏模式")},titleCancel:function(){return L._("退出全屏")}},thumb:{success:function(){return L._("创建缩略图成功")},error:function(){return L._("创建缩略图失败")},buttonTips:function(){return L._("创建缩略图")}},draw:{draw:{toolbar:{actions:{title:function(){return L._("取消绘制")},text:function(){return L._("取消")}},finish:{title:function(){return L._("完成绘制")},text:function(){return L._("完成")}},undo:{title:function(){return L._("删除最后一个绘制的点")},text:function(){return L._("删除最后一个点")}},buttons:{polyline:function(){return L._("绘制一条折线")},polygon:function(){return L._("绘制一个多边形")},rectangle:function(){return L._("绘制一个矩形")},circle:function(){return L._("绘制一个圆")},marker:function(){return L._("绘制一个标记")},circlemarker:function(){return L._("绘制一个圆标记")}}},handlers:{circle:{tooltip:{start:function(){return L._("点击并且拖动绘制圆")}},radius:function(){return L._("半径")}},circlemarker:{tooltip:{start:function(){return L._("点击地图放置圆形标记")}}},marker:{tooltip:{start:function(){return L._("点击地图放置标记")}}},polygon:{tooltip:{start:function(){return L._("点击开始绘制形状")},cont:function(){return L._("点击继续绘制形状")},end:function(){return L._("点击第一个点完成形状")}}},polyline:{error:function(){return L._("<strong>错误:</strong> 形状的边不能相交!")},tooltip:{start:function(){return L._("点击开始绘制线")},cont:function(){return L._("点击继续绘制线")},end:function(){return L._("点击最后一个点完成线")}}},rectangle:{tooltip:{start:function(){return L._("点击并且拖动绘制矩形")}}},simpleshape:{tooltip:{end:function(){return L._("松开鼠标完成绘制")}}}}},edit:{toolbar:{actions:{save:{title:function(){return L._("保存变化")},text:function(){return L._("保存")}},cancel:{title:function(){return L._("取消编辑, 放弃所有变化")},text:function(){return L._("取消")}},clearAll:{title:function(){return L._("清除所有图形")},text:function(){return L._("清除所有")}}},buttons:{edit:function(){return L._("编辑图形")},editDisabled:function(){return L._("没有可编辑图形")},remove:function(){return L._("清除")},removeDisabled:function(){return L._("没有可清除图形")}}},handlers:{edit:{tooltip:{text:function(){return L._("拖动结点或标记编辑图形")},subtext:function(){return L._("点击取消放弃变更")}}},remove:{tooltip:{text:function(){return L._("点击图形进行删除")}}}}},io:{usingGeoJSON:function(){return L._("正在使用GeoJSON")},usingShapefile:function(){return L._("正在使用Shapefile")},usingDwgDxf:function(){return L._("正在使用DwgDxf")},usingTxt:function(){return L._("正在使用Txt")},usingExcel:function(){return L._("正在使用Excel")},export:function(){return L._("导出")},import:function(){return L._("导入")}}},styleEditor:{buttonTitle:function(){return L._("样式编辑")},icon:function(){return L._("图标")},size:function(){return L._("尺寸")},color:function(){return L._("颜色")},lineStroke:function(){return L._("线条样式")},opacity:function(){return L._("透明度")},fillColor:function(){return L._("填充颜色")},fillOpacity:function(){return L._("填充透明度")},tooltip:function(){return L._("点击需要定制样式的要素")},tooltipNext:function(){return L._("点击另一个需要定制样式的要素")},reservedGraphics:function(){return L._("保留原图形")},buffer:{type:function(){return L._("缓冲类型")},length:function(){return L._("缓冲距离")},unit:function(){return L._("单位")},buffer:function(){return L._("缓冲")},outer:function(){return L._("外缓冲")},inner:function(){return L._("内缓冲")},left:function(){return L._("左缓冲")},right:function(){return L._("右缓冲")},both:function(){return L._("双缓冲")},msgLengthTooLong:function(){return L._("缓冲距离最大长度:")}}},toolButton:{backwardButton:{tips:function(){return L._("前一视图")}},drawButton:{tips:function(){return L._("绘图面板")}},forwardButton:{tips:function(){return L._("后一视图")}},globeButton:{tips:function(){return L._("全图浏览")}},informationButton:{tips:function(){return L._("属性查询")},notification:{layerTreeEmpty:function(){return L._("图层树控件为空！")},selectLayer:function(){return L._("请选择查询图层！")},selectQueryLayer:function(){return L._("请点击并勾选需要查询的图层！")},layerNotInConfigFile:function(){return L._("配置文件中无对应图层！")},queryRecordEmpty:function(){return L._("查询记录数为空！")}}},roamingButton:{tips:function(){return L._("地图漫游")}},freeDrawButton:{tips:function(){return L._("自由绘制")}},rubberBandButton:{tips:function(){return L._("拉框选择")}},zoomInButton:{tips:function(){return L._("拉框放大")}},zoomOutButton:{tips:function(){return L._("拉框缩小")}}},layerOpacitySettingDialog:{title:function(){return L._("透明度")}},layerTree:{menu:{stick:function(){return L._("置顶")},clearStick:function(){return L._("清除置顶")},legend:function(){return L._("图例")},opacity:function(){return L._("透明度")},zoomToLayer:function(){return L._("缩放到图层")},clearAllSelected:function(){return L._("清除所有选中项")}},notification:{layerOverLimit:function(){return L._("图层树中同时选中的图层数不能超过: ")}}},legendQuery:{legendEmpty:function(){return L._("图例查询记录数为空！")}},overlayAnalysis:{executeAnalysis:function(){return L._("执行叠置分析")},setAnalysisExtent:function(){return L._("打开绘图面板，设置分析范围")},html:{analysis:function(){return L._("分析")},extent:function(){return L._("范围")},setAnalysisLayer:function(){return L._("设置分析图层：")}},notification:{getLayerTreeFailed:function(){return L._("获取数据图层树失败！")},drawAnalysisGeometry:function(){return L._("请绘制叠置分析图形！")},analysisRecordEmpty:function(){return L._("叠置分析记录数为空！")},selectAnalysisLayer:function(){return L._("请选择叠置分析图层！")},selectInLayerTree:function(){return L._("叠置分析选中的图层也会在图层树中选中！")}}},queryResultChart:{statisticalChart:function(){return L._("统计图")},statisticalField:function(){return L._("统计字段: ")},summarylField:function(){return L._("分类字段: ")},statisticalResult:function(){return L._("统计结果: ")},pieChart:function(){return L._("饼状图")},barChart:function(){return L._("柱状图")},exportToPrint:function(){return L._("导出到打印")},notification:{limitStatisticalResult:function(){return L._("统计结果过多,无法绘制统计图！")},setCorrectField:function(){return L._("统计字段为空或者错误,请设置正确的统计字段！")}}},overlayAnalysisResultDialog:{title:function(){return L._("叠置分析结果")}},searchBarResultDialog:{title:function(){return L._("搜索结果")}},overlayAnalysisTree:{columns:{layer:function(){return L._("图层")},analysis:function(){return L._("选择")}}},infoQueryDialog:{title:function(){return L._("属性查询结果")},columns:{field:function(){return L._("字段")},value:function(){return L._("值")}}},queryResultDialog:{columns:{overlappingArea:function(){return L._("重叠面积或长度")}},notification:{statisticValueIsNull:function(){return L._("统计值为空,无法绘制统计图！")},statisticFieldError:function(){return L._("统计字段为空或者错误,请设置正确的统计字段！")}},button:{statisticalChart:function(){return L._("统计图")},statisticalAllChart:function(){return L._("统计所有")},flickerColor:function(){return L._("闪烁颜色: ")},exportExcel:function(){return L._("导出 excel")},exportChecked:function(){return L._("导出选中")}},label:{unitConversion:function(){return L._("单位换算")}}},advancedSearchResultDialog:{title:function(){return L._("高级查询结果")},button:{exportExcel:function(){return L._("导出 excel")}}},searchLightSizeDialog:{title:function(){return L._("滤镜大小")}},locationDialog:{location:function(){return L._("定位")},locationFailed:function(){return L._("定位失败！")},targetProjection:function(){return L._("目标投影")}},plot:{types:{arc:function(){return L._("弧线")},curve:function(){return L._("曲线")},polyline:function(){return L._("折线")},closedCurve:function(){return L._("闭合曲线")},freeHandLine:function(){return L._("自由线")},circle:function(){return L._("圆")},ellipse:function(){return L._("椭圆")},lune:function(){return L._("弓形")},sector:function(){return L._("扇形")},rectangle:function(){return L._("矩形")},triangle:function(){return L._("三角形")},gatheringPlace:function(){return L._("集结地")},polygon:function(){return L._("多边形")},freeHandPolygon:function(){return L._("自由面")},doubleArrow:function(){return L._("钳击")},straightArrow:function(){return L._("直箭头")},fineArrow:function(){return L._("细直箭头")},assaultDirection:function(){return L._("突击方向")},attackArrow:function(){return L._("进攻方向")},tailedAttackArrow:function(){return L._("进攻方向（燕尾）")},squadCombat:function(){return L._("分队战斗行动")},tailedSquadCombat:function(){return L._("分队战斗行动（燕尾）")}},linePlot:function(){return L._("线标")},polygonPlot:function(){return L._("面标")},arrowPlot:function(){return L._("箭头")},startTitle:function(){return L._("开始标绘")},endTitle:function(){return L._("结束标绘")},delete:function(){return L._("删除")}},advancedSearch:{searchButton:{tooltip:function(){return L._("执行高级查询")}},controlPanelButton:{tooltip:function(){return L._("打开绘图面板，设置查询范围")}},executeQuery:{optionError:function(){return L._("请选择高级查询的图层")},conditionError:function(){return L._("请填写查询条件或者绘制查询范围")},layerTreeError:function(){return L._("获取数据图层树失败！")},queryRecordError:function(){return L._("高级查询记录数为空！")}},html:{selectLayer:function(){return L._("选择图层：")},queryCondition:function(){return L._("查询条件：")},fieldLabel:function(){return L._("[字段信息]")},addToConditionInfo:function(){return L._("添加到条件信息")},valueInfo:function(){return L._("[数值信息]")},getOnlyValue:function(){return L._("获取唯一值")},conditionInfo:function(){return L._("[条件信息]")},clear:function(){return L._("清除")},query:function(){return L._("查询")},scope:function(){return L._("范围")},history:function(){return L._("历史")}}},AdvancedSearchHistoryDialog:{AdvancedSearchHistory:function(){return L._("高级查询历史")},HistoryOkButton:function(){return L._("确定")}},MapPrint:{PrintMap:function(){return L._("打印地图")},SendToPrinter:function(){return L._("发送到打印机")},SelectLayer:function(){return L._("图层选择")},SavedAsPDF:function(){return L._("保存为PDF")},SavedAsImage:function(){return L._("保存为图片")},Clear:function(){return L._("清除")},Text:function(){return L._("文本")},Mark:function(){return L._("标记")},Chart:function(){return L._("图表")},Paper:function(){return L._("纸张")},PixelsPerInch:function(){return L._("像素/英寸")},Scale:function(){return L._("比例尺")},ZoomButton:function(){return L._("缩放按钮")},Compass:function(){return L._("指北针")},Legend:function(){return L._("图例")},Title:function(){return L._("标题")},AMap:function(){return L._("一张图")},Horizontal:function(){return L._("横向")},Vertical:function(){return L._("纵向")},MicrosoftYaHei:function(){return L._("微软雅黑")},SimsunFont:function(){return L._("新宋体")},Italics:function(){return L._("楷体")},AddTextTitle:function(){return L._("添加文字")},AddHtmlTitle:function(){return L._("添加标记")},AddText:function(){return L._("添加")},DeleteText:function(){return L._("删除文字")},DeleteMark:function(){return L._("删除标记")},ClearText:function(){return L._("清空")},ImportHtml:function(){return L._("导入")},ChartExportPrintSuccess:function(){return L._("图表导出到打印成功!")},TitleBackgroundColor:function(){return L._("标题背景色")},TitleBoxShadow:function(){return L._("阴影")},TitleSetting:function(){return L._("标题设置")},DisplayTitle:function(){return L._("显示标题")},DeleteStatisticalChart:function(){return L._("删除统计图")},HideStatisticalChart:function(){return L._("隐藏统计图")}},FeatureImport:{html:{layerSelect:function(){return L._("图层选择：")},selectLayer:function(){return L._("[选择图层]")},graphicImport:function(){return L._("图形导入：")},graphicImport_:function(){return L._("图形导入")},options:function(){return L._("选项设置：")},featureOverlay:function(){return L._("[要素重叠]")},allowOverlay:function(){return L._("允许重叠")},attributeImport:function(){return L._("属性录入")}},import:{typeUnmatch:function(){return L._("加载的图形与类型不匹配!")},noGraphic:function(){return L._("请先加载图形文件!")},manualImportCoord:function(){return L._("无法读取投影坐标系统，请手动选择!")},invalidLayer:function(){return L._("请选择有效的图层!")},importLayer:function(){return L._("请导入图形！")},coordNone:function(){return L._("投影坐标不能为空！")}},dialog:{importLayer:function(){return L._("请导入图形！")},importOk:function(){return L._("-要素录入成功!")},importFail:function(){return L._("-要素录入失败!")},overlap:function(){return L._("-要素重叠!")},updateOk:function(){return L._("-要素更新成功!")},updateFail:function(){return L._("-要素更新失败!")},deleteOk:function(){return L._("-要素删除成功!")},deleteFail:function(){return L._("-要素删除失败!")},fillInt:function(){return L._("请填写整型数据！")},fillFloat:function(){return L._("请填写小数！")},fillDate:function(){return L._("请填写正确的日期格式，如1900/12/12 12:00:00")}},ContextMenu:{featureUpdateMenu:function(){return L._("要素更新")},featureDeleteMenu:function(){return L._("要素删除")},ConfirmToDelete:function(){return L._("是否确定删除此要素?")},okText:function(){return L._("确定")},cancelText:function(){return L._("取消")}}},FeatureImportDialog:{featureImportButton:function(){return L._("要素入库")},featureImportResetButton:function(){return L._("重置")},featureImport:function(){return L._("要素入库")},featureImportReset:function(){return L._("重置")},okText:function(){return L._("确定")},cancelText:function(){return L._("取消")},currentFeatureSwitch:function(){return L._("当前编辑的要素未入库，是否继续切换?")},featureImportRepeat:function(){return L._("该要素已经入库，是否重复入库?")}},FeatureUpdateDialog:{featureUpdateButton:function(){return L._("要素更新")},featureUpdateResetButton:function(){return L._("重置")},featureUpdate:function(){return L._("要素更新")},featureUpdateReset:function(){return L._("重置")}},Bookmark:{addBookmarkButton:function(){return L._("添加书签")},readFail:function(){return L._("读取书签失败!")},addOk:function(){return L._("-添加书签成功!")},addFail:function(){return L._("-添加书签失败!")},deleteOk:function(){return L._("-书签删除成功!")},deleteFail:function(){return L._("-书签删除失败!")},bookmarkNone:function(){return L._("请输入书签名称!")},bookmark:function(){return L._("书签")},deleteBookmark:function(){return L._("删除书签")},addBookmark:function(){return L._("添加书签")},html:{bookmarkName:function(){return L._("书签名称:")},submit:function(){return L._("提交")}}},NetworkAnalysisDialog:{html:{selectType:function(){return L._("选择类型：")},selectMode:function(){return L._("选择模式：")},selectLayer:function(){return L._("选择图层：")},analysis:function(){return L._("分析")},clear:function(){return L._("清除")}},networkAnalysisTypes:{optimal_path:function(){return L._("最优路线分析")},traveling_salesman_problem:function(){return L._("旅行商分析")},trace_back:function(){return L._("追溯分析")},distance_first:function(){return L._("距离优先")},time_first:function(){return L._("时间优先")},greed_method:function(){return L._("贪心法")},trace_back_method:function(){return L._("回溯法")},enumeration_method:function(){return L._("枚举法")},up:function(){return L._("向上回溯")},down:function(){return L._("向下回溯")}},other:{networkAnalysisSuccess:function(){return L._("网络分析成功！")},networkAnalysisFailed:function(){return L._("网络分析失败！")},pathLayer:function(){return L._("路径图层")},toNextInflexion:function(){return L._("到下一个拐点")},direction:function(){return L._("方向")},distance:function(){return L._("距离")},meter:function(){return L._("米")}},networkAnalysis:function(){return L._("网络分析")}},NetworkAnalysisMenu:{asStartingPoint:function(){return L._("以此为起点")},startPointMark:function(){return L._("起")},asEndingPoint:function(){return L._("以此为终点")},endPointMark:function(){return L._("终")},asMiddlePoint:function(){return L._("以此为途经点")},middlePointMark:function(){return L._("途")},asStickingPoint:function(){return L._("以此为障碍点")},stickingPointMark:function(){return L._("障")},drawStickingPolygon:function(){return L._("绘制障碍面")},remove:function(){return L._("移除")},removeAllPoints:function(){return L._("移除所有点")},removeAllPolygon:function(){return L._("移除所有面")}},RasterImageAnalysisDialog:{html:{input_1:function(){return L._("输入1")},input_2:function(){return L._("输入2")},input:function(){return L._("输入")},outputRasterData:function(){return L._("输出栅格数据")},operator:function(){return L._("运算符")},function:function(){return L._("函数")},selectCondition:function(){return L._("选择条件")},confirm:function(){return L._("确定")},close:function(){return L._("关闭")},downloadAnalysisResults:function(){return L._("下载分析结果")}},AlgebraOperation:function(){return L._("代数运算")},FunctionOperation:function(){return L._("函数运算")},LogicOperation:function(){return L._("逻辑运算")},ConditionOperation:function(){return L._("条件运算")},RasterImageAnalysis:function(){return L._("栅格分析")},AlgebraOperationSuccess:function(){return L._("代数运算成功！")},AlgebraOperationFailure:function(){return L._("代数运算失败！")},FunctionOperationSuccess:function(){return L._("函数运算成功！")},FunctionOperationFailure:function(){return L._("函数运算失败！")},LogicOperationSuccess:function(){return L._("逻辑运算成功！")},LogicOperationFailure:function(){return L._("逻辑运算失败！")},ConditionOperationSuccess:function(){return L._("条件运算成功！")},ConditionOperationFailure:function(){return L._("条件运算失败！")}},HistoryCompare:{HistoryView:function(){return L._("历史查看")}},zoom:{zoomInTitle:function(){return L._("放大")},zoomOutTitle:function(){return L._("缩小")}},compare:{button:{title:function(){return L._("图层对比")}},window:{treeTitle:function(){return L._("选择图层")},title:function(){return L._("图层对比 ( 使用鼠标右键选择图层 )")}},dialog:{title:function(){return L._("对比模式")},content:function(){return L._("<p>请选择图层对比使用的模式<p>")},actionsText2:function(){return L._("两窗口")},actionsText3:function(){return L._("三窗口")},actionsText4:function(){return L._("四窗口")},actionsText5:function(){return L._("五窗口")},actionsText6:function(){return L._("六窗口")}},contextMenu:{useMainMap:function(){return L._("使用主图")},selectLayer:function(){return L._("图层选择")},clearLayer:function(){return L._("清空图层")},copyLayer:function(){return L._("复制图层")},pasteLayer:function(){return L._("粘贴图层")},sync:function(){return L._("同步浏览")},syncCancel:function(){return L._("取消同步")}}},sidebar:{layers:function(){return L._("图层选择")},advancedSearch:function(){return L._("高级查询")},overlayAnalysis:function(){return L._("叠置分析")},featureImport:function(){return L._("要素入库")},historyCompare:function(){return L._("历史查看")},bookmark:function(){return L._("书签")},settings:function(){return L._("设置")},content:{setting:{selectTheme:function(){return L._("选择主题: ")}}}},mini:{hideText:function(){return L._("隐藏小地图")},showText:function(){return L._("显示小地图")}},drawControl:{import:{success:function(){return L._("导入文件成功！（最多导入数据条数：")},fail:function(){return L._("导入GeoJSON失败！")}},addTo:{drawError:function(){return L._("因为点数过多，不能进入编辑模式！")},needZip:function(){return L._("无法导入文件！请选择shape文件的zip压缩包！")},fail:function(){return L._("导入文件失败！")}},exportDraw:{noData:function(){return L._("没有可以导出的数据！")},success:function(){return L._("导出GeoJSON成功！")}}},playback:{label_play:function(){return L._("播放轨迹")},label_stop:function(){return L._("停止播放")},label_gpsTrack:function(){return L._("GPS轨迹")},label_latlng:function(){return L._("经纬度")}},setting:{onThemeChange:function(){return L._("已经设置新主题，刷新页面将生效！")}},waitting:{defaultText:function(){return L._("<strong>请等待……</strong>")}},realtime:{label_latlng:function(){return L._("经纬度")}},sidebyside:{title:function(){return L._("横向卷帘")},titleVertical:function(){return L._("纵向卷帘")},titleCancel:function(){return L._("关闭卷帘")},least2:function(){return L._("至少选择两个图层！")},most5:function(){return L._("最多选择五个图层！")},maskStart:function(){return L._("将屏蔽部分操作，取消卷帘可恢复！")},maskRestore:function(){return L._("已恢复屏蔽的操作！")},timeout:function(){return L._("请求超时！请确认选择合理有效的图层！")}},searchlight:{title:function(){return L._("滤镜")},titleCancel:function(){return L._("关闭滤镜")},length:function(){return L._("滤镜大小")},maskStart:function(){return L._("将屏蔽部分操作，退出功能后可恢复！")},maskRestore:function(){return L._("已恢复屏蔽的操作！")},mustSelectLayer:function(){return L._("请在图层树选中需要使用的图层")},mustCheckLayer:function(){return L._("请在图层树勾选需要使用的图层")},mustSelectLeafLayer:function(){return L._("请在图层树选中单个图层（没有子节点）")},atLeastCheckTwoLayers:function(){return L._("请在图层树勾选至少两个图层")}},screenshot:{title:function(){return L._("截图")},showui:function(){return L._("截图时显示UI")},hideui:function(){return L._("截图时隐藏UI")}},setlocation:{title:function(){return L._("中心点定位")}},measureSeparate:{titleMeasureLength:function(){return L._("测量长度")},titleMeasureArea:function(){return L._("测量面积")}},basemap:{layerTypeNode:function(){return L._("无")}}};n.default=r},{"leaflet-i18n":559}],1084:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=s(e("../kq")),i=s(e("./Control")),o=s(e("./Other")),a=s(e("./Builder"));function s(t){return t&&t.__esModule?t:{default:t}}e("../../local/en.js");var l=null,u=null,c=null,h=null,f="cn",p={setLanguage:function(t){L.setLocale(t),f=t,null===l&&null===u||(r.default.Common.CommonTools.clearFromCache(l),r.default.Common.CommonTools.clearFromCache(u)),"cn"===t&&(l=e("../../libs/kendo/js/messages/kendo.messages.zh-CN.min"),u=e("../../libs/kendo/js/cultures/kendo.culture.zh-CN.min"),kendo.culture("zh-CN")),null!==c&&r.default.Common.CommonTools.clearFromCache(c),c=e("../../libs/controls/draw/local.js"),null!==h&&r.default.Common.CommonTools.clearFromCache(h),h=e("../../libs/controls/styleeditor/local.js")},getCurrentLanguage:function(){return f},Control:i.default,Other:o.default,Builder:a.default};n.default=p},{"../../libs/controls/draw/local.js":12,"../../libs/controls/styleeditor/local.js":26,"../../libs/kendo/js/cultures/kendo.culture.zh-CN.min":34,"../../libs/kendo/js/messages/kendo.messages.zh-CN.min":35,"../../local/en.js":55,"../kq":1075,"./Builder":1082,"./Control":1083,"./Other":1085}],1085:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("leaflet-i18n");var r={exportShapeAsync:{fail:function(){return L._("导出Shapefile失败！")},success:function(){return L._("导出Shapefile成功！")}}};n.default=r},{"leaflet-i18n":559}],1086:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=C(t("./MapView")),i=C(t("./MapConfig")),o=C(t("./MapGeoJSON")),a=C(t("./MapCommon")),s=C(t("./MapLayerManager")),l=C(t("./MapMarker")),u=C(t("./MapPopup")),c=C(t("./MapTooltip")),h=C(t("./MapMask")),f=C(t("./MapRealtime")),p=C(t("./MapLayerWMTSMask")),d=C(t("./MapBuilding")),g=C(t("./MapEcharts")),m=C(t("./MapPlot")),y=C(t("./MapLabel")),_=C(t("./echart/MapChartMigrate")),v=C(t("./echart/MapChartTraffic")),b=C(t("./echart/MapChartTrajectory")),x=C(t("./echart/MapChartDistribution")),w=C(t("./echart/MapChartDistribution_leaflet")),L=C(t("./MapOtherLayersManager"));function C(t){return t&&t.__esModule?t:{default:t}}var k={MapView:r.default,MapConfig:i.default,MapGeoJSON:o.default,MapCommon:a.default,MapLayerManager:s.default,MapMarker:l.default,MapPopup:u.default,MapTooltip:c.default,MapMask:h.default,MapRealtime:f.default,MapLayerWMTSMask:p.default,MapBuilding:d.default,MapEcharts:g.default,MapPlot:m.default,MapLabel:y.default,MapChartMigrate:_.default,MapChartTraffic:v.default,MapChartTrajectory:b.default,MapChartDistribution:x.default,MapChartDistribution_leaflet:w.default,MapOtherLayersManager:L.default};n.default=k},{"./MapBuilding":1087,"./MapCommon":1088,"./MapConfig":1089,"./MapEcharts":1090,"./MapGeoJSON":1091,"./MapLabel":1092,"./MapLayerManager":1093,"./MapLayerWMTSMask":1094,"./MapMarker":1095,"./MapMask":1096,"./MapOtherLayersManager":1097,"./MapPlot":1098,"./MapPopup":1099,"./MapRealtime":1100,"./MapTooltip":1101,"./MapView":1102,"./echart/MapChartDistribution":1103,"./echart/MapChartDistribution_leaflet":1104,"./echart/MapChartMigrate":1105,"./echart/MapChartTraffic":1106,"./echart/MapChartTrajectory":1107}],1087:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("leaflet"),s=(r=o)&&r.__esModule?r:{default:r};var l={buildingHeight:30,roofHeight:0,shadows:!0},a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.building=new OSMBuildings,t&&t.onClick&&this.building.click(t.onClick)}return i(e,[{key:"addToMapView",value:function(t){this.building.addTo(t._getMap()),this.shadows||this.building.style({shadows:this.shadows})}},{key:"addData",value:function(t,e){var r=this,i=s.default.extend({},l,e);r.shadows=i.shadows,delete i.shadows;var o=!1,n=new KQ.Map.MapGeoJSON(t);if(n.eachLayer(function(t){if(!t.feature._building_id){var e=md5(JSON.stringify(t.feature));if(!r.building.includes(e)){if(o=!0,t.feature.properties||(t.feature.properties={}),s.default.extend(t.feature.properties,i),i.buildingHeightField&&t.feature.properties[i.buildingHeightField])t.feature.properties.buildingHeight=t.feature.properties[i.buildingHeightField];else if(i.buildingHeightField)for(var n=0;n<t.feature.properties.length;n++)if(t.feature.properties[n].Field===i.buildingHeightField){t.feature.properties.buildingHeight=t.feature.properties[n].Value;break}0<t.feature.properties.roofHeight&&(t.feature.properties.roofShape="pyramid"),t.feature._building_id&&""!==t.feature._building_id||(t.feature._building_id=e)}}}),o){var a=n.toGeoJSON();r.building.addData(a)}}},{key:"remove",value:function(){this.building.remove()}},{key:"clearData",value:function(){this.building.clearData()}},{key:"delData",value:function(t){this.building.delData(t)}},{key:"minZoom",value:function(t){return OSMBuildings.minZoom(t)}},{key:"getData",value:function(t){return this.building.getData(t)}},{key:"setOnClick",value:function(t){this.building.click(t)}}],[{key:"getInstance",value:function(t){return e._instance||(e._instance=new e(t)),e._instance}}]),e}();n.default=a},{leaflet:560}],1088:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),p=(r=o)&&r.__esModule?r:{default:r};var a=function(){function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l)}return i(l,null,[{key:"flickerLayer",value:function(t,e,n){var r=0;function i(){6<=r&&clearInterval(l._flickerInterval),r%2==0?t.addTo(e):t.removeFrom(e),l._flickerMap.set(e._leaflet_id,t),r++}(n=void 0===n||n)&&l.clearFlickerLayer(e),l._stopLayerFlicker(),l._flickerInterval=setInterval(i,350),i()}},{key:"fitBoundsLayer",value:function(t,e){var n=t.getBounds(),r=p.default.Map.MapConfig.getInstance(),i=n.getSouth();r.getDrawOption().isFeatureCenterFullscreen||(i=2*(n.getSouth()-n.getNorth())+n.getNorth());var o=L.latLng(n.getNorth(),n.getWest()),a=L.latLng(i,n.getEast()),s=L.latLngBounds(o,a);l.fitBound(s,e)}},{key:"fitBound",value:function(t,e){t.getSouthWest().equals(t.getNorthEast())&&(t=t.getCenter().toBounds(1e3));var n=p.default.Map.MapConfig.getInstance();Math.round(1*n.scales().length/2).toFixed();e.fitBounds(t,{})}},{key:"clearFlickerLayer",value:function(t){l._stopLayerFlicker();var e=l._flickerMap.get(t._leaflet_id);e&&(e.removeFrom(t),l._flickerMap.delete(t._leaflet_id))}},{key:"_stopLayerFlicker",value:function(){l._flickerInterval&&(clearInterval(l._flickerInterval),l._flickerInterval=null)}},{key:"resetMapPaneZIndex",value:function(t){t.getPane("basemapPane").style.zIndex=p.default.Common.CommonValues.basemapPane_zIndex,t.getPane("tilePane").style.zIndex=p.default.Common.CommonValues.tilePane_zIndex,t.getPane("overlayPane").style.zIndex=p.default.Common.CommonValues.overlayPane_zIndex,t.getPane("shadowPane").style.zIndex=p.default.Common.CommonValues.shadowPane_zIndex,t.getPane("markerPane").style.zIndex=p.default.Common.CommonValues.markerPane_zIndex,t.getPane("maskPane").style.zIndex=p.default.Common.CommonValues.maskPane_zIndex,t.getPane("tooltipPane").style.zIndex=p.default.Common.CommonValues.tooltipPane_zIndex,t.getPane("popupPane").style.zIndex=p.default.Common.CommonValues.popupPane_zIndex}},{key:"getScaleIndexByExtent",value:function(t,e,n){for(var r=t[0],i=t[1],o=t[2],a=t[3],s=p.default.Map.MapConfig.getInstance(),l=(s.getUnit(),Math.abs((o-r)/e)),u=Math.abs((a-i)/n),c=Math.max(l,u),h=s.resolutions(),f=0;f<h.length;f++)if(h[f]<c)return 0===f?0:f-1;return h.length-1}},{key:"getKeyFromSourceNameLayerId",value:function(t,e){return t+"@@"+e}},{key:"getSourceNameLayerIdFromKey",value:function(t){var e=t.split("@@");return{sourceName:e[0],layerId:e[1]}}},{key:"_totalStatisticsByField",value:function(t,e){for(var n=0,r=0;r<t.length;++r)t[r][e]&&(n+=Number(t[r][e]));return n}},{key:"_isGetPropertyMethod",value:function(t){return 0===t.length}},{key:"_getActualLayers",value:function(t,n){n||(n=!1);var r=["baselayer","imageoverlay","layerwmts"],i=[];t.getCenter();return t.eachLayer(function(t){if(t.desc&&r.includes(t.desc))if(n)i.push(t);else if("layerwmts"===t.desc)i.push(t);else if("basemapPane"===t.pane);else if("imageoverlay"===t.desc){var e=$(t.getContainer()).find("img").length;console.log("imgCount:"+e),1!==e||i.push(t)}}),i.sort(function(t,e){var n=Number(t.options.pane.substr(4)),r=Number(e.options.pane.substr(4));return n<r?-1:r<n?1:0}),i.reverse(),i}}]),l}();a._flickerInterval=null,a._flickerMap=new Map,n.default=a},{"../kq":1075}],1089:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),v=a(t("../kq")),i=a(t("leaflet")),o=a(t("../control/Draw"));function a(t){return t&&t.__esModule?t:{default:t}}function b(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._isValid=!1,t._object=null,t._origin=null,t._permission=[],t._drawoption={},t._rubberbandoption={},i.default.Map.addInitHook("addHandler","computeDist",i.default.ComputeDist),i.default.Map.addInitHook("addHandler","computeArea",i.default.ComputeArea),t}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Evented),r(e,[{key:"initAsync",value:(n=b(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,s,l,u,c,h,f,p,d,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",m=1<arguments.length&&void 0!==arguments[1]&&arguments[1],y=arguments[2];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=v.default.Common.NetworkTools,v.default.Common.CommonTools._hideLoading(),console.log("typeof xmlstring:"+(void 0===g?"undefined":_(g))),l=s=a=o=i=r=n="",!1!==this._isValid){t.next=64;break}if(t.prev=11,""==g||"string"!=typeof g){t.next=16;break}n=g,t.next=35;break;case 16:if(""==g||"object"!==(void 0===g?"undefined":_(g))||!g.configXML){t.next=26;break}n=g.configXML,r=g.infoQueryConfigXML?g.infoQueryConfigXML:"",i=g.buildingQueryConfigXML?g.buildingQueryConfigXML:"",o=g.advancedSearchConfigXML?g.advancedSearchConfigXML:"",a=g.overlayAnalysisConfigXML?g.overlayAnalysisConfigXML:"",s=g.featureImportConfigXML?g.featureImportConfigXML:"",l=g.searchBarConfigXML?g.searchBarConfigXML:"",t.next=35;break;case 26:if(!m){t.next=32;break}return t.next=29,e.loadZipFileAsync(v.default.Common.CommonValues.configFilePath+"config.zip","config.xml");case 29:n=t.sent,t.next=35;break;case 32:return t.next=34,e.httpGetAsync(v.default.Common.CommonValues.configFilePath+"config.xml");case 34:n=t.sent;case 35:if(u=new X2JS,this._object=u.xml_str2json(n),this._object){t.next=40;break}return console.log("MapConfig init failed! (xml_str2json failed)"),t.abrupt("return");case 40:return this._origin=JSON.parse(JSON.stringify(this._object)),this._isValid=!0,this._optimizeConfig(!1),t.next=45,v.default.Query.InfoQueryConfig.getInstance().initAsync(r);case 45:if(c=this._isNeedBuildingConfig(),console.log("need_building_config: "+c),!c){t.next=50;break}return t.next=50,v.default.Query.BuildingQueryConfig.getInstance().initAsync(i);case 50:return t.next=52,v.default.Query.AdvancedSearchConfig.getInstance().initAsync(o);case 52:return t.next=54,v.default.Query.OverlayAnalysisConfig.getInstance().initAsync(a);case 54:(h=v.default.Map.MapConfig.getInstance()).controls().forEach(function(){var e=b(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.getControlType(e),h.isControlHasPermission(e)){t.next=4;break}t.next=14;break;case 4:if("sidebar"!==n){t.next=11;break}if(!(r=h.getSubControl(e,"featureImport"))||!h.isControlHasPermission(r)){t.next=9;break}return t.next=9,v.default.Query.FeatureImportConfig.getInstance().initAsync(s);case 9:t.next=14;break;case 11:if("searchbar"!==n){t.next=14;break}return t.next=14,v.default.Query.SearchBarConfig.getInstance().initAsync(l);case 14:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()),v.default.Common.CommonTools._addExtraLibs(),f=this,setTimeout(function(){OSMBuildings.initMinZoom(f)},500),t.next=64;break;case 61:t.prev=61,t.t0=t.catch(11),console.log("MapConfig init failed:"+t.t0.toString());case 64:return this._updateLayerParent(this.layers()),p=v.default.Common.ThemeManager.getInstance(),t.next=68,p.loadInitTheme();case 68:d={min_scale_value:this.getBuildingMinScaleValue(),height_rate:this.getBuildingHeightRate()},v.default.Map.MapBuilding.getInstance(d),y&&y();case 71:case"end":return t.stop()}},t,this,[[11,61]])})),function(){return n.apply(this,arguments)})},{key:"_isNeedBuildingConfig",value:function(){for(var t=!1,e=this.getAllLayerList(),n=0;n<e.length;++n){var r=e[n];if("1"===this.getLayerProperty(r,"is_building")){t=!0;break}}return t}},{key:"_optimizeConfig",value:function(t){var c=this;if(!c._origin.config.tree||!c._origin.config.tree.sources)return null;c._layerMap=new Map;var e=[].concat(c._origin.config.tree.sources.source);console.debug(e),c.setSources([]);var h=0,f=[];c.layers(!0).forEach(function t(e){if(c.isLayerGroup(e)){var n=c.getLayerSubLayer(e);n.forEach(t)}else{f.push(e);var r=c.getLayerSourceName(e),i=c._getLayerMapSourceName(e),o=c.getSourceByName(r,!0),a=c.getSourceByName(i,!0),s=c.getLayerKey(e);if(c._layerMap.has(s)?e._isDuplicate=!0:c._layerMap.set(s,e),null!==o){var l=JSON.parse(JSON.stringify(o));l._oldname=l._name,l._name=h.toString(),e._src_name=l._name,h++,l._layertype=e._type,c._object.config.tree.sources.source.push(l)}if(null!==a){var u=JSON.parse(JSON.stringify(a));u._oldname=u._name,u._name=h.toString(),e._map_src_name=u._name,h++,u._layertype=e._type,c._object.config.tree.sources.source.push(u)}}});var n=1,r=5;t||(r=n=10);for(var i=null,o=0,a=0;a<f.length;a++){var s=f[a],l=c.getSourceByName(s._src_name,!1),u=c.getSourceByName(s._map_src_name,!1);l.layers=[],u&&(u.layers||(u.layers=[]),u.layers.push(s),i=u);var p=n;c.isLayerDynamic(s)&&(p=r),c.getLayerOpacity(s)<1&&(p=10),c.isLayerMini(s)?p=10:c.isLayerHistory(s)&&(p=10),c.isLayerMask(s)&&(p=10),c._isLayerSpecial(s)&&(p=10),s._isDuplicate&&(p=10),null===i?(i=l,o=p):l._type!==i._type||l._url!==i._url||l._scale_offset?i!==u&&(i=l,o=p):10<o+p?(i=l,o=p):(s._src_name=i._name,o+=p),i.layers.push(s)}c.fire("optimized")}},{key:"getInitExtent",value:function(){return this._isValid?this._object.config.map._init_extent.split(" "):[]}},{key:"getFullExtent",value:function(){return this._isValid?this._object.config.map._full_extent.split(" "):[]}},{key:"getMinScaleID",value:function(){return this._isValid?Number(this._object.config.map._min_scale_id):0}},{key:"getMapBackgroundColor",value:function(){return this._isValid?this._object.config.map._background_color:0}},{key:"getScaleOffset",value:function(){return this._isValid?Number(this._object.config.map._scale_offset||0):0}},{key:"getLanguage",value:function(){return this._isValid?this._object.config.map._language:"cn"}},{key:"treeLabel",value:function(){return this._isValid?this._object.config.tree._label:""}},{key:"isHideTreeLabel",value:function(){return this._isValid?this._object.config.tree._is_hide:""}},{key:"treeIcon",value:function(){var t=this._object.config.tree._icon;return!t||t+".png"}},{key:"layers",value:function(t){if(!(this._isValid&&this._object.config.tree&&this._object.config.tree.layers&&this._object.config.tree.layers.layer))return[];for(var e=[].concat(this._object.config.tree.layers.layer),n=[],r=0;r<e.length;r++)t?n.push(e[r]):"0"!==e[r]._is_use&&n.push(e[r]);return n}},{key:"getAllLayerList",value:function(){for(var t=[],e=this.layers(),n=0;n<e.length;++n)this.isLayerHasPermission(e[n])&&(this.isLayerGroup(e[n])?t=t.concat(this._getGroupLayerSubNode(e[n])):t.push(e[n]));return t}},{key:"_getGroupLayerSubNode",value:function(t){for(var e=[],n=this.getLayerSubLayer(t),r=0;r<n.length;++r)this.isLayerHasPermission(n[r])&&(this.isLayerGroup(n[r])?e=e.concat(this._getGroupLayerSubNode(n[r])):e.push(n[r]));return e}},{key:"legendLabelMode",value:function(){return this._isValid&&this._object.config.tree&&this._object.config.tree.legendlabel&&this._object.config.tree.legendlabel._mode?"0"===this._object.config.tree.legendlabel._mode?0:1:0}},{key:"miniLayers",value:function(){if(!(this._isValid&&this._object.config.tree&&this._object.config.tree.layers&&this._object.config.tree.layers.layer))return[];for(var t=[].concat(this._object.config.tree.layers.layer),e=[],n=0;n<t.length;n++)"1"===t[n]._is_mini&&e.push(t[n]);return e}},{key:"maskLayers",value:function(){if(!(this._isValid&&this._object.config.tree&&this._object.config.tree.layers&&this._object.config.tree.layers.layer))return[];for(var t=[].concat(this._object.config.tree.layers.layer),e=[],n=0;n<t.length;n++)"1"===t[n]._is_mask&&e.push(t[n]);return e}},{key:"sources",value:function(){return this._isValid&&this._object.config.tree&&this._object.config.tree.sources?[].concat(this._object.config.tree.sources.source):[]}},{key:"originSources",value:function(){return this._isValid&&this._origin.config.tree&&this._origin.config.tree.sources?[].concat(this._origin.config.tree.sources.source):[]}},{key:"setSources",value:function(t){this._object.config.tree.sources.source=t}},{key:"resolutions",value:function(){var t=v.default.Common.ComputeTools,e=this.scales(),n=this.getProj4(),r=1,i=void 0;return""!==n?r=t.getToMetersFromProj4(n):"degree"===this.getUnit()&&(r=1/111319.490793273),i=t.stdScalesToResolutions(e,r),i}},{key:"themeName",value:function(){return this._isValid&&this._object.config.theme&&this._object.config.theme._name?this._object.config.theme._name:v.default.Common.CommonValues.defaultTheme}},{key:"scales",value:function(){return this._isValid?[].concat(this._object.config.map.scales.scale):[]}},{key:"getScaleID",value:function(t){return Number(t._id)}},{key:"scaleIndexToID",value:function(t){if(!this._isValid)return-1;var e=this.scales(),n=Math.round(t);return e.length<=n?-1:this.getScaleID(e[n])}},{key:"scaleIDToIndex",value:function(t){if(!this._isValid)return-1;for(var e=this.scales(),n=0;n<e.length;n++)if(this.scaleIndexToID(n)===t)return n;return-1}},{key:"getScaleByIndex",value:function(t){if(!this._isValid)return-1;var e=this.scales();return e.length<=t?-1:e[t].__text}},{key:"findLayer",value:function(t,e){var n=v.default.Map.MapCommon.getKeyFromSourceNameLayerId(t,e);return this._layerMap.has(n)?this._layerMap.get(n):null}},{key:"isLayerGroup",value:function(t){return"1"===t._is_group}},{key:"getLayerLabel",value:function(t){return t._label}},{key:"getLayerTooltip",value:function(t){return t._tooltip_forefather}},{key:"getLayerOpacity",value:function(t){return t._opacity?t._opacity:1}},{key:"setLayerOpacity",value:function(t,e){t._opacity=e}},{key:"getLayerIcon",value:function(t){return this.isLayerGroup(t)?"compound_layer.png":t._icon+".png"}},{key:"getLayerID",value:function(t){return t._id}},{key:"getLayerSourceName",value:function(t){return t._src_name}},{key:"_getLayerMapSourceName",value:function(t){return t._map_src_name}},{key:"getLayerSubLayer",value:function(t){return t.layer?[].concat(t.layer):[]}},{key:"getLayerKey",value:function(t){return v.default.Map.MapCommon.getKeyFromSourceNameLayerId(t._src_name,t._id)}},{key:"getSourceName",value:function(t){return t._name}},{key:"getOriginSourceName",value:function(t){return t._oldname}},{key:"getSourceUrl",value:function(t){var e=void 0;if(t&&t._url)e=t._url;else{if(!this.sources().length)return"";e=this.sources()[0]._url}return e}},{key:"getSourceType",value:function(t){return t._type}},{key:"getSourceLayerType",value:function(t){return t._layertype}},{key:"getSourceScaleOffset",value:function(t){return Number(t._scale_offset)||0}},{key:"_getWmsVersion",value:function(t){return t._version||"1.1.1"}},{key:"getSourceLayers",value:function(t){return t.layers}},{key:"getSourceUrl_GeometryService",value:function(t){var e=void 0;if(t)e=t._url;else{if(this._object.config.geometrysource)return this._object.config.geometrysource._url;var n=this.originSources();if(!n.length)return"";e=n[0]._url}var r=e.lastIndexOf("/services/");return e=e.substring(0,r),e+="/services/geometryserver"}},{key:"getSourceUrl_ManagerService",value:function(t){var e=void 0;if(t)e=t._url;else{var n=this.originSources();if(!n.length)return"";e=n[0]._url}var r=e.lastIndexOf("/rest/");return e=e.substring(0,r),e+="/rest/Manager/services"}},{key:"getSourceUrl_IPPort",value:function(t){var e=void 0;if(t)e=t._url;else{if(!this.sources().length)return"";e=this.sources()[0]._url}var n=e.lastIndexOf("/KQGis/");return e=e.substring(0,n)}},{key:"getSourceByName",value:function(t,e){var n=[].concat(this._origin.config.tree.sources.source);e||(n=[].concat(this._object.config.tree.sources.source));for(var r=0;r<n.length;r++)if(n[r]._name===t)return n[r];return null}},{key:"_getOptimizedSourceByOriginLayerInfo",value:function(t){for(var e=[].concat(this._object.config.tree.sources.source),n=0;n<e.length;n++)if(e[n]._oldname===t.src_name)for(var r=0;r<e[n].layers.length;r++)if(e[n].layers[r]._id===t.id)return e[n];return null}},{key:"getTreeSelectMaxCount",value:function(){var t=this._origin.config.tree._select_max_count;return t||(t=v.default.Common.CommonValues.treeSelectMaxCount),Number(t)}},{key:"_minExpandLevel",value:function(){var t=Number(this._origin.config.tree._min_expand_level);return isNaN(t)?2:t}},{key:"_expandSelectedLayers",value:function(){return"0"!==this._origin.config.tree._expand_selected_layers}},{key:"isLayerDynamic",value:function(t){return!!t._is_dynamic&&"1"===t._is_dynamic}},{key:"isLayerMini",value:function(t){return!!t._is_mini&&"1"===t._is_mini}},{key:"isLayerMask",value:function(t){return!!t._is_mask&&"1"===t._is_mask}},{key:"isLayerHistory",value:function(t){return!!t._is_history&&"1"===t._is_history}},{key:"_isLayerSpecial",value:function(t){return"0"===t._id}},{key:"getLayerType",value:function(t){return t._type}},{key:"getLayerpermission",value:function(t){var e=t._permission.split(" ");return[].concat(e)}},{key:"isLayerVisible",value:function(t){return!!t._visible&&"1"===t._visible}},{key:"isLayerUse",value:function(t){return!!t._is_use&&"1"===t._is_use}},{key:"getProj4",value:function(){var t=v.default.Common.CommonValues,e=this.getConfigProj4();""===e&&(e="degree"===this.getUnit()?t.defaltProj4_EPSG4326:t.defaltProj4_EPSG3857);return e}},{key:"getPrj",value:function(t){var e=v.default.Common.CommonValues;void 0===t&&(t=!0);var n=this.getConfigPrj();""===n&&t&&(n="degree"===this.getUnit()?e.defaltPrj_EPSG4326:e.defaltPrj_EPSG3857);return n}},{key:"getConfigProj4",value:function(){return this._object.config.map.projection.proj4}},{key:"getConfigPrj",value:function(){return this._object.config.map.projection.prj}},{key:"getProjectionOrigin",value:function(){var t=this._object.config.map.projection.origin;if(t){var e=t._x,n=t._y;if(e&&n)return[Number(e),Number(n)]}var r=this.getUnit();return"meter"===r?[-20037508.3427892,20037508.3427892]:"degree"===r?[-180,90]:[0,0]}},{key:"getProjectionBounds",value:function(){var t=this._object.config.map.projection.bound;if(t){var e=t.split(" ");if(4===e.length)return[Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])]}var n=this.getUnit();return"meter"===n?[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]:"degree"===n?[-180,-90,180,90]:[]}},{key:"getUnit",value:function(){var t="meter",e=this.getConfigProj4();if(""!==e)t=v.default.Common.ComputeTools.getUnitFromProj4(e);else{var n=this.getFullExtent();if(Number(n[0])<=180&&Number(n[1])<=90&&Number(n[2])<=180&&Number(n[3])<=90)return"degree"}return t}},{key:"controls",value:function(){return this._isValid&&this._object.config.controls?[].concat(this._object.config.controls.control):[]}},{key:"isHasControl",value:function(t){for(var e=this.controls(),n=0;n<e.length;n++)if(e[n]._type===t)return!0;return!1}},{key:"getControl",value:function(t){for(var e=this.controls(),n=0;n<e.length;n++)if(e[n]._type===t)return e[n];return null}},{key:"getControlType",value:function(t){return null!==t?t._type:"kqmapping"}},{key:"getControlPosition",value:function(t){return null!==t?t._position:"topleft"}},{key:"getControlWidth",value:function(t){return null!==t?t._width:"0px"}},{key:"getControlpermission",value:function(t){var e=t._permission.split(" ");return[].concat(e)}},{key:"getSubControl",value:function(t,e){if(t&&t.subcontrol)for(var n=[].concat(t.subcontrol),r=0;r<n.length;r++)if(n[r]._type===e)return n[r];return null}},{key:"getSubControls",value:function(t){return null!==t&&t.subcontrol?[].concat(t.subcontrol):[]}},{key:"getControlHeight",value:function(t){return null!==t?t._height:"0px"}},{key:"getControlProperty",value:function(t,e){return null!==t?t["_"+e]:null}},{key:"getLayerProperty",value:function(t,e){return null!==t?t["_"+e]:null}},{key:"isGoogleScale",value:function(){return v.default.Common.CommonTools._isGoogleScale(this.scales())}},{key:"language",value:function(){return"cn"}},{key:"permission",value:function(t){if(!t)return this._permission;this._permission=t}},{key:"isControlHasPermission",value:function(t){if(t._permission){for(var e=this.getControlpermission(t),n=this._permission,r=0;r<n.length;r++)for(var i=0;i<e.length;i++)if(e[i]==n[r])return!0;return!1}return!0}},{key:"isLayerHasPermission",value:function(t){if(!t)return!0;if(t._permission){for(var e=this.getLayerpermission(t),n=this._permission,r=0;r<n.length;r++)for(var i=0;i<e.length;i++)if(e[i]==n[r])return!0;return!1}return this.isLayerHasPermission(t._parent)}},{key:"_updateLayerParent",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];n._parent=null,this.isLayerGroup(n)&&this._updateLayerGroupParent(n)}}},{key:"_updateLayerGroupParent",value:function(t){var e=t.layer;if(e)for(var n=0;n<e.length;n++){var r=e[n];r._parent=t,this.isLayerGroup(r)&&this._updateLayerGroupParent(r)}}},{key:"setDrawOption",value:function(t){this._drawoption=t}},{key:"getDrawOption",value:function(){return this._drawoption}},{key:"_resetDrawImportFileHtml",value:function(){o.default._resetImportFileHtml()}},{key:"setRubberBandOption",value:function(t){this._rubberbandoption=t}},{key:"getRubberBandOption",value:function(){return this._rubberbandoption}},{key:"_isDestProjection",value:function(){var t=this.getControl("coordinates");return!!t&&"1"===this.getControlProperty(t,"is_project")}},{key:"_getBuildingMinScaleID",value:function(){if(this._object.config.building&&this._object.config.building._min_scale_id)return this._object.config.building._min_scale_id;for(var t=this.scales(),e=0;e<t.length;e++)if(t[e]>this.getBuildingMinScaleValue())return e;return t.length}},{key:"_isShowBuilding",value:function(){var t=this._getBuildingMinScaleID();return!(this.scales()[t]<this.getBuildingMinScaleValue())}},{key:"getBuildingMinScaleValue",value:function(){return this._object.config.building&&""!==this._object.config.building&&this._object.config.building._min_scale_value?this._object.config.building._min_scale_value:5e-4}},{key:"getBuildingHeightRate",value:function(){return this._object.config.building&&""!==this._object.config.building&&this._object.config.building._height_rate?this._object.config.building._height_rate:1}},{key:"isControlsCustom",value:function(){return this._isValid&&this._object.config.controls?"1"===this._object.config.controls._custom:[]}},{key:"getUrlFromSourceName",value:function(t,e){var n=this.getSourceByName(t,e);return this.getSourceUrl(n)}},{key:"getAllNetworkAnalysisLayers",value:function(){for(var t=this.getAllLayerList(),e=[],n=0;n<t.length;++n)"1"===this.getLayerProperty(t[n],"is_network_analysis")&&e.push(t[n]);return e}},{key:"getAllRasterAnalysisLayers",value:function(){for(var t=this.getAllLayerList(),e=[],n=0;n<t.length;++n)"yx"===this.getLayerProperty(t[n],"type")&&e.push(t[n]);return e}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"createLayerConfig",value:function(t){return i.default.extend({},{_icon:"polygon",_id:"0",_is_building:"0",_is_dynamic:"1",_is_network_analysis:"0",_label:"",_layer_extent:"",_min_standard_scale:"0.0000000001000000000000000036",_opacity:"1",_parent:null,_src_name:"",_tooltip_forefather:"",_type:"sl"},t)}}]),e}();n.default=s},{"../control/Draw":974,"../kq":1075,leaflet:560}],1090:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("leaflet"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._flowEcharts=a.default.flowEcharts(t),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default.Evented),i(n,[{key:"addToMapView",value:function(t){this._map=t._getMap(),this._flowEcharts.addTo(this._map),this._map.on("resize",this._onResize,this)}},{key:"remove",value:function(){this._flowEcharts.remove(),this._map.off("resize",this._onResize,this)}},{key:"_onResize",value:function(t){console.log(t.toString()),this._flowEcharts._initEchartsContainer()}},{key:"on",value:function(t,e){this._flowEcharts._ec.on(t,e)}},{key:"off",value:function(t,e){this._flowEcharts._ec.off(t,e)}}]),n}();n.default=s},{leaflet:560}],1091:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l={isAddToDraw:!0,style:function(t){return t.properties&&t.properties.options?t.properties.options:""},pointToLayer:function(t,e){var n=void 0;if(t.properties&&t.properties.options){var r=t.properties.options;if(t.properties.isCircleMarker)n=s.default.circleMarker(e,r);else n=r.icon&&r.icon.options.iconUrl?new KQ.Map.MapMarker(e,{icon:s.default.icon(r.icon.options)}):r.extraIcon&&r.extraIcon.shape?new KQ.Map.MapMarker(e,{extraIcon:r.extraIcon}):new KQ.Map.MapMarker(e)}else n=new KQ.Map.MapMarker(e);var i=KQ.Control.Manager.getInstance().getControl("draw");return i&&t.isAddToDraw&&i._addDrawnLayer(n),n}},u=function(t){function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=s.default.extend({},l,e);return t&&t.features&&0<t.features.length&&t.features.forEach(function(t){t.isAddToDraw=n.isAddToDraw}),u._projectToWgs84(t,t.proj4),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s.default.GeoJSON),i(u,[{key:"toGeoJSON",value:function(){return o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"toGeoJSON",this).call(this)}},{key:"addToMapView",value:function(t){var e=KQ.Control.Manager.getInstance().getControl("draw");e&&this.options.isAddToDraw?e.loadFromGeoJSON(this):o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"addTo",this).call(this,t._getMap())}},{key:"remove",value:function(){var t=KQ.Control.Manager.getInstance().getControl("draw");t?t.removeGeoJSON(this):o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"remove",this).call(this)}},{key:"addData",value:function(t){o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"addData",this).call(this,t)}},{key:"setStyle",value:function(t){o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"setStyle",this).call(this,t)}},{key:"getBounds",value:function(){return o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"getBounds",this).call(this)}},{key:"bindOnClick",value:function(e){e&&this.getLayers().forEach(function(t){t.on("click",e)})}},{key:"bindEvent",value:function(e,n){n&&this.getLayers().forEach(function(t){t.on(e,n)})}}],[{key:"_projectToWgs84",value:function(t,e){if(t.features){var n=e||t.prj;if(n&&n!==KQ.Common.CommonValues.defaltPrj_EPSG4326&&n!==KQ.Common.CommonValues.defaltProj4_EPSG4326)for(var r=0;r<t.features.length;r++)u._projectToWgs84(t.features[r],n)}else if(e&&e!==KQ.Common.CommonValues.defaltPrj_EPSG4326&&e!==KQ.Common.CommonValues.defaltProj4_EPSG4326){var i=new KQ.Projection.ProjectionTransform(e,KQ.Common.CommonValues.defaltProj4_EPSG4326);if("Point"===t.geometry.type)t.geometry.coordinates=i.transformForward(t.geometry.coordinates);else if("LineString"===t.geometry.type)for(var o=0;o<t.geometry.coordinates.length;o++)t.geometry.coordinates[o]=i.transformForward(t.geometry.coordinates[o]);else for(var a=0;a<t.geometry.coordinates.length;a++)if(t.geometry.coordinates[a]instanceof Array)for(var s=0;s<t.geometry.coordinates[a].length;s++)t.geometry.coordinates[a][s]=i.transformForward(t.geometry.coordinates[a][s]);else{var l=i.transformForward(t.geometry.coordinates[a]);t.geometry.coordinates[a]=l}}}}]),u}();n.default=u},{leaflet:560}],1092:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l={className:"leaflet-marker-icon leaflet-zoom-animated leaflet-interactive marker-label-icon-parent",text:""},u=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=s.default.extend({},l,e)).className+=" "+uuid(),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,s.default.Marker),i(n,[{key:"addToMapView",value:function(t){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addTo",this).call(this,t._getMap());var e=KQ.Control.Manager.getInstance().getControl("draw");e&&e._addDrawnLayer(this)}},{key:"remove",value:function(){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"remove",this).call(this)}},{key:"_html",value:function(){}}]),n}();n.default=u},{leaflet:560}],1093:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),c=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._sources={},this._sourceMap={},this._miniLayers=[],this._miniSources={},this._maskSources={},this._wmtsLayers={},this._init()}return i(t,[{key:"cloneManagerObject",value:function(){return new t}},{key:"getMiniLayers",value:function(){return this._miniLayers}},{key:"getLayerFromKey",value:function(t){var e=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t).layerId,n=this._getMapSrcNameFromKey(t);if(n){var r=c.default.Map.MapCommon.getKeyFromSourceNameLayerId(n,e);return this._getWmtsLayerFromKey(r)}var i=this._getSourceTypeFromKey(t);return"kqmapping"===i||"wms"===i?this._getKQMappingLayerFromKey(t):"wmts"===i?this._getWmtsLayerFromKey(t):void 0}},{key:"_getSourceTypeFromKey",value:function(t){var e=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t).sourceName,n=c.default.Map.MapConfig.getInstance().getSourceByName(e,!1);return c.default.Map.MapConfig.getInstance().getSourceType(n)}},{key:"_getMapSrcNameFromKey",value:function(t){var e=this._getConfigLayerFromKey(t);return c.default.Map.MapConfig.getInstance().getLayerProperty(e,"map_src_name")}},{key:"_getConfigLayerFromKey",value:function(t){var e=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t),n=e.sourceName,r=e.layerId;if(n&&r){var i=c.default.Map.MapConfig.getInstance().getSourceByName(n,!1),o=c.default.Map.MapConfig.getInstance().getOriginSourceName(i);return c.default.Map.MapConfig.getInstance().findLayer(o,r)}}},{key:"_getKQMappingLayerFromKey",value:function(t){for(var e=null,n=this._getLayerIdFromKey(t),r=this._getActualSourceNameFromKey(t),i=this._getSourceFromName(r).layers,o=0;o<i.length;++o)if(i[o].layerId===n){e=i[o].layer;break}return e}},{key:"_getWmtsLayerFromKey",value:function(t){var e=null,n=this._getSourceNameInKey(t);return this._wmtsLayers.hasOwnProperty(n)&&(e=this._wmtsLayers[n]),e}},{key:"_getSourceNameInKey",value:function(t){var e=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t),n=e.sourceName;e.layerId;return n}},{key:"_getLayerIdFromKey",value:function(t){var e=c.default.Map.MapCommon.getSourceNameLayerIdFromKey(t);e.sourceName;return e.layerId}},{key:"_getActualSourceNameFromKey",value:function(t){return this._sourceMap[t]}},{key:"_getSourceFromName",value:function(t){return this._sources[t]}},{key:"_getCheckedIdsFromSource",value:function(t){var e={},n=c.default.Control.Manager.getInstance().getControl("tree");if(n)for(var r=n.getCheckedLayers(),i=0;i<r.length;++i){var o=r[i],a=c.default.Map.MapCommon.getKeyFromSourceNameLayerId(o.sourceName,o.layerId);this._getActualSourceNameFromKey(a)===t&&(e[o.layerId]=!0)}return e}},{key:"_getLayersSlicePos",value:function(t,e){for(var n=-1,r=0;r<t.length;++r)if(t[r].layerId===e){n=r;break}return n}},{key:"_moveLayersToNewSource",value:function(t,e,n,r){var i=[];if(0!==t.length){for(var o=this._sources[n].source,a=0;a<t.length;++a){var s=t[a].layer,l=t[a].layerId;i.unshift({layer:s,checked:!1}),t[a].layer=o.getLayer(l),r[l]&&i.unshift({layer:t[a].layer,checked:!0});var u=c.default.Map.MapCommon.getKeyFromSourceNameLayerId(e,l);this._sourceMap[u]=n}this._sources[n].layers=t,this._sources[n].source.options.layers=this._sources[e].source.options.layers}return i}},{key:"resetSourceFromKey",value:function(t){var e=[],n=this._getLayerIdFromKey(t),r=this._getSourceNameInKey(t),i=this._getActualSourceNameFromKey(t);if(i){var o=this._getSourceFromName(i).layers,a=this._getCheckedIdsFromSource(i),s=this._getLayersSlicePos(o,n);if(-1!==s)if(0===s){var l=o.splice(s+1),u=(Number(i)+1).toString();e=this._moveLayersToNewSource(l,r,u,a)}else{var c=o.splice(s,1),h=o.splice(s),f=(Number(i)+s).toString(),p=(Number(i)+s+1).toString(),d=this._moveLayersToNewSource(c,r,f,a),g=this._moveLayersToNewSource(h,r,p,a);e=[].concat(d,g)}return e}console.log("resetSourceFromKey:"+t)}},{key:"_init",value:function(){this._parseSources(),this._parseMiniSources(),this._parseMaskSources()}},{key:"_parseSources",value:function(){for(var t=this._getConfig().sources(),e=0;e<t.length;++e)this._parseSource(t[e])}},{key:"_parseKQMappingSource",value:function(t){for(var e=this,n=[],r=e._createWmsLayer(t),i=e._getConfig().getSourceName(t),o=e._getConfig().getSourceLayers(t),a=0;a<o.length;++a){var s=o[a],l=e._getConfig().getLayerID(s),u=e._getConfig().getLayerKey(s),c=r.getLayer(l),h=e._getConfig().getLayerOpacity(s);"1"!==h&&c.setOpacity(h),e._sourceMap[u]=i,n.push({layerId:l,layer:r.getLayer(l)})}e._sources[i]&&e._sources[i].layers&&(n=n.concat(e._sources[i].layers)),e._sources[i]={source:r,layers:n}}},{key:"_createWMTSLayer",value:function(t,e,n){var r=this._getConfig().getLayerProperty(e,"_style"),i=this._getConfig().getLayerProperty(e,"_layer"),o=this._getConfig().getLayerProperty(e,"_tilematrixSet"),a=this._getConfig().getLayerProperty(e,"_format"),s=this._getConfig().getLayerOpacity(e),l=c.default.Common.PaneZIndexManager.getInstance().getNextZIndex(),u=c.default.Map.MapConfig.getInstance().scales().length-1;return new c.default.Layer.LayerWMTS(t,{style:r,layer:i,tilematrixSet:o,format:a,opacity:s,maxZoom:u,scale_offset:this._getConfig().getSourceScaleOffset(n)},l)}},{key:"_parseWmtsSource",value:function(t){for(var e=this._getConfig().getSourceName(t),n=this._getConfig().getSourceUrl(t),r=this._getConfig().getSourceLayers(t),i=0;i<r.length;++i)this._wmtsLayers[e]=this._createWMTSLayer(n,r[i],t)}},{key:"_parseMiniSources",value:function(){for(var t=this,e=t._getConfig().miniLayers(),n=0;n<e.length;++n){var r=t._findSourceByLayer(e[n]),i=t._getConfig().getSourceName(r);if("kqmapping"===r._type){t._miniSources[i]||(t._miniSources[i]=t._createWmsLayer(r));var o=t._getConfig().getLayerID(e[n]),a=t._miniSources[i].getLayer(o);t._miniLayers.unshift(a)}else if("wmts"===r._type){var s=t._getConfig().getSourceUrl(r);t._miniLayers.unshift(t._createWMTSLayer(s,e[n]))}}}},{key:"_parseMaskSources",value:function(){for(var t=this,e=t._getConfig().maskLayers(),n=0;n<e.length;++n){var r=t._getConfig().getLayerSourceName(e[n]),i=t._getConfig().getLayerID(e[n]);if(t._maskSources[r]){var o=t._maskSources[r].source;t._maskSources[r].layers.push({layerId:i,layer:o.getLayer(i)})}else{t._maskSources[r]={};var a=t._getConfig().getSourceByName(r),s=t._createWmsLayer(a,!0);t._maskSources[r].source=s,t._maskSources[r].layers=[{layerId:i,layer:s.getLayer(i)}]}}}},{key:"_getMaskSources",value:function(){return this._maskSources}},{key:"_createWmsLayer",value:function(t,e){var n=this._getConfig().getSourceLayers(t),r="",i="";if(0<n.length){var o=n[0];"1"===o._is_dynamic&&(r=o._where||""),this._getConfig().getLayerProperty(o,"styles")&&(i=this._getConfig().getLayerProperty(o,"styles"))}return L.wms.source(this._getConfig().getSourceUrl(t),{styles:i,format:"image/png",transparent:"true",attribution:"KQWebMap",info_format:"text/html",serviceType:this._getConfig().getSourceType(t),layers:n,scale_offset:this._getConfig().getSourceScaleOffset(t),version:this._getConfig()._getWmsVersion(t),mask:e,where:r})}},{key:"_findSourceByLayer",value:function(t){var e=this._getConfig().getLayerSourceName(t);return this._getConfig().getSourceByName(e)}},{key:"_getMaskSource",value:function(t){return this._maskSources[this._getConfig().getLayerSourceName(t)]}},{key:"_getMaskLayer",value:function(t){return this._getMaskSource(t).getLayer(this._getConfig().getLayerID(t))}},{key:"_getConfig",value:function(){return c.default.Map.MapConfig.getInstance()}},{key:"appendLayer",value:function(t,e){var n=this._getConfig().sources();"wmts"==t.type&&(e.id="0");var r={_name:t.name,_oldname:t.name,_type:t.type,_url:t.url,layers:[{_id:e.id,_opacity:e.opacity,_src_name:t.name,_type:e.type,_layer:e.layer,_style:e.style,_tilematrixSet:e.tilematrixSet,_format:e.format}]};n.push(r),c.default.Map.MapConfig.getInstance().setSources(n),this._parseSource(r)}},{key:"_parseSource",value:function(t){var e=this._getConfig().getSourceType(t);"kqmapping"===e||"wms"===e?this._parseKQMappingSource(t):"wmts"===e&&this._parseWmtsSource(t)}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1094:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),s=i(t("leaflet")),o=i(t("../layer/LayerWMTS"));function i(t){return t&&t.__esModule?t:{default:t}}var a={maskUrl:["data:image/png;base64,","iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAC7lBMVEUAAAABAQECAgIDAwMEBAQF","BQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcY","GBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKior","KyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+","Pj4/Pz9AQEBBQUFCQkJDQ0NERERGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFS","UlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRl","ZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29xcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5","eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiKioqLi4uMjIyN","jY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+g","oKChoaGioqKkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGysrKzs7O0","tLS1tbW2tra3t7e4uLi5ubm6urq7u7u9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fI","yMjJycnKysrLy8vMzMzNzc3Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc","3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v","7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///9A5nLSAAAA","AWJLR0QAiAUdSAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98FHBEuKjDLarAAAAAdaVRY","dENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAjNJREFUOMtjYEACjExMLCzMTIwM","2AETK7eQhIyslAgvOzM2aU4xTbvAhMyspFAXPWkedCWM7GJGYVUz1+0+fGTfpvnNCdYynEwo8twq","fo1rTt978fbDh3evHl7c1hOty49kCCOPTtK8U08+fPvx4+fPnz++fXpxaXWhhRAzQr9O5uob7779","hIPvHx/sqLISgNnCrpK8+s6nHz+RwI8vT3aVGnJDPMwk5jfvBqo8SMWjDUkKrGAFnEYNJ9+hyQNV","fLo+zUUAZASTeNjaJ99+YoDvr/flKLEAFbBpVp368BML+HJzohU3UAG33Yy7X7Ep+P58XZAwEwOT","UOC65z+wKfj5/lCmLDMDk0T87rfYFXw6W6HGysAik3kYqxOAjrjcpM3GwCKbdQSXgivNOuwMTFLJ","+95ht+Lz+Wp1VgYmkdBNL7Er+HA0V56FgZHXef7Db9jkf7zaEikGjC92vaYLn7Ap+HpvliMPMKyZ","peO3vfiOxYB3x8s02ECRxWPdc+kjpiu+3FvoKwJOESwy0asefEGX//Zid74GOyTBcOoW7njyFdWM","b6+Ot9rwQ3MIE79F9a5Hn74jJ5cXx3vcxeCJklnIqnTD9TdfoEp+fH13b3ebuxQrIlkzCxgmTdt3","4/n7T1++fP7w6u6xhfk24qwo+YpbwSVn4rqDZy9fOX90y6wyXw1+tLzFyMqvZBWcUdHUXJ0b6agh","zI6ZgxlZuIRlVbW11eXFeFhxZHAmZlY2dlYWlPwPAD6nKPWk11d/AAAAAElFTkSuQmCC"].join(""),maskSize:256},l=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=s.default.extend({},a,e);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,r,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),r(i,[{key:"getMaskSize",value:function(){var t=this.options.maskSize;return t instanceof s.default.Point?t:new s.default.Point(t,t)}},{key:"setCenter",value:function(t){if(2!==arguments.length){if(this._map){var e=this._map.containerPointToLayerPoint(t);e=e.subtract(this.getMaskSize().divideBy(2)),this._image.setAttribute("x",e.x),this._image.setAttribute("y",e.y)}}else this.setCenter(s.default.point(t,arguments[1]))}},{key:"_initContainer",value:function(){if(!this._container){var t=this._map.getRenderer(this)._rootGroup,e=t.appendChild(s.default.SVG.create("defs")),n=t.appendChild(s.default.SVG.create("g")),r=e.appendChild(s.default.SVG.create("mask")),i=r.appendChild(s.default.SVG.create("image")),o=this.getMaskSize();r.setAttribute("id","leaflet-tilelayer-mask-"+s.default.stamp(this)),i.setAttribute("width",o.x),i.setAttribute("height",o.y),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.options.maskUrl),t.setAttribute("mask","url(#"+r.getAttribute("id")+")"),this._container=n,this._image=i,this.setCenter(this._map.getSize().divideBy(2))}}},{key:"_updateLevels",value:function(){var t=this._tileZoom;if(void 0!==t){for(var e in this._levels)this._levels[e].el.firstChild||e===t||(s.default.DomUtil.remove(this._levels[e].el),this._removeTilesAtZoom(e),delete this._levels[e]);var n=this._levels[t];if(!n){var r=this._map;n={el:this._container.appendChild(s.default.SVG.create("g")),origin:r.project(r.unproject(r.getPixelOrigin()),t).round(),zoom:t},this._setZoomTransform(n,r.getCenter(),r.getZoom()),this._levels[t]=n}return this._level=n}}},{key:"_addTile",value:function(t,e){var n=this._getTilePos(t),r=this.getTileSize(),i=this._tileCoordsToKey(t),o=this.getTileUrl(this._wrapCoords(t)),a=e.appendChild(s.default.SVG.create("image"));a.setAttribute("width",r.x),a.setAttribute("height",r.y),a.setAttribute("x",n.x),a.setAttribute("y",n.y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),this._tiles[i]={el:a,coords:t,current:!0},KQ.Common.NetworkTools.ajax(o,function(t,e){"error"===t&&$("g image[x="+n.x+"][y="+n.y+"]").remove()})}},{key:"addTo",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addTo",this).call(this,t);var e=this;t.on("mousemove",function(t){e.setCenter(t.containerPoint)})}}]),i}();n.default=l},{"../layer/LayerWMTS":1081,leaflet:560}],1095:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=function(t){function a(t,e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e&&e.extraIcon){if(e.extraIcon.fontSize){var n=2*Number(e.extraIcon.fontSize.replace("px","")),r=.8*n+e.extraIcon.strokeWidth;e.extraIcon.iconSize=[r,r],e.extraIcon.popupAnchor=[0,Math.round(Number(n/6))]}e.icon=L.ExtraMarkers.icon(e.extraIcon)}if(e&&e.label){e.extraIcon=void 0;var i=new KQ.Struct.Icon({iconUrl:"../../images/blank.png",iconSize:[1,1],iconAnchor:[0,1]});e.icon=i}var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,e));return e&&e.label&&o.bindTooltip(e.label,{permanent:!0,direction:"center",className:"kqmarker_label"}),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,L.Marker),r(a,[{key:"addToMapView",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addTo",this).call(this,t._getMap());var n=KQ.Control.Manager.getInstance().getControl("draw");n&&e&&n._addDrawnLayer(this)}},{key:"bindTooltip",value:function(t,e){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"bindTooltip",this).call(this,t,e)}},{key:"unbindTooltip",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"unbindTooltip",this).call(this)}},{key:"bindPopup",value:function(t,e){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"bindPopup",this).call(this,t,e)}},{key:"unbindPopup",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"unbindPopup",this).call(this)}},{key:"remove",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"remove",this).call(this)}},{key:"slideTo",value:function(t,e){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"slideTo",this).call(this,t,e)}},{key:"openPopup",value:function(t){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"openPopup",this).call(this,t)}},{key:"closePopup",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"closePopup",this).call(this)}},{key:"getBounds",value:function(){return L.latLngBounds(this.getLatLng(),this.getLatLng())}},{key:"_getMarkerIconSize",value:function(t){var e=t.options.icon.options.iconSize;if(t.options.extraIcon){var n=t.options.extraIcon.trueFontSize;e=[n,n]}return e}}]),a}();n.default=o},{}],1096:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=t("leaflet"),a=(r=i)&&r.__esModule?r:{default:r};var s={top:0,left:140,bottom:60,right:70,polygon:[],pane:"maskPane",style:function(t){if(!t.properties||!t.properties.options)return{interactive:!1};var e=t.properties.options;return e.interactive=!1,e}},l=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=a.default.extend({},s,e),r={type:"FeatureCollection",features:[{type:"Feature",properties:{options:{stroke:!1,color:"#000",weight:0,opacity:1,fill:!0,fillColor:"#f0f0f0",fillOpacity:1,showArea:!1,clickable:!1}},geometry:{type:"MultiPolygon",coordinates:[[[[n.left,n.top],[n.right,n.top],[n.right,n.bottom],[n.left,n.bottom]]],[t]]}}]};this._obj=new KQ.Map.MapGeoJSON(r,n)}return o(i,[{key:"addToMapView",value:function(t){this._obj.addTo(t._getMap())}},{key:"remove",value:function(){this._obj.remove()}}]),i}();n.default=l},{leaflet:560}],1097:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._manager={}}return r(t,[{key:"addLayer",value:function(t,e,n,r){r?(this._manager[r]||(this._manager[r]={}),this._manager[r][t]={layer:e,data:n}):this._manager[t]={layer:e,data:n}}},{key:"removeLayer",value:function(t){for(var e=[this._manager];0!=e.length;)for(var n=e.shift(),r=Object.keys(n),i=0;i<r.length;++i){if(t==r[i])return void delete n[t];"[object Object]"==Object.prototype.toString.call(n[r[i]])&&e.push(n[r[i]])}}},{key:"allLayers",value:function(){for(var t=[],e=[this._manager];0!=e.length;)for(var n=e.shift(),r=Object.keys(n),i=0;i<r.length;++i){if("layer"==r[i].toLowerCase()){t.push(n);break}"[object Object]"==Object.prototype.toString.call(n[r[i]])&&e.push(n[r[i]])}return t}},{key:"getLayerFromKey",value:function(t){for(var e=[this._manager];0!=e.length;)for(var n=e.shift(),r=Object.keys(n),i=0;i<r.length;++i){if(t==r[i])return n[t];"[object Object]"==Object.prototype.toString.call(n[r[i]])&&e.push(n[r[i]])}return null}},{key:"contains",value:function(t){return null!=this.getLayerFromKey(t)}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=i},{}],1098:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("leaflet")),o=a(t("../common/ComputeTools"));function a(t){return t&&t.__esModule?t:{default:t}}var s={},l={isPlot:!0,stroke:!0,color:o.default.fullColorHex(200,0,0),opacity:1,fillColor:o.default.fullColorHex(200,0,0),fillOpacity:.9,fillRule:"nonzero"},u=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);i.default.extend({},s,t);this._map=null,this._plotType="squadcombat"}return r(e,[{key:"addToMapView",value:function(t){this.addTo(t._getMap())}},{key:"addTo",value:function(t){this._map||((this._map=t).doubleClickZoom.disable(),t.on("click",function(t){console.log("map clicked!"),P.plotDraw.isDrawing()||P.plotEdit.deactivate()}),P.style=l,P.plotDraw=new P.PlotDraw(t),P.plotDraw.on(P.Event.PlotDrawEvent.DRAW_END,this.onDrawEnd,!1,this),P.plotEdit=new P.PlotEdit(t))}},{key:"remove",value:function(){}},{key:"onDrawEnd",value:function(t){var e=t.feature;P.plotEdit.activate(e)}},{key:"setPlotType",value:function(t){this._plotType=t}},{key:"startDraw",value:function(){P.plotEdit.deactivate(),P.plotDraw.activate(this._plotType)}},{key:"setStyle",value:function(t){P.style=i.default.extend({},P.style,t)}},{key:"stopDraw",value:function(){P.plotDraw.deactivate()}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();n.default=u},{"../common/ComputeTools":953,leaflet:560}],1099:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Popup),i(e,[{key:"addToMapView",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addTo",this).call(this,t._getMap())}},{key:"remove",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"setContent",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setContent",this).call(this,t)}},{key:"setLatLng",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setLatLng",this).call(this,t)}}]),e}();n.default=l},{leaflet:560}],1100:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};t("../../libs/L.Realtime");var o=0,a=[[-123.26455772,44.54983277],[-123.26500558,44.54982299],[-123.26528848,44.55004093],[-123.26522978,44.55035858],[-123.26520235,44.55066664],[-123.26522582,44.55098449],[-123.26521138,44.55130029],[-123.26518003,44.55160747],[-123.26518163,44.55188308],[-123.26557851,44.55188898],[-123.26599874,44.55189944],[-123.26642195,44.55190139],[-123.26683924,44.55192871],[-123.26724848,44.55193516],[-123.26766514,44.55194627],[-123.26804338,44.55193255],[-123.268485,44.55190395],[-123.26889981,44.55190189],[-123.26930378,44.5518918],[-123.26972114,44.5519131],[-123.27001578,44.55214162],[-123.26992328,44.55242064],[-123.26980421,44.55271085],[-123.26979138,44.55299119],[-123.26978961,44.5533388],[-123.26979357,44.55360978],[-123.27000672,44.553837],[-123.27043173,44.55391549],[-123.27077426,44.55406337],[-123.2711259,44.55427745],[-123.27142782,44.55448869],[-123.27165155,44.55471097],[-123.27195074,44.55492459],[-123.27223789,44.55511313],[-123.27260869,44.55527249],[-123.27298495,44.55536561],[-123.27335499,44.55545537],[-123.27373329,44.5555322],[-123.27410536,44.55565105],[-123.27423139,44.55593092],[-123.27425776,44.55623974],[-123.2741858,44.55659789],[-123.27411027,44.55687099],[-123.27404736,44.55717146],[-123.27412948,44.55746332],[-123.27421196,44.55773261],[-123.2742752,44.55803031],[-123.27427864,44.55835353],[-123.27421796,44.55862406],[-123.27423396,44.55889831],[-123.27413285,44.55920039],[-123.2740497,44.55949214],[-123.27380771,44.55970488],[-123.27376891,44.55998712],[-123.27394641,44.56024437],[-123.27403613,44.56055581],[-123.27415413,44.56082019],[-123.27425083,44.56111626],[-123.2743179,44.56139533],[-123.2743746,44.56169452],[-123.27429191,44.56199143],[-123.27427041,44.56230578],[-123.27434592,44.56262136],[-123.27431907,44.56289923],[-123.27436043,44.56322845],[-123.27433006,44.56350296],[-123.27436948,44.56379745],[-123.27433029,44.56407998],[-123.27431553,44.56437327],[-123.27443522,44.56450075],[-123.2744672,44.56451763],[-123.27468884,44.56453951],[-123.27473598,44.56454424],[-123.27508694,44.56468481],[-123.27551389,44.56468727],[-123.27588798,44.56462461],[-123.27631628,44.56459386],[-123.27669485,44.5646084],[-123.27683369,44.56481807],[-123.27684494,44.56485063]],s={interval:1e3,shapeType:"point",is_init_popup:!0,is_show_log:!1,popup_label:null,popup_img:null,style:null,extraIcon:null,icon:null,max_track_number:15,label_latlng:"",label_latlng_precision:4,tooltipOffset:[0,-24],popupOffset:[0,0],getCoord:function(){var t=a[o];if(o++,t)return t},src:function(t,e){var n=this.options.getCoord();if(n){var r=this.options.pointTail,i=this.options.pointTail.geometry.coordinates;"line"===this.options.shapeType&&(r=this.options.lineTail,i=this.options.lineTail.geometry.coordinates),i.push(n),i.splice(0,Math.max(0,i.length-this.options.max_track_number)),t({type:"FeatureCollection",features:[r]}),this.options.is_show_log&&console.log("realtime "+this.options.popup_label+": "+n),this._isFollow&&(this._popup.bringToFront(),this._map.panTo([n[1],n[0]]))}},pointTail:{type:"Feature",properties:{id:0},geometry:{type:"MultiPoint",coordinates:[]}},lineTail:{type:"Feature",properties:{id:1},geometry:{type:"LineString",coordinates:[]}},pointToLayer:function(t,e){if(!this)return L.marker([0,0]);var n=KQ.Common.ThemeManager.getInstance().mainColor(),r={radius:5,stroke:!0,color:n,weight:1,opacity:.8,fill:!0,fillColor:n,fillOpacity:.4,clickable:!0};this.options.style&&(r=this.options.style),"line"===this.options.shapeType&&(r.fill=!1);var i=new Date,o=(i=i.toLocaleString())+"<br>"+e.lng+", "+e.lat,a=new L.CircleMarker(e,r);return a.bindTooltip(o,{}),a},updateFeature:function(t,e,n){if(this._marker){var r=t.geometry.coordinates[t.geometry.coordinates.length-1],i=[r[1],r[0]],o=this._marker.getLatLng(),a=this._popupContent;!o||0===o.lat&&0===o.lng?(this._marker.setLatLng(i),this._popup.setContent(a),this.options.is_init_popup&&this._marker.openPopup()):(a+="<p>"+o.lng.toFixed(this.options.label_latlng_precision)+", "+o.lat.toFixed(this.options.label_latlng_precision)+"</p>",this._popup.setContent(a),this._marker.slideTo(i))}}},l=function(t){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),s.label_latlng=KQ.Local.Control.realtime.label_latlng();var n=L.extend({},s,e),r=t||n.src;n.pointTail=JSON.parse(JSON.stringify(n.pointTail)),n.lineTail=JSON.parse(JSON.stringify(n.lineTail));var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,r,n));return i.options.pointToLayer=L.bind(i.options.pointToLayer,i),i._initIcon(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,L.Realtime),r(o,[{key:"addToMapView",value:function(t){i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"addTo",this).call(this,t._getMap()),this._map=t._getMap(),this._marker.addToMapView(t),this._popupContent={},this._isFollow=!1;var e=null,n=null,r="";this.options.popup_label&&(e='\n        <label class="playback-marker-popup-label">\n          <strong>'+this.options.popup_label+"</strong>\n        </label>\n      "),this.options.popup_img&&(n='<img class="playback-marker-popup-img" src='+this.options.popup_img+' alt="">'),(e||n)&&(r='<div class="playback-marker-popup-container">        \n        '+e+"\n        "+n+"\n      </div>",this._popupContent=r),this._popup.setContent(this._popupContent),this._popup.openOn(this._map),this._popup.remove()}},{key:"setFollow",value:function(t){this._isFollow=t}},{key:"start",value:function(){i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"start",this).call(this)}},{key:"stop",value:function(){i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"stop",this).call(this)}},{key:"isRunning",value:function(){return i(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"isRunning",this).call(this)}},{key:"removeFromMapView",value:function(){this._map.removeLayer(this),this._marker.remove()}},{key:"_initIcon",value:function(){var t=void 0;t=this.options.extraIcon?L.ExtraMarkers.icon(this.options.extraIcon):this.options.icon?L.icon(this.options.icon):L.ExtraMarkers.icon({icon:"fa-coffee",markerColor:"blue",shape:"square",prefix:"fa"}),this._marker=new KQ.Map.MapMarker(L.latLng(0,0),{icon:t}),this._popup=L.popup().setLatLng(L.latLng(0,0)),this._marker.bindPopup(this._popup,{autoPan:!1,autoClose:!1,closeOnClick:!1,className:"realtime-popup",offset:this.options.popupOffset})}}]),o}();n.default=l},{"../../libs/L.Realtime":3}],1101:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Tooltip),i(e,[{key:"addToMapView",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addTo",this).call(this,t._getMap())}},{key:"remove",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"setContent",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setTooltipContent",this).call(this,t)}},{key:"setLatLng",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setLatLng",this).call(this,t)}}]),e}();n.default=l},{leaflet:560}],1102:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),g=r(t("leaflet")),m=r(t("../kq"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var y={drawControlTooltips:!0,preferCanvas:!0,zoomControl:!1,attributionControl:!1,condensedAttributionControl:!1,bounceAtZoomLimits:!1,permission:[],contextmenu:!0,contextmenuWidth:140,contextmenuItems:[],worldCopyJump:!1,maxBoundsViscosity:1,maxBounds:new g.default.LatLngBounds([[80,-180],[-80,180]])},a=function(t){function d(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this)),n=g.default.extend({},y,t),r=m.default.Map.MapConfig.getInstance(),i=m.default.Common.ComputeTools,o=m.default.Projection.ProjectionCRS;if(m.default.Map.MapConfig.getInstance().permission(n.permission),!n.crs){for(var a=[],s=0;s<r.scales().length;++s)a.push(r.getScaleByIndex(s));a.push(2*r.getScaleByIndex(r.scales().length-1));var l=r.getProj4(),u=r.getProjectionOrigin(),c=r.getProjectionBounds(),h=i.getToMetersFromProj4(l),f={origin:u,resolutions:i.stdScalesToResolutions(a,h)};4===c.length&&(f.bounds=g.default.bounds([c[0],c[1]],[c[2],c[3]]));var p=new o("EPSG:900913",l,f);n.crs=p}return e._options=n,e._map=null,e._mapToken="",e}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,g.default.Evented),i(d,[{key:"initAsync",value:(r=o(regeneratorRuntime.mark(function t(e){var n,r,i,o,a,s,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,r=m.default.Map.MapConfig.getInstance(),t.next=4,n._preproccessDiv(m.default.Common.CommonValues.mapContainerID);case 4:return n._options.minZoom=r.getMinScaleID()?r.getMinScaleID():0,n._options.maxZoom=r.scales().length-1,i=m.default.Common.CommonValues.insideMapID,n._map=g.default.map(i,n._options),(o=r.getMapBackgroundColor())&&n.setBackgroundColor(o),n.setExtent(r.getInitExtent()),a=n._map.getCenter(),s=n._map.getZoom(),n._options.center&&(a=n._options.center),n._options.zoom&&(s=n._options.zoom),n._map.setView(a,s),n._map.createPane("basemapPane"),n._map.createPane("maskPane"),m.default.Map.MapCommon.resetMapPaneZIndex(n._map),l=m.default.Control.Manager.getInstance(),t.next=22,l.addToAcync(n);case 22:setTimeout(function(){g.default.HistoryControl.getInstance(n._map).addMapListeners()},1e3),n._afterInit(),m.default.Common.TaskManager.getInstance().start(),n._map.on("moveend",n.on_moveend,n),u=m.default.Control.BuildingLoading.getInstance(),n._map.on("moveend checkedLayer",function(){u.load()}),n._map.on("uncheckedLayer",function(){u.clearData()}),e&&e();case 31:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_customInitAsync",value:(n=o(regeneratorRuntime.mark(function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this,i=m.default.Map.MapConfig.getInstance(),o=m.default.Control.Manager.getInstance(),a=o.getMapView()._getMap(),r._options.minZoom=i.getMinScaleID()?i.getMinScaleID():0,r._options.maxZoom=i.scales().length-1,r._map=g.default.map(e,r._options),r._map.createPane("basemapPane"),r._map.createPane("maskPane"),m.default.Map.MapCommon.resetMapPaneZIndex(r._map),r._afterInit(),m.default.Common.TaskManager.getInstance().start(),r._getMap().setView(a.getCenter(),a.getZoom()),n&&n();case 15:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})},{key:"_afterInit",value:function(){var e=this;e._map.on("click",function(t){e.fire("click",new m.default.Struct.MouseEvent(t))}),e._map.on("dblclick",function(t){e.fire("dblclick",new m.default.Struct.MouseEvent(t))}),e._map.on("mousedown",function(t){e.fire("mousedown",new m.default.Struct.MouseEvent(t))}),e._map.on("mouseup",function(t){e.fire("mouseup",new m.default.Struct.MouseEvent(t))}),e._map.on("mouseover",function(t){e.fire("mouseover",new m.default.Struct.MouseEvent(t))}),e._map.on("mouseout",function(t){e.fire("mouseout",new m.default.Struct.MouseEvent(t))}),e._map.on("mousemove",function(t){e.fire("mousemove",new m.default.Struct.MouseEvent(t))}),e._map.on("contextmenu",function(t){e.fire("contextmenu",new m.default.Struct.MouseEvent(t))}),e._map.on("resize",function(t){e.fire("resize",t)}),e._map.on("load",function(t){e.fire("load",t)}),e._map.on("zoomend",function(t){e.fire("zoomend",t)}),e._map.on("moveend",function(t){e.fire("moveend",t)}),e._map.on("resize",function(t){console.log("map resize!"),e._map.invalidateSize()})}},{key:"_preproccessDiv",value:(e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!m.default.Map.MapConfig.getInstance().isHasControl("sidebar")){t.next=4;break}return t.next=4,m.default.Control.Sidebar.initAsync("sidebar.html");case 4:if(!m.default.Map.MapConfig.getInstance().isHasControl("sidebar-left")){t.next=8;break}return t.next=8,m.default.Control.Sidebar.initAsync("sidebar_left.html");case 8:if(!m.default.Map.MapConfig.getInstance().isHasControl("sidebar-right")){t.next=12;break}return t.next=12,m.default.Control.Sidebar.initAsync("sidebar_right.html");case 12:if(!m.default.Map.MapConfig.getInstance().isHasControl("mainmenu")){t.next=16;break}return t.next=16,m.default.Control.MainMenu.initAsync();case 16:if(!m.default.Map.MapConfig.getInstance().isHasControl("advmenu")){t.next=20;break}return t.next=20,m.default.Control.AdvMenu.initAsync();case 20:(n=$("#"+e)).length<=0&&console.log("_preproccessDiv: mapdiv was not found!"),n.css("position","relative"),r=m.default.Common.CommonValues.insideMapID,n.append("<div id="+r+' class="sidebar-map" style="height: 100%; outline: none"/>');case 25:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_getMap",value:function(){return this._map}},{key:"callApi",value:function(t){var e=$.inArray("kq-"+t,["kq-zoom_in","kq-zoom_out","kq-roaming","kq-forward-map","kq-backward-map","kq-full-map","kq-drawing","kq-info-query","kq-fullscreen","kq-measureseparate-length","kq-measureseparate-area","kq-setlocation","kq-sidebyside-h","kq-sidebyside-v","kq-searchlight","kq-searchlight-length","kq-screenshot","kq-screenshot-show","kq-print","kq-compare","kq-edit-save","kq-edit-cancel","kq-draw-clearall"]),n=$.inArray("leaflet-control-"+t,["leaflet-control-styleeditor","leaflet-control-zoom-in","leaflet-control-zoom-out","leaflet-control-fullscrenn"]),r=$.inArray("leaflet-draw-"+t,["leaflet-draw-draw-polyline","leaflet-draw-draw-polygon","leaflet-draw-draw-rectangle","leaflet-draw-draw-circle","leaflet-draw-draw-marker","leaflet-draw-draw-circlemarker","leaflet-draw-edit-edit","leaflet-draw-edit-remove"]);-1!=e?(-1!=$.inArray(t,["edit-save","edit-cancel","draw-clearall"])&&document.getElementsByClassName("leaflet-draw-edit-remove")[0].click(),null!=document.getElementById("kq-"+t)&&document.getElementById("kq-"+t).click()):-1!=n?null!=document.getElementsByClassName("leaflet-control-"+t)[0]&&document.getElementsByClassName("leaflet-control-"+t)[0].click():-1!=r&&null!=document.getElementsByClassName("leaflet-draw-"+t)[0]&&document.getElementsByClassName("leaflet-draw-"+t)[0].click()}},{key:"setExtent",value:function(t,e){var n=e||m.default.Common.CommonValues.insideMapID,r=$("#"+n).width(),i=$("#"+n).height(),o=m.default.Map.MapCommon.getScaleIndexByExtent(t,r,i),a=Number(t[0]),s=Number(t[1]),l=Number(t[2]),u=Number(t[3]),c=g.default.point(a+(l-a)/2,s+(u-s)/2),h=this._map.options.crs.unproject(c);this._map.setView(h,o)}},{key:"zoom",value:function(t){this._map.setZoom(t)}},{key:"zoomIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this._map.zoomIn(t)}},{key:"zoomOut",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this._map.zoomOut(t)}},{key:"panTo",value:function(t){this._map.panTo(t)}},{key:"panBy",value:function(t){this._map.panBy(t)}},{key:"flyTo",value:function(t,e){this._map.flyTo(t,e,{animate:!1})}},{key:"flyToBounds",value:function(t){t.getSouth()<-80&&(t._southWest.lat=-80),80<t.getNorth()&&(t._northEast.lat=80),this._map.flyToBounds(t,{animate:!1})}},{key:"zoomToMap",value:function(){var t=m.default.Map.MapConfig.getInstance().getFullExtent(),e=this._map.options.crs,n=e.unproject(g.default.point(Number(t[0]),Number(t[1]))),r=e.unproject(g.default.point(Number(t[2]),Number(t[3])));this._map.fitBounds(g.default.latLngBounds(n,r),{minZoom:this._options.minZoom})}},{key:"addControl",value:function(t){t.addTo&&t.addTo(this._map)}},{key:"removeControl",value:function(t){t.remove&&t.remove()}},{key:"openPopup",value:function(t){this._map.openPopup(t)}},{key:"closePopup",value:function(t){this._map.closePopup(t)}},{key:"openTooltip",value:function(t){this._map.openTooltip(t)}},{key:"closeTooltip",value:function(t){this._map.closeTooltip(t)}},{key:"toggleDrawControl",value:function(){m.default.Control.Manager.getInstance()._toggleDrawPane()}},{key:"clearDrawGeoJSON",value:function(){var t=m.default.Control.Manager.getInstance().getControl("draw");t&&t.clear()}},{key:"getDrawGeoJSON",value:function(t){var e=m.default.Control.Manager.getInstance().getControl("draw");return e?e.toGeoJSON(t):null}},{key:"getTree",value:function(){var t=m.default.Control.Manager.getInstance().getControl("tree");return t||null}},{key:"getInput",value:function(){var t=m.default.Control.Manager.getInstance().getControl("input");return t||null}},{key:"getSidebar",value:function(){var t=m.default.Control.Manager.getInstance().getControl("sidebar");return t||null}},{key:"getPermission",value:function(){return m.default.Map.MapConfig.getInstance().permission()}},{key:"getBounds",value:function(){return this._map.getBounds()}},{key:"on_moveend",value:function(){for(var t=m.default.Map.MapCommon._getActualLayers(this._map),e=0;e<t.length;e++){var n=t[e];"imageoverlay"===n.desc&&(n._loaded=!1)}}},{key:"project",value:function(t){var e=this._map.options.crs;if(e)return e.project(t);console.log("project failed: no crs object!")}},{key:"unproject",value:function(t){var e=this._map.options.crs;if(e)return"number"==typeof t.x&&"number"==typeof t.y||(t.x=Number(t.x),t.y=Number(t.y)),e.unproject(t);console.log("unproject failed: no crs object!")}},{key:"setCursor",value:function(t){$("#"+m.default.Common.CommonValues.insideMapID).css("cursor",t)}},{key:"resetCursor",value:function(){$("#"+m.default.Common.CommonValues.insideMapID).css("cursor","")}},{key:"cursor",value:function(){return $("#"+m.default.Common.CommonValues.insideMapID).css("cursor")}},{key:"getDrawnItems",value:function(){var t=m.default.Control.Manager.getInstance().getControl("draw");return t?t._drawnItems.getLayers():[]}},{key:"compareTwoMap",value:function(t){this._compareMapViewList=[],m.default.Control.Compare.compareTwoMap(t,this)}},{key:"compareThreeMap",value:function(t){this._compareMapViewList=[],m.default.Control.Compare.compareThreeMap(t,this)}},{key:"setView",value:function(t,e){this._map.setView(t,e)}},{key:"getZoom",value:function(){return this._map.getZoom()}},{key:"getCenter",value:function(){return this._map.getCenter()}},{key:"latLngToLayerPoint",value:function(t){return this._map.latLngToLayerPoint(t)}},{key:"layerPointToLatLng",value:function(t){return this._map.layerPointToLatLng(t)}},{key:"setBackgroundColor",value:function(t){$(".leaflet-container").css({"background-color":t})}},{key:"setTempCRS",value:function(t){this._map.options.crs&&!this._config_crs&&(this._config_crs=this._map.options.crs);var e=this.getCenter(),n=new m.default.Projection.ProjectionCRS("",t.proj4,t);this._map.options.crs=n,this.setView(e)}},{key:"restoreCRS",value:function(){if(this._config_crs){var t=this.getCenter();this._map.options.crs=this._config_crs,this._config_crs=null,this.setView(t)}}},{key:"setDrawingOptions",value:function(t){var e=m.default.Control.Manager.getInstance().getControl("draw");e&&e._draw.setDrawingOptions(t)}},{key:"createPane",value:function(t,e){this._map.createPane(e),this._map.getPane(e).style.zIndex=t}},{key:"getPane",value:function(t){return this._map.getPane(t)}},{key:"getControlByType",value:function(t){return m.default.Control.Manager.getInstance().getControl(t)}},{key:"geoFitBounds",value:function(t){var e=this._map.getBoundsZoom(t,!1),n=t.getCenter();this.setView(n,e)}}],[{key:"setMapToken",value:function(t){this._mapToken=t}},{key:"getMapToken",value:function(){return this._mapToken}}]),d}();n.default=a},{"../kq":1075,leaflet:560}],1103:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=s(t("../../kq")),a=s(t("../../control/Window"));function s(t){return t&&t.__esModule?t:{default:t}}var l={title:{text:"Distribution Chart",subtext:"Develop By Kanq",left:"center",textStyle:{color:"#122f48"}},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{left:"right",min:100,max:1e3,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0},series:[{name:"china PopEstimates",type:"map",roam:!0,map:"china",itemStyle:{emphasis:{label:{show:!0}}}}]},u=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);l.series[0].data=t.data,t.data&&delete t.data,this.options=L.extend({},l,t),this._mapChart=new o.default.Map.MapEcharts(this.options),this._chartDialog=null,this._initHtml(),this._initDistributionDialog()}return i(e,[{key:"addToMapView",value:function(t){this._mapChart.addToMapView(t)}},{key:"_initHtml",value:function(){var t=o.default.Common.CommonValues.mapContainerID;$("#"+t).append($('<div id="map-chart-distribution-dialog" style="width: 1100px; height: 700px; margin: 0; "></div>'))}},{key:"_getChartDistributionDialogId",value:function(){return"map-chart-distribution-dialog"}},{key:"_initDistributionDialog",value:function(){var t=this,e={title:"分布图",minWidth:"1100px",minHeight:"720px",scrollable:!1,actions:["Close"],close:function(){console.log("map chart distribution on close!"),n._remove()}},n=new a.default(t._getChartDistributionDialogId(),e);n.initAsync(function(){t._chartDialog=n._object()}),t._initChart()}},{key:"_initChart",value:function(){var t=document.getElementById(this._getChartDistributionDialogId()),e=echarts.init(t);this.options&&"object"===r(this.options)&&e.setOption(this.options,!0)}},{key:"open",value:function(){this._chartDialog.open()}},{key:"remove",value:function(){this._chartDialog.close()}}]),e}();n.default=u},{"../../control/Window":1034,"../../kq":1075}],1104:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../kq");(r=o)&&r.__esModule;var a={isTooltipInfo:!0,title:"Distribution",geoJsonObj:{},valueDataArray:[],valueGrades:[0,10,20,50,100,200,500,1e3],colorLevels:["#FFEDA0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#BD0026","#800026"]},s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._options=L.extend({},a,t),this._map=null,this._legend=L.control({position:"bottomright"}),this._hoverInfo=L.control({position:"bottomright"}),this._geoJson=null}return i(e,[{key:"hoverInfoAddTo",value:function(t){var e=this;e._hoverInfo.onAdd=function(t){return e._hoverInfo._div=L.DomUtil.create("div","info"),e._hoverInfoUpdate(),e._hoverInfo._div},e._options.isTooltipInfo||e._hoverInfo.addTo(t)}},{key:"_hoverInfoUpdate",value:function(t){this._options.isTooltipInfo||(this._hoverInfo._div.innerHTML="<h4>"+this._options.title+"</h4>"+(t?"<b>"+t.name+": </b><br />"+this._findValueByName(t.name):"Hover over a area"))}},{key:"_hoverLayerTooltipUpdate",value:function(t){var e=t.feature.properties,n="<h4>"+this._options.title+"</h4>"+(e?"<b>"+e.name+": </b><br />"+this._findValueByName(e.name):"Hover over a area");t.bindTooltip(n,{direction:"top",sticky:!0})}},{key:"getColor",value:function(t){var e=null,n=null,r=null;if(this._options.valueGrades.length<=this._options.colorLevels.length)for(var i=this._options.valueGrades.length-1;0<=i;i--)if(e=this._options.valueGrades[i],n=this._options.colorLevels[i],e<t){r=n;break}return r}},{key:"_findValueByName",value:function(t){for(var e=null,n=0;n<this._options.valueDataArray.length;++n)if(this._options.valueDataArray[n].name==t){e=this._options.valueDataArray[n].value;break}return e}},{key:"getStyle",value:function(t){console.log("getStyle feature name: "+t.properties.name);var e=this._findValueByName(t.properties.name);return console.log("getStyle feature value: "+e),{weight:2,opacity:1,color:"white",dashArray:"7",fillOpacity:.7,fillColor:this.getColor(e)}}},{key:"highlightFeature",value:function(t){var e=t.target;e.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||L.Browser.edge||e.bringToFront(),this._hoverInfoUpdate(e.feature.properties)}},{key:"resetHighlight",value:function(t){this._geojson.resetStyle(t.target),this._hoverInfoUpdate()}},{key:"zoomToFeature",value:function(t){this._map.fitBounds(t.target.getBounds())}},{key:"onEachFeature",value:function(t,e){e.on({mouseover:L.bind(this.highlightFeature,this),mouseout:L.bind(this.resetHighlight,this),click:L.bind(this.zoomToFeature,this)}),this._options.isTooltipInfo&&this._hoverLayerTooltipUpdate(e)}},{key:"geoJsonAddTo",value:function(t){this._geojson=L.geoJson(this._options.geoJsonObj,{style:L.bind(this.getStyle,this),onEachFeature:L.bind(this.onEachFeature,this)}).addTo(t)}},{key:"legendAddTo",value:function(t){var a=this;this._legend.onAdd=function(t){for(var e,n,r=L.DomUtil.create("div","info legend"),i=[],o=0;o<a._options.valueGrades.length;o++)e=a._options.valueGrades[o],n=a._options.valueGrades[o+1],i.push('<i style="background:'+a.getColor(e+1)+'"></i> '+e+(n?"&ndash;"+n:"+"));return r.innerHTML=i.join("<br>"),r},this._legend.addTo(t)}},{key:"addToMapView",value:function(t){this._map=t._getMap(),this.legendAddTo(this._map),this.hoverInfoAddTo(this._map),this.geoJsonAddTo(this._map)}},{key:"remove",value:function(){this._legend.remove(),this._hoverInfo.remove(),this._geojson.remove()}}]),e}();n.default=s},{"../../kq":1075}],1105:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=a(t("leaflet")),o=a(t("../../kq"));function a(t){return t&&t.__esModule?t:{default:t}}var s={title:{text:"Migrate Chart",subtext:"Develop By Kanq",left:"center",textStyle:{color:"#122f48"}},animation:!1,tooltip:{trigger:"item"},legend:{orient:"vertical",top:"bottom",right:"100px",data:[],textStyle:{color:"#c80007"},selectedMode:"single"},geo:{map:"",label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#323c48",borderColor:"#404a59"},emphasis:{areaColor:"#2a333d"}}},series:[]},l=[];l.push({name:null,type:"lines",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#122f48",symbolSize:3},lineStyle:{normal:{color:null,width:0,curveness:.2}},data:null},{name:null,type:"lines",zlevel:2,effect:{show:!0,period:6,trailLength:0,symbol:"path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z",symbolSize:15},lineStyle:{normal:{color:null,width:1,opacity:.1,curveness:.2}},data:null},{name:null,type:"effectScatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(t){return t[2]/8},itemStyle:{normal:{color:null}},data:null});var u=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=i.default.extend({},s),this.options.series=[],t.title&&(this.options.title.text=t.title),t.subtitle&&(this.options.title.subtext=t.subtitle),t.titlecolor&&(this.options.title.textStyle.color=t.titlecolor),t.legendtop&&(this.options.legend.top=t.legendtop),t.legendright&&(this.options.legend.right=t.legendright)}return r(e,[{key:"addToMapView",value:function(t){this.kqecharts=new o.default.Map.MapEcharts(this.options),this.kqecharts.addToMapView(t)}},{key:"remove",value:function(){this.kqecharts.remove()}},{key:"addData",value:function(t,e,n,r){var i=$.extend(!0,{},l),o=[];r.forEach(function(t,e){o.push([n,{coord:[t.value[0],t.value[1]]}])}),i[0].name=e,i[0].lineStyle.normal.color=t,i[0].data=o,i[1].name=e,i[1].lineStyle.normal.color=t,i[1].data=o,i[2].name=e,i[2].itemStyle.normal.color=t,i[2].data=r,this.options.series.push(i[0]),this.options.series.push(i[1]),this.options.series.push(i[2]),this.options.legend.data.push(e)}}]),e}();n.default=u},{"../../kq":1075,leaflet:560}],1106:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={geo:{map:"",label:{emphasis:{show:!1}}},series:[{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,silent:!0,lineStyle:{normal:{opacity:.2,width:1}},progressiveThreshold:500,progressive:200},{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,lineStyle:{normal:{width:0}},effect:{constantSpeed:20,show:!0,trailLength:.1,symbolSize:1.5},zlevel:1}]},l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s.series[0].data=t.data,s.series[1].data=t.data,delete t.data,this.options=L.extend({},s,t),this._mapChart=new a.default.Map.MapEcharts(this.options)}return i(e,[{key:"addToMapView",value:function(t){this._mapChart.addToMapView(t)}},{key:"remove",value:function(){this._mapChart.remove()}}]),e}();n.default=l},{"../../kq":1075}],1107:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={geo:{map:"",label:{emphasis:{show:!1}}},series:[{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,silent:!0,lineStyle:{normal:{opacity:.2,width:3}},progressiveThreshold:500,progressive:200},{type:"lines",coordinateSystem:"geo",data:[],polyline:!0,lineStyle:{normal:{width:0}},effect:{constantSpeed:20,show:!0,trailLength:.2,symbolSize:3.5},zlevel:1}]},l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s.series[0].data=t.data,s.series[1].data=t.data,t.pointsize&&(s.series[1].effect.symbolSize=t.pointsize),t.linesize&&(s.series[0].lineStyle.normal.width=t.linesize),delete t.data,this.options=L.extend({},s,t),this._mapChart=new a.default.Map.MapEcharts(this.options)}return i(e,[{key:"addToMapView",value:function(t){this._mapChart.addToMapView(t)}},{key:"remove",value:function(){this._mapChart.remove()}}]),e}();n.default=l},{"../../kq":1075}],1108:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(t("./ProjectionTransform")),i=a(t("./ProjectionCRS")),o=a(t("./ProjectionTransUnusual"));function a(t){return t&&t.__esModule?t:{default:t}}var s={ProjectionTransform:r.default,ProjectionCRS:i.default,ProjectionTransUnusual:o.default};n.default=s},{"./ProjectionCRS":1109,"./ProjectionTransUnusual":1110,"./ProjectionTransform":1111}],1109:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},i=t("leaflet"),s=(r=i)&&r.__esModule?r:{default:r};t("../../libs/proj4leaflet");var l=function(t){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.proj4=e,r.prj=n.prj,console.log("ProjectionCRS proj4def:"+e),console.log("ProjectionCRS options:"+JSON.stringify(n)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default.Proj.CRS),o(i,[{key:"latLngToPoint",value:function(t,e){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"latLngToPoint",this).call(this,t,e)}},{key:"pointToLatLng",value:function(t,e){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"pointToLatLng",this).call(this,t,e)}},{key:"project",value:function(t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"project",this).call(this,t)}},{key:"unproject",value:function(t){return"number"==typeof t.x&&"number"==typeof t.y||(t.x=Number(t.x),t.y=Number(t.y)),a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"unproject",this).call(this,t)}},{key:"distance",value:function(t,e){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"distance",this).call(this,t,e)}},{key:"scale",value:function(t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"scale",this).call(this,t)}},{key:"zoom",value:function(t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"zoom",this).call(this,t)}},{key:"_isLongLat",value:function(){try{return-1!==this.proj4.indexOf("longlat")||-1!==this.proj4.indexOf("latlong")}catch(t){return!1}}}]),i}();n.default=l},{"../../libs/proj4leaflet":52,leaflet:560}],1110:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"baiduToWGS84",value:function(t,e){return eviltransform.bd2wgs(t,e)}},{key:"wgs84ToBaidu",value:function(t,e){return eviltransform.wgs2bd(t,e)}},{key:"baiduToGCJ",value:function(t,e){return eviltransform.bd2gcj(t,e)}},{key:"gcjToBaidu",value:function(t,e){return eviltransform.gcj2bd(t,e)}},{key:"gcjToWGS84",value:function(t,e){return eviltransform.gcj2wgs(t,e)}},{key:"wgs84ToGCJ",value:function(t,e){return eviltransform.wgs2gcj(t,e)}}]),t}();n.default=i},{}],1111:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=t("../../libs/proj4-src"),o=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._sourProjection=t,this._destProjection=e}return r(n,[{key:"setSourProjection",value:function(t){this._sourProjection=t}},{key:"setDestProjection",value:function(t){this._destProjection=t}},{key:"transformForward",value:function(t){return i(this._sourProjection,this._destProjection).forward(t)}},{key:"transfromInverse",value:function(t){return i(this._sourProjection,this._destProjection).inverse(t)}}]),n}();n.default=o},{"../../libs/proj4-src":51}],1112:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isValid=!1,this._object=null}var e,n;return i(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.default.Common.NetworkTools,n="",!1!==this._isValid){t.next=25;break}if(t.prev=3,""==i){t.next=8;break}n=i,t.next=17;break;case 8:if(!o){t.next=14;break}return t.next=11,e.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"advanced_search.zip","advanced_search.xml");case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.httpGetAsync(a.default.Common.CommonValues.configFilePath+"advanced_search.xml");case 16:n=t.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),console.log("AdvancedSearchConfig init failed:"+t.t0.toString());case 25:case"end":return t.stop()}},t,this,[[3,22]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(t){return t._id}},{key:"getLayerLabel",value:function(t){return t._label}},{key:"getLayerSourceName",value:function(t){return t._src_name}},{key:"getLayerOnlyKey",value:function(t){return a.default.Map.MapCommon.getKeyFromSourceNameLayerId(t._src_name,t._id)}},{key:"getLayerQueryID",value:function(t){return t._query_id}},{key:"getLayerListFields",value:function(t){return t.list_fields}},{key:"getLayerListFieldsAlias",value:function(t){return t.list_fields_alias}},{key:"getLayerFields",value:function(t){return t.fields}},{key:"getLayerRequestCount",value:function(t){return t._reqcount?t._reqcount:"200"}},{key:"getLayerFieldsAlias",value:function(t){return t.fields_alias}},{key:"getLayerChartField",value:function(t){return t.chart_field}},{key:"getLayerSummaryField",value:function(t){return t.summary_field}},{key:"getLayerExpression",value:function(t){return t.expression}},{key:"getLayerServerType",value:function(t){return t.server_type}},{key:"findLayer",value:function(t,e){for(var n=this.layers(),r=0;r<n.length;++r){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===t&&a===e)return i}return null}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1113:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",coordinates:"",title:"",scalelevel:"",type:"ADD",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/bookmark",type:"post",dataType:"json",data:{coordinates:i.coordinates,title:i.title,scalelevel:i.scalelevel,type:i.type,version:i.version}}},schema:{data:function(t){return console.log("Bookmark add return!"),console.log("Response result: "),console.log(t),r._response=t,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?[].concat(t.result):t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Bookmark add success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Bookmark add error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1114:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",coordinates:"",title:"",type:"del",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/bookmark",type:"post",dataType:"json",data:{coordinates:i.coordinates,title:i.title,type:i.type,id:i.id,version:i.version}}},schema:{data:function(t){return console.log("Bookmark delete return!"),console.log("Response result: "),console.log(t),r._response=t,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Bookmark delete success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Bookmark delete error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1115:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",type:"read",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/bookmark",type:"post",dataType:"json",data:{type:i.type,version:i.version}}},schema:{data:function(t){return console.log("Bookmark query return!"),console.log("Response result: "),console.log(t),r._response=t,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Bookmark query success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Bookmark query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1116:[function(t,n,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),a=t("../kq"),m=(i=a)&&i.__esModule?i:{default:i};var s={data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:"outer",radius:1e3,version:"2.0"},l=function(){function g(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return o(g,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},s,t);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=m.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:m.default.Map.MapConfig.getInstance().getSourceUrl_GeometryService()+"/buffer",type:"post",dataType:"json",data:{data:i.data,geoSRS:i.geoSRS,outSRS:i.outSRS,sideType:i.sideType,radius:i.radius,version:i.version}}},schema:{data:function(t){return console.log("buffer analysis info return!"),m.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?[t.result]:t.coordinates?t.coordinates:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("buffer analysis success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("buffer analysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}},{key:"_bufferCallback",value:function(t){console.log("_bufferCallback!");var a=t.options.currentElement.target,s=m.default.Control.Manager.getInstance().getControl("draw"),l=(m.default.Common.ThemeManager.getInstance().mainColor(),!!t.is_reserve_graphics&&t.is_reserve_graphics);if(m.default.Control.Waiting.show(),t.buffer_shape_type===m.default.Common.CommonValues.shapeTypes.point){var n=t.options.currentElement.target.toGeoJSON(),o=m.default.Query.BufferAnalysis.getInstance();try{var r={data:JSON.stringify(n.geometry),geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:g._getBufferTypeString(t.point_buffer_type),radius:g._getBufferLength(t.buffer_length,t.buffer_unit)};o.queryAsync(r,function(){if(console.log("query_good"),o.isLastError())return m.default.Control.Notification.getInstance().showError("Error: "+o.errorMsg()),void m.default.Control.Waiting.close();var t=o.data()[0];console.log("buffer analysis data.length:"+t.length);var e=t;console.log(JSON.stringify(e));var n={};a.options.color&&(n.color=a.options.color,n.fill=!0,n.fillColor=a.options.fillColor?a.options.fillColor:a.options.color,n.opacity=a.options.opacity,n.dashArray=a.options.dashArray,n.fillOpacity=a.options.fillOpacity);var r=L.geoJSON(e,{style:n});s.loadFromGeoJSON(r),l||s.removeGeoJSON(a);var i=m.default.Control.Manager.getInstance().getControl("styleeditor");i&&(i.addEditClickEvents(r),i.hideEditor()),m.default.Control.Waiting.close()},function(){console.log("query_error"),m.default.Control.Waiting.close()})}catch(t){m.default.Control.Notification.getInstance().showError("Catch Error: "+t),m.default.Control.Waiting.close()}}else if(t.buffer_shape_type===m.default.Common.CommonValues.shapeTypes.line){var i=a.toGeoJSON(),u=m.default.Query.BufferAnalysis.getInstance();try{var c={data:JSON.stringify(i.geometry),geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:g._getBufferTypeString(t.line_buffer_type),radius:g._getBufferLength(t.buffer_length,t.buffer_unit)};u.queryAsync(c,function(){if(console.log("query_good"),u.isLastError())return m.default.Control.Notification.getInstance().showError("Error: "+u.errorMsg()),void m.default.Control.Waiting.close();var t=u.data()[0];console.log("buffer analysis data.length:"+t.length);var e=t,n=a.options;n.fill=!0,n.fillColor=n.color;var r=L.geoJSON(e,{style:n});s.loadFromGeoJSON(r),l||s.removeGeoJSON(a);var i=m.default.Control.Manager.getInstance().getControl("styleeditor");i&&(i.addEditClickEvents(r),i.hideEditor()),m.default.Control.Waiting.close()},function(){m.default.Control.Notification.getInstance().showError("Catch Error: "+e),m.default.Control.Waiting.close()})}catch(t){console.log("catch error:"+t),m.default.Control.Waiting.close()}}else{var h=void 0;if(a instanceof L.Circle)h=new L.Polygon(m.default.Control.Draw._circleToPolygon(a)).toGeoJSON();else h=a.toGeoJSON();var f=m.default.Query.BufferAnalysis.getInstance();try{var p=void 0;h.geometry?p=h.geometry:h.features&&(p=m.default.Common.CommonTools.geoJsonFCToGC(h));var d={data:JSON.stringify(p),geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:g._getBufferTypeString(t.fill_buffer_type),radius:g._getBufferLength(t.buffer_length,t.buffer_unit)};f.queryAsync(d,function(){if(console.log("query_good"),f.isLastError())return m.default.Control.Notification.getInstance().showError("Error: "+f.errorMsg()),void m.default.Control.Waiting.close();var t=f.data()[0];console.log("buffer analysis data.length:"+t.length);var e=t,n=a.options;if(n.style&&n.style.options&&(n=n.style.options),(!n.color||!n.fillColor)&&a.getLayers){var r=a.getLayers();0<r.length&&(n=r[0].options)}n.fill=!0,n.fillColor=n.fillColor?n.fillColor:n.color;var i=L.geoJSON(e,{style:n});s.loadFromGeoJSON(i),l||s.removeGeoJSON(a);var o=m.default.Control.Manager.getInstance().getControl("styleeditor");o&&(o.addEditClickEvents(i),o.hideEditor()),m.default.Control.Waiting.close()},function(){console.log("query_error"),m.default.Control.Waiting.close()})}catch(t){m.default.Control.Notification.getInstance().showError("Catch Error: "+t),m.default.Control.Waiting.close()}}}}],[{key:"getInstance",value:function(){return g._instance||(g._instance=new g),g._instance}},{key:"_getBufferTypeString",value:function(t){return t===m.default.Common.CommonValues.bufferTypes.outer?"outer":t===m.default.Common.CommonValues.bufferTypes.inner?"inner":t===m.default.Common.CommonValues.bufferTypes.left?"left":t===m.default.Common.CommonValues.bufferTypes.right?"right":"both"}},{key:"_getBufferLength",value:function(t,e){return e===m.default.Common.CommonValues.bufferUnit.km?1e3*t:t}}]),g}();r.default=l},{"../kq":1075}],1117:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/query",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(t){return s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result.features?t.result.features:[]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("building query success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("building query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1118:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isValid=!1,this._object=null}var e,n;return i(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.default.Common.NetworkTools,n="",!1!==this._isValid){t.next=25;break}if(t.prev=3,""==i){t.next=8;break}n=i,t.next=17;break;case 8:if(!o){t.next=14;break}return t.next=11,e.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"building_query.zip","building_query.xml");case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.httpGetAsync(a.default.Common.CommonValues.configFilePath+"building_query.xml");case 16:n=t.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),console.log("BuildingQueryConfig init failed:"+t.t0.toString());case 25:case"end":return t.stop()}},t,this,[[3,22]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(t){return t._id}},{key:"getLayerSourceName",value:function(t){return t._src_name}},{key:"getLayerBuildingID",value:function(t){return t._building_id}},{key:"getLayerRequestCount",value:function(t){return t._reqcount?t._reqcount:"200"}},{key:"getLayerMaxStdScale",value:function(t){return t._max_stdscale}},{key:"getLayerMinStdScale",value:function(t){return t._min_stdscale}},{key:"getLayerFields",value:function(t){return t.fields}},{key:"getLayerFieldsAlias",value:function(t){return t.fields_alias}},{key:"findAllLayer",value:function(t,e){for(var n=[],r=this.layers(),i=0;i<r.length;i++){var o=r[i],a=this.getLayerID(o),s=this.getLayerSourceName(o);a===t&&s===e&&n.push(o)}return n}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1119:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",layerId:"",where:"",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/featuredelete",type:"post",dataType:"json",data:{layerId:i.layerId,where:i.where,version:i.version}}},schema:{data:function(t){return console.log("Feature delete return!"),r._response=t,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?[t.result]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Feature delete success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Feature delete error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1120:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",layerId:"",forceImport:!0,data:"",geoSRS:"EPSG:4326",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/featureimport",type:"post",dataType:"json",data:{layerId:i.layerId,forceImport:i.forceImport,data:i.data,geoSRS:i.geoSRS,outSRS:i.outSRS,version:i.version}}},schema:{data:function(t){return console.log("Feature import return!"),console.log("Response result: "),console.log(t),r._response=t,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Feature import success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Feature import error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1121:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isValid=!1,this._object=null}var e,n;return i(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.default.Common.NetworkTools,n="",!1!==this._isValid){t.next=25;break}if(t.prev=3,""==i){t.next=8;break}n=i,t.next=17;break;case 8:if(!o){t.next=14;break}return t.next=11,e.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"feature_import.zip","feature_import.xml");case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.httpGetAsync(a.default.Common.CommonValues.configFilePath+"feature_import.xml");case 16:n=t.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),console.log("FeatureImportConfig init failed:"+t.t0.toString());case 25:case"end":return t.stop()}},t,this,[[3,22]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(t){return t._id}},{key:"getLayerLabel",value:function(t){return t._label}},{key:"getLayerSourceName",value:function(t){return t._src_name}},{key:"getLayerOnlyKey",value:function(t){return a.default.Map.MapCommon.getKeyFromSourceNameLayerId(t._src_name,t._id)}},{key:"getLayerQueryID",value:function(t){return t._query_id}},{key:"getLayerFields",value:function(t){return t.fields}},{key:"getLayerFilterFields",value:function(t){return t.filter_fields}},{key:"getLayerPrimaryKey",value:function(t){return t.primary_key}},{key:"getLayerRequestCount",value:function(t){return t._reqcount?t._reqcount:"200"}},{key:"getLayerFieldsAlias",value:function(t){return t.fields_alias}},{key:"getLayerFilterFieldsAlias",value:function(t){return t.filter_fields_alias}},{key:"getLayerType",value:function(t){return t._type}},{key:"getLayerGeoType",value:function(t){return t._geo_type}},{key:"findLayer",value:function(t,e){for(var n=this.layers(),r=0;r<n.length;++r){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===t&&a===e)return i}return null}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1122:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",layerId:"",forceImport:!0,data:"",geoSRS:"EPSG:4326",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg="",this._response=null}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/featureupdate",type:"post",dataType:"json",data:{layerId:i.layerId,forceImport:i.forceImport,data:i.data,geoSRS:i.geoSRS,version:i.version}}},schema:{data:function(t){return console.log("Feature update return!"),r._response=t,s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("Feature update success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Feature update error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"response",value:function(){return this._response}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1123:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);s.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/query",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(t){return console.log("query info return!"),s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result.features?t.result.features:[]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("info query success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("info query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1124:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isValid=!1,this._object=null}var e,n;return i(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.default.Common.NetworkTools,n="",!1!==this._isValid){t.next=25;break}if(t.prev=3,""==i){t.next=8;break}n=i,t.next=17;break;case 8:if(!o){t.next=14;break}return t.next=11,e.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"info_query.zip","info_query.xml");case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.httpGetAsync(a.default.Common.CommonValues.configFilePath+"info_query.xml");case 16:n=t.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),console.log("InfoQueryConfig init failed:"+t.t0.toString());case 25:case"end":return t.stop()}},t,this,[[3,22]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerID",value:function(t){return t._id}},{key:"getLayerLabel",value:function(t){return t._label}},{key:"getLayerSourceName",value:function(t){return t._src_name}},{key:"getLayerQueryID",value:function(t){return t._query_id}},{key:"getLayerRequestCount",value:function(t){return t._reqcount?t._reqcount:"200"}},{key:"getLayerMaxStdScale",value:function(t){return t._max_stdscale}},{key:"getLayerMinStdScale",value:function(t){return t._min_stdscale}},{key:"getLayerFields",value:function(t){return t.fields}},{key:"getLayerFieldsAlias",value:function(t){return t.fields_alias}},{key:"getLayerShowName",value:function(t){return t.show_name}},{key:"getLayerExpression",value:function(t){return t.expression}},{key:"findLayer",value:function(t,e){for(var n=this.layers(),r=0;r<n.length;r++){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===t&&a===e)return i}return null}},{key:"findLayerByQueryId",value:function(t,e){for(var n=this.layers(),r=0;r<n.length;r++){var i=n[r],o=this.getLayerQueryID(i),a=this.getLayerSourceName(i);if(o===t&&a===e)return i}return null}},{key:"findAllLayer",value:function(t,e){for(var n=[],r=this.layers(),i=0;i<r.length;i++){var o=r[i],a=this.getLayerID(o),s=this.getLayerSourceName(o);a===t&&s===e&&n.push(o)}return n}},{key:"queryMode",value:function(){return this._isValid&&this._object&&"multi"===this._object.config._query_mode?"multi":"single"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1125:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq");(r=o)&&r.__esModule;var a={url:"",layerId:"",bbox:"",reqcount:200,version:"2.0"},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},a,t);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=new kendo.data.DataSource({transport:{read:{url:i.url+"/MapServer/legend",type:"post",dataType:"json",data:{layerId:i.layerId,bbox:i.bbox,reqcount:i.reqcount,version:i.version}}},schema:{data:function(t){return"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result?t.result:[]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return o.read().then(function(){r._dataSource=o,console.log("Legend query success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("Legend query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1126:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),l=o(t("../kq")),i=o(t("../common/CommonValues"));function o(t){return t&&t.__esModule?t:{default:t}}var u={url:"",layerId:"",origin:"",destation:"",middlepoint:[],barrierpoints:[],avoidareas:null,mode:0,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",querytype:i.default.networkAnalysisTypes.optimal_path},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return r(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},u,t);l.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=r.typeToUrlMethod(i.querytype),a=l.default.Query.QueryIDManager.getInstance().getCurrentID(),s=new kendo.data.DataSource({transport:{read:{url:i.url+"/networkserver/"+o,type:"post",dataType:"json",data:{layerId:i.layerId,origin:i.origin,destination:i.destination,middlepoint:i.middlepoint,barrierpoints:i.barrierpoints,avoidareas:i.avoidareas,mode:i.mode,geoSRS:i.geoSRS,outSRS:i.outSRS}}},schema:{data:function(t){return console.log("routeplan info return!"),l.default.Query.QueryIDManager.getInstance().isIDCanceled(a)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result.paths?t.result.paths:[]:void 0)},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return s.read().then(function(){r._dataSource=s,console.log("NetworkAnalysis success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("NetworkAnalysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}},{key:"typeToUrlMethod",value:function(t){return t==i.default.networkAnalysisTypes.optimal_path?"route":t==i.default.networkAnalysisTypes.trace_back?"traceback":t==i.default.networkAnalysisTypes.traveling_salesman_problem?"tsp":"route"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../common/CommonValues":952,"../kq":1075}],1127:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqcount:200,geoSRS:"EPSG:4326",outSRS:"EPSG:4326",geometry:"",fields:"",where:"",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/overlap",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqcount:i.reqcount,geoSRS:i.geoSRS,outSRS:i.outSRS,geometry:i.geometry,fields:i.fields,where:i.where,version:i.version}}},schema:{data:function(t){return console.log("Overlay analysis info return!"),s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result.features?t.result.features:[]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,console.log("overlay analysis success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("overlay analysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1128:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isValid=!1,this._object=null}var e,n;return i(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=arguments[2];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.default.Common.NetworkTools,n="",!1!==this._isValid){t.next=26;break}if(t.prev=3,""==i){t.next=8;break}n=i,t.next=17;break;case 8:if(!o){t.next=14;break}return t.next=11,e.loadZipFileAsync(s.default.Common.CommonValues.configFilePath+"overlay_analysis.zip","overlay_analysis.xml");case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.httpGetAsync(s.default.Common.CommonValues.configFilePath+"overlay_analysis.xml");case 16:n=t.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,a&&a(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(3),console.log("OverlayAnalysisConfig init failed:"+t.t0.toString());case 26:case"end":return t.stop()}},t,this,[[3,23]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"groups",value:function(){return this._isValid&&this._object.config.display&&this._object.config.display.group?[].concat(this._object.config.display.group):[]}},{key:"getGroupChildrenLayers",value:function(t){return t.layer?[].concat(t.layer):[]}},{key:"getLayerID",value:function(t){return t._id}},{key:"getLayerQueryID",value:function(t){return t._query_id}},{key:"getLayerLabel",value:function(t){return t._label}},{key:"getLayerSourceName",value:function(t){return t._src_name}},{key:"getLayerQueryID",value:function(t){return t._query_id}},{key:"getLayerRequestCount",value:function(t){return t._reqcount?t._reqcount:"200"}},{key:"getLayerQueryPrecision",value:function(t){return t._query_precision?t._query_precision:"8"}},{key:"getLayerType",value:function(t){return t.type}},{key:"getLayerFields",value:function(t){return t.fields}},{key:"getLayerFieldsAlias",value:function(t){return t.fields_alias}},{key:"getLayerChartField",value:function(t){return t.chart_field}},{key:"getLayerSummaryField",value:function(t){return t.summary_field}},{key:"getLayerExpression",value:function(t){return t.expression}},{key:"getGroupID",value:function(t){return t._id}},{key:"getGroupName",value:function(t){return t._name}},{key:"findLayer",value:function(t,e){for(var n=this.layers(),r=0;r<n.length;++r){var i=n[r],o=this.getLayerID(i),a=this.getLayerSourceName(i);if(o===t&&a===e)return i}return null}},{key:"findExactLayer",value:function(t,e,n){for(var r=this.layers(),i=0;i<r.length;++i){var o=r[i],a=this.getLayerID(o),s=this.getLayerQueryID(o),l=this.getLayerSourceName(o);if(a===t&&l===n&&s===e)return o}return null}},{key:"findAllLayer",value:function(t,e){for(var n=this.layers(),r=[],i=0;i<n.length;++i){var o=n[i],a=this.getLayerID(o),s=this.getLayerSourceName(o);a===t&&s===e&&r.push(o)}return r}},{key:"findLayerParentGroup",value:function(t,e){for(var n=this.groups(),r=0;r<n.length;++r)for(var i=n[r],o=this.getGroupChildrenLayers(i),a=0;a<o.length;++a){var s=o[a],l=this.getLayerID(s),u=this.getLayerSourceName(s);if(l===t&&u===e)return i}return null}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1129:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=k(t("./InfoQueryConfig")),i=k(t("./AdvancedSearchConfig")),o=k(t("./OverlayAnalysisConfig")),a=k(t("./InfoQuery")),s=k(t("./OverlayAnalysis")),l=k(t("./FeatureImportConfig")),u=k(t("./BufferAnalysis")),c=k(t("./LegendQuery")),h=k(t("./SqlQuery")),f=k(t("./FeatureImport")),p=k(t("./FeatureUpdate")),d=k(t("./FeatureDelete")),g=k(t("./BookmarkAdd")),m=k(t("./BookmarkDelete")),y=k(t("./BookmarkRead")),_=k(t("./QueryIDManager")),v=k(t("./SummaryAnalysis")),b=k(t("./BuildingQuery")),x=k(t("./BuildingQueryConfig")),w=k(t("./NetworkAnalysis")),L=k(t("./RasterAnalysis")),C=k(t("./SearchBarConfig"));function k(t){return t&&t.__esModule?t:{default:t}}var E={InfoQueryConfig:r.default,AdvancedSearchConfig:i.default,OverlayAnalysisConfig:o.default,InfoQuery:a.default,OverlayAnalysis:s.default,FeatureImportConfig:l.default,BufferAnalysis:u.default,LegendQuery:c.default,FeatureImport:f.default,FeatureUpdate:p.default,FeatureDelete:d.default,BookmarkAdd:g.default,BookmarkDelete:m.default,BookmarkRead:y.default,SqlQuery:h.default,QueryIDManager:_.default,SummaryAnalysis:v.default,BuildingQuery:b.default,BuildingQueryConfig:x.default,NetworkAnalysis:w.default,RasterAnalysis:L.default,SearchBarConfig:C.default};n.default=E},{"./AdvancedSearchConfig":1112,"./BookmarkAdd":1113,"./BookmarkDelete":1114,"./BookmarkRead":1115,"./BufferAnalysis":1116,"./BuildingQuery":1117,"./BuildingQueryConfig":1118,"./FeatureDelete":1119,"./FeatureImport":1120,"./FeatureImportConfig":1121,"./FeatureUpdate":1122,"./InfoQuery":1123,"./InfoQueryConfig":1124,"./LegendQuery":1125,"./NetworkAnalysis":1126,"./OverlayAnalysis":1127,"./OverlayAnalysisConfig":1128,"./QueryIDManager":1130,"./RasterAnalysis":1131,"./SearchBarConfig":1132,"./SqlQuery":1133,"./SummaryAnalysis":1134}],1130:[function(t,e,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var n=function(){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.currentID="",this.canceledIDArray=[]}return e(i,[{key:"toNextID",value:function(){this.currentID=t.uuid()}},{key:"getCurrentID",value:function(){return this.currentID}},{key:"cancelCurrentQuery",value:function(){this.canceledIDArray.push(this.currentID)}},{key:"isIDCanceled",value:function(e){return!!this.canceledIDArray.find(function(t){return t===e})}}],[{key:"getInstance",value:function(){return i._instance||(i._instance=new i),i._instance}},{key:"isDataCanceled",value:function(t){return!(!t||!t.length||1!==t.length||-1!==t[0])}},{key:"isDataArrayCanceled",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(t)for(var n=0;n<t.length;n++){var r=t[n];if(e&&(r=r.records),i.isDataCanceled(r))return!0}return!1}}]),i}();r.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],1131:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),l=o(t("../kq")),i=o(t("../common/CommonValues"));function o(t){return t&&t.__esModule?t:{default:t}}var u={url:"",layerId1:"",layerId2:"",type:0,condition:"",querytype:i.default.rasterAnalysisTypes.function},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return r(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},u,t);l.default.Map.MapConfig.getInstance();null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=r.typeToUrlMethod(i.querytype),a=l.default.Query.QueryIDManager.getInstance().getCurrentID(),s=new kendo.data.DataSource({transport:{read:{url:i.url+"/rasterserver/"+o,type:"post",dataType:"json",data:{layerId1:i.layerId1,layerId2:i.layerId2,type:i.type,condition:i.condition}}},schema:{data:function(t){return console.log("RasterAnalysis info return!"),l.default.Query.QueryIDManager.getInstance().isIDCanceled(a)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result:"")},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return s.read().then(function(){r._dataSource=s,console.log("RasterAnalysis success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("RasterAnalysis error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}},{key:"typeToUrlMethod",value:function(t){return t==i.default.rasterAnalysisTypes.function?"function":t==i.default.rasterAnalysisTypes.algebra?"algebra":t==i.default.rasterAnalysisTypes.logic?"logic":t==i.default.rasterAnalysisTypes.condition_select?"conditionselect":"function"}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../common/CommonValues":952,"../kq":1075}],1132:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isValid=!1,this._object=null}var e,n;return i(t,[{key:"initAsync",value:(e=regeneratorRuntime.mark(function t(){var e,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.default.Common.NetworkTools,n="",!1!==this._isValid){t.next=25;break}if(t.prev=3,""==i){t.next=8;break}n=i,t.next=17;break;case 8:if(!o){t.next=14;break}return t.next=11,e.loadZipFileAsync(a.default.Common.CommonValues.configFilePath+"search.zip","search.xml");case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,e.httpGetAsync(a.default.Common.CommonValues.configFilePath+"search.xml");case 16:n=t.sent;case 17:r=new X2JS,this._object=r.xml_str2json(n),this._isValid=!0,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(3),console.log("FeatureImportConfig init failed:"+t.t0.toString());case 25:case"end":return t.stop()}},t,this,[[3,22]])}),n=function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(){return n.apply(this,arguments)})},{key:"layers",value:function(){return this._isValid&&this._object&&this._object.config&&this._object.config.layers&&this._object.config.layers.layer?[].concat(this._object.config.layers.layer):[]}},{key:"getLayerProperty",value:function(t,e){return null!==t?t["_"+e]:null}},{key:"getLayerChildNode",value:function(t,e){return null!==t?t[e]:null}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1133:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq");(r=o)&&r.__esModule;var a={url:"",startindex:0,reqcount:200,sql:"",currentTime:"",version:"2.0"},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},a,t);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/execute",type:"post",dataType:"json",data:{startindex:i.startindex,reqcount:i.reqcount,sql:i.sql,currentTime:i.currentTime,version:i.version}}},schema:{data:function(t){return console.log(t),"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?t.result.features?t.result.features:[]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return o.read().then(function(){r._dataSource=o,console.log("sql query success!"),e&&e()},function(){r._dataSource=null,r._isLastError=!0,console.log("sql query error!"),n&&n()})}},{key:"data",value:function(){return this._dataSource?(console.log(this._dataSource.data()),this._dataSource.data()):[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=s},{"../kq":1075}],1134:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),s=(r=o)&&r.__esModule?r:{default:r};var l={url:"",startindex:0,layerId:"",reqCount:1e5,geoSRS:"EPSG:4326",areaSRS:"EPSG:4326",geometry:"",groupfields:"",summaryfields:"",summarytypes:"",isOverlap:"true",where:"",version:"2.0"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSource=null,this._isLastError=!1,this._errorMsg=""}return i(t,[{key:"queryAsync",value:function(t,e,n){var r=this,i=L.extend({},l,t);null!==r._dataSource&&(delete r._dataSource,r._dataSource=null);var o=s.default.Query.QueryIDManager.getInstance().getCurrentID(),a=new kendo.data.DataSource({transport:{read:{url:i.url+"/queryserver/summary",type:"post",dataType:"json",data:{layerId:i.layerId,startindex:i.startindex,reqCount:i.reqCount,geoSRS:i.geoSRS,areaSRS:i.areaSRS,geometry:i.geometry,groupfields:i.groupfields,summaryfields:i.summaryfields,summarytypes:i.summarytypes,isOverlap:i.isOverlap,where:i.where,version:i.version}}},schema:{data:function(t){return s.default.Query.QueryIDManager.getInstance().isIDCanceled(o)?[-1]:"error"===t.resultcode?(r._isLastError=!0,r._errorMsg=t.message,[]):(r._isLastError=!1,r._errorMsg="",t.result?[t.result]:t.features?t.features:[])},errors:function(t){return"success"===t.resultcode?"":t.message}},error:function(t){r._isLastError=!0,r._errorMsg=t.errors,console.log(t.errors)}});return a.read().then(function(){r._dataSource=a,e&&e()},function(){r._dataSource=null,r._isLastError=!0,n&&n()})}},{key:"data",value:function(){return this._dataSource?this._dataSource.data():[]}},{key:"isLastError",value:function(){return this._isLastError}},{key:"errorMsg",value:function(){return this._errorMsg}}],[{key:"getInstance",value:function(){return t._instance||(t._instance=new t),t._instance}}]),t}();n.default=a},{"../kq":1075}],1135:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=y(t("./ServiceToolCommon")),i=y(t("./ServiceToolCatalog")),o=y(t("./ServiceToolOverlap")),a=y(t("./ServiceToolDifference")),s=y(t("./ServiceToolProject")),l=y(t("./ServiceToolProjectSystem")),u=y(t("./ServiceToolSymDifference")),c=y(t("./ServiceToolGeometryCheck")),h=y(t("./ServiceToolUnion")),f=y(t("./ServiceToolArea")),p=y(t("./ServiceToolGeometryAttribute")),d=y(t("./ServiceToolExportShp")),g=y(t("./ServiceToolBuffer")),m=y(t("./ServiceToolOperator"));function y(t){return t&&t.__esModule?t:{default:t}}var _={ServiceToolCommon:r.default,ServiceToolCatalog:i.default,ServiceToolOverlap:o.default,ServiceToolDifference:a.default,ServiceToolProject:s.default,ServiceToolProjectSystem:l.default,ServiceToolSymDifference:u.default,ServiceToolGeometryCheck:c.default,ServiceToolUnion:h.default,ServiceToolArea:f.default,ServiceToolGeometryAttribute:p.default,ServiceToolExportShp:d.default,ServiceToolBuffer:g.default,ServiceToolOperator:m.default};n.default=_},{"./ServiceToolArea":1136,"./ServiceToolBuffer":1137,"./ServiceToolCatalog":1138,"./ServiceToolCommon":1139,"./ServiceToolDifference":1140,"./ServiceToolExportShp":1141,"./ServiceToolGeometryAttribute":1142,"./ServiceToolGeometryCheck":1143,"./ServiceToolOperator":1144,"./ServiceToolOverlap":1145,"./ServiceToolProject":1146,"./ServiceToolProjectSystem":1147,"./ServiceToolSymDifference":1148,"./ServiceToolUnion":1149}],1136:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/area"}var t,e;return i(n,[{key:"getAreaResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",areaSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1137:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/buffer"}var t,e;return i(n,[{key:"getBufferResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",sideType:"",radius:""},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1138:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=t("../kq"),s=(r=i)&&r.__esModule?r:{default:r};function l(t){return function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var u={url:"127.0.0.1",port:"8699"},o=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},u,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/CatalogServer/proc"}var e,r,i,o;return a(n,[{key:"getCatalog",value:(o=l(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{request:"GetCatalog",dbtype:4,server:"",dbname:"",username:"",password:""},e),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),t.next=4,s.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"getFieldInfo",value:(i=l(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{request:"GetFieldInfo",dbtype:4,server:"",dbname:"",username:"",password:"",featureclassname:""},e),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),t.next=4,s.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"getFeatureClass",value:(r=l(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{request:"GetFeatureClass",dbtype:4,server:"",dbname:"",username:"",password:"",featureclassname:""},e),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),t.next=4,s.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getFeature",value:(e=l(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{request:"GetFeature",dbtype:4,server:"",dbname:"",username:"",password:"",featureclassname:"",outSRS:"EPSG:4326",reqCount:s.default.ServiceTool.ServiceToolCommon.value_7fffffff},e),r=this.url+s.default.Common.NetworkTools.getParamString(n,this.url),t.next=4,s.default.Common.NetworkTools.httpGetAsync(r);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})}]),n}();n.default=o},{"../kq":1075}],1139:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq");(r=o)&&r.__esModule;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"hello",value:function(){console.log("hello ServiceToolCommon!")}}]),t}();a.value_7fffffff=2147483647,n.default=a},{"../kq":1075}],1140:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/difference"}var t,e;return i(n,[{key:"getDifferenceResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{srcData:"",destData:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1141:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/exportshp"}var t,e;return i(n,[{key:"getExportShpResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326",format:""},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1142:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/GeometryAttribute"}var t,e;return i(n,[{key:"getGeometryAttributeResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{data:"",attributenames:"",geoSRS:"EPSG:4326",areaSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1143:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/geometrycheck"}var t,e;return i(n,[{key:"getGeometryCheckResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{geometries:"",params:"",geoSRS:"EPSG:4326",areaSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1144:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/operator"}var t,e;return i(n,[{key:"getOperatorResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{operator:"",geometry1:"",geometry2:"",checkGeo:"true"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1145:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/overlap"}var t,e;return i(n,[{key:"getOverlapResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{srcData:"",destData:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1146:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/project"}var t,e;return i(n,[{key:"getProjectResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{data:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1147:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/projectsystem"}var t,e;return i(n,[{key:"getProjectResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{prj:"",destType:""},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1148:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/symdifference"}var t,e;return i(n,[{key:"getSymDifferenceResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{srcData:"",destData:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1149:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("../kq"),a=(r=o)&&r.__esModule?r:{default:r};var s={url:"127.0.0.1",port:"8699"},l=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=L.extend({},s,t);this.url="http://"+e.url+":"+e.port+"/KQGis/rest/services/geometryserver/union"}var t,e;return i(n,[{key:"getUnionResult",value:(t=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.extend({},{geometries:"",geoSRS:"EPSG:4326",outSRS:"EPSG:4326"},e),t.next=3,a.default.Common.NetworkTools.httpPostAsync(this.url,a.default.Common.NetworkTools.getParamString(n));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}),e=function(){var s=t.apply(this,arguments);return new Promise(function(o,a){return function e(t,n){try{var r=s[t](n),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})},function(t){return e.apply(this,arguments)})}]),n}();n.default=l},{"../kq":1075}],1150:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=s(t("leaflet")),a=s(t("./Point"));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.default.Bounds),r(n,[{key:"extend",value:function(t){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"extend",this).call(this,t),this}},{key:"getCenter",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getCenter",this).call(this,t))}},{key:"getBottomLeft",value:function(){return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getBottomLeft",this).call(this))}},{key:"getTopRight",value:function(){return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getBottomLeft",this).call(this))}},{key:"getSize",value:function(){return a.default.toPoint(i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getSize",this).call(this))}},{key:"contains",value:function(t){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"contains",this).call(this,t)}},{key:"intersects",value:function(t){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"intersects",this).call(this,t)}},{key:"overlaps",value:function(t){return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"overlaps",this).call(this,t)}}]),n}();n.default=l},{"./Point":1157,leaflet:560}],1151:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,L.DivIcon),e}();n.default=r},{}],1152:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,L.Icon),e}();n.default=r},{}],1153:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("leaflet"),a=(r=o)&&r.__esModule?r:{default:r};t("../../libs/proj4leaflet");var s=function(t){function r(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,a.default.Proj.ImageOverlay),i(r,[{key:"_initImage",value:function(){var t=this._image=a.default.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t._loaded=!1,t.onselectstart=a.default.Util.falseFn,t.onmousemove=a.default.Util.falseFn,t.onload=a.default.bind(this.onLoad,this),t.onerror=a.default.bind(this.fire,this,"error"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt}},{key:"getContainer",value:function(){var t=".leaflet-"+this.options.pane+"-pane";return $(""+t)[0]}},{key:"onLoad",value:function(){this.fire("load"),this._image._loaded=!0}}]),r}();n.default=s},{"../../libs/proj4leaflet":52,leaflet:560}],1154:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var r=function(t){function r(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,L.LatLng),i(r,[{key:"distanceTo",value:function(t){return function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"distanceTo",this).call(this,t)}}]),r}();n.default=r},{}],1155:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.LatLngBounds),r(n,[{key:"getCenter",value:function(){return function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getCenter",this).call(this)}}]),n}();n.default=i},{}],1156:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.latlng=e.latlng,this.layerPoint=e.layerPoint,this.containerPoint=e.containerPoint,this.originalEvent=e.originalEvent,this.type=e.type,this.target=e.target}},{}],1157:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=t("leaflet"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(t){function r(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,s.default.Point),i(r,[{key:"add",value:function(t){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"add",this).call(this,t)}},{key:"subtract",value:function(t){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"subtract",this).call(this,t)}},{key:"divideBy",value:function(t){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"divideBy",this).call(this,t)}},{key:"multiplyBy",value:function(t){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"multiplyBy",this).call(this,t)}},{key:"round",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"round",this).call(this)}},{key:"floor",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"floor",this).call(this)}},{key:"ceil",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"ceil",this).call(this)}},{key:"distanceTo",value:function(t){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"distanceTo",this).call(this,t)}},{key:"equals",value:function(t){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"equals",this).call(this,t)}},{key:"toString",value:function(){return o(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toString",this).call(this)}}]),r}();n.default=l},{leaflet:560}],1158:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=h(t("./Point")),i=h(t("./Bounds")),o=h(t("./LatLng")),a=h(t("./LatLngBounds")),s=h(t("./ImageOverlay")),l=h(t("./MouseEvent")),u=h(t("./Icon")),c=h(t("./DivIcon"));function h(t){return t&&t.__esModule?t:{default:t}}var f={Point:r.default,Bounds:i.default,LatLng:o.default,LatLngBounds:a.default,ImageOverlay:s.default,MouseEvent:l.default,Icon:u.default,DivIcon:c.default};n.default=f},{"./Bounds":1150,"./DivIcon":1151,"./Icon":1152,"./ImageOverlay":1153,"./LatLng":1154,"./LatLngBounds":1155,"./MouseEvent":1156,"./Point":1157}],1159:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={enable:!0,placeholder:"",filter:"contains",dataSource:{data:[]},change:function(t){console.log("Value of auto complete has changed!")},dataBound:function(t){console.log("Auto complete has received data!")}},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoAutoComplete(n),this._autoComplete=$("#"+t).data("kendoAutoComplete")}return i(r,[{key:"enable",value:function(t){this._autoComplete.enable(t)}},{key:"focus",value:function(){this._autoComplete.focus()}},{key:"setDataSource",value:function(t){var e=new kendo.data.DataSource({data:t});this._autoComplete.setDataSource(e)}},{key:"value",value:function(t){return this._autoComplete.value(t)}}]),r}();n.default=r},{}],1160:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={enable:!0,icon:"",imageUrl:"",spriteCssClass:"",click:function(t){console.log("button clicked!")}},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoButton(n),this._button=$("#"+t).data("kendoButton")}return i(r,[{key:"enable",value:function(t){this._button.enable(t)}}]),r}();n.default=r},{}],1161:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={renderAs:"canvas",series:[{field:"value",type:"pie"}]};n.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=L.extend({},i,n);$("#"+e).kendoChart(r),this._chart=$("#"+e).data("kendoChart")}},{}],1162:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var a={label:"",name:"",value:"",enable:!0,checked:!1},i=function(){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=this;n._id=t,n._options=L.extend({},a,e);var r="<input type='checkbox' class='k-checkbox' id='"+t+"'>",i="<label class='k-checkbox-label' for='"+t+"'>"+n._options.label+"</label>";$("#"+t).replaceWith($(r)),$("#"+t).after($(i)),n.name(n._options.name),n.value(n._options.value),n.enable(n._options.enable),n.checked(n._options.checked)}return r(o,[{key:"name",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("name");$("#"+this._id).attr("name",t)}},{key:"value",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).attr("value");$("#"+this._id).attr("value",t)}},{key:"enable",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return!$("#"+this._id).prop("disabled");$("#"+this._id).prop("disabled",!t)}},{key:"checked",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("checked");$("#"+this._id).prop("checked",t)}}]),o}();n.default=i},{}],1163:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={text:"",index:0,dataSource:{data:[]},change:function(t){console.log("value changed!")},select:function(t){}},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoDropDownList(n),this._dropdownList=$("#"+t).data("kendoDropDownList")}return i(r,[{key:"enable",value:function(t){this._dropdownList.enable(t)}},{key:"value",value:function(t){return this._dropdownList.value(t)}},{key:"readonly",value:function(t){this._dropdownList.readOnly(t)}},{key:"setDataSource",value:function(t){var e=new kendo.data.DataSource({data:t});this._dropdownList.setDataSource(e)}}]),r}();n.default=r},{}],1164:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoGrid(n),this._grid=$("#"+t).data("kendoGrid")}return i(r,[{key:"select",value:function(t){return this._grid.select(t)}},{key:"clearSelection",value:function(){this._grid.clearSelection()}},{key:"dataItem",value:function(t){return this._grid.dataItem(t)}},{key:"items",value:function(){return this._grid.items()}},{key:"setDataSource",value:function(t){return this._grid.setOptions({dataSource:t})}},{key:"setOptions",value:function(t){this._grid.setOptions(t)}}]),r}();n.default=r},{}],1165:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=t("../kq");(r=i)&&r.__esModule;var a=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=n;return r._id=t,r._options=e||{},r._createWindow(),r._createGrid(),$(r._id+" .layer-data-upload").kendoUpload({async:{saveUrl:"http://172.16.0.8:8080/file/sliceFileUpload?chunkSize=10485760",removeUrl:"remove",autoUpload:!1,chunkSize:10485760},multiple:!1,template:kendo.template(n._uploadTemplate()),localization:{select:"文件上传",headerStatusUploading:"上传中",headerStatusUploaded:"上传完成"}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,L.Evented),o(i,[{key:"_createWindow",value:function(){var t=this;$(t._id).kendoWindow({width:700,height:570,content:{template:"<div class='layer-data-download'></div><input type='file' name='files' class='layer-data-upload'/>"},open:function(){t._refreshData()}}).data("kendoWindow").wrapper.find(".k-window-title").html('<i class="fa fa-cloud-download" aria-hidden="true"></i><span style="margin-left: 6px">工程加载</span>')}},{key:"_createGrid",value:function(){var n=this;$(n._id+" .layer-data-download").kendoGrid({height:300,toolbar:[{template:kendo.template('<button class="refresh-data"><span class="fa fa-refresh"></span>刷新数据</button>')}],columns:[{field:"name",title:"名称"},{field:"modify_time",title:"修改时间"},{field:"type",title:"类型"},{field:"size",title:"大小"},{command:{text:"加载",click:function(t){var e=this.dataItem($(t.currentTarget).closest("tr"));n.fire("load",{url:e.download_url,name:e.name})}},title:" ",width:"90px"}]}).data("kendoGrid"),$(n._id+" .layer-data-download .refresh-data").kendoButton({click:function(){n._refreshData()}})}},{key:"_loadData",value:function(t){var e=this.dataItem($(t.currentTarget).closest("tr"));this.fire("load",{url:e.download_url})}},{key:"_refreshData",value:function(){var a=this;$.ajax({type:"POST",url:"http://172.16.0.8:8080/file/getFilesList",success:function(t){var e=[],n=a._options.filter;if("success"===t.result)for(var r=0;r<t.list.length;++r){var i=t.list[r],o=new RegExp(i.FILE_TYPE,"i");(!n||n&&-1!=n.search(o))&&e.push({name:i.FILE_NAME,modify_time:i.UPLOAD_END_TIME,type:i.FILE_TYPE,size:a._formatFileSize(i.FILE_SIZE),download_url:i.downloadPath})}console.log("@@@@@@@files list: ",e),$(a._id+" .layer-data-download").data("kendoGrid").setDataSource(new kendo.data.DataSource({data:e}))}})}},{key:"_formatFileSize",value:function(t){return(Math.ceil(t/1024)||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+" KB"}},{key:"_uploadTemplate",value:function(){return"\n        <div class=\"layer-data-upload-template\">\n            <span class='k-progress'></span>\n            <div class='file-wrapper'>\n                <span class='file-icon'></span> \n                <h4 class='file-heading file-name-heading'>Name: #=name#</h4>\n                <h4 class='file-heading file-size-heading'>Size: #=size# bytes</h4>\n                <strong class=\"k-upload-status\">\n                    <button type='button' class='k-upload-action'></button>\n                    <button type='button' class='k-upload-action'></button>\n                </strong>\n            </div>\n        </div>"}}]),i}();n.default=a},{"../kq":1075}],1166:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={selectable:!0,dataSource:{data:[]},template:"<div>#:name#</div>",change:function(t){console.log("list view selection changed!")},dataBound:function(t){console.log("list view has received data!")}},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoListView(n),this._listView=$("#"+t).data("kendoListView")}return i(r,[{key:"dataItems",value:function(){return this._listView.dataItems()}},{key:"select",value:function(t){return this._listView.select(t)}},{key:"selectFirstItem",value:function(){this._listView.select(this._listView.element.children().first())}},{key:"dataItem",value:function(t){return this._listView.dataItem(t)}},{key:"setDataSource",value:function(t){var e=new kendo.data.DataSource({data:t});this._listView.setDataSource(e)}}]),r}();n.default=r},{}],1167:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={mask:"",value:"",change:function(t){console.log("value changed!")}},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoMaskedTextBox(n),this._maskedTextBox=$("#"+t).data("kendoMaskedTextBox")}return i(r,[{key:"enable",value:function(t){this._maskedTextBox.enable(t)}},{key:"readonly",value:function(t){this._maskedTextBox.readOnly(t)}},{key:"value",value:function(t){return this._maskedTextBox.value(t)}}]),r}();n.default=r},{}],1168:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoPanelBar(n),this._panelbar=$("#"+t).data("kendoPanelBar")}return i(r,[{key:"clearSelection",value:function(){return this._panelbar.clearSelection()}},{key:"collapse",value:function(t){return this._panelbar.collapse(t)}},{key:"expand",value:function(t){return this._panelbar.expand(t)}},{key:"enable",value:function(t,e){this._panelbar.enable(t,e)}},{key:"select",value:function(t){if(!t)return this._panelbar.select();this._panelbar.select(t)}},{key:"dataItem",value:function(t){var e=$(t).closest(".k-panelbar"),n=this._panelbar.options.dataSource,r=$(t).parentsUntil(e,".k-item").map(function(){return $(this).index()}).get().reverse();r.push($(t).index());for(var i=-1,o=r.length;++i<o;)n=n[r[i]],n=i<o-1?n.items:n;return n}}]),r}();n.default=r},{}],1169:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var a={label:"",name:"",value:"",enable:!0,checked:!1},i=function(){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=this;n._id=t,n._options=L.extend({},a,e);var r="<input type='radio' class='k-radio' id='"+t+"'>",i="<label class='k-radio-label' for='"+t+"'>"+n._options.label+"</label>";$("#"+t).replaceWith($(r)),$("#"+t).after($(i)),n.name(n._options.name),n.value(n._options.value),n.enable(n._options.enable),n.checked(n._options.checked)}return r(o,[{key:"name",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("name");$("#"+this._id).attr("name",t)}},{key:"value",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).attr("value");$("#"+this._id).attr("value",t)}},{key:"enable",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return!$("#"+this._id).prop("disabled");$("#"+this._id).prop("disabled",!t)}},{key:"checked",value:function(t){if(KQ.Map.MapCommon._isGetPropertyMethod(arguments))return $("#"+this._id).prop("checked");$("#"+this._id).prop("checked",t)}}]),o}();n.default=i},{}],1170:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoTabStrip(n),this._tabStrip=$("#"+t).data("kendoTabStrip"),console.log(" this._tabStrip "+this._tabStrip)}return i(r,[{key:"select",value:function(t){return this._tabStrip.select(t)}}]),r}();n.default=r},{}],1171:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._id=t,$("#"+t).addClass("k-textbox")}return r(e,[{key:"value",value:function(t){return void 0===t?$("#"+this._id).val():$("#"+this._id).val(t)}}]),e}();n.default=i},{}],1172:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var o={},r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=L.extend({},o,e);$("#"+t).kendoTreeList(n),this._treeList=$("#"+t).data("kendoTreeList")}return i(r,[{key:"select",value:function(t){return this._treeList.select(t)}},{key:"clearSelection",value:function(){this._treeList.clearSelection()}},{key:"expand",value:function(t){return this._treeList.expand(t)}},{key:"collapse",value:function(t){this._treeList.collapse(t)}},{key:"dataItem",value:function(t){return this._treeList.dataItem(t)}},{key:"items",value:function(){return this._treeList.items()}},{key:"setDataSource",value:function(t){return this._treeList.setDataSource(t)}}]),r}();n.default=r},{}],1173:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=t("./TreeViewNode"),a=(r=o)&&r.__esModule?r:{default:r};var s=t("leaflet"),l={},u=function(t){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this)),r=n,i=s.extend({},l,e);return r._container=t,$("#"+r._container).fancytree(i),$("#"+r._container).fancytree({ajax:{debugDelay:1e3},lazyLoad:function(t,e){r._subItemLazyLoadFn?e.result=$.Deferred(function(t){setTimeout(function(){t.resolve(r._subItemLazyLoadFn(e.node))},1e3)}):e.result=[]}}),$("#"+r._container).on("fancytreeclick",function(t,e){r.fire("click",{event:t,data:e})}),$("#"+r._container).on("fancytreeselect",function(t,e){r.fire("select",{event:t,data:e})}),r._tree=$("#"+r._container).fancytree("getTree"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,s.Evented),i(o,[{key:"clear",value:function(){this._tree.clear()}},{key:"activeNode",value:function(t){return this._tree.activateKey(t)}},{key:"count",value:function(){return this._tree.count()}},{key:"getNodeByKey",value:function(t){return new a.default(this._tree.getNodeByKey(t))}},{key:"visit",value:function(t){return this._tree.visit(t)}},{key:"reload",value:function(t){return this._tree.reload(t)}},{key:"subItemsLazyLoadFn",value:function(t){this._subItemLazyLoadFn=t}}]),o}();n.default=u},{"./TreeViewNode":1174,leaflet:560}],1174:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this._node=t}return r(e,[{key:"isExpanded",value:function(){return this._node.isExpanded()}},{key:"isFolder",value:function(){return this._node.isFolder()}},{key:"isSelected",value:function(){return this._node.isSelected()}},{key:"setExpanded",value:function(t){return this._node.setExpanded(t)}},{key:"setSelected",value:function(t){return this._node.setSelected(t)}},{key:"setTitle",value:function(t){return this._node.setTitle(t)}}]),e}();n.default=i},{}],1175:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=v(t("./Button")),i=v(t("./AutoComplete")),o=v(t("./MaskedTextBox")),a=v(t("./DropdownList")),s=v(t("./Checkbox")),l=v(t("./ListView")),u=v(t("./RadioButton")),c=v(t("./TextArea")),h=v(t("./TreeList")),f=v(t("./Grid")),p=v(t("./TreeView")),d=v(t("./TreeViewNode")),g=v(t("./Chart")),m=v(t("./TabStrip")),y=v(t("./PanelBar")),_=v(t("./LayerDataLoadDialog"));function v(t){return t&&t.__esModule?t:{default:t}}var b={Button:r.default,AutoComplete:i.default,MaskedTextBox:o.default,DropdownList:a.default,Checkbox:s.default,ListView:l.default,RadioButton:u.default,TextArea:c.default,TreeList:h.default,Grid:f.default,TreeView:p.default,TreeViewNode:d.default,Chart:g.default,TabStrip:m.default,PanelBar:y.default,LayerDataLoadDialog:_.default};n.default=b},{"./AutoComplete":1159,"./Button":1160,"./Chart":1161,"./Checkbox":1162,"./DropdownList":1163,"./Grid":1164,"./LayerDataLoadDialog":1165,"./ListView":1166,"./MaskedTextBox":1167,"./PanelBar":1168,"./RadioButton":1169,"./TabStrip":1170,"./TextArea":1171,"./TreeList":1172,"./TreeView":1173,"./TreeViewNode":1174}],1176:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Circle),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLng",value:function(){return this.getLatLng()}}]),n}();n.default=i},{}],1177:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Polygon),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLngs",value:function(){return this.getLatLngs()}},{key:"getCenter",value:function(){return this.getCenter()}},{key:"getBounds",value:function(){return this.getBounds()}}]),n}();n.default=i},{}],1178:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Polyline),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLngs",value:function(){return this.getLatLngs()}},{key:"getCenter",value:function(){return this.getCenter()}},{key:"getBounds",value:function(){return this.getBounds()}}]),n}();n.default=i},{}],1179:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();var i=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,L.Rectangle),r(n,[{key:"toGeoJSON",value:function(){return this.toGeoJSON()}},{key:"getLatLngs",value:function(){return this.getLatLngs()}},{key:"getCenter",value:function(){return this.getCenter()}},{key:"getBounds",value:function(){return this.getBounds()}}]),n}();n.default=i},{}],1180:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=s(t("./Polyline")),i=s(t("./Polygon")),o=s(t("./Rectangle")),a=s(t("./Circle"));function s(t){return t&&t.__esModule?t:{default:t}}var l={Polyline:r.default,Polygon:i.default,Rectangle:o.default,Circle:a.default};n.default=l},{"./Circle":1176,"./Polygon":1177,"./Polyline":1178,"./Rectangle":1179}]},{},[1075]),function o(a,s,l){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return u(a[e][1][t]||t)},i,i.exports,o,a,s,l)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){L.Control.StyleEditor=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft",enabled:!1,colorRamp:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],markerApi:"../../images/markers/",markers:["circle-stroked","circle","square-stroked","square","triangle-stroked","triangle","star-stroked","star","cross","marker-stroked","marker","religious-jewish","religious-christian","religious-muslim","cemetery","rocket","airport","heliport","rail","rail-metro","rail-light","bus","fuel","parking","parking-garage","airfield","roadblock","ferry","harbor","bicycle","park","park2","museum","lodging","monument","zoo","garden","campsite","theatre","art-gallery","pitch","soccer","america-football","tennis","basketball","baseball","golf","swimming","cricket","skiing","school","college","library","post","fire-station","town-hall","police","prison","embassy","beer","restaurant","cafe","shop","fast-food","bar","bank","grocery","cinema","pharmacy","hospital","danger","industrial","warehouse","commercial","building","place-of-worship","alcohol-shop","logging","oil-well","slaughterhouse","dam","water","wetland","disability","telephone","emergency-telephone","toilets","waste-basket","music","land-use","city","town","village","farm","bakery","dog-park","lighthouse","clothing-store","polling-place","playground","entrance","heart","london-underground","minefield","rail-underground","rail-above","camera","laundry","car","suitcase","hairdresser","chemist","mobilephone","scooter"],editlayers:[],layerGroups:[],openOnLeafletDraw:!0,showTooltip:!0,strings:{tooltip:"Click on the element you want to style",tooltipNext:"Choose another element you want to style"},useGrouping:!0,styleForm:void 0,tooltipCallback:function(t){t.options.tooltipWrapper||(t.options.tooltipWrapper=L.DomUtil.create("div","leaflet-styleeditor-tooltip-wrapper",document.body)),t.options.tooltip||(t.options.tooltip=L.DomUtil.create("div","leaflet-styleeditor-tooltip",t.options.tooltipWrapper)),t.options.tooltip.innerHTML=L.styleEditorLocal.tooltip},errorCallback:function(t){console.log("error:"+t)},bufferCallback:function(t){console.log("buffer!")}},onAdd:function(t){return this.options.map=t,this.createUi()},createUi:function(){var t="";L.Browser.touch&&(t=" leaflet-touch");var e=this.options.controlDiv=L.DomUtil.create("div","leaflet-control-styleeditor"+t);(this.options.controlUI=L.DomUtil.create("div","leaflet-control-styleeditor-interior"+t,e)).title=L.styleEditorLocal.buttonTitle;var n=this.options.styleEditorDiv=L.DomUtil.create("div","leaflet-styleeditor",this.options.map._container);this.options.styleEditorHeader=L.DomUtil.create("div","leaflet-styleeditor-header",n);var r=L.DomUtil.create("div","leaflet-styleeditor-interior",n);n.style.zIndex=1e4;var i={};i.iconDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.markerColorDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.sizeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.colorDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.opacityDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.lineStrokeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.fillColorDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.fillOpacityDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.pointBufferTypeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.lineBufferTypeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.fillBufferTypeDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r),i.bufferDiv=L.DomUtil.create("div","leaflet-styleeditor-interior-element",r);return this.options.styleEditorUi=i,this.addDomEvents(),this.addLeafletDrawEvents(),this.addButtons(),this.options.styleForm=new L.StyleForms({colorRamp:this.options.colorRamp,styleEditorUi:i,styleEditorDiv:n,markerApi:this.options.markerApi,markers:this.options.markers,map:this.options.map,errorCallback:this.options.errorCallback,bufferCallback:this.options.bufferCallback,is_use_marker_icon:this.options.is_use_marker_icon}),e},addDomEvents:function(){L.DomEvent.addListener(this.options.controlDiv,"click",function(t){this.clickHandler(t),t.stopPropagation()},this),L.DomEvent.addListener(this.options.controlDiv,"dblclick",function(t){t.stopPropagation()},this),L.DomEvent.addListener(this.options.styleEditorDiv,"click",L.DomEvent.stopPropagation),L.DomEvent.addListener(this.options.styleEditorDiv,"mouseenter",this.disableLeafletActions,this),L.DomEvent.addListener(this.options.styleEditorDiv,"mouseleave",this.enableLeafletActions,this),L.DomEvent.addListener(this.options.controlUI,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.options.controlUI,"mousedown",L.DomEvent.stop)},addLeafletDrawEvents:function(){this.options.openOnLeafletDraw&&L.Control.Draw},addButtons:function(){var t=L.DomUtil.create("button","leaflet-styleeditor-button styleeditor-nextBtn",this.options.styleEditorHeader);t.title=L.styleEditorLocal.tooltipNext,L.DomEvent.addListener(t,"click",function(t){this.hideEditor(),L.DomUtil.hasClass(this.options.controlUI,"enabled")&&this.createTooltip(),t.stopPropagation()},this)},clickHandler:function(t){this.options.enabled=!this.options.enabled,this.options.enabled?(this.enable(),this.fire("enabled",{})):(L.DomUtil.removeClass(this.options.controlUI,"enabled"),this.disable())},disableLeafletActions:function(){var t=this.options.map;t.dragging.disable(),t.touchZoom.disable(),t.doubleClickZoom.disable(),t.scrollWheelZoom.disable(),t.boxZoom.disable(),t.keyboard.disable()},enableLeafletActions:function(){var t=this.options.map;t.dragging.enable(),t.touchZoom.enable(),t.doubleClickZoom.enable(),t.scrollWheelZoom.enable(),t.boxZoom.enable(),t.keyboard.enable()},enable:function(){L.DomUtil.addClass(this.options.controlUI,"enabled"),this.options.map.eachLayer(this.addEditClickEvents,this),this.createTooltip()},disable:function(){this.options.editlayers.forEach(this.removeEditClickEvents,this),this.options.editlayers=[],this.options.layerGroups=[],this.hideEditor(),this.removeTooltip()},addEditClickEvents:function(t){if(this.options.useGrouping&&t instanceof L.LayerGroup)this.options.layerGroups.push(t);else if(t instanceof L.Marker||t instanceof L.Path||t instanceof L.GeoJSON){var e=t.on("click",this.initChangeStyle,this);this.options.editlayers.push(e)}},removeEditClickEvents:function(t){t.off("click",this.initChangeStyle,this)},hideEditor:function(){L.DomUtil.removeClass(this.options.styleEditorDiv,"editor-enabled")},showEditor:function(){var t=this.options.styleEditorDiv;L.DomUtil.hasClass(t,"editor-enabled")||L.DomUtil.addClass(t,"editor-enabled")},initChangeStyle:function(t){this.options.currentElement=this.options.useGrouping?this.getMatchingElement(t):t,this.showEditor(),this.removeTooltip(),t.target instanceof L.Marker?this.showMarkerForm():this.showGeometryForm()},showGeometryForm:function(){this.options.styleForm.showGeometryForm(this.options.currentElement)},showMarkerForm:function(){this.options.styleForm.showMarkerForm(this.options.currentElement)},createTooltip:function(){this.options.showTooltip&&this.options.tooltipCallback(this)},getMatchingElement:function(t){var n=null,e=t.target;for(i=0;i<this.options.layerGroups.length;++i)if((n=this.options.layerGroups[i])&&e!=n&&n.hasLayer(e))return n.options&&n.options.opacity||(n.options=e.options,e.setIcon&&(n.setIcon=function(e){n.eachLayer(function(t){t instanceof L.Marker&&t.setIcon(e)})})),this.getMatchingElement({target:n});return t},removeTooltip:function(){this.options.tooltip&&this.options.tooltip.parentNode&&(this.options.tooltip.remove(),this.options.tooltip=void 0)},isEnabled:function(){return this.options.enabled}}),L.control.styleEditor=function(t){return new L.Control.StyleEditor(t)}},{}],2:[function(t,e,n){L.StyleForms=L.Class.extend({options:{currentMarkerStyle:{size:"m",color:"3498db"}},initialize:function(t){L.setOptions(this,t),this.createIconUrl(),this.createMarkerColor(),this.createMarkerSize(),this.createColor(),this.createOpacity(),this.createStroke(),this.createFillColor(),this.createFillOpacity(),this.createPointBufferType(),this.createLineBufferType(),this.createFillBufferType(),this.createBuffer(),this.addDOMEvents()},addDOMEvents:function(){L.DomEvent.addListener(this.options.map,"click",this.hideSelectInput,this),L.DomEvent.addListener(this.options.styleEditorDiv,"click",this.hideSelectInput,this)},clearForm:function(){var n=this.options.styleEditorUi;this.hideSelectInput(),Object.keys(n).forEach(function(t){var e=n[t];e.innerHTML&&this.hideElement(e)},this)},showGeometryForm:function(t){this.clearForm(),this.options.currentElement=t;var e=this.options.styleEditorUi,n=t.target.options;n.opacity?e.opacityInput.value=n.opacity:e.opacityInput.value=1,n.fillOpacity?e.fillOpacityInput.value=n.fillOpacity:e.fillOpacityInput.value=.2,this.showElement(e.colorDiv),this.showElement(e.opacityDiv),this.showElement(e.lineStrokeDiv);var r=t.target,i=!!r.options.isPlot;r instanceof L.Polygon||r instanceof L.LayerGroup||r instanceof L.Circle||r instanceof L.CircleMarker?(this.showElement(e.fillColorDiv),this.showElement(e.fillOpacityDiv),r instanceof L.Polygon||r instanceof L.LayerGroup||r instanceof L.Circle&&!(r instanceof L.Marker)?i||this.showElement(e.fillBufferTypeDiv):i||this.showElement(e.pointBufferTypeDiv)):r instanceof L.Polyline&&(i||this.showElement(e.lineBufferTypeDiv)),i||this.showElement(e.bufferDiv)},showMarkerForm:function(t){this.clearForm();var e=(this.options.currentElement=t).target.options.icon.options,n=this.options.currentMarkerStyle;e.iconColor&&(n.color=e.iconColor),e.icon&&(n.icon=e.icon),e.iconSizeChar&&(n.size=e.iconSizeChar);var r=this.options.styleEditorUi;this.options.is_use_marker_icon&&(this.showElement(r.iconDiv),this.showElement(r.markerColorDiv),this.showElement(r.sizeDiv),this.styleSelectInput()),this.showElement(r.pointBufferTypeDiv),this.showElement(r.bufferDiv)},setNewMarker:function(){var t=this.options.currentMarkerStyle;if(t.size&&t.icon&&t.color){var e;switch(t.size){case"s":e=[20,50];break;case"m":e=[30,70];break;case"l":e=[35,90]}var n=new L.Icon({iconUrl:this.getIconSrc(),iconSize:e,iconSizeChar:t.size,iconColor:t.color,icon:t.icon,iconAnchor:[e[0]/2,e[1]/2],popupAnchor:[0,-e[1]/2]}),r=this.options.currentElement.target;r.setIcon(n),this.fireChangeEvent(r)}this.hideSelectInput(),this.styleSelectInput()},showElement:function(t){t&&L.DomUtil.removeClass(t,"leaflet-styleeditor-hidden")},hideElement:function(t){t&&L.DomUtil.addClass(t,"leaflet-styleeditor-hidden")},createIconUrl:function(){var t=this.options.styleEditorUi.iconDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.icon,this.createSelectInput(t,function(t){var e=t.target.getAttribute("value");this.options.selectBoxImage.setAttribute("value",e),this.options.currentMarkerStyle.icon=e,this.setNewMarker()}.bind(this),this.options.markers)},createMarkerColor:function(){var t=this.options.styleEditorUi.markerColorDiv,e=this.options.colorUi=L.DomUtil.create("div","leaflet-styleeditor-ui-element",t);L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.color,this.createColorPicker(t,function(t){var e=this.rgbToHex(t.target.style.backgroundColor);this.options.currentMarkerStyle.color=e.replace("#",""),this.setNewMarker()}.bind(this))},createMarkerSize:function(){var t=this.options.styleEditorUi.sizeDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.size;var e=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-small",this.options.styleEditorUi.sizeDiv),n=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-medium",this.options.styleEditorUi.sizeDiv),r=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-large",this.options.styleEditorUi.sizeDiv);L.DomEvent.addListener(e,"click",function(){this.options.currentMarkerStyle.size="s",this.setNewMarker()},this),L.DomEvent.addListener(n,"click",function(){this.options.currentMarkerStyle.size="m",this.setNewMarker()},this),L.DomEvent.addListener(r,"click",function(){this.options.currentMarkerStyle.size="l",this.setNewMarker()},this)},createColor:function(){var t=this.options.styleEditorUi.colorDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.color,this.createColorPicker(t,function(t){var e=this.rgbToHex(t.target.style.backgroundColor);this.setStyle("color",e)}.bind(this))},createStroke:function(){var t=this.options.styleEditorUi.lineStrokeDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.lineStroke;var e=L.DomUtil.create("div","leaflet-styleeditor-stroke",t);e.style.backgroundPosition="0px -75px";var n=L.DomUtil.create("div","leaflet-styleeditor-stroke",t);n.style.backgroundPosition="0px -95px";var r=L.DomUtil.create("div","leaflet-styleeditor-stroke",t);r.style.backgroundPosition="0px -115px",L.DomEvent.addListener(e,"click",function(t){this.setStyle("dashArray","1")},this),L.DomEvent.addListener(n,"click",function(t){this.setStyle("dashArray","10,10")},this),L.DomEvent.addListener(r,"click",function(t){this.setStyle("dashArray","15, 10, 1, 10")},this)},createOpacity:function(){var t=this.options.styleEditorUi.opacityDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.opacity,this.options.styleEditorUi.opacityInput=this.createNumberInput(t,function(t){var e=t.target.value;this.setStyle("opacity",e)}.bind(this),.7,0,1,.1)},createFillColor:function(){var t=this.options.styleEditorUi.fillColorDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.fillColor,this.createColorPicker(t,function(t){var e=this.rgbToHex(t.target.style.backgroundColor);this.setStyle("fillColor",e)}.bind(this))},createFillOpacity:function(){var t=this.options.styleEditorUi.fillOpacityDiv;L.DomUtil.create("label","leaflet-styleeditor-label",t).innerHTML=L.styleEditorLocal.fillOpacity,this.options.styleEditorUi.fillOpacityInput=this.createNumberInput(t,function(t){var e=t.target.value;this.setStyle("fillOpacity",e)}.bind(this),.4,0,1,.1)},createColorPicker:function(t,n){var r=L.DomUtil.create("div","leaflet-styleeditor-colorpicker",t);return this.options.colorRamp.forEach(function(t){var e=L.DomUtil.create("div","leaflet-styleeditor-color",r);e.style.backgroundColor=t,L.DomEvent.addListener(e,"click",function(t){t.stopPropagation(),n(t)})},this),r},createNumberInput:function(t,e,n,r,i,o){var a=L.DomUtil.create("input","leaflet-styleeditor-input",t);return a.setAttribute("type","number"),a.setAttribute("value",n),a.setAttribute("min",r),a.setAttribute("max",i),a.setAttribute("step",o),L.DomEvent.addListener(a,"change",function(t){t.stopPropagation(),e(t)}),L.DomEvent.addListener(a,"keyup",function(t){t.stopPropagation(),e(t)}),a},createSelectInput:function(t,n,e){var r=L.DomUtil.create("button","leaflet-styleeditor-select leaflet-styleeditor-select-marker",t),i=this.options.selectBoxImage=L.DomUtil.create("img","leaflet-styleeditor-select-image",r),o=this.options.selectOptionWrapper=L.DomUtil.create("ul","leaflet-styleeditor-select-option-wrapper leaflet-styleeditor-hidden",t);return o.id="leaflet-styleeditor-select-option-wrapper",L.DomEvent.addListener(r,"click",this.toggleSelectInput,this),L.DomEvent.addListener(i,"click",this.toggleSelectInput,this),this.options.selectImages=[],e.forEach(function(t){var e=L.DomUtil.create("li","leaflet-styleeditor-select-option",o),n=L.DomUtil.create("img","leaflet-styleeditor-select-option-image",e);n.setAttribute("value",t),this.options.selectImages.push(n)},this),L.DomEvent.addListener(o,"click",function(t){if(t.stopPropagation(),"UL"!==t.target.nodeName){var e=t.target;"LI"===t.target.nodeName&&(e=t.target.childNodes[0]),n({target:e})}},this),r},styleSelectInput:function(){var t=this.options.selectBoxImage;if(this.options.currentElement){var e=this.options.currentElement.target.options.icon.options.icon;e?(t.src=this.getIconSrc("s",e),this.showElement(t)):this.hideElement(t)}else this.hideElement(t);this.options.selectImages.forEach(function(t){t.src=this.getIconSrc("s",t.getAttribute("value"))},this),this.hideSelectInput()},toggleSelectInput:function(t){L.DomEvent.stopPropagation(t);var e=this.options.selectOptionWrapper;L.DomUtil.hasClass(e,"leaflet-styleeditor-hidden")?this.showElement(e):this.hideElement(e)},hideSelectInput:function(t){if(!(t&&t.target&&t.target.tagName&&L.DomUtil.hasClass(t.target,"leaflet-styleeditor-select"))){var e=this.options.selectOptionWrapper;e||(e=L.DomUtil.get("leaflet-styleeditor-select-option-wrapper")),this.hideElement(e)}},getIconSrc:function(t,e){var n=this.options.currentMarkerStyle;return e||(e=n.icon),t||(t=n.size),this.options.markerApi+t+"/pin-"+t+"-"+e+"+"+n.color+"@2x.png"},setStyle:function(t,e){var n={};n[t]=e;var r=this.options.currentElement.target;if(r.setStyle(n),this.fireChangeEvent(r),r.getLayers){var i=r.getLayers();0<i.length&&(r.options=JSON.parse(JSON.stringify(i[0].options)),delete r.options)}},fireChangeEvent:function(t){this.options.map.fireEvent("styleeditor:changed",t)},componentToHex:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},rgbToHex:function(t){return t=t.substring(4).replace(")","").split(","),"#"+this.componentToHex(parseInt(t[0],10))+this.componentToHex(parseInt(t[1],10))+this.componentToHex(parseInt(t[2],10))},createPointBufferType:function(){var t=this.options.styleEditorUi.pointBufferTypeDiv,e=L.DomUtil.create("div","leaflet-styleeditor-interior-element",t);L.DomUtil.create("br","",e),L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.buffer.type;var n=L.DomUtil.create("select","leaflet-styleeditor-select",e),r=L.DomUtil.create("option",null,n);r.text=L.styleEditorLocal.buffer.outer,n.add(r,null),this.point_buffer_type=KQ.Common.CommonValues.bufferTypes.outer},createLineBufferType:function(){var t=this.options.styleEditorUi.lineBufferTypeDiv,e=L.DomUtil.create("div","leaflet-styleeditor-interior-element",t);L.DomUtil.create("br","",e),L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.buffer.type;var n=L.DomUtil.create("select","leaflet-styleeditor-select",e),r=L.DomUtil.create("option",null,n);r.text=L.styleEditorLocal.buffer.both,n.add(r,null),this.line_buffer_type=2,L.DomEvent.addListener(n,"change",function(t){t.stopPropagation(),0===t.target.selectedIndex?this.line_buffer_type=KQ.Common.CommonValues.bufferTypes.left:1===t.target.selectedIndex?this.line_buffer_type=KQ.Common.CommonValues.bufferTypes.right:this.line_buffer_type=KQ.Common.CommonValues.bufferTypes.both,console.log("select_type_callback:"+this.line_buffer_type)}.bind(this))},createFillBufferType:function(){var t=this.options.styleEditorUi.fillBufferTypeDiv,e=L.DomUtil.create("div","leaflet-styleeditor-interior-element",t);L.DomUtil.create("br","",e),L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.buffer.type;var n=L.DomUtil.create("select","leaflet-styleeditor-select",e),r=L.DomUtil.create("option",null,n);r.text=L.styleEditorLocal.buffer.outer;var i=L.DomUtil.create("option",null,n);i.text=L.styleEditorLocal.buffer.inner;var o=L.DomUtil.create("option",null,n);o.text=L.styleEditorLocal.buffer.both,n.add(r,null),n.add(i,null),n.add(o,null),this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.outer,L.DomEvent.addListener(n,"change",function(t){t.stopPropagation(),0===t.target.selectedIndex?this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.outer:1===t.target.selectedIndex?this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.inner:this.fill_buffer_type=KQ.Common.CommonValues.bufferTypes.both,console.log("select_type_callback:"+this.fill_buffer_type)}.bind(this))},createBuffer:function(){var r=1e6,t=this.options.styleEditorUi.bufferDiv,e=L.DomUtil.create("div","leaflet-styleeditor-interior-element",t);L.DomUtil.create("label","leaflet-styleeditor-label",e).innerHTML=L.styleEditorLocal.buffer.length,this.buffer_length=1e3;var n=L.DomUtil.create("input","leaflet-styleeditor-input",e);function i(t){t.stopPropagation(),this.buffer_length=t.target.value,console.log("input_length_callback:"+this.buffer_length)}n.setAttribute("type","number"),n.setAttribute("value",this.buffer_length),n.setAttribute("min",0),n.setAttribute("max",r),n.setAttribute("step",1),L.DomEvent.addListener(n,"change",i.bind(this)),L.DomEvent.addListener(n,"keyup",i.bind(this));var o=L.DomUtil.create("div","leaflet-styleeditor-interior-element",t);L.DomUtil.create("label","leaflet-styleeditor-label",o).innerHTML=L.styleEditorLocal.buffer.unit;var a=L.DomUtil.create("select","leaflet-styleeditor-select",o),s=L.DomUtil.create("option",null,a);s.text="m";var l=L.DomUtil.create("option",null,a);l.text="km",a.add(s,null),a.add(l,null),this.buffer_unit=0,L.DomEvent.addListener(a,"change",function(t){t.stopPropagation(),this.buffer_unit=t.target.selectedIndex,console.log("select_unit_callback:"+this.buffer_unit)}.bind(this));var u=this,c=L.DomUtil.create("div","leaflet-styleeditor-interior-element",t);$(c).append("<input id='reserve_graphics' class='leaflet-styleeditor-input-checkbox' type='checkbox'><label class='leaflet-styleeditor-input-checkbox-label'>"+KQ.Local.Control.styleEditor.reservedGraphics()+"</label>"),$("#reserve_graphics").click(function(){u.is_reserve_graphics=$("#reserve_graphics").prop("checked")});var h=L.DomUtil.create("button","k-primary buffer-button",t);h.innerHTML=L.styleEditorLocal.buffer.buffer,$(".buffer-button").kendoButton({type:"submit"}),L.DomEvent.addListener(h,"click",function(t){t.stopPropagation();var e=this.buffer_length;this.buffer_unit===KQ.Common.CommonValues.bufferUnit.km&&(e*=1e3),r<e&&this.options.errorCallback(L.styleEditorLocal.buffer.msgLengthTooLong+" "+r+"m"),this.buffer_shape_type=KQ.Common.CommonValues.shapeTypes.point;var n=this.options.currentElement.target;n instanceof L.Polygon||n instanceof L.LayerGroup||n instanceof L.Circle?this.buffer_shape_type=KQ.Common.CommonValues.shapeTypes.fill:n instanceof L.Polyline&&(this.buffer_shape_type=KQ.Common.CommonValues.shapeTypes.line),this.options.bufferCallback(this)}.bind(this))}})},{}],3:[function(t,e,n){function d(t){var e,n=t||navigator.userAgent,r=!1,i={i:"Internet Explorer",e:"Edge",f:"Firefox",o:"Opera",s:"Safari",n:"Netscape",c:"Chrome",a:"Android Browser",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",x:"Other"};function o(t,e){if(RegExp(e,"i").test(n))return t}var a=o("bot","bot|spider|archiver|transcoder|crawl|checker|monitoring|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|microsoft|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Gecko Expeditor")||o("discontinued browser","camino|flot|k-meleon|fennec|galeon|chromeframe|coolnovo")||o("complicated device browser","SMART-TV|SmartTV")||o("niche browser","Dorado|Whale|SamsungBrowser|MIDP|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|QupZilla|Otter|Midori|qutebrowser")||o("mobile without upgrade path or landing page","kindle|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10")||o("android(chrome) web view","; wv"),s=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(n);if(a)return{n:"x",v:0,t:"other browser",donotnotify:a};for(var l=[["CriOS.VV","c"],["FxiOS.VV","f"],["Trident.*rv:VV","i"],["Trident.VV","io"],["UCBrowser.VV","uc"],["MSIE.VV","i"],["Edge.VV","e"],["Vivaldi.VV","v"],["OPR.VV","o"],["YaBrowser.VV","y"],["Chrome.VV","c"],["Firefox.VV","f"],["Version.VV.*Safari","s"],["Safari.VV","so"],["Opera.*Version.VV","o"],["Opera.VV","o"],["Netscape.VV","n"]],u=0;u<l.length;u++)if(n.match(new RegExp(l[u][0].replace("VV","(\\d+\\.?\\d+)"),"i"))){e=l[u][1];break}if("v"===e||"y"===e||"uc"===e)var c=RegExp.$1.split("."),h=c[0]+"."+("00".substring(0,2-c[1].length)+c[1]);else h=Math.round(10*parseFloat(RegExp.$1))/10;if(!e)return{n:"x",v:0,t:i[e],mobile:s};if(/windows.nt.5.0|windows.nt.4.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5|os x 10.6|os x 10.7/i.test(n)&&(r="oldOS"),/iphone|ipod|ipad|ios/i.test(n))return n.replace("_",".").match(new RegExp("OS.(\\d+\\.?\\d?)","i")),e="iOS",h=parseFloat(RegExp.$1),Math.max(window.screen.height,window.screen.width)<=480||window.devicePixelRatio<2?{n:"s",v:h,t:"iOS "+h,donotnotify:"iOS without upgrade path",mobile:s}:{n:"s",v:h,t:"iOS "+h,donotnotify:!1,mobile:s};if(-1<n.indexOf("Android")&&"s"===e){var f=parseInt((/WebKit\/([0-9]+)/i.exec(n)||0)[1],10)||2e3;if(f<=534)return{n:"a",v:f,t:i.a,mob:!0,donotnotify:r,mobile:s}}return"f"!=e||45!=Math.round(h)&&52!=Math.round(h)||(r="ESR"),"so"==e&&(h=4,e="s"),"i"==e&&7==h&&window.XDomainRequest&&(h=8),"io"==e&&(e="i",h=6<h?11:5<h?10:4<h?9:3.1<h?8:3<h?7:9),"e"==e?{n:"i",v:h,t:i[e]+" "+h,donotnotify:r,mobile:s}:{n:e,v:h,t:i[e]+" "+h,donotnotify:r,mobile:s}}e.exports=function(t,e){var n,r,i=window.navigator,o=(t=window._buorgres=t||{}).l||(i.languages?i.languages[0]:null)||i.language||i.browserLanguage||i.userLanguage||document.documentElement.getAttribute("lang")||"en";t.ll=o=o.replace("_","-").toLowerCase().substr(0,2),t.apiver=t.api||t.c||-1;var a={i:12,f:53,o:44,s:10.1,n:20,c:58,y:17.04,v:1.1,uc:11.3},s={i:-2,f:-4,o:-4,s:-1.7,n:12,c:-4,a:534,y:-.02,v:-.02,uc:-.03};r=t.apiver<4?{i:9,f:10,o:20,s:7}:{i:8,f:5,o:12.5,s:6.2};t.vs;var l=t.vs||s;for(n in s)l[n]||(l[n]=s[n]),a[n]&&l[n]>=a[n]&&(l[n]=a[n]-.2),a[n]&&l[n]<0&&(l[n]=a[n]+l[n]),r[n]&&l[n]<r[n]&&(l[n]=r[n]);t.vsf=l,t.reminder<.1||0===t.reminder?t.reminder=0:t.reminder=t.reminder||24,t.reminderClosed=t.reminderClosed||168,t.onshow=t.onshow||function(t){},t.onclick=t.onclick||function(t){},t.onclose=t.onclose||function(t){},t.pageurl=t.pageurl||location.hostname||"x",t.newwindow=!1!==t.newwindow,t.test=e||t.test||"#test-bu"===location.hash||"#test-bu-beta"===location.hash||!1;var u=d();if(!t.test){if(!u||!u.n||"x"===u.n||!1!==u.donotnotify||-1<document.cookie.indexOf("browserupdateorg=pause")&&0<t.reminder)return;if(u.v>l[u.n]||u.mobile&&!1===t.mobile)return}t.setCookie=function(t){document.cookie="browserupdateorg=pause; expires="+new Date((new Date).getTime()+36e5*t).toGMTString()+"; path=/"},0<t.reminder&&t.setCookie(t.reminder),t.nomessage?t.onshow(t):c()};var c=function(){var e=window._buorgres,t=e.ll,n=d(),r=e.burl||"http://browser-update.org/";e.url||(e.l?e.url=r+t+"/update-browser.html#24:"+e.pageurl:e.url=r+"update-browser.html#24:"+e.pageurl);if(1e3*Math.random()<1&&!e.test&&!e.betatest){var i=new Image,o=e["text_"+t]||e.text||"",a=encodeURIComponent("frac=1000&txt="+o+"&apiver="+e.apiver);i.src=r+"count.php?what=noti&from="+n.n+"&fromv="+n.v+"&ref="+escape(e.pageurl)+"&jsv=24&tv=24&extra="+a}var s={en:"<b>Your web browser ({brow_name}) is out of date.</b> Update your browser for more security, speed and the best experience on this site. <a{up_but}>Update browser</a> <a{ignore_but}>Ignore</a>",ar:"<b> متصفح الويب ({brow_name}) الخاص بك قديم.</b> قُم بتحديث متصفحك للحصول على مزيدٍ من الحماية والراحة وتجربة أفضل على هذا الموقع. <a{up_but}> تحديث المتصفح</a> <a{ignore_but}> تجاهل</a>",bg:"<b>Вашият браузър ({brow_name}) не е актуализиран.</b> Актуализирайте го за повече сигурност, удобство и най-добро изживяване на сайта. <a{up_but}>Актуализирайте браузъра</a> <a{ignore_but}>Игнорирайте</a>",ca:"El teu navegador (%s) està <b>desactualitzat.</b> Té <b>vulnerabilitats</b> conegudes i pot <b>no mostrar totes les característiques</b> d'aquest i altres llocs web. <a%s>Aprèn a actualitzar el navegador</a>",cs:"<b>Váš webový prohlížeč ({brow_name}) je zastaralý .</b> Pro větší bezpečnost, pohodlí a optimální zobrazení této stránky si prosím svůj prohlížeč aktualizujte. <a{up_but}>Aktualizovat prohlížeč</a> <a{ignore_but}>Ignorovat</a>",da:"<b>Din netbrowser ({brow_name}) er forældet.</b> Opdater din browser for mere sikkerhed, komfort og den bedste oplevelse på denne side. <a{up_but}>Opdater browser</a> <a{ignore_but}>Ignorer</a>",de:"<b>Ihr Browser ({brow_name}) ist veraltet.</b> <span>Aktualisieren Sie Ihren Browser für mehr Sicherheit, Komfort und die einwandfreie Nutzung dieser Webseite.</span> <a{up_but}>Browser aktualisieren</a> <a{ignore_but}>Ignorieren</a>",el:"<b>Η έκδοση του προγράμματος περιήγησής σας ({brow_name}) είναι παλιά.</b> Ενημερώστε τον περιηγητή σας για περισσότερη ασφάλεια, άνεση και την βέλτιστη εμπειρία σε αυτή την ιστοσελίδα. <a{up_but}>Αναβάθμιση περιηγητή</a> <a{ignore_but}>Παράβλεψη</a>",es:"<b>Tu navegador web ({brow_name}) no está actualizado.</b> Actualiza tu navegador para tener más seguridad y comodidad y tener la mejor experiencia en este sitio. <a{up_but}>Actualizar navegador</a> <a{ignore_but}>Ignorar</a>",fa:"مرورگر شما (%s) <b>از رده خارج شده</b> می باشد. این مرورگر دارای <b>مشکلات امنیتی شناخته شده</b> می باشد و <b>نمی تواند تمامی ویژگی های این</b> وب سایت و دیگر وب سایت ها را به خوبی نمایش دهد. <a%s>در خصوص گرفتن راهنمایی درخصوص نحوه ی به روز رسانی مرورگر خود اینجا کلیک کنید.</a>",fi:"<b>Selaimesi ({brow_name}) on vanhentunut.</b> Päivitä selaimesi parantaaksesi turvallisuutta, mukavuutta ja käyttökokemusta tällä sivustolla. <a{up_but}>Päivitä selain</a> <a{ignore_but}>Ohita</a>",fr:"<b>Votre navigateur web ({brow_name}) n'est pas à jour.</b> Mettez votre navigateur à jour pour plus de sécurité, de confort et une expérience optimale sur ce site. <a{up_but}>Mettre le navigateur à jour</a> <a{ignore_but}>Ignorer</a>",ga:"Tá an líonléitheoir agat (%s) <b>as dáta.</b> Tá <b>laigeachtaí slándála</b> a bhfuil ar eolas ann agus b'fhéidir <b>nach taispeánfaidh sé gach gné</b> den suíomh gréasáin seo ná cinn eile. <a%s>Foghlaim conas do líonléitheoir a nuashonrú</a>",gl:"O seu navegador (%s) está <b>desactualizado.</b> Ten coñecidos <b>fallos de seguranza</b> e podería <b>non mostrar tódalas características</b> deste e outros sitios web. <a%s>Aprenda como pode actualizar o seu navegador</a>",he:"הדפדפן שלך (%s) <b>אינו מעודכן.</b> יש לו <b>בעיות אבטחה ידועות</b> ועשוי <b>לא להציג את כל התכונות</b> של אתר זה ואתרים אחרים. <a%s>למד כיצד לעדכן את הדפדפן שלך</a>",hi:"यह वेबसाइट आपको याद दिलाना चाहती हैं: आपका ब्राउज़र (%s) <b> आउट ऑफ़ डेट </ b> हैं। <a%s> और अधिक सुरक्षा, आराम और इस साइट पर सबसे अच्छा अनुभव करने लिए आपके ब्राउज़र को अपडेट करें</a>।",hu:"<b>Az ön ({brow_name}) böngészője elavult.</b> Frissítse a böngészőjét több biztonság, kényelem és a legjobb felhasználói élmény érdekében ezen az oldalon. <a{up_but}>Böngésző frissítése</a> <a{ignore_but}>Mellőzés</a>",id:"<b>Peramban web Anda ({brow_name}) sudah lawas.</b> Perbarui peramban Anda untuk pengalaman terbaik yang lebih aman dan nyaman di situs ini. <a{up_but}>Perbarui peramban</a> <a{ignore_but}>Abaikan</a>",it:"<b>Il suo browser web ({brow_name}) non è aggiornato.</b> Aggiorni il suo browser per ottenere maggiore sicurezza, comfort, e la migliore esperienza possibile su questo sito. <a{up_but}>Aggiorna il browser</a> <a{ignore_but}>Ignora</a>",ja:"<b>お使いのウェブブラウザ ({brow_name}) は古すぎます。</b>安全性と快適さを向上させ、このサイトで最高の体験が出来るよう、お使いのブラウザをアップデートしましょう。<a{up_but}>ブラウザをアップデートする</a> <a{ignore_but}>無視する</a>",ko:"<b>현재 귀하의 웹브라우저 ({brow_name})은(는) 구버전입니다.</b> 본 사이트의 향상된 보안 및 최고 품질의 편안한 서비스를 사용하기 위해서 브라우저를 업데이트해 주십시오. <a{up_but}>브라우저 업데이트</a> <a{ignore_but}>무시하기</a>",lv:"Jūsu pārlūkprogramma (%s) ir <b>novecojusi.</b>  Tai ir zināmas <b>drošības problēmas</b>, un tā var attēlot šo un citas  tīmekļa lapas <b>nekorekti.</b> <a%s>Uzzini, kā atjaunot savu pārlūkprogrammu</a>",ms:"<b>Pelayar web ({brow_name}) anda sudah usang.</b> Kemas kini pelayar anda untuk memperoleh lebih keselamatan, keselesaan dan pengalaman terbaik di tapak ini. <a{up_but}>Kemas kini pelayar</a> <a{ignore_but}>Abaikan</a>",nl:"<b>Uw webbrowser ({brow_name}) is verouderd.</b> Update uw browser voor meer veiligheid, comfort en de beste ervaring op deze site. <a{up_but}>Update browser</a> <a{ignore_but}>Negeer</a>",no:"<b>Nettleseren din,({brow_name}), er utdatert.</b> Oppdater nettleseren din for mer sikkerhet, komfort og den beste opplevelsen på denne siden. <a{up_but}>Oppdater nettleser</a> <a{ignore_but}>Ignorer</a>",pl:"<b>Państwa przeglądarka ({brow_name}) jest nieaktualna.</b> Aby zapewnić większe bezpieczeństwo, wygodę i komfort użytkowania w tej witrynie, proszę zaktualizować swoją przeglądarkę. <a{up_but}>Zaktualizuj przeglądarkę</a> <a{ignore_but}>Zignoruj</a>",pt:"<b>Seu navegador de internet ({brow_name}) está desatualizado.</b> Atualize seu navegador para obter mais segurança, conforto e a melhor experiência neste site. <a{up_but}>Atualizar navegador</a> <a{ignore_but}>Ignorar</a>",ro:"<b>Browserul dumneavoastră ({brow_name}) nu este actualizat.</b> Actualizați-vă browserul pentru securitate sporită, confort și cea mai bună experiență pe site. <a{up_but}>Actualizează browser</a><a{ignore_but}>Ignoră</a>",ru:"<b>Ваш веб-браузер ({brow_name}) устарел.</b> Обновите свой браузер, чтобы сделать пребывание на этом сайте более безопасным, комфортным и продуктивным. <a{up_but}>Обновить браузер</a> <a{ignore_but}>Игнорировать</a>",sk:"<b> Váš internetový prehliadač ({brow_name}) je zastaraný.</b> Aktualizujte váš prehliadač pre vyššiu bezpečnosť, komfort a najlepší zážitok na tejto stránke. <a{up_but}>Aktualizovať prehliadač</a><a{ignore_but}>Ignorovať</a>",sl:"Vaš brskalnik (%s) je <b>zastarel.</b> Ima več <b>varnostnih pomankljivosti</b> in morda <b>ne bo pravilno prikazal</b> te ali drugih strani. <a%s>Poglejte kako lahko posodobite svoj brskalnik</a>",sq:"Shfletuesi juaj (%s) është <b>ca i vjetër.</b> Ai ka <b>të meta sigurie</b> të njohura dhe mundet të <b>mos i shfaqë të gjitha karakteristikat</b> e kësaj dhe shumë faqeve web të tjera. <a%s>Mësoni se si të përditësoni shfletuesin tuaj</a>",sr:"Vaš pretraživač (%s) je <b>zastareo.</b> Ima poznate <b>sigurnosne probleme</b> i najverovatnije <b>neće prikazati sve funkcionalnisti</b> ovog i drugih sajtova. <a%s>Nauči više o nadogradnji svog pretraživača</a>",sv:"<b>Din webbläsare ({brow_name}) är föråldrad.</b> Uppdatera din webbläsare för bättre säkerhet, bekvämlighet och den bästa upplevelsen på den här sidan. <a{up_but}>Uppdatera webbläsare</a> <a{ignore_but}>Avstå</a>",th:"เว็บไซต์นี้อยากจะเตือนคุณ: เบราว์เซอร์ (%s) ของคุณนั้น <b>ล้าสมัยแล้ว</b> <a%s>ปรับปรุงเบราว์เซอร์ของคุณ</a> เพื่อเพิ่ม ความปลอดภัย ความสะดวกสบายและประสบการณ์ที่ดีที่สุดในเว็บไซต์นี้",tr:"<b>({brow_name}) internet tarayıcınız güncel değil.</b> Bu sitede daha fazla güvenlik, konfor ve en iyi deneyim için tarayıcınızı güncelleyin. <a{up_but}>Tarayıcıyı güncelle</a> <a{ignore_but}>Yoksay</a>",uk:"<b>Ваш браузер ({brow_name}) є застарілим.</b> Оновіть його заради безпечнішого, зручнішого та приємнішого перегляду цього та інших сайтів. <a{up_but}>Оновити</a> <a{ignore_but}>Скасувати</a>",vi:"<b>Trình duyệt web của bạn ({brow_name}) đã cũ.</b> Hãy nâng cấp trình duyệt của bạn để được an toàn và thuận lợi hơn đồng thời có được trải nghiệm tốt nhất với trang này. <a{up_but}>Nâng cấp trình duyệt</a> <a{ignore_but}>Bỏ qua</a>",zh:"<b>您的网页浏览器 ({brow_name}) 已过期。</b>更新您的浏览器，以提高安全性和舒适性，并获得访问本网站的最佳体验。<a{up_but}>更新浏览器</a> <a{ignore_but}>忽略</a>","zh-tw":"<b>您的網頁瀏覽器  ({brow_name}) 已經過時。</b> 請更新您的瀏覽器，以在此網站取得更安全、舒適的最佳瀏覽體驗。<a{up_but}>更新瀏覽器</a><a{ignore_but}>忽略</a>"};s=e["text_"+t]||e.text||s[t]||s.en;var l="";e.newwindow&&(l=' target="_blank" rel="noopener"');var u=e.div=document.createElement("div");u.id="buorg",u.className="buorg";var c="<style>.buorg {background: #FDF2AB no-repeat 14px center url("+r+"img/small/"+n.n+".png);}</style>",h="<style>.buorg {background-position: 8px 17px; position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer;        background-color: #fff8ea;    font: 17px Calibri,Helvetica,Arial,sans-serif;    box-shadow: 0 0 5px rgba(0,0,0,0.2);}    .buorg div { padding: 11px 12px 11px 30px;  line-height: 1.7em; }    .buorg div a,.buorg div a:visited{ text-indent: 0; color: #fff; text-decoration: none; box-shadow: 0 0 2px rgba(0,0,0,0.4); padding: 1px 10px; border-radius: 4px; font-weight: normal; background: #5ab400;    white-space: nowrap;    margin: 0 2px; display: inline-block;}    #buorgig{ background-color: #edbc68;}    @media only screen and (max-width: 700px){.buorg div { padding:5px 12px 5px 9px; text-indent: 22px;line-height: 1.3em;}.buorg {background-position: 9px 8px;}}    @keyframes buorgfly {from {opacity:0;transform:translateY(-50px)} to {opacity:1;transform:translateY(0px)}}     .buorg { animation-name: buorgfly; animation-duration: 1s; animation-timing-function: ease-out;}</style>";-1===s.indexOf("{brow_name}")?(s=function(){for(var t=arguments,e=t[0],n=1;n<t.length;++n)e=e.replace(/%s/,t[n]);return e}(s,n.t,' id="buorgul" href="'+e.url+'"'+l),c+="<style>.buorg {position:absolute;position:fixed;z-index:111111; width:100%; top:0px; left:0px; border-bottom:1px solid #A29330; text-align:left; cursor:pointer; font: 13px Arial,sans-serif;color:#000;}    .buorg div { padding:5px 36px 5px 40px; }    .buorg>div>a,.buorg>div>a:visited{color:#E25600; text-decoration: underline;}    #buorgclose{position:absolute;right:6px;top:0px;height:20px;width:12px;font:18px bold;padding:0;}    #buorga{display:block;}    @media only screen and (max-width: 700px){.buorg div { padding:5px 15px 5px 9px; }}</style>",u.innerHTML="<div>"+s+'<div id="buorgclose"><a id="buorga">&times;</a></div></div>'+c,e.addmargin=!0):("bottom"===e.position?h+="<style>.buorg {bottom:0; top:auto; border-top:1px solid #A29330; } @keyframes buorgfly {from {opacity:0;transform:translateY(50px)} to {opacity:1;transform:translateY(0px)}} </style>":"corner"===e.position?h+="<style>.buorg { width:300px; top:50px; right:50px; left:auto; border:1px solid #A29330; } .buorg div b {display:block;} .buorg div span { display: block; } .buorg div a {margin: 4px 2px;}        </style>":e.addmargin=!0,s=s.replace("{brow_name}",n.t).replace("{up_but}",' id="buorgul" href="'+e.url+'"'+l).replace("{ignore_but}",' id="buorgig" href=""'),u.innerHTML="<div>"+s+"</div>"+c+h),e.text=s,e.container?(e.container.appendChild(u),e.addmargin=!1):document.body.insertBefore(u,document.body.firstChild),u.onclick=function(){return e.newwindow?window.open(e.url,"_blank"):window.location.href=e.url,e.setCookie(e.reminderClosed),e.onclick(e),!1};try{document.getElementById("buorgul").onclick=function(t){return(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0,e.div.style.display="none",f.style.marginTop=e.bodymt,e.onclick(e),!0}}catch(t){}if(e.addmargin){var f=document.getElementsByTagName("html")[0]||document.body;e.bodymt=f.style.marginTop,f.style.marginTop=u.clientHeight+"px"}if((document.getElementById("buorga")||document.getElementById("buorgig")).onclick=function(t){return(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0,e.div.style.display="none",e.addmargin&&(f.style.marginTop=e.bodymt),e.onclose(e),e.setCookie(e.reminderClosed),!1},e.noclose){var p=document.getElementById("buorga")||document.getElementById("buorgig");p.parentNode.removeChild(p)}e.onshow(e)}},{}],4:[function(t,e,n){"use strict";t("../libs/controls/styleeditor/Leaflet.StyleEditor"),t("../libs/controls/styleeditor/Leaflet.StyleForms");t("../libs/other/update.npm.full")({vs:{i:12,f:-4,o:-4,s:8,c:-4},api:4})},{"../libs/controls/styleeditor/Leaflet.StyleEditor":1,"../libs/controls/styleeditor/Leaflet.StyleForms":2,"../libs/other/update.npm.full":3}]},{},[4]);